(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var KA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cS={exports:{}},Dd={},uS={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),YA=Symbol.for("react.portal"),qA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),QA=Symbol.for("react.profiler"),ZA=Symbol.for("react.provider"),JA=Symbol.for("react.context"),e5=Symbol.for("react.forward_ref"),t5=Symbol.for("react.suspense"),n5=Symbol.for("react.memo"),r5=Symbol.for("react.lazy"),q_=Symbol.iterator;function i5(e){return e===null||typeof e!="object"?null:(e=q_&&e[q_]||e["@@iterator"],typeof e=="function"?e:null)}var pS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fS=Object.assign,dS={};function Il(e,t,n){this.props=e,this.context=t,this.refs=dS,this.updater=n||pS}Il.prototype.isReactComponent={};Il.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Il.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hS(){}hS.prototype=Il.prototype;function Yy(e,t,n){this.props=e,this.context=t,this.refs=dS,this.updater=n||pS}var qy=Yy.prototype=new hS;qy.constructor=Yy;fS(qy,Il.prototype);qy.isPureReactComponent=!0;var X_=Array.isArray,mS=Object.prototype.hasOwnProperty,Xy={current:null},gS={key:!0,ref:!0,__self:!0,__source:!0};function yS(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)mS.call(t,r)&&!gS.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:wu,type:e,key:o,ref:a,props:i,_owner:Xy.current}}function o5(e,t){return{$$typeof:wu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qy(e){return typeof e=="object"&&e!==null&&e.$$typeof===wu}function a5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Q_=/\/+/g;function bm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a5(""+e.key):t.toString(36)}function yf(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wu:case YA:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+bm(a,0):r,X_(i)?(n="",e!=null&&(n=e.replace(Q_,"$&/")+"/"),yf(i,t,n,"",function(u){return u})):i!=null&&(Qy(i)&&(i=o5(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Q_,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",X_(e))for(var s=0;s<e.length;s++){o=e[s];var l=r+bm(o,s);a+=yf(o,t,n,l,i)}else if(l=i5(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=r+bm(o,s++),a+=yf(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Cp(e,t,n){if(e==null)return e;var r=[],i=0;return yf(e,r,"","",function(o){return t.call(n,o,i++)}),r}function s5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Er={current:null},vf={transition:null},l5={ReactCurrentDispatcher:Er,ReactCurrentBatchConfig:vf,ReactCurrentOwner:Xy};function vS(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:Cp,forEach:function(e,t,n){Cp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cp(e,function(){t++}),t},toArray:function(e){return Cp(e,function(t){return t})||[]},only:function(e){if(!Qy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=Il;Nt.Fragment=qA;Nt.Profiler=QA;Nt.PureComponent=Yy;Nt.StrictMode=XA;Nt.Suspense=t5;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l5;Nt.act=vS;Nt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fS({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Xy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)mS.call(t,l)&&!gS.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:wu,type:e.type,key:i,ref:o,props:r,_owner:a}};Nt.createContext=function(e){return e={$$typeof:JA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZA,_context:e},e.Consumer=e};Nt.createElement=yS;Nt.createFactory=function(e){var t=yS.bind(null,e);return t.type=e,t};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:e5,render:e}};Nt.isValidElement=Qy;Nt.lazy=function(e){return{$$typeof:r5,_payload:{_status:-1,_result:e},_init:s5}};Nt.memo=function(e,t){return{$$typeof:n5,type:e,compare:t===void 0?null:t}};Nt.startTransition=function(e){var t=vf.transition;vf.transition={};try{e()}finally{vf.transition=t}};Nt.unstable_act=vS;Nt.useCallback=function(e,t){return Er.current.useCallback(e,t)};Nt.useContext=function(e){return Er.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return Er.current.useDeferredValue(e)};Nt.useEffect=function(e,t){return Er.current.useEffect(e,t)};Nt.useId=function(){return Er.current.useId()};Nt.useImperativeHandle=function(e,t,n){return Er.current.useImperativeHandle(e,t,n)};Nt.useInsertionEffect=function(e,t){return Er.current.useInsertionEffect(e,t)};Nt.useLayoutEffect=function(e,t){return Er.current.useLayoutEffect(e,t)};Nt.useMemo=function(e,t){return Er.current.useMemo(e,t)};Nt.useReducer=function(e,t,n){return Er.current.useReducer(e,t,n)};Nt.useRef=function(e){return Er.current.useRef(e)};Nt.useState=function(e){return Er.current.useState(e)};Nt.useSyncExternalStore=function(e,t,n){return Er.current.useSyncExternalStore(e,t,n)};Nt.useTransition=function(){return Er.current.useTransition()};Nt.version="18.3.1";uS.exports=Nt;var Me=uS.exports;const c5=lS(Me);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u5=Me,p5=Symbol.for("react.element"),f5=Symbol.for("react.fragment"),d5=Object.prototype.hasOwnProperty,h5=u5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m5={key:!0,ref:!0,__self:!0,__source:!0};function xS(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)d5.call(t,r)&&!m5.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:p5,type:e,key:o,ref:a,props:i,_owner:h5.current}}Dd.Fragment=f5;Dd.jsx=xS;Dd.jsxs=xS;cS.exports=Dd;var z=cS.exports,vg={},_S={exports:{}},ti={},wS={exports:{}},ES={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ye,je){var Ne=ye.length;ye.push(je);e:for(;0<Ne;){var qe=Ne-1>>>1,re=ye[qe];if(0<i(re,je))ye[qe]=je,ye[Ne]=re,Ne=qe;else break e}}function n(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var je=ye[0],Ne=ye.pop();if(Ne!==je){ye[0]=Ne;e:for(var qe=0,re=ye.length,oe=re>>>1;qe<oe;){var _e=2*(qe+1)-1,ut=ye[_e],B=_e+1,E=ye[B];if(0>i(ut,Ne))B<re&&0>i(E,ut)?(ye[qe]=E,ye[B]=Ne,qe=B):(ye[qe]=ut,ye[_e]=Ne,qe=_e);else if(B<re&&0>i(E,Ne))ye[qe]=E,ye[B]=Ne,qe=B;else break e}}return je}function i(ye,je){var Ne=ye.sortIndex-je.sortIndex;return Ne!==0?Ne:ye.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],f=1,d=null,g=3,y=!1,v=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ye){for(var je=n(u);je!==null;){if(je.callback===null)r(u);else if(je.startTime<=ye)r(u),je.sortIndex=je.expirationTime,t(l,je);else break;je=n(u)}}function b(ye){if(x=!1,w(ye),!v)if(n(l)!==null)v=!0,Ge(D);else{var je=n(u);je!==null&&Ke(b,je.startTime-ye)}}function D(ye,je){v=!1,x&&(x=!1,P(L),L=-1),y=!0;var Ne=g;try{for(w(je),d=n(l);d!==null&&(!(d.expirationTime>je)||ye&&!K());){var qe=d.callback;if(typeof qe=="function"){d.callback=null,g=d.priorityLevel;var re=qe(d.expirationTime<=je);je=e.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&r(l),w(je)}else r(l);d=n(l)}if(d!==null)var oe=!0;else{var _e=n(u);_e!==null&&Ke(b,_e.startTime-je),oe=!1}return oe}finally{d=null,g=Ne,y=!1}}var I=!1,H=null,L=-1,X=5,Y=-1;function K(){return!(e.unstable_now()-Y<X)}function se(){if(H!==null){var ye=e.unstable_now();Y=ye;var je=!0;try{je=H(!0,ye)}finally{je?ae():(I=!1,H=null)}}else I=!1}var ae;if(typeof k=="function")ae=function(){k(se)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,wt=Re.port2;Re.port1.onmessage=se,ae=function(){wt.postMessage(null)}}else ae=function(){C(se,0)};function Ge(ye){H=ye,I||(I=!0,ae())}function Ke(ye,je){L=C(function(){ye(e.unstable_now())},je)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ye){ye.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,Ge(D))},e.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ye?Math.floor(1e3/ye):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ye){switch(g){case 1:case 2:case 3:var je=3;break;default:je=g}var Ne=g;g=je;try{return ye()}finally{g=Ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ye,je){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Ne=g;g=ye;try{return je()}finally{g=Ne}},e.unstable_scheduleCallback=function(ye,je,Ne){var qe=e.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?qe+Ne:qe):Ne=qe,ye){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Ne+re,ye={id:f++,callback:je,priorityLevel:ye,startTime:Ne,expirationTime:re,sortIndex:-1},Ne>qe?(ye.sortIndex=Ne,t(u,ye),n(l)===null&&ye===n(u)&&(x?(P(L),L=-1):x=!0,Ke(b,Ne-qe))):(ye.sortIndex=re,t(l,ye),v||y||(v=!0,Ge(D))),ye},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(ye){var je=g;return function(){var Ne=g;g=je;try{return ye.apply(this,arguments)}finally{g=Ne}}}})(ES);wS.exports=ES;var g5=wS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5=Me,ei=g5;function me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bS=new Set,Yc={};function Ss(e,t){xl(e,t),xl(e+"Capture",t)}function xl(e,t){for(Yc[e]=t,e=0;e<t.length;e++)bS.add(t[e])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xg=Object.prototype.hasOwnProperty,v5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z_={},J_={};function x5(e){return xg.call(J_,e)?!0:xg.call(Z_,e)?!1:v5.test(e)?J_[e]=!0:(Z_[e]=!0,!1)}function _5(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w5(e,t,n,r){if(t===null||typeof t>"u"||_5(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function br(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new br(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new br(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new br(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new br(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new br(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new br(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new br(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new br(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new br(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zy=/[\-:]([a-z])/g;function Jy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zy,Jy);nr[t]=new br(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zy,Jy);nr[t]=new br(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zy,Jy);nr[t]=new br(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new br(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new br(e,1,!1,e.toLowerCase(),null,!0,!0)});function ev(e,t,n,r){var i=nr.hasOwnProperty(t)?nr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w5(t,n,i,r)&&(n=null),r||i===null?x5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Mo=y5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rp=Symbol.for("react.element"),tl=Symbol.for("react.portal"),nl=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),_g=Symbol.for("react.profiler"),SS=Symbol.for("react.provider"),CS=Symbol.for("react.context"),nv=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),Eg=Symbol.for("react.suspense_list"),rv=Symbol.for("react.memo"),ea=Symbol.for("react.lazy"),RS=Symbol.for("react.offscreen"),e1=Symbol.iterator;function lc(e){return e===null||typeof e!="object"?null:(e=e1&&e[e1]||e["@@iterator"],typeof e=="function"?e:null)}var un=Object.assign,Sm;function Pc(e){if(Sm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sm=t&&t[1]||""}return`
`+Sm+e}var Cm=!1;function Rm(e,t){if(!e||Cm)return"";Cm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{Cm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pc(e):""}function E5(e){switch(e.tag){case 5:return Pc(e.type);case 16:return Pc("Lazy");case 13:return Pc("Suspense");case 19:return Pc("SuspenseList");case 0:case 2:case 15:return e=Rm(e.type,!1),e;case 11:return e=Rm(e.type.render,!1),e;case 1:return e=Rm(e.type,!0),e;default:return""}}function bg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nl:return"Fragment";case tl:return"Portal";case _g:return"Profiler";case tv:return"StrictMode";case wg:return"Suspense";case Eg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CS:return(e.displayName||"Context")+".Consumer";case SS:return(e._context.displayName||"Context")+".Provider";case nv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rv:return t=e.displayName||null,t!==null?t:bg(e.type)||"Memo";case ea:t=e._payload,e=e._init;try{return bg(e(t))}catch{}}return null}function b5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bg(t);case 8:return t===tv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ya(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function S5(e){var t=kS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kp(e){e._valueTracker||(e._valueTracker=S5(e))}function PS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sg(e,t){var n=t.checked;return un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function t1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ya(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TS(e,t){t=t.checked,t!=null&&ev(e,"checked",t,!1)}function Cg(e,t){TS(e,t);var n=ya(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rg(e,t.type,ya(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function n1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Rg(e,t,n){(t!=="number"||Wf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Tc=Array.isArray;function dl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ya(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function kg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(me(91));return un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function r1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(me(92));if(Tc(n)){if(1<n.length)throw Error(me(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ya(n)}}function AS(e,t){var n=ya(t.value),r=ya(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function i1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function MS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?MS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pp,NS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pp=Pp||document.createElement("div"),Pp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C5=["Webkit","ms","Moz","O"];Object.keys(Dc).forEach(function(e){C5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dc[t]=Dc[e]})});function DS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Dc.hasOwnProperty(e)&&Dc[e]?(""+t).trim():t+"px"}function OS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=DS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var R5=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tg(e,t){if(t){if(R5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(me(62))}}function Ag(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mg=null;function iv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ng=null,hl=null,ml=null;function o1(e){if(e=Su(e)){if(typeof Ng!="function")throw Error(me(280));var t=e.stateNode;t&&(t=jd(t),Ng(e.stateNode,e.type,t))}}function LS(e){hl?ml?ml.push(e):ml=[e]:hl=e}function BS(){if(hl){var e=hl,t=ml;if(ml=hl=null,o1(e),t)for(e=0;e<t.length;e++)o1(t[e])}}function IS(e,t){return e(t)}function jS(){}var km=!1;function $S(e,t,n){if(km)return e(t,n);km=!0;try{return IS(e,t,n)}finally{km=!1,(hl!==null||ml!==null)&&(jS(),BS())}}function Xc(e,t){var n=e.stateNode;if(n===null)return null;var r=jd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(me(231,t,typeof n));return n}var Dg=!1;if(ko)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){Dg=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{Dg=!1}function k5(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Oc=!1,Uf=null,Gf=!1,Og=null,P5={onError:function(e){Oc=!0,Uf=e}};function T5(e,t,n,r,i,o,a,s,l){Oc=!1,Uf=null,k5.apply(P5,arguments)}function A5(e,t,n,r,i,o,a,s,l){if(T5.apply(this,arguments),Oc){if(Oc){var u=Uf;Oc=!1,Uf=null}else throw Error(me(198));Gf||(Gf=!0,Og=u)}}function Cs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function FS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function a1(e){if(Cs(e)!==e)throw Error(me(188))}function M5(e){var t=e.alternate;if(!t){if(t=Cs(e),t===null)throw Error(me(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return a1(i),e;if(o===r)return a1(i),t;o=o.sibling}throw Error(me(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(me(189))}}if(n.alternate!==r)throw Error(me(190))}if(n.tag!==3)throw Error(me(188));return n.stateNode.current===n?e:t}function zS(e){return e=M5(e),e!==null?HS(e):null}function HS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=HS(e);if(t!==null)return t;e=e.sibling}return null}var VS=ei.unstable_scheduleCallback,s1=ei.unstable_cancelCallback,N5=ei.unstable_shouldYield,D5=ei.unstable_requestPaint,Sn=ei.unstable_now,O5=ei.unstable_getCurrentPriorityLevel,ov=ei.unstable_ImmediatePriority,WS=ei.unstable_UserBlockingPriority,Kf=ei.unstable_NormalPriority,L5=ei.unstable_LowPriority,US=ei.unstable_IdlePriority,Od=null,Zi=null;function B5(e){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(Od,e,void 0,(e.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:$5,I5=Math.log,j5=Math.LN2;function $5(e){return e>>>=0,e===0?32:31-(I5(e)/j5|0)|0}var Tp=64,Ap=4194304;function Ac(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Ac(s):(o&=a,o!==0&&(r=Ac(o)))}else a=n&~i,a!==0?r=Ac(a):o!==0&&(r=Ac(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Li(t),i=1<<n,r|=e[n],t&=~i;return r}function F5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z5(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Li(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=F5(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function Lg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function GS(){var e=Tp;return Tp<<=1,!(Tp&4194240)&&(Tp=64),e}function Pm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Eu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Li(t),e[t]=n}function H5(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Li(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function av(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Li(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $t=0;function KS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var YS,sv,qS,XS,QS,Bg=!1,Mp=[],la=null,ca=null,ua=null,Qc=new Map,Zc=new Map,ra=[],V5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l1(e,t){switch(e){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":Qc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(t.pointerId)}}function uc(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Su(t),t!==null&&sv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function W5(e,t,n,r,i){switch(t){case"focusin":return la=uc(la,e,t,n,r,i),!0;case"dragenter":return ca=uc(ca,e,t,n,r,i),!0;case"mouseover":return ua=uc(ua,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Qc.set(o,uc(Qc.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Zc.set(o,uc(Zc.get(o)||null,e,t,n,r,i)),!0}return!1}function ZS(e){var t=ss(e.target);if(t!==null){var n=Cs(t);if(n!==null){if(t=n.tag,t===13){if(t=FS(n),t!==null){e.blockedOn=t,QS(e.priority,function(){qS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ig(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mg=r,n.target.dispatchEvent(r),Mg=null}else return t=Su(n),t!==null&&sv(t),e.blockedOn=n,!1;t.shift()}return!0}function c1(e,t,n){xf(e)&&n.delete(t)}function U5(){Bg=!1,la!==null&&xf(la)&&(la=null),ca!==null&&xf(ca)&&(ca=null),ua!==null&&xf(ua)&&(ua=null),Qc.forEach(c1),Zc.forEach(c1)}function pc(e,t){e.blockedOn===t&&(e.blockedOn=null,Bg||(Bg=!0,ei.unstable_scheduleCallback(ei.unstable_NormalPriority,U5)))}function Jc(e){function t(i){return pc(i,e)}if(0<Mp.length){pc(Mp[0],e);for(var n=1;n<Mp.length;n++){var r=Mp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(la!==null&&pc(la,e),ca!==null&&pc(ca,e),ua!==null&&pc(ua,e),Qc.forEach(t),Zc.forEach(t),n=0;n<ra.length;n++)r=ra[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ra.length&&(n=ra[0],n.blockedOn===null);)ZS(n),n.blockedOn===null&&ra.shift()}var gl=Mo.ReactCurrentBatchConfig,qf=!0;function G5(e,t,n,r){var i=$t,o=gl.transition;gl.transition=null;try{$t=1,lv(e,t,n,r)}finally{$t=i,gl.transition=o}}function K5(e,t,n,r){var i=$t,o=gl.transition;gl.transition=null;try{$t=4,lv(e,t,n,r)}finally{$t=i,gl.transition=o}}function lv(e,t,n,r){if(qf){var i=Ig(e,t,n,r);if(i===null)jm(e,t,r,Xf,n),l1(e,r);else if(W5(i,e,t,n,r))r.stopPropagation();else if(l1(e,r),t&4&&-1<V5.indexOf(e)){for(;i!==null;){var o=Su(i);if(o!==null&&YS(o),o=Ig(e,t,n,r),o===null&&jm(e,t,r,Xf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else jm(e,t,r,null,n)}}var Xf=null;function Ig(e,t,n,r){if(Xf=null,e=iv(r),e=ss(e),e!==null)if(t=Cs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=FS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xf=e,null}function JS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O5()){case ov:return 1;case WS:return 4;case Kf:case L5:return 16;case US:return 536870912;default:return 16}default:return 16}}var oa=null,cv=null,_f=null;function e2(){if(_f)return _f;var e,t=cv,n=t.length,r,i="value"in oa?oa.value:oa.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return _f=i.slice(e,1<r?1-r:void 0)}function wf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Np(){return!0}function u1(){return!1}function ni(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Np:u1,this.isPropagationStopped=u1,this}return un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Np)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Np)},persist:function(){},isPersistent:Np}),t}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=ni(jl),bu=un({},jl,{view:0,detail:0}),Y5=ni(bu),Tm,Am,fc,Ld=un({},bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fc&&(fc&&e.type==="mousemove"?(Tm=e.screenX-fc.screenX,Am=e.screenY-fc.screenY):Am=Tm=0,fc=e),Tm)},movementY:function(e){return"movementY"in e?e.movementY:Am}}),p1=ni(Ld),q5=un({},Ld,{dataTransfer:0}),X5=ni(q5),Q5=un({},bu,{relatedTarget:0}),Mm=ni(Q5),Z5=un({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),J5=ni(Z5),e3=un({},jl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),t3=ni(e3),n3=un({},jl,{data:0}),f1=ni(n3),r3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=o3[e])?!!t[e]:!1}function pv(){return a3}var s3=un({},bu,{key:function(e){if(e.key){var t=r3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pv,charCode:function(e){return e.type==="keypress"?wf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l3=ni(s3),c3=un({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d1=ni(c3),u3=un({},bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pv}),p3=ni(u3),f3=un({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),d3=ni(f3),h3=un({},Ld,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m3=ni(h3),g3=[9,13,27,32],fv=ko&&"CompositionEvent"in window,Lc=null;ko&&"documentMode"in document&&(Lc=document.documentMode);var y3=ko&&"TextEvent"in window&&!Lc,t2=ko&&(!fv||Lc&&8<Lc&&11>=Lc),h1=" ",m1=!1;function n2(e,t){switch(e){case"keyup":return g3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rl=!1;function v3(e,t){switch(e){case"compositionend":return r2(t);case"keypress":return t.which!==32?null:(m1=!0,h1);case"textInput":return e=t.data,e===h1&&m1?null:e;default:return null}}function x3(e,t){if(rl)return e==="compositionend"||!fv&&n2(e,t)?(e=e2(),_f=cv=oa=null,rl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return t2&&t.locale!=="ko"?null:t.data;default:return null}}var _3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_3[e.type]:t==="textarea"}function i2(e,t,n,r){LS(r),t=Qf(t,"onChange"),0<t.length&&(n=new uv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bc=null,eu=null;function w3(e){m2(e,0)}function Bd(e){var t=al(e);if(PS(t))return e}function E3(e,t){if(e==="change")return t}var o2=!1;if(ko){var Nm;if(ko){var Dm="oninput"in document;if(!Dm){var y1=document.createElement("div");y1.setAttribute("oninput","return;"),Dm=typeof y1.oninput=="function"}Nm=Dm}else Nm=!1;o2=Nm&&(!document.documentMode||9<document.documentMode)}function v1(){Bc&&(Bc.detachEvent("onpropertychange",a2),eu=Bc=null)}function a2(e){if(e.propertyName==="value"&&Bd(eu)){var t=[];i2(t,eu,e,iv(e)),$S(w3,t)}}function b3(e,t,n){e==="focusin"?(v1(),Bc=t,eu=n,Bc.attachEvent("onpropertychange",a2)):e==="focusout"&&v1()}function S3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bd(eu)}function C3(e,t){if(e==="click")return Bd(t)}function R3(e,t){if(e==="input"||e==="change")return Bd(t)}function k3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $i=typeof Object.is=="function"?Object.is:k3;function tu(e,t){if($i(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xg.call(t,i)||!$i(e[i],t[i]))return!1}return!0}function x1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _1(e,t){var n=x1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=x1(n)}}function s2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?s2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function l2(){for(var e=window,t=Wf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wf(e.document)}return t}function dv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P3(e){var t=l2(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&s2(n.ownerDocument.documentElement,n)){if(r!==null&&dv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=_1(n,o);var a=_1(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T3=ko&&"documentMode"in document&&11>=document.documentMode,il=null,jg=null,Ic=null,$g=!1;function w1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$g||il==null||il!==Wf(r)||(r=il,"selectionStart"in r&&dv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ic&&tu(Ic,r)||(Ic=r,r=Qf(jg,"onSelect"),0<r.length&&(t=new uv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=il)))}function Dp(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ol={animationend:Dp("Animation","AnimationEnd"),animationiteration:Dp("Animation","AnimationIteration"),animationstart:Dp("Animation","AnimationStart"),transitionend:Dp("Transition","TransitionEnd")},Om={},c2={};ko&&(c2=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Id(e){if(Om[e])return Om[e];if(!ol[e])return e;var t=ol[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in c2)return Om[e]=t[n];return e}var u2=Id("animationend"),p2=Id("animationiteration"),f2=Id("animationstart"),d2=Id("transitionend"),h2=new Map,E1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(e,t){h2.set(e,t),Ss(t,[e])}for(var Lm=0;Lm<E1.length;Lm++){var Bm=E1[Lm],A3=Bm.toLowerCase(),M3=Bm[0].toUpperCase()+Bm.slice(1);Ea(A3,"on"+M3)}Ea(u2,"onAnimationEnd");Ea(p2,"onAnimationIteration");Ea(f2,"onAnimationStart");Ea("dblclick","onDoubleClick");Ea("focusin","onFocus");Ea("focusout","onBlur");Ea(d2,"onTransitionEnd");xl("onMouseEnter",["mouseout","mouseover"]);xl("onMouseLeave",["mouseout","mouseover"]);xl("onPointerEnter",["pointerout","pointerover"]);xl("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mc));function b1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,A5(r,t,void 0,e),e.currentTarget=null}function m2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;b1(i,s,u),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;b1(i,s,u),o=l}}}if(Gf)throw e=Og,Gf=!1,Og=null,e}function qt(e,t){var n=t[Wg];n===void 0&&(n=t[Wg]=new Set);var r=e+"__bubble";n.has(r)||(g2(t,e,2,!1),n.add(r))}function Im(e,t,n){var r=0;t&&(r|=4),g2(n,e,r,t)}var Op="_reactListening"+Math.random().toString(36).slice(2);function nu(e){if(!e[Op]){e[Op]=!0,bS.forEach(function(n){n!=="selectionchange"&&(N3.has(n)||Im(n,!1,e),Im(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Op]||(t[Op]=!0,Im("selectionchange",!1,t))}}function g2(e,t,n,r){switch(JS(t)){case 1:var i=G5;break;case 4:i=K5;break;default:i=lv}n=i.bind(null,t,n,e),i=void 0,!Dg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jm(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=ss(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}$S(function(){var u=o,f=iv(n),d=[];e:{var g=h2.get(e);if(g!==void 0){var y=uv,v=e;switch(e){case"keypress":if(wf(n)===0)break e;case"keydown":case"keyup":y=l3;break;case"focusin":v="focus",y=Mm;break;case"focusout":v="blur",y=Mm;break;case"beforeblur":case"afterblur":y=Mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=p1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=X5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=p3;break;case u2:case p2:case f2:y=J5;break;case d2:y=d3;break;case"scroll":y=Y5;break;case"wheel":y=m3;break;case"copy":case"cut":case"paste":y=t3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=d1}var x=(t&4)!==0,C=!x&&e==="scroll",P=x?g!==null?g+"Capture":null:g;x=[];for(var k=u,w;k!==null;){w=k;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,P!==null&&(b=Xc(k,P),b!=null&&x.push(ru(k,b,w)))),C)break;k=k.return}0<x.length&&(g=new y(g,v,null,n,f),d.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",g&&n!==Mg&&(v=n.relatedTarget||n.fromElement)&&(ss(v)||v[Po]))break e;if((y||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?ss(v):null,v!==null&&(C=Cs(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(x=p1,b="onMouseLeave",P="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(x=d1,b="onPointerLeave",P="onPointerEnter",k="pointer"),C=y==null?g:al(y),w=v==null?g:al(v),g=new x(b,k+"leave",y,n,f),g.target=C,g.relatedTarget=w,b=null,ss(f)===u&&(x=new x(P,k+"enter",v,n,f),x.target=w,x.relatedTarget=C,b=x),C=b,y&&v)t:{for(x=y,P=v,k=0,w=x;w;w=Gs(w))k++;for(w=0,b=P;b;b=Gs(b))w++;for(;0<k-w;)x=Gs(x),k--;for(;0<w-k;)P=Gs(P),w--;for(;k--;){if(x===P||P!==null&&x===P.alternate)break t;x=Gs(x),P=Gs(P)}x=null}else x=null;y!==null&&S1(d,g,y,x,!1),v!==null&&C!==null&&S1(d,C,v,x,!0)}}e:{if(g=u?al(u):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var D=E3;else if(g1(g))if(o2)D=R3;else{D=S3;var I=b3}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=C3);if(D&&(D=D(e,u))){i2(d,D,n,f);break e}I&&I(e,g,u),e==="focusout"&&(I=g._wrapperState)&&I.controlled&&g.type==="number"&&Rg(g,"number",g.value)}switch(I=u?al(u):window,e){case"focusin":(g1(I)||I.contentEditable==="true")&&(il=I,jg=u,Ic=null);break;case"focusout":Ic=jg=il=null;break;case"mousedown":$g=!0;break;case"contextmenu":case"mouseup":case"dragend":$g=!1,w1(d,n,f);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":w1(d,n,f)}var H;if(fv)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else rl?n2(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(t2&&n.locale!=="ko"&&(rl||L!=="onCompositionStart"?L==="onCompositionEnd"&&rl&&(H=e2()):(oa=f,cv="value"in oa?oa.value:oa.textContent,rl=!0)),I=Qf(u,L),0<I.length&&(L=new f1(L,e,null,n,f),d.push({event:L,listeners:I}),H?L.data=H:(H=r2(n),H!==null&&(L.data=H)))),(H=y3?v3(e,n):x3(e,n))&&(u=Qf(u,"onBeforeInput"),0<u.length&&(f=new f1("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=H))}m2(d,t)})}function ru(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qf(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Xc(e,n),o!=null&&r.unshift(ru(e,o,i)),o=Xc(e,t),o!=null&&r.push(ru(e,o,i))),e=e.return}return r}function Gs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S1(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=Xc(n,o),l!=null&&a.unshift(ru(n,l,s))):i||(l=Xc(n,o),l!=null&&a.push(ru(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var D3=/\r\n?/g,O3=/\u0000|\uFFFD/g;function C1(e){return(typeof e=="string"?e:""+e).replace(D3,`
`).replace(O3,"")}function Lp(e,t,n){if(t=C1(t),C1(e)!==t&&n)throw Error(me(425))}function Zf(){}var Fg=null,zg=null;function Hg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vg=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,R1=typeof Promise=="function"?Promise:void 0,B3=typeof queueMicrotask=="function"?queueMicrotask:typeof R1<"u"?function(e){return R1.resolve(null).then(e).catch(I3)}:Vg;function I3(e){setTimeout(function(){throw e})}function $m(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Jc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jc(t)}function pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function k1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $l=Math.random().toString(36).slice(2),Xi="__reactFiber$"+$l,iu="__reactProps$"+$l,Po="__reactContainer$"+$l,Wg="__reactEvents$"+$l,j3="__reactListeners$"+$l,$3="__reactHandles$"+$l;function ss(e){var t=e[Xi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Po]||n[Xi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=k1(e);e!==null;){if(n=e[Xi])return n;e=k1(e)}return t}e=n,n=e.parentNode}return null}function Su(e){return e=e[Xi]||e[Po],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function al(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function jd(e){return e[iu]||null}var Ug=[],sl=-1;function ba(e){return{current:e}}function Xt(e){0>sl||(e.current=Ug[sl],Ug[sl]=null,sl--)}function Ut(e,t){sl++,Ug[sl]=e.current,e.current=t}var va={},fr=ba(va),Lr=ba(!1),ms=va;function _l(e,t){var n=e.type.contextTypes;if(!n)return va;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Br(e){return e=e.childContextTypes,e!=null}function Jf(){Xt(Lr),Xt(fr)}function P1(e,t,n){if(fr.current!==va)throw Error(me(168));Ut(fr,t),Ut(Lr,n)}function y2(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(me(108,b5(e)||"Unknown",i));return un({},n,r)}function ed(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||va,ms=fr.current,Ut(fr,e),Ut(Lr,Lr.current),!0}function T1(e,t,n){var r=e.stateNode;if(!r)throw Error(me(169));n?(e=y2(e,t,ms),r.__reactInternalMemoizedMergedChildContext=e,Xt(Lr),Xt(fr),Ut(fr,e)):Xt(Lr),Ut(Lr,n)}var yo=null,$d=!1,Fm=!1;function v2(e){yo===null?yo=[e]:yo.push(e)}function F3(e){$d=!0,v2(e)}function Sa(){if(!Fm&&yo!==null){Fm=!0;var e=0,t=$t;try{var n=yo;for($t=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yo=null,$d=!1}catch(i){throw yo!==null&&(yo=yo.slice(e+1)),VS(ov,Sa),i}finally{$t=t,Fm=!1}}return null}var ll=[],cl=0,td=null,nd=0,di=[],hi=0,gs=null,xo=1,_o="";function ns(e,t){ll[cl++]=nd,ll[cl++]=td,td=e,nd=t}function x2(e,t,n){di[hi++]=xo,di[hi++]=_o,di[hi++]=gs,gs=e;var r=xo;e=_o;var i=32-Li(r)-1;r&=~(1<<i),n+=1;var o=32-Li(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,xo=1<<32-Li(t)+i|n<<i|r,_o=o+e}else xo=1<<o|n<<i|r,_o=e}function hv(e){e.return!==null&&(ns(e,1),x2(e,1,0))}function mv(e){for(;e===td;)td=ll[--cl],ll[cl]=null,nd=ll[--cl],ll[cl]=null;for(;e===gs;)gs=di[--hi],di[hi]=null,_o=di[--hi],di[hi]=null,xo=di[--hi],di[hi]=null}var Qr=null,Xr=null,rn=!1,Oi=null;function _2(e,t){var n=gi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function A1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qr=e,Xr=pa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qr=e,Xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gs!==null?{id:xo,overflow:_o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qr=e,Xr=null,!0):!1;default:return!1}}function Gg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Kg(e){if(rn){var t=Xr;if(t){var n=t;if(!A1(e,t)){if(Gg(e))throw Error(me(418));t=pa(n.nextSibling);var r=Qr;t&&A1(e,t)?_2(r,n):(e.flags=e.flags&-4097|2,rn=!1,Qr=e)}}else{if(Gg(e))throw Error(me(418));e.flags=e.flags&-4097|2,rn=!1,Qr=e}}}function M1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qr=e}function Bp(e){if(e!==Qr)return!1;if(!rn)return M1(e),rn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hg(e.type,e.memoizedProps)),t&&(t=Xr)){if(Gg(e))throw w2(),Error(me(418));for(;t;)_2(e,t),t=pa(t.nextSibling)}if(M1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xr=pa(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xr=null}}else Xr=Qr?pa(e.stateNode.nextSibling):null;return!0}function w2(){for(var e=Xr;e;)e=pa(e.nextSibling)}function wl(){Xr=Qr=null,rn=!1}function gv(e){Oi===null?Oi=[e]:Oi.push(e)}var z3=Mo.ReactCurrentBatchConfig;function dc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(me(309));var r=n.stateNode}if(!r)throw Error(me(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(me(284));if(!n._owner)throw Error(me(290,e))}return e}function Ip(e,t){throw e=Object.prototype.toString.call(t),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function N1(e){var t=e._init;return t(e._payload)}function E2(e){function t(P,k){if(e){var w=P.deletions;w===null?(P.deletions=[k],P.flags|=16):w.push(k)}}function n(P,k){if(!e)return null;for(;k!==null;)t(P,k),k=k.sibling;return null}function r(P,k){for(P=new Map;k!==null;)k.key!==null?P.set(k.key,k):P.set(k.index,k),k=k.sibling;return P}function i(P,k){return P=ma(P,k),P.index=0,P.sibling=null,P}function o(P,k,w){return P.index=w,e?(w=P.alternate,w!==null?(w=w.index,w<k?(P.flags|=2,k):w):(P.flags|=2,k)):(P.flags|=1048576,k)}function a(P){return e&&P.alternate===null&&(P.flags|=2),P}function s(P,k,w,b){return k===null||k.tag!==6?(k=Km(w,P.mode,b),k.return=P,k):(k=i(k,w),k.return=P,k)}function l(P,k,w,b){var D=w.type;return D===nl?f(P,k,w.props.children,b,w.key):k!==null&&(k.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ea&&N1(D)===k.type)?(b=i(k,w.props),b.ref=dc(P,k,w),b.return=P,b):(b=Pf(w.type,w.key,w.props,null,P.mode,b),b.ref=dc(P,k,w),b.return=P,b)}function u(P,k,w,b){return k===null||k.tag!==4||k.stateNode.containerInfo!==w.containerInfo||k.stateNode.implementation!==w.implementation?(k=Ym(w,P.mode,b),k.return=P,k):(k=i(k,w.children||[]),k.return=P,k)}function f(P,k,w,b,D){return k===null||k.tag!==7?(k=ds(w,P.mode,b,D),k.return=P,k):(k=i(k,w),k.return=P,k)}function d(P,k,w){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Km(""+k,P.mode,w),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Rp:return w=Pf(k.type,k.key,k.props,null,P.mode,w),w.ref=dc(P,null,k),w.return=P,w;case tl:return k=Ym(k,P.mode,w),k.return=P,k;case ea:var b=k._init;return d(P,b(k._payload),w)}if(Tc(k)||lc(k))return k=ds(k,P.mode,w,null),k.return=P,k;Ip(P,k)}return null}function g(P,k,w,b){var D=k!==null?k.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:s(P,k,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rp:return w.key===D?l(P,k,w,b):null;case tl:return w.key===D?u(P,k,w,b):null;case ea:return D=w._init,g(P,k,D(w._payload),b)}if(Tc(w)||lc(w))return D!==null?null:f(P,k,w,b,null);Ip(P,w)}return null}function y(P,k,w,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return P=P.get(w)||null,s(k,P,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rp:return P=P.get(b.key===null?w:b.key)||null,l(k,P,b,D);case tl:return P=P.get(b.key===null?w:b.key)||null,u(k,P,b,D);case ea:var I=b._init;return y(P,k,w,I(b._payload),D)}if(Tc(b)||lc(b))return P=P.get(w)||null,f(k,P,b,D,null);Ip(k,b)}return null}function v(P,k,w,b){for(var D=null,I=null,H=k,L=k=0,X=null;H!==null&&L<w.length;L++){H.index>L?(X=H,H=null):X=H.sibling;var Y=g(P,H,w[L],b);if(Y===null){H===null&&(H=X);break}e&&H&&Y.alternate===null&&t(P,H),k=o(Y,k,L),I===null?D=Y:I.sibling=Y,I=Y,H=X}if(L===w.length)return n(P,H),rn&&ns(P,L),D;if(H===null){for(;L<w.length;L++)H=d(P,w[L],b),H!==null&&(k=o(H,k,L),I===null?D=H:I.sibling=H,I=H);return rn&&ns(P,L),D}for(H=r(P,H);L<w.length;L++)X=y(H,P,L,w[L],b),X!==null&&(e&&X.alternate!==null&&H.delete(X.key===null?L:X.key),k=o(X,k,L),I===null?D=X:I.sibling=X,I=X);return e&&H.forEach(function(K){return t(P,K)}),rn&&ns(P,L),D}function x(P,k,w,b){var D=lc(w);if(typeof D!="function")throw Error(me(150));if(w=D.call(w),w==null)throw Error(me(151));for(var I=D=null,H=k,L=k=0,X=null,Y=w.next();H!==null&&!Y.done;L++,Y=w.next()){H.index>L?(X=H,H=null):X=H.sibling;var K=g(P,H,Y.value,b);if(K===null){H===null&&(H=X);break}e&&H&&K.alternate===null&&t(P,H),k=o(K,k,L),I===null?D=K:I.sibling=K,I=K,H=X}if(Y.done)return n(P,H),rn&&ns(P,L),D;if(H===null){for(;!Y.done;L++,Y=w.next())Y=d(P,Y.value,b),Y!==null&&(k=o(Y,k,L),I===null?D=Y:I.sibling=Y,I=Y);return rn&&ns(P,L),D}for(H=r(P,H);!Y.done;L++,Y=w.next())Y=y(H,P,L,Y.value,b),Y!==null&&(e&&Y.alternate!==null&&H.delete(Y.key===null?L:Y.key),k=o(Y,k,L),I===null?D=Y:I.sibling=Y,I=Y);return e&&H.forEach(function(se){return t(P,se)}),rn&&ns(P,L),D}function C(P,k,w,b){if(typeof w=="object"&&w!==null&&w.type===nl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Rp:e:{for(var D=w.key,I=k;I!==null;){if(I.key===D){if(D=w.type,D===nl){if(I.tag===7){n(P,I.sibling),k=i(I,w.props.children),k.return=P,P=k;break e}}else if(I.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ea&&N1(D)===I.type){n(P,I.sibling),k=i(I,w.props),k.ref=dc(P,I,w),k.return=P,P=k;break e}n(P,I);break}else t(P,I);I=I.sibling}w.type===nl?(k=ds(w.props.children,P.mode,b,w.key),k.return=P,P=k):(b=Pf(w.type,w.key,w.props,null,P.mode,b),b.ref=dc(P,k,w),b.return=P,P=b)}return a(P);case tl:e:{for(I=w.key;k!==null;){if(k.key===I)if(k.tag===4&&k.stateNode.containerInfo===w.containerInfo&&k.stateNode.implementation===w.implementation){n(P,k.sibling),k=i(k,w.children||[]),k.return=P,P=k;break e}else{n(P,k);break}else t(P,k);k=k.sibling}k=Ym(w,P.mode,b),k.return=P,P=k}return a(P);case ea:return I=w._init,C(P,k,I(w._payload),b)}if(Tc(w))return v(P,k,w,b);if(lc(w))return x(P,k,w,b);Ip(P,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,k!==null&&k.tag===6?(n(P,k.sibling),k=i(k,w),k.return=P,P=k):(n(P,k),k=Km(w,P.mode,b),k.return=P,P=k),a(P)):n(P,k)}return C}var El=E2(!0),b2=E2(!1),rd=ba(null),id=null,ul=null,yv=null;function vv(){yv=ul=id=null}function xv(e){var t=rd.current;Xt(rd),e._currentValue=t}function Yg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yl(e,t){id=e,yv=ul=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dr=!0),e.firstContext=null)}function xi(e){var t=e._currentValue;if(yv!==e)if(e={context:e,memoizedValue:t,next:null},ul===null){if(id===null)throw Error(me(308));ul=e,id.dependencies={lanes:0,firstContext:e}}else ul=ul.next=e;return t}var ls=null;function _v(e){ls===null?ls=[e]:ls.push(e)}function S2(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,_v(t)):(n.next=i.next,i.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ta=!1;function wv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,To(e,n)}return i=r.interleaved,i===null?(t.next=t,_v(r)):(t.next=i.next,i.next=t),r.interleaved=t,To(e,n)}function Ef(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,av(e,n)}}function D1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function od(e,t,n,r){var i=e.updateQueue;ta=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==a&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,f=u=l=null,s=o;do{var g=s.lane,y=s.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:y,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,x=s;switch(g=t,y=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(y,d,g);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,g=typeof v=="function"?v.call(y,d,g):v,g==null)break e;d=un({},d,g);break e;case 2:ta=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[s]:g.push(s))}else y={eventTime:y,lane:g,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=y,l=d):f=f.next=y,a|=g;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;g=s,s=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);vs|=a,e.lanes=a,e.memoizedState=d}}function O1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(me(191,i));i.call(r)}}}var Cu={},Ji=ba(Cu),ou=ba(Cu),au=ba(Cu);function cs(e){if(e===Cu)throw Error(me(174));return e}function Ev(e,t){switch(Ut(au,t),Ut(ou,e),Ut(Ji,Cu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pg(t,e)}Xt(Ji),Ut(Ji,t)}function bl(){Xt(Ji),Xt(ou),Xt(au)}function R2(e){cs(au.current);var t=cs(Ji.current),n=Pg(t,e.type);t!==n&&(Ut(ou,e),Ut(Ji,n))}function bv(e){ou.current===e&&(Xt(Ji),Xt(ou))}var sn=ba(0);function ad(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zm=[];function Sv(){for(var e=0;e<zm.length;e++)zm[e]._workInProgressVersionPrimary=null;zm.length=0}var bf=Mo.ReactCurrentDispatcher,Hm=Mo.ReactCurrentBatchConfig,ys=0,cn=null,Ln=null,Hn=null,sd=!1,jc=!1,su=0,H3=0;function sr(){throw Error(me(321))}function Cv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$i(e[n],t[n]))return!1;return!0}function Rv(e,t,n,r,i,o){if(ys=o,cn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bf.current=e===null||e.memoizedState===null?G3:K3,e=n(r,i),jc){o=0;do{if(jc=!1,su=0,25<=o)throw Error(me(301));o+=1,Hn=Ln=null,t.updateQueue=null,bf.current=Y3,e=n(r,i)}while(jc)}if(bf.current=ld,t=Ln!==null&&Ln.next!==null,ys=0,Hn=Ln=cn=null,sd=!1,t)throw Error(me(300));return e}function kv(){var e=su!==0;return su=0,e}function Gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?cn.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function _i(){if(Ln===null){var e=cn.alternate;e=e!==null?e.memoizedState:null}else e=Ln.next;var t=Hn===null?cn.memoizedState:Hn.next;if(t!==null)Hn=t,Ln=e;else{if(e===null)throw Error(me(310));Ln=e,e={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Hn===null?cn.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}function lu(e,t){return typeof t=="function"?t(e):t}function Vm(e){var t=_i(),n=t.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=e;var r=Ln,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,u=o;do{var f=u.lane;if((ys&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,cn.lanes|=f,vs|=f}u=u.next}while(u!==null&&u!==o);l===null?a=r:l.next=s,$i(r,t.memoizedState)||(Dr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,cn.lanes|=o,vs|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wm(e){var t=_i(),n=t.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);$i(o,t.memoizedState)||(Dr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function k2(){}function P2(e,t){var n=cn,r=_i(),i=t(),o=!$i(r.memoizedState,i);if(o&&(r.memoizedState=i,Dr=!0),r=r.queue,Pv(M2.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,cu(9,A2.bind(null,n,r,i,t),void 0,null),Wn===null)throw Error(me(349));ys&30||T2(n,t,i)}return i}function T2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=cn.updateQueue,t===null?(t={lastEffect:null,stores:null},cn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function A2(e,t,n,r){t.value=n,t.getSnapshot=r,N2(t)&&D2(e)}function M2(e,t,n){return n(function(){N2(t)&&D2(e)})}function N2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$i(e,n)}catch{return!0}}function D2(e){var t=To(e,1);t!==null&&Bi(t,e,1,-1)}function L1(e){var t=Gi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:e},t.queue=e,e=e.dispatch=U3.bind(null,cn,e),[t.memoizedState,e]}function cu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=cn.updateQueue,t===null?(t={lastEffect:null,stores:null},cn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function O2(){return _i().memoizedState}function Sf(e,t,n,r){var i=Gi();cn.flags|=e,i.memoizedState=cu(1|t,n,void 0,r===void 0?null:r)}function Fd(e,t,n,r){var i=_i();r=r===void 0?null:r;var o=void 0;if(Ln!==null){var a=Ln.memoizedState;if(o=a.destroy,r!==null&&Cv(r,a.deps)){i.memoizedState=cu(t,n,o,r);return}}cn.flags|=e,i.memoizedState=cu(1|t,n,o,r)}function B1(e,t){return Sf(8390656,8,e,t)}function Pv(e,t){return Fd(2048,8,e,t)}function L2(e,t){return Fd(4,2,e,t)}function B2(e,t){return Fd(4,4,e,t)}function I2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function j2(e,t,n){return n=n!=null?n.concat([e]):null,Fd(4,4,I2.bind(null,t,e),n)}function Tv(){}function $2(e,t){var n=_i();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function F2(e,t){var n=_i();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function z2(e,t,n){return ys&21?($i(n,t)||(n=GS(),cn.lanes|=n,vs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dr=!0),e.memoizedState=n)}function V3(e,t){var n=$t;$t=n!==0&&4>n?n:4,e(!0);var r=Hm.transition;Hm.transition={};try{e(!1),t()}finally{$t=n,Hm.transition=r}}function H2(){return _i().memoizedState}function W3(e,t,n){var r=ha(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},V2(e))W2(t,n);else if(n=S2(e,t,n,r),n!==null){var i=_r();Bi(n,e,r,i),U2(n,t,r)}}function U3(e,t,n){var r=ha(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(V2(e))W2(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,$i(s,a)){var l=t.interleaved;l===null?(i.next=i,_v(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=S2(e,t,i,r),n!==null&&(i=_r(),Bi(n,e,r,i),U2(n,t,r))}}function V2(e){var t=e.alternate;return e===cn||t!==null&&t===cn}function W2(e,t){jc=sd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function U2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,av(e,n)}}var ld={readContext:xi,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},G3={readContext:xi,useCallback:function(e,t){return Gi().memoizedState=[e,t===void 0?null:t],e},useContext:xi,useEffect:B1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Sf(4194308,4,I2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sf(4,2,e,t)},useMemo:function(e,t){var n=Gi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=W3.bind(null,cn,e),[r.memoizedState,e]},useRef:function(e){var t=Gi();return e={current:e},t.memoizedState=e},useState:L1,useDebugValue:Tv,useDeferredValue:function(e){return Gi().memoizedState=e},useTransition:function(){var e=L1(!1),t=e[0];return e=V3.bind(null,e[1]),Gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=cn,i=Gi();if(rn){if(n===void 0)throw Error(me(407));n=n()}else{if(n=t(),Wn===null)throw Error(me(349));ys&30||T2(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,B1(M2.bind(null,r,o,e),[e]),r.flags|=2048,cu(9,A2.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Gi(),t=Wn.identifierPrefix;if(rn){var n=_o,r=xo;n=(r&~(1<<32-Li(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=su++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=H3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},K3={readContext:xi,useCallback:$2,useContext:xi,useEffect:Pv,useImperativeHandle:j2,useInsertionEffect:L2,useLayoutEffect:B2,useMemo:F2,useReducer:Vm,useRef:O2,useState:function(){return Vm(lu)},useDebugValue:Tv,useDeferredValue:function(e){var t=_i();return z2(t,Ln.memoizedState,e)},useTransition:function(){var e=Vm(lu)[0],t=_i().memoizedState;return[e,t]},useMutableSource:k2,useSyncExternalStore:P2,useId:H2,unstable_isNewReconciler:!1},Y3={readContext:xi,useCallback:$2,useContext:xi,useEffect:Pv,useImperativeHandle:j2,useInsertionEffect:L2,useLayoutEffect:B2,useMemo:F2,useReducer:Wm,useRef:O2,useState:function(){return Wm(lu)},useDebugValue:Tv,useDeferredValue:function(e){var t=_i();return Ln===null?t.memoizedState=e:z2(t,Ln.memoizedState,e)},useTransition:function(){var e=Wm(lu)[0],t=_i().memoizedState;return[e,t]},useMutableSource:k2,useSyncExternalStore:P2,useId:H2,unstable_isNewReconciler:!1};function Ni(e,t){if(e&&e.defaultProps){t=un({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:un({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zd={isMounted:function(e){return(e=e._reactInternals)?Cs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_r(),i=ha(e),o=bo(r,i);o.payload=t,n!=null&&(o.callback=n),t=fa(e,o,i),t!==null&&(Bi(t,e,i,r),Ef(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_r(),i=ha(e),o=bo(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=fa(e,o,i),t!==null&&(Bi(t,e,i,r),Ef(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_r(),r=ha(e),i=bo(n,r);i.tag=2,t!=null&&(i.callback=t),t=fa(e,i,r),t!==null&&(Bi(t,e,r,n),Ef(t,e,r))}};function I1(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!tu(n,r)||!tu(i,o):!0}function G2(e,t,n){var r=!1,i=va,o=t.contextType;return typeof o=="object"&&o!==null?o=xi(o):(i=Br(t)?ms:fr.current,r=t.contextTypes,o=(r=r!=null)?_l(e,i):va),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function j1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zd.enqueueReplaceState(t,t.state,null)}function Xg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},wv(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=xi(o):(o=Br(t)?ms:fr.current,i.context=_l(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(qg(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&zd.enqueueReplaceState(i,i.state,null),od(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Sl(e,t){try{var n="",r=t;do n+=E5(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Um(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var q3=typeof WeakMap=="function"?WeakMap:Map;function K2(e,t,n){n=bo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ud||(ud=!0,sy=r),Qg(e,t)},n}function Y2(e,t,n){n=bo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Qg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Qg(e,t),typeof r!="function"&&(da===null?da=new Set([this]):da.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function $1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new q3;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=cM.bind(null,e,t,n),t.then(e,e))}function F1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function z1(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bo(-1,1),t.tag=2,fa(n,t,1))),n.lanes|=1),e)}var X3=Mo.ReactCurrentOwner,Dr=!1;function vr(e,t,n,r){t.child=e===null?b2(t,null,n,r):El(t,e.child,n,r)}function H1(e,t,n,r,i){n=n.render;var o=t.ref;return yl(t,i),r=Rv(e,t,n,r,o,i),n=kv(),e!==null&&!Dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ao(e,t,i)):(rn&&n&&hv(t),t.flags|=1,vr(e,t,r,i),t.child)}function V1(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Iv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,q2(e,t,o,r,i)):(e=Pf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:tu,n(a,r)&&e.ref===t.ref)return Ao(e,t,i)}return t.flags|=1,e=ma(o,r),e.ref=t.ref,e.return=t,t.child=e}function q2(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(tu(o,r)&&e.ref===t.ref)if(Dr=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Dr=!0);else return t.lanes=e.lanes,Ao(e,t,i)}return Zg(e,t,n,r,i)}function X2(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(fl,qr),qr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ut(fl,qr),qr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ut(fl,qr),qr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ut(fl,qr),qr|=r;return vr(e,t,i,n),t.child}function Q2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zg(e,t,n,r,i){var o=Br(n)?ms:fr.current;return o=_l(t,o),yl(t,i),n=Rv(e,t,n,r,o,i),r=kv(),e!==null&&!Dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ao(e,t,i)):(rn&&r&&hv(t),t.flags|=1,vr(e,t,n,i),t.child)}function W1(e,t,n,r,i){if(Br(n)){var o=!0;ed(t)}else o=!1;if(yl(t,i),t.stateNode===null)Cf(e,t),G2(t,n,r),Xg(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=xi(u):(u=Br(n)?ms:fr.current,u=_l(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==u)&&j1(t,a,r,u),ta=!1;var g=t.memoizedState;a.state=g,od(t,r,a,i),l=t.memoizedState,s!==r||g!==l||Lr.current||ta?(typeof f=="function"&&(qg(t,n,f,r),l=t.memoizedState),(s=ta||I1(t,n,s,r,g,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,C2(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ni(t.type,s),a.props=u,d=t.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=xi(l):(l=Br(n)?ms:fr.current,l=_l(t,l));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||g!==l)&&j1(t,a,r,l),ta=!1,g=t.memoizedState,a.state=g,od(t,r,a,i);var v=t.memoizedState;s!==d||g!==v||Lr.current||ta?(typeof y=="function"&&(qg(t,n,y,r),v=t.memoizedState),(u=ta||I1(t,n,u,r,g,v,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Jg(e,t,n,r,o,i)}function Jg(e,t,n,r,i,o){Q2(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&T1(t,n,!1),Ao(e,t,o);r=t.stateNode,X3.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=El(t,e.child,null,o),t.child=El(t,null,s,o)):vr(e,t,s,o),t.memoizedState=r.state,i&&T1(t,n,!0),t.child}function Z2(e){var t=e.stateNode;t.pendingContext?P1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&P1(e,t.context,!1),Ev(e,t.containerInfo)}function U1(e,t,n,r,i){return wl(),gv(i),t.flags|=256,vr(e,t,n,r),t.child}var ey={dehydrated:null,treeContext:null,retryLane:0};function ty(e){return{baseLanes:e,cachePool:null,transitions:null}}function J2(e,t,n){var r=t.pendingProps,i=sn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ut(sn,i&1),e===null)return Kg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Wd(a,r,0,null),e=ds(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ty(n),t.memoizedState=ey,e):Av(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Q3(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ma(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=ma(s,o):(o=ds(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ty(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=ey,r}return o=e.child,e=o.sibling,r=ma(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Av(e,t){return t=Wd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jp(e,t,n,r){return r!==null&&gv(r),El(t,e.child,null,n),e=Av(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q3(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Um(Error(me(422))),jp(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Wd({mode:"visible",children:r.children},i,0,null),o=ds(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&El(t,e.child,null,a),t.child.memoizedState=ty(a),t.memoizedState=ey,o);if(!(t.mode&1))return jp(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(me(419)),r=Um(o,r,void 0),jp(e,t,a,r)}if(s=(a&e.childLanes)!==0,Dr||s){if(r=Wn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,To(e,i),Bi(r,e,i,-1))}return Bv(),r=Um(Error(me(421))),jp(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=uM.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Xr=pa(i.nextSibling),Qr=t,rn=!0,Oi=null,e!==null&&(di[hi++]=xo,di[hi++]=_o,di[hi++]=gs,xo=e.id,_o=e.overflow,gs=t),t=Av(t,r.children),t.flags|=4096,t)}function G1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Yg(e.return,t,n)}function Gm(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function eC(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(vr(e,t,r.children,n),r=sn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&G1(e,n,t);else if(e.tag===19)G1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ut(sn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ad(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Gm(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ad(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Gm(t,!0,n,null,o);break;case"together":Gm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ao(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(me(153));if(t.child!==null){for(e=t.child,n=ma(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ma(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z3(e,t,n){switch(t.tag){case 3:Z2(t),wl();break;case 5:R2(t);break;case 1:Br(t.type)&&ed(t);break;case 4:Ev(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ut(rd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ut(sn,sn.current&1),t.flags|=128,null):n&t.child.childLanes?J2(e,t,n):(Ut(sn,sn.current&1),e=Ao(e,t,n),e!==null?e.sibling:null);Ut(sn,sn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return eC(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ut(sn,sn.current),r)break;return null;case 22:case 23:return t.lanes=0,X2(e,t,n)}return Ao(e,t,n)}var tC,ny,nC,rC;tC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ny=function(){};nC=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,cs(Ji.current);var o=null;switch(n){case"input":i=Sg(e,i),r=Sg(e,r),o=[];break;case"select":i=un({},i,{value:void 0}),r=un({},r,{value:void 0}),o=[];break;case"textarea":i=kg(e,i),r=kg(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zf)}Tg(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qt("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};rC=function(e,t,n,r){n!==r&&(t.flags|=4)};function hc(e,t){if(!rn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function J3(e,t,n){var r=t.pendingProps;switch(mv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return Br(t.type)&&Jf(),lr(t),null;case 3:return r=t.stateNode,bl(),Xt(Lr),Xt(fr),Sv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Oi!==null&&(uy(Oi),Oi=null))),ny(e,t),lr(t),null;case 5:bv(t);var i=cs(au.current);if(n=t.type,e!==null&&t.stateNode!=null)nC(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(me(166));return lr(t),null}if(e=cs(Ji.current),Bp(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Xi]=t,r[iu]=o,e=(t.mode&1)!==0,n){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(i=0;i<Mc.length;i++)qt(Mc[i],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":t1(r,o),qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qt("invalid",r);break;case"textarea":r1(r,o),qt("invalid",r)}Tg(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Lp(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Lp(r.textContent,s,e),i=["children",""+s]):Yc.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&qt("scroll",r)}switch(n){case"input":kp(r),n1(r,o,!0);break;case"textarea":kp(r),i1(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Zf)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=MS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Xi]=t,e[iu]=r,tC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ag(n,r),n){case"dialog":qt("cancel",e),qt("close",e),i=r;break;case"iframe":case"object":case"embed":qt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mc.length;i++)qt(Mc[i],e);i=r;break;case"source":qt("error",e),i=r;break;case"img":case"image":case"link":qt("error",e),qt("load",e),i=r;break;case"details":qt("toggle",e),i=r;break;case"input":t1(e,r),i=Sg(e,r),qt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=un({},r,{value:void 0}),qt("invalid",e);break;case"textarea":r1(e,r),i=kg(e,r),qt("invalid",e);break;default:i=r}Tg(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?OS(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&NS(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qc(e,l):typeof l=="number"&&qc(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yc.hasOwnProperty(o)?l!=null&&o==="onScroll"&&qt("scroll",e):l!=null&&ev(e,o,l,a))}switch(n){case"input":kp(e),n1(e,r,!1);break;case"textarea":kp(e),i1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ya(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?dl(e,!!r.multiple,o,!1):r.defaultValue!=null&&dl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Zf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)rC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(me(166));if(n=cs(au.current),cs(Ji.current),Bp(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xi]=t,(o=r.nodeValue!==n)&&(e=Qr,e!==null))switch(e.tag){case 3:Lp(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lp(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xi]=t,t.stateNode=r}return lr(t),null;case 13:if(Xt(sn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rn&&Xr!==null&&t.mode&1&&!(t.flags&128))w2(),wl(),t.flags|=98560,o=!1;else if(o=Bp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(me(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(me(317));o[Xi]=t}else wl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),o=!1}else Oi!==null&&(uy(Oi),Oi=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||sn.current&1?In===0&&(In=3):Bv())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return bl(),ny(e,t),e===null&&nu(t.stateNode.containerInfo),lr(t),null;case 10:return xv(t.type._context),lr(t),null;case 17:return Br(t.type)&&Jf(),lr(t),null;case 19:if(Xt(sn),o=t.memoizedState,o===null)return lr(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)hc(o,!1);else{if(In!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ad(e),a!==null){for(t.flags|=128,hc(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ut(sn,sn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Sn()>Cl&&(t.flags|=128,r=!0,hc(o,!1),t.lanes=4194304)}else{if(!r)if(e=ad(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!rn)return lr(t),null}else 2*Sn()-o.renderingStartTime>Cl&&n!==1073741824&&(t.flags|=128,r=!0,hc(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Sn(),t.sibling=null,n=sn.current,Ut(sn,r?n&1|2:n&1),t):(lr(t),null);case 22:case 23:return Lv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?qr&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(me(156,t.tag))}function eM(e,t){switch(mv(t),t.tag){case 1:return Br(t.type)&&Jf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bl(),Xt(Lr),Xt(fr),Sv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bv(t),null;case 13:if(Xt(sn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(me(340));wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xt(sn),null;case 4:return bl(),null;case 10:return xv(t.type._context),null;case 22:case 23:return Lv(),null;case 24:return null;default:return null}}var $p=!1,cr=!1,tM=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function pl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){hn(e,t,r)}else n.current=null}function ry(e,t,n){try{n()}catch(r){hn(e,t,r)}}var K1=!1;function nM(e,t){if(Fg=qf,e=l2(),dv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,f=0,d=e,g=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(y=d.firstChild)!==null;)g=d,d=y;for(;;){if(d===e)break t;if(g===n&&++u===i&&(s=a),g===o&&++f===r&&(l=a),(y=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=y}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(zg={focusedElem:e,selectionRange:n},qf=!1,Fe=t;Fe!==null;)if(t=Fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fe=e;else for(;Fe!==null;){t=Fe;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,C=v.memoizedState,P=t.stateNode,k=P.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ni(t.type,x),C);P.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(b){hn(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Fe=e;break}Fe=t.return}return v=K1,K1=!1,v}function $c(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&ry(t,n,o)}i=i.next}while(i!==r)}}function Hd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iC(e){var t=e.alternate;t!==null&&(e.alternate=null,iC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xi],delete t[iu],delete t[Wg],delete t[j3],delete t[$3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oC(e){return e.tag===5||e.tag===3||e.tag===4}function Y1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zf));else if(r!==4&&(e=e.child,e!==null))for(oy(e,t,n),e=e.sibling;e!==null;)oy(e,t,n),e=e.sibling}function ay(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ay(e,t,n),e=e.sibling;e!==null;)ay(e,t,n),e=e.sibling}var Xn=null,Di=!1;function Ko(e,t,n){for(n=n.child;n!==null;)aC(e,t,n),n=n.sibling}function aC(e,t,n){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(Od,n)}catch{}switch(n.tag){case 5:cr||pl(n,t);case 6:var r=Xn,i=Di;Xn=null,Ko(e,t,n),Xn=r,Di=i,Xn!==null&&(Di?(e=Xn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xn.removeChild(n.stateNode));break;case 18:Xn!==null&&(Di?(e=Xn,n=n.stateNode,e.nodeType===8?$m(e.parentNode,n):e.nodeType===1&&$m(e,n),Jc(e)):$m(Xn,n.stateNode));break;case 4:r=Xn,i=Di,Xn=n.stateNode.containerInfo,Di=!0,Ko(e,t,n),Xn=r,Di=i;break;case 0:case 11:case 14:case 15:if(!cr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ry(n,t,a),i=i.next}while(i!==r)}Ko(e,t,n);break;case 1:if(!cr&&(pl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){hn(n,t,s)}Ko(e,t,n);break;case 21:Ko(e,t,n);break;case 22:n.mode&1?(cr=(r=cr)||n.memoizedState!==null,Ko(e,t,n),cr=r):Ko(e,t,n);break;default:Ko(e,t,n)}}function q1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tM),t.forEach(function(r){var i=pM.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Xn=s.stateNode,Di=!1;break e;case 3:Xn=s.stateNode.containerInfo,Di=!0;break e;case 4:Xn=s.stateNode.containerInfo,Di=!0;break e}s=s.return}if(Xn===null)throw Error(me(160));aC(o,a,i),Xn=null,Di=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){hn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sC(t,e),t=t.sibling}function sC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mi(t,e),Wi(e),r&4){try{$c(3,e,e.return),Hd(3,e)}catch(x){hn(e,e.return,x)}try{$c(5,e,e.return)}catch(x){hn(e,e.return,x)}}break;case 1:Mi(t,e),Wi(e),r&512&&n!==null&&pl(n,n.return);break;case 5:if(Mi(t,e),Wi(e),r&512&&n!==null&&pl(n,n.return),e.flags&32){var i=e.stateNode;try{qc(i,"")}catch(x){hn(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&TS(i,o),Ag(s,a);var u=Ag(s,o);for(a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?OS(i,d):f==="dangerouslySetInnerHTML"?NS(i,d):f==="children"?qc(i,d):ev(i,f,d,u)}switch(s){case"input":Cg(i,o);break;case"textarea":AS(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?dl(i,!!o.multiple,y,!1):g!==!!o.multiple&&(o.defaultValue!=null?dl(i,!!o.multiple,o.defaultValue,!0):dl(i,!!o.multiple,o.multiple?[]:"",!1))}i[iu]=o}catch(x){hn(e,e.return,x)}}break;case 6:if(Mi(t,e),Wi(e),r&4){if(e.stateNode===null)throw Error(me(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(x){hn(e,e.return,x)}}break;case 3:if(Mi(t,e),Wi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jc(t.containerInfo)}catch(x){hn(e,e.return,x)}break;case 4:Mi(t,e),Wi(e);break;case 13:Mi(t,e),Wi(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Dv=Sn())),r&4&&q1(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(cr=(u=cr)||f,Mi(t,e),cr=u):Mi(t,e),Wi(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Fe=e,f=e.child;f!==null;){for(d=Fe=f;Fe!==null;){switch(g=Fe,y=g.child,g.tag){case 0:case 11:case 14:case 15:$c(4,g,g.return);break;case 1:pl(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){hn(r,n,x)}}break;case 5:pl(g,g.return);break;case 22:if(g.memoizedState!==null){Q1(d);continue}}y!==null?(y.return=g,Fe=y):Q1(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=DS("display",a))}catch(x){hn(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){hn(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Mi(t,e),Wi(e),r&4&&q1(e);break;case 21:break;default:Mi(t,e),Wi(e)}}function Wi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(oC(n)){var r=n;break e}n=n.return}throw Error(me(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qc(i,""),r.flags&=-33);var o=Y1(e);ay(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=Y1(e);oy(e,s,a);break;default:throw Error(me(161))}}catch(l){hn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rM(e,t,n){Fe=e,lC(e)}function lC(e,t,n){for(var r=(e.mode&1)!==0;Fe!==null;){var i=Fe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||$p;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||cr;s=$p;var u=cr;if($p=a,(cr=l)&&!u)for(Fe=i;Fe!==null;)a=Fe,l=a.child,a.tag===22&&a.memoizedState!==null?Z1(i):l!==null?(l.return=a,Fe=l):Z1(i);for(;o!==null;)Fe=o,lC(o),o=o.sibling;Fe=i,$p=s,cr=u}X1(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Fe=o):X1(e)}}function X1(e){for(;Fe!==null;){var t=Fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:cr||Hd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!cr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ni(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&O1(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}O1(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Jc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}cr||t.flags&512&&iy(t)}catch(g){hn(t,t.return,g)}}if(t===e){Fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Fe=n;break}Fe=t.return}}function Q1(e){for(;Fe!==null;){var t=Fe;if(t===e){Fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Fe=n;break}Fe=t.return}}function Z1(e){for(;Fe!==null;){var t=Fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hd(4,t)}catch(l){hn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){hn(t,i,l)}}var o=t.return;try{iy(t)}catch(l){hn(t,o,l)}break;case 5:var a=t.return;try{iy(t)}catch(l){hn(t,a,l)}}}catch(l){hn(t,t.return,l)}if(t===e){Fe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Fe=s;break}Fe=t.return}}var iM=Math.ceil,cd=Mo.ReactCurrentDispatcher,Mv=Mo.ReactCurrentOwner,vi=Mo.ReactCurrentBatchConfig,Lt=0,Wn=null,Mn=null,Jn=0,qr=0,fl=ba(0),In=0,uu=null,vs=0,Vd=0,Nv=0,Fc=null,Nr=null,Dv=0,Cl=1/0,go=null,ud=!1,sy=null,da=null,Fp=!1,aa=null,pd=0,zc=0,ly=null,Rf=-1,kf=0;function _r(){return Lt&6?Sn():Rf!==-1?Rf:Rf=Sn()}function ha(e){return e.mode&1?Lt&2&&Jn!==0?Jn&-Jn:z3.transition!==null?(kf===0&&(kf=GS()),kf):(e=$t,e!==0||(e=window.event,e=e===void 0?16:JS(e.type)),e):1}function Bi(e,t,n,r){if(50<zc)throw zc=0,ly=null,Error(me(185));Eu(e,n,r),(!(Lt&2)||e!==Wn)&&(e===Wn&&(!(Lt&2)&&(Vd|=n),In===4&&ia(e,Jn)),Ir(e,r),n===1&&Lt===0&&!(t.mode&1)&&(Cl=Sn()+500,$d&&Sa()))}function Ir(e,t){var n=e.callbackNode;z5(e,t);var r=Yf(e,e===Wn?Jn:0);if(r===0)n!==null&&s1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&s1(n),t===1)e.tag===0?F3(J1.bind(null,e)):v2(J1.bind(null,e)),B3(function(){!(Lt&6)&&Sa()}),n=null;else{switch(KS(r)){case 1:n=ov;break;case 4:n=WS;break;case 16:n=Kf;break;case 536870912:n=US;break;default:n=Kf}n=gC(n,cC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cC(e,t){if(Rf=-1,kf=0,Lt&6)throw Error(me(327));var n=e.callbackNode;if(vl()&&e.callbackNode!==n)return null;var r=Yf(e,e===Wn?Jn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=fd(e,r);else{t=r;var i=Lt;Lt|=2;var o=pC();(Wn!==e||Jn!==t)&&(go=null,Cl=Sn()+500,fs(e,t));do try{sM();break}catch(s){uC(e,s)}while(!0);vv(),cd.current=o,Lt=i,Mn!==null?t=0:(Wn=null,Jn=0,t=In)}if(t!==0){if(t===2&&(i=Lg(e),i!==0&&(r=i,t=cy(e,i))),t===1)throw n=uu,fs(e,0),ia(e,r),Ir(e,Sn()),n;if(t===6)ia(e,r);else{if(i=e.current.alternate,!(r&30)&&!oM(i)&&(t=fd(e,r),t===2&&(o=Lg(e),o!==0&&(r=o,t=cy(e,o))),t===1))throw n=uu,fs(e,0),ia(e,r),Ir(e,Sn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(me(345));case 2:rs(e,Nr,go);break;case 3:if(ia(e,r),(r&130023424)===r&&(t=Dv+500-Sn(),10<t)){if(Yf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){_r(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Vg(rs.bind(null,e,Nr,go),t);break}rs(e,Nr,go);break;case 4:if(ia(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Li(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=Sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iM(r/1960))-r,10<r){e.timeoutHandle=Vg(rs.bind(null,e,Nr,go),r);break}rs(e,Nr,go);break;case 5:rs(e,Nr,go);break;default:throw Error(me(329))}}}return Ir(e,Sn()),e.callbackNode===n?cC.bind(null,e):null}function cy(e,t){var n=Fc;return e.current.memoizedState.isDehydrated&&(fs(e,t).flags|=256),e=fd(e,t),e!==2&&(t=Nr,Nr=n,t!==null&&uy(t)),e}function uy(e){Nr===null?Nr=e:Nr.push.apply(Nr,e)}function oM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!$i(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ia(e,t){for(t&=~Nv,t&=~Vd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Li(t),r=1<<n;e[n]=-1,t&=~r}}function J1(e){if(Lt&6)throw Error(me(327));vl();var t=Yf(e,0);if(!(t&1))return Ir(e,Sn()),null;var n=fd(e,t);if(e.tag!==0&&n===2){var r=Lg(e);r!==0&&(t=r,n=cy(e,r))}if(n===1)throw n=uu,fs(e,0),ia(e,t),Ir(e,Sn()),n;if(n===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rs(e,Nr,go),Ir(e,Sn()),null}function Ov(e,t){var n=Lt;Lt|=1;try{return e(t)}finally{Lt=n,Lt===0&&(Cl=Sn()+500,$d&&Sa())}}function xs(e){aa!==null&&aa.tag===0&&!(Lt&6)&&vl();var t=Lt;Lt|=1;var n=vi.transition,r=$t;try{if(vi.transition=null,$t=1,e)return e()}finally{$t=r,vi.transition=n,Lt=t,!(Lt&6)&&Sa()}}function Lv(){qr=fl.current,Xt(fl)}function fs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,L3(n)),Mn!==null)for(n=Mn.return;n!==null;){var r=n;switch(mv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jf();break;case 3:bl(),Xt(Lr),Xt(fr),Sv();break;case 5:bv(r);break;case 4:bl();break;case 13:Xt(sn);break;case 19:Xt(sn);break;case 10:xv(r.type._context);break;case 22:case 23:Lv()}n=n.return}if(Wn=e,Mn=e=ma(e.current,null),Jn=qr=t,In=0,uu=null,Nv=Vd=vs=0,Nr=Fc=null,ls!==null){for(t=0;t<ls.length;t++)if(n=ls[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}ls=null}return e}function uC(e,t){do{var n=Mn;try{if(vv(),bf.current=ld,sd){for(var r=cn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sd=!1}if(ys=0,Hn=Ln=cn=null,jc=!1,su=0,Mv.current=null,n===null||n.return===null){In=1,uu=t,Mn=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Jn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=F1(a);if(y!==null){y.flags&=-257,z1(y,a,s,o,t),y.mode&1&&$1(o,u,t),t=y,l=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(l),t.updateQueue=x}else v.add(l);break e}else{if(!(t&1)){$1(o,u,t),Bv();break e}l=Error(me(426))}}else if(rn&&s.mode&1){var C=F1(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),z1(C,a,s,o,t),gv(Sl(l,s));break e}}o=l=Sl(l,s),In!==4&&(In=2),Fc===null?Fc=[o]:Fc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var P=K2(o,l,t);D1(o,P);break e;case 1:s=l;var k=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(da===null||!da.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=Y2(o,s,t);D1(o,b);break e}}o=o.return}while(o!==null)}dC(n)}catch(D){t=D,Mn===n&&n!==null&&(Mn=n=n.return);continue}break}while(!0)}function pC(){var e=cd.current;return cd.current=ld,e===null?ld:e}function Bv(){(In===0||In===3||In===2)&&(In=4),Wn===null||!(vs&268435455)&&!(Vd&268435455)||ia(Wn,Jn)}function fd(e,t){var n=Lt;Lt|=2;var r=pC();(Wn!==e||Jn!==t)&&(go=null,fs(e,t));do try{aM();break}catch(i){uC(e,i)}while(!0);if(vv(),Lt=n,cd.current=r,Mn!==null)throw Error(me(261));return Wn=null,Jn=0,In}function aM(){for(;Mn!==null;)fC(Mn)}function sM(){for(;Mn!==null&&!N5();)fC(Mn)}function fC(e){var t=mC(e.alternate,e,qr);e.memoizedProps=e.pendingProps,t===null?dC(e):Mn=t,Mv.current=null}function dC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eM(n,t),n!==null){n.flags&=32767,Mn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{In=6,Mn=null;return}}else if(n=J3(n,t,qr),n!==null){Mn=n;return}if(t=t.sibling,t!==null){Mn=t;return}Mn=t=e}while(t!==null);In===0&&(In=5)}function rs(e,t,n){var r=$t,i=vi.transition;try{vi.transition=null,$t=1,lM(e,t,n,r)}finally{vi.transition=i,$t=r}return null}function lM(e,t,n,r){do vl();while(aa!==null);if(Lt&6)throw Error(me(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(H5(e,o),e===Wn&&(Mn=Wn=null,Jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fp||(Fp=!0,gC(Kf,function(){return vl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=vi.transition,vi.transition=null;var a=$t;$t=1;var s=Lt;Lt|=4,Mv.current=null,nM(e,n),sC(n,e),P3(zg),qf=!!Fg,zg=Fg=null,e.current=n,rM(n),D5(),Lt=s,$t=a,vi.transition=o}else e.current=n;if(Fp&&(Fp=!1,aa=e,pd=i),o=e.pendingLanes,o===0&&(da=null),B5(n.stateNode),Ir(e,Sn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,e=sy,sy=null,e;return pd&1&&e.tag!==0&&vl(),o=e.pendingLanes,o&1?e===ly?zc++:(zc=0,ly=e):zc=0,Sa(),null}function vl(){if(aa!==null){var e=KS(pd),t=vi.transition,n=$t;try{if(vi.transition=null,$t=16>e?16:e,aa===null)var r=!1;else{if(e=aa,aa=null,pd=0,Lt&6)throw Error(me(331));var i=Lt;for(Lt|=4,Fe=e.current;Fe!==null;){var o=Fe,a=o.child;if(Fe.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Fe=u;Fe!==null;){var f=Fe;switch(f.tag){case 0:case 11:case 15:$c(8,f,o)}var d=f.child;if(d!==null)d.return=f,Fe=d;else for(;Fe!==null;){f=Fe;var g=f.sibling,y=f.return;if(iC(f),f===u){Fe=null;break}if(g!==null){g.return=y,Fe=g;break}Fe=y}}}var v=o.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}Fe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Fe=a;else e:for(;Fe!==null;){if(o=Fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$c(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,Fe=P;break e}Fe=o.return}}var k=e.current;for(Fe=k;Fe!==null;){a=Fe;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Fe=w;else e:for(a=k;Fe!==null;){if(s=Fe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Hd(9,s)}}catch(D){hn(s,s.return,D)}if(s===a){Fe=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,Fe=b;break e}Fe=s.return}}if(Lt=i,Sa(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(Od,e)}catch{}r=!0}return r}finally{$t=n,vi.transition=t}}return!1}function ew(e,t,n){t=Sl(n,t),t=K2(e,t,1),e=fa(e,t,1),t=_r(),e!==null&&(Eu(e,1,t),Ir(e,t))}function hn(e,t,n){if(e.tag===3)ew(e,e,n);else for(;t!==null;){if(t.tag===3){ew(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(da===null||!da.has(r))){e=Sl(n,e),e=Y2(t,e,1),t=fa(t,e,1),e=_r(),t!==null&&(Eu(t,1,e),Ir(t,e));break}}t=t.return}}function cM(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=_r(),e.pingedLanes|=e.suspendedLanes&n,Wn===e&&(Jn&n)===n&&(In===4||In===3&&(Jn&130023424)===Jn&&500>Sn()-Dv?fs(e,0):Nv|=n),Ir(e,t)}function hC(e,t){t===0&&(e.mode&1?(t=Ap,Ap<<=1,!(Ap&130023424)&&(Ap=4194304)):t=1);var n=_r();e=To(e,t),e!==null&&(Eu(e,t,n),Ir(e,n))}function uM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hC(e,n)}function pM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(me(314))}r!==null&&r.delete(t),hC(e,n)}var mC;mC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lr.current)Dr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Dr=!1,Z3(e,t,n);Dr=!!(e.flags&131072)}else Dr=!1,rn&&t.flags&1048576&&x2(t,nd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cf(e,t),e=t.pendingProps;var i=_l(t,fr.current);yl(t,n),i=Rv(null,t,r,e,i,n);var o=kv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Br(r)?(o=!0,ed(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wv(t),i.updater=zd,t.stateNode=i,i._reactInternals=t,Xg(t,r,e,n),t=Jg(null,t,r,!0,o,n)):(t.tag=0,rn&&o&&hv(t),vr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=dM(r),e=Ni(r,e),i){case 0:t=Zg(null,t,r,e,n);break e;case 1:t=W1(null,t,r,e,n);break e;case 11:t=H1(null,t,r,e,n);break e;case 14:t=V1(null,t,r,Ni(r.type,e),n);break e}throw Error(me(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ni(r,i),Zg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ni(r,i),W1(e,t,r,i,n);case 3:e:{if(Z2(t),e===null)throw Error(me(387));r=t.pendingProps,o=t.memoizedState,i=o.element,C2(e,t),od(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Sl(Error(me(423)),t),t=U1(e,t,r,n,i);break e}else if(r!==i){i=Sl(Error(me(424)),t),t=U1(e,t,r,n,i);break e}else for(Xr=pa(t.stateNode.containerInfo.firstChild),Qr=t,rn=!0,Oi=null,n=b2(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wl(),r===i){t=Ao(e,t,n);break e}vr(e,t,r,n)}t=t.child}return t;case 5:return R2(t),e===null&&Kg(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Hg(r,i)?a=null:o!==null&&Hg(r,o)&&(t.flags|=32),Q2(e,t),vr(e,t,a,n),t.child;case 6:return e===null&&Kg(t),null;case 13:return J2(e,t,n);case 4:return Ev(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=El(t,null,r,n):vr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ni(r,i),H1(e,t,r,i,n);case 7:return vr(e,t,t.pendingProps,n),t.child;case 8:return vr(e,t,t.pendingProps.children,n),t.child;case 12:return vr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ut(rd,r._currentValue),r._currentValue=a,o!==null)if($i(o.value,a)){if(o.children===i.children&&!Lr.current){t=Ao(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=bo(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Yg(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(me(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Yg(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}vr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,yl(t,n),i=xi(i),r=r(i),t.flags|=1,vr(e,t,r,n),t.child;case 14:return r=t.type,i=Ni(r,t.pendingProps),i=Ni(r.type,i),V1(e,t,r,i,n);case 15:return q2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ni(r,i),Cf(e,t),t.tag=1,Br(r)?(e=!0,ed(t)):e=!1,yl(t,n),G2(t,r,i),Xg(t,r,i,n),Jg(null,t,r,!0,e,n);case 19:return eC(e,t,n);case 22:return X2(e,t,n)}throw Error(me(156,t.tag))};function gC(e,t){return VS(e,t)}function fM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(e,t,n,r){return new fM(e,t,n,r)}function Iv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dM(e){if(typeof e=="function")return Iv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nv)return 11;if(e===rv)return 14}return 2}function ma(e,t){var n=e.alternate;return n===null?(n=gi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pf(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Iv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case nl:return ds(n.children,i,o,t);case tv:a=8,i|=8;break;case _g:return e=gi(12,n,t,i|2),e.elementType=_g,e.lanes=o,e;case wg:return e=gi(13,n,t,i),e.elementType=wg,e.lanes=o,e;case Eg:return e=gi(19,n,t,i),e.elementType=Eg,e.lanes=o,e;case RS:return Wd(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SS:a=10;break e;case CS:a=9;break e;case nv:a=11;break e;case rv:a=14;break e;case ea:a=16,r=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return t=gi(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ds(e,t,n,r){return e=gi(7,e,r,t),e.lanes=n,e}function Wd(e,t,n,r){return e=gi(22,e,r,t),e.elementType=RS,e.lanes=n,e.stateNode={isHidden:!1},e}function Km(e,t,n){return e=gi(6,e,null,t),e.lanes=n,e}function Ym(e,t,n){return t=gi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hM(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pm(0),this.expirationTimes=Pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jv(e,t,n,r,i,o,a,s,l){return e=new hM(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=gi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wv(o),e}function mM(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function yC(e){if(!e)return va;e=e._reactInternals;e:{if(Cs(e)!==e||e.tag!==1)throw Error(me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(me(171))}if(e.tag===1){var n=e.type;if(Br(n))return y2(e,n,t)}return t}function vC(e,t,n,r,i,o,a,s,l){return e=jv(n,r,!0,e,i,o,a,s,l),e.context=yC(null),n=e.current,r=_r(),i=ha(n),o=bo(r,i),o.callback=t??null,fa(n,o,i),e.current.lanes=i,Eu(e,i,r),Ir(e,r),e}function Ud(e,t,n,r){var i=t.current,o=_r(),a=ha(i);return n=yC(n),t.context===null?t.context=n:t.pendingContext=n,t=bo(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fa(i,t,a),e!==null&&(Bi(e,i,a,o),Ef(e,i,a)),a}function dd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $v(e,t){tw(e,t),(e=e.alternate)&&tw(e,t)}function gM(){return null}var xC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fv(e){this._internalRoot=e}Gd.prototype.render=Fv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(me(409));Ud(e,t,null,null)};Gd.prototype.unmount=Fv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xs(function(){Ud(null,e,null,null)}),t[Po]=null}};function Gd(e){this._internalRoot=e}Gd.prototype.unstable_scheduleHydration=function(e){if(e){var t=XS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ra.length&&t!==0&&t<ra[n].priority;n++);ra.splice(n,0,e),n===0&&ZS(e)}};function zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nw(){}function yM(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=dd(a);o.call(u)}}var a=vC(t,r,e,0,null,!1,!1,"",nw);return e._reactRootContainer=a,e[Po]=a.current,nu(e.nodeType===8?e.parentNode:e),xs(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=dd(l);s.call(u)}}var l=jv(e,0,!1,null,null,!1,!1,"",nw);return e._reactRootContainer=l,e[Po]=l.current,nu(e.nodeType===8?e.parentNode:e),xs(function(){Ud(t,l,n,r)}),l}function Yd(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=dd(a);s.call(l)}}Ud(t,a,e,i)}else a=yM(n,t,e,i,r);return dd(a)}YS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ac(t.pendingLanes);n!==0&&(av(t,n|1),Ir(t,Sn()),!(Lt&6)&&(Cl=Sn()+500,Sa()))}break;case 13:xs(function(){var r=To(e,1);if(r!==null){var i=_r();Bi(r,e,1,i)}}),$v(e,1)}};sv=function(e){if(e.tag===13){var t=To(e,134217728);if(t!==null){var n=_r();Bi(t,e,134217728,n)}$v(e,134217728)}};qS=function(e){if(e.tag===13){var t=ha(e),n=To(e,t);if(n!==null){var r=_r();Bi(n,e,t,r)}$v(e,t)}};XS=function(){return $t};QS=function(e,t){var n=$t;try{return $t=e,t()}finally{$t=n}};Ng=function(e,t,n){switch(t){case"input":if(Cg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=jd(r);if(!i)throw Error(me(90));PS(r),Cg(r,i)}}}break;case"textarea":AS(e,n);break;case"select":t=n.value,t!=null&&dl(e,!!n.multiple,t,!1)}};IS=Ov;jS=xs;var vM={usingClientEntryPoint:!1,Events:[Su,al,jd,LS,BS,Ov]},mc={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xM={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zS(e),e===null?null:e.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||gM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{Od=zp.inject(xM),Zi=zp}catch{}}ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vM;ti.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(t))throw Error(me(200));return mM(e,t,null,n)};ti.createRoot=function(e,t){if(!zv(e))throw Error(me(299));var n=!1,r="",i=xC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=jv(e,1,!1,null,null,n,!1,r,i),e[Po]=t.current,nu(e.nodeType===8?e.parentNode:e),new Fv(t)};ti.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=zS(t),e=e===null?null:e.stateNode,e};ti.flushSync=function(e){return xs(e)};ti.hydrate=function(e,t,n){if(!Kd(t))throw Error(me(200));return Yd(null,e,t,!0,n)};ti.hydrateRoot=function(e,t,n){if(!zv(e))throw Error(me(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=xC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=vC(t,null,e,1,n??null,i,!1,o,a),e[Po]=t.current,nu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gd(t)};ti.render=function(e,t,n){if(!Kd(t))throw Error(me(200));return Yd(null,e,t,!1,n)};ti.unmountComponentAtNode=function(e){if(!Kd(e))throw Error(me(40));return e._reactRootContainer?(xs(function(){Yd(null,null,e,!1,function(){e._reactRootContainer=null,e[Po]=null})}),!0):!1};ti.unstable_batchedUpdates=Ov;ti.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kd(n))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return Yd(e,t,n,!1,r)};ti.version="18.3.1-next-f1338f8080-20240426";function _C(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_C)}catch(e){console.error(e)}}_C(),_S.exports=ti;var _M=_S.exports,rw=_M;vg.createRoot=rw.createRoot,vg.hydrateRoot=rw.hydrateRoot;const Wt="api",wM=e=>{const t=setInterval(()=>{const n=e.querySelector(".djs-palette");if(n&&(clearInterval(t),!n.querySelector(".palette-handle"))){const r=document.createElement("div");r.className="palette-handle",n.prepend(r);let i=!1,o,a,s,l;r.addEventListener("mousedown",d=>{i=!0,o=d.clientX,a=d.clientY;const g=n.getBoundingClientRect();s=g.left,l=g.top,d.preventDefault()});const u=d=>{if(!i)return;const g=d.clientX-o,y=d.clientY-a;n.style.left=`${s+g}px`,n.style.top=`${l+y}px`,n.style.right="auto",n.style.bottom="auto"},f=()=>{i=!1};document.addEventListener("mousemove",u),document.addEventListener("mouseup",f)}},500)},Hp=()=>{const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${n}/${r} ${i}:${o}:${a}`},EM=e=>{if(!e)return"";const t=e.split(" ");if(t.length===2){const n=t[0].split("/");if(n.length===3)return`${n[1]}/${n[2]} ${t[1]}`}return e},bM=(e,t=.2)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),o=Math.round(n+(255-n)*(1-t)),a=Math.round(r+(255-r)*(1-t)),s=Math.round(i+(255-i)*(1-t)),l=u=>{const f=u.toString(16);return f.length===1?"0"+f:f};return`#${l(o)}${l(a)}${l(s)}`},SM=({onNavigate:e})=>{const[t,n]=Me.useState([]),[r,i]=Me.useState("Checking..."),[o,a]=Me.useState(null),[s,l]=Me.useState("");Me.useEffect(()=>{fetch(`${Wt}/processes`).then(x=>x.json()).then(x=>n(x)),u()},[]);const u=()=>{fetch(`${Wt}/pi_status`).then(x=>x.json()).then(x=>i(x.status))},f=x=>{a(x.id),l(x.name)},d=async x=>{if(!s.trim())return;await fetch(`${Wt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:x,name:s})}),a(null);const C=await fetch(`${Wt}/processes`);n(await C.json())},g=x=>{confirm("")&&fetch(`${Wt}/processes/${x}`,{method:"DELETE"}).then(()=>n(t.filter(C=>C.id!==x)))},y=x=>{const C=new Blob([x.xml_content],{type:"text/xml"}),P=URL.createObjectURL(C),k=document.createElement("a");k.href=P,k.download=`${x.name||"process"}.bpmn`,document.body.appendChild(k),k.click(),document.body.removeChild(k)},v=x=>{const C=x.target.files[0];if(!C)return;const P=new FileReader;P.onload=async k=>{const w=k.target.result;if(!w.includes("bpmndi:BPMNDiagram")){alert(" BPMN  (BPMNDiagram)");return}const b=C.name.replace(".bpmn","").replace(".xml","");await fetch(`${Wt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,xml_content:w})});const D=await fetch(`${Wt}/processes`);n(await D.json())},P.readAsText(C)};return z.jsxs("div",{className:"p-8 max-w-7xl mx-auto h-full overflow-y-auto",children:[z.jsxs("div",{className:"flex justify-between items-center mb-10 sticky top-0 bg-[#121212] z-10 py-4 border-b border-white/5",children:[z.jsxs("div",{className:"flex items-center gap-4",children:[z.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-300 font-bold text-xl",children:"S"}),z.jsx("h1",{className:"text-2xl font-medium tracking-wide text-white/90",children:""})]}),z.jsxs("div",{className:"flex items-center gap-4",children:[z.jsxs("button",{onClick:()=>e("editor"),className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-medium shadow-sm transition flex items-center gap-2",children:[z.jsx("span",{className:"text-xl leading-none",children:"+"}),z.jsx("span",{children:""})]}),z.jsxs("label",{className:"cursor-pointer bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-5 py-2 rounded-full text-sm transition flex items-center gap-2",children:[z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),z.jsx("span",{children:" BPMN "}),z.jsx("input",{type:"file",accept:".bpmn,.xml",className:"hidden",onChange:v})]}),z.jsx("button",{onClick:()=>e("settings"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition",title:"",children:z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[t.map(x=>{const C=x.session_status===0;return z.jsxs("div",{className:`bg-[#1e1e1e] p-6 rounded-2xl border transition-all duration-200 flex flex-col group ${C?"border-[#81c995]/50 shadow-[0_4px_20px_rgba(129,201,149,0.1)]":"border-white/5 hover:border-white/20 hover:shadow-lg"}`,children:[z.jsxs("div",{className:"flex-1 mb-6",children:[z.jsxs("div",{className:"flex justify-between items-start mb-3 h-8",children:[o===x.id?z.jsxs("div",{className:"flex items-center gap-1 w-full",children:[z.jsx("input",{type:"text",value:s,onChange:P=>l(P.target.value),className:"bg-[#2d2d2d] text-white px-2 py-1 rounded border border-white/10 focus:border-[#8ab4f8] outline-none text-sm w-full",autoFocus:!0,onKeyDown:P=>{P.key==="Enter"?d(x.id):P.key==="Escape"&&a(null)}}),z.jsx("button",{onClick:()=>d(x.id),className:"text-[#81c995] hover:text-green-400 px-1",children:""}),z.jsx("button",{onClick:()=>a(null),className:"text-[#f28b82] hover:text-red-400 px-1",children:""})]}):z.jsxs("div",{className:"flex items-center gap-2 group/title w-full",children:[z.jsx("h3",{className:"text-lg font-medium text-white/90 group-hover:text-[#8ab4f8] transition-colors truncate",title:x.name,children:x.name}),z.jsx("button",{onClick:P=>{P.stopPropagation(),f(x)},className:"opacity-0 group-hover/title:opacity-100 text-white/40 hover:text-[#8ab4f8] transition",title:"",children:""})]}),C&&z.jsx("span",{className:"bg-[#81c995]/20 text-[#81c995] text-xs px-3 py-1 rounded-full font-medium ml-2 whitespace-nowrap",children:""})]}),z.jsxs("p",{className:"text-white/40 text-xs",children:[": ",x.updated_at]})]}),z.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[z.jsx("button",{onClick:()=>e("operator",x.id),className:`col-span-2 py-2.5 rounded-full text-sm font-medium transition ${C?"bg-[#81c995] text-[#0f5132] hover:bg-[#a8dab5]":"bg-[#8ab4f8] text-[#002d6f] hover:bg-[#aecbfa]"}`,children:C?"":""}),z.jsx("button",{onClick:()=>!C&&e("editor",x.id),disabled:C,className:`py-2 rounded-full text-sm transition ${C?"bg-[#2d2d2d] text-white/20 cursor-not-allowed":"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80"}`,children:""}),z.jsx("button",{onClick:()=>e("review",x.id),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-2 rounded-full text-sm transition",children:""})]}),z.jsxs("div",{className:"flex gap-2 pt-3 border-t border-white/5",children:[z.jsx("button",{onClick:()=>y(x),className:"flex-1 text-xs text-white/40 hover:text-[#8ab4f8] py-1 transition",children:" BPMN"}),z.jsx("button",{onClick:()=>g(x.id),className:"flex-1 text-xs text-white/40 hover:text-[#f28b82] py-1 transition",children:""})]})]},x.id)}),t.length===0&&z.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-white/30 border-2 border-dashed border-white/10 rounded-3xl",children:[z.jsx("div",{className:"text-6xl mb-4",children:""}),z.jsx("p",{children:" SOP "})]})]})]})};function Oe(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function CM(e,t){return t={exports:{}},e(t,t.exports),t.exports}var RM=CM(function(e){var t=e.exports=function(n,r){if(r||(r=16),n===void 0&&(n=128),n<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),o=2;i===1/0;o*=2)i=Math.log(Math.pow(2,n/o))/Math.log(r)*o;for(var a=i-Math.floor(i),s="",o=0;o<Math.floor(i);o++){var l=Math.floor(Math.random()*r).toString(r);s=l+s}if(a){var u=Math.pow(r,a),l=Math.floor(Math.random()*u).toString(r);s=l+s}var f=parseInt(s,r);return f!==1/0&&f>=Math.pow(2,n)?t(n,r):s};t.rack=function(n,r,i){var o=function(s){var l=0;do{if(l++>10)if(i)n+=i;else throw new Error("too many ID collisions, use more bits");var u=t(n,r)}while(Object.hasOwnProperty.call(a,u));return a[u]=s,u},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,l){return o.hats[s]=l,o},o.bits=n||128,o.base=r||16,o}});function to(e){if(!(this instanceof to))return new to(e);e=e||[128,36,1],this._seed=e.length?RM.rack(e[0],e[1],e[2]):e}to.prototype.next=function(e){return this._seed(e||!0)};to.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};to.prototype.claim=function(e,t){this._seed.set(e,t||!0)};to.prototype.assigned=function(e){return this._seed.get(e)||!1};to.prototype.unclaim=function(e){delete this._seed.hats[e]};to.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function Hv(e){return Array.prototype.concat.apply([],e)}const Ru=Object.prototype.toString,kM=Object.prototype.hasOwnProperty;function _s(e){return e===void 0}function Bn(e){return e!==void 0}function pu(e){return e==null}function at(e){return Ru.call(e)==="[object Array]"}function jn(e){return Ru.call(e)==="[object Object]"}function Ze(e){return Ru.call(e)==="[object Number]"}function Rn(e){const t=Ru.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function jr(e){return Ru.call(e)==="[object String]"}function PM(e){if(!at(e))throw new Error("must supply array")}function xr(e,t){return!pu(e)&&kM.call(e,t)}function At(e,t){const n=qd(t);let r;return U(e,function(i,o){if(n(i,o))return r=i,!1}),r}function wC(e,t){const n=qd(t);let r=at(e)?-1:void 0;return U(e,function(i,o){if(n(i,o))return r=o,!1}),r}function gt(e,t){const n=qd(t);let r=[];return U(e,function(i,o){n(i,o)&&r.push(i)}),r}function U(e,t){let n,r;if(_s(e))return;const i=at(e)?DM:NM;for(let o in e)if(xr(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function TM(e,t){if(_s(e))return[];PM(e);const n=qd(t);return e.filter(function(r,i){return!n(r,i)})}function $r(e,t,n){return U(e,function(r,i){n=t(n,r,i)}),n}function Rs(e,t){return!!$r(e,function(n,r,i){return n&&t(r,i)},!0)}function Ca(e,t){return!!At(e,t)}function er(e,t){let n=[];return U(e,function(r,i){n.push(t(r,i))}),n}function hd(e){return e&&Object.keys(e)||[]}function AM(e){return hd(e).length}function Vv(e){return er(e,t=>t)}function Fl(e,t,n={}){return t=Wv(t),U(e,function(r){let i=t(r)||"_",o=n[i];o||(o=n[i]=[]),o.push(r)}),n}function EC(e,...t){e=Wv(e);let n={};return U(t,i=>Fl(i,e,n)),er(n,function(i,o){return i[0]})}const MM=EC;function no(e,t){t=Wv(t);let n=[];return U(e,function(r,i){let o=t(r,i),a={d:o,v:r};for(var s=0;s<n.length;s++){let{d:l}=n[s];if(o<l){n.splice(s,0,a);return}}n.push(a)}),er(n,r=>r.v)}function Ii(e){return function(t){return Rs(e,function(n,r){return t[r]===n})}}function Wv(e){return Rn(e)?e:t=>t[e]}function qd(e){return Rn(e)?e:t=>t===e}function NM(e){return e}function DM(e){return Number(e)}function bC(e,t){let n,r,i,o;function a(d){let g=Date.now(),y=d?0:o+t-g;if(y>0)return s(y);e.apply(i,r),l()}function s(d){n=setTimeout(a,d)}function l(){n&&clearTimeout(n),n=o=r=i=void 0}function u(){n&&a(!0),l()}function f(...d){o=Date.now(),r=d,i=this,n||s(t)}return f.flush=u,f.cancel=l,f}function wr(e,t){return e.bind(t)}function q(e,...t){return Object.assign(e,...t)}function OM(e,t,n){let r=e;return U(t,function(i,o){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=r[i];Bn(a)&&pu(s)&&(s=r[i]=isNaN(+a)?{}:[]),_s(a)?_s(n)?delete r[i]:r[i]=n:r=s}),e}function Fi(e,t){let n={},r=Object(e);return U(t,function(i){i in r&&(n[i]=e[i])}),n}function wi(e,t){let n={},r=Object(e);return U(r,function(i,o){t.indexOf(o)===-1&&(n[o]=i)}),n}function LM(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}const BM=Object.prototype.toString,IM=Object.prototype.hasOwnProperty;function jM(e){return e===void 0}function $M(e){return BM.call(e)==="[object Array]"}function FM(e,t){return IM.call(e,t)}function iw(e,t){let n,r;if(jM(e))return;const i=$M(e)?HM:zM;for(let o in e)if(FM(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function zM(e){return e}function HM(e){return Number(e)}function Zn(e,...t){const n=e.style;return iw(t,function(r){r&&iw(r,function(i,o){n[o]=i})}),e}function ur(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const VM=Object.prototype.toString;function on(e){return new xa(e)}function xa(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}xa.prototype.add=function(e){return this.list.add(e),this};xa.prototype.remove=function(e){return VM.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};xa.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};xa.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};xa.prototype.array=function(){return Array.from(this.list)};xa.prototype.has=xa.prototype.contains=function(e){return this.list.contains(e)};function Xd(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Ra(e,t,n){var r=n?e:e.parentNode;return r&&typeof r.closest=="function"&&r.closest(t)||null}var md={},gd,py,Uv;function SC(){gd=window.addEventListener?"addEventListener":"attachEvent",py=window.removeEventListener?"removeEventListener":"detachEvent",Uv=gd!=="addEventListener"?"on":""}var WM=md.bind=function(e,t,n,r){return gd||SC(),e[gd](Uv+t,n,r||!1),n},UM=md.unbind=function(e,t,n,r){return py||SC(),e[py](Uv+t,n,r||!1),n},ot=LM({__proto__:null,bind:WM,unbind:UM,default:md},[md]),CC=["focus","blur"];function GM(e,t,n,r,i){return CC.indexOf(n)!==-1&&(i=!0),ot.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Ra(a,t,!0),o.delegateTarget&&r.call(e,o)},i)}function KM(e,t,n,r){return CC.indexOf(t)!==-1&&(r=!0),ot.unbind(e,t,n,r)}var Or={bind:GM,unbind:KM},YM=qM,RC=!1,Vp;typeof document<"u"&&(Vp=document.createElement("div"),Vp.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',RC=!Vp.getElementsByTagName("link").length,Vp=void 0);var bn={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:RC?[1,"X<div>","</div>"]:[0,"",""]};bn.td=bn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];bn.option=bn.optgroup=[1,'<select multiple="multiple">',"</select>"];bn.thead=bn.tbody=bn.colgroup=bn.caption=bn.tfoot=[1,"<table>","</table>"];bn.polyline=bn.ellipse=bn.polygon=bn.circle=bn.text=bn.line=bn.path=bn.rect=bn.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function qM(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if(r=="body"){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var i=Object.prototype.hasOwnProperty.call(bn,r)?bn[r]:bn._default,o=i[0],a=i[1],s=i[2],l=t.createElement("div");for(l.innerHTML=a+e+s;o--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var u=t.createDocumentFragment();l.firstChild;)u.appendChild(l.removeChild(l.firstChild));return u}var zt=YM;function Qd(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function Bt(e,t){return t=t||document,t.querySelector(e)}function fy(e,t){return t=t||document,t.querySelectorAll(e)}function ro(e){e.parentNode&&e.parentNode.removeChild(e)}function XM(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function QM(e,t){return t.appendChild(XM(e,t))}function tt(e,t){return QM(t,e),e}var dy=2,kC={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":dy,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":dy,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function ZM(e,t){return kC[t]?e.style[t]:e.getAttributeNS(null,t)}function PC(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=kC[r];i?(i===dy&&typeof n=="number"&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function JM(e,t){var n=Object.keys(t),r,i;for(r=0,i;i=n[r];r++)PC(e,i,t[i])}function Pe(e,t,n){if(typeof t=="string")if(n!==void 0)PC(e,t,n);else return ZM(e,t);else JM(e,t);return e}const eN=Object.prototype.toString;function Ct(e){return new _a(e)}function _a(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}_a.prototype.add=function(e){return this.list.add(e),this};_a.prototype.remove=function(e){return eN.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};_a.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};_a.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};_a.prototype.array=function(){return Array.from(this.list)};_a.prototype.has=_a.prototype.contains=function(e){return this.list.contains(e)};function Zd(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function TC(e){return e.cloneNode(!0)}var Gv={svg:"http://www.w3.org/2000/svg"},ow='<svg xmlns="'+Gv.svg+'"';function tN(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Gv.svg)===-1&&(e=ow+e.substring(4)):(e=ow+">"+e+"</svg>",t=!0);var n=nN(e);if(!t)return n;for(var r=document.createDocumentFragment(),i=n.firstChild;i.firstChild;)r.appendChild(i.firstChild);return r}function nN(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ze(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=tN(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Gv.svg,e),t&&Pe(n,t),n}var qm=null;function AC(){return qm===null&&(qm=ze("svg")),qm}function aw(e,t){var n,r,i=Object.keys(t);for(n=0;r=i[n];n++)e[r]=t[r];return e}function rN(e,t,n,r,i,o){var a=AC().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return aw(a,e);case 6:return aw(a,{a:e,b:t,c:n,d:r,e:i,f:o})}}function Hc(e){return AC().createSVGTransform()}var sw=/([&<>]{1})/g,iN=/([&<>\n\r"]{1})/g,oN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Xm(e,t){function n(r,i){return oN[i]||i}return e.replace(t,n)}function MC(e,t){var n,r,i,o,a;switch(e.nodeType){case 3:t.push(Xm(e.textContent,sw));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(i=e.attributes,n=0,r=i.length;n<r;++n)o=i.item(n),t.push(" ",o.name,'="',Xm(o.value,iN),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,r=a.length;n<r;++n)MC(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",Xm(e.nodeValue,sw),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function aN(e){for(var t=e.firstChild,n=[];t;)MC(t,n),t=t.nextSibling;return n.join("")}function lw(e,t){return aN(e)}function Cn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function sN(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function lN(e,t){var n,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem(sN(e,r))}function fu(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),lN(n,t)),n.consolidate()}const cN=/^class[ {]/;function uN(e){return cN.test(e.toString())}function Kv(e){return Array.isArray(e)}function Qm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Tf(...e){e.length===1&&Kv(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const pN=/constructor\s*[^(]*\(\s*([^)]*)\)/m,fN=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,dN=/\/\*([^*]*)\*\//m;function hN(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(uN(e)?pN:fN);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(r=>{const i=r.match(dN);return(i&&i[1]||r).trim()})||[]}function NC(e,t){const n=t||{get:function(w,b){if(r.push(w),b===!1)return null;throw s(`No provider for "${w}"!`)}},r=[],i=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(w){const b=r.join(" -> ");return r.length=0,new Error(b?`${w} (Resolving: ${b})`:w)};function l(w,b){if(!i[w]&&w.includes(".")){const D=w.split(".");let I=l(D.shift());for(;D.length;)I=I[D.shift()];return I}if(Qm(o,w))return o[w];if(Qm(i,w)){if(r.indexOf(w)!==-1)throw r.push(w),s("Cannot resolve circular dependency!");return r.push(w),o[w]=i[w][0](i[w][1]),r.pop(),o[w]}return n.get(w,b)}function u(w,b){if(typeof b>"u"&&(b={}),typeof w!="function")if(Kv(w))w=Tf(w.slice());else throw s(`Cannot invoke "${w}". Expected a function!`);const I=(w.$inject||hN(w)).map(H=>Qm(b,H)?b[H]:l(H));return{fn:w,dependencies:I}}function f(w){const{fn:b,dependencies:D}=u(w),I=Function.prototype.bind.call(b,null,...D);return new I}function d(w,b,D){const{fn:I,dependencies:H}=u(w,D);return I.apply(b,H)}function g(w){return Tf(b=>w.get(b))}function y(w,b){if(b&&b.length){const D=Object.create(null),I=Object.create(null),H=[],L=[],X=[];let Y,K,se,ae;for(let Re in i)Y=i[Re],b.indexOf(Re)!==-1&&(Y[2]==="private"?(K=H.indexOf(Y[3]),K===-1?(se=Y[3].createChild([],b),ae=g(se),H.push(Y[3]),L.push(se),X.push(ae),D[Re]=[ae,Re,"private",se]):D[Re]=[X[K],Re,"private",L[K]]):D[Re]=[Y[2],Y[1]],I[Re]=!0),(Y[2]==="factory"||Y[2]==="type")&&Y[1].$scope&&b.forEach(wt=>{Y[1].$scope.indexOf(wt)!==-1&&(D[Re]=[Y[2],Y[1]],I[wt]=!0)});b.forEach(Re=>{if(!I[Re])throw new Error('No provider for "'+Re+'". Cannot use provider from the parent!')}),w.unshift(D)}return new NC(w,a)}const v={factory:d,type:f,value:function(w){return w}};function x(w,b){const D=w.__init__||[];return function(){D.forEach(I=>{typeof I=="string"?b.get(I):b.invoke(I)})}}function C(w){const b=w.__exports__;if(b){const D=w.__modules__,I=Object.keys(w).reduce((K,se)=>(se!=="__exports__"&&se!=="__modules__"&&se!=="__init__"&&se!=="__depends__"&&(K[se]=w[se]),K),Object.create(null)),H=(D||[]).concat(I),L=y(H),X=Tf(function(K){return L.get(K)});b.forEach(function(K){i[K]=[X,K,"private",L]});const Y=(w.__init__||[]).slice();return Y.unshift(function(){L.init()}),w=Object.assign({},w,{__init__:Y}),x(w,L)}return Object.keys(w).forEach(function(D){if(D==="__init__"||D==="__depends__")return;const I=w[D];if(I[2]==="private"){i[D]=I;return}const H=I[0],L=I[1];i[D]=[v[H],mN(H,L),H]}),x(w,a)}function P(w,b){return w.indexOf(b)!==-1||(w=(b.__depends__||[]).reduce(P,w),w.indexOf(b)!==-1)?w:w.concat(b)}function k(w){const b=w.reduce(P,[]).map(C);let D=!1;return function(){D||(D=!0,b.forEach(I=>I()))}}this.get=l,this.invoke=d,this.instantiate=f,this.createChild=y,this.init=k(e)}function mN(e,t){return e!=="value"&&Kv(t)&&(t=Tf(t.slice())),t}var gN=1e3;function No(e,t){var n=this;t=t||gN,e.on(["render.shape","render.connection"],t,function(r,i){var o=r.type,a=i.element,s=i.gfx,l=i.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(s,a,l):n.drawConnection(s,a,l)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(r,i){if(n.canRender(i))return r.type==="render.getShapePath"?n.getShapePath(i):n.getConnectionPath(i)})}No.prototype.canRender=function(e){};No.prototype.drawShape=function(e,t){};No.prototype.drawConnection=function(e,t){};No.prototype.getShapePath=function(e){};No.prototype.getConnectionPath=function(e){};function ks(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function yN(e){return["M",e.x,e.y]}function Zm(e){return["L",e.x,e.y]}function vN(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function xN(e,t){const n=e.length,r=[yN(e[0])];for(let i=1;i<n;i++){const o=e[i-1],a=e[i],s=e[i+1];if(!s||!t){r.push(Zm(a));continue}const l=Math.min(t,hy(a.x-o.x,a.y-o.y),hy(s.x-a.x,s.y-a.y));if(!l){r.push(Zm(a));continue}const u=Wp(a,o,l),f=Wp(a,o,l*.5),d=Wp(a,s,l),g=Wp(a,s,l*.5);r.push(Zm(u)),r.push(vN(f,g,d))}return r}function Wp(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=hy(r,i),a=n/o;return{x:e.x+r*a,y:e.y+i*a}}function hy(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Jd(e,t,n){Ze(t)&&(n=t,t=null),t||(t={});const r=ze("path",t);return Ze(n)&&(r.dataset.cornerRadius=String(n)),DC(r,e)}function DC(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return Pe(e,{d:ks(xN(t,n))}),e}function eh(e){return gt(e,function(t){return!At(e,function(n){return n!==t&&OC(t,n)})})}function OC(e,t){if(t){if(e===t)return t;if(e.parent)return OC(e.parent,t)}}function cw(e,t,n){var r=!n||e.indexOf(t)===-1;return r&&e.push(t),r}function Ps(e,t,n){n=n||0,at(e)||(e=[e]),U(e,function(r,i){var o=t(r,i,n);at(o)&&o.length&&Ps(o,t,n+1)})}function _N(e,t,n){var r=[],i=[];return Ps(e,function(o,a,s){cw(r,o,t);var l=o.children;if(l&&cw(i,l,t))return l}),r}function ku(e,t){return _N(e,!t)}function wN(e,t,n){_s(t)&&(t=!0),jn(t)&&(n=t,t=!0),n=n||{};var r=gc(n.allShapes),i=gc(n.allConnections),o=gc(n.enclosedElements),a=gc(n.enclosedConnections),s=gc(n.topLevel,t&&Fl(e,function(f){return f.id}));function l(f){s[f.source.id]&&s[f.target.id]&&(s[f.id]=[f]),r[f.source.id]&&r[f.target.id]&&(a[f.id]=o[f.id]=f),i[f.id]=f}function u(f){if(o[f.id]=f,f.waypoints)a[f.id]=i[f.id]=f;else return r[f.id]=f,U(f.incoming,l),U(f.outgoing,l),f.children}return Ps(e,u),{allShapes:r,allConnections:i,topLevel:s,enclosedConnections:a,enclosedElements:o}}function Nn(e,t){t=!!t,at(e)||(e=[e]);var n,r,i,o;return U(e,function(a){var s=a;a.waypoints&&!t&&(s=Nn(a.waypoints,!0));var l=s.x,u=s.y,f=s.height||0,d=s.width||0;(l<n||n===void 0)&&(n=l),(u<r||r===void 0)&&(r=u),(l+d>i||i===void 0)&&(i=l+d),(u+f>o||o===void 0)&&(o=u+f)}),{x:n,y:r,height:o-r,width:i-n}}function EN(e,t){var n={};return U(e,function(r){var i=r;i.waypoints&&(i=Nn(i)),!Ze(t.y)&&i.x>t.x&&(n[r.id]=r),!Ze(t.x)&&i.y>t.y&&(n[r.id]=r),i.x>t.x&&i.y>t.y&&(Ze(t.width)&&Ze(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y||!Ze(t.width)||!Ze(t.height))&&(n[r.id]=r)}),n}function LC(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function BC(e){return!!(e&&e.isFrame)}function gc(e,t){return q({},e||{},t||{})}var bN=1;function ka(e,t){No.call(this,e,bN),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Oe(ka,No);ka.prototype.canRender=function(){return!0};ka.prototype.drawShape=function(t,n,r){var i=ze("rect");return Pe(i,{x:0,y:0,width:n.width||0,height:n.height||0}),BC(n)?Pe(i,q({},this.FRAME_STYLE,r||{})):Pe(i,q({},this.SHAPE_STYLE,r||{})),tt(t,i),i};ka.prototype.drawConnection=function(t,n,r){var i=Jd(n.waypoints,q({},this.CONNECTION_STYLE,r||{}));return tt(t,i),i};ka.prototype.getShapePath=function(t){var n=t.x,r=t.y,i=t.width,o=t.height,a=[["M",n,r],["l",i,0],["l",0,o],["l",-i,0],["z"]];return ks(a)};ka.prototype.getConnectionPath=function(t){var n=t.waypoints,r,i,o=[];for(r=0;i=n[r];r++)i=i.original||i,o.push([r===0?"M":"L",i.x,i.y]);return ks(o)};ka.$inject=["eventBus","styles"];function SN(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,r,i){var o=this.style(r,i);return q(o,{class:n})},this.style=function(n,r){!at(n)&&!r&&(r=n,n=[]);var i=$r(n,function(o,a){return q(o,e[a]||{})},{});return r?q(i,r):i},this.computeStyle=function(n,r,i){return at(r)||(i=r,r=[]),t.style(r||[],q({},i,n||{}))}}const CN={__init__:["defaultRenderer"],defaultRenderer:["type",ka],styles:["type",SN]};function yn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function kn(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var r=e.indexOf(t);if(r!==-1){if(r===n)return;if(n!==-1)e.splice(r,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Yv(e,t){return!e||!t?-1:e.indexOf(t)}function Pu(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qv(e,t,n,r){if(typeof r>"u"&&(r=5),!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Pu(e,t);return Math.abs(i/o)<=r}var RN=2;function wo(e,t){var n=Array.from(arguments).flat();const r={x:"v",y:"h"};for(const[i,o]of Object.entries(r))if(kN(i,n))return o;return!1}function kN(e,t){const n=t[0];return Rs(t,function(r){return Math.abs(n[e]-r[e])<=RN})}function uw(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function my(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var PN=/,?([a-z]),?/gi,pw=parseFloat,dn=Math,Yo=dn.PI,Ki=dn.min,Yi=dn.max,fw=dn.pow,sa=dn.abs,TN=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,AN=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,yd=Array.isArray||function(e){return e instanceof Array};function Xv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vc(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Xv(e,n)&&(t[n]=Vc(e[n]));return t}function MN(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function NN(e){function t(){var n=Array.prototype.slice.call(arguments,0),r=n.join(""),i=t.cache=t.cache||{},o=t.count=t.count||[];return Xv(i,r)?(MN(o,r),i[r]):(o.length>=1e3&&delete i[o.shift()],o.push(r),i[r]=e(...arguments),i[r])}return t}function DN(e){if(!e)return null;var t=Rl(e);if(t.arr)return Vc(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return yd(e)&&yd(e[0])&&(r=Vc(e)),r.length||String(e).replace(TN,function(i,o,a){var s=[],l=o.toLowerCase();for(a.replace(AN,function(u,f){f&&s.push(+f)}),l=="m"&&s.length>2&&(r.push([o,...s.splice(0,2)]),l="l",o=o=="m"?"l":"L");s.length>=n[l]&&(r.push([o,...s.splice(0,n[l])]),!!n[l]););}),r.toString=Rl.toString,t.arr=Vc(r),r}function Rl(e){var t=Rl.ps=Rl.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Xv(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function gy(e,t,n,r){return arguments.length===1&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function IC(){return this.join(",").replace(PN,"$1")}function vd(e){var t=Vc(e);return t.toString=IC,t}function dw(e,t,n,r,i,o,a,s,l){var u=1-l,f=fw(u,3),d=fw(u,2),g=l*l,y=g*l,v=f*e+d*3*l*n+u*3*l*l*i+y*a,x=f*t+d*3*l*r+u*3*l*l*o+y*s;return{x:xd(v),y:xd(x)}}function hw(e){var t=jN(...e);return gy(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function qo(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function ON(e,t){return e=gy(e),t=gy(t),qo(t,e.x,e.y)||qo(t,e.x2,e.y)||qo(t,e.x,e.y2)||qo(t,e.x2,e.y2)||qo(e,t.x,t.y)||qo(e,t.x2,t.y)||qo(e,t.x,t.y2)||qo(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function mw(e,t,n,r,i){var o=-3*t+9*n-9*r+3*i,a=e*o+6*t-12*n+6*r;return e*a-3*t+3*n}function gw(e,t,n,r,i,o,a,s,l){l==null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,f=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],y=0,v=0;v<f;v++){var x=u*d[v]+u,C=mw(x,e,n,i,a),P=mw(x,t,r,o,s),k=C*C+P*P;y+=g[v]*dn.sqrt(k)}return u*y}function LN(e,t,n,r,i,o,a,s){if(!(Yi(e,n)<Ki(i,a)||Ki(e,n)>Yi(i,a)||Yi(t,r)<Ki(o,s)||Ki(t,r)>Yi(o,s))){var l=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),u=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),f=(e-n)*(o-s)-(t-r)*(i-a);if(f){var d=xd(l/f),g=xd(u/f),y=+d.toFixed(2),v=+g.toFixed(2);if(!(y<+Ki(e,n).toFixed(2)||y>+Yi(e,n).toFixed(2)||y<+Ki(i,a).toFixed(2)||y>+Yi(i,a).toFixed(2)||v<+Ki(t,r).toFixed(2)||v>+Yi(t,r).toFixed(2)||v<+Ki(o,s).toFixed(2)||v>+Yi(o,s).toFixed(2)))return{x:d,y:g}}}}function xd(e){return Math.round(e*1e11)/1e11}function BN(e,t,n){var r=hw(e),i=hw(t);if(!ON(r,i))return[];for(var o=gw(...e),a=gw(...t),s=yw(e)?1:~~(o/5)||1,l=yw(t)?1:~~(a/5)||1,u=[],f=[],d={},g=[],y=0;y<s+1;y++){var v=dw(...e,y/s);u.push({x:v.x,y:v.y,t:y/s})}for(y=0;y<l+1;y++)v=dw(...t,y/l),f.push({x:v.x,y:v.y,t:y/l});for(y=0;y<s;y++)for(var x=0;x<l;x++){var C=u[y],P=u[y+1],k=f[x],w=f[x+1],b=sa(P.x-C.x)<.01?"y":"x",D=sa(w.x-k.x)<.01?"y":"x",I=LN(C.x,C.y,P.x,P.y,k.x,k.y,w.x,w.y),H;if(I){if(H=I.x.toFixed(9)+"#"+I.y.toFixed(9),d[H])continue;d[H]=!0;var L=C.t+sa((I[b]-C[b])/(P[b]-C[b]))*(P.t-C.t),X=k.t+sa((I[D]-k[D])/(w[D]-k[D]))*(w.t-k.t);L>=0&&L<=1&&X>=0&&X<=1&&g.push({x:I.x,y:I.y,t1:L,t2:X})}}return g}function jC(e,t,n){e=xw(e),t=xw(t);for(var r,i,o,a,s,l,u,f,d,g,y=n?0:[],v=0,x=e.length;v<x;v++){var C=e[v];if(C[0]=="M")r=s=C[1],i=l=C[2];else{C[0]=="C"?(d=[r,i,...C.slice(1)],r=d[6],i=d[7]):(d=[r,i,r,i,s,l,s,l],r=s,i=l);for(var P=0,k=t.length;P<k;P++){var w=t[P];if(w[0]=="M")o=u=w[1],a=f=w[2];else{w[0]=="C"?(g=[o,a,...w.slice(1)],o=g[6],a=g[7]):(g=[o,a,o,a,u,f,u,f],o=u,a=f);var b=BN(d,g);{for(var D=0,I=b.length;D<I;D++)b[D].segment1=v,b[D].segment2=P,b[D].bez1=d,b[D].bez2=g;y=y.concat(b)}}}}}return y}function IN(e){var t=Rl(e);if(t.abs)return vd(t.abs);if((!yd(e)||!yd(e&&e[0]))&&(e=DN(e)),!e||!e.length)return[["M",0,0]];var n=[],r=0,i=0,o=0,a=0,s=0,l;e[0][0]=="M"&&(r=+e[0][1],i=+e[0][2],o=r,a=i,s++,n[0]=["M",r,i]);for(var u,f,d=s,g=e.length;d<g;d++){if(n.push(u=[]),f=e[d],l=f[0],l!=l.toUpperCase())switch(u[0]=l.toUpperCase(),u[0]){case"A":u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=+f[6]+r,u[7]=+f[7]+i;break;case"V":u[1]=+f[1]+i;break;case"H":u[1]=+f[1]+r;break;case"M":o=+f[1]+r,a=+f[2]+i;default:for(var y=1,v=f.length;y<v;y++)u[y]=+f[y]+(y%2?r:i)}else for(var x=0,C=f.length;x<C;x++)u[x]=f[x];switch(l=l.toUpperCase(),u[0]){case"Z":r=+o,i=+a;break;case"H":r=u[1];break;case"V":i=u[1];break;case"M":o=u[u.length-2],a=u[u.length-1];default:r=u[u.length-2],i=u[u.length-1]}}return n.toString=IC,t.abs=vd(n),n}function yw(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Up(e,t,n,r){return[e,t,n,r,n,r]}function vw(e,t,n,r,i,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function $C(e,t,n,r,i,o,a,s,l,u){var f=Yo*120/180,d=Yo/180*(+i||0),g=[],y,v=NN(function(E,R,$){var V=E*dn.cos($)-R*dn.sin($),J=E*dn.sin($)+R*dn.cos($);return{x:V,y:J}});if(u)H=u[0],L=u[1],D=u[2],I=u[3];else{y=v(e,t,-d),e=y.x,t=y.y,y=v(s,l,-d),s=y.x,l=y.y;var x=(e-s)/2,C=(t-l)/2,P=x*x/(n*n)+C*C/(r*r);P>1&&(P=dn.sqrt(P),n=P*n,r=P*r);var k=n*n,w=r*r,b=(o==a?-1:1)*dn.sqrt(sa((k*w-k*C*C-w*x*x)/(k*C*C+w*x*x))),D=b*n*C/r+(e+s)/2,I=b*-r*x/n+(t+l)/2,H=dn.asin(((t-I)/r).toFixed(9)),L=dn.asin(((l-I)/r).toFixed(9));H=e<D?Yo-H:H,L=s<D?Yo-L:L,H<0&&(H=Yo*2+H),L<0&&(L=Yo*2+L),a&&H>L&&(H=H-Yo*2),!a&&L>H&&(L=L-Yo*2)}var X=L-H;if(sa(X)>f){var Y=L,K=s,se=l;L=H+f*(a&&L>H?1:-1),s=D+n*dn.cos(L),l=I+r*dn.sin(L),g=$C(s,l,n,r,i,0,a,K,se,[L,Y,D,I])}X=L-H;var ae=dn.cos(H),Re=dn.sin(H),wt=dn.cos(L),Ge=dn.sin(L),Ke=dn.tan(X/4),ye=4/3*n*Ke,je=4/3*r*Ke,Ne=[e,t],qe=[e+ye*Re,t-je*ae],re=[s+ye*Ge,l-je*wt],oe=[s,l];if(qe[0]=2*Ne[0]-qe[0],qe[1]=2*Ne[1]-qe[1],u)return[qe,re,oe].concat(g);g=[qe,re,oe].concat(g).join().split(",");for(var _e=[],ut=0,B=g.length;ut<B;ut++)_e[ut]=ut%2?v(g[ut-1],g[ut],d).y:v(g[ut],g[ut+1],d).x;return _e}function jN(e,t,n,r,i,o,a,s){for(var l=[],u=[[],[]],f,d,g,y,v,x,C,P,k=0;k<2;++k){if(k==0?(d=6*e-12*n+6*i,f=-3*e+9*n-9*i+3*a,g=3*n-3*e):(d=6*t-12*r+6*o,f=-3*t+9*r-9*o+3*s,g=3*r-3*t),sa(f)<1e-12){if(sa(d)<1e-12)continue;y=-g/d,0<y&&y<1&&l.push(y);continue}C=d*d-4*g*f,P=dn.sqrt(C),!(C<0)&&(v=(-d+P)/(2*f),0<v&&v<1&&l.push(v),x=(-d-P)/(2*f),0<x&&x<1&&l.push(x))}for(var w=l.length,b=w,D;w--;)y=l[w],D=1-y,u[0][w]=D*D*D*e+3*D*D*y*n+3*D*y*y*i+y*y*y*a,u[1][w]=D*D*D*t+3*D*D*y*r+3*D*y*y*o+y*y*y*s;return u[0][b]=e,u[1][b]=t,u[0][b+1]=a,u[1][b+1]=s,u[0].length=u[1].length=b+2,{x0:Ki(...u[0]),y0:Ki(...u[1]),x1:Yi(...u[0]),y1:Yi(...u[1])}}function xw(e){var t=Rl(e);if(t.curve)return vd(t.curve);for(var n=IN(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(y,v,x){var C,P;if(!y)return["C",v.x,v.y,v.x,v.y,v.x,v.y];switch(!(y[0]in{T:1,Q:1})&&(v.qx=v.qy=null),y[0]){case"M":v.X=y[1],v.Y=y[2];break;case"A":y=["C",...$C(v.x,v.y,...y.slice(1))];break;case"S":x=="C"||x=="S"?(C=v.x*2-v.bx,P=v.y*2-v.by):(C=v.x,P=v.y),y=["C",C,P,...y.slice(1)];break;case"T":x=="Q"||x=="T"?(v.qx=v.x*2-v.qx,v.qy=v.y*2-v.qy):(v.qx=v.x,v.qy=v.y),y=["C",...vw(v.x,v.y,v.qx,v.qy,y[1],y[2])];break;case"Q":v.qx=y[1],v.qy=y[2],y=["C",...vw(v.x,v.y,y[1],y[2],y[3],y[4])];break;case"L":y=["C",...Up(v.x,v.y,y[1],y[2])];break;case"H":y=["C",...Up(v.x,v.y,y[1],v.y)];break;case"V":y=["C",...Up(v.x,v.y,v.x,y[1])];break;case"Z":y=["C",...Up(v.x,v.y,v.X,v.Y)];break}return y},o=function(y,v){if(y[v].length>7){y[v].shift();for(var x=y[v];x.length;)a[v]="A",y.splice(v++,0,["C",...x.splice(0,6)]);y.splice(v,1),f=n.length}},a=[],s="",l="",u=0,f=n.length;u<f;u++){n[u]&&(s=n[u][0]),s!="C"&&(a[u]=s,u&&(l=a[u-1])),n[u]=i(n[u],r,l),a[u]!="A"&&s=="C"&&(a[u]="C"),o(n,u);var d=n[u],g=d.length;r.x=d[g-2],r.y=d[g-1],r.bx=pw(d[g-4])||r.x,r.by=pw(d[g-3])||r.y}return t.curve=vd(n),n}function jt(e){return jn(e)&&xr(e,"waypoints")}function kt(e){return jn(e)&&xr(e,"labelTarget")}function FC(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function So(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Ue(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function th(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function $N(e){return So({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function FN(e){for(var t=e.waypoints,n=t.reduce(function(u,f,d){var g=t[d-1];if(g){var y=u[u.length-1],v=y&&y.endLength||0,x=VN(g,f);u.push({start:g,end:f,startLength:v,endLength:v+x,length:x})}return u},[]),r=n.reduce(function(u,f){return u+f.length},0),i=r/2,o=0,a=n[o];a.endLength<i;)a=n[++o];var s=(i-a.startLength)/a.length,l={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return l}function Je(e){return jt(e)?FN(e):$N(e)}function rr(e,t,n){n=n||0,jn(n)||(n={x:n,y:n});var r=Ue(e),i=Ue(t),o=r.bottom+n.y<=i.top,a=r.left-n.x>=i.right,s=r.top-n.y>=i.bottom,l=r.right+n.x<=i.left,u=o?"top":s?"bottom":null,f=l?"left":a?"right":null;return f&&u?u+"-"+f:f||u||"intersect"}function yy(e,t,n){var r=zN(e,t);return r.length===1||r.length===2&&Pu(r[0],r[1])<1?So(r[0]):r.length>1?(r=no(r,function(i){var o=Math.floor(i.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,i.segment2+"#"+o}),So(r[n?0:r.length-1])):null}function zN(e,t){return jC(e,t)}function HN(e){e=e.slice();for(var t=0,n,r,i;e[t];)n=e[t],r=e[t-1],i=e[t+1],Pu(n,i)===0||qv(r,i,n)?e.splice(t,1):t++;return e}function VN(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Af(e,t){return Math.round(e*t)/t}function _w(e){return Ze(e)?e+"px":e}function WN(e){for(;e.parent;)e=e.parent;return e}function UN(e){e=q({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Zn(n,{position:"relative",overflow:"hidden",width:_w(e.width),height:_w(e.height)}),t.appendChild(n),n}function zC(e,t,n){const r=ze("g");Ct(r).add(t);const i=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(r,e.childNodes[i]||null),r}const GN="base",HC=0,KN=1,YN={shape:["x","y","width","height"],connection:["waypoints"]};function ct(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}ct.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];ct.prototype._init=function(e){const t=this._eventBus,n=this._container=UN(e),r=this._svg=ze("svg");Pe(r,{width:"100%",height:"100%"}),tt(n,r);const i=this._viewport=zC(r,"viewport");e.deferUpdate&&(this._viewboxChanged=bC(wr(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:r,viewport:i})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};ct.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};ct.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=LC(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};ct.prototype.getDefaultLayer=function(){return this.getLayer(GN,HC)};ct.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};ct.prototype._getChildIndex=function(e){return $r(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};ct.prototype._createLayer=function(e,t){typeof t>"u"&&(t=KN);const n=this._getChildIndex(t);return{group:zC(this._viewport,"layer-"+e,n),index:t,visible:!0}};ct.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,r=t.group,i=t.index;if(t.visible)return r;const o=this._getChildIndex(i);return n.insertBefore(r,n.childNodes[o]||null),t.visible=!0,r};ct.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Cn(n),t.visible=!1),n};ct.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Cn(t.group))};ct.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};ct.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(WN(e))||{}).rootElement:void 0};ct.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};ct.prototype._findPlaneForRoot=function(e){return At(this._planes,function(t){return t.rootElement===e})};ct.prototype.getContainer=function(){return this._container};ct.prototype._updateMarker=function(e,t,n){let r;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,r=this._elementRegistry._elements[e.id],r&&(U([r.gfx,r.secondaryGfx],function(i){i&&(n?(e.markers.add(t),Ct(i).add(t)):(e.markers.delete(t),Ct(i).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))};ct.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};ct.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};ct.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};ct.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};ct.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};ct.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const r=this.getLayer(n,HC);return this.hideLayer(n),this._addRoot(e,r),this._planes.push({rootElement:e,layer:r}),e};ct.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};ct.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};ct.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};ct.prototype._addRoot=function(e,t){const n=this._elementRegistry,r=this._eventBus;r.fire("root.add",{element:e}),n.add(e,t),r.fire("root.added",{element:e,gfx:t})};ct.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};ct.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=YN[e];if(!Rs(n,function(i){return typeof t[i]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};ct.prototype._setParent=function(e,t,n){kn(t.children,e,n),e.parent=t};ct.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();const i=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r);const a=o.create(e,t,r);return this._elementRegistry.add(t,a),o.update(e,t,a),i.fire(e+".added",{element:t,gfx:a}),t};ct.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};ct.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};ct.prototype._removeElement=function(e,t){const n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(e=n.get(e.id||e),!!e)return i.fire(t+".remove",{element:e}),r.remove(e),yn(e.parent&&e.parent.children,e),e.parent=null,i.fire(t+".removed",{element:e}),n.remove(e),e};ct.prototype.removeShape=function(e){return this._removeElement(e,"shape")};ct.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};ct.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};ct.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};ct.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};ct.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let r,i,o,a,s,l,u;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const f=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);fu(t,f)});else return o=this._rootElement?this.getActiveLayer():null,r=o&&o.getBBox()||{},a=fu(t),i=a?a.matrix:rN(),s=Af(i.a,1e3),l=Af(-i.e||0,1e3),u=Af(-i.f||0,1e3),e=this._cachedViewbox={x:l?l/s:0,y:u?u/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:r.width||0,height:r.height||0,x:r.x||0,y:r.y||0},outer:n},e;return e};ct.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=q({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),VC(t,n)}),{x:n.e,y:n.f}};ct.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const r=this.findRoot(e);if(r!==this.getRootElement()&&this.setRootElement(r),r===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const i=Nn(e),o=Ue(i),a=this.viewbox(),s=this.zoom();let l,u;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const f=Ue(a);if(!(i.width<a.width&&i.height<a.height))l=i.x-a.x,u=i.y-a.y;else{const g=Math.max(0,o.right-f.right),y=Math.min(0,o.left-f.left),v=Math.max(0,o.bottom-f.bottom),x=Math.min(0,o.top-f.top);l=g||y,u=v||x}this.scroll({dx:-l*s,dy:-u*s})};ct.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,r;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),Af(r.a,1e3)};function VC(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}ct.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,r=t.inner;let i,o;return r.x>=0&&r.y>=0&&r.x+r.width<=n.width&&r.y+r.height<=n.height&&!e?o={x:0,y:0,width:Math.max(r.width+r.x,n.width),height:Math.max(r.height+r.y,n.height)}:(i=Math.min(1,n.width/r.width,n.height/r.height),o={x:r.x+(e?r.width/2-n.width/i/2:0),y:r.y+(e?r.height/2-n.height/i/2:0),width:n.width/i,height:n.height/i}),this.viewbox(o),this.viewbox(!1).scale};ct.prototype._setZoom=function(e,t){const n=this._svg,r=this._viewport,i=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,l,u,f;l=r.getCTM();const d=l.a;return t?(a=q(o,t),s=a.matrixTransform(l.inverse()),u=i.translate(s.x,s.y).scale(1/d*e).translate(-s.x,-s.y),f=l.multiply(u)):f=i.scale(e),VC(this._viewport,f),f};ct.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};ct.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,a=n.height*t.scale;return{x:r,y:i,width:o,height:a}};ct.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var kl="data-element-id";function ri(e){this._elements={},this._eventBus=e}ri.$inject=["eventBus"];ri.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),Pe(t,kl,r),n&&Pe(n,kl,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}};ri.prototype.remove=function(e){var t=this._elements,n=e.id||e,r=n&&t[n];r&&(Pe(r.gfx,kl,""),r.secondaryGfx&&Pe(r.secondaryGfx,kl,""),delete t[n])};ri.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)};ri.prototype.updateGraphics=function(e,t,n){var r=e.id||e,i=this._elements[r];return n?i.secondaryGfx=t:i.gfx=t,t&&Pe(t,kl,r),t};ri.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&Pe(e,kl);var n=this._elements[t];return n&&n.element};ri.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t};ri.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i],a=o.element,s=o.gfx;if(e(a,s))return a}};ri.prototype.getAll=function(){return this.filter(function(e){return e})};ri.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var r=t[n],i=r.element,o=r.gfx;return e(i,o)})};ri.prototype.getGraphics=function(e,t){var n=e.id||e,r=this._elements[n];return r&&(t?r.secondaryGfx:r.gfx)};ri.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function qN(e,t,n,r){var i=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,i,r)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,i,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function XN(e){return e.__refs_collection===!0}function QN(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function WC(e,t,n){var r=qN(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(i){e.set(i,t.inverse,n)})}function ZN(e,t,n){var r=t.inverse,i=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return i},set:function(o){if(o!==i){var a=i;i=null,a&&e.unset(a,r,n),i=o,e.set(i,r,n)}}})}function Ei(e,t){if(!(this instanceof Ei))return new Ei(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Ei.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?WC(this,t,e):ZN(this,t,e)};Ei.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return XN(n)||WC(this,t,e),n};Ei.prototype.ensureBound=function(e,t){QN(e,t)||this.bind(e,t)};Ei.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Ei.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Qv=new Ei({name:"children",enumerable:!0,collection:!0},{name:"parent"}),UC=new Ei({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),ww=new Ei({name:"attachers",collection:!0},{name:"host"}),GC=new Ei({name:"outgoing",collection:!0},{name:"source"}),KC=new Ei({name:"incoming",collection:!0},{name:"target"});function zl(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Qv.bind(this,"parent"),UC.bind(this,"labels"),GC.bind(this,"outgoing"),KC.bind(this,"incoming")}function Tu(){zl.call(this),Qv.bind(this,"children"),ww.bind(this,"host"),ww.bind(this,"attachers")}Oe(Tu,zl);function YC(){zl.call(this),Qv.bind(this,"children")}Oe(YC,Tu);function qC(){Tu.call(this),UC.bind(this,"labelTarget")}Oe(qC,Tu);function XC(){zl.call(this),GC.bind(this,"source"),KC.bind(this,"target")}Oe(XC,zl);var JN={connection:XC,shape:Tu,label:qC,root:YC};function eD(e,t){var n=JN[e];if(!n)throw new Error("unknown type: <"+e+">");return q(new n,t)}function tD(e){return e instanceof zl}function Do(){this._uid=12}Do.prototype.createRoot=function(e){return this.create("root",e)};Do.prototype.createLabel=function(e){return this.create("label",e)};Do.prototype.createShape=function(e){return this.create("shape",e)};Do.prototype.createConnection=function(e){return this.create("connection",e)};Do.prototype.create=function(e,t){return t=q({},t||{}),t.id||(t.id=e+"_"+this._uid++),eD(e,t)};var _d="__fn",QC=1e3,nD=Array.prototype.slice;function Fr(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Fr.prototype.on=function(e,t,n,r){if(e=at(e)?e:[e],Rn(t)&&(r=n,n=t,t=QC),!Ze(t))throw new Error("priority must be a number");var i=n;r&&(i=wr(n,r),i[_d]=n[_d]||n);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:i,next:null})})};Fr.prototype.once=function(e,t,n,r){var i=this;if(Rn(t)&&(r=n,n=t,t=QC),!Ze(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(r,arguments);return i.off(e,o),a}o[_d]=n,this.on(e,t,o)};Fr.prototype.off=function(e,t){e=at(e)?e:[e];var n=this;e.forEach(function(r){n._removeListener(r,t)})};Fr.prototype.createEvent=function(e){var t=new Au;return t.init(e),t};Fr.prototype.fire=function(e,t){var n,r,i,o;if(o=nD.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],!!r){t instanceof Au?n=t:n=this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{i=this._invokeListeners(n,o,r)}finally{e!==a&&(n.type=a)}return i===void 0&&n.defaultPrevented&&(i=!1),i}};Fr.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};Fr.prototype._destroy=function(){this._listeners={}};Fr.prototype._invokeListeners=function(e,t,n){for(var r;n&&!e.cancelBubble;)r=this._invokeListener(e,t,n),n=n.next;return r};Fr.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=rD(n.callback,t),r!==void 0&&(e.returnValue=r,e.stopPropagation()),r===!1&&e.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};Fr.prototype._addListener=function(e,t){var n=this._getListeners(e),r;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,r?r.next=t:this._setListeners(e,t);return}r=n,n=n.next}r.next=t};Fr.prototype._getListeners=function(e){return this._listeners[e]};Fr.prototype._setListeners=function(e,t){this._listeners[e]=t};Fr.prototype._removeListener=function(e,t){var n=this._getListeners(e),r,i,o;if(!t){this._setListeners(e,null);return}for(;n;)r=n.next,o=n.callback,(o===t||o[_d]===t)&&(i?i.next=r:this._setListeners(e,r)),i=n,n=r};function Au(){}Au.prototype.stopPropagation=function(){this.cancelBubble=!0};Au.prototype.preventDefault=function(){this.defaultPrevented=!0};Au.prototype.init=function(e){q(this,e||{})};function rD(e,t){return e.apply(null,t)}function hs(e){return e.childNodes[0]}function iD(e){return e.parentNode.childNodes[1]}function Mf(e,t,n,r,i){var o=Hc();o.setTranslate(t,n);var a=Hc();a.setRotate(r||0,0,0);var s=Hc();s.setScale(1,1),fu(e,[o,a,s])}function Vn(e,t,n){var r=Hc();r.setTranslate(t,n),fu(e,r)}function ZC(e,t){var n=Hc();n.setRotate(t,0,0),fu(e,n)}function ii(e,t){this._eventBus=e,this._elementRegistry=t}ii.$inject=["eventBus","elementRegistry"];ii.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=iD(t),n||(n=ze("g"),Ct(n).add("djs-children"),tt(t.parentNode,n))):n=t,n};ii.prototype._clear=function(e){var t=hs(e);return Xd(t),t};ii.prototype._createContainer=function(e,t,n,r){var i=ze("g");Ct(i).add("djs-group"),typeof n<"u"?JC(i,t,t.childNodes[n]):tt(t,i);var o=ze("g");Ct(o).add("djs-element"),Ct(o).add("djs-"+e),r&&Ct(o).add("djs-frame"),tt(i,o);var a=ze("g");return Ct(a).add("djs-visual"),tt(o,a),o};ii.prototype.create=function(e,t,n){var r=this._getChildrenContainer(t.parent);return this._createContainer(e,r,n,BC(t))};ii.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,r;r=$r(e,function(i,o){return o.parent&&(i[o.parent.id]=o.parent),i},{}),U(r,function(i){var o=i.children;if(o){var a=t._getChildrenContainer(i);U(o.slice().reverse(),function(s){var l=n.getGraphics(s);JC(l.parentNode,a)})}})};ii.prototype.drawShape=function(e,t,n={}){var r=this._eventBus;return r.fire("render.shape",{gfx:e,element:t,attrs:n})};ii.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};ii.prototype.drawConnection=function(e,t,n={}){var r=this._eventBus;return r.fire("render.connection",{gfx:e,element:t,attrs:n})};ii.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};ii.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if(e==="shape")this.drawShape(r,t),Vn(n,t.x,t.y);else if(e==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+e);t.hidden?Pe(n,"display","none"):Pe(n,"display","block")}};ii.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Cn(t.parentNode)};function JC(e,t,n){var r=n||t.firstChild;e!==r&&t.insertBefore(e,r)}const oD={__depends__:[CN],__init__:["canvas"],canvas:["type",ct],elementRegistry:["type",ri],elementFactory:["type",Do],eventBus:["type",Fr],graphicsFactory:["type",ii]};function aD(e){var t=new NC(e);return t.init(),t}function sD(e){e=e||{};var t={config:["value",e]},n=[t,oD].concat(e.modules||[]);return aD(n)}function Pa(e,t){this._injector=t||sD(e),this.get("eventBus").fire("diagram.init")}Pa.prototype.get=function(e,t){return this._injector.get(e,t)};Pa.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Pa.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Pa.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Zv(){}Zv.prototype.get=function(e){return this.$model.properties.get(this,e)};Zv.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function eR(e,t){this.model=e,this.properties=t}eR.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(Zv.prototype);U(e.properties,function(a){!a.isMany&&a.default!==void 0&&(r[a.name]=a.default)}),n.defineModel(r,t),n.defineDescriptor(r,e);var i=e.ns.name;function o(a){n.define(this,"$type",{value:i,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),U(a,wr(function(s,l){this.set(l,s)},this))}return o.prototype=r,o.hasType=r.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var lD={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},tR={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Jv(e,t){var n=tR[e];return n?n(t):t}function vy(e){return!!lD[e]}function nR(e){return!!tR[e]}function pr(e,t){var n=e.split(/:/),r,i;if(n.length===1)r=e,i=t;else if(n.length===2)r=n[1],i=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(i?i+":":"")+r,{name:e,prefix:i,localName:r}}function oi(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}oi.prototype.build=function(){return Fi(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};oi.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var r=this.properties;t!==void 0?r.splice(t,0,e):r.push(e)};oi.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=i.indexOf(e);if(s===-1)throw new Error("property <"+r.name+"> not found in property list");i.splice(s,1),this.addProperty(t,n?void 0:s,a),o[r.name]=o[r.localName]=t};oi.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,i=t.split("#"),o=pr(i[0],r),a=pr(i[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines};oi.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e};oi.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};oi.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};oi.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};oi.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};oi.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};oi.prototype.hasProperty=function(e){return this.propertiesByName[e]};oi.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,r=this.allTypes,i=e.name;i in n||(U(e.properties,wr(function(o){o=q({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),r.push(e),n[i]=e)};function Ta(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,U(e,wr(this.registerPackage,this))}Ta.prototype.getPackage=function(e){return this.packageMap[e]};Ta.prototype.getPackages=function(){return this.packages};Ta.prototype.registerPackage=function(e){e=q({},e);var t=this.packageMap;Ew(t,e,"prefix"),Ew(t,e,"uri"),U(e.types,wr(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Ta.prototype.registerType=function(e,t){e=q({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:q(e.meta||{})});var n=pr(e.name,t.prefix),r=n.name,i={};U(e.properties,wr(function(o){var a=pr(o.name,n.prefix),s=a.name;vy(o.type)||(o.type=pr(o.type,a.prefix).name),q(o,{ns:a,name:s}),i[s]=o},this)),q(e,{ns:n,name:r,propertiesByName:i}),U(e.extends,wr(function(o){var a=pr(o,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(r)},this)),this.definePackage(e,t),this.typeMap[r]=e};Ta.prototype.mapTypes=function(e,t,n){var r=vy(e.name)?{name:e.name}:this.typeMap[e.name],i=this;function o(l,u){var f=pr(l,vy(l)?"":e.prefix);i.mapTypes(f,t,u)}function a(l){return o(l,!0)}function s(l){return o(l,!1)}if(!r)throw new Error("unknown type <"+e.name+">");U(r.superClass,n?a:s),t(r,!n),U(r.traits,a)};Ta.prototype.getEffectiveDescriptor=function(e){var t=pr(e),n=new oi(t);this.mapTypes(t,function(i,o){n.addTrait(i,o)});var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r};Ta.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function Ew(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function Ts(e){this.model=e}Ts.prototype.set=function(e,t,n){if(!jr(t)||!t.length)throw new TypeError("property name must be a non-empty string");var r=this.getProperty(e,t),i=r&&r.name;cD(n)?r?delete e[i]:delete e.$attrs[xy(t)]:r?i in e?e[i]=n:rR(e,r,n):e.$attrs[xy(t)]=n};Ts.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[xy(t)];var r=n.name;return!e[r]&&n.isMany&&rR(e,n,[]),e[r]};Ts.prototype.define=function(e,t,n){if(!n.writable){var r=n.value;n=q({},n,{get:function(){return r}}),delete n.value}Object.defineProperty(e,t,n)};Ts.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Ts.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Ts.prototype.getProperty=function(e,t){var n=this.model,r=n.getPropertyDescriptor(e,t);if(r)return r;if(t.includes(":"))return null;const i=n.config.strict;if(typeof i<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(i)throw o;typeof console<"u"&&console.warn(o)}return null};function cD(e){return typeof e>"u"}function rR(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function xy(e){return e.replace(/^:/,"")}function bi(e,t={}){this.properties=new Ts(this),this.factory=new eR(this,this.properties),this.registry=new Ta(e,this.properties),this.typeCache={},this.config=t}bi.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};bi.prototype.getType=function(e){var t=this.typeCache,n=jr(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r};bi.prototype.createAny=function(e,t,n){var r=pr(e),i={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){OM(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(i,o),this.properties.defineModel(i,this),this.properties.define(i,"get",{enumerable:!1,writable:!0}),this.properties.define(i,"set",{enumerable:!1,writable:!0}),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),this.properties.define(i,"$instanceOf",{enumerable:!1,writable:!0}),U(n,function(a,s){jn(a)&&a.value!==void 0?i[a.name]=a.value:i[s]=a}),i};bi.prototype.getPackage=function(e){return this.registry.getPackage(e)};bi.prototype.getPackages=function(){return this.registry.getPackages()};bi.prototype.getElementDescriptor=function(e){return e.$descriptor};bi.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};bi.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};bi.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var bw=String.fromCharCode,uD=Object.prototype.hasOwnProperty,pD=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Wc={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Wc).forEach(function(e){Wc[e.toUpperCase()]=Wc[e]});function fD(e,t,n,r){return r?uD.call(Wc,r)?Wc[r]:"&"+r+";":bw(t||parseInt(n,16))}function Ja(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(pD,fD):e}var dD="http://www.w3.org/2001/XMLSchema-instance",hD="xsi",Sw="xsi:type",Cw="non-whitespace outside of root node";function Ks(e){return new Error(e)}function Rw(e){return"missing namespace for prefix <"+e+">"}function Gp(e){return{get:e,enumerable:!0}}function mD(e){var t={},n;for(n in e)t[n]=e[n];return t}function _y(e){return e+"$uri"}function gD(e){var t={},n,r;for(n in e)r=e[n],t[r]=r,t[_y(r)]=n;return t}function kw(){return{line:0,column:0}}function yD(e){throw e}function iR(e){if(!this)return new iR(e);var t=e&&e.proxy,n,r,i,o,a=yD,s,l,u,f,d=kw,g=!1,y=!1,v=null,x=!1,C;function P(b){b instanceof Error||(b=Ks(b)),v=b,a(b,d)}function k(b){s&&(b instanceof Error||(b=Ks(b)),s(b,d))}this.on=function(b,D){if(typeof D!="function")throw Ks("required args <name, cb>");switch(b){case"openTag":r=D;break;case"text":n=D;break;case"closeTag":i=D;break;case"error":a=D;break;case"warn":s=D;break;case"cdata":o=D;break;case"attention":f=D;break;case"question":u=D;break;case"comment":l=D;break;default:throw Ks("unsupported event: "+b)}return this},this.ns=function(b){if(typeof b>"u"&&(b={}),typeof b!="object")throw Ks("required args <nsMap={}>");var D={},I;for(I in b)D[I]=b[I];return D[dD]=hD,y=!0,C=D,this},this.parse=function(b){if(typeof b!="string")throw Ks("required args <xml=string>");return v=null,w(b),d=kw,x=!1,v},this.stop=function(){x=!0};function w(b){var D=y?[]:null,I=y?gD(C):null,H,L=[],X=0,Y=!1,K=!1,se=0,ae=0,Re,wt,Ge,Ke,ye,je,Ne,qe,re,oe="",_e=0,ut;function B(){if(ut!==null)return ut;var R,$,V,J=y&&I.xmlns,pe=y&&g?[]:null,le=_e,de=oe,vt=de.length,Ot,Dt,Et,rt,Qe,Z={},we={},$e,Ee,ge;e:for(;le<vt;le++)if($e=!1,Ee=de.charCodeAt(le),!(Ee===32||Ee<14&&Ee>8)){for((Ee<65||Ee>122||Ee>90&&Ee<97)&&Ee!==95&&Ee!==58&&(k("illegal first char attribute name"),$e=!0),ge=le+1;ge<vt;ge++)if(Ee=de.charCodeAt(ge),!(Ee>96&&Ee<123||Ee>64&&Ee<91||Ee>47&&Ee<59||Ee===46||Ee===45||Ee===95)){if(Ee===32||Ee<14&&Ee>8){k("missing attribute value"),le=ge;continue e}if(Ee===61)break;k("illegal attribute name char"),$e=!0}if(Qe=de.substring(le,ge),Qe==="xmlns:xmlns"&&(k("illegal declaration of xmlns"),$e=!0),Ee=de.charCodeAt(ge+1),Ee===34)ge=de.indexOf('"',le=ge+2),ge===-1&&(ge=de.indexOf("'",le),ge!==-1&&(k("attribute value quote missmatch"),$e=!0));else if(Ee===39)ge=de.indexOf("'",le=ge+2),ge===-1&&(ge=de.indexOf('"',le),ge!==-1&&(k("attribute value quote missmatch"),$e=!0));else for(k("missing attribute value quotes"),$e=!0,ge=ge+1;ge<vt&&(Ee=de.charCodeAt(ge+1),!(Ee===32||Ee<14&&Ee>8));ge++);for(ge===-1&&(k("missing closing quotes"),ge=vt,$e=!0),$e||(Et=de.substring(le,ge)),le=ge;ge+1<vt&&(Ee=de.charCodeAt(ge+1),!(Ee===32||Ee<14&&Ee>8));ge++)le===ge&&(k("illegal character after attribute end"),$e=!0);if(le=ge+1,$e)continue e;if(Qe in we){k("attribute <"+Qe+"> already defined");continue}if(we[Qe]=!0,!y){Z[Qe]=Et;continue}if(g){if(Dt=Qe==="xmlns"?"xmlns":Qe.charCodeAt(0)===120&&Qe.substr(0,6)==="xmlns:"?Qe.substr(6):null,Dt!==null){if(R=Ja(Et),$=_y(Dt),rt=C[R],!rt){if(Dt==="xmlns"||$ in I&&I[$]!==R)do rt="ns"+X++;while(typeof I[rt]<"u");else rt=Dt;C[R]=rt}I[Dt]!==rt&&(Ot||(I=mD(I),Ot=!0),I[Dt]=rt,Dt==="xmlns"&&(I[_y(rt)]=R,J=rt),I[$]=R),Z[Qe]=Et;continue}pe.push(Qe,Et);continue}if(Ee=Qe.indexOf(":"),Ee===-1){Z[Qe]=Et;continue}if(!(V=I[Qe.substring(0,Ee)])){k(Rw(Qe.substring(0,Ee)));continue}Qe=J===V?Qe.substr(Ee+1):V+Qe.substr(Ee),Qe===Sw&&(Ee=Et.indexOf(":"),Ee!==-1?(V=Et.substring(0,Ee),V=I[V]||V,Et=V+Et.substring(Ee)):Et=J+":"+Et),Z[Qe]=Et}if(g)for(le=0,vt=pe.length;le<vt;le++){if(Qe=pe[le++],Et=pe[le],Ee=Qe.indexOf(":"),Ee!==-1){if(!(V=I[Qe.substring(0,Ee)])){k(Rw(Qe.substring(0,Ee)));continue}Qe=J===V?Qe.substr(Ee+1):V+Qe.substr(Ee),Qe===Sw&&(Ee=Et.indexOf(":"),Ee!==-1?(V=Et.substring(0,Ee),V=I[V]||V,Et=V+Et.substring(Ee)):Et=J+":"+Et)}Z[Qe]=Et}return ut=Z}function E(){for(var R=/(\r\n|\r|\n)/g,$=0,V=0,J=0,pe=ae,le,de;se>=J&&(le=R.exec(b),!(!le||(pe=le[0].length+le.index,pe>se)));)$+=1,J=pe;return se==-1?(V=pe,de=b.substring(ae)):ae===0?de=b.substring(ae,se):(V=se-J,de=ae==-1?b.substring(se):b.substring(se,ae+1)),{data:de,line:$,column:V}}for(d=E,t&&(re=Object.create({},{name:Gp(function(){return Ne}),originalName:Gp(function(){return qe}),attrs:Gp(B),ns:Gp(function(){return I})}));ae!==-1;){if(b.charCodeAt(ae)===60?se=ae:se=b.indexOf("<",ae),se===-1){if(L.length)return P("unexpected end of file");if(ae===0)return P("missing start tag");ae<b.length&&b.substring(ae).trim()&&k(Cw);return}if(ae!==se){if(L.length){if(n&&(n(b.substring(ae,se),Ja,d),x))return}else if(b.substring(ae,se).trim()&&(k(Cw),x))return}if(Ke=b.charCodeAt(se+1),Ke===33){if(Ge=b.charCodeAt(se+2),Ge===91&&b.substr(se+3,6)==="CDATA["){if(ae=b.indexOf("]]>",se),ae===-1)return P("unclosed cdata");if(o&&(o(b.substring(se+9,ae),d),x))return;ae+=3;continue}if(Ge===45&&b.charCodeAt(se+3)===45){if(ae=b.indexOf("-->",se),ae===-1)return P("unclosed comment");if(l&&(l(b.substring(se+4,ae),Ja,d),x))return;ae+=3;continue}}if(Ke===63){if(ae=b.indexOf("?>",se),ae===-1)return P("unclosed question");if(u&&(u(b.substring(se,ae+2),d),x))return;ae+=2;continue}for(Re=se+1;;Re++){if(ye=b.charCodeAt(Re),isNaN(ye))return ae=-1,P("unclosed tag");if(ye===34)Ge=b.indexOf('"',Re+1),Re=Ge!==-1?Ge:Re;else if(ye===39)Ge=b.indexOf("'",Re+1),Re=Ge!==-1?Ge:Re;else if(ye===62){ae=Re;break}}if(Ke===33){if(f&&(f(b.substring(se,ae+1),Ja,d),x))return;ae+=1;continue}if(ut={},Ke===47){if(Y=!1,K=!0,!L.length)return P("missing open tag");if(Re=Ne=L.pop(),Ge=se+2+Re.length,b.substring(se+2,Ge)!==Re)return P("closing tag mismatch");for(;Ge<ae;Ge++)if(Ke=b.charCodeAt(Ge),!(Ke===32||Ke>8&&Ke<14))return P("close tag")}else{if(b.charCodeAt(ae-1)===47?(Re=Ne=b.substring(se+1,ae-1),Y=!0,K=!0):(Re=Ne=b.substring(se+1,ae),Y=!0,K=!1),!(Ke>96&&Ke<123||Ke>64&&Ke<91||Ke===95||Ke===58))return P("illegal first char nodeName");for(Ge=1,wt=Re.length;Ge<wt;Ge++)if(Ke=Re.charCodeAt(Ge),!(Ke>96&&Ke<123||Ke>64&&Ke<91||Ke>47&&Ke<59||Ke===45||Ke===95||Ke==46)){if(Ke===32||Ke<14&&Ke>8){Ne=Re.substring(0,Ge),ut=null;break}return P("invalid nodeName")}K||L.push(Ne)}if(y){if(H=I,Y&&(K||D.push(H),ut===null&&(g=Re.indexOf("xmlns",Ge)!==-1)&&(_e=Ge,oe=Re,B(),g=!1)),qe=Ne,Ke=Ne.indexOf(":"),Ke!==-1){if(je=I[Ne.substring(0,Ke)],!je)return P("missing namespace on <"+qe+">");Ne=Ne.substr(Ke+1)}else je=I.xmlns;je&&(Ne=je+":"+Ne)}if(Y&&(_e=Ge,oe=Re,r&&(t?r(re,Ja,K,d):r(Ne,B,Ja,K,d),x)))return;if(K){if(i&&(i(t?re:Ne,Ja,Y,d),x))return;y&&(Y?I=H:I=D.pop())}ae+=1}}}function oR(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var vD={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},nh="xsi:type";function aR(e){return e.xml&&e.xml.serialize}function sR(e){return aR(e)===nh}function xD(e){return aR(e)==="property"}function _D(e){return e.charAt(0).toUpperCase()+e.slice(1)}function lR(e,t){return oR(t)?e.prefix+":"+_D(e.localName):e.name}function wD(e,t){var n=e.name,r=e.localName,i=t.xml&&t.xml.typePrefix;return i&&r.indexOf(i)===0?e.prefix+":"+r.slice(i.length):n}function ED(e,t){var n=pr(e),r=t.getPackage(n.prefix);return wD(n,r)}function wa(e){return new Error(e)}function Co(e){return e.$descriptor}function bD(e){q(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw wa("expected element");var n=this.elementsById,r=Co(t),i=r.idProperty,o;if(i&&(o=t.get(i.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw wa("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Mu(){}Mu.prototype.handleEnd=function(){};Mu.prototype.handleText=function(){};Mu.prototype.handleNode=function(){};function e0(){}e0.prototype=Object.create(Mu.prototype);e0.prototype.handleNode=function(){return this};function Hl(){}Hl.prototype=Object.create(Mu.prototype);Hl.prototype.handleText=function(e){this.body=(this.body||"")+e};function Nu(e,t){this.property=e,this.context=t}Nu.prototype=Object.create(Hl.prototype);Nu.prototype.handleNode=function(e){if(this.element)throw wa("expected no sub nodes");return this.element=this.createReference(e),this};Nu.prototype.handleEnd=function(){this.element.id=this.body};Nu.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function t0(e,t){this.element=t,this.propertyDesc=e}t0.prototype=Object.create(Hl.prototype);t0.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Jv(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function rh(){}rh.prototype=Object.create(Hl.prototype);rh.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function dr(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}dr.prototype=Object.create(rh.prototype);dr.prototype.addReference=function(e){this.context.addReference(e)};dr.prototype.handleText=function(e){var t=this.element,n=Co(t),r=n.bodyProperty;if(!r)throw wa("unexpected body text <"+e+">");Hl.prototype.handleText.call(this,e)};dr.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Co(t),r=n.bodyProperty;r&&e!==void 0&&(e=Jv(r.type,e),t.set(r.name,e))};dr.prototype.createElement=function(e){var t=e.attributes,n=this.type,r=Co(n),i=this.context,o=new n({}),a=this.model,s;return U(t,function(l,u){var f=r.propertiesByName[u],d;f&&f.isReference?f.isMany?(d=l.split(" "),U(d,function(g){i.addReference({element:o,property:f.ns.name,id:g})})):i.addReference({element:o,property:f.ns.name,id:l}):(f?l=Jv(f.type,l):u!=="xmlns"&&(s=pr(u,r.ns.prefix),a.getPackage(s.prefix)&&i.addWarning({message:"unknown attribute <"+u+">",element:o,property:u,value:l})),o.set(u,l))}),o};dr.prototype.getPropertyForNode=function(e){var t=e.name,n=pr(t),r=this.type,i=this.model,o=Co(r),a=n.name,s=o.propertiesByName[a],l,u;if(s&&!s.isAttr)return sR(s)&&(l=e.attributes[nh],l)?(l=ED(l,i),u=i.getType(l),q({},s,{effectiveType:Co(u).name})):s;var f=i.getPackage(n.prefix);if(f){if(l=lR(n,f),u=i.getType(l),s=At(o.properties,function(d){return!d.isVirtual&&!d.isReference&&!d.isAttribute&&u.hasType(d.type)}),s)return q({},s,{effectiveType:Co(u).name})}else if(s=At(o.properties,function(d){return!d.isReference&&!d.isAttribute&&d.type==="Element"}),s)return s;throw wa("unrecognized element <"+n.name+">")};dr.prototype.toString=function(){return"ElementDescriptor["+Co(this.type).name+"]"};dr.prototype.valueHandler=function(e,t){return new t0(e,t)};dr.prototype.referenceHandler=function(e){return new Nu(e,this.context)};dr.prototype.handler=function(e){return e==="Element"?new Pl(this.model,e,this.context):new dr(this.model,e,this.context)};dr.prototype.handleChild=function(e){var t,n,r,i;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,nR(n))return this.valueHandler(t,r);t.isReference?i=this.referenceHandler(t).handleNode(e):i=this.handler(n).handleNode(e);var o=i.element;return o!==void 0&&(t.isMany?r.get(t.name).push(o):r.set(t.name,o),t.isReference?(q(o,{element:r}),this.context.addReference(o)):o.$parent=r),i};function n0(e,t,n){dr.call(this,e,t,n)}n0.prototype=Object.create(dr.prototype);n0.prototype.createElement=function(e){var t=e.name,n=pr(t),r=this.model,i=this.type,o=r.getPackage(n.prefix),a=o&&lR(n,o)||t;if(!i.hasType(a))throw wa("unexpected element <"+e.originalName+">");return dr.prototype.createElement.call(this,e)};function Pl(e,t,n){this.model=e,this.context=n}Pl.prototype=Object.create(rh.prototype);Pl.prototype.createElement=function(e){var t=e.name,n=pr(t),r=n.prefix,i=e.ns[r+"$uri"],o=e.attributes;return this.model.createAny(t,i,o)};Pl.prototype.handleChild=function(e){var t=new Pl(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element,i;return r!==void 0&&(i=n.$children=n.$children||[],i.push(r),r.$parent=n),t};Pl.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function r0(e){e instanceof bi&&(e={model:e}),q(this,{lax:!1},e)}r0.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof dr?(r=t,t={}):typeof t=="string"?(r=this.handler(t),t={}):typeof r=="string"&&(r=this.handler(r));var i=this.model,o=this.lax,a=new bD(q({},t,{rootHandler:r})),s=new iR({proxy:!0}),l=SD();r.context=a,l.push(r);function u(D,I,H){var L=I(),X=L.line,Y=L.column,K=L.data;K.charAt(0)==="<"&&K.indexOf(" ")!==-1&&(K=K.slice(0,K.indexOf(" "))+">");var se="unparsable content "+(K?K+" ":"")+`detected
	line: `+X+`
	column: `+Y+`
	nested error: `+D.message;if(H)return a.addWarning({message:se,error:D}),!0;throw wa(se)}function f(D,I){return u(D,I,!0)}function d(){var D=a.elementsById,I=a.references,H,L;for(H=0;L=I[H];H++){var X=L.element,Y=D[L.id],K=Co(X).propertiesByName[L.property];if(Y||a.addWarning({message:"unresolved reference <"+L.id+">",element:L.element,property:L.property,value:L.id}),K.isMany){var se=X.get(K.name),ae=se.indexOf(L);ae===-1&&(ae=se.length),Y?se[ae]=Y:se.splice(ae,1)}else X.set(K.name,Y)}}function g(){l.pop().handleEnd()}var y=/^<\?xml /i,v=/ encoding="([^"]+)"/i,x=/^utf-8$/i;function C(D){if(y.test(D)){var I=v.exec(D),H=I&&I[1];!H||x.test(H)||a.addWarning({message:"unsupported document encoding <"+H+">, falling back to UTF-8"})}}function P(D,I){var H=l.peek();try{l.push(H.handleNode(D))}catch(L){u(L,I,o)&&l.push(new e0)}}function k(D,I){try{l.peek().handleText(D)}catch(H){f(H,I)}}function w(D,I){D.trim()&&k(D,I)}var b=i.getPackages().reduce(function(D,I){return D[I.uri]=I.prefix,D},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(b).on("openTag",function(D,I,H,L){var X=D.attrs||{},Y=Object.keys(X).reduce(function(se,ae){var Re=I(X[ae]);return se[ae]=Re,se},{}),K={name:D.name,originalName:D.originalName,attributes:Y,ns:D.ns};P(K,L)}).on("question",C).on("closeTag",g).on("cdata",k).on("text",function(D,I,H){w(I(D),H)}).on("error",u).on("warn",f),new Promise(function(D,I){var H;try{s.parse(e),d()}catch(se){H=se}var L=r.element;!H&&!L&&(H=wa("failed to parse document as <"+r.type.$descriptor.name+">"));var X=a.warnings,Y=a.references,K=a.elementsById;return H?(H.warnings=X,I(H)):D({rootElement:L,elementsById:K,references:Y,warnings:X})})};r0.prototype.handler=function(e){return new n0(this.model,e)};function SD(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var CD=`<?xml version="1.0" encoding="UTF-8"?>
`,RD=/<|>|'|"|&|\n\r|\n/g,cR=/<|>|&/g;function kD(e){var t={},n={},r={},i=[],o=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?i.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,l=this.getNSKey(a);r[l]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(f){var d=l.getNSKey(f);return r[d]}var l=this,u=[].concat(i,o);return u.filter(s)}}function PD(e){return e.charAt(0).toLowerCase()+e.slice(1)}function TD(e,t){return oR(t)?PD(e):e}function uR(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function pR(e){return jr(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function AD(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function MD(e,t){return t.isGeneric?q({localName:t.ns.localName},e):q({localName:TD(t.ns.localName,t.$pkg)},e)}function ND(e,t){return q({localName:t.ns.localName},e)}function DD(e){var t=e.$descriptor;return gt(t.properties,function(n){var r=n.name;if(n.isVirtual||!xr(e,r))return!1;var i=e[r];return i===n.default||i===null?!1:n.isMany?i.length:!0})}var OD={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},LD={"<":"lt",">":"gt","&":"amp"};function fR(e,t,n){return e=jr(e)?e:""+e,e.replace(t,function(r){return"&"+n[r]+";"})}function BD(e){return fR(e,RD,OD)}function ID(e){return fR(e,cR,LD)}function jD(e){return gt(e,function(t){return t.isAttr})}function $D(e){return gt(e,function(t){return!t.isAttr})}function i0(e){this.tagName=e}i0.prototype.build=function(e){return this.element=e,this};i0.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function ws(){}ws.prototype.serializeValue=ws.prototype.serializeTo=function(e){e.append(this.escape?ID(this.value):this.value)};ws.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(cR)!==-1&&(this.escape=!0),this};function o0(e){this.tagName=e}uR(o0,ws);o0.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Zt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Zt.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,r,i,o=t.isGeneric;return o?r=this.parseGeneric(e):r=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(i=DD(e),this.parseAttributes(jD(i)),this.parseContainments($D(i))),this.parseGenericAttributes(e,r),this};Zt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return MD(t,e)};Zt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return ND(t,e)};Zt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Zt.prototype.nsAttributeName=function(e){var t;if(jr(e)?t=pr(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:q({localName:t.localName},n)};Zt.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];return U(e,function(i,o){var a;o==="$body"?n.push(new ws().build({type:"String"},i)):o==="$children"?U(i,function(s){n.push(new Zt(t).build(s))}):o.indexOf("$")!==0&&(a=t.parseNsAttribute(e,o,i),a&&r.push({name:o,value:i}))}),r};Zt.prototype.parseNsAttribute=function(e,t,n){var r=e.$model,i=pr(t),o;if(i.prefix==="xmlns"&&(o={prefix:i.localName,uri:n}),!i.prefix&&i.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}};Zt.prototype.parseNsAttributes=function(e,t){var n=this,r=e.$attrs,i=[];return U(r,function(o,a){var s=n.parseNsAttribute(e,a,o);s&&i.push(s)}),i};Zt.prototype.parseGenericAttributes=function(e,t){var n=this;U(t,function(r){if(r.name!==nh)try{n.addAttribute(n.nsAttributeName(r.name),r.value)}catch(i){console.warn("missing namespace information for ",r.name,"=",r.value,"on",e,i)}})};Zt.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;U(e,function(i){var o=r.get(i.name),a=i.isReference,s=i.isMany;if(s||(o=[o]),i.isBody)n.push(new ws().build(i,o[0]));else if(nR(i.type))U(o,function(f){n.push(new o0(t.addTagName(t.nsPropertyTagName(i))).build(i,f))});else if(a)U(o,function(f){n.push(new i0(t.addTagName(t.nsPropertyTagName(i))).build(f))});else{var l=sR(i),u=xD(i);U(o,function(f){var d;l?d=new ih(t,i):u?d=new Zt(t,i):d=new Zt(t),n.push(d.build(f))})}})};Zt.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,r;return t||(r=n&&n.getNamespaces(),e||!r?this.namespaces=t=new kD(r):t=r),t};Zt.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,o=e.prefix,a=r.byUri(i);return(!a||n)&&r.add(e,t),r.mapPrefix(o,i),e};Zt.prototype.logNamespaceUsed=function(e,t){var n=this.element,r=n.$model,i=this.getNamespaces(t),o=e.prefix,a=e.uri,s,l,u;if(!o&&!a)return{localName:e.localName};if(u=vD[o]||r&&(r.getPackage(o)||{}).uri,a=a||u||i.uriByPrefix(o),!a)throw new Error("no namespace uri given for prefix <"+o+">");if(e=i.byUri(a),!e){for(s=o,l=1;i.uriByPrefix(s);)s=o+"_"+l++;e=this.logNamespace({prefix:s,uri:a},u===a)}return o&&i.mapPrefix(o,a),e};Zt.prototype.parseAttributes=function(e){var t=this,n=this.element;U(e,function(r){var i=n.get(r.name);if(r.isReference)if(!r.isMany)i=i.id;else{var o=[];U(i,function(a){o.push(a.id)}),i=o.join(" ")}t.addAttribute(t.nsAttributeName(r),i)})};Zt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),pR(e)};Zt.prototype.addAttribute=function(e,t){var n=this.attrs;jr(t)&&(t=BD(t));var r=wC(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),i={name:e,value:t};r!==-1?n.splice(r,1,i):n.push(i)};Zt.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=AD(n).concat(t)),U(t,function(r){e.append(" ").append(pR(r.name)).append('="').append(r.value).append('"')})};Zt.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==ws;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),U(this.body,function(r){r.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function ih(e,t){Zt.call(this,e,t)}uR(ih,Zt);ih.prototype.parseNsAttributes=function(e){var t=Zt.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(r.uri),o=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(nh),(r.prefix?r.prefix+":":"")+o+n.ns.localName),t};ih.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function FD(){this.value="",this.write=function(e){this.value+=e}}function zD(e,t){var n=[""];this.append=function(r){return e.write(r),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function HD(e){e=q({format:!1,preamble:!0},e||{});function t(n,r){var i=r||new FD,o=new zD(i,e.format);if(e.preamble&&o.append(CD),new Zt().build(n).serializeTo(o),!r)return i.value}return{toXML:t}}function oh(e,t){bi.call(this,e,t)}oh.prototype=Object.create(bi.prototype);oh.prototype.fromXML=function(e,t,n){jr(t)||(n=t,t="bpmn:Definitions");var r=new r0(q({model:this,lax:!0},n)),i=r.handler(t);return r.fromXML(e,i)};oh.prototype.toXML=function(e,t){var n=new HD(t);return new Promise(function(r,i){try{var o=n.toXML(e);return r({xml:o})}catch(a){return i(a)}})};var VD="BPMN20",WD="http://www.omg.org/spec/BPMN/20100524/MODEL",UD="bpmn",GD=[],KD=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],YD=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],qD={tagAlias:"lowerCase",typePrefix:"t"},XD={name:VD,uri:WD,prefix:UD,associations:GD,types:KD,enumerations:YD,xml:qD},QD="BPMNDI",ZD="http://www.omg.org/spec/BPMN/20100524/DI",JD="bpmndi",e4=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],t4=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],n4=[],r4={name:QD,uri:ZD,prefix:JD,types:e4,enumerations:t4,associations:n4},i4="DC",o4="http://www.omg.org/spec/DD/20100524/DC",a4="dc",s4=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],l4=[],c4={name:i4,uri:o4,prefix:a4,types:s4,associations:l4},u4="DI",p4="http://www.omg.org/spec/DD/20100524/DI",f4="di",d4=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],h4=[],m4={tagAlias:"lowerCase"},g4={name:u4,uri:p4,prefix:f4,types:d4,associations:h4,xml:m4},y4="bpmn.io colors for BPMN",v4="http://bpmn.io/schema/bpmn/biocolor/1.0",x4="bioc",_4=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],w4=[],E4=[],b4={name:y4,uri:v4,prefix:x4,types:_4,enumerations:w4,associations:E4},S4="BPMN in Color",C4="http://www.omg.org/spec/BPMN/non-normative/color/1.0",R4="color",k4=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],P4=[],T4=[],A4={name:S4,uri:C4,prefix:R4,types:k4,enumerations:P4,associations:T4},M4={bpmn:XD,bpmndi:r4,dc:c4,di:g4,bioc:b4,color:A4};function N4(e,t){var n=q({},M4,e);return new oh(n,t)}function Qn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var D4="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function dR(e){xr(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(D4)}})}function yr(e,t){return e.$instanceOf(t)}function O4(e){return At(e.rootElements,function(t){return yr(t,"bpmn:Process")||yr(t,"bpmn:Collaboration")})}function L4(e){var t={},n=[],r={};function i(re,oe){return function(_e){re(_e,oe)}}function o(re){t[re.id]=re}function a(re){return t[re.id]}function s(re,oe){var _e=re.gfx;if(_e)throw new Error(`already rendered ${Qn(re)}`);return e.element(re,r[re.id],oe)}function l(re,oe){return e.root(re,r[re.id],oe)}function u(re,oe){try{var _e=r[re.id]&&s(re,oe);return o(re),_e}catch(ut){f(ut.message,{element:re,error:ut}),console.error(`failed to import ${Qn(re)}`,ut)}}function f(re,oe){e.error(re,oe)}var d=this.registerDi=function(oe){var _e=oe.bpmnElement;_e?r[_e.id]?f(`multiple DI elements defined for ${Qn(_e)}`,{element:_e}):(r[_e.id]=oe,dR(_e)):f(`no bpmnElement referenced in ${Qn(oe)}`,{element:oe})};function g(re){y(re.plane)}function y(re){d(re),U(re.planeElement,v)}function v(re){d(re)}this.handleDefinitions=function(oe,_e){var ut=oe.diagrams;if(_e&&ut.indexOf(_e)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!_e&&ut&&ut.length&&(_e=ut[0]),!_e)throw new Error("no diagram to display");r={},g(_e);var B=_e.plane;if(!B)throw new Error(`no plane for ${Qn(_e)}`);var E=B.bpmnElement;if(!E)if(E=O4(oe),E)f(`correcting missing bpmnElement on ${Qn(B)} to ${Qn(E)}`),B.bpmnElement=E,d(B);else throw new Error("no process or collaboration to display");var R=l(E,B);if(yr(E,"bpmn:Process")||yr(E,"bpmn:SubProcess"))C(E,R);else if(yr(E,"bpmn:Collaboration"))Ne(E,R),P(oe.rootElements,R);else throw new Error(`unsupported bpmnElement for ${Qn(B)}: ${Qn(E)}`);x(n)};var x=this.handleDeferred=function(){for(var oe;n.length;)oe=n.shift(),oe()};function C(re,oe){Ke(re,oe),X(re.ioSpecification,oe),L(re.artifacts,oe),o(re)}function P(re,oe){var _e=gt(re,function(ut){return!a(ut)&&yr(ut,"bpmn:Process")&&ut.laneSets});_e.forEach(i(C,oe))}function k(re,oe){u(re,oe)}function w(re,oe){U(re,i(k,oe))}function b(re,oe){u(re,oe)}function D(re,oe){u(re,oe)}function I(re,oe){u(re,oe)}function H(re,oe){u(re,oe)}function L(re,oe){U(re,function(_e){yr(_e,"bpmn:Association")?n.push(function(){H(_e,oe)}):H(_e,oe)})}function X(re,oe){re&&(U(re.dataInputs,i(D,oe)),U(re.dataOutputs,i(I,oe)))}var Y=this.handleSubProcess=function(oe,_e){Ke(oe,_e),L(oe.artifacts,_e)};function K(re,oe){var _e=u(re,oe);yr(re,"bpmn:SubProcess")&&Y(re,_e||oe),yr(re,"bpmn:Activity")&&X(re.ioSpecification,oe),n.push(function(){U(re.dataInputAssociations,i(b,oe)),U(re.dataOutputAssociations,i(b,oe))})}function se(re,oe){u(re,oe)}function ae(re,oe){u(re,oe)}function Re(re,oe){n.push(function(){var _e=u(re,oe);re.childLaneSet&&wt(re.childLaneSet,_e||oe),qe(re)})}function wt(re,oe){U(re.lanes,i(Re,oe))}function Ge(re,oe){U(re,i(wt,oe))}function Ke(re,oe){ye(re.flowElements,oe),re.laneSets&&Ge(re.laneSets,oe)}function ye(re,oe){U(re,function(_e){yr(_e,"bpmn:SequenceFlow")?n.push(function(){se(_e,oe)}):yr(_e,"bpmn:BoundaryEvent")?n.unshift(function(){K(_e,oe)}):yr(_e,"bpmn:FlowNode")?K(_e,oe):yr(_e,"bpmn:DataObject")||(yr(_e,"bpmn:DataStoreReference")||yr(_e,"bpmn:DataObjectReference")?ae(_e,oe):f(`unrecognized flowElement ${Qn(_e)} in context ${Qn(oe&&oe.businessObject)}`,{element:_e,context:oe}))})}function je(re,oe){var _e=u(re,oe),ut=re.processRef;ut&&C(ut,_e||oe)}function Ne(re,oe){U(re.participants,i(je,oe)),L(re.artifacts,oe),n.push(function(){w(re.messageFlows,oe)})}function qe(re){U(re.flowNodeRef,function(oe){var _e=oe.get("lanes");_e&&_e.push(re)})}}function A(e,t){var n=fe(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function ht(e,t){return Ca(t,function(n){return A(e,n)})}function fe(e){return e&&e.businessObject||e}function Rt(e){return e&&e.di}function B4(e,t,n){var r,i,o,a,s=[];function l(u,f){var d={root:function(x,C){return r.add(x,C)},element:function(x,C,P){return r.add(x,C,P)},error:function(x,C){s.push({message:x,context:C})}},g=new L4(d);f=f||u.diagrams&&u.diagrams[0];var y=I4(u,f);if(!y)throw new Error("no diagram to display");U(y,function(x){g.handleDefinitions(u,x)});var v=f.plane.bpmnElement.id;o.setRootElement(o.findRoot(v+"_plane")||o.findRoot(v))}return new Promise(function(u,f){try{return r=e.get("bpmnImporter"),i=e.get("eventBus"),o=e.get("canvas"),i.fire("import.render.start",{definitions:t}),l(t,n),i.fire("import.render.complete",{error:a,warnings:s}),u({warnings:s})}catch(d){return d.warnings=s,f(d)}})}function I4(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,r=n;!A(n,"bpmn:Process")&&!A(n,"bpmn:Collaboration")&&(r=j4(n));var i;A(r,"bpmn:Collaboration")?i=r:i=At(e.rootElements,function(u){if(A(u,"bpmn:Collaboration"))return At(u.participants,function(f){return f.processRef===r})});var o=[r];i&&(o=er(i.participants,function(u){return u.processRef}),o.push(i));var a=hR(o),s=[t],l=[n];return U(e.diagrams,function(u){if(u.plane){var f=u.plane.bpmnElement;a.indexOf(f)!==-1&&l.indexOf(f)===-1&&(s.push(u),l.push(f))}}),s}}function hR(e){var t=[];return U(e,function(n){n&&(t.push(n),t=t.concat(hR(n.flowElements)))}),t}function j4(e){for(var t=e;t;){if(A(t,"bpmn:Process"))return t;t=t.$parent}}var $4='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',mR=$4,gR={verticalAlign:"middle"},yR={color:"#404040"},F4={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},z4={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},H4={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},V4='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+mR+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',qi;function W4(){qi=zt(V4),Zn(qi,F4),Zn(Bt("svg",qi),gR),Zn(Bt(".backdrop",qi),z4),Zn(Bt(".notice",qi),H4),Zn(Bt(".link",qi),yR,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function U4(){qi||(W4(),Or.bind(qi,".backdrop","click",function(e){document.body.removeChild(qi)})),document.body.appendChild(qi)}function Jt(e){e=q({},K4,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),q4(this._container),this._init(this._container,this._moddle,e)}Oe(Jt,Pa);Jt.prototype.importXML=async function(t,n){const r=this;function i(a){return r.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(g){throw this._emit("import.parse.complete",{error:g}),g}let s=a.rootElement;const l=a.references,u=a.warnings,f=a.elementsById;o=o.concat(u),s=this._emit("import.parse.complete",i({error:null,definitions:s,elementsById:f,references:l,warnings:o}))||s;const d=await this.importDefinitions(s,n);return o=o.concat(d.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),Nf(s,o),s=G4(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}};Jt.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};Jt.prototype.open=async function(t){const n=this._definitions;let r=t;if(!n){const o=new Error("no XML imported");throw Nf(o,[]),o}if(typeof t=="string"&&(r=Y4(n,t),!r)){const o=new Error("BPMNDiagram <"+t+"> not found");throw Nf(o,[]),o}try{this.clear()}catch(o){throw Nf(o,[]),o}const{warnings:i}=await B4(this,n,r);return{warnings:i}};Jt.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,r,i;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,i=(await this._moddle.toXML(n,t)).xml,i=this._emit("saveXML.serialized",{xml:i})||i}catch(a){r=a}const o=r?{error:r}:{xml:i};if(this._emit("saveXML.done",o),r)throw r;return o};Jt.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const r=this.get("canvas"),i=r.getActiveLayer(),o=Bt(":scope > defs",r._svg),a=lw(i),s=o?"<defs>"+lw(o)+"</defs>":"",l=i.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+s+a+"</svg>"}catch(r){n=r}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};Jt.prototype._setDefinitions=function(e){this._definitions=e};Jt.prototype.getModules=function(){return this._modules};Jt.prototype.clear=function(){this.getDefinitions()&&Pa.prototype.clear.call(this)};Jt.prototype.destroy=function(){Pa.prototype.destroy.call(this),ro(this._container)};Jt.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)};Jt.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Jt.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Bt(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Jt.prototype.getDefinitions=function(){return this._definitions};Jt.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Jt.prototype._init=function(e,t,n){const r=n.modules||this.getModules(n),i=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,r,i),s=q(wi(n,["additionalModules"]),{canvas:q({},n.canvas,{container:e}),modules:a});Pa.call(this,s),n&&n.container&&this.attachTo(n.container)};Jt.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Jt.prototype._createContainer=function(e){const t=zt('<div class="bjs-container"></div>');return Zn(t,{width:Pw(e.width),height:Pw(e.height),position:e.position}),t};Jt.prototype._createModdle=function(e){const t=q({},this._moddleExtensions,e.moddleExtensions);return new N4(t)};Jt.prototype._modules=[];function Nf(e,t){return e.warnings=t,e}function G4(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const K4={width:"100%",height:"100%",position:"relative"};function Pw(e){return e+(Ze(e)?"px":"")}function Y4(e,t){return t&&At(e.diagrams,function(n){return n.id===t})||null}function q4(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+mR+"</a>",r=zt(n);Zn(Bt("svg",r),gR),Zn(r,yR,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(r),ot.bind(r,"click",function(i){U4(),i.preventDefault()})}function Du(e){Jt.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}Oe(Du,Jt);Du.prototype._createModdle=function(e){var t=Jt.prototype._createModdle.call(this,e);return t.ids=new to([32,36,1]),t};Du.prototype._collectIds=function(e,t){var n=e.$model,r=n.ids,i;r.clear();for(i in t)r.claim(i,t[i])};function xt(e,t){return A(e,"bpmn:CallActivity")?!1:A(e,"bpmn:SubProcess")?(t=t||Rt(e),t&&A(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):A(e,"bpmn:Participant")?!!fe(e).processRef:!0}function Dn(e){if(!(!A(e,"bpmn:Participant")&&!A(e,"bpmn:Lane"))){var t=Rt(e).isHorizontal;return t===void 0?!0:t}}function X4(e){return e&&fe(e).isInterrupting!==!1}function tr(e){return e&&!!fe(e).triggeredByEvent}function Vl(e,t){var n=fe(e).eventDefinitions;return Ca(n,function(r){return A(r,t)})}function Q4(e){return Vl(e,"bpmn:ErrorEventDefinition")}function Z4(e){return Vl(e,"bpmn:EscalationEventDefinition")}function J4(e){return Vl(e,"bpmn:CompensateEventDefinition")}var du={width:90,height:20},Tw=15;function Es(e){return A(e,"bpmn:Event")||A(e,"bpmn:Gateway")||A(e,"bpmn:DataStoreReference")||A(e,"bpmn:DataObjectReference")||A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput")||A(e,"bpmn:SequenceFlow")||A(e,"bpmn:MessageFlow")||A(e,"bpmn:Group")}function ah(e){return kt(e.label)}function eO(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)],i=tO(e),o=Math.atan((r.y-n.y)/(r.x-n.x)),a=i.x,s=i.y;return Math.abs(o)<Math.PI/2?s-=Tw:a+=Tw,{x:a,y:s}}function tO(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}function a0(e){return e.waypoints?eO(e.waypoints):A(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+du.height/2}:{x:e.x+e.width/2,y:e.y+e.height+du.height/2}}function nO(e,t){var n,r,i,o=e.label;return o&&o.bounds?(i=o.bounds,r={width:Math.max(du.width,i.width),height:i.height},n={x:i.x+i.width/2,y:i.y+i.height/2}):(n=a0(t),r=du),q({x:n.x-r.width/2,y:n.y-r.height/2},r)}function vR(e){if(A(e,"bpmn:FlowElement")||A(e,"bpmn:Participant")||A(e,"bpmn:Lane")||A(e,"bpmn:SequenceFlow")||A(e,"bpmn:MessageFlow")||A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput"))return"name";if(A(e,"bpmn:TextAnnotation"))return"text";if(A(e,"bpmn:Group"))return"categoryValueRef"}function rO(e){var t=e.categoryValueRef;return t&&t.value||""}function Zr(e){var t=e.businessObject,n=vR(t);if(n)return n==="categoryValueRef"?rO(t):t[n]||""}function iO(e,t){var n=e.businessObject,r=vR(n);return r&&(r==="categoryValueRef"?n.categoryValueRef.value=t:n[r]=t),e}var wy="hsl(225, 10%, 15%)",oO="white";function Ui(e,t){return Ca(e.eventDefinitions,function(n){return n.$type===t})}function aO(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function sO(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function mt(e,t,n){var r=Rt(e);return n||r.get("color:background-color")||r.get("bioc:fill")||t||oO}function Ae(e,t,n){var r=Rt(e);return n||r.get("color:border-color")||r.get("bioc:stroke")||t||wy}function yc(e,t,n,r){var i=Rt(e),o=i.get("label");return r||o&&o.get("color:color")||t||Ae(e,n)}function lO(e){var t=e.x+e.width/2,n=e.y+e.height/2,r=e.width/2,i=[["M",t,n],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]];return ks(i)}function cO(e,t){var n=e.x,r=e.y,i=e.width,o=e.height,a=[["M",n+t,r],["l",i-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-i,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return ks(a)}function uO(e){var t=e.width,n=e.height,r=e.x,i=e.y,o=t/2,a=n/2,s=[["M",r+o,i],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return ks(s)}function pO(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=[["M",t,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return ks(o)}function vc(e,t={}){return{width:pi(e,t),height:Mr(e,t)}}function pi(e,t={}){return xr(t,"width")?t.width:e.width}function Mr(e,t={}){return xr(t,"height")?t.height:e.height}var fO=new to,dO=10,Kp=3,hO=1.5,Df=10,Ys=.95,mO=1,gO=.25;function As(e,t,n,r,i,o,a){No.call(this,t,a);var s=e&&e.defaultFillColor,l=e&&e.defaultStrokeColor,u=e&&e.defaultLabelColor;function f(B){return n.computeStyle(B,{strokeLinecap:"round",strokeLinejoin:"round",stroke:wy,strokeWidth:2,fill:"white"})}function d(B){return n.computeStyle(B,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:wy,strokeWidth:2})}function g(B,E){var{ref:R={x:0,y:0},scale:$=1,element:V,parentGfx:J=i._svg}=E,pe=ze("marker",{id:B,viewBox:"0 0 20 20",refX:R.x,refY:R.y,markerWidth:20*$,markerHeight:20*$,orient:"auto"});tt(pe,V);var le=Bt(":scope > defs",J);le||(le=ze("defs"),tt(J,le)),tt(le,pe)}function y(B,E,R,$){var V=fO.nextPrefixed("marker-");return v(B,V,E,R,$),"url(#"+V+")"}function v(B,E,R,$,V){if(R==="sequenceflow-end"){var J=ze("path",{d:"M 1 5 L 11 10 L 1 15 Z",...f({fill:V,stroke:V,strokeWidth:1})});g(E,{element:J,ref:{x:11,y:10},scale:.5,parentGfx:B})}if(R==="messageflow-start"){var pe=ze("circle",{cx:6,cy:6,r:3.5,...f({fill:$,stroke:V,strokeWidth:1,strokeDasharray:[1e4,1]})});g(E,{element:pe,ref:{x:6,y:6},parentGfx:B})}if(R==="messageflow-end"){var le=ze("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...f({fill:$,stroke:V,strokeWidth:1,strokeDasharray:[1e4,1]})});g(E,{element:le,ref:{x:8.5,y:5},parentGfx:B})}if(R==="association-start"){var de=ze("path",{d:"M 11 5 L 1 10 L 11 15",...d({fill:"none",stroke:V,strokeWidth:1.5,strokeDasharray:[1e4,1]})});g(E,{element:de,ref:{x:1,y:10},scale:.5,parentGfx:B})}if(R==="association-end"){var vt=ze("path",{d:"M 1 5 L 11 10 L 1 15",...d({fill:"none",stroke:V,strokeWidth:1.5,strokeDasharray:[1e4,1]})});g(E,{element:vt,ref:{x:11,y:10},scale:.5,parentGfx:B})}if(R==="conditional-flow-marker"){var Ot=ze("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...f({fill:$,stroke:V})});g(E,{element:Ot,ref:{x:-1,y:10},scale:.5,parentGfx:B})}if(R==="conditional-default-flow-marker"){var Dt=ze("path",{d:"M 6 4 L 10 16",...f({stroke:V,fill:"none"})});g(E,{element:Dt,ref:{x:0,y:10},scale:.5,parentGfx:B})}}function x(B,E,R,$,V={}){jn($)&&(V=$,$=0),$=$||0,V=f(V);var J=E/2,pe=R/2,le=ze("circle",{cx:J,cy:pe,r:Math.round((E+R)/4-$),...V});return tt(B,le),le}function C(B,E,R,$,V,J){jn(V)&&(J=V,V=0),V=V||0,J=f(J);var pe=ze("rect",{x:V,y:V,width:E-V*2,height:R-V*2,rx:$,ry:$,...J});return tt(B,pe),pe}function P(B,E,R,$){var V=E/2,J=R/2,pe=[{x:V,y:0},{x:E,y:J},{x:V,y:R},{x:0,y:J}],le=pe.map(function(vt){return vt.x+","+vt.y}).join(" ");$=f($);var de=ze("polygon",{...$,points:le});return tt(B,de),de}function k(B,E,R,$){R=d(R);var V=Jd(E,R,$);return tt(B,V),V}function w(B,E,R){return k(B,E,R,5)}function b(B,E,R){R=d(R);var $=ze("path",{...R,d:E});return tt(B,$),$}function D(B,E,R,$){return b(E,R,q({"data-marker":B},$))}function I(B){return ut[B]}function H(B){return function(E,R,$){return I(B)(E,R,$)}}var L={"bpmn:MessageEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:E.width,containerHeight:E.height,position:{mx:.235,my:.315}}),J=$?Ae(E,l,R.stroke):mt(E,s,R.fill),pe=$?mt(E,s,R.fill):Ae(E,l,R.stroke),le=b(B,V,{fill:J,stroke:pe,strokeWidth:1});return le},"bpmn:TimerEventDefinition":function(B,E,R={}){var $=x(B,E.width,E.height,.2*E.height,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:2}),V=r.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.5}});b(B,V,{stroke:Ae(E,l,R.stroke),strokeWidth:2});for(var J=0;J<12;J++){var pe=r.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.5}}),le=E.width/2,de=E.height/2;b(B,pe,{strokeWidth:1,stroke:Ae(E,l,R.stroke),transform:"rotate("+J*30+","+de+","+le+")"})}return $},"bpmn:EscalationEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.2}}),J=$?Ae(E,l,R.stroke):mt(E,s,R.fill);return b(B,V,{fill:J,stroke:Ae(E,l,R.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(B,E,R={}){var $=r.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.222}});return b(B,$,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.57,my:.263}}),J=$?Ae(E,l,R.stroke):mt(E,s,R.fill);return b(B,V,{fill:J,stroke:Ae(E,l,R.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:E.width,containerHeight:E.height,position:{mx:.2,my:.722}}),J=$?Ae(E,l,R.stroke):mt(E,s,R.fill);return b(B,V,{fill:J,stroke:Ae(E,l,R.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.638,my:-.055}}),J=$?Ae(E,l,R.stroke):"none",pe=b(B,V,{fill:J,stroke:Ae(E,l,R.stroke),strokeWidth:1});return ZC(pe,45),pe},"bpmn:CompensateEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.22,my:.5}}),J=$?Ae(E,l,R.stroke):mt(E,s,R.fill);return b(B,V,{fill:J,stroke:Ae(E,l,R.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.2}}),J=$?Ae(E,l,R.stroke):mt(E,s,R.fill);return b(B,V,{strokeWidth:1,fill:J,stroke:Ae(E,l,R.stroke)})},"bpmn:MultipleEventDefinition":function(B,E,R={},$){var V=r.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:E.width,containerHeight:E.height,position:{mx:.222,my:.36}}),J=$?Ae(E,l,R.stroke):mt(E,s,R.fill);return b(B,V,{fill:J,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(B,E,R={}){var $=r.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:E.width,containerHeight:E.height,position:{mx:.458,my:.194}});return b(B,$,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(B,E,R={}){var $=x(B,E.width,E.height,8,{fill:Ae(E,l,R.stroke),stroke:Ae(E,l,R.stroke),strokeWidth:4});return $}};function X(B,E,R={}){var $=fe(B),V=aO($);return $.get("eventDefinitions")&&$.get("eventDefinitions").length>1?$.get("parallelMultiple")?L["bpmn:ParallelMultipleEventDefinition"](E,B,R,V):L["bpmn:MultipleEventDefinition"](E,B,R,V):Ui($,"bpmn:MessageEventDefinition")?L["bpmn:MessageEventDefinition"](E,B,R,V):Ui($,"bpmn:TimerEventDefinition")?L["bpmn:TimerEventDefinition"](E,B,R,V):Ui($,"bpmn:ConditionalEventDefinition")?L["bpmn:ConditionalEventDefinition"](E,B,R,V):Ui($,"bpmn:SignalEventDefinition")?L["bpmn:SignalEventDefinition"](E,B,R,V):Ui($,"bpmn:EscalationEventDefinition")?L["bpmn:EscalationEventDefinition"](E,B,R,V):Ui($,"bpmn:LinkEventDefinition")?L["bpmn:LinkEventDefinition"](E,B,R,V):Ui($,"bpmn:ErrorEventDefinition")?L["bpmn:ErrorEventDefinition"](E,B,R,V):Ui($,"bpmn:CancelEventDefinition")?L["bpmn:CancelEventDefinition"](E,B,R,V):Ui($,"bpmn:CompensateEventDefinition")?L["bpmn:CompensateEventDefinition"](E,B,R,V):Ui($,"bpmn:TerminateEventDefinition")?L["bpmn:TerminateEventDefinition"](E,B,R,V):null}var Y={ParticipantMultiplicityMarker:function(B,E,R={}){var $=pi(E,R),V=Mr(E,R),J=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:V,position:{mx:($/2-6)/$,my:(V-15)/V}});D("participant-multiplicity",B,J,{strokeWidth:2,fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)})},SubProcessMarker:function(B,E,R={}){var $=C(B,14,14,0,{strokeWidth:1,fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)});Vn($,E.width/2-7.5,E.height-20);var V=r.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2-7.5)/E.width,my:(E.height-20)/E.height}});D("sub-process",B,V,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)})},ParallelMarker:function(B,E,R){var $=pi(E,R),V=Mr(E,R),J=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:V,position:{mx:($/2+R.parallel)/$,my:(V-20)/V}});D("parallel",B,J,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)})},SequentialMarker:function(B,E,R){var $=r.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+R.seq)/E.width,my:(E.height-19)/E.height}});D("sequential",B,$,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)})},CompensationMarker:function(B,E,R){var $=r.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+R.compensation)/E.width,my:(E.height-13)/E.height}});D("compensation",B,$,{strokeWidth:1,fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)})},LoopMarker:function(B,E,R){var $=pi(E,R),V=Mr(E,R),J=r.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:V,position:{mx:($/2+R.loop)/$,my:(V-7)/V}});D("loop",B,J,{strokeWidth:1.5,fill:"none",stroke:Ae(E,l,R.stroke),strokeMiterlimit:.5})},AdhocMarker:function(B,E,R){var $=pi(E,R),V=Mr(E,R),J=r.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:V,position:{mx:($/2+R.adhoc)/$,my:(V-15)/V}});D("adhoc",B,J,{strokeWidth:1,fill:Ae(E,l,R.stroke),stroke:Ae(E,l,R.stroke)})}};function K(B,E,R,$){Y[B](E,R,$)}function se(B,E,R,$={}){$={fill:$.fill,stroke:$.stroke,width:pi(E,$),height:Mr(E,$)};var V=fe(E),J=R&&R.includes("SubProcessMarker");J?$={...$,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:$={...$,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},U(R,function(de){K(de,B,E,$)}),V.get("isForCompensation")&&K("CompensationMarker",B,E,$),A(V,"bpmn:AdHocSubProcess")&&K("AdhocMarker",B,E,$);var pe=V.get("loopCharacteristics"),le=pe&&pe.get("isSequential");pe&&(le===void 0&&K("LoopMarker",B,E,$),le===!1&&K("ParallelMarker",B,E,$),le===!0&&K("SequentialMarker",B,E,$))}function ae(B,E,R={}){R=q({size:{width:100}},R);var $=o.createText(E||"",R);return Ct($).add("djs-label"),tt(B,$),$}function Re(B,E,R,$={}){var V=fe(E),J=vc({x:E.x,y:E.y,width:E.width,height:E.height},$);return ae(B,V.name,{align:R,box:J,padding:7,style:{fill:yc(E,u,l,$.stroke)}})}function wt(B,E,R={}){var $={width:90,height:30,x:E.width/2+E.x,y:E.height/2+E.y};return ae(B,Zr(E),{box:$,fitBox:!0,style:q({},o.getExternalStyle(),{fill:yc(E,u,l,R.stroke)})})}function Ge(B,E,R,$={}){var V=Dn(R),J=ae(B,E,{box:{height:30,width:V?Mr(R,$):pi(R,$)},align:"center-middle",style:{fill:yc(R,u,l,$.stroke)}});if(V){var pe=-1*Mr(R,$);Mf(J,0,-pe,270)}}function Ke(B,E,R={}){var{width:$,height:V}=vc(E,R);return C(B,$,V,Df,{...R,fill:mt(E,s,R.fill),fillOpacity:Ys,stroke:Ae(E,l,R.stroke)})}function ye(B,E,R={}){var $=fe(E),V=mt(E,s,R.fill),J=Ae(E,l,R.stroke);return($.get("associationDirection")==="One"||$.get("associationDirection")==="Both")&&(R.markerEnd=y(B,"association-end",V,J)),$.get("associationDirection")==="Both"&&(R.markerStart=y(B,"association-start",V,J)),R=St(R,["markerStart","markerEnd"]),w(B,E.waypoints,{...R,stroke:J,strokeDasharray:"0, 5"})}function je(B,E,R={}){var $=mt(E,s,R.fill),V=Ae(E,l,R.stroke),J=r.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.474,my:.296}}),pe=b(B,J,{fill:$,fillOpacity:Ys,stroke:V}),le=fe(E);if(sO(le)){var de=r.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.33,my:(E.height-18)/E.height}});b(B,de,{strokeWidth:2,fill:$,stroke:V})}return pe}function Ne(B,E,R={}){return x(B,E.width,E.height,{fillOpacity:Ys,...R,fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)})}function qe(B,E,R={}){return P(B,E.width,E.height,{fill:mt(E,s,R.fill),fillOpacity:Ys,stroke:Ae(E,l,R.stroke)})}function re(B,E,R={}){var $=C(B,pi(E,R),Mr(E,R),0,{fill:mt(E,s,R.fill),fillOpacity:R.fillOpacity||Ys,stroke:Ae(E,l,R.stroke),strokeWidth:1.5}),V=fe(E);if(A(V,"bpmn:Lane")){var J=V.get("name");Ge(B,J,E,R)}return $}function oe(B,E,R={}){var $=Ke(B,E,R);tr(E)&&Pe($,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var V=xt(E);return Re(B,E,V?"center-top":"center-middle",R),V?se(B,E,void 0,R):se(B,E,["SubProcessMarker"],R),$}function _e(B,E,R={}){var $=Ke(B,E,R);return Re(B,E,"center-middle",R),se(B,E,void 0,R),$}var ut=this.handlers={"bpmn:AdHocSubProcess":function(B,E,R={}){return xt(E)?R=St(R,["fill","stroke","width","height"]):R=St(R,["fill","stroke"]),oe(B,E,R)},"bpmn:Association":function(B,E,R={}){return R=St(R,["fill","stroke"]),ye(B,E,R)},"bpmn:BoundaryEvent":function(B,E,R={}){var{renderIcon:$=!0}=R;R=St(R,["fill","stroke"]);var V=fe(E),J=V.get("cancelActivity");R={strokeWidth:1.5,fill:mt(E,s,R.fill),fillOpacity:mO,stroke:Ae(E,l,R.stroke)},J||(R.strokeDasharray="6");var pe=Ne(B,E,R);return x(B,E.width,E.height,Kp,{...R,fill:"none"}),$&&X(E,B,R),pe},"bpmn:BusinessRuleTask":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=_e(B,E,R),V=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),J=b(B,V);Pe(J,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1});var pe=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),le=b(B,pe);return Pe(le,{fill:Ae(E,l,R.stroke),stroke:Ae(E,l,R.stroke),strokeWidth:1}),$},"bpmn:CallActivity":function(B,E,R={}){return R=St(R,["fill","stroke"]),oe(B,E,{strokeWidth:5,...R})},"bpmn:ComplexGateway":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=qe(B,E,R),V=r.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:E.width,containerHeight:E.height,position:{mx:.46,my:.26}});return b(B,V,{fill:Ae(E,l,R.stroke),stroke:Ae(E,l,R.stroke),strokeWidth:1}),$},"bpmn:DataInput":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=r.getRawPath("DATA_ARROW"),V=je(B,E,R);return b(B,$,{fill:"none",stroke:Ae(E,l,R.stroke),strokeWidth:1}),V},"bpmn:DataInputAssociation":function(B,E,R={}){return R=St(R,["fill","stroke"]),ye(B,E,{...R,markerEnd:y(B,"association-end",mt(E,s,R.fill),Ae(E,l,R.stroke))})},"bpmn:DataObject":function(B,E,R={}){return R=St(R,["fill","stroke"]),je(B,E,R)},"bpmn:DataObjectReference":H("bpmn:DataObject"),"bpmn:DataOutput":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=r.getRawPath("DATA_ARROW"),V=je(B,E,R);return b(B,$,{strokeWidth:1,fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke)}),V},"bpmn:DataOutputAssociation":function(B,E,R={}){return R=St(R,["fill","stroke"]),ye(B,E,{...R,markerEnd:y(B,"association-end",mt(E,s,R.fill),Ae(E,l,R.stroke))})},"bpmn:DataStoreReference":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=r.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:0,my:.133}});return b(B,$,{fill:mt(E,s,R.fill),fillOpacity:Ys,stroke:Ae(E,l,R.stroke),strokeWidth:2})},"bpmn:EndEvent":function(B,E,R={}){var{renderIcon:$=!0}=R;R=St(R,["fill","stroke"]);var V=Ne(B,E,{...R,strokeWidth:4});return $&&X(E,B,R),V},"bpmn:EventBasedGateway":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=fe(E),V=qe(B,E,R);x(B,E.width,E.height,E.height*.2,{fill:mt(E,"none",R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1});var J=$.get("eventGatewayType"),pe=!!$.get("instantiate");function le(){var vt=r.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:E.width,containerHeight:E.height,position:{mx:.36,my:.44}});b(B,vt,{fill:"none",stroke:Ae(E,l,R.stroke),strokeWidth:2})}if(J==="Parallel"){var de=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:E.width,containerHeight:E.height,position:{mx:.474,my:.296}});b(B,de,{fill:"none",stroke:Ae(E,l,R.stroke),strokeWidth:1})}else J==="Exclusive"&&(pe||x(B,E.width,E.height,E.height*.26,{fill:"none",stroke:Ae(E,l,R.stroke),strokeWidth:1}),le());return V},"bpmn:ExclusiveGateway":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=qe(B,E,R),V=r.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:E.width,containerHeight:E.height,position:{mx:.32,my:.3}}),J=Rt(E);return J.get("isMarkerVisible")&&b(B,V,{fill:Ae(E,l,R.stroke),stroke:Ae(E,l,R.stroke),strokeWidth:1}),$},"bpmn:Gateway":function(B,E,R={}){return R=St(R,["fill","stroke"]),qe(B,E,R)},"bpmn:Group":function(B,E,R={}){return R=St(R,["fill","stroke","width","height"]),C(B,E.width,E.height,Df,{stroke:Ae(E,l,R.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:pi(E,R),height:Mr(E,R)})},"bpmn:InclusiveGateway":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=qe(B,E,R);return x(B,E.width,E.height,E.height*.24,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:2.5}),$},"bpmn:IntermediateEvent":function(B,E,R={}){var{renderIcon:$=!0}=R;R=St(R,["fill","stroke"]);var V=Ne(B,E,{...R,strokeWidth:1.5});return x(B,E.width,E.height,Kp,{fill:"none",stroke:Ae(E,l,R.stroke),strokeWidth:1.5}),$&&X(E,B,R),V},"bpmn:IntermediateCatchEvent":H("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":H("bpmn:IntermediateEvent"),"bpmn:Lane":function(B,E,R={}){return R=St(R,["fill","stroke","width","height"]),re(B,E,{...R,fillOpacity:gO})},"bpmn:ManualTask":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=_e(B,E,R),V=r.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return b(B,V,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:.5}),$},"bpmn:MessageFlow":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=fe(E),V=Rt(E),J=mt(E,s,R.fill),pe=Ae(E,l,R.stroke),le=w(B,E.waypoints,{markerEnd:y(B,"messageflow-end",J,pe),markerStart:y(B,"messageflow-start",J,pe),stroke:pe,strokeDasharray:"10, 11",strokeWidth:1.5});if($.get("messageRef")){var de=le.getPointAtLength(le.getTotalLength()/2),vt=r.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:de.x,y:de.y}}),Ot={strokeWidth:1};V.get("messageVisibleKind")==="initiating"?(Ot.fill=J,Ot.stroke=pe):(Ot.fill=pe,Ot.stroke=J);var Dt=b(B,vt,Ot),Et=$.get("messageRef"),rt=Et.get("name"),Qe=ae(B,rt,{align:"center-top",fitBox:!0,style:{fill:pe}}),Z=Dt.getBBox(),we=Qe.getBBox(),$e=de.x-we.width/2,Ee=de.y+Z.height/2+dO;Mf(Qe,$e,Ee,0)}return le},"bpmn:ParallelGateway":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=qe(B,E,R),V=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:E.width,containerHeight:E.height,position:{mx:.46,my:.2}});return b(B,V,{fill:Ae(E,l,R.stroke),stroke:Ae(E,l,R.stroke),strokeWidth:1}),$},"bpmn:Participant":function(B,E,R={}){R=St(R,["fill","stroke","width","height"]);var $=re(B,E,R),V=xt(E),J=Dn(E),pe=fe(E),le=pe.get("name");if(V){var de=J?[{x:30,y:0},{x:30,y:Mr(E,R)}]:[{x:0,y:30},{x:pi(E,R),y:30}];k(B,de,{stroke:Ae(E,l,R.stroke),strokeWidth:hO}),Ge(B,le,E,R)}else{var vt=vc(E,R);J||(vt.height=pi(E,R),vt.width=Mr(E,R));var Ot=ae(B,le,{box:vt,align:"center-middle",style:{fill:yc(E,u,l,R.stroke)}});if(!J){var Dt=-1*Mr(E,R);Mf(Ot,0,-Dt,270)}}return pe.get("participantMultiplicity")&&K("ParticipantMultiplicityMarker",B,E,R),$},"bpmn:ReceiveTask":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=fe(E),V=_e(B,E,R),J;return $.get("instantiate")?(x(B,28,28,20*.22,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1}),J=r.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):J=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),b(B,J,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1}),V},"bpmn:ScriptTask":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=_e(B,E,R),V=r.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return b(B,V,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1}),$},"bpmn:SendTask":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=_e(B,E,R),V=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return b(B,V,{fill:Ae(E,l,R.stroke),stroke:mt(E,s,R.fill),strokeWidth:1}),$},"bpmn:SequenceFlow":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=mt(E,s,R.fill),V=Ae(E,l,R.stroke),J=w(B,E.waypoints,{markerEnd:y(B,"sequenceflow-end",$,V),stroke:V}),pe=fe(E),{source:le}=E;if(le){var de=fe(le);pe.get("conditionExpression")&&A(de,"bpmn:Activity")&&Pe(J,{markerStart:y(B,"conditional-flow-marker",$,V)}),de.get("default")&&(A(de,"bpmn:Gateway")||A(de,"bpmn:Activity"))&&de.get("default")===pe&&Pe(J,{markerStart:y(B,"conditional-default-flow-marker",$,V)})}return J},"bpmn:ServiceTask":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=_e(B,E,R);x(B,10,10,{fill:mt(E,s,R.fill),stroke:"none",transform:"translate(6, 6)"});var V=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});b(B,V,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1}),x(B,10,10,{fill:mt(E,s,R.fill),stroke:"none",transform:"translate(11, 10)"});var J=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return b(B,J,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:1}),$},"bpmn:StartEvent":function(B,E,R={}){var{renderIcon:$=!0}=R;R=St(R,["fill","stroke"]);var V=fe(E);V.get("isInterrupting")||(R={...R,strokeDasharray:"6"});var J=Ne(B,E,R);return $&&X(E,B,R),J},"bpmn:SubProcess":function(B,E,R={}){return xt(E)?R=St(R,["fill","stroke","width","height"]):R=St(R,["fill","stroke"]),oe(B,E,R)},"bpmn:Task":function(B,E,R={}){return R=St(R,["fill","stroke"]),_e(B,E,R)},"bpmn:TextAnnotation":function(B,E,R={}){R=St(R,["fill","stroke","width","height"]);var{width:$,height:V}=vc(E,R),J=C(B,$,V,0,0,{fill:"none",stroke:"none"}),pe=r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:V,position:{mx:0,my:0}});b(B,pe,{stroke:Ae(E,l,R.stroke)});var le=fe(E),de=le.get("text")||"";return ae(B,de,{align:"left-top",box:vc(E,R),padding:7,style:{fill:yc(E,u,l,R.stroke)}}),J},"bpmn:Transaction":function(B,E,R={}){xt(E)?R=St(R,["fill","stroke","width","height"]):R=St(R,["fill","stroke"]);var $=oe(B,E,{strokeWidth:1.5,...R}),V=n.style(["no-fill","no-events"],{stroke:Ae(E,l,R.stroke),strokeWidth:1.5}),J=xt(E);return J||(R={}),C(B,pi(E,R),Mr(E,R),Df-Kp,Kp,V),$},"bpmn:UserTask":function(B,E,R={}){R=St(R,["fill","stroke"]);var $=_e(B,E,R),V=15,J=12,pe=r.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:V,y:J}});b(B,pe,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:.5});var le=r.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:V,y:J}});b(B,le,{fill:mt(E,s,R.fill),stroke:Ae(E,l,R.stroke),strokeWidth:.5});var de=r.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:V,y:J}});return b(B,de,{fill:Ae(E,l,R.stroke),stroke:Ae(E,l,R.stroke),strokeWidth:.5}),$},label:function(B,E,R={}){return wt(B,E,R)}};this._drawPath=b,this._renderer=I}Oe(As,No);As.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];As.prototype.canRender=function(e){return A(e,"bpmn:BaseElement")};As.prototype.drawShape=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};As.prototype.drawConnection=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};As.prototype.getShapePath=function(e){return A(e,"bpmn:Event")?lO(e):A(e,"bpmn:Activity")?cO(e,Df):A(e,"bpmn:Gateway")?uO(e):pO(e)};function St(e,t=[]){return t.reduce((n,r)=>(e[r]&&(n[r]=e[r]),n),{})}var yO=0,vO={width:150,height:50};function xO(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function _O(e){return jn(e)?q({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function wO(e,t){t.textContent=e;var n;try{var r,i=e==="";return t.textContent=i?"dummy":e,n=t.getBBox(),r={width:n.width+n.x*2,height:n.height},i&&(r.width=0),r}catch{return{width:0,height:0}}}function EO(e,t,n){for(var r=e.shift(),i=r,o;;){if(o=wO(i,n),o.width=i?o.width:0,i===" "||i===""||o.width<Math.round(t)||i.length<2)return bO(e,i,r,o);i=CO(i,o.width,t)}}function bO(e,t,n,r){if(t.length<n.length){var i=n.slice(t.length).trim();e.unshift(i)}return{width:r.width,height:r.height,text:t}}var Aw="";function SO(e,t){var n=e.split(/(\s|-|\u00AD)/g),r,i=[],o=0;if(n.length>1)for(;r=n.shift();)if(r.length+o<t)i.push(r),o+=r.length;else{(r==="-"||r===Aw)&&i.pop();break}var a=i[i.length-1];return a&&a===Aw&&(i[i.length-1]="-"),i.join("")}function CO(e,t,n){var r=Math.max(e.length*(n/t),1),i=SO(e,r);return i||(i=e.slice(0,Math.max(Math.round(r-1),1))),i}function RO(){var e=document.getElementById("helper-svg");return e||(e=ze("svg"),Pe(e,{id:"helper-svg"}),Zn(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function sh(e){this._config=q({},{size:vO,padding:yO,style:{},align:"center-top"},e||{})}sh.prototype.createText=function(e,t){return this.layoutText(e,t).element};sh.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};sh.prototype.layoutText=function(e,t){var n=q({},this._config.size,t.box),r=q({},this._config.style,t.style),i=xO(t.align||this._config.align),o=_O(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=kO(r),l=e.split(/\u00AD?\r?\n/),u=[],f=n.width-o.left-o.right,d=ze("text");Pe(d,{x:0,y:0}),Pe(d,r);var g=RO();for(tt(g,d);l.length;)u.push(EO(l,f,d));i.vertical==="middle"&&(o.top=o.bottom=0);var y=$r(u,function(k,w,b){return k+(s||w.height)},0)+o.top+o.bottom,v=$r(u,function(k,w,b){return w.width>k?w.width:k},0),x=o.top;i.vertical==="middle"&&(x+=(n.height-y)/2),x-=(s||u[0].height)/4;var C=ze("text");Pe(C,r),U(u,function(k){var w;switch(x+=s||k.height,i.horizontal){case"left":w=o.left;break;case"right":w=(a?v:f)-o.right-k.width;break;default:w=Math.max(((a?v:f)-k.width)/2+o.left,0)}var b=ze("tspan");Pe(b,{x:w,y:x}),b.textContent=k.text,tt(C,b)}),Cn(d);var P={width:v,height:y};return{dimensions:P,element:C}};function kO(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var PO=12,TO=1.2,AO=30;function xR(e){var t=q({fontFamily:"Arial, sans-serif",fontSize:PO,fontWeight:"normal",lineHeight:TO},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,r=q({},t,{fontSize:n},e&&e.externalStyle||{}),i=new sh({style:t});this.getExternalLabelBounds=function(o,a){var s=i.getDimensions(a,{box:{width:90,height:30},style:r});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=i.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(AO,Math.round(s.height))}},this.createText=function(o,a){return i.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return r}}xR.$inject=["config.textRenderer"];function MO(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var r=this.pathMap[t],i,o;n.abspos?(i=n.abspos.x,o=n.abspos.y):(i=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/r.height*n.yScaleFactor,l=n.containerWidth/r.width*n.xScaleFactor,u=0;u<r.heightElements.length;u++)a["y"+u]=r.heightElements[u]*s;for(var f=0;f<r.widthElements.length;f++)a["x"+f]=r.widthElements[f]*l}var d=LO(r.d,{mx:i,my:o,e:a});return d}}var NO=/\{([^{}]+)\}/g,DO=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function OO(e,t,n){var r=n;return t.replace(DO,function(i,o,a,s,l){o=o||s,r&&(o in r&&(r=r[o]),typeof r=="function"&&l&&(r=r()))}),r=(r==null||r==n?e:r)+"",r}function LO(e,t){return String(e).replace(NO,function(n,r){return OO(n,r,t)})}const BO={__init__:["bpmnRenderer"],bpmnRenderer:["type",As],textRenderer:["type",xR],pathMap:["type",MO]};function IO(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,r){return t[r]||"{"+r+"}"})}const lh={translate:["value",IO]};function Of(e,t,n){return q({id:e.id,type:e.$type,businessObject:e,di:t},n)}function jO(e,t,n){var r=e.waypoint;return!r||r.length<2?[Je(t),Je(n)]:r.map(function(i){return{x:i.x,y:i.y}})}function _R(e,t,n){return new Error(`element ${Qn(t)} referenced by ${Qn(e)}#${n} not yet drawn`)}function Oo(e,t,n,r,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r,this._textRenderer=i}Oo.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];Oo.prototype.add=function(e,t,n){var r,i,o;if(A(t,"bpmndi:BPMNPlane")){var a=A(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};r=this._elementFactory.createRoot(Of(e,t,a)),this._canvas.addRootElement(r)}else if(A(t,"bpmndi:BPMNShape")){var s=!xt(e,t),l=FO(e);i=n&&(n.hidden||n.collapsed);var u=t.bounds;r=this._elementFactory.createShape(Of(e,t,{collapsed:s,hidden:i,x:Math.round(u.x),y:Math.round(u.y),width:Math.round(u.width),height:Math.round(u.height),isFrame:l})),A(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,r),A(e,"bpmn:Lane")&&(o=0),A(e,"bpmn:DataStoreReference")&&($O(n,Je(u))||(n=this._canvas.findRoot(n))),this._canvas.addShape(r,n,o)}else if(A(t,"bpmndi:BPMNEdge")){var f=this._getSource(e),d=this._getTarget(e);i=n&&(n.hidden||n.collapsed),r=this._elementFactory.createConnection(Of(e,t,{hidden:i,source:f,target:d,waypoints:jO(t,f,d)})),A(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(r,n,o)}else throw new Error(`unknown di ${Qn(t)} for element ${Qn(e)}`);return Es(e)&&Zr(r)&&this.addLabel(e,t,r),this._eventBus.fire("bpmnElement.added",{element:r}),r};Oo.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${Qn(e)}#attachedToRef`);var r=this._elementRegistry.get(n.id),i=r&&r.attachers;if(!r)throw _R(e,n,"attachedToRef");t.host=r,i||(r.attachers=i=[]),i.indexOf(t)===-1&&i.push(t)};Oo.prototype.addLabel=function(e,t,n){var r,i,o;return r=nO(t,n),i=Zr(n),i&&(r=this._textRenderer.getExternalLabelBounds(r,i)),o=this._elementFactory.createLabel(Of(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Zr(n),x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)})),this._canvas.addShape(o,n.parent)};Oo.prototype._getConnectedElement=function(e,t){var n,r,i=e.$type;if(r=e[t+"Ref"],t==="source"&&i==="bpmn:DataInputAssociation"&&(r=r&&r[0]),(t==="source"&&i==="bpmn:DataOutputAssociation"||t==="target"&&i==="bpmn:DataInputAssociation")&&(r=e.$parent),n=r&&this._getElement(r),n)return n;throw r?_R(e,r,t+"Ref"):new Error(`${Qn(e)}#${t} Ref not specified`)};Oo.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Oo.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Oo.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function $O(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function FO(e){return A(e,"bpmn:Group")}const zO={__depends__:[lh],bpmnImporter:["type",Oo]},HO={__depends__:[BO,zO]};function Ou(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Ou.prototype.next=function(){return this._prefix+ ++this._counter};var VO=new Ou("ov"),WO=500;function $n(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=VO,this._overlayDefaults=q({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=UO(n.getContainer()),this._init()}$n.$inject=["config.overlays","eventBus","canvas","elementRegistry"];$n.prototype.get=function(e){if(jr(e)&&(e={id:e}),jr(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?gt(t.overlays,Ii({type:e.type})):t.overlays.slice():[]}else return e.type?gt(this._overlays,Ii({type:e.type})):e.id?this._overlays[e.id]:null};$n.prototype.add=function(e,t,n){if(jn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var r=this._ids.next();return n=q({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r};$n.prototype.remove=function(e){var t=this.get(e)||[];at(t)||(t=[t]);var n=this;U(t,function(r){var i=n._getOverlayContainer(r.element,!0);if(r&&(ro(r.html),ro(r.htmlContainer),delete r.htmlContainer,delete r.element,delete n._overlays[r.id]),i){var o=i.overlays.indexOf(r);o!==-1&&i.overlays.splice(o,1)}})};$n.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};$n.prototype.show=function(){ch(this._overlayRoot)};$n.prototype.hide=function(){ch(this._overlayRoot,!1)};$n.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Xd(this._overlayRoot)};$n.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,r=t.x,i=t.y;if(t.waypoints){var o=Nn(t);r=o.x,i=o.y}wR(n,r,i),ur(e.html,"data-container-id",t.id)};$n.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,r=e.element,i=t.left,o=t.top;if(t.right!==void 0){var a;r.waypoints?a=Nn(r).width:a=r.width,i=t.right*-1+a}if(t.bottom!==void 0){var s;r.waypoints?s=Nn(r).height:s=r.height,o=t.bottom*-1+s}wR(n,i||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};$n.prototype._createOverlayContainer=function(e){var t=zt('<div class="djs-overlays" />');Zn(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};$n.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";ER(this._overlayRoot,n)};$n.prototype._getOverlayContainer=function(e,t){var n=At(this._overlayContainers,function(r){return r.element===e});return!n&&!t?this._createOverlayContainer(e):n};$n.prototype._addOverlay=function(e){var t=e.id,n=e.element,r=e.html,i,o;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),jr(r)&&(r=zt(r)),o=this._getOverlayContainer(n),i=zt('<div class="djs-overlay" data-overlay-id="'+t+'">'),Zn(i,{position:"absolute"}),i.appendChild(r),e.type&&on(i).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();ch(i,a===s),e.htmlContainer=i,o.overlays.push(e),o.html.appendChild(i),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};$n.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=this._canvas.findRoot(e.element),i=n&&n.minZoom,o=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),l=!0;(r!==s||n&&(Bn(i)&&i>t.scale||Bn(o)&&o<t.scale))&&(l=!1),ch(a,l),this._updateOverlayScale(e,t)};$n.prototype._updateOverlayScale=function(e,t){var n=e.scale,r,i,o=e.htmlContainer,a,s="";n!==!0&&(n===!1?(r=1,i=1):(r=n.min,i=n.max),Bn(r)&&t.scale<r&&(a=(1/t.scale||1)*r),Bn(i)&&t.scale>i&&(a=(1/t.scale||1)*i)),Bn(a)&&(s="scale("+a+","+a+")"),ER(o,s)};$n.prototype._updateOverlaysVisibilty=function(e){var t=this;U(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};$n.prototype._init=function(){var e=this._eventBus,t=this;function n(r){t._updateRoot(r),t._updateOverlaysVisibilty(r),t.show()}e.on("canvas.viewbox.changing",function(r){t.hide()}),e.on("canvas.viewbox.changed",function(r){n(r.viewbox)}),e.on(["shape.remove","connection.remove"],function(r){var i=r.element,o=t.get({element:i});U(o,function(l){t.remove(l.id)});var a=t._getOverlayContainer(i);if(a){ro(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",WO,function(r){var i=r.element,o=t._getOverlayContainer(i,!0);o&&(U(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(r){var i=t._getOverlayContainer(r.element,!0);i&&on(i.html)[r.add?"add":"remove"](r.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function UO(e){var t=zt('<div class="djs-overlay-container" />');return Zn(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function wR(e,t,n){Zn(e,{left:t+"px",top:n+"px"})}function ch(e,t){e.style.display=t===!1?"none":""}function ER(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const uh={__init__:["overlays"],overlays:["type",$n]};function bR(e,t,n,r){e.on("element.changed",function(i){var o=i.element;(o.parent||o===t.getRootElement())&&(i.gfx=n.getGraphics(o)),i.gfx&&e.fire(LC(o)+".changed",i)}),e.on("elements.changed",function(i){var o=i.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),r.updateContainments(o)}),e.on("shape.changed",function(i){r.update("shape",i.element,i.gfx)}),e.on("connection.changed",function(i){r.update("connection",i.element,i.gfx)})}bR.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const s0={__init__:["changeSupport"],changeSupport:["type",bR]};var GO=1e3;function ue(e){this._eventBus=e}ue.$inject=["eventBus"];function KO(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}ue.prototype.on=function(e,t,n,r,i,o){if((Rn(t)||Ze(t))&&(o=i,i=r,r=n,n=t,t=null),Rn(n)&&(o=i,i=r,r=n,n=GO),jn(i)&&(o=i,i=!1),!Rn(r))throw new Error("handlerFn must be a function");at(e)||(e=[e]);var a=this._eventBus;U(e,function(s){var l=["commandStack",s,t].filter(function(u){return u}).join(".");a.on(l,n,i?KO(r,o):r,o)})};ue.prototype.canExecute=Lo("canExecute");ue.prototype.preExecute=Lo("preExecute");ue.prototype.preExecuted=Lo("preExecuted");ue.prototype.execute=Lo("execute");ue.prototype.executed=Lo("executed");ue.prototype.postExecute=Lo("postExecute");ue.prototype.postExecuted=Lo("postExecuted");ue.prototype.revert=Lo("revert");ue.prototype.reverted=Lo("reverted");function Lo(e){return function(n,r,i,o,a){(Rn(n)||Ze(n))&&(a=o,o=i,i=r,r=n,n=null),this.on(n,e,r,i,o,a)}}function l0(e,t){t.invoke(ue,this),this.executed(function(n){var r=n.context;r.rootElement?e.setRootElement(r.rootElement):r.rootElement=e.getRootElement()}),this.revert(function(n){var r=n.context;r.rootElement&&e.setRootElement(r.rootElement)})}Oe(l0,ue);l0.$inject=["canvas","injector"];const YO={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",l0]};function hu(e){return CSS.escape(e)}var qO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ey(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return qO[t]})}var SR="_plane";function Mw(e){var t=e.id;return XO(t)}function vo(e){var t=e.id;return A(e,"bpmn:SubProcess")?CR(t):t}function es(e){return CR(e)}function Lf(e){var t=Rt(e);return A(t,"bpmndi:BPMNPlane")}function CR(e){return e+SR}function XO(e){return e.replace(new RegExp(SR+"$"),"")}var QO="bjs-breadcrumbs-shown";function RR(e,t,n){var r=zt('<ul class="bjs-breadcrumbs"></ul>'),i=n.getContainer(),o=on(i);i.appendChild(r);var a=[];e.on("element.changed",function(l){var u=l.element,f=fe(u),d=At(a,function(g){return g===f});d&&s()});function s(l){l&&(a=ZO(l));var u=a.flatMap(function(d){var g=n.findRoot(vo(d))||n.findRoot(d.id);if(!g&&A(d,"bpmn:Process")){var y=t.find(function(C){var P=fe(C);return P&&P.get("processRef")===d});g=y&&n.findRoot(y.id)}if(!g)return[];var v=Ey(d.name||d.id),x=zt('<li><span class="bjs-crumb"><a title="'+v+'">'+v+"</a></span></li>");return x.addEventListener("click",function(){n.setRootElement(g)}),x});r.innerHTML="";var f=u.length>1;o.toggle(QO,f),u.forEach(function(d){r.appendChild(d)})}e.on("root.set",function(l){s(l.element)})}RR.$inject=["eventBus","elementRegistry","canvas"];function ZO(e){for(var t=fe(e),n=[],r=t;r;r=r.$parent)(A(r,"bpmn:SubProcess")||A(r,"bpmn:Process"))&&n.push(r);return n.reverse()}function kR(e,t){var n=null,r=new JO;e.on("root.set",function(i){var o=i.element,a=t.viewbox(),s=r.get(o);if(r.set(n,{x:a.x,y:a.y,zoom:a.scale}),n=o,!(!A(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var l=(a.x-s.x)*a.scale,u=(a.y-s.y)*a.scale;(l!==0||u!==0)&&t.scroll({dx:l,dy:u}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){r.clear(),n=null})}kR.$inject=["eventBus","canvas"];function JO(){this._entries=[],this.set=function(e,t){var n=!1;for(var r in this._entries)if(this._entries[r][0]===e){this._entries[r][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Nw={x:180,y:160};function Ms(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(r,i){n._handleImport(i.definitions)})}Ms.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(r){!r.plane||!r.plane.bpmnElement||(t._processToDiagramMap[r.plane.bpmnElement.id]=r)});var n=e.diagrams.filter(r=>r.plane).flatMap(r=>t._createNewDiagrams(r.plane));n.forEach(function(r){t._movePlaneElementsToOrigin(r.plane)})}};Ms.prototype._createNewDiagrams=function(e){var t=this,n=[],r=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;A(a,"bpmn:SubProcess")&&!o.isExpanded&&n.push(a),t6(a,e)&&r.push({diElement:o,parent:s})}});var i=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,i.push(a)}}),r.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&n.indexOf(s)===-1;)s=s.$parent;if(s){var l=t._processToDiagramMap[s.id];t._moveToDiPlane(a,l.plane)}}),i};Ms.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=e6(e),r={x:n.x-Nw.x,y:n.y-Nw.y};t.forEach(function(i){i.waypoint?i.waypoint.forEach(function(o){o.x=o.x-r.x,o.y=o.y-r.y}):i.bounds&&(i.bounds.x=i.bounds.x-r.x,i.bounds.y=i.bounds.y-r.y)})};Ms.prototype._moveToDiPlane=function(e,t){var n=PR(e),r=n.plane.get("planeElement");r.splice(r.indexOf(e),1),t.get("planeElement").push(e)};Ms.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Ms.$inject=["eventBus","moddle"];function PR(e){return A(e,"bpmndi:BPMNDiagram")?e:PR(e.$parent)}function e6(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var r=Ue(n.bounds);t.top=Math.min(r.top,t.top),t.left=Math.min(r.left,t.left)}}),th(t)}function t6(e,t){var n=e.$parent;return!(!A(n,"bpmn:SubProcess")||n===t.bpmnElement||ht(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Yp=250,n6='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',r6="bjs-drilldown-empty";function Aa(e,t,n,r,i){ue.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=r,this._translate=i;var o=this;this.executed("shape.toggleCollapse",Yp,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",Yp,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],Yp,function(a){var s=a.oldParent,l=a.newParent||a.parent,u=a.shape;o._canDrillDown(u)&&o._addOverlay(u),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(u)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Yp,function(a){var s=a.oldParent,l=a.newParent||a.parent,u=a.shape;o._canDrillDown(u)&&o._addOverlay(u),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(u)},!0),t.on("import.render.complete",function(){n.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}Oe(Aa,ue);Aa.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};Aa.prototype._canDrillDown=function(e){var t=this._canvas;return A(e,"bpmn:SubProcess")&&t.findRoot(vo(e))};Aa.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=fe(e),r=t.get({element:n.id,type:"drilldown"})[0];if(r){var i=n&&n.get("flowElements")&&n.get("flowElements").length;on(r.html).toggle(r6,!i)}};Aa.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,r=fe(e),i=n.get({element:e,type:"drilldown"});i.length&&this._removeOverlay(e);var o=zt('<button type="button" class="bjs-drilldown">'+n6+"</button>"),a=r.get("name")||r.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(vo(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};Aa.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};Aa.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const i6={__depends__:[uh,s0,YO],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",RR],drilldownCentering:["type",kR],drilldownOverlayBehavior:["type",Aa],subprocessCompatibility:["type",Ms]};var o6=500,a6=1e3;function Ns(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),r=this;function i(o){var a=ze("rect");return Pe(a,q({x:0,y:0,rx:4,width:100,height:100},n)),a}e.on(["shape.added","shape.changed"],o6,function(o){var a=o.element,s=o.gfx,l=Bt(".djs-outline",s);l||(l=r.getOutline(a)||i(),tt(s,l)),r.updateShapeOutline(l,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,l=Bt(".djs-outline",s);l||(l=i(),tt(s,l)),r.updateConnectionOutline(l,a)})}Ns.prototype.updateShapeOutline=function(e,t){var n=!1,r=this._getProviders();r.length&&U(r,function(i){n=n||i.updateOutline(t,e)}),n||Pe(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Ns.prototype.updateConnectionOutline=function(e,t){var n=Nn(t);Pe(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Ns.prototype.registerProvider=function(e,t){t||(t=e,e=a6),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};Ns.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Ns.prototype.getOutline=function(e){var t,n=this._getProviders();return U(n,function(r){Rn(r.getOutline)&&(t=t||r.getOutline(e))}),t};Ns.$inject=["eventBus","styles","elementRegistry"];const c0={__init__:["outline"],outline:["type",Ns]},s6="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",l6="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",c6={width:36,height:50},u6={width:50,height:50};function Dw(e,t,n){return ze("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const na=5;function ph(e,t){this._styles=t,e.registerProvider(this)}ph.$inject=["outline","styles"];ph.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!kt(e))return A(e,"bpmn:Gateway")?(n=ze("rect"),q(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),Pe(n,q({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):ht(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=ze("rect"),Pe(n,q({x:-na,y:-na,rx:14,width:e.width+na*2,height:e.height+na*2},t))):A(e,"bpmn:EndEvent")?(n=ze("circle"),Pe(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+na+1},t))):A(e,"bpmn:Event")?(n=ze("circle"),Pe(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+na},t))):A(e,"bpmn:DataObjectReference")&&Ow(e,"bpmn:DataObjectReference")?n=Dw(s6,{x:-6,y:-6},t):A(e,"bpmn:DataStoreReference")&&Ow(e,"bpmn:DataStoreReference")&&(n=Dw(l6,{x:-6,y:-6},t)),n};ph.prototype.updateOutline=function(e,t){if(!kt(e))return ht(e,["bpmn:SubProcess","bpmn:Group"])?(Pe(t,{width:e.width+na*2,height:e.height+na*2}),!0):!!ht(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function Ow(e,t){var n;return t==="bpmn:DataObjectReference"?n=c6:t==="bpmn:DataStoreReference"&&(n=u6),e.width===n.width&&e.height===n.height}const p6={__depends__:[c0],__init__:["outlineProvider"],outlineProvider:["type",ph]};function Lw(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Wl(e){return e.originalEvent||e.srcEvent}function Jm(e){Lw(e),Lw(Wl(e))}function bs(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function TR(){return/mac/i.test(navigator.platform)}function AR(e,t){return(Wl(e)||e).button===t}function Ma(e){return AR(e,0)}function f6(e){return AR(e,1)}function mu(e){var t=Wl(e)||e;return Ma(e)?TR()?t.metaKey:t.ctrlKey:!1}function wd(e){var t=Wl(e)||e;return Ma(e)&&t.shiftKey}function d6(e){return!0}function qp(e){return Ma(e)||f6(e)}var Bw=500;function MR(e,t,n){var r=this;function i(L,X,Y){if(!s(L,X)){var K,se,ae;Y?se=t.getGraphics(Y):(K=X.delegateTarget||X.target,K&&(se=K,Y=t.get(se))),!(!se||!Y)&&(ae=e.fire(L,{element:Y,gfx:se,originalEvent:X}),ae===!1&&(X.stopPropagation(),X.preventDefault()))}}var o={};function a(L){return o[L]}function s(L,X){var Y=u[L]||Ma;return!Y(X)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":d6,"element.mousedown":qp,"element.mouseup":qp,"element.click":qp,"element.dblclick":qp};function f(L,X,Y){var K=l[L];if(!K)throw new Error("unmapped DOM event name <"+L+">");return i(K,X,Y)}var d="svg, .djs-element";function g(L,X,Y,K){var se=o[Y]=function(ae){i(Y,ae)};K&&(u[Y]=K),se.$delegate=Or.bind(L,d,X,se)}function y(L,X,Y){var K=a(Y);K&&Or.unbind(L,X,K.$delegate)}function v(L){U(l,function(X,Y){g(L,Y,X)})}function x(L){U(l,function(X,Y){y(L,Y,X)})}e.on("canvas.destroy",function(L){x(L.svg)}),e.on("canvas.init",function(L){v(L.svg)}),e.on(["shape.added","connection.added"],function(L){var X=L.element,Y=L.gfx;e.fire("interactionEvents.createHit",{element:X,gfx:Y})}),e.on(["shape.changed","connection.changed"],Bw,function(L){var X=L.element,Y=L.gfx;e.fire("interactionEvents.updateHit",{element:X,gfx:Y})}),e.on("interactionEvents.createHit",Bw,function(L){var X=L.element,Y=L.gfx;r.createDefaultHit(X,Y)}),e.on("interactionEvents.updateHit",function(L){var X=L.element,Y=L.gfx;r.updateDefaultHit(X,Y)});var C=D("djs-hit djs-hit-stroke"),P=D("djs-hit djs-hit-click-stroke"),k=D("djs-hit djs-hit-all"),w=D("djs-hit djs-hit-no-move"),b={all:k,"click-stroke":P,stroke:C,"no-move":w};function D(L,X){return X=q({stroke:"white",strokeWidth:15},X||{}),n.cls(L,["no-fill","no-border"],X)}function I(L,X){var Y=b[X];if(!Y)throw new Error("invalid hit type <"+X+">");return Pe(L,Y),L}function H(L,X){tt(L,X)}this.removeHits=function(L){var X=fy(".djs-hit",L);U(X,Cn)},this.createDefaultHit=function(L,X){var Y=L.waypoints,K=L.isFrame,se;return Y?this.createWaypointsHit(X,Y):(se=K?"stroke":"all",this.createBoxHit(X,se,{width:L.width,height:L.height}))},this.createWaypointsHit=function(L,X){var Y=Jd(X);return I(Y,"stroke"),H(L,Y),Y},this.createBoxHit=function(L,X,Y){Y=q({x:0,y:0},Y);var K=ze("rect");return I(K,X),Pe(K,Y),H(L,K),K},this.updateDefaultHit=function(L,X){var Y=Bt(".djs-hit",X);if(Y)return L.waypoints?DC(Y,L.waypoints):Pe(Y,{width:L.width,height:L.height}),Y},this.fire=i,this.triggerMouseEvent=f,this.mouseHandler=a,this.registerEvent=g,this.unregisterEvent=y}MR.$inject=["eventBus","elementRegistry","styles"];const fh={__init__:["interactionEvents"],interactionEvents:["type",MR]};function Ul(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(r){var i=r.element;n.deselect(i)}),e.on(["diagram.clear","root.set"],function(r){n.select(null)})}Ul.$inject=["eventBus","canvas"];Ul.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var r=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t})}};Ul.prototype.get=function(){return this._selectedElements};Ul.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Ul.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice();at(e)||(e=e?[e]:[]);var i=this._canvas,o=i.getRootElement();e=e.filter(function(a){var s=i.findRoot(a);return o===s}),t?U(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var Iw="hover",jw="selected",Xp=6;function u0(e,t,n){this._canvas=e;var r=this;this._multiSelectionBox=null;function i(a,s){e.addMarker(a,s)}function o(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){i(a.element,Iw)}),t.on("element.out",function(a){o(a.element,Iw)}),t.on("selection.changed",function(a){function s(d){o(d,jw)}function l(d){i(d,jw)}var u=a.oldSelection,f=a.newSelection;U(u,function(d){f.indexOf(d)===-1&&s(d)}),U(f,function(d){u.indexOf(d)===-1&&l(d)}),r._updateSelectionOutline(f)}),t.on("element.changed",function(a){n.isSelected(a.element)&&r._updateSelectionOutline(n.get())})}u0.$inject=["canvas","eventBus","selection"];u0.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Zd(t);var n=e.length>1,r=this._canvas.getContainer();if(Ct(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=h6(Nn(e)),o=ze("rect");Pe(o,q({rx:3},i)),Ct(o).add("djs-selection-outline"),tt(t,o)}};function h6(e){return{x:e.x-Xp,y:e.y-Xp,width:e.width+Xp*2,height:e.height+Xp*2}}function NR(e,t,n,r){e.on("create.end",500,function(i){var o=i.context,a=o.canExecute,s=o.elements,l=o.hints||{},u=l.autoSelect;if(a){if(u===!1)return;at(u)?t.select(u):t.select(s.filter(m6))}}),e.on("connect.end",500,function(i){var o=i.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(i){var o=i.previousSelection||[],a=r.get(i.context.shape.id),s=At(o,function(l){return a.id===l.id});s||t.select(a)}),e.on("element.click",function(i){if(Ma(i)){var o=i.element;o===n.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,l=wd(i);if(a&&s)return l?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,l)}})}NR.$inject=["eventBus","selection","canvas","elementRegistry"];function m6(e){return!e.hidden}const io={__init__:["selectionVisuals","selectionBehavior"],__depends__:[fh,c0],selection:["type",Ul],selectionVisuals:["type",u0],selectionBehavior:["type",NR]};function Na(e){Jt.call(this,e)}Oe(Na,Jt);Na.prototype._modules=[HO,i6,p6,uh,io,lh];Na.prototype._moddleExtensions={};var g6=["c","C"],y6=["v","V"],v6=["y","Y"],DR=["z","Z"];function x6(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Jr(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function An(e,t){return e=at(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function p0(e){return e.shiftKey}function _6(e){return Jr(e)&&An(g6,e)}function w6(e){return Jr(e)&&An(y6,e)}function E6(e){return Jr(e)&&!p0(e)&&An(DR,e)}function b6(e){return Jr(e)&&(An(v6,e)||An(DR,e)&&p0(e))}var dh="keyboard.keydown",S6="keyboard.keyup",$w="input-handle-modified-keys",C6=1e3;function Un(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Un.$inject=["config.keyboard","eventBus"];Un.prototype._keydownHandler=function(e){this._keyHandler(e,dh)};Un.prototype._keyupHandler=function(e){this._keyHandler(e,S6)};Un.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||dh,r),n&&e.preventDefault()}};Un.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(R6(e.target)||k6(e.target)&&An([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)};Un.prototype._isModifiedKeyIgnored=function(e){if(!Jr(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Un.prototype._getAllowedModifiers=function(e){var t=Ra(e,"["+$w+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute($w).split(",")};Un.prototype.bind=function(e){this.unbind(),this._node=e,ot.bind(e,"keydown",this._keydownHandler),ot.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Un.prototype.getBinding=function(){return this._node};Un.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),ot.unbind(e,"keydown",this._keydownHandler),ot.unbind(e,"keyup",this._keyupHandler)),this._node=null};Un.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Un.prototype.addListener=function(e,t,n){Rn(e)&&(n=t,t=e,e=C6),this._eventBus.on(n||dh,e,t)};Un.prototype.removeListener=function(e,t){this._eventBus.off(t||dh,e)};Un.prototype.hasModifier=x6;Un.prototype.isCmd=Jr;Un.prototype.isShift=p0;Un.prototype.isKey=An;function R6(e){return e&&(Qd(e,"input, textarea")||e.contentEditable==="true")}function k6(e){return e&&Qd(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var P6=500;function Gl(e,t){var n=this;e.on("editorActions.init",P6,function(r){var i=r.editorActions;n.registerBindings(t,i)})}Gl.$inject=["eventBus","keyboard"];Gl.prototype.registerBindings=function(e,t){function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("undo",function(r){var i=r.keyEvent;if(E6(i))return t.trigger("undo"),!0}),n("redo",function(r){var i=r.keyEvent;if(b6(i))return t.trigger("redo"),!0}),n("copy",function(r){var i=r.keyEvent;if(_6(i))return t.trigger("copy"),!0}),n("paste",function(r){var i=r.keyEvent;if(w6(i))return t.trigger("paste"),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(An(["+","Add","="],i)&&Jr(i))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(An(["-","Subtract"],i)&&Jr(i))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var i=r.keyEvent;if(An("0",i)&&Jr(i))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var i=r.keyEvent;if(An(["Backspace","Delete","Del"],i))return t.trigger("removeSelection"),!0})};const f0={__init__:["keyboard","keyboardBindings"],keyboard:["type",Un],keyboardBindings:["type",Gl]};var T6={moveSpeed:50,moveSpeedAccelerated:200};function OR(e,t,n){var r=this;this._config=q({},T6,e||{}),t.addListener(i);function i(o){var a=o.keyEvent,s=r._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var l=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,u;switch(a.key){case"ArrowLeft":case"Left":u="left";break;case"ArrowUp":case"Up":u="up";break;case"ArrowRight":case"Right":u="right";break;case"ArrowDown":case"Down":u="down";break}return r.moveCanvas({speed:l,direction:u}),!0}}this.moveCanvas=function(o){var a=0,s=0,l=o.speed,u=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":a=u;break;case"up":s=u;break;case"right":a=-u;break;case"down":s=-u;break}n.scroll({dx:a,dy:s})}}OR.$inject=["config.keyboardMove","keyboard","canvas"];const LR={__depends__:[f0],__init__:["keyboardMove"],keyboardMove:["type",OR]};var A6=/^djs-cursor-.*$/;function hh(e){var t=on(document.body);t.removeMatching(A6),e&&t.add("djs-cursor-"+e)}function BR(){hh(null)}var M6=5e3;function IR(e,t){t=t||"element.click";function n(){return!1}return e.once(t,M6,n),function(){e.off(t,n)}}function Uc(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function ji(e,t){return{x:e.x-t.x,y:e.y-t.y}}var N6=15;function jR(e,t){var n;e.on("element.mousedown",500,function(a){return o(a.originalEvent)});function r(a){var s=n.start,l=n.button,u=bs(a),f=ji(u,s);if(!n.dragging&&D6(f)>N6&&(n.dragging=!0,l===0&&IR(e),hh("grab")),n.dragging){var d=n.last||n.start;f=ji(u,d),t.scroll({dx:f.x,dy:f.y}),n.last=u}a.preventDefault()}function i(a){ot.unbind(document,"mousemove",r),ot.unbind(document,"mouseup",i),n=null,BR()}function o(a){if(!Ra(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:bs(a)},ot.bind(document,"mousemove",r),ot.bind(document,"mouseup",i),!0}}this.isActive=function(){return!!n}}jR.$inject=["eventBus","canvas"];function D6(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const $R={__init__:["moveCanvas"],moveCanvas:["type",jR]};function by(e){return Math.log(e)/Math.log(10)}function FR(e,t){var n=by(e.min),r=by(e.max),i=Math.abs(n)+Math.abs(r);return i/t}function O6(e,t){return Math.max(e.min,Math.min(e.max,t))}var L6=Math.sign||function(e){return e>=0?1:-1},d0={min:.2,max:4},zR=10,B6=.1,I6=.75;function oo(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=wr(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||I6;var r=this;t.on("canvas.init",function(i){r._init(e.enabled!==!1)})}oo.$inject=["config.zoomScroll","eventBus","canvas"];oo.prototype.scroll=function(t){this._canvas.scroll(t)};oo.prototype.reset=function(){this._canvas.zoom("fit-viewport")};oo.prototype.zoom=function(t,n){var r=FR(d0,zR*2);this._totalDelta+=t,Math.abs(this._totalDelta)>B6&&(this._zoom(t,n,r),this._totalDelta=0)};oo.prototype._handleWheel=function(t){if(!Ra(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var r=t.ctrlKey||TR()&&t.metaKey,i=t.shiftKey,o=-1*this._scale,a;if(r?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,r){var s=n.getBoundingClientRect(),l={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*L6(t.deltaY)*o,this.zoom(a,l)}else i?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}};oo.prototype.stepZoom=function(t,n){var r=FR(d0,zR);this._zoom(t,n,r)};oo.prototype._zoom=function(e,t,n){var r=this._canvas,i=e>0?1:-1,o=by(r.zoom()),a=Math.round(o/n)*n;a+=n*i;var s=Math.pow(10,a);r.zoom(O6(d0,s),t)};oo.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof t>"u"&&(t=!i),i!==t&&ot[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};oo.prototype._init=function(e){this.toggle(e)};const HR={__init__:["zoomScroll"],zoomScroll:["type",oo]};function gu(e){Na.call(this,e)}Oe(gu,Na);gu.prototype._navigationModules=[LR,$R,HR];gu.prototype._modules=[].concat(Na.prototype._modules,gu.prototype._navigationModules);function eg(e){return e&&e[e.length-1]}function Fw(e){return e.y}function zw(e){return e.x}var j6={left:zw,center:zw,right:function(e){return e.x+e.width},top:Fw,middle:Fw,bottom:function(e){return e.y+e.height}};function Kl(e,t){this._modeling=e,this._rules=t}Kl.$inject=["modeling","rules"];Kl.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",r="width";return t.indexOf(e)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};Kl.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Kl.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),r=n.axis,i=n.dimension,o={},a={},s=!1,l,u,f;function d(g,y){return Math.round((g[r]+y[r]+y[i])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][r];else if(this._isType(e,["right","bottom"]))f=eg(t),o[e]=f[r]+f[i];else if(this._isType(e,["center","middle"])){if(U(t,function(g){var y=g[r]+Math.round(g[i]/2);a[y]?a[y].elements.push(g):a[y]={elements:[g],center:y}}),l=no(a,function(g){return g.elements.length>1&&(s=!0),g.elements.length}),s)return o[e]=eg(l).center,o;u=t[0],t=no(t,function(g){return g[r]+g[i]}),f=eg(t),o[e]=d(u,f)}return o};Kl.prototype.trigger=function(e,t){var n=this._modeling,r,i=gt(e,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:i}),at(r)&&(i=r),!(i.length<2||!r)){var o=j6[t],a=no(i,o),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};const $6={__init__:["alignElements"],alignElements:["type",Kl]},F6=new Ou;function Yl(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}Yl.$inject=["eventBus"];Yl.prototype.schedule=function(e,t=F6.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};Yl.prototype._schedule=function(e,t){const{promise:n,resolve:r,reject:i}=z6();return{executionId:requestAnimationFrame(()=>{try{r(e())}catch(a){i(a)}}),promise:n}};Yl.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};Yl.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function z6(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}const H6={scheduler:["type",Yl]};var V6="djs-element-hidden",Qp=".entry",W6=1e3,Hw=8,U6=300;function xn(e,t,n,r){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=r,this._current=null,this._init()}xn.$inject=["canvas","elementRegistry","eventBus","scheduler"];xn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,r=n.length?n.length===1?n[0]:n:null;r?e.open(r,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,r=e._current;if(r){var i=r.target,o=at(i)?i:[i],a=o.filter(function(l){return n.includes(l)});if(a.length){e.close();var s=o.filter(function(l){return e._elementRegistry.get(l.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,r=e._current,i=at(r.target)?r.target:[r.target];i.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};xn.prototype._createContainer=function(){var e=zt('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};xn.prototype.registerProvider=function(e,t){t||(t=e,e=W6),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};xn.prototype.getEntries=function(e){var t=this._getProviders(),n=at(e)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return U(t,function(i){if(Rn(i[n])){var o=i[n](e);Rn(o)?r=o(r):U(o,function(a,s){r[s]=a})}}),r};xn.prototype.trigger=function(e,t,n){var r=this,i,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(i=ur(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",o,n)},U6);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,e,o,n)};xn.prototype.triggerEntry=function(e,t,n,r){if(this.isShown()){var i=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(Rn(s)){if(t==="click")return s(n,i,r)}else if(s[t])return s[t](n,i,r);n.preventDefault()}}}};xn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};xn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};xn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),r;U(t,function(i,o){var a=i.group||"default",s=zt(i.html||'<div class="entry" draggable="true"></div>'),l;ur(s,"data-action",o),l=Bt("[data-group="+hu(a)+"]",n),l||(l=zt('<div class="group"></div>'),ur(l,"data-group",a),n.appendChild(l)),l.appendChild(s),i.className&&G6(s,i.className),i.title&&ur(s,"title",i.title),i.imageUrl&&(r=zt("<img>"),ur(r,"src",i.imageUrl),r.style.width="100%",r.style.height="100%",s.appendChild(r))}),on(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};xn.prototype._createHtml=function(e){var t=this,n=zt('<div class="djs-context-pad"></div>');return Or.bind(n,Qp,"click",function(r){t.trigger("click",r)}),Or.bind(n,Qp,"dragstart",function(r){t.trigger("dragstart",r)}),Or.bind(n,Qp,"mouseover",function(r){t.trigger("mouseover",r)}),Or.bind(n,Qp,"mouseout",function(r){t.trigger("mouseout",r)}),ot.bind(n,"mousedown",function(r){r.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};xn.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&Y6(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};xn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};xn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return at(e)!==at(n)?!1:at(e)?e.length===n.length&&Rs(e,function(r){return n.includes(r)}):n===e};xn.prototype.isShown=function(){return this.isOpen()&&on(this._current.html).has("open")};xn.prototype.show=function(){this.isOpen()&&(on(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};xn.prototype.hide=function(){this.isOpen()&&(on(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};xn.prototype._getPosition=function(e){if(!at(e)&&jt(e)){var t=this._canvas.viewbox(),n=K6(e),r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale;return{left:r+Hw*this._canvas.zoom(),top:i}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+Hw*this._canvas.zoom(),top:s.top-a.top}};xn.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(r){r in n&&(t.style[r]=n[r]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};xn.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,r=at(n)?n:[n],i=r.some(function(o){return t._canvas.hasMarker(o,V6)});i?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};xn.prototype._getTargetBounds=function(e){var t=this,n=at(e)?e:[e],r=n.map(function(i){return t._canvas.getGraphics(i)});return r.reduce(function(i,o){const a=o.getBoundingClientRect();return i.top=Math.min(i.top,a.top),i.right=Math.max(i.right,a.right),i.bottom=Math.max(i.bottom,a.bottom),i.left=Math.min(i.left,a.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function G6(e,t){var n=on(e);t=at(t)?t:t.split(/\s+/g),t.forEach(function(r){n.add(r)})}function K6(e){return e.waypoints[e.waypoints.length-1]}function Y6(e,t){return e=at(e)?e:[e],t=at(t)?t:[t],e.length===t.length&&Rs(e,function(n){return t.includes(n)})}const VR={__depends__:[fh,H6,uh],contextPad:["type",xn]};var mh,Qt,WR,as,Vw,UR,GR,KR,h0,Sy,Cy,yu={},YR=[],q6=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,gh=Array.isArray;function Eo(e,t){for(var n in t)e[n]=t[n];return e}function m0(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function qR(e,t,n){var r,i,o,a={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?mh.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return Bf(e,a,r,i,null)}function Bf(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++WR,__i:-1,__u:0};return i==null&&Qt.vnode!=null&&Qt.vnode(o),o}function yh(e){return e.children}function If(e,t){this.props=e,this.context=t}function Tl(e,t){if(t==null)return e.__?Tl(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Tl(e):null}function XR(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return XR(e)}}function Ww(e){(!e.__d&&(e.__d=!0)&&as.push(e)&&!Ed.__r++||Vw!=Qt.debounceRendering)&&((Vw=Qt.debounceRendering)||UR)(Ed)}function Ed(){for(var e,t,n,r,i,o,a,s=1;as.length;)as.length>s&&as.sort(GR),e=as.shift(),s=as.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,o=[],a=[],t.__P&&((n=Eo({},r)).__v=r.__v+1,Qt.vnode&&Qt.vnode(n),g0(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,o,i??Tl(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,JR(o,n,a),r.__e=r.__=null,n.__e!=i&&XR(n)));Ed.__r=0}function QR(e,t,n,r,i,o,a,s,l,u,f){var d,g,y,v,x,C,P,k=r&&r.__k||YR,w=t.length;for(l=X6(n,t,k,l,w),d=0;d<w;d++)(y=n.__k[d])!=null&&(g=y.__i==-1?yu:k[y.__i]||yu,y.__i=d,C=g0(e,y,g,i,o,a,s,l,u,f),v=y.__e,y.ref&&g.ref!=y.ref&&(g.ref&&y0(g.ref,null,y),f.push(y.ref,y.__c||v,y)),x==null&&v!=null&&(x=v),(P=!!(4&y.__u))||g.__k===y.__k?l=ZR(y,l,e,P):typeof y.type=="function"&&C!==void 0?l=C:v&&(l=v.nextSibling),y.__u&=-7);return n.__e=x,l}function X6(e,t,n,r,i){var o,a,s,l,u,f=n.length,d=f,g=0;for(e.__k=new Array(i),o=0;o<i;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[o]=Bf(null,a,null,null,null):gh(a)?a=e.__k[o]=Bf(yh,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=e.__k[o]=Bf(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[o]=a,l=o+g,a.__=e,a.__b=e.__b+1,(u=a.__i=Q6(a,n,l,d))!=-1&&(d--,(s=n[u])&&(s.__u|=2)),s==null||s.__v==null?(u==-1&&(i>f?g--:i<f&&g++),typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?g--:u==l+1?g++:(u>l?g--:g++,a.__u|=4))):e.__k[o]=null;if(d)for(o=0;o<f;o++)(s=n[o])!=null&&!(2&s.__u)&&(s.__e==r&&(r=Tl(s)),tk(s,s));return r}function ZR(e,t,n,r){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=ZR(i[o],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=Tl(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Q6(e,t,n,r){var i,o,a,s=e.key,l=e.type,u=t[n],f=u!=null&&(2&u.__u)==0;if(u===null&&s==null||f&&s==u.key&&l==u.type)return n;if(r>(f?1:0)){for(i=n-1,o=n+1;i>=0||o<t.length;)if((u=t[a=i>=0?i--:o++])!=null&&!(2&u.__u)&&s==u.key&&l==u.type)return a}return-1}function Uw(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||q6.test(t)?n:n+"px"}function Zp(e,t,n,r,i){var o,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Uw(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||Uw(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(KR,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=h0,e.addEventListener(t,o?Cy:Sy,o)):e.removeEventListener(t,o?Cy:Sy,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Gw(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=h0++;else if(t.t<n.u)return;return n(Qt.event?Qt.event(t):t)}}}function g0(e,t,n,r,i,o,a,s,l,u){var f,d,g,y,v,x,C,P,k,w,b,D,I,H,L,X,Y,K=t.type;if(t.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(f=Qt.__b)&&f(t);e:if(typeof K=="function")try{if(P=t.props,k="prototype"in K&&K.prototype.render,w=(f=K.contextType)&&r[f.__c],b=f?w?w.props.value:f.__:r,n.__c?C=(d=t.__c=n.__c).__=d.__E:(k?t.__c=d=new K(P,b):(t.__c=d=new If(P,b),d.constructor=K,d.render=J6),w&&w.sub(d),d.state||(d.state={}),d.__n=r,g=d.__d=!0,d.__h=[],d._sb=[]),k&&d.__s==null&&(d.__s=d.state),k&&K.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Eo({},d.__s)),Eo(d.__s,K.getDerivedStateFromProps(P,d.__s))),y=d.props,v=d.state,d.__v=t,g)k&&K.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),k&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(k&&K.getDerivedStateFromProps==null&&P!==y&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(P,b),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(P,d.__s,b)===!1){for(t.__v!=n.__v&&(d.props=P,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(se){se&&(se.__=t)}),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(P,d.__s,b),k&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(y,v,x)})}if(d.context=b,d.props=P,d.__P=e,d.__e=!1,I=Qt.__r,H=0,k){for(d.state=d.__s,d.__d=!1,I&&I(t),f=d.render(d.props,d.state,d.context),L=0;L<d._sb.length;L++)d.__h.push(d._sb[L]);d._sb=[]}else do d.__d=!1,I&&I(t),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++H<25);d.state=d.__s,d.getChildContext!=null&&(r=Eo(Eo({},r),d.getChildContext())),k&&!g&&d.getSnapshotBeforeUpdate!=null&&(x=d.getSnapshotBeforeUpdate(y,v)),X=f,f!=null&&f.type===yh&&f.key==null&&(X=ek(f.props.children)),s=QR(e,gh(X)?X:[X],t,n,r,i,o,a,s,l,u),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),C&&(d.__E=d.__=null)}catch(se){if(t.__v=null,l||o!=null)if(se.then){for(t.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else{for(Y=o.length;Y--;)m0(o[Y]);Ry(t)}else t.__e=n.__e,t.__k=n.__k,se.then||Ry(t);Qt.__e(se,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=Z6(n.__e,t,n,r,i,o,a,l,u);return(f=Qt.diffed)&&f(t),128&t.__u?void 0:s}function Ry(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ry)}function JR(e,t,n){for(var r=0;r<n.length;r++)y0(n[r],n[++r],n[++r]);Qt.__c&&Qt.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){Qt.__e(o,i.__v)}})}function ek(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:gh(e)?e.map(ek):Eo({},e)}function Z6(e,t,n,r,i,o,a,s,l){var u,f,d,g,y,v,x,C=n.props||yu,P=t.props,k=t.type;if(k=="svg"?i="http://www.w3.org/2000/svg":k=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((y=o[u])&&"setAttribute"in y==!!k&&(k?y.localName==k:y.nodeType==3)){e=y,o[u]=null;break}}if(e==null){if(k==null)return document.createTextNode(P);e=document.createElementNS(i,k,P.is&&P),s&&(Qt.__m&&Qt.__m(t,o),s=!1),o=null}if(k==null)C===P||s&&e.data==P||(e.data=P);else{if(o=o&&mh.call(e.childNodes),!s&&o!=null)for(C={},u=0;u<e.attributes.length;u++)C[(y=e.attributes[u]).name]=y.value;for(u in C)if(y=C[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=y;else if(!(u in P)){if(u=="value"&&"defaultValue"in P||u=="checked"&&"defaultChecked"in P)continue;Zp(e,u,null,y,i)}}for(u in P)y=P[u],u=="children"?g=y:u=="dangerouslySetInnerHTML"?f=y:u=="value"?v=y:u=="checked"?x=y:s&&typeof y!="function"||C[u]===y||Zp(e,u,y,C[u],i);if(f)s||d&&(f.__html==d.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(d&&(e.innerHTML=""),QR(t.type=="template"?e.content:e,gh(g)?g:[g],t,n,r,k=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&Tl(n,0),s,l),o!=null)for(u=o.length;u--;)m0(o[u]);s||(u="value",k=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[u]||k=="progress"&&!v||k=="option"&&v!=C[u])&&Zp(e,u,v,C[u],i),u="checked",x!=null&&x!=e[u]&&Zp(e,u,x,C[u],i))}return e}function y0(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){Qt.__e(i,n)}}function tk(e,t,n){var r,i;if(Qt.unmount&&Qt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||y0(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Qt.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&tk(r[i],t,n||typeof e.type!="function");n||m0(e.__e),e.__c=e.__=e.__e=void 0}function J6(e,t,n){return this.constructor(e,n)}function nk(e,t,n){var r,i,o,a;t==document&&(t=document.documentElement),Qt.__&&Qt.__(e,t),i=(r=!1)?null:t.__k,o=[],a=[],g0(t,e=t.__k=qR(yh,null,[e]),i||yu,yu,t.namespaceURI,i?null:t.firstChild?mh.call(t.childNodes):null,o,i?i.__e:t.firstChild,r,a),JR(o,e,a)}mh=YR.slice,Qt={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(s){e=s}throw e}},WR=0,If.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Eo({},this.state),typeof e=="function"&&(e=e(Eo({},n),this.props)),e&&Eo(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ww(this))},If.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ww(this))},If.prototype.render=yh,as=[],UR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,GR=function(e,t){return e.__v.__b-t.__v.__b},Ed.__r=0,KR=/(PointerCapture)$|Capture$/i,h0=0,Sy=Gw(!1),Cy=Gw(!0);var rk=function(e,t,n,r){var i;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];a===3?r[0]=s:a===4?r[1]=Object.assign(r[1]||{},s):a===5?(r[1]=r[1]||{})[t[++o]]=s:a===6?r[1][t[++o]]+=s+"":a?(i=e.apply(s,rk(e,s,n,["",null])),r.push(i),s[0]?t[0]|=2:(t[o-2]=0,t[o]=i)):r.push(s)}return r},Kw=new Map;function eL(e){var t=Kw.get(this);return t||(t=new Map,Kw.set(this,t)),(t=rk(this,t.get(e)||(t.set(e,t=function(n){for(var r,i,o=1,a="",s="",l=[0],u=function(g){o===1&&(g||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,g,a):o===3&&(g||a)?(l.push(3,g,a),o=2):o===2&&a==="..."&&g?l.push(4,g,0):o===2&&a&&!g?l.push(5,0,!0,a):o>=5&&((a||!g&&o===5)&&(l.push(o,0,a,i),o=6),g&&(l.push(o,g,0,i),o=6)),a=""},f=0;f<n.length;f++){f&&(o===1&&u(),u(f));for(var d=0;d<n[f].length;d++)r=n[f][d],o===1?r==="<"?(u(),l=[l],o=3):a+=r:o===4?a==="--"&&r===">"?(o=1,a=""):a=r+a[0]:s?r===s?s="":a+=r:r==='"'||r==="'"?s=r:r===">"?(u(),o=1):o&&(r==="="?(o=5,i=a,a=""):r==="/"&&(o<5||n[f][d+1]===">")?(u(),o===3&&(l=l[0]),o=l,(l=l[0]).push(2,0,o),o=0):r===" "||r==="	"||r===`
`||r==="\r"?(u(),o=2):a+=r),o===3&&a==="!--"&&(o=4,l=l[0])}return u(),l}(e)),t),arguments,[])).length>1?t:t[0]}var ln=eL.bind(qR),Al,mn,tg,Yw,vu=0,ik=[],En=Qt,qw=En.__b,Xw=En.__r,Qw=En.diffed,Zw=En.__c,Jw=En.unmount,eE=En.__;function vh(e,t){En.__h&&En.__h(mn,e,vu||t),vu=0;var n=mn.__H||(mn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ng(e){return vu=1,tL(ak,e)}function tL(e,t,n){var r=vh(Al++,2);if(r.t=e,!r.__c&&(r.__=[ak(void 0,t),function(s){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,s);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=mn,!mn.__f)){var i=function(s,l,u){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!o||o.call(this,s,l,u);var d=r.__c.props!==s;return f.forEach(function(g){if(g.__N){var y=g.__[0];g.__=g.__N,g.__N=void 0,y!==g.__[0]&&(d=!0)}}),o&&o.call(this,s,l,u)||d};mn.__f=!0;var o=mn.shouldComponentUpdate,a=mn.componentWillUpdate;mn.componentWillUpdate=function(s,l,u){if(this.__e){var f=o;o=void 0,i(s,l,u),o=f}a&&a.call(this,s,l,u)},mn.shouldComponentUpdate=i}return r.__N||r.__}function ky(e,t){var n=vh(Al++,3);!En.__s&&v0(n.__H,t)&&(n.__=e,n.u=t,mn.__H.__h.push(n))}function Py(e,t){var n=vh(Al++,4);!En.__s&&v0(n.__H,t)&&(n.__=e,n.u=t,mn.__h.push(n))}function ok(e){return vu=5,Ml(function(){return{current:e}},[])}function Ml(e,t){var n=vh(Al++,7);return v0(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function xc(e,t){return vu=8,Ml(function(){return e},t)}function nL(){for(var e;e=ik.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(jf),e.__H.__h.forEach(Ty),e.__H.__h=[]}catch(t){e.__H.__h=[],En.__e(t,e.__v)}}En.__b=function(e){mn=null,qw&&qw(e)},En.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),eE&&eE(e,t)},En.__r=function(e){Xw&&Xw(e),Al=0;var t=(mn=e.__c).__H;t&&(tg===mn?(t.__h=[],mn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(jf),t.__h.forEach(Ty),t.__h=[],Al=0)),tg=mn},En.diffed=function(e){Qw&&Qw(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ik.push(t)!==1&&Yw===En.requestAnimationFrame||((Yw=En.requestAnimationFrame)||rL)(nL)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),tg=mn=null},En.__c=function(e,t){t.some(function(n){try{n.__h.forEach(jf),n.__h=n.__h.filter(function(r){return!r.__||Ty(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],En.__e(r,n.__v)}}),Zw&&Zw(e,t)},En.unmount=function(e){Jw&&Jw(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{jf(r)}catch(i){t=i}}),n.__H=void 0,t&&En.__e(t,n.__v))};var tE=typeof requestAnimationFrame=="function";function rL(e){var t,n=function(){clearTimeout(r),tE&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);tE&&(t=requestAnimationFrame(n))}function jf(e){var t=mn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),mn=t}function Ty(e){var t=mn;e.__c=e.__(),mn=t}function v0(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ak(e,t){return typeof t=="function"?t(e):t}function sk(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=sk(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function bd(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=sk(e))&&(r&&(r+=" "),r+=t);return r}function iL(e){const{headerEntries:t,onSelect:n,selectedEntry:r,setSelectedEntry:i,title:o}=e,a=Ml(()=>oL(t),[t]);return ln`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>ln`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(l=>ln`
            <li key=${l.id}>
              <${l.action?"button":"span"}
                class=${aL(l,l===r)}
                onClick=${u=>l.action&&n(u,l)}
                title=${l.title||l.label}
                data-id=${l.id}
                onMouseEnter=${()=>l.action&&i(l)}
                onMouseLeave=${()=>l.action&&i(null)}
                onFocus=${()=>l.action&&i(l)}
                onBlur=${()=>l.action&&i(null)}
              >
                ${l.imageUrl&&ln`<img class="djs-popup-entry-icon" src=${l.imageUrl} alt="" />`||l.imageHtml&&ln`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:l.imageHtml}} />`}
                ${l.label?ln`
                  <span class="djs-popup-label">${l.label}</span>
                `:null}
              </${l.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function oL(e){return e.reduce((t,n)=>{const r=n.group||"default",i=t.find(o=>o.id===r);return i?i.entries.push(n):t.push({id:r,entries:[n]}),t},[])}function aL(e,t){return bd("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function sL(e){const{entry:t,selected:n,onMouseEnter:r,onMouseLeave:i,onAction:o}=e;return ln`
    <li
      class=${bd("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${r}
      onBlur=${i}
      onMouseEnter=${r}
      onMouseLeave=${i}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${bd("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&ln`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&ln`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?ln`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&ln`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&ln`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function lL(e){const{selectedEntry:t,setSelectedEntry:n,entries:r,...i}=e,o=ok(),a=Ml(()=>cL(r),[r]);return Py(()=>{const s=o.current;if(!s)return;const l=s.querySelector(".selected");l&&uL(l)},[t]),ln`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(s=>ln`
        ${s.name&&ln`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(l=>ln`
            <${sL}
              key=${l.id}
              entry=${l}
              selected=${l===t}
              onMouseEnter=${()=>n(l)}
              onMouseLeave=${()=>n(null)}
              ...${i}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function cL(e){const t=[],n=o=>t.find(a=>o.id===a.id),r=o=>!!n(o),i=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const a=o.group?i(o.group):{id:"default"};r(a)?n(a).entries.push(o):t.push({...a,entries:[o]})}),t}function uL(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function pL(e){const{onClose:t,onSelect:n,className:r,headerEntries:i,position:o,title:a,width:s,scale:l,search:u,emptyPlaceholder:f,entries:d,onOpened:g,onClosed:y}=e,v=Ml(()=>Bn(u)?d.length>5:!1,[u,d]),[x,C]=ng(""),P=xc((K,se)=>{if(!v)return K;const ae=Re=>{if(!se)return(Re.rank||0)>=0;if(Re.searchable===!1)return!1;const wt=[Re.description||"",Re.label||"",Re.search||""].map(Ge=>Ge.toLowerCase());return se.toLowerCase().split(/\s/g).every(Ge=>wt.some(Ke=>Ke.includes(Ge)))};return K.filter(ae)},[v]),[k,w]=ng(P(d,x)),[b,D]=ng(k[0]),I=xc(K=>{(!b||!K.includes(b))&&D(K[0]),w(K)},[b,w,D]);ky(()=>{I(P(d,x))},[x,d]);const H=xc(K=>{let ae=k.indexOf(b)+K;ae<0&&(ae=k.length-1),ae>=k.length&&(ae=0),D(k[ae])},[k,b,D]),L=xc(K=>{if(K.key==="Enter"&&b)return n(K,b);if(K.key==="ArrowUp")return H(-1),K.preventDefault();if(K.key==="ArrowDown")return H(1),K.preventDefault()},[n,b,H]),X=xc(K=>{Qd(K.target,"input")&&C(()=>K.target.value)},[C]);ky(()=>(g(),()=>{y()}),[]);const Y=Ml(()=>a||i.length>0,[a,i]);return ln`
    <${nE}
      onClose=${t}
      onKeyup=${X}
      onKeydown=${L}
      className=${r}
      position=${o}
      width=${s}
      scale=${l}
    >
      ${Y&&ln`
        <${iL}
          headerEntries=${i}
          onSelect=${n}
          selectedEntry=${b}
          setSelectedEntry=${D}
          title=${a}
        />
      `}
      ${d.length>0&&ln`
        <div class="djs-popup-body">

          ${v&&ln`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${lL}
            entries=${k}
            selectedEntry=${b}
            setSelectedEntry=${D}
            onAction=${n}
          />
        </div>
      `}
    ${f&&k.length===0&&ln`
      <div class="djs-popup-no-results">${Rn(f)?f(x):f}</div>
    `}
    </${nE}>
  `}function nE(e){const{onClose:t,onKeydown:n,onKeyup:r,className:i,children:o,position:a}=e,s=ok();return Py(()=>{if(typeof a!="function")return;const l=s.current,u=a(l);l.style.left=`${u.x}px`,l.style.top=`${u.y}px`},[s.current,a]),Py(()=>{const l=s.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),ky(()=>{const l=f=>{if(f.key==="Escape")return f.preventDefault(),t()},u=f=>{if(!Ra(f.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",u),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",u)}},[]),ln`
    <div
      class=${bd("djs-popup",i)}
      style=${fL(e)}
      onKeydown=${n}
      onKeyup=${r}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function fL(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var dL="data-id",lk=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],hL=1e3;function en(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var r=Bn(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",i=>{const o=this.isOpen()&&this._current.target;i.element===o&&this.refresh()})}en.$inject=["config.popupMenu","eventBus","canvas"];en.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:r,emptyPlaceholder:i,options:o}=this._current,a=Object.entries(n).map(([g,y])=>({id:g,...y})),s=Object.entries(r).map(([g,y])=>({id:g,...y})),l=e&&(g=>this._ensureVisible(g,e)),u=this._updateScale(this._current.container);nk(ln`
      <${pL}
        onClose=${g=>this.close(g)}
        onSelect=${(g,y,v)=>this.trigger(g,y,v)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${i}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};en.prototype.open=function(e,t,n,r){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:i,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};en.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:r,emptyPlaceholder:i}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:r,emptyPlaceholder:i},this._emit("refresh"),this._render()};en.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const r=this._getEntries(e,n),i=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:r,headerEntries:i,emptyPlaceholder:o,empty:!(Object.keys(r).length||Object.keys(i).length)}};en.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};en.prototype.reset=function(){const e=this._current.container;nk(null,e),ro(e)};en.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};en.prototype._onOpened=function(){this._emit("opened")};en.prototype._onClosed=function(){this._emit("closed")};en.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const r=zt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r};en.prototype._bindAutoClose=function(){this._eventBus.once(lk,this.close,this)};en.prototype._unbindAutoClose=function(){this._eventBus.off(lk,this.close,this)};en.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,r,i=e;return t!==!0&&(t===!1?(n=1,r=1):(n=t.min,r=t.max),Bn(n)&&e<n&&(i=n),Bn(r)&&e>r&&(i=r)),i};en.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),i={},o=t.x,a=t.y;return t.x+r.width>n.width&&(i.x=!0),t.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(o=t.x-r.width,a=t.y-r.height):i.x?(o=t.x-r.width,a=t.y):i.y&&t.y<r.height?(o=t.x,a=10):i.y&&(o=t.x,a=t.y-r.height),t.y<n.top&&(a=t.y+r.height),{x:o,y:a}};en.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};en.prototype.registerProvider=function(e,t,n){n||(n=t,t=hL),this._eventBus.on("popupMenu.getProviders."+e,t,function(r){r.providers.push(n)})};en.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};en.prototype._getEntries=function(e,t){var n={};return U(t,function(r){if(!r.getPopupMenuEntries){U(r.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=wi(o,["id"])});return}var i=r.getPopupMenuEntries(e);Rn(i)?n=i(n):U(i,function(o,a){n[a]=o})}),n};en.prototype._getHeaderEntries=function(e,t){var n={};return U(t,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;U(r.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=wi(o,["id"])});return}var i=r.getPopupMenuHeaderEntries(e);Rn(i)?n=i(n):U(i,function(o,a){n[a]=o})}),n};en.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>Rn(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};en.prototype.isOpen=function(){return!!this._current};en.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let i=Ra(e.delegateTarget||e.target,".entry",!0),o=ur(i,dL);t={id:o,...this._getEntry(o)}}const r=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(Rn(r)){if(n==="click")return r(e,t)}else if(r[n])return r[n](e,t)}};en.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const x0={__init__:["popupMenu"],popupMenu:["type",en]};var ck={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},mL=900;function ql(e,t,n,r){e.registerProvider(mL,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=r}ql.$inject=["contextPad","popupMenu","translate","canvas"];ql.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};ql.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};ql.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${ck.align}</div>`,action:{click:function(t,n){var r=e._getMenuPosition(n);q(r,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",r)}}}}};ql.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,r=n.getBoundingClientRect(),i={x:r.left,y:r.bottom+t};return i};var gL=["left","center","right","top","middle","bottom"];function Lu(e,t,n,r){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",this)}Lu.$inject=["popupMenu","alignElements","translate","rules"];Lu.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Lu.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Lu.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,r=this._popupMenu,i={};return U(gL,function(o){i["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:ck[o],action:function(){t.trigger(e,o),r.close()}}}),i};function Si(e){ue.call(this,e),this.init()}Si.$inject=["eventBus"];Oe(Si,ue);Si.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(i){r.canExecute(i,t,function(o,a,s){return n(o)},!0)})};Si.prototype.init=function(){};function xh(e){Si.call(this,e)}xh.$inject=["eventBus"];Oe(xh,Si);xh.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=gt(t,function(r){return!(r.waypoints||r.host||r.labelTarget)});return n=eh(n),n.length<2?!1:n})};const yL={__depends__:[$6,VR,x0],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",ql],alignElementsMenuProvider:["type",Lu],bpmnAlignElements:["type",xh]};var vL=10,uk=50,xL=250;function _0(e,t,n,r){for(var i;i=_L(e,n,t);)n=r(t,n,i);return n}function w0(e){return function(t,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",l=a.margin,u=a.minDistance;l<0?i[o]=Math.min(r[o]+l-t[s]/2,n[o]-u+l):i[o]=Math.max(r[o]+r[s]+l+t[s]/2,n[o]+u+l)}}),i}}function _L(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},i=EL(e);return At(i,function(o){if(o===n)return!1;var a=rr(o,r,vL);return a==="intersect"})}function wL(e,t){t||(t={});function n(v){return v.source===e?1:-1}var r=t.defaultDistance||uk,i=t.direction||"e",o=t.filter,a=t.getWeight||n,s=t.maxDistance||xL,l=t.reference||"start";o||(o=CL);function u(v,x){return i==="n"?l==="start"?Ue(v).top-Ue(x).bottom:l==="center"?Ue(v).top-Je(x).y:Ue(v).top-Ue(x).top:i==="w"?l==="start"?Ue(v).left-Ue(x).right:l==="center"?Ue(v).left-Je(x).x:Ue(v).left-Ue(x).left:i==="s"?l==="start"?Ue(x).top-Ue(v).bottom:l==="center"?Je(x).y-Ue(v).bottom:Ue(x).bottom-Ue(v).bottom:l==="start"?Ue(x).left-Ue(v).right:l==="center"?Je(x).x-Ue(v).right:Ue(x).right-Ue(v).right}var f=e.incoming.filter(o).map(function(v){var x=a(v),C=x<0?u(v.source,e):u(e,v.source);return{id:v.source.id,distance:C,weight:x}}),d=e.outgoing.filter(o).map(function(v){var x=a(v),C=x>0?u(e,v.target):u(v.target,e);return{id:v.target.id,distance:C,weight:x}}),g=f.concat(d).reduce(function(v,x){return v[x.id+"__weight_"+x.weight]=x,v},{}),y=$r(g,function(v,x){var C=x.distance,P=x.weight;return C<0||C>s||(v[String(C)]||(v[String(C)]=0),v[String(C)]+=1*P,(!v.distance||v[v.distance]<v[String(C)])&&(v.distance=C)),v},{});return y.distance||r}function EL(e){var t=rg(e);return e.host&&(t=t.concat(rg(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,r){return n.concat(rg(r))},[]))),t}function rg(e){return SL(e).concat(bL(e))}function bL(e){return e.incoming.map(function(t){return t.source})}function SL(e){return e.outgoing.map(function(t){return t.target})}function CL(){return!0}var RL=100;function pk(e,t,n){e.on("autoPlace",RL,function(r){var i=r.shape,o=r.source;return kL(o,i)}),e.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,i,o){e.fire("autoPlace.start",{source:r,shape:i});var a=e.fire("autoPlace",{source:r,shape:i}),s=t.appendShape(r,i,a,r.parent,o);return e.fire("autoPlace.end",{source:r,shape:s}),s}}pk.$inject=["eventBus","modeling","canvas"];function kL(e,t,n){n||(n={});var r=n.defaultDistance||uk,i=Je(e),o=Ue(e);return{x:o.right+r+t.width/2,y:i.y}}function fk(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}fk.$inject=["eventBus","selection"];const PL={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",pk],autoPlaceSelectionBehavior:["type",fk]};function Nl(e,t){for(jr(t)&&(t=[t]);e=e.parent;)if(ht(e,t))return e;return null}function dk(e,t){var n=Nl(e,"bpmn:Process");if(n)return!0;var r=["bpmn:Participant","bpmn:Lane"];if(n=Nl(e,r),n)return Dn(n);if(ht(e,r))return Dn(e);var i;for(i=fe(e);i&&!A(i,"bpmn:Process");i=i.$parent);if(!t)return!0;var o=t.find(function(a){var s=fe(a);return s&&s.get("processRef")===i});return o?Dn(o):!0}function hk(e,t,n){var r=dk(e,n);if(A(t,"bpmn:TextAnnotation"))return AL(e,t,r);if(ht(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return ML(e,t,r);if(A(t,"bpmn:FlowNode"))return TL(e,t,r)}function TL(e,t,n){var r=Ue(e),i=Je(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=wL(e,{filter:function(y){return A(y,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,l=o.minDistance,u=o.baseOrientation;A(e,"bpmn:BoundaryEvent")&&(u=rr(e,e.host,-25),u.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var f=n?{x:r.right+a+t.width/2,y:i.y+rE(u,l,o)}:{x:i.x+rE(u,l,o),y:r.bottom+a+t.height/2},d={margin:s,minDistance:l},g=n?{y:d}:{x:d};return _0(e,t,f,w0(g))}function rE(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function AL(e,t,n){var r=Ue(e),i=n?{x:r.right+t.width/2,y:r.top-50-t.height/2}:{x:r.right+50+t.width/2,y:r.bottom+t.height/2};jt(e)&&(i=Je(e),n?(i.x+=100,i.y-=50):(i.x+=100,i.y+=50));var o={margin:n?-30:30,minDistance:20},a=n?{y:o}:{x:o};return _0(e,t,i,w0(a))}function ML(e,t,n){var r=Ue(e),i=n?{x:r.right-10+t.width/2,y:r.bottom+40+t.width/2}:{x:r.left-40-t.width/2,y:r.bottom-10+t.height/2},o={margin:30,minDistance:30},a=n?{x:o}:{y:o};return _0(e,t,i,w0(a))}function mk(e,t){e.on("autoPlace",function(n){var r=n.shape,i=n.source;return hk(i,r,t)})}mk.$inject=["eventBus","elementRegistry"];const E0={__depends__:[PL],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",mk]};function Bo(e,t,n,r){ue.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},l=a.shape,u=a.parent||a.newParent;s.autoResize!==!1&&i._expand([l],u)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=Hv(Vv(a.closure.topLevel)),l=a.hints,u=l?l.autoResize:!0;if(u!==!1){var f=Fl(s,function(d){return d.parent.id});U(f,function(d,g){at(u)&&(d=d.filter(function(y){return At(u,Ii({id:y.id}))})),i._expand(d,g)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,l=a.shape;s&&s.autoResize===!1||l.collapsed||i._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,l=a.shape,u=l.parent;s&&s.autoResize===!1||u&&i._expand([l],u)})}Bo.$inject=["eventBus","elementRegistry","modeling","rules"];Oe(Bo,ue);Bo.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),r=this.getPadding(t),i=Ue(Nn(e)),o=Ue(t),a={};return i.top-o.top<r.top&&(a.top=i.top-n.top),i.left-o.left<r.left&&(a.left=i.left-n.left),o.right-i.right<r.right&&(a.right=i.right+n.right),o.bottom-i.bottom<r.bottom&&(a.bottom=i.bottom+n.bottom),th(q({},o,a))};Bo.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var r=this._getOptimalBounds(e,t);if(NL(r,t)){var i=DL(Fi(t,["x","y","width","height"]),r);this.resize(t,r,{autoResize:i});var o=t.parent;o&&this._expand([t],o)}}};Bo.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Bo.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Bo.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function NL(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function DL(e,t){var n="";return e=Ue(e),t=Ue(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function _h(e){e.invoke(Bo,this)}_h.$inject=["injector"];Oe(_h,Bo);_h.prototype.resize=function(e,t,n){A(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function Bu(e){Si.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}Bu.$inject=["eventBus"];Oe(Bu,Si);Bu.prototype.canResize=function(e,t){return!1};function wh(e,t){Bu.call(this,e),this._modeling=t}Oe(wh,Bu);wh.$inject=["eventBus","modeling"];wh.prototype.canResize=function(e,t){if(A(t.di,"bpmndi:BPMNPlane")||!A(t,"bpmn:Participant")&&!A(t,"bpmn:Lane")&&!A(t,"bpmn:SubProcess"))return!1;var n=!0;return U(e,function(r){if(A(r,"bpmn:Lane")||kt(r)){n=!1;return}}),n};const OL={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",_h],bpmnAutoResizeProvider:["type",wh]};var iE=1500;function gk(e,t,n){var r=this,i=n.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,l=r._findTargetGfx(s),u=l&&e.get(l);l&&u&&(a.stopPropagation(),i.hover({element:u,gfx:l}),i.move(s))}}i&&t.on("drag.start",function(a){t.once("drag.move",iE,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(l){a=l.gfx,s=l.element}),t.on("element.hover",iE,function(l){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,l;if(a instanceof MouseEvent)return s=bs(a),l=document.elementFromPoint(s.x,s.y),LL(l)}}gk.$inject=["elementRegistry","eventBus","injector"];function LL(e){return Ra(e,"svg, .djs-element",!0)}const BL={__init__:["hoverFix"],hoverFix:["type",gk]};var qs=Math.round,oE="djs-drag-active";function ts(e){e.preventDefault()}function IL(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function jL(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function yk(e,t,n,r){var i={threshold:5,trapClick:!0},o;function a(w){var b=t.viewbox(),D=t._container.getBoundingClientRect();return{x:b.x+(w.x-D.left)/b.scale,y:b.y+(w.y-D.top)/b.scale}}function s(w,b){b=b||o;var D=e.createEvent(q({},b.payload,b.data,{isTouch:b.isTouch}));return e.fire("drag."+w,D)===!1?!1:e.fire(b.prefix+"."+w,D)}function l(w){var b=w.filter(function(D){return r.get(D.id)});b.length&&n.select(b)}function u(w,b){var D=o.payload,I=o.displacement,H=o.globalStart,L=bs(w),X=ji(L,H),Y=o.localStart,K=a(L),se=ji(K,Y);if(!o.active&&(b||jL(X)>o.threshold)){if(q(D,{x:qs(Y.x+I.x),y:qs(Y.y+I.y),dx:0,dy:0},{originalEvent:w}),s("start")===!1)return C();o.active=!0,o.keepSelection||(D.previousSelection=n.get(),n.select(null)),o.cursor&&hh(o.cursor),t.addMarker(t.getRootElement(),oE)}Jm(w),o.active&&(q(D,{x:qs(K.x+I.x),y:qs(K.y+I.y),dx:qs(se.x),dy:qs(se.y)},{originalEvent:w}),s("move"))}function f(w){var b,D=!0;o.active&&(w&&(o.payload.originalEvent=w,Jm(w)),D=s("end")),D===!1&&s("rejected"),b=P(D!==!0),s("ended",b)}function d(w){An("Escape",w)&&(ts(w),C())}function g(w){var b;o.active&&(b=IR(e),setTimeout(b,400),ts(w)),f(w)}function y(w){u(w)}function v(w){var b=o.payload;b.hoverGfx=w.gfx,b.hover=w.element,s("hover")}function x(w){s("out");var b=o.payload;b.hoverGfx=null,b.hover=null}function C(w){var b;if(o){var D=o.active;D&&s("cancel"),b=P(w),D&&s("canceled",b)}}function P(w){var b,D;s("cleanup"),BR(),o.trapClick?D=g:D=f,ot.unbind(document,"mousemove",u),ot.unbind(document,"dragstart",ts),ot.unbind(document,"selectstart",ts),ot.unbind(document,"mousedown",D,!0),ot.unbind(document,"mouseup",D,!0),ot.unbind(document,"keyup",d),ot.unbind(document,"touchstart",y,!0),ot.unbind(document,"touchcancel",C,!0),ot.unbind(document,"touchmove",u,!0),ot.unbind(document,"touchend",f,!0),e.off("element.hover",v),e.off("element.out",x),t.removeMarker(t.getRootElement(),oE);var I=o.payload.previousSelection;return w!==!1&&I&&!n.get().length&&l(I),b=o,o=null,b}function k(w,b,D,I){o&&C(!1),typeof b=="string"&&(I=D,D=b,b=null),I=q({},i,I||{});var H=I.data||{},L,X,Y,K,se;I.trapClick?K=g:K=f,w?(L=Wl(w)||w,X=bs(w),Jm(w),L.type==="dragstart"&&ts(L)):(L=null,X={x:0,y:0}),Y=a(X),b||(b=Y),se=IL(L),o=q({prefix:D,data:H,payload:{},globalStart:X,displacement:ji(b,Y),localStart:Y,isTouch:se},I),I.manual||(se?(ot.bind(document,"touchstart",y,!0),ot.bind(document,"touchcancel",C,!0),ot.bind(document,"touchmove",u,!0),ot.bind(document,"touchend",f,!0)):(ot.bind(document,"mousemove",u),ot.bind(document,"dragstart",ts),ot.bind(document,"selectstart",ts),ot.bind(document,"mousedown",K,!0),ot.bind(document,"mouseup",K,!0)),ot.bind(document,"keyup",d),e.on("element.hover",v),e.on("element.out",x)),s("init"),I.autoActivate&&u(w,!0)}e.on("diagram.destroy",C),this.init=k,this.move=u,this.hover=v,this.out=x,this.end=f,this.cancel=C,this.context=function(){return o},this.setOptions=function(w){q(i,w)}}yk.$inject=["eventBus","canvas","selection","elementRegistry"];const Io={__depends__:[BL,io],dragging:["type",yk]};function Xl(e,t,n){this._canvas=n,this._opts=q({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(i){var o=r._toBorderPoint(i);r.startScroll(o)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}Xl.$inject=["config.autoScroll","eventBus","canvas"];Xl.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,i=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,i.width-e.x,i.height-e.y];this.stopScroll();for(var a=0,s=0,l=0;l<4;l++)$L(o[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?a=n.scrollStep:l==1?s=n.scrollStep:l==2?a=-n.scrollStep:l==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))};function $L(e,t,n){return t<e&&e<n}Xl.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Xl.prototype.setOptions=function(e){this._opts=q({},this._opts,e)};Xl.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=bs(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const FL={__depends__:[Io],__init__:["autoScroll"],autoScroll:["type",Xl]};function b0(e){this._commandStack=e.get("commandStack",!1)}b0.$inject=["injector"];b0.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),n===void 0?!0:n};const ao={__init__:["rules"],rules:["type",b0]};var Jp=Math.round,zL=Math.max;function HL(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function VL(e){var t=[];return e.forEach(function(n,r){t.push([r===0?"M":"L",n.x,n.y])}),t}var vk=10;function WL(e,t){var n,r;for(n=0;r=e[n];n++)if(Pu(r,t)<=vk)return{point:e[n],bendpoint:!0,index:n};return null}function UL(e,t){var n=jC(HL(t,vk),VL(e)),r=n[0],i=n[n.length-1],o;return r?r!==i?r.segment2!==i.segment2?(o=zL(r.segment2,i.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:Jp(r.x+i.x)/2,y:Jp(r.y+i.y)/2},index:r.segment2}:{point:{x:Jp(r.x),y:Jp(r.y)},index:r.segment2}:null}function Ay(e,t){return WL(e,t)||UL(e,t)}function xk(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function aE(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function GL(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function KL(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],i=r[0].n*t[0]+r[1].n*t[1],o=r[0].lambda*t[0]+r[1].lambda*t[1];return-i/o}function S0(e,t){var n=t[0],r=t[1],i={x:r.x-n.x,y:r.y-n.y},o=KL([n.x,n.y],[i.x,i.y],[e.x,e.y]);return{x:n.x+o*i.x,y:n.y+o*i.y}}function _k(e,t){var n=S0(e,t),r={x:n.x-e.x,y:n.y-e.y};return xk(r)}function Sd(e,t){return xk({x:e.x-t.x,y:e.y-t.y})}var wk="djs-bendpoint",Ek="djs-segment-dragger";function YL(e,t){var n=bs(t),r=e._container.getBoundingClientRect(),i;i={x:r.left,y:r.top};var o=e.viewbox();return{x:o.x+(n.x-i.x)/o.scale,y:o.y+(n.y-i.y)/o.scale}}function My(e,t,n){var r=YL(e,n),i=Ay(t,r);return i}function Ny(e,t){var n=ze("g");Ct(n).add(wk),tt(e,n);var r=ze("circle");Pe(r,{cx:0,cy:0,r:4}),Ct(r).add("djs-visual"),tt(n,r);var i=ze("circle");return Pe(i,{cx:0,cy:0,r:10}),Ct(i).add("djs-hit"),tt(n,i),t&&Ct(n).add(t),n}function qL(e,t,n,r){var i=ze("g");tt(e,i);var o=18,a=6,s=11,l=QL(t,n,r),u=a+s,f=ze("rect");Pe(f,{x:-o/2,y:-a/2,width:o,height:a}),Ct(f).add("djs-visual"),tt(i,f);var d=ze("rect");return Pe(d,{x:-l/2,y:-u/2,width:l,height:u}),Ct(d).add("djs-hit"),tt(i,d),ZC(i,r==="v"?90:0),i}function bk(e,t,n){var r=ze("g"),i=my(t,n),o=wo(t,n);return tt(e,r),qL(r,t,n,o),Ct(r).add(Ek),Ct(r).add(o==="h"?"horizontal":"vertical"),Vn(r,i.x,i.y),r}function Dy(e){return Math.abs(Math.round(e*2/3))}function XL(e,t){var n=ZL(e,t);return S0(e,n)}function QL(e,t,n){var r=t.x-e.x,i=t.y-e.y;return Dy(n==="h"?r:i)}function ZL(e,t){for(var n=t.waypoints,r=1/0,i,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1],l=_k(e,[a,s]);l<r&&(r=l,i=o)}return[n[i],n[i+1]]}function Sk(e,t,n,r,i){function o(w,b,D){var I=w.index,H=w.point,L,X,Y,K,se,ae;return I<=0||w.bendpoint?!1:(L=b[I-1],X=b[I],Y=my(L,X),K=wo(L,X),se=Math.abs(H.x-Y.x),ae=Math.abs(H.y-Y.y),K&&se<=D&&ae<=D)}function a(w,b){var D=w.waypoints,I,H,L,X;return b.index<=0||b.bendpoint||(I={start:D[b.index-1],end:D[b.index]},H=wo(I.start,I.end),!H)?null:(H==="h"?L=I.end.x-I.start.x:L=I.end.y-I.start.y,X=Dy(L)/2,X)}function s(w,b){var D=b.waypoints,I=My(t,D,w),H;if(I)return H=a(b,I),o(I,D,H)?i.start(w,b,I.index):r.start(w,b,I.index,!I.bendpoint),!0}function l(w,b,D){ot.bind(w,b,function(I){n.triggerMouseEvent(b,I,D),I.stopPropagation()})}function u(w,b){var D=t.getLayer("overlays"),I=Bt('.djs-bendpoints[data-element-id="'+hu(w.id)+'"]',D);return!I&&b&&(I=ze("g"),Pe(I,{"data-element-id":w.id}),Ct(I).add("djs-bendpoints"),tt(D,I),l(I,"mousedown",w),l(I,"click",w),l(I,"dblclick",w)),I}function f(w,b){return Bt('.djs-segment-dragger[data-segment-idx="'+w+'"]',b)}function d(w,b){b.waypoints.forEach(function(D,I){var H=Ny(w);tt(w,H),Vn(H,D.x,D.y)}),Ny(w,"floating")}function g(w,b){for(var D=b.waypoints,I,H,L,X=1;X<D.length;X++)I=D[X-1],H=D[X],wo(I,H)&&(L=bk(w,I,H),Pe(L,{"data-segment-idx":X}),l(L,"mousemove",b))}function y(w){U(fy("."+wk,w),function(b){Cn(b)})}function v(w){U(fy("."+Ek,w),function(b){Cn(b)})}function x(w){var b=u(w);return b||(b=u(w,!0),d(b,w),g(b,w)),b}function C(w){var b=u(w);b&&(v(b),y(b),g(b,w),d(b,w))}function P(w,b){var D=Bt(".floating",w),I=b.point;D&&Vn(D,I.x,I.y)}function k(w,b,D){var I=f(b.index,w),H=D[b.index-1],L=D[b.index],X=b.point,Y=my(H,L),K=wo(H,L),se,ae;I&&(se=JL(I),ae={x:X.x-Y.x,y:X.y-Y.y},K==="v"&&(ae={x:ae.y,y:ae.x}),Vn(se,ae.x,ae.y))}e.on("connection.changed",function(w){C(w.element)}),e.on("connection.remove",function(w){var b=u(w.element);b&&Cn(b)}),e.on("element.marker.update",function(w){var b=w.element,D;b.waypoints&&(D=x(b),w.add?Ct(D).add(w.marker):Ct(D).remove(w.marker))}),e.on("element.mousemove",function(w){var b=w.element,D=b.waypoints,I,H;if(D){if(I=u(b,!0),H=My(t,D,w.originalEvent),!H)return;P(I,H),H.bendpoint||k(I,H,D)}}),e.on("element.mousedown",function(w){if(Ma(w)){var b=w.originalEvent,D=w.element;if(D.waypoints)return s(b,D)}}),e.on("selection.changed",function(w){var b=w.newSelection,D=b[0];D&&D.waypoints&&x(D)}),e.on("element.hover",function(w){var b=w.element;b.waypoints&&(x(b),n.registerEvent(w.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(w){n.unregisterEvent(w.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(w){var b=w.element,D=w.newId;if(b.waypoints){var I=u(b);I&&Pe(I,{"data-element-id":D})}}),this.addHandles=x,this.updateHandles=C,this.getBendpointsContainer=u,this.getSegmentDragger=f}Sk.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function JL(e){return Bt(".djs-visual",e)}var sE=Math.round,is="reconnectStart",os="reconnectEnd",_c="updateWaypoints";function C0(e,t,n,r,i,o){this._injector=e,this.start=function(a,s,l,u){var f=n.getGraphics(s),d=s.source,g=s.target,y=s.waypoints,v;!u&&l===0?v=is:!u&&l===y.length-1?v=os:v=_c;var x=v===_c?"connection.updateWaypoints":"connection.reconnect",C=i.allowed(x,{connection:s,source:d,target:g});C===!1&&(C=i.allowed(x,{connection:s,source:g,target:d})),C!==!1&&r.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:f,context:{allowed:C,bendpointIndex:l,connection:s,source:d,target:g,insert:u,type:v}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,l=s.connection,u=l.source,f=l.target,d=a.hover,g=s.type;s.hover=d;var y;if(d){var v=g===_c?"connection.updateWaypoints":"connection.reconnect";if(y=s.allowed=i.allowed(v,{connection:l,source:g===is?d:u,target:g===os?d:f}),y){s.source=g===is?d:u,s.target=g===os?d:f;return}y===!1&&(y=s.allowed=i.allowed(v,{connection:l,source:g===os?d:f,target:g===is?d:u})),y&&(s.source=g===os?d:f,s.target=g===is?d:u)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,l=s.type;s.hover=null,s.source=null,s.target=null,l!==_c&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,l=s.allowed,u=s.bendpointIndex,f=s.connection,d=s.insert,g=f.waypoints.slice(),y=s.source,v=s.target,x=s.type,C=s.hints||{},P={x:sE(a.x),y:sE(a.y)};if(!l)return!1;x===_c?(d?g.splice(u,0,P):g[u]=P,C.bendpointMove={insert:d,bendpointIndex:u},g=this.cropWaypoints(f,g),o.updateWaypoints(f,HN(g),C)):(x===is?(C.docking="source",Cd(s)&&(C.docking="target",C.newWaypoints=g.reverse())):x===os&&(C.docking="target",Cd(s)&&(C.docking="source",C.newWaypoints=g.reverse())),o.reconnect(f,y,v,P,C))},this)}C0.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];C0.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var r=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=r,t};function Cd(e){var t=e.hover,n=e.source,r=e.target,i=e.type;if(i===is)return t&&r&&t===r&&n!==r;if(i===os)return t&&n&&t===n&&n!==r}var eB="reconnectStart",tB="reconnectEnd",lE="updateWaypoints",wc="connect-ok",ef="connect-not-ok",cE="connect-hover",uE="djs-updating",pE="djs-dragging",fE=1100;function Ck(e,t,n,r){this._injector=t;var i=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,l=a.connection,u=a.insert,f=l.waypoints,d=f.slice();a.waypoints=f,u&&d.splice(s,0,{x:o.x,y:o.y}),l.waypoints=d;var g=a.draggerGfx=Ny(r.getLayer("overlays"));Ct(g).add("djs-dragging"),r.addMarker(l,pE),r.addMarker(l,uE)}),n.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,l=a.hover,u=a.type;if(l){if(r.addMarker(l,cE),u===lE)return;s?(r.removeMarker(l,ef),r.addMarker(l,wc)):s===!1&&(r.removeMarker(l,wc),r.addMarker(l,ef))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],fE,function(o){var a=o.context,s=a.hover,l=a.target;s&&(r.removeMarker(s,cE),r.removeMarker(s,l?wc:ef))}),n.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,l=a.bendpointIndex,u=a.draggerGfx,f=a.hover,d=a.type,g=a.connection,y=g.source,v=g.target,x=g.waypoints.slice(),C={x:o.x,y:o.y},P=a.hints||{},k={};i&&(P.connectionStart&&(k.connectionStart=P.connectionStart),P.connectionEnd&&(k.connectionEnd=P.connectionEnd),d===eB?Cd(a)?(k.connectionEnd=k.connectionEnd||C,k.source=v,k.target=f||y,x=x.reverse()):(k.connectionStart=k.connectionStart||C,k.source=f||y,k.target=v):d===tB?Cd(a)?(k.connectionStart=k.connectionStart||C,k.source=f||v,k.target=y,x=x.reverse()):(k.connectionEnd=k.connectionEnd||C,k.source=y,k.target=f||v):(k.noCropping=!0,k.noLayout=!0,x[l]=C),d===lE&&(x=e.cropWaypoints(g,x)),k.waypoints=x,i.drawPreview(a,s,k)),Vn(u,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],fE,function(o){var a=o.context,s=a.connection,l=a.draggerGfx,u=a.hover,f=a.target,d=a.waypoints;s.waypoints=d,Cn(l),r.removeMarker(s,uE),r.removeMarker(s,pE),u&&(r.removeMarker(u,wc),r.removeMarker(u,f?wc:ef)),i&&i.cleanUp(a)})}Ck.$inject=["bendpointMove","injector","eventBus","canvas"];var dE="connect-hover",hE="djs-updating";function mE(e,t,n){return R0(e,t,e[t]+n)}function R0(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function nB(e,t,n,r){var i=Math.max(t[r],n[r]),o=Math.min(t[r],n[r]),a=20,s=Math.min(Math.max(o+a,e[r]),i-a);return R0(t,r,s)}function Rk(e){return e==="x"?"y":"x"}function gE(e,t,n){var r,i;return e.original?e.original:(r=Je(t),i=Rk(n),R0(e,i,r[i]))}function kk(e,t,n,r,i,o){var a=e.get("connectionDocking",!1);this.start=function(d,g,y){var v,x=n.getGraphics(g),C=y-1,P=y,k=g.waypoints,w=k[C],b=k[P],D=My(n,k,d),I,H,L;I=wo(w,b),I&&(H=I==="v"?"x":"y",C===0&&(w=gE(w,g.source,H)),P===k.length-1&&(b=gE(b,g.target,H)),D?L=D.point:L={x:(w.x+b.x)/2,y:(w.y+b.y)/2},v={connection:g,segmentStartIndex:C,segmentEndIndex:P,segmentStart:w,segmentEnd:b,axis:H,dragPosition:L},r.init(d,L,"connectionSegment.move",{cursor:H==="x"?"resize-ew":"resize-ns",data:{connection:g,connectionGfx:x,context:v}}))};function s(d,g){if(!a)return g;var y=d.waypoints,v;return d.waypoints=g,v=a.getCroppedWaypoints(d),d.waypoints=y,v}function l(d){i.update("connection",d.connection,d.connectionGfx)}function u(d,g,y){var v=d.newWaypoints,x=d.segmentStartIndex+g,C=v[x],P=d.segmentEndIndex+g,k=v[P],w=Rk(d.axis),b=nB(y,C,k,w);Vn(d.draggerGfx,b.x,b.y)}function f(d,g){var y=0,v=d.filter(function(x,C){return qv(d[C-1],d[C+1],x)?(y=C<=g?y-1:y,!1):!0});return{waypoints:v,segmentOffset:y}}t.on("connectionSegment.move.start",function(d){var g=d.context,y=d.connection,v=n.getLayer("overlays");g.originalWaypoints=y.waypoints.slice(),g.draggerGfx=bk(v,g.segmentStart,g.segmentEnd),Ct(g.draggerGfx).add("djs-dragging"),n.addMarker(y,hE)}),t.on("connectionSegment.move.move",function(d){var g=d.context,y=g.connection,v=g.segmentStartIndex,x=g.segmentEndIndex,C=g.segmentStart,P=g.segmentEnd,k=g.axis,w=g.originalWaypoints.slice(),b=mE(C,k,d["d"+k]),D=mE(P,k,d["d"+k]),I=w.length,H=0;w[v]=b,w[x]=D;var L,X;v<2&&(L=rr(y.source,b),v===1?L==="intersect"&&(w.shift(),w[0]=b,H--):L!=="intersect"&&(w.unshift(C),H++)),x>I-3&&(X=rr(y.target,D),x===I-2?X==="intersect"&&(w.pop(),w[w.length-1]=D):X!=="intersect"&&w.push(P)),g.newWaypoints=y.waypoints=s(y,w),u(g,H,d),g.newSegmentStartIndex=v+H,l(d)}),t.on("connectionSegment.move.hover",function(d){d.context.hover=d.hover,n.addMarker(d.hover,dE)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(d){var g=d.context.hover;g&&n.removeMarker(g,dE)}),t.on("connectionSegment.move.cleanup",function(d){var g=d.context,y=g.connection;g.draggerGfx&&Cn(g.draggerGfx),n.removeMarker(y,hE)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(d){var g=d.context,y=g.connection;y.waypoints=g.originalWaypoints,l(d)}),t.on("connectionSegment.move.end",function(d){var g=d.context,y=g.connection,v=g.newWaypoints,x=g.newSegmentStartIndex;v=v.map(function(D){return{original:D.original,x:Math.round(D.x),y:Math.round(D.y)}});var C=f(v,x),P=C.waypoints,k=s(y,P),w=C.segmentOffset,b={segmentMove:{segmentStartIndex:g.segmentStartIndex,newSegmentStartIndex:x+w}};o.updateWaypoints(y,k,b)})}kk.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var rB=Math.abs,yE=Math.round;function iB(e,t,n){n=n===void 0?10:n;var r,i;for(r=0;r<t.length;r++)if(i=t[r],rB(i-e)<=n)return i}function Pk(e){return{x:e.x,y:e.y}}function Tk(e){return{x:e.x+e.width,y:e.y+e.height}}function yi(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:yE(e.x+e.width/2),y:yE(e.y+e.height/2)}}function Dl(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function gn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,i=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,r=n-i,e[t]+=r,e["d"+t]+=r),i}function Ak(e){return e.children||[]}var oB=Math.abs,vE=Math.round,ig=10;function Mk(e){function t(o,a){if(at(o)){for(var s=o.length;s--;)if(oB(o[s]-a)<=ig)return o[s]}else{o=+o;var l=a%o;if(l<ig)return a-l;if(l>o-ig)return a-l+o}return a}function n(o,a){if(o.waypoints)return XL(a,o);if(o.width)return{x:vE(o.width/2+o.x),y:vE(o.height/2+o.y)}}function r(o){var a=o.context,s=a.snapPoints,l=a.connection,u=l.waypoints,f=a.segmentStart,d=a.segmentStartIndex,g=a.segmentEnd,y=a.segmentEndIndex,v=a.axis;if(s)return s;var x=[u[d-1],f,g,u[y+1]];return d<2&&x.unshift(n(l.source,o)),y>u.length-3&&x.unshift(n(l.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},U(x,function(C){C&&(C=C.original||C,v==="y"&&s.horizontal.push(C.y),v==="x"&&s.vertical.push(C.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=r(o),s=o.x,l=o.y,u,f;if(a){u=t(a.vertical,s),f=t(a.horizontal,l);var d=s-u,g=l-f;q(o,{dx:o.dx-d,dy:o.dy-g,x:u,y:f}),(d||a.vertical.indexOf(s)!==-1)&&gn(o,"x",u),(g||a.horizontal.indexOf(l)!==-1)&&gn(o,"y",f)}});function i(o){var a=o.snapPoints,s=o.connection.waypoints,l=o.bendpointIndex;if(a)return a;var u=[s[l-1],s[l+1]];return o.snapPoints=a={horizontal:[],vertical:[]},U(u,function(f){f&&(f=f.original||f,a.horizontal.push(f.y),a.vertical.push(f.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,l=s&&n(s,o);!jt(s)||!l||!l.x||!l.y||(gn(o,"x",l.x),gn(o,"y",l.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=i(a),l=a.hover,u=l&&n(l,o),f=o.x,d=o.y,g,y;if(s){g=t(u?s.vertical.concat([u.x]):s.vertical,f),y=t(u?s.horizontal.concat([u.y]):s.horizontal,d);var v=f-g,x=d-y;q(o,{dx:o.dx-v,dy:o.dy-x,x:o.x-v,y:o.y-x}),(v||s.vertical.indexOf(f)!==-1)&&gn(o,"x",g),(x||s.horizontal.indexOf(d)!==-1)&&gn(o,"y",y)}})}Mk.$inject=["eventBus"];const aB={__depends__:[Io,ao],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Sk],bendpointMove:["type",C0],bendpointMovePreview:["type",Ck],connectionSegmentMove:["type",kk],bendpointSnapping:["type",Mk]};function Nk(e,t,n,r){function i(a,s){return r.allowed("connection.create",{source:a,target:s})}function o(a,s){return i(s,a)}e.on("connect.hover",function(a){var s=a.context,l=s.start,u=a.hover,f;if(s.hover=u,f=s.canExecute=i(l,u),!pu(f)){if(f!==!1){s.source=l,s.target=u;return}f=s.canExecute=o(l,u),!pu(f)&&f!==!1&&(s.source=u,s.target=l)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,l=s.canExecute,u=s.connectionStart,f={x:a.x,y:a.y},d=s.source,g=s.target;if(!l)return!1;var y=null,v={connectionStart:Oy(s)?f:u,connectionEnd:Oy(s)?u:f};jn(l)&&(y=l),s.connection=n.connect(d,g,y,v)}),this.start=function(a,s,l,u){jn(l)||(u=l,l=Je(s)),t.init(a,"connect",{autoActivate:u,data:{shape:s,context:{start:s,connectionStart:l}}})}}Nk.$inject=["eventBus","dragging","modeling","rules"];function Oy(e){var t=e.hover,n=e.source,r=e.target;return t&&n&&t===n&&n!==r}var sB=1100,lB=900,xE="connect-ok",_E="connect-not-ok";function Dk(e,t,n){var r=e.get("connectionPreview",!1);r&&t.on("connect.move",function(i){var o=i.context,a=o.canExecute,s=o.hover,l=o.source,u=o.start,f=o.startPosition,d=o.target,g=o.connectionStart||f,y=o.connectionEnd||{x:i.x,y:i.y},v=g,x=y;Oy(o)&&(v=y,x=g),r.drawPreview(o,a,{source:l||u,target:d||s,connectionStart:v,connectionEnd:x})}),t.on("connect.hover",lB,function(i){var o=i.context,a=i.hover,s=o.canExecute;s!==null&&n.addMarker(a,s?xE:_E)}),t.on(["connect.out","connect.cleanup"],sB,function(i){var o=i.hover;o&&(n.removeMarker(o,xE),n.removeMarker(o,_E))}),r&&t.on("connect.cleanup",function(i){r.cleanUp(i.context)})}Dk.$inject=["injector","eventBus","canvas"];const k0={__depends__:[io,ao,Io],__init__:["connectPreview"],connect:["type",Nk],connectPreview:["type",Dk]};var cB="djs-dragger";function jo(e,t,n,r){this._canvas=t,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}jo.$inject=["injector","canvas","graphicsFactory","elementFactory"];jo.prototype.drawPreview=function(e,t,n){n=n||{};var r=e.connectionPreviewGfx,i=e.getConnection,o=n.source,a=n.target,s=n.waypoints,l=n.connectionStart,u=n.connectionEnd,f=n.noLayout,d=n.noCropping,g=n.noNoop,y,v=this;if(r||(r=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Zd(r),i||(i=e.getConnection=uB(function(x,C,P){return v.getConnection(x,C,P)})),t&&(y=i(t,o,a)),!y){!g&&this.drawNoopPreview(r,n);return}y.waypoints=s||[],this._layouter&&!f&&(y.waypoints=this._layouter.layoutConnection(y,{source:o,target:a,connectionStart:l,connectionEnd:u,waypoints:n.waypoints||y.waypoints})),(!y.waypoints||!y.waypoints.length)&&(y.waypoints=[o?Je(o):l,a?Je(a):u]),this._connectionDocking&&(o||a)&&!d&&(y.waypoints=this._connectionDocking.getCroppedWaypoints(y,o,a)),this._graphicsFactory.drawConnection(r,y,{stroke:"var(--element-dragger-color)"})};jo.prototype.drawNoopPreview=function(e,t){var n=t.source,r=t.target,i=t.connectionStart||Je(n),o=t.connectionEnd||Je(r),a=this.cropWaypoints(i,o,n,r),s=this.createNoopConnection(a[0],a[1]);tt(e,s)};jo.prototype.cropWaypoints=function(e,t,n,r){var i=this._graphicsFactory,o=n&&i.getShapePath(n),a=r&&i.getShapePath(r),s=i.getConnectionPath({waypoints:[e,t]});return e=n&&yy(o,s,!0)||e,t=r&&yy(a,s,!1)||t,[e,t]};jo.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Cn(e.connectionPreviewGfx)};jo.prototype.getConnection=function(e){var t=pB(e);return this._elementFactory.createConnection(t)};jo.prototype.createConnectionPreviewGfx=function(){var e=ze("g");return Pe(e,{pointerEvents:"none"}),Ct(e).add(cB),tt(this._canvas.getActiveLayer(),e),e};jo.prototype.createNoopConnection=function(e,t){return Jd([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function uB(e){var t={};return function(n){var r=JSON.stringify(n),i=t[r];return i||(i=t[r]=e.apply(null,arguments)),i}}function pB(e){return jn(e)?e:{}}const fB={__init__:["connectionPreview"],connectionPreview:["type",jo]},dB=new Ou("ps");var hB=["marker-start","marker-mid","marker-end"],mB=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Da(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r}Da.$inject=["elementRegistry","eventBus","canvas","styles"];Da.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};Da.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Da.prototype.addDragger=function(e,t,n,r="djs-dragger"){n=n||this.getGfx(e);var i=TC(n),o=n.getBoundingClientRect();return this._cloneMarkers(hs(i),r),Pe(i,this._styles.cls(r,[],{x:o.top,y:o.left})),tt(t,i),Pe(i,"data-preview-support-element-id",e.id),i};Da.prototype.addFrame=function(e,t){var n=ze("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return tt(t,n),Pe(n,"data-preview-support-element-id",e.id),n};Da.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var r=this;if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)r._cloneMarkers(e.childNodes[i],t,n);xB(e)&&hB.forEach(function(o){if(Pe(e,o)){var a=gB(e,o,r._canvas.getContainer());a&&r._cloneMarker(n,e,a,o,t)}})};Da.prototype._cloneMarker=function(e,t,n,r,i="djs-dragger"){var o=[n.id,i,dB.next()].join("-"),a=Bt("marker#"+n.id,e);e=e||this._canvas._svg;var s=a||TC(n);s.id=o,Ct(s).add(i);var l=Bt(":scope > defs",e);l||(l=ze("defs"),tt(e,l)),tt(l,s);var u=vB(s.id);Pe(t,r,u)};function gB(e,t,n){var r=yB(Pe(e,t));return Bt("marker#"+r,n||document)}function yB(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function vB(e){return"url(#"+e+")"}function xB(e){return mB.indexOf(e.nodeName)!==-1}const Ql={__init__:["previewSupport"],previewSupport:["type",Da]},tf="complex-preview";class Ok{constructor(t,n,r){this._canvas=t,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:r=[],removed:i=[],resized:o=[]}=t,a=this._canvas.getLayer(tf);n.filter(s=>!_B(s)).forEach(s=>{let l;jt(s)?(l=this._graphicsFactory._createContainer("connection",ze("g")),this._graphicsFactory.drawConnection(hs(l),s)):(l=this._graphicsFactory._createContainer("shape",ze("g")),this._graphicsFactory.drawShape(hs(l),s),Vn(l,s.x,s.y)),this._previewSupport.addDragger(s,a,l)}),r.forEach(({element:s,delta:l})=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"]);const u=this._previewSupport.addDragger(s,a);jt(s)?Vn(u,l.x,l.y):Vn(u,s.x+l.x,s.y+l.y)}),i.forEach(s=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"])}),o.forEach(({shape:s,bounds:l})=>{this._canvas.addMarker(s,"djs-hidden"),this._markers.push([s,"djs-hidden"]),this._previewSupport.addDragger(s,a,void 0,"djs-dragging");const u=this._graphicsFactory._createContainer("shape",ze("g"));this._graphicsFactory.drawShape(hs(u),s,{width:l.width,height:l.height}),Vn(u,l.x,l.y),this._previewSupport.addDragger(s,a,u)})}cleanUp(){Zd(this._canvas.getLayer(tf)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(tf)}hide(){this._canvas.hideLayer(tf)}}Ok.$inject=["canvas","graphicsFactory","previewSupport"];function _B(e){return e.hidden}const wB={__depends__:[Ql],__init__:["complexPreview"],complexPreview:["type",Ok]};var P0=["top","bottom","left","right"],nf=10;function T0(e,t){ue.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var o=i.context,a=o.connection,s=a.source,l=a.target,u=o.hints||{};u.createElementsBehavior!==!1&&(n(s),n(l))}),this.postExecuted(["label.create"],function(i){var o=i.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(i){var o=i.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(l){n(l)})});function n(i){if(ah(i)){var o=SB(i);o&&r(i,o)}}function r(i,o){var a=Je(i),s=i.label,l=Je(s);if(s.parent){var u=Ue(i),f;switch(o){case"top":f={x:a.x,y:u.top-nf-s.height/2};break;case"left":f={x:u.left-nf-s.width/2,y:a.y};break;case"bottom":f={x:a.x,y:u.bottom+nf+s.height/2};break;case"right":f={x:u.right+nf+s.width/2,y:a.y};break}var d=ji(f,l);t.moveShape(s,d)}}}Oe(T0,ue);T0.$inject=["eventBus","modeling"];function EB(e){var t=e.host,n=Je(e),r=rr(n,t),i;r.indexOf("-")>=0?i=r.split("-"):i=[r];var o=P0.filter(function(a){return i.indexOf(a)===-1});return o}function bB(e){var t=Je(e),n=[].concat(e.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),e.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return Lk(t,r)});return n}function SB(e){var t=Je(e.label),n=Je(e),r=Lk(n,t);if(CB(r)){var i=bB(e);if(e.host){var o=EB(e);i=i.concat(o)}var a=P0.filter(function(s){return i.indexOf(s)===-1});if(a.indexOf(r)===-1)return a[0]}}function Lk(e,t){return rr(t,e,5)}function CB(e){return P0.indexOf(e)!==-1}function A0(e){ue.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,r=t.shape;t.position||(A(r,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-r.height/2}:t.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}Oe(A0,ue);A0.$inject=["eventBus"];function M0(e,t){e.invoke(ue,this),this.postExecute("shape.move",function(n){var r=n.newParent,i=n.shape,o=gt(i.incoming.concat(i.outgoing),function(a){return A(a,"bpmn:Association")});U(o,function(a){t.moveConnection(a,{x:0,y:0},r)})},!0)}Oe(M0,ue);M0.$inject=["injector","modeling"];var wE=500;function Eh(e,t){t.invoke(ue,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",wE,function(r){var i=r.elements;i=i.filter(function(o){var a=o.host;return EE(o,a)}),i.length===1&&i.map(function(o){return i.indexOf(o)}).forEach(function(o){var a=i[o];r.elements[o]=n._replaceShape(i[o],a)})},!0),this.preExecute("elements.move",wE,function(r){var i=r.shapes,o=r.newHost;if(i.length===1){var a=i[0];EE(a,o)&&(r.shapes=[n._replaceShape(a,o)])}},!0)}Eh.$inject=["bpmnReplace","injector"];Oe(Eh,ue);Eh.prototype._replaceShape=function(e,t){var n=RB(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})};function RB(e){var t=fe(e),n=t.eventDefinitions;return n&&n[0]}function EE(e,t){return!kt(e)&&ht(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function N0(e,t){ue.call(this,e);function n(r){return gt(r.attachers,function(i){return A(i,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var i=r.context.source,o=r.context.target,a=n(o);A(i,"bpmn:EventBasedGateway")&&A(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(r){var i=r.context.oldSource,o=r.context.newSource;A(i,"bpmn:Gateway")&&A(o,"bpmn:EventBasedGateway")&&U(o.outgoing,function(a){var s=a.target,l=n(s);A(s,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)})})}N0.$inject=["eventBus","modeling"];Oe(N0,ue);function D0(e,t,n){ue.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",i,!0),this.postExecuted("connection.delete",r,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function r(C){const P=C.source,k=C.target;Xs(P)&&Ec(k)&&f(k)}function i(C){const P=C.connection,k=C.source,w=C.target;Xs(k)&&rf(w)&&(u(w),g(k,[P]))}function o(C){const P=C.newTarget,k=C.oldSource,w=C.oldTarget;if(w!==P){const b=k;Ec(w)&&f(w),Xs(b)&&rf(P)&&u(P)}}function a(C){const{element:P}=C;Ec(P)?(d(P),y(P)):rf(P)&&v(P)}function s(C){const{newData:P,oldShape:k}=C;if(Xs(C.oldShape)&&P.eventDefinitionType!=="bpmn:CompensateEventDefinition"||P.type!=="bpmn:BoundaryEvent"){const w=k.outgoing.find(({target:b})=>Ec(b));w&&w.target&&(C._connectionTarget=w.target)}else if(!Xs(C.oldShape)&&P.eventDefinitionType==="bpmn:CompensateEventDefinition"&&P.type==="bpmn:BoundaryEvent"){const w=k.outgoing.find(({target:b})=>rf(b));w&&w.target&&(C._connectionTarget=w.target),x(k)}}function l(C){const{_connectionTarget:P,newShape:k}=C;P&&t.connect(k,P)}function u(C){t.updateProperties(C,{isForCompensation:!0})}function f(C){t.updateProperties(C,{isForCompensation:void 0})}function d(C){for(const P of C.incoming)n.canConnect(P.source,C)||t.removeConnection(P);for(const P of C.outgoing)n.canConnect(C,P.target)||t.removeConnection(P)}function g(C,P){C.outgoing.filter(b=>A(b,"bpmn:Association")).filter(b=>Ec(b.target)&&!P.includes(b)).forEach(b=>t.removeConnection(b))}function y(C){const P=C.attachers.slice();P.length&&t.removeElements(P)}function v(C){const P=C.incoming.filter(k=>Xs(k.source));t.removeElements(P)}function x(C){const P=C.outgoing.filter(k=>A(k,"bpmn:SequenceFlow"));t.removeElements(P)}}Oe(D0,ue);D0.$inject=["eventBus","modeling","bpmnRules"];function Ec(e){const t=fe(e);return t&&t.get("isForCompensation")}function Xs(e){return e&&A(e,"bpmn:BoundaryEvent")&&Vl(e,"bpmn:CompensateEventDefinition")}function rf(e){return e&&A(e,"bpmn:Activity")&&!tr(e)}function O0(e){e.invoke(ue,this),this.preExecute("shape.create",1500,function(t){var n=t.context,r=n.parent,i=n.shape;A(r,"bpmn:Lane")&&!A(i,"bpmn:Lane")&&(n.parent=Nl(r,"bpmn:Participant"))})}O0.$inject=["injector"];Oe(O0,ue);function L0(e,t){ue.call(this,e),this.preExecute("shape.create",function(n){var r=n.context,i=r.shape;if(A(i,"bpmn:DataObjectReference")&&i.type!=="label"){var o=t.create("bpmn:DataObject");i.businessObject.dataObjectRef=o}})}L0.$inject=["eventBus","bpmnFactory"];Oe(L0,ue);var Ly=20,By=20,Bk=30,of=2e3;function B0(e,t,n){ue.call(this,t),t.on(["create.start","shape.move.start"],of,function(i){var o=i.context,a=o.shape,s=e.getRootElement();if(!(!A(a,"bpmn:Participant")||!A(s,"bpmn:Process")||!s.children.length)){var l=s.children.filter(function(d){return!A(d,"bpmn:Group")&&!kt(d)&&!jt(d)});if(l.length){var u=Nn(l),f=kB(a,u);q(a,f),o.createConstraints=PB(a,u)}}}),t.on("create.start",of,function(i){var o=i.context,a=o.shape,s=e.getRootElement(),l=e.getGraphics(s);function u(f){f.element=s,f.gfx=l}A(a,"bpmn:Participant")&&A(s,"bpmn:Process")&&(t.on("element.hover",of,u),t.once("create.cleanup",function(){t.off("element.hover",u)}))});function r(){var i=e.getRootElement();return A(i,"bpmn:Collaboration")?i:n.makeCollaboration()}this.preExecute("elements.create",of,function(i){var o=i.elements,a=i.parent,s=TB(o),l;s&&A(a,"bpmn:Process")&&(i.parent=r(),l=i.hints=i.hints||{},l.participant=s,l.process=a,l.processRef=fe(s).get("processRef"))},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;A(a,"bpmn:Participant")&&A(o,"bpmn:Process")&&(i.parent=r(),i.process=o,i.processRef=fe(a).get("processRef"))},!0),this.execute("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.shape,l=o.participant;a&&(!l||s===l)&&fe(s).set("processRef",fe(a))},!0),this.revert("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.processRef||o.processRef,l=i.shape,u=o.participant;a&&(!u||l===u)&&fe(l).set("processRef",s)},!0),this.postExecute("shape.create",function(i){var o=i.hints||{},a=i.process||i.hints.process,s=i.shape,l=o.participant;if(a){var u=a.children.slice();l?s===l&&n.moveElements(u,{x:0,y:0},l):n.moveElements(u,{x:0,y:0},s)}},!0)}B0.$inject=["canvas","eventBus","modeling"];Oe(B0,ue);function kB(e,t){t={width:t.width+Ly*2+Bk,height:t.height+By*2};var n=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-n/2,y:-r/2,width:n,height:r}}function PB(e,t){return t=Ue(t),{bottom:t.top+e.height/2-By,left:t.right-e.width/2+Ly,top:t.bottom-e.height/2+By,right:t.left+e.width/2-Ly-Bk}}function TB(e){return At(e,function(t){return A(t,"bpmn:Participant")})}var bE="__targetRef_placeholder";function I0(e,t){ue.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],SE(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],SE(o));function n(a,s,l){var u=a.get("dataInputAssociations");return At(u,function(f){return f!==l&&f.targetRef===s})}function r(a,s){var l=a.get("properties"),u=At(l,function(f){return f.name===bE});return!u&&s&&(u=t.create("bpmn:Property",{name:bE}),kn(l,u)),u}function i(a,s){var l=r(a);l&&(n(a,l,s)||yn(a.get("properties"),l))}function o(a){var s=a.context,l=s.connection,u=l.businessObject,f=l.target,d=f&&f.businessObject,g=s.newTarget,y=g&&g.businessObject,v=s.oldTarget||s.target,x=v&&v.businessObject,C=l.businessObject,P;x&&x!==d&&i(x,u),y&&y!==d&&i(y,u),d?(P=r(d,!0),C.targetRef=P):C.targetRef=null}}I0.$inject=["eventBus","bpmnFactory"];Oe(I0,ue);function SE(e){return function(t){var n=t.context,r=n.connection;if(A(r,"bpmn:DataInputAssociation"))return e(t)}}function bh(e){this._bpmnUpdater=e}bh.$inject=["bpmnUpdater"];bh.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.newSemanticParent,i=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};bh.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.oldSemanticParent,i=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};function j0(e,t,n,r){ue.call(this,r),t.registerHandler("dataStore.updateContainment",bh);function i(){return n.filter(function(s){return A(s,"bpmn:Participant")&&fe(s).processRef})[0]}function o(s){return s.children.filter(function(l){return A(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function a(s,l){var u=s.businessObject||s;if(l=l||i(),l){var f=l.businessObject||l;t.execute("dataStore.updateContainment",{dataStoreBo:u,dataStoreDi:Rt(s),newSemanticParent:f.processRef||f,newDiParent:Rt(l)})}}this.preExecute("shape.create",function(s){var l=s.context,u=l.shape;A(u,"bpmn:DataStoreReference")&&u.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var l=s.context,u=l.shapes,f=u.filter(function(d){return A(d,"bpmn:DataStoreReference")});f.length&&(l.hints||(l.hints={}),l.hints.autoResize=u.filter(function(d){return!A(d,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var l=s.context,u=l.shape,f=u.parent;A(u,"bpmn:DataStoreReference")&&u.type!=="label"&&A(f,"bpmn:Collaboration")&&a(u)}),this.postExecute("shape.move",function(s){var l=s.context,u=l.shape,f=l.oldParent,d=u.parent;if(!A(f,"bpmn:Collaboration")&&A(u,"bpmn:DataStoreReference")&&u.type!=="label"&&A(d,"bpmn:Collaboration")){var g=A(f,"bpmn:Participant")?f:MB(f,"bpmn:Participant");a(u,g)}}),this.postExecute("shape.delete",function(s){var l=s.context,u=l.shape,f=e.getRootElement();ht(u,["bpmn:Participant","bpmn:SubProcess"])&&A(f,"bpmn:Collaboration")&&o(f).filter(function(d){return AB(d,u)}).forEach(function(d){a(d)})}),this.postExecute("canvas.updateRoot",function(s){var l=s.context,u=l.oldRoot,f=l.newRoot,d=o(u);d.forEach(function(g){A(f,"bpmn:Process")&&a(g,f)})})}j0.$inject=["canvas","commandStack","elementRegistry","eventBus"];Oe(j0,ue);function AB(e,t){for(var n=e.businessObject||e,r=t.businessObject||t;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function MB(e,t){for(;e.parent;){if(A(e.parent,t))return e.parent;e=e.parent}}var Rd=Math.max,kd=Math.min,NB=20;function Ik(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function DB(e,t,n){var r=n.x,i=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+i,o.height=e.height-i):t.indexOf("s")!==-1&&(o.height=e.height+i),t.indexOf("e")!==-1?o.width=e.width+r:t.indexOf("w")!==-1&&(o.x=e.x+r,o.width=e.width-r),o}function OB(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function af(e,t,n){var r=t[e],i=n.min&&n.min[e],o=n.max&&n.max[e];return Ze(i)&&(r=(/top|left/.test(e)?kd:Rd)(r,i)),Ze(o)&&(r=(/top|left/.test(e)?Rd:kd)(r,o)),r}function LB(e,t){if(!t)return e;var n=Ue(e);return th({top:af("top",n,t),right:af("right",n,t),bottom:af("bottom",n,t),left:af("left",n,t)})}function BB(e,t,n,r){var i=Ue(t),o={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},a=r?Ue(r):o,s={top:kd(o.top,a.top),left:kd(o.left,a.left),bottom:Rd(o.bottom,a.bottom),right:Rd(o.right,a.right)};return th(s)}function bc(e,t){return typeof e<"u"?e:NB}function IB(e,t){var n,r,i,o;return typeof t=="object"?(n=bc(t.left),r=bc(t.right),i=bc(t.top),o=bc(t.bottom)):n=r=i=o=bc(t),{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+o}}function jB(e){return!(e.waypoints||e.type==="label")}function jk(e,t){var n;if(e.length===void 0?n=gt(e.children,jB):n=e,n.length)return IB(Nn(n),t)}var Xo=Math.abs;function $B(e,t){return Ik(Ue(t),Ue(e))}var FB=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],fi=30;function Sh(e,t){return t=t||[],e.children.filter(function(n){A(n,"bpmn:Lane")&&(Sh(n,t),t.push(n))}),t}function Oa(e){return e.children.filter(function(t){return A(t,"bpmn:Lane")})}function mi(e){return Nl(e,FB)||e}function zB(e,t){var n=mi(e),r=A(n,"bpmn:Process")?[]:[n],i=Sh(n,r),o=Ue(e),a=Ue(t),s=$B(e,t),l=[],u=Dn(e);return i.forEach(function(f){if(f!==e){var d=u?0:s.top,g=u?s.right:0,y=u?0:s.bottom,v=u?s.left:0,x=Ue(f);s.top&&(Xo(x.bottom-o.top)<10&&(y=a.top-x.bottom),Xo(x.top-o.top)<5&&(d=a.top-x.top)),s.left&&(Xo(x.right-o.left)<10&&(g=a.left-x.right),Xo(x.left-o.left)<5&&(v=a.left-x.left)),s.bottom&&(Xo(x.top-o.bottom)<10&&(d=a.bottom-x.top),Xo(x.bottom-o.bottom)<5&&(y=a.bottom-x.bottom)),s.right&&(Xo(x.left-o.right)<10&&(v=a.right-x.left),Xo(x.right-o.right)<5&&(g=a.right-x.right)),(d||g||y||v)&&l.push({shape:f,newBounds:OB(f,{top:d,right:g,bottom:y,left:v})})}}),l}var HB=500;function $0(e,t){ue.call(this,e);function n(r,i){var o=Dn(r),a=Oa(i),s=[],l=[],u=[],f=[];if(Ps(a,function(C){return o?C.y>r.y?l.push(C):s.push(C):C.x>r.x?f.push(C):u.push(C),C.children}),!!a.length){var d;o?l.length&&s.length?d=r.height/2:d=r.height:f.length&&u.length?d=r.width/2:d=r.width;var g,y,v,x;s.length&&(g=t.calculateAdjustments(s,"y",d,r.y-10),t.makeSpace(g.movingShapes,g.resizingShapes,{x:0,y:d},"s")),l.length&&(y=t.calculateAdjustments(l,"y",-d,r.y+r.height+10),t.makeSpace(y.movingShapes,y.resizingShapes,{x:0,y:-d},"n")),u.length&&(v=t.calculateAdjustments(u,"x",d,r.x-10),t.makeSpace(v.movingShapes,v.resizingShapes,{x:d,y:0},"e")),f.length&&(x=t.calculateAdjustments(f,"x",-d,r.x+r.width+10),t.makeSpace(x.movingShapes,x.resizingShapes,{x:-d,y:0},"w"))}}this.postExecuted("shape.delete",HB,function(r){var i=r.context,o=i.hints,a=i.shape,s=i.oldParent;A(a,"bpmn:Lane")&&(o&&o.nested||n(a,s))})}$0.$inject=["eventBus","spaceTool"];Oe($0,ue);var CE=500;function Ch(e,t){t.invoke(ue,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",CE,function(r){var i=r.elements;i.filter(function(o){var a=o.host;return RE(o,a)}).map(function(o){return i.indexOf(o)}).forEach(function(o){r.elements[o]=n._replaceShape(i[o])})},!0),this.preExecute("elements.move",CE,function(r){var i=r.shapes,o=r.newHost;i.forEach(function(a,s){var l=a.host;RE(a,WB(i,l)?l:o)&&(i[s]=n._replaceShape(a))})},!0)}Ch.$inject=["bpmnReplace","injector"];Oe(Ch,ue);Ch.prototype._replaceShape=function(e){var t=VB(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function VB(e){var t=fe(e),n=t.eventDefinitions;return n&&n[0]}function RE(e,t){return!kt(e)&&A(e,"bpmn:BoundaryEvent")&&!t}function WB(e,t){return e.indexOf(t)!==-1}function F0(e,t,n){ue.call(this,e);function r(i,o,a){var s=o.waypoints,l,u,f,d,g,y,v,x=i.outgoing.slice(),C=i.incoming.slice(),P;Ze(a.width)?P=Je(a):P=a;var k=Ay(s,P);if(k){if(l=s.slice(0,k.index),u=s.slice(k.index+(k.bendpoint?1:0)),!l.length||!u.length)return;f=k.bendpoint?s[k.index]:P,(l.length===1||!kE(i,l[l.length-1]))&&l.push(PE(f)),(u.length===1||!kE(i,u[0]))&&u.unshift(PE(f))}d=o.source,g=o.target,t.canConnect(d,i,o)&&(n.reconnectEnd(o,i,l||P),y=o),t.canConnect(i,g,o)&&(y?v=n.connect(i,g,{type:o.type,waypoints:u}):(n.reconnectStart(o,i,u||P),v=o));var w=[].concat(y&&gt(C,function(b){return b.source===y.source})||[],v&&gt(x,function(b){return b.target===v.target})||[]);w.length&&n.removeElements(w)}this.preExecute("elements.move",function(i){var o=i.newParent,a=i.shapes,s=i.delta,l=a[0];if(!(!l||!o)){o&&o.waypoints&&(i.newParent=o=o.parent);var u=Je(l),f={x:u.x+s.x,y:u.y+s.y},d=At(o.children,function(g){var y=t.canInsert(a,g);return y&&Ay(g.waypoints,f)});d&&(i.targetFlow=d,i.position=f)}},!0),this.postExecuted("elements.move",function(i){var o=i.shapes,a=i.targetFlow,s=i.position;a&&r(o[0],a,s)},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;t.canInsert(a,o)&&(i.targetFlow=o,i.parent=o.parent)},!0),this.postExecuted("shape.create",function(i){var o=i.shape,a=i.targetFlow,s=i.position;a&&r(o,a,s)},!0)}Oe(F0,ue);F0.$inject=["eventBus","bpmnRules","modeling"];function kE(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function PE(e){return q({},e)}function z0(e,t){ue.call(this,e),this.preExecuted("connection.create",function(n){var r=n.context,i=r.connection,o=r.source,a=r.target,s=r.hints;if(!(s&&s.createElementsBehavior===!1)&&Qs(i)){var l=[];A(o,"bpmn:EventBasedGateway")?l=a.incoming.filter(u=>u!==i&&Qs(u)):l=a.incoming.filter(u=>u!==i&&Qs(u)&&A(u.source,"bpmn:EventBasedGateway")),l.forEach(function(u){t.removeConnection(u)})}}),this.preExecuted("shape.replace",function(n){var r=n.context,i=r.newShape;if(A(i,"bpmn:EventBasedGateway")){var o=i.outgoing.filter(Qs).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(Qs).forEach(function(s){const l=a.incoming.filter(Qs).filter(function(u){return u.source===i});(s.source!==i||l.length>1)&&t.removeConnection(s)})})}})}z0.$inject=["eventBus","modeling"];Oe(z0,ue);function Qs(e){return A(e,"bpmn:SequenceFlow")}var sf=1500,TE=2e3;function $k(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],sf,function(r){var i=r.context,o=i.shape||r.shape,a=r.hover;A(a,"bpmn:Lane")&&!ht(o,["bpmn:Lane","bpmn:Participant"])&&(r.hover=mi(a),r.hoverGfx=e.getGraphics(r.hover));var s=n.getRootElement();a!==s&&(o.labelTarget||ht(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(r.hover=s,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],sf,function(r){var i=r.hover;A(i,"bpmn:Lane")&&(r.hover=mi(i)||i,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["bendpoint.move.hover"],sf,function(r){var i=r.context,o=r.hover,a=i.type;A(o,"bpmn:Lane")&&/reconnect/.test(a)&&(r.hover=mi(o)||o,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.start"],sf,function(r){var i=r.context,o=i.start;A(o,"bpmn:Lane")&&(i.start=mi(o)||o)}),t.on("shape.move.start",TE,function(r){var i=r.shape;A(i,"bpmn:Lane")&&(r.shape=mi(i)||i)}),t.on("spaceTool.move",TE,function(r){var i=r.hover;i&&A(i,"bpmn:Lane")&&(r.hover=mi(i))})}$k.$inject=["elementRegistry","eventBus","canvas"];function UB(e){return e.create("bpmn:Category")}function GB(e){return e.create("bpmn:CategoryValue")}function KB(e,t,n){return kn(t.get("categoryValue"),e),e.$parent=t,kn(n.get("rootElements"),t),t.$parent=n,e}function YB(e){var t=e.$parent;return t&&(yn(t.get("categoryValue"),e),e.$parent=null),e}function qB(e){var t=e.$parent;return t&&(yn(t.get("rootElements"),e),e.$parent=null),e}var AE=770;function H0(e,t,n,r,i,o){i.invoke(ue,this);function a(){return n.filter(function(v){return A(v,"bpmn:Group")})}function s(v,x){return v.some(function(C){var P=fe(C),k=P.categoryValueRef&&P.categoryValueRef.$parent;return k===x})}function l(v,x){return v.some(function(C){var P=fe(C);return P.categoryValueRef===x})}function u(v,x,C){var P=a().filter(function(k){return k.businessObject!==C});x&&!s(P,x)&&qB(x),v&&!l(P,v)&&YB(v)}function f(v,x){return KB(v,x,t.getDefinitions())}function d(v,x){var C=fe(v),P=C.categoryValueRef;P||(P=C.categoryValueRef=x.categoryValue=x.categoryValue||GB(e));var k=P.$parent;k||(k=P.$parent=x.category=x.category||UB(e)),f(P,k,t.getDefinitions())}function g(v,x){var C=x.category,P=x.categoryValue,k=fe(v);P?(k.categoryValueRef=null,u(P,C,k)):u(null,k.categoryValueRef.$parent,k)}this.execute("label.create",function(v){var x=v.context,C=x.labelTarget;A(C,"bpmn:Group")&&d(C,x)}),this.revert("label.create",function(v){var x=v.context,C=x.labelTarget;A(C,"bpmn:Group")&&g(C,x)}),this.execute("shape.delete",function(v){var x=v.context,C=x.shape,P=fe(C);if(!(!A(C,"bpmn:Group")||C.labelTarget)){var k=x.categoryValue=P.categoryValueRef,w;k&&(w=x.category=k.$parent,u(k,w,P),P.categoryValueRef=null)}}),this.reverted("shape.delete",function(v){var x=v.context,C=x.shape;if(!(!A(C,"bpmn:Group")||C.labelTarget)){var P=x.category,k=x.categoryValue,w=fe(C);k&&(w.categoryValueRef=k,f(k,P))}}),this.execute("shape.create",function(v){var x=v.context,C=x.shape;!A(C,"bpmn:Group")||C.labelTarget||fe(C).categoryValueRef&&d(C,x)}),this.reverted("shape.create",function(v){var x=v.context,C=x.shape;!A(C,"bpmn:Group")||C.labelTarget||fe(C).categoryValueRef&&g(C,x)});function y(v,x){var C=e.create(v.$type);return o.copyElement(v,C,null,x)}r.on("copyPaste.copyElement",AE,function(v){var x=v.descriptor,C=v.element;if(!(!A(C,"bpmn:Group")||C.labelTarget)){var P=fe(C);if(P.categoryValueRef){var k=P.categoryValueRef;x.categoryValue=y(k,!0),k.$parent&&(x.category=y(k.$parent,!0))}}}),r.on("copyPaste.pasteElement",AE,function(v){var x=v.descriptor,C=x.businessObject,P=x.categoryValue,k=x.category;P&&(P=C.categoryValueRef=y(P)),k&&(P.$parent=y(k)),delete x.category,delete x.categoryValue})}H0.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];Oe(H0,ue);function Iy(e,t,n,r){var i,o,a,s,l;return i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),i==0?null:(o=e.y-n.y,a=e.x-n.x,l=(r.x-n.x)*o-(r.y-n.y)*a,s=l/i,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function Fk(e){function t(r,i,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},l=Iy(r,i,o,a),u=Iy(r,i,o,s),f;l&&u?ME(l,o)>ME(u,o)?f=u:f=l:f=l||u,r.original=f}function n(r){var i=r.waypoints;t(i[0],i[1],Je(r.source)),t(i[i.length-1],i[i.length-2],Je(r.target))}e.on("bpmnElement.added",function(r){var i=r.element;i.waypoints&&n(i)})}Fk.$inject=["eventBus"];function ME(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function V0(e){ue.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var r=n.context.shape,i=fe(r),o=Rt(r);if(ht(i,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}V0.$inject=["eventBus"];Oe(V0,ue);var zk=Math.sqrt,Hk=Math.min,XB=Math.max,NE=Math.abs;function DE(e){return Math.pow(e,2)}function Sc(e,t){return zk(DE(e.x-t.x)+DE(e.y-t.y))}function QB(e,t){var n=0,r,i,o,a,s,l,u,f,d,g,y;for(n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],LE(r,i)?u=[r]:(o=Sc(e,r),a=Sc(e,i),l=Hk(o,a),u=ZB(r,i,e,l)),u.length<1)throw new Error("expected between [1, 2] circle -> line intersections");u.length===1&&(f={type:"bendpoint",position:u[0],segmentIndex:n,bendpointIndex:LE(r,u[0])?n:n+1}),u.length===2&&(s=e9(u[0],u[1]),f={type:"segment",position:s,segmentIndex:n,relativeLocation:Sc(r,s)/Sc(r,i)}),d=Sc(f.position,e),(!y||g>d)&&(y=f,g=d)}return y}function ZB(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,l=i*i+o*o,u=i*a+o*s,f=a*a+s*s-r*r,d=u/l,g=f/l,y=d*d-g;if(y<0&&y>-1e-6&&(y=0),y<0)return[];var v=zk(y),x=-d+v,C=-d-v,P={x:e.x-i*x,y:e.y-o*x};if(y===0)return[P];var k={x:e.x-i*C,y:e.y-o*C};return[P,k].filter(function(w){return JB(w,e,t)})}function JB(e,t,n){return OE(e.x,t.x,n.x)&&OE(e.y,t.y,n.y)}function OE(e,t,n){return e>=Hk(t,n)-Pd&&e<=XB(t,n)+Pd}function e9(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Pd=.1;function LE(e,t){return NE(e.x-t.x)<=Pd&&NE(e.y-t.y)<=Pd}function t9(e,t,n,r){var i=n.segmentIndex,o=t.length-e.length;if(r.segmentMove){var a=r.segmentMove.segmentStartIndex,s=r.segmentMove.newSegmentStartIndex;return i===a?s:i>=s?i+o<s?s:i+o:i}if(r.bendpointMove){var l=r.bendpointMove.insert,u=r.bendpointMove.bendpointIndex,f;if(o===0)return i;if(i>=u&&(f=l?i+1:i-1),i<u&&(f=i,l&&n.type!=="bendpoint"&&u-1===i)){var d=Wk(t,u);d<n.relativeLocation&&f++}return f}return o===0?i:r.connectionStart&&i===0?0:r.connectionEnd&&i===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function Vk(e,t,n,r){var i=0,o=0,a={point:e,delta:{x:0,y:0}},s=QB(e,n),l=s.segmentIndex,u=t9(n,t,s,r);if(u<0||u>t.length-2||u===null)return a;var f=BE(n,l),d=BE(t,u),g=s.position,y=r9(f,g),v=n9(f,d);if(s.type==="bendpoint"){var x=t.length-n.length,C=s.bendpointIndex,P=n[C];if(t.indexOf(P)!==-1)return a;if(x===0){var k=t[C];return i=k.x-s.position.x,o=k.y-s.position.y,{delta:{x:i,y:o},point:{x:e.x+i,y:e.y+o}}}x<0&&C!==0&&C<n.length-1&&(y=Wk(n,C))}var w={x:(d[1].x-d[0].x)*y+d[0].x,y:(d[1].y-d[0].y)*y+d[0].y},b=GL({x:e.x-g.x,y:e.y-g.y},v);return i=w.x+b.x-e.x,o=w.y+b.y-e.y,{point:So(w),delta:So({x:i,y:o})}}function Wk(e,t){var n=Sd(e[t-1],e[t]),r=Sd(e[t],e[t+1]),i=n/(n+r);return i}function n9(e,t){var n=aE(e),r=aE(t);return r-n}function BE(e,t){return[e[t],e[t+1]]}function r9(e,t){var n=Sd(e[0],e[1]),r=Sd(e[0],t);return n===0?0:r/n}function i9(e,t,n,r){var i=Je(e);return Vk(i,t,n,r).delta}function Iu(e,t,n){var r=Uc(t),i=Uc(n),o=ji(e,r),a={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return So({x:i.x+a.x,y:i.y+a.y})}function IE(e,t,n){var r=Uc(e),i=Uc(t),o=Uc(n),a=ji(e,r),s=ji(r,i),l=o9(r,t,n);if(l)return l;var u={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},f={x:o.x+u.x,y:o.y+u.y};return So({x:f.x+a.x-e.x,y:f.y+a.y-e.y})}function o9(e,t,n){var r=Ue(t),i=Ue(n);if(a9(r,i))return null;var o=rr(t,e),a,s,l;if(o==="top")a={x:0,y:i.bottom-r.bottom};else if(o==="bottom")a={x:0,y:i.top-r.top};else if(o==="right")a={x:i.left-r.left,y:0};else if(o==="left")a={x:i.right-r.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},l=rr(n,s),l!==o?null:a}function a9(e,t){return s9(e,t)||l9(e,t)}function s9(e,t){return e.right!==t.right&&e.left!==t.left}function l9(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var jE="name",$E="text";function W0(e,t,n,r){ue.call(this,e),this.postExecute("element.updateProperties",i),this.postExecute("element.updateModdleProperties",a=>{fe(a.context.element)===a.context.moddleElement&&i(a)});function i(a){var s=a.context,l=s.element,u=s.properties;if(jE in u&&t.updateLabel(l,u[jE]),$E in u&&A(l,"bpmn:TextAnnotation")){var f=r.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},u[$E]||"");t.updateLabel(l,u.text,f)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,l=s.hints||{};if(l.createElementsBehavior!==!1){var u=s.shape||s.connection;kt(u)||!Es(u)||Zr(u)&&t.updateLabel(u,Zr(u))}}),this.postExecute("shape.delete",function(a){var s=a.context,l=s.labelTarget,u=s.hints||{};l&&u.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})});function o(a){var s=a.context,l=s.connection,u=l.label,f=q({},s.hints),d=s.newWaypoints||l.waypoints,g=s.oldWaypoints;return typeof f.startChanged>"u"&&(f.startChanged=!!f.connectionStart),typeof f.endChanged>"u"&&(f.endChanged=!!f.connectionEnd),i9(u,d,g,f)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,l=s.hints||{};if(l.labelBehavior!==!1){var u=s.connection,f=u.label,d;!f||!f.parent||(d=o(a),t.moveShape(f,d))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,l=s.newShape,u=s.oldShape,f=fe(l);f&&Es(f)&&u.label&&l.label&&(l.label.x=u.label.x,l.label.y=u.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,u=s.newBounds,f=s.oldBounds;if(ah(l)){var d=l.label,g=Je(d),y=p9(f),v=u9(g,y),x=c9(v,f,u);t.moveShape(d,x)}})}Oe(W0,ue);W0.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function c9(e,t,n){var r=Iu(e,t,n);return So(ji(r,e))}function u9(e,t){if(t.length){var n=f9(e,t);return S0(e,n)}}function p9(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function f9(e,t){var n=t.map(function(i){return{line:i,distance:_k(e,i)}}),r=no(n,"distance");return r[0].line}function d9(e,t,n,r){return Vk(e,t,n,r).point}function U0(e,t){ue.call(this,e);function n(r,i){var o=r.context,a=o.connection,s=q({},o.hints),l=o.newWaypoints||a.waypoints,u=o.oldWaypoints;return typeof s.startChanged>"u"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged>"u"&&(s.endChanged=!!s.connectionEnd),d9(i,l,u,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming;s.forEach(function(l){var u=l.waypoints[l.waypoints.length-1],f=n(r,u),d=[].concat(l.waypoints.slice(0,-1),[f]);t.updateWaypoints(l,d)}),a.forEach(function(l){var u=l.waypoints[0],f=n(r,u),d=[].concat([f],l.waypoints.slice(1));t.updateWaypoints(l,d)})}),this.postExecute(["connection.move"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming,l=i.delta;s.forEach(function(u){var f=u.waypoints[u.waypoints.length-1],d={x:f.x+l.x,y:f.y+l.y},g=[].concat(u.waypoints.slice(0,-1),[d]);t.updateWaypoints(u,g)}),a.forEach(function(u){var f=u.waypoints[0],d={x:f.x+l.x,y:f.y+l.y},g=[].concat([d],u.waypoints.slice(1));t.updateWaypoints(u,g)})})}Oe(U0,ue);U0.$inject=["eventBus","modeling"];function Rh(e,t,n){var r=Ph(e),i=Gk(r,t),o=r[0];return i.length?i[i.length-1]:Iu(o.original||o,n,t)}function kh(e,t,n){var r=Ph(e),i=Gk(r,t),o=r[r.length-1];return i.length?i[0]:Iu(o.original||o,n,t)}function G0(e,t,n){var r=Ph(e),i=Uk(t,n),o=r[0];return Iu(o.original||o,i,t)}function K0(e,t,n){var r=Ph(e),i=Uk(t,n),o=r[r.length-1];return Iu(o.original||o,i,t)}function Uk(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Ph(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function Gk(e,t){var n=er(e,m9);return gt(n,function(r){return h9(r,t)})}function h9(e,t){return rr(t,e,1)==="intersect"}function m9(e){return e.original||e}function Y0(e,t){ue.call(this,e),this.postExecute("shape.replace",function(n){var r=n.oldShape,i=n.newShape;if(g9(r,i)){var o=y9(r);o.incoming.forEach(function(a){var s=kh(a,i,r);t.reconnectEnd(a,i,s)}),o.outgoing.forEach(function(a){var s=Rh(a,i,r);t.reconnectStart(a,i,s)})}},!0)}Y0.$inject=["eventBus","modeling"];Oe(Y0,ue);function g9(e,t){return A(e,"bpmn:Participant")&&xt(e)&&A(t,"bpmn:Participant")&&!xt(t)}function y9(e){var t=ku([e],!1),n=[],r=[];return t.forEach(function(i){i!==e&&(i.incoming.forEach(function(o){A(o,"bpmn:MessageFlow")&&n.push(o)}),i.outgoing.forEach(function(o){A(o,"bpmn:MessageFlow")&&r.push(o)}))},[]),{incoming:n,outgoing:r}}const v9=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function Kk(e){const t=fe(e);if(!A(t,"bpmn:BoundaryEvent")&&!(A(t,"bpmn:StartEvent")&&tr(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:v9.some(r=>A(n[0],r))}function Yk(e){return A(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function q0(e,t){e.invoke(ue,this),this.postExecuted("shape.replace",function(n){const r=n.context.oldShape,i=n.context.newShape,o=n.context.hints;if(!Kk(i))return;const a=Yk(i);if(o.targetElement&&o.targetElement[a]!==void 0)return;const l=fe(r).get(a),u=fe(i).get(a);l!==u&&t.updateProperties(i,{[a]:l})})}q0.$inject=["injector","modeling"];Oe(q0,ue);function X0(e,t){ue.call(this,e),this.preExecute("shape.resize",function(n){var r=n.shape,i=Rt(r),o=i&&i.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(r,o,{bounds:void 0})},!0)}Oe(X0,ue);X0.$inject=["eventBus","modeling"];function Q0(e,t,n){ue.call(this,e),this.preExecute("shape.delete",function(r){var i=r.context.shape;if(!(i.incoming.length!==1||i.outgoing.length!==1)){var o=i.incoming[0],a=i.outgoing[0];if(!(!A(o,"bpmn:SequenceFlow")||!A(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=x9(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,s)}}})}Oe(Q0,ue);Q0.$inject=["eventBus","bpmnRules","modeling"];function Zs(e){return e.original||e}function x9(e,t){var n=Iy(Zs(e[e.length-2]),Zs(e[e.length-1]),Zs(t[1]),Zs(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[Zs(e[0]),Zs(t[t.length-1])]}function Z0(e,t){ue.call(this,e),this.preExecute("shape.delete",function(n){var r=n.shape,i=r.parent;A(r,"bpmn:Participant")&&(n.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(n){var r=n.collaborationRoot;if(r&&!r.businessObject.participants.length){var i=t.makeProcess(),o=r.children.slice();t.moveElements(o,{x:0,y:0},i)}},!0)}Z0.$inject=["eventBus","modeling"];Oe(Z0,ue);function J0(e,t,n,r){ue.call(this,e);var i=r.get("dragging",!1);function o(l){var u=l.source,f=l.target,d=l.parent;if(d){var g,y;A(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,f)||(y=!0),n.canConnectMessageFlow(u,f)&&(g="bpmn:MessageFlow")),A(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,f)||(y=!0),n.canConnectSequenceFlow(u,f)&&(g="bpmn:SequenceFlow")),y&&t.removeConnection(l),g&&t.connect(u,f,{type:g,waypoints:l.waypoints.slice()})}}function a(l){var u=l.context,f=u.connection,d=u.newSource||f.source,g=u.newTarget||f.target,y,v;y=n.canConnect(d,g),!(!y||y.type===f.type)&&(v=t.connect(d,g,{type:y.type,associationDirection:y.associationDirection,waypoints:f.waypoints.slice()}),f.parent&&t.removeConnection(f),u.connection=v,i&&s(f,v))}function s(l,u){var f=i.context(),d=f&&f.payload.previousSelection,g;!d||!d.length||(g=d.indexOf(l),g!==-1&&d.splice(g,1,u))}this.postExecuted("elements.move",function(l){var u=l.closure,f=u.allConnections;U(f,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(l){var u=l.context,f=u.properties,d=u.element,g=d.businessObject,y;f.default&&(y=At(d.outgoing,Ii({id:d.businessObject.default.id})),y&&t.updateProperties(y,{conditionExpression:void 0})),f.conditionExpression&&g.sourceRef.default===g&&t.updateProperties(d.source,{default:void 0})})}Oe(J0,ue);J0.$inject=["eventBus","modeling","bpmnRules","injector"];function Th(e,t,n,r,i,o){r.invoke(ue,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,l=s.parent,u=s.elements,f=$r(u,function(d,g){var y=t.canReplace([g],g.host||g.parent||l);return y?d.concat(y.replacements):d},[]);f.length&&this._replaceElements(u,f)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,l=s.newParent,u=s.newHost,f=[];U(s.closure.topLevel,function(g){tr(g)?f=f.concat(g.children):f=f.concat(g)}),f.length===1&&u&&(l=u);var d=t.canReplace(f,l);d&&this._replaceElements(f,d.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,u=s.newShape,f=l.attachers,d;f&&f.length&&(d=t.canReplace(f,u),this._replaceElements(f,d.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,u=s.newShape;i.unclaimId(l.businessObject.id,l.businessObject),i.updateProperties(u,{id:l.id})})}Oe(Th,ue);Th.prototype._replaceElements=function(e,t){var n=this._elementRegistry,r=this._bpmnReplace,i=this._selection;U(t,function(o){var a={type:o.newElementType},s=n.get(o.oldElementId),l=e.indexOf(s);e[l]=r.replaceElement(s,a,{select:!1})}),t&&i.select(e)};Th.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var _9=1500,w9={width:140,height:120},ex={width:300,height:60},tx={width:60,height:300},$f={width:300,height:150},Ff={width:150,height:300},qk={width:140,height:120},Xk={width:50,height:30};function Qk(e){e.on("resize.start",_9,function(t){var n=t.context,r=n.shape,i=n.direction,o=n.balanced;(A(r,"bpmn:Lane")||A(r,"bpmn:Participant"))&&(n.resizeConstraints=R9(r,i,o)),A(r,"bpmn:SubProcess")&&xt(r)&&(n.minDimensions=qk),A(r,"bpmn:TextAnnotation")&&(n.minDimensions=Xk)})}Qk.$inject=["eventBus"];var Qo=Math.abs,E9=Math.min,b9=Math.max;function Zk(e,t,n,r){var i=e[t];e[t]=i===void 0?n:r(n,i)}function Js(e,t,n){return Zk(e,t,n,E9)}function el(e,t,n){return Zk(e,t,n,b9)}var S9={top:20,left:50,right:20,bottom:20},C9={top:50,left:20,right:20,bottom:20};function R9(e,t,n){var r=mi(e),i=!0,o=!0,a=Sh(r,[r]),s=Ue(e),l={},u={},f=Dn(e),d=f?ex:tx;/n/.test(t)?u.top=s.bottom-d.height:/e/.test(t)?u.right=s.left+d.width:/s/.test(t)?u.bottom=s.top+d.height:/w/.test(t)&&(u.left=s.right-d.width),a.forEach(function(v){var x=Ue(v);f?(x.top<s.top-10&&(i=!1),x.bottom>s.bottom+10&&(o=!1)):(x.left<s.left-10&&(i=!1),x.right>s.right+10&&(o=!1)),/n/.test(t)&&(n&&Qo(s.top-x.bottom)<10&&el(l,"top",x.top+d.height),Qo(s.top-x.top)<5&&Js(u,"top",x.bottom-d.height)),/e/.test(t)&&(n&&Qo(s.right-x.left)<10&&Js(l,"right",x.right-d.width),Qo(s.right-x.right)<5&&el(u,"right",x.left+d.width)),/s/.test(t)&&(n&&Qo(s.bottom-x.top)<10&&Js(l,"bottom",x.bottom-d.height),Qo(s.bottom-x.bottom)<5&&el(u,"bottom",x.top+d.height)),/w/.test(t)&&(n&&Qo(s.left-x.right)<10&&el(l,"left",x.left+d.width),Qo(s.left-x.left)<5&&Js(u,"left",x.right-d.width))});var g=r.children.filter(function(v){return!v.hidden&&!v.waypoints&&(A(v,"bpmn:FlowElement")||A(v,"bpmn:Artifact"))}),y=f?S9:C9;return g.forEach(function(v){var x=Ue(v);/n/.test(t)&&(!f||i)&&Js(u,"top",x.top-y.top),/e/.test(t)&&(f||o)&&el(u,"right",x.right+y.right),/s/.test(t)&&(!f||o)&&el(u,"bottom",x.bottom+y.bottom),/w/.test(t)&&(f||i)&&Js(u,"left",x.left-y.left)}),{min:u,max:l}}var FE=1001;function Jk(e,t){e.on("resize.start",FE+500,function(n){var r=n.context,i=r.shape;(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))&&(r.balanced=!mu(n))}),e.on("resize.end",FE,function(n){var r=n.context,i=r.shape,o=r.canExecute,a=r.newBounds;if(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))return o&&(a=FC(a),t.resizeLane(i,a,r.balanced)),!1})}Jk.$inject=["eventBus","modeling"];var k9=500;function nx(e,t,n,r,i){n.invoke(ue,this);function o(f){return ht(f,["bpmn:ReceiveTask","bpmn:SendTask"])||P9(f,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(f){var d=e.getDefinitions(),g=d.get("rootElements");return!!At(g,Ii({id:f.id}))}function s(f){if(A(f,"bpmn:ErrorEventDefinition"))return"errorRef";if(A(f,"bpmn:EscalationEventDefinition"))return"escalationRef";if(A(f,"bpmn:MessageEventDefinition"))return"messageRef";if(A(f,"bpmn:SignalEventDefinition"))return"signalRef"}function l(f){if(ht(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.get("messageRef");var d=f.get("eventDefinitions"),g=d[0];return g.get(s(g))}function u(f,d){if(ht(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.set("messageRef",d);var g=f.get("eventDefinitions"),y=g[0];return y.set(s(y),d)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(f){var d=f.shape||f.element;if(o(d)){var g=fe(d),y=l(g),v;y&&!a(y)&&(v=e.getDefinitions().get("rootElements"),kn(v,y),f.addedRootElement=y)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(f){var d=f.addedRootElement;if(d){var g=e.getDefinitions().get("rootElements");yn(g,d)}},!0),t.on("copyPaste.copyElement",function(f){var d=f.descriptor,g=f.element;if(!(g.labelTarget||!o(g))){var y=fe(g),v=l(y);v&&(d.referencedRootElement=v)}}),t.on("copyPaste.pasteElement",k9,function(f){var d=f.descriptor,g=d.businessObject,y=d.referencedRootElement;y&&(a(y)||(y=r.copyElement(y,i.create(y.$type))),u(g,y),delete d.referencedRootElement)})}nx.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];Oe(nx,ue);function P9(e,t){return at(t)||(t=[t]),Ca(t,function(n){return Vl(e,n)})}var eP=Math.max;function tP(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,r=t.axis,i=t.start,o={};return U(n,function(a){var s=a.id;A(a,"bpmn:Participant")&&(o[s]=A9(a,r,i)),A(a,"bpmn:Lane")&&(o[s]=Dn(a)?ex:tx),A(a,"bpmn:SubProcess")&&xt(a)&&(o[s]=qk),A(a,"bpmn:TextAnnotation")&&(o[s]=Xk),A(a,"bpmn:Group")&&(o[s]=w9)}),o})}tP.$inject=["eventBus"];function T9(e){return e==="x"}function A9(e,t,n){var r=Dn(e);if(!D9(e))return r?$f:Ff;var i=T9(t),o={};return i?r?o=$f:o={width:N9(e,n,i),height:Ff.height}:r?o={width:$f.width,height:M9(e,n,i)}:o=Ff,o}function M9(e,t,n){var r;return r=O9(e,t,n),eP($f.height,r)}function N9(e,t,n){var r;return r=L9(e,t,n),eP(Ff.width,r)}function D9(e){return!!Oa(e).length}function O9(e,t,n){var r=Oa(e),i;return i=rx(r,t,n),e.height-i.height+ex.height}function L9(e,t,n){var r=Oa(e),i;return i=rx(r,t,n),e.width-i.width+tx.width}function rx(e,t,n){var r,i,o;for(r=0;r<e.length;r++)if(i=e[r],!n&&t>=i.y&&t<=i.y+i.height||n&&t>=i.x&&t<=i.x+i.width)return o=Oa(i),o.length?rx(o,t,n):i}var zE=400,B9=600,HE={x:180,y:160};function La(e,t,n,r,i,o,a){ue.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=r,this._bpmnFactory=i,this._bpmnjs=o,this._elementRegistry=a;var s=this;function l(d){return A(d,"bpmn:SubProcess")&&!xt(d)}function u(d){var g=d.shape,y=d.newRootElement,v=fe(g);y=s._addDiagram(y||v),d.newRootElement=e.addRootElement(y)}function f(d){var g=d.shape,y=fe(g);s._removeDiagram(y);var v=d.newRootElement=a.get(vo(y));e.removeRootElement(v)}this.executed("shape.create",function(d){var g=d.shape;l(g)&&u(d)},!0),this.postExecuted("shape.create",function(d){var g=d.shape,y=d.newRootElement;!y||!g.children||(s._showRecursively(g.children),s._moveChildrenToShape(g,y))},!0),this.reverted("shape.create",function(d){var g=d.shape;l(g)&&f(d)},!0),this.preExecuted("shape.delete",function(d){var g=d.shape;if(l(g)){var y=a.get(vo(g));y&&n.removeElements(y.children.slice())}},!0),this.executed("shape.delete",function(d){var g=d.shape;l(g)&&f(d)},!0),this.reverted("shape.delete",function(d){var g=d.shape;l(g)&&u(d)},!0),this.preExecuted("shape.replace",function(d){var g=d.oldShape,y=d.newShape;!l(g)||!l(y)||(d.oldRoot=e.removeRootElement(vo(g)))},!0),this.postExecuted("shape.replace",function(d){var g=d.newShape,y=d.oldRoot,v=e.findRoot(vo(g));if(!(!y||!v)){var x=y.children;n.moveElements(x,{x:0,y:0},v)}},!0),this.executed("element.updateProperties",function(d){var g=d.element;if(A(g,"bpmn:SubProcess")){var y=d.properties,v=d.oldProperties,x=v.id,C=y.id;if(x!==C){if(Lf(g)){a.updateId(g,es(C)),a.updateId(x,C);return}var P=a.get(es(x));P&&a.updateId(es(x),es(C))}}},!0),this.reverted("element.updateProperties",function(d){var g=d.element;if(A(g,"bpmn:SubProcess")){var y=d.properties,v=d.oldProperties,x=v.id,C=y.id;if(x!==C){if(Lf(g)){a.updateId(g,es(x)),a.updateId(C,x);return}var P=a.get(es(C));P&&a.updateId(P,es(x))}}},!0),t.on("element.changed",function(d){var g=d.element;if(Lf(g)){var y=g,v=a.get(Mw(y));!v||v===y||t.fire("element.changed",{element:v})}}),this.executed("shape.toggleCollapse",zE,function(d){var g=d.shape;A(g,"bpmn:SubProcess")&&(xt(g)?f(d):(u(d),s._showRecursively(g.children)))},!0),this.reverted("shape.toggleCollapse",zE,function(d){var g=d.shape;A(g,"bpmn:SubProcess")&&(xt(g)?f(d):(u(d),s._showRecursively(g.children)))},!0),this.postExecuted("shape.toggleCollapse",B9,function(d){var g=d.shape;if(A(g,"bpmn:SubProcess")){var y=d.newRootElement;y&&(xt(g)?s._moveChildrenToShape(y,g):s._moveChildrenToShape(g,y))}},!0),t.on("copyPaste.createTree",function(d){var g=d.element,y=d.children;if(l(g)){var v=vo(g),x=a.get(v);x&&y.push.apply(y,x.children)}}),t.on("copyPaste.copyElement",function(d){var g=d.descriptor,y=d.element,v=d.elements,x=y.parent,C=A(Rt(x),"bpmndi:BPMNPlane");if(C){var P=Mw(x),k=At(v,function(w){return w.id===P});k&&(g.parent=k.id)}}),t.on("copyPaste.pasteElement",function(d){var g=d.descriptor;g.parent&&(l(g.parent)||g.parent.hidden)&&(g.hidden=!0)})}Oe(La,ue);La.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,r=e.children,i;if(r){r=r.concat(r.reduce(function(u,f){return f.label&&f.label.parent!==e?u.concat(f.label):u},[]));var o=r.filter(function(u){return!u.hidden});if(!o.length){n.moveElements(r,{x:0,y:0},t,{autoResize:!1});return}var a=Nn(o);if(!t.x)i={x:HE.x-a.x,y:HE.y-a.y};else{var s=Je(t),l=Je(a);i={x:s.x-l.x,y:s.y-l.y}}n.moveElements(r,i,t,{autoResize:!1})}};La.prototype._showRecursively=function(e,t){var n=this,r=[];return e.forEach(function(i){i.hidden=!!t,r=r.concat(i),i.children&&(r=r.concat(n._showRecursively(i.children,i.collapsed||t)))}),r};La.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};La.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,r=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),i=t.create("bpmndi:BPMNDiagram",{plane:r});r.$parent=i;var o=n.createRoot({id:vo(e),type:e.$type,di:r,businessObject:e,collapsed:!0});return o};La.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,r=At(n,function(i){return i.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(r),1),r};La.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function ix(e,t){e.invoke(ue,this),this.postExecuted("shape.replace",function(n){var r=n.context.oldShape,i=n.context.newShape;if(!(!A(i,"bpmn:SubProcess")||!(A(r,"bpmn:Task")||A(r,"bpmn:CallActivity"))||!xt(i))){var o=I9(i);t.createShape({type:"bpmn:StartEvent"},o,i)}})}ix.$inject=["injector","modeling"];Oe(ix,ue);function I9(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function ox(e){ue.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;A(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&A(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}Oe(ox,ue);ox.$inject=["eventBus"];function ax(e,t){ue.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var r=n.shape;if(xt(r))return;var i=ku(r);i.forEach(function(a){var s=a.incoming.slice(),l=a.outgoing.slice();U(s,function(u){o(u,!0)}),U(l,function(u){o(u,!1)})});function o(a,s){i.indexOf(a.source)!==-1&&i.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,r,Je(r)):t.reconnectStart(a,r,Je(r)))}},!0)}Oe(ax,ue);ax.$inject=["eventBus","modeling"];var og=500;function sx(e,t,n){ue.call(this,e);function r(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function i(a,s){var l=a.children,u=s,f,d;return f=j9(l).concat([a]),d=jk(f),d?(u.width=Math.max(d.width,u.width),u.height=Math.max(d.height,u.height),u.x=d.x+(d.width-u.width)/2,u.y=d.y+(d.height-u.height)/2):(u.x=a.x+(a.width-u.width)/2,u.y=a.y+(a.height-u.height)/2),u}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],og,function(a){var s=a.context,l=s.shape;A(l,"bpmn:SubProcess")&&(l.collapsed?Rt(l).isExpanded=!1:(r(l.children),Rt(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],og,function(a){var s=a.context,l=s.shape;l.collapsed?Rt(l).isExpanded=!1:Rt(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],og,function(a){var s=a.context.shape,l=t.getDefaultSize(s),u;s.collapsed?u=o(s,l):u=i(s,l),n.resizeShape(s,u,null,{autoResize:s.collapsed?!1:"nwse"})})}Oe(sx,ue);sx.$inject=["eventBus","elementFactory","modeling"];function j9(e){return e.filter(function(t){return!t.hidden})}function lx(e,t,n,r){t.invoke(ue,this),this.preExecute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.businessObject;kt(a)||(A(a,"bpmn:Participant")&&xt(a)&&n.ids.unclaim(s.processRef.id),r.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(i){var o=i.context,a=o.connection,s=a.businessObject;r.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var i=e.getRootElement(),o=i.businessObject;A(i,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}Oe(lx,ue);lx.$inject=["canvas","injector","moddle","modeling"];function cx(e,t){ue.call(this,e),this.preExecute("connection.delete",function(n){var r=n.context,i=r.connection,o=i.source;$9(i,o)&&t.updateProperties(o,{default:null})})}Oe(cx,ue);cx.$inject=["eventBus","modeling"];function $9(e,t){if(!A(e,"bpmn:SequenceFlow"))return!1;var n=fe(t),r=fe(e);return n.get("default")===r}var F9=500,z9=5e3;function ux(e,t){ue.call(this,e);var n;function r(){return n=n||new H9,n.enter(),n}function i(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var s=n.leave();return s&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,z9,function(s){r()}),this.postExecuted(a,F9,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var l=s.context,u=l.shape,f=i();u.labelTarget||(A(u,"bpmn:Lane")&&f.addLane(u),A(u,"bpmn:FlowNode")&&f.addFlowNode(u))})}ux.$inject=["eventBus","modeling"];Oe(ux,ue);function H9(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function px(e,t){ue.call(this,e),this.postExecuted("elements.create",function(n){const r=n.context,i=r.elements;for(const o of i)V9(o)&&!U9(o)&&t.updateProperties(o,{isForCompensation:void 0})})}Oe(px,ue);px.$inject=["eventBus","modeling"];function V9(e){const t=fe(e);return t&&t.isForCompensation}function W9(e){return e&&A(e,"bpmn:BoundaryEvent")&&Vl(e,"bpmn:CompensateEventDefinition")}function U9(e){return e.incoming.filter(n=>W9(n.source)).length>0}const G9={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",T0],appendBehavior:["type",A0],associationBehavior:["type",M0],attachEventBehavior:["type",Eh],boundaryEventBehavior:["type",N0],compensateBoundaryEventBehaviour:["type",D0],createBehavior:["type",O0],createDataObjectBehavior:["type",L0],createParticipantBehavior:["type",B0],dataInputAssociationBehavior:["type",I0],dataStoreBehavior:["type",j0],deleteLaneBehavior:["type",$0],detachEventBehavior:["type",Ch],dropOnFlowBehavior:["type",F0],eventBasedGatewayBehavior:["type",z0],fixHoverBehavior:["type",$k],groupBehavior:["type",H0],importDockingFix:["type",Fk],isHorizontalFix:["type",V0],labelBehavior:["type",W0],layoutConnectionBehavior:["type",U0],messageFlowBehavior:["type",Y0],nonInterruptingBehavior:["type",q0],removeElementBehavior:["type",Q0],removeEmbeddedLabelBoundsBehavior:["type",X0],removeParticipantBehavior:["type",Z0],replaceConnectionBehavior:["type",J0],replaceElementBehaviour:["type",Th],resizeBehavior:["type",Qk],resizeLaneBehavior:["type",Jk],rootElementReferenceBehavior:["type",nx],spaceToolBehavior:["type",tP],subProcessPlaneBehavior:["type",La],subProcessStartEventBehavior:["type",ix],textAnnotationBehavior:["type",ox],toggleCollapseConnectionBehaviour:["type",ax],toggleElementCollapseBehaviour:["type",sx],unclaimIdBehavior:["type",lx],unsetDefaultFlowBehavior:["type",cx],updateFlowNodeRefsBehavior:["type",ux],setCompensationActivityAfterPasteBehavior:["type",px]};function nP(e,t){var n=rr(e,t,-15);return n!=="intersect"?n:null}function Gn(e){Si.call(this,e)}Oe(Gn,Si);Gn.$inject=["eventBus"];Gn.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return K9(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,r=e.hints||{},i=r.targetParent,o=r.targetAttach;if(o)return!1;i&&(n.parent=i);try{return zf(t,n)}finally{i&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,r=e.target;return zf(n,r,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return pP(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,r=e.target;return jt(r)&&!Td(t,r)?!1:Rs(t,function(i){return jt(i)?zf(i.source,i.target,i):i.host?Gc(i,i.host,null,n):zy(i,r,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,r=e.position;return Gc(n,t,null,r)||cP(n,t,r)||uP(n,t)||Td(n,t)}),this.addRule("shape.create",function(e){return zy(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Gc(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return gP(n,t)})};Gn.prototype.canConnectMessageFlow=hP;Gn.prototype.canConnectSequenceFlow=mP;Gn.prototype.canConnectDataAssociation=dx;Gn.prototype.canConnectAssociation=fP;Gn.prototype.canConnectCompensationAssociation=dP;Gn.prototype.canMove=uP;Gn.prototype.canAttach=Gc;Gn.prototype.canReplace=cP;Gn.prototype.canDrop=Ol;Gn.prototype.canInsert=Td;Gn.prototype.canCreate=zy;Gn.prototype.canConnect=zf;Gn.prototype.canResize=pP;Gn.prototype.canCopy=gP;function K9(e){return jy(e)?null:ht(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function jy(e){return!e||kt(e)}function Y9(e,t){return e===t}function VE(e){do{if(A(e,"bpmn:Process"))return fe(e);if(A(e,"bpmn:Participant"))return fe(e).processRef||fe(e)}while(e=e.parent)}function $y(e){return A(e,"bpmn:TextAnnotation")}function fx(e){return A(e,"bpmn:Group")&&!e.labelTarget}function rP(e){return A(e,"bpmn:BoundaryEvent")&&Qi(e,"bpmn:CompensateEventDefinition")}function Ah(e){return fe(e).isForCompensation}function q9(e,t){var n=VE(e),r=VE(t);return n===r}function X9(e){return A(e,"bpmn:InteractionNode")&&!A(e,"bpmn:BoundaryEvent")&&(!A(e,"bpmn:Event")||A(e,"bpmn:ThrowEvent")&&oP(e,"bpmn:MessageEventDefinition"))}function Q9(e){return A(e,"bpmn:InteractionNode")&&!Ah(e)&&(!A(e,"bpmn:Event")||A(e,"bpmn:CatchEvent")&&oP(e,"bpmn:MessageEventDefinition"))&&!(A(e,"bpmn:BoundaryEvent")&&!Qi(e,"bpmn:MessageEventDefinition"))}function WE(e){for(var t=e;t=t.parent;){if(A(t,"bpmn:FlowElementsContainer"))return fe(t);if(A(t,"bpmn:Participant"))return fe(t).processRef}return null}function iP(e,t){var n=WE(e),r=WE(t);return n===r}function Qi(e,t){var n=fe(e);return!!At(n.eventDefinitions||[],function(r){return A(r,t)})}function oP(e,t){var n=fe(e);return(n.eventDefinitions||[]).every(function(r){return A(r,t)})}function Z9(e){return A(e,"bpmn:FlowNode")&&!A(e,"bpmn:EndEvent")&&!tr(e)&&!(A(e,"bpmn:IntermediateThrowEvent")&&Qi(e,"bpmn:LinkEventDefinition"))&&!rP(e)&&!Ah(e)}function J9(e){return A(e,"bpmn:FlowNode")&&!A(e,"bpmn:StartEvent")&&!A(e,"bpmn:BoundaryEvent")&&!tr(e)&&!(A(e,"bpmn:IntermediateCatchEvent")&&Qi(e,"bpmn:LinkEventDefinition"))&&!Ah(e)}function eI(e){return A(e,"bpmn:ReceiveTask")||A(e,"bpmn:IntermediateCatchEvent")&&(Qi(e,"bpmn:MessageEventDefinition")||Qi(e,"bpmn:TimerEventDefinition")||Qi(e,"bpmn:ConditionalEventDefinition")||Qi(e,"bpmn:SignalEventDefinition"))}function tI(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Fy(e,t){var n=tI(t);return n.indexOf(e)!==-1}function zf(e,t,n){if(jy(e)||jy(t))return null;if(!A(n,"bpmn:DataAssociation")){if(hP(e,t))return{type:"bpmn:MessageFlow"};if(mP(e,t))return{type:"bpmn:SequenceFlow"}}var r=dx(e,t);return r||(dP(e,t)?{type:"bpmn:Association",associationDirection:"One"}:fP(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function Ol(e,t){return kt(e)||fx(e)?!0:A(t,"bpmn:Participant")&&!xt(t)?!1:A(e,"bpmn:Participant")?A(t,"bpmn:Process")||A(t,"bpmn:Collaboration"):ht(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:A(e,"bpmn:Lane")?A(t,"bpmn:Participant")||A(t,"bpmn:Lane"):A(e,"bpmn:BoundaryEvent")&&!nI(e)?!1:A(e,"bpmn:FlowElement")&&!A(e,"bpmn:DataStoreReference")?A(t,"bpmn:FlowElementsContainer")?xt(t):ht(t,["bpmn:Participant","bpmn:Lane"]):A(e,"bpmn:DataStoreReference")&&A(t,"bpmn:Collaboration")?Ca(fe(t).get("participants"),function(n){return!!n.get("processRef")}):ht(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?ht(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):A(e,"bpmn:MessageFlow")?A(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function nI(e){return fe(e).cancelActivity&&(aP(e)||sP(e))}function rI(e){return!kt(e)&&A(e,"bpmn:BoundaryEvent")}function iI(e){return A(e,"bpmn:Lane")}function oI(e){return rI(e)||A(e,"bpmn:IntermediateThrowEvent")&&aP(e)?!0:A(e,"bpmn:IntermediateCatchEvent")&&sP(e)}function aP(e){var t=fe(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function sP(e){return lP(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function lP(e,t){return t.some(function(n){return Qi(e,n)})}function aI(e){return A(e,"bpmn:ReceiveTask")&&At(e.incoming,function(t){return A(t.source,"bpmn:EventBasedGateway")})}function Gc(e,t,n,r){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var i=e[0];return kt(i)||!oI(i)||tr(t)||!A(t,"bpmn:Activity")||Ah(t)||r&&!nP(r,t)||aI(t)?!1:"attach"}function cP(e,t,n){if(!t)return!1;var r={replacements:[]};return U(e,function(i){tr(t)||A(i,"bpmn:StartEvent")&&i.type!=="label"&&Ol(i,t)&&(X4(i)||r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),(Q4(i)||Z4(i)||J4(i))&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),lP(i,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&A(t,"bpmn:SubProcess")&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"})),A(t,"bpmn:Transaction")||Qi(i,"bpmn:CancelEventDefinition")&&i.type!=="label"&&(A(i,"bpmn:EndEvent")&&Ol(i,t)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:EndEvent"}),A(i,"bpmn:BoundaryEvent")&&Gc(i,t,null,n)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:BoundaryEvent"}))}),r.replacements.length?r:!1}function uP(e,t){return Ca(e,iI)?!1:t?e.every(function(n){return Ol(n,t)}):!0}function zy(e,t,n,r){return t?kt(e)||fx(e)?!0:Y9(n,t)||n&&Fy(n,t)?!1:Ol(e,t)||Td(e,t):!1}function pP(e,t){return A(e,"bpmn:SubProcess")?xt(e)&&(!t||t.width>=100&&t.height>=80):!!(A(e,"bpmn:Lane")||A(e,"bpmn:Participant")||$y(e)||fx(e))}function sI(e,t){var n=$y(e),r=$y(t);return(n||r)&&n!==r}function fP(e,t){return Fy(t,e)||Fy(e,t)?!1:sI(e,t)?!0:!!dx(e,t)}function dP(e,t){return iP(e,t)&&rP(e)&&A(t,"bpmn:Activity")&&!cI(t,e)&&!tr(t)}function hP(e,t){return UE(e)&&!UE(t)?!1:X9(e)&&Q9(t)&&!q9(e,t)}function mP(e,t){return Z9(e)&&J9(t)&&iP(e,t)&&!(A(e,"bpmn:EventBasedGateway")&&!eI(t))}function dx(e,t){return ht(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ht(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:ht(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ht(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Td(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:ht(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!kt(t)&&A(e,"bpmn:FlowNode")&&!A(e,"bpmn:BoundaryEvent")&&Ol(e,t.parent)}function lI(e,t){return e&&t&&e.indexOf(t)!==-1}function gP(e,t){return kt(t)?!0:!(A(t,"bpmn:Lane")&&!lI(e,t.parent))}function UE(e){return Nl(e,"bpmn:Process")||Nl(e,"bpmn:Collaboration")}function cI(e,t){return e.attachers.includes(t)}const uI={__depends__:[ao],__init__:["bpmnRules"],bpmnRules:["type",Gn]};var pI=2e3;function yP(e,t){e.on("saveXML.start",pI,n);function n(){var r=t.getRootElements();U(r,function(i){var o=Rt(i),a,s;a=ku([i],!1),a=gt(a,function(l){return l!==i&&!l.labelTarget}),s=er(a,Rt),o.set("planeElement",s)})}}yP.$inject=["eventBus","canvas"];const fI={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",yP]};function Mh(e){ue.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,i=r.shape||r.connection,o=r.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.parent=a.parent),r.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,i=r.shape||r.connection,o=r.newParent||i.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.newParent=a.parent),r.newParentIndex=a.index)})}Mh.prototype.getOrdering=function(e,t){return null};Oe(Mh,ue);function hx(e,t){Mh.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(a){if(a.labelTarget)return{level:10};var s=At(n,function(l){return ht(a,[l.type])});return s&&s.order||{level:1}}function i(a){var s=a.order;if(s||(a.order=s=r(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,l){for(var u=s;u&&!ht(u,l);)u=u.parent;if(!u)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return u}this.getOrdering=function(a,s){if(a.labelTarget||A(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var l=i(a);l.containers&&(s=o(a,s,l.containers));var u=s.children.indexOf(a),f=wC(s.children,function(d){return!a.labelTarget&&d.labelTarget?!1:l.level<i(d).level});return f!==-1&&u!==-1&&u<f&&(f-=1),{index:f,parent:s}}}hx.$inject=["eventBus","canvas"];Oe(hx,Mh);const dI={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",hx]};function ju(){}ju.prototype.get=function(){return this._data};ju.prototype.set=function(e){this._data=e};ju.prototype.clear=function(){var e=this._data;return delete this._data,e};ju.prototype.isEmpty=function(){return!this._data};const hI={clipboard:["type",ju]};var mI="drop-ok",GE="drop-not-ok",KE="attach-ok",YE="new-parent",qE="create",gI=2e3;function vP(e,t,n,r,i){function o(l,u,f,d,g){if(!u)return!1;l=gt(l,function(k){var w=k.labelTarget;return!k.parent&&!(kt(k)&&l.indexOf(w)!==-1)});var y=At(l,function(k){return!jt(k)}),v=!1,x=!1,C=!1;QE(l)&&(v=i.allowed("shape.attach",{position:f,shape:y,target:u})),v||(QE(l)?C=i.allowed("shape.create",{position:f,shape:y,source:d,target:u}):C=i.allowed("elements.create",{elements:l,position:f,target:u}));var P=g.connectionTarget;return C||v?(y&&d&&(x=i.allowed("connection.create",{source:P===d?y:d,target:P===d?d:y,hints:{targetParent:u,targetAttach:v}})),{attach:v,connect:x}):C===null||v===null?null:!1}function a(l,u){[KE,mI,GE,YE].forEach(function(f){f===u?e.addMarker(l,f):e.removeMarker(l,f)})}n.on(["create.move","create.hover"],function(l){var u=l.context,f=u.elements,d=l.hover,g=u.source,y=u.hints||{};if(!d){u.canExecute=!1,u.target=null;return}XE(l);var v={x:l.x,y:l.y},x=u.canExecute=d&&o(f,d,v,g,y);d&&x!==null&&(u.target=d,x&&x.attach?a(d,KE):a(d,x?YE:GE))}),n.on(["create.end","create.out","create.cleanup"],function(l){var u=l.hover;u&&a(u,null)}),n.on("create.end",function(l){var u=l.context,f=u.source,d=u.shape,g=u.elements,y=u.target,v=u.canExecute,x=v&&v.attach,C=v&&v.connect,P=u.hints||{};if(v===!1||!y)return!1;XE(l);var k={x:l.x,y:l.y};C?d=r.appendShape(f,d,k,y,{attach:x,connection:C===!0?{}:C,connectionTarget:P.connectionTarget}):(g=r.createElements(g,k,y,q({},P,{attach:x})),d=At(g,function(w){return!jt(w)})),q(u,{elements:g,shape:d}),q(l,{elements:g,shape:d})});function s(){var l=t.context();l&&l.prefix===qE&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],gI,function(){n.off("elements.changed",s)})}),this.start=function(l,u,f){at(u)||(u=[u]);var d=At(u,function(v){return!jt(v)});if(d){f=q({elements:u,hints:{},shape:d},f||{}),U(u,function(v){Ze(v.x)||(v.x=0),Ze(v.y)||(v.y=0)});var g=gt(u,function(v){return!v.hidden}),y=Nn(g);U(u,function(v){jt(v)&&(v.waypoints=er(v.waypoints,function(x){return{x:x.x-y.x-y.width/2,y:x.y-y.y-y.height/2}})),q(v,{x:v.x-y.x-y.width/2,y:v.y-y.y-y.height/2})}),t.init(l,qE,{cursor:"grabbing",autoActivate:!0,data:{shape:d,elements:u,context:f}})}}}vP.$inject=["canvas","dragging","eventBus","modeling","rules"];function XE(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function QE(e){return e&&e.length===1&&!jt(e[0])}var yI=750;function xP(e,t,n,r,i){function o(a){var s=ze("g");Pe(s,i.cls("djs-drag-group",["no-events"]));var l=ze("g");return a.forEach(function(u){var f;u.hidden||(u.waypoints?(f=n._createContainer("connection",l),n.drawConnection(hs(f),u)):(f=n._createContainer("shape",l),n.drawShape(hs(f),u),Vn(f,u.x,u.y)),r.addDragger(u,s,f))}),s}t.on("create.move",yI,function(a){var s=a.hover,l=a.context,u=l.elements,f=l.dragGroup;f||(f=l.dragGroup=o(u));var d;s?(f.parentNode||(d=e.getActiveLayer(),tt(d,f)),Vn(f,a.x,a.y)):Cn(f)}),t.on("create.cleanup",function(a){var s=a.context,l=s.dragGroup;l&&Cn(l)})}xP.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Nh={__depends__:[Io,Ql,ao,io],__init__:["create","createPreview"],create:["type",vP],createPreview:["type",xP]};function mx(e){var t=this;this._lastMoveEvent=null;function n(r){t._lastMoveEvent=r}e.on("canvas.init",function(r){var i=t._svg=r.svg;i.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}mx.$inject=["eventBus"];mx.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||vI(0,0)};function vI(e,t){var n=document.createEvent("MouseEvent"),r=e,i=t,o=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,i,o,a,!1,!1,!1,!1,0,null),n}const $u={__init__:["mouse"],mouse:["type",mx]};function zi(e,t,n,r,i,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=r,this._eventBus=i,this._modeling=o,this._mouse=a,this._rules=s,i.on("copyPaste.copyElement",function(l){var u=l.descriptor,f=l.element,d=l.elements;u.priority=1,u.id=f.id;var g=At(d,function(y){return y===f.parent});g&&(u.parent=f.parent.id),xI(f)&&(u.priority=2,u.host=f.host.id),jt(f)&&(u.priority=3,u.source=f.source.id,u.target=f.target.id,u.waypoints=_I(f)),kt(f)&&(u.priority=4,u.labelTarget=f.labelTarget.id),U(["x","y","width","height"],function(y){Ze(f[y])&&(u[y]=f[y])}),u.hidden=f.hidden,u.collapsed=f.collapsed}),i.on("copyPaste.pasteElements",function(l){var u=l.hints;q(u,{createElementsBehavior:!1})})}zi.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];zi.prototype.copy=function(e){var t,n;return at(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(at(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};zi.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};zi.prototype._paste=function(e,t,n,r){U(e,function(o){Ze(o.x)||(o.x=0),Ze(o.y)||(o.y=0)});var i=Nn(e);return U(e,function(o){jt(o)&&(o.waypoints=er(o.waypoints,function(a){return{x:a.x-i.x-i.width/2,y:a.y-i.y-i.height/2}})),q(o,{x:o.x-i.x-i.width/2,y:o.y-i.y-i.height/2})}),this._modeling.createElements(e,n,t,q({},r))};zi.prototype._createElements=function(e){var t=this,n=this._eventBus,r={},i=[];return U(e,function(o,a){o=no(o,"priority"),U(o,function(s){var l=q({},wi(s,["priority"]));r[s.parent]?l.parent=r[s.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:l});var u;if(jt(l)){l.source=r[s.source],l.target=r[s.target],u=r[s.id]=t.createConnection(l),i.push(u);return}if(kt(l)){l.labelTarget=r[l.labelTarget],u=r[s.id]=t.createLabel(l),i.push(u);return}l.host&&(l.host=r[l.host]),u=r[s.id]=t.createShape(l),i.push(u)})}),i};zi.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(wi(e,["id"]));return t};zi.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(wi(e,["id"]));return t};zi.prototype.createShape=function(e){var t=this._elementFactory.createShape(wi(e,["id"]));return t};zi.prototype.hasRelations=function(e,t){var n,r,i;return!(jt(e)&&(r=At(t,Ii({id:e.source.id})),i=At(t,Ii({id:e.target.id})),!r||!i)||kt(e)&&(n=At(t,Ii({id:e.labelTarget.id})),!n))};zi.prototype.createTree=function(e){var t=this._rules,n=this,r={},i=[],o=eh(e);function a(u,f){return t.allowed("element.copy",{element:u,elements:f})}function s(u,f){var d=At(i,function(g){return u===g.element});if(!d){i.push({element:u,depth:f});return}d.depth<f&&(i=l(d,i),i.push({element:d.element,depth:f}))}function l(u,f){var d=f.indexOf(u);return d!==-1&&f.splice(d,1),f}return Ps(o,function(u,f,d){if(kt(u))return;U(u.labels,function(v){s(v,d)});function g(v){v&&v.length&&U(v,function(x){U(x.labels,function(C){s(C,d)}),s(x,d)})}U([u.attachers,u.incoming,u.outgoing],g),s(u,d);var y=[];return u.children&&(y=u.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:u,children:y}),y}),e=er(i,function(u){return u.element}),i=er(i,function(u){return u.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:u.descriptor,element:u.element,elements:e}),u}),i=no(i,function(u){return u.descriptor.priority}),e=er(i,function(u){return u.element}),U(i,function(u){var f=u.depth;if(!n.hasRelations(u.element,e)){JE(u.element,e);return}if(!a(u.element,e)){JE(u.element,e);return}r[f]||(r[f]=[]),r[f].push(u.descriptor)}),r};function xI(e){return!!e.host}function _I(e){return er(e.waypoints,function(t){return t=ZE(t),t.original&&(t.original=ZE(t.original)),t})}function ZE(e){return q({},e)}function JE(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const wI={__depends__:[hI,Nh,$u,ao],__init__:["copyPaste"],copyPaste:["type",zi]};function ag(e,t,n){at(n)||(n=[n]),U(n,function(r){_s(e[r])||(t[r]=e[r])})}var sg=750;function _P(e,t,n){function r(l,u){var f=e.create(l.$type);return n.copyElement(l,f,null,u)}t.on("copyPaste.copyElement",sg,function(l){var u=l.descriptor,f=l.element,d=fe(f);if(kt(f))return u;var g=u.businessObject=r(d,!0),y=u.di=r(Rt(f),!0);y.bpmnElement=g,ag(g,u,"name"),ag(y,u,"isExpanded"),d.default&&(u.default=d.default.id)});var i="-bpmn-js-refs";function o(l){return l[i]=l[i]||{}}function a(l,u){l[i]=u}function s(l,u,f){var d=fe(l);return l.default&&(f[l.default]={element:d,property:"default"}),l.host&&(fe(l).attachedToRef=fe(u[l.host])),wi(f,$r(f,function(g,y,v){var x=y.element,C=y.property;return v===l.id&&(x.set(C,d),g.push(l.id)),g},[]))}t.on("copyPaste.pasteElement",function(l){var u=l.cache,f=l.descriptor,d=f.businessObject,g=f.di;if(kt(f)){f.businessObject=fe(u[f.labelTarget]),f.di=Rt(u[f.labelTarget]);return}d=f.businessObject=r(d),g=f.di=r(g),g.bpmnElement=d,ag(f,d,["isExpanded","name"]),f.type=d.$type}),t.on("copyPaste.copyElement",sg,function(l){var u=l.descriptor,f=l.element;if(A(f,"bpmn:Participant")){var d=fe(f);d.processRef&&(u.processRef=r(d.processRef,!0))}}),t.on("copyPaste.pasteElement",function(l){var u=l.descriptor,f=u.processRef;f&&(u.processRef=r(f))}),t.on("copyPaste.pasteElement",sg,function(l){var u=l.cache,f=l.descriptor;a(u,s(f,u,o(u)))})}_P.$inject=["bpmnFactory","eventBus","moddleCopy"];var EI=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function Fu(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(r){var i=r.propertyNames;if(!(!i||!i.length))return no(i,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(r){var i=r.parent,o=jn(i)&&i.$descriptor,a=r.propertyName;if(a&&EI.indexOf(a)!==-1||a&&o&&!At(o.properties,Ii({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(r){var i=r.property;if(bI(i,"bpmn:ExtensionElements")&&(!i.values||!i.values.length))return!1})}Fu.$inject=["eventBus","bpmnFactory","moddle"];Fu.prototype.copyElement=function(e,t,n,r=!1){var i=this;n&&!at(n)&&(n=[n]),n=n||Hy(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:r});return o===!1||(at(o)&&(n=o),U(n,function(a){var s;xr(e,a)&&(s=e.get(a));var l=i.copyProperty(s,t,a,r);if(Bn(l)){var u=i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:l,propertyName:a});u!==!1&&t.set(a,l)}})),t};Fu.prototype.copyProperty=function(e,t,n,r=!1){var i=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:r});if(o!==!1){if(o)return jn(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,r):at(e)?$r(e,function(s,l){return o=i.copyProperty(l,t,n,r),o?s.concat(o):s},[]):jn(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=i._bpmnFactory.create(e.$type),o.$parent=t,o=i.copyElement(e,o,null,r),o):e}};Fu.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Hy(e,t){return $r(e.properties,function(n,r){return t&&r.default?n:n.concat(r.name)},[])}function bI(e,t){return e&&Rn(e.$instanceOf)&&e.$instanceOf(t)}const wP={__depends__:[wI],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",_P],moddleCopy:["type",Fu]};var eb=Math.round;function gx(e,t){this._modeling=e,this._eventBus=t}gx.$inject=["modeling","eventBus"];gx.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,i=this._eventBus;i.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,l=t.y||e.y,u=eb(s+o/2),f=eb(l+a/2),d=r.replaceShape(e,q({},t,{x:u,y:f,width:o,height:a}),n);return i.fire("replace.end",{element:e,newElement:d,hints:n}),d};function EP(e,t){t.on("replace.end",500,function(n){const{newElement:r,hints:i={}}=n;i.select!==!1&&e.select(r)})}EP.$inject=["selection","eventBus"];const SI={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",EP],replace:["type",gx]};function CI(e,t,n){at(n)||(n=[n]),U(n,function(r){_s(e[r])||(t[r]=e[r])})}var RI=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function kI(e,t){var n=e&&xr(e,"collapsed")?e.collapsed:!xt(e),r;return t&&(xr(t,"collapsed")||xr(t,"isExpanded"))?r=xr(t,"collapsed")?t.collapsed:!t.isExpanded:r=n,n!==r}function bP(e,t,n,r,i,o){function a(s,l,u){u=u||{};var f=l.type,d=s.businessObject;if(lf(d)&&f==="bpmn:SubProcess"&&kI(s,l))return r.toggleCollapse(s),s;var g=e.create(f),y={type:f,businessObject:g};y.di={},f==="bpmn:ExclusiveGateway"&&(y.di.isMarkerVisible=!0),CI(s.di,y.di,["fill","stroke","background-color","border-color","color"]);var v=Hy(d.$descriptor),x=Hy(g.$descriptor,!0),C=PI(v,x);q(g,Fi(l,RI));var P=gt(C,function(b){return b==="eventDefinitions"?tb(s,l.eventDefinitionType):b==="loopCharacteristics"?!tr(g):xr(g,b)||b==="processRef"&&l.isExpanded===!1||b==="triggeredByEvent"?!1:b==="isForCompensation"?!tr(g):!0});if(g=n.copyElement(d,g,P),l.eventDefinitionType&&(tb(g,l.eventDefinitionType)||(y.eventDefinitionType=l.eventDefinitionType,y.eventDefinitionAttrs=l.eventDefinitionAttrs)),A(d,"bpmn:Activity")){if(lf(d))y.isExpanded=xt(s);else if(l&&xr(l,"isExpanded")){y.isExpanded=l.isExpanded;var k=t.getDefaultSize(g,{isExpanded:y.isExpanded});y.width=k.width,y.height=k.height,y.x=s.x-(y.width-s.width)/2,y.y=s.y-(y.height-s.height)/2}xt(s)&&!A(d,"bpmn:Task")&&y.isExpanded&&(y.width=s.width,y.height=s.height)}if(lf(d)&&!lf(g)&&(u.moveChildren=!1),A(d,"bpmn:Participant")){l.isExpanded===!0?g.processRef=e.create("bpmn:Process"):u.moveChildren=!1;var w=Dn(s);Rt(s).isHorizontal||(Rt(y).isHorizontal=w),y.width=w?s.width:t.getDefaultSize(y).width,y.height=w?t.getDefaultSize(y).height:s.height}return o.allowed("shape.resize",{shape:g})||(y.height=t.getDefaultSize(y).height,y.width=t.getDefaultSize(y).width),g.name=d.name,ht(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&ht(g,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(g.default=d.default),l.host&&!A(d,"bpmn:BoundaryEvent")&&A(g,"bpmn:BoundaryEvent")&&(y.host=l.host),(y.type==="bpmn:DataStoreReference"||y.type==="bpmn:DataObjectReference")&&(y.x=s.x+(s.width-y.width)/2),i.replaceElement(s,y,{...u,targetElement:l})}this.replaceElement=a}bP.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function lf(e){return A(e,"bpmn:SubProcess")}function tb(e,t){var n=fe(e);return t&&n.get("eventDefinitions").some(function(r){return A(r,t)})}function PI(e,t){return e.filter(function(n){return t.includes(n)})}const SP={__depends__:[wP,SI,io],bpmnReplace:["type",bP]};var TI=250;function Ds(e){this._eventBus=e,this._tools=[],this._active=null}Ds.$inject=["eventBus"];Ds.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Ds.prototype.isActive=function(e){return e&&this._active===e};Ds.prototype.length=function(e){return this._tools.length};Ds.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Ds.prototype.bindEvents=function(e,t){var n=this._eventBus,r=[];n.on(t.tool+".init",function(i){var o=i.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),U(t,function(i){r.push(i+".ended"),r.push(i+".canceled")}),n.on(r,TI,function(i){this._active&&(AI(i)||this.setActive(null))},this)};function AI(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Ra(t,'.group[data-group="tools"]')}const Dh={__depends__:[Io],__init__:["toolManager"],toolManager:["type",Ds]};function MI(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function NI(e,t){var n=[];return U(e.concat(t),function(r){var i=r.incoming,o=r.outgoing;U(i.concat(o),function(a){var s=a.source,l=a.target;(Cc(e,s)||Cc(e,l)||Cc(t,s)||Cc(t,l))&&(Cc(n,a)||n.push(a))})}),n}function Cc(e,t){return e.indexOf(t)!==-1}function DI(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,s=n.x,l=n.y;switch(t){case"n":return{x:r,y:i+l,width:o,height:a-l};case"s":return{x:r,y:i,width:o,height:a+l};case"w":return{x:r+s,y:i,width:o-s,height:a};case"e":return{x:r,y:i,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var lg=Math.abs,OI=Math.round,mo={x:"width",y:"height"},CP="crosshair",Zo={n:"top",w:"left",s:"bottom",e:"right"},LI=1500,cf={n:"s",w:"e",s:"n",e:"w"},uf=20;function Ci(e,t,n,r,i,o,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=r,this._rules=i,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",LI,function(l){var u=l.context,f=u.initialized;f||(f=u.initialized=s.init(l,u)),f&&rb(l)}),n.on("spaceTool.end",function(l){var u=l.context,f=u.axis,d=u.direction,g=u.movingShapes,y=u.resizingShapes,v=u.start;if(u.initialized){rb(l);var x={x:0,y:0};x[f]=OI(l["d"+f]),s.makeSpace(g,y,x,d,v),n.once("spaceTool.ended",function(C){s.activateSelection(C.originalEvent,!0,!0)})}})}Ci.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Ci.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:CP,data:{context:{reactivate:n}},trapClick:!1})};Ci.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:CP,data:{context:{}}})};Ci.prototype.makeSpace=function(e,t,n,r,i){return this._modeling.createSpace(e,t,n,r,i)};Ci.prototype.init=function(e,t){var n=lg(e.dx)>lg(e.dy)?"x":"y",r=e["d"+n],i=e[n]-r;if(lg(r)<5)return!1;r<0&&(r*=-1),mu(e)&&(r*=-1);var o=MI(n,r),a=this._canvas.getRootElement();!wd(e)&&e.hover&&(a=e.hover);var s=[...ku(a,!0),...a.attachers||[]],l=this.calculateAdjustments(s,n,r,i),u=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:l.resizingShapes,start:i}),f=BI(l,n,o,i,u);return q(t,l,{axis:n,direction:o,spaceToolConstraints:f,start:i}),hh("resize-"+(n==="x"?"ew":"ns")),!0};Ci.prototype.calculateAdjustments=function(e,t,n,r){var i=this._rules,o=[],a=[],s=[],l=[];function u(g){o.includes(g)||o.push(g);var y=g.label;y&&!o.includes(y)&&o.push(y)}function f(g){a.includes(g)||a.push(g)}U(e,function(g){if(!(!g.parent||kt(g))){if(jt(g)){l.push(g);return}var y=g[t],v=y+g[mo[t]];if(II(g)&&(n>0&&Je(g)[t]>r||n<0&&Je(g)[t]<r)){s.push(g);return}if(n>0&&y>r||n<0&&v<r){u(g);return}if(y<r&&v>r&&i.allowed("shape.resize",{shape:g})){f(g);return}}}),U(o,function(g){var y=g.attachers;y&&U(y,function(v){u(v)})});var d=o.concat(a);return U(s,function(g){var y=g.host;us(d,y)&&u(g)}),d=o.concat(a),U(l,function(g){var y=g.source,v=g.target,x=g.label;us(d,y)&&us(d,v)&&x&&u(x)}),{movingShapes:o,resizingShapes:a}};Ci.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Ci.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function nb(e){return{top:e.top-uf,right:e.right+uf,bottom:e.bottom+uf,left:e.left-uf}}function rb(e){var t=e.context,n=t.spaceToolConstraints;if(n){var r,i;Ze(n.left)&&(r=Math.max(e.x,n.left),e.dx=e.dx+r-e.x,e.x=r),Ze(n.right)&&(r=Math.min(e.x,n.right),e.dx=e.dx+r-e.x,e.x=r),Ze(n.top)&&(i=Math.max(e.y,n.top),e.dy=e.dy+i-e.y,e.y=i),Ze(n.bottom)&&(i=Math.min(e.y,n.bottom),e.dy=e.dy+i-e.y,e.y=i)}}function BI(e,t,n,r,i){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},l,u;return U(a,function(f){var d=f.attachers,g=f.children,y=Ue(f),v=gt(g,function(Y){return!jt(Y)&&!kt(Y)&&!us(o,Y)&&!us(a,Y)}),x=gt(g,function(Y){return!jt(Y)&&!kt(Y)&&us(o,Y)}),C,P,k,w=[],b=[],D,I,H,L;v.length&&(P=nb(Ue(Nn(v))),C=r-y[Zo[n]]+P[Zo[n]],n==="n"?s.bottom=u=Ze(u)?Math.min(u,C):C:n==="w"?s.right=u=Ze(u)?Math.min(u,C):C:n==="s"?s.top=l=Ze(l)?Math.max(l,C):C:n==="e"&&(s.left=l=Ze(l)?Math.max(l,C):C)),x.length&&(k=nb(Ue(Nn(x))),C=r-k[Zo[cf[n]]]+y[Zo[cf[n]]],n==="n"?s.bottom=u=Ze(u)?Math.min(u,C):C:n==="w"?s.right=u=Ze(u)?Math.min(u,C):C:n==="s"?s.top=l=Ze(l)?Math.max(l,C):C:n==="e"&&(s.left=l=Ze(l)?Math.max(l,C):C)),d&&d.length&&(d.forEach(function(Y){us(o,Y)?w.push(Y):b.push(Y)}),w.length&&(D=Ue(Nn(w.map(Je))),I=y[Zo[cf[n]]]-(D[Zo[cf[n]]]-r)),b.length&&(H=Ue(Nn(b.map(Je))),L=H[Zo[n]]-(y[Zo[n]]-r)),n==="n"?(C=Math.min(I||1/0,L||1/0),s.bottom=u=Ze(u)?Math.min(u,C):C):n==="w"?(C=Math.min(I||1/0,L||1/0),s.right=u=Ze(u)?Math.min(u,C):C):n==="s"?(C=Math.max(I||-1/0,L||-1/0),s.top=l=Ze(l)?Math.max(l,C):C):n==="e"&&(C=Math.max(I||-1/0,L||-1/0),s.left=l=Ze(l)?Math.max(l,C):C));var X=i&&i[f.id];X&&(n==="n"?(C=r+f[mo[t]]-X[mo[t]],s.bottom=u=Ze(u)?Math.min(u,C):C):n==="w"?(C=r+f[mo[t]]-X[mo[t]],s.right=u=Ze(u)?Math.min(u,C):C):n==="s"?(C=r-f[mo[t]]+X[mo[t]],s.top=l=Ze(l)?Math.max(l,C):C):n==="e"&&(C=r-f[mo[t]]+X[mo[t]],s.left=l=Ze(l)?Math.max(l,C):C))}),s}}function us(e,t){return e.indexOf(t)!==-1}function II(e){return!!e.host}var cg="djs-dragging",ib="djs-resizing",jI=250,pf=Math.max;function RP(e,t,n,r,i){function o(a,s){U(a,function(l){i.addDragger(l,s),n.addMarker(l,cg)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),l=a.context,u={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},f=ze("g");Pe(f,r.cls("djs-crosshair-group",["no-events"])),tt(s,f);var d=ze("path");Pe(d,"d",u.x),Ct(d).add("djs-crosshair"),tt(f,d);var g=ze("path");Pe(g,"d",u.y),Ct(g).add("djs-crosshair"),tt(f,g),l.crosshairGroup=f}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;Vn(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,l=s.crosshairGroup;l&&Cn(l)}),e.on("spaceTool.move",jI,function(a){var s=a.context,l=s.line,u=s.axis,f=s.movingShapes,d=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var g=n.getLayer("space");l=ze("path"),Pe(l,"d","M0,0 L0,0"),Ct(l).add("djs-crosshair"),tt(g,l),s.line=l;var y=ze("g");Pe(y,r.cls("djs-drag-group",["no-events"])),tt(n.getActiveLayer(),y),o(f,y);var v=s.movingConnections=t.filter(function(b){var D=!1;U(f,function(X){U(X.outgoing,function(Y){b===Y&&(D=!0)})});var I=!1;U(f,function(X){U(X.incoming,function(Y){b===Y&&(I=!0)})});var H=!1;U(d,function(X){U(X.outgoing,function(Y){b===Y&&(H=!0)})});var L=!1;return U(d,function(X){U(X.incoming,function(Y){b===Y&&(L=!0)})}),jt(b)&&(D||H)&&(I||L)});o(v,y),s.dragGroup=y}if(!s.frameGroup){var x=ze("g");Pe(x,r.cls("djs-frame-group",["no-events"])),tt(n.getActiveLayer(),x);var C=[];U(d,function(b){var D=i.addFrame(b,x),I=D.getBBox();C.push({element:D,initialBounds:I}),n.addMarker(b,ib)}),s.frameGroup=x,s.frames=C}var P={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};Pe(l,{d:P[u]});var k={x:"y",y:"x"},w={x:a.dx,y:a.dy};w[k[s.axis]]=0,Vn(s.dragGroup,w.x,w.y),U(s.frames,function(b){var D=b.element,I=b.initialBounds,H,L;s.direction==="e"?Pe(D,{width:pf(I.width+w.x,5)}):(H=pf(I.width-w.x,5),Pe(D,{width:H,x:I.x+I.width-H})),s.direction==="s"?Pe(D,{height:pf(I.height+w.y,5)}):(L=pf(I.height-w.y,5),Pe(D,{height:L,y:I.y+I.height-L}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,l=s.movingShapes,u=s.movingConnections,f=s.resizingShapes,d=s.line,g=s.dragGroup,y=s.frameGroup;U(l,function(v){n.removeMarker(v,cg)}),U(u,function(v){n.removeMarker(v,cg)}),g&&(Cn(d),Cn(g)),U(f,function(v){n.removeMarker(v,ib)}),y&&Cn(y)})}RP.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const $I={__init__:["spaceToolPreview"],__depends__:[Io,ao,Dh,Ql,$u],spaceTool:["type",Ci],spaceToolPreview:["type",RP]};function Oh(e){e.invoke(Ci,this)}Oh.$inject=["injector"];Oe(Oh,Ci);Oh.prototype.calculateAdjustments=function(e,t,n,r){var i=Ci.prototype.calculateAdjustments.call(this,e,t,n,r);return i.resizingShapes=i.resizingShapes.filter(function(o){return!(A(o,"bpmn:TextAnnotation")||FI(o)&&(t==="y"&&Dn(o)||t==="x"&&!Dn(o)))}),i};function FI(e){return A(e,"bpmn:Participant")&&!fe(e).processRef}const kP={__depends__:[$I],spaceTool:["type",Oh]};function tn(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}tn.$inject=["eventBus","injector"];tn.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};tn.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i};tn.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};tn.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};tn.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};tn.prototype.register=function(e,t){this._setHandler(e,t)};tn.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};tn.prototype.canUndo=function(){return!!this._getUndoAction()};tn.prototype.canRedo=function(){return!!this._getRedoAction()};tn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};tn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};tn.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};tn.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const o of r)if(i=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return i};tn.prototype._createId=function(){return this._uid++};tn.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};tn.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()};tn.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)};tn.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:EC("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};tn.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=at(e)?e:[e],t.dirty=t.dirty.concat(e))};tn.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};tn.prototype._revertedAction=function(e){this._stackIdx--};tn.prototype._getHandler=function(e){return this._handlerMap[e]};tn.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const zI={commandStack:["type",tn]};function ga(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var HI=250,ob=1400;function yx(e,t,n){ue.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",ob,function(i){var o=i.context,a=o.shapes,s=o.validatedShapes;o.shapes=ab(a),o.validatedShapes=ab(s)}),r&&t.on("shape.move.start",HI,function(i){var o=i.context,a=o.shapes,s=[];U(a,function(l){U(l.labels,function(u){!u.hidden&&o.shapes.indexOf(u)===-1&&s.push(u),l.labelTarget&&s.push(l)})}),U(s,function(l){r.makeDraggable(o,l,!0)})}),this.preExecuted("elements.move",ob,function(i){var o=i.context,a=o.closure,s=a.enclosedElements,l=[];U(s,function(u){U(u.labels,function(f){s[f.id]||l.push(f)})}),a.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(i){var o=i.context,a=o.connection||o.shape;ga(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=Yv(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(i){var o=i.context,a=o.shape,s=o.labelTarget,l=o.labelTargetIndex;s&&(kn(s.labels,a,l),a.labelTarget=s)})}Oe(yx,ue);yx.$inject=["injector","eventBus","modeling"];function ab(e){return gt(e,function(t){return e.indexOf(t.labelTarget)===-1})}const VI={__init__:["labelSupport"],labelSupport:["type",yx]};var WI=251,sb=1401,lb="attach-ok";function vx(e,t,n,r,i){ue.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",sb,function(a){var s=a.context,l=s.shapes,u=s.validatedShapes;s.shapes=UI(l),s.validatedShapes=GI(u)}),o&&t.on("shape.move.start",WI,function(a){var s=a.context,l=s.shapes,u=Vy(l);U(u,function(f){o.makeDraggable(s,f,!0),U(f.labels,function(d){o.makeDraggable(s,d,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,l=s.shapes;if(l.length===1){var u=l[0],f=u.host;f&&(n.addMarker(f,lb),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(f,lb)}))}}),this.preExecuted("elements.move",sb,function(a){var s=a.context,l=s.closure,u=s.shapes,f=Vy(u);U(f,function(d){l.add(d,l.topLevel[d.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,l=s.shapes,u=s.newHost,f;u&&l.length!==1||(u?f=l:f=gt(l,function(d){var g=d.host;return KI(d)&&!YI(l,g)}),U(f,function(d){i.updateAttachment(d,u)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;U(s,function(l){U(l.attachers,function(u){U(u.outgoing.slice(),function(f){var d=r.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||i.removeConnection(f)}),U(u.incoming.slice(),function(f){var d=r.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||i.removeConnection(f)})})})}),this.postExecute("shape.create",function(a){var s=a.context,l=s.shape,u=s.host;u&&i.updateAttachment(l,u)}),this.postExecute("shape.replace",function(a){var s=a.context,l=s.oldShape,u=s.newShape;ga(l.attachers,function(f){var d=r.allowed("elements.move",{target:u,shapes:[f]});d==="attach"?i.updateAttachment(f,u):i.removeShape(f)}),u.attachers.length&&U(u.attachers,function(f){var d=IE(f,l,u);i.moveShape(f,d,f.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,u=s.oldBounds,f=s.newBounds,d=l.attachers,g=s.hints||{};g.attachSupport!==!1&&U(d,function(y){var v=IE(y,u,f);i.moveShape(y,v,y.parent),U(y.labels,function(x){i.moveShape(x,v,x.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;ga(s.attachers,function(l){i.removeShape(l)}),s.host&&i.updateAttachment(s,null)})}Oe(vx,ue);vx.$inject=["injector","eventBus","canvas","rules","modeling"];function Vy(e){return Hv(er(e,function(t){return t.attachers||[]}))}function UI(e){var t=Vy(e);return MM("id",e,t)}function GI(e){var t=Fl(e,"id");return gt(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function KI(e){return!!e.host}function YI(e,t){return e.indexOf(t)!==-1}const qI={__depends__:[ao],__init__:["attachSupport"],attachSupport:["type",vx]};function Ri(e){this._model=e}Ri.$inject=["moddle"];Ri.prototype._needsId=function(e){return ht(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};Ri.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;A(e,"bpmn:Activity")?t="Activity":A(e,"bpmn:Event")?t="Event":A(e,"bpmn:Gateway")?t="Gateway":ht(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Ri.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};Ri.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};Ri.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",q({bpmnElement:e,bounds:this.createDiBounds()},t))};Ri.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Ri.prototype.createDiWaypoints=function(e){var t=this;return er(e,function(n){return t.createDiWaypoint(n)})};Ri.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Fi(e,["x","y"]))};Ri.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",q({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};Ri.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",q({bpmnElement:e},t))};function zr(e,t,n){ue.call(this,e),this._bpmnFactory=t;var r=this;function i(y){var v=y.context,x=v.hints||{},C;!v.cropped&&x.createElementsBehavior!==!1&&(C=v.connection,C.waypoints=n.getCroppedWaypoints(C),v.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(y){delete y.context.cropped});function o(y){var v=y.context;r.updateParent(v.shape||v.connection,v.oldParent)}function a(y){var v=y.context,x=v.shape||v.connection,C=v.parent||v.newParent;r.updateParent(x,C)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Ar(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Ar(a));function s(y){var v=y.context,x=v.oldRoot,C=x.children;U(C,function(P){A(P,"bpmn:BaseElement")&&r.updateParent(P)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function l(y){var v=y.context.shape;A(v,"bpmn:BaseElement")&&r.updateBounds(v)}this.executed(["shape.move","shape.create","shape.resize"],Ar(function(y){y.context.shape.type!=="label"&&l(y)})),this.reverted(["shape.move","shape.create","shape.resize"],Ar(function(y){y.context.shape.type!=="label"&&l(y)})),e.on("shape.changed",function(y){y.element.type==="label"&&l({context:{shape:y.element}})});function u(y){r.updateConnection(y.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Ar(u)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Ar(u));function f(y){r.updateConnectionWaypoints(y.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Ar(f)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Ar(f)),this.executed("connection.reconnect",Ar(function(y){var v=y.context,x=v.connection,C=v.oldSource,P=v.newSource,k=fe(x),w=fe(C),b=fe(P);k.conditionExpression&&!ht(b,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(v.oldConditionExpression=k.conditionExpression,delete k.conditionExpression),C!==P&&w.default===k&&(v.oldDefault=w.default,delete w.default)})),this.reverted("connection.reconnect",Ar(function(y){var v=y.context,x=v.connection,C=v.oldSource,P=v.newSource,k=fe(x),w=fe(C),b=fe(P);v.oldConditionExpression&&(k.conditionExpression=v.oldConditionExpression),v.oldDefault&&(w.default=v.oldDefault,delete b.default)}));function d(y){r.updateAttachment(y.context)}this.executed(["element.updateAttachment"],Ar(d)),this.reverted(["element.updateAttachment"],Ar(d)),this.executed("element.updateLabel",Ar(g)),this.reverted("element.updateLabel",Ar(g));function g(y){const{element:v}=y.context,x=Zr(v),C=Rt(v),P=C&&C.get("label");Es(v)||Lf(v)||(x&&!P?C.set("label",t.create("bpmndi:BPMNLabel")):!x&&P&&C.set("label",void 0))}}Oe(zr,ue);zr.$inject=["eventBus","bpmnFactory","connectionDocking"];zr.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject};zr.prototype.updateParent=function(e,t){if(!kt(e)&&!(A(e,"bpmn:DataStoreReference")&&e.parent&&A(e.parent,"bpmn:Collaboration"))){var n=e.parent,r=e.businessObject,i=Rt(e),o=n&&n.businessObject,a=Rt(n);A(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,o,t&&t.businessObject),A(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),A(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(r,o),A(e,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,o),this.updateDiParent(i,a)}};zr.prototype.updateBounds=function(e){var t=Rt(e),n=QI(e);if(n){var r=ji(n,t.get("bounds"));q(n,{x:e.x+r.x,y:e.y+r.y})}var i=kt(e)?this._getLabel(t):t,o=i.bounds;o||(o=this._bpmnFactory.createDiBounds(),i.set("bounds",o)),q(o,{x:e.x,y:e.y,width:e.width,height:e.height})};zr.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var r,i;A(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),yn(r,e)),A(t,"bpmn:Lane")&&(i=t.get("flowNodeRef"),kn(i,e))}};zr.prototype.updateDiConnection=function(e,t,n){var r=Rt(e),i=Rt(t),o=Rt(n);r.sourceElement&&r.sourceElement.bpmnElement!==fe(t)&&(r.sourceElement=t&&i),r.targetElement&&r.targetElement.bpmnElement!==fe(n)&&(r.targetElement=n&&o)};zr.prototype.updateDiParent=function(e,t){if(t&&!A(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(yn(n,e),e.$parent=null)}};function XI(e){for(;e&&!A(e,"bpmn:Definitions");)e=e.$parent;return e}zr.prototype.getLaneSet=function(e){var t,n;return A(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(A(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};zr.prototype.updateSemanticParent=function(e,t,n){var r;if(e.$parent!==t&&!((A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput"))&&(A(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(A(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),r="lanes";else if(A(e,"bpmn:FlowElement")){if(t){if(A(t,"bpmn:Participant"))t=t.processRef;else if(A(t,"bpmn:Lane"))do t=t.$parent.$parent;while(A(t,"bpmn:Lane"))}r="flowElements"}else if(A(e,"bpmn:Artifact")){for(;t&&!A(t,"bpmn:Process")&&!A(t,"bpmn:SubProcess")&&!A(t,"bpmn:Collaboration");)if(A(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;r="artifacts"}else if(A(e,"bpmn:MessageFlow"))r="messageFlows";else if(A(e,"bpmn:Participant")){r="participants";var i=e.processRef,o;i&&(o=XI(e.$parent||t),e.$parent&&(yn(o.get("rootElements"),i),i.$parent=null),t&&(kn(o.get("rootElements"),i),i.$parent=o))}else A(e,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":A(e,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(r),yn(a,e)),t?(a=t.get(r),a.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(r);yn(a,e),t&&(s||(s=[],t.set(r,s)),s.push(e))}}};zr.prototype.updateConnectionWaypoints=function(e){var t=Rt(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};zr.prototype.updateConnection=function(e){var t=e.connection,n=fe(t),r=t.source,i=fe(r),o=t.target,a=fe(t.target),s;if(A(n,"bpmn:DataAssociation"))A(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,s=e.parent||e.newParent||a,this.updateSemanticParent(n,a,s)):A(n,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||i,this.updateSemanticParent(n,i,s),n.targetRef=a);else{var l=A(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(l&&(yn(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==a&&(l&&(yn(n.targetRef&&n.targetRef.get("incoming"),n),a&&a.get("incoming")&&a.get("incoming").push(n)),n.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,r,o)};zr.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function Ar(e){return function(t){var n=t.context,r=n.shape||n.connection||n.element;A(r,"bpmn:BaseElement")&&e(t)}}function QI(e){if(A(e,"bpmn:Activity")){var t=Rt(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function Ba(e,t){Do.call(this),this._bpmnFactory=e,this._moddle=t}Oe(Ba,Do);Ba.$inject=["bpmnFactory","moddle"];Ba.prototype._baseCreate=Do.prototype.create;Ba.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,q({type:"label",di:n},du,t))}return this.createElement(e,t)};Ba.prototype.createElement=function(e,t){t=q({},t||{});var n,r=t.businessObject,i=t.di;if(!r){if(!t.type)throw new Error("no shape type specified");r=this._bpmnFactory.create(t.type),dR(r)}if(!JI(i)){var o=q({},i||{},{id:r.id+"_di"});e==="root"?i=this._bpmnFactory.createDiPlane(r,o):e==="connection"?i=this._bpmnFactory.createDiEdge(r,o):i=this._bpmnFactory.createDiShape(r,o)}A(r,"bpmn:Group")&&(t=q({isFrame:!0},t)),t=ZI(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Wy(i,t,"isExpanded")),ht(r,["bpmn:Lane","bpmn:Participant"])&&(t=Wy(i,t,"isHorizontal")),A(r,"bpmn:SubProcess")&&(t.collapsed=!xt(r,i)),A(r,"bpmn:ExclusiveGateway")&&(xr(i,"isMarkerVisible")?i.isMarkerVisible===void 0&&(i.isMarkerVisible=!1):i.isMarkerVisible=!0),Bn(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Bn(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=r.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=r,r.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(r,i),t=q({id:r.id},n,t,{businessObject:r,di:i}),this._baseCreate(e,t)};Ba.prototype.getDefaultSize=function(e,t){var n=fe(e);if(t=t||Rt(e),A(n,"bpmn:SubProcess"))return xt(n,t)?{width:350,height:200}:{width:100,height:80};if(A(n,"bpmn:Task"))return{width:100,height:80};if(A(n,"bpmn:Gateway"))return{width:50,height:50};if(A(n,"bpmn:Event"))return{width:36,height:36};if(A(n,"bpmn:Participant")){var r=t.isHorizontal===void 0||t.isHorizontal===!0;return xt(n,t)?r?{width:600,height:250}:{width:250,height:600}:r?{width:400,height:60}:{width:60,height:400}}return A(n,"bpmn:Lane")?{width:400,height:100}:A(n,"bpmn:DataObjectReference")?{width:36,height:50}:A(n,"bpmn:DataStoreReference")?{width:50,height:50}:A(n,"bpmn:TextAnnotation")?{width:100,height:30}:A(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Ba.prototype.createParticipantShape=function(e){return jn(e)||(e={isExpanded:e}),e=q({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function ZI(e,t,n){return U(n,function(r){t=Wy(e,t,r)}),t}function Wy(e,t,n){return t[n]===void 0?t:(e[n]=t[n],wi(t,[n]))}function JI(e){return ht(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Lh(e,t){this._modeling=e,this._canvas=t}Lh.$inject=["modeling","canvas"];Lh.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;U(n,function(i){var o={x:0,y:0};Bn(r.left)?o.x=r.left-i.x:Bn(r.right)?o.x=r.right-i.width-i.x:Bn(r.center)?o.x=r.center-Math.round(i.width/2)-i.x:Bn(r.top)?o.y=r.top-i.y:Bn(r.bottom)?o.y=r.bottom-i.height-i.y:Bn(r.middle)&&(o.y=r.middle-Math.round(i.height/2)-i.y),t.moveElements([i],o,i.parent)})};Lh.prototype.postExecute=function(e){};function Bh(e){this._modeling=e}Bh.$inject=["modeling"];Bh.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,r=e.shape,i=e.hints||{};r=e.shape=this._modeling.createShape(r,e.position,n,{attach:i.attach}),e.shape=r};Bh.prototype.postExecute=function(e){var t=e.hints||{};e8(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function e8(e,t){return Ca(e.outgoing,function(n){return n.target===t})}function Ih(e,t){this._canvas=e,this._layouter=t}Ih.$inject=["canvas","layouter"];Ih.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,i=e.parent,o=e.parentIndex,a=e.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,i,o),t};Ih.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var ff=Math.round;function xx(e){this._modeling=e}xx.$inject=["modeling"];xx.prototype.preExecute=function(e){var t=e.elements,n=e.parent,r=e.parentIndex,i=e.position,o=e.hints,a=this._modeling;U(t,function(d){Ze(d.x)||(d.x=0),Ze(d.y)||(d.y=0)});var s=gt(t,function(d){return!d.hidden}),l=Nn(s);U(t,function(d){jt(d)&&(d.waypoints=er(d.waypoints,function(g){return{x:ff(g.x-l.x-l.width/2+i.x),y:ff(g.y-l.y-l.height/2+i.y)}})),q(d,{x:ff(d.x-l.x-l.width/2+i.x),y:ff(d.y-l.y-l.height/2+i.y)})});var u=eh(t),f={};U(t,function(d){if(jt(d)){f[d.id]=Ze(r)?a.createConnection(f[d.source.id],f[d.target.id],r,d,d.parent||n,o):a.createConnection(f[d.source.id],f[d.target.id],d,d.parent||n,o);return}var g=q({},o);u.indexOf(d)===-1&&(g.autoResize=!1),kt(d)&&(g=wi(g,["attach"])),f[d.id]=Ze(r)?a.createShape(d,Fi(d,["x","y","width","height"]),d.parent||n,r,g):a.createShape(d,Fi(d,["x","y","width","height"]),d.parent||n,g)}),e.elements=Vv(f)};var cb=Math.round;function Ia(e){this._canvas=e}Ia.$inject=["canvas"];Ia.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,i=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?q(t,n):q(t,{x:n.x-cb(t.width/2),y:n.y-cb(t.height/2)}),this._canvas.addShape(t,r,i),t};Ia.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function zu(e){Ia.call(this,e)}Oe(zu,Ia);zu.$inject=["canvas"];var t8=Ia.prototype.execute;zu.prototype.execute=function(e){var t=e.shape;return r8(t),t.labelTarget=e.labelTarget,t8.call(this,e)};var n8=Ia.prototype.revert;zu.prototype.revert=function(e){return e.shape.labelTarget=null,n8.call(this,e)};function r8(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Hu(e,t){this._canvas=e,this._modeling=t}Hu.$inject=["canvas","modeling"];Hu.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;ga(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),ga(n.outgoing,function(r){t.removeConnection(r,{nested:!0})})};Hu.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Yv(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Hu.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,kn(n.children,t,r),this._canvas.addConnection(t,n),t};function _x(e,t){this._modeling=e,this._elementRegistry=t}_x.$inject=["modeling","elementRegistry"];_x.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;U(r,function(i){n.get(i.id)&&(i.waypoints?t.removeConnection(i):t.removeShape(i))})};function Vu(e,t){this._canvas=e,this._modeling=t}Vu.$inject=["canvas","modeling"];Vu.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;ga(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),ga(n.outgoing,function(r){t.removeConnection(r,{nested:!0})}),ga(n.children,function(r){jt(r)?t.removeConnection(r,{nested:!0}):t.removeShape(r,{nested:!0})})};Vu.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=Yv(r.children,n),t.removeShape(n),n};Vu.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,i=e.oldParentIndex;return kn(r.children,n,i),t.addShape(n,r),n};function jh(e){this._modeling=e}jh.$inject=["modeling"];var ub={x:"y",y:"x"};jh.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,r=e.axis,i=e.dimension;function o(C,P){C.range.min=Math.min(P[r],C.range.min),C.range.max=Math.max(P[r]+P[i],C.range.max)}function a(C){return C[r]+C[i]/2}function s(C){return C.length-1}function l(C){return C.max-C.min}function u(C,P){var k={y:0};k[r]=C-a(P),k[r]&&(k[ub[r]]=0,t.moveElements([P],k,P.parent))}var f=n[0],d=s(n),g=n[d],y,v,x=0;U(n,function(C,P){var k,w,b;if(C.elements.length<2){P&&P!==n.length-1&&(o(C,C.elements[0]),x+=l(C.range));return}k=no(C.elements,r),w=k[0],P===d&&(w=k[s(k)]),b=a(w),C.range=null,U(k,function(D){if(u(b,D),C.range===null){C.range={min:D[r],max:D[r]+D[i]};return}o(C,D)}),P&&P!==n.length-1&&(x+=l(C.range))}),v=Math.abs(g.range.min-f.range.max),y=Math.round((v-x)/(n.length-1)),!(y<n.length-1)&&U(n,function(C,P){var k={},w;C===f||C===g||(w=n[P-1],C.range.max=0,U(C.elements,function(b,D){k[ub[r]]=0,k[r]=w.range.max-b[r]+y,C.range.min!==b[r]&&(k[r]+=b[r]-C.range.min),k[r]&&t.moveElements([b],k,b.parent),C.range.max=Math.max(b[r]+b[i],D?C.range.max:0)}))})};jh.prototype.postExecute=function(e){};function $h(e,t){this._layouter=e,this._canvas=t}$h.$inject=["layouter","canvas"];$h.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return q(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};$h.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function wx(){}wx.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=yn(o.children,t),kn(r.children,t,i),t.parent=r,U(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t};wx.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,i=e.oldParentIndex,o=e.delta;return yn(n.children,t),kn(r.children,t,i),t.parent=r,U(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function Ex(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}Ex.prototype.add=function(e,t){return this.addAll([e],t)};Ex.prototype.addAll=function(e,t){var n=wN(e,!!t,this);return q(this,n),this};function Wu(e){this._modeling=e}Wu.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Wu.prototype.moveClosure=function(e,t,n,r,i){var o=this._modeling,a=e.allShapes,s=e.allConnections,l=e.enclosedConnections,u=e.topLevel,f=!1;i&&i.parent===n&&(f=!0),U(a,function(d){o.moveShape(d,t,u[d.id]&&!f&&n,{recurse:!1,layout:!1})}),U(s,function(d){var g=!!a[d.source.id],y=!!a[d.target.id];l[d.id]&&g&&y?o.moveConnection(d,t,u[d.id]&&!f&&n):o.layoutConnection(d,{connectionStart:g&&G0(d,d.source,t),connectionEnd:y&&K0(d,d.target,t)})})};Wu.prototype.getClosure=function(e){return new Ex().addAll(e,!0)};function Fh(e){this._helper=new Wu(e)}Fh.$inject=["modeling"];Fh.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};Fh.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Os(e){this._modeling=e,this._helper=new Wu(e)}Os.$inject=["modeling"];Os.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldBounds=Fi(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=yn(o.children,t),kn(r.children,t,i),q(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t};Os.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,i=this._modeling;r.layout!==!1&&(U(t.incoming,function(o){i.layoutConnection(o,{connectionEnd:K0(o,t,n)})}),U(t.outgoing,function(o){i.layoutConnection(o,{connectionStart:G0(o,t,n)})})),r.recurse!==!1&&this.moveChildren(e)};Os.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,i=e.delta;return kn(n.children,t,r),q(t,{parent:n,x:t.x-i.x,y:t.y-i.y}),t};Os.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Os.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Uu(e){this._modeling=e}Uu.$inject=["modeling"];Uu.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,r=e.connection,i=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return at(i)&&(e.oldWaypoints=r.waypoints,r.waypoints=i),t&&(e.oldSource=r.source,r.source=t),n&&(e.oldTarget=r.target,r.target=n),r};Uu.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,r=e.newTarget,i=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!r||o.docking==="source")&&(a.connectionStart=a.connectionStart||pb(at(i)?i[0]:i)),r&&(!n||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||pb(at(i)?i[i.length-1]:i)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))};Uu.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,r=e.oldWaypoints,i=e.connection;return t&&(i.source=t),n&&(i.target=n),r&&(i.waypoints=r),i};function pb(e){return e.original||e}function $o(e,t){this._modeling=e,this._rules=t}$o.$inject=["modeling","rules"];$o.prototype.preExecute=function(e){var t=this,n=this._modeling,r=this._rules,i=e.oldShape,o=e.newData,a=e.hints||{},s;function l(v,x,C){return r.allowed("connection.reconnect",{connection:C,source:v,target:x})}var u={x:o.x,y:o.y},f={x:i.x,y:i.y,width:i.width,height:i.height};s=e.newShape=e.newShape||t.createShape(o,u,i.parent,a),i.host&&n.updateAttachment(s,i.host);var d;a.moveChildren!==!1&&(d=i.children.slice(),n.moveElements(d,{x:0,y:0},s,a));var g=i.incoming.slice(),y=i.outgoing.slice();U(g,function(v){var x=v.source,C=l(x,s,v);C&&t.reconnectEnd(v,s,kh(v,s,f),a)}),U(y,function(v){var x=v.target,C=l(s,x,v);C&&t.reconnectStart(v,s,Rh(v,s,f),a)})};$o.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};$o.prototype.execute=function(e){};$o.prototype.revert=function(e){};$o.prototype.createShape=function(e,t,n,r){return this._modeling.createShape(e,t,n,r)};$o.prototype.reconnectStart=function(e,t,n,r){this._modeling.reconnectStart(e,t,n,r)};$o.prototype.reconnectEnd=function(e,t,n,r){this._modeling.reconnectEnd(e,t,n,r)};function Gu(e){this._modeling=e}Gu.$inject=["modeling"];Gu.prototype.execute=function(e){var t=e.shape,n=e.newBounds,r=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};Gu.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,r=e.oldBounds,i=e.hints||{};i.layout!==!1&&(U(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:kh(o,n,r)})}),U(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:Rh(o,n,r)})}))};Gu.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function ja(e){this._modeling=e}ja.$inject=["modeling"];ja.prototype.preExecute=function(e){var t=e.delta,n=e.direction,r=e.movingShapes,i=e.resizingShapes,o=e.start,a={};this.moveShapes(r,t),U(i,function(s){a[s.id]=o8(s)}),this.resizeShapes(i,t,n),this.updateConnectionWaypoints(NI(r,i),t,n,o,r,i,a)};ja.prototype.execute=function(){};ja.prototype.revert=function(){};ja.prototype.moveShapes=function(e,t){var n=this;U(e,function(r){n._modeling.moveShape(r,t,null,{autoResize:!1,layout:!1,recurse:!1})})};ja.prototype.resizeShapes=function(e,t,n){var r=this;U(e,function(i){var o=DI(i,n,t);r._modeling.resizeShape(i,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};ja.prototype.updateConnectionWaypoints=function(e,t,n,r,i,o,a){var s=this,l=i.concat(o);U(e,function(u){var f=u.source,d=u.target,g=i8(u),y=PP(n),v={};Jo(l,f)&&Jo(l,d)?(g=er(g,function(x){return db(x,r,n)&&(x[y]=x[y]+t[y]),x.original&&db(x.original,r,n)&&(x.original[y]=x.original[y]+t[y]),x}),s._modeling.updateWaypoints(u,g,{labelBehavior:!1})):(Jo(l,f)||Jo(l,d))&&(Jo(i,f)?v.connectionStart=G0(u,f,t):Jo(i,d)?v.connectionEnd=K0(u,d,t):Jo(o,f)?v.connectionStart=Rh(u,f,a[f.id]):Jo(o,d)&&(v.connectionEnd=kh(u,d,a[d.id])),s._modeling.layoutConnection(u,v))})};function fb(e){return q({},e)}function i8(e){return er(e.waypoints,function(t){return t=fb(t),t.original&&(t.original=fb(t.original)),t})}function PP(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function db(e,t,n){var r=PP(n);if(/e|s/.test(n))return e[r]>t;if(/n|w/.test(n))return e[r]<t}function Jo(e,t){return e.indexOf(t)!==-1}function o8(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function zh(e){this._modeling=e}zh.$inject=["modeling"];zh.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=TP(n),t.collapsed=!t.collapsed;var r=AP(n,t.collapsed);return[t].concat(r)};zh.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,r=t.children,i=MP(r,n);return t.collapsed=!t.collapsed,[t].concat(i)};function TP(e){var t={};return U(e,function(n){t[n.id]=n.hidden,n.children&&(t=q({},t,TP(n.children)))}),t}function AP(e,t){var n=[];return U(e,function(r){r.hidden=t,n=n.concat(r),r.children&&(n=n.concat(AP(r.children,r.collapsed||t)))}),n}function MP(e,t){var n=[];return U(e,function(r){r.hidden=t[r.id],n=n.concat(r),r.children&&(n=n.concat(MP(r.children,t)))}),n}function Hh(e){this._modeling=e}Hh.$inject=["modeling"];Hh.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=NP(r,t),DP(n,t),t.host=n,t};Hh.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,i=e.attacherIdx;return t.host=r,NP(n,t),DP(r,t,i),t};function NP(e,t){return yn(e&&e.attachers,t)}function DP(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),kn(r,t,n)}}function bx(){}bx.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};bx.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function It(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}It.$inject=["eventBus","elementFactory","commandStack"];It.prototype.getHandlers=function(){return{"shape.append":Bh,"shape.create":Ia,"shape.delete":Vu,"shape.move":Os,"shape.resize":Gu,"shape.replace":$o,"shape.toggleCollapse":zh,spaceTool:ja,"label.create":zu,"connection.create":Ih,"connection.delete":Hu,"connection.move":wx,"connection.layout":$h,"connection.updateWaypoints":bx,"connection.reconnect":Uu,"elements.create":xx,"elements.move":Fh,"elements.delete":_x,"elements.distribute":jh,"elements.align":Lh,"element.updateAttachment":Hh}};It.prototype.registerHandlers=function(e){U(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};It.prototype.moveShape=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=null);var o={shape:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",o)};It.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};It.prototype.moveElements=function(e,t,n,r){r=r||{};var i=r.attach,o=n,a;i===!0?(a=n,o=n.parent):i===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:r};this._commandStack.execute("elements.move",s)};It.prototype.moveConnection=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",o)};It.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};It.prototype.createConnection=function(e,t,n,r,i,o){typeof n=="object"&&(o=i,i=r,r=n,n=void 0),r=this._create("connection",r);var a={source:e,target:t,parent:i,parentIndex:n,connection:r,hints:o};return this._commandStack.execute("connection.create",a),a.connection};It.prototype.createShape=function(e,t,n,r,i){typeof r!="number"&&(i=r,r=void 0),i=i||{};var o=i.attach,a,s;e=this._create("shape",e),o?(a=n.parent,s=n):a=n;var l={position:t,shape:e,parent:a,parentIndex:r,host:s,hints:i};return this._commandStack.execute("shape.create",l),l.shape};It.prototype.createElements=function(e,t,n,r,i){at(e)||(e=[e]),typeof r!="number"&&(i=r,r=void 0),i=i||{};var o={position:t,elements:e,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",o),o.elements};It.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var i={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape};It.prototype.appendShape=function(e,t,n,r,i){i=i||{},t=this._create("shape",t);var o={source:e,position:n,target:r,shape:t,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",o),o.shape};It.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};It.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)};It.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};It.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};It.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};It.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};It.prototype.resizeShape=function(e,t,n,r){var i={shape:e,newBounds:t,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)};It.prototype.createSpace=function(e,t,n,r,i){var o={delta:n,direction:r,movingShapes:e,resizingShapes:t,start:i};this._commandStack.execute("spaceTool",o)};It.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};It.prototype.reconnect=function(e,t,n,r,i){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",o)};It.prototype.reconnectStart=function(e,t,n,r){r||(r={}),this.reconnect(e,t,e.target,n,q(r,{docking:"source"}))};It.prototype.reconnectEnd=function(e,t,n,r){r||(r={}),this.reconnect(e,e.source,t,n,q(r,{docking:"target"}))};It.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)};It.prototype._create=function(e,t){return tD(t)?t:this._elementFactory.create(e,t)};It.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Ku(e){this._elementRegistry=e}Ku.$inject=["elementRegistry"];Ku.prototype.execute=function(e){var t=e.element,n=e.moddleElement,r=e.properties;if(!n)throw new Error("<moddleElement> required");var i=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||a8(n,hd(r));return OP(n,r),e.oldProperties=o,e.changed=i,i};Ku.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,r=e.changed;return OP(n,t),r};Ku.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return A(e,"bpmn:DataObject")?s8(e,t):[]};function a8(e,t){return $r(t,function(n,r){return n[r]=e.get(r),n},{})}function OP(e,t){U(t,function(n,r){e.set(r,n)})}function s8(e,t){return t.filter(function(n){return A(n,"bpmn:DataObjectReference")&&fe(n).dataObjectRef===e})}var Rc="default",Ro="id",LP="di",l8={width:0,height:0};function Yu(e,t,n,r){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=r}Yu.$inject=["elementRegistry","moddle","modeling","textRenderer"];Yu.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var r=this._elementRegistry,i=this._moddle.ids,o=t.businessObject,a=d8(e.properties),s=e.oldProperties||c8(t,a);return BP(a,o)&&(i.unclaim(o[Ro]),r.updateId(t,a[Ro]),i.claim(a[Ro],o)),Rc in a&&(a[Rc]&&n.push(r.get(a[Rc].id)),o[Rc]&&n.push(r.get(o[Rc].id))),IP(t,a),e.oldProperties=s,e.changed=n,n};Yu.prototype.postExecute=function(e){var t=e.element,n=t.label,r=n&&fe(n).name;if(r){var i=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,i,l8)}};Yu.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,i=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return IP(t,r),BP(n,i)&&(a.unclaim(n[Ro]),o.updateId(t,r[Ro]),a.claim(r[Ro],i)),e.changed};function BP(e,t){return Ro in e&&e[Ro]!==t[Ro]}function c8(e,t){var n=hd(t),r=e.businessObject,i=Rt(e);return $r(n,function(o,a){return a!==LP?o[a]=r.get(a):o[a]=u8(i,hd(t.di)),o},{})}function u8(e,t){return $r(t,function(n,r){return n[r]=e&&e.get(r),n},{})}function IP(e,t){var n=e.businessObject,r=Rt(e);U(t,function(i,o){o!==LP?n.set(o,i):r&&p8(r,i)})}function p8(e,t){U(t,function(n,r){e.set(r,n)})}var f8=["default"];function d8(e){var t=q({},e);return f8.forEach(function(n){n in e&&(t[n]=fe(t[n]))}),t}function Vh(e,t){this._canvas=e,this._modeling=t}Vh.$inject=["canvas","modeling"];Vh.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=t.getRootElement(),o=i.businessObject,a=o.$parent,s=Rt(i);return t.setRootElement(n),t.removeRootElement(i),kn(a.rootElements,r),r.$parent=a,yn(a.rootElements,o),o.$parent=null,i.di=null,s.bpmnElement=r,n.di=s,e.oldRoot=i,[]};Vh.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=e.oldRoot,o=i.businessObject,a=r.$parent,s=Rt(n);return t.setRootElement(i),t.removeRootElement(n),yn(a.rootElements,r),r.$parent=null,kn(a.rootElements,o),o.$parent=a,n.di=null,s.bpmnElement=o,i.di=s,[]};function Sx(e,t){this._modeling=e,this._spaceTool=t}Sx.$inject=["modeling","spaceTool"];Sx.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,r=e.shape,i=e.location,o=mi(r),a=o===r,s=a?r:r.parent,l=Oa(s),u=Dn(r);if(u?i==="left"?i="top":i==="right"&&(i="bottom"):i==="top"?i="left":i==="bottom"&&(i="right"),!l.length){var f=u?{x:r.x+fi,y:r.y,width:r.width-fi,height:r.height}:{x:r.x,y:r.y+fi,width:r.width,height:r.height-fi};n.createShape({type:"bpmn:Lane",isHorizontal:u},f,s)}var d=[];Ps(o,function(b){return d.push(b),b.label&&d.push(b.label),b===r?[]:gt(b.children,function(D){return D!==r})});var g,y,v,x,C;i==="top"?(g=-120,y=r.y,v=y+10,x="n",C="y"):i==="left"?(g=-120,y=r.x,v=y+10,x="w",C="x"):i==="bottom"?(g=120,y=r.y+r.height,v=y-10,x="s",C="y"):i==="right"&&(g=120,y=r.x+r.width,v=y-10,x="e",C="x");var P=t.calculateAdjustments(d,C,g,v),k=u?{x:0,y:g}:{x:g,y:0};t.makeSpace(P.movingShapes,P.resizingShapes,k,x,v);var w=u?{x:r.x+(a?fi:0),y:y-(i==="top"?120:0),width:r.width-(a?fi:0),height:120}:{x:y-(i==="left"?120:0),y:r.y+(a?fi:0),width:120,height:r.height-(a?fi:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:u},w,s)};function Cx(e){this._modeling=e}Cx.$inject=["modeling"];Cx.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,r=e.count,i=Oa(n),o=i.length;if(o>r)throw new Error(`more than <${r}> child lanes`);var a=Dn(n),s=a?n.height:n.width,l=Math.round(s/r),u,f,d,g;for(g=0;g<r;g++)g===r-1?u=s-l*g:u=l,f=a?{x:n.x+fi,y:n.y+g*l,width:n.width-fi,height:u}:{x:n.x+g*l,y:n.y+fi,width:u,height:n.height-fi},g<o?t.resizeShape(i[g],f):(d={type:"bpmn:Lane",isHorizontal:a},t.createShape(d,f,n))};function qu(e,t){this._modeling=e,this._spaceTool=t}qu.$inject=["modeling","spaceTool"];qu.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,r=e.balanced;r!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};qu.prototype.resizeBalanced=function(e,t){var n=this._modeling,r=zB(e,t);n.resizeShape(e,t),r.forEach(function(i){n.resizeShape(i.shape,i.newBounds)})};qu.prototype.resizeSpace=function(e,t){var n=this._spaceTool,r=Ue(e),i=Ue(t),o=Ik(i,r),a=mi(e),s=[],l=[];Ps(a,function(v){return s.push(v),(A(v,"bpmn:Lane")||A(v,"bpmn:Participant"))&&l.push(v),v.children});var u,f,d,g,y;(o.bottom||o.top)&&(u=o.bottom||o.top,f=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),d=o.bottom?"s":"n",g=o.top>0||o.bottom<0?-u:u,y=n.calculateAdjustments(s,"y",g,f),n.makeSpace(y.movingShapes,y.resizingShapes,{x:0,y:u},d)),(o.left||o.right)&&(u=o.right||o.left,f=e.x+(o.right?e.width:0)+(o.right?-10:100),d=o.right?"e":"w",g=o.left>0||o.right<0?-u:u,y=n.calculateAdjustments(l,"x",g,f),n.makeSpace(y.movingShapes,y.resizingShapes,{x:u,y:0},d))};var xu="flowNodeRef",Rx="lanes";function Xu(e){this._elementRegistry=e}Xu.$inject=["elementRegistry"];Xu.prototype._computeUpdates=function(e,t){var n=[],r=[],i={},o=[];function a(f,d){var g=Ue(d),y={x:f.x+f.width/2,y:f.y+f.height/2};return y.x>g.left&&y.x<g.right&&y.y>g.top&&y.y<g.bottom}function s(f){n.indexOf(f)===-1&&(o.push(f),n.push(f))}function l(f){var d=mi(f);return i[d.id]||(i[d.id]=Sh(d)),i[d.id]}function u(f){if(!f.parent)return[];var d=l(f);return d.filter(function(g){return a(f,g)}).map(function(g){return g.businessObject})}return t.forEach(function(f){var d=mi(f);if(!(!d||n.indexOf(d)!==-1)){var g=d.children.filter(function(y){return A(y,"bpmn:FlowNode")});g.forEach(s),n.push(d)}}),e.forEach(s),o.forEach(function(f){var d=f.businessObject,g=d.get(Rx),y=g.slice(),v=u(f);r.push({flowNode:d,remove:y,add:v})}),t.forEach(function(f){var d=f.businessObject;f.parent||d.get(xu).forEach(function(g){r.push({flowNode:g,remove:[d],add:[]})})}),r};Xu.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var r=n.flowNode,i=r.get(Rx);n.remove.forEach(function(o){yn(i,o),yn(o.get(xu),r)}),n.add.forEach(function(o){kn(i,o),kn(o.get(xu),r)})}),[]};Xu.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var r=n.flowNode,i=r.get(Rx);n.add.forEach(function(o){yn(i,o),yn(o.get(xu),r)}),n.remove.forEach(function(o){kn(i,o),kn(o.get(xu),r)})}),[]};function Wh(e){this._moddle=e}Wh.$inject=["moddle"];Wh.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.claim(n,r):t.unclaim(n),[]};Wh.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.unclaim(n):t.claim(n,r),[]};var h8={fill:void 0,stroke:void 0};function kx(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(jr(t)){var n=m8(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}kx.$inject=["commandStack"];kx.prototype.postExecute=function(e){var t=e.elements,n=e.colors||h8,r=this,i={};"fill"in n&&q(i,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&q(i,{"border-color":this._normalizeColor(n.stroke)}),U(t,function(o){var a=jt(o)?Fi(i,["border-color"]):i,s=Rt(o);if(g8(a),kt(o))r._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:i["border-color"]}});else{if(!ht(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;r._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function m8(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function g8(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var y8={width:0,height:0};function jP(e,t,n){function r(l,u){var f=l.label||l,d=l.labelTarget||l;return iO(f,u),[f,d]}function i(l){var u=l.element,f=u.businessObject,d=l.newLabel;if(!kt(u)&&Es(u)&&!ah(u)&&!hb(d)){var g=7,y=a0(u);y={x:y.x,y:y.y+g},e.createLabel(u,y,{id:f.id+"_label",businessObject:f,di:u.di})}}function o(l){return l.oldLabel=Zr(l.element),r(l.element,l.newLabel)}function a(l){return r(l.element,l.oldLabel)}function s(l){var u=l.element,f=u.label||u,d=l.newLabel,g=l.newBounds,y=l.hints||{};if(!(!kt(f)&&!A(f,"bpmn:TextAnnotation"))){if(kt(f)&&hb(d)){y.removeShape!==!1&&e.removeShape(f,{unsetLabel:!1});return}var v=Zr(u);typeof g>"u"&&(g=t.getExternalLabelBounds(f,v)),g&&e.resizeShape(f,g,y8)}}this.preExecute=i,this.execute=o,this.revert=a,this.postExecute=s}jP.$inject=["modeling","textRenderer","bpmnFactory"];function hb(e){return!e||!e.trim()}function ir(e,t,n,r){It.call(this,e,t,n),this._bpmnRules=r}Oe(ir,It);ir.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];ir.prototype.getHandlers=function(){var e=It.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Ku,e["element.updateProperties"]=Yu,e["canvas.updateRoot"]=Vh,e["lane.add"]=Sx,e["lane.resize"]=qu,e["lane.split"]=Cx,e["lane.updateRefs"]=Xu,e["id.updateClaim"]=Wh,e["element.setColor"]=kx,e["element.updateLabel"]=jP,e};ir.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})};ir.prototype.connect=function(e,t,n,r){var i=this._bpmnRules;if(n||(n=i.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,r)};ir.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};ir.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};ir.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};ir.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};ir.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};ir.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};ir.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};ir.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};ir.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};ir.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};ir.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function $P(){}$P.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Je(t.source||e.source),t.connectionEnd||Je(t.target||e.target)]};var df=20,v8=5,Ad=Math.round,mb=20,x8={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function _8(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function w8(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function FP(e,t,n){var r=rr(t,e,v8),i=n.split(":")[0],o=Ad((t.x-e.x)/2+e.x),a=Ad((t.y-e.y)/2+e.y),s,l,u=w8(i,r),f=/h|r|l/.test(i),d=!1,g=!1;return u?(s=f?{x:o,y:e.y}:{x:e.x,y:a},l=f?"h:h":"v:v"):(d=_8(r,i),l=f?"h:v":"v:h",d?f?(g=a===e.y,s={x:e.x+df*(/l/.test(i)?-1:1),y:g?a+df:a}):(g=o===e.x,s={x:g?o+df:o,y:e.y+df*(/t/.test(i)?-1:1)}):s={x:o,y:a}),{waypoints:Px(e,s,l).concat(s),directions:l,turnNextDirections:g}}function E8(e,t,n){return FP(e,t,n)}function b8(e,t,n){var r=FP(t,e,gb(n));return{waypoints:r.waypoints.slice().reverse(),directions:gb(r.directions),turnNextDirections:r.turnNextDirections}}function S8(e,t){var n=e.directions.split(":")[1],r=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(r=r=="h"?"v":"h");var i=n+":"+r,o=Px(e.waypoints[e.waypoints.length-1],t.waypoints[0],i);return{waypoints:o,directions:i}}function gb(e){return e.split(":").reverse().join(":")}function C8(e,t,n){var r=Ad((t.x-e.x)/2+e.x),i=Ad((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:r,y:e.y},{x:r,y:t.y}];if(n==="v:v")return[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function Px(e,t,n){if(n=n||"h:h",!O8(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(zP(n)){var r=E8(e,t,n),i=b8(e,t,n),o=S8(r,i);return[].concat(r.waypoints,o.waypoints,i.waypoints)}return C8(e,t,n)}function R8(e,t,n){var r=Px(e,t,n);return r.unshift(e),r.push(t),HP(r)}function k8(e,t,n,r,i){var o=i&&i.preferredLayouts||[],a=TM(o,"straight")[0]||"h:h",s=x8[a]||0,l=rr(e,t,s),u=D8(l,a);n=n||Je(e),r=r||Je(t);var f=u.split(":"),d=vb(n,e,f[0],L8(l)),g=vb(r,t,f[1],l);return R8(d,g,u)}function P8(e,t,n,r,i,o){at(n)&&(i=n,o=r,n=Je(e),r=Je(t)),o=q({preferredLayouts:[]},o),i=i||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,l;return l=s&&A8(e,t,n,r,o),l||(l=o.connectionEnd&&N8(t,e,r,i),l)||(l=o.connectionStart&&M8(e,t,n,i),l)?l:!o.connectionStart&&!o.connectionEnd&&i&&i.length?i:k8(e,t,n,r,o)}function T8(e,t,n){return e>=t&&e<=n}function yb(e,t,n){var r={x:"width",y:"height"};return T8(t[e],n[e],n[e]+n[r[e]])}function A8(e,t,n,r,i){var o={},a,s;return s=rr(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),i.preserveDocking==="target"?yb(a,r,e)?(o[a]=r[a],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:r.x,y:r.y}]):null:yb(a,n,t)?(o[a]=n[a],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y,original:{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y}}]):null):null}function M8(e,t,n,r){return Tx(e,t,n,r)}function N8(e,t,n,r){var i=r.slice().reverse();return i=Tx(e,t,n,i),i?i.reverse():null}function Tx(e,t,n,r){function i(f){return f.length<3?!0:f.length>4?!1:!!At(f,function(d,g){var y=f[g-1];return y&&Pu(d,y)<3})}function o(f,d,g){var y=wo(d,f);switch(y){case"v":return{x:g.x,y:f.y};case"h":return{x:f.x,y:g.y}}return{x:f.x,y:f.y}}function a(f,d,g){var y;for(y=f.length-2;y!==0;y--)if(uw(f[y],d,mb)||uw(f[y],g,mb))return f.slice(y);return f}if(i(r))return null;var s=r[0],l=r.slice(),u;return l[0]=n,l[1]=o(l[1],s,n),u=a(l,e,t),u!==l&&(l=Tx(e,t,n,u)),l&&wo(l)?null:l}function D8(e,t){if(zP(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function O8(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function zP(e){return e&&/t|r|b|l/.test(e)}function L8(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function vb(e,t,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function HP(e){return e.reduce(function(t,n,r){var i=t[t.length-1],o=e[r+1];return qv(i,o,n,0)||t.push(n),t},[])}var B8=-10,I8=40,j8={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},$8={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},Ax={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Nc={top:"t",right:"r",bottom:"b",left:"l"};function Uh(e){this._elementRegistry=e}Oe(Uh,$P);Uh.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,r=t.target||e.target,i=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,l,u;if(o||(o=xb(i&&i[0],n)),a||(a=xb(i&&i[i.length-1],r)),(A(e,"bpmn:Association")||A(e,"bpmn:DataAssociation"))&&i&&!_b(n,r))return[].concat([o],i.slice(1,-1),[a]);var f=dk(n,s)?j8:$8;return A(e,"bpmn:MessageFlow")?l=z8(n,r,f):(A(e,"bpmn:SequenceFlow")||_b(n,r))&&(n===r?l={preferredLayouts:K8(n,e,f)}:A(n,"bpmn:BoundaryEvent")?l={preferredLayouts:Y8(n,r,a,f)}:_u(n)||_u(r)?l={preferredLayouts:f.subProcess,preserveDocking:V8(n)}:A(n,"bpmn:Gateway")?l={preferredLayouts:f.fromGateway}:A(r,"bpmn:Gateway")?l={preferredLayouts:f.toGateway}:l={preferredLayouts:f.default}),l&&(l=q(l,t),u=HP(P8(n,r,o,a,i,l))),u||[o,a]};function F8(e){var t=e.host;return rr(Je(e),t,B8)}function z8(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:H8(e,t)}}function H8(e,t){return A(t,"bpmn:Participant")?"source":A(e,"bpmn:Participant")?"target":_u(t)?"source":_u(e)||A(t,"bpmn:Event")?"target":A(e,"bpmn:Event")?"source":null}function V8(e){return _u(e)?"target":"source"}function xb(e,t){return e?e.original||e:Je(t)}function _b(e,t){return A(t,"bpmn:Activity")&&A(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function _u(e){return A(e,"bpmn:SubProcess")&&xt(e)}function ps(e,t){return e===t}function W8(e,t){return t.indexOf(e)!==-1}function Ll(e){var t=/right|left/.exec(e);return t&&t[0]}function Bl(e){var t=/top|bottom/.exec(e);return t&&t[0]}function wb(e,t){return Ax[e]===t}function U8(e,t){var n=Ll(e),r=Ax[n];return t.indexOf(r)!==-1}function G8(e,t){var n=Bl(e),r=Ax[n];return t.indexOf(r)!==-1}function VP(e){return e==="right"||e==="left"}function K8(e,t,n){var r=t.waypoints,i=r&&r.length&&rr(r[0],e);return i==="top"?n.loop.fromTop:i==="right"?n.loop.fromRight:i==="left"?n.loop.fromLeft:n.loop.fromBottom}function Y8(e,t,n,r){var i=Je(e),o=Je(t),a=F8(e),s,l,u=ps(e.host,t),f=W8(a,["top","right","bottom","left"]),d=rr(o,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return u?q8(a,f,e,t,n,r):(s=X8(a,d,f,r.isHorizontal),l=Q8(a,d,f,r.isHorizontal),[s+":"+l])}function q8(e,t,n,r,i,o){var a=t?e:o.isHorizontal?Bl(e):Ll(e),s=Nc[a],l;return t?VP(e)?l=Eb("y",n,r,i)?"h":o.boundaryLoop.alternateHorizontalSide:l=Eb("x",n,r,i)?"v":o.boundaryLoop.alternateVerticalSide:l=o.boundaryLoop.default,[s+":"+l]}function Eb(e,t,n,r){var i=I8;return!(ug(e,r,n,i)||ug(e,r,{x:n.x+n.width,y:n.y+n.height},i)||ug(e,r,Je(t),i))}function ug(e,t,n,r){return Math.abs(t[e]-n[e])<r}function X8(e,t,n,r){if(n)return Nc[e];var i=Bl(e),o=Ll(e),a=Bl(t),s=Ll(t);if(r){if(ps(i,a)||wb(o,s))return Nc[i]}else if(ps(o,s)||wb(i,a))return Nc[o];return Nc[r?o:i]}function Q8(e,t,n,r){return n?VP(e)?U8(e,t)||ps(e,t)?"h":"v":G8(e,t)||ps(e,t)?"v":"h":r?ps(Bl(e),Bl(t))?"h":"v":ps(Ll(e),Ll(t))?"v":"h"}Uh.$inject=["elementRegistry"];function bb(e){return q({original:e.point.original||e.point},e.actual)}function $a(e,t){this._elementRegistry=e,this._graphicsFactory=t}$a.$inject=["elementRegistry","graphicsFactory"];$a.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),i=this.getDockingPoint(e,n),o=e.waypoints.slice(r.idx+1,i.idx);return o.unshift(bb(r)),o.push(bb(i)),o};$a.prototype.getDockingPoint=function(e,t,n){var r=e.waypoints,i,o,a;return i=n?0:r.length-1,o=r[i],a=this._getIntersection(t,e,n),{point:o,actual:a||o,idx:i}};$a.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),i=this._getConnectionPath(t);return yy(r,i,n)};$a.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};$a.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};$a.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const WP={__init__:["modeling","bpmnUpdater"],__depends__:[G9,uI,fI,dI,SP,zI,VI,qI,io,s0,kP],bpmnFactory:["type",Ri],bpmnUpdater:["type",zr],elementFactory:["type",Ba],modeling:["type",ir],layouter:["type",Uh],connectionDocking:["type",$a]},Sb=Math.round;function Gh(e,t,n,r,i,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=r,this._layouter=i,this._rules=o}Gh.prototype.create=function(e,t,n){const r=this._complexPreview,i=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,l=this._rules,u=o.createShape(q({type:t},n)),f=a.fire("autoPlace",{source:e,shape:u});if(!f)return;q(u,{x:f.x-Sb(u.width/2),y:f.y-Sb(u.height/2)});const d=l.allowed("connection.create",{source:e,target:u,hints:{targetParent:e.parent}});let g=null;d&&(g=o.createConnection(d),g.waypoints=s.layoutConnection(g,{source:e,target:u}),g.waypoints=i.getCroppedWaypoints(g,e,u)),r.create({created:[u,g].filter(y=>!pu(y))})};Gh.prototype.cleanUp=function(){this._complexPreview.cleanUp()};Gh.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const Z8={__depends__:[E0,wB,WP],__init__:["appendPreview"],appendPreview:["type",Gh]};var Cb=Math.min,Rb=Math.max;function pg(e){e.preventDefault()}function Kc(e){e.stopPropagation()}function J8(e){return e.nodeType===Node.TEXT_NODE}function ej(e){return[].slice.call(e)}function Hi(e){this.container=e.container,this.parent=zt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Bt("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=wr(this.autoResize,this),this.handlePaste=wr(this.handlePaste,this)}Hi.prototype.create=function(e,t,n,r){var i=this,o=this.parent,a=this.content,s=this.container;r=this.options=r||{},t=this.style=t||{};var l=Fi(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);q(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var u=Fi(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return q(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},u),r.centerVertically&&q(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},u),a.innerText=n,ot.bind(a,"keydown",this.keyHandler),ot.bind(a,"mousedown",Kc),ot.bind(a,"paste",i.handlePaste),r.autoResize&&ot.bind(a,"input",this.autoResize),r.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o};Hi.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var r;if(e.clipboardData?r=e.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),t.autoResize){var i=this.autoResize(n);i&&this.resizeHandler(i)}};Hi.prototype.insertText=function(e){e=tj(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Hi.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,r=t.endContainer,i=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=ej(a.childNodes),l,u;if(J8(a)){var f=n.textContent;n.textContent=f.substring(0,i)+e+f.substring(o),l=n,u=i+e.length}else if(n===this.content&&r===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,s[i]),l=d,u=d.textContent.length}else{var g=s.indexOf(n),y=s.indexOf(r);s.forEach(function(v,x){x===g?v.textContent=n.textContent.substring(0,i)+e+r.textContent.substring(o):x>g&&x<=y&&ro(v)}),l=n,u=i+e.length}l&&u!==void 0&&setTimeout(function(){self.setSelection(l,u)})};Hi.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var r=e.getBoundingClientRect(),i=t.scrollHeight;e.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}};Hi.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=zt('<div class="djs-direct-editing-resize-handle"></div>');var s,l,u,f,d=function(v){pg(v),Kc(v),s=v.clientX,l=v.clientY;var x=t.getBoundingClientRect();u=x.width,f=x.height,ot.bind(document,"mousemove",g),ot.bind(document,"mouseup",y)},g=function(v){pg(v),Kc(v);var x=Cb(Rb(u+v.clientX-s,r),o),C=Cb(Rb(f+v.clientY-l,i),a);t.style.width=x+"px",t.style.height=C+"px",e.resizeHandler({width:u,height:f,dx:v.clientX-s,dy:v.clientY-l})},y=function(v){pg(v),Kc(v),ot.unbind(document,"mousemove",g,!1),ot.unbind(document,"mouseup",y,!1)};ot.bind(n,"mousedown",d)}q(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Hi.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),ot.unbind(t,"keydown",this.keyHandler),ot.unbind(t,"mousedown",Kc),ot.unbind(t,"input",this.autoResize),ot.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),ro(n)),ro(e)};Hi.prototype.getValue=function(){return this.content.innerText.trim()};Hi.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Hi.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function tj(e){return e.replace(/\r\n|\r|\n/g,`
`)}function ki(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new Hi({container:t.getContainer(),keyHandler:wr(this._handleKey,this),resizeHandler:wr(this._handleResize,this)})}ki.$inject=["eventBus","canvas"];ki.prototype.registerProvider=function(e){this._providers.push(e)};ki.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};ki.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};ki.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};ki.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};ki.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),o=e.context.text;(i!==o||r.height!==n.height||r.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,i,e.context.text,{x:r.left-t.left,y:r.top-t.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};ki.prototype.getValue=function(){return this._textbox.getValue()};ki.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};ki.prototype._handleResize=function(e){this._fire("resize",e)};ki.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=At(this._providers,function(r){return(t=r.activate(e))?r:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const UP={__depends__:[fh],__init__:["directEditing"],directEditing:["type",ki]};function kb(e){return function(t){var n=t.target,r=fe(e),i=r.eventDefinitions&&r.eventDefinitions[0],o=r.$type===n.type,a=(i&&i.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!r.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===xt(e);return!o||!a||!s||!l}}var nj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],rj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],ij=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],oj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],aj=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],sj=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],GP=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],lj=GP,Pb=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],cj=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],uj=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],pj=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],fj=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],dj=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],hj=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const Tb={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function ai(e,t,n,r,i,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=r,this._bpmnReplace=i,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}ai.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];ai.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};ai.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,r=[];if(at(e)||!n.allowed("shape.replace",{element:e}))return{};var i=kb(e);return A(t,"bpmn:DataObjectReference")?this._createEntries(e,cj):A(t,"bpmn:DataStoreReference")&&!A(e.parent,"bpmn:Collaboration")?this._createEntries(e,uj):A(t,"bpmn:StartEvent")&&!A(t.$parent,"bpmn:SubProcess")?(r=gt(nj,i),this._createEntries(e,r)):A(t,"bpmn:Participant")?(r=gt(hj,function(o){return xt(e)!==o.target.isExpanded}),this._createEntries(e,r)):A(t,"bpmn:StartEvent")&&tr(t.$parent)?(r=gt(fj,function(o){var a=o.target,s=a.isInterrupting!==!1,l=t.isInterrupting===s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):A(t,"bpmn:StartEvent")&&!tr(t.$parent)&&A(t.$parent,"bpmn:SubProcess")?(r=gt(rj,i),this._createEntries(e,r)):A(t,"bpmn:EndEvent")?(r=gt(oj,function(o){var a=o.target;return a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(t.$parent,"bpmn:Transaction")?!1:i(o)}),this._createEntries(e,r)):A(t,"bpmn:BoundaryEvent")?(r=gt(pj,function(o){var a=o.target;if(a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(t.attachedToRef,"bpmn:Transaction"))return!1;var s=a.cancelActivity!==!1,l=t.cancelActivity==s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):A(t,"bpmn:IntermediateCatchEvent")||A(t,"bpmn:IntermediateThrowEvent")?(r=gt(ij,i),this._createEntries(e,r)):A(t,"bpmn:Gateway")?(r=gt(aj,i),this._createEntries(e,r)):A(t,"bpmn:Transaction")?(r=gt(GP,i),this._createEntries(e,r)):tr(t)&&xt(e)?(r=gt(lj,i),this._createEntries(e,r)):A(t,"bpmn:SubProcess")&&xt(e)?(r=gt(sj,i),this._createEntries(e,r)):A(t,"bpmn:AdHocSubProcess")&&!xt(e)?(r=gt(Pb,function(o){var a=o.target,s=a.type==="bpmn:SubProcess",l=a.isExpanded===!0;return kb(a)&&(!s||l)}),this._createEntries(e,r)):A(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,dj):A(t,"bpmn:FlowNode")?(r=gt(Pb,i),A(t,"bpmn:SubProcess")&&!xt(e)&&(r=gt(r,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,r)):{}};ai.prototype.getPopupMenuHeaderEntries=function(e){var t={};return A(e,"bpmn:Activity")&&!tr(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),A(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),A(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),A(e,"bpmn:SubProcess")&&!A(e,"bpmn:Transaction")&&!tr(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),Kk(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};ai.prototype._createEntries=function(e,t){var n={},r=this;return U(t,function(i){n[i.actionName]=r._createEntry(i,e)}),n};ai.prototype._createSequenceFlowEntries=function(e,t){var n=fe(e),r={},i=this._modeling,o=this._moddle,a=this;return U(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&A(n.sourceRef,"bpmn:Activity")&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){var l=o.create("bpmn:FormalExpression",{body:""});i.updateProperties(e,{conditionExpression:l})})});break;default:A(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e,{conditionExpression:void 0})})}),(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:void 0})})})}}),r};ai.prototype._createEntry=function(e,t,n){var r=this._translate,i=this._bpmnReplace.replaceElement,o=function(){return i(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),n=n||o,{label:r(a),className:e.className,action:n}};ai.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function r(u,f){if(f.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const d=e.businessObject.get("loopCharacteristics"),g=t._moddle.create(f.options.loopCharacteristics);d&&t._moddleCopy.copyElement(d,g),g.set("isSequential",f.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:g})}var i=fe(e),o=i.loopCharacteristics,a,s,l;return o&&(a=o.isSequential,s=o.isSequential===void 0,l=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};ai.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,r=e.businessObject.dataObjectRef;if(!r)return{};function i(a,s){t._modeling.updateModdleProperties(e,r,{isCollection:!s.active})}var o=r.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:i}}};ai.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,r=this._translate;function i(a,s){var l=s.active,u;l||(u=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:u})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:r("Participant multiplicity"),active:!!o,action:i}}};ai.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=fe(e),r=A(n,"bpmn:AdHocSubProcess"),i=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:r,action:function(o,a){return r?i(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):i(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};ai.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=fe(e),r=this,i=Yk(e),o=A(e,"bpmn:BoundaryEvent")?Tb["intermediate-event-non-interrupting"]:Tb["start-event-non-interrupting"],a=!n[i];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){r._modeling.updateProperties(e,{[i]:!!a})}}}};const mj={__depends__:[x0,SP,E0],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",ai]};function Qu(e,t,n,r,i,o,a,s,l,u,f,d,g){e=e||{},r.registerProvider(this),this._contextPad=r,this._modeling=i,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=l,this._canvas=u,this._rules=f,this._translate=d,this._eventBus=n,this._appendPreview=g,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(y){var v=y.context,x=v.shape;if(!(!mu(y)||!r.isOpen(x))){var C=r.getEntries(x);C.replace&&C.replace.action.click(y,x)}}),n.on("contextPad.close",function(){g.cleanUp()})}Qu.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];Qu.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&q(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(r,i){t.removeElements(i.slice())}}}}),n};Qu.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return at(t)?Rs(e,n=>t.includes(n)):t};Qu.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,r=this._elementFactory,i=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,l=this._translate,u=this._appendPreview,f={};if(e.type==="label")return this._isDeleteAllowed([e])&&q(f,v()),f;var d=e.businessObject;function g(w,b){i.start(w,b)}function y(w,b){n.removeElements([b])}function v(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:y}}}}function x(w){var b=5,D=t.getPad(w).html,I=D.getBoundingClientRect(),H={x:I.left,y:I.bottom+b};return H}function C(w,b,D,I){function H(Y,K){var se=r.createShape(q({type:w},I));o.start(Y,se,{source:K})}var L=s?function(Y,K){var se=r.createShape(q({type:w},I));s.append(K,se)}:H,X=s?function(Y,K){return u.create(K,w,I),()=>{u.cleanUp()}}:null;return{group:"model",className:b,title:D,action:{dragstart:H,click:L,hover:X}}}function P(w){return function(b,D){n.splitLane(D,w),t.open(D,!0)}}if(ht(d,["bpmn:Lane","bpmn:Participant"])&&xt(e)){var k=Oa(e);q(f,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(w,b){n.addLane(b,"top")}}}}),k.length<2&&((Dn(e)?e.height>=120:e.width>=120)&&q(f,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:P(2)}}}),(Dn(e)?e.height>=180:e.width>=180)&&q(f,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:P(3)}}})),q(f,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(w,b){n.addLane(b,"bottom")}}}})}return A(d,"bpmn:FlowNode")&&(A(d,"bpmn:EventBasedGateway")?q(f,{"append.receive-task":C("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Ab(d,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?q(f,{"append.compensation-activity":C("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!A(d,"bpmn:EndEvent")&&!d.isForCompensation&&!Ab(d,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!tr(d)&&q(f,{"append.end-event":C("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":C("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":C("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":C("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||q(f,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(w,b){var D=q(x(b),{cursor:{x:w.x,y:w.y}});a.open(b,"bpmn-replace",D,{title:l("Change element"),width:300,search:!0})}}}}),A(d,"bpmn:SequenceFlow")&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),ht(d,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:g,dragstart:g}}}),A(d,"bpmn:TextAnnotation")&&q(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:g,dragstart:g}}}),ht(d,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:g,dragstart:g}}}),A(d,"bpmn:Group")&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([e])&&q(f,v()),f};function Ab(e,t,n){var r=e.$instanceOf(t),i=!1,o=e.eventDefinitions||[];return U(o,function(a){a.$type===n&&(i=!0)}),r&&i}const gj={__depends__:[Z8,UP,VR,io,k0,Nh,mj],__init__:["contextPadProvider"],contextPadProvider:["type",Qu]};var yj={horizontal:["x","width"],vertical:["y","height"]},Mb=5;function Fo(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var r=t.allowed("elements.distribute",{elements:n});return at(r)?r:r?n:[]})}Fo.$inject=["modeling","rules"];Fo.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Fo.prototype.trigger=function(e,t){var n=this._modeling,r,i;if(!(e.length<3)&&(this._setOrientation(t),i=this._filterElements(e),r=this._createGroups(i),!(r.length<=2)))return n.distributeElements(r,this._axis,this._dimension),r};Fo.prototype._filterElements=function(e){var t=this._filters,n=this._axis,r=this._dimension,i=[].concat(e);return t.length?(U(t,function(o){i=o(i,n,r)}),i):e};Fo.prototype._createGroups=function(e){var t=[],n=this,r=this._axis,i=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var o=no(e,r);return U(o,function(a,s){var l=n._findRange(a,r,i),u,f=t[t.length-1];f&&n._hasIntersection(f.range,l)?t[t.length-1].elements.push(a):(u={range:l,elements:[a]},t.push(u))}),t};Fo.prototype._setOrientation=function(e){var t=yj[e];this._axis=t[0],this._dimension=t[1]};Fo.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Fo.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+Mb,max:t+n-Mb}};const vj={__init__:["distributeElements"],distributeElements:["type",Fo]};function Kh(e){Si.call(this,e)}Kh.$inject=["eventBus"];Oe(Kh,Si);Kh.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=gt(t,function(n){var r=ht(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||r)}),t=eh(t),t.length<3?!1:t})};var Nb={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},xj=900;function Zu(e,t,n,r){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",xj,this)}Zu.$inject=["popupMenu","distributeElements","translate","rules"];Zu.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Zu.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Zu.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,r=this._popupMenu,i={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:Nb.horizontal,action:function(o,a){t.trigger(e,"horizontal"),r.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:Nb.vertical,action:function(o,a){t.trigger(e,"vertical"),r.close()}}};return i};const _j={__depends__:[x0,vj],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Kh],distributeElementsMenuProvider:["type",Zu]};var KP="is not a registered action",wj="is already registered";function Pi(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}Pi.$inject=["eventBus","injector"];Pi.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),i=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),l=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&r&&this.register("copy",function(){var f=r.get();if(f.length)return o.copy(f)}),o&&this.register("paste",function(){o.paste()}),i&&this.register("stepZoom",function(f){i.stepZoom(f.value)}),a&&this.register("zoom",function(f){a.zoom(f.value)}),n&&r&&s&&this.register("removeSelection",function(){var f=r.get();if(f.length){var d=s.allowed("elements.delete",{elements:f}),g;d!==!1&&(at(d)?g=d:g=f,g.length&&n.removeElements(g.slice()))}}),l&&this.register("moveCanvas",function(f){l.moveCanvas(f)}),u&&this.register("moveSelection",function(f){u.moveSelection(f.direction,f.accelerated)})};Pi.prototype.trigger=function(e,t){if(!this._actions[e])throw Mx(e,KP);return this._actions[e](t)};Pi.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);U(e,function(r,i){n._registerAction(i,r)})};Pi.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw Mx(e,wj);this._actions[e]=t};Pi.prototype.unregister=function(e){if(!this.isRegistered(e))throw Mx(e,KP);this._actions[e]=void 0};Pi.prototype.getActions=function(){return Object.keys(this._actions)};Pi.prototype.isRegistered=function(e){return!!this._actions[e]};function Mx(e,t){return new Error(e+" "+t)}const Ej={__init__:["editorActions"],editorActions:["type",Pi]};function Yh(e){e.invoke(Pi,this)}Oe(Yh,Pi);Yh.$inject=["injector"];Yh.prototype._registerDefaultActions=function(e){Pi.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),i=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),l=e.get("distributeElements",!1),u=e.get("alignElements",!1),f=e.get("directEditing",!1),d=e.get("searchPad",!1),g=e.get("modeling",!1),y=e.get("contextPad",!1);t&&n&&r&&this._registerAction("selectElements",function(){var v=t.getRootElement(),x=n.filter(function(C){return C!==v});return r.select(x),x}),i&&this._registerAction("spaceTool",function(){i.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),r&&l&&this._registerAction("distributeElements",function(v){var x=r.get(),C=v.type;x.length&&l.trigger(x,C)}),r&&u&&this._registerAction("alignElements",function(v){var x=r.get(),C=[],P=v.type;x.length&&(C=gt(x,function(k){return!A(k,"bpmn:Lane")}),u.trigger(C,P))}),r&&g&&this._registerAction("setColor",function(v){var x=r.get();x.length&&g.setColor(x,v)}),r&&f&&this._registerAction("directEditing",function(){var v=r.get();v.length&&f.activate(v[0])}),d&&this._registerAction("find",function(){d.toggle()}),t&&g&&this._registerAction("moveToOrigin",function(){var v=t.getRootElement(),x,C;A(v,"bpmn:Collaboration")?C=n.filter(function(P){return A(P.parent,"bpmn:Collaboration")}):C=n.filter(function(P){return P!==v&&!A(P.parent,"bpmn:SubProcess")}),x=Nn(C),g.moveElements(C,{x:-x.x,y:-x.y},v)}),r&&y&&this._registerAction("replaceElement",function(v){y.triggerEntry("replace","click",v)})};const bj={__depends__:[Ej],editorActions:["type",Yh]};function YP(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,r=t.shape;ht(r,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}YP.$inject=["eventBus"];var Hf=10;function fg(e,t,n){return n||(n="round"),Math[n](e/t)*t}var Sj=1200,Cj=800;function Fa(e,t,n){var r=!n||n.active!==!1;this._eventBus=t;var i=this;t.on("diagram.init",Cj,function(){i.setActive(r)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],Sj,function(o){var a=o.originalEvent;if(!(!i.active||a&&Jr(a))){var s=o.context,l=s.gridSnappingContext;l||(l=s.gridSnappingContext={}),["x","y"].forEach(function(u){var f={},d=kj(o,u,e);d&&(f.offset=d);var g=Rj(o,u);g&&q(f,g),Dl(o,u)||i.snapEvent(o,u,f)})}})}Fa.prototype.snapEvent=function(e,t,n){var r=this.snapValue(e[t],n);gn(e,t,r)};Fa.prototype.getGridSpacing=function(){return Hf};Fa.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=fg(e,Hf);var r,i;return t&&t.min&&(r=t.min,Ze(r)&&(r=fg(r+n,Hf,"ceil"),e=Math.max(e,r))),t&&t.max&&(i=t.max,Ze(i)&&(i=fg(i+n,Hf,"floor"),e=Math.min(e,i))),e-=n,e};Fa.prototype.isActive=function(){return this.active};Fa.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};Fa.prototype.toggleActive=function(){this.setActive(!this.active)};Fa.$inject=["elementRegistry","eventBus","config.gridSnapping"];function Rj(e,t){var n=e.context,r=n.createConstraints,i=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;r&&(Vf(t)?(a.x.min=r.left,a.x.max=r.right):(a.y.min=r.top,a.y.max=r.bottom));var l=i.min,u=i.max;return l&&(Vf(t)?Ob(s)?a.x.max=l.left:a.x.min=l.right:Db(s)?a.y.max=l.top:a.y.min=l.bottom),u&&(Vf(t)?Ob(s)?a.x.min=u.left:a.x.max=u.right:Db(s)?a.y.min=u.top:a.y.max=u.bottom),a[t]}function kj(e,t,n){var r=e.context,i=e.shape,o=r.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&Ze(s[t])||(s||(s=o.snapOffset={}),Ze(s[t])||(s[t]=0),!i)||(n.get(i.id)||(Vf(t)?s[t]+=i[t]+i.width/2:s[t]+=i[t]+i.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=i.width/2:/right/.test(a)&&(s[t]+=i.width/2):/top/.test(a)?s[t]-=i.height/2:/bottom/.test(a)&&(s[t]+=i.height/2)),s[t]}function Vf(e){return e==="x"}function Db(e){return e.indexOf("n")!==-1}function Ob(e){return e.indexOf("w")!==-1}function Ls(e,t){ue.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(r){var i=r.context,o=i.hints||{},a=o.autoResize;if(a){var s=i.shape,l=i.newBounds;jr(a)?i.newBounds=n.snapComplex(l,a):i.newBounds=n.snapSimple(s,l)}})}Ls.$inject=["eventBus","gridSnapping","modeling"];Oe(Ls,ue);Ls.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Ls.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Ls.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,r=/w/.test(t),i=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),i&&(r?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),q(e,o),e};Ls.prototype.snapVertically=function(e,t){var n=this._gridSnapping,r=/n/.test(t),i=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),r&&(i?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),q(e,o),e};var Pj=2e3;function qP(e,t){e.on(["spaceTool.move","spaceTool.end"],Pj,function(n){var r=n.context;if(r.initialized){var i=r.axis,o;i==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}qP.$inject=["eventBus","gridSnapping"];const Tj={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Ls],gridSnappingSpaceToolBehavior:["type",qP]},Aj={__depends__:[Tj],__init__:["gridSnapping"],gridSnapping:["type",Fa]};var Mj=2e3;function XP(e,t,n){e.on("autoPlace",Mj,function(r){var i=r.source,o=Je(i),a=r.shape,s=hk(i,a,n);return["x","y"].forEach(function(l){var u={};s[l]!==o[l]&&(s[l]>o[l]?u.min=s[l]:u.max=s[l],A(a,"bpmn:TextAnnotation")&&(Nj(l)?u.offset=-a.width/2:u.offset=-a.height/2),s[l]=t.snapValue(s[l],u))}),s})}XP.$inject=["eventBus","gridSnapping","elementRegistry"];function Nj(e){return e==="x"}var Dj=1750;function QP(e,t,n){t.on(["create.start","shape.move.start"],Dj,function(r){var i=r.context,o=i.shape,a=e.getRootElement();if(!(!A(o,"bpmn:Participant")||!A(a,"bpmn:Process")||!a.children.length)){var s=i.createConstraints;s&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}QP.$inject=["canvas","eventBus","gridSnapping"];var Oj=3e3;function qh(e,t,n){ue.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],Oj,function(i){var o=i.context,a=o.connection,s=o.hints||{},l=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||Lj(l)&&n.updateWaypoints(a,r.snapMiddleSegments(l))})}qh.$inject=["eventBus","gridSnapping","modeling"];Oe(qh,ue);qh.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var r=1;r<e.length-2;r++)n=jj(t,e[r],e[r+1]),e[r]=n[0],e[r+1]=n[1];return e};function Lj(e){return e.length>3}function Bj(e){return e==="h"}function Ij(e){return e==="v"}function jj(e,t,n){var r=wo(t,n),i={};return Bj(r)&&(i.y=e.snapValue(t.y)),Ij(r)&&(i.x=e.snapValue(t.x)),("x"in i||"y"in i)&&(t=q({},t,i),n=q({},n,i)),[t,n]}const $j={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",XP],gridSnappingParticipantBehavior:["type",QP],gridSnappingLayoutConnectionBehavior:["type",qh]},Fj={__depends__:[Aj,$j],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",YP]};var zj=30,ZP=30;function Ju(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(r){var i=r.element,o=r.gfx;if(A(i,"bpmn:Lane"))return n._createParticipantHit(i,o);if(A(i,"bpmn:Participant"))return xt(i)?n._createParticipantHit(i,o):n._createDefaultHit(i,o);if(A(i,"bpmn:SubProcess"))return xt(i)?n._createSubProcessHit(i,o):n._createDefaultHit(i,o)})}Ju.$inject=["eventBus","interactionEvents"];Ju.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Ju.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=Dn(e)?{width:zj,height:e.height}:{width:e.width,height:ZP};return this._interactionEvents.createBoxHit(t,"all",n),!0};Ju.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:ZP}),!0};const Hj={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Ju]};function Xh(e){e.invoke(Gl,this)}Oe(Xh,Gl);Xh.$inject=["injector"];Xh.prototype.registerBindings=function(e,t){Gl.prototype.registerBindings.call(this,e,t);function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("selectElements",function(r){var i=r.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("find",function(r){var i=r.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}),n("spaceTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["s","S"],i))return t.trigger("spaceTool"),!0}),n("lassoTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["l","L"],i))return t.trigger("lassoTool"),!0}),n("handTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["h","H"],i))return t.trigger("handTool"),!0}),n("globalConnectTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["c","C"],i))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["e","E"],i))return t.trigger("directEditing"),!0}),n("replaceElement",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["r","R"],i))return t.trigger("replaceElement",i),!0})};const Vj={__depends__:[f0],__init__:["keyboardBindings"],keyboardBindings:["type",Xh]};var Wj={moveSpeed:1,moveSpeedAccelerated:10},Uj=1500,Lb="left",Bb="up",Ib="right",jb="down",Gj={ArrowLeft:Lb,Left:Lb,ArrowUp:Bb,Up:Bb,ArrowRight:Ib,Right:Ib,ArrowDown:jb,Down:jb},Kj={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function JP(e,t,n,r,i){var o=this;this._config=q({},Wj,e||{}),t.addListener(Uj,function(a){var s=a.keyEvent,l=Gj[s.key];if(l&&!t.isCmd(s)){var u=t.isShift(s);return o.moveSelection(l,u),!0}}),this.moveSelection=function(a,s){var l=i.get();if(l.length){var u=this._config[s?"moveSpeedAccelerated":"moveSpeed"],f=Kj[a](u),d=r.allowed("elements.move",{shapes:l});d&&n.moveElements(l,f)}}}JP.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const Yj={__depends__:[f0,io],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",JP]};var $b=10;function ep(e,t,n,r){this._dragging=r,this._rules=t;var i=this;function o(l,u){var f=l.shape,d=l.direction,g=l.resizeConstraints,y;l.delta=u,y=DB(f,d,u),l.newBounds=LB(y,g),l.canExecute=i.canResize(l)}function a(l){var u=l.resizeConstraints,f=l.minBounds;u===void 0&&(f===void 0&&(f=i.computeMinResizeBox(l)),l.resizeConstraints={min:Ue(f)})}function s(l){var u=l.shape,f=l.canExecute,d=l.newBounds;if(f){if(d=FC(d),!qj(u,d))return;n.resizeShape(u,d)}}e.on("resize.start",function(l){a(l.context)}),e.on("resize.move",function(l){var u={x:l.dx,y:l.dy};o(l.context,u)}),e.on("resize.end",function(l){s(l.context)})}ep.prototype.canResize=function(e){var t=this._rules,n=Fi(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};ep.prototype.activate=function(e,t,n){var r=this._dragging,i,o;if(typeof n=="string"&&(n={direction:n}),i=q({shape:t},n),o=i.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,eT(t,o),"resize",{autoActivate:!0,cursor:Xj(o),data:{shape:t,context:i}})};ep.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,r,i;return r=e.minDimensions||{width:$b,height:$b},i=jk(t,e.childrenBoxPadding),BB(n,t,r,i)};ep.$inject=["eventBus","rules","modeling","dragging"];function qj(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function eT(e,t){var n=Je(e),r=Ue(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Xj(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var Fb="djs-resizing",zb="resize-not-ok",Qj=500;function tT(e,t,n){function r(o){var a=o.shape,s=o.newBounds,l=o.frame;l||(l=o.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,Fb)),s.width>5&&Pe(l,{x:s.x,width:s.width}),s.height>5&&Pe(l,{y:s.y,height:s.height}),o.canExecute?Ct(l).remove(zb):Ct(l).add(zb)}function i(o){var a=o.shape,s=o.frame;s&&Cn(o.frame),t.removeMarker(a,Fb)}e.on("resize.move",Qj,function(o){r(o.context)}),e.on("resize.cleanup",function(o){i(o.context)})}tT.$inject=["eventBus","canvas","previewSupport"];var hf=-6,mf=8,gf=20,kc="djs-resizer",Zj=["n","w","s","e","nw","ne","se","sw"];function za(e,t,n,r){this._resize=r,this._canvas=t;var i=this;e.on("selection.changed",function(o){var a=o.newSelection;i.removeResizers(),a.length===1&&U(a,wr(i.addResizer,i))}),e.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(i.removeResizers(),i.addResizer(a))})}za.prototype.makeDraggable=function(e,t,n){var r=this._resize;function i(o){Ma(o)&&r.activate(o,e,n)}ot.bind(t,"mousedown",i),ot.bind(t,"touchstart",i)};za.prototype._createResizer=function(e,t,n,r){var i=this._getResizersParent(),o=Jj(r),a=ze("g");Ct(a).add(kc),Ct(a).add(kc+"-"+e.id),Ct(a).add(kc+"-"+r),tt(i,a);var s=ze("rect");Pe(s,{x:-mf/2+o.x,y:-mf/2+o.y,width:mf,height:mf}),Ct(s).add(kc+"-visual"),tt(a,s);var l=ze("rect");return Pe(l,{x:-gf/2+o.x,y:-gf/2+o.y,width:gf,height:gf}),Ct(l).add(kc+"-hit"),tt(a,l),Mf(a,t,n),a};za.prototype.createResizer=function(e,t){var n=eT(e,t),r=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,r,t)};za.prototype.addResizer=function(e){var t=this;jt(e)||!this._resize.canResize({shape:e})||U(Zj,function(n){t.createResizer(e,n)})};za.prototype.removeResizers=function(){var e=this._getResizersParent();Zd(e)};za.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};za.$inject=["eventBus","canvas","selection","resize"];function Jj(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-hf:e.indexOf("w")!==-1&&(t.x=hf),e.indexOf("s")!==-1?t.y=-hf:e.indexOf("n")!==-1&&(t.y=hf),t}const nT={__depends__:[ao,Io,Ql],__init__:["resize","resizePreview","resizeHandles"],resize:["type",ep],resizePreview:["type",tT],resizeHandles:["type",za]};var e$=2e3;function tp(e,t,n,r,i,o,a){this._bpmnFactory=t,this._canvas=n,this._modeling=i,this._textRenderer=a,r.registerProvider(this),e.on("element.dblclick",function(l){s(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){r.isActive()&&r.complete()}),e.on(["shape.remove","connection.remove"],e$,function(l){r.isActive(l.element)&&r.cancel()}),e.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),e.on("directEditing.activate",function(l){o.removeResizers()}),e.on("create.end",500,function(l){var u=l.context,f=u.shape,d=l.context.canExecute,g=l.isTouch;g||d&&(u.hints&&u.hints.createElementsBehavior===!1||s(f))}),e.on("autoPlace.end",500,function(l){s(l.shape)});function s(l,u){(u||ht(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||Nx(l))&&r.activate(l)}}tp.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];tp.prototype.activate=function(e){var t=Zr(e);if(t!==void 0){var n={text:t},r=this.getEditingBBox(e);q(n,r);var i={},o=n.style||{};return q(o,{backgroundColor:null,border:null}),(ht(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Nx(e))&&q(i,{centerVertically:!0}),Es(e)&&(q(i,{autoResize:!0}),q(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),A(e,"bpmn:TextAnnotation")&&(q(i,{resizable:!0,autoResize:!0}),q(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),q(n,{options:i,style:o}),n}};tp.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},o={x:r.x,y:r.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),u=l.fontSize*a,f=l.lineHeight,d=s.fontSize*a,g=s.lineHeight,y={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(A(e,"bpmn:Lane")||r$(e)){var v=Dn(e),x=v?{width:r.height,height:30*a,x:r.x-r.height/2+15*a,y:i.y-30*a/2}:{width:r.width,height:30*a};q(o,x),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:v?"rotate(-90deg)":null})}if(n$(e)){var C=Dn(e),P=C?{width:r.width,height:r.height}:{width:r.height,height:r.width,x:i.x-r.height/2,y:i.y-r.width/2};q(o,P),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:C?null:"rotate(-90deg)"})}(ht(e,["bpmn:Task","bpmn:CallActivity"])||Nx(e))&&(q(o,{width:r.width,height:r.height}),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),t$(e)&&(q(o,{width:r.width,x:r.x}),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var k=90*a,w=7*a,b=4*a;if(n.labelTarget&&(q(o,{width:k,height:r.height+w+b,x:i.x-k/2,y:r.y-w}),q(y,{fontSize:u+"px",lineHeight:f,paddingTop:w+"px",paddingBottom:b+"px"})),Es(n)&&!ah(n)&&!kt(n)){var D=a0(e),I=t.getAbsoluteBBox({x:D.x,y:D.y,width:0,height:0}),H=u+w+b;q(o,{width:k,height:H,x:I.x-k/2,y:I.y-H/2}),q(y,{fontSize:u+"px",lineHeight:f,paddingTop:w+"px",paddingBottom:b+"px"})}return A(e,"bpmn:TextAnnotation")&&(q(o,{width:r.width,height:r.height,minWidth:30*a,minHeight:10*a}),q(y,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:d+"px",lineHeight:g})),{bounds:o,style:y}};tp.prototype.update=function(e,t,n,r){var i,o;A(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),i={x:e.x,y:e.y,width:e.width/o.width*r.width,height:e.height/o.height*r.height}),i$(t)&&(t=null),this._modeling.updateLabel(e,t,i)};function Nx(e){return A(e,"bpmn:SubProcess")&&!xt(e)}function t$(e){return A(e,"bpmn:SubProcess")&&xt(e)}function n$(e){return A(e,"bpmn:Participant")&&!xt(e)}function r$(e){return A(e,"bpmn:Participant")&&xt(e)}function i$(e){return!e||!e.trim()}var Hb="djs-element-hidden",Vb="djs-label-hidden";function rT(e,t,n){var r=this,i=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(l){var u=l.active;if(o=u.element.label||u.element,A(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=ze("g");var f=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),d=r.path=ze("path");Pe(d,{d:f,strokeWidth:2,stroke:o$(o)}),tt(s,d),tt(i,s),Vn(s,o.x,o.y)}A(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,Hb):(A(o,"bpmn:Task")||A(o,"bpmn:CallActivity")||A(o,"bpmn:SubProcess")||A(o,"bpmn:Participant")||A(o,"bpmn:Lane"))&&t.addMarker(o,Vb)}),e.on("directEditing.resize",function(l){if(A(o,"bpmn:TextAnnotation")){var u=l.height,f=l.dy,d=Math.max(o.height/a.height*(u+f),0),g=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:d,position:{mx:0,my:0}});Pe(r.path,{d:g})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var u=l.active;u&&(t.removeMarker(u.element.label||u.element,Hb),t.removeMarker(o,Vb)),o=void 0,a=void 0,s&&(Cn(s),s=void 0)})}rT.$inject=["eventBus","canvas","pathMap"];function o$(e,t){var n=Rt(e);return n.get("stroke")||t||"black"}const a$={__depends__:[s0,nT,UP],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",tp],labelEditingPreview:["type",rT]};var s$=new Ou("tt");function l$(e){var t=zt('<div class="djs-tooltip-container" />');return Zn(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function c$(e,t,n){Zn(e,{left:t+"px",top:n+"px"})}function Dx(e,t){e.style.display=t===!1?"none":""}var iT="djs-tooltip",dg="."+iT;function Sr(e,t){this._eventBus=e,this._canvas=t,this._ids=s$,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=l$(t.getContainer());var n=this;Or.bind(this._tooltipRoot,dg,"mousedown",function(r){r.stopPropagation()}),Or.bind(this._tooltipRoot,dg,"mouseover",function(r){n.trigger("mouseover",r)}),Or.bind(this._tooltipRoot,dg,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}Sr.$inject=["eventBus","canvas"];Sr.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=q({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Sr.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,r=this.get(ur(n,"data-tooltip-id"));r&&(e==="mouseover"&&r.timeout&&this.clearTimeout(r),e==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};Sr.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Sr.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Sr.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Sr.prototype.remove=function(e){var t=this.get(e);t&&(ro(t.html),ro(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Sr.prototype.show=function(){Dx(this._tooltipRoot)};Sr.prototype.hide=function(){Dx(this._tooltipRoot,!1)};Sr.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};Sr.prototype._addTooltip=function(e){var t=e.id,n=e.html,r,i=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),jr(n)&&(n=zt(n)),r=zt('<div data-tooltip-id="'+t+'" class="'+iT+'">'),Zn(r,{position:"absolute"}),r.appendChild(n),e.type&&on(r).add("djs-tooltip-"+e.type),e.className&&on(r).add(e.className),e.htmlContainer=r,i.appendChild(r),this._tooltips[t]=e,this._updateTooltip(e)};Sr.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;c$(n,t.x,t.y)};Sr.prototype._updateTooltipVisibilty=function(e){U(this._tooltips,function(t){var n=t.show,r=t.htmlContainer,i=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(i=!1),Dx(r,i))})};Sr.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const u$={__init__:["tooltips"],tooltips:["type",Sr]};var p$="flow elements must be children of pools/participants";function oT(e,t,n){function r(i,o,a){t.add({position:{x:i.x+5,y:i.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(i){var o=i.context,a=o.shape,s=o.target;A(s,"bpmn:Collaboration")&&A(a,"bpmn:FlowNode")&&r(i,n(p$))})}oT.$inject=["eventBus","tooltips","translate"];const f$={__depends__:[u$],__init__:["modelingFeedback"],modelingFeedback:["type",oT]};var d$=500,h$=1250,m$=1500,Md=Math.round;function g$(e){return{x:e.x+Md(e.width/2),y:e.y+Md(e.height/2)}}function aT(e,t,n,r,i){function o(s,l,u,f){return i.allowed("elements.move",{shapes:s,delta:l,position:u,target:f})}e.on("shape.move.start",m$,function(s){var l=s.context,u=s.shape,f=r.get().slice();f.indexOf(u)===-1&&(f=[u]),f=y$(f),q(l,{shapes:f,validatedShapes:f,shape:u})}),e.on("shape.move.start",h$,function(s){var l=s.context,u=l.validatedShapes,f;if(f=l.canExecute=o(u),!f)return!1}),e.on("shape.move.move",d$,function(s){var l=s.context,u=l.validatedShapes,f=s.hover,d={x:s.dx,y:s.dy},g={x:s.x,y:s.y},y;if(y=o(u,d,g,f),l.delta=d,l.canExecute=y,y===null){l.target=null;return}l.target=f}),e.on("shape.move.end",function(s){var l=s.context,u=l.delta,f=l.canExecute,d=f==="attach",g=l.shapes;if(f===!1)return!1;u.x=Md(u.x),u.y=Md(u.y),!(u.x===0&&u.y===0)&&n.moveElements(g,u,l.target,{primaryShape:l.shape,attach:d})}),e.on("element.mousedown",function(s){if(Ma(s)){var l=Wl(s);if(!l)throw new Error("must supply DOM mousedown event");return a(l,s.element)}});function a(s,l,u,f){if(jn(u)&&(f=u,u=!1),!(l.waypoints||!l.parent)&&!Ct(s.target).has("djs-hit-no-move")){var d=g$(l);return t.init(s,d,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:l,context:f||{}}}),!0}}this.start=a}aT.$inject=["eventBus","dragging","modeling","selection","rules"];function y$(e){var t=Fl(e,"id");return gt(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var Wb=499,hg="djs-dragging",Ub="drop-ok",Gb="drop-not-ok",Kb="new-parent",Yb="attach-ok";function sT(e,t,n,r){function i(l){var u=o(l),f=v$(u);return f}function o(l){var u=ku(l,!0),f=u.flatMap(y=>(y.incoming||[]).concat(y.outgoing||[])),d=u.concat(f),g=[...new Set(d)];return g}function a(l,u){[Yb,Ub,Gb,Kb].forEach(function(f){f===u?t.addMarker(l,f):t.removeMarker(l,f)})}function s(l,u,f){r.addDragger(u,l.dragGroup),f&&t.addMarker(u,hg),l.allDraggedElements?l.allDraggedElements.push(u):l.allDraggedElements=[u]}e.on("shape.move.start",Wb,function(l){var u=l.context,f=u.shapes,d=u.allDraggedElements,g=i(f);if(!u.dragGroup){var y=ze("g");Pe(y,n.cls("djs-drag-group",["no-events"]));var v=t.getActiveLayer();tt(v,y),u.dragGroup=y}g.forEach(function(x){r.addDragger(x,u.dragGroup)}),d?d=Hv([d,o(f)]):d=o(f),U(d,function(x){t.addMarker(x,hg)}),u.allDraggedElements=d,u.differentParents=x$(f)}),e.on("shape.move.move",Wb,function(l){var u=l.context,f=u.dragGroup,d=u.target,g=u.shape.parent,y=u.canExecute;d&&(y==="attach"?a(d,Yb):u.canExecute&&g&&d.id!==g.id?a(d,Kb):a(d,u.canExecute?Ub:Gb)),Vn(f,l.dx,l.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(l){var u=l.context,f=u.target;f&&a(f,null)}),e.on("shape.move.cleanup",function(l){var u=l.context,f=u.allDraggedElements,d=u.dragGroup;U(f,function(g){t.removeMarker(g,hg)}),d&&Cn(d)}),this.makeDraggable=s}sT.$inject=["eventBus","canvas","styles","previewSupport"];function v$(e){var t=gt(e,function(n){return jt(n)?At(e,Ii({id:n.source.id}))&&At(e,Ii({id:n.target.id})):!0});return t}function x$(e){return AM(Fl(e,function(t){return t.parent&&t.parent.id}))!==1}const _$={__depends__:[fh,io,c0,ao,Io,Ql],__init__:["move","movePreview"],move:["type",aT],movePreview:["type",sT]};var lT=".djs-palette-toggle",cT=".entry",w$=lT+", "+cT,Uy="djs-palette-",E$="shown",Gy="open",qb="two-column",b$=1e3;function vn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(r){var i=r.tool;n.updateToolHighlight(i)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}vn.$inject=["eventBus","canvas"];vn.prototype.registerProvider=function(e,t){t||(t=e,e=b$),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};vn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(C$,{})};vn.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};vn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),r=this._container=zt(vn.HTML_MARKUP);n.appendChild(r),on(n).add(Uy+E$),Or.bind(r,w$,"click",function(i){var o=i.delegateTarget;if(Qd(o,lT))return e.toggle();e.trigger("click",i)}),ot.bind(r,"mousedown",function(i){i.stopPropagation()}),Or.bind(r,cT,"dragstart",function(i){e.trigger("dragstart",i)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})};vn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};vn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,r=this._eventBus,i,o=on(n),a=on(t);"twoColumn"in e?i=e.twoColumn:i=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(qb,i),a.toggle(Uy+qb,i),"open"in e&&(o.toggle(Gy,e.open),a.toggle(Uy+Gy,e.open)),r.fire("palette.changed",{twoColumn:i,open:this.isOpen()})};vn.prototype._update=function(){var e=Bt(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Xd(e),U(t,function(n,r){var i=n.group||"default",o=Bt("[data-group="+hu(i)+"]",e);o||(o=zt('<div class="group"></div>'),ur(o,"data-group",i),e.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=zt(a);if(o.appendChild(s),!n.separator&&(ur(s,"data-action",r),n.title&&ur(s,"title",n.title),n.className&&S$(s,n.className),n.imageUrl)){var l=zt("<img>");ur(l,"src",n.imageUrl),s.appendChild(l)}}),this.open()};vn.prototype.trigger=function(e,t,n){var r,i,o=t.delegateTarget||t.target;return o?(r=ur(o,"data-action"),i=t.originalEvent||t,this.triggerEntry(r,e,i,n)):t.preventDefault()};vn.prototype.triggerEntry=function(e,t,n,r){var i=this._entries,o,a;if(o=i[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(Rn(a)){if(t==="click")return a(n,r)}else if(a[t])return a[t](n,r);n.preventDefault()}};vn.prototype._layoutChanged=function(){this._toggleState({})};vn.prototype._needsCollapse=function(e,t){var n=50,r=Object.keys(t).length*46;return e<r+n};vn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};vn.prototype.open=function(){this._toggleState({open:!0})};vn.prototype.toggle=function(){this.isOpen()?this.close():this.open()};vn.prototype.isActiveTool=function(e){return e&&this._activeTool===e};vn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Bt(".djs-palette-entries",this._container),this._toolsContainer=Bt("[data-group=tools]",t)),n=this._toolsContainer,U(n.children,function(r){var i=r.getAttribute("data-action");if(i){var o=on(r);i=i.replace("-tool",""),o.contains("entry")&&i===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};vn.prototype.isOpen=function(){return on(this._container).has(Gy)};vn.prototype._getParentContainer=function(){return this._canvas.getContainer()};vn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function S$(e,t){var n=on(e),r=at(t)?t:t.split(/\s+/g);r.forEach(function(i){n.add(i)})}function C$(e,t){var n=t.getPaletteEntries();return Rn(n)?n(e):(U(n,function(r,i){e[i]=r}),e)}const R$={__init__:["palette"],palette:["type",vn]};var uT="crosshair";function Bs(e,t,n,r,i,o,a){this._selection=i,this._dragging=n,this._mouse=a;var s=this,l={create:function(u){var f=t.getActiveLayer(),d;d=u.frame=ze("rect"),Pe(d,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),tt(f,d)},update:function(u){var f=u.frame,d=u.bbox;Pe(f,{x:d.x,y:d.y,width:d.width,height:d.height})},remove:function(u){u.frame&&Cn(u.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(u){var f=u.originalEvent.target;!u.hover&&!(f instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(u.originalEvent,!0)})}),e.on("lasso.end",0,function(u){var f=u.context,d=mg(u),g=r.filter(function(v){return v}),y=wd(u);s.select(g,d,y?f.selection:[])}),e.on("lasso.start",function(u){var f=u.context;f.bbox=mg(u),l.create(f),f.selection=i.get()}),e.on("lasso.move",function(u){var f=u.context;f.bbox=mg(u),l.update(f)}),e.on("lasso.cleanup",function(u){var f=u.context;l.remove(f)}),e.on("element.mousedown",1500,function(u){if(wd(u))return s.activateLasso(u.originalEvent),!0})}Bs.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];Bs.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:uT,data:{context:{}}})};Bs.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:uT,data:{context:{}},keepSelection:!0})};Bs.prototype.select=function(e,t,n=[]){var r=EN(e,t);this._selection.select([...n,...Vv(r)])};Bs.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Bs.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function mg(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},r;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?r={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?r={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?r={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const k$={__depends__:[Dh,$u],__init__:["lassoTool"],lassoTool:["type",Bs]};var gg=1500,pT="grab";function Zl(e,t,n,r,i,o){this._dragging=n,this._mouse=o;var a=this,s=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",gg,function(l){if(mu(l))return a.activateMove(l.originalEvent,!0),!1}),s&&s.addListener(gg,function(l){if(!(!Xb(l.keyEvent)||a.isActive())){var u=a._mouse.getLastMoveEvent();a.activateMove(u,!!u)}},"keyboard.keydown"),s&&s.addListener(gg,function(l){!Xb(l.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(l){var u=l.originalEvent.target;if(!l.hover&&!(u instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(l.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(l){var u=t.viewbox().scale;t.scroll({dx:l.dx*u,dy:l.dy*u})}),e.on("hand.move.end",function(l){var u=l.context,f=u.reactivate;return!mu(l)&&f&&e.once("hand.move.ended",function(d){a.activateHand(d.originalEvent,!0,!0)}),!1})}Zl.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Zl.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:pT,data:{context:n||{}}})};Zl.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:pT,data:{context:{reactivate:n}}})};Zl.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Zl.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function Xb(e){return An("Space",e)}const P$={__depends__:[Dh,$u],__init__:["handTool"],handTool:["type",Zl]};var Qb="connect-ok",Zb="connect-not-ok";function Jl(e,t,n,r,i,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(l){var u=l.context,f=l.hover,d=u.canStartConnect=s.canStartConnect(f);d!==null&&(u.startTarget=f,r.addMarker(f,d?Qb:Zb))}),e.on(["global-connect.out","global-connect.cleanup"],function(l){var u=l.context.startTarget,f=l.context.canStartConnect;u&&r.removeMarker(u,f?Qb:Zb)}),e.on(["global-connect.ended"],function(l){var u=l.context,f=u.startTarget,d={x:l.x,y:l.y},g=s.canStartConnect(f);if(g)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,f,d)}),!1})}Jl.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Jl.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};Jl.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};Jl.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};Jl.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const T$={__depends__:[k0,ao,Io,Dh,$u],globalConnect:["type",Jl]};function Ox(e,t,n,r,i,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=i,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}Ox.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Ox.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,r=this._spaceTool,i=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function l(d,g,y,v,x){function C(P){var k=n.createShape(q({type:d},x));t.start(P,k)}return{group:g,className:y,title:v,action:{dragstart:C,click:C}}}function u(d){var g=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),y=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:g});t.start(d,[g,y],{hints:{autoSelect:[g]}})}function f(d){t.start(d,n.createParticipantShape())}return q(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(d){o.activateHand(d)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(d){i.activateSelection(d)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(d){r.activateSelection(d)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(d){a.start(d)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:u,click:u}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:f,click:f}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};const A$={__depends__:[R$,Nh,kP,k$,P$,T$,lh],__init__:["paletteProvider"],paletteProvider:["type",Ox]};var M$=250;function Lx(e,t,n,r,i){ue.call(this,e);function o(s){var l=s.canExecute.replacements;U(l,function(u){var f=u.oldElementId,d={type:u.newElementType};if(!s.visualReplacements[f]){var g=t.get(f);q(d,{x:g.x,y:g.y});var y=n.createShape(d);r.addShape(y,g.parent);var v=Bt('[data-element-id="'+hu(g.id)+'"]',s.dragGroup);v&&Pe(v,{display:"none"});var x=i.addDragger(y,s.dragGroup);s.visualReplacements[f]=x,r.removeShape(y)}})}function a(s){var l=s.visualReplacements;U(l,function(u,f){var d=Bt('[data-element-id="'+hu(f)+'"]',s.dragGroup);d&&Pe(d,{display:"inline"}),u.remove(),l[f]&&delete l[f]})}e.on("shape.move.move",M$,function(s){var l=s.context,u=l.canExecute;l.visualReplacements||(l.visualReplacements={}),u&&u.replacements?o(l):a(l)})}Lx.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];Oe(Lx,ue);const N$={__depends__:[Ql],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Lx]};var D$=1250,yg=40,O$=20,L$=10,Jb=20,fT=["x","y"],B$=Math.abs;function dT(e){e.on(["connect.hover","connect.move","connect.end"],D$,function(t){var n=t.context,r=n.canExecute,i=n.start,o=n.hover,a=n.source,s=n.target;t.originalEvent&&Jr(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&o&&I$(t,o,z$(o)),o&&F$(r,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=yi(i),ht(o,["bpmn:Event","bpmn:Gateway"])&&eS(t,yi(o)),ht(o,["bpmn:Task","bpmn:SubProcess"])&&j$(t,o),A(a,"bpmn:BoundaryEvent")&&s===a.host&&$$(t)):hT(r,"bpmn:MessageFlow")?(A(i,"bpmn:Event")&&(n.connectionStart=yi(i)),A(o,"bpmn:Event")&&eS(t,yi(o))):n.connectionStart=n.initialConnectionStart)})}dT.$inject=["eventBus"];function I$(e,t,n){fT.forEach(function(r){var i=mT(r,t);e[r]<t[r]+n?gn(e,r,t[r]+n):e[r]>t[r]+i-n&&gn(e,r,t[r]+i-n)})}function j$(e,t){var n=yi(t);fT.forEach(function(r){H$(e,t,r)&&gn(e,r,n[r])})}function $$(e){var t=e.context,n=t.source,r=t.target;if(!V$(t)){var i=yi(n),o=rr(i,r,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var l=e[s],u;B$(l-i[s])<yg&&(l>i[s]?u=i[s]+yg:u=i[s]-yg,gn(e,s,u))})}}function eS(e,t){gn(e,"x",t.x),gn(e,"y",t.y)}function hT(e,t){return e&&e.type===t}function F$(e,t){return Ca(t,function(n){return hT(e,n)})}function mT(e,t){return e==="x"?t.width:t.height}function z$(e){return A(e,"bpmn:Task")?L$:O$}function H$(e,t,n){return e[n]>t[n]+Jb&&e[n]<t[n]+mT(n,t)-Jb}function V$(e){var t=e.hover,n=e.source;return t&&n&&t===n}function Ha(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Ha.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Ha.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Ha.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Ha.prototype.getSnapLocations=function(){return this._snapLocations};Ha.prototype.setSnapLocations=function(e){this._snapLocations=e};Ha.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Qh,n.initDefaults(this._defaultSnaps)),n};function Qh(){this._snapValues={}}Qh.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Qh.prototype.snap=function(e,t,n,r){var i=this._snapValues[t];return i&&iB(e[n],i[n],r)};Qh.prototype.initDefaults=function(e){var t=this;U(e||{},function(n,r){U(n,function(i){t.add(r,i)})})};var W$=1250;function so(e,t,n){var r=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(i){r.initSnap(i)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],W$,function(i){var o=i.context,a=o.shape,s=o.snapContext,l=o.target;if(!(i.originalEvent&&Jr(i.originalEvent))&&!(Dl(i)||!l)){var u=s.pointsForTarget(l);u.initialized||(u=r.addSnapTargetPoints(u,a,l),u.initialized=!0),n.snap(i,u)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}so.$inject=["elementRegistry","eventBus","snapping"];so.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,r=n.shape,i=n.snapContext;i||(i=n.snapContext=new Ha);var o;t.get(r.id)?o=yi(r,e):o={x:e.x+yi(r).x,y:e.y+yi(r).y};var a={x:o.x-r.width/2,y:o.y-r.height/2},s={x:o.x+r.width/2,y:o.y+r.height/2};return i.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),kt(r)||(i.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),i.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),i};so.prototype.addSnapTargetPoints=function(e,t,n){var r=this.getSnapTargets(t,n);return U(r,function(i){if(kt(i)){kt(t)&&e.add("mid",yi(i));return}if(jt(i)){if(i.waypoints.length<3)return;var o=i.waypoints.slice(1,-1);U(o,function(a){e.add("mid",a)});return}e.add("mid",yi(i))}),!Ze(t.x)||!Ze(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",yi(t)),e};so.prototype.getSnapTargets=function(e,t){return Ak(t).filter(function(n){return!U$(n)})};function U$(e){return!!e.hidden}var tS=1500;function ec(e,t){t.invoke(so,this),e.on(["create.move","create.end"],tS,q$),e.on(["create.move","create.end","shape.move.move","shape.move.end"],tS,function(n){var r=n.context,i=r.canExecute,o=r.target,a=i&&(i==="attach"||i.attach);a&&!Dl(n)&&G$(n,o)})}Oe(ec,so);ec.$inject=["eventBus","injector"];ec.prototype.initSnap=function(e){var t=so.prototype.initSnap.call(this,e),n=e.shape,r=!!this._elementRegistry.get(n.id);return U(n.outgoing,function(i){var o=i.waypoints[0];o=o.original||o,t.setSnapOrigin(i.id+"-docking",rS(o,r,e))}),U(n.incoming,function(i){var o=i.waypoints[i.waypoints.length-1];o=o.original||o,t.setSnapOrigin(i.id+"-docking",rS(o,r,e))}),A(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};ec.prototype.addSnapTargetPoints=function(e,t,n){so.prototype.addSnapTargetPoints.call(this,e,t,n);var r=this.getSnapTargets(t,n);U(r,function(o){(Y$(o)||K$([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",Pk(o)),e.add("bottom-right",Tk(o)))});var i=this._elementRegistry;return U(t.incoming,function(o){if(i.get(t.id)){nS(r,o.source)||e.add("mid",Je(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),U(t.outgoing,function(o){if(i.get(t.id)){nS(r,o.target)||e.add("mid",Je(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),A(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};ec.prototype.getSnapTargets=function(e,t){return so.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!A(n,"bpmn:Lane")})};function G$(e,t){var n=Ue(t),r=nP(e,t),i=e.context,o=i.shape,a;o.parent?a={x:0,y:0}:a=Je(o),/top/.test(r)?gn(e,"y",n.top-a.y):/bottom/.test(r)&&gn(e,"y",n.bottom-a.y),/left/.test(r)?gn(e,"x",n.left-a.x):/right/.test(r)&&gn(e,"x",n.right-a.x)}function K$(e,t){return e.every(function(n){return A(n,t)})}function Y$(e){return A(e,"bpmn:SubProcess")&&xt(e)?!0:A(e,"bpmn:Participant")}function q$(e){var t=e.context,n=t.createConstraints;if(n){var r=n.top,i=n.right,o=n.bottom,a=n.left;(a&&a>=e.x||i&&i<=e.x)&&gn(e,"x",e.x),(r&&r>=e.y||o&&o<=e.y)&&gn(e,"y",e.y)}}function nS(e,t){return e.indexOf(t)!==-1}function rS(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var X$=1250;function np(e,t){var n=this;e.on(["resize.start"],function(r){n.initSnap(r)}),e.on(["resize.move","resize.end"],X$,function(r){var i=r.context,o=i.shape,a=o.parent,s=i.direction,l=i.snapContext;if(!(r.originalEvent&&Jr(r.originalEvent))&&!Dl(r)){var u=l.pointsForTarget(a);u.initialized||(u=n.addSnapTargetPoints(u,o,a,s),u.initialized=!0),J$(s)&&gn(r,"x",r.x),e7(s)&&gn(r,"y",r.y),t.snap(r,u)}}),e.on(["resize.cleanup"],function(){t.hide()})}np.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.direction,i=t.snapContext;i||(i=t.snapContext=new Ha);var o=gT(n,r);return i.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),i};np.prototype.addSnapTargetPoints=function(e,t,n,r){var i=this.getSnapTargets(t,n);return U(i,function(o){e.add("corner",Tk(o)),e.add("corner",Pk(o))}),e.add("corner",gT(t,r)),e};np.$inject=["eventBus","snapping"];np.prototype.getSnapTargets=function(e,t){return Ak(t).filter(function(n){return!Q$(n,e)&&!jt(n)&&!Z$(n)&&!kt(n)})};function gT(e,t){var n=Je(e),r=Ue(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Q$(e,t){return e.host===t}function Z$(e){return!!e.hidden}function J$(e){return e==="n"||e==="s"}function e7(e){return e==="e"||e==="w"}var t7=7,n7=1e3;function Va(e){this._canvas=e,this._asyncHide=bC(wr(this.hide,this),n7)}Va.$inject=["canvas"];Va.prototype.snap=function(e,t){var n=e.context,r=n.snapContext,i=r.getSnapLocations(),o={x:Dl(e,"x"),y:Dl(e,"y")};U(i,function(a){var s=r.getSnapOrigin(a),l={x:e.x+s.x,y:e.y+s.y};if(U(["x","y"],function(u){var f;o[u]||(f=t.snap(l,a,u,t7),f!==void 0&&(o[u]={value:f,originValue:f-s[u]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),U(["x","y"],function(a){var s=o[a];jn(s)&&gn(e,a,s.originValue)})};Va.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=ze("path");return Pe(n,{d:"M0,0 L0,0"}),Ct(n).add("djs-snap-line"),tt(t,n),{update:function(r){Ze(r)?e==="horizontal"?Pe(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):Pe(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):Pe(n,{display:"none"})}}};Va.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Va.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};Va.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Va.prototype.hide=function(){U(this._snapLines,function(e){e.update()})};const r7={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",so],resizeSnapping:["type",np],snapping:["type",Va]},i7={__depends__:[r7],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",dT],createMoveSnapping:["type",ec]};var yT=300;function nt(e,t,n,r){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=Bt(nt.INPUT_SELECTOR,this._container),this._resultsContainer=Bt(nt.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}nt.$inject=["canvas","eventBus","selection","translate"];nt.prototype._bindEvents=function(){var e=this;function t(n,r,i,o){e._eventMaps.push({el:n,type:i,listener:Or.bind(n,r,i,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,nt.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,nt.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,nt.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,nt.INPUT_SELECTOR,"keydown",function(n){An("ArrowUp",n)&&n.preventDefault(),An("ArrowDown",n)&&n.preventDefault()}),t(this._container,nt.INPUT_SELECTOR,"keyup",function(n){if(An("Escape",n))return e.close();if(An("Enter",n)){var r=e._getCurrentResult();return r?e._select(r):e.close(!1)}if(An("ArrowUp",n))return e._scrollToDirection(!0);if(An("ArrowDown",n))return e._scrollToDirection();An(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};nt.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Or.unbind(e.el,e.type,e.listener)})};nt.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(i){return!t._canvas.getRootElements().includes(i.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(i){var o=i.element.id,a=t._createResultNode(i,o);t._results[o]={element:i.element,node:a}});var r=Bt(nt.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}};nt.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};nt.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<r&&(this._resultsContainer.scrollTop=r)}};nt.prototype._clearResults=function(){Xd(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};nt.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")};nt.prototype._getCurrentResult=function(){return Bt(nt.RESULT_SELECTED_SELECTOR,this._resultsContainer)};nt.prototype._createResultNode=function(e,t){var n=zt(nt.RESULT_HTML);return e.primaryTokens.length>0&&iS(n,e.primaryTokens,nt.RESULT_PRIMARY_HTML),iS(n,e.secondaryTokens,nt.RESULT_SECONDARY_HTML),ur(n,nt.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};nt.prototype.registerProvider=function(e){this._searchProvider=e};nt.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,on(this._canvas.getContainer()).add("djs-search-open"),on(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};nt.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,on(this._canvas.getContainer()).remove("djs-search-open"),on(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))};nt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};nt.prototype.isOpen=function(){return this._open};nt.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&on(t).remove(nt.RESULT_SELECTED_CLASS);var n=ur(e,nt.RESULT_ID_ATTRIBUTE),r=this._results[n].element;on(e).add(nt.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(r,{top:yT}),this._selection.select(r),this._canvas.addMarker(r,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",r)}};nt.prototype._select=function(e){var t=ur(e,nt.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:yT}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};nt.prototype._getBoxHtml=function(){const e=zt(nt.BOX_HTML),t=Bt(nt.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function iS(e,t,n){var r=o7(t),i=zt(n);i.innerHTML=r,e.appendChild(i)}function o7(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+nt.RESULT_HIGHLIGHT_CLASS+'">'+Ey(n.matched)+"</b>":t+=Ey(n.normal)}),t!==""?t:null}nt.CONTAINER_SELECTOR=".djs-search-container";nt.INPUT_SELECTOR=".djs-search-input input";nt.RESULTS_CONTAINER_SELECTOR=".djs-search-results";nt.RESULT_SELECTOR=".djs-search-result";nt.RESULT_SELECTED_CLASS="djs-search-result-selected";nt.RESULT_SELECTED_SELECTOR="."+nt.RESULT_SELECTED_CLASS;nt.RESULT_ID_ATTRIBUTE="data-result-id";nt.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";nt.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;nt.RESULT_HTML='<div class="djs-search-result"></div>';nt.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';nt.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const a7={__depends__:[lh,uh,io],searchPad:["type",nt]};function Bx(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}Bx.$inject=["elementRegistry","searchPad","canvas"];Bx.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(r){return!kt(r)&&!t.includes(r)});return n.reduce(function(r,i){var o=Zr(i),a=sS(o,e),s=sS(i.id,e);return Nd(a)||Nd(s)?[...r,{primaryTokens:a,secondaryTokens:s,element:i}]:r},[]).sort(function(r,i){return oS(r.primaryTokens,i.primaryTokens)||oS(r.secondaryTokens,i.secondaryTokens)||aS(Zr(r.element),Zr(i.element))||aS(r.element.id,i.element.id)}).map(function(r){return{element:r.element,primaryTokens:r.primaryTokens.map(function(i){return wi(i,["index"])}),secondaryTokens:r.secondaryTokens.map(function(i){return wi(i,["index"])})}})};function Ky(e){return"matched"in e}function Nd(e){return e.find(Ky)}function oS(e,t){const n=Nd(e),r=Nd(t);if(n&&!r)return-1;if(!n&&r)return 1;if(!n&&!r)return 0;const i=e.find(Ky),o=t.find(Ky);return i.index<o.index?-1:i.index>o.index?1:0}function aS(e="",t=""){return e.localeCompare(t)}function sS(e,t){var n=[],r=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var i=e.indexOf(t);return i>-1?(i!==0&&n.push({normal:r.slice(0,i),index:0}),n.push({matched:r.slice(i,i+t.length),index:i}),t.length+i<e.length&&n.push({normal:r.slice(i+t.length),index:i+t.length})):n.push({normal:r,index:0}),n}const s7={__depends__:[a7],__init__:["bpmnSearch"],bpmnSearch:["type",Bx]};var l7='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function eo(e){Du.call(this,e)}Oe(eo,Du);eo.Viewer=Na;eo.NavigatedViewer=gu;eo.prototype.createDiagram=function(){return this.importXML(l7)};eo.prototype._interactionModules=[LR,$R,HR];eo.prototype._modelingModules=[yL,E0,FL,OL,aB,k0,fB,gj,wP,Nh,_j,bj,Fj,Hj,Vj,Yj,a$,WP,f$,_$,A$,N$,nT,i7,s7];eo.prototype._modules=[].concat(Na.prototype._modules,eo.prototype._interactionModules,eo.prototype._modelingModules);const c7=({processId:e,onNavigate:t})=>{const n=Me.useRef(null),r=Me.useRef(null),[i,o]=Me.useState("New Process"),[a,s]=Me.useState(null),[l,u]=Me.useState(""),[f,d]=Me.useState(""),[g,y]=Me.useState(2),[v,x]=Me.useState(""),[C,P]=Me.useState(""),[k,w]=Me.useState(!1),[b,D]=Me.useState(12),[I,H]=Me.useState(!1),[L,X]=Me.useState("#000000"),[Y,K]=Me.useState("transparent"),[se,ae]=Me.useState(12),[Re,wt]=Me.useState("#fff2cc"),[Ge,Ke]=Me.useState("#d6b656"),[ye,je]=Me.useState(1),[Ne,qe]=Me.useState(""),[re,oe]=Me.useState(!1),[_e,ut]=Me.useState(!1),[B,E]=Me.useState(!0),R=Me.useRef(!1),[$,V]=Me.useState(""),[J,pe]=Me.useState(""),le=["#EA4335","#E91E63","#9C27B0","#673AB7","#3F51B5","#4285F4","#03A9F4","#00BCD4","#009688","#34A853","#8BC34A","#CDDC39","#FBBC05","#FF9800"];Me.useEffect(()=>{const Z=new eo({container:n.current,keyboard:{bindTo:document}});r.current=Z,wM(n.current);try{const ge=Z.get("eventBus");console.log("EventBus retrieved, registering resize interceptor..."),ge.on("rule.call",9999,function(_t){if(_t.rule==="elements.resize"||_t.rule==="shape.resize")return!0}),console.log("Resize interceptor registered.")}catch(ge){console.error("Failed to register resize interceptor:",ge)}(async()=>{let ge="";if(e){const pt=await(await fetch(`${Wt}/processes/${e}`)).json();o(pt.name),ge=pt.xml_content}else ge='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="173" y="102" width="36" height="36"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';try{await Z.importXML(ge),Z.get("canvas").zoom("fit-viewport"),oe(!1),setTimeout(()=>{if(!n.current)return;const _t=n.current.querySelector(".djs-palette-entries");if(_t&&!_t.querySelector(".custom-sticky-tool")){const pt=document.createElement("div");pt.className="group custom-sticky-tool";const Le=document.createElement("div");Le.className="entry",Le.innerHTML='<div style="font-family: serif; font-weight: bold; font-size: 18px;">T</div>',Le.title="",Le.style.cursor="pointer",Le.draggable=!0;const Xe=Ht=>{const Gt=Z.get("elementFactory"),Fn=Z.get("create"),si=Z.get("bpmnFactory"),Hr=Gt.createShape({type:"bpmn:Group"}),Ti=si.create("bpmn:Documentation",{text:JSON.stringify({noteColor:"#fff2cc",borderColor:"#d6b656",text:"New Note",htmlContent:"New Note"})});Hr.businessObject.documentation=[Ti],Hr.width=200,Hr.height=200,Fn.start(Ht,Hr)};Le.addEventListener("click",Xe),Le.addEventListener("dragstart",Xe),pt.appendChild(Le),_t.appendChild(pt)}},500)}catch(_t){console.error(_t)}})(),Z.on("selection.changed",ge=>{const _t=ge.newSelection;if(_t.length===1){E(!0);const pt=_t[0];s(pt),V(pt.width),pe(pt.height),P(pt.businessObject.name||"");const Le=pt.businessObject.documentation;if(Le&&Le.length>0&&Le[0].text)try{const Xe=JSON.parse(Le[0].text);u(Xe.piTag||""),d(Xe.piUnit||""),y(Xe.piPrecision!==void 0?Xe.piPrecision:2),x(Xe.targetUrl||""),ut(Xe.isFinalEnd||!1),w(Xe.alwaysOn||!1),D(Xe.textFontSize||12),H(Xe.textBold||!1),X(Xe.textColor||"#000000"),K(Xe.textBgColor||"transparent"),ae(Xe.nameFontSize||12),wt(Xe.noteColor||"#fff2cc"),Ke(Xe.borderColor||"#d6b656"),je(Xe.noteOpacity!==void 0?Xe.noteOpacity:1),qe(Xe.htmlContent||"")}catch{u(""),d(""),y(2),x(""),ut(!1),w(!1),D(12),H(!1),X("#000000"),K("transparent"),ae(12),wt("#fff2cc"),Ke("#d6b656"),je(1),qe("")}else u(""),d(""),y(2),x(""),ut(!1),w(!1),D(12),H(!1),X("#000000"),K("transparent"),ae(12),wt("#fff2cc"),Ke("#d6b656"),je(1),qe("")}else E(!1),s(null),P(""),u(""),d(""),y(2),x(""),ut(!1),w(!1),D(12),H(!1),X("#000000"),K("transparent"),ae(12),wt("#fff2cc"),Ke("#d6b656"),je(1),qe("")}),Z.on("element.changed",ge=>{a&&ge.element.id===a.id&&P(ge.element.businessObject.name||"")}),Z.on("commandStack.changed",()=>{oe(!0)}),Z.on("element.dblclick",1e4,ge=>{if(ge.element.type==="bpmn:Group")return!1});const $e=ge=>{ge.preventDefault();const _t=Z.get("canvas"),pt=_t.zoom(),Le=ge.deltaY>0?.995:1.005;if(n.current){const Xe=n.current.getBoundingClientRect(),Ht=ge.clientX-Xe.left,Gt=ge.clientY-Xe.top;_t.zoom(pt*Le,{x:Ht,y:Gt})}},Ee=n.current;return Ee.addEventListener("wheel",$e),()=>{Ee.removeEventListener("wheel",$e),Z.destroy()}},[e]);const de=()=>{re?confirm("")&&t("dashboard"):t("dashboard")},vt=async()=>{const{xml:Z}=await r.current.saveXML({format:!0});await fetch(`${Wt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,name:i,xml_content:Z})}),oe(!1),alert("")},Ot=()=>{a&&r.current&&r.current.get("modeling").resizeShape(a,{x:a.x,y:a.y,width:Number($),height:Number(J)})},Dt=Z=>{P(Z),a&&r.current&&r.current.get("modeling").updateLabel(a,Z)},Et=(Z,we,$e,Ee)=>{if(!we||!Ee)return;const _t=document.createElement("canvas").getContext("2d");_t.font=`bold ${$e}px Arial, sans-serif`;const Le=_t.measureText(we).width;Z.width,Z.height,Z.type.includes("Task")&&Le+40>Z.width},rt=Z=>{const we={piTag:Z.piTag!==void 0?Z.piTag:l,piUnit:Z.piUnit!==void 0?Z.piUnit:f,piPrecision:Z.piPrecision!==void 0?Z.piPrecision:g,targetUrl:Z.targetUrl!==void 0?Z.targetUrl:v,isFinalEnd:Z.isFinalEnd!==void 0?Z.isFinalEnd:_e,alwaysOn:Z.alwaysOn!==void 0?Z.alwaysOn:k,textFontSize:Z.textFontSize!==void 0?Z.textFontSize:b,textBold:Z.textBold!==void 0?Z.textBold:I,textColor:Z.textColor!==void 0?Z.textColor:L,textBgColor:Z.textBgColor!==void 0?Z.textBgColor:Y,nameFontSize:Z.nameFontSize!==void 0?Z.nameFontSize:se,noteColor:Z.noteColor!==void 0?Z.noteColor:Re,borderColor:Z.borderColor!==void 0?Z.borderColor:Ge,noteOpacity:Z.noteOpacity!==void 0?Z.noteOpacity:ye,htmlContent:Z.htmlContent!==void 0?Z.htmlContent:Ne};if(u(we.piTag),d(we.piUnit),y(we.piPrecision),x(we.targetUrl),ut(we.isFinalEnd),w(we.alwaysOn),D(we.textFontSize),H(we.textBold),X(we.textColor),K(we.textBgColor),ae(we.nameFontSize),wt(we.noteColor),Ke(we.borderColor),je(we.noteOpacity),qe(we.htmlContent),a&&r.current){const $e=r.current.get("modeling"),Ee=r.current.get("bpmnFactory"),ge=r.current.get("elementRegistry");if(we.isFinalEnd&&a.type==="bpmn:EndEvent"){const pt=ge.filter(Xe=>Xe.type==="bpmn:EndEvent"&&Xe.id!==a.id);let Le=!1;pt.forEach(Xe=>{const Ht=Xe.businessObject.documentation;if(Ht&&Ht.length>0&&Ht[0].text)try{const Gt=JSON.parse(Ht[0].text);if(Gt.isFinalEnd){Gt.isFinalEnd=!1;const Fn=Ee.create("bpmn:Documentation",{text:JSON.stringify(Gt)});$e.updateProperties(Xe,{documentation:[Fn]}),Le=!0}}catch{}}),Le&&alert(" End Event ")}const _t=Ee.create("bpmn:Documentation",{text:JSON.stringify(we)});$e.updateProperties(a,{documentation:[_t]}),Et(a,C,we.nameFontSize,$e)}},Qe=Z=>{a&&r.current&&r.current.get("modeling").setColor(a,{stroke:Z,fill:bM(Z,.2)})};return Me.useEffect(()=>{if(!r.current)return;const Z=()=>{const $e=r.current.get("elementRegistry"),Ee=r.current.get("canvas");$e.forEach(ge=>{const _t=ge.businessObject.documentation;if(_t&&_t.length>0&&_t[0].text)try{const pt=JSON.parse(_t[0].text),Le=Ee.getGraphics(ge);if(ge.type==="bpmn:Group"){const Xe=Le.querySelector("text"),Ht=Le.querySelector("path"),Gt=Le.querySelector("rect");Xe&&(Xe.style.display="block"),Ht&&(Ht.style.display="block"),Gt&&(Gt.style.display="block");const Fn=Le.querySelector(".sticky-bg");Fn&&Fn.remove();const si=Le.querySelector(".sticky-fo");if(si&&si.remove(),pt.noteColor||pt.htmlContent){Xe&&(Xe.style.display="none"),Ht&&(Ht.style.display="none"),Gt&&(Gt.style.display="none");const Hr=ge.width||300,Ti=ge.height||300,Vr=document.createElementNS("http://www.w3.org/2000/svg","rect");Vr.classList.add("sticky-bg"),Vr.setAttribute("width",Hr),Vr.setAttribute("height",Ti),Vr.setAttribute("fill",pt.noteColor||"transparent"),Vr.setAttribute("stroke",pt.borderColor||"transparent"),Vr.setAttribute("fill-opacity",pt.noteOpacity!==void 0?pt.noteOpacity:1),Vr.setAttribute("stroke-width","1"),Le.prepend(Vr);const _n=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");_n.classList.add("sticky-fo"),_n.setAttribute("width",Hr),_n.setAttribute("height",Ti),_n.setAttribute("x",0),_n.setAttribute("y",0);const Ve=document.createElement("div");Ve.style.width="100%",Ve.style.height="100%",Ve.style.padding="10px",Ve.style.boxSizing="border-box",Ve.style.overflow="hidden",Ve.style.fontSize=`${pt.textFontSize||12}px`,Ve.style.fontWeight=pt.textBold?"bold":"normal",Ve.style.color=pt.textColor||"#000000",Ve.style.fontFamily="Arial, sans-serif",Ve.style.whiteSpace="pre-wrap",Ve.style.wordBreak="break-word",Ve.innerHTML=pt.htmlContent||(_t[0].text?JSON.parse(_t[0].text).text:"")||"",_n.appendChild(Ve),Le.appendChild(_n)}}if(pt.nameFontSize){const Xe=Le.querySelector(".djs-label");Xe&&(Xe.style.fontSize=`${pt.nameFontSize}px`)}}catch{}})},we=r.current.get("eventBus");return we.on("element.changed",Z),we.on("import.done",Z),()=>{we.off("element.changed",Z),we.off("import.done",Z)}},[r.current]),z.jsxs("div",{className:"flex h-full flex-col bg-[#121212]",children:[z.jsxs("div",{className:"bg-[#1e1e1e] px-6 py-3 flex justify-between items-center border-b border-white/5",children:[z.jsxs("div",{className:"flex items-center gap-4",children:[z.jsxs("button",{onClick:de,className:"text-white/60 hover:text-white transition flex items-center gap-1",children:[z.jsx("span",{className:"text-lg",children:""})," "]}),z.jsx("input",{value:i,onChange:Z=>{o(Z.target.value),oe(!0)},className:"bg-[#2d2d2d] text-white px-4 py-1.5 rounded-full border-none outline-none focus:ring-2 focus:ring-[#8ab4f8]",placeholder:""}),re&&z.jsx("span",{className:"text-[#f28b82] text-xs font-medium animate-pulse",children:" "})]}),z.jsxs("div",{className:"flex gap-3 items-center",children:[z.jsx("button",{onClick:()=>window.open("AboutBPMN.md","_blank"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full font-bold transition flex items-center justify-center text-sm",title:"BPMN ",children:"?"}),z.jsx("button",{onClick:vt,className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-1 rounded-full font-medium shadow-sm transition text-sm",children:""}),z.jsx("button",{onClick:()=>E(!B),className:`bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full transition flex items-center justify-center ${B?"":"text-[#8ab4f8]"}`,title:B?"":"",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})})]})]}),z.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[z.jsx("div",{className:"flex-1 relative bg-white",ref:n}),z.jsxs("div",{className:`bg-[#1e1e1e] border-l border-white/5 overflow-y-auto transition-all duration-300 ease-in-out ${B?"w-80 p-6 opacity-100":"w-0 p-0 opacity-0 border-none"}`,children:[z.jsx("h3",{className:"font-medium text-white/90 mb-6 text-lg",children:""}),a?z.jsxs("div",{children:[a.type!=="bpmn:Group"&&z.jsxs("div",{className:"mb-5",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Name)"}),z.jsx("input",{value:C,onChange:Z=>Dt(Z.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:"..."}),z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsx("span",{className:"text-white/60 text-xs",children:""}),z.jsx("select",{value:se,onChange:Z=>rt({nameFontSize:parseInt(Z.target.value)}),className:"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-xs outline-none",children:[12,14,16,18,20,24,30,36].map(Z=>z.jsxs("option",{value:Z,children:[Z,"px"]},Z))})]})]}),(a.type.includes("Task")||a.type==="bpmn:Participant")&&z.jsxs("div",{className:"mb-5 border-t border-white/10 pt-4",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Size)"}),z.jsxs("div",{className:"flex gap-2",children:[z.jsxs("div",{className:"flex-1",children:[z.jsx("span",{className:"text-white/60 text-xs block mb-1",children:" (Width)"}),z.jsx("input",{type:"number",value:$,onChange:Z=>V(Z.target.value),onBlur:Ot,onKeyDown:Z=>Z.key==="Enter"&&Ot(),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm"})]}),z.jsxs("div",{className:"flex-1",children:[z.jsx("span",{className:"text-white/60 text-xs block mb-1",children:" (Height)"}),z.jsx("input",{type:"number",value:J,onChange:Z=>pe(Z.target.value),onBlur:Ot,onKeyDown:Z=>Z.key==="Enter"&&Ot(),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm"})]})]})]}),a.type==="bpmn:Group"&&z.jsxs("div",{className:"mb-5 border-t border-white/10 pt-4",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Sticky Note)"}),z.jsxs("div",{className:"mb-3",children:[z.jsx("span",{className:"text-white/60 text-sm block mb-1",children:""}),z.jsxs("div",{className:"flex gap-1 flex-wrap",children:[["#fff2cc","#fce5cd","#e6b8af","#d9ead3","#c9daf8","#d0e0e3","#ead1dc","#ffffff","transparent"].map(Z=>z.jsx("button",{onClick:()=>rt({noteColor:Z}),className:`w-6 h-6 rounded border ${Re===Z?"border-white scale-110":"border-white/10"}`,style:{backgroundColor:Z},title:Z},Z)),z.jsx("input",{type:"color",value:Re,onChange:Z=>rt({noteColor:Z.target.value}),className:"w-6 h-6 p-0 border-0 rounded overflow-hidden"})]})]}),z.jsxs("div",{className:"mb-3",children:[z.jsx("span",{className:"text-white/60 text-sm block mb-1",children:""}),z.jsx("div",{className:"flex gap-1 flex-wrap",children:["#d6b656","#e69138","#cc0000","#6aa84f","#3c78d8","#45818e","#a64d79","#000000","transparent"].map(Z=>z.jsx("button",{onClick:()=>rt({borderColor:Z}),className:`w-6 h-6 rounded border ${Ge===Z?"border-white scale-110":"border-white/10"}`,style:{backgroundColor:Z},title:Z},Z))})]}),z.jsxs("div",{className:"mb-4",children:[z.jsxs("div",{className:"flex justify-between mb-1",children:[z.jsx("span",{className:"text-white/60 text-sm",children:""}),z.jsxs("span",{className:"text-white/80 text-xs",children:[Math.round(ye*100),"%"]})]}),z.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:ye,onChange:Z=>rt({noteOpacity:parseFloat(Z.target.value)}),className:"w-full accent-[#8ab4f8] h-1 bg-white/10 rounded-lg appearance-none cursor-pointer"})]}),z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider border-t border-white/10 pt-4",children:" (Style)"}),z.jsxs("div",{className:"flex items-center justify-between mb-2",children:[z.jsx("span",{className:"text-white/60 text-sm",children:""}),z.jsx("select",{value:b,onChange:Z=>rt({textFontSize:parseInt(Z.target.value)}),className:"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-sm outline-none",children:[12,14,16,18,20,24,30,36,48,64].map(Z=>z.jsxs("option",{value:Z,children:[Z,"px"]},Z))})]}),z.jsxs("div",{className:"mt-4 border-t border-white/10 pt-4",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Content)"}),z.jsxs("div",{className:"bg-[#2d2d2d] rounded-lg border border-white/10 p-2",children:[z.jsxs("div",{className:"flex gap-2 mb-2 border-b border-white/10 pb-2 flex-wrap",children:[z.jsx("button",{onClick:()=>{document.execCommand("bold",!1,null);const Z=document.getElementById("sticky-wysiwyg");Z&&(qe(Z.innerHTML),rt({htmlContent:Z.innerHTML}))},className:"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-bold",children:"B"}),z.jsx("button",{onClick:()=>{document.execCommand("underline",!1,null);const Z=document.getElementById("sticky-wysiwyg");Z&&(qe(Z.innerHTML),rt({htmlContent:Z.innerHTML}))},className:"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-medium underline",children:"U"}),z.jsx("button",{onClick:()=>{document.execCommand("hiliteColor",!1,"#ffff00");const Z=document.getElementById("sticky-wysiwyg");Z&&(qe(Z.innerHTML),rt({htmlContent:Z.innerHTML}))},className:"bg-[#fbbc04] hover:bg-[#fdd663] text-black text-xs px-2 py-1 rounded font-medium",children:"Highlight"}),z.jsx("div",{className:"flex gap-1 items-center border-l border-white/10 pl-2",children:["#000000","#ff0000","#0000ff","#ffffff"].map(Z=>z.jsx("button",{onClick:()=>{document.execCommand("foreColor",!1,Z);const we=document.getElementById("sticky-wysiwyg");we&&(qe(we.innerHTML),rt({htmlContent:we.innerHTML}))},className:"w-4 h-4 rounded-full border border-white/20 hover:scale-110 transition",style:{backgroundColor:Z}},Z))})]}),z.jsx("div",{id:"sticky-wysiwyg",contentEditable:!0,className:"w-full bg-white text-black text-sm outline-none min-h-[100px] p-2 rounded-t mb-1 overflow-auto",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:Ne},onCompositionStart:()=>{R.current=!0},onCompositionEnd:Z=>{R.current=!1,qe(Z.currentTarget.innerHTML),rt({htmlContent:Z.currentTarget.innerHTML})},onInput:Z=>{R.current||(qe(Z.currentTarget.innerHTML),rt({htmlContent:Z.currentTarget.innerHTML}))}}),z.jsx("textarea",{readOnly:!0,value:Ne,className:"w-full bg-[#1e1e1e] text-white/50 text-xs outline-none h-[60px] font-mono p-2 rounded-b border-t border-white/10",placeholder:"HTML ..."})]}),z.jsx("p",{className:"text-white/40 text-xs mt-2",children:" HTML "})]})]}),a.type!=="bpmn:Group"&&z.jsxs("div",{className:"mb-5",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Color)"}),z.jsx("div",{className:"grid grid-cols-7 gap-2",children:le.map(Z=>z.jsx("button",{onClick:()=>Qe(Z),className:"w-6 h-6 rounded-full border border-white/10 hover:scale-110 transition",style:{backgroundColor:Z}},Z))})]}),a.type!=="bpmn:Group"&&z.jsxs("div",{className:"mb-5",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:"PI Tag "}),z.jsx("input",{value:l,onChange:Z=>{const we=Z.target.value;if(we.split(";").length>4){alert(" 4  PI Tag");return}rt({piTag:we})},className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:": Tag1;Tag2 (4)"}),z.jsx("input",{value:f,onChange:Z=>rt({piUnit:Z.target.value}),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:" (: kg/hr)"}),z.jsxs("div",{className:"flex items-center gap-2 bg-[#2d2d2d] border border-white/10 rounded-lg px-3 py-2 mb-2",children:[z.jsx("span",{className:"text-white/60 text-sm whitespace-nowrap",children:":"}),z.jsx("input",{type:"number",min:"0",max:"5",value:g,onChange:Z=>rt({piPrecision:parseInt(Z.target.value)}),className:"w-full bg-transparent border-none outline-none text-white text-right"})]}),z.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-2 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition mb-2",children:[z.jsx("input",{type:"checkbox",checked:k,onChange:Z=>rt({alwaysOn:Z.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]"}),z.jsx("span",{className:"text-sm text-white/90 font-medium",children:"Always On ()"})]})]}),(a.type==="bpmn:DataObjectReference"||a.type==="bpmn:DataStoreReference")&&z.jsxs("div",{className:"mb-5",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Hyperlink)"}),z.jsx("input",{value:v,onChange:Z=>rt({targetUrl:Z.target.value}),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition",placeholder:": https://google.com"}),z.jsx("p",{className:"text-white/40 text-xs mt-2",children:""})]}),a.type==="bpmn:EndEvent"&&z.jsxs("div",{className:"mb-5",children:[z.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-3 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition",children:[z.jsx("input",{type:"checkbox",checked:_e,onChange:Z=>rt({isFinalEnd:Z.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]"}),z.jsx("span",{className:"text-sm text-white/90 font-medium",children:" END (Final END)"})]}),z.jsx("p",{className:"text-white/40 text-xs mt-2",children:""})]})]}):z.jsx("p",{className:"text-white/40 text-sm",children:""})]})]})]})};var vT={exports:{}};/*! bpmn-js - bpmn-viewer v17.11.1 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */(function(e,t){(function(n,r){e.exports=r()})(KA,function(){function n(c,p){p&&(c.super_=p,c.prototype=Object.create(p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}const r=Object.prototype.toString,i=Object.prototype.hasOwnProperty;function o(c){return c===void 0}function a(c){return c!==void 0}function s(c){return r.call(c)==="[object Array]"}function l(c){return r.call(c)==="[object Object]"}function u(c){return r.call(c)==="[object Number]"}function f(c){const p=r.call(c);return p==="[object Function]"||p==="[object AsyncFunction]"||p==="[object GeneratorFunction]"||p==="[object AsyncGeneratorFunction]"||p==="[object Proxy]"}function d(c){return r.call(c)==="[object String]"}function g(c,p){return i.call(c,p)}function y(c,p){const h=b(p);let m;return x(c,function(_,S){if(h(_,S))return m=_,!1}),m}function v(c,p){const h=b(p);let m=[];return x(c,function(_,S){h(_,S)&&m.push(_)}),m}function x(c,p){let h,m;if(o(c))return;const _=s(c)?I:D;for(let S in c)if(g(c,S)&&(h=c[S],m=p(h,_(S)),m===!1))return h}function C(c,p,h){return x(c,function(m,_){h=p(h,m,_)}),h}function P(c,p){return!!C(c,function(h,m,_){return h&&p(m,_)},!0)}function k(c,p){return!!y(c,p)}function w(c){return function(p){return P(c,function(h,m){return p[m]===h})}}function b(c){return f(c)?c:p=>p===c}function D(c){return c}function I(c){return Number(c)}function H(c,p){return c.bind(p)}function L(c,...p){return Object.assign(c,...p)}var X=1e3;function Y(c,p){var h=this;p=p||X,c.on(["render.shape","render.connection"],p,function(m,_){var S=m.type,M=_.element,O=_.gfx,j=_.attrs;if(h.canRender(M))return S==="render.shape"?h.drawShape(O,M,j):h.drawConnection(O,M,j)}),c.on(["render.getShapePath","render.getConnectionPath"],p,function(m,_){if(h.canRender(_))return m.type==="render.getShapePath"?h.getShapePath(_):h.getConnectionPath(_)})}function K(c,p){var h=ae(c);return h&&typeof h.$instanceOf=="function"&&h.$instanceOf(p)}function se(c,p){return k(p,function(h){return K(c,h)})}function ae(c){return c&&c.businessObject||c}function Re(c){return c&&c.di}function wt(c,p){return!K(c,"bpmn:CallActivity")&&(K(c,"bpmn:SubProcess")?!(!(p=p||Re(c))||!K(p,"bpmndi:BPMNPlane"))||p&&!!p.isExpanded:!K(c,"bpmn:Participant")||!!ae(c).processRef)}function Ge(c){if(K(c,"bpmn:Participant")||K(c,"bpmn:Lane")){var p=Re(c).isHorizontal;return p===void 0||p}}function Ke(c){return l(c)&&g(c,"labelTarget")}Y.prototype.canRender=function(c){},Y.prototype.drawShape=function(c,p){},Y.prototype.drawConnection=function(c,p){},Y.prototype.getShapePath=function(c){},Y.prototype.getConnectionPath=function(c){};var ye={width:90,height:20},je=15;function Ne(c){var p=c.length/2-1,h=c[Math.floor(p)],m=c[Math.ceil(p+.01)],_=function(j){var Q=j.length/2-1,ne=j[Math.floor(Q)],he=j[Math.ceil(Q+.01)];return{x:ne.x+(he.x-ne.x)/2,y:ne.y+(he.y-ne.y)/2}}(c),S=Math.atan((m.y-h.y)/(m.x-h.x)),M=_.x,O=_.y;return Math.abs(S)<Math.PI/2?O-=je:M+=je,{x:M,y:O}}function qe(c,p){var h,m,_,S=c.label;return S&&S.bounds?(_=S.bounds,m={width:Math.max(ye.width,_.width),height:_.height},h={x:_.x+_.width/2,y:_.y+_.height/2}):(h=function(M){return M.waypoints?Ne(M.waypoints):K(M,"bpmn:Group")?{x:M.x+M.width/2,y:M.y+ye.height/2}:{x:M.x+M.width/2,y:M.y+M.height+ye.height/2}}(p),m=ye),L({x:h.x-m.width/2,y:h.y-m.height/2},m)}function re(c){var p=c.businessObject,h=function(m){return K(m,"bpmn:FlowElement")||K(m,"bpmn:Participant")||K(m,"bpmn:Lane")||K(m,"bpmn:SequenceFlow")||K(m,"bpmn:MessageFlow")||K(m,"bpmn:DataInput")||K(m,"bpmn:DataOutput")?"name":K(m,"bpmn:TextAnnotation")?"text":K(m,"bpmn:Group")?"categoryValueRef":void 0}(p);if(h)return h==="categoryValueRef"?function(m){var _=m.categoryValueRef;return _&&_.value||""}(p):p[h]||""}function oe(c,p){return function(h,m){m.appendChild(function(_,S){if(_.ownerDocument!==S.ownerDocument)try{return S.ownerDocument.importNode(_,!0)}catch{}return _}(h,m))}(p,c),c}var _e=2,ut={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":_e,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":_e,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function B(c,p,h){var m=p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_=ut[m];_?(_===_e&&typeof h=="number"&&(h=String(h)+"px"),c.style[m]=h):c.setAttributeNS(null,p,h)}function E(c,p,h){if(typeof p=="string"){if(h===void 0)return function(m,_){return ut[_]?m.style[_]:m.getAttributeNS(null,_)}(c,p);B(c,p,h)}else(function(m,_){var S,M,O=Object.keys(_);for(S=0;M=O[S];S++)B(m,M,_[M])})(c,p);return c}const R=Object.prototype.toString;function $(c){return new V(c)}function V(c){if(!c||!c.nodeType)throw new Error("A DOM element reference is required");this.el=c,this.list=c.classList}V.prototype.add=function(c){return this.list.add(c),this},V.prototype.remove=function(c){return R.call(c)=="[object RegExp]"?this.removeMatching(c):(this.list.remove(c),this)},V.prototype.removeMatching=function(c){const p=this.array();for(let h=0;h<p.length;h++)c.test(p[h])&&this.remove(p[h]);return this},V.prototype.toggle=function(c,p){return p!==void 0?p!==this.list.toggle(c,p)&&this.list.toggle(c):this.list.toggle(c),this},V.prototype.array=function(){return Array.from(this.list)},V.prototype.has=V.prototype.contains=function(c){return this.list.contains(c)};var J={svg:"http://www.w3.org/2000/svg"},pe='<svg xmlns="'+J.svg+'"';function le(c){var p=!1;c.substring(0,4)==="<svg"?c.indexOf(J.svg)===-1&&(c=pe+c.substring(4)):(c=pe+">"+c+"</svg>",p=!0);var h=function(S){var M;return(M=new DOMParser).async=!1,M.parseFromString(S,"text/xml")}(c);if(!p)return h;for(var m=document.createDocumentFragment(),_=h.firstChild;_.firstChild;)m.appendChild(_.firstChild);return m}function de(c,p){var h;return(c=c.trim()).charAt(0)==="<"?(h=le(c).firstChild,h=document.importNode(h,!0)):h=document.createElementNS(J.svg,c),p&&E(h,p),h}var vt=null;function Ot(){return vt===null&&(vt=de("svg")),vt}function Dt(c,p){var h,m,_=Object.keys(p);for(h=0;m=_[h];h++)c[m]=p[m];return c}function Et(c){return Ot().createSVGTransform()}var rt=/([&<>]{1})/g,Qe=/([\n\r"]{1})/g,Z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function we(c,p){return c.replace(p,function(h,m){return Z[m]||m})}function $e(c,p){var h,m,_,S,M;switch(c.nodeType){case 3:p.push(we(c.textContent,rt));break;case 1:if(p.push("<",c.tagName),c.hasAttributes())for(h=0,m=(_=c.attributes).length;h<m;++h)S=_.item(h),p.push(" ",S.name,'="',we(S.value,Qe),'"');if(c.hasChildNodes()){for(p.push(">"),h=0,m=(M=c.childNodes).length;h<m;++h)$e(M.item(h),p);p.push("</",c.tagName,">")}else p.push("/>");break;case 8:p.push("<!--",we(c.nodeValue,rt),"-->");break;case 4:p.push("<![CDATA[",c.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+c.nodeType)}return p}function Ee(c,p){return function(h){for(var m=h.firstChild,_=[];m;)$e(m,_),m=m.nextSibling;return _.join("")}(c)}function ge(c){var p=c.parentNode;return p&&p.removeChild(c),c}function _t(c,p){return p instanceof SVGMatrix?c.createSVGTransformFromMatrix(p):p}function pt(c,p){var h=c.transform.baseVal;return p&&(Array.isArray(p)||(p=[p]),function(m,_){var S,M;for(m.clear(),S=0;M=_[S];S++)m.appendItem(_t(m,M))}(h,p)),h.consolidate()}function Le(c){return c.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Xe(c){return["L",c.x,c.y]}function Ht(c,p){const h=c.length,m=[(_=c[0],["M",_.x,_.y])];var _,S,M,O;for(let j=1;j<h;j++){const Q=c[j-1],ne=c[j],he=c[j+1];if(!he||!p){m.push(Xe(ne));continue}const ke=Math.min(p,Fn(ne.x-Q.x,ne.y-Q.y),Fn(he.x-ne.x,he.y-ne.y));if(!ke){m.push(Xe(ne));continue}const Be=Gt(ne,Q,ke),be=Gt(ne,Q,.5*ke),We=Gt(ne,he,ke),ce=Gt(ne,he,.5*ke);m.push(Xe(Be)),m.push((M=ce,O=We,["C",(S=be).x,S.y,M.x,M.y,O.x,O.y]))}return m}function Gt(c,p,h){const m=p.x-c.x,_=p.y-c.y,S=h/Fn(m,_);return{x:c.x+m*S,y:c.y+_*S}}function Fn(c,p){return Math.sqrt(Math.pow(c,2)+Math.pow(p,2))}function si(c,p,h){u(p)&&(h=p,p=null),p||(p={});const m=de("path",p);return u(h)&&(m.dataset.cornerRadius=String(h)),Hr(m,c)}function Hr(c,p){return E(c,{d:Le(Ht(p,parseInt(c.dataset.cornerRadius,10)||0))}),c}var Ti="hsl(225, 10%, 15%)",Vr="white";function _n(c,p){return k(c.eventDefinitions,function(h){return h.$type===p})}function Ve(c,p,h){var m=Re(c);return h||m.get("color:background-color")||m.get("bioc:fill")||p||Vr}function Ce(c,p,h){var m=Re(c);return h||m.get("color:border-color")||m.get("bioc:stroke")||p||Ti}function Cr(c,p,h,m){var _=Re(c).get("label");return m||_&&_.get("color:color")||p||Ce(c,h)}function lo(c,p={}){return{width:Kn(c,p),height:Yn(c,p)}}function Kn(c,p={}){return g(p,"width")?p.width:c.width}function Yn(c,p={}){return g(p,"height")?p.height:c.height}function rp(c,p){return p.forEach(function(h){h&&typeof h!="string"&&!Array.isArray(h)&&Object.keys(h).forEach(function(m){if(m!=="default"&&!(m in c)){var _=Object.getOwnPropertyDescriptor(h,m);Object.defineProperty(c,m,_.get?_:{enumerable:!0,get:function(){return h[m]}})}})}),Object.freeze(c)}const wT=Object.prototype.toString,ET=Object.prototype.hasOwnProperty;function bT(c,p){return ET.call(c,p)}function Ix(c,p){let h,m;if(c===void 0)return;const _=function(S){return wT.call(S)==="[object Array]"}(c)?CT:ST;for(let S in c)if(bT(c,S)&&(h=c[S],m=p(h,_(S)),m===!1))return h}function ST(c){return c}function CT(c){return Number(c)}function Rr(c,...p){const h=c.style;return Ix(p,function(m){m&&Ix(m,function(_,S){h[S]=_})}),c}const RT=Object.prototype.toString;function ip(c){return new zo(c)}function zo(c){if(!c||!c.nodeType)throw new Error("A DOM element reference is required");this.el=c,this.list=c.classList}function jx(c){for(var p;p=c.firstChild;)c.removeChild(p);return c}zo.prototype.add=function(c){return this.list.add(c),this},zo.prototype.remove=function(c){return RT.call(c)=="[object RegExp]"?this.removeMatching(c):(this.list.remove(c),this)},zo.prototype.removeMatching=function(c){const p=this.array();for(let h=0;h<p.length;h++)c.test(p[h])&&this.remove(p[h]);return this},zo.prototype.toggle=function(c,p){return p!==void 0?p!==this.list.toggle(c,p)&&this.list.toggle(c):this.list.toggle(c),this},zo.prototype.array=function(){return Array.from(this.list)},zo.prototype.has=zo.prototype.contains=function(c){return this.list.contains(c)};var op,Zh,Jh,ap={};function $x(){op=window.addEventListener?"addEventListener":"attachEvent",Zh=window.removeEventListener?"removeEventListener":"detachEvent",Jh=op!=="addEventListener"?"on":""}var em=rp({__proto__:null,bind:ap.bind=function(c,p,h,m){return op||$x(),c[op](Jh+p,h,m||!1),h},unbind:ap.unbind=function(c,p,h,m){return Zh||$x(),c[Zh](Jh+p,h,m||!1),h},default:ap},[ap]),Fx=["focus","blur"],tm,nm={bind:function(c,p,h,m,_){return Fx.indexOf(h)!==-1&&(_=!0),em.bind(c,h,function(S){var M=S.target||S.srcElement;S.delegateTarget=function(O,j,Q){var ne=Q?O:O.parentNode;return ne&&typeof ne.closest=="function"&&ne.closest(j)||null}(M,p,!0),S.delegateTarget&&m.call(c,S)},_)},unbind:function(c,p,h,m){return Fx.indexOf(p)!==-1&&(m=!0),em.unbind(c,p,h,m)}},kT=function(c,p){if(typeof c!="string")throw new TypeError("String expected");p||(p=document);var h=/<([\w:]+)/.exec(c);if(!h)return p.createTextNode(c);c=c.replace(/^\s+|\s+$/g,"");var m=h[1];if(m=="body")return(_=p.createElement("html")).innerHTML=c,_.removeChild(_.lastChild);var _,S=Object.prototype.hasOwnProperty.call(wn,m)?wn[m]:wn._default,M=S[0],O=S[1],j=S[2];for((_=p.createElement("div")).innerHTML=O+c+j;M--;)_=_.lastChild;if(_.firstChild==_.lastChild)return _.removeChild(_.firstChild);for(var Q=p.createDocumentFragment();_.firstChild;)Q.appendChild(_.removeChild(_.firstChild));return Q},zx=!1;typeof document<"u"&&((tm=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',zx=!tm.getElementsByTagName("link").length,tm=void 0);var wn={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:zx?[1,"X<div>","</div>"]:[0,"",""]};wn.td=wn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],wn.option=wn.optgroup=[1,'<select multiple="multiple">',"</select>"],wn.thead=wn.tbody=wn.colgroup=wn.caption=wn.tfoot=[1,"<table>","</table>"],wn.polyline=wn.ellipse=wn.polygon=wn.circle=wn.text=wn.line=wn.path=wn.rect=wn.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Vi=kT;function Ai(c,p){return(p=p||document).querySelector(c)}function sp(c){c.parentNode&&c.parentNode.removeChild(c)}function rm(c,p,h,m,_){var S=Et();S.setTranslate(p,h);var M=Et();M.setRotate(m||0,0,0);var O=Et();O.setScale(1,1),pt(c,[S,M,O])}function Hx(c,p,h){var m=Et();m.setTranslate(p,h),pt(c,m)}var PT=function(c,p){return c(p={exports:{}},p.exports),p.exports}(function(c){var p=c.exports=function(h,m){if(m||(m=16),h===void 0&&(h=128),h<=0)return"0";for(var _=Math.log(Math.pow(2,h))/Math.log(m),S=2;_===1/0;S*=2)_=Math.log(Math.pow(2,h/S))/Math.log(m)*S;var M=_-Math.floor(_),O="";for(S=0;S<Math.floor(_);S++)O=Math.floor(Math.random()*m).toString(m)+O;if(M){var j=Math.pow(m,M);O=Math.floor(Math.random()*j).toString(m)+O}var Q=parseInt(O,m);return Q!==1/0&&Q>=Math.pow(2,h)?p(h,m):O};p.rack=function(h,m,_){var S=function(O){var j=0;do{if(j++>10){if(!_)throw new Error("too many ID collisions, use more bits");h+=_}var Q=p(h,m)}while(Object.hasOwnProperty.call(M,Q));return M[Q]=O,Q},M=S.hats={};return S.get=function(O){return S.hats[O]},S.set=function(O,j){return S.hats[O]=j,S},S.bits=h||128,S.base=m||16,S}});function co(c){if(!(this instanceof co))return new co(c);c=c||[128,36,1],this._seed=c.length?PT.rack(c[0],c[1],c[2]):c}co.prototype.next=function(c){return this._seed(c||!0)},co.prototype.nextPrefixed=function(c,p){var h;do h=c+this.next(!0);while(this.assigned(h));return this.claim(h,p),h},co.prototype.claim=function(c,p){this._seed.set(c,p||!0)},co.prototype.assigned=function(c){return this._seed.get(c)||!1},co.prototype.unclaim=function(c){delete this._seed.hats[c]},co.prototype.clear=function(){var c,p=this._seed.hats;for(c in p)this.unclaim(c)};var TT=new co,Is=.95;function Wa(c,p,h,m,_,S,M){Y.call(this,p,M);var O=c&&c.defaultFillColor,j=c&&c.defaultStrokeColor,Q=c&&c.defaultLabelColor;function ne(F){return h.computeStyle(F,{strokeLinecap:"round",strokeLinejoin:"round",stroke:Ti,strokeWidth:2,fill:"white"})}function he(F){return h.computeStyle(F,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:Ti,strokeWidth:2})}function ke(F,T){var{ref:N={x:0,y:0},scale:W=1,element:ee,parentGfx:De=_._svg}=T,it=de("marker",{id:F,viewBox:"0 0 20 20",refX:N.x,refY:N.y,markerWidth:20*W,markerHeight:20*W,orient:"auto"});oe(it,ee);var Ye=Ai(":scope > defs",De);Ye||oe(De,Ye=de("defs")),oe(Ye,it)}function Be(F,T,N,W){var ee=TT.nextPrefixed("marker-");return function(De,it,Ye,Tt,fn){Ye==="sequenceflow-end"&&ke(it,{element:de("path",{d:"M 1 5 L 11 10 L 1 15 Z",...ne({fill:fn,stroke:fn,strokeWidth:1})}),ref:{x:11,y:10},scale:.5,parentGfx:De}),Ye==="messageflow-start"&&ke(it,{element:de("circle",{cx:6,cy:6,r:3.5,...ne({fill:Tt,stroke:fn,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:6,y:6},parentGfx:De}),Ye==="messageflow-end"&&ke(it,{element:de("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...ne({fill:Tt,stroke:fn,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:8.5,y:5},parentGfx:De}),Ye==="association-start"&&ke(it,{element:de("path",{d:"M 11 5 L 1 10 L 11 15",...he({fill:"none",stroke:fn,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:1,y:10},scale:.5,parentGfx:De}),Ye==="association-end"&&ke(it,{element:de("path",{d:"M 1 5 L 11 10 L 1 15",...he({fill:"none",stroke:fn,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:11,y:10},scale:.5,parentGfx:De}),Ye==="conditional-flow-marker"&&ke(it,{element:de("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...ne({fill:Tt,stroke:fn})}),ref:{x:-1,y:10},scale:.5,parentGfx:De}),Ye==="conditional-default-flow-marker"&&ke(it,{element:de("path",{d:"M 6 4 L 10 16",...ne({stroke:fn,fill:"none"})}),ref:{x:0,y:10},scale:.5,parentGfx:De})}(F,ee,T,N,W),"url(#"+ee+")"}function be(F,T,N,W,ee={}){l(W)&&(ee=W,W=0),W=W||0,ee=ne(ee);var De=de("circle",{cx:T/2,cy:N/2,r:Math.round((T+N)/4-W),...ee});return oe(F,De),De}function We(F,T,N,W,ee,De){l(ee)&&(De=ee,ee=0),ee=ee||0,De=ne(De);var it=de("rect",{x:ee,y:ee,width:T-2*ee,height:N-2*ee,rx:W,ry:W,...De});return oe(F,it),it}function ce(F,T,N,W){var ee=si(T,N=he(N),W);return oe(F,ee),ee}function Te(F,T,N){return ce(F,T,N,5)}function G(F,T,N){N=he(N);var W=de("path",{...N,d:T});return oe(F,W),W}function ie(F,T,N,W){return G(T,N,L({"data-marker":F},W))}function te(F){return Vt[F]}function Ie(F){return function(T,N,W){return te(F)(T,N,W)}}var Se=function(F,T,N={},W){return G(F,m.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:T.width,containerHeight:T.height,position:{mx:.235,my:.315}}),{fill:W?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:W?Ve(T,O,N.fill):Ce(T,j,N.stroke),strokeWidth:1})},ft=function(F,T,N={}){var W=be(F,T.width,T.height,.2*T.height,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:2});G(F,m.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.5}}),{stroke:Ce(T,j,N.stroke),strokeWidth:2});for(var ee=0;ee<12;ee++){var De=m.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.5}}),it=T.width/2,Ye=T.height/2;G(F,De,{strokeWidth:1,stroke:Ce(T,j,N.stroke),transform:"rotate("+30*ee+","+Ye+","+it+")"})}return W},lt=function(F,T,N={},W){return G(F,m.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.2}}),{fill:W?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},He=function(F,T,N={}){return G(F,m.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.222}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},Yt=function(F,T,N={},W){return G(F,m.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.57,my:.263}}),{fill:W?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},xe=function(F,T,N={},W){return G(F,m.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:T.width,containerHeight:T.height,position:{mx:.2,my:.722}}),{fill:W?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},ve=function(F,T,N={},W){var ee=G(F,m.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.638,my:-.055}}),{fill:W?Ce(T,j,N.stroke):"none",stroke:Ce(T,j,N.stroke),strokeWidth:1});return function(De,it){var Ye=Et();Ye.setRotate(it,0,0),pt(De,Ye)}(ee,45),ee},et=function(F,T,N={},W){return G(F,m.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.22,my:.5}}),{fill:W?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},dt=function(F,T,N={},W){return G(F,m.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:W?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},yt=function(F,T,N={},W){return G(F,m.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:T.width,containerHeight:T.height,position:{mx:.222,my:.36}}),{fill:W?Ce(T,j,N.stroke):Ve(T,O,N.fill),strokeWidth:1})},Kr=function(F,T,N={}){return G(F,m.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:T.width,containerHeight:T.height,position:{mx:.458,my:.194}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},Ft=function(F,T,N={}){return be(F,T.width,T.height,8,{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:4})};function Pr(F,T,N={}){var W=ae(F),ee=function(De){return De.$type==="bpmn:IntermediateThrowEvent"||De.$type==="bpmn:EndEvent"}(W);return W.get("eventDefinitions")&&W.get("eventDefinitions").length>1?W.get("parallelMultiple")?Kr(T,F,N):yt(T,F,N,ee):_n(W,"bpmn:MessageEventDefinition")?Se(T,F,N,ee):_n(W,"bpmn:TimerEventDefinition")?ft(T,F,N):_n(W,"bpmn:ConditionalEventDefinition")?He(T,F,N):_n(W,"bpmn:SignalEventDefinition")?dt(T,F,N,ee):_n(W,"bpmn:EscalationEventDefinition")?lt(T,F,N,ee):_n(W,"bpmn:LinkEventDefinition")?Yt(T,F,N,ee):_n(W,"bpmn:ErrorEventDefinition")?xe(T,F,N,ee):_n(W,"bpmn:CancelEventDefinition")?ve(T,F,N,ee):_n(W,"bpmn:CompensateEventDefinition")?et(T,F,N,ee):_n(W,"bpmn:TerminateEventDefinition")?Ft(T,F,N):null}var ui={ParticipantMultiplicityMarker:function(F,T,N={}){var W=Kn(T,N),ee=Yn(T,N);ie("participant-multiplicity",F,m.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:W,containerHeight:ee,position:{mx:(W/2-6)/W,my:(ee-15)/ee}}),{strokeWidth:2,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},SubProcessMarker:function(F,T,N={}){Hx(We(F,14,14,0,{strokeWidth:1,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)}),T.width/2-7.5,T.height-20),ie("sub-process",F,m.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2-7.5)/T.width,my:(T.height-20)/T.height}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},ParallelMarker:function(F,T,N){var W=Kn(T,N),ee=Yn(T,N);ie("parallel",F,m.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:W,containerHeight:ee,position:{mx:(W/2+N.parallel)/W,my:(ee-20)/ee}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},SequentialMarker:function(F,T,N){ie("sequential",F,m.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2+N.seq)/T.width,my:(T.height-19)/T.height}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},CompensationMarker:function(F,T,N){ie("compensation",F,m.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2+N.compensation)/T.width,my:(T.height-13)/T.height}}),{strokeWidth:1,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},LoopMarker:function(F,T,N){var W=Kn(T,N),ee=Yn(T,N);ie("loop",F,m.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:W,containerHeight:ee,position:{mx:(W/2+N.loop)/W,my:(ee-7)/ee}}),{strokeWidth:1.5,fill:"none",stroke:Ce(T,j,N.stroke),strokeMiterlimit:.5})},AdhocMarker:function(F,T,N){var W=Kn(T,N),ee=Yn(T,N);ie("adhoc",F,m.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:W,containerHeight:ee,position:{mx:(W/2+N.adhoc)/W,my:(ee-15)/ee}}),{strokeWidth:1,fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke)})}};function nn(F,T,N,W){ui[F](T,N,W)}function Yr(F,T,N,W={}){W={fill:W.fill,stroke:W.stroke,width:Kn(T,W),height:Yn(T,W)};var ee=ae(T),De=N&&N.includes("SubProcessMarker");W=De?{...W,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{...W,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},x(N,function(Tt){nn(Tt,F,T,W)}),ee.get("isForCompensation")&&nn("CompensationMarker",F,T,W),K(ee,"bpmn:AdHocSubProcess")&&nn("AdhocMarker",F,T,W);var it=ee.get("loopCharacteristics"),Ye=it&&it.get("isSequential");it&&(Ye===void 0&&nn("LoopMarker",F,T,W),Ye===!1&&nn("ParallelMarker",F,T,W),Ye===!0&&nn("SequentialMarker",F,T,W))}function Pt(F,T,N={}){N=L({size:{width:100}},N);var W=S.createText(T||"",N);return $(W).add("djs-label"),oe(F,W),W}function Mt(F,T,N,W={}){var ee=ae(T),De=lo({x:T.x,y:T.y,width:T.width,height:T.height},W);return Pt(F,ee.name,{align:N,box:De,padding:7,style:{fill:Cr(T,Q,j,W.stroke)}})}function Ws(F,T,N,W={}){var ee=Ge(N),De=Pt(F,T,{box:{height:30,width:ee?Yn(N,W):Kn(N,W)},align:"center-middle",style:{fill:Cr(N,Q,j,W.stroke)}});ee&&rm(De,0,-(-1*Yn(N,W)),270)}function Us(F,T,N={}){var{width:W,height:ee}=lo(T,N);return We(F,W,ee,10,{...N,fill:Ve(T,O,N.fill),fillOpacity:Is,stroke:Ce(T,j,N.stroke)})}function Qa(F,T,N={}){var W=ae(T),ee=Ve(T,O,N.fill),De=Ce(T,j,N.stroke);return W.get("associationDirection")!=="One"&&W.get("associationDirection")!=="Both"||(N.markerEnd=Be(F,"association-end",ee,De)),W.get("associationDirection")==="Both"&&(N.markerStart=Be(F,"association-start",ee,De)),N=bt(N,["markerStart","markerEnd"]),Te(F,T.waypoints,{...N,stroke:De,strokeDasharray:"0, 5"})}function sc(F,T,N={}){var W=Ve(T,O,N.fill),ee=Ce(T,j,N.stroke),De=G(F,m.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.474,my:.296}}),{fill:W,fillOpacity:Is,stroke:ee});return function(it){var Ye=it.dataObjectRef;return it.isCollection||Ye&&Ye.isCollection}(ae(T))&&G(F,m.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.33,my:(T.height-18)/T.height}}),{strokeWidth:2,fill:W,stroke:ee}),De}function zn(F,T,N={}){return be(F,T.width,T.height,{fillOpacity:Is,...N,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})}function Pn(F,T,N={}){return function(W,ee,De,it){var Ye=ee/2,Tt=De/2,fn=[{x:Ye,y:0},{x:ee,y:Tt},{x:Ye,y:De},{x:0,y:Tt}].map(function(Za){return Za.x+","+Za.y}).join(" ");it=ne(it);var gr=de("polygon",{...it,points:fn});return oe(W,gr),gr}(F,T.width,T.height,{fill:Ve(T,O,N.fill),fillOpacity:Is,stroke:Ce(T,j,N.stroke)})}function an(F,T,N={}){var W=We(F,Kn(T,N),Yn(T,N),0,{fill:Ve(T,O,N.fill),fillOpacity:N.fillOpacity||Is,stroke:Ce(T,j,N.stroke),strokeWidth:1.5}),ee=ae(T);return K(ee,"bpmn:Lane")&&Ws(F,ee.get("name"),T,N),W}function Tr(F,T,N={}){var W=Us(F,T,N);(function(De){return De&&!!ae(De).triggeredByEvent})(T)&&E(W,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var ee=wt(T);return Mt(F,T,ee?"center-top":"center-middle",N),Yr(F,T,ee?void 0:["SubProcessMarker"],N),W}function Tn(F,T,N={}){var W=Us(F,T,N);return Mt(F,T,"center-middle",N),Yr(F,T,void 0,N),W}var Vt=this.handlers={"bpmn:AdHocSubProcess":function(F,T,N={}){return Tr(F,T,N=wt(T)?bt(N,["fill","stroke","width","height"]):bt(N,["fill","stroke"]))},"bpmn:Association":function(F,T,N={}){return Qa(F,T,N=bt(N,["fill","stroke"]))},"bpmn:BoundaryEvent":function(F,T,N={}){var{renderIcon:W=!0}=N;N=bt(N,["fill","stroke"]);var ee=ae(T).get("cancelActivity");N={strokeWidth:1.5,fill:Ve(T,O,N.fill),fillOpacity:1,stroke:Ce(T,j,N.stroke)},ee||(N.strokeDasharray="6");var De=zn(F,T,N);return be(F,T.width,T.height,3,{...N,fill:"none"}),W&&Pr(T,F,N),De},"bpmn:BusinessRuleTask":function(F,T,N={}){var W=Tn(F,T,N=bt(N,["fill","stroke"]));return E(G(F,m.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),E(G(F,m.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),W},"bpmn:CallActivity":function(F,T,N={}){return N=bt(N,["fill","stroke"]),Tr(F,T,{strokeWidth:5,...N})},"bpmn:ComplexGateway":function(F,T,N={}){var W=Pn(F,T,N=bt(N,["fill","stroke"]));return G(F,m.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:T.width,containerHeight:T.height,position:{mx:.46,my:.26}}),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),W},"bpmn:DataInput":function(F,T,N={}){N=bt(N,["fill","stroke"]);var W=m.getRawPath("DATA_ARROW"),ee=sc(F,T,N);return G(F,W,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1}),ee},"bpmn:DataInputAssociation":function(F,T,N={}){return N=bt(N,["fill","stroke"]),Qa(F,T,{...N,markerEnd:Be(F,"association-end",Ve(T,O,N.fill),Ce(T,j,N.stroke))})},"bpmn:DataObject":function(F,T,N={}){return sc(F,T,N=bt(N,["fill","stroke"]))},"bpmn:DataObjectReference":Ie("bpmn:DataObject"),"bpmn:DataOutput":function(F,T,N={}){N=bt(N,["fill","stroke"]);var W=m.getRawPath("DATA_ARROW"),ee=sc(F,T,N);return G(F,W,{strokeWidth:1,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)}),ee},"bpmn:DataOutputAssociation":function(F,T,N={}){return N=bt(N,["fill","stroke"]),Qa(F,T,{...N,markerEnd:Be(F,"association-end",Ve(T,O,N.fill),Ce(T,j,N.stroke))})},"bpmn:DataStoreReference":function(F,T,N={}){return N=bt(N,["fill","stroke"]),G(F,m.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:0,my:.133}}),{fill:Ve(T,O,N.fill),fillOpacity:Is,stroke:Ce(T,j,N.stroke),strokeWidth:2})},"bpmn:EndEvent":function(F,T,N={}){var{renderIcon:W=!0}=N;N=bt(N,["fill","stroke"]);var ee=zn(F,T,{...N,strokeWidth:4});return W&&Pr(T,F,N),ee},"bpmn:EventBasedGateway":function(F,T,N={}){N=bt(N,["fill","stroke"]);var W=ae(T),ee=Pn(F,T,N);be(F,T.width,T.height,.2*T.height,{fill:Ve(T,"none",N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1});var De=W.get("eventGatewayType"),it=!!W.get("instantiate");if(De==="Parallel"){var Ye=m.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:T.width,containerHeight:T.height,position:{mx:.474,my:.296}});G(F,Ye,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1})}else De==="Exclusive"&&(it||be(F,T.width,T.height,.26*T.height,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1}),function(){var Tt=m.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:T.width,containerHeight:T.height,position:{mx:.36,my:.44}});G(F,Tt,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:2})}());return ee},"bpmn:ExclusiveGateway":function(F,T,N={}){var W=Pn(F,T,N=bt(N,["fill","stroke"])),ee=m.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:T.width,containerHeight:T.height,position:{mx:.32,my:.3}});return Re(T).get("isMarkerVisible")&&G(F,ee,{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),W},"bpmn:Gateway":function(F,T,N={}){return Pn(F,T,N=bt(N,["fill","stroke"]))},"bpmn:Group":function(F,T,N={}){return N=bt(N,["fill","stroke","width","height"]),We(F,T.width,T.height,10,{stroke:Ce(T,j,N.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:Kn(T,N),height:Yn(T,N)})},"bpmn:InclusiveGateway":function(F,T,N={}){var W=Pn(F,T,N=bt(N,["fill","stroke"]));return be(F,T.width,T.height,.24*T.height,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:2.5}),W},"bpmn:IntermediateEvent":function(F,T,N={}){var{renderIcon:W=!0}=N;N=bt(N,["fill","stroke"]);var ee=zn(F,T,{...N,strokeWidth:1.5});return be(F,T.width,T.height,3,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1.5}),W&&Pr(T,F,N),ee},"bpmn:IntermediateCatchEvent":Ie("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":Ie("bpmn:IntermediateEvent"),"bpmn:Lane":function(F,T,N={}){return N=bt(N,["fill","stroke","width","height"]),an(F,T,{...N,fillOpacity:.25})},"bpmn:ManualTask":function(F,T,N={}){var W=Tn(F,T,N=bt(N,["fill","stroke"]));return G(F,m.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),W},"bpmn:MessageFlow":function(F,T,N={}){N=bt(N,["fill","stroke"]);var W=ae(T),ee=Re(T),De=Ve(T,O,N.fill),it=Ce(T,j,N.stroke),Ye=Te(F,T.waypoints,{markerEnd:Be(F,"messageflow-end",De,it),markerStart:Be(F,"messageflow-start",De,it),stroke:it,strokeDasharray:"10, 11",strokeWidth:1.5});if(W.get("messageRef")){var Tt=Ye.getPointAtLength(Ye.getTotalLength()/2),fn=m.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Tt.x,y:Tt.y}}),gr={strokeWidth:1};ee.get("messageVisibleKind")==="initiating"?(gr.fill=De,gr.stroke=it):(gr.fill=it,gr.stroke=De);var Za=G(F,fn,gr),Y_=Pt(F,W.get("messageRef").get("name"),{align:"center-top",fitBox:!0,style:{fill:it}}),UA=Za.getBBox(),GA=Y_.getBBox();rm(Y_,Tt.x-GA.width/2,Tt.y+UA.height/2+10,0)}return Ye},"bpmn:ParallelGateway":function(F,T,N={}){var W=Pn(F,T,N=bt(N,["fill","stroke"]));return G(F,m.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:T.width,containerHeight:T.height,position:{mx:.46,my:.2}}),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),W},"bpmn:Participant":function(F,T,N={}){var W=an(F,T,N=bt(N,["fill","stroke","width","height"])),ee=wt(T),De=Ge(T),it=ae(T),Ye=it.get("name");if(ee)ce(F,De?[{x:30,y:0},{x:30,y:Yn(T,N)}]:[{x:0,y:30},{x:Kn(T,N),y:30}],{stroke:Ce(T,j,N.stroke),strokeWidth:1.5}),Ws(F,Ye,T,N);else{var Tt=lo(T,N);De||(Tt.height=Kn(T,N),Tt.width=Yn(T,N));var fn=Pt(F,Ye,{box:Tt,align:"center-middle",style:{fill:Cr(T,Q,j,N.stroke)}});De||rm(fn,0,-(-1*Yn(T,N)),270)}return it.get("participantMultiplicity")&&nn("ParticipantMultiplicityMarker",F,T,N),W},"bpmn:ReceiveTask":function(F,T,N={}){N=bt(N,["fill","stroke"]);var W,ee=ae(T),De=Tn(F,T,N);return ee.get("instantiate")?(be(F,28,28,4.4,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),W=m.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):W=m.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),G(F,W,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),De},"bpmn:ScriptTask":function(F,T,N={}){var W=Tn(F,T,N=bt(N,["fill","stroke"]));return G(F,m.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),W},"bpmn:SendTask":function(F,T,N={}){var W=Tn(F,T,N=bt(N,["fill","stroke"]));return G(F,m.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{fill:Ce(T,j,N.stroke),stroke:Ve(T,O,N.fill),strokeWidth:1}),W},"bpmn:SequenceFlow":function(F,T,N={}){N=bt(N,["fill","stroke"]);var W=Ve(T,O,N.fill),ee=Ce(T,j,N.stroke),De=Te(F,T.waypoints,{markerEnd:Be(F,"sequenceflow-end",W,ee),stroke:ee}),it=ae(T),{source:Ye}=T;if(Ye){var Tt=ae(Ye);it.get("conditionExpression")&&K(Tt,"bpmn:Activity")&&E(De,{markerStart:Be(F,"conditional-flow-marker",W,ee)}),Tt.get("default")&&(K(Tt,"bpmn:Gateway")||K(Tt,"bpmn:Activity"))&&Tt.get("default")===it&&E(De,{markerStart:Be(F,"conditional-default-flow-marker",W,ee)})}return De},"bpmn:ServiceTask":function(F,T,N={}){var W=Tn(F,T,N=bt(N,["fill","stroke"]));return be(F,10,10,{fill:Ve(T,O,N.fill),stroke:"none",transform:"translate(6, 6)"}),G(F,m.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),be(F,10,10,{fill:Ve(T,O,N.fill),stroke:"none",transform:"translate(11, 10)"}),G(F,m.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),W},"bpmn:StartEvent":function(F,T,N={}){var{renderIcon:W=!0}=N;N=bt(N,["fill","stroke"]),ae(T).get("isInterrupting")||(N={...N,strokeDasharray:"6"});var ee=zn(F,T,N);return W&&Pr(T,F,N),ee},"bpmn:SubProcess":function(F,T,N={}){return Tr(F,T,N=wt(T)?bt(N,["fill","stroke","width","height"]):bt(N,["fill","stroke"]))},"bpmn:Task":function(F,T,N={}){return Tn(F,T,N=bt(N,["fill","stroke"]))},"bpmn:TextAnnotation":function(F,T,N={}){N=bt(N,["fill","stroke","width","height"]);var{width:W,height:ee}=lo(T,N),De=We(F,W,ee,0,0,{fill:"none",stroke:"none"});return G(F,m.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:W,containerHeight:ee,position:{mx:0,my:0}}),{stroke:Ce(T,j,N.stroke)}),Pt(F,ae(T).get("text")||"",{align:"left-top",box:lo(T,N),padding:7,style:{fill:Cr(T,Q,j,N.stroke)}}),De},"bpmn:Transaction":function(F,T,N={}){N=wt(T)?bt(N,["fill","stroke","width","height"]):bt(N,["fill","stroke"]);var W=Tr(F,T,{strokeWidth:1.5,...N}),ee=h.style(["no-fill","no-events"],{stroke:Ce(T,j,N.stroke),strokeWidth:1.5});return wt(T)||(N={}),We(F,Kn(T,N),Yn(T,N),7,3,ee),W},"bpmn:UserTask":function(F,T,N={}){var W=Tn(F,T,N=bt(N,["fill","stroke"]));return G(F,m.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),G(F,m.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),G(F,m.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),W},label:function(F,T,N={}){return function(W,ee,De={}){var it={width:90,height:30,x:ee.width/2+ee.x,y:ee.height/2+ee.y};return Pt(W,re(ee),{box:it,fitBox:!0,style:L({},S.getExternalStyle(),{fill:Cr(ee,Q,j,De.stroke)})})}(F,T,N)}};this._drawPath=G,this._renderer=te}function bt(c,p=[]){return p.reduce((h,m)=>(c[m]&&(h[m]=c[m]),h),{})}n(Wa,Y),Wa.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Wa.prototype.canRender=function(c){return K(c,"bpmn:BaseElement")},Wa.prototype.drawShape=function(c,p,h={}){var{type:m}=p;return this._renderer(m)(c,p,h)},Wa.prototype.drawConnection=function(c,p,h={}){var{type:m}=p;return this._renderer(m)(c,p,h)},Wa.prototype.getShapePath=function(c){return K(c,"bpmn:Event")?function(p){var h=p.x+p.width/2,m=p.y+p.height/2,_=p.width/2;return Le([["M",h,m],["m",0,-_],["a",_,_,0,1,1,0,2*_],["a",_,_,0,1,1,0,-2*_],["z"]])}(c):K(c,"bpmn:Activity")?function(p,h){var m=p.x,_=p.y,S=p.width,M=p.height;return Le([["M",m+h,_],["l",S-2*h,0],["a",h,h,0,0,1,h,h],["l",0,M-2*h],["a",h,h,0,0,1,-h,h],["l",2*h-S,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-M],["a",h,h,0,0,1,h,-h],["z"]])}(c,10):K(c,"bpmn:Gateway")?function(p){var h=p.width/2,m=p.height/2;return Le([["M",p.x+h,p.y],["l",h,m],["l",-h,m],["l",-h,-m],["z"]])}(c):function(p){var h=p.x,m=p.y,_=p.width;return Le([["M",h,m],["l",_,0],["l",0,p.height],["l",-_,0],["z"]])}(c)};var AT=0,MT={width:150,height:50};function NT(c,p){var h;p.textContent=c;try{var m,_=c==="";return p.textContent=_?"dummy":c,m={width:(h=p.getBBox()).width+2*h.x,height:h.height},_&&(m.width=0),m}catch{return{width:0,height:0}}}function DT(c,p,h){for(var m,_=c.shift(),S=_;;){if((m=NT(S,h)).width=S?m.width:0,S===" "||S===""||m.width<Math.round(p)||S.length<2)return OT(c,S,_,m);S=LT(S,m.width,p)}}function OT(c,p,h,m){if(p.length<h.length){var _=h.slice(p.length).trim();c.unshift(_)}return{width:m.width,height:m.height,text:p}}var Vx="";function LT(c,p,h){var m=Math.max(c.length*(h/p),1),_=function(S,M){var O,j=S.split(/(\s|-|\u00AD)/g),Q=[],ne=0;if(j.length>1)for(;O=j.shift();){if(!(O.length+ne<M)){O!=="-"&&O!==Vx||Q.pop();break}Q.push(O),ne+=O.length}var he=Q[Q.length-1];return he&&he===Vx&&(Q[Q.length-1]="-"),Q.join("")}(c,m);return _||(_=c.slice(0,Math.max(Math.round(m-1),1))),_}function lp(c){this._config=L({},{size:MT,padding:AT,style:{},align:"center-top"},c||{})}lp.prototype.createText=function(c,p){return this.layoutText(c,p).element},lp.prototype.getDimensions=function(c,p){return this.layoutText(c,p).dimensions},lp.prototype.layoutText=function(c,p){var h=L({},this._config.size,p.box),m=L({},this._config.style,p.style),_=function(ce){var Te=ce.split("-");return{horizontal:Te[0]||"center",vertical:Te[1]||"top"}}(p.align||this._config.align),S=function(ce){return l(ce)?L({top:0,left:0,right:0,bottom:0},ce):{top:ce,left:ce,right:ce,bottom:ce}}(p.padding!==void 0?p.padding:this._config.padding),M=p.fitBox||!1,O=function(ce){if("fontSize"in ce&&"lineHeight"in ce)return ce.lineHeight*parseInt(ce.fontSize,10)}(m),j=c.split(/\u00AD?\r?\n/),Q=[],ne=h.width-S.left-S.right,he=de("text");for(E(he,{x:0,y:0}),E(he,m),oe(function(){var ce=document.getElementById("helper-svg");return ce||(E(ce=de("svg"),{id:"helper-svg"}),Rr(ce,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(ce)),ce}(),he);j.length;)Q.push(DT(j,ne,he));_.vertical==="middle"&&(S.top=S.bottom=0);var ke=C(Q,function(ce,Te,G){return ce+(O||Te.height)},0)+S.top+S.bottom,Be=C(Q,function(ce,Te,G){return Te.width>ce?Te.width:ce},0),be=S.top;_.vertical==="middle"&&(be+=(h.height-ke)/2),be-=(O||Q[0].height)/4;var We=de("text");return E(We,m),x(Q,function(ce){var Te;switch(be+=O||ce.height,_.horizontal){case"left":Te=S.left;break;case"right":Te=(M?Be:ne)-S.right-ce.width;break;default:Te=Math.max(((M?Be:ne)-ce.width)/2+S.left,0)}var G=de("tspan");E(G,{x:Te,y:be}),G.textContent=ce.text,oe(We,G)}),ge(he),{dimensions:{width:Be,height:ke},element:We}};function Wx(c){var p=L({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},c&&c.defaultStyle||{}),h=parseInt(p.fontSize,10)-1,m=L({},p,{fontSize:h},c&&c.externalStyle||{}),_=new lp({style:p});this.getExternalLabelBounds=function(S,M){var O=_.getDimensions(M,{box:{width:90,height:30},style:m});return{x:Math.round(S.x+S.width/2-O.width/2),y:Math.round(S.y),width:Math.ceil(O.width),height:Math.ceil(O.height)}},this.getTextAnnotationBounds=function(S,M){var O=_.getDimensions(M,{box:S,style:p,align:"left-top",padding:5});return{x:S.x,y:S.y,width:S.width,height:Math.max(30,Math.round(O.height))}},this.createText=function(S,M){return _.createText(S,M||{})},this.getDefaultStyle=function(){return p},this.getExternalStyle=function(){return m}}Wx.$inject=["config.textRenderer"];var BT=/\{([^{}]+)\}/g,IT=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,jT={__init__:["bpmnRenderer"],bpmnRenderer:["type",Wa],textRenderer:["type",Wx],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(c){return this.pathMap[c].d},this.getScaledPath=function(c,p){var h,m,_=this.pathMap[c];p.abspos?(h=p.abspos.x,m=p.abspos.y):(h=p.containerWidth*p.position.mx,m=p.containerHeight*p.position.my);var S={};if(p.position){for(var M=p.containerHeight/_.height*p.yScaleFactor,O=p.containerWidth/_.width*p.xScaleFactor,j=0;j<_.heightElements.length;j++)S["y"+j]=_.heightElements[j]*M;for(var Q=0;Q<_.widthElements.length;Q++)S["x"+Q]=_.widthElements[Q]*O}var ne,he,ke=(ne=_.d,he={mx:h,my:m,e:S},String(ne).replace(BT,function(Be,be){return function(We,ce,Te){var G=Te;return ce.replace(IT,function(ie,te,Ie,Se,ft){te=te||Se,G&&(te in G&&(G=G[te]),typeof G=="function"&&ft&&(G=G()))}),G=(G==null||G==Te?We:G)+""}(Be,be,he)}));return ke}}]},Ux={translate:["value",function(c,p){return p=p||{},c.replace(/{([^}]+)}/g,function(h,m){return p[m]||"{"+m+"}"})}]};function im(c){return{top:c.y,right:c.x+(c.width||0),bottom:c.y+(c.height||0),left:c.x}}function $T(c){return p={x:c.x+(c.width||0)/2,y:c.y+(c.height||0)/2},{x:Math.round(p.x),y:Math.round(p.y)};var p}function FT(c){for(var p=c.waypoints,h=p.reduce(function(O,j,Q){var ne,he,ke=p[Q-1];if(ke){var Be=O[O.length-1],be=Be&&Be.endLength||0,We=(ne=ke,he=j,Math.sqrt(Math.pow(ne.x-he.x,2)+Math.pow(ne.y-he.y,2)));O.push({start:ke,end:j,startLength:be,endLength:be+We,length:We})}return O},[]),m=h.reduce(function(O,j){return O+j.length},0)/2,_=0,S=h[_];S.endLength<m;)S=h[++_];var M=(m-S.startLength)/S.length;return{x:S.start.x+(S.end.x-S.start.x)*M,y:S.start.y+(S.end.y-S.start.y)*M}}function om(c){return l(p=c)&&g(p,"waypoints")?FT(c):$T(c);var p}function qn(c){return c?"<"+c.$type+(c.id?' id="'+c.id:"")+'" />':"<null>"}function cp(c,p,h){return L({id:c.id,type:c.$type,businessObject:c,di:p},h)}function zT(c,p,h){var m=c.waypoint;return!m||m.length<2?[om(p),om(h)]:m.map(function(_){return{x:_.x,y:_.y}})}function Gx(c,p,h){return new Error(`element ${qn(p)} referenced by ${qn(c)}#${h} not yet drawn`)}function uo(c,p,h,m,_){this._eventBus=c,this._canvas=p,this._elementFactory=h,this._elementRegistry=m,this._textRenderer=_}uo.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"],uo.prototype.add=function(c,p,h){var m,_,S,M,O,j,Q;if(K(p,"bpmndi:BPMNPlane")){var ne=K(c,"bpmn:SubProcess")?{id:c.id+"_plane"}:{};m=this._elementFactory.createRoot(cp(c,p,ne)),this._canvas.addRootElement(m)}else if(K(p,"bpmndi:BPMNShape")){var he=!wt(c,p),ke=function(ce){return K(ce,"bpmn:Group")}(c);_=h&&(h.hidden||h.collapsed);var Be=p.bounds;m=this._elementFactory.createShape(cp(c,p,{collapsed:he,hidden:_,x:Math.round(Be.x),y:Math.round(Be.y),width:Math.round(Be.width),height:Math.round(Be.height),isFrame:ke})),K(c,"bpmn:BoundaryEvent")&&this._attachBoundary(c,m),K(c,"bpmn:Lane")&&(S=0),K(c,"bpmn:DataStoreReference")&&(M=h,O=om(Be),j=O.x,Q=O.y,j>=M.x&&j<=M.x+M.width&&Q>=M.y&&Q<=M.y+M.height||(h=this._canvas.findRoot(h))),this._canvas.addShape(m,h,S)}else{if(!K(p,"bpmndi:BPMNEdge"))throw new Error(`unknown di ${qn(p)} for element ${qn(c)}`);var be=this._getSource(c),We=this._getTarget(c);_=h&&(h.hidden||h.collapsed),m=this._elementFactory.createConnection(cp(c,p,{hidden:_,source:be,target:We,waypoints:zT(p,be,We)})),K(c,"bpmn:DataAssociation")&&(h=this._canvas.findRoot(h)),this._canvas.addConnection(m,h,S)}return function(ce){return K(ce,"bpmn:Event")||K(ce,"bpmn:Gateway")||K(ce,"bpmn:DataStoreReference")||K(ce,"bpmn:DataObjectReference")||K(ce,"bpmn:DataInput")||K(ce,"bpmn:DataOutput")||K(ce,"bpmn:SequenceFlow")||K(ce,"bpmn:MessageFlow")||K(ce,"bpmn:Group")}(c)&&re(m)&&this.addLabel(c,p,m),this._eventBus.fire("bpmnElement.added",{element:m}),m},uo.prototype._attachBoundary=function(c,p){var h=c.attachedToRef;if(!h)throw new Error(`missing ${qn(c)}#attachedToRef`);var m=this._elementRegistry.get(h.id),_=m&&m.attachers;if(!m)throw Gx(c,h,"attachedToRef");p.host=m,_||(m.attachers=_=[]),_.indexOf(p)===-1&&_.push(p)},uo.prototype.addLabel=function(c,p,h){var m,_,S;return m=qe(p,h),(_=re(h))&&(m=this._textRenderer.getExternalLabelBounds(m,_)),S=this._elementFactory.createLabel(cp(c,p,{id:c.id+"_label",labelTarget:h,type:"label",hidden:h.hidden||!re(h),x:Math.round(m.x),y:Math.round(m.y),width:Math.round(m.width),height:Math.round(m.height)})),this._canvas.addShape(S,h.parent)},uo.prototype._getConnectedElement=function(c,p){var h,m,_=c.$type;if(m=c[p+"Ref"],p==="source"&&_==="bpmn:DataInputAssociation"&&(m=m&&m[0]),(p==="source"&&_==="bpmn:DataOutputAssociation"||p==="target"&&_==="bpmn:DataInputAssociation")&&(m=c.$parent),h=m&&this._getElement(m))return h;throw m?Gx(c,m,p+"Ref"):new Error(`${qn(c)}#${p} Ref not specified`)},uo.prototype._getSource=function(c){return this._getConnectedElement(c,"source")},uo.prototype._getTarget=function(c){return this._getConnectedElement(c,"target")},uo.prototype._getElement=function(c){return this._elementRegistry.get(c.id)};var HT={__depends__:[jT,{__depends__:[Ux],bpmnImporter:["type",uo]}]};function Ua(c,p){var h,m,_,S;return p=!!p,s(c)||(c=[c]),x(c,function(M){var O=M;M.waypoints&&!p&&(O=Ua(M.waypoints,!0));var j=O.x,Q=O.y,ne=O.height||0,he=O.width||0;(j<h||h===void 0)&&(h=j),(Q<m||m===void 0)&&(m=Q),(j+he>_||_===void 0)&&(_=j+he),(Q+ne>S||S===void 0)&&(S=Q+ne)}),{x:h,y:m,height:S-m,width:_-h}}function Kx(c){return"waypoints"in c?"connection":"x"in c?"shape":"root"}function Yx(c){return!(!c||!c.isFrame)}function qx(c){this._counter=0,this._prefix=(c?c+"-":"")+Math.floor(1e9*Math.random())+"-"}qx.prototype.next=function(){return this._prefix+ ++this._counter};var VT=new qx("ov");function On(c,p,h,m){var _,S;this._eventBus=p,this._canvas=h,this._elementRegistry=m,this._ids=VT,this._overlayDefaults=L({show:null,scale:!0},c&&c.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(_=h.getContainer(),Rr(S=Vi('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),_.insertBefore(S,_.firstChild),S),this._init()}function Xx(c,p,h){Rr(c,{left:p+"px",top:h+"px"})}function up(c,p){c.style.display=p===!1?"none":""}function Qx(c,p){c.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(h){c.style[h+"transform"]=p})}On.$inject=["config.overlays","eventBus","canvas","elementRegistry"],On.prototype.get=function(c){if(d(c)&&(c={id:c}),d(c.element)&&(c.element=this._elementRegistry.get(c.element)),c.element){var p=this._getOverlayContainer(c.element,!0);return p?c.type?v(p.overlays,w({type:c.type})):p.overlays.slice():[]}return c.type?v(this._overlays,w({type:c.type})):c.id?this._overlays[c.id]:null},On.prototype.add=function(c,p,h){if(l(p)&&(h=p,p=null),c.id||(c=this._elementRegistry.get(c)),!h.position)throw new Error("must specifiy overlay position");if(!h.html)throw new Error("must specifiy overlay html");if(!c)throw new Error("invalid element specified");var m=this._ids.next();return h=L({},this._overlayDefaults,h,{id:m,type:p,element:c,html:h.html}),this._addOverlay(h),m},On.prototype.remove=function(c){var p=this.get(c)||[];s(p)||(p=[p]);var h=this;x(p,function(m){var _=h._getOverlayContainer(m.element,!0);if(m&&(sp(m.html),sp(m.htmlContainer),delete m.htmlContainer,delete m.element,delete h._overlays[m.id]),_){var S=_.overlays.indexOf(m);S!==-1&&_.overlays.splice(S,1)}})},On.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"},On.prototype.show=function(){up(this._overlayRoot)},On.prototype.hide=function(){up(this._overlayRoot,!1)},On.prototype.clear=function(){this._overlays={},this._overlayContainers=[],jx(this._overlayRoot)},On.prototype._updateOverlayContainer=function(c){var p=c.element,h=c.html,m=p.x,_=p.y;if(p.waypoints){var S=Ua(p);m=S.x,_=S.y}Xx(h,m,_),function(M,O,j){arguments.length==2?M.getAttribute(O):j===null?M.removeAttribute(O):M.setAttribute(O,j)}(c.html,"data-container-id",p.id)},On.prototype._updateOverlay=function(c){var p,h,m=c.position,_=c.htmlContainer,S=c.element,M=m.left,O=m.top;m.right!==void 0&&(p=S.waypoints?Ua(S).width:S.width,M=-1*m.right+p),m.bottom!==void 0&&(h=S.waypoints?Ua(S).height:S.height,O=-1*m.bottom+h),Xx(_,M||0,O||0),this._updateOverlayVisibilty(c,this._canvas.viewbox())},On.prototype._createOverlayContainer=function(c){var p=Vi('<div class="djs-overlays" />');Rr(p,{position:"absolute"}),this._overlayRoot.appendChild(p);var h={html:p,element:c,overlays:[]};return this._updateOverlayContainer(h),this._overlayContainers.push(h),h},On.prototype._updateRoot=function(c){var p=c.scale||1,h="matrix("+[p,0,0,p,-1*c.x*p,-1*c.y*p].join(",")+")";Qx(this._overlayRoot,h)},On.prototype._getOverlayContainer=function(c,p){var h=y(this._overlayContainers,function(m){return m.element===c});return h||p?h:this._createOverlayContainer(c)},On.prototype._addOverlay=function(c){var p,h,m=c.id,_=c.element,S=c.html;S.get&&S.constructor.prototype.jquery&&(S=S.get(0)),d(S)&&(S=Vi(S)),h=this._getOverlayContainer(_),Rr(p=Vi('<div class="djs-overlay" data-overlay-id="'+m+'">'),{position:"absolute"}),p.appendChild(S),c.type&&ip(p).add("djs-overlay-"+c.type),up(p,this._canvas.findRoot(_)===this._canvas.getRootElement()),c.htmlContainer=p,h.overlays.push(c),h.html.appendChild(p),this._overlays[m]=c,this._updateOverlay(c),this._updateOverlayVisibilty(c,this._canvas.viewbox())},On.prototype._updateOverlayVisibilty=function(c,p){var h=c.show,m=this._canvas.findRoot(c.element),_=h&&h.minZoom,S=h&&h.maxZoom,M=c.htmlContainer,O=!0;(m!==this._canvas.getRootElement()||h&&(a(_)&&_>p.scale||a(S)&&S<p.scale))&&(O=!1),up(M,O),this._updateOverlayScale(c,p)},On.prototype._updateOverlayScale=function(c,p){var h,m,_,S=c.scale,M=c.htmlContainer,O="";S!==!0&&(S===!1?(h=1,m=1):(h=S.min,m=S.max),a(h)&&p.scale<h&&(_=(1/p.scale||1)*h),a(m)&&p.scale>m&&(_=(1/p.scale||1)*m)),a(_)&&(O="scale("+_+","+_+")"),Qx(M,O)},On.prototype._updateOverlaysVisibilty=function(c){var p=this;x(this._overlays,function(h){p._updateOverlayVisibilty(h,c)})},On.prototype._init=function(){var c=this._eventBus,p=this;c.on("canvas.viewbox.changing",function(h){p.hide()}),c.on("canvas.viewbox.changed",function(h){var m;m=h.viewbox,p._updateRoot(m),p._updateOverlaysVisibilty(m),p.show()}),c.on(["shape.remove","connection.remove"],function(h){var m=h.element;x(p.get({element:m}),function(M){p.remove(M.id)});var _=p._getOverlayContainer(m);if(_){sp(_.html);var S=p._overlayContainers.indexOf(_);S!==-1&&p._overlayContainers.splice(S,1)}}),c.on("element.changed",500,function(h){var m=h.element,_=p._getOverlayContainer(m,!0);_&&(x(_.overlays,function(S){p._updateOverlay(S)}),p._updateOverlayContainer(_))}),c.on("element.marker.update",function(h){var m=p._getOverlayContainer(h.element,!0);m&&ip(m.html)[h.add?"add":"remove"](h.marker)}),c.on("root.set",function(){p._updateOverlaysVisibilty(p._canvas.viewbox())}),c.on("diagram.clear",this.clear,this)};var Zx={__init__:["overlays"],overlays:["type",On]};function Jx(c,p,h,m){c.on("element.changed",function(_){var S=_.element;(S.parent||S===p.getRootElement())&&(_.gfx=h.getGraphics(S)),_.gfx&&c.fire(Kx(S)+".changed",_)}),c.on("elements.changed",function(_){var S=_.elements;S.forEach(function(M){c.fire("element.changed",{element:M})}),m.updateContainments(S)}),c.on("shape.changed",function(_){m.update("shape",_.element,_.gfx)}),c.on("connection.changed",function(_){m.update("connection",_.element,_.gfx)})}Jx.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var WT={__init__:["changeSupport"],changeSupport:["type",Jx]};function hr(c){this._eventBus=c}function po(c){return function(p,h,m,_,S){(f(p)||u(p))&&(S=_,_=m,m=h,h=p,p=null),this.on(p,c,h,m,_,S)}}function am(c,p){p.invoke(hr,this),this.executed(function(h){var m=h.context;m.rootElement?c.setRootElement(m.rootElement):m.rootElement=c.getRootElement()}),this.revert(function(h){var m=h.context;m.rootElement&&c.setRootElement(m.rootElement)})}hr.$inject=["eventBus"],hr.prototype.on=function(c,p,h,m,_,S){if((f(p)||u(p))&&(S=_,_=m,m=h,h=p,p=null),f(h)&&(S=_,_=m,m=h,h=1e3),l(_)&&(S=_,_=!1),!f(m))throw new Error("handlerFn must be a function");s(c)||(c=[c]);var M=this._eventBus;x(c,function(O){var j=["commandStack",O,p].filter(function(Q){return Q}).join(".");M.on(j,h,_?function(Q,ne){return function(he){return Q.call(ne||null,he.context,he.command,he)}}(m,S):m,S)})},hr.prototype.canExecute=po("canExecute"),hr.prototype.preExecute=po("preExecute"),hr.prototype.preExecuted=po("preExecuted"),hr.prototype.execute=po("execute"),hr.prototype.executed=po("executed"),hr.prototype.postExecute=po("postExecute"),hr.prototype.postExecuted=po("postExecuted"),hr.prototype.revert=po("revert"),hr.prototype.reverted=po("reverted"),n(am,hr),am.$inject=["canvas","injector"];var UT={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",am]},GT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},KT="_plane";function sm(c){var p=c.id;return K(c,"bpmn:SubProcess")?function(h){return h+KT}(p):p}function e_(c,p,h){var m=Vi('<ul class="bjs-breadcrumbs"></ul>'),_=h.getContainer(),S=ip(_);_.appendChild(m);var M=[];function O(j){j&&(M=function(he){for(var ke=ae(he),Be=[],be=ke;be;be=be.$parent)(K(be,"bpmn:SubProcess")||K(be,"bpmn:Process"))&&Be.push(be);return Be.reverse()}(j));var Q=M.flatMap(function(he){var ke=h.findRoot(sm(he))||h.findRoot(he.id);if(!ke&&K(he,"bpmn:Process")){var Be=p.find(function(Te){var G=ae(Te);return G&&G.get("processRef")===he});ke=Be&&h.findRoot(Be.id)}if(!ke)return[];var be,We=(be=""+(be=he.name||he.id))&&be.replace(/[&<>"']/g,function(Te){return GT[Te]}),ce=Vi('<li><span class="bjs-crumb"><a title="'+We+'">'+We+"</a></span></li>");return ce.addEventListener("click",function(){h.setRootElement(ke)}),ce});m.innerHTML="";var ne=Q.length>1;S.toggle("bjs-breadcrumbs-shown",ne),Q.forEach(function(he){m.appendChild(he)})}c.on("element.changed",function(j){var Q=ae(j.element);y(M,function(ne){return ne===Q})&&O()}),c.on("root.set",function(j){O(j.element)})}function t_(c,p){var h=null,m=new YT;c.on("root.set",function(_){var S=_.element,M=p.viewbox(),O=m.get(S);if(m.set(h,{x:M.x,y:M.y,zoom:M.scale}),h=S,K(S,"bpmn:SubProcess")||O){O=O||{x:0,y:0,zoom:1};var j=(M.x-O.x)*M.scale,Q=(M.y-O.y)*M.scale;j===0&&Q===0||p.scroll({dx:j,dy:Q}),O.zoom!==M.scale&&p.zoom(O.zoom,{x:0,y:0})}}),c.on("diagram.clear",function(){m.clear(),h=null})}function YT(){this._entries=[],this.set=function(c,p){var h=!1;for(var m in this._entries)if(this._entries[m][0]===c){this._entries[m][1]=p,h=!0;break}h||this._entries.push([c,p])},this.get=function(c){for(var p in this._entries)if(this._entries[p][0]===c)return this._entries[p][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(c){var p=-1;for(var h in this._entries)if(this._entries[h][0]===c){p=h;break}p!==-1&&this._entries.splice(p,1)}}e_.$inject=["eventBus","elementRegistry","canvas"],t_.$inject=["eventBus","canvas"];var qT=180,XT=160;function Ga(c,p){this._eventBus=c,this._moddle=p;var h=this;c.on("import.render.start",1500,function(m,_){h._handleImport(_.definitions)})}function n_(c){return K(c,"bpmndi:BPMNDiagram")?c:n_(c.$parent)}Ga.prototype._handleImport=function(c){if(c.diagrams){var p=this;this._definitions=c,this._processToDiagramMap={},c.diagrams.forEach(function(h){h.plane&&h.plane.bpmnElement&&(p._processToDiagramMap[h.plane.bpmnElement.id]=h)}),c.diagrams.filter(h=>h.plane).flatMap(h=>p._createNewDiagrams(h.plane)).forEach(function(h){p._movePlaneElementsToOrigin(h.plane)})}},Ga.prototype._createNewDiagrams=function(c){var p=this,h=[],m=[];c.get("planeElement").forEach(function(S){var M=S.bpmnElement;if(M){var O=M.$parent;K(M,"bpmn:SubProcess")&&!S.isExpanded&&h.push(M),function(j,Q){var ne=j.$parent;return!(!K(ne,"bpmn:SubProcess")||ne===Q.bpmnElement||se(j,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}(M,c)&&m.push({diElement:S,parent:O})}});var _=[];return h.forEach(function(S){if(!p._processToDiagramMap[S.id]){var M=p._createDiagram(S);p._processToDiagramMap[S.id]=M,_.push(M)}}),m.forEach(function(S){for(var M=S.diElement,O=S.parent;O&&h.indexOf(O)===-1;)O=O.$parent;if(O){var j=p._processToDiagramMap[O.id];p._moveToDiPlane(M,j.plane)}}),_},Ga.prototype._movePlaneElementsToOrigin=function(c){var p=c.get("planeElement"),h=function(S){var M={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return S.planeElement.forEach(function(O){if(O.bounds){var j=im(O.bounds);M.top=Math.min(j.top,M.top),M.left=Math.min(j.left,M.left)}}),function(O){return{x:O.left,y:O.top,width:O.right-O.left,height:O.bottom-O.top}}(M)}(c),m=h.x-qT,_=h.y-XT;p.forEach(function(S){S.waypoint?S.waypoint.forEach(function(M){M.x=M.x-m,M.y=M.y-_}):S.bounds&&(S.bounds.x=S.bounds.x-m,S.bounds.y=S.bounds.y-_)})},Ga.prototype._moveToDiPlane=function(c,p){var h=n_(c).plane.get("planeElement");h.splice(h.indexOf(c),1),p.get("planeElement").push(c)},Ga.prototype._createDiagram=function(c){var p=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:c}),h=this._moddle.create("bpmndi:BPMNDiagram",{plane:p});return p.$parent=h,p.bpmnElement=c,h.$parent=this._definitions,this._definitions.diagrams.push(h),h},Ga.$inject=["eventBus","moddle"];var pp=250;function Ho(c,p,h,m,_){hr.call(this,p),this._canvas=c,this._eventBus=p,this._elementRegistry=h,this._overlays=m,this._translate=_;var S=this;this.executed("shape.toggleCollapse",pp,function(M){var O=M.shape;S._canDrillDown(O)?S._addOverlay(O):S._removeOverlay(O)},!0),this.reverted("shape.toggleCollapse",pp,function(M){var O=M.shape;S._canDrillDown(O)?S._addOverlay(O):S._removeOverlay(O)},!0),this.executed(["shape.create","shape.move","shape.delete"],pp,function(M){var O=M.oldParent,j=M.newParent||M.parent,Q=M.shape;S._canDrillDown(Q)&&S._addOverlay(Q),S._updateDrilldownOverlay(O),S._updateDrilldownOverlay(j),S._updateDrilldownOverlay(Q)},!0),this.reverted(["shape.create","shape.move","shape.delete"],pp,function(M){var O=M.oldParent,j=M.newParent||M.parent,Q=M.shape;S._canDrillDown(Q)&&S._addOverlay(Q),S._updateDrilldownOverlay(O),S._updateDrilldownOverlay(j),S._updateDrilldownOverlay(Q)},!0),p.on("import.render.complete",function(){h.filter(function(M){return S._canDrillDown(M)}).map(function(M){S._addOverlay(M)})})}n(Ho,hr),Ho.prototype._updateDrilldownOverlay=function(c){var p=this._canvas;if(c){var h=p.findRoot(c);h&&this._updateOverlayVisibility(h)}},Ho.prototype._canDrillDown=function(c){var p=this._canvas;return K(c,"bpmn:SubProcess")&&p.findRoot(sm(c))},Ho.prototype._updateOverlayVisibility=function(c){var p=this._overlays,h=ae(c),m=p.get({element:h.id,type:"drilldown"})[0];if(m){var _=h&&h.get("flowElements")&&h.get("flowElements").length;ip(m.html).toggle("bjs-drilldown-empty",!_)}},Ho.prototype._addOverlay=function(c){var p=this._canvas,h=this._overlays,m=ae(c);h.get({element:c,type:"drilldown"}).length&&this._removeOverlay(c);var _=Vi('<button type="button" class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>'),S=m.get("name")||m.get("id"),M=this._translate("Open {element}",{element:S});_.setAttribute("title",M),_.addEventListener("click",function(){p.setRootElement(p.findRoot(sm(c)))}),h.add(c,"drilldown",{position:{bottom:-7,right:-8},html:_}),this._updateOverlayVisibility(c)},Ho.prototype._removeOverlay=function(c){this._overlays.remove({element:c,type:"drilldown"})},Ho.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];var QT={__depends__:[Zx,WT,UT],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",e_],drilldownCentering:["type",t_],drilldownOverlayBehavior:["type",Ho],subprocessCompatibility:["type",Ga]};function Ka(c,p){this._eventBus=c,this.offset=5;var h=p.cls("djs-outline",["no-fill"]),m=this;function _(S){var M=de("rect");return E(M,L({x:0,y:0,rx:4,width:100,height:100},h)),M}c.on(["shape.added","shape.changed"],500,function(S){var M=S.element,O=S.gfx,j=Ai(".djs-outline",O);j||oe(O,j=m.getOutline(M)||_()),m.updateShapeOutline(j,M)}),c.on(["connection.added","connection.changed"],function(S){var M=S.element,O=S.gfx,j=Ai(".djs-outline",O);j||oe(O,j=_()),m.updateConnectionOutline(j,M)})}Ka.prototype.updateShapeOutline=function(c,p){var h=!1,m=this._getProviders();m.length&&x(m,function(_){h=h||_.updateOutline(p,c)}),h||E(c,{x:-this.offset,y:-this.offset,width:p.width+2*this.offset,height:p.height+2*this.offset})},Ka.prototype.updateConnectionOutline=function(c,p){var h=Ua(p);E(c,{x:h.x-this.offset,y:h.y-this.offset,width:h.width+2*this.offset,height:h.height+2*this.offset})},Ka.prototype.registerProvider=function(c,p){p||(p=c,c=1e3),this._eventBus.on("outline.getProviders",c,function(h){h.providers.push(p)})},Ka.prototype._getProviders=function(){var c=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(c),c.providers},Ka.prototype.getOutline=function(c){var p;return x(this._getProviders(),function(h){f(h.getOutline)&&(p=p||h.getOutline(c))}),p},Ka.$inject=["eventBus","styles","elementRegistry"];var r_={__init__:["outline"],outline:["type",Ka]};const ZT={width:36,height:50},JT={width:50,height:50};function i_(c,p,h){return de("path",{d:c,strokeWidth:2,transform:`translate(${p.x}, ${p.y})`,...h})}function fp(c,p){this._styles=p,c.registerProvider(this)}function o_(c,p){var h;return p==="bpmn:DataObjectReference"?h=ZT:p==="bpmn:DataStoreReference"&&(h=JT),c.width===h.width&&c.height===h.height}fp.$inject=["outline","styles"],fp.prototype.getOutline=function(c){const p=this._styles.cls("djs-outline",["no-fill"]);var h;if(!Ke(c))return K(c,"bpmn:Gateway")?(L((h=de("rect")).style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),E(h,L({x:2,y:2,rx:4,width:c.width-4,height:c.height-4},p))):se(c,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?E(h=de("rect"),L({x:-5,y:-5,rx:14,width:c.width+10,height:c.height+10},p)):K(c,"bpmn:EndEvent")?E(h=de("circle"),L({cx:c.width/2,cy:c.height/2,r:c.width/2+5+1},p)):K(c,"bpmn:Event")?E(h=de("circle"),L({cx:c.width/2,cy:c.height/2,r:c.width/2+5},p)):K(c,"bpmn:DataObjectReference")&&o_(c,"bpmn:DataObjectReference")?h=i_("M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",{x:-6,y:-6},p):K(c,"bpmn:DataStoreReference")&&o_(c,"bpmn:DataStoreReference")&&(h=i_("M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",{x:-6,y:-6},p)),h},fp.prototype.updateOutline=function(c,p){if(!Ke(c))return se(c,["bpmn:SubProcess","bpmn:Group"])?(E(p,{width:c.width+10,height:c.height+10}),!0):!!se(c,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};var eA={__depends__:[r_],__init__:["outlineProvider"],outlineProvider:["type",fp]};function a_(c){return c.originalEvent||c.srcEvent}function s_(c,p){return(a_(c)||c).button===p}function dp(c){return s_(c,0)}function tA(c){return!0}function hp(c){return dp(c)||function(p){return s_(p,1)}(c)}function l_(c,p,h){var m=this;function _(G,ie,te){var Ie,Se;(function(ft,lt){var He=j[ft]||dp;return!He(lt)})(G,ie)||(te?Se=p.getGraphics(te):(Ie=ie.delegateTarget||ie.target)&&(Se=Ie,te=p.get(Se)),Se&&te&&c.fire(G,{element:te,gfx:Se,originalEvent:ie})===!1&&(ie.stopPropagation(),ie.preventDefault()))}var S={};function M(G){return S[G]}var O={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},j={"element.contextmenu":tA,"element.mousedown":hp,"element.mouseup":hp,"element.click":hp,"element.dblclick":hp},Q="svg, .djs-element";function ne(G,ie,te,Ie){var Se=S[te]=function(ft){_(te,ft)};Ie&&(j[te]=Ie),Se.$delegate=nm.bind(G,Q,ie,Se)}function he(G,ie,te){var Ie=M(te);Ie&&nm.unbind(G,ie,Ie.$delegate)}c.on("canvas.destroy",function(G){var ie;ie=G.svg,x(O,function(te,Ie){he(ie,Ie,te)})}),c.on("canvas.init",function(G){var ie;ie=G.svg,x(O,function(te,Ie){ne(ie,Ie,te)})}),c.on(["shape.added","connection.added"],function(G){var ie=G.element,te=G.gfx;c.fire("interactionEvents.createHit",{element:ie,gfx:te})}),c.on(["shape.changed","connection.changed"],500,function(G){var ie=G.element,te=G.gfx;c.fire("interactionEvents.updateHit",{element:ie,gfx:te})}),c.on("interactionEvents.createHit",500,function(G){var ie=G.element,te=G.gfx;m.createDefaultHit(ie,te)}),c.on("interactionEvents.updateHit",function(G){var ie=G.element,te=G.gfx;m.updateDefaultHit(ie,te)});var ke=We("djs-hit djs-hit-stroke"),Be=We("djs-hit djs-hit-click-stroke"),be={all:We("djs-hit djs-hit-all"),"click-stroke":Be,stroke:ke,"no-move":We("djs-hit djs-hit-no-move")};function We(G,ie){return ie=L({stroke:"white",strokeWidth:15},ie||{}),h.cls(G,["no-fill","no-border"],ie)}function ce(G,ie){var te=be[ie];if(!te)throw new Error("invalid hit type <"+ie+">");return E(G,te),G}function Te(G,ie){oe(G,ie)}this.removeHits=function(G){var ie;x((ie=".djs-hit",(G||document).querySelectorAll(ie)),ge)},this.createDefaultHit=function(G,ie){var te,Ie=G.waypoints,Se=G.isFrame;return Ie?this.createWaypointsHit(ie,Ie):(te=Se?"stroke":"all",this.createBoxHit(ie,te,{width:G.width,height:G.height}))},this.createWaypointsHit=function(G,ie){var te=si(ie);return ce(te,"stroke"),Te(G,te),te},this.createBoxHit=function(G,ie,te){te=L({x:0,y:0},te);var Ie=de("rect");return ce(Ie,ie),E(Ie,te),Te(G,Ie),Ie},this.updateDefaultHit=function(G,ie){var te=Ai(".djs-hit",ie);if(te)return G.waypoints?Hr(te,G.waypoints):E(te,{width:G.width,height:G.height}),te},this.fire=_,this.triggerMouseEvent=function(G,ie,te){var Ie=O[G];if(!Ie)throw new Error("unmapped DOM event name <"+G+">");return _(Ie,ie,te)},this.mouseHandler=M,this.registerEvent=ne,this.unregisterEvent=he}l_.$inject=["eventBus","elementRegistry","styles"];var nA={__init__:["interactionEvents"],interactionEvents:["type",l_]};function js(c,p){this._eventBus=c,this._canvas=p,this._selectedElements=[];var h=this;c.on(["shape.remove","connection.remove"],function(m){var _=m.element;h.deselect(_)}),c.on(["diagram.clear","root.set"],function(m){h.select(null)})}js.$inject=["eventBus","canvas"],js.prototype.deselect=function(c){var p=this._selectedElements,h=p.indexOf(c);if(h!==-1){var m=p.slice();p.splice(h,1),this._eventBus.fire("selection.changed",{oldSelection:m,newSelection:p})}},js.prototype.get=function(){return this._selectedElements},js.prototype.isSelected=function(c){return this._selectedElements.indexOf(c)!==-1},js.prototype.select=function(c,p){var h=this._selectedElements,m=h.slice();s(c)||(c=c?[c]:[]);var _=this._canvas,S=_.getRootElement();c=c.filter(function(M){var O=_.findRoot(M);return S===O}),p?x(c,function(M){h.indexOf(M)===-1&&h.push(M)}):this._selectedElements=h=c.slice(),this._eventBus.fire("selection.changed",{oldSelection:m,newSelection:h})};var c_="hover",u_="selected";function lm(c,p,h){this._canvas=c;var m=this;function _(M,O){c.addMarker(M,O)}function S(M,O){c.removeMarker(M,O)}this._multiSelectionBox=null,p.on("element.hover",function(M){_(M.element,c_)}),p.on("element.out",function(M){S(M.element,c_)}),p.on("selection.changed",function(M){var O=M.oldSelection,j=M.newSelection;x(O,function(Q){j.indexOf(Q)===-1&&S(Q,u_)}),x(j,function(Q){O.indexOf(Q)===-1&&_(Q,u_)}),m._updateSelectionOutline(j)}),p.on("element.changed",function(M){h.isSelected(M.element)&&m._updateSelectionOutline(h.get())})}function p_(c,p,h,m){c.on("create.end",500,function(_){var S=_.context,M=S.canExecute,O=S.elements,j=(S.hints||{}).autoSelect;if(M){if(j===!1)return;s(j)?p.select(j):p.select(O.filter(rA))}}),c.on("connect.end",500,function(_){var S=_.context.connection;S&&p.select(S)}),c.on("shape.move.end",500,function(_){var S=_.previousSelection||[],M=m.get(_.context.shape.id);y(S,function(O){return M.id===O.id})||p.select(M)}),c.on("element.click",function(_){if(dp(_)){var S=_.element;S===h.getRootElement()&&(S=null);var M=p.isSelected(S),O=p.get().length>1,j=function(Q){var ne=a_(Q)||Q;return dp(Q)&&ne.shiftKey}(_);if(M&&O)return j?p.deselect(S):p.select(S);M?p.deselect(S):p.select(S,j)}})}function rA(c){return!c.hidden}lm.$inject=["canvas","eventBus","selection"],lm.prototype._updateSelectionOutline=function(c){var p=this._canvas.getLayer("selectionOutline");(function(S){for(var M;M=S.firstChild;)S.removeChild(M)})(p);var h=c.length>1;if($(this._canvas.getContainer())[h?"add":"remove"]("djs-multi-select"),h){var m=function(S){return{x:S.x-6,y:S.y-6,width:S.width+12,height:S.height+12}}(Ua(c)),_=de("rect");E(_,L({rx:3},m)),$(_).add("djs-selection-outline"),oe(p,_)}},p_.$inject=["eventBus","selection","canvas","elementRegistry"];var iA={__init__:["selectionVisuals","selectionBehavior"],__depends__:[nA,r_],selection:["type",js],selectionVisuals:["type",lm],selectionBehavior:["type",p_]};const oA=/^class[ {]/;function cm(c){return Array.isArray(c)}function um(c,p){return Object.prototype.hasOwnProperty.call(c,p)}function mp(...c){c.length===1&&cm(c[0])&&(c=c[0]);const p=(c=[...c]).pop();return p.$inject=c,p}const aA=/constructor\s*[^(]*\(\s*([^)]*)\)/m,sA=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,lA=/\/\*([^*]*)\*\//m;function cA(c){if(typeof c!="function")throw new Error(`Cannot annotate "${c}". Expected a function!`);const p=c.toString().match(function(m){return oA.test(m.toString())}(c)?aA:sA);if(!p)return[];const h=p[1]||p[2];return h&&h.split(",").map(m=>{const _=m.match(lA);return(_&&_[1]||m).trim()})||[]}function f_(c,p){const h=p||{get:function(G,ie){if(m.push(G),ie===!1)return null;throw O(`No provider for "${G}"!`)}},m=[],_=this._providers=Object.create(h._providers||null),S=this._instances=Object.create(null),M=S.injector=this,O=function(G){const ie=m.join(" -> ");return m.length=0,new Error(ie?`${G} (Resolving: ${ie})`:G)};function j(G,ie){if(!_[G]&&G.includes(".")){const te=G.split(".");let Ie=j(te.shift());for(;te.length;)Ie=Ie[te.shift()];return Ie}if(um(S,G))return S[G];if(um(_,G)){if(m.indexOf(G)!==-1)throw m.push(G),O("Cannot resolve circular dependency!");return m.push(G),S[G]=_[G][0](_[G][1]),m.pop(),S[G]}return h.get(G,ie)}function Q(G,ie){if(ie===void 0&&(ie={}),typeof G!="function"){if(!cm(G))throw O(`Cannot invoke "${G}". Expected a function!`);G=mp(G.slice())}return{fn:G,dependencies:(G.$inject||cA(G)).map(te=>um(ie,te)?ie[te]:j(te))}}function ne(G){const{fn:ie,dependencies:te}=Q(G);return new(Function.prototype.bind.call(ie,null,...te))}function he(G,ie,te){const{fn:Ie,dependencies:Se}=Q(G,te);return Ie.apply(ie,Se)}function ke(G){return mp(ie=>G.get(ie))}function Be(G,ie){if(ie&&ie.length){const te=Object.create(null),Ie=Object.create(null),Se=[],ft=[],lt=[];let He,Yt,xe,ve;for(let et in _)He=_[et],ie.indexOf(et)!==-1&&(He[2]==="private"?(Yt=Se.indexOf(He[3]),Yt===-1?(xe=He[3].createChild([],ie),ve=ke(xe),Se.push(He[3]),ft.push(xe),lt.push(ve),te[et]=[ve,et,"private",xe]):te[et]=[lt[Yt],et,"private",ft[Yt]]):te[et]=[He[2],He[1]],Ie[et]=!0),He[2]!=="factory"&&He[2]!=="type"||!He[1].$scope||ie.forEach(dt=>{He[1].$scope.indexOf(dt)!==-1&&(te[et]=[He[2],He[1]],Ie[dt]=!0)});ie.forEach(et=>{if(!Ie[et])throw new Error('No provider for "'+et+'". Cannot use provider from the parent!')}),G.unshift(te)}return new f_(G,M)}const be={factory:he,type:ne,value:function(G){return G}};function We(G,ie){const te=G.__init__||[];return function(){te.forEach(Ie=>{typeof Ie=="string"?ie.get(Ie):ie.invoke(Ie)})}}function ce(G){const ie=G.__exports__;if(ie){const te=G.__modules__,Ie=Object.keys(G).reduce((He,Yt)=>(Yt!=="__exports__"&&Yt!=="__modules__"&&Yt!=="__init__"&&Yt!=="__depends__"&&(He[Yt]=G[Yt]),He),Object.create(null)),Se=Be((te||[]).concat(Ie)),ft=mp(function(He){return Se.get(He)});ie.forEach(function(He){_[He]=[ft,He,"private",Se]});const lt=(G.__init__||[]).slice();return lt.unshift(function(){Se.init()}),We(G=Object.assign({},G,{__init__:lt}),Se)}return Object.keys(G).forEach(function(te){if(te==="__init__"||te==="__depends__")return;const Ie=G[te];if(Ie[2]==="private")return void(_[te]=Ie);const Se=Ie[0],ft=Ie[1];_[te]=[be[Se],uA(Se,ft),Se]}),We(G,M)}function Te(G,ie){return G.indexOf(ie)!==-1||(G=(ie.__depends__||[]).reduce(Te,G)).indexOf(ie)!==-1?G:G.concat(ie)}this.get=j,this.invoke=he,this.instantiate=ne,this.createChild=Be,this.init=function(G){const ie=G.reduce(Te,[]).map(ce);let te=!1;return function(){te||(te=!0,ie.forEach(Ie=>Ie()))}}(c)}function uA(c,p){return c!=="value"&&cm(p)&&(p=mp(p.slice())),p}function Vo(c,p){Y.call(this,c,1),this.CONNECTION_STYLE=p.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=p.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=p.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}n(Vo,Y),Vo.prototype.canRender=function(){return!0},Vo.prototype.drawShape=function(c,p,h){var m=de("rect");return E(m,{x:0,y:0,width:p.width||0,height:p.height||0}),Yx(p)?E(m,L({},this.FRAME_STYLE,h||{})):E(m,L({},this.SHAPE_STYLE,h||{})),oe(c,m),m},Vo.prototype.drawConnection=function(c,p,h){var m=si(p.waypoints,L({},this.CONNECTION_STYLE,h||{}));return oe(c,m),m},Vo.prototype.getShapePath=function(c){var p=c.x,h=c.y,m=c.width;return Le([["M",p,h],["l",m,0],["l",0,c.height],["l",-m,0],["z"]])},Vo.prototype.getConnectionPath=function(c){var p,h,m=c.waypoints,_=[];for(p=0;h=m[p];p++)h=h.original||h,_.push([p===0?"M":"L",h.x,h.y]);return Le(_)},Vo.$inject=["eventBus","styles"];var pA={__init__:["defaultRenderer"],defaultRenderer:["type",Vo],styles:["type",function(){var c={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},p=this;this.cls=function(h,m,_){return L(this.style(m,_),{class:h})},this.style=function(h,m){s(h)||m||(m=h,h=[]);var _=C(h,function(S,M){return L(S,c[M]||{})},{});return m?L(_,m):_},this.computeStyle=function(h,m,_){return s(m)||(_=m,m=[]),p.style(m||[],L({},_,h||{}))}}]};function gp(c,p){return Math.round(c*p)/p}function d_(c){return u(c)?c+"px":c}function h_(c,p,h){const m=de("g");$(m).add(p);const _=h!==void 0?h:c.childNodes.length-1;return c.insertBefore(m,c.childNodes[_]||null),m}const fA={shape:["x","y","width","height"],connection:["waypoints"]};function st(c,p,h,m){this._eventBus=p,this._elementRegistry=m,this._graphicsFactory=h,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(c||{})}function m_(c,p){const h="matrix("+p.a+","+p.b+","+p.c+","+p.d+","+p.e+","+p.f+")";c.setAttribute("transform",h)}st.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],st.prototype._init=function(c){const p=this._eventBus,h=this._container=function(S){const M=(S=L({},{width:"100%",height:"100%"},S)).container||document.body,O=document.createElement("div");return O.setAttribute("class","djs-container djs-parent"),Rr(O,{position:"relative",overflow:"hidden",width:d_(S.width),height:d_(S.height)}),M.appendChild(O),O}(c),m=this._svg=de("svg");E(m,{width:"100%",height:"100%"}),oe(h,m);const _=this._viewport=h_(m,"viewport");c.deferUpdate&&(this._viewboxChanged=function(S,M){let O,j,Q,ne;function he(We){let ce=Date.now(),Te=We?0:ne+M-ce;if(Te>0)return ke(Te);S.apply(Q,j),Be()}function ke(We){O=setTimeout(he,We)}function Be(){O&&clearTimeout(O),O=ne=j=Q=void 0}function be(...We){ne=Date.now(),j=We,Q=this,O||ke(M)}return be.flush=function(){O&&he(!0),Be()},be.cancel=Be,be}(H(this._viewboxChanged,this),300)),p.on("diagram.init",()=>{p.fire("canvas.init",{svg:m,viewport:_})}),p.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),p.on("diagram.destroy",500,this._destroy,this),p.on("diagram.clear",500,this._clear,this)},st.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const c=this._container.parentNode;c&&c.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},st.prototype._clear=function(){this._elementRegistry.getAll().forEach(c=>{const p=Kx(c);p==="root"?this.removeRootElement(c):this._removeElement(c,p)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},st.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},st.prototype.getLayer=function(c,p){if(!c)throw new Error("must specify a name");let h=this._layers[c];if(h||(h=this._layers[c]=this._createLayer(c,p)),p!==void 0&&h.index!==p)throw new Error("layer <"+c+"> already created at index <"+p+">");return h.group},st.prototype._getChildIndex=function(c){return C(this._layers,function(p,h){return h.visible&&c>=h.index&&p++,p},0)},st.prototype._createLayer=function(c,p){p===void 0&&(p=1);const h=this._getChildIndex(p);return{group:h_(this._viewport,"layer-"+c,h),index:p,visible:!0}},st.prototype.showLayer=function(c){if(!c)throw new Error("must specify a name");const p=this._layers[c];if(!p)throw new Error("layer <"+c+"> does not exist");const h=this._viewport,m=p.group,_=p.index;if(p.visible)return m;const S=this._getChildIndex(_);return h.insertBefore(m,h.childNodes[S]||null),p.visible=!0,m},st.prototype.hideLayer=function(c){if(!c)throw new Error("must specify a name");const p=this._layers[c];if(!p)throw new Error("layer <"+c+"> does not exist");const h=p.group;return p.visible&&(ge(h),p.visible=!1),h},st.prototype._removeLayer=function(c){const p=this._layers[c];p&&(delete this._layers[c],ge(p.group))},st.prototype.getActiveLayer=function(){const c=this._findPlaneForRoot(this.getRootElement());return c?c.layer:null},st.prototype.findRoot=function(c){return typeof c=="string"&&(c=this._elementRegistry.get(c)),c?(this._findPlaneForRoot(function(h){for(;h.parent;)h=h.parent;return h}(c))||{}).rootElement:void 0},st.prototype.getRootElements=function(){return this._planes.map(function(c){return c.rootElement})},st.prototype._findPlaneForRoot=function(c){return y(this._planes,function(p){return p.rootElement===c})},st.prototype.getContainer=function(){return this._container},st.prototype._updateMarker=function(c,p,h){let m;c.id||(c=this._elementRegistry.get(c)),c.markers=c.markers||new Set,m=this._elementRegistry._elements[c.id],m&&(x([m.gfx,m.secondaryGfx],function(_){_&&(h?(c.markers.add(p),$(_).add(p)):(c.markers.delete(p),$(_).remove(p)))}),this._eventBus.fire("element.marker.update",{element:c,gfx:m.gfx,marker:p,add:!!h}))},st.prototype.addMarker=function(c,p){this._updateMarker(c,p,!0)},st.prototype.removeMarker=function(c,p){this._updateMarker(c,p,!1)},st.prototype.hasMarker=function(c,p){return c.id||(c=this._elementRegistry.get(c)),!!c.markers&&c.markers.has(p)},st.prototype.toggleMarker=function(c,p){this.hasMarker(c,p)?this.removeMarker(c,p):this.addMarker(c,p)},st.prototype.getRootElement=function(){const c=this._rootElement;return c||this._planes.length?c:this.setRootElement(this.addRootElement(null))},st.prototype.addRootElement=function(c){const p=this._rootsIdx++;c||(c={id:"__implicitroot_"+p,children:[],isImplicit:!0});const h=c.layer="root-"+p;this._ensureValid("root",c);const m=this.getLayer(h,0);return this.hideLayer(h),this._addRoot(c,m),this._planes.push({rootElement:c,layer:m}),c},st.prototype.removeRootElement=function(c){if(typeof c=="string"&&(c=this._elementRegistry.get(c)),this._findPlaneForRoot(c))return this._removeRoot(c),this._removeLayer(c.layer),this._planes=this._planes.filter(function(p){return p.rootElement!==c}),this._rootElement===c&&(this._rootElement=null),c},st.prototype.setRootElement=function(c){if(c===this._rootElement)return c;let p;if(!c)throw new Error("rootElement required");return p=this._findPlaneForRoot(c),p||(c=this.addRootElement(c)),this._setRoot(c),c},st.prototype._removeRoot=function(c){const p=this._elementRegistry,h=this._eventBus;h.fire("root.remove",{element:c}),h.fire("root.removed",{element:c}),p.remove(c)},st.prototype._addRoot=function(c,p){const h=this._elementRegistry,m=this._eventBus;m.fire("root.add",{element:c}),h.add(c,p),m.fire("root.added",{element:c,gfx:p})},st.prototype._setRoot=function(c,p){const h=this._rootElement;h&&(this._elementRegistry.updateGraphics(h,null,!0),this.hideLayer(h.layer)),c&&(p||(p=this._findPlaneForRoot(c).layer),this._elementRegistry.updateGraphics(c,this._svg,!0),this.showLayer(c.layer)),this._rootElement=c,this._eventBus.fire("root.set",{element:c})},st.prototype._ensureValid=function(c,p){if(!p.id)throw new Error("element must have an id");if(this._elementRegistry.get(p.id))throw new Error("element <"+p.id+"> already exists");const h=fA[c];if(!P(h,function(_){return p[_]!==void 0}))throw new Error("must supply { "+h.join(", ")+" } with "+c)},st.prototype._setParent=function(c,p,h){(function(m,_,S){if(m&&_){typeof S!="number"&&(S=-1);var M=m.indexOf(_);if(M!==-1){if(M===S||S===-1)return;m.splice(M,1)}S!==-1?m.splice(S,0,_):m.push(_)}})(p.children,c,h),c.parent=p},st.prototype._addElement=function(c,p,h,m){h=h||this.getRootElement();const _=this._eventBus,S=this._graphicsFactory;this._ensureValid(c,p),_.fire(c+".add",{element:p,parent:h}),this._setParent(p,h,m);const M=S.create(c,p,m);return this._elementRegistry.add(p,M),S.update(c,p,M),_.fire(c+".added",{element:p,gfx:M}),p},st.prototype.addShape=function(c,p,h){return this._addElement("shape",c,p,h)},st.prototype.addConnection=function(c,p,h){return this._addElement("connection",c,p,h)},st.prototype._removeElement=function(c,p){const h=this._elementRegistry,m=this._graphicsFactory,_=this._eventBus;if(c=h.get(c.id||c))return _.fire(p+".remove",{element:c}),m.remove(c),function(S,M){if(!S||!M)return-1;var O=S.indexOf(M);O!==-1&&S.splice(O,1)}(c.parent&&c.parent.children,c),c.parent=null,_.fire(p+".removed",{element:c}),h.remove(c),c},st.prototype.removeShape=function(c){return this._removeElement(c,"shape")},st.prototype.removeConnection=function(c){return this._removeElement(c,"connection")},st.prototype.getGraphics=function(c,p){return this._elementRegistry.getGraphics(c,p)},st.prototype._changeViewbox=function(c){this._eventBus.fire("canvas.viewbox.changing"),c.apply(this),this._cachedViewbox=null,this._viewboxChanged()},st.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},st.prototype.viewbox=function(c){if(c===void 0&&this._cachedViewbox)return this._cachedViewbox;const p=this._viewport,h=this.getSize();let m,_,S,M,O,j,Q;return c?(this._changeViewbox(function(){O=Math.min(h.width/c.width,h.height/c.height);const ne=this._svg.createSVGMatrix().scale(O).translate(-c.x,-c.y);pt(p,ne)}),c):(S=this._rootElement?this.getActiveLayer():null,m=S&&S.getBBox()||{},M=pt(p),_=M?M.matrix:function(ne,he,ke,Be,be,We){var ce=Ot().createSVGMatrix();switch(arguments.length){case 0:return ce;case 1:return Dt(ce,ne);case 6:return Dt(ce,{a:ne,b:he,c:ke,d:Be,e:be,f:We})}}(),O=gp(_.a,1e3),j=gp(-_.e||0,1e3),Q=gp(-_.f||0,1e3),c=this._cachedViewbox={x:j?j/O:0,y:Q?Q/O:0,width:h.width/O,height:h.height/O,scale:O,inner:{width:m.width||0,height:m.height||0,x:m.x||0,y:m.y||0},outer:h})},st.prototype.scroll=function(c){const p=this._viewport;let h=p.getCTM();return c&&this._changeViewbox(function(){c=L({dx:0,dy:0},c||{}),h=this._svg.createSVGMatrix().translate(c.dx,c.dy).multiply(h),m_(p,h)}),{x:h.e,y:h.f}},st.prototype.scrollToElement=function(c,p){let h=100;typeof c=="string"&&(c=this._elementRegistry.get(c));const m=this.findRoot(c);if(m!==this.getRootElement()&&this.setRootElement(m),m===c)return;p||(p={}),typeof p=="number"&&(h=p),p={top:p.top||h,right:p.right||h,bottom:p.bottom||h,left:p.left||h};const _=Ua(c),S=im(_),M=this.viewbox(),O=this.zoom();let j,Q;M.y+=p.top/O,M.x+=p.left/O,M.width-=(p.right+p.left)/O,M.height-=(p.bottom+p.top)/O;const ne=im(M);if(_.width<M.width&&_.height<M.height){const he=Math.max(0,S.right-ne.right),ke=Math.min(0,S.left-ne.left),Be=Math.max(0,S.bottom-ne.bottom),be=Math.min(0,S.top-ne.top);j=he||ke,Q=Be||be}else j=_.x-M.x,Q=_.y-M.y;this.scroll({dx:-j*O,dy:-Q*O})},st.prototype.zoom=function(c,p){if(!c)return this.viewbox(c).scale;if(c==="fit-viewport")return this._fitViewport(p);let h,m;return this._changeViewbox(function(){typeof p!="object"&&(h=this.viewbox().outer,p={x:h.width/2,y:h.height/2}),m=this._setZoom(c,p)}),gp(m.a,1e3)},st.prototype._fitViewport=function(c){const p=this.viewbox(),h=p.outer,m=p.inner;let _,S;return m.x>=0&&m.y>=0&&m.x+m.width<=h.width&&m.y+m.height<=h.height&&!c?S={x:0,y:0,width:Math.max(m.width+m.x,h.width),height:Math.max(m.height+m.y,h.height)}:(_=Math.min(1,h.width/m.width,h.height/m.height),S={x:m.x+(c?m.width/2-h.width/_/2:0),y:m.y+(c?m.height/2-h.height/_/2:0),width:h.width/_,height:h.height/_}),this.viewbox(S),this.viewbox(!1).scale},st.prototype._setZoom=function(c,p){const h=this._svg,m=this._viewport,_=h.createSVGMatrix(),S=h.createSVGPoint();let M,O,j,Q,ne;j=m.getCTM();const he=j.a;return p?(M=L(S,p),O=M.matrixTransform(j.inverse()),Q=_.translate(O.x,O.y).scale(1/he*c).translate(-O.x,-O.y),ne=j.multiply(Q)):ne=_.scale(c),m_(this._viewport,ne),ne},st.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},st.prototype.getAbsoluteBBox=function(c){const p=this.viewbox();let h;return c.waypoints?h=this.getGraphics(c).getBBox():h=c,{x:h.x*p.scale-p.x*p.scale,y:h.y*p.scale-p.y*p.scale,width:h.width*p.scale,height:h.height*p.scale}},st.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var $s="data-element-id";function Wr(c){this._elements={},this._eventBus=c}function g_(c,p,h){var m=function(_,S,M,O){var j=M.inverse;return Object.defineProperty(_,"remove",{value:function(Q){var ne=this.indexOf(Q);return ne!==-1&&(this.splice(ne,1),S.unset(Q,j,O)),Q}}),Object.defineProperty(_,"contains",{value:function(Q){return this.indexOf(Q)!==-1}}),Object.defineProperty(_,"add",{value:function(Q,ne){var he=this.indexOf(Q);if(ne===void 0){if(he!==-1)return;ne=this.length}he!==-1&&this.splice(he,1),this.splice(ne,0,Q),he===-1&&S.set(Q,j,O)}}),Object.defineProperty(_,"__refs_collection",{value:!0}),_}(h[p.name]||[],c,p,h);Object.defineProperty(h,p.name,{enumerable:p.enumerable,value:m}),m.length&&m.forEach(function(_){c.set(_,p.inverse,h)})}function li(c,p){if(!(this instanceof li))return new li(c,p);c.inverse=p,p.inverse=c,this.props={},this.props[c.name]=c,this.props[p.name]=p}Wr.$inject=["eventBus"],Wr.prototype.add=function(c,p,h){var m=c.id;this._validateId(m),E(p,$s,m),h&&E(h,$s,m),this._elements[m]={element:c,gfx:p,secondaryGfx:h}},Wr.prototype.remove=function(c){var p=this._elements,h=c.id||c,m=h&&p[h];m&&(E(m.gfx,$s,""),m.secondaryGfx&&E(m.secondaryGfx,$s,""),delete p[h])},Wr.prototype.updateId=function(c,p){this._validateId(p),typeof c=="string"&&(c=this.get(c)),this._eventBus.fire("element.updateId",{element:c,newId:p});var h=this.getGraphics(c),m=this.getGraphics(c,!0);this.remove(c),c.id=p,this.add(c,h,m)},Wr.prototype.updateGraphics=function(c,p,h){var m=c.id||c,_=this._elements[m];return h?_.secondaryGfx=p:_.gfx=p,p&&E(p,$s,m),p},Wr.prototype.get=function(c){var p;p=typeof c=="string"?c:c&&E(c,$s);var h=this._elements[p];return h&&h.element},Wr.prototype.filter=function(c){var p=[];return this.forEach(function(h,m){c(h,m)&&p.push(h)}),p},Wr.prototype.find=function(c){for(var p=this._elements,h=Object.keys(p),m=0;m<h.length;m++){var _=p[h[m]],S=_.element;if(c(S,_.gfx))return S}},Wr.prototype.getAll=function(){return this.filter(function(c){return c})},Wr.prototype.forEach=function(c){var p=this._elements;Object.keys(p).forEach(function(h){var m=p[h],_=m.element,S=m.gfx;return c(_,S)})},Wr.prototype.getGraphics=function(c,p){var h=c.id||c,m=this._elements[h];return m&&(p?m.secondaryGfx:m.gfx)},Wr.prototype._validateId=function(c){if(!c)throw new Error("element must have an id");if(this._elements[c])throw new Error("element with id "+c+" already added")},li.prototype.bind=function(c,p){if(typeof p=="string"){if(!this.props[p])throw new Error("no property <"+p+"> in ref");p=this.props[p]}p.collection?g_(this,p,c):function(h,m,_){var S=m.inverse,M=_[m.name];Object.defineProperty(_,m.name,{configurable:m.configurable,enumerable:m.enumerable,get:function(){return M},set:function(O){if(O!==M){var j=M;M=null,j&&h.unset(j,S,_),M=O,h.set(M,S,_)}}})}(this,p,c)},li.prototype.ensureRefsCollection=function(c,p){var h=c[p.name];return function(m){return m.__refs_collection===!0}(h)||g_(this,p,c),h},li.prototype.ensureBound=function(c,p){(function(h,m){return Object.prototype.hasOwnProperty.call(h,m.name||m)})(c,p)||this.bind(c,p)},li.prototype.unset=function(c,p,h){c&&(this.ensureBound(c,p),p.collection?this.ensureRefsCollection(c,p).remove(h):c[p.name]=void 0)},li.prototype.set=function(c,p,h){c&&(this.ensureBound(c,p),p.collection?this.ensureRefsCollection(c,p).add(h):c[p.name]=h)};var pm=new li({name:"children",enumerable:!0,collection:!0},{name:"parent"}),y_=new li({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),v_=new li({name:"attachers",collection:!0},{name:"host"}),x_=new li({name:"outgoing",collection:!0},{name:"source"}),__=new li({name:"incoming",collection:!0},{name:"target"});function tc(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(c){var p=this.label,h=this.labels;!c&&p?h.remove(p):h.add(c,0)}}),pm.bind(this,"parent"),y_.bind(this,"labels"),x_.bind(this,"outgoing"),__.bind(this,"incoming")}function nc(){tc.call(this),pm.bind(this,"children"),v_.bind(this,"host"),v_.bind(this,"attachers")}function w_(){tc.call(this),pm.bind(this,"children")}function E_(){nc.call(this),y_.bind(this,"labelTarget")}function b_(){tc.call(this),x_.bind(this,"source"),__.bind(this,"target")}n(nc,tc),n(w_,nc),n(E_,nc),n(b_,tc);var dA={connection:b_,shape:nc,label:E_,root:w_};function Fs(){this._uid=12}Fs.prototype.createRoot=function(c){return this.create("root",c)},Fs.prototype.createLabel=function(c){return this.create("label",c)},Fs.prototype.createShape=function(c){return this.create("shape",c)},Fs.prototype.createConnection=function(c){return this.create("connection",c)},Fs.prototype.create=function(c,p){return(p=L({},p||{})).id||(p.id=c+"_"+this._uid++),function(h,m){var _=dA[h];if(!_)throw new Error("unknown type: <"+h+">");return L(new _,m)}(c,p)};var yp="__fn",hA=Array.prototype.slice;function kr(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function rc(){}function Ur(c,p){this._eventBus=c,this._elementRegistry=p}function S_(c,p,h){var m=h||p.firstChild;c!==m&&p.insertBefore(c,m)}kr.prototype.on=function(c,p,h,m){if(c=s(c)?c:[c],f(p)&&(m=h,h=p,p=1e3),!u(p))throw new Error("priority must be a number");var _=h;m&&((_=H(h,m))[yp]=h[yp]||h);var S=this;c.forEach(function(M){S._addListener(M,{priority:p,callback:_,next:null})})},kr.prototype.once=function(c,p,h,m){var _=this;if(f(p)&&(m=h,h=p,p=1e3),!u(p))throw new Error("priority must be a number");function S(){S.__isTomb=!0;var M=h.apply(m,arguments);return _.off(c,S),M}S[yp]=h,this.on(c,p,S)},kr.prototype.off=function(c,p){c=s(c)?c:[c];var h=this;c.forEach(function(m){h._removeListener(m,p)})},kr.prototype.createEvent=function(c){var p=new rc;return p.init(c),p},kr.prototype.fire=function(c,p){var h,m,_,S;if(S=hA.call(arguments),typeof c=="object"&&(c=(p=c).type),!c)throw new Error("no event type specified");if(m=this._listeners[c]){h=p instanceof rc?p:this.createEvent(p),S[0]=h;var M=h.type;c!==M&&(h.type=c);try{_=this._invokeListeners(h,S,m)}finally{c!==M&&(h.type=M)}return _===void 0&&h.defaultPrevented&&(_=!1),_}},kr.prototype.handleError=function(c){return this.fire("error",{error:c})===!1},kr.prototype._destroy=function(){this._listeners={}},kr.prototype._invokeListeners=function(c,p,h){for(var m;h&&!c.cancelBubble;)m=this._invokeListener(c,p,h),h=h.next;return m},kr.prototype._invokeListener=function(c,p,h){var m;if(h.callback.__isTomb)return m;try{m=function(_,S){return _.apply(null,S)}(h.callback,p),m!==void 0&&(c.returnValue=m,c.stopPropagation()),m===!1&&c.preventDefault()}catch(_){if(!this.handleError(_))throw console.error("unhandled error in event listener",_),_}return m},kr.prototype._addListener=function(c,p){var h,m=this._getListeners(c);if(m){for(;m;){if(m.priority<p.priority)return p.next=m,void(h?h.next=p:this._setListeners(c,p));h=m,m=m.next}h.next=p}else this._setListeners(c,p)},kr.prototype._getListeners=function(c){return this._listeners[c]},kr.prototype._setListeners=function(c,p){this._listeners[c]=p},kr.prototype._removeListener=function(c,p){var h,m,_,S=this._getListeners(c);if(p)for(;S;)h=S.next,(_=S.callback)!==p&&_[yp]!==p||(m?m.next=h:this._setListeners(c,h)),m=S,S=h;else this._setListeners(c,null)},rc.prototype.stopPropagation=function(){this.cancelBubble=!0},rc.prototype.preventDefault=function(){this.defaultPrevented=!0},rc.prototype.init=function(c){L(this,c||{})},Ur.$inject=["eventBus","elementRegistry"],Ur.prototype._getChildrenContainer=function(c){var p,h=this._elementRegistry.getGraphics(c);return c.parent?(p=function(m){return m.parentNode.childNodes[1]}(h),p||($(p=de("g")).add("djs-children"),oe(h.parentNode,p))):p=h,p},Ur.prototype._clear=function(c){var p=function(h){return h.childNodes[0]}(c);return jx(p),p},Ur.prototype._createContainer=function(c,p,h,m){var _=de("g");$(_).add("djs-group"),h!==void 0?S_(_,p,p.childNodes[h]):oe(p,_);var S=de("g");$(S).add("djs-element"),$(S).add("djs-"+c),m&&$(S).add("djs-frame"),oe(_,S);var M=de("g");return $(M).add("djs-visual"),oe(S,M),S},Ur.prototype.create=function(c,p,h){var m=this._getChildrenContainer(p.parent);return this._createContainer(c,m,h,Yx(p))},Ur.prototype.updateContainments=function(c){var p,h=this,m=this._elementRegistry;p=C(c,function(_,S){return S.parent&&(_[S.parent.id]=S.parent),_},{}),x(p,function(_){var S=_.children;if(S){var M=h._getChildrenContainer(_);x(S.slice().reverse(),function(O){S_(m.getGraphics(O).parentNode,M)})}})},Ur.prototype.drawShape=function(c,p,h={}){return this._eventBus.fire("render.shape",{gfx:c,element:p,attrs:h})},Ur.prototype.getShapePath=function(c){return this._eventBus.fire("render.getShapePath",c)},Ur.prototype.drawConnection=function(c,p,h={}){return this._eventBus.fire("render.connection",{gfx:c,element:p,attrs:h})},Ur.prototype.getConnectionPath=function(c){return this._eventBus.fire("render.getConnectionPath",c)},Ur.prototype.update=function(c,p,h){if(p.parent){var m=this._clear(h);if(c==="shape")this.drawShape(m,p),Hx(h,p.x,p.y);else{if(c!=="connection")throw new Error("unknown type: "+c);this.drawConnection(m,p)}p.hidden?E(h,"display","none"):E(h,"display","block")}},Ur.prototype.remove=function(c){ge(this._elementRegistry.getGraphics(c).parentNode)};var mA={__depends__:[pA],__init__:["canvas"],canvas:["type",st],elementRegistry:["type",Wr],elementFactory:["type",Fs],eventBus:["type",kr],graphicsFactory:["type",Ur]};function gA(c){return function(p){var h=new f_(p);return h.init(),h}([{config:["value",c=c||{}]},mA].concat(c.modules||[]))}function Wo(c,p){this._injector=p||gA(c),this.get("eventBus").fire("diagram.init")}function fm(){}function C_(c,p){this.model=c,this.properties=p}Wo.prototype.get=function(c,p){return this._injector.get(c,p)},Wo.prototype.invoke=function(c,p,h){return this._injector.invoke(c,p,h)},Wo.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Wo.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},fm.prototype.get=function(c){return this.$model.properties.get(this,c)},fm.prototype.set=function(c,p){this.$model.properties.set(this,c,p)},C_.prototype.createType=function(c){var p=this.model,h=this.properties,m=Object.create(fm.prototype);x(c.properties,function(M){M.isMany||M.default===void 0||(m[M.name]=M.default)}),h.defineModel(m,p),h.defineDescriptor(m,c);var _=c.ns.name;function S(M){h.define(this,"$type",{value:_,enumerable:!0}),h.define(this,"$attrs",{value:{}}),h.define(this,"$parent",{writable:!0}),x(M,H(function(O,j){this.set(j,O)},this))}return S.prototype=m,S.hasType=m.$instanceOf=this.model.hasType,h.defineModel(S,p),h.defineDescriptor(S,c),S};var yA={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},R_={String:function(c){return c},Boolean:function(c){return c==="true"},Integer:function(c){return parseInt(c,10)},Real:function(c){return parseFloat(c)}};function dm(c,p){var h=R_[c];return h?h(p):p}function hm(c){return!!yA[c]}function k_(c){return!!R_[c]}function or(c,p){var h,m,_=c.split(/:/);if(_.length===1)h=c,m=p;else{if(_.length!==2)throw new Error("expected <prefix:localName> or <localName>, got "+c);h=_[1],m=_[0]}return{name:c=(m?m+":":"")+h,prefix:m,localName:h}}function Gr(c){this.ns=c,this.name=c.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Uo(c,p){this.packageMap={},this.typeMap={},this.packages=[],this.properties=p,x(c,H(this.registerPackage,this))}function P_(c,p,h){var m=p[h];if(m in c)throw new Error("package with "+h+" <"+m+"> already defined")}function Ya(c){this.model=c}function T_(c,p,h){Object.defineProperty(c,p.name,{enumerable:!p.isReference,writable:!0,value:h,configurable:!0})}function mm(c){return c.replace(/^:/,"")}function ci(c,p={}){this.properties=new Ya(this),this.factory=new C_(this,this.properties),this.registry=new Uo(c,this.properties),this.typeCache={},this.config=p}Gr.prototype.build=function(){return function(c,p){let h={},m=Object(c);return x(p,function(_){_ in m&&(h[_]=c[_])}),h}(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Gr.prototype.addProperty=function(c,p,h){typeof p=="boolean"&&(h=p,p=void 0),this.addNamedProperty(c,h!==!1);var m=this.properties;p!==void 0?m.splice(p,0,c):m.push(c)},Gr.prototype.replaceProperty=function(c,p,h){var m=c.ns,_=this.properties,S=this.propertiesByName,M=c.name!==p.name;if(c.isId){if(!p.isId)throw new Error("property <"+p.ns.name+"> must be id property to refine <"+c.ns.name+">");this.setIdProperty(p,!1)}if(c.isBody){if(!p.isBody)throw new Error("property <"+p.ns.name+"> must be body property to refine <"+c.ns.name+">");this.setBodyProperty(p,!1)}var O=_.indexOf(c);if(O===-1)throw new Error("property <"+m.name+"> not found in property list");_.splice(O,1),this.addProperty(p,h?void 0:O,M),S[m.name]=S[m.localName]=p},Gr.prototype.redefineProperty=function(c,p,h){var m=c.ns.prefix,_=p.split("#"),S=or(_[0],m),M=or(_[1],S.prefix).name,O=this.propertiesByName[M];if(!O)throw new Error("refined property <"+M+"> not found");this.replaceProperty(O,c,h),delete c.redefines},Gr.prototype.addNamedProperty=function(c,p){var h=c.ns,m=this.propertiesByName;p&&(this.assertNotDefined(c,h.name),this.assertNotDefined(c,h.localName)),m[h.name]=m[h.localName]=c},Gr.prototype.removeNamedProperty=function(c){var p=c.ns,h=this.propertiesByName;delete h[p.name],delete h[p.localName]},Gr.prototype.setBodyProperty=function(c,p){if(p&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+c.ns.name+">)");this.bodyProperty=c},Gr.prototype.setIdProperty=function(c,p){if(p&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+c.ns.name+">)");this.idProperty=c},Gr.prototype.assertNotTrait=function(c){if((c.extends||[]).length)throw new Error(`cannot create <${c.name}> extending <${c.extends}>`)},Gr.prototype.assertNotDefined=function(c,p){var h=c.name,m=this.propertiesByName[h];if(m)throw new Error("property <"+h+"> already defined; override of <"+m.definedBy.ns.name+"#"+m.ns.name+"> by <"+c.definedBy.ns.name+"#"+c.ns.name+"> not allowed without redefines")},Gr.prototype.hasProperty=function(c){return this.propertiesByName[c]},Gr.prototype.addTrait=function(c,p){p&&this.assertNotTrait(c);var h=this.allTypesByName,m=this.allTypes,_=c.name;_ in h||(x(c.properties,H(function(S){S=L({},S,{name:S.ns.localName,inherited:p}),Object.defineProperty(S,"definedBy",{value:c});var M=S.replaces,O=S.redefines;M||O?this.redefineProperty(S,M||O,M):(S.isBody&&this.setBodyProperty(S),S.isId&&this.setIdProperty(S),this.addProperty(S))},this)),m.push(c),h[_]=c)},Uo.prototype.getPackage=function(c){return this.packageMap[c]},Uo.prototype.getPackages=function(){return this.packages},Uo.prototype.registerPackage=function(c){c=L({},c);var p=this.packageMap;P_(p,c,"prefix"),P_(p,c,"uri"),x(c.types,H(function(h){this.registerType(h,c)},this)),p[c.uri]=p[c.prefix]=c,this.packages.push(c)},Uo.prototype.registerType=function(c,p){var h=or((c=L({},c,{superClass:(c.superClass||[]).slice(),extends:(c.extends||[]).slice(),properties:(c.properties||[]).slice(),meta:L(c.meta||{})})).name,p.prefix),m=h.name,_={};x(c.properties,H(function(S){var M=or(S.name,h.prefix),O=M.name;hm(S.type)||(S.type=or(S.type,M.prefix).name),L(S,{ns:M,name:O}),_[O]=S},this)),L(c,{ns:h,name:m,propertiesByName:_}),x(c.extends,H(function(S){var M=or(S,h.prefix),O=this.typeMap[M.name];O.traits=O.traits||[],O.traits.push(m)},this)),this.definePackage(c,p),this.typeMap[m]=c},Uo.prototype.mapTypes=function(c,p,h){var m=hm(c.name)?{name:c.name}:this.typeMap[c.name],_=this;function S(O,j){var Q=or(O,hm(O)?"":c.prefix);_.mapTypes(Q,p,j)}function M(O){return S(O,!0)}if(!m)throw new Error("unknown type <"+c.name+">");x(m.superClass,h?M:function(O){return S(O,!1)}),p(m,!h),x(m.traits,M)},Uo.prototype.getEffectiveDescriptor=function(c){var p=or(c),h=new Gr(p);this.mapTypes(p,function(_,S){h.addTrait(_,S)});var m=h.build();return this.definePackage(m,m.allTypes[m.allTypes.length-1].$pkg),m},Uo.prototype.definePackage=function(c,p){this.properties.define(c,"$pkg",{value:p})},Ya.prototype.set=function(c,p,h){if(!d(p)||!p.length)throw new TypeError("property name must be a non-empty string");var m=this.getProperty(c,p),_=m&&m.name;h===void 0?m?delete c[_]:delete c.$attrs[mm(p)]:m?_ in c?c[_]=h:T_(c,m,h):c.$attrs[mm(p)]=h},Ya.prototype.get=function(c,p){var h=this.getProperty(c,p);if(!h)return c.$attrs[mm(p)];var m=h.name;return!c[m]&&h.isMany&&T_(c,h,[]),c[m]},Ya.prototype.define=function(c,p,h){if(!h.writable){var m=h.value;delete(h=L({},h,{get:function(){return m}})).value}Object.defineProperty(c,p,h)},Ya.prototype.defineDescriptor=function(c,p){this.define(c,"$descriptor",{value:p})},Ya.prototype.defineModel=function(c,p){this.define(c,"$model",{value:p})},Ya.prototype.getProperty=function(c,p){var h=this.model,m=h.getPropertyDescriptor(c,p);if(m)return m;if(p.includes(":"))return null;const _=h.config.strict;if(_!==void 0){const S=new TypeError(`unknown property <${p}> on <${c.$type}>`);if(_)throw S;typeof console<"u"&&console.warn(S)}return null},ci.prototype.create=function(c,p){var h=this.getType(c);if(!h)throw new Error("unknown type <"+c+">");return new h(p)},ci.prototype.getType=function(c){var p=this.typeCache,h=d(c)?c:c.ns.name,m=p[h];return m||(c=this.registry.getEffectiveDescriptor(h),m=p[h]=this.factory.createType(c)),m},ci.prototype.createAny=function(c,p,h){var m=or(c),_={$type:c,$instanceOf:function(M){return M===this.$type},get:function(M){return this[M]},set:function(M,O){(function(j,Q,ne){let he=j;x(Q,function(ke,Be){if(typeof ke!="number"&&typeof ke!="string")throw new Error("illegal key type: "+typeof ke+". Key should be of type number or string.");if(ke==="constructor")throw new Error("illegal key: constructor");if(ke==="__proto__")throw new Error("illegal key: __proto__");let be=Q[Be+1],We=he[ke];a(be)&&We==null&&(We=he[ke]=isNaN(+be)?{}:[]),o(be)?o(ne)?delete he[ke]:he[ke]=ne:he=We})})(this,[M],O)}},S={name:c,isGeneric:!0,ns:{prefix:m.prefix,localName:m.localName,uri:p}};return this.properties.defineDescriptor(_,S),this.properties.defineModel(_,this),this.properties.define(_,"get",{enumerable:!1,writable:!0}),this.properties.define(_,"set",{enumerable:!1,writable:!0}),this.properties.define(_,"$parent",{enumerable:!1,writable:!0}),this.properties.define(_,"$instanceOf",{enumerable:!1,writable:!0}),x(h,function(M,O){l(M)&&M.value!==void 0?_[M.name]=M.value:_[O]=M}),_},ci.prototype.getPackage=function(c){return this.registry.getPackage(c)},ci.prototype.getPackages=function(){return this.registry.getPackages()},ci.prototype.getElementDescriptor=function(c){return c.$descriptor},ci.prototype.hasType=function(c,p){return p===void 0&&(p=c,c=this),p in c.$model.getElementDescriptor(c).allTypesByName},ci.prototype.getPropertyDescriptor=function(c,p){return this.getElementDescriptor(c).propertiesByName[p]},ci.prototype.getTypeDescriptor=function(c){return this.registry.typeMap[c]};var vA=String.fromCharCode,xA=Object.prototype.hasOwnProperty,_A=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,ic={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function wA(c,p,h,m){return m?xA.call(ic,m)?ic[m]:"&"+m+";":vA(p||parseInt(h,16))}function qa(c){return c.length>3&&c.indexOf("&")!==-1?c.replace(_A,wA):c}Object.keys(ic).forEach(function(c){ic[c.toUpperCase()]=ic[c]});var A_="xsi:type",M_="non-whitespace outside of root node";function zs(c){return new Error(c)}function N_(c){return"missing namespace for prefix <"+c+">"}function vp(c){return{get:c,enumerable:!0}}function EA(c){var p,h={};for(p in c)h[p]=c[p];return h}function gm(c){return c+"$uri"}function D_(){return{line:0,column:0}}function bA(c){throw c}function O_(c){if(!this)return new O_(c);var p,h,m,_,S,M,O,j,Q,ne=c&&c.proxy,he=bA,ke=D_,Be=!1,be=!1,We=null,ce=!1;function Te(ie){ie instanceof Error||(ie=zs(ie)),We=ie,he(ie,ke)}function G(ie){S&&(ie instanceof Error||(ie=zs(ie)),S(ie,ke))}this.on=function(ie,te){if(typeof te!="function")throw zs("required args <name, cb>");switch(ie){case"openTag":h=te;break;case"text":p=te;break;case"closeTag":m=te;break;case"error":he=te;break;case"warn":S=te;break;case"cdata":_=te;break;case"attention":j=te;break;case"question":O=te;break;case"comment":M=te;break;default:throw zs("unsupported event: "+ie)}return this},this.ns=function(ie){if(ie===void 0&&(ie={}),typeof ie!="object")throw zs("required args <nsMap={}>");var te,Ie={};for(te in ie)Ie[te]=ie[te];return Ie["http://www.w3.org/2001/XMLSchema-instance"]="xsi",be=!0,Q=Ie,this},this.parse=function(ie){if(typeof ie!="string")throw zs("required args <xml=string>");return We=null,function(te){var Ie,Se,ft,lt,He,Yt,xe,ve,et,dt,yt,Kr=be?[]:null,Ft=be?function(zn){var Pn,an,Tr={};for(Pn in zn)Tr[an=zn[Pn]]=an,Tr[gm(an)]=Pn;return Tr}(Q):null,Pr=[],ui=0,nn=!1,Yr=!1,Pt=0,Mt=0,Ws="",Us=0;function Qa(){if(yt!==null)return yt;var zn,Pn,an,Tr,Tn,Vt,F,T,N,W,ee,De=be&&Ft.xmlns,it=be&&Be?[]:null,Ye=Us,Tt=Ws,fn=Tt.length,gr={},Za={};e:for(;Ye<fn;Ye++)if(N=!1,!((W=Tt.charCodeAt(Ye))===32||W<14&&W>8)){for((W<65||W>122||W>90&&W<97)&&W!==95&&W!==58&&(G("illegal first char attribute name"),N=!0),ee=Ye+1;ee<fn;ee++)if(!((W=Tt.charCodeAt(ee))>96&&W<123||W>64&&W<91||W>47&&W<59||W===46||W===45||W===95)){if(W===32||W<14&&W>8){G("missing attribute value"),Ye=ee;continue e}if(W===61)break;G("illegal attribute name char"),N=!0}if((T=Tt.substring(Ye,ee))==="xmlns:xmlns"&&(G("illegal declaration of xmlns"),N=!0),(W=Tt.charCodeAt(ee+1))===34)(ee=Tt.indexOf('"',Ye=ee+2))===-1&&(ee=Tt.indexOf("'",Ye))!==-1&&(G("attribute value quote missmatch"),N=!0);else if(W===39)(ee=Tt.indexOf("'",Ye=ee+2))===-1&&(ee=Tt.indexOf('"',Ye))!==-1&&(G("attribute value quote missmatch"),N=!0);else for(G("missing attribute value quotes"),N=!0,ee+=1;ee<fn&&!((W=Tt.charCodeAt(ee+1))===32||W<14&&W>8);ee++);for(ee===-1&&(G("missing closing quotes"),ee=fn,N=!0),N||(Vt=Tt.substring(Ye,ee)),Ye=ee;ee+1<fn&&!((W=Tt.charCodeAt(ee+1))===32||W<14&&W>8);ee++)Ye===ee&&(G("illegal character after attribute end"),N=!0);if(Ye=ee+1,!N)if(T in Za)G("attribute <"+T+"> already defined");else if(Za[T]=!0,be)if(Be){if((Tn=T==="xmlns"?"xmlns":T.charCodeAt(0)===120&&T.substr(0,6)==="xmlns:"?T.substr(6):null)!==null){if(zn=qa(Vt),Pn=gm(Tn),!(F=Q[zn])){if(Tn==="xmlns"||Pn in Ft&&Ft[Pn]!==zn)do F="ns"+ui++;while(Ft[F]!==void 0);else F=Tn;Q[zn]=F}Ft[Tn]!==F&&(Tr||(Ft=EA(Ft),Tr=!0),Ft[Tn]=F,Tn==="xmlns"&&(Ft[gm(F)]=zn,De=F),Ft[Pn]=zn),gr[T]=Vt;continue}it.push(T,Vt)}else(W=T.indexOf(":"))!==-1?(an=Ft[T.substring(0,W)])?((T=De===an?T.substr(W+1):an+T.substr(W))===A_&&((W=Vt.indexOf(":"))!==-1?(an=Vt.substring(0,W),Vt=(an=Ft[an]||an)+Vt.substring(W)):Vt=De+":"+Vt),gr[T]=Vt):G(N_(T.substring(0,W))):gr[T]=Vt;else gr[T]=Vt}if(Be)for(Ye=0,fn=it.length;Ye<fn;Ye++){if(T=it[Ye++],Vt=it[Ye],(W=T.indexOf(":"))!==-1){if(!(an=Ft[T.substring(0,W)])){G(N_(T.substring(0,W)));continue}(T=De===an?T.substr(W+1):an+T.substr(W))===A_&&((W=Vt.indexOf(":"))!==-1?(an=Vt.substring(0,W),Vt=(an=Ft[an]||an)+Vt.substring(W)):Vt=De+":"+Vt)}gr[T]=Vt}return yt=gr}function sc(){for(var zn,Pn,an=/(\r\n|\r|\n)/g,Tr=0,Tn=0,Vt=0,F=Mt;Pt>=Vt&&(zn=an.exec(te))&&!((F=zn[0].length+zn.index)>Pt);)Tr+=1,Vt=F;return Pt==-1?(Tn=F,Pn=te.substring(Mt)):Mt===0?Pn=te.substring(Mt,Pt):(Tn=Pt-Vt,Pn=Mt==-1?te.substring(Pt):te.substring(Pt,Mt+1)),{data:Pn,line:Tr,column:Tn}}for(ke=sc,ne&&(dt=Object.create({},{name:vp(function(){return ve}),originalName:vp(function(){return et}),attrs:vp(Qa),ns:vp(function(){return Ft})}));Mt!==-1;){if((Pt=te.charCodeAt(Mt)===60?Mt:te.indexOf("<",Mt))===-1)return Pr.length?Te("unexpected end of file"):Mt===0?Te("missing start tag"):void(Mt<te.length&&te.substring(Mt).trim()&&G(M_));if(Mt!==Pt){if(Pr.length){if(p&&(p(te.substring(Mt,Pt),qa,ke),ce))return}else if(te.substring(Mt,Pt).trim()&&(G(M_),ce))return}if((He=te.charCodeAt(Pt+1))===33){if((lt=te.charCodeAt(Pt+2))===91&&te.substr(Pt+3,6)==="CDATA["){if((Mt=te.indexOf("]]>",Pt))===-1)return Te("unclosed cdata");if(_&&(_(te.substring(Pt+9,Mt),ke),ce))return;Mt+=3;continue}if(lt===45&&te.charCodeAt(Pt+3)===45){if((Mt=te.indexOf("-->",Pt))===-1)return Te("unclosed comment");if(M&&(M(te.substring(Pt+4,Mt),qa,ke),ce))return;Mt+=3;continue}}if(He!==63){for(Se=Pt+1;;Se++){if(Yt=te.charCodeAt(Se),isNaN(Yt))return Mt=-1,Te("unclosed tag");if(Yt===34)Se=(lt=te.indexOf('"',Se+1))!==-1?lt:Se;else if(Yt===39)Se=(lt=te.indexOf("'",Se+1))!==-1?lt:Se;else if(Yt===62){Mt=Se;break}}if(He!==33){if(yt={},He===47){if(nn=!1,Yr=!0,!Pr.length)return Te("missing open tag");if(Se=ve=Pr.pop(),lt=Pt+2+Se.length,te.substring(Pt+2,lt)!==Se)return Te("closing tag mismatch");for(;lt<Mt;lt++)if(!((He=te.charCodeAt(lt))===32||He>8&&He<14))return Te("close tag")}else{if(te.charCodeAt(Mt-1)===47?(Se=ve=te.substring(Pt+1,Mt-1),nn=!0,Yr=!0):(Se=ve=te.substring(Pt+1,Mt),nn=!0,Yr=!1),!(He>96&&He<123||He>64&&He<91||He===95||He===58))return Te("illegal first char nodeName");for(lt=1,ft=Se.length;lt<ft;lt++)if(!((He=Se.charCodeAt(lt))>96&&He<123||He>64&&He<91||He>47&&He<59||He===45||He===95||He==46)){if(He===32||He<14&&He>8){ve=Se.substring(0,lt),yt=null;break}return Te("invalid nodeName")}Yr||Pr.push(ve)}if(be){if(Ie=Ft,nn&&(Yr||Kr.push(Ie),yt===null&&(Be=Se.indexOf("xmlns",lt)!==-1)&&(Us=lt,Ws=Se,Qa(),Be=!1)),et=ve,(He=ve.indexOf(":"))!==-1){if(!(xe=Ft[ve.substring(0,He)]))return Te("missing namespace on <"+et+">");ve=ve.substr(He+1)}else xe=Ft.xmlns;xe&&(ve=xe+":"+ve)}if(nn&&(Us=lt,Ws=Se,h&&(ne?h(dt,qa,Yr,ke):h(ve,Qa,qa,Yr,ke),ce)))return;if(Yr){if(m&&(m(ne?dt:ve,qa,nn,ke),ce))return;be&&(Ft=nn?Ie:Kr.pop())}Mt+=1}else{if(j&&(j(te.substring(Pt,Mt+1),qa,ke),ce))return;Mt+=1}}else{if((Mt=te.indexOf("?>",Pt))===-1)return Te("unclosed question");if(O&&(O(te.substring(Pt,Mt+2),ke),ce))return;Mt+=2}}}(ie),ke=D_,ce=!1,We},this.stop=function(){ce=!0}}function L_(c){return c.xml&&c.xml.tagAlias==="lowerCase"}var SA={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},xp="xsi:type";function B_(c){return c.xml&&c.xml.serialize}function I_(c){return B_(c)===xp}function j_(c,p){return L_(p)?c.prefix+":"+((h=c.localName).charAt(0).toUpperCase()+h.slice(1)):c.name;var h}function Go(c){return new Error(c)}function fo(c){return c.$descriptor}function CA(c){L(this,c),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(p){this.references.push(p)},this.addElement=function(p){if(!p)throw Go("expected element");var h,m=this.elementsById,_=fo(p).idProperty;if(_&&(h=p.get(_.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(h))throw new Error("illegal ID <"+h+">");if(m[h])throw Go("duplicate ID <"+h+">");m[h]=p}},this.addWarning=function(p){this.warnings.push(p)}}function oc(){}function ym(){}function Hs(){}function ac(c,p){this.property=c,this.context=p}function vm(c,p){this.element=p,this.propertyDesc=c}function _p(){}function ar(c,p,h){this.model=c,this.type=c.getType(p),this.context=h}function xm(c,p,h){ar.call(this,c,p,h)}function Vs(c,p,h){this.model=c,this.context=h}function _m(c){c instanceof ci&&(c={model:c}),L(this,{lax:!1},c)}oc.prototype.handleEnd=function(){},oc.prototype.handleText=function(){},oc.prototype.handleNode=function(){},ym.prototype=Object.create(oc.prototype),ym.prototype.handleNode=function(){return this},Hs.prototype=Object.create(oc.prototype),Hs.prototype.handleText=function(c){this.body=(this.body||"")+c},ac.prototype=Object.create(Hs.prototype),ac.prototype.handleNode=function(c){if(this.element)throw Go("expected no sub nodes");return this.element=this.createReference(c),this},ac.prototype.handleEnd=function(){this.element.id=this.body},ac.prototype.createReference=function(c){return{property:this.property.ns.name,id:""}},vm.prototype=Object.create(Hs.prototype),vm.prototype.handleEnd=function(){var c=this.body||"",p=this.element,h=this.propertyDesc;c=dm(h.type,c),h.isMany?p.get(h.name).push(c):p.set(h.name,c)},_p.prototype=Object.create(Hs.prototype),_p.prototype.handleNode=function(c){var p=this,h=this.element;return h?p=this.handleChild(c):(h=this.element=this.createElement(c),this.context.addElement(h)),p},ar.prototype=Object.create(_p.prototype),ar.prototype.addReference=function(c){this.context.addReference(c)},ar.prototype.handleText=function(c){if(!fo(this.element).bodyProperty)throw Go("unexpected body text <"+c+">");Hs.prototype.handleText.call(this,c)},ar.prototype.handleEnd=function(){var c=this.body,p=this.element,h=fo(p).bodyProperty;h&&c!==void 0&&(c=dm(h.type,c),p.set(h.name,c))},ar.prototype.createElement=function(c){var p,h=c.attributes,m=this.type,_=fo(m),S=this.context,M=new m({}),O=this.model;return x(h,function(j,Q){var ne=_.propertiesByName[Q];ne&&ne.isReference?ne.isMany?x(j.split(" "),function(he){S.addReference({element:M,property:ne.ns.name,id:he})}):S.addReference({element:M,property:ne.ns.name,id:j}):(ne?j=dm(ne.type,j):Q!=="xmlns"&&(p=or(Q,_.ns.prefix),O.getPackage(p.prefix)&&S.addWarning({message:"unknown attribute <"+Q+">",element:M,property:Q,value:j})),M.set(Q,j))}),M},ar.prototype.getPropertyForNode=function(c){var p,h,m=or(c.name),_=this.type,S=this.model,M=fo(_),O=m.name,j=M.propertiesByName[O];if(j&&!j.isAttr)return I_(j)&&(p=c.attributes[xp])?(p=function(ne,he){var ke=or(ne);return function(Be,be){var We=Be.name,ce=Be.localName,Te=be.xml&&be.xml.typePrefix;return Te&&ce.indexOf(Te)===0?Be.prefix+":"+ce.slice(Te.length):We}(ke,he.getPackage(ke.prefix))}(p,S),L({},j,{effectiveType:fo(h=S.getType(p)).name})):j;var Q=S.getPackage(m.prefix);if(Q){if(p=j_(m,Q),h=S.getType(p),j=y(M.properties,function(ne){return!ne.isVirtual&&!ne.isReference&&!ne.isAttribute&&h.hasType(ne.type)}))return L({},j,{effectiveType:fo(h).name})}else if(j=y(M.properties,function(ne){return!ne.isReference&&!ne.isAttribute&&ne.type==="Element"}))return j;throw Go("unrecognized element <"+m.name+">")},ar.prototype.toString=function(){return"ElementDescriptor["+fo(this.type).name+"]"},ar.prototype.valueHandler=function(c,p){return new vm(c,p)},ar.prototype.referenceHandler=function(c){return new ac(c,this.context)},ar.prototype.handler=function(c){return c==="Element"?new Vs(this.model,c,this.context):new ar(this.model,c,this.context)},ar.prototype.handleChild=function(c){var p,h,m,_;if(p=this.getPropertyForNode(c),m=this.element,k_(h=p.effectiveType||p.type))return this.valueHandler(p,m);var S=(_=p.isReference?this.referenceHandler(p).handleNode(c):this.handler(h).handleNode(c)).element;return S!==void 0&&(p.isMany?m.get(p.name).push(S):m.set(p.name,S),p.isReference?(L(S,{element:m}),this.context.addReference(S)):S.$parent=m),_},xm.prototype=Object.create(ar.prototype),xm.prototype.createElement=function(c){var p=c.name,h=or(p),m=this.model,_=this.type,S=m.getPackage(h.prefix),M=S&&j_(h,S)||p;if(!_.hasType(M))throw Go("unexpected element <"+c.originalName+">");return ar.prototype.createElement.call(this,c)},Vs.prototype=Object.create(_p.prototype),Vs.prototype.createElement=function(c){var p=c.name,h=or(p).prefix,m=c.ns[h+"$uri"],_=c.attributes;return this.model.createAny(p,m,_)},Vs.prototype.handleChild=function(c){var p=new Vs(this.model,"Element",this.context).handleNode(c),h=this.element,m=p.element;return m!==void 0&&((h.$children=h.$children||[]).push(m),m.$parent=h),p},Vs.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},_m.prototype.fromXML=function(c,p,h){var m=p.rootHandler;p instanceof ar?(m=p,p={}):typeof p=="string"?(m=this.handler(p),p={}):typeof m=="string"&&(m=this.handler(m));var _=this.model,S=this.lax,M=new CA(L({},p,{rootHandler:m})),O=new O_({proxy:!0}),j=function(){var ce=[];return Object.defineProperty(ce,"peek",{value:function(){return this[this.length-1]}}),ce}();function Q(ce,Te,G){var ie=Te(),te=ie.line,Ie=ie.column,Se=ie.data;Se.charAt(0)==="<"&&Se.indexOf(" ")!==-1&&(Se=Se.slice(0,Se.indexOf(" "))+">");var ft="unparsable content "+(Se?Se+" ":"")+`detected
	line: `+te+`
	column: `+Ie+`
	nested error: `+ce.message;if(G)return M.addWarning({message:ft,error:ce}),!0;throw Go(ft)}function ne(ce,Te){return Q(ce,Te,!0)}m.context=M,j.push(m);var he=/^<\?xml /i,ke=/ encoding="([^"]+)"/i,Be=/^utf-8$/i;function be(ce,Te){try{j.peek().handleText(ce)}catch(G){ne(G,Te)}}var We=_.getPackages().reduce(function(ce,Te){return ce[Te.uri]=Te.prefix,ce},{"http://www.w3.org/XML/1998/namespace":"xml"});return O.ns(We).on("openTag",function(ce,Te,G,ie){var te=ce.attrs||{},Ie=Object.keys(te).reduce(function(Se,ft){var lt=Te(te[ft]);return Se[ft]=lt,Se},{});(function(Se,ft){var lt=j.peek();try{j.push(lt.handleNode(Se))}catch(He){Q(He,ft,S)&&j.push(new ym)}})({name:ce.name,originalName:ce.originalName,attributes:Ie,ns:ce.ns},ie)}).on("question",function(ce){if(he.test(ce)){var Te=ke.exec(ce),G=Te&&Te[1];G&&!Be.test(G)&&M.addWarning({message:"unsupported document encoding <"+G+">, falling back to UTF-8"})}}).on("closeTag",function(){j.pop().handleEnd()}).on("cdata",be).on("text",function(ce,Te,G){(function(ie,te){ie.trim()&&be(ie,te)})(Te(ce),G)}).on("error",Q).on("warn",ne),new Promise(function(ce,Te){var G;try{O.parse(c),function(){var ft,lt,He=M.elementsById,Yt=M.references;for(ft=0;lt=Yt[ft];ft++){var xe=lt.element,ve=He[lt.id],et=fo(xe).propertiesByName[lt.property];if(ve||M.addWarning({message:"unresolved reference <"+lt.id+">",element:lt.element,property:lt.property,value:lt.id}),et.isMany){var dt=xe.get(et.name),yt=dt.indexOf(lt);yt===-1&&(yt=dt.length),ve?dt[yt]=ve:dt.splice(yt,1)}else xe.set(et.name,ve)}}()}catch(ft){G=ft}var ie=m.element;G||ie||(G=Go("failed to parse document as <"+m.type.$descriptor.name+">"));var te=M.warnings,Ie=M.references,Se=M.elementsById;return G?(G.warnings=te,Te(G)):ce({rootElement:ie,elementsById:Se,references:Ie,warnings:te})})},_m.prototype.handler=function(c){return new xm(this.model,c)};var RA=/<|>|'|"|&|\n\r|\n/g,$_=/<|>|&/g;function kA(c){var p={},h={},m={},_=[],S=[];this.byUri=function(M){return h[M]||c&&c.byUri(M)},this.add=function(M,O){h[M.uri]=M,O?_.push(M):S.push(M),this.mapPrefix(M.prefix,M.uri)},this.uriByPrefix=function(M){return p[M||"xmlns"]},this.mapPrefix=function(M,O){p[M||"xmlns"]=O},this.getNSKey=function(M){return M.prefix!==void 0?M.uri+"|"+M.prefix:M.uri},this.logUsed=function(M){var O=M.uri,j=this.getNSKey(M);m[j]=this.byUri(O),c&&c.logUsed(M)},this.getUsed=function(M){var O=this;return[].concat(_,S).filter(function(j){var Q=O.getNSKey(j);return m[Q]})}}function PA(c,p){return L_(p)?(h=c).charAt(0).toLowerCase()+h.slice(1):c;var h}function F_(c,p){c.super_=p,c.prototype=Object.create(p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}function z_(c){return d(c)?c:(c.prefix?c.prefix+":":"")+c.localName}var TA={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},AA={"<":"lt",">":"gt","&":"amp"};function H_(c,p,h){return(c=d(c)?c:""+c).replace(p,function(m){return"&"+h[m]+";"})}function wm(c){this.tagName=c}function Xa(){}function Em(c){this.tagName=c}function Kt(c,p){this.body=[],this.attrs=[],this.parent=c,this.propertyDescriptor=p}function wp(c,p){Kt.call(this,c,p)}function MA(){this.value="",this.write=function(c){this.value+=c}}function NA(c,p){var h=[""];this.append=function(m){return c.write(m),this},this.appendNewLine=function(){return p&&c.write(`
`),this},this.appendIndent=function(){return p&&c.write(h.join("  ")),this},this.indent=function(){return h.push(""),this},this.unindent=function(){return h.pop(),this}}function DA(c){return c=L({format:!1,preamble:!0},c||{}),{toXML:function(p,h){var m=h||new MA,_=new NA(m,c.format);if(c.preamble&&_.append(`<?xml version="1.0" encoding="UTF-8"?>
`),new Kt().build(p).serializeTo(_),!h)return m.value}}}function Ep(c,p){ci.call(this,c,p)}wm.prototype.build=function(c){return this.element=c,this},wm.prototype.serializeTo=function(c){c.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Xa.prototype.serializeValue=Xa.prototype.serializeTo=function(c){c.append(this.escape?H_(this.value,$_,AA):this.value)},Xa.prototype.build=function(c,p){return this.value=p,c.type==="String"&&p.search($_)!==-1&&(this.escape=!0),this},F_(Em,Xa),Em.prototype.serializeTo=function(c){c.appendIndent().append("<"+this.tagName+">"),this.serializeValue(c),c.append("</"+this.tagName+">").appendNewLine()},Kt.prototype.build=function(c){this.element=c;var p,h,m=c.$descriptor,_=this.propertyDescriptor,S=m.isGeneric;return p=S?this.parseGeneric(c):this.parseNsAttributes(c),this.ns=_?this.nsPropertyTagName(_):this.nsTagName(m),this.tagName=this.addTagName(this.ns),S||(h=function(M){return v(M.$descriptor.properties,function(O){var j=O.name;if(O.isVirtual||!g(M,j))return!1;var Q=M[j];return Q!==O.default&&Q!==null&&(!O.isMany||Q.length)})}(c),this.parseAttributes(v(h,function(M){return M.isAttr})),this.parseContainments(function(M){return v(M,function(O){return!O.isAttr})}(h))),this.parseGenericAttributes(c,p),this},Kt.prototype.nsTagName=function(c){return function(p,h){return h.isGeneric?L({localName:h.ns.localName},p):L({localName:PA(h.ns.localName,h.$pkg)},p)}(this.logNamespaceUsed(c.ns),c)},Kt.prototype.nsPropertyTagName=function(c){return function(p,h){return L({localName:h.ns.localName},p)}(this.logNamespaceUsed(c.ns),c)},Kt.prototype.isLocalNs=function(c){return c.uri===this.ns.uri},Kt.prototype.nsAttributeName=function(c){var p;if(p=d(c)?or(c):c.ns,c.inherited)return{localName:p.localName};var h=this.logNamespaceUsed(p);return this.getNamespaces().logUsed(h),this.isLocalNs(h)?{localName:p.localName}:L({localName:p.localName},h)},Kt.prototype.parseGeneric=function(c){var p=this,h=this.body,m=[];return x(c,function(_,S){S==="$body"?h.push(new Xa().build({type:"String"},_)):S==="$children"?x(_,function(M){h.push(new Kt(p).build(M))}):S.indexOf("$")!==0&&p.parseNsAttribute(c,S,_)&&m.push({name:S,value:_})}),m},Kt.prototype.parseNsAttribute=function(c,p,h){var m,_=c.$model,S=or(p);if(S.prefix==="xmlns"&&(m={prefix:S.localName,uri:h}),S.prefix||S.localName!=="xmlns"||(m={uri:h}),!m)return{name:p,value:h};if(_&&_.getPackage(h))this.logNamespace(m,!0,!0);else{var M=this.logNamespaceUsed(m,!0);this.getNamespaces().logUsed(M)}},Kt.prototype.parseNsAttributes=function(c,p){var h=this,m=c.$attrs,_=[];return x(m,function(S,M){var O=h.parseNsAttribute(c,M,S);O&&_.push(O)}),_},Kt.prototype.parseGenericAttributes=function(c,p){var h=this;x(p,function(m){if(m.name!==xp)try{h.addAttribute(h.nsAttributeName(m.name),m.value)}catch(_){console.warn("missing namespace information for ",m.name,"=",m.value,"on",c,_)}})},Kt.prototype.parseContainments=function(c){var p=this,h=this.body,m=this.element;x(c,function(_){var S=m.get(_.name),M=_.isReference;if(_.isMany||(S=[S]),_.isBody)h.push(new Xa().build(_,S[0]));else if(k_(_.type))x(S,function(Q){h.push(new Em(p.addTagName(p.nsPropertyTagName(_))).build(_,Q))});else if(M)x(S,function(Q){h.push(new wm(p.addTagName(p.nsPropertyTagName(_))).build(Q))});else{var O=I_(_),j=function(Q){return B_(Q)==="property"}(_);x(S,function(Q){var ne;ne=O?new wp(p,_):j?new Kt(p,_):new Kt(p),h.push(ne.build(Q))})}})},Kt.prototype.getNamespaces=function(c){var p,h=this.namespaces,m=this.parent;return h||(p=m&&m.getNamespaces(),c||!p?this.namespaces=h=new kA(p):h=p),h},Kt.prototype.logNamespace=function(c,p,h){var m=this.getNamespaces(h),_=c.uri,S=c.prefix;return m.byUri(_)&&!h||m.add(c,p),m.mapPrefix(S,_),c},Kt.prototype.logNamespaceUsed=function(c,p){var h,m,_,S=this.element.$model,M=this.getNamespaces(p),O=c.prefix,j=c.uri;if(!O&&!j)return{localName:c.localName};if(_=SA[O]||S&&(S.getPackage(O)||{}).uri,!(j=j||_||M.uriByPrefix(O)))throw new Error("no namespace uri given for prefix <"+O+">");if(!(c=M.byUri(j))){for(h=O,m=1;M.uriByPrefix(h);)h=O+"_"+m++;c=this.logNamespace({prefix:h,uri:j},_===j)}return O&&M.mapPrefix(O,j),c},Kt.prototype.parseAttributes=function(c){var p=this,h=this.element;x(c,function(m){var _=h.get(m.name);if(m.isReference)if(m.isMany){var S=[];x(_,function(M){S.push(M.id)}),_=S.join(" ")}else _=_.id;p.addAttribute(p.nsAttributeName(m),_)})},Kt.prototype.addTagName=function(c){var p=this.logNamespaceUsed(c);return this.getNamespaces().logUsed(p),z_(c)},Kt.prototype.addAttribute=function(c,p){var h=this.attrs;d(p)&&(p=H_(p,RA,TA));var m=function(S,M){const O=b(M);let j=s(S)?-1:void 0;return x(S,function(Q,ne){if(O(Q,ne))return j=ne,!1}),j}(h,function(S){return S.name.localName===c.localName&&S.name.uri===c.uri&&S.name.prefix===c.prefix}),_={name:c,value:p};m!==-1?h.splice(m,1,_):h.push(_)},Kt.prototype.serializeAttributes=function(c){var p=this.attrs,h=this.namespaces;h&&(p=function(m){return m.getUsed().filter(function(_){return _.prefix!=="xml"}).map(function(_){return{name:"xmlns"+(_.prefix?":"+_.prefix:""),value:_.uri}})}(h).concat(p)),x(p,function(m){c.append(" ").append(z_(m.name)).append('="').append(m.value).append('"')})},Kt.prototype.serializeTo=function(c){var p=this.body[0],h=p&&p.constructor!==Xa;c.appendIndent().append("<"+this.tagName),this.serializeAttributes(c),c.append(p?">":" />"),p&&(h&&c.appendNewLine().indent(),x(this.body,function(m){m.serializeTo(c)}),h&&c.unindent().appendIndent(),c.append("</"+this.tagName+">")),c.appendNewLine()},F_(wp,Kt),wp.prototype.parseNsAttributes=function(c){var p=Kt.prototype.parseNsAttributes.call(this,c),h=c.$descriptor;if(h.name===this.propertyDescriptor.type)return p;var m=this.typeNs=this.nsTagName(h);this.getNamespaces().logUsed(this.typeNs);var _=c.$model.getPackage(m.uri),S=_.xml&&_.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(xp),(m.prefix?m.prefix+":":"")+S+h.ns.localName),p},wp.prototype.isLocalNs=function(c){return c.uri===(this.typeNs||this.ns).uri},Ep.prototype=Object.create(ci.prototype),Ep.prototype.fromXML=function(c,p,h){d(p)||(h=p,p="bpmn:Definitions");var m=new _m(L({model:this,lax:!0},h)),_=m.handler(p);return m.fromXML(c,_)},Ep.prototype.toXML=function(c,p){var h=new DA(p);return new Promise(function(m,_){try{return m({xml:h.toXML(c)})}catch(S){return _(S)}})};var OA={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function LA(c,p){return new Ep(L({},OA,c),p)}var BA="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function mr(c,p){return c.$instanceOf(p)}function IA(c){var p={},h=[],m={};function _(xe,ve){return function(et){xe(et,ve)}}function S(xe){p[xe.id]=xe}function M(xe,ve){try{var et=m[xe.id]&&function(dt,yt){if(dt.gfx)throw new Error(`already rendered ${qn(dt)}`);return c.element(dt,m[dt.id],yt)}(xe,ve);return S(xe),et}catch(dt){O(dt.message,{element:xe,error:dt}),console.error(`failed to import ${qn(xe)}`,dt)}}function O(xe,ve){c.error(xe,ve)}var j=this.registerDi=function(xe){var ve,et=xe.bpmnElement;et?m[et.id]?O(`multiple DI elements defined for ${qn(et)}`,{element:et}):(m[et.id]=xe,g(ve=et,"di")||Object.defineProperty(ve,"di",{enumerable:!1,get:function(){throw new Error(BA)}})):O(`no bpmnElement referenced in ${qn(xe)}`,{element:xe})};function Q(xe){var ve;ve=xe.plane,j(ve),x(ve.planeElement,ne)}function ne(xe){j(xe)}this.handleDefinitions=function(xe,ve){var et=xe.diagrams;if(ve&&et.indexOf(ve)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!ve&&et&&et.length&&(ve=et[0]),!ve)throw new Error("no diagram to display");m={},Q(ve);var dt=ve.plane;if(!dt)throw new Error(`no plane for ${qn(ve)}`);var yt=dt.bpmnElement;if(!yt){if(yt=function(ui){return y(ui.rootElements,function(nn){return mr(nn,"bpmn:Process")||mr(nn,"bpmn:Collaboration")})}(xe),!yt)throw new Error("no process or collaboration to display");O(`correcting missing bpmnElement on ${qn(dt)} to ${qn(yt)}`),dt.bpmnElement=yt,j(dt)}var Kr,Ft,Pr=function(ui,nn){return c.root(ui,m[ui.id],nn)}(yt,dt);if(mr(yt,"bpmn:Process")||mr(yt,"bpmn:SubProcess"))ke(yt,Pr);else{if(!mr(yt,"bpmn:Collaboration"))throw new Error(`unsupported bpmnElement for ${qn(dt)}: ${qn(yt)}`);Ft=Pr,x((Kr=yt).participants,_(Yt,Ft)),G(Kr.artifacts,Ft),h.push(function(){(function(ui,nn){x(ui,_(Be,nn))})(Kr.messageFlows,Ft)}),function(ui,nn){var Yr=v(ui,function(Pt){return!p[Pt.id]&&mr(Pt,"bpmn:Process")&&Pt.laneSets});Yr.forEach(_(ke,nn))}(xe.rootElements,Pr)}he(h)};var he=this.handleDeferred=function(){for(;h.length;)h.shift()()};function ke(xe,ve){He(xe,ve),ie(xe.ioSpecification,ve),G(xe.artifacts,ve),S(xe)}function Be(xe,ve){M(xe,ve)}function be(xe,ve){M(xe,ve)}function We(xe,ve){M(xe,ve)}function ce(xe,ve){M(xe,ve)}function Te(xe,ve){M(xe,ve)}function G(xe,ve){x(xe,function(et){mr(et,"bpmn:Association")?h.push(function(){Te(et,ve)}):Te(et,ve)})}function ie(xe,ve){xe&&(x(xe.dataInputs,_(We,ve)),x(xe.dataOutputs,_(ce,ve)))}var te=this.handleSubProcess=function(xe,ve){He(xe,ve),G(xe.artifacts,ve)};function Ie(xe,ve){var et=M(xe,ve);mr(xe,"bpmn:SubProcess")&&te(xe,et||ve),mr(xe,"bpmn:Activity")&&ie(xe.ioSpecification,ve),h.push(function(){x(xe.dataInputAssociations,_(be,ve)),x(xe.dataOutputAssociations,_(be,ve))})}function Se(xe,ve){M(xe,ve)}function ft(xe,ve){h.push(function(){var et=M(xe,ve);xe.childLaneSet&&lt(xe.childLaneSet,et||ve),function(dt){x(dt.flowNodeRef,function(yt){var Kr=yt.get("lanes");Kr&&Kr.push(dt)})}(xe)})}function lt(xe,ve){x(xe.lanes,_(ft,ve))}function He(xe,ve){(function(et,dt){x(et,function(yt){mr(yt,"bpmn:SequenceFlow")?h.push(function(){(function(Kr,Ft){M(Kr,Ft)})(yt,dt)}):mr(yt,"bpmn:BoundaryEvent")?h.unshift(function(){Ie(yt,dt)}):mr(yt,"bpmn:FlowNode")?Ie(yt,dt):mr(yt,"bpmn:DataObject")||(mr(yt,"bpmn:DataStoreReference")||mr(yt,"bpmn:DataObjectReference")?Se(yt,dt):O(`unrecognized flowElement ${qn(yt)} in context ${qn(dt&&dt.businessObject)}`,{element:yt,context:dt}))})})(xe.flowElements,ve),xe.laneSets&&function(et,dt){x(et,_(lt,dt))}(xe.laneSets,ve)}function Yt(xe,ve){var et=M(xe,ve),dt=xe.processRef;dt&&ke(dt,et||ve)}}function jA(c,p,h){var m,_,S,M=[];function O(j,Q){var ne=new IA({root:function(Be,be){return m.add(Be,be)},element:function(Be,be,We){return m.add(Be,be,We)},error:function(Be,be){M.push({message:Be,context:be})}});Q=Q||j.diagrams&&j.diagrams[0];var he=function(Be,be){if(!(!be||!be.plane)){var We,ce=be.plane.bpmnElement,Te=ce;K(ce,"bpmn:Process")||K(ce,"bpmn:Collaboration")||(Te=function(Se){for(var ft=Se;ft;){if(K(ft,"bpmn:Process"))return ft;ft=ft.$parent}}(ce)),We=K(Te,"bpmn:Collaboration")?Te:y(Be.rootElements,function(Se){if(K(Se,"bpmn:Collaboration"))return y(Se.participants,function(ft){return ft.processRef===Te})});var G=[Te];We&&(G=function(Se,ft){let lt=[];return x(Se,function(He,Yt){lt.push(ft(He,Yt))}),lt}(We.participants,function(Se){return Se.processRef})).push(We);var ie=V_(G),te=[be],Ie=[ce];return x(Be.diagrams,function(Se){if(Se.plane){var ft=Se.plane.bpmnElement;ie.indexOf(ft)!==-1&&Ie.indexOf(ft)===-1&&(te.push(Se),Ie.push(ft))}}),te}}(j,Q);if(!he)throw new Error("no diagram to display");x(he,function(Be){ne.handleDefinitions(j,Be)});var ke=Q.plane.bpmnElement.id;S.setRootElement(S.findRoot(ke+"_plane")||S.findRoot(ke))}return new Promise(function(j,Q){try{return m=c.get("bpmnImporter"),_=c.get("eventBus"),S=c.get("canvas"),_.fire("import.render.start",{definitions:p}),O(p,h),_.fire("import.render.complete",{error:void 0,warnings:M}),j({warnings:M})}catch(ne){return ne.warnings=M,Q(ne)}})}function V_(c){var p=[];return x(c,function(h){h&&(p.push(h),p=p.concat(V_(h.flowElements)))}),p}var ho,W_='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',U_={verticalAlign:"middle"},G_={color:"#404040"},$A={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},FA={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},zA={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},HA='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+W_+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function VA(){ho||(Rr(ho=Vi(HA),$A),Rr(Ai("svg",ho),U_),Rr(Ai(".backdrop",ho),FA),Rr(Ai(".notice",ho),zA),Rr(Ai(".link",ho),G_,{margin:"15px 20px 15px 10px",alignSelf:"center"}),nm.bind(ho,".backdrop","click",function(c){document.body.removeChild(ho)})),document.body.appendChild(ho)}function pn(c){c=L({},WA,c),this._moddle=this._createModdle(c),this._container=this._createContainer(c),function(p){const h=Vi('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+W_+"</a>");Rr(Ai("svg",h),U_),Rr(h,G_,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),p.appendChild(h),em.bind(h,"click",function(m){VA(),m.preventDefault()})}(this._container),this._init(this._container,this._moddle,c)}function bp(c,p){return c.warnings=p,c}n(pn,Wo),pn.prototype.importXML=async function(c,p){const h=this;let m=[];try{let S;c=this._emit("import.parse.start",{xml:c})||c;try{S=await this._moddle.fromXML(c,"bpmn:Definitions")}catch(he){throw this._emit("import.parse.complete",{error:he}),he}let M=S.rootElement;const O=S.references,j=S.warnings,Q=S.elementsById;m=m.concat(j),M=this._emit("import.parse.complete",(_={error:null,definitions:M,elementsById:Q,references:O,warnings:m},h.get("eventBus").createEvent(_)))||M;const ne=await this.importDefinitions(M,p);return m=m.concat(ne.warnings),this._emit("import.done",{error:null,warnings:m}),{warnings:m}}catch(S){let M=S;throw m=m.concat(M.warnings||[]),bp(M,m),M=function(O){const j=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(O.message);return j&&(O.message="unparsable content <"+j[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+j[2]),O}(M),this._emit("import.done",{error:M,warnings:M.warnings}),M}var _},pn.prototype.importDefinitions=async function(c,p){return this._setDefinitions(c),{warnings:(await this.open(p)).warnings}},pn.prototype.open=async function(c){const p=this._definitions;let h=c;if(!p){const _=new Error("no XML imported");throw bp(_,[]),_}if(typeof c=="string"&&(h=function(_,S){return S&&y(_.diagrams,function(M){return M.id===S})||null}(p,c),!h)){const _=new Error("BPMNDiagram <"+c+"> not found");throw bp(_,[]),_}try{this.clear()}catch(_){throw bp(_,[]),_}const{warnings:m}=await jA(this,p,h);return{warnings:m}},pn.prototype.saveXML=async function(c){c=c||{};let p,h,m=this._definitions;try{if(!m)throw new Error("no definitions loaded");m=this._emit("saveXML.start",{definitions:m})||m,h=(await this._moddle.toXML(m,c)).xml,h=this._emit("saveXML.serialized",{xml:h})||h}catch(S){p=S}const _=p?{error:p}:{xml:h};if(this._emit("saveXML.done",_),p)throw p;return _},pn.prototype.saveSVG=async function(){let c,p;this._emit("saveSVG.start");try{const h=this.get("canvas"),m=h.getActiveLayer(),_=Ai(":scope > defs",h._svg),S=Ee(m),M=_?"<defs>"+Ee(_)+"</defs>":"",O=m.getBBox();c=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+O.width+'" height="'+O.height+'" viewBox="'+O.x+" "+O.y+" "+O.width+" "+O.height+'" version="1.1">'+M+S+"</svg>"}catch(h){p=h}if(this._emit("saveSVG.done",{error:p,svg:c}),p)throw p;return{svg:c}},pn.prototype._setDefinitions=function(c){this._definitions=c},pn.prototype.getModules=function(){return this._modules},pn.prototype.clear=function(){this.getDefinitions()&&Wo.prototype.clear.call(this)},pn.prototype.destroy=function(){Wo.prototype.destroy.call(this),sp(this._container)},pn.prototype.on=function(c,p,h,m){return this.get("eventBus").on(c,p,h,m)},pn.prototype.off=function(c,p){this.get("eventBus").off(c,p)},pn.prototype.attachTo=function(c){if(!c)throw new Error("parentNode required");this.detach(),c.get&&c.constructor.prototype.jquery&&(c=c.get(0)),typeof c=="string"&&(c=Ai(c)),c.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},pn.prototype.getDefinitions=function(){return this._definitions},pn.prototype.detach=function(){const c=this._container,p=c.parentNode;p&&(this._emit("detach",{}),p.removeChild(c))},pn.prototype._init=function(c,p,h){const m=h.modules||this.getModules(h),_=h.additionalModules||[],S=[].concat([{bpmnjs:["value",this],moddle:["value",p]}],m,_),M=L(function(O,j){let Q={};return x(Object(O),function(ne,he){j.indexOf(he)===-1&&(Q[he]=ne)}),Q}(h,["additionalModules"]),{canvas:L({},h.canvas,{container:c}),modules:S});Wo.call(this,M),h&&h.container&&this.attachTo(h.container)},pn.prototype._emit=function(c,p){return this.get("eventBus").fire(c,p)},pn.prototype._createContainer=function(c){const p=Vi('<div class="bjs-container"></div>');return Rr(p,{width:K_(c.width),height:K_(c.height),position:c.position}),p},pn.prototype._createModdle=function(c){return new LA(L({},this._moddleExtensions,c.moddleExtensions))},pn.prototype._modules=[];const WA={width:"100%",height:"100%",position:"relative"};function K_(c){return c+(u(c)?"px":"")}function Sp(c){pn.call(this,c)}return n(Sp,pn),Sp.prototype._modules=[HT,QT,eA,Zx,iA,Ux],Sp.prototype._moddleExtensions={},Sp})})(vT);var u7=vT.exports;const xT=lS(u7),_T=({logs:e,headerActions:t,onUpdateLog:n,piStatusNode:r})=>{const i=Me.useRef(null);return Me.useEffect(()=>{i.current&&(i.current.scrollLeft=i.current.scrollWidth)},[e]),z.jsxs("div",{className:"h-full w-full bg-[#1e1e1e] border-b border-white/10 flex flex-col",children:[z.jsxs("div",{className:"px-6 py-2 border-b border-white/5 flex justify-between items-center bg-[#252525]",children:[z.jsxs("div",{className:"flex items-center gap-4",children:[z.jsx("h3",{className:"text-sm font-medium text-white/70 uppercase tracking-wider mr-4",children:" Timeline"}),z.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[z.jsxs("div",{className:"flex items-center gap-1.5",children:[z.jsx("div",{className:"w-2 h-2 rounded-full bg-[#8ab4f8]"}),z.jsx("span",{className:"text-white/60",children:""})]}),z.jsxs("div",{className:"flex items-center gap-1.5",children:[z.jsx("div",{className:"w-2 h-2 rounded-full bg-[#81c995]"}),z.jsx("span",{className:"text-white/60",children:""})]})]})]}),z.jsxs("div",{className:"flex items-center gap-4",children:[r,z.jsxs("span",{className:"text-xs text-white/30",children:[e.length," "]}),t]})]}),z.jsxs("div",{ref:i,className:"flex-1 overflow-x-auto overflow-y-hidden flex items-start px-6 gap-8 scrollbar-thin pt-3 pb-8",onWheel:o=>{i.current&&(i.current.scrollLeft+=o.deltaY)},children:[e.length===0&&z.jsx("div",{className:"text-white/20 text-sm italic w-full text-center",children:"..."}),e.map((o,a)=>z.jsxs("div",{className:"relative flex flex-col items-center min-w-[120px] group",children:[a<e.length-1&&z.jsx("div",{className:"absolute top-[18px] left-[50%] w-[calc(100%+32px)] h-[2px] bg-white/10 -z-0"}),z.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold z-10 mb-1 shadow-lg transition-transform group-hover:scale-110 ${o.message.includes("")?"bg-[#81c995] text-[#0f5132]":"bg-[#8ab4f8] text-[#002d6f]"}`,children:a+1}),z.jsx("div",{className:"text-xs text-white/50 mt-0.5",children:EM(o.time)}),z.jsx("div",{className:"text-sm font-medium text-white/90 mt-0.5 text-center px-2",children:o.message.split(": ")[1]||o.message}),z.jsxs("div",{className:"flex gap-2 mt-1.5",children:[o.note&&z.jsx("div",{className:"text-xs text-[#fbbc04] font-bold cursor-pointer animate-pulse hover:scale-110 transition border border-[#fbbc04]/30 px-2 py-0.5 rounded bg-[#fbbc04]/10",title:o.note,onClick:()=>{if(n){const s=prompt(":",o.note);s!==null&&n(a,s)}},children:""}),o.value&&o.value!=="-"&&o.value!=='"-"'&&z.jsx("div",{className:"text-xs text-[#81c995] font-bold cursor-help hover:scale-110 transition border border-[#81c995]/30 px-2 py-0.5 rounded bg-[#81c995]/10",title:o.value,children:""})]})]},a))]})]})},p7=({task:e,onStart:t,onEnd:n,onFinish:r,onClose:i,note:o,setNote:a,tagValues:s,loadingTag:l})=>{if(!e)return null;const u=e.status==="running",f=e.status==="completed",d=e.type==="bpmn:EndEvent";return z.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:i,children:z.jsxs("div",{className:"bg-[#1e1e1e] border border-white/10 rounded-2xl shadow-2xl w-[400px] overflow-hidden animate-scale-in",onClick:g=>g.stopPropagation(),children:[z.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex justify-between items-center bg-[#252525]",children:[z.jsx("h3",{className:"text-lg font-bold text-white/90",children:e.name}),z.jsx("button",{onClick:i,className:"text-white/40 hover:text-white transition",children:""})]}),z.jsxs("div",{className:"p-6",children:[e.tag&&z.jsxs("div",{className:"mb-6 bg-[#121212] rounded-xl p-4 border border-white/5",children:[z.jsx("div",{className:"text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (PI Tag)"}),l?z.jsx("div",{className:"text-white/40 text-sm animate-pulse",children:"..."}):z.jsxs("div",{className:"grid gap-2",children:[s.map((g,y)=>z.jsxs("div",{className:"flex justify-between items-end",children:[z.jsx("span",{className:"text-white/60 text-sm",children:g.tag}),z.jsxs("span",{className:"text-[#81c995] font-mono font-bold",children:[g.value!==void 0?Number(g.value).toFixed(e.precision):"-"," ",z.jsx("span",{className:"text-sm text-white/40",children:e.unit})]})]},y)),s.length===0&&z.jsx("div",{className:"text-white/30 text-sm",children:""})]})]}),z.jsxs("div",{className:"mb-6",children:[z.jsx("label",{className:"block text-xs font-medium text-white/60 mb-2 uppercase tracking-wider",children:" / "}),z.jsx("textarea",{value:o,onChange:g=>a(g.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 rounded-xl p-3 text-white focus:border-[#8ab4f8] outline-none h-24 text-sm resize-none",placeholder:"...",disabled:f})]}),z.jsx("div",{className:"flex gap-3",children:d?z.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl font-medium bg-[#f28b82] hover:bg-[#f6aea9] text-[#5c1e1e] transition shadow-lg shadow-red-500/20",children:""}):z.jsxs(z.Fragment,{children:[!u&&!f&&z.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl font-medium bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] transition shadow-lg shadow-blue-500/20",children:""}),u&&z.jsx("button",{onClick:n,className:"w-full py-3 rounded-xl font-medium bg-[#81c995] hover:bg-[#a8dab5] text-[#0f5132] transition shadow-lg shadow-green-500/20",children:""}),f&&z.jsx("div",{className:"w-full py-3 rounded-xl font-medium bg-[#2d2d2d] text-white/40 text-center border border-white/5 cursor-not-allowed",children:""})]})})]})]})})},f7=({processId:e,onNavigate:t})=>{const n=Me.useRef(null),r=Me.useRef(null),[i,o]=Me.useState(null),[a,s]=Me.useState([]),[l,u]=Me.useState(null),[f,d]=Me.useState(!1),[g,y]=Me.useState(!1),[v,x]=Me.useState(null),[C,P]=Me.useState(""),[k,w]=Me.useState([]),[b,D]=Me.useState(!1),[I,H]=Me.useState(!1),[L,X]=Me.useState("Checking..."),[Y,K]=Me.useState(1),[se,ae]=Me.useState(!1),Re=Me.useMemo(()=>"user_"+Math.random().toString(36).substr(2,9),[]),wt=B=>{if(r.current){const E=r.current.get("canvas");E.zoom(E.zoom()+B)}},Ge=Me.useRef(a),Ke=Me.useRef(l);Me.useEffect(()=>{Ge.current=a},[a]),Me.useEffect(()=>{Ke.current=l},[l]),Me.useEffect(()=>{fetch(`${Wt}/pi_status`).then(B=>B.json()).then(B=>X(B.status))},[]);const ye=(B,E)=>!B||!B.incoming||B.incoming.length===0?!0:B.incoming.every(R=>{if(R.source.type==="bpmn:StartEvent")return!0;const $=R.source.businessObject.name;return E.some(V=>V.message.startsWith("")&&V.message.includes($))});Me.useEffect(()=>{const B=()=>{const R=r.current;if(!R)return;const $=R.get("elementRegistry"),V=R.get("canvas");$.forEach(J=>{if(J.type==="bpmn:TextAnnotation"||J.type==="bpmn:Group"){const pe=J.businessObject;let le={};if(pe.documentation&&pe.documentation.length>0)try{le=JSON.parse(pe.documentation[0].text)}catch{}if(J.type==="bpmn:Group"&&(le.noteColor||(le.noteColor="#fff9c4"),le.borderColor||(le.borderColor="#d6b656")),le.noteColor||le.htmlContent||le.textFontSize||le.textColor||le.borderColor)try{const vt=V.getGraphics(J);if(!vt)return;const Ot=vt.querySelector(".sticky-bg");Ot&&Ot.remove();const Dt=vt.querySelector(".sticky-fo");Dt&&Dt.remove(),["text","path","rect"].forEach(we=>{const $e=vt.querySelector(we);$e&&($e.style.display="none")});let Et=J.width||J.di&&J.di.bounds&&J.di.bounds.width||300,rt=J.height||J.di&&J.di.bounds&&J.di.bounds.height||300;const Qe=document.createElementNS("http://www.w3.org/2000/svg","rect");Qe.setAttribute("class","sticky-bg"),Qe.setAttribute("width",Et),Qe.setAttribute("height",rt),Qe.setAttribute("rx","10"),Qe.setAttribute("ry","10"),Qe.setAttribute("fill",le.noteColor||"#fff9c4"),Qe.setAttribute("stroke",le.borderColor||"#d6b656"),Qe.setAttribute("stroke-width","2"),Qe.setAttribute("fill-opacity",le.noteOpacity!==void 0?le.noteOpacity:1);const Z=vt.querySelector(".djs-visual");if(Z&&(Z.firstChild?Z.insertBefore(Qe,Z.firstChild):Z.appendChild(Qe)),le.htmlContent){const we=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");we.setAttribute("class","sticky-fo"),we.setAttribute("width",Et-20),we.setAttribute("height",rt-20),we.setAttribute("x","10"),we.setAttribute("y","10");const $e=document.createElement("div");$e.xmlns="http://www.w3.org/1999/xhtml",$e.style.width="100%",$e.style.height="100%",$e.style.overflow="auto",$e.style.fontSize=`${le.textFontSize||14}px`,$e.style.color=le.textColor||"#000000",$e.innerHTML=le.htmlContent,we.appendChild($e),Z&&Z.appendChild(we)}}catch(vt){console.error(vt)}}})};return(async()=>{if(!e)return;const $=await(await fetch(`${Wt}/processes/${e}`)).json();o($);const J=await(await fetch(`${Wt}/sessions/${e}`)).json();let pe=[];J&&!J.is_finished?(pe=J.logs||[],s(pe),u(J.current_task_id),d(J.is_finished)):(await fetch(`${Wt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:[],is_finished:!1})}),s([]),u(null),d(!1)),r.current&&r.current.destroy();const le=new xT({container:n.current});r.current=le,le._customState={runningTaskId:l,logs:pe};try{await le.importXML($.xml_content),le.get("canvas").zoom("fit-viewport")}catch(we){console.error("BPMN Import Error:",we)}const de=le.get("eventBus"),vt=le.get("elementRegistry"),Ot=le.get("canvas"),Dt=n.current,Et=we=>{if(we.ctrlKey){we.preventDefault(),we.stopPropagation();const Ee=Ot.zoom()-we.deltaY*.001;Ot.zoom(Ee,{x:we.clientX-Dt.getBoundingClientRect().left,y:we.clientY-Dt.getBoundingClientRect().top})}else we.preventDefault(),we.stopPropagation(),Ot.scroll({dx:-we.deltaY,dy:0})};if(Dt){Dt.addEventListener("wheel",Et,{passive:!1});let we=!1,$e,Ee;const ge=Le=>{Le.button===0&&(we=!0,$e=Le.clientX,Ee=Le.clientY,Dt.style.cursor="grabbing")},_t=Le=>{if(we){const Xe=Le.clientX-$e,Ht=Le.clientY-Ee;Ot.scroll({dx:Xe,dy:Ht}),$e=Le.clientX,Ee=Le.clientY}},pt=()=>{we=!1,Dt.style.cursor="default"};Dt.addEventListener("mousedown",ge),window.addEventListener("mousemove",_t),window.addEventListener("mouseup",pt),le.on("destroy",()=>{Dt.removeEventListener("wheel",Et),Dt.removeEventListener("mousedown",ge),window.removeEventListener("mousemove",_t),window.removeEventListener("mouseup",pt)})}if(["shape.move.start","connection.create.start","element.dblclick","contextPad.open","palette.create","shape.resize.start","connection.segment.move.start","bendlpoints.move.start","connection.layout.start","connection.layout.start"].forEach(we=>{de.on(we,1e4,$e=>{if(we!=="element.mousedown")return!1})}),de.on("element.click",we=>{if(le._customState&&le._customState.isFinished)return;const $e=we.element;if($e.type==="bpmn:DataObjectReference"||$e.type==="bpmn:DataStoreReference"){const ge=$e.businessObject.documentation;if(ge&&ge.length>0&&ge[0].text)try{const _t=JSON.parse(ge[0].text);if(_t.targetUrl){window.open(_t.targetUrl,"_blank");return}}catch{}}if(["bpmn:Task","bpmn:UserTask","bpmn:ServiceTask","bpmn:SendTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:CallActivity","bpmn:StartEvent","bpmn:EndEvent"].includes($e.type)){const ge=le._customState.logs||[];le._customState.runningTaskId,je($e,ge)}}),J&&J.current_task_id)try{vt.get(J.current_task_id)&&Ot.addMarker(J.current_task_id,"highlight")}catch(we){console.error("Error highlighting task:",we)}if(pe.length>0){const we=pe.filter($e=>$e.message.startsWith("")).map($e=>$e.message.split(": ")[1]);vt.forEach($e=>{we.includes($e.businessObject.name)&&Ot.addMarker($e.id,"completed-task")})}setTimeout(B,100),setTimeout(B,500);const Qe=[];vt.forEach(we=>{const $e=we.businessObject;if($e.documentation&&$e.documentation.length>0)try{const Ee=JSON.parse($e.documentation[0].text);Ee.alwaysOn&&Ee.piTag&&Qe.push({id:we.id,name:$e.name||"",tag:Ee.piTag,unit:Ee.piUnit||"",precision:Ee.piPrecision||2})}catch{}});const Z=le.get("overlays");if(Qe.length>0){const we=async()=>{for(const ge of Qe){if(!Z)return;let _t=Z.get({element:ge.id}).find(Le=>Le.html&&Le.html.querySelector(`#content-${ge.id}`)),pt=[];try{le._hasConnectedPI||H(!0),pt=await(await fetch(`${Wt}/get_tag_value?tag=${encodeURIComponent(ge.tag)}`)).json(),le._hasConnectedPI=!0}catch(Le){console.error(Le)}finally{H(!1)}if(_t){const Le=_t.html.querySelector(`#content-${ge.id}`);Le&&$e(Le,pt,ge)}else{const Le=document.createElement("div");Le.className="bg-[#1e1e1e] border border-white/20 rounded shadow-lg text-xs min-w-[150px] flex flex-col resize-x overflow-auto",Le.style.pointerEvents="auto",Le.style.position="absolute";const Xe=document.createElement("div");Xe.className="bg-[#2d2d2d] px-2 py-1 flex justify-between items-center cursor-move select-none border-b border-white/10",Xe.innerHTML=`
                               <span class="text-white/60 font-medium truncate flex-1 min-w-0 mr-2" title="${ge.name}">${ge.name}</span>
                               <button class="text-white/40 hover:text-white transition focus:outline-none">
                                   <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                   </svg>
                               </button>
                           `;const Ht=document.createElement("div");Ht.id=`content-${ge.id}`,Ht.className="p-2",Le.appendChild(Xe),Le.appendChild(Ht),Z.add(ge.id,{type:"always-on-pi",position:{bottom:0,right:-10},html:Le});const Gt=Xe.querySelector("button");let Fn=!1;Gt.onclick=Cr=>{Cr.stopPropagation(),Fn=!Fn,Ht.style.display=Fn?"none":"block",Gt.innerHTML=Fn?'<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>':'<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>'};let si=!1,Hr,Ti,Vr,_n;Xe.onmousedown=Cr=>{Cr.stopPropagation(),si=!0,Hr=Cr.clientX,Ti=Cr.clientY;const lo=window.getComputedStyle(Le);let Kn=0,Yn=0;if(window.WebKitCSSMatrix){const rp=new WebKitCSSMatrix(lo.transform);Kn=rp.m41,Yn=rp.m42}Vr=Kn,_n=Yn,document.onmousemove=Ve,document.onmouseup=Ce};const Ve=Cr=>{if(!si)return;const lo=Cr.clientX-Hr,Kn=Cr.clientY-Ti;Le.style.transform=`translate(${Vr+lo}px, ${_n+Kn}px)`},Ce=()=>{si=!1,document.onmousemove=null,document.onmouseup=null};$e(Ht,pt,ge)}}},$e=(ge,_t,pt)=>{if(ge.innerHTML="",_t.forEach(Le=>{const Xe=document.createElement("div");Xe.className="flex justify-between gap-4 mb-1 last:mb-0";const Ht=document.createElement("span");Ht.className="text-white/60 flex-1 min-w-0 break-all",Ht.innerText=Le.tag;const Gt=document.createElement("span");Gt.className="text-[#81c995] font-mono font-bold";const Fn=parseFloat(Le.value);Gt.innerText=isNaN(Fn)?Le.value:Fn.toFixed(pt.precision),Xe.appendChild(Ht),Xe.appendChild(Gt),ge.appendChild(Xe)}),pt.unit){const Le=document.createElement("div");Le.className="text-right text-white/40 text-[10px] mt-1",Le.innerText=pt.unit,ge.appendChild(Le)}},Ee=setInterval(we,5e3);le._customInterval=Ee,we()}})(),()=>{r.current&&(r.current._customInterval&&clearInterval(r.current._customInterval),r.current.destroy())}},[e]),Me.useEffect(()=>{if(!r.current)return;r.current._customState={runningTaskId:l,logs:a,isFinished:f};const B=r.current.get("canvas"),E=r.current.get("elementRegistry");E.forEach(V=>{B.removeMarker(V.id,"highlight"),B.removeMarker(V.id,"completed-task")});const R={},$={};a.forEach(V=>{let J=null,pe=null;V.message.startsWith(":")?(J="running",pe=V.message.substring(5).trim()):V.message.startsWith(":")&&(J="completed",pe=V.message.substring(5).trim()),J&&(V.taskId&&($[V.taskId]=J),pe&&(R[pe]=J))}),E.forEach(V=>{const J=V.id,pe=V.businessObject.name;let le=null;$[J]?le=$[J]:pe&&R[pe]&&(le=R[pe]),le&&(le==="completed"?B.addMarker(J,"completed-task"):le==="running"&&B.addMarker(J,"highlight"))})},[a,f,l]),Me.useEffect(()=>{if(!e)return;const E=setInterval(async()=>{try{const R=await fetch(`${Wt}/sessions/${e}`);if(R.ok){const $=await R.json();$&&(JSON.stringify($.logs)!==JSON.stringify(a)&&s($.logs),$.is_finished!==f&&d($.is_finished),$.current_task_id!==l&&u($.current_task_id))}}catch(R){console.error("Sync error:",R)}},3e3);return()=>clearInterval(E)},[e,a,f,l]);const je=(B,E,R)=>{const $=B.businessObject,V=$.documentation;let J="",pe="",le=2;if(V&&V.length>0&&V[0].text)try{const rt=JSON.parse(V[0].text);J=rt.piTag,pe=rt.piUnit,le=parseInt(rt.piPrecision)||2}catch{}let de="idle";const vt=$.name||"",Ot=`: ${vt}`,Dt=`: ${vt}`;if(B.type==="bpmn:StartEvent")E.some(rt=>rt.message===Ot)&&(de="completed");else{const rt=E.some(Z=>Z.message===Ot);E.some(Z=>Z.message===Dt)?de="completed":rt&&(de="running")}const Et=ye(B,E);x({id:B.id,name:$.name||"",type:B.type,tag:J,unit:pe,precision:le,status:de,canStart:Et}),P(""),w([]),y(!0),J&&(D(!0),fetch(`${Wt}/get_tag_value?tag=${encodeURIComponent(J)}`).then(rt=>rt.json()).then(rt=>{w(rt),D(!1)}))},Ne=B=>{if(!B||B.length===0)return;let E="";i&&i.id&&i.updated_at&&(E+=`# Metadata: id=${i.id}, version=${i.updated_at}
`),E+=`Time,Source,Message,Value,Note
`,B.forEach(le=>{const de=[le.time,le.source,le.message,`"${le.value}"`,`"${le.note}"`].join(",");E+=de+`
`});const R=new Date,$=R.getFullYear()+String(R.getMonth()+1).padStart(2,"0")+String(R.getDate()).padStart(2,"0")+String(R.getHours()).padStart(2,"0")+String(R.getMinutes()).padStart(2,"0"),V=new Blob(["\uFEFF"+E],{type:"text/csv;charset=utf-8;"}),J=URL.createObjectURL(V),pe=document.createElement("a");pe.setAttribute("href",J),pe.setAttribute("download",`${i.name}_${$}.csv`),document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(J)},qe=async(B,E)=>{const R=[...a];R[B]&&(R[B].note=E,s(R),r.current&&(r.current._customState={runningTaskId:l,logs:R}),await fetch(`${Wt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:l,logs:R,is_finished:f})}))},re=async()=>{if(!v)return;let B="-";if(v.tag)try{B=(await(await fetch(`${Wt}/get_tag_value?tag=${encodeURIComponent(v.tag)}`)).json()).map(J=>{const pe=parseFloat(J.value),le=isNaN(pe)?J.value:pe.toFixed(v.precision||2);return`${J.tag}=${le} ${v.unit||""}`}).join(", ")}catch($){console.error($)}if(v.type==="bpmn:StartEvent"){const $={time:Hp(),source:"User",message:`: ${v.name}`,value:B,note:C},V=[...a,$];s(V),u(null),x(pe=>({...pe,status:"completed"})),r.current&&(r.current._customState={runningTaskId:null,logs:V}),r.current.get("canvas").addMarker(v.id,"completed-task"),await fetch(`${Wt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:V,is_finished:!1})}),y(!1);return}const E={time:Hp(),source:"User",message:`: ${v.name}`,value:B,note:C,taskId:v.id},R=[...a,E];s(R),u(v.id),x($=>({...$,status:"running"})),r.current&&(r.current._customState={runningTaskId:v.id,logs:R}),await fetch(`${Wt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:v.id,logs:R,is_finished:!1})}),y(!1)},oe=async()=>{if(!v)return;const B=k.map($=>{const V=parseFloat($.value),J=isNaN(V)?$.value:V.toFixed(v.precision||2);return`${$.tag}=${J} ${v.unit||""}`}).join(", ")||"-",E={time:Hp(),source:"User",message:`: ${v.name}`,value:B,note:C,taskId:v.id},R=[...a,E];s(R),u(null),x($=>({...$,status:"completed"})),r.current&&(r.current._customState={runningTaskId:null,logs:R}),await fetch(`${Wt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:R,is_finished:!1})}),y(!1)},_e=async()=>{if(!confirm(""))return;const B={time:Hp(),source:"System",message:"",value:"-",note:""},E=[...a,B];s(E),d(!0),await fetch(`${Wt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:E,is_finished:!0})}),alert(""),y(!1),Ne(E)};Me.useEffect(()=>{if(!e)return;const B=async()=>{try{const R=await fetch(`${Wt}/heartbeat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,user_id:Re})});if(R.ok){const $=await R.json();K($.online_count)}}catch(R){console.error("Heartbeat error:",R)}};B();const E=setInterval(B,5e3);return()=>clearInterval(E)},[e,Re]);const ut=z.jsxs("div",{className:"flex items-center gap-2",children:[z.jsx("button",{onClick:()=>Ne(a),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition",title:" CSV",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})})}),!f&&z.jsx("button",{onClick:_e,className:"bg-[#f28b82] hover:bg-[#f6aea9] text-[#601410] px-4 py-1.5 rounded-full text-xs font-bold transition",children:""}),z.jsx("button",{onClick:()=>t("dashboard"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition",title:"",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})})}),z.jsx("button",{onClick:()=>ae(!se),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition ml-2",title:se?"":"",children:se?z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}):z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})})]});return z.jsxs("div",{className:"flex flex-col h-full bg-[#1e1e1e]",children:[z.jsx("div",{className:`${se?"h-[54px] min-h-[54px]":"h-1/5 min-h-[220px]"} border-b border-white/10 relative z-10 shrink-0 transition-all duration-300 ease-in-out overflow-hidden`,children:z.jsx(_T,{logs:a,headerActions:ut,piStatusNode:z.jsxs("div",{onClick:()=>t("settings"),className:"flex items-center gap-2 bg-[#1e1e1e] px-3 py-1.5 rounded-full border border-white/5 cursor-pointer hover:bg-white/5 transition mr-4",children:[z.jsx("div",{className:`w-2 h-2 rounded-full ${L==="Connected"?"bg-[#81c995] animate-pulse":L==="Not Configured"?"bg-gray-400":"bg-[#f28b82]"}`}),z.jsx("span",{className:"text-xs text-white/70 whitespace-nowrap",children:L==="Connected"?"PI ":L==="Not Configured"?"PI ":"PI "})]}),onUpdateLog:qe})}),z.jsxs("div",{className:"flex-1 relative bg-white border-t-4 border-[#1e1e1e] min-h-0",children:[z.jsx("div",{ref:n,className:"w-full h-full operator-mode"}),!i&&z.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex flex-col items-center justify-center",children:z.jsx("div",{className:"text-white/40",children:"Loading..."})}),z.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-10",children:[z.jsx("button",{onClick:()=>wt(.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"+"}),z.jsx("button",{onClick:()=>wt(-.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"-"}),z.jsx("button",{onClick:()=>{r.current&&r.current.get("canvas").zoom("fit-viewport")},className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs",children:"Fit"})]}),g&&v&&z.jsx(p7,{task:v,onClose:()=>y(!1),onStart:re,onEnd:oe,note:C,setNote:P,tagValues:k,loadingTag:b})]})]})},d7=({processId:e,onNavigate:t})=>{const n=Me.useRef(null),[r,i]=Me.useState([]),o=Me.useRef(null),[a,s]=Me.useState(""),[l,u]=Me.useState(!1),[f,d]=Me.useState(null),g=Me.useCallback(()=>{if(!o.current)return;const C=o.current;C.get("canvas");const P=C.get("elementRegistry");P.filter(w=>w.type!=="bpmn:Process").forEach(w=>{const b=P.getGraphics(w),I=w.businessObject.documentation;if(w.type==="bpmn:Group"||w.type==="bpmn:TextAnnotation")try{let H={};if(I&&I.length>0&&I[0].text?H=JSON.parse(I[0].text):w.type==="bpmn:Group"&&(H={noteColor:"#fff2cc",borderColor:"#d6b656"}),H.noteColor||H.htmlContent||H.textFontSize||H.textColor){const L=b.querySelector(".djs-visual path");L&&(L.style.display="none");const X=b.querySelector(".djs-visual rect");X&&(X.style.display="none");let Y=b.querySelector(".sticky-bg");Y&&Y.remove();let K=b.querySelector(".sticky-fo");K&&K.remove();const se=w.width,ae=w.height,Re=document.createElementNS("http://www.w3.org/2000/svg","rect");Re.classList.add("sticky-bg"),Re.setAttribute("width",se),Re.setAttribute("height",ae),Re.setAttribute("fill",H.noteColor||"transparent"),Re.setAttribute("stroke",H.borderColor||"transparent"),Re.setAttribute("fill-opacity",H.noteOpacity!==void 0?H.noteOpacity:1),b.prepend(Re);const wt=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");wt.classList.add("sticky-fo"),wt.setAttribute("width",se),wt.setAttribute("height",ae);const Ge=document.createElement("div");Ge.style.width="100%",Ge.style.height="100%",Ge.style.padding="10px",Ge.style.boxSizing="border-box",Ge.style.overflow="hidden",Ge.style.fontSize=`${H.textFontSize||12}px`,Ge.style.fontWeight=H.textBold?"bold":"normal",Ge.style.color=H.textColor||"#000000",Ge.style.fontFamily="Arial, sans-serif",Ge.style.whiteSpace="pre-wrap",Ge.style.wordBreak="break-word",Ge.innerHTML=H.htmlContent||(I&&I[0]&&I[0].text?JSON.parse(I[0].text).text:"")||"",wt.appendChild(Ge),b.appendChild(wt)}if(H.nameFontSize){const L=b.querySelector(".djs-label");L&&(L.style.fontSize=`${H.nameFontSize}px`)}}catch{}})},[]);Me.useEffect(()=>{if(!e)return;o.current&&o.current.destroy();const C=new xT({container:n.current});return o.current=C,(async()=>{try{const w=await(await fetch(`${Wt}/processes/${e}`)).json();s(w.name),d(w),await C.importXML(w.xml_content),C.get("canvas").zoom("fit-viewport");const b=C.get("eventBus");["shape.move.start","connection.create.start","shape.resize.start","element.dblclick","contextPad.open","palette.create","autoPlace.start"].forEach(I=>b.on(I,1e4,()=>!1)),setTimeout(g,500)}catch(k){console.error(k)}})(),()=>{o.current&&o.current.destroy()}},[e,g]),Me.useEffect(()=>{if(!o.current||r.length===0)return;const C=o.current,P=C.get("canvas"),k=C.get("elementRegistry"),w={};r.forEach(b=>{if(b.message.includes(":")){const D=b.message.split(": ")[1].trim();w[D]||(w[D]="running")}else if(b.message.includes(":")){const D=b.message.split(": ")[1].trim();w[D]="completed"}}),k.forEach(b=>{const D=b.businessObject.name;if(D&&w[D]){const I=w[D];if(I==="completed"){P.addMarker(b.id,"completed-task");const L=k.getGraphics(b).querySelector(".djs-visual rect, .djs-visual circle, .djs-visual polygon");L&&(L.style.fill="#f0f0f0",L.style.stroke="#999")}else I==="running"&&P.addMarker(b.id,"highlight")}})},[r]);const y=C=>{const P=[];let k=0,w=!1;for(let D=0;D<C.length;D++)if(C[D]==='"')w=!w;else if(C[D]===","&&!w){let I=C.substring(k,D).trim();I.startsWith('"')&&I.endsWith('"')&&(I=I.substring(1,I.length-1)),P.push(I),k=D+1}let b=C.substring(k).trim();return b.startsWith('"')&&b.endsWith('"')&&(b=b.substring(1,b.length-1)),P.push(b),P},v=C=>{const P=C.target.files[0];if(!P)return;const k=new FileReader;k.onload=w=>{const D=w.target.result.split(`
`);let I=1;if(D[0].startsWith("# Metadata:")){I=2;const L=D[0].substring(11).split(",");let X=null,Y=null;L.forEach(K=>{const[se,ae]=K.split("=").map(Re=>Re.trim());se==="id"&&(X=parseInt(ae)),se==="version"&&(Y=ae)}),f&&(X!==f.id?alert(` (ID: ${X}) (ID: ${f.id}) `):Y!==f.updated_at&&alert(` (${Y})  (${f.updated_at}) `))}const H=D.slice(I).map(L=>{if(!L.trim())return null;const X=y(L);return X.length<4?null:{time:X[0],source:X[1],message:X[2],value:X[3],note:X[4]||""}}).filter(L=>L&&L.time);i(H),u(!0)},k.readAsText(P)},x=z.jsx("div",{className:"flex gap-2 items-center",children:z.jsx("button",{onClick:()=>t("dashboard"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-4 py-1 rounded-full text-sm font-medium transition",children:""})});return z.jsxs("div",{className:"flex flex-col h-full relative",children:[z.jsx("div",{className:"h-1/4 min-h-[180px] flex flex-col bg-[#1e1e1e]",children:z.jsx(_T,{logs:r,headerActions:x})}),z.jsxs("div",{className:"flex-1 relative bg-white border-t-4 border-[#1e1e1e]",children:[z.jsx("div",{ref:n,className:"w-full h-full operator-mode"}),!l&&z.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex flex-col items-center justify-center",children:z.jsxs("div",{className:"bg-[#1e1e1e] p-8 rounded-2xl border border-white/10 text-center max-w-md",children:[z.jsx("div",{className:"text-4xl mb-4",children:""}),z.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:""}),z.jsx("p",{className:"text-white/60 mb-6 text-sm",children:" CSV "}),z.jsxs("label",{className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-bold cursor-pointer transition inline-flex items-center gap-2",children:[z.jsx("span",{children:""}),z.jsx("input",{type:"file",accept:".csv",onChange:v,className:"hidden"})]})]})}),z.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-10",children:[z.jsx("button",{onClick:()=>o.current.get("canvas").zoom(o.current.get("canvas").zoom()+.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"+"}),z.jsx("button",{onClick:()=>o.current.get("canvas").zoom(o.current.get("canvas").zoom()-.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"-"}),z.jsx("button",{onClick:()=>o.current.get("canvas").zoom("fit-viewport"),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs",children:"Fit"})]})]})]})},h7=({onNavigate:e})=>{const[t,n]=Me.useState(""),[r,i]=Me.useState(!1);Me.useEffect(()=>{fetch(`${Wt}/settings`).then(a=>a.json()).then(a=>n(a.pi_server_ip))},[]);const o=async()=>{i(!0),await fetch(`${Wt}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pi_server_ip:t})}),i(!1),alert(""),e("dashboard")};return z.jsx("div",{className:"flex h-full flex-col bg-[#121212] items-center justify-center",children:z.jsxs("div",{className:"bg-[#1e1e1e] p-8 rounded-2xl border border-white/5 w-full max-w-md shadow-xl",children:[z.jsx("h2",{className:"text-2xl font-medium text-white/90 mb-6",children:""}),z.jsxs("div",{className:"mb-6",children:[z.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:"PI Server IP Address"}),z.jsx("input",{value:t,onChange:a=>n(a.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-4 py-3 text-white outline-none transition",placeholder:": 10.122.51.60"}),z.jsx("p",{className:"text-white/40 text-xs mt-2",children:" Ping  IP "})]}),z.jsxs("div",{className:"flex gap-3",children:[z.jsx("button",{onClick:()=>e("dashboard"),className:"flex-1 bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-3 rounded-full font-medium transition",children:""}),z.jsx("button",{onClick:o,disabled:r,className:"flex-1 bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] py-3 rounded-full font-medium transition",children:r?"...":""})]})]})})},m7=()=>{const[e,t]=Me.useState("dashboard"),[n,r]=Me.useState(null),i=(o,a=null)=>{r(a),t(o)};return z.jsxs("div",{className:"h-full",children:[e==="dashboard"&&z.jsx(SM,{onNavigate:i}),e==="editor"&&z.jsx(c7,{processId:n,onNavigate:i}),e==="operator"&&z.jsx(f7,{processId:n,onNavigate:i}),e==="review"&&z.jsx(d7,{processId:n,onNavigate:i}),e==="settings"&&z.jsx(h7,{onNavigate:i})]})};vg.createRoot(document.getElementById("root")).render(z.jsx(c5.StrictMode,{children:z.jsx(m7,{})}));
//# sourceMappingURL=index-ZWhQ2W0t.js.map
