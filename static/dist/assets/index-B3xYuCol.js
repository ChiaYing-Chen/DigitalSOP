(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var KA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lS={exports:{}},Nd={},cS={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),YA=Symbol.for("react.portal"),qA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),QA=Symbol.for("react.profiler"),ZA=Symbol.for("react.provider"),JA=Symbol.for("react.context"),e3=Symbol.for("react.forward_ref"),t3=Symbol.for("react.suspense"),n3=Symbol.for("react.memo"),r3=Symbol.for("react.lazy"),Y_=Symbol.iterator;function i3(e){return e===null||typeof e!="object"?null:(e=Y_&&e[Y_]||e["@@iterator"],typeof e=="function"?e:null)}var uS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pS=Object.assign,fS={};function Ll(e,t,n){this.props=e,this.context=t,this.refs=fS,this.updater=n||uS}Ll.prototype.isReactComponent={};Ll.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ll.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dS(){}dS.prototype=Ll.prototype;function Ky(e,t,n){this.props=e,this.context=t,this.refs=fS,this.updater=n||uS}var Yy=Ky.prototype=new dS;Yy.constructor=Ky;pS(Yy,Ll.prototype);Yy.isPureReactComponent=!0;var q_=Array.isArray,hS=Object.prototype.hasOwnProperty,qy={current:null},mS={key:!0,ref:!0,__self:!0,__source:!0};function gS(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)hS.call(t,r)&&!mS.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:wu,type:e,key:o,ref:a,props:i,_owner:qy.current}}function o3(e,t){return{$$typeof:wu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xy(e){return typeof e=="object"&&e!==null&&e.$$typeof===wu}function a3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var X_=/\/+/g;function Em(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a3(""+e.key):t.toString(36)}function gf(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wu:case YA:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Em(a,0):r,q_(i)?(n="",e!=null&&(n=e.replace(X_,"$&/")+"/"),gf(i,t,n,"",function(u){return u})):i!=null&&(Xy(i)&&(i=o3(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(X_,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",q_(e))for(var s=0;s<e.length;s++){o=e[s];var l=r+Em(o,s);a+=gf(o,t,n,l,i)}else if(l=i3(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=r+Em(o,s++),a+=gf(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Sp(e,t,n){if(e==null)return e;var r=[],i=0;return gf(e,r,"","",function(o){return t.call(n,o,i++)}),r}function s3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wr={current:null},yf={transition:null},l3={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:yf,ReactCurrentOwner:qy};function yS(){throw Error("act(...) is not supported in production builds of React.")}Ot.Children={map:Sp,forEach:function(e,t,n){Sp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sp(e,function(){t++}),t},toArray:function(e){return Sp(e,function(t){return t})||[]},only:function(e){if(!Xy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ot.Component=Ll;Ot.Fragment=qA;Ot.Profiler=QA;Ot.PureComponent=Ky;Ot.StrictMode=XA;Ot.Suspense=t3;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l3;Ot.act=yS;Ot.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pS({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=qy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)hS.call(t,l)&&!mS.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:wu,type:e.type,key:i,ref:o,props:r,_owner:a}};Ot.createContext=function(e){return e={$$typeof:JA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZA,_context:e},e.Consumer=e};Ot.createElement=gS;Ot.createFactory=function(e){var t=gS.bind(null,e);return t.type=e,t};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(e){return{$$typeof:e3,render:e}};Ot.isValidElement=Xy;Ot.lazy=function(e){return{$$typeof:r3,_payload:{_status:-1,_result:e},_init:s3}};Ot.memo=function(e,t){return{$$typeof:n3,type:e,compare:t===void 0?null:t}};Ot.startTransition=function(e){var t=yf.transition;yf.transition={};try{e()}finally{yf.transition=t}};Ot.unstable_act=yS;Ot.useCallback=function(e,t){return wr.current.useCallback(e,t)};Ot.useContext=function(e){return wr.current.useContext(e)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(e){return wr.current.useDeferredValue(e)};Ot.useEffect=function(e,t){return wr.current.useEffect(e,t)};Ot.useId=function(){return wr.current.useId()};Ot.useImperativeHandle=function(e,t,n){return wr.current.useImperativeHandle(e,t,n)};Ot.useInsertionEffect=function(e,t){return wr.current.useInsertionEffect(e,t)};Ot.useLayoutEffect=function(e,t){return wr.current.useLayoutEffect(e,t)};Ot.useMemo=function(e,t){return wr.current.useMemo(e,t)};Ot.useReducer=function(e,t,n){return wr.current.useReducer(e,t,n)};Ot.useRef=function(e){return wr.current.useRef(e)};Ot.useState=function(e){return wr.current.useState(e)};Ot.useSyncExternalStore=function(e,t,n){return wr.current.useSyncExternalStore(e,t,n)};Ot.useTransition=function(){return wr.current.useTransition()};Ot.version="18.3.1";cS.exports=Ot;var Pe=cS.exports;const c3=sS(Pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3=Pe,p3=Symbol.for("react.element"),f3=Symbol.for("react.fragment"),d3=Object.prototype.hasOwnProperty,h3=u3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m3={key:!0,ref:!0,__self:!0,__source:!0};function vS(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)d3.call(t,r)&&!m3.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:p3,type:e,key:o,ref:a,props:i,_owner:h3.current}}Nd.Fragment=f3;Nd.jsx=vS;Nd.jsxs=vS;lS.exports=Nd;var H=lS.exports,yg={},xS={exports:{}},Zr={},_S={exports:{}},wS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(me,$e){var Oe=me.length;me.push($e);e:for(;0<Oe;){var qe=Oe-1>>>1,Q=me[qe];if(0<i(Q,$e))me[qe]=$e,me[Oe]=Q,Oe=qe;else break e}}function n(me){return me.length===0?null:me[0]}function r(me){if(me.length===0)return null;var $e=me[0],Oe=me.pop();if(Oe!==$e){me[0]=Oe;e:for(var qe=0,Q=me.length,J=Q>>>1;qe<J;){var se=2*(qe+1)-1,ye=me[se],I=se+1,w=me[I];if(0>i(ye,Oe))I<Q&&0>i(w,ye)?(me[qe]=w,me[I]=Oe,qe=I):(me[qe]=ye,me[se]=Oe,qe=se);else if(I<Q&&0>i(w,Oe))me[qe]=w,me[I]=Oe,qe=I;else break e}}return $e}function i(me,$e){var Oe=me.sortIndex-$e.sortIndex;return Oe!==0?Oe:me.id-$e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],f=1,d=null,g=3,y=!1,v=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(me){for(var $e=n(u);$e!==null;){if($e.callback===null)r(u);else if($e.startTime<=me)r(u),$e.sortIndex=$e.expirationTime,t(l,$e);else break;$e=n(u)}}function b(me){if(x=!1,E(me),!v)if(n(l)!==null)v=!0,Ge(D);else{var $e=n(u);$e!==null&&Ke(b,$e.startTime-me)}}function D(me,$e){v=!1,x&&(x=!1,P(L),L=-1),y=!0;var Oe=g;try{for(E($e),d=n(l);d!==null&&(!(d.expirationTime>$e)||me&&!G());){var qe=d.callback;if(typeof qe=="function"){d.callback=null,g=d.priorityLevel;var Q=qe(d.expirationTime<=$e);$e=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),E($e)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var se=n(u);se!==null&&Ke(b,se.startTime-$e),J=!1}return J}finally{d=null,g=Oe,y=!1}}var B=!1,z=null,L=-1,X=5,Y=-1;function G(){return!(e.unstable_now()-Y<X)}function le(){if(z!==null){var me=e.unstable_now();Y=me;var $e=!0;try{$e=z(!0,me)}finally{$e?oe():(B=!1,z=null)}}else B=!1}var oe;if(typeof R=="function")oe=function(){R(le)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,kt=Se.port2;Se.port1.onmessage=le,oe=function(){kt.postMessage(null)}}else oe=function(){C(le,0)};function Ge(me){z=me,B||(B=!0,oe())}function Ke(me,$e){L=C(function(){me(e.unstable_now())},$e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(me){me.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,Ge(D))},e.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<me?Math.floor(1e3/me):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(me){switch(g){case 1:case 2:case 3:var $e=3;break;default:$e=g}var Oe=g;g=$e;try{return me()}finally{g=Oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(me,$e){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Oe=g;g=me;try{return $e()}finally{g=Oe}},e.unstable_scheduleCallback=function(me,$e,Oe){var qe=e.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?qe+Oe:qe):Oe=qe,me){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Oe+Q,me={id:f++,callback:$e,priorityLevel:me,startTime:Oe,expirationTime:Q,sortIndex:-1},Oe>qe?(me.sortIndex=Oe,t(u,me),n(l)===null&&me===n(u)&&(x?(P(L),L=-1):x=!0,Ke(b,Oe-qe))):(me.sortIndex=Q,t(l,me),v||y||(v=!0,Ge(D))),me},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(me){var $e=g;return function(){var Oe=g;g=$e;try{return me.apply(this,arguments)}finally{g=Oe}}}})(wS);_S.exports=wS;var g3=_S.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y3=Pe,Qr=g3;function he(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ES=new Set,Yc={};function Es(e,t){yl(e,t),yl(e+"Capture",t)}function yl(e,t){for(Yc[e]=t,e=0;e<t.length;e++)ES.add(t[e])}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vg=Object.prototype.hasOwnProperty,v3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q_={},Z_={};function x3(e){return vg.call(Z_,e)?!0:vg.call(Q_,e)?!1:v3.test(e)?Z_[e]=!0:(Q_[e]=!0,!1)}function _3(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w3(e,t,n,r){if(t===null||typeof t>"u"||_3(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Er(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){er[e]=new Er(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];er[t]=new Er(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){er[e]=new Er(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){er[e]=new Er(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){er[e]=new Er(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){er[e]=new Er(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){er[e]=new Er(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){er[e]=new Er(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){er[e]=new Er(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qy=/[\-:]([a-z])/g;function Zy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qy,Zy);er[t]=new Er(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qy,Zy);er[t]=new Er(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qy,Zy);er[t]=new Er(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){er[e]=new Er(e,1,!1,e.toLowerCase(),null,!1,!1)});er.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){er[e]=new Er(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jy(e,t,n,r){var i=er.hasOwnProperty(t)?er[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w3(t,n,i,r)&&(n=null),r||i===null?x3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var To=y3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cp=Symbol.for("react.element"),Js=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),ev=Symbol.for("react.strict_mode"),xg=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),SS=Symbol.for("react.context"),tv=Symbol.for("react.forward_ref"),_g=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),nv=Symbol.for("react.memo"),Zo=Symbol.for("react.lazy"),CS=Symbol.for("react.offscreen"),J_=Symbol.iterator;function lc(e){return e===null||typeof e!="object"?null:(e=J_&&e[J_]||e["@@iterator"],typeof e=="function"?e:null)}var ln=Object.assign,bm;function Pc(e){if(bm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bm=t&&t[1]||""}return`
`+bm+e}var Sm=!1;function Cm(e,t){if(!e||Sm)return"";Sm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{Sm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pc(e):""}function E3(e){switch(e.tag){case 5:return Pc(e.type);case 16:return Pc("Lazy");case 13:return Pc("Suspense");case 19:return Pc("SuspenseList");case 0:case 2:case 15:return e=Cm(e.type,!1),e;case 11:return e=Cm(e.type.render,!1),e;case 1:return e=Cm(e.type,!0),e;default:return""}}function Eg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case el:return"Fragment";case Js:return"Portal";case xg:return"Profiler";case ev:return"StrictMode";case _g:return"Suspense";case wg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case SS:return(e.displayName||"Context")+".Consumer";case bS:return(e._context.displayName||"Context")+".Provider";case tv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nv:return t=e.displayName||null,t!==null?t:Eg(e.type)||"Memo";case Zo:t=e._payload,e=e._init;try{return Eg(e(t))}catch{}}return null}function b3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eg(t);case 8:return t===ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ma(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function S3(e){var t=RS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rp(e){e._valueTracker||(e._valueTracker=S3(e))}function kS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=RS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bg(e,t){var n=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function e1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ma(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PS(e,t){t=t.checked,t!=null&&Jy(e,"checked",t,!1)}function Sg(e,t){PS(e,t);var n=ma(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Cg(e,t.type,ma(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function t1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Cg(e,t,n){(t!=="number"||Vf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Tc=Array.isArray;function pl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ma(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Rg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(he(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function n1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(he(92));if(Tc(n)){if(1<n.length)throw Error(he(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ma(n)}}function TS(e,t){var n=ma(t.value),r=ma(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function r1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function AS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?AS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kp,MS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kp=kp||document.createElement("div"),kp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C3=["Webkit","ms","Moz","O"];Object.keys(Dc).forEach(function(e){C3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dc[t]=Dc[e]})});function NS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Dc.hasOwnProperty(e)&&Dc[e]?(""+t).trim():t+"px"}function DS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var R3=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pg(e,t){if(t){if(R3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(he(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(he(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(he(61))}if(t.style!=null&&typeof t.style!="object")throw Error(he(62))}}function Tg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=null;function rv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mg=null,fl=null,dl=null;function i1(e){if(e=Su(e)){if(typeof Mg!="function")throw Error(he(280));var t=e.stateNode;t&&(t=Bd(t),Mg(e.stateNode,e.type,t))}}function OS(e){fl?dl?dl.push(e):dl=[e]:fl=e}function LS(){if(fl){var e=fl,t=dl;if(dl=fl=null,i1(e),t)for(e=0;e<t.length;e++)i1(t[e])}}function IS(e,t){return e(t)}function BS(){}var Rm=!1;function jS(e,t,n){if(Rm)return e(t,n);Rm=!0;try{return IS(e,t,n)}finally{Rm=!1,(fl!==null||dl!==null)&&(BS(),LS())}}function Xc(e,t){var n=e.stateNode;if(n===null)return null;var r=Bd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(he(231,t,typeof n));return n}var Ng=!1;if(Co)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){Ng=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{Ng=!1}function k3(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Oc=!1,Wf=null,Uf=!1,Dg=null,P3={onError:function(e){Oc=!0,Wf=e}};function T3(e,t,n,r,i,o,a,s,l){Oc=!1,Wf=null,k3.apply(P3,arguments)}function A3(e,t,n,r,i,o,a,s,l){if(T3.apply(this,arguments),Oc){if(Oc){var u=Wf;Oc=!1,Wf=null}else throw Error(he(198));Uf||(Uf=!0,Dg=u)}}function bs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $S(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function o1(e){if(bs(e)!==e)throw Error(he(188))}function M3(e){var t=e.alternate;if(!t){if(t=bs(e),t===null)throw Error(he(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return o1(i),e;if(o===r)return o1(i),t;o=o.sibling}throw Error(he(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?e:t}function FS(e){return e=M3(e),e!==null?zS(e):null}function zS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zS(e);if(t!==null)return t;e=e.sibling}return null}var HS=Qr.unstable_scheduleCallback,a1=Qr.unstable_cancelCallback,N3=Qr.unstable_shouldYield,D3=Qr.unstable_requestPaint,bn=Qr.unstable_now,O3=Qr.unstable_getCurrentPriorityLevel,iv=Qr.unstable_ImmediatePriority,VS=Qr.unstable_UserBlockingPriority,Gf=Qr.unstable_NormalPriority,L3=Qr.unstable_LowPriority,WS=Qr.unstable_IdlePriority,Dd=null,Qi=null;function I3(e){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(Dd,e,void 0,(e.current.flags&128)===128)}catch{}}var Di=Math.clz32?Math.clz32:$3,B3=Math.log,j3=Math.LN2;function $3(e){return e>>>=0,e===0?32:31-(B3(e)/j3|0)|0}var Pp=64,Tp=4194304;function Ac(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Ac(s):(o&=a,o!==0&&(r=Ac(o)))}else a=n&~i,a!==0?r=Ac(a):o!==0&&(r=Ac(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Di(t),i=1<<n,r|=e[n],t&=~i;return r}function F3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Di(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=F3(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function Og(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function US(){var e=Pp;return Pp<<=1,!(Pp&4194240)&&(Pp=64),e}function km(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Eu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Di(t),e[t]=n}function H3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Di(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ov(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Di(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $t=0;function GS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KS,av,YS,qS,XS,Lg=!1,Ap=[],aa=null,sa=null,la=null,Qc=new Map,Zc=new Map,ta=[],V3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s1(e,t){switch(e){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Qc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(t.pointerId)}}function uc(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Su(t),t!==null&&av(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function W3(e,t,n,r,i){switch(t){case"focusin":return aa=uc(aa,e,t,n,r,i),!0;case"dragenter":return sa=uc(sa,e,t,n,r,i),!0;case"mouseover":return la=uc(la,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Qc.set(o,uc(Qc.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Zc.set(o,uc(Zc.get(o)||null,e,t,n,r,i)),!0}return!1}function QS(e){var t=os(e.target);if(t!==null){var n=bs(t);if(n!==null){if(t=n.tag,t===13){if(t=$S(n),t!==null){e.blockedOn=t,XS(e.priority,function(){YS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ig(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ag=r,n.target.dispatchEvent(r),Ag=null}else return t=Su(n),t!==null&&av(t),e.blockedOn=n,!1;t.shift()}return!0}function l1(e,t,n){vf(e)&&n.delete(t)}function U3(){Lg=!1,aa!==null&&vf(aa)&&(aa=null),sa!==null&&vf(sa)&&(sa=null),la!==null&&vf(la)&&(la=null),Qc.forEach(l1),Zc.forEach(l1)}function pc(e,t){e.blockedOn===t&&(e.blockedOn=null,Lg||(Lg=!0,Qr.unstable_scheduleCallback(Qr.unstable_NormalPriority,U3)))}function Jc(e){function t(i){return pc(i,e)}if(0<Ap.length){pc(Ap[0],e);for(var n=1;n<Ap.length;n++){var r=Ap[n];r.blockedOn===e&&(r.blockedOn=null)}}for(aa!==null&&pc(aa,e),sa!==null&&pc(sa,e),la!==null&&pc(la,e),Qc.forEach(t),Zc.forEach(t),n=0;n<ta.length;n++)r=ta[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ta.length&&(n=ta[0],n.blockedOn===null);)QS(n),n.blockedOn===null&&ta.shift()}var hl=To.ReactCurrentBatchConfig,Yf=!0;function G3(e,t,n,r){var i=$t,o=hl.transition;hl.transition=null;try{$t=1,sv(e,t,n,r)}finally{$t=i,hl.transition=o}}function K3(e,t,n,r){var i=$t,o=hl.transition;hl.transition=null;try{$t=4,sv(e,t,n,r)}finally{$t=i,hl.transition=o}}function sv(e,t,n,r){if(Yf){var i=Ig(e,t,n,r);if(i===null)Bm(e,t,r,qf,n),s1(e,r);else if(W3(i,e,t,n,r))r.stopPropagation();else if(s1(e,r),t&4&&-1<V3.indexOf(e)){for(;i!==null;){var o=Su(i);if(o!==null&&KS(o),o=Ig(e,t,n,r),o===null&&Bm(e,t,r,qf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Bm(e,t,r,null,n)}}var qf=null;function Ig(e,t,n,r){if(qf=null,e=rv(r),e=os(e),e!==null)if(t=bs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$S(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qf=e,null}function ZS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O3()){case iv:return 1;case VS:return 4;case Gf:case L3:return 16;case WS:return 536870912;default:return 16}default:return 16}}var ra=null,lv=null,xf=null;function JS(){if(xf)return xf;var e,t=lv,n=t.length,r,i="value"in ra?ra.value:ra.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return xf=i.slice(e,1<r?1-r:void 0)}function _f(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mp(){return!0}function c1(){return!1}function Jr(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mp:c1,this.isPropagationStopped=c1,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mp)},persist:function(){},isPersistent:Mp}),t}var Il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cv=Jr(Il),bu=ln({},Il,{view:0,detail:0}),Y3=Jr(bu),Pm,Tm,fc,Od=ln({},bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fc&&(fc&&e.type==="mousemove"?(Pm=e.screenX-fc.screenX,Tm=e.screenY-fc.screenY):Tm=Pm=0,fc=e),Pm)},movementY:function(e){return"movementY"in e?e.movementY:Tm}}),u1=Jr(Od),q3=ln({},Od,{dataTransfer:0}),X3=Jr(q3),Q3=ln({},bu,{relatedTarget:0}),Am=Jr(Q3),Z3=ln({},Il,{animationName:0,elapsedTime:0,pseudoElement:0}),J3=Jr(Z3),e5=ln({},Il,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),t5=Jr(e5),n5=ln({},Il,{data:0}),p1=Jr(n5),r5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=o5[e])?!!t[e]:!1}function uv(){return a5}var s5=ln({},bu,{key:function(e){if(e.key){var t=r5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_f(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uv,charCode:function(e){return e.type==="keypress"?_f(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_f(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l5=Jr(s5),c5=ln({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f1=Jr(c5),u5=ln({},bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uv}),p5=Jr(u5),f5=ln({},Il,{propertyName:0,elapsedTime:0,pseudoElement:0}),d5=Jr(f5),h5=ln({},Od,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m5=Jr(h5),g5=[9,13,27,32],pv=Co&&"CompositionEvent"in window,Lc=null;Co&&"documentMode"in document&&(Lc=document.documentMode);var y5=Co&&"TextEvent"in window&&!Lc,e2=Co&&(!pv||Lc&&8<Lc&&11>=Lc),d1=" ",h1=!1;function t2(e,t){switch(e){case"keyup":return g5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tl=!1;function v5(e,t){switch(e){case"compositionend":return n2(t);case"keypress":return t.which!==32?null:(h1=!0,d1);case"textInput":return e=t.data,e===d1&&h1?null:e;default:return null}}function x5(e,t){if(tl)return e==="compositionend"||!pv&&t2(e,t)?(e=JS(),xf=lv=ra=null,tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return e2&&t.locale!=="ko"?null:t.data;default:return null}}var _5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_5[e.type]:t==="textarea"}function r2(e,t,n,r){OS(r),t=Xf(t,"onChange"),0<t.length&&(n=new cv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ic=null,eu=null;function w5(e){h2(e,0)}function Ld(e){var t=il(e);if(kS(t))return e}function E5(e,t){if(e==="change")return t}var i2=!1;if(Co){var Mm;if(Co){var Nm="oninput"in document;if(!Nm){var g1=document.createElement("div");g1.setAttribute("oninput","return;"),Nm=typeof g1.oninput=="function"}Mm=Nm}else Mm=!1;i2=Mm&&(!document.documentMode||9<document.documentMode)}function y1(){Ic&&(Ic.detachEvent("onpropertychange",o2),eu=Ic=null)}function o2(e){if(e.propertyName==="value"&&Ld(eu)){var t=[];r2(t,eu,e,rv(e)),jS(w5,t)}}function b5(e,t,n){e==="focusin"?(y1(),Ic=t,eu=n,Ic.attachEvent("onpropertychange",o2)):e==="focusout"&&y1()}function S5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ld(eu)}function C5(e,t){if(e==="click")return Ld(t)}function R5(e,t){if(e==="input"||e==="change")return Ld(t)}function k5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bi=typeof Object.is=="function"?Object.is:k5;function tu(e,t){if(Bi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vg.call(t,i)||!Bi(e[i],t[i]))return!1}return!0}function v1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function x1(e,t){var n=v1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v1(n)}}function a2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?a2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function s2(){for(var e=window,t=Vf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vf(e.document)}return t}function fv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P5(e){var t=s2(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&a2(n.ownerDocument.documentElement,n)){if(r!==null&&fv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=x1(n,o);var a=x1(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T5=Co&&"documentMode"in document&&11>=document.documentMode,nl=null,Bg=null,Bc=null,jg=!1;function _1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jg||nl==null||nl!==Vf(r)||(r=nl,"selectionStart"in r&&fv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bc&&tu(Bc,r)||(Bc=r,r=Xf(Bg,"onSelect"),0<r.length&&(t=new cv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nl)))}function Np(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rl={animationend:Np("Animation","AnimationEnd"),animationiteration:Np("Animation","AnimationIteration"),animationstart:Np("Animation","AnimationStart"),transitionend:Np("Transition","TransitionEnd")},Dm={},l2={};Co&&(l2=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Id(e){if(Dm[e])return Dm[e];if(!rl[e])return e;var t=rl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in l2)return Dm[e]=t[n];return e}var c2=Id("animationend"),u2=Id("animationiteration"),p2=Id("animationstart"),f2=Id("transitionend"),d2=new Map,w1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(e,t){d2.set(e,t),Es(t,[e])}for(var Om=0;Om<w1.length;Om++){var Lm=w1[Om],A5=Lm.toLowerCase(),M5=Lm[0].toUpperCase()+Lm.slice(1);_a(A5,"on"+M5)}_a(c2,"onAnimationEnd");_a(u2,"onAnimationIteration");_a(p2,"onAnimationStart");_a("dblclick","onDoubleClick");_a("focusin","onFocus");_a("focusout","onBlur");_a(f2,"onTransitionEnd");yl("onMouseEnter",["mouseout","mouseover"]);yl("onMouseLeave",["mouseout","mouseover"]);yl("onPointerEnter",["pointerout","pointerover"]);yl("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mc));function E1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,A3(r,t,void 0,e),e.currentTarget=null}function h2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;E1(i,s,u),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;E1(i,s,u),o=l}}}if(Uf)throw e=Dg,Uf=!1,Dg=null,e}function Gt(e,t){var n=t[Vg];n===void 0&&(n=t[Vg]=new Set);var r=e+"__bubble";n.has(r)||(m2(t,e,2,!1),n.add(r))}function Im(e,t,n){var r=0;t&&(r|=4),m2(n,e,r,t)}var Dp="_reactListening"+Math.random().toString(36).slice(2);function nu(e){if(!e[Dp]){e[Dp]=!0,ES.forEach(function(n){n!=="selectionchange"&&(N5.has(n)||Im(n,!1,e),Im(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dp]||(t[Dp]=!0,Im("selectionchange",!1,t))}}function m2(e,t,n,r){switch(ZS(t)){case 1:var i=G3;break;case 4:i=K3;break;default:i=sv}n=i.bind(null,t,n,e),i=void 0,!Ng||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bm(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=os(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}jS(function(){var u=o,f=rv(n),d=[];e:{var g=d2.get(e);if(g!==void 0){var y=cv,v=e;switch(e){case"keypress":if(_f(n)===0)break e;case"keydown":case"keyup":y=l5;break;case"focusin":v="focus",y=Am;break;case"focusout":v="blur",y=Am;break;case"beforeblur":case"afterblur":y=Am;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=u1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=X3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=p5;break;case c2:case u2:case p2:y=J3;break;case f2:y=d5;break;case"scroll":y=Y3;break;case"wheel":y=m5;break;case"copy":case"cut":case"paste":y=t5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=f1}var x=(t&4)!==0,C=!x&&e==="scroll",P=x?g!==null?g+"Capture":null:g;x=[];for(var R=u,E;R!==null;){E=R;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,P!==null&&(b=Xc(R,P),b!=null&&x.push(ru(R,b,E)))),C)break;R=R.return}0<x.length&&(g=new y(g,v,null,n,f),d.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",g&&n!==Ag&&(v=n.relatedTarget||n.fromElement)&&(os(v)||v[Ro]))break e;if((y||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?os(v):null,v!==null&&(C=bs(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(x=u1,b="onMouseLeave",P="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(x=f1,b="onPointerLeave",P="onPointerEnter",R="pointer"),C=y==null?g:il(y),E=v==null?g:il(v),g=new x(b,R+"leave",y,n,f),g.target=C,g.relatedTarget=E,b=null,os(f)===u&&(x=new x(P,R+"enter",v,n,f),x.target=E,x.relatedTarget=C,b=x),C=b,y&&v)t:{for(x=y,P=v,R=0,E=x;E;E=Ws(E))R++;for(E=0,b=P;b;b=Ws(b))E++;for(;0<R-E;)x=Ws(x),R--;for(;0<E-R;)P=Ws(P),E--;for(;R--;){if(x===P||P!==null&&x===P.alternate)break t;x=Ws(x),P=Ws(P)}x=null}else x=null;y!==null&&b1(d,g,y,x,!1),v!==null&&C!==null&&b1(d,C,v,x,!0)}}e:{if(g=u?il(u):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var D=E5;else if(m1(g))if(i2)D=R5;else{D=S5;var B=b5}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=C5);if(D&&(D=D(e,u))){r2(d,D,n,f);break e}B&&B(e,g,u),e==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Cg(g,"number",g.value)}switch(B=u?il(u):window,e){case"focusin":(m1(B)||B.contentEditable==="true")&&(nl=B,Bg=u,Bc=null);break;case"focusout":Bc=Bg=nl=null;break;case"mousedown":jg=!0;break;case"contextmenu":case"mouseup":case"dragend":jg=!1,_1(d,n,f);break;case"selectionchange":if(T5)break;case"keydown":case"keyup":_1(d,n,f)}var z;if(pv)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else tl?t2(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(e2&&n.locale!=="ko"&&(tl||L!=="onCompositionStart"?L==="onCompositionEnd"&&tl&&(z=JS()):(ra=f,lv="value"in ra?ra.value:ra.textContent,tl=!0)),B=Xf(u,L),0<B.length&&(L=new p1(L,e,null,n,f),d.push({event:L,listeners:B}),z?L.data=z:(z=n2(n),z!==null&&(L.data=z)))),(z=y5?v5(e,n):x5(e,n))&&(u=Xf(u,"onBeforeInput"),0<u.length&&(f=new p1("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=z))}h2(d,t)})}function ru(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xf(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Xc(e,n),o!=null&&r.unshift(ru(e,o,i)),o=Xc(e,t),o!=null&&r.push(ru(e,o,i))),e=e.return}return r}function Ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function b1(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=Xc(n,o),l!=null&&a.unshift(ru(n,l,s))):i||(l=Xc(n,o),l!=null&&a.push(ru(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var D5=/\r\n?/g,O5=/\u0000|\uFFFD/g;function S1(e){return(typeof e=="string"?e:""+e).replace(D5,`
`).replace(O5,"")}function Op(e,t,n){if(t=S1(t),S1(e)!==t&&n)throw Error(he(425))}function Qf(){}var $g=null,Fg=null;function zg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hg=typeof setTimeout=="function"?setTimeout:void 0,L5=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,I5=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(e){return C1.resolve(null).then(e).catch(B5)}:Hg;function B5(e){setTimeout(function(){throw e})}function jm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Jc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jc(t)}function ca(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function R1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bl=Math.random().toString(36).slice(2),qi="__reactFiber$"+Bl,iu="__reactProps$"+Bl,Ro="__reactContainer$"+Bl,Vg="__reactEvents$"+Bl,j5="__reactListeners$"+Bl,$5="__reactHandles$"+Bl;function os(e){var t=e[qi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ro]||n[qi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=R1(e);e!==null;){if(n=e[qi])return n;e=R1(e)}return t}e=n,n=e.parentNode}return null}function Su(e){return e=e[qi]||e[Ro],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function il(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(he(33))}function Bd(e){return e[iu]||null}var Wg=[],ol=-1;function wa(e){return{current:e}}function Yt(e){0>ol||(e.current=Wg[ol],Wg[ol]=null,ol--)}function Vt(e,t){ol++,Wg[ol]=e.current,e.current=t}var ga={},ur=wa(ga),Or=wa(!1),ds=ga;function vl(e,t){var n=e.type.contextTypes;if(!n)return ga;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Lr(e){return e=e.childContextTypes,e!=null}function Zf(){Yt(Or),Yt(ur)}function k1(e,t,n){if(ur.current!==ga)throw Error(he(168));Vt(ur,t),Vt(Or,n)}function g2(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(he(108,b3(e)||"Unknown",i));return ln({},n,r)}function Jf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ga,ds=ur.current,Vt(ur,e),Vt(Or,Or.current),!0}function P1(e,t,n){var r=e.stateNode;if(!r)throw Error(he(169));n?(e=g2(e,t,ds),r.__reactInternalMemoizedMergedChildContext=e,Yt(Or),Yt(ur),Vt(ur,e)):Yt(Or),Vt(Or,n)}var mo=null,jd=!1,$m=!1;function y2(e){mo===null?mo=[e]:mo.push(e)}function F5(e){jd=!0,y2(e)}function Ea(){if(!$m&&mo!==null){$m=!0;var e=0,t=$t;try{var n=mo;for($t=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mo=null,jd=!1}catch(i){throw mo!==null&&(mo=mo.slice(e+1)),HS(iv,Ea),i}finally{$t=t,$m=!1}}return null}var al=[],sl=0,ed=null,td=0,fi=[],di=0,hs=null,yo=1,vo="";function es(e,t){al[sl++]=td,al[sl++]=ed,ed=e,td=t}function v2(e,t,n){fi[di++]=yo,fi[di++]=vo,fi[di++]=hs,hs=e;var r=yo;e=vo;var i=32-Di(r)-1;r&=~(1<<i),n+=1;var o=32-Di(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,yo=1<<32-Di(t)+i|n<<i|r,vo=o+e}else yo=1<<o|n<<i|r,vo=e}function dv(e){e.return!==null&&(es(e,1),v2(e,1,0))}function hv(e){for(;e===ed;)ed=al[--sl],al[sl]=null,td=al[--sl],al[sl]=null;for(;e===hs;)hs=fi[--di],fi[di]=null,vo=fi[--di],fi[di]=null,yo=fi[--di],fi[di]=null}var Yr=null,Kr=null,tn=!1,Ni=null;function x2(e,t){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function T1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yr=e,Kr=ca(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yr=e,Kr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hs!==null?{id:yo,overflow:vo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yr=e,Kr=null,!0):!1;default:return!1}}function Ug(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gg(e){if(tn){var t=Kr;if(t){var n=t;if(!T1(e,t)){if(Ug(e))throw Error(he(418));t=ca(n.nextSibling);var r=Yr;t&&T1(e,t)?x2(r,n):(e.flags=e.flags&-4097|2,tn=!1,Yr=e)}}else{if(Ug(e))throw Error(he(418));e.flags=e.flags&-4097|2,tn=!1,Yr=e}}}function A1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yr=e}function Lp(e){if(e!==Yr)return!1;if(!tn)return A1(e),tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zg(e.type,e.memoizedProps)),t&&(t=Kr)){if(Ug(e))throw _2(),Error(he(418));for(;t;)x2(e,t),t=ca(t.nextSibling)}if(A1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(he(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Kr=ca(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Kr=null}}else Kr=Yr?ca(e.stateNode.nextSibling):null;return!0}function _2(){for(var e=Kr;e;)e=ca(e.nextSibling)}function xl(){Kr=Yr=null,tn=!1}function mv(e){Ni===null?Ni=[e]:Ni.push(e)}var z5=To.ReactCurrentBatchConfig;function dc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,e))}return e}function Ip(e,t){throw e=Object.prototype.toString.call(t),Error(he(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function M1(e){var t=e._init;return t(e._payload)}function w2(e){function t(P,R){if(e){var E=P.deletions;E===null?(P.deletions=[R],P.flags|=16):E.push(R)}}function n(P,R){if(!e)return null;for(;R!==null;)t(P,R),R=R.sibling;return null}function r(P,R){for(P=new Map;R!==null;)R.key!==null?P.set(R.key,R):P.set(R.index,R),R=R.sibling;return P}function i(P,R){return P=da(P,R),P.index=0,P.sibling=null,P}function o(P,R,E){return P.index=E,e?(E=P.alternate,E!==null?(E=E.index,E<R?(P.flags|=2,R):E):(P.flags|=2,R)):(P.flags|=1048576,R)}function a(P){return e&&P.alternate===null&&(P.flags|=2),P}function s(P,R,E,b){return R===null||R.tag!==6?(R=Gm(E,P.mode,b),R.return=P,R):(R=i(R,E),R.return=P,R)}function l(P,R,E,b){var D=E.type;return D===el?f(P,R,E.props.children,b,E.key):R!==null&&(R.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zo&&M1(D)===R.type)?(b=i(R,E.props),b.ref=dc(P,R,E),b.return=P,b):(b=kf(E.type,E.key,E.props,null,P.mode,b),b.ref=dc(P,R,E),b.return=P,b)}function u(P,R,E,b){return R===null||R.tag!==4||R.stateNode.containerInfo!==E.containerInfo||R.stateNode.implementation!==E.implementation?(R=Km(E,P.mode,b),R.return=P,R):(R=i(R,E.children||[]),R.return=P,R)}function f(P,R,E,b,D){return R===null||R.tag!==7?(R=ps(E,P.mode,b,D),R.return=P,R):(R=i(R,E),R.return=P,R)}function d(P,R,E){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Gm(""+R,P.mode,E),R.return=P,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cp:return E=kf(R.type,R.key,R.props,null,P.mode,E),E.ref=dc(P,null,R),E.return=P,E;case Js:return R=Km(R,P.mode,E),R.return=P,R;case Zo:var b=R._init;return d(P,b(R._payload),E)}if(Tc(R)||lc(R))return R=ps(R,P.mode,E,null),R.return=P,R;Ip(P,R)}return null}function g(P,R,E,b){var D=R!==null?R.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:s(P,R,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cp:return E.key===D?l(P,R,E,b):null;case Js:return E.key===D?u(P,R,E,b):null;case Zo:return D=E._init,g(P,R,D(E._payload),b)}if(Tc(E)||lc(E))return D!==null?null:f(P,R,E,b,null);Ip(P,E)}return null}function y(P,R,E,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return P=P.get(E)||null,s(R,P,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cp:return P=P.get(b.key===null?E:b.key)||null,l(R,P,b,D);case Js:return P=P.get(b.key===null?E:b.key)||null,u(R,P,b,D);case Zo:var B=b._init;return y(P,R,E,B(b._payload),D)}if(Tc(b)||lc(b))return P=P.get(E)||null,f(R,P,b,D,null);Ip(R,b)}return null}function v(P,R,E,b){for(var D=null,B=null,z=R,L=R=0,X=null;z!==null&&L<E.length;L++){z.index>L?(X=z,z=null):X=z.sibling;var Y=g(P,z,E[L],b);if(Y===null){z===null&&(z=X);break}e&&z&&Y.alternate===null&&t(P,z),R=o(Y,R,L),B===null?D=Y:B.sibling=Y,B=Y,z=X}if(L===E.length)return n(P,z),tn&&es(P,L),D;if(z===null){for(;L<E.length;L++)z=d(P,E[L],b),z!==null&&(R=o(z,R,L),B===null?D=z:B.sibling=z,B=z);return tn&&es(P,L),D}for(z=r(P,z);L<E.length;L++)X=y(z,P,L,E[L],b),X!==null&&(e&&X.alternate!==null&&z.delete(X.key===null?L:X.key),R=o(X,R,L),B===null?D=X:B.sibling=X,B=X);return e&&z.forEach(function(G){return t(P,G)}),tn&&es(P,L),D}function x(P,R,E,b){var D=lc(E);if(typeof D!="function")throw Error(he(150));if(E=D.call(E),E==null)throw Error(he(151));for(var B=D=null,z=R,L=R=0,X=null,Y=E.next();z!==null&&!Y.done;L++,Y=E.next()){z.index>L?(X=z,z=null):X=z.sibling;var G=g(P,z,Y.value,b);if(G===null){z===null&&(z=X);break}e&&z&&G.alternate===null&&t(P,z),R=o(G,R,L),B===null?D=G:B.sibling=G,B=G,z=X}if(Y.done)return n(P,z),tn&&es(P,L),D;if(z===null){for(;!Y.done;L++,Y=E.next())Y=d(P,Y.value,b),Y!==null&&(R=o(Y,R,L),B===null?D=Y:B.sibling=Y,B=Y);return tn&&es(P,L),D}for(z=r(P,z);!Y.done;L++,Y=E.next())Y=y(z,P,L,Y.value,b),Y!==null&&(e&&Y.alternate!==null&&z.delete(Y.key===null?L:Y.key),R=o(Y,R,L),B===null?D=Y:B.sibling=Y,B=Y);return e&&z.forEach(function(le){return t(P,le)}),tn&&es(P,L),D}function C(P,R,E,b){if(typeof E=="object"&&E!==null&&E.type===el&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Cp:e:{for(var D=E.key,B=R;B!==null;){if(B.key===D){if(D=E.type,D===el){if(B.tag===7){n(P,B.sibling),R=i(B,E.props.children),R.return=P,P=R;break e}}else if(B.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zo&&M1(D)===B.type){n(P,B.sibling),R=i(B,E.props),R.ref=dc(P,B,E),R.return=P,P=R;break e}n(P,B);break}else t(P,B);B=B.sibling}E.type===el?(R=ps(E.props.children,P.mode,b,E.key),R.return=P,P=R):(b=kf(E.type,E.key,E.props,null,P.mode,b),b.ref=dc(P,R,E),b.return=P,P=b)}return a(P);case Js:e:{for(B=E.key;R!==null;){if(R.key===B)if(R.tag===4&&R.stateNode.containerInfo===E.containerInfo&&R.stateNode.implementation===E.implementation){n(P,R.sibling),R=i(R,E.children||[]),R.return=P,P=R;break e}else{n(P,R);break}else t(P,R);R=R.sibling}R=Km(E,P.mode,b),R.return=P,P=R}return a(P);case Zo:return B=E._init,C(P,R,B(E._payload),b)}if(Tc(E))return v(P,R,E,b);if(lc(E))return x(P,R,E,b);Ip(P,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,R!==null&&R.tag===6?(n(P,R.sibling),R=i(R,E),R.return=P,P=R):(n(P,R),R=Gm(E,P.mode,b),R.return=P,P=R),a(P)):n(P,R)}return C}var _l=w2(!0),E2=w2(!1),nd=wa(null),rd=null,ll=null,gv=null;function yv(){gv=ll=rd=null}function vv(e){var t=nd.current;Yt(nd),e._currentValue=t}function Kg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ml(e,t){rd=e,gv=ll=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nr=!0),e.firstContext=null)}function vi(e){var t=e._currentValue;if(gv!==e)if(e={context:e,memoizedValue:t,next:null},ll===null){if(rd===null)throw Error(he(308));ll=e,rd.dependencies={lanes:0,firstContext:e}}else ll=ll.next=e;return t}var as=null;function xv(e){as===null?as=[e]:as.push(e)}function b2(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,xv(t)):(n.next=i.next,i.next=n),t.interleaved=n,ko(e,r)}function ko(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jo=!1;function _v(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ua(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ko(e,n)}return i=r.interleaved,i===null?(t.next=t,xv(r)):(t.next=i.next,i.next=t),r.interleaved=t,ko(e,n)}function wf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ov(e,n)}}function N1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function id(e,t,n,r){var i=e.updateQueue;Jo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==a&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,f=u=l=null,s=o;do{var g=s.lane,y=s.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:y,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,x=s;switch(g=t,y=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(y,d,g);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,g=typeof v=="function"?v.call(y,d,g):v,g==null)break e;d=ln({},d,g);break e;case 2:Jo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[s]:g.push(s))}else y={eventTime:y,lane:g,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=y,l=d):f=f.next=y,a|=g;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;g=s,s=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);gs|=a,e.lanes=a,e.memoizedState=d}}function D1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(he(191,i));i.call(r)}}}var Cu={},Zi=wa(Cu),ou=wa(Cu),au=wa(Cu);function ss(e){if(e===Cu)throw Error(he(174));return e}function wv(e,t){switch(Vt(au,t),Vt(ou,e),Vt(Zi,Cu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kg(t,e)}Yt(Zi),Vt(Zi,t)}function wl(){Yt(Zi),Yt(ou),Yt(au)}function C2(e){ss(au.current);var t=ss(Zi.current),n=kg(t,e.type);t!==n&&(Vt(ou,e),Vt(Zi,n))}function Ev(e){ou.current===e&&(Yt(Zi),Yt(ou))}var on=wa(0);function od(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fm=[];function bv(){for(var e=0;e<Fm.length;e++)Fm[e]._workInProgressVersionPrimary=null;Fm.length=0}var Ef=To.ReactCurrentDispatcher,zm=To.ReactCurrentBatchConfig,ms=0,sn=null,Ln=null,Hn=null,ad=!1,jc=!1,su=0,H5=0;function or(){throw Error(he(321))}function Sv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bi(e[n],t[n]))return!1;return!0}function Cv(e,t,n,r,i,o){if(ms=o,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ef.current=e===null||e.memoizedState===null?G5:K5,e=n(r,i),jc){o=0;do{if(jc=!1,su=0,25<=o)throw Error(he(301));o+=1,Hn=Ln=null,t.updateQueue=null,Ef.current=Y5,e=n(r,i)}while(jc)}if(Ef.current=sd,t=Ln!==null&&Ln.next!==null,ms=0,Hn=Ln=sn=null,ad=!1,t)throw Error(he(300));return e}function Rv(){var e=su!==0;return su=0,e}function Ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?sn.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function xi(){if(Ln===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=Ln.next;var t=Hn===null?sn.memoizedState:Hn.next;if(t!==null)Hn=t,Ln=e;else{if(e===null)throw Error(he(310));Ln=e,e={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Hn===null?sn.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}function lu(e,t){return typeof t=="function"?t(e):t}function Hm(e){var t=xi(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=Ln,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,u=o;do{var f=u.lane;if((ms&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,sn.lanes|=f,gs|=f}u=u.next}while(u!==null&&u!==o);l===null?a=r:l.next=s,Bi(r,t.memoizedState)||(Nr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,sn.lanes|=o,gs|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vm(e){var t=xi(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Bi(o,t.memoizedState)||(Nr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function R2(){}function k2(e,t){var n=sn,r=xi(),i=t(),o=!Bi(r.memoizedState,i);if(o&&(r.memoizedState=i,Nr=!0),r=r.queue,kv(A2.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,cu(9,T2.bind(null,n,r,i,t),void 0,null),Wn===null)throw Error(he(349));ms&30||P2(n,t,i)}return i}function P2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function T2(e,t,n,r){t.value=n,t.getSnapshot=r,M2(t)&&N2(e)}function A2(e,t,n){return n(function(){M2(t)&&N2(e)})}function M2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bi(e,n)}catch{return!0}}function N2(e){var t=ko(e,1);t!==null&&Oi(t,e,1,-1)}function O1(e){var t=Ui();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:e},t.queue=e,e=e.dispatch=U5.bind(null,sn,e),[t.memoizedState,e]}function cu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function D2(){return xi().memoizedState}function bf(e,t,n,r){var i=Ui();sn.flags|=e,i.memoizedState=cu(1|t,n,void 0,r===void 0?null:r)}function $d(e,t,n,r){var i=xi();r=r===void 0?null:r;var o=void 0;if(Ln!==null){var a=Ln.memoizedState;if(o=a.destroy,r!==null&&Sv(r,a.deps)){i.memoizedState=cu(t,n,o,r);return}}sn.flags|=e,i.memoizedState=cu(1|t,n,o,r)}function L1(e,t){return bf(8390656,8,e,t)}function kv(e,t){return $d(2048,8,e,t)}function O2(e,t){return $d(4,2,e,t)}function L2(e,t){return $d(4,4,e,t)}function I2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function B2(e,t,n){return n=n!=null?n.concat([e]):null,$d(4,4,I2.bind(null,t,e),n)}function Pv(){}function j2(e,t){var n=xi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $2(e,t){var n=xi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function F2(e,t,n){return ms&21?(Bi(n,t)||(n=US(),sn.lanes|=n,gs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nr=!0),e.memoizedState=n)}function V5(e,t){var n=$t;$t=n!==0&&4>n?n:4,e(!0);var r=zm.transition;zm.transition={};try{e(!1),t()}finally{$t=n,zm.transition=r}}function z2(){return xi().memoizedState}function W5(e,t,n){var r=fa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H2(e))V2(t,n);else if(n=b2(e,t,n,r),n!==null){var i=xr();Oi(n,e,r,i),W2(n,t,r)}}function U5(e,t,n){var r=fa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H2(e))V2(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Bi(s,a)){var l=t.interleaved;l===null?(i.next=i,xv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=b2(e,t,i,r),n!==null&&(i=xr(),Oi(n,e,r,i),W2(n,t,r))}}function H2(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function V2(e,t){jc=ad=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function W2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ov(e,n)}}var sd={readContext:vi,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},G5={readContext:vi,useCallback:function(e,t){return Ui().memoizedState=[e,t===void 0?null:t],e},useContext:vi,useEffect:L1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bf(4194308,4,I2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bf(4194308,4,e,t)},useInsertionEffect:function(e,t){return bf(4,2,e,t)},useMemo:function(e,t){var n=Ui();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ui();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=W5.bind(null,sn,e),[r.memoizedState,e]},useRef:function(e){var t=Ui();return e={current:e},t.memoizedState=e},useState:O1,useDebugValue:Pv,useDeferredValue:function(e){return Ui().memoizedState=e},useTransition:function(){var e=O1(!1),t=e[0];return e=V5.bind(null,e[1]),Ui().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sn,i=Ui();if(tn){if(n===void 0)throw Error(he(407));n=n()}else{if(n=t(),Wn===null)throw Error(he(349));ms&30||P2(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,L1(A2.bind(null,r,o,e),[e]),r.flags|=2048,cu(9,T2.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ui(),t=Wn.identifierPrefix;if(tn){var n=vo,r=yo;n=(r&~(1<<32-Di(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=su++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=H5++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},K5={readContext:vi,useCallback:j2,useContext:vi,useEffect:kv,useImperativeHandle:B2,useInsertionEffect:O2,useLayoutEffect:L2,useMemo:$2,useReducer:Hm,useRef:D2,useState:function(){return Hm(lu)},useDebugValue:Pv,useDeferredValue:function(e){var t=xi();return F2(t,Ln.memoizedState,e)},useTransition:function(){var e=Hm(lu)[0],t=xi().memoizedState;return[e,t]},useMutableSource:R2,useSyncExternalStore:k2,useId:z2,unstable_isNewReconciler:!1},Y5={readContext:vi,useCallback:j2,useContext:vi,useEffect:kv,useImperativeHandle:B2,useInsertionEffect:O2,useLayoutEffect:L2,useMemo:$2,useReducer:Vm,useRef:D2,useState:function(){return Vm(lu)},useDebugValue:Pv,useDeferredValue:function(e){var t=xi();return Ln===null?t.memoizedState=e:F2(t,Ln.memoizedState,e)},useTransition:function(){var e=Vm(lu)[0],t=xi().memoizedState;return[e,t]},useMutableSource:R2,useSyncExternalStore:k2,useId:z2,unstable_isNewReconciler:!1};function Ai(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Yg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ln({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fd={isMounted:function(e){return(e=e._reactInternals)?bs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xr(),i=fa(e),o=wo(r,i);o.payload=t,n!=null&&(o.callback=n),t=ua(e,o,i),t!==null&&(Oi(t,e,i,r),wf(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xr(),i=fa(e),o=wo(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ua(e,o,i),t!==null&&(Oi(t,e,i,r),wf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xr(),r=fa(e),i=wo(n,r);i.tag=2,t!=null&&(i.callback=t),t=ua(e,i,r),t!==null&&(Oi(t,e,r,n),wf(t,e,r))}};function I1(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!tu(n,r)||!tu(i,o):!0}function U2(e,t,n){var r=!1,i=ga,o=t.contextType;return typeof o=="object"&&o!==null?o=vi(o):(i=Lr(t)?ds:ur.current,r=t.contextTypes,o=(r=r!=null)?vl(e,i):ga),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function B1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fd.enqueueReplaceState(t,t.state,null)}function qg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},_v(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=vi(o):(o=Lr(t)?ds:ur.current,i.context=vl(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Yg(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Fd.enqueueReplaceState(i,i.state,null),id(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function El(e,t){try{var n="",r=t;do n+=E3(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Wm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var q5=typeof WeakMap=="function"?WeakMap:Map;function G2(e,t,n){n=wo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cd||(cd=!0,ay=r),Xg(e,t)},n}function K2(e,t,n){n=wo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Xg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Xg(e,t),typeof r!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function j1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new q5;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=cM.bind(null,e,t,n),t.then(e,e))}function $1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function F1(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wo(-1,1),t.tag=2,ua(n,t,1))),n.lanes|=1),e)}var X5=To.ReactCurrentOwner,Nr=!1;function yr(e,t,n,r){t.child=e===null?E2(t,null,n,r):_l(t,e.child,n,r)}function z1(e,t,n,r,i){n=n.render;var o=t.ref;return ml(t,i),r=Cv(e,t,n,r,o,i),n=Rv(),e!==null&&!Nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Po(e,t,i)):(tn&&n&&dv(t),t.flags|=1,yr(e,t,r,i),t.child)}function H1(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Iv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Y2(e,t,o,r,i)):(e=kf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:tu,n(a,r)&&e.ref===t.ref)return Po(e,t,i)}return t.flags|=1,e=da(o,r),e.ref=t.ref,e.return=t,t.child=e}function Y2(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(tu(o,r)&&e.ref===t.ref)if(Nr=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Nr=!0);else return t.lanes=e.lanes,Po(e,t,i)}return Qg(e,t,n,r,i)}function q2(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(ul,Gr),Gr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(ul,Gr),Gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Vt(ul,Gr),Gr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Vt(ul,Gr),Gr|=r;return yr(e,t,i,n),t.child}function X2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qg(e,t,n,r,i){var o=Lr(n)?ds:ur.current;return o=vl(t,o),ml(t,i),n=Cv(e,t,n,r,o,i),r=Rv(),e!==null&&!Nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Po(e,t,i)):(tn&&r&&dv(t),t.flags|=1,yr(e,t,n,i),t.child)}function V1(e,t,n,r,i){if(Lr(n)){var o=!0;Jf(t)}else o=!1;if(ml(t,i),t.stateNode===null)Sf(e,t),U2(t,n,r),qg(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=vi(u):(u=Lr(n)?ds:ur.current,u=vl(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==u)&&B1(t,a,r,u),Jo=!1;var g=t.memoizedState;a.state=g,id(t,r,a,i),l=t.memoizedState,s!==r||g!==l||Or.current||Jo?(typeof f=="function"&&(Yg(t,n,f,r),l=t.memoizedState),(s=Jo||I1(t,n,s,r,g,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,S2(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ai(t.type,s),a.props=u,d=t.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=vi(l):(l=Lr(n)?ds:ur.current,l=vl(t,l));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||g!==l)&&B1(t,a,r,l),Jo=!1,g=t.memoizedState,a.state=g,id(t,r,a,i);var v=t.memoizedState;s!==d||g!==v||Or.current||Jo?(typeof y=="function"&&(Yg(t,n,y,r),v=t.memoizedState),(u=Jo||I1(t,n,u,r,g,v,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Zg(e,t,n,r,o,i)}function Zg(e,t,n,r,i,o){X2(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&P1(t,n,!1),Po(e,t,o);r=t.stateNode,X5.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=_l(t,e.child,null,o),t.child=_l(t,null,s,o)):yr(e,t,s,o),t.memoizedState=r.state,i&&P1(t,n,!0),t.child}function Q2(e){var t=e.stateNode;t.pendingContext?k1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&k1(e,t.context,!1),wv(e,t.containerInfo)}function W1(e,t,n,r,i){return xl(),mv(i),t.flags|=256,yr(e,t,n,r),t.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function ey(e){return{baseLanes:e,cachePool:null,transitions:null}}function Z2(e,t,n){var r=t.pendingProps,i=on.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Vt(on,i&1),e===null)return Gg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Vd(a,r,0,null),e=ps(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ey(n),t.memoizedState=Jg,e):Tv(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Q5(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=da(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=da(s,o):(o=ps(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ey(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Jg,r}return o=e.child,e=o.sibling,r=da(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tv(e,t){return t=Vd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bp(e,t,n,r){return r!==null&&mv(r),_l(t,e.child,null,n),e=Tv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q5(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Wm(Error(he(422))),Bp(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Vd({mode:"visible",children:r.children},i,0,null),o=ps(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&_l(t,e.child,null,a),t.child.memoizedState=ey(a),t.memoizedState=Jg,o);if(!(t.mode&1))return Bp(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(he(419)),r=Wm(o,r,void 0),Bp(e,t,a,r)}if(s=(a&e.childLanes)!==0,Nr||s){if(r=Wn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ko(e,i),Oi(r,e,i,-1))}return Lv(),r=Wm(Error(he(421))),Bp(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=uM.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Kr=ca(i.nextSibling),Yr=t,tn=!0,Ni=null,e!==null&&(fi[di++]=yo,fi[di++]=vo,fi[di++]=hs,yo=e.id,vo=e.overflow,hs=t),t=Tv(t,r.children),t.flags|=4096,t)}function U1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kg(e.return,t,n)}function Um(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function J2(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(yr(e,t,r.children,n),r=on.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U1(e,n,t);else if(e.tag===19)U1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Vt(on,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&od(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Um(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&od(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Um(t,!0,n,null,o);break;case"together":Um(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Po(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(he(153));if(t.child!==null){for(e=t.child,n=da(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=da(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z5(e,t,n){switch(t.tag){case 3:Q2(t),xl();break;case 5:C2(t);break;case 1:Lr(t.type)&&Jf(t);break;case 4:wv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Vt(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Vt(on,on.current&1),t.flags|=128,null):n&t.child.childLanes?Z2(e,t,n):(Vt(on,on.current&1),e=Po(e,t,n),e!==null?e.sibling:null);Vt(on,on.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return J2(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vt(on,on.current),r)break;return null;case 22:case 23:return t.lanes=0,q2(e,t,n)}return Po(e,t,n)}var eC,ty,tC,nC;eC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ty=function(){};tC=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ss(Zi.current);var o=null;switch(n){case"input":i=bg(e,i),r=bg(e,r),o=[];break;case"select":i=ln({},i,{value:void 0}),r=ln({},r,{value:void 0}),o=[];break;case"textarea":i=Rg(e,i),r=Rg(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Qf)}Pg(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Gt("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};nC=function(e,t,n,r){n!==r&&(t.flags|=4)};function hc(e,t){if(!tn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function J5(e,t,n){var r=t.pendingProps;switch(hv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(t),null;case 1:return Lr(t.type)&&Zf(),ar(t),null;case 3:return r=t.stateNode,wl(),Yt(Or),Yt(ur),bv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Lp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ni!==null&&(cy(Ni),Ni=null))),ty(e,t),ar(t),null;case 5:Ev(t);var i=ss(au.current);if(n=t.type,e!==null&&t.stateNode!=null)tC(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(he(166));return ar(t),null}if(e=ss(Zi.current),Lp(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[qi]=t,r[iu]=o,e=(t.mode&1)!==0,n){case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":case"embed":Gt("load",r);break;case"video":case"audio":for(i=0;i<Mc.length;i++)Gt(Mc[i],r);break;case"source":Gt("error",r);break;case"img":case"image":case"link":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"input":e1(r,o),Gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Gt("invalid",r);break;case"textarea":n1(r,o),Gt("invalid",r)}Pg(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Op(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Op(r.textContent,s,e),i=["children",""+s]):Yc.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Gt("scroll",r)}switch(n){case"input":Rp(r),t1(r,o,!0);break;case"textarea":Rp(r),r1(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Qf)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=AS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[qi]=t,e[iu]=r,eC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Tg(n,r),n){case"dialog":Gt("cancel",e),Gt("close",e),i=r;break;case"iframe":case"object":case"embed":Gt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mc.length;i++)Gt(Mc[i],e);i=r;break;case"source":Gt("error",e),i=r;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),i=r;break;case"details":Gt("toggle",e),i=r;break;case"input":e1(e,r),i=bg(e,r),Gt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ln({},r,{value:void 0}),Gt("invalid",e);break;case"textarea":n1(e,r),i=Rg(e,r),Gt("invalid",e);break;default:i=r}Pg(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?DS(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&MS(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qc(e,l):typeof l=="number"&&qc(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yc.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Gt("scroll",e):l!=null&&Jy(e,o,l,a))}switch(n){case"input":Rp(e),t1(e,r,!1);break;case"textarea":Rp(e),r1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ma(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?pl(e,!!r.multiple,o,!1):r.defaultValue!=null&&pl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Qf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ar(t),null;case 6:if(e&&t.stateNode!=null)nC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(he(166));if(n=ss(au.current),ss(Zi.current),Lp(t)){if(r=t.stateNode,n=t.memoizedProps,r[qi]=t,(o=r.nodeValue!==n)&&(e=Yr,e!==null))switch(e.tag){case 3:Op(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Op(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qi]=t,t.stateNode=r}return ar(t),null;case 13:if(Yt(on),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&Kr!==null&&t.mode&1&&!(t.flags&128))_2(),xl(),t.flags|=98560,o=!1;else if(o=Lp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(he(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(he(317));o[qi]=t}else xl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ar(t),o=!1}else Ni!==null&&(cy(Ni),Ni=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||on.current&1?Bn===0&&(Bn=3):Lv())),t.updateQueue!==null&&(t.flags|=4),ar(t),null);case 4:return wl(),ty(e,t),e===null&&nu(t.stateNode.containerInfo),ar(t),null;case 10:return vv(t.type._context),ar(t),null;case 17:return Lr(t.type)&&Zf(),ar(t),null;case 19:if(Yt(on),o=t.memoizedState,o===null)return ar(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)hc(o,!1);else{if(Bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=od(e),a!==null){for(t.flags|=128,hc(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vt(on,on.current&1|2),t.child}e=e.sibling}o.tail!==null&&bn()>bl&&(t.flags|=128,r=!0,hc(o,!1),t.lanes=4194304)}else{if(!r)if(e=od(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!tn)return ar(t),null}else 2*bn()-o.renderingStartTime>bl&&n!==1073741824&&(t.flags|=128,r=!0,hc(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=bn(),t.sibling=null,n=on.current,Vt(on,r?n&1|2:n&1),t):(ar(t),null);case 22:case 23:return Ov(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Gr&1073741824&&(ar(t),t.subtreeFlags&6&&(t.flags|=8192)):ar(t),null;case 24:return null;case 25:return null}throw Error(he(156,t.tag))}function eM(e,t){switch(hv(t),t.tag){case 1:return Lr(t.type)&&Zf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wl(),Yt(Or),Yt(ur),bv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ev(t),null;case 13:if(Yt(on),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(he(340));xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yt(on),null;case 4:return wl(),null;case 10:return vv(t.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var jp=!1,sr=!1,tM=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function cl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fn(e,t,r)}else n.current=null}function ny(e,t,n){try{n()}catch(r){fn(e,t,r)}}var G1=!1;function nM(e,t){if($g=Yf,e=s2(),fv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,f=0,d=e,g=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(y=d.firstChild)!==null;)g=d,d=y;for(;;){if(d===e)break t;if(g===n&&++u===i&&(s=a),g===o&&++f===r&&(l=a),(y=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=y}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fg={focusedElem:e,selectionRange:n},Yf=!1,Fe=t;Fe!==null;)if(t=Fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fe=e;else for(;Fe!==null;){t=Fe;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,C=v.memoizedState,P=t.stateNode,R=P.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ai(t.type,x),C);P.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(b){fn(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Fe=e;break}Fe=t.return}return v=G1,G1=!1,v}function $c(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&ny(t,n,o)}i=i.next}while(i!==r)}}function zd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ry(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rC(e){var t=e.alternate;t!==null&&(e.alternate=null,rC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qi],delete t[iu],delete t[Vg],delete t[j5],delete t[$5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iC(e){return e.tag===5||e.tag===3||e.tag===4}function K1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qf));else if(r!==4&&(e=e.child,e!==null))for(iy(e,t,n),e=e.sibling;e!==null;)iy(e,t,n),e=e.sibling}function oy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(oy(e,t,n),e=e.sibling;e!==null;)oy(e,t,n),e=e.sibling}var Yn=null,Mi=!1;function Uo(e,t,n){for(n=n.child;n!==null;)oC(e,t,n),n=n.sibling}function oC(e,t,n){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(Dd,n)}catch{}switch(n.tag){case 5:sr||cl(n,t);case 6:var r=Yn,i=Mi;Yn=null,Uo(e,t,n),Yn=r,Mi=i,Yn!==null&&(Mi?(e=Yn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(Mi?(e=Yn,n=n.stateNode,e.nodeType===8?jm(e.parentNode,n):e.nodeType===1&&jm(e,n),Jc(e)):jm(Yn,n.stateNode));break;case 4:r=Yn,i=Mi,Yn=n.stateNode.containerInfo,Mi=!0,Uo(e,t,n),Yn=r,Mi=i;break;case 0:case 11:case 14:case 15:if(!sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ny(n,t,a),i=i.next}while(i!==r)}Uo(e,t,n);break;case 1:if(!sr&&(cl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){fn(n,t,s)}Uo(e,t,n);break;case 21:Uo(e,t,n);break;case 22:n.mode&1?(sr=(r=sr)||n.memoizedState!==null,Uo(e,t,n),sr=r):Uo(e,t,n);break;default:Uo(e,t,n)}}function Y1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tM),t.forEach(function(r){var i=pM.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ti(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Yn=s.stateNode,Mi=!1;break e;case 3:Yn=s.stateNode.containerInfo,Mi=!0;break e;case 4:Yn=s.stateNode.containerInfo,Mi=!0;break e}s=s.return}if(Yn===null)throw Error(he(160));oC(o,a,i),Yn=null,Mi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){fn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aC(t,e),t=t.sibling}function aC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ti(t,e),Vi(e),r&4){try{$c(3,e,e.return),zd(3,e)}catch(x){fn(e,e.return,x)}try{$c(5,e,e.return)}catch(x){fn(e,e.return,x)}}break;case 1:Ti(t,e),Vi(e),r&512&&n!==null&&cl(n,n.return);break;case 5:if(Ti(t,e),Vi(e),r&512&&n!==null&&cl(n,n.return),e.flags&32){var i=e.stateNode;try{qc(i,"")}catch(x){fn(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&PS(i,o),Tg(s,a);var u=Tg(s,o);for(a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?DS(i,d):f==="dangerouslySetInnerHTML"?MS(i,d):f==="children"?qc(i,d):Jy(i,f,d,u)}switch(s){case"input":Sg(i,o);break;case"textarea":TS(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?pl(i,!!o.multiple,y,!1):g!==!!o.multiple&&(o.defaultValue!=null?pl(i,!!o.multiple,o.defaultValue,!0):pl(i,!!o.multiple,o.multiple?[]:"",!1))}i[iu]=o}catch(x){fn(e,e.return,x)}}break;case 6:if(Ti(t,e),Vi(e),r&4){if(e.stateNode===null)throw Error(he(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(x){fn(e,e.return,x)}}break;case 3:if(Ti(t,e),Vi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jc(t.containerInfo)}catch(x){fn(e,e.return,x)}break;case 4:Ti(t,e),Vi(e);break;case 13:Ti(t,e),Vi(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Nv=bn())),r&4&&Y1(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(sr=(u=sr)||f,Ti(t,e),sr=u):Ti(t,e),Vi(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Fe=e,f=e.child;f!==null;){for(d=Fe=f;Fe!==null;){switch(g=Fe,y=g.child,g.tag){case 0:case 11:case 14:case 15:$c(4,g,g.return);break;case 1:cl(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){fn(r,n,x)}}break;case 5:cl(g,g.return);break;case 22:if(g.memoizedState!==null){X1(d);continue}}y!==null?(y.return=g,Fe=y):X1(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=NS("display",a))}catch(x){fn(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){fn(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ti(t,e),Vi(e),r&4&&Y1(e);break;case 21:break;default:Ti(t,e),Vi(e)}}function Vi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(iC(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qc(i,""),r.flags&=-33);var o=K1(e);oy(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=K1(e);iy(e,s,a);break;default:throw Error(he(161))}}catch(l){fn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rM(e,t,n){Fe=e,sC(e)}function sC(e,t,n){for(var r=(e.mode&1)!==0;Fe!==null;){var i=Fe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jp;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||sr;s=jp;var u=sr;if(jp=a,(sr=l)&&!u)for(Fe=i;Fe!==null;)a=Fe,l=a.child,a.tag===22&&a.memoizedState!==null?Q1(i):l!==null?(l.return=a,Fe=l):Q1(i);for(;o!==null;)Fe=o,sC(o),o=o.sibling;Fe=i,jp=s,sr=u}q1(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Fe=o):q1(e)}}function q1(e){for(;Fe!==null;){var t=Fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sr||zd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!sr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ai(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&D1(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}D1(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Jc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}sr||t.flags&512&&ry(t)}catch(g){fn(t,t.return,g)}}if(t===e){Fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Fe=n;break}Fe=t.return}}function X1(e){for(;Fe!==null;){var t=Fe;if(t===e){Fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Fe=n;break}Fe=t.return}}function Q1(e){for(;Fe!==null;){var t=Fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zd(4,t)}catch(l){fn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){fn(t,i,l)}}var o=t.return;try{ry(t)}catch(l){fn(t,o,l)}break;case 5:var a=t.return;try{ry(t)}catch(l){fn(t,a,l)}}}catch(l){fn(t,t.return,l)}if(t===e){Fe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Fe=s;break}Fe=t.return}}var iM=Math.ceil,ld=To.ReactCurrentDispatcher,Av=To.ReactCurrentOwner,yi=To.ReactCurrentBatchConfig,Lt=0,Wn=null,An=null,Qn=0,Gr=0,ul=wa(0),Bn=0,uu=null,gs=0,Hd=0,Mv=0,Fc=null,Mr=null,Nv=0,bl=1/0,ho=null,cd=!1,ay=null,pa=null,$p=!1,ia=null,ud=0,zc=0,sy=null,Cf=-1,Rf=0;function xr(){return Lt&6?bn():Cf!==-1?Cf:Cf=bn()}function fa(e){return e.mode&1?Lt&2&&Qn!==0?Qn&-Qn:z5.transition!==null?(Rf===0&&(Rf=US()),Rf):(e=$t,e!==0||(e=window.event,e=e===void 0?16:ZS(e.type)),e):1}function Oi(e,t,n,r){if(50<zc)throw zc=0,sy=null,Error(he(185));Eu(e,n,r),(!(Lt&2)||e!==Wn)&&(e===Wn&&(!(Lt&2)&&(Hd|=n),Bn===4&&na(e,Qn)),Ir(e,r),n===1&&Lt===0&&!(t.mode&1)&&(bl=bn()+500,jd&&Ea()))}function Ir(e,t){var n=e.callbackNode;z3(e,t);var r=Kf(e,e===Wn?Qn:0);if(r===0)n!==null&&a1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&a1(n),t===1)e.tag===0?F5(Z1.bind(null,e)):y2(Z1.bind(null,e)),I5(function(){!(Lt&6)&&Ea()}),n=null;else{switch(GS(r)){case 1:n=iv;break;case 4:n=VS;break;case 16:n=Gf;break;case 536870912:n=WS;break;default:n=Gf}n=mC(n,lC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lC(e,t){if(Cf=-1,Rf=0,Lt&6)throw Error(he(327));var n=e.callbackNode;if(gl()&&e.callbackNode!==n)return null;var r=Kf(e,e===Wn?Qn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=pd(e,r);else{t=r;var i=Lt;Lt|=2;var o=uC();(Wn!==e||Qn!==t)&&(ho=null,bl=bn()+500,us(e,t));do try{sM();break}catch(s){cC(e,s)}while(!0);yv(),ld.current=o,Lt=i,An!==null?t=0:(Wn=null,Qn=0,t=Bn)}if(t!==0){if(t===2&&(i=Og(e),i!==0&&(r=i,t=ly(e,i))),t===1)throw n=uu,us(e,0),na(e,r),Ir(e,bn()),n;if(t===6)na(e,r);else{if(i=e.current.alternate,!(r&30)&&!oM(i)&&(t=pd(e,r),t===2&&(o=Og(e),o!==0&&(r=o,t=ly(e,o))),t===1))throw n=uu,us(e,0),na(e,r),Ir(e,bn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(he(345));case 2:ts(e,Mr,ho);break;case 3:if(na(e,r),(r&130023424)===r&&(t=Nv+500-bn(),10<t)){if(Kf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){xr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hg(ts.bind(null,e,Mr,ho),t);break}ts(e,Mr,ho);break;case 4:if(na(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Di(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=bn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iM(r/1960))-r,10<r){e.timeoutHandle=Hg(ts.bind(null,e,Mr,ho),r);break}ts(e,Mr,ho);break;case 5:ts(e,Mr,ho);break;default:throw Error(he(329))}}}return Ir(e,bn()),e.callbackNode===n?lC.bind(null,e):null}function ly(e,t){var n=Fc;return e.current.memoizedState.isDehydrated&&(us(e,t).flags|=256),e=pd(e,t),e!==2&&(t=Mr,Mr=n,t!==null&&cy(t)),e}function cy(e){Mr===null?Mr=e:Mr.push.apply(Mr,e)}function oM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Bi(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function na(e,t){for(t&=~Mv,t&=~Hd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Di(t),r=1<<n;e[n]=-1,t&=~r}}function Z1(e){if(Lt&6)throw Error(he(327));gl();var t=Kf(e,0);if(!(t&1))return Ir(e,bn()),null;var n=pd(e,t);if(e.tag!==0&&n===2){var r=Og(e);r!==0&&(t=r,n=ly(e,r))}if(n===1)throw n=uu,us(e,0),na(e,t),Ir(e,bn()),n;if(n===6)throw Error(he(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ts(e,Mr,ho),Ir(e,bn()),null}function Dv(e,t){var n=Lt;Lt|=1;try{return e(t)}finally{Lt=n,Lt===0&&(bl=bn()+500,jd&&Ea())}}function ys(e){ia!==null&&ia.tag===0&&!(Lt&6)&&gl();var t=Lt;Lt|=1;var n=yi.transition,r=$t;try{if(yi.transition=null,$t=1,e)return e()}finally{$t=r,yi.transition=n,Lt=t,!(Lt&6)&&Ea()}}function Ov(){Gr=ul.current,Yt(ul)}function us(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,L5(n)),An!==null)for(n=An.return;n!==null;){var r=n;switch(hv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zf();break;case 3:wl(),Yt(Or),Yt(ur),bv();break;case 5:Ev(r);break;case 4:wl();break;case 13:Yt(on);break;case 19:Yt(on);break;case 10:vv(r.type._context);break;case 22:case 23:Ov()}n=n.return}if(Wn=e,An=e=da(e.current,null),Qn=Gr=t,Bn=0,uu=null,Mv=Hd=gs=0,Mr=Fc=null,as!==null){for(t=0;t<as.length;t++)if(n=as[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}as=null}return e}function cC(e,t){do{var n=An;try{if(yv(),Ef.current=sd,ad){for(var r=sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ad=!1}if(ms=0,Hn=Ln=sn=null,jc=!1,su=0,Av.current=null,n===null||n.return===null){Bn=1,uu=t,An=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Qn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=$1(a);if(y!==null){y.flags&=-257,F1(y,a,s,o,t),y.mode&1&&j1(o,u,t),t=y,l=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(l),t.updateQueue=x}else v.add(l);break e}else{if(!(t&1)){j1(o,u,t),Lv();break e}l=Error(he(426))}}else if(tn&&s.mode&1){var C=$1(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),F1(C,a,s,o,t),mv(El(l,s));break e}}o=l=El(l,s),Bn!==4&&(Bn=2),Fc===null?Fc=[o]:Fc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var P=G2(o,l,t);N1(o,P);break e;case 1:s=l;var R=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(pa===null||!pa.has(E)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=K2(o,s,t);N1(o,b);break e}}o=o.return}while(o!==null)}fC(n)}catch(D){t=D,An===n&&n!==null&&(An=n=n.return);continue}break}while(!0)}function uC(){var e=ld.current;return ld.current=sd,e===null?sd:e}function Lv(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Wn===null||!(gs&268435455)&&!(Hd&268435455)||na(Wn,Qn)}function pd(e,t){var n=Lt;Lt|=2;var r=uC();(Wn!==e||Qn!==t)&&(ho=null,us(e,t));do try{aM();break}catch(i){cC(e,i)}while(!0);if(yv(),Lt=n,ld.current=r,An!==null)throw Error(he(261));return Wn=null,Qn=0,Bn}function aM(){for(;An!==null;)pC(An)}function sM(){for(;An!==null&&!N3();)pC(An)}function pC(e){var t=hC(e.alternate,e,Gr);e.memoizedProps=e.pendingProps,t===null?fC(e):An=t,Av.current=null}function fC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eM(n,t),n!==null){n.flags&=32767,An=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bn=6,An=null;return}}else if(n=J5(n,t,Gr),n!==null){An=n;return}if(t=t.sibling,t!==null){An=t;return}An=t=e}while(t!==null);Bn===0&&(Bn=5)}function ts(e,t,n){var r=$t,i=yi.transition;try{yi.transition=null,$t=1,lM(e,t,n,r)}finally{yi.transition=i,$t=r}return null}function lM(e,t,n,r){do gl();while(ia!==null);if(Lt&6)throw Error(he(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(he(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(H3(e,o),e===Wn&&(An=Wn=null,Qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$p||($p=!0,mC(Gf,function(){return gl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=yi.transition,yi.transition=null;var a=$t;$t=1;var s=Lt;Lt|=4,Av.current=null,nM(e,n),aC(n,e),P5(Fg),Yf=!!$g,Fg=$g=null,e.current=n,rM(n),D3(),Lt=s,$t=a,yi.transition=o}else e.current=n;if($p&&($p=!1,ia=e,ud=i),o=e.pendingLanes,o===0&&(pa=null),I3(n.stateNode),Ir(e,bn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cd)throw cd=!1,e=ay,ay=null,e;return ud&1&&e.tag!==0&&gl(),o=e.pendingLanes,o&1?e===sy?zc++:(zc=0,sy=e):zc=0,Ea(),null}function gl(){if(ia!==null){var e=GS(ud),t=yi.transition,n=$t;try{if(yi.transition=null,$t=16>e?16:e,ia===null)var r=!1;else{if(e=ia,ia=null,ud=0,Lt&6)throw Error(he(331));var i=Lt;for(Lt|=4,Fe=e.current;Fe!==null;){var o=Fe,a=o.child;if(Fe.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Fe=u;Fe!==null;){var f=Fe;switch(f.tag){case 0:case 11:case 15:$c(8,f,o)}var d=f.child;if(d!==null)d.return=f,Fe=d;else for(;Fe!==null;){f=Fe;var g=f.sibling,y=f.return;if(rC(f),f===u){Fe=null;break}if(g!==null){g.return=y,Fe=g;break}Fe=y}}}var v=o.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}Fe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Fe=a;else e:for(;Fe!==null;){if(o=Fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$c(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,Fe=P;break e}Fe=o.return}}var R=e.current;for(Fe=R;Fe!==null;){a=Fe;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,Fe=E;else e:for(a=R;Fe!==null;){if(s=Fe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:zd(9,s)}}catch(D){fn(s,s.return,D)}if(s===a){Fe=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,Fe=b;break e}Fe=s.return}}if(Lt=i,Ea(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(Dd,e)}catch{}r=!0}return r}finally{$t=n,yi.transition=t}}return!1}function J1(e,t,n){t=El(n,t),t=G2(e,t,1),e=ua(e,t,1),t=xr(),e!==null&&(Eu(e,1,t),Ir(e,t))}function fn(e,t,n){if(e.tag===3)J1(e,e,n);else for(;t!==null;){if(t.tag===3){J1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pa===null||!pa.has(r))){e=El(n,e),e=K2(t,e,1),t=ua(t,e,1),e=xr(),t!==null&&(Eu(t,1,e),Ir(t,e));break}}t=t.return}}function cM(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xr(),e.pingedLanes|=e.suspendedLanes&n,Wn===e&&(Qn&n)===n&&(Bn===4||Bn===3&&(Qn&130023424)===Qn&&500>bn()-Nv?us(e,0):Mv|=n),Ir(e,t)}function dC(e,t){t===0&&(e.mode&1?(t=Tp,Tp<<=1,!(Tp&130023424)&&(Tp=4194304)):t=1);var n=xr();e=ko(e,t),e!==null&&(Eu(e,t,n),Ir(e,n))}function uM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dC(e,n)}function pM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(t),dC(e,n)}var hC;hC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Or.current)Nr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nr=!1,Z5(e,t,n);Nr=!!(e.flags&131072)}else Nr=!1,tn&&t.flags&1048576&&v2(t,td,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sf(e,t),e=t.pendingProps;var i=vl(t,ur.current);ml(t,n),i=Cv(null,t,r,e,i,n);var o=Rv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(r)?(o=!0,Jf(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_v(t),i.updater=Fd,t.stateNode=i,i._reactInternals=t,qg(t,r,e,n),t=Zg(null,t,r,!0,o,n)):(t.tag=0,tn&&o&&dv(t),yr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=dM(r),e=Ai(r,e),i){case 0:t=Qg(null,t,r,e,n);break e;case 1:t=V1(null,t,r,e,n);break e;case 11:t=z1(null,t,r,e,n);break e;case 14:t=H1(null,t,r,Ai(r.type,e),n);break e}throw Error(he(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ai(r,i),Qg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ai(r,i),V1(e,t,r,i,n);case 3:e:{if(Q2(t),e===null)throw Error(he(387));r=t.pendingProps,o=t.memoizedState,i=o.element,S2(e,t),id(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=El(Error(he(423)),t),t=W1(e,t,r,n,i);break e}else if(r!==i){i=El(Error(he(424)),t),t=W1(e,t,r,n,i);break e}else for(Kr=ca(t.stateNode.containerInfo.firstChild),Yr=t,tn=!0,Ni=null,n=E2(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xl(),r===i){t=Po(e,t,n);break e}yr(e,t,r,n)}t=t.child}return t;case 5:return C2(t),e===null&&Gg(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,zg(r,i)?a=null:o!==null&&zg(r,o)&&(t.flags|=32),X2(e,t),yr(e,t,a,n),t.child;case 6:return e===null&&Gg(t),null;case 13:return Z2(e,t,n);case 4:return wv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_l(t,null,r,n):yr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ai(r,i),z1(e,t,r,i,n);case 7:return yr(e,t,t.pendingProps,n),t.child;case 8:return yr(e,t,t.pendingProps.children,n),t.child;case 12:return yr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Vt(nd,r._currentValue),r._currentValue=a,o!==null)if(Bi(o.value,a)){if(o.children===i.children&&!Or.current){t=Po(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=wo(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Kg(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(he(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Kg(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}yr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ml(t,n),i=vi(i),r=r(i),t.flags|=1,yr(e,t,r,n),t.child;case 14:return r=t.type,i=Ai(r,t.pendingProps),i=Ai(r.type,i),H1(e,t,r,i,n);case 15:return Y2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ai(r,i),Sf(e,t),t.tag=1,Lr(r)?(e=!0,Jf(t)):e=!1,ml(t,n),U2(t,r,i),qg(t,r,i,n),Zg(null,t,r,!0,e,n);case 19:return J2(e,t,n);case 22:return q2(e,t,n)}throw Error(he(156,t.tag))};function mC(e,t){return HS(e,t)}function fM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,t,n,r){return new fM(e,t,n,r)}function Iv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dM(e){if(typeof e=="function")return Iv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tv)return 11;if(e===nv)return 14}return 2}function da(e,t){var n=e.alternate;return n===null?(n=mi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kf(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Iv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case el:return ps(n.children,i,o,t);case ev:a=8,i|=8;break;case xg:return e=mi(12,n,t,i|2),e.elementType=xg,e.lanes=o,e;case _g:return e=mi(13,n,t,i),e.elementType=_g,e.lanes=o,e;case wg:return e=mi(19,n,t,i),e.elementType=wg,e.lanes=o,e;case CS:return Vd(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bS:a=10;break e;case SS:a=9;break e;case tv:a=11;break e;case nv:a=14;break e;case Zo:a=16,r=null;break e}throw Error(he(130,e==null?e:typeof e,""))}return t=mi(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ps(e,t,n,r){return e=mi(7,e,r,t),e.lanes=n,e}function Vd(e,t,n,r){return e=mi(22,e,r,t),e.elementType=CS,e.lanes=n,e.stateNode={isHidden:!1},e}function Gm(e,t,n){return e=mi(6,e,null,t),e.lanes=n,e}function Km(e,t,n){return t=mi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hM(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=km(0),this.expirationTimes=km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=km(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bv(e,t,n,r,i,o,a,s,l){return e=new hM(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=mi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(o),e}function mM(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gC(e){if(!e)return ga;e=e._reactInternals;e:{if(bs(e)!==e||e.tag!==1)throw Error(he(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(he(171))}if(e.tag===1){var n=e.type;if(Lr(n))return g2(e,n,t)}return t}function yC(e,t,n,r,i,o,a,s,l){return e=Bv(n,r,!0,e,i,o,a,s,l),e.context=gC(null),n=e.current,r=xr(),i=fa(n),o=wo(r,i),o.callback=t??null,ua(n,o,i),e.current.lanes=i,Eu(e,i,r),Ir(e,r),e}function Wd(e,t,n,r){var i=t.current,o=xr(),a=fa(i);return n=gC(n),t.context===null?t.context=n:t.pendingContext=n,t=wo(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ua(i,t,a),e!==null&&(Oi(e,i,a,o),wf(e,i,a)),a}function fd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ew(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jv(e,t){ew(e,t),(e=e.alternate)&&ew(e,t)}function gM(){return null}var vC=typeof reportError=="function"?reportError:function(e){console.error(e)};function $v(e){this._internalRoot=e}Ud.prototype.render=$v.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(he(409));Wd(e,t,null,null)};Ud.prototype.unmount=$v.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ys(function(){Wd(null,e,null,null)}),t[Ro]=null}};function Ud(e){this._internalRoot=e}Ud.prototype.unstable_scheduleHydration=function(e){if(e){var t=qS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ta.length&&t!==0&&t<ta[n].priority;n++);ta.splice(n,0,e),n===0&&QS(e)}};function Fv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tw(){}function yM(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=fd(a);o.call(u)}}var a=yC(t,r,e,0,null,!1,!1,"",tw);return e._reactRootContainer=a,e[Ro]=a.current,nu(e.nodeType===8?e.parentNode:e),ys(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=fd(l);s.call(u)}}var l=Bv(e,0,!1,null,null,!1,!1,"",tw);return e._reactRootContainer=l,e[Ro]=l.current,nu(e.nodeType===8?e.parentNode:e),ys(function(){Wd(t,l,n,r)}),l}function Kd(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=fd(a);s.call(l)}}Wd(t,a,e,i)}else a=yM(n,t,e,i,r);return fd(a)}KS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ac(t.pendingLanes);n!==0&&(ov(t,n|1),Ir(t,bn()),!(Lt&6)&&(bl=bn()+500,Ea()))}break;case 13:ys(function(){var r=ko(e,1);if(r!==null){var i=xr();Oi(r,e,1,i)}}),jv(e,1)}};av=function(e){if(e.tag===13){var t=ko(e,134217728);if(t!==null){var n=xr();Oi(t,e,134217728,n)}jv(e,134217728)}};YS=function(e){if(e.tag===13){var t=fa(e),n=ko(e,t);if(n!==null){var r=xr();Oi(n,e,t,r)}jv(e,t)}};qS=function(){return $t};XS=function(e,t){var n=$t;try{return $t=e,t()}finally{$t=n}};Mg=function(e,t,n){switch(t){case"input":if(Sg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Bd(r);if(!i)throw Error(he(90));kS(r),Sg(r,i)}}}break;case"textarea":TS(e,n);break;case"select":t=n.value,t!=null&&pl(e,!!n.multiple,t,!1)}};IS=Dv;BS=ys;var vM={usingClientEntryPoint:!1,Events:[Su,il,Bd,OS,LS,Dv]},mc={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xM={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:To.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=FS(e),e===null?null:e.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||gM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fp.isDisabled&&Fp.supportsFiber)try{Dd=Fp.inject(xM),Qi=Fp}catch{}}Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vM;Zr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(t))throw Error(he(200));return mM(e,t,null,n)};Zr.createRoot=function(e,t){if(!Fv(e))throw Error(he(299));var n=!1,r="",i=vC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bv(e,1,!1,null,null,n,!1,r,i),e[Ro]=t.current,nu(e.nodeType===8?e.parentNode:e),new $v(t)};Zr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(he(188)):(e=Object.keys(e).join(","),Error(he(268,e)));return e=FS(t),e=e===null?null:e.stateNode,e};Zr.flushSync=function(e){return ys(e)};Zr.hydrate=function(e,t,n){if(!Gd(t))throw Error(he(200));return Kd(null,e,t,!0,n)};Zr.hydrateRoot=function(e,t,n){if(!Fv(e))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=vC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=yC(t,null,e,1,n??null,i,!1,o,a),e[Ro]=t.current,nu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ud(t)};Zr.render=function(e,t,n){if(!Gd(t))throw Error(he(200));return Kd(null,e,t,!1,n)};Zr.unmountComponentAtNode=function(e){if(!Gd(e))throw Error(he(40));return e._reactRootContainer?(ys(function(){Kd(null,null,e,!1,function(){e._reactRootContainer=null,e[Ro]=null})}),!0):!1};Zr.unstable_batchedUpdates=Dv;Zr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gd(n))throw Error(he(200));if(e==null||e._reactInternals===void 0)throw Error(he(38));return Kd(e,t,n,!1,r)};Zr.version="18.3.1-next-f1338f8080-20240426";function xC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xC)}catch(e){console.error(e)}}xC(),xS.exports=Zr;var _M=xS.exports,nw=_M;yg.createRoot=nw.createRoot,yg.hydrateRoot=nw.hydrateRoot;const Kt="api",wM=e=>{const t=setInterval(()=>{const n=e.querySelector(".djs-palette");if(n&&(clearInterval(t),!n.querySelector(".palette-handle"))){const r=document.createElement("div");r.className="palette-handle",n.prepend(r);let i=!1,o,a,s,l;r.addEventListener("mousedown",d=>{i=!0,o=d.clientX,a=d.clientY;const g=n.getBoundingClientRect();s=g.left,l=g.top,d.preventDefault()});const u=d=>{if(!i)return;const g=d.clientX-o,y=d.clientY-a;n.style.left=`${s+g}px`,n.style.top=`${l+y}px`,n.style.right="auto",n.style.bottom="auto"},f=()=>{i=!1};document.addEventListener("mousemove",u),document.addEventListener("mouseup",f)}},500)},zp=()=>{const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${n}/${r} ${i}:${o}:${a}`},EM=e=>{if(!e)return"";const t=e.split(" ");if(t.length===2){const n=t[0].split("/");if(n.length===3)return`${n[1]}/${n[2]} ${t[1]}`}return e},bM=(e,t=.2)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),o=Math.round(n+(255-n)*(1-t)),a=Math.round(r+(255-r)*(1-t)),s=Math.round(i+(255-i)*(1-t)),l=u=>{const f=u.toString(16);return f.length===1?"0"+f:f};return`#${l(o)}${l(a)}${l(s)}`},SM=({onNavigate:e})=>{const[t,n]=Pe.useState([]),[r,i]=Pe.useState("Checking..."),[o,a]=Pe.useState(null),[s,l]=Pe.useState("");Pe.useEffect(()=>{fetch(`${Kt}/processes`).then(x=>x.json()).then(x=>n(x)),u()},[]);const u=()=>{fetch(`${Kt}/pi_status`).then(x=>x.json()).then(x=>i(x.status))},f=x=>{a(x.id),l(x.name)},d=async x=>{if(!s.trim())return;await fetch(`${Kt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:x,name:s})}),a(null);const C=await fetch(`${Kt}/processes`);n(await C.json())},g=x=>{confirm("")&&fetch(`${Kt}/processes/${x}`,{method:"DELETE"}).then(()=>n(t.filter(C=>C.id!==x)))},y=x=>{const C=new Blob([x.xml_content],{type:"text/xml"}),P=URL.createObjectURL(C),R=document.createElement("a");R.href=P,R.download=`${x.name||"process"}.bpmn`,document.body.appendChild(R),R.click(),document.body.removeChild(R)},v=x=>{const C=x.target.files[0];if(!C)return;const P=new FileReader;P.onload=async R=>{const E=R.target.result;if(!E.includes("bpmndi:BPMNDiagram")){alert(" BPMN  (BPMNDiagram)");return}const b=C.name.replace(".bpmn","").replace(".xml","");await fetch(`${Kt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,xml_content:E})});const D=await fetch(`${Kt}/processes`);n(await D.json())},P.readAsText(C)};return H.jsxs("div",{className:"p-8 max-w-7xl mx-auto h-full overflow-y-auto",children:[H.jsxs("div",{className:"flex justify-between items-center mb-10 sticky top-0 bg-[#121212] z-10 py-4 border-b border-white/5",children:[H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-300 font-bold text-xl",children:"S"}),H.jsx("h1",{className:"text-2xl font-medium tracking-wide text-white/90",children:""})]}),H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsxs("button",{onClick:()=>e("editor"),className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-medium shadow-sm transition flex items-center gap-2",children:[H.jsx("span",{className:"text-xl leading-none",children:"+"}),H.jsx("span",{children:""})]}),H.jsxs("label",{className:"cursor-pointer bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-5 py-2 rounded-full text-sm transition flex items-center gap-2",children:[H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),H.jsx("span",{children:" BPMN "}),H.jsx("input",{type:"file",accept:".bpmn,.xml",className:"hidden",onChange:v})]}),H.jsx("button",{onClick:()=>e("settings"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition",title:"",children:H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),H.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[t.map(x=>{const C=x.session_status===0;return H.jsxs("div",{className:`bg-[#1e1e1e] p-6 rounded-2xl border transition-all duration-200 flex flex-col group ${C?"border-[#81c995]/50 shadow-[0_4px_20px_rgba(129,201,149,0.1)]":"border-white/5 hover:border-white/20 hover:shadow-lg"}`,children:[H.jsxs("div",{className:"flex-1 mb-6",children:[H.jsxs("div",{className:"flex justify-between items-start mb-3 h-8",children:[o===x.id?H.jsxs("div",{className:"flex items-center gap-1 w-full",children:[H.jsx("input",{type:"text",value:s,onChange:P=>l(P.target.value),className:"bg-[#2d2d2d] text-white px-2 py-1 rounded border border-white/10 focus:border-[#8ab4f8] outline-none text-sm w-full",autoFocus:!0,onKeyDown:P=>{P.key==="Enter"?d(x.id):P.key==="Escape"&&a(null)}}),H.jsx("button",{onClick:()=>d(x.id),className:"text-[#81c995] hover:text-green-400 px-1",children:""}),H.jsx("button",{onClick:()=>a(null),className:"text-[#f28b82] hover:text-red-400 px-1",children:""})]}):H.jsxs("div",{className:"flex items-center gap-2 group/title w-full",children:[H.jsx("h3",{className:"text-lg font-medium text-white/90 group-hover:text-[#8ab4f8] transition-colors truncate",title:x.name,children:x.name}),H.jsx("button",{onClick:P=>{P.stopPropagation(),f(x)},className:"opacity-0 group-hover/title:opacity-100 text-white/40 hover:text-[#8ab4f8] transition",title:"",children:""})]}),C&&H.jsx("span",{className:"bg-[#81c995]/20 text-[#81c995] text-xs px-3 py-1 rounded-full font-medium ml-2 whitespace-nowrap",children:""})]}),H.jsxs("p",{className:"text-white/40 text-xs",children:[": ",x.updated_at]})]}),H.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[H.jsx("button",{onClick:()=>e("operator",x.id),className:`col-span-2 py-2.5 rounded-full text-sm font-medium transition ${C?"bg-[#81c995] text-[#0f5132] hover:bg-[#a8dab5]":"bg-[#8ab4f8] text-[#002d6f] hover:bg-[#aecbfa]"}`,children:C?"":""}),H.jsx("button",{onClick:()=>!C&&e("editor",x.id),disabled:C,className:`py-2 rounded-full text-sm transition ${C?"bg-[#2d2d2d] text-white/20 cursor-not-allowed":"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80"}`,children:""}),H.jsx("button",{onClick:()=>e("review",x.id),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-2 rounded-full text-sm transition",children:""})]}),H.jsxs("div",{className:"flex gap-2 pt-3 border-t border-white/5",children:[H.jsx("button",{onClick:()=>y(x),className:"flex-1 text-xs text-white/40 hover:text-[#8ab4f8] py-1 transition",children:" BPMN"}),H.jsx("button",{onClick:()=>g(x.id),className:"flex-1 text-xs text-white/40 hover:text-[#f28b82] py-1 transition",children:""})]})]},x.id)}),t.length===0&&H.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-white/30 border-2 border-dashed border-white/10 rounded-3xl",children:[H.jsx("div",{className:"text-6xl mb-4",children:""}),H.jsx("p",{children:" SOP "})]})]})]})};function De(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function CM(e,t){return t={exports:{}},e(t,t.exports),t.exports}var RM=CM(function(e){var t=e.exports=function(n,r){if(r||(r=16),n===void 0&&(n=128),n<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),o=2;i===1/0;o*=2)i=Math.log(Math.pow(2,n/o))/Math.log(r)*o;for(var a=i-Math.floor(i),s="",o=0;o<Math.floor(i);o++){var l=Math.floor(Math.random()*r).toString(r);s=l+s}if(a){var u=Math.pow(r,a),l=Math.floor(Math.random()*u).toString(r);s=l+s}var f=parseInt(s,r);return f!==1/0&&f>=Math.pow(2,n)?t(n,r):s};t.rack=function(n,r,i){var o=function(s){var l=0;do{if(l++>10)if(i)n+=i;else throw new Error("too many ID collisions, use more bits");var u=t(n,r)}while(Object.hasOwnProperty.call(a,u));return a[u]=s,u},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,l){return o.hats[s]=l,o},o.bits=n||128,o.base=r||16,o}});function eo(e){if(!(this instanceof eo))return new eo(e);e=e||[128,36,1],this._seed=e.length?RM.rack(e[0],e[1],e[2]):e}eo.prototype.next=function(e){return this._seed(e||!0)};eo.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};eo.prototype.claim=function(e,t){this._seed.set(e,t||!0)};eo.prototype.assigned=function(e){return this._seed.get(e)||!1};eo.prototype.unclaim=function(e){delete this._seed.hats[e]};eo.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function zv(e){return Array.prototype.concat.apply([],e)}const Ru=Object.prototype.toString,kM=Object.prototype.hasOwnProperty;function vs(e){return e===void 0}function In(e){return e!==void 0}function pu(e){return e==null}function at(e){return Ru.call(e)==="[object Array]"}function jn(e){return Ru.call(e)==="[object Object]"}function Qe(e){return Ru.call(e)==="[object Number]"}function Cn(e){const t=Ru.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Br(e){return Ru.call(e)==="[object String]"}function PM(e){if(!at(e))throw new Error("must supply array")}function vr(e,t){return!pu(e)&&kM.call(e,t)}function Mt(e,t){const n=Yd(t);let r;return W(e,function(i,o){if(n(i,o))return r=i,!1}),r}function _C(e,t){const n=Yd(t);let r=at(e)?-1:void 0;return W(e,function(i,o){if(n(i,o))return r=o,!1}),r}function yt(e,t){const n=Yd(t);let r=[];return W(e,function(i,o){n(i,o)&&r.push(i)}),r}function W(e,t){let n,r;if(vs(e))return;const i=at(e)?DM:NM;for(let o in e)if(vr(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function TM(e,t){if(vs(e))return[];PM(e);const n=Yd(t);return e.filter(function(r,i){return!n(r,i)})}function jr(e,t,n){return W(e,function(r,i){n=t(n,r,i)}),n}function Ss(e,t){return!!jr(e,function(n,r,i){return n&&t(r,i)},!0)}function ba(e,t){return!!Mt(e,t)}function Zn(e,t){let n=[];return W(e,function(r,i){n.push(t(r,i))}),n}function dd(e){return e&&Object.keys(e)||[]}function AM(e){return dd(e).length}function Hv(e){return Zn(e,t=>t)}function jl(e,t,n={}){return t=Vv(t),W(e,function(r){let i=t(r)||"_",o=n[i];o||(o=n[i]=[]),o.push(r)}),n}function wC(e,...t){e=Vv(e);let n={};return W(t,i=>jl(i,e,n)),Zn(n,function(i,o){return i[0]})}const MM=wC;function to(e,t){t=Vv(t);let n=[];return W(e,function(r,i){let o=t(r,i),a={d:o,v:r};for(var s=0;s<n.length;s++){let{d:l}=n[s];if(o<l){n.splice(s,0,a);return}}n.push(a)}),Zn(n,r=>r.v)}function Li(e){return function(t){return Ss(e,function(n,r){return t[r]===n})}}function Vv(e){return Cn(e)?e:t=>t[e]}function Yd(e){return Cn(e)?e:t=>t===e}function NM(e){return e}function DM(e){return Number(e)}function EC(e,t){let n,r,i,o;function a(d){let g=Date.now(),y=d?0:o+t-g;if(y>0)return s(y);e.apply(i,r),l()}function s(d){n=setTimeout(a,d)}function l(){n&&clearTimeout(n),n=o=r=i=void 0}function u(){n&&a(!0),l()}function f(...d){o=Date.now(),r=d,i=this,n||s(t)}return f.flush=u,f.cancel=l,f}function _r(e,t){return e.bind(t)}function q(e,...t){return Object.assign(e,...t)}function OM(e,t,n){let r=e;return W(t,function(i,o){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=r[i];In(a)&&pu(s)&&(s=r[i]=isNaN(+a)?{}:[]),vs(a)?vs(n)?delete r[i]:r[i]=n:r=s}),e}function ji(e,t){let n={},r=Object(e);return W(t,function(i){i in r&&(n[i]=e[i])}),n}function _i(e,t){let n={},r=Object(e);return W(r,function(i,o){t.indexOf(o)===-1&&(n[o]=i)}),n}function LM(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}const IM=Object.prototype.toString,BM=Object.prototype.hasOwnProperty;function jM(e){return e===void 0}function $M(e){return IM.call(e)==="[object Array]"}function FM(e,t){return BM.call(e,t)}function rw(e,t){let n,r;if(jM(e))return;const i=$M(e)?HM:zM;for(let o in e)if(FM(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function zM(e){return e}function HM(e){return Number(e)}function Xn(e,...t){const n=e.style;return rw(t,function(r){r&&rw(r,function(i,o){n[o]=i})}),e}function lr(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const VM=Object.prototype.toString;function nn(e){return new ya(e)}function ya(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}ya.prototype.add=function(e){return this.list.add(e),this};ya.prototype.remove=function(e){return VM.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};ya.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};ya.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};ya.prototype.array=function(){return Array.from(this.list)};ya.prototype.has=ya.prototype.contains=function(e){return this.list.contains(e)};function qd(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Sa(e,t,n){var r=n?e:e.parentNode;return r&&typeof r.closest=="function"&&r.closest(t)||null}var hd={},md,uy,Wv;function bC(){md=window.addEventListener?"addEventListener":"attachEvent",uy=window.removeEventListener?"removeEventListener":"detachEvent",Wv=md!=="addEventListener"?"on":""}var WM=hd.bind=function(e,t,n,r){return md||bC(),e[md](Wv+t,n,r||!1),n},UM=hd.unbind=function(e,t,n,r){return uy||bC(),e[uy](Wv+t,n,r||!1),n},ot=LM({__proto__:null,bind:WM,unbind:UM,default:hd},[hd]),SC=["focus","blur"];function GM(e,t,n,r,i){return SC.indexOf(n)!==-1&&(i=!0),ot.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Sa(a,t,!0),o.delegateTarget&&r.call(e,o)},i)}function KM(e,t,n,r){return SC.indexOf(t)!==-1&&(r=!0),ot.unbind(e,t,n,r)}var Dr={bind:GM,unbind:KM},YM=qM,CC=!1,Hp;typeof document<"u"&&(Hp=document.createElement("div"),Hp.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',CC=!Hp.getElementsByTagName("link").length,Hp=void 0);var En={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:CC?[1,"X<div>","</div>"]:[0,"",""]};En.td=En.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];En.option=En.optgroup=[1,'<select multiple="multiple">',"</select>"];En.thead=En.tbody=En.colgroup=En.caption=En.tfoot=[1,"<table>","</table>"];En.polyline=En.ellipse=En.polygon=En.circle=En.text=En.line=En.path=En.rect=En.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function qM(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if(r=="body"){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var i=Object.prototype.hasOwnProperty.call(En,r)?En[r]:En._default,o=i[0],a=i[1],s=i[2],l=t.createElement("div");for(l.innerHTML=a+e+s;o--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var u=t.createDocumentFragment();l.firstChild;)u.appendChild(l.removeChild(l.firstChild));return u}var zt=YM;function Xd(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function It(e,t){return t=t||document,t.querySelector(e)}function py(e,t){return t=t||document,t.querySelectorAll(e)}function no(e){e.parentNode&&e.parentNode.removeChild(e)}function XM(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function QM(e,t){return t.appendChild(XM(e,t))}function et(e,t){return QM(t,e),e}var fy=2,RC={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":fy,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":fy,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function ZM(e,t){return RC[t]?e.style[t]:e.getAttributeNS(null,t)}function kC(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=RC[r];i?(i===fy&&typeof n=="number"&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function JM(e,t){var n=Object.keys(t),r,i;for(r=0,i;i=n[r];r++)kC(e,i,t[i])}function be(e,t,n){if(typeof t=="string")if(n!==void 0)kC(e,t,n);else return ZM(e,t);else JM(e,t);return e}const eN=Object.prototype.toString;function St(e){return new va(e)}function va(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}va.prototype.add=function(e){return this.list.add(e),this};va.prototype.remove=function(e){return eN.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};va.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};va.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};va.prototype.array=function(){return Array.from(this.list)};va.prototype.has=va.prototype.contains=function(e){return this.list.contains(e)};function Qd(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function PC(e){return e.cloneNode(!0)}var Uv={svg:"http://www.w3.org/2000/svg"},iw='<svg xmlns="'+Uv.svg+'"';function tN(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Uv.svg)===-1&&(e=iw+e.substring(4)):(e=iw+">"+e+"</svg>",t=!0);var n=nN(e);if(!t)return n;for(var r=document.createDocumentFragment(),i=n.firstChild;i.firstChild;)r.appendChild(i.firstChild);return r}function nN(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ze(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=tN(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Uv.svg,e),t&&be(n,t),n}var Ym=null;function TC(){return Ym===null&&(Ym=ze("svg")),Ym}function ow(e,t){var n,r,i=Object.keys(t);for(n=0;r=i[n];n++)e[r]=t[r];return e}function rN(e,t,n,r,i,o){var a=TC().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return ow(a,e);case 6:return ow(a,{a:e,b:t,c:n,d:r,e:i,f:o})}}function Hc(e){return TC().createSVGTransform()}var aw=/([&<>]{1})/g,iN=/([&<>\n\r"]{1})/g,oN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function qm(e,t){function n(r,i){return oN[i]||i}return e.replace(t,n)}function AC(e,t){var n,r,i,o,a;switch(e.nodeType){case 3:t.push(qm(e.textContent,aw));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(i=e.attributes,n=0,r=i.length;n<r;++n)o=i.item(n),t.push(" ",o.name,'="',qm(o.value,iN),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,r=a.length;n<r;++n)AC(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",qm(e.nodeValue,aw),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function aN(e){for(var t=e.firstChild,n=[];t;)AC(t,n),t=t.nextSibling;return n.join("")}function sw(e,t){return aN(e)}function Sn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function sN(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function lN(e,t){var n,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem(sN(e,r))}function fu(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),lN(n,t)),n.consolidate()}const cN=/^class[ {]/;function uN(e){return cN.test(e.toString())}function Gv(e){return Array.isArray(e)}function Xm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pf(...e){e.length===1&&Gv(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const pN=/constructor\s*[^(]*\(\s*([^)]*)\)/m,fN=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,dN=/\/\*([^*]*)\*\//m;function hN(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(uN(e)?pN:fN);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(r=>{const i=r.match(dN);return(i&&i[1]||r).trim()})||[]}function MC(e,t){const n=t||{get:function(E,b){if(r.push(E),b===!1)return null;throw s(`No provider for "${E}"!`)}},r=[],i=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(E){const b=r.join(" -> ");return r.length=0,new Error(b?`${E} (Resolving: ${b})`:E)};function l(E,b){if(!i[E]&&E.includes(".")){const D=E.split(".");let B=l(D.shift());for(;D.length;)B=B[D.shift()];return B}if(Xm(o,E))return o[E];if(Xm(i,E)){if(r.indexOf(E)!==-1)throw r.push(E),s("Cannot resolve circular dependency!");return r.push(E),o[E]=i[E][0](i[E][1]),r.pop(),o[E]}return n.get(E,b)}function u(E,b){if(typeof b>"u"&&(b={}),typeof E!="function")if(Gv(E))E=Pf(E.slice());else throw s(`Cannot invoke "${E}". Expected a function!`);const B=(E.$inject||hN(E)).map(z=>Xm(b,z)?b[z]:l(z));return{fn:E,dependencies:B}}function f(E){const{fn:b,dependencies:D}=u(E),B=Function.prototype.bind.call(b,null,...D);return new B}function d(E,b,D){const{fn:B,dependencies:z}=u(E,D);return B.apply(b,z)}function g(E){return Pf(b=>E.get(b))}function y(E,b){if(b&&b.length){const D=Object.create(null),B=Object.create(null),z=[],L=[],X=[];let Y,G,le,oe;for(let Se in i)Y=i[Se],b.indexOf(Se)!==-1&&(Y[2]==="private"?(G=z.indexOf(Y[3]),G===-1?(le=Y[3].createChild([],b),oe=g(le),z.push(Y[3]),L.push(le),X.push(oe),D[Se]=[oe,Se,"private",le]):D[Se]=[X[G],Se,"private",L[G]]):D[Se]=[Y[2],Y[1]],B[Se]=!0),(Y[2]==="factory"||Y[2]==="type")&&Y[1].$scope&&b.forEach(kt=>{Y[1].$scope.indexOf(kt)!==-1&&(D[Se]=[Y[2],Y[1]],B[kt]=!0)});b.forEach(Se=>{if(!B[Se])throw new Error('No provider for "'+Se+'". Cannot use provider from the parent!')}),E.unshift(D)}return new MC(E,a)}const v={factory:d,type:f,value:function(E){return E}};function x(E,b){const D=E.__init__||[];return function(){D.forEach(B=>{typeof B=="string"?b.get(B):b.invoke(B)})}}function C(E){const b=E.__exports__;if(b){const D=E.__modules__,B=Object.keys(E).reduce((G,le)=>(le!=="__exports__"&&le!=="__modules__"&&le!=="__init__"&&le!=="__depends__"&&(G[le]=E[le]),G),Object.create(null)),z=(D||[]).concat(B),L=y(z),X=Pf(function(G){return L.get(G)});b.forEach(function(G){i[G]=[X,G,"private",L]});const Y=(E.__init__||[]).slice();return Y.unshift(function(){L.init()}),E=Object.assign({},E,{__init__:Y}),x(E,L)}return Object.keys(E).forEach(function(D){if(D==="__init__"||D==="__depends__")return;const B=E[D];if(B[2]==="private"){i[D]=B;return}const z=B[0],L=B[1];i[D]=[v[z],mN(z,L),z]}),x(E,a)}function P(E,b){return E.indexOf(b)!==-1||(E=(b.__depends__||[]).reduce(P,E),E.indexOf(b)!==-1)?E:E.concat(b)}function R(E){const b=E.reduce(P,[]).map(C);let D=!1;return function(){D||(D=!0,b.forEach(B=>B()))}}this.get=l,this.invoke=d,this.instantiate=f,this.createChild=y,this.init=R(e)}function mN(e,t){return e!=="value"&&Gv(t)&&(t=Pf(t.slice())),t}var gN=1e3;function Ao(e,t){var n=this;t=t||gN,e.on(["render.shape","render.connection"],t,function(r,i){var o=r.type,a=i.element,s=i.gfx,l=i.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(s,a,l):n.drawConnection(s,a,l)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(r,i){if(n.canRender(i))return r.type==="render.getShapePath"?n.getShapePath(i):n.getConnectionPath(i)})}Ao.prototype.canRender=function(e){};Ao.prototype.drawShape=function(e,t){};Ao.prototype.drawConnection=function(e,t){};Ao.prototype.getShapePath=function(e){};Ao.prototype.getConnectionPath=function(e){};function Cs(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function yN(e){return["M",e.x,e.y]}function Qm(e){return["L",e.x,e.y]}function vN(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function xN(e,t){const n=e.length,r=[yN(e[0])];for(let i=1;i<n;i++){const o=e[i-1],a=e[i],s=e[i+1];if(!s||!t){r.push(Qm(a));continue}const l=Math.min(t,dy(a.x-o.x,a.y-o.y),dy(s.x-a.x,s.y-a.y));if(!l){r.push(Qm(a));continue}const u=Vp(a,o,l),f=Vp(a,o,l*.5),d=Vp(a,s,l),g=Vp(a,s,l*.5);r.push(Qm(u)),r.push(vN(f,g,d))}return r}function Vp(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=dy(r,i),a=n/o;return{x:e.x+r*a,y:e.y+i*a}}function dy(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Zd(e,t,n){Qe(t)&&(n=t,t=null),t||(t={});const r=ze("path",t);return Qe(n)&&(r.dataset.cornerRadius=String(n)),NC(r,e)}function NC(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return be(e,{d:Cs(xN(t,n))}),e}function Jd(e){return yt(e,function(t){return!Mt(e,function(n){return n!==t&&DC(t,n)})})}function DC(e,t){if(t){if(e===t)return t;if(e.parent)return DC(e.parent,t)}}function lw(e,t,n){var r=!n||e.indexOf(t)===-1;return r&&e.push(t),r}function Rs(e,t,n){n=n||0,at(e)||(e=[e]),W(e,function(r,i){var o=t(r,i,n);at(o)&&o.length&&Rs(o,t,n+1)})}function _N(e,t,n){var r=[],i=[];return Rs(e,function(o,a,s){lw(r,o,t);var l=o.children;if(l&&lw(i,l,t))return l}),r}function ku(e,t){return _N(e,!t)}function wN(e,t,n){vs(t)&&(t=!0),jn(t)&&(n=t,t=!0),n=n||{};var r=gc(n.allShapes),i=gc(n.allConnections),o=gc(n.enclosedElements),a=gc(n.enclosedConnections),s=gc(n.topLevel,t&&jl(e,function(f){return f.id}));function l(f){s[f.source.id]&&s[f.target.id]&&(s[f.id]=[f]),r[f.source.id]&&r[f.target.id]&&(a[f.id]=o[f.id]=f),i[f.id]=f}function u(f){if(o[f.id]=f,f.waypoints)a[f.id]=i[f.id]=f;else return r[f.id]=f,W(f.incoming,l),W(f.outgoing,l),f.children}return Rs(e,u),{allShapes:r,allConnections:i,topLevel:s,enclosedConnections:a,enclosedElements:o}}function Mn(e,t){t=!!t,at(e)||(e=[e]);var n,r,i,o;return W(e,function(a){var s=a;a.waypoints&&!t&&(s=Mn(a.waypoints,!0));var l=s.x,u=s.y,f=s.height||0,d=s.width||0;(l<n||n===void 0)&&(n=l),(u<r||r===void 0)&&(r=u),(l+d>i||i===void 0)&&(i=l+d),(u+f>o||o===void 0)&&(o=u+f)}),{x:n,y:r,height:o-r,width:i-n}}function EN(e,t){var n={};return W(e,function(r){var i=r;i.waypoints&&(i=Mn(i)),!Qe(t.y)&&i.x>t.x&&(n[r.id]=r),!Qe(t.x)&&i.y>t.y&&(n[r.id]=r),i.x>t.x&&i.y>t.y&&(Qe(t.width)&&Qe(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y||!Qe(t.width)||!Qe(t.height))&&(n[r.id]=r)}),n}function OC(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function LC(e){return!!(e&&e.isFrame)}function gc(e,t){return q({},e||{},t||{})}var bN=1;function Ca(e,t){Ao.call(this,e,bN),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}De(Ca,Ao);Ca.prototype.canRender=function(){return!0};Ca.prototype.drawShape=function(t,n,r){var i=ze("rect");return be(i,{x:0,y:0,width:n.width||0,height:n.height||0}),LC(n)?be(i,q({},this.FRAME_STYLE,r||{})):be(i,q({},this.SHAPE_STYLE,r||{})),et(t,i),i};Ca.prototype.drawConnection=function(t,n,r){var i=Zd(n.waypoints,q({},this.CONNECTION_STYLE,r||{}));return et(t,i),i};Ca.prototype.getShapePath=function(t){var n=t.x,r=t.y,i=t.width,o=t.height,a=[["M",n,r],["l",i,0],["l",0,o],["l",-i,0],["z"]];return Cs(a)};Ca.prototype.getConnectionPath=function(t){var n=t.waypoints,r,i,o=[];for(r=0;i=n[r];r++)i=i.original||i,o.push([r===0?"M":"L",i.x,i.y]);return Cs(o)};Ca.$inject=["eventBus","styles"];function SN(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,r,i){var o=this.style(r,i);return q(o,{class:n})},this.style=function(n,r){!at(n)&&!r&&(r=n,n=[]);var i=jr(n,function(o,a){return q(o,e[a]||{})},{});return r?q(i,r):i},this.computeStyle=function(n,r,i){return at(r)||(i=r,r=[]),t.style(r||[],q({},i,n||{}))}}const CN={__init__:["defaultRenderer"],defaultRenderer:["type",Ca],styles:["type",SN]};function mn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Rn(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var r=e.indexOf(t);if(r!==-1){if(r===n)return;if(n!==-1)e.splice(r,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Kv(e,t){return!e||!t?-1:e.indexOf(t)}function Pu(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Yv(e,t,n,r){if(typeof r>"u"&&(r=5),!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Pu(e,t);return Math.abs(i/o)<=r}var RN=2;function xo(e,t){var n=Array.from(arguments).flat();const r={x:"v",y:"h"};for(const[i,o]of Object.entries(r))if(kN(i,n))return o;return!1}function kN(e,t){const n=t[0];return Ss(t,function(r){return Math.abs(n[e]-r[e])<=RN})}function cw(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function hy(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var PN=/,?([a-z]),?/gi,uw=parseFloat,pn=Math,Go=pn.PI,Gi=pn.min,Ki=pn.max,pw=pn.pow,oa=pn.abs,TN=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,AN=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,gd=Array.isArray||function(e){return e instanceof Array};function qv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vc(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)qv(e,n)&&(t[n]=Vc(e[n]));return t}function MN(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function NN(e){function t(){var n=Array.prototype.slice.call(arguments,0),r=n.join(""),i=t.cache=t.cache||{},o=t.count=t.count||[];return qv(i,r)?(MN(o,r),i[r]):(o.length>=1e3&&delete i[o.shift()],o.push(r),i[r]=e(...arguments),i[r])}return t}function DN(e){if(!e)return null;var t=Sl(e);if(t.arr)return Vc(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return gd(e)&&gd(e[0])&&(r=Vc(e)),r.length||String(e).replace(TN,function(i,o,a){var s=[],l=o.toLowerCase();for(a.replace(AN,function(u,f){f&&s.push(+f)}),l=="m"&&s.length>2&&(r.push([o,...s.splice(0,2)]),l="l",o=o=="m"?"l":"L");s.length>=n[l]&&(r.push([o,...s.splice(0,n[l])]),!!n[l]););}),r.toString=Sl.toString,t.arr=Vc(r),r}function Sl(e){var t=Sl.ps=Sl.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)qv(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function my(e,t,n,r){return arguments.length===1&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function IC(){return this.join(",").replace(PN,"$1")}function yd(e){var t=Vc(e);return t.toString=IC,t}function fw(e,t,n,r,i,o,a,s,l){var u=1-l,f=pw(u,3),d=pw(u,2),g=l*l,y=g*l,v=f*e+d*3*l*n+u*3*l*l*i+y*a,x=f*t+d*3*l*r+u*3*l*l*o+y*s;return{x:vd(v),y:vd(x)}}function dw(e){var t=jN(...e);return my(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Ko(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function ON(e,t){return e=my(e),t=my(t),Ko(t,e.x,e.y)||Ko(t,e.x2,e.y)||Ko(t,e.x,e.y2)||Ko(t,e.x2,e.y2)||Ko(e,t.x,t.y)||Ko(e,t.x2,t.y)||Ko(e,t.x,t.y2)||Ko(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function hw(e,t,n,r,i){var o=-3*t+9*n-9*r+3*i,a=e*o+6*t-12*n+6*r;return e*a-3*t+3*n}function mw(e,t,n,r,i,o,a,s,l){l==null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,f=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],y=0,v=0;v<f;v++){var x=u*d[v]+u,C=hw(x,e,n,i,a),P=hw(x,t,r,o,s),R=C*C+P*P;y+=g[v]*pn.sqrt(R)}return u*y}function LN(e,t,n,r,i,o,a,s){if(!(Ki(e,n)<Gi(i,a)||Gi(e,n)>Ki(i,a)||Ki(t,r)<Gi(o,s)||Gi(t,r)>Ki(o,s))){var l=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),u=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),f=(e-n)*(o-s)-(t-r)*(i-a);if(f){var d=vd(l/f),g=vd(u/f),y=+d.toFixed(2),v=+g.toFixed(2);if(!(y<+Gi(e,n).toFixed(2)||y>+Ki(e,n).toFixed(2)||y<+Gi(i,a).toFixed(2)||y>+Ki(i,a).toFixed(2)||v<+Gi(t,r).toFixed(2)||v>+Ki(t,r).toFixed(2)||v<+Gi(o,s).toFixed(2)||v>+Ki(o,s).toFixed(2)))return{x:d,y:g}}}}function vd(e){return Math.round(e*1e11)/1e11}function IN(e,t,n){var r=dw(e),i=dw(t);if(!ON(r,i))return[];for(var o=mw(...e),a=mw(...t),s=gw(e)?1:~~(o/5)||1,l=gw(t)?1:~~(a/5)||1,u=[],f=[],d={},g=[],y=0;y<s+1;y++){var v=fw(...e,y/s);u.push({x:v.x,y:v.y,t:y/s})}for(y=0;y<l+1;y++)v=fw(...t,y/l),f.push({x:v.x,y:v.y,t:y/l});for(y=0;y<s;y++)for(var x=0;x<l;x++){var C=u[y],P=u[y+1],R=f[x],E=f[x+1],b=oa(P.x-C.x)<.01?"y":"x",D=oa(E.x-R.x)<.01?"y":"x",B=LN(C.x,C.y,P.x,P.y,R.x,R.y,E.x,E.y),z;if(B){if(z=B.x.toFixed(9)+"#"+B.y.toFixed(9),d[z])continue;d[z]=!0;var L=C.t+oa((B[b]-C[b])/(P[b]-C[b]))*(P.t-C.t),X=R.t+oa((B[D]-R[D])/(E[D]-R[D]))*(E.t-R.t);L>=0&&L<=1&&X>=0&&X<=1&&g.push({x:B.x,y:B.y,t1:L,t2:X})}}return g}function BC(e,t,n){e=vw(e),t=vw(t);for(var r,i,o,a,s,l,u,f,d,g,y=n?0:[],v=0,x=e.length;v<x;v++){var C=e[v];if(C[0]=="M")r=s=C[1],i=l=C[2];else{C[0]=="C"?(d=[r,i,...C.slice(1)],r=d[6],i=d[7]):(d=[r,i,r,i,s,l,s,l],r=s,i=l);for(var P=0,R=t.length;P<R;P++){var E=t[P];if(E[0]=="M")o=u=E[1],a=f=E[2];else{E[0]=="C"?(g=[o,a,...E.slice(1)],o=g[6],a=g[7]):(g=[o,a,o,a,u,f,u,f],o=u,a=f);var b=IN(d,g);{for(var D=0,B=b.length;D<B;D++)b[D].segment1=v,b[D].segment2=P,b[D].bez1=d,b[D].bez2=g;y=y.concat(b)}}}}}return y}function BN(e){var t=Sl(e);if(t.abs)return yd(t.abs);if((!gd(e)||!gd(e&&e[0]))&&(e=DN(e)),!e||!e.length)return[["M",0,0]];var n=[],r=0,i=0,o=0,a=0,s=0,l;e[0][0]=="M"&&(r=+e[0][1],i=+e[0][2],o=r,a=i,s++,n[0]=["M",r,i]);for(var u,f,d=s,g=e.length;d<g;d++){if(n.push(u=[]),f=e[d],l=f[0],l!=l.toUpperCase())switch(u[0]=l.toUpperCase(),u[0]){case"A":u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=+f[6]+r,u[7]=+f[7]+i;break;case"V":u[1]=+f[1]+i;break;case"H":u[1]=+f[1]+r;break;case"M":o=+f[1]+r,a=+f[2]+i;default:for(var y=1,v=f.length;y<v;y++)u[y]=+f[y]+(y%2?r:i)}else for(var x=0,C=f.length;x<C;x++)u[x]=f[x];switch(l=l.toUpperCase(),u[0]){case"Z":r=+o,i=+a;break;case"H":r=u[1];break;case"V":i=u[1];break;case"M":o=u[u.length-2],a=u[u.length-1];default:r=u[u.length-2],i=u[u.length-1]}}return n.toString=IC,t.abs=yd(n),n}function gw(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Wp(e,t,n,r){return[e,t,n,r,n,r]}function yw(e,t,n,r,i,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function jC(e,t,n,r,i,o,a,s,l,u){var f=Go*120/180,d=Go/180*(+i||0),g=[],y,v=NN(function(w,k,$){var K=w*pn.cos($)-k*pn.sin($),ae=w*pn.sin($)+k*pn.cos($);return{x:K,y:ae}});if(u)z=u[0],L=u[1],D=u[2],B=u[3];else{y=v(e,t,-d),e=y.x,t=y.y,y=v(s,l,-d),s=y.x,l=y.y;var x=(e-s)/2,C=(t-l)/2,P=x*x/(n*n)+C*C/(r*r);P>1&&(P=pn.sqrt(P),n=P*n,r=P*r);var R=n*n,E=r*r,b=(o==a?-1:1)*pn.sqrt(oa((R*E-R*C*C-E*x*x)/(R*C*C+E*x*x))),D=b*n*C/r+(e+s)/2,B=b*-r*x/n+(t+l)/2,z=pn.asin(((t-B)/r).toFixed(9)),L=pn.asin(((l-B)/r).toFixed(9));z=e<D?Go-z:z,L=s<D?Go-L:L,z<0&&(z=Go*2+z),L<0&&(L=Go*2+L),a&&z>L&&(z=z-Go*2),!a&&L>z&&(L=L-Go*2)}var X=L-z;if(oa(X)>f){var Y=L,G=s,le=l;L=z+f*(a&&L>z?1:-1),s=D+n*pn.cos(L),l=B+r*pn.sin(L),g=jC(s,l,n,r,i,0,a,G,le,[L,Y,D,B])}X=L-z;var oe=pn.cos(z),Se=pn.sin(z),kt=pn.cos(L),Ge=pn.sin(L),Ke=pn.tan(X/4),me=4/3*n*Ke,$e=4/3*r*Ke,Oe=[e,t],qe=[e+me*Se,t-$e*oe],Q=[s+me*Ge,l-$e*kt],J=[s,l];if(qe[0]=2*Oe[0]-qe[0],qe[1]=2*Oe[1]-qe[1],u)return[qe,Q,J].concat(g);g=[qe,Q,J].concat(g).join().split(",");for(var se=[],ye=0,I=g.length;ye<I;ye++)se[ye]=ye%2?v(g[ye-1],g[ye],d).y:v(g[ye],g[ye+1],d).x;return se}function jN(e,t,n,r,i,o,a,s){for(var l=[],u=[[],[]],f,d,g,y,v,x,C,P,R=0;R<2;++R){if(R==0?(d=6*e-12*n+6*i,f=-3*e+9*n-9*i+3*a,g=3*n-3*e):(d=6*t-12*r+6*o,f=-3*t+9*r-9*o+3*s,g=3*r-3*t),oa(f)<1e-12){if(oa(d)<1e-12)continue;y=-g/d,0<y&&y<1&&l.push(y);continue}C=d*d-4*g*f,P=pn.sqrt(C),!(C<0)&&(v=(-d+P)/(2*f),0<v&&v<1&&l.push(v),x=(-d-P)/(2*f),0<x&&x<1&&l.push(x))}for(var E=l.length,b=E,D;E--;)y=l[E],D=1-y,u[0][E]=D*D*D*e+3*D*D*y*n+3*D*y*y*i+y*y*y*a,u[1][E]=D*D*D*t+3*D*D*y*r+3*D*y*y*o+y*y*y*s;return u[0][b]=e,u[1][b]=t,u[0][b+1]=a,u[1][b+1]=s,u[0].length=u[1].length=b+2,{x0:Gi(...u[0]),y0:Gi(...u[1]),x1:Ki(...u[0]),y1:Ki(...u[1])}}function vw(e){var t=Sl(e);if(t.curve)return yd(t.curve);for(var n=BN(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(y,v,x){var C,P;if(!y)return["C",v.x,v.y,v.x,v.y,v.x,v.y];switch(!(y[0]in{T:1,Q:1})&&(v.qx=v.qy=null),y[0]){case"M":v.X=y[1],v.Y=y[2];break;case"A":y=["C",...jC(v.x,v.y,...y.slice(1))];break;case"S":x=="C"||x=="S"?(C=v.x*2-v.bx,P=v.y*2-v.by):(C=v.x,P=v.y),y=["C",C,P,...y.slice(1)];break;case"T":x=="Q"||x=="T"?(v.qx=v.x*2-v.qx,v.qy=v.y*2-v.qy):(v.qx=v.x,v.qy=v.y),y=["C",...yw(v.x,v.y,v.qx,v.qy,y[1],y[2])];break;case"Q":v.qx=y[1],v.qy=y[2],y=["C",...yw(v.x,v.y,y[1],y[2],y[3],y[4])];break;case"L":y=["C",...Wp(v.x,v.y,y[1],y[2])];break;case"H":y=["C",...Wp(v.x,v.y,y[1],v.y)];break;case"V":y=["C",...Wp(v.x,v.y,v.x,y[1])];break;case"Z":y=["C",...Wp(v.x,v.y,v.X,v.Y)];break}return y},o=function(y,v){if(y[v].length>7){y[v].shift();for(var x=y[v];x.length;)a[v]="A",y.splice(v++,0,["C",...x.splice(0,6)]);y.splice(v,1),f=n.length}},a=[],s="",l="",u=0,f=n.length;u<f;u++){n[u]&&(s=n[u][0]),s!="C"&&(a[u]=s,u&&(l=a[u-1])),n[u]=i(n[u],r,l),a[u]!="A"&&s=="C"&&(a[u]="C"),o(n,u);var d=n[u],g=d.length;r.x=d[g-2],r.y=d[g-1],r.bx=uw(d[g-4])||r.x,r.by=uw(d[g-3])||r.y}return t.curve=yd(n),n}function jt(e){return jn(e)&&vr(e,"waypoints")}function Rt(e){return jn(e)&&vr(e,"labelTarget")}function $C(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Eo(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Ue(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function eh(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function $N(e){return Eo({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function FN(e){for(var t=e.waypoints,n=t.reduce(function(u,f,d){var g=t[d-1];if(g){var y=u[u.length-1],v=y&&y.endLength||0,x=VN(g,f);u.push({start:g,end:f,startLength:v,endLength:v+x,length:x})}return u},[]),r=n.reduce(function(u,f){return u+f.length},0),i=r/2,o=0,a=n[o];a.endLength<i;)a=n[++o];var s=(i-a.startLength)/a.length,l={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return l}function Ze(e){return jt(e)?FN(e):$N(e)}function tr(e,t,n){n=n||0,jn(n)||(n={x:n,y:n});var r=Ue(e),i=Ue(t),o=r.bottom+n.y<=i.top,a=r.left-n.x>=i.right,s=r.top-n.y>=i.bottom,l=r.right+n.x<=i.left,u=o?"top":s?"bottom":null,f=l?"left":a?"right":null;return f&&u?u+"-"+f:f||u||"intersect"}function gy(e,t,n){var r=zN(e,t);return r.length===1||r.length===2&&Pu(r[0],r[1])<1?Eo(r[0]):r.length>1?(r=to(r,function(i){var o=Math.floor(i.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,i.segment2+"#"+o}),Eo(r[n?0:r.length-1])):null}function zN(e,t){return BC(e,t)}function HN(e){e=e.slice();for(var t=0,n,r,i;e[t];)n=e[t],r=e[t-1],i=e[t+1],Pu(n,i)===0||Yv(r,i,n)?e.splice(t,1):t++;return e}function VN(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Tf(e,t){return Math.round(e*t)/t}function xw(e){return Qe(e)?e+"px":e}function WN(e){for(;e.parent;)e=e.parent;return e}function UN(e){e=q({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Xn(n,{position:"relative",overflow:"hidden",width:xw(e.width),height:xw(e.height)}),t.appendChild(n),n}function FC(e,t,n){const r=ze("g");St(r).add(t);const i=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(r,e.childNodes[i]||null),r}const GN="base",zC=0,KN=1,YN={shape:["x","y","width","height"],connection:["waypoints"]};function ct(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}ct.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];ct.prototype._init=function(e){const t=this._eventBus,n=this._container=UN(e),r=this._svg=ze("svg");be(r,{width:"100%",height:"100%"}),et(n,r);const i=this._viewport=FC(r,"viewport");e.deferUpdate&&(this._viewboxChanged=EC(_r(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:r,viewport:i})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};ct.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};ct.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=OC(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};ct.prototype.getDefaultLayer=function(){return this.getLayer(GN,zC)};ct.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};ct.prototype._getChildIndex=function(e){return jr(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};ct.prototype._createLayer=function(e,t){typeof t>"u"&&(t=KN);const n=this._getChildIndex(t);return{group:FC(this._viewport,"layer-"+e,n),index:t,visible:!0}};ct.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,r=t.group,i=t.index;if(t.visible)return r;const o=this._getChildIndex(i);return n.insertBefore(r,n.childNodes[o]||null),t.visible=!0,r};ct.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Sn(n),t.visible=!1),n};ct.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Sn(t.group))};ct.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};ct.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(WN(e))||{}).rootElement:void 0};ct.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};ct.prototype._findPlaneForRoot=function(e){return Mt(this._planes,function(t){return t.rootElement===e})};ct.prototype.getContainer=function(){return this._container};ct.prototype._updateMarker=function(e,t,n){let r;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,r=this._elementRegistry._elements[e.id],r&&(W([r.gfx,r.secondaryGfx],function(i){i&&(n?(e.markers.add(t),St(i).add(t)):(e.markers.delete(t),St(i).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))};ct.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};ct.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};ct.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};ct.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};ct.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};ct.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const r=this.getLayer(n,zC);return this.hideLayer(n),this._addRoot(e,r),this._planes.push({rootElement:e,layer:r}),e};ct.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};ct.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};ct.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};ct.prototype._addRoot=function(e,t){const n=this._elementRegistry,r=this._eventBus;r.fire("root.add",{element:e}),n.add(e,t),r.fire("root.added",{element:e,gfx:t})};ct.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};ct.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=YN[e];if(!Ss(n,function(i){return typeof t[i]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};ct.prototype._setParent=function(e,t,n){Rn(t.children,e,n),e.parent=t};ct.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();const i=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r);const a=o.create(e,t,r);return this._elementRegistry.add(t,a),o.update(e,t,a),i.fire(e+".added",{element:t,gfx:a}),t};ct.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};ct.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};ct.prototype._removeElement=function(e,t){const n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(e=n.get(e.id||e),!!e)return i.fire(t+".remove",{element:e}),r.remove(e),mn(e.parent&&e.parent.children,e),e.parent=null,i.fire(t+".removed",{element:e}),n.remove(e),e};ct.prototype.removeShape=function(e){return this._removeElement(e,"shape")};ct.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};ct.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};ct.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};ct.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};ct.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let r,i,o,a,s,l,u;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const f=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);fu(t,f)});else return o=this._rootElement?this.getActiveLayer():null,r=o&&o.getBBox()||{},a=fu(t),i=a?a.matrix:rN(),s=Tf(i.a,1e3),l=Tf(-i.e||0,1e3),u=Tf(-i.f||0,1e3),e=this._cachedViewbox={x:l?l/s:0,y:u?u/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:r.width||0,height:r.height||0,x:r.x||0,y:r.y||0},outer:n},e;return e};ct.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=q({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),HC(t,n)}),{x:n.e,y:n.f}};ct.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const r=this.findRoot(e);if(r!==this.getRootElement()&&this.setRootElement(r),r===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const i=Mn(e),o=Ue(i),a=this.viewbox(),s=this.zoom();let l,u;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const f=Ue(a);if(!(i.width<a.width&&i.height<a.height))l=i.x-a.x,u=i.y-a.y;else{const g=Math.max(0,o.right-f.right),y=Math.min(0,o.left-f.left),v=Math.max(0,o.bottom-f.bottom),x=Math.min(0,o.top-f.top);l=g||y,u=v||x}this.scroll({dx:-l*s,dy:-u*s})};ct.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,r;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),Tf(r.a,1e3)};function HC(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}ct.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,r=t.inner;let i,o;return r.x>=0&&r.y>=0&&r.x+r.width<=n.width&&r.y+r.height<=n.height&&!e?o={x:0,y:0,width:Math.max(r.width+r.x,n.width),height:Math.max(r.height+r.y,n.height)}:(i=Math.min(1,n.width/r.width,n.height/r.height),o={x:r.x+(e?r.width/2-n.width/i/2:0),y:r.y+(e?r.height/2-n.height/i/2:0),width:n.width/i,height:n.height/i}),this.viewbox(o),this.viewbox(!1).scale};ct.prototype._setZoom=function(e,t){const n=this._svg,r=this._viewport,i=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,l,u,f;l=r.getCTM();const d=l.a;return t?(a=q(o,t),s=a.matrixTransform(l.inverse()),u=i.translate(s.x,s.y).scale(1/d*e).translate(-s.x,-s.y),f=l.multiply(u)):f=i.scale(e),HC(this._viewport,f),f};ct.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};ct.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,a=n.height*t.scale;return{x:r,y:i,width:o,height:a}};ct.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Cl="data-element-id";function ei(e){this._elements={},this._eventBus=e}ei.$inject=["eventBus"];ei.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),be(t,Cl,r),n&&be(n,Cl,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}};ei.prototype.remove=function(e){var t=this._elements,n=e.id||e,r=n&&t[n];r&&(be(r.gfx,Cl,""),r.secondaryGfx&&be(r.secondaryGfx,Cl,""),delete t[n])};ei.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)};ei.prototype.updateGraphics=function(e,t,n){var r=e.id||e,i=this._elements[r];return n?i.secondaryGfx=t:i.gfx=t,t&&be(t,Cl,r),t};ei.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&be(e,Cl);var n=this._elements[t];return n&&n.element};ei.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t};ei.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i],a=o.element,s=o.gfx;if(e(a,s))return a}};ei.prototype.getAll=function(){return this.filter(function(e){return e})};ei.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var r=t[n],i=r.element,o=r.gfx;return e(i,o)})};ei.prototype.getGraphics=function(e,t){var n=e.id||e,r=this._elements[n];return r&&(t?r.secondaryGfx:r.gfx)};ei.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function qN(e,t,n,r){var i=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,i,r)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,i,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function XN(e){return e.__refs_collection===!0}function QN(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function VC(e,t,n){var r=qN(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(i){e.set(i,t.inverse,n)})}function ZN(e,t,n){var r=t.inverse,i=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return i},set:function(o){if(o!==i){var a=i;i=null,a&&e.unset(a,r,n),i=o,e.set(i,r,n)}}})}function wi(e,t){if(!(this instanceof wi))return new wi(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}wi.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?VC(this,t,e):ZN(this,t,e)};wi.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return XN(n)||VC(this,t,e),n};wi.prototype.ensureBound=function(e,t){QN(e,t)||this.bind(e,t)};wi.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};wi.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Xv=new wi({name:"children",enumerable:!0,collection:!0},{name:"parent"}),WC=new wi({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),_w=new wi({name:"attachers",collection:!0},{name:"host"}),UC=new wi({name:"outgoing",collection:!0},{name:"source"}),GC=new wi({name:"incoming",collection:!0},{name:"target"});function $l(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Xv.bind(this,"parent"),WC.bind(this,"labels"),UC.bind(this,"outgoing"),GC.bind(this,"incoming")}function Tu(){$l.call(this),Xv.bind(this,"children"),_w.bind(this,"host"),_w.bind(this,"attachers")}De(Tu,$l);function KC(){$l.call(this),Xv.bind(this,"children")}De(KC,Tu);function YC(){Tu.call(this),WC.bind(this,"labelTarget")}De(YC,Tu);function qC(){$l.call(this),UC.bind(this,"source"),GC.bind(this,"target")}De(qC,$l);var JN={connection:qC,shape:Tu,label:YC,root:KC};function eD(e,t){var n=JN[e];if(!n)throw new Error("unknown type: <"+e+">");return q(new n,t)}function tD(e){return e instanceof $l}function Mo(){this._uid=12}Mo.prototype.createRoot=function(e){return this.create("root",e)};Mo.prototype.createLabel=function(e){return this.create("label",e)};Mo.prototype.createShape=function(e){return this.create("shape",e)};Mo.prototype.createConnection=function(e){return this.create("connection",e)};Mo.prototype.create=function(e,t){return t=q({},t||{}),t.id||(t.id=e+"_"+this._uid++),eD(e,t)};var xd="__fn",XC=1e3,nD=Array.prototype.slice;function $r(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}$r.prototype.on=function(e,t,n,r){if(e=at(e)?e:[e],Cn(t)&&(r=n,n=t,t=XC),!Qe(t))throw new Error("priority must be a number");var i=n;r&&(i=_r(n,r),i[xd]=n[xd]||n);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:i,next:null})})};$r.prototype.once=function(e,t,n,r){var i=this;if(Cn(t)&&(r=n,n=t,t=XC),!Qe(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(r,arguments);return i.off(e,o),a}o[xd]=n,this.on(e,t,o)};$r.prototype.off=function(e,t){e=at(e)?e:[e];var n=this;e.forEach(function(r){n._removeListener(r,t)})};$r.prototype.createEvent=function(e){var t=new Au;return t.init(e),t};$r.prototype.fire=function(e,t){var n,r,i,o;if(o=nD.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],!!r){t instanceof Au?n=t:n=this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{i=this._invokeListeners(n,o,r)}finally{e!==a&&(n.type=a)}return i===void 0&&n.defaultPrevented&&(i=!1),i}};$r.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};$r.prototype._destroy=function(){this._listeners={}};$r.prototype._invokeListeners=function(e,t,n){for(var r;n&&!e.cancelBubble;)r=this._invokeListener(e,t,n),n=n.next;return r};$r.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=rD(n.callback,t),r!==void 0&&(e.returnValue=r,e.stopPropagation()),r===!1&&e.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};$r.prototype._addListener=function(e,t){var n=this._getListeners(e),r;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,r?r.next=t:this._setListeners(e,t);return}r=n,n=n.next}r.next=t};$r.prototype._getListeners=function(e){return this._listeners[e]};$r.prototype._setListeners=function(e,t){this._listeners[e]=t};$r.prototype._removeListener=function(e,t){var n=this._getListeners(e),r,i,o;if(!t){this._setListeners(e,null);return}for(;n;)r=n.next,o=n.callback,(o===t||o[xd]===t)&&(i?i.next=r:this._setListeners(e,r)),i=n,n=r};function Au(){}Au.prototype.stopPropagation=function(){this.cancelBubble=!0};Au.prototype.preventDefault=function(){this.defaultPrevented=!0};Au.prototype.init=function(e){q(this,e||{})};function rD(e,t){return e.apply(null,t)}function fs(e){return e.childNodes[0]}function iD(e){return e.parentNode.childNodes[1]}function Af(e,t,n,r,i){var o=Hc();o.setTranslate(t,n);var a=Hc();a.setRotate(r||0,0,0);var s=Hc();s.setScale(1,1),fu(e,[o,a,s])}function Vn(e,t,n){var r=Hc();r.setTranslate(t,n),fu(e,r)}function QC(e,t){var n=Hc();n.setRotate(t,0,0),fu(e,n)}function ti(e,t){this._eventBus=e,this._elementRegistry=t}ti.$inject=["eventBus","elementRegistry"];ti.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=iD(t),n||(n=ze("g"),St(n).add("djs-children"),et(t.parentNode,n))):n=t,n};ti.prototype._clear=function(e){var t=fs(e);return qd(t),t};ti.prototype._createContainer=function(e,t,n,r){var i=ze("g");St(i).add("djs-group"),typeof n<"u"?ZC(i,t,t.childNodes[n]):et(t,i);var o=ze("g");St(o).add("djs-element"),St(o).add("djs-"+e),r&&St(o).add("djs-frame"),et(i,o);var a=ze("g");return St(a).add("djs-visual"),et(o,a),o};ti.prototype.create=function(e,t,n){var r=this._getChildrenContainer(t.parent);return this._createContainer(e,r,n,LC(t))};ti.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,r;r=jr(e,function(i,o){return o.parent&&(i[o.parent.id]=o.parent),i},{}),W(r,function(i){var o=i.children;if(o){var a=t._getChildrenContainer(i);W(o.slice().reverse(),function(s){var l=n.getGraphics(s);ZC(l.parentNode,a)})}})};ti.prototype.drawShape=function(e,t,n={}){var r=this._eventBus;return r.fire("render.shape",{gfx:e,element:t,attrs:n})};ti.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};ti.prototype.drawConnection=function(e,t,n={}){var r=this._eventBus;return r.fire("render.connection",{gfx:e,element:t,attrs:n})};ti.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};ti.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if(e==="shape")this.drawShape(r,t),Vn(n,t.x,t.y);else if(e==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+e);t.hidden?be(n,"display","none"):be(n,"display","block")}};ti.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Sn(t.parentNode)};function ZC(e,t,n){var r=n||t.firstChild;e!==r&&t.insertBefore(e,r)}const oD={__depends__:[CN],__init__:["canvas"],canvas:["type",ct],elementRegistry:["type",ei],elementFactory:["type",Mo],eventBus:["type",$r],graphicsFactory:["type",ti]};function aD(e){var t=new MC(e);return t.init(),t}function sD(e){e=e||{};var t={config:["value",e]},n=[t,oD].concat(e.modules||[]);return aD(n)}function Ra(e,t){this._injector=t||sD(e),this.get("eventBus").fire("diagram.init")}Ra.prototype.get=function(e,t){return this._injector.get(e,t)};Ra.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Ra.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Ra.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Qv(){}Qv.prototype.get=function(e){return this.$model.properties.get(this,e)};Qv.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function JC(e,t){this.model=e,this.properties=t}JC.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(Qv.prototype);W(e.properties,function(a){!a.isMany&&a.default!==void 0&&(r[a.name]=a.default)}),n.defineModel(r,t),n.defineDescriptor(r,e);var i=e.ns.name;function o(a){n.define(this,"$type",{value:i,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),W(a,_r(function(s,l){this.set(l,s)},this))}return o.prototype=r,o.hasType=r.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var lD={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},eR={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Zv(e,t){var n=eR[e];return n?n(t):t}function yy(e){return!!lD[e]}function tR(e){return!!eR[e]}function cr(e,t){var n=e.split(/:/),r,i;if(n.length===1)r=e,i=t;else if(n.length===2)r=n[1],i=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(i?i+":":"")+r,{name:e,prefix:i,localName:r}}function ni(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}ni.prototype.build=function(){return ji(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};ni.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var r=this.properties;t!==void 0?r.splice(t,0,e):r.push(e)};ni.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=i.indexOf(e);if(s===-1)throw new Error("property <"+r.name+"> not found in property list");i.splice(s,1),this.addProperty(t,n?void 0:s,a),o[r.name]=o[r.localName]=t};ni.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,i=t.split("#"),o=cr(i[0],r),a=cr(i[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines};ni.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e};ni.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};ni.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};ni.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};ni.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};ni.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};ni.prototype.hasProperty=function(e){return this.propertiesByName[e]};ni.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,r=this.allTypes,i=e.name;i in n||(W(e.properties,_r(function(o){o=q({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),r.push(e),n[i]=e)};function ka(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,W(e,_r(this.registerPackage,this))}ka.prototype.getPackage=function(e){return this.packageMap[e]};ka.prototype.getPackages=function(){return this.packages};ka.prototype.registerPackage=function(e){e=q({},e);var t=this.packageMap;ww(t,e,"prefix"),ww(t,e,"uri"),W(e.types,_r(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};ka.prototype.registerType=function(e,t){e=q({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:q(e.meta||{})});var n=cr(e.name,t.prefix),r=n.name,i={};W(e.properties,_r(function(o){var a=cr(o.name,n.prefix),s=a.name;yy(o.type)||(o.type=cr(o.type,a.prefix).name),q(o,{ns:a,name:s}),i[s]=o},this)),q(e,{ns:n,name:r,propertiesByName:i}),W(e.extends,_r(function(o){var a=cr(o,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(r)},this)),this.definePackage(e,t),this.typeMap[r]=e};ka.prototype.mapTypes=function(e,t,n){var r=yy(e.name)?{name:e.name}:this.typeMap[e.name],i=this;function o(l,u){var f=cr(l,yy(l)?"":e.prefix);i.mapTypes(f,t,u)}function a(l){return o(l,!0)}function s(l){return o(l,!1)}if(!r)throw new Error("unknown type <"+e.name+">");W(r.superClass,n?a:s),t(r,!n),W(r.traits,a)};ka.prototype.getEffectiveDescriptor=function(e){var t=cr(e),n=new ni(t);this.mapTypes(t,function(i,o){n.addTrait(i,o)});var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r};ka.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function ww(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function ks(e){this.model=e}ks.prototype.set=function(e,t,n){if(!Br(t)||!t.length)throw new TypeError("property name must be a non-empty string");var r=this.getProperty(e,t),i=r&&r.name;cD(n)?r?delete e[i]:delete e.$attrs[vy(t)]:r?i in e?e[i]=n:nR(e,r,n):e.$attrs[vy(t)]=n};ks.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[vy(t)];var r=n.name;return!e[r]&&n.isMany&&nR(e,n,[]),e[r]};ks.prototype.define=function(e,t,n){if(!n.writable){var r=n.value;n=q({},n,{get:function(){return r}}),delete n.value}Object.defineProperty(e,t,n)};ks.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};ks.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};ks.prototype.getProperty=function(e,t){var n=this.model,r=n.getPropertyDescriptor(e,t);if(r)return r;if(t.includes(":"))return null;const i=n.config.strict;if(typeof i<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(i)throw o;typeof console<"u"&&console.warn(o)}return null};function cD(e){return typeof e>"u"}function nR(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function vy(e){return e.replace(/^:/,"")}function Ei(e,t={}){this.properties=new ks(this),this.factory=new JC(this,this.properties),this.registry=new ka(e,this.properties),this.typeCache={},this.config=t}Ei.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Ei.prototype.getType=function(e){var t=this.typeCache,n=Br(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r};Ei.prototype.createAny=function(e,t,n){var r=cr(e),i={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){OM(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(i,o),this.properties.defineModel(i,this),this.properties.define(i,"get",{enumerable:!1,writable:!0}),this.properties.define(i,"set",{enumerable:!1,writable:!0}),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),this.properties.define(i,"$instanceOf",{enumerable:!1,writable:!0}),W(n,function(a,s){jn(a)&&a.value!==void 0?i[a.name]=a.value:i[s]=a}),i};Ei.prototype.getPackage=function(e){return this.registry.getPackage(e)};Ei.prototype.getPackages=function(){return this.registry.getPackages()};Ei.prototype.getElementDescriptor=function(e){return e.$descriptor};Ei.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Ei.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Ei.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Ew=String.fromCharCode,uD=Object.prototype.hasOwnProperty,pD=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Wc={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Wc).forEach(function(e){Wc[e.toUpperCase()]=Wc[e]});function fD(e,t,n,r){return r?uD.call(Wc,r)?Wc[r]:"&"+r+";":Ew(t||parseInt(n,16))}function Qa(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(pD,fD):e}var dD="http://www.w3.org/2001/XMLSchema-instance",hD="xsi",bw="xsi:type",Sw="non-whitespace outside of root node";function Us(e){return new Error(e)}function Cw(e){return"missing namespace for prefix <"+e+">"}function Up(e){return{get:e,enumerable:!0}}function mD(e){var t={},n;for(n in e)t[n]=e[n];return t}function xy(e){return e+"$uri"}function gD(e){var t={},n,r;for(n in e)r=e[n],t[r]=r,t[xy(r)]=n;return t}function Rw(){return{line:0,column:0}}function yD(e){throw e}function rR(e){if(!this)return new rR(e);var t=e&&e.proxy,n,r,i,o,a=yD,s,l,u,f,d=Rw,g=!1,y=!1,v=null,x=!1,C;function P(b){b instanceof Error||(b=Us(b)),v=b,a(b,d)}function R(b){s&&(b instanceof Error||(b=Us(b)),s(b,d))}this.on=function(b,D){if(typeof D!="function")throw Us("required args <name, cb>");switch(b){case"openTag":r=D;break;case"text":n=D;break;case"closeTag":i=D;break;case"error":a=D;break;case"warn":s=D;break;case"cdata":o=D;break;case"attention":f=D;break;case"question":u=D;break;case"comment":l=D;break;default:throw Us("unsupported event: "+b)}return this},this.ns=function(b){if(typeof b>"u"&&(b={}),typeof b!="object")throw Us("required args <nsMap={}>");var D={},B;for(B in b)D[B]=b[B];return D[dD]=hD,y=!0,C=D,this},this.parse=function(b){if(typeof b!="string")throw Us("required args <xml=string>");return v=null,E(b),d=Rw,x=!1,v},this.stop=function(){x=!0};function E(b){var D=y?[]:null,B=y?gD(C):null,z,L=[],X=0,Y=!1,G=!1,le=0,oe=0,Se,kt,Ge,Ke,me,$e,Oe,qe,Q,J="",se=0,ye;function I(){if(ye!==null)return ye;var k,$,K,ae=y&&B.xmlns,Te=y&&g?[]:null,Ae=se,de=J,pt=de.length,rt,Xe,nt,je,ft,ee={},Ie={},Pt,_e,Me;e:for(;Ae<pt;Ae++)if(Pt=!1,_e=de.charCodeAt(Ae),!(_e===32||_e<14&&_e>8)){for((_e<65||_e>122||_e>90&&_e<97)&&_e!==95&&_e!==58&&(R("illegal first char attribute name"),Pt=!0),Me=Ae+1;Me<pt;Me++)if(_e=de.charCodeAt(Me),!(_e>96&&_e<123||_e>64&&_e<91||_e>47&&_e<59||_e===46||_e===45||_e===95)){if(_e===32||_e<14&&_e>8){R("missing attribute value"),Ae=Me;continue e}if(_e===61)break;R("illegal attribute name char"),Pt=!0}if(ft=de.substring(Ae,Me),ft==="xmlns:xmlns"&&(R("illegal declaration of xmlns"),Pt=!0),_e=de.charCodeAt(Me+1),_e===34)Me=de.indexOf('"',Ae=Me+2),Me===-1&&(Me=de.indexOf("'",Ae),Me!==-1&&(R("attribute value quote missmatch"),Pt=!0));else if(_e===39)Me=de.indexOf("'",Ae=Me+2),Me===-1&&(Me=de.indexOf('"',Ae),Me!==-1&&(R("attribute value quote missmatch"),Pt=!0));else for(R("missing attribute value quotes"),Pt=!0,Me=Me+1;Me<pt&&(_e=de.charCodeAt(Me+1),!(_e===32||_e<14&&_e>8));Me++);for(Me===-1&&(R("missing closing quotes"),Me=pt,Pt=!0),Pt||(nt=de.substring(Ae,Me)),Ae=Me;Me+1<pt&&(_e=de.charCodeAt(Me+1),!(_e===32||_e<14&&_e>8));Me++)Ae===Me&&(R("illegal character after attribute end"),Pt=!0);if(Ae=Me+1,Pt)continue e;if(ft in Ie){R("attribute <"+ft+"> already defined");continue}if(Ie[ft]=!0,!y){ee[ft]=nt;continue}if(g){if(Xe=ft==="xmlns"?"xmlns":ft.charCodeAt(0)===120&&ft.substr(0,6)==="xmlns:"?ft.substr(6):null,Xe!==null){if(k=Qa(nt),$=xy(Xe),je=C[k],!je){if(Xe==="xmlns"||$ in B&&B[$]!==k)do je="ns"+X++;while(typeof B[je]<"u");else je=Xe;C[k]=je}B[Xe]!==je&&(rt||(B=mD(B),rt=!0),B[Xe]=je,Xe==="xmlns"&&(B[xy(je)]=k,ae=je),B[$]=k),ee[ft]=nt;continue}Te.push(ft,nt);continue}if(_e=ft.indexOf(":"),_e===-1){ee[ft]=nt;continue}if(!(K=B[ft.substring(0,_e)])){R(Cw(ft.substring(0,_e)));continue}ft=ae===K?ft.substr(_e+1):K+ft.substr(_e),ft===bw&&(_e=nt.indexOf(":"),_e!==-1?(K=nt.substring(0,_e),K=B[K]||K,nt=K+nt.substring(_e)):nt=ae+":"+nt),ee[ft]=nt}if(g)for(Ae=0,pt=Te.length;Ae<pt;Ae++){if(ft=Te[Ae++],nt=Te[Ae],_e=ft.indexOf(":"),_e!==-1){if(!(K=B[ft.substring(0,_e)])){R(Cw(ft.substring(0,_e)));continue}ft=ae===K?ft.substr(_e+1):K+ft.substr(_e),ft===bw&&(_e=nt.indexOf(":"),_e!==-1?(K=nt.substring(0,_e),K=B[K]||K,nt=K+nt.substring(_e)):nt=ae+":"+nt)}ee[ft]=nt}return ye=ee}function w(){for(var k=/(\r\n|\r|\n)/g,$=0,K=0,ae=0,Te=oe,Ae,de;le>=ae&&(Ae=k.exec(b),!(!Ae||(Te=Ae[0].length+Ae.index,Te>le)));)$+=1,ae=Te;return le==-1?(K=Te,de=b.substring(oe)):oe===0?de=b.substring(oe,le):(K=le-ae,de=oe==-1?b.substring(le):b.substring(le,oe+1)),{data:de,line:$,column:K}}for(d=w,t&&(Q=Object.create({},{name:Up(function(){return Oe}),originalName:Up(function(){return qe}),attrs:Up(I),ns:Up(function(){return B})}));oe!==-1;){if(b.charCodeAt(oe)===60?le=oe:le=b.indexOf("<",oe),le===-1){if(L.length)return P("unexpected end of file");if(oe===0)return P("missing start tag");oe<b.length&&b.substring(oe).trim()&&R(Sw);return}if(oe!==le){if(L.length){if(n&&(n(b.substring(oe,le),Qa,d),x))return}else if(b.substring(oe,le).trim()&&(R(Sw),x))return}if(Ke=b.charCodeAt(le+1),Ke===33){if(Ge=b.charCodeAt(le+2),Ge===91&&b.substr(le+3,6)==="CDATA["){if(oe=b.indexOf("]]>",le),oe===-1)return P("unclosed cdata");if(o&&(o(b.substring(le+9,oe),d),x))return;oe+=3;continue}if(Ge===45&&b.charCodeAt(le+3)===45){if(oe=b.indexOf("-->",le),oe===-1)return P("unclosed comment");if(l&&(l(b.substring(le+4,oe),Qa,d),x))return;oe+=3;continue}}if(Ke===63){if(oe=b.indexOf("?>",le),oe===-1)return P("unclosed question");if(u&&(u(b.substring(le,oe+2),d),x))return;oe+=2;continue}for(Se=le+1;;Se++){if(me=b.charCodeAt(Se),isNaN(me))return oe=-1,P("unclosed tag");if(me===34)Ge=b.indexOf('"',Se+1),Se=Ge!==-1?Ge:Se;else if(me===39)Ge=b.indexOf("'",Se+1),Se=Ge!==-1?Ge:Se;else if(me===62){oe=Se;break}}if(Ke===33){if(f&&(f(b.substring(le,oe+1),Qa,d),x))return;oe+=1;continue}if(ye={},Ke===47){if(Y=!1,G=!0,!L.length)return P("missing open tag");if(Se=Oe=L.pop(),Ge=le+2+Se.length,b.substring(le+2,Ge)!==Se)return P("closing tag mismatch");for(;Ge<oe;Ge++)if(Ke=b.charCodeAt(Ge),!(Ke===32||Ke>8&&Ke<14))return P("close tag")}else{if(b.charCodeAt(oe-1)===47?(Se=Oe=b.substring(le+1,oe-1),Y=!0,G=!0):(Se=Oe=b.substring(le+1,oe),Y=!0,G=!1),!(Ke>96&&Ke<123||Ke>64&&Ke<91||Ke===95||Ke===58))return P("illegal first char nodeName");for(Ge=1,kt=Se.length;Ge<kt;Ge++)if(Ke=Se.charCodeAt(Ge),!(Ke>96&&Ke<123||Ke>64&&Ke<91||Ke>47&&Ke<59||Ke===45||Ke===95||Ke==46)){if(Ke===32||Ke<14&&Ke>8){Oe=Se.substring(0,Ge),ye=null;break}return P("invalid nodeName")}G||L.push(Oe)}if(y){if(z=B,Y&&(G||D.push(z),ye===null&&(g=Se.indexOf("xmlns",Ge)!==-1)&&(se=Ge,J=Se,I(),g=!1)),qe=Oe,Ke=Oe.indexOf(":"),Ke!==-1){if($e=B[Oe.substring(0,Ke)],!$e)return P("missing namespace on <"+qe+">");Oe=Oe.substr(Ke+1)}else $e=B.xmlns;$e&&(Oe=$e+":"+Oe)}if(Y&&(se=Ge,J=Se,r&&(t?r(Q,Qa,G,d):r(Oe,I,Qa,G,d),x)))return;if(G){if(i&&(i(t?Q:Oe,Qa,Y,d),x))return;y&&(Y?B=z:B=D.pop())}oe+=1}}}function iR(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var vD={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},th="xsi:type";function oR(e){return e.xml&&e.xml.serialize}function aR(e){return oR(e)===th}function xD(e){return oR(e)==="property"}function _D(e){return e.charAt(0).toUpperCase()+e.slice(1)}function sR(e,t){return iR(t)?e.prefix+":"+_D(e.localName):e.name}function wD(e,t){var n=e.name,r=e.localName,i=t.xml&&t.xml.typePrefix;return i&&r.indexOf(i)===0?e.prefix+":"+r.slice(i.length):n}function ED(e,t){var n=cr(e),r=t.getPackage(n.prefix);return wD(n,r)}function xa(e){return new Error(e)}function bo(e){return e.$descriptor}function bD(e){q(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw xa("expected element");var n=this.elementsById,r=bo(t),i=r.idProperty,o;if(i&&(o=t.get(i.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw xa("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Mu(){}Mu.prototype.handleEnd=function(){};Mu.prototype.handleText=function(){};Mu.prototype.handleNode=function(){};function Jv(){}Jv.prototype=Object.create(Mu.prototype);Jv.prototype.handleNode=function(){return this};function Fl(){}Fl.prototype=Object.create(Mu.prototype);Fl.prototype.handleText=function(e){this.body=(this.body||"")+e};function Nu(e,t){this.property=e,this.context=t}Nu.prototype=Object.create(Fl.prototype);Nu.prototype.handleNode=function(e){if(this.element)throw xa("expected no sub nodes");return this.element=this.createReference(e),this};Nu.prototype.handleEnd=function(){this.element.id=this.body};Nu.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function e0(e,t){this.element=t,this.propertyDesc=e}e0.prototype=Object.create(Fl.prototype);e0.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Zv(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function nh(){}nh.prototype=Object.create(Fl.prototype);nh.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function pr(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}pr.prototype=Object.create(nh.prototype);pr.prototype.addReference=function(e){this.context.addReference(e)};pr.prototype.handleText=function(e){var t=this.element,n=bo(t),r=n.bodyProperty;if(!r)throw xa("unexpected body text <"+e+">");Fl.prototype.handleText.call(this,e)};pr.prototype.handleEnd=function(){var e=this.body,t=this.element,n=bo(t),r=n.bodyProperty;r&&e!==void 0&&(e=Zv(r.type,e),t.set(r.name,e))};pr.prototype.createElement=function(e){var t=e.attributes,n=this.type,r=bo(n),i=this.context,o=new n({}),a=this.model,s;return W(t,function(l,u){var f=r.propertiesByName[u],d;f&&f.isReference?f.isMany?(d=l.split(" "),W(d,function(g){i.addReference({element:o,property:f.ns.name,id:g})})):i.addReference({element:o,property:f.ns.name,id:l}):(f?l=Zv(f.type,l):u!=="xmlns"&&(s=cr(u,r.ns.prefix),a.getPackage(s.prefix)&&i.addWarning({message:"unknown attribute <"+u+">",element:o,property:u,value:l})),o.set(u,l))}),o};pr.prototype.getPropertyForNode=function(e){var t=e.name,n=cr(t),r=this.type,i=this.model,o=bo(r),a=n.name,s=o.propertiesByName[a],l,u;if(s&&!s.isAttr)return aR(s)&&(l=e.attributes[th],l)?(l=ED(l,i),u=i.getType(l),q({},s,{effectiveType:bo(u).name})):s;var f=i.getPackage(n.prefix);if(f){if(l=sR(n,f),u=i.getType(l),s=Mt(o.properties,function(d){return!d.isVirtual&&!d.isReference&&!d.isAttribute&&u.hasType(d.type)}),s)return q({},s,{effectiveType:bo(u).name})}else if(s=Mt(o.properties,function(d){return!d.isReference&&!d.isAttribute&&d.type==="Element"}),s)return s;throw xa("unrecognized element <"+n.name+">")};pr.prototype.toString=function(){return"ElementDescriptor["+bo(this.type).name+"]"};pr.prototype.valueHandler=function(e,t){return new e0(e,t)};pr.prototype.referenceHandler=function(e){return new Nu(e,this.context)};pr.prototype.handler=function(e){return e==="Element"?new Rl(this.model,e,this.context):new pr(this.model,e,this.context)};pr.prototype.handleChild=function(e){var t,n,r,i;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,tR(n))return this.valueHandler(t,r);t.isReference?i=this.referenceHandler(t).handleNode(e):i=this.handler(n).handleNode(e);var o=i.element;return o!==void 0&&(t.isMany?r.get(t.name).push(o):r.set(t.name,o),t.isReference?(q(o,{element:r}),this.context.addReference(o)):o.$parent=r),i};function t0(e,t,n){pr.call(this,e,t,n)}t0.prototype=Object.create(pr.prototype);t0.prototype.createElement=function(e){var t=e.name,n=cr(t),r=this.model,i=this.type,o=r.getPackage(n.prefix),a=o&&sR(n,o)||t;if(!i.hasType(a))throw xa("unexpected element <"+e.originalName+">");return pr.prototype.createElement.call(this,e)};function Rl(e,t,n){this.model=e,this.context=n}Rl.prototype=Object.create(nh.prototype);Rl.prototype.createElement=function(e){var t=e.name,n=cr(t),r=n.prefix,i=e.ns[r+"$uri"],o=e.attributes;return this.model.createAny(t,i,o)};Rl.prototype.handleChild=function(e){var t=new Rl(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element,i;return r!==void 0&&(i=n.$children=n.$children||[],i.push(r),r.$parent=n),t};Rl.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function n0(e){e instanceof Ei&&(e={model:e}),q(this,{lax:!1},e)}n0.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof pr?(r=t,t={}):typeof t=="string"?(r=this.handler(t),t={}):typeof r=="string"&&(r=this.handler(r));var i=this.model,o=this.lax,a=new bD(q({},t,{rootHandler:r})),s=new rR({proxy:!0}),l=SD();r.context=a,l.push(r);function u(D,B,z){var L=B(),X=L.line,Y=L.column,G=L.data;G.charAt(0)==="<"&&G.indexOf(" ")!==-1&&(G=G.slice(0,G.indexOf(" "))+">");var le="unparsable content "+(G?G+" ":"")+`detected
	line: `+X+`
	column: `+Y+`
	nested error: `+D.message;if(z)return a.addWarning({message:le,error:D}),!0;throw xa(le)}function f(D,B){return u(D,B,!0)}function d(){var D=a.elementsById,B=a.references,z,L;for(z=0;L=B[z];z++){var X=L.element,Y=D[L.id],G=bo(X).propertiesByName[L.property];if(Y||a.addWarning({message:"unresolved reference <"+L.id+">",element:L.element,property:L.property,value:L.id}),G.isMany){var le=X.get(G.name),oe=le.indexOf(L);oe===-1&&(oe=le.length),Y?le[oe]=Y:le.splice(oe,1)}else X.set(G.name,Y)}}function g(){l.pop().handleEnd()}var y=/^<\?xml /i,v=/ encoding="([^"]+)"/i,x=/^utf-8$/i;function C(D){if(y.test(D)){var B=v.exec(D),z=B&&B[1];!z||x.test(z)||a.addWarning({message:"unsupported document encoding <"+z+">, falling back to UTF-8"})}}function P(D,B){var z=l.peek();try{l.push(z.handleNode(D))}catch(L){u(L,B,o)&&l.push(new Jv)}}function R(D,B){try{l.peek().handleText(D)}catch(z){f(z,B)}}function E(D,B){D.trim()&&R(D,B)}var b=i.getPackages().reduce(function(D,B){return D[B.uri]=B.prefix,D},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(b).on("openTag",function(D,B,z,L){var X=D.attrs||{},Y=Object.keys(X).reduce(function(le,oe){var Se=B(X[oe]);return le[oe]=Se,le},{}),G={name:D.name,originalName:D.originalName,attributes:Y,ns:D.ns};P(G,L)}).on("question",C).on("closeTag",g).on("cdata",R).on("text",function(D,B,z){E(B(D),z)}).on("error",u).on("warn",f),new Promise(function(D,B){var z;try{s.parse(e),d()}catch(le){z=le}var L=r.element;!z&&!L&&(z=xa("failed to parse document as <"+r.type.$descriptor.name+">"));var X=a.warnings,Y=a.references,G=a.elementsById;return z?(z.warnings=X,B(z)):D({rootElement:L,elementsById:G,references:Y,warnings:X})})};n0.prototype.handler=function(e){return new t0(this.model,e)};function SD(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var CD=`<?xml version="1.0" encoding="UTF-8"?>
`,RD=/<|>|'|"|&|\n\r|\n/g,lR=/<|>|&/g;function kD(e){var t={},n={},r={},i=[],o=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?i.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,l=this.getNSKey(a);r[l]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(f){var d=l.getNSKey(f);return r[d]}var l=this,u=[].concat(i,o);return u.filter(s)}}function PD(e){return e.charAt(0).toLowerCase()+e.slice(1)}function TD(e,t){return iR(t)?PD(e):e}function cR(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function uR(e){return Br(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function AD(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function MD(e,t){return t.isGeneric?q({localName:t.ns.localName},e):q({localName:TD(t.ns.localName,t.$pkg)},e)}function ND(e,t){return q({localName:t.ns.localName},e)}function DD(e){var t=e.$descriptor;return yt(t.properties,function(n){var r=n.name;if(n.isVirtual||!vr(e,r))return!1;var i=e[r];return i===n.default||i===null?!1:n.isMany?i.length:!0})}var OD={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},LD={"<":"lt",">":"gt","&":"amp"};function pR(e,t,n){return e=Br(e)?e:""+e,e.replace(t,function(r){return"&"+n[r]+";"})}function ID(e){return pR(e,RD,OD)}function BD(e){return pR(e,lR,LD)}function jD(e){return yt(e,function(t){return t.isAttr})}function $D(e){return yt(e,function(t){return!t.isAttr})}function r0(e){this.tagName=e}r0.prototype.build=function(e){return this.element=e,this};r0.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function xs(){}xs.prototype.serializeValue=xs.prototype.serializeTo=function(e){e.append(this.escape?BD(this.value):this.value)};xs.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(lR)!==-1&&(this.escape=!0),this};function i0(e){this.tagName=e}cR(i0,xs);i0.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Xt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Xt.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,r,i,o=t.isGeneric;return o?r=this.parseGeneric(e):r=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(i=DD(e),this.parseAttributes(jD(i)),this.parseContainments($D(i))),this.parseGenericAttributes(e,r),this};Xt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return MD(t,e)};Xt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return ND(t,e)};Xt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Xt.prototype.nsAttributeName=function(e){var t;if(Br(e)?t=cr(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:q({localName:t.localName},n)};Xt.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];return W(e,function(i,o){var a;o==="$body"?n.push(new xs().build({type:"String"},i)):o==="$children"?W(i,function(s){n.push(new Xt(t).build(s))}):o.indexOf("$")!==0&&(a=t.parseNsAttribute(e,o,i),a&&r.push({name:o,value:i}))}),r};Xt.prototype.parseNsAttribute=function(e,t,n){var r=e.$model,i=cr(t),o;if(i.prefix==="xmlns"&&(o={prefix:i.localName,uri:n}),!i.prefix&&i.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}};Xt.prototype.parseNsAttributes=function(e,t){var n=this,r=e.$attrs,i=[];return W(r,function(o,a){var s=n.parseNsAttribute(e,a,o);s&&i.push(s)}),i};Xt.prototype.parseGenericAttributes=function(e,t){var n=this;W(t,function(r){if(r.name!==th)try{n.addAttribute(n.nsAttributeName(r.name),r.value)}catch(i){console.warn("missing namespace information for ",r.name,"=",r.value,"on",e,i)}})};Xt.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;W(e,function(i){var o=r.get(i.name),a=i.isReference,s=i.isMany;if(s||(o=[o]),i.isBody)n.push(new xs().build(i,o[0]));else if(tR(i.type))W(o,function(f){n.push(new i0(t.addTagName(t.nsPropertyTagName(i))).build(i,f))});else if(a)W(o,function(f){n.push(new r0(t.addTagName(t.nsPropertyTagName(i))).build(f))});else{var l=aR(i),u=xD(i);W(o,function(f){var d;l?d=new rh(t,i):u?d=new Xt(t,i):d=new Xt(t),n.push(d.build(f))})}})};Xt.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,r;return t||(r=n&&n.getNamespaces(),e||!r?this.namespaces=t=new kD(r):t=r),t};Xt.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,o=e.prefix,a=r.byUri(i);return(!a||n)&&r.add(e,t),r.mapPrefix(o,i),e};Xt.prototype.logNamespaceUsed=function(e,t){var n=this.element,r=n.$model,i=this.getNamespaces(t),o=e.prefix,a=e.uri,s,l,u;if(!o&&!a)return{localName:e.localName};if(u=vD[o]||r&&(r.getPackage(o)||{}).uri,a=a||u||i.uriByPrefix(o),!a)throw new Error("no namespace uri given for prefix <"+o+">");if(e=i.byUri(a),!e){for(s=o,l=1;i.uriByPrefix(s);)s=o+"_"+l++;e=this.logNamespace({prefix:s,uri:a},u===a)}return o&&i.mapPrefix(o,a),e};Xt.prototype.parseAttributes=function(e){var t=this,n=this.element;W(e,function(r){var i=n.get(r.name);if(r.isReference)if(!r.isMany)i=i.id;else{var o=[];W(i,function(a){o.push(a.id)}),i=o.join(" ")}t.addAttribute(t.nsAttributeName(r),i)})};Xt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),uR(e)};Xt.prototype.addAttribute=function(e,t){var n=this.attrs;Br(t)&&(t=ID(t));var r=_C(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),i={name:e,value:t};r!==-1?n.splice(r,1,i):n.push(i)};Xt.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=AD(n).concat(t)),W(t,function(r){e.append(" ").append(uR(r.name)).append('="').append(r.value).append('"')})};Xt.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==xs;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),W(this.body,function(r){r.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function rh(e,t){Xt.call(this,e,t)}cR(rh,Xt);rh.prototype.parseNsAttributes=function(e){var t=Xt.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(r.uri),o=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(th),(r.prefix?r.prefix+":":"")+o+n.ns.localName),t};rh.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function FD(){this.value="",this.write=function(e){this.value+=e}}function zD(e,t){var n=[""];this.append=function(r){return e.write(r),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function HD(e){e=q({format:!1,preamble:!0},e||{});function t(n,r){var i=r||new FD,o=new zD(i,e.format);if(e.preamble&&o.append(CD),new Xt().build(n).serializeTo(o),!r)return i.value}return{toXML:t}}function ih(e,t){Ei.call(this,e,t)}ih.prototype=Object.create(Ei.prototype);ih.prototype.fromXML=function(e,t,n){Br(t)||(n=t,t="bpmn:Definitions");var r=new n0(q({model:this,lax:!0},n)),i=r.handler(t);return r.fromXML(e,i)};ih.prototype.toXML=function(e,t){var n=new HD(t);return new Promise(function(r,i){try{var o=n.toXML(e);return r({xml:o})}catch(a){return i(a)}})};var VD="BPMN20",WD="http://www.omg.org/spec/BPMN/20100524/MODEL",UD="bpmn",GD=[],KD=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],YD=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],qD={tagAlias:"lowerCase",typePrefix:"t"},XD={name:VD,uri:WD,prefix:UD,associations:GD,types:KD,enumerations:YD,xml:qD},QD="BPMNDI",ZD="http://www.omg.org/spec/BPMN/20100524/DI",JD="bpmndi",e4=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],t4=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],n4=[],r4={name:QD,uri:ZD,prefix:JD,types:e4,enumerations:t4,associations:n4},i4="DC",o4="http://www.omg.org/spec/DD/20100524/DC",a4="dc",s4=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],l4=[],c4={name:i4,uri:o4,prefix:a4,types:s4,associations:l4},u4="DI",p4="http://www.omg.org/spec/DD/20100524/DI",f4="di",d4=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],h4=[],m4={tagAlias:"lowerCase"},g4={name:u4,uri:p4,prefix:f4,types:d4,associations:h4,xml:m4},y4="bpmn.io colors for BPMN",v4="http://bpmn.io/schema/bpmn/biocolor/1.0",x4="bioc",_4=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],w4=[],E4=[],b4={name:y4,uri:v4,prefix:x4,types:_4,enumerations:w4,associations:E4},S4="BPMN in Color",C4="http://www.omg.org/spec/BPMN/non-normative/color/1.0",R4="color",k4=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],P4=[],T4=[],A4={name:S4,uri:C4,prefix:R4,types:k4,enumerations:P4,associations:T4},M4={bpmn:XD,bpmndi:r4,dc:c4,di:g4,bioc:b4,color:A4};function N4(e,t){var n=q({},M4,e);return new ih(n,t)}function qn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var D4="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function fR(e){vr(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(D4)}})}function gr(e,t){return e.$instanceOf(t)}function O4(e){return Mt(e.rootElements,function(t){return gr(t,"bpmn:Process")||gr(t,"bpmn:Collaboration")})}function L4(e){var t={},n=[],r={};function i(Q,J){return function(se){Q(se,J)}}function o(Q){t[Q.id]=Q}function a(Q){return t[Q.id]}function s(Q,J){var se=Q.gfx;if(se)throw new Error(`already rendered ${qn(Q)}`);return e.element(Q,r[Q.id],J)}function l(Q,J){return e.root(Q,r[Q.id],J)}function u(Q,J){try{var se=r[Q.id]&&s(Q,J);return o(Q),se}catch(ye){f(ye.message,{element:Q,error:ye}),console.error(`failed to import ${qn(Q)}`,ye)}}function f(Q,J){e.error(Q,J)}var d=this.registerDi=function(J){var se=J.bpmnElement;se?r[se.id]?f(`multiple DI elements defined for ${qn(se)}`,{element:se}):(r[se.id]=J,fR(se)):f(`no bpmnElement referenced in ${qn(J)}`,{element:J})};function g(Q){y(Q.plane)}function y(Q){d(Q),W(Q.planeElement,v)}function v(Q){d(Q)}this.handleDefinitions=function(J,se){var ye=J.diagrams;if(se&&ye.indexOf(se)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!se&&ye&&ye.length&&(se=ye[0]),!se)throw new Error("no diagram to display");r={},g(se);var I=se.plane;if(!I)throw new Error(`no plane for ${qn(se)}`);var w=I.bpmnElement;if(!w)if(w=O4(J),w)f(`correcting missing bpmnElement on ${qn(I)} to ${qn(w)}`),I.bpmnElement=w,d(I);else throw new Error("no process or collaboration to display");var k=l(w,I);if(gr(w,"bpmn:Process")||gr(w,"bpmn:SubProcess"))C(w,k);else if(gr(w,"bpmn:Collaboration"))Oe(w,k),P(J.rootElements,k);else throw new Error(`unsupported bpmnElement for ${qn(I)}: ${qn(w)}`);x(n)};var x=this.handleDeferred=function(){for(var J;n.length;)J=n.shift(),J()};function C(Q,J){Ke(Q,J),X(Q.ioSpecification,J),L(Q.artifacts,J),o(Q)}function P(Q,J){var se=yt(Q,function(ye){return!a(ye)&&gr(ye,"bpmn:Process")&&ye.laneSets});se.forEach(i(C,J))}function R(Q,J){u(Q,J)}function E(Q,J){W(Q,i(R,J))}function b(Q,J){u(Q,J)}function D(Q,J){u(Q,J)}function B(Q,J){u(Q,J)}function z(Q,J){u(Q,J)}function L(Q,J){W(Q,function(se){gr(se,"bpmn:Association")?n.push(function(){z(se,J)}):z(se,J)})}function X(Q,J){Q&&(W(Q.dataInputs,i(D,J)),W(Q.dataOutputs,i(B,J)))}var Y=this.handleSubProcess=function(J,se){Ke(J,se),L(J.artifacts,se)};function G(Q,J){var se=u(Q,J);gr(Q,"bpmn:SubProcess")&&Y(Q,se||J),gr(Q,"bpmn:Activity")&&X(Q.ioSpecification,J),n.push(function(){W(Q.dataInputAssociations,i(b,J)),W(Q.dataOutputAssociations,i(b,J))})}function le(Q,J){u(Q,J)}function oe(Q,J){u(Q,J)}function Se(Q,J){n.push(function(){var se=u(Q,J);Q.childLaneSet&&kt(Q.childLaneSet,se||J),qe(Q)})}function kt(Q,J){W(Q.lanes,i(Se,J))}function Ge(Q,J){W(Q,i(kt,J))}function Ke(Q,J){me(Q.flowElements,J),Q.laneSets&&Ge(Q.laneSets,J)}function me(Q,J){W(Q,function(se){gr(se,"bpmn:SequenceFlow")?n.push(function(){le(se,J)}):gr(se,"bpmn:BoundaryEvent")?n.unshift(function(){G(se,J)}):gr(se,"bpmn:FlowNode")?G(se,J):gr(se,"bpmn:DataObject")||(gr(se,"bpmn:DataStoreReference")||gr(se,"bpmn:DataObjectReference")?oe(se,J):f(`unrecognized flowElement ${qn(se)} in context ${qn(J&&J.businessObject)}`,{element:se,context:J}))})}function $e(Q,J){var se=u(Q,J),ye=Q.processRef;ye&&C(ye,se||J)}function Oe(Q,J){W(Q.participants,i($e,J)),L(Q.artifacts,J),n.push(function(){E(Q.messageFlows,J)})}function qe(Q){W(Q.flowNodeRef,function(J){var se=J.get("lanes");se&&se.push(Q)})}}function A(e,t){var n=pe(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function mt(e,t){return ba(t,function(n){return A(e,n)})}function pe(e){return e&&e.businessObject||e}function Ct(e){return e&&e.di}function I4(e,t,n){var r,i,o,a,s=[];function l(u,f){var d={root:function(x,C){return r.add(x,C)},element:function(x,C,P){return r.add(x,C,P)},error:function(x,C){s.push({message:x,context:C})}},g=new L4(d);f=f||u.diagrams&&u.diagrams[0];var y=B4(u,f);if(!y)throw new Error("no diagram to display");W(y,function(x){g.handleDefinitions(u,x)});var v=f.plane.bpmnElement.id;o.setRootElement(o.findRoot(v+"_plane")||o.findRoot(v))}return new Promise(function(u,f){try{return r=e.get("bpmnImporter"),i=e.get("eventBus"),o=e.get("canvas"),i.fire("import.render.start",{definitions:t}),l(t,n),i.fire("import.render.complete",{error:a,warnings:s}),u({warnings:s})}catch(d){return d.warnings=s,f(d)}})}function B4(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,r=n;!A(n,"bpmn:Process")&&!A(n,"bpmn:Collaboration")&&(r=j4(n));var i;A(r,"bpmn:Collaboration")?i=r:i=Mt(e.rootElements,function(u){if(A(u,"bpmn:Collaboration"))return Mt(u.participants,function(f){return f.processRef===r})});var o=[r];i&&(o=Zn(i.participants,function(u){return u.processRef}),o.push(i));var a=dR(o),s=[t],l=[n];return W(e.diagrams,function(u){if(u.plane){var f=u.plane.bpmnElement;a.indexOf(f)!==-1&&l.indexOf(f)===-1&&(s.push(u),l.push(f))}}),s}}function dR(e){var t=[];return W(e,function(n){n&&(t.push(n),t=t.concat(dR(n.flowElements)))}),t}function j4(e){for(var t=e;t;){if(A(t,"bpmn:Process"))return t;t=t.$parent}}var $4='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',hR=$4,mR={verticalAlign:"middle"},gR={color:"#404040"},F4={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},z4={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},H4={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},V4='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+hR+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Yi;function W4(){Yi=zt(V4),Xn(Yi,F4),Xn(It("svg",Yi),mR),Xn(It(".backdrop",Yi),z4),Xn(It(".notice",Yi),H4),Xn(It(".link",Yi),gR,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function U4(){Yi||(W4(),Dr.bind(Yi,".backdrop","click",function(e){document.body.removeChild(Yi)})),document.body.appendChild(Yi)}function Qt(e){e=q({},K4,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),q4(this._container),this._init(this._container,this._moddle,e)}De(Qt,Ra);Qt.prototype.importXML=async function(t,n){const r=this;function i(a){return r.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(g){throw this._emit("import.parse.complete",{error:g}),g}let s=a.rootElement;const l=a.references,u=a.warnings,f=a.elementsById;o=o.concat(u),s=this._emit("import.parse.complete",i({error:null,definitions:s,elementsById:f,references:l,warnings:o}))||s;const d=await this.importDefinitions(s,n);return o=o.concat(d.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),Mf(s,o),s=G4(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}};Qt.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};Qt.prototype.open=async function(t){const n=this._definitions;let r=t;if(!n){const o=new Error("no XML imported");throw Mf(o,[]),o}if(typeof t=="string"&&(r=Y4(n,t),!r)){const o=new Error("BPMNDiagram <"+t+"> not found");throw Mf(o,[]),o}try{this.clear()}catch(o){throw Mf(o,[]),o}const{warnings:i}=await I4(this,n,r);return{warnings:i}};Qt.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,r,i;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,i=(await this._moddle.toXML(n,t)).xml,i=this._emit("saveXML.serialized",{xml:i})||i}catch(a){r=a}const o=r?{error:r}:{xml:i};if(this._emit("saveXML.done",o),r)throw r;return o};Qt.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const r=this.get("canvas"),i=r.getActiveLayer(),o=It(":scope > defs",r._svg),a=sw(i),s=o?"<defs>"+sw(o)+"</defs>":"",l=i.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+s+a+"</svg>"}catch(r){n=r}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};Qt.prototype._setDefinitions=function(e){this._definitions=e};Qt.prototype.getModules=function(){return this._modules};Qt.prototype.clear=function(){this.getDefinitions()&&Ra.prototype.clear.call(this)};Qt.prototype.destroy=function(){Ra.prototype.destroy.call(this),no(this._container)};Qt.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)};Qt.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Qt.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=It(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Qt.prototype.getDefinitions=function(){return this._definitions};Qt.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Qt.prototype._init=function(e,t,n){const r=n.modules||this.getModules(n),i=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,r,i),s=q(_i(n,["additionalModules"]),{canvas:q({},n.canvas,{container:e}),modules:a});Ra.call(this,s),n&&n.container&&this.attachTo(n.container)};Qt.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Qt.prototype._createContainer=function(e){const t=zt('<div class="bjs-container"></div>');return Xn(t,{width:kw(e.width),height:kw(e.height),position:e.position}),t};Qt.prototype._createModdle=function(e){const t=q({},this._moddleExtensions,e.moddleExtensions);return new N4(t)};Qt.prototype._modules=[];function Mf(e,t){return e.warnings=t,e}function G4(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const K4={width:"100%",height:"100%",position:"relative"};function kw(e){return e+(Qe(e)?"px":"")}function Y4(e,t){return t&&Mt(e.diagrams,function(n){return n.id===t})||null}function q4(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+hR+"</a>",r=zt(n);Xn(It("svg",r),mR),Xn(r,gR,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(r),ot.bind(r,"click",function(i){U4(),i.preventDefault()})}function Du(e){Qt.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}De(Du,Qt);Du.prototype._createModdle=function(e){var t=Qt.prototype._createModdle.call(this,e);return t.ids=new eo([32,36,1]),t};Du.prototype._collectIds=function(e,t){var n=e.$model,r=n.ids,i;r.clear();for(i in t)r.claim(i,t[i])};function xt(e,t){return A(e,"bpmn:CallActivity")?!1:A(e,"bpmn:SubProcess")?(t=t||Ct(e),t&&A(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):A(e,"bpmn:Participant")?!!pe(e).processRef:!0}function Nn(e){if(!(!A(e,"bpmn:Participant")&&!A(e,"bpmn:Lane"))){var t=Ct(e).isHorizontal;return t===void 0?!0:t}}function X4(e){return e&&pe(e).isInterrupting!==!1}function Jn(e){return e&&!!pe(e).triggeredByEvent}function zl(e,t){var n=pe(e).eventDefinitions;return ba(n,function(r){return A(r,t)})}function Q4(e){return zl(e,"bpmn:ErrorEventDefinition")}function Z4(e){return zl(e,"bpmn:EscalationEventDefinition")}function J4(e){return zl(e,"bpmn:CompensateEventDefinition")}var du={width:90,height:20},Pw=15;function _s(e){return A(e,"bpmn:Event")||A(e,"bpmn:Gateway")||A(e,"bpmn:DataStoreReference")||A(e,"bpmn:DataObjectReference")||A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput")||A(e,"bpmn:SequenceFlow")||A(e,"bpmn:MessageFlow")||A(e,"bpmn:Group")}function oh(e){return Rt(e.label)}function eO(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)],i=tO(e),o=Math.atan((r.y-n.y)/(r.x-n.x)),a=i.x,s=i.y;return Math.abs(o)<Math.PI/2?s-=Pw:a+=Pw,{x:a,y:s}}function tO(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}function o0(e){return e.waypoints?eO(e.waypoints):A(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+du.height/2}:{x:e.x+e.width/2,y:e.y+e.height+du.height/2}}function nO(e,t){var n,r,i,o=e.label;return o&&o.bounds?(i=o.bounds,r={width:Math.max(du.width,i.width),height:i.height},n={x:i.x+i.width/2,y:i.y+i.height/2}):(n=o0(t),r=du),q({x:n.x-r.width/2,y:n.y-r.height/2},r)}function yR(e){if(A(e,"bpmn:FlowElement")||A(e,"bpmn:Participant")||A(e,"bpmn:Lane")||A(e,"bpmn:SequenceFlow")||A(e,"bpmn:MessageFlow")||A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput"))return"name";if(A(e,"bpmn:TextAnnotation"))return"text";if(A(e,"bpmn:Group"))return"categoryValueRef"}function rO(e){var t=e.categoryValueRef;return t&&t.value||""}function qr(e){var t=e.businessObject,n=yR(t);if(n)return n==="categoryValueRef"?rO(t):t[n]||""}function iO(e,t){var n=e.businessObject,r=yR(n);return r&&(r==="categoryValueRef"?n.categoryValueRef.value=t:n[r]=t),e}var _y="hsl(225, 10%, 15%)",oO="white";function Wi(e,t){return ba(e.eventDefinitions,function(n){return n.$type===t})}function aO(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function sO(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function gt(e,t,n){var r=Ct(e);return n||r.get("color:background-color")||r.get("bioc:fill")||t||oO}function ke(e,t,n){var r=Ct(e);return n||r.get("color:border-color")||r.get("bioc:stroke")||t||_y}function yc(e,t,n,r){var i=Ct(e),o=i.get("label");return r||o&&o.get("color:color")||t||ke(e,n)}function lO(e){var t=e.x+e.width/2,n=e.y+e.height/2,r=e.width/2,i=[["M",t,n],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]];return Cs(i)}function cO(e,t){var n=e.x,r=e.y,i=e.width,o=e.height,a=[["M",n+t,r],["l",i-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-i,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Cs(a)}function uO(e){var t=e.width,n=e.height,r=e.x,i=e.y,o=t/2,a=n/2,s=[["M",r+o,i],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return Cs(s)}function pO(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=[["M",t,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return Cs(o)}function vc(e,t={}){return{width:ui(e,t),height:Ar(e,t)}}function ui(e,t={}){return vr(t,"width")?t.width:e.width}function Ar(e,t={}){return vr(t,"height")?t.height:e.height}var fO=new eo,dO=10,Gp=3,hO=1.5,Nf=10,Gs=.95,mO=1,gO=.25;function Ps(e,t,n,r,i,o,a){Ao.call(this,t,a);var s=e&&e.defaultFillColor,l=e&&e.defaultStrokeColor,u=e&&e.defaultLabelColor;function f(I){return n.computeStyle(I,{strokeLinecap:"round",strokeLinejoin:"round",stroke:_y,strokeWidth:2,fill:"white"})}function d(I){return n.computeStyle(I,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:_y,strokeWidth:2})}function g(I,w){var{ref:k={x:0,y:0},scale:$=1,element:K,parentGfx:ae=i._svg}=w,Te=ze("marker",{id:I,viewBox:"0 0 20 20",refX:k.x,refY:k.y,markerWidth:20*$,markerHeight:20*$,orient:"auto"});et(Te,K);var Ae=It(":scope > defs",ae);Ae||(Ae=ze("defs"),et(ae,Ae)),et(Ae,Te)}function y(I,w,k,$){var K=fO.nextPrefixed("marker-");return v(I,K,w,k,$),"url(#"+K+")"}function v(I,w,k,$,K){if(k==="sequenceflow-end"){var ae=ze("path",{d:"M 1 5 L 11 10 L 1 15 Z",...f({fill:K,stroke:K,strokeWidth:1})});g(w,{element:ae,ref:{x:11,y:10},scale:.5,parentGfx:I})}if(k==="messageflow-start"){var Te=ze("circle",{cx:6,cy:6,r:3.5,...f({fill:$,stroke:K,strokeWidth:1,strokeDasharray:[1e4,1]})});g(w,{element:Te,ref:{x:6,y:6},parentGfx:I})}if(k==="messageflow-end"){var Ae=ze("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...f({fill:$,stroke:K,strokeWidth:1,strokeDasharray:[1e4,1]})});g(w,{element:Ae,ref:{x:8.5,y:5},parentGfx:I})}if(k==="association-start"){var de=ze("path",{d:"M 11 5 L 1 10 L 11 15",...d({fill:"none",stroke:K,strokeWidth:1.5,strokeDasharray:[1e4,1]})});g(w,{element:de,ref:{x:1,y:10},scale:.5,parentGfx:I})}if(k==="association-end"){var pt=ze("path",{d:"M 1 5 L 11 10 L 1 15",...d({fill:"none",stroke:K,strokeWidth:1.5,strokeDasharray:[1e4,1]})});g(w,{element:pt,ref:{x:11,y:10},scale:.5,parentGfx:I})}if(k==="conditional-flow-marker"){var rt=ze("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...f({fill:$,stroke:K})});g(w,{element:rt,ref:{x:-1,y:10},scale:.5,parentGfx:I})}if(k==="conditional-default-flow-marker"){var Xe=ze("path",{d:"M 6 4 L 10 16",...f({stroke:K,fill:"none"})});g(w,{element:Xe,ref:{x:0,y:10},scale:.5,parentGfx:I})}}function x(I,w,k,$,K={}){jn($)&&(K=$,$=0),$=$||0,K=f(K);var ae=w/2,Te=k/2,Ae=ze("circle",{cx:ae,cy:Te,r:Math.round((w+k)/4-$),...K});return et(I,Ae),Ae}function C(I,w,k,$,K,ae){jn(K)&&(ae=K,K=0),K=K||0,ae=f(ae);var Te=ze("rect",{x:K,y:K,width:w-K*2,height:k-K*2,rx:$,ry:$,...ae});return et(I,Te),Te}function P(I,w,k,$){var K=w/2,ae=k/2,Te=[{x:K,y:0},{x:w,y:ae},{x:K,y:k},{x:0,y:ae}],Ae=Te.map(function(pt){return pt.x+","+pt.y}).join(" ");$=f($);var de=ze("polygon",{...$,points:Ae});return et(I,de),de}function R(I,w,k,$){k=d(k);var K=Zd(w,k,$);return et(I,K),K}function E(I,w,k){return R(I,w,k,5)}function b(I,w,k){k=d(k);var $=ze("path",{...k,d:w});return et(I,$),$}function D(I,w,k,$){return b(w,k,q({"data-marker":I},$))}function B(I){return ye[I]}function z(I){return function(w,k,$){return B(I)(w,k,$)}}var L={"bpmn:MessageEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:w.width,containerHeight:w.height,position:{mx:.235,my:.315}}),ae=$?ke(w,l,k.stroke):gt(w,s,k.fill),Te=$?gt(w,s,k.fill):ke(w,l,k.stroke),Ae=b(I,K,{fill:ae,stroke:Te,strokeWidth:1});return Ae},"bpmn:TimerEventDefinition":function(I,w,k={}){var $=x(I,w.width,w.height,.2*w.height,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:2}),K=r.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.5}});b(I,K,{stroke:ke(w,l,k.stroke),strokeWidth:2});for(var ae=0;ae<12;ae++){var Te=r.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.5}}),Ae=w.width/2,de=w.height/2;b(I,Te,{strokeWidth:1,stroke:ke(w,l,k.stroke),transform:"rotate("+ae*30+","+de+","+Ae+")"})}return $},"bpmn:EscalationEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.2}}),ae=$?ke(w,l,k.stroke):gt(w,s,k.fill);return b(I,K,{fill:ae,stroke:ke(w,l,k.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(I,w,k={}){var $=r.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.222}});return b(I,$,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.57,my:.263}}),ae=$?ke(w,l,k.stroke):gt(w,s,k.fill);return b(I,K,{fill:ae,stroke:ke(w,l,k.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:w.width,containerHeight:w.height,position:{mx:.2,my:.722}}),ae=$?ke(w,l,k.stroke):gt(w,s,k.fill);return b(I,K,{fill:ae,stroke:ke(w,l,k.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.638,my:-.055}}),ae=$?ke(w,l,k.stroke):"none",Te=b(I,K,{fill:ae,stroke:ke(w,l,k.stroke),strokeWidth:1});return QC(Te,45),Te},"bpmn:CompensateEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.22,my:.5}}),ae=$?ke(w,l,k.stroke):gt(w,s,k.fill);return b(I,K,{fill:ae,stroke:ke(w,l,k.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.2}}),ae=$?ke(w,l,k.stroke):gt(w,s,k.fill);return b(I,K,{strokeWidth:1,fill:ae,stroke:ke(w,l,k.stroke)})},"bpmn:MultipleEventDefinition":function(I,w,k={},$){var K=r.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:w.width,containerHeight:w.height,position:{mx:.222,my:.36}}),ae=$?ke(w,l,k.stroke):gt(w,s,k.fill);return b(I,K,{fill:ae,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(I,w,k={}){var $=r.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:w.width,containerHeight:w.height,position:{mx:.458,my:.194}});return b(I,$,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(I,w,k={}){var $=x(I,w.width,w.height,8,{fill:ke(w,l,k.stroke),stroke:ke(w,l,k.stroke),strokeWidth:4});return $}};function X(I,w,k={}){var $=pe(I),K=aO($);return $.get("eventDefinitions")&&$.get("eventDefinitions").length>1?$.get("parallelMultiple")?L["bpmn:ParallelMultipleEventDefinition"](w,I,k,K):L["bpmn:MultipleEventDefinition"](w,I,k,K):Wi($,"bpmn:MessageEventDefinition")?L["bpmn:MessageEventDefinition"](w,I,k,K):Wi($,"bpmn:TimerEventDefinition")?L["bpmn:TimerEventDefinition"](w,I,k,K):Wi($,"bpmn:ConditionalEventDefinition")?L["bpmn:ConditionalEventDefinition"](w,I,k,K):Wi($,"bpmn:SignalEventDefinition")?L["bpmn:SignalEventDefinition"](w,I,k,K):Wi($,"bpmn:EscalationEventDefinition")?L["bpmn:EscalationEventDefinition"](w,I,k,K):Wi($,"bpmn:LinkEventDefinition")?L["bpmn:LinkEventDefinition"](w,I,k,K):Wi($,"bpmn:ErrorEventDefinition")?L["bpmn:ErrorEventDefinition"](w,I,k,K):Wi($,"bpmn:CancelEventDefinition")?L["bpmn:CancelEventDefinition"](w,I,k,K):Wi($,"bpmn:CompensateEventDefinition")?L["bpmn:CompensateEventDefinition"](w,I,k,K):Wi($,"bpmn:TerminateEventDefinition")?L["bpmn:TerminateEventDefinition"](w,I,k,K):null}var Y={ParticipantMultiplicityMarker:function(I,w,k={}){var $=ui(w,k),K=Ar(w,k),ae=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:K,position:{mx:($/2-6)/$,my:(K-15)/K}});D("participant-multiplicity",I,ae,{strokeWidth:2,fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)})},SubProcessMarker:function(I,w,k={}){var $=C(I,14,14,0,{strokeWidth:1,fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)});Vn($,w.width/2-7.5,w.height-20);var K=r.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:w.width,containerHeight:w.height,position:{mx:(w.width/2-7.5)/w.width,my:(w.height-20)/w.height}});D("sub-process",I,K,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)})},ParallelMarker:function(I,w,k){var $=ui(w,k),K=Ar(w,k),ae=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:K,position:{mx:($/2+k.parallel)/$,my:(K-20)/K}});D("parallel",I,ae,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)})},SequentialMarker:function(I,w,k){var $=r.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:(w.width/2+k.seq)/w.width,my:(w.height-19)/w.height}});D("sequential",I,$,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)})},CompensationMarker:function(I,w,k){var $=r.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:(w.width/2+k.compensation)/w.width,my:(w.height-13)/w.height}});D("compensation",I,$,{strokeWidth:1,fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)})},LoopMarker:function(I,w,k){var $=ui(w,k),K=Ar(w,k),ae=r.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:K,position:{mx:($/2+k.loop)/$,my:(K-7)/K}});D("loop",I,ae,{strokeWidth:1.5,fill:"none",stroke:ke(w,l,k.stroke),strokeMiterlimit:.5})},AdhocMarker:function(I,w,k){var $=ui(w,k),K=Ar(w,k),ae=r.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:K,position:{mx:($/2+k.adhoc)/$,my:(K-15)/K}});D("adhoc",I,ae,{strokeWidth:1,fill:ke(w,l,k.stroke),stroke:ke(w,l,k.stroke)})}};function G(I,w,k,$){Y[I](w,k,$)}function le(I,w,k,$={}){$={fill:$.fill,stroke:$.stroke,width:ui(w,$),height:Ar(w,$)};var K=pe(w),ae=k&&k.includes("SubProcessMarker");ae?$={...$,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:$={...$,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},W(k,function(de){G(de,I,w,$)}),K.get("isForCompensation")&&G("CompensationMarker",I,w,$),A(K,"bpmn:AdHocSubProcess")&&G("AdhocMarker",I,w,$);var Te=K.get("loopCharacteristics"),Ae=Te&&Te.get("isSequential");Te&&(Ae===void 0&&G("LoopMarker",I,w,$),Ae===!1&&G("ParallelMarker",I,w,$),Ae===!0&&G("SequentialMarker",I,w,$))}function oe(I,w,k={}){k=q({size:{width:100}},k);var $=o.createText(w||"",k);return St($).add("djs-label"),et(I,$),$}function Se(I,w,k,$={}){var K=pe(w),ae=vc({x:w.x,y:w.y,width:w.width,height:w.height},$);return oe(I,K.name,{align:k,box:ae,padding:7,style:{fill:yc(w,u,l,$.stroke)}})}function kt(I,w,k={}){var $={width:90,height:30,x:w.width/2+w.x,y:w.height/2+w.y};return oe(I,qr(w),{box:$,fitBox:!0,style:q({},o.getExternalStyle(),{fill:yc(w,u,l,k.stroke)})})}function Ge(I,w,k,$={}){var K=Nn(k),ae=oe(I,w,{box:{height:30,width:K?Ar(k,$):ui(k,$)},align:"center-middle",style:{fill:yc(k,u,l,$.stroke)}});if(K){var Te=-1*Ar(k,$);Af(ae,0,-Te,270)}}function Ke(I,w,k={}){var{width:$,height:K}=vc(w,k);return C(I,$,K,Nf,{...k,fill:gt(w,s,k.fill),fillOpacity:Gs,stroke:ke(w,l,k.stroke)})}function me(I,w,k={}){var $=pe(w),K=gt(w,s,k.fill),ae=ke(w,l,k.stroke);return($.get("associationDirection")==="One"||$.get("associationDirection")==="Both")&&(k.markerEnd=y(I,"association-end",K,ae)),$.get("associationDirection")==="Both"&&(k.markerStart=y(I,"association-start",K,ae)),k=bt(k,["markerStart","markerEnd"]),E(I,w.waypoints,{...k,stroke:ae,strokeDasharray:"0, 5"})}function $e(I,w,k={}){var $=gt(w,s,k.fill),K=ke(w,l,k.stroke),ae=r.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.474,my:.296}}),Te=b(I,ae,{fill:$,fillOpacity:Gs,stroke:K}),Ae=pe(w);if(sO(Ae)){var de=r.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.33,my:(w.height-18)/w.height}});b(I,de,{strokeWidth:2,fill:$,stroke:K})}return Te}function Oe(I,w,k={}){return x(I,w.width,w.height,{fillOpacity:Gs,...k,fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)})}function qe(I,w,k={}){return P(I,w.width,w.height,{fill:gt(w,s,k.fill),fillOpacity:Gs,stroke:ke(w,l,k.stroke)})}function Q(I,w,k={}){var $=C(I,ui(w,k),Ar(w,k),0,{fill:gt(w,s,k.fill),fillOpacity:k.fillOpacity||Gs,stroke:ke(w,l,k.stroke),strokeWidth:1.5}),K=pe(w);if(A(K,"bpmn:Lane")){var ae=K.get("name");Ge(I,ae,w,k)}return $}function J(I,w,k={}){var $=Ke(I,w,k);Jn(w)&&be($,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var K=xt(w);return Se(I,w,K?"center-top":"center-middle",k),K?le(I,w,void 0,k):le(I,w,["SubProcessMarker"],k),$}function se(I,w,k={}){var $=Ke(I,w,k);return Se(I,w,"center-middle",k),le(I,w,void 0,k),$}var ye=this.handlers={"bpmn:AdHocSubProcess":function(I,w,k={}){return xt(w)?k=bt(k,["fill","stroke","width","height"]):k=bt(k,["fill","stroke"]),J(I,w,k)},"bpmn:Association":function(I,w,k={}){return k=bt(k,["fill","stroke"]),me(I,w,k)},"bpmn:BoundaryEvent":function(I,w,k={}){var{renderIcon:$=!0}=k;k=bt(k,["fill","stroke"]);var K=pe(w),ae=K.get("cancelActivity");k={strokeWidth:1.5,fill:gt(w,s,k.fill),fillOpacity:mO,stroke:ke(w,l,k.stroke)},ae||(k.strokeDasharray="6");var Te=Oe(I,w,k);return x(I,w.width,w.height,Gp,{...k,fill:"none"}),$&&X(w,I,k),Te},"bpmn:BusinessRuleTask":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=se(I,w,k),K=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),ae=b(I,K);be(ae,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1});var Te=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),Ae=b(I,Te);return be(Ae,{fill:ke(w,l,k.stroke),stroke:ke(w,l,k.stroke),strokeWidth:1}),$},"bpmn:CallActivity":function(I,w,k={}){return k=bt(k,["fill","stroke"]),J(I,w,{strokeWidth:5,...k})},"bpmn:ComplexGateway":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=qe(I,w,k),K=r.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:w.width,containerHeight:w.height,position:{mx:.46,my:.26}});return b(I,K,{fill:ke(w,l,k.stroke),stroke:ke(w,l,k.stroke),strokeWidth:1}),$},"bpmn:DataInput":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=r.getRawPath("DATA_ARROW"),K=$e(I,w,k);return b(I,$,{fill:"none",stroke:ke(w,l,k.stroke),strokeWidth:1}),K},"bpmn:DataInputAssociation":function(I,w,k={}){return k=bt(k,["fill","stroke"]),me(I,w,{...k,markerEnd:y(I,"association-end",gt(w,s,k.fill),ke(w,l,k.stroke))})},"bpmn:DataObject":function(I,w,k={}){return k=bt(k,["fill","stroke"]),$e(I,w,k)},"bpmn:DataObjectReference":z("bpmn:DataObject"),"bpmn:DataOutput":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=r.getRawPath("DATA_ARROW"),K=$e(I,w,k);return b(I,$,{strokeWidth:1,fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke)}),K},"bpmn:DataOutputAssociation":function(I,w,k={}){return k=bt(k,["fill","stroke"]),me(I,w,{...k,markerEnd:y(I,"association-end",gt(w,s,k.fill),ke(w,l,k.stroke))})},"bpmn:DataStoreReference":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=r.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:0,my:.133}});return b(I,$,{fill:gt(w,s,k.fill),fillOpacity:Gs,stroke:ke(w,l,k.stroke),strokeWidth:2})},"bpmn:EndEvent":function(I,w,k={}){var{renderIcon:$=!0}=k;k=bt(k,["fill","stroke"]);var K=Oe(I,w,{...k,strokeWidth:4});return $&&X(w,I,k),K},"bpmn:EventBasedGateway":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=pe(w),K=qe(I,w,k);x(I,w.width,w.height,w.height*.2,{fill:gt(w,"none",k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1});var ae=$.get("eventGatewayType"),Te=!!$.get("instantiate");function Ae(){var pt=r.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:w.width,containerHeight:w.height,position:{mx:.36,my:.44}});b(I,pt,{fill:"none",stroke:ke(w,l,k.stroke),strokeWidth:2})}if(ae==="Parallel"){var de=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:w.width,containerHeight:w.height,position:{mx:.474,my:.296}});b(I,de,{fill:"none",stroke:ke(w,l,k.stroke),strokeWidth:1})}else ae==="Exclusive"&&(Te||x(I,w.width,w.height,w.height*.26,{fill:"none",stroke:ke(w,l,k.stroke),strokeWidth:1}),Ae());return K},"bpmn:ExclusiveGateway":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=qe(I,w,k),K=r.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:w.width,containerHeight:w.height,position:{mx:.32,my:.3}}),ae=Ct(w);return ae.get("isMarkerVisible")&&b(I,K,{fill:ke(w,l,k.stroke),stroke:ke(w,l,k.stroke),strokeWidth:1}),$},"bpmn:Gateway":function(I,w,k={}){return k=bt(k,["fill","stroke"]),qe(I,w,k)},"bpmn:Group":function(I,w,k={}){return k=bt(k,["fill","stroke","width","height"]),C(I,w.width,w.height,Nf,{stroke:ke(w,l,k.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:ui(w,k),height:Ar(w,k)})},"bpmn:InclusiveGateway":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=qe(I,w,k);return x(I,w.width,w.height,w.height*.24,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:2.5}),$},"bpmn:IntermediateEvent":function(I,w,k={}){var{renderIcon:$=!0}=k;k=bt(k,["fill","stroke"]);var K=Oe(I,w,{...k,strokeWidth:1.5});return x(I,w.width,w.height,Gp,{fill:"none",stroke:ke(w,l,k.stroke),strokeWidth:1.5}),$&&X(w,I,k),K},"bpmn:IntermediateCatchEvent":z("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":z("bpmn:IntermediateEvent"),"bpmn:Lane":function(I,w,k={}){return k=bt(k,["fill","stroke","width","height"]),Q(I,w,{...k,fillOpacity:gO})},"bpmn:ManualTask":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=se(I,w,k),K=r.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return b(I,K,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:.5}),$},"bpmn:MessageFlow":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=pe(w),K=Ct(w),ae=gt(w,s,k.fill),Te=ke(w,l,k.stroke),Ae=E(I,w.waypoints,{markerEnd:y(I,"messageflow-end",ae,Te),markerStart:y(I,"messageflow-start",ae,Te),stroke:Te,strokeDasharray:"10, 11",strokeWidth:1.5});if($.get("messageRef")){var de=Ae.getPointAtLength(Ae.getTotalLength()/2),pt=r.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:de.x,y:de.y}}),rt={strokeWidth:1};K.get("messageVisibleKind")==="initiating"?(rt.fill=ae,rt.stroke=Te):(rt.fill=Te,rt.stroke=ae);var Xe=b(I,pt,rt),nt=$.get("messageRef"),je=nt.get("name"),ft=oe(I,je,{align:"center-top",fitBox:!0,style:{fill:Te}}),ee=Xe.getBBox(),Ie=ft.getBBox(),Pt=de.x-Ie.width/2,_e=de.y+ee.height/2+dO;Af(ft,Pt,_e,0)}return Ae},"bpmn:ParallelGateway":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=qe(I,w,k),K=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:w.width,containerHeight:w.height,position:{mx:.46,my:.2}});return b(I,K,{fill:ke(w,l,k.stroke),stroke:ke(w,l,k.stroke),strokeWidth:1}),$},"bpmn:Participant":function(I,w,k={}){k=bt(k,["fill","stroke","width","height"]);var $=Q(I,w,k),K=xt(w),ae=Nn(w),Te=pe(w),Ae=Te.get("name");if(K){var de=ae?[{x:30,y:0},{x:30,y:Ar(w,k)}]:[{x:0,y:30},{x:ui(w,k),y:30}];R(I,de,{stroke:ke(w,l,k.stroke),strokeWidth:hO}),Ge(I,Ae,w,k)}else{var pt=vc(w,k);ae||(pt.height=ui(w,k),pt.width=Ar(w,k));var rt=oe(I,Ae,{box:pt,align:"center-middle",style:{fill:yc(w,u,l,k.stroke)}});if(!ae){var Xe=-1*Ar(w,k);Af(rt,0,-Xe,270)}}return Te.get("participantMultiplicity")&&G("ParticipantMultiplicityMarker",I,w,k),$},"bpmn:ReceiveTask":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=pe(w),K=se(I,w,k),ae;return $.get("instantiate")?(x(I,28,28,20*.22,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1}),ae=r.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):ae=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),b(I,ae,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1}),K},"bpmn:ScriptTask":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=se(I,w,k),K=r.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return b(I,K,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1}),$},"bpmn:SendTask":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=se(I,w,k),K=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return b(I,K,{fill:ke(w,l,k.stroke),stroke:gt(w,s,k.fill),strokeWidth:1}),$},"bpmn:SequenceFlow":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=gt(w,s,k.fill),K=ke(w,l,k.stroke),ae=E(I,w.waypoints,{markerEnd:y(I,"sequenceflow-end",$,K),stroke:K}),Te=pe(w),{source:Ae}=w;if(Ae){var de=pe(Ae);Te.get("conditionExpression")&&A(de,"bpmn:Activity")&&be(ae,{markerStart:y(I,"conditional-flow-marker",$,K)}),de.get("default")&&(A(de,"bpmn:Gateway")||A(de,"bpmn:Activity"))&&de.get("default")===Te&&be(ae,{markerStart:y(I,"conditional-default-flow-marker",$,K)})}return ae},"bpmn:ServiceTask":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=se(I,w,k);x(I,10,10,{fill:gt(w,s,k.fill),stroke:"none",transform:"translate(6, 6)"});var K=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});b(I,K,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1}),x(I,10,10,{fill:gt(w,s,k.fill),stroke:"none",transform:"translate(11, 10)"});var ae=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return b(I,ae,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:1}),$},"bpmn:StartEvent":function(I,w,k={}){var{renderIcon:$=!0}=k;k=bt(k,["fill","stroke"]);var K=pe(w);K.get("isInterrupting")||(k={...k,strokeDasharray:"6"});var ae=Oe(I,w,k);return $&&X(w,I,k),ae},"bpmn:SubProcess":function(I,w,k={}){return xt(w)?k=bt(k,["fill","stroke","width","height"]):k=bt(k,["fill","stroke"]),J(I,w,k)},"bpmn:Task":function(I,w,k={}){return k=bt(k,["fill","stroke"]),se(I,w,k)},"bpmn:TextAnnotation":function(I,w,k={}){k=bt(k,["fill","stroke","width","height"]);var{width:$,height:K}=vc(w,k),ae=C(I,$,K,0,0,{fill:"none",stroke:"none"}),Te=r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:$,containerHeight:K,position:{mx:0,my:0}});b(I,Te,{stroke:ke(w,l,k.stroke)});var Ae=pe(w),de=Ae.get("text")||"";return oe(I,de,{align:"left-top",box:vc(w,k),padding:7,style:{fill:yc(w,u,l,k.stroke)}}),ae},"bpmn:Transaction":function(I,w,k={}){xt(w)?k=bt(k,["fill","stroke","width","height"]):k=bt(k,["fill","stroke"]);var $=J(I,w,{strokeWidth:1.5,...k}),K=n.style(["no-fill","no-events"],{stroke:ke(w,l,k.stroke),strokeWidth:1.5}),ae=xt(w);return ae||(k={}),C(I,ui(w,k),Ar(w,k),Nf-Gp,Gp,K),$},"bpmn:UserTask":function(I,w,k={}){k=bt(k,["fill","stroke"]);var $=se(I,w,k),K=15,ae=12,Te=r.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:K,y:ae}});b(I,Te,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:.5});var Ae=r.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:K,y:ae}});b(I,Ae,{fill:gt(w,s,k.fill),stroke:ke(w,l,k.stroke),strokeWidth:.5});var de=r.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:K,y:ae}});return b(I,de,{fill:ke(w,l,k.stroke),stroke:ke(w,l,k.stroke),strokeWidth:.5}),$},label:function(I,w,k={}){return kt(I,w,k)}};this._drawPath=b,this._renderer=B}De(Ps,Ao);Ps.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Ps.prototype.canRender=function(e){return A(e,"bpmn:BaseElement")};Ps.prototype.drawShape=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Ps.prototype.drawConnection=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Ps.prototype.getShapePath=function(e){return A(e,"bpmn:Event")?lO(e):A(e,"bpmn:Activity")?cO(e,Nf):A(e,"bpmn:Gateway")?uO(e):pO(e)};function bt(e,t=[]){return t.reduce((n,r)=>(e[r]&&(n[r]=e[r]),n),{})}var yO=0,vO={width:150,height:50};function xO(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function _O(e){return jn(e)?q({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function wO(e,t){t.textContent=e;var n;try{var r,i=e==="";return t.textContent=i?"dummy":e,n=t.getBBox(),r={width:n.width+n.x*2,height:n.height},i&&(r.width=0),r}catch{return{width:0,height:0}}}function EO(e,t,n){for(var r=e.shift(),i=r,o;;){if(o=wO(i,n),o.width=i?o.width:0,i===" "||i===""||o.width<Math.round(t)||i.length<2)return bO(e,i,r,o);i=CO(i,o.width,t)}}function bO(e,t,n,r){if(t.length<n.length){var i=n.slice(t.length).trim();e.unshift(i)}return{width:r.width,height:r.height,text:t}}var Tw="";function SO(e,t){var n=e.split(/(\s|-|\u00AD)/g),r,i=[],o=0;if(n.length>1)for(;r=n.shift();)if(r.length+o<t)i.push(r),o+=r.length;else{(r==="-"||r===Tw)&&i.pop();break}var a=i[i.length-1];return a&&a===Tw&&(i[i.length-1]="-"),i.join("")}function CO(e,t,n){var r=Math.max(e.length*(n/t),1),i=SO(e,r);return i||(i=e.slice(0,Math.max(Math.round(r-1),1))),i}function RO(){var e=document.getElementById("helper-svg");return e||(e=ze("svg"),be(e,{id:"helper-svg"}),Xn(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function ah(e){this._config=q({},{size:vO,padding:yO,style:{},align:"center-top"},e||{})}ah.prototype.createText=function(e,t){return this.layoutText(e,t).element};ah.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};ah.prototype.layoutText=function(e,t){var n=q({},this._config.size,t.box),r=q({},this._config.style,t.style),i=xO(t.align||this._config.align),o=_O(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=kO(r),l=e.split(/\u00AD?\r?\n/),u=[],f=n.width-o.left-o.right,d=ze("text");be(d,{x:0,y:0}),be(d,r);var g=RO();for(et(g,d);l.length;)u.push(EO(l,f,d));i.vertical==="middle"&&(o.top=o.bottom=0);var y=jr(u,function(R,E,b){return R+(s||E.height)},0)+o.top+o.bottom,v=jr(u,function(R,E,b){return E.width>R?E.width:R},0),x=o.top;i.vertical==="middle"&&(x+=(n.height-y)/2),x-=(s||u[0].height)/4;var C=ze("text");be(C,r),W(u,function(R){var E;switch(x+=s||R.height,i.horizontal){case"left":E=o.left;break;case"right":E=(a?v:f)-o.right-R.width;break;default:E=Math.max(((a?v:f)-R.width)/2+o.left,0)}var b=ze("tspan");be(b,{x:E,y:x}),b.textContent=R.text,et(C,b)}),Sn(d);var P={width:v,height:y};return{dimensions:P,element:C}};function kO(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var PO=12,TO=1.2,AO=30;function vR(e){var t=q({fontFamily:"Arial, sans-serif",fontSize:PO,fontWeight:"normal",lineHeight:TO},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,r=q({},t,{fontSize:n},e&&e.externalStyle||{}),i=new ah({style:t});this.getExternalLabelBounds=function(o,a){var s=i.getDimensions(a,{box:{width:90,height:30},style:r});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=i.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(AO,Math.round(s.height))}},this.createText=function(o,a){return i.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return r}}vR.$inject=["config.textRenderer"];function MO(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var r=this.pathMap[t],i,o;n.abspos?(i=n.abspos.x,o=n.abspos.y):(i=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/r.height*n.yScaleFactor,l=n.containerWidth/r.width*n.xScaleFactor,u=0;u<r.heightElements.length;u++)a["y"+u]=r.heightElements[u]*s;for(var f=0;f<r.widthElements.length;f++)a["x"+f]=r.widthElements[f]*l}var d=LO(r.d,{mx:i,my:o,e:a});return d}}var NO=/\{([^{}]+)\}/g,DO=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function OO(e,t,n){var r=n;return t.replace(DO,function(i,o,a,s,l){o=o||s,r&&(o in r&&(r=r[o]),typeof r=="function"&&l&&(r=r()))}),r=(r==null||r==n?e:r)+"",r}function LO(e,t){return String(e).replace(NO,function(n,r){return OO(n,r,t)})}const IO={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ps],textRenderer:["type",vR],pathMap:["type",MO]};function BO(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,r){return t[r]||"{"+r+"}"})}const sh={translate:["value",BO]};function Df(e,t,n){return q({id:e.id,type:e.$type,businessObject:e,di:t},n)}function jO(e,t,n){var r=e.waypoint;return!r||r.length<2?[Ze(t),Ze(n)]:r.map(function(i){return{x:i.x,y:i.y}})}function xR(e,t,n){return new Error(`element ${qn(t)} referenced by ${qn(e)}#${n} not yet drawn`)}function No(e,t,n,r,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r,this._textRenderer=i}No.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];No.prototype.add=function(e,t,n){var r,i,o;if(A(t,"bpmndi:BPMNPlane")){var a=A(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};r=this._elementFactory.createRoot(Df(e,t,a)),this._canvas.addRootElement(r)}else if(A(t,"bpmndi:BPMNShape")){var s=!xt(e,t),l=FO(e);i=n&&(n.hidden||n.collapsed);var u=t.bounds;r=this._elementFactory.createShape(Df(e,t,{collapsed:s,hidden:i,x:Math.round(u.x),y:Math.round(u.y),width:Math.round(u.width),height:Math.round(u.height),isFrame:l})),A(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,r),A(e,"bpmn:Lane")&&(o=0),A(e,"bpmn:DataStoreReference")&&($O(n,Ze(u))||(n=this._canvas.findRoot(n))),this._canvas.addShape(r,n,o)}else if(A(t,"bpmndi:BPMNEdge")){var f=this._getSource(e),d=this._getTarget(e);i=n&&(n.hidden||n.collapsed),r=this._elementFactory.createConnection(Df(e,t,{hidden:i,source:f,target:d,waypoints:jO(t,f,d)})),A(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(r,n,o)}else throw new Error(`unknown di ${qn(t)} for element ${qn(e)}`);return _s(e)&&qr(r)&&this.addLabel(e,t,r),this._eventBus.fire("bpmnElement.added",{element:r}),r};No.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${qn(e)}#attachedToRef`);var r=this._elementRegistry.get(n.id),i=r&&r.attachers;if(!r)throw xR(e,n,"attachedToRef");t.host=r,i||(r.attachers=i=[]),i.indexOf(t)===-1&&i.push(t)};No.prototype.addLabel=function(e,t,n){var r,i,o;return r=nO(t,n),i=qr(n),i&&(r=this._textRenderer.getExternalLabelBounds(r,i)),o=this._elementFactory.createLabel(Df(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!qr(n),x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)})),this._canvas.addShape(o,n.parent)};No.prototype._getConnectedElement=function(e,t){var n,r,i=e.$type;if(r=e[t+"Ref"],t==="source"&&i==="bpmn:DataInputAssociation"&&(r=r&&r[0]),(t==="source"&&i==="bpmn:DataOutputAssociation"||t==="target"&&i==="bpmn:DataInputAssociation")&&(r=e.$parent),n=r&&this._getElement(r),n)return n;throw r?xR(e,r,t+"Ref"):new Error(`${qn(e)}#${t} Ref not specified`)};No.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};No.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};No.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function $O(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function FO(e){return A(e,"bpmn:Group")}const zO={__depends__:[sh],bpmnImporter:["type",No]},HO={__depends__:[IO,zO]};function Ou(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Ou.prototype.next=function(){return this._prefix+ ++this._counter};var VO=new Ou("ov"),WO=500;function $n(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=VO,this._overlayDefaults=q({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=UO(n.getContainer()),this._init()}$n.$inject=["config.overlays","eventBus","canvas","elementRegistry"];$n.prototype.get=function(e){if(Br(e)&&(e={id:e}),Br(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?yt(t.overlays,Li({type:e.type})):t.overlays.slice():[]}else return e.type?yt(this._overlays,Li({type:e.type})):e.id?this._overlays[e.id]:null};$n.prototype.add=function(e,t,n){if(jn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var r=this._ids.next();return n=q({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r};$n.prototype.remove=function(e){var t=this.get(e)||[];at(t)||(t=[t]);var n=this;W(t,function(r){var i=n._getOverlayContainer(r.element,!0);if(r&&(no(r.html),no(r.htmlContainer),delete r.htmlContainer,delete r.element,delete n._overlays[r.id]),i){var o=i.overlays.indexOf(r);o!==-1&&i.overlays.splice(o,1)}})};$n.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};$n.prototype.show=function(){lh(this._overlayRoot)};$n.prototype.hide=function(){lh(this._overlayRoot,!1)};$n.prototype.clear=function(){this._overlays={},this._overlayContainers=[],qd(this._overlayRoot)};$n.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,r=t.x,i=t.y;if(t.waypoints){var o=Mn(t);r=o.x,i=o.y}_R(n,r,i),lr(e.html,"data-container-id",t.id)};$n.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,r=e.element,i=t.left,o=t.top;if(t.right!==void 0){var a;r.waypoints?a=Mn(r).width:a=r.width,i=t.right*-1+a}if(t.bottom!==void 0){var s;r.waypoints?s=Mn(r).height:s=r.height,o=t.bottom*-1+s}_R(n,i||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};$n.prototype._createOverlayContainer=function(e){var t=zt('<div class="djs-overlays" />');Xn(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};$n.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";wR(this._overlayRoot,n)};$n.prototype._getOverlayContainer=function(e,t){var n=Mt(this._overlayContainers,function(r){return r.element===e});return!n&&!t?this._createOverlayContainer(e):n};$n.prototype._addOverlay=function(e){var t=e.id,n=e.element,r=e.html,i,o;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),Br(r)&&(r=zt(r)),o=this._getOverlayContainer(n),i=zt('<div class="djs-overlay" data-overlay-id="'+t+'">'),Xn(i,{position:"absolute"}),i.appendChild(r),e.type&&nn(i).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();lh(i,a===s),e.htmlContainer=i,o.overlays.push(e),o.html.appendChild(i),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};$n.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=this._canvas.findRoot(e.element),i=n&&n.minZoom,o=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),l=!0;(r!==s||n&&(In(i)&&i>t.scale||In(o)&&o<t.scale))&&(l=!1),lh(a,l),this._updateOverlayScale(e,t)};$n.prototype._updateOverlayScale=function(e,t){var n=e.scale,r,i,o=e.htmlContainer,a,s="";n!==!0&&(n===!1?(r=1,i=1):(r=n.min,i=n.max),In(r)&&t.scale<r&&(a=(1/t.scale||1)*r),In(i)&&t.scale>i&&(a=(1/t.scale||1)*i)),In(a)&&(s="scale("+a+","+a+")"),wR(o,s)};$n.prototype._updateOverlaysVisibilty=function(e){var t=this;W(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};$n.prototype._init=function(){var e=this._eventBus,t=this;function n(r){t._updateRoot(r),t._updateOverlaysVisibilty(r),t.show()}e.on("canvas.viewbox.changing",function(r){t.hide()}),e.on("canvas.viewbox.changed",function(r){n(r.viewbox)}),e.on(["shape.remove","connection.remove"],function(r){var i=r.element,o=t.get({element:i});W(o,function(l){t.remove(l.id)});var a=t._getOverlayContainer(i);if(a){no(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",WO,function(r){var i=r.element,o=t._getOverlayContainer(i,!0);o&&(W(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(r){var i=t._getOverlayContainer(r.element,!0);i&&nn(i.html)[r.add?"add":"remove"](r.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function UO(e){var t=zt('<div class="djs-overlay-container" />');return Xn(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function _R(e,t,n){Xn(e,{left:t+"px",top:n+"px"})}function lh(e,t){e.style.display=t===!1?"none":""}function wR(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const ch={__init__:["overlays"],overlays:["type",$n]};function ER(e,t,n,r){e.on("element.changed",function(i){var o=i.element;(o.parent||o===t.getRootElement())&&(i.gfx=n.getGraphics(o)),i.gfx&&e.fire(OC(o)+".changed",i)}),e.on("elements.changed",function(i){var o=i.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),r.updateContainments(o)}),e.on("shape.changed",function(i){r.update("shape",i.element,i.gfx)}),e.on("connection.changed",function(i){r.update("connection",i.element,i.gfx)})}ER.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const a0={__init__:["changeSupport"],changeSupport:["type",ER]};var GO=1e3;function ue(e){this._eventBus=e}ue.$inject=["eventBus"];function KO(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}ue.prototype.on=function(e,t,n,r,i,o){if((Cn(t)||Qe(t))&&(o=i,i=r,r=n,n=t,t=null),Cn(n)&&(o=i,i=r,r=n,n=GO),jn(i)&&(o=i,i=!1),!Cn(r))throw new Error("handlerFn must be a function");at(e)||(e=[e]);var a=this._eventBus;W(e,function(s){var l=["commandStack",s,t].filter(function(u){return u}).join(".");a.on(l,n,i?KO(r,o):r,o)})};ue.prototype.canExecute=Do("canExecute");ue.prototype.preExecute=Do("preExecute");ue.prototype.preExecuted=Do("preExecuted");ue.prototype.execute=Do("execute");ue.prototype.executed=Do("executed");ue.prototype.postExecute=Do("postExecute");ue.prototype.postExecuted=Do("postExecuted");ue.prototype.revert=Do("revert");ue.prototype.reverted=Do("reverted");function Do(e){return function(n,r,i,o,a){(Cn(n)||Qe(n))&&(a=o,o=i,i=r,r=n,n=null),this.on(n,e,r,i,o,a)}}function s0(e,t){t.invoke(ue,this),this.executed(function(n){var r=n.context;r.rootElement?e.setRootElement(r.rootElement):r.rootElement=e.getRootElement()}),this.revert(function(n){var r=n.context;r.rootElement&&e.setRootElement(r.rootElement)})}De(s0,ue);s0.$inject=["canvas","injector"];const YO={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",s0]};function hu(e){return CSS.escape(e)}var qO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function wy(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return qO[t]})}var bR="_plane";function Aw(e){var t=e.id;return XO(t)}function go(e){var t=e.id;return A(e,"bpmn:SubProcess")?SR(t):t}function Za(e){return SR(e)}function Of(e){var t=Ct(e);return A(t,"bpmndi:BPMNPlane")}function SR(e){return e+bR}function XO(e){return e.replace(new RegExp(bR+"$"),"")}var QO="bjs-breadcrumbs-shown";function CR(e,t,n){var r=zt('<ul class="bjs-breadcrumbs"></ul>'),i=n.getContainer(),o=nn(i);i.appendChild(r);var a=[];e.on("element.changed",function(l){var u=l.element,f=pe(u),d=Mt(a,function(g){return g===f});d&&s()});function s(l){l&&(a=ZO(l));var u=a.flatMap(function(d){var g=n.findRoot(go(d))||n.findRoot(d.id);if(!g&&A(d,"bpmn:Process")){var y=t.find(function(C){var P=pe(C);return P&&P.get("processRef")===d});g=y&&n.findRoot(y.id)}if(!g)return[];var v=wy(d.name||d.id),x=zt('<li><span class="bjs-crumb"><a title="'+v+'">'+v+"</a></span></li>");return x.addEventListener("click",function(){n.setRootElement(g)}),x});r.innerHTML="";var f=u.length>1;o.toggle(QO,f),u.forEach(function(d){r.appendChild(d)})}e.on("root.set",function(l){s(l.element)})}CR.$inject=["eventBus","elementRegistry","canvas"];function ZO(e){for(var t=pe(e),n=[],r=t;r;r=r.$parent)(A(r,"bpmn:SubProcess")||A(r,"bpmn:Process"))&&n.push(r);return n.reverse()}function RR(e,t){var n=null,r=new JO;e.on("root.set",function(i){var o=i.element,a=t.viewbox(),s=r.get(o);if(r.set(n,{x:a.x,y:a.y,zoom:a.scale}),n=o,!(!A(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var l=(a.x-s.x)*a.scale,u=(a.y-s.y)*a.scale;(l!==0||u!==0)&&t.scroll({dx:l,dy:u}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){r.clear(),n=null})}RR.$inject=["eventBus","canvas"];function JO(){this._entries=[],this.set=function(e,t){var n=!1;for(var r in this._entries)if(this._entries[r][0]===e){this._entries[r][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Mw={x:180,y:160};function Ts(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(r,i){n._handleImport(i.definitions)})}Ts.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(r){!r.plane||!r.plane.bpmnElement||(t._processToDiagramMap[r.plane.bpmnElement.id]=r)});var n=e.diagrams.filter(r=>r.plane).flatMap(r=>t._createNewDiagrams(r.plane));n.forEach(function(r){t._movePlaneElementsToOrigin(r.plane)})}};Ts.prototype._createNewDiagrams=function(e){var t=this,n=[],r=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;A(a,"bpmn:SubProcess")&&!o.isExpanded&&n.push(a),t6(a,e)&&r.push({diElement:o,parent:s})}});var i=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,i.push(a)}}),r.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&n.indexOf(s)===-1;)s=s.$parent;if(s){var l=t._processToDiagramMap[s.id];t._moveToDiPlane(a,l.plane)}}),i};Ts.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=e6(e),r={x:n.x-Mw.x,y:n.y-Mw.y};t.forEach(function(i){i.waypoint?i.waypoint.forEach(function(o){o.x=o.x-r.x,o.y=o.y-r.y}):i.bounds&&(i.bounds.x=i.bounds.x-r.x,i.bounds.y=i.bounds.y-r.y)})};Ts.prototype._moveToDiPlane=function(e,t){var n=kR(e),r=n.plane.get("planeElement");r.splice(r.indexOf(e),1),t.get("planeElement").push(e)};Ts.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Ts.$inject=["eventBus","moddle"];function kR(e){return A(e,"bpmndi:BPMNDiagram")?e:kR(e.$parent)}function e6(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var r=Ue(n.bounds);t.top=Math.min(r.top,t.top),t.left=Math.min(r.left,t.left)}}),eh(t)}function t6(e,t){var n=e.$parent;return!(!A(n,"bpmn:SubProcess")||n===t.bpmnElement||mt(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Kp=250,n6='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',r6="bjs-drilldown-empty";function Pa(e,t,n,r,i){ue.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=r,this._translate=i;var o=this;this.executed("shape.toggleCollapse",Kp,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",Kp,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],Kp,function(a){var s=a.oldParent,l=a.newParent||a.parent,u=a.shape;o._canDrillDown(u)&&o._addOverlay(u),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(u)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Kp,function(a){var s=a.oldParent,l=a.newParent||a.parent,u=a.shape;o._canDrillDown(u)&&o._addOverlay(u),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(u)},!0),t.on("import.render.complete",function(){n.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}De(Pa,ue);Pa.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};Pa.prototype._canDrillDown=function(e){var t=this._canvas;return A(e,"bpmn:SubProcess")&&t.findRoot(go(e))};Pa.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=pe(e),r=t.get({element:n.id,type:"drilldown"})[0];if(r){var i=n&&n.get("flowElements")&&n.get("flowElements").length;nn(r.html).toggle(r6,!i)}};Pa.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,r=pe(e),i=n.get({element:e,type:"drilldown"});i.length&&this._removeOverlay(e);var o=zt('<button type="button" class="bjs-drilldown">'+n6+"</button>"),a=r.get("name")||r.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(go(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};Pa.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};Pa.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const i6={__depends__:[ch,a0,YO],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",CR],drilldownCentering:["type",RR],drilldownOverlayBehavior:["type",Pa],subprocessCompatibility:["type",Ts]};var o6=500,a6=1e3;function As(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),r=this;function i(o){var a=ze("rect");return be(a,q({x:0,y:0,rx:4,width:100,height:100},n)),a}e.on(["shape.added","shape.changed"],o6,function(o){var a=o.element,s=o.gfx,l=It(".djs-outline",s);l||(l=r.getOutline(a)||i(),et(s,l)),r.updateShapeOutline(l,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,l=It(".djs-outline",s);l||(l=i(),et(s,l)),r.updateConnectionOutline(l,a)})}As.prototype.updateShapeOutline=function(e,t){var n=!1,r=this._getProviders();r.length&&W(r,function(i){n=n||i.updateOutline(t,e)}),n||be(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};As.prototype.updateConnectionOutline=function(e,t){var n=Mn(t);be(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};As.prototype.registerProvider=function(e,t){t||(t=e,e=a6),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};As.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};As.prototype.getOutline=function(e){var t,n=this._getProviders();return W(n,function(r){Cn(r.getOutline)&&(t=t||r.getOutline(e))}),t};As.$inject=["eventBus","styles","elementRegistry"];const l0={__init__:["outline"],outline:["type",As]},s6="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",l6="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",c6={width:36,height:50},u6={width:50,height:50};function Nw(e,t,n){return ze("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const ea=5;function uh(e,t){this._styles=t,e.registerProvider(this)}uh.$inject=["outline","styles"];uh.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Rt(e))return A(e,"bpmn:Gateway")?(n=ze("rect"),q(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),be(n,q({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):mt(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=ze("rect"),be(n,q({x:-ea,y:-ea,rx:14,width:e.width+ea*2,height:e.height+ea*2},t))):A(e,"bpmn:EndEvent")?(n=ze("circle"),be(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+ea+1},t))):A(e,"bpmn:Event")?(n=ze("circle"),be(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+ea},t))):A(e,"bpmn:DataObjectReference")&&Dw(e,"bpmn:DataObjectReference")?n=Nw(s6,{x:-6,y:-6},t):A(e,"bpmn:DataStoreReference")&&Dw(e,"bpmn:DataStoreReference")&&(n=Nw(l6,{x:-6,y:-6},t)),n};uh.prototype.updateOutline=function(e,t){if(!Rt(e))return mt(e,["bpmn:SubProcess","bpmn:Group"])?(be(t,{width:e.width+ea*2,height:e.height+ea*2}),!0):!!mt(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function Dw(e,t){var n;return t==="bpmn:DataObjectReference"?n=c6:t==="bpmn:DataStoreReference"&&(n=u6),e.width===n.width&&e.height===n.height}const p6={__depends__:[l0],__init__:["outlineProvider"],outlineProvider:["type",uh]};function Ow(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Hl(e){return e.originalEvent||e.srcEvent}function Zm(e){Ow(e),Ow(Hl(e))}function ws(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function PR(){return/mac/i.test(navigator.platform)}function TR(e,t){return(Hl(e)||e).button===t}function Ta(e){return TR(e,0)}function f6(e){return TR(e,1)}function mu(e){var t=Hl(e)||e;return Ta(e)?PR()?t.metaKey:t.ctrlKey:!1}function _d(e){var t=Hl(e)||e;return Ta(e)&&t.shiftKey}function d6(e){return!0}function Yp(e){return Ta(e)||f6(e)}var Lw=500;function AR(e,t,n){var r=this;function i(L,X,Y){if(!s(L,X)){var G,le,oe;Y?le=t.getGraphics(Y):(G=X.delegateTarget||X.target,G&&(le=G,Y=t.get(le))),!(!le||!Y)&&(oe=e.fire(L,{element:Y,gfx:le,originalEvent:X}),oe===!1&&(X.stopPropagation(),X.preventDefault()))}}var o={};function a(L){return o[L]}function s(L,X){var Y=u[L]||Ta;return!Y(X)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":d6,"element.mousedown":Yp,"element.mouseup":Yp,"element.click":Yp,"element.dblclick":Yp};function f(L,X,Y){var G=l[L];if(!G)throw new Error("unmapped DOM event name <"+L+">");return i(G,X,Y)}var d="svg, .djs-element";function g(L,X,Y,G){var le=o[Y]=function(oe){i(Y,oe)};G&&(u[Y]=G),le.$delegate=Dr.bind(L,d,X,le)}function y(L,X,Y){var G=a(Y);G&&Dr.unbind(L,X,G.$delegate)}function v(L){W(l,function(X,Y){g(L,Y,X)})}function x(L){W(l,function(X,Y){y(L,Y,X)})}e.on("canvas.destroy",function(L){x(L.svg)}),e.on("canvas.init",function(L){v(L.svg)}),e.on(["shape.added","connection.added"],function(L){var X=L.element,Y=L.gfx;e.fire("interactionEvents.createHit",{element:X,gfx:Y})}),e.on(["shape.changed","connection.changed"],Lw,function(L){var X=L.element,Y=L.gfx;e.fire("interactionEvents.updateHit",{element:X,gfx:Y})}),e.on("interactionEvents.createHit",Lw,function(L){var X=L.element,Y=L.gfx;r.createDefaultHit(X,Y)}),e.on("interactionEvents.updateHit",function(L){var X=L.element,Y=L.gfx;r.updateDefaultHit(X,Y)});var C=D("djs-hit djs-hit-stroke"),P=D("djs-hit djs-hit-click-stroke"),R=D("djs-hit djs-hit-all"),E=D("djs-hit djs-hit-no-move"),b={all:R,"click-stroke":P,stroke:C,"no-move":E};function D(L,X){return X=q({stroke:"white",strokeWidth:15},X||{}),n.cls(L,["no-fill","no-border"],X)}function B(L,X){var Y=b[X];if(!Y)throw new Error("invalid hit type <"+X+">");return be(L,Y),L}function z(L,X){et(L,X)}this.removeHits=function(L){var X=py(".djs-hit",L);W(X,Sn)},this.createDefaultHit=function(L,X){var Y=L.waypoints,G=L.isFrame,le;return Y?this.createWaypointsHit(X,Y):(le=G?"stroke":"all",this.createBoxHit(X,le,{width:L.width,height:L.height}))},this.createWaypointsHit=function(L,X){var Y=Zd(X);return B(Y,"stroke"),z(L,Y),Y},this.createBoxHit=function(L,X,Y){Y=q({x:0,y:0},Y);var G=ze("rect");return B(G,X),be(G,Y),z(L,G),G},this.updateDefaultHit=function(L,X){var Y=It(".djs-hit",X);if(Y)return L.waypoints?NC(Y,L.waypoints):be(Y,{width:L.width,height:L.height}),Y},this.fire=i,this.triggerMouseEvent=f,this.mouseHandler=a,this.registerEvent=g,this.unregisterEvent=y}AR.$inject=["eventBus","elementRegistry","styles"];const ph={__init__:["interactionEvents"],interactionEvents:["type",AR]};function Vl(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(r){var i=r.element;n.deselect(i)}),e.on(["diagram.clear","root.set"],function(r){n.select(null)})}Vl.$inject=["eventBus","canvas"];Vl.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var r=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t})}};Vl.prototype.get=function(){return this._selectedElements};Vl.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Vl.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice();at(e)||(e=e?[e]:[]);var i=this._canvas,o=i.getRootElement();e=e.filter(function(a){var s=i.findRoot(a);return o===s}),t?W(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var Iw="hover",Bw="selected",qp=6;function c0(e,t,n){this._canvas=e;var r=this;this._multiSelectionBox=null;function i(a,s){e.addMarker(a,s)}function o(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){i(a.element,Iw)}),t.on("element.out",function(a){o(a.element,Iw)}),t.on("selection.changed",function(a){function s(d){o(d,Bw)}function l(d){i(d,Bw)}var u=a.oldSelection,f=a.newSelection;W(u,function(d){f.indexOf(d)===-1&&s(d)}),W(f,function(d){u.indexOf(d)===-1&&l(d)}),r._updateSelectionOutline(f)}),t.on("element.changed",function(a){n.isSelected(a.element)&&r._updateSelectionOutline(n.get())})}c0.$inject=["canvas","eventBus","selection"];c0.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Qd(t);var n=e.length>1,r=this._canvas.getContainer();if(St(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=h6(Mn(e)),o=ze("rect");be(o,q({rx:3},i)),St(o).add("djs-selection-outline"),et(t,o)}};function h6(e){return{x:e.x-qp,y:e.y-qp,width:e.width+qp*2,height:e.height+qp*2}}function MR(e,t,n,r){e.on("create.end",500,function(i){var o=i.context,a=o.canExecute,s=o.elements,l=o.hints||{},u=l.autoSelect;if(a){if(u===!1)return;at(u)?t.select(u):t.select(s.filter(m6))}}),e.on("connect.end",500,function(i){var o=i.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(i){var o=i.previousSelection||[],a=r.get(i.context.shape.id),s=Mt(o,function(l){return a.id===l.id});s||t.select(a)}),e.on("element.click",function(i){if(Ta(i)){var o=i.element;o===n.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,l=_d(i);if(a&&s)return l?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,l)}})}MR.$inject=["eventBus","selection","canvas","elementRegistry"];function m6(e){return!e.hidden}const ro={__init__:["selectionVisuals","selectionBehavior"],__depends__:[ph,l0],selection:["type",Vl],selectionVisuals:["type",c0],selectionBehavior:["type",MR]};function Aa(e){Qt.call(this,e)}De(Aa,Qt);Aa.prototype._modules=[HO,i6,p6,ch,ro,sh];Aa.prototype._moddleExtensions={};var g6=["c","C"],y6=["v","V"],v6=["y","Y"],NR=["z","Z"];function x6(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Xr(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Tn(e,t){return e=at(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function u0(e){return e.shiftKey}function _6(e){return Xr(e)&&Tn(g6,e)}function w6(e){return Xr(e)&&Tn(y6,e)}function E6(e){return Xr(e)&&!u0(e)&&Tn(NR,e)}function b6(e){return Xr(e)&&(Tn(v6,e)||Tn(NR,e)&&u0(e))}var fh="keyboard.keydown",S6="keyboard.keyup",jw="input-handle-modified-keys",C6=1e3;function Un(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Un.$inject=["config.keyboard","eventBus"];Un.prototype._keydownHandler=function(e){this._keyHandler(e,fh)};Un.prototype._keyupHandler=function(e){this._keyHandler(e,S6)};Un.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||fh,r),n&&e.preventDefault()}};Un.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(R6(e.target)||k6(e.target)&&Tn([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)};Un.prototype._isModifiedKeyIgnored=function(e){if(!Xr(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Un.prototype._getAllowedModifiers=function(e){var t=Sa(e,"["+jw+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(jw).split(",")};Un.prototype.bind=function(e){this.unbind(),this._node=e,ot.bind(e,"keydown",this._keydownHandler),ot.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Un.prototype.getBinding=function(){return this._node};Un.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),ot.unbind(e,"keydown",this._keydownHandler),ot.unbind(e,"keyup",this._keyupHandler)),this._node=null};Un.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Un.prototype.addListener=function(e,t,n){Cn(e)&&(n=t,t=e,e=C6),this._eventBus.on(n||fh,e,t)};Un.prototype.removeListener=function(e,t){this._eventBus.off(t||fh,e)};Un.prototype.hasModifier=x6;Un.prototype.isCmd=Xr;Un.prototype.isShift=u0;Un.prototype.isKey=Tn;function R6(e){return e&&(Xd(e,"input, textarea")||e.contentEditable==="true")}function k6(e){return e&&Xd(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var P6=500;function Wl(e,t){var n=this;e.on("editorActions.init",P6,function(r){var i=r.editorActions;n.registerBindings(t,i)})}Wl.$inject=["eventBus","keyboard"];Wl.prototype.registerBindings=function(e,t){function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("undo",function(r){var i=r.keyEvent;if(E6(i))return t.trigger("undo"),!0}),n("redo",function(r){var i=r.keyEvent;if(b6(i))return t.trigger("redo"),!0}),n("copy",function(r){var i=r.keyEvent;if(_6(i))return t.trigger("copy"),!0}),n("paste",function(r){var i=r.keyEvent;if(w6(i))return t.trigger("paste"),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(Tn(["+","Add","="],i)&&Xr(i))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(Tn(["-","Subtract"],i)&&Xr(i))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var i=r.keyEvent;if(Tn("0",i)&&Xr(i))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var i=r.keyEvent;if(Tn(["Backspace","Delete","Del"],i))return t.trigger("removeSelection"),!0})};const p0={__init__:["keyboard","keyboardBindings"],keyboard:["type",Un],keyboardBindings:["type",Wl]};var T6={moveSpeed:50,moveSpeedAccelerated:200};function DR(e,t,n){var r=this;this._config=q({},T6,e||{}),t.addListener(i);function i(o){var a=o.keyEvent,s=r._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var l=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,u;switch(a.key){case"ArrowLeft":case"Left":u="left";break;case"ArrowUp":case"Up":u="up";break;case"ArrowRight":case"Right":u="right";break;case"ArrowDown":case"Down":u="down";break}return r.moveCanvas({speed:l,direction:u}),!0}}this.moveCanvas=function(o){var a=0,s=0,l=o.speed,u=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":a=u;break;case"up":s=u;break;case"right":a=-u;break;case"down":s=-u;break}n.scroll({dx:a,dy:s})}}DR.$inject=["config.keyboardMove","keyboard","canvas"];const OR={__depends__:[p0],__init__:["keyboardMove"],keyboardMove:["type",DR]};var A6=/^djs-cursor-.*$/;function dh(e){var t=nn(document.body);t.removeMatching(A6),e&&t.add("djs-cursor-"+e)}function LR(){dh(null)}var M6=5e3;function IR(e,t){t=t||"element.click";function n(){return!1}return e.once(t,M6,n),function(){e.off(t,n)}}function Uc(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Ii(e,t){return{x:e.x-t.x,y:e.y-t.y}}var N6=15;function BR(e,t){var n;e.on("element.mousedown",500,function(a){return o(a.originalEvent)});function r(a){var s=n.start,l=n.button,u=ws(a),f=Ii(u,s);if(!n.dragging&&D6(f)>N6&&(n.dragging=!0,l===0&&IR(e),dh("grab")),n.dragging){var d=n.last||n.start;f=Ii(u,d),t.scroll({dx:f.x,dy:f.y}),n.last=u}a.preventDefault()}function i(a){ot.unbind(document,"mousemove",r),ot.unbind(document,"mouseup",i),n=null,LR()}function o(a){if(!Sa(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:ws(a)},ot.bind(document,"mousemove",r),ot.bind(document,"mouseup",i),!0}}this.isActive=function(){return!!n}}BR.$inject=["eventBus","canvas"];function D6(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const jR={__init__:["moveCanvas"],moveCanvas:["type",BR]};function Ey(e){return Math.log(e)/Math.log(10)}function $R(e,t){var n=Ey(e.min),r=Ey(e.max),i=Math.abs(n)+Math.abs(r);return i/t}function O6(e,t){return Math.max(e.min,Math.min(e.max,t))}var L6=Math.sign||function(e){return e>=0?1:-1},f0={min:.2,max:4},FR=10,I6=.1,B6=.75;function io(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=_r(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||B6;var r=this;t.on("canvas.init",function(i){r._init(e.enabled!==!1)})}io.$inject=["config.zoomScroll","eventBus","canvas"];io.prototype.scroll=function(t){this._canvas.scroll(t)};io.prototype.reset=function(){this._canvas.zoom("fit-viewport")};io.prototype.zoom=function(t,n){var r=$R(f0,FR*2);this._totalDelta+=t,Math.abs(this._totalDelta)>I6&&(this._zoom(t,n,r),this._totalDelta=0)};io.prototype._handleWheel=function(t){if(!Sa(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var r=t.ctrlKey||PR()&&t.metaKey,i=t.shiftKey,o=-1*this._scale,a;if(r?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,r){var s=n.getBoundingClientRect(),l={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*L6(t.deltaY)*o,this.zoom(a,l)}else i?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}};io.prototype.stepZoom=function(t,n){var r=$R(f0,FR);this._zoom(t,n,r)};io.prototype._zoom=function(e,t,n){var r=this._canvas,i=e>0?1:-1,o=Ey(r.zoom()),a=Math.round(o/n)*n;a+=n*i;var s=Math.pow(10,a);r.zoom(O6(f0,s),t)};io.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof t>"u"&&(t=!i),i!==t&&ot[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};io.prototype._init=function(e){this.toggle(e)};const zR={__init__:["zoomScroll"],zoomScroll:["type",io]};function gu(e){Aa.call(this,e)}De(gu,Aa);gu.prototype._navigationModules=[OR,jR,zR];gu.prototype._modules=[].concat(Aa.prototype._modules,gu.prototype._navigationModules);function Jm(e){return e&&e[e.length-1]}function $w(e){return e.y}function Fw(e){return e.x}var j6={left:Fw,center:Fw,right:function(e){return e.x+e.width},top:$w,middle:$w,bottom:function(e){return e.y+e.height}};function Ul(e,t){this._modeling=e,this._rules=t}Ul.$inject=["modeling","rules"];Ul.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",r="width";return t.indexOf(e)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};Ul.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Ul.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),r=n.axis,i=n.dimension,o={},a={},s=!1,l,u,f;function d(g,y){return Math.round((g[r]+y[r]+y[i])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][r];else if(this._isType(e,["right","bottom"]))f=Jm(t),o[e]=f[r]+f[i];else if(this._isType(e,["center","middle"])){if(W(t,function(g){var y=g[r]+Math.round(g[i]/2);a[y]?a[y].elements.push(g):a[y]={elements:[g],center:y}}),l=to(a,function(g){return g.elements.length>1&&(s=!0),g.elements.length}),s)return o[e]=Jm(l).center,o;u=t[0],t=to(t,function(g){return g[r]+g[i]}),f=Jm(t),o[e]=d(u,f)}return o};Ul.prototype.trigger=function(e,t){var n=this._modeling,r,i=yt(e,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:i}),at(r)&&(i=r),!(i.length<2||!r)){var o=j6[t],a=to(i,o),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};const $6={__init__:["alignElements"],alignElements:["type",Ul]},F6=new Ou;function Gl(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}Gl.$inject=["eventBus"];Gl.prototype.schedule=function(e,t=F6.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};Gl.prototype._schedule=function(e,t){const{promise:n,resolve:r,reject:i}=z6();return{executionId:requestAnimationFrame(()=>{try{r(e())}catch(a){i(a)}}),promise:n}};Gl.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};Gl.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function z6(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}const H6={scheduler:["type",Gl]};var V6="djs-element-hidden",Xp=".entry",W6=1e3,zw=8,U6=300;function yn(e,t,n,r){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=r,this._current=null,this._init()}yn.$inject=["canvas","elementRegistry","eventBus","scheduler"];yn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,r=n.length?n.length===1?n[0]:n:null;r?e.open(r,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,r=e._current;if(r){var i=r.target,o=at(i)?i:[i],a=o.filter(function(l){return n.includes(l)});if(a.length){e.close();var s=o.filter(function(l){return e._elementRegistry.get(l.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,r=e._current,i=at(r.target)?r.target:[r.target];i.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};yn.prototype._createContainer=function(){var e=zt('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};yn.prototype.registerProvider=function(e,t){t||(t=e,e=W6),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};yn.prototype.getEntries=function(e){var t=this._getProviders(),n=at(e)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return W(t,function(i){if(Cn(i[n])){var o=i[n](e);Cn(o)?r=o(r):W(o,function(a,s){r[s]=a})}}),r};yn.prototype.trigger=function(e,t,n){var r=this,i,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(i=lr(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",o,n)},U6);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,e,o,n)};yn.prototype.triggerEntry=function(e,t,n,r){if(this.isShown()){var i=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(Cn(s)){if(t==="click")return s(n,i,r)}else if(s[t])return s[t](n,i,r);n.preventDefault()}}}};yn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};yn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};yn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),r;W(t,function(i,o){var a=i.group||"default",s=zt(i.html||'<div class="entry" draggable="true"></div>'),l;lr(s,"data-action",o),l=It("[data-group="+hu(a)+"]",n),l||(l=zt('<div class="group"></div>'),lr(l,"data-group",a),n.appendChild(l)),l.appendChild(s),i.className&&G6(s,i.className),i.title&&lr(s,"title",i.title),i.imageUrl&&(r=zt("<img>"),lr(r,"src",i.imageUrl),r.style.width="100%",r.style.height="100%",s.appendChild(r))}),nn(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};yn.prototype._createHtml=function(e){var t=this,n=zt('<div class="djs-context-pad"></div>');return Dr.bind(n,Xp,"click",function(r){t.trigger("click",r)}),Dr.bind(n,Xp,"dragstart",function(r){t.trigger("dragstart",r)}),Dr.bind(n,Xp,"mouseover",function(r){t.trigger("mouseover",r)}),Dr.bind(n,Xp,"mouseout",function(r){t.trigger("mouseout",r)}),ot.bind(n,"mousedown",function(r){r.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};yn.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&Y6(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};yn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};yn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return at(e)!==at(n)?!1:at(e)?e.length===n.length&&Ss(e,function(r){return n.includes(r)}):n===e};yn.prototype.isShown=function(){return this.isOpen()&&nn(this._current.html).has("open")};yn.prototype.show=function(){this.isOpen()&&(nn(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};yn.prototype.hide=function(){this.isOpen()&&(nn(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};yn.prototype._getPosition=function(e){if(!at(e)&&jt(e)){var t=this._canvas.viewbox(),n=K6(e),r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale;return{left:r+zw*this._canvas.zoom(),top:i}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+zw*this._canvas.zoom(),top:s.top-a.top}};yn.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(r){r in n&&(t.style[r]=n[r]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};yn.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,r=at(n)?n:[n],i=r.some(function(o){return t._canvas.hasMarker(o,V6)});i?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};yn.prototype._getTargetBounds=function(e){var t=this,n=at(e)?e:[e],r=n.map(function(i){return t._canvas.getGraphics(i)});return r.reduce(function(i,o){const a=o.getBoundingClientRect();return i.top=Math.min(i.top,a.top),i.right=Math.max(i.right,a.right),i.bottom=Math.max(i.bottom,a.bottom),i.left=Math.min(i.left,a.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function G6(e,t){var n=nn(e);t=at(t)?t:t.split(/\s+/g),t.forEach(function(r){n.add(r)})}function K6(e){return e.waypoints[e.waypoints.length-1]}function Y6(e,t){return e=at(e)?e:[e],t=at(t)?t:[t],e.length===t.length&&Ss(e,function(n){return t.includes(n)})}const HR={__depends__:[ph,H6,ch],contextPad:["type",yn]};var hh,qt,VR,is,Hw,WR,UR,GR,d0,by,Sy,yu={},KR=[],q6=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,mh=Array.isArray;function _o(e,t){for(var n in t)e[n]=t[n];return e}function h0(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function YR(e,t,n){var r,i,o,a={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?hh.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return Lf(e,a,r,i,null)}function Lf(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++VR,__i:-1,__u:0};return i==null&&qt.vnode!=null&&qt.vnode(o),o}function gh(e){return e.children}function If(e,t){this.props=e,this.context=t}function kl(e,t){if(t==null)return e.__?kl(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?kl(e):null}function qR(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return qR(e)}}function Vw(e){(!e.__d&&(e.__d=!0)&&is.push(e)&&!wd.__r++||Hw!=qt.debounceRendering)&&((Hw=qt.debounceRendering)||WR)(wd)}function wd(){for(var e,t,n,r,i,o,a,s=1;is.length;)is.length>s&&is.sort(UR),e=is.shift(),s=is.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,o=[],a=[],t.__P&&((n=_o({},r)).__v=r.__v+1,qt.vnode&&qt.vnode(n),m0(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,o,i??kl(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,ZR(o,n,a),r.__e=r.__=null,n.__e!=i&&qR(n)));wd.__r=0}function XR(e,t,n,r,i,o,a,s,l,u,f){var d,g,y,v,x,C,P,R=r&&r.__k||KR,E=t.length;for(l=X6(n,t,R,l,E),d=0;d<E;d++)(y=n.__k[d])!=null&&(g=y.__i==-1?yu:R[y.__i]||yu,y.__i=d,C=m0(e,y,g,i,o,a,s,l,u,f),v=y.__e,y.ref&&g.ref!=y.ref&&(g.ref&&g0(g.ref,null,y),f.push(y.ref,y.__c||v,y)),x==null&&v!=null&&(x=v),(P=!!(4&y.__u))||g.__k===y.__k?l=QR(y,l,e,P):typeof y.type=="function"&&C!==void 0?l=C:v&&(l=v.nextSibling),y.__u&=-7);return n.__e=x,l}function X6(e,t,n,r,i){var o,a,s,l,u,f=n.length,d=f,g=0;for(e.__k=new Array(i),o=0;o<i;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[o]=Lf(null,a,null,null,null):mh(a)?a=e.__k[o]=Lf(gh,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=e.__k[o]=Lf(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[o]=a,l=o+g,a.__=e,a.__b=e.__b+1,(u=a.__i=Q6(a,n,l,d))!=-1&&(d--,(s=n[u])&&(s.__u|=2)),s==null||s.__v==null?(u==-1&&(i>f?g--:i<f&&g++),typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?g--:u==l+1?g++:(u>l?g--:g++,a.__u|=4))):e.__k[o]=null;if(d)for(o=0;o<f;o++)(s=n[o])!=null&&!(2&s.__u)&&(s.__e==r&&(r=kl(s)),ek(s,s));return r}function QR(e,t,n,r){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=QR(i[o],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=kl(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Q6(e,t,n,r){var i,o,a,s=e.key,l=e.type,u=t[n],f=u!=null&&(2&u.__u)==0;if(u===null&&s==null||f&&s==u.key&&l==u.type)return n;if(r>(f?1:0)){for(i=n-1,o=n+1;i>=0||o<t.length;)if((u=t[a=i>=0?i--:o++])!=null&&!(2&u.__u)&&s==u.key&&l==u.type)return a}return-1}function Ww(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||q6.test(t)?n:n+"px"}function Qp(e,t,n,r,i){var o,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ww(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||Ww(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(GR,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=d0,e.addEventListener(t,o?Sy:by,o)):e.removeEventListener(t,o?Sy:by,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Uw(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=d0++;else if(t.t<n.u)return;return n(qt.event?qt.event(t):t)}}}function m0(e,t,n,r,i,o,a,s,l,u){var f,d,g,y,v,x,C,P,R,E,b,D,B,z,L,X,Y,G=t.type;if(t.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(f=qt.__b)&&f(t);e:if(typeof G=="function")try{if(P=t.props,R="prototype"in G&&G.prototype.render,E=(f=G.contextType)&&r[f.__c],b=f?E?E.props.value:f.__:r,n.__c?C=(d=t.__c=n.__c).__=d.__E:(R?t.__c=d=new G(P,b):(t.__c=d=new If(P,b),d.constructor=G,d.render=J6),E&&E.sub(d),d.state||(d.state={}),d.__n=r,g=d.__d=!0,d.__h=[],d._sb=[]),R&&d.__s==null&&(d.__s=d.state),R&&G.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=_o({},d.__s)),_o(d.__s,G.getDerivedStateFromProps(P,d.__s))),y=d.props,v=d.state,d.__v=t,g)R&&G.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),R&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(R&&G.getDerivedStateFromProps==null&&P!==y&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(P,b),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(P,d.__s,b)===!1){for(t.__v!=n.__v&&(d.props=P,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(le){le&&(le.__=t)}),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(P,d.__s,b),R&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(y,v,x)})}if(d.context=b,d.props=P,d.__P=e,d.__e=!1,B=qt.__r,z=0,R){for(d.state=d.__s,d.__d=!1,B&&B(t),f=d.render(d.props,d.state,d.context),L=0;L<d._sb.length;L++)d.__h.push(d._sb[L]);d._sb=[]}else do d.__d=!1,B&&B(t),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++z<25);d.state=d.__s,d.getChildContext!=null&&(r=_o(_o({},r),d.getChildContext())),R&&!g&&d.getSnapshotBeforeUpdate!=null&&(x=d.getSnapshotBeforeUpdate(y,v)),X=f,f!=null&&f.type===gh&&f.key==null&&(X=JR(f.props.children)),s=XR(e,mh(X)?X:[X],t,n,r,i,o,a,s,l,u),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),C&&(d.__E=d.__=null)}catch(le){if(t.__v=null,l||o!=null)if(le.then){for(t.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else{for(Y=o.length;Y--;)h0(o[Y]);Cy(t)}else t.__e=n.__e,t.__k=n.__k,le.then||Cy(t);qt.__e(le,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=Z6(n.__e,t,n,r,i,o,a,l,u);return(f=qt.diffed)&&f(t),128&t.__u?void 0:s}function Cy(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Cy)}function ZR(e,t,n){for(var r=0;r<n.length;r++)g0(n[r],n[++r],n[++r]);qt.__c&&qt.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){qt.__e(o,i.__v)}})}function JR(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:mh(e)?e.map(JR):_o({},e)}function Z6(e,t,n,r,i,o,a,s,l){var u,f,d,g,y,v,x,C=n.props||yu,P=t.props,R=t.type;if(R=="svg"?i="http://www.w3.org/2000/svg":R=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((y=o[u])&&"setAttribute"in y==!!R&&(R?y.localName==R:y.nodeType==3)){e=y,o[u]=null;break}}if(e==null){if(R==null)return document.createTextNode(P);e=document.createElementNS(i,R,P.is&&P),s&&(qt.__m&&qt.__m(t,o),s=!1),o=null}if(R==null)C===P||s&&e.data==P||(e.data=P);else{if(o=o&&hh.call(e.childNodes),!s&&o!=null)for(C={},u=0;u<e.attributes.length;u++)C[(y=e.attributes[u]).name]=y.value;for(u in C)if(y=C[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=y;else if(!(u in P)){if(u=="value"&&"defaultValue"in P||u=="checked"&&"defaultChecked"in P)continue;Qp(e,u,null,y,i)}}for(u in P)y=P[u],u=="children"?g=y:u=="dangerouslySetInnerHTML"?f=y:u=="value"?v=y:u=="checked"?x=y:s&&typeof y!="function"||C[u]===y||Qp(e,u,y,C[u],i);if(f)s||d&&(f.__html==d.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(d&&(e.innerHTML=""),XR(t.type=="template"?e.content:e,mh(g)?g:[g],t,n,r,R=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&kl(n,0),s,l),o!=null)for(u=o.length;u--;)h0(o[u]);s||(u="value",R=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[u]||R=="progress"&&!v||R=="option"&&v!=C[u])&&Qp(e,u,v,C[u],i),u="checked",x!=null&&x!=e[u]&&Qp(e,u,x,C[u],i))}return e}function g0(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){qt.__e(i,n)}}function ek(e,t,n){var r,i;if(qt.unmount&&qt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||g0(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){qt.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ek(r[i],t,n||typeof e.type!="function");n||h0(e.__e),e.__c=e.__=e.__e=void 0}function J6(e,t,n){return this.constructor(e,n)}function tk(e,t,n){var r,i,o,a;t==document&&(t=document.documentElement),qt.__&&qt.__(e,t),i=(r=!1)?null:t.__k,o=[],a=[],m0(t,e=t.__k=YR(gh,null,[e]),i||yu,yu,t.namespaceURI,i?null:t.firstChild?hh.call(t.childNodes):null,o,i?i.__e:t.firstChild,r,a),ZR(o,e,a)}hh=KR.slice,qt={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(s){e=s}throw e}},VR=0,If.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=_o({},this.state),typeof e=="function"&&(e=e(_o({},n),this.props)),e&&_o(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Vw(this))},If.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Vw(this))},If.prototype.render=gh,is=[],WR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,UR=function(e,t){return e.__v.__b-t.__v.__b},wd.__r=0,GR=/(PointerCapture)$|Capture$/i,d0=0,by=Uw(!1),Sy=Uw(!0);var nk=function(e,t,n,r){var i;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];a===3?r[0]=s:a===4?r[1]=Object.assign(r[1]||{},s):a===5?(r[1]=r[1]||{})[t[++o]]=s:a===6?r[1][t[++o]]+=s+"":a?(i=e.apply(s,nk(e,s,n,["",null])),r.push(i),s[0]?t[0]|=2:(t[o-2]=0,t[o]=i)):r.push(s)}return r},Gw=new Map;function eL(e){var t=Gw.get(this);return t||(t=new Map,Gw.set(this,t)),(t=nk(this,t.get(e)||(t.set(e,t=function(n){for(var r,i,o=1,a="",s="",l=[0],u=function(g){o===1&&(g||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,g,a):o===3&&(g||a)?(l.push(3,g,a),o=2):o===2&&a==="..."&&g?l.push(4,g,0):o===2&&a&&!g?l.push(5,0,!0,a):o>=5&&((a||!g&&o===5)&&(l.push(o,0,a,i),o=6),g&&(l.push(o,g,0,i),o=6)),a=""},f=0;f<n.length;f++){f&&(o===1&&u(),u(f));for(var d=0;d<n[f].length;d++)r=n[f][d],o===1?r==="<"?(u(),l=[l],o=3):a+=r:o===4?a==="--"&&r===">"?(o=1,a=""):a=r+a[0]:s?r===s?s="":a+=r:r==='"'||r==="'"?s=r:r===">"?(u(),o=1):o&&(r==="="?(o=5,i=a,a=""):r==="/"&&(o<5||n[f][d+1]===">")?(u(),o===3&&(l=l[0]),o=l,(l=l[0]).push(2,0,o),o=0):r===" "||r==="	"||r===`
`||r==="\r"?(u(),o=2):a+=r),o===3&&a==="!--"&&(o=4,l=l[0])}return u(),l}(e)),t),arguments,[])).length>1?t:t[0]}var an=eL.bind(YR),Pl,dn,eg,Kw,vu=0,rk=[],wn=qt,Yw=wn.__b,qw=wn.__r,Xw=wn.diffed,Qw=wn.__c,Zw=wn.unmount,Jw=wn.__;function yh(e,t){wn.__h&&wn.__h(dn,e,vu||t),vu=0;var n=dn.__H||(dn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tg(e){return vu=1,tL(ok,e)}function tL(e,t,n){var r=yh(Pl++,2);if(r.t=e,!r.__c&&(r.__=[ok(void 0,t),function(s){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,s);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=dn,!dn.__f)){var i=function(s,l,u){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!o||o.call(this,s,l,u);var d=r.__c.props!==s;return f.forEach(function(g){if(g.__N){var y=g.__[0];g.__=g.__N,g.__N=void 0,y!==g.__[0]&&(d=!0)}}),o&&o.call(this,s,l,u)||d};dn.__f=!0;var o=dn.shouldComponentUpdate,a=dn.componentWillUpdate;dn.componentWillUpdate=function(s,l,u){if(this.__e){var f=o;o=void 0,i(s,l,u),o=f}a&&a.call(this,s,l,u)},dn.shouldComponentUpdate=i}return r.__N||r.__}function Ry(e,t){var n=yh(Pl++,3);!wn.__s&&y0(n.__H,t)&&(n.__=e,n.u=t,dn.__H.__h.push(n))}function ky(e,t){var n=yh(Pl++,4);!wn.__s&&y0(n.__H,t)&&(n.__=e,n.u=t,dn.__h.push(n))}function ik(e){return vu=5,Tl(function(){return{current:e}},[])}function Tl(e,t){var n=yh(Pl++,7);return y0(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function xc(e,t){return vu=8,Tl(function(){return e},t)}function nL(){for(var e;e=rk.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Bf),e.__H.__h.forEach(Py),e.__H.__h=[]}catch(t){e.__H.__h=[],wn.__e(t,e.__v)}}wn.__b=function(e){dn=null,Yw&&Yw(e)},wn.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Jw&&Jw(e,t)},wn.__r=function(e){qw&&qw(e),Pl=0;var t=(dn=e.__c).__H;t&&(eg===dn?(t.__h=[],dn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Bf),t.__h.forEach(Py),t.__h=[],Pl=0)),eg=dn},wn.diffed=function(e){Xw&&Xw(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(rk.push(t)!==1&&Kw===wn.requestAnimationFrame||((Kw=wn.requestAnimationFrame)||rL)(nL)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),eg=dn=null},wn.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Bf),n.__h=n.__h.filter(function(r){return!r.__||Py(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],wn.__e(r,n.__v)}}),Qw&&Qw(e,t)},wn.unmount=function(e){Zw&&Zw(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Bf(r)}catch(i){t=i}}),n.__H=void 0,t&&wn.__e(t,n.__v))};var eE=typeof requestAnimationFrame=="function";function rL(e){var t,n=function(){clearTimeout(r),eE&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);eE&&(t=requestAnimationFrame(n))}function Bf(e){var t=dn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),dn=t}function Py(e){var t=dn;e.__c=e.__(),dn=t}function y0(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ok(e,t){return typeof t=="function"?t(e):t}function ak(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ak(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ed(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ak(e))&&(r&&(r+=" "),r+=t);return r}function iL(e){const{headerEntries:t,onSelect:n,selectedEntry:r,setSelectedEntry:i,title:o}=e,a=Tl(()=>oL(t),[t]);return an`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>an`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(l=>an`
            <li key=${l.id}>
              <${l.action?"button":"span"}
                class=${aL(l,l===r)}
                onClick=${u=>l.action&&n(u,l)}
                title=${l.title||l.label}
                data-id=${l.id}
                onMouseEnter=${()=>l.action&&i(l)}
                onMouseLeave=${()=>l.action&&i(null)}
                onFocus=${()=>l.action&&i(l)}
                onBlur=${()=>l.action&&i(null)}
              >
                ${l.imageUrl&&an`<img class="djs-popup-entry-icon" src=${l.imageUrl} alt="" />`||l.imageHtml&&an`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:l.imageHtml}} />`}
                ${l.label?an`
                  <span class="djs-popup-label">${l.label}</span>
                `:null}
              </${l.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function oL(e){return e.reduce((t,n)=>{const r=n.group||"default",i=t.find(o=>o.id===r);return i?i.entries.push(n):t.push({id:r,entries:[n]}),t},[])}function aL(e,t){return Ed("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function sL(e){const{entry:t,selected:n,onMouseEnter:r,onMouseLeave:i,onAction:o}=e;return an`
    <li
      class=${Ed("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${r}
      onBlur=${i}
      onMouseEnter=${r}
      onMouseLeave=${i}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Ed("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&an`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&an`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?an`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&an`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&an`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function lL(e){const{selectedEntry:t,setSelectedEntry:n,entries:r,...i}=e,o=ik(),a=Tl(()=>cL(r),[r]);return ky(()=>{const s=o.current;if(!s)return;const l=s.querySelector(".selected");l&&uL(l)},[t]),an`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(s=>an`
        ${s.name&&an`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(l=>an`
            <${sL}
              key=${l.id}
              entry=${l}
              selected=${l===t}
              onMouseEnter=${()=>n(l)}
              onMouseLeave=${()=>n(null)}
              ...${i}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function cL(e){const t=[],n=o=>t.find(a=>o.id===a.id),r=o=>!!n(o),i=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const a=o.group?i(o.group):{id:"default"};r(a)?n(a).entries.push(o):t.push({...a,entries:[o]})}),t}function uL(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function pL(e){const{onClose:t,onSelect:n,className:r,headerEntries:i,position:o,title:a,width:s,scale:l,search:u,emptyPlaceholder:f,entries:d,onOpened:g,onClosed:y}=e,v=Tl(()=>In(u)?d.length>5:!1,[u,d]),[x,C]=tg(""),P=xc((G,le)=>{if(!v)return G;const oe=Se=>{if(!le)return(Se.rank||0)>=0;if(Se.searchable===!1)return!1;const kt=[Se.description||"",Se.label||"",Se.search||""].map(Ge=>Ge.toLowerCase());return le.toLowerCase().split(/\s/g).every(Ge=>kt.some(Ke=>Ke.includes(Ge)))};return G.filter(oe)},[v]),[R,E]=tg(P(d,x)),[b,D]=tg(R[0]),B=xc(G=>{(!b||!G.includes(b))&&D(G[0]),E(G)},[b,E,D]);Ry(()=>{B(P(d,x))},[x,d]);const z=xc(G=>{let oe=R.indexOf(b)+G;oe<0&&(oe=R.length-1),oe>=R.length&&(oe=0),D(R[oe])},[R,b,D]),L=xc(G=>{if(G.key==="Enter"&&b)return n(G,b);if(G.key==="ArrowUp")return z(-1),G.preventDefault();if(G.key==="ArrowDown")return z(1),G.preventDefault()},[n,b,z]),X=xc(G=>{Xd(G.target,"input")&&C(()=>G.target.value)},[C]);Ry(()=>(g(),()=>{y()}),[]);const Y=Tl(()=>a||i.length>0,[a,i]);return an`
    <${tE}
      onClose=${t}
      onKeyup=${X}
      onKeydown=${L}
      className=${r}
      position=${o}
      width=${s}
      scale=${l}
    >
      ${Y&&an`
        <${iL}
          headerEntries=${i}
          onSelect=${n}
          selectedEntry=${b}
          setSelectedEntry=${D}
          title=${a}
        />
      `}
      ${d.length>0&&an`
        <div class="djs-popup-body">

          ${v&&an`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${lL}
            entries=${R}
            selectedEntry=${b}
            setSelectedEntry=${D}
            onAction=${n}
          />
        </div>
      `}
    ${f&&R.length===0&&an`
      <div class="djs-popup-no-results">${Cn(f)?f(x):f}</div>
    `}
    </${tE}>
  `}function tE(e){const{onClose:t,onKeydown:n,onKeyup:r,className:i,children:o,position:a}=e,s=ik();return ky(()=>{if(typeof a!="function")return;const l=s.current,u=a(l);l.style.left=`${u.x}px`,l.style.top=`${u.y}px`},[s.current,a]),ky(()=>{const l=s.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),Ry(()=>{const l=f=>{if(f.key==="Escape")return f.preventDefault(),t()},u=f=>{if(!Sa(f.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",u),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",u)}},[]),an`
    <div
      class=${Ed("djs-popup",i)}
      style=${fL(e)}
      onKeydown=${n}
      onKeyup=${r}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function fL(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var dL="data-id",sk=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],hL=1e3;function Zt(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var r=In(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",i=>{const o=this.isOpen()&&this._current.target;i.element===o&&this.refresh()})}Zt.$inject=["config.popupMenu","eventBus","canvas"];Zt.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:r,emptyPlaceholder:i,options:o}=this._current,a=Object.entries(n).map(([g,y])=>({id:g,...y})),s=Object.entries(r).map(([g,y])=>({id:g,...y})),l=e&&(g=>this._ensureVisible(g,e)),u=this._updateScale(this._current.container);tk(an`
      <${pL}
        onClose=${g=>this.close(g)}
        onSelect=${(g,y,v)=>this.trigger(g,y,v)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${i}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};Zt.prototype.open=function(e,t,n,r){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:i,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};Zt.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:r,emptyPlaceholder:i}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:r,emptyPlaceholder:i},this._emit("refresh"),this._render()};Zt.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const r=this._getEntries(e,n),i=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:r,headerEntries:i,emptyPlaceholder:o,empty:!(Object.keys(r).length||Object.keys(i).length)}};Zt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};Zt.prototype.reset=function(){const e=this._current.container;tk(null,e),no(e)};Zt.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};Zt.prototype._onOpened=function(){this._emit("opened")};Zt.prototype._onClosed=function(){this._emit("closed")};Zt.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const r=zt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r};Zt.prototype._bindAutoClose=function(){this._eventBus.once(sk,this.close,this)};Zt.prototype._unbindAutoClose=function(){this._eventBus.off(sk,this.close,this)};Zt.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,r,i=e;return t!==!0&&(t===!1?(n=1,r=1):(n=t.min,r=t.max),In(n)&&e<n&&(i=n),In(r)&&e>r&&(i=r)),i};Zt.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),i={},o=t.x,a=t.y;return t.x+r.width>n.width&&(i.x=!0),t.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(o=t.x-r.width,a=t.y-r.height):i.x?(o=t.x-r.width,a=t.y):i.y&&t.y<r.height?(o=t.x,a=10):i.y&&(o=t.x,a=t.y-r.height),t.y<n.top&&(a=t.y+r.height),{x:o,y:a}};Zt.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};Zt.prototype.registerProvider=function(e,t,n){n||(n=t,t=hL),this._eventBus.on("popupMenu.getProviders."+e,t,function(r){r.providers.push(n)})};Zt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};Zt.prototype._getEntries=function(e,t){var n={};return W(t,function(r){if(!r.getPopupMenuEntries){W(r.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=_i(o,["id"])});return}var i=r.getPopupMenuEntries(e);Cn(i)?n=i(n):W(i,function(o,a){n[a]=o})}),n};Zt.prototype._getHeaderEntries=function(e,t){var n={};return W(t,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;W(r.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=_i(o,["id"])});return}var i=r.getPopupMenuHeaderEntries(e);Cn(i)?n=i(n):W(i,function(o,a){n[a]=o})}),n};Zt.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>Cn(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};Zt.prototype.isOpen=function(){return!!this._current};Zt.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let i=Sa(e.delegateTarget||e.target,".entry",!0),o=lr(i,dL);t={id:o,...this._getEntry(o)}}const r=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(Cn(r)){if(n==="click")return r(e,t)}else if(r[n])return r[n](e,t)}};Zt.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const v0={__init__:["popupMenu"],popupMenu:["type",Zt]};var lk={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},mL=900;function Kl(e,t,n,r){e.registerProvider(mL,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=r}Kl.$inject=["contextPad","popupMenu","translate","canvas"];Kl.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Kl.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Kl.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${lk.align}</div>`,action:{click:function(t,n){var r=e._getMenuPosition(n);q(r,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",r)}}}}};Kl.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,r=n.getBoundingClientRect(),i={x:r.left,y:r.bottom+t};return i};var gL=["left","center","right","top","middle","bottom"];function Lu(e,t,n,r){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",this)}Lu.$inject=["popupMenu","alignElements","translate","rules"];Lu.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Lu.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Lu.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,r=this._popupMenu,i={};return W(gL,function(o){i["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:lk[o],action:function(){t.trigger(e,o),r.close()}}}),i};function bi(e){ue.call(this,e),this.init()}bi.$inject=["eventBus"];De(bi,ue);bi.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(i){r.canExecute(i,t,function(o,a,s){return n(o)},!0)})};bi.prototype.init=function(){};function vh(e){bi.call(this,e)}vh.$inject=["eventBus"];De(vh,bi);vh.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=yt(t,function(r){return!(r.waypoints||r.host||r.labelTarget)});return n=Jd(n),n.length<2?!1:n})};const yL={__depends__:[$6,HR,v0],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Kl],alignElementsMenuProvider:["type",Lu],bpmnAlignElements:["type",vh]};var vL=10,ck=50,xL=250;function x0(e,t,n,r){for(var i;i=_L(e,n,t);)n=r(t,n,i);return n}function _0(e){return function(t,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",l=a.margin,u=a.minDistance;l<0?i[o]=Math.min(r[o]+l-t[s]/2,n[o]-u+l):i[o]=Math.max(r[o]+r[s]+l+t[s]/2,n[o]+u+l)}}),i}}function _L(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},i=EL(e);return Mt(i,function(o){if(o===n)return!1;var a=tr(o,r,vL);return a==="intersect"})}function wL(e,t){t||(t={});function n(v){return v.source===e?1:-1}var r=t.defaultDistance||ck,i=t.direction||"e",o=t.filter,a=t.getWeight||n,s=t.maxDistance||xL,l=t.reference||"start";o||(o=CL);function u(v,x){return i==="n"?l==="start"?Ue(v).top-Ue(x).bottom:l==="center"?Ue(v).top-Ze(x).y:Ue(v).top-Ue(x).top:i==="w"?l==="start"?Ue(v).left-Ue(x).right:l==="center"?Ue(v).left-Ze(x).x:Ue(v).left-Ue(x).left:i==="s"?l==="start"?Ue(x).top-Ue(v).bottom:l==="center"?Ze(x).y-Ue(v).bottom:Ue(x).bottom-Ue(v).bottom:l==="start"?Ue(x).left-Ue(v).right:l==="center"?Ze(x).x-Ue(v).right:Ue(x).right-Ue(v).right}var f=e.incoming.filter(o).map(function(v){var x=a(v),C=x<0?u(v.source,e):u(e,v.source);return{id:v.source.id,distance:C,weight:x}}),d=e.outgoing.filter(o).map(function(v){var x=a(v),C=x>0?u(e,v.target):u(v.target,e);return{id:v.target.id,distance:C,weight:x}}),g=f.concat(d).reduce(function(v,x){return v[x.id+"__weight_"+x.weight]=x,v},{}),y=jr(g,function(v,x){var C=x.distance,P=x.weight;return C<0||C>s||(v[String(C)]||(v[String(C)]=0),v[String(C)]+=1*P,(!v.distance||v[v.distance]<v[String(C)])&&(v.distance=C)),v},{});return y.distance||r}function EL(e){var t=ng(e);return e.host&&(t=t.concat(ng(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,r){return n.concat(ng(r))},[]))),t}function ng(e){return SL(e).concat(bL(e))}function bL(e){return e.incoming.map(function(t){return t.source})}function SL(e){return e.outgoing.map(function(t){return t.target})}function CL(){return!0}var RL=100;function uk(e,t,n){e.on("autoPlace",RL,function(r){var i=r.shape,o=r.source;return kL(o,i)}),e.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,i,o){e.fire("autoPlace.start",{source:r,shape:i});var a=e.fire("autoPlace",{source:r,shape:i}),s=t.appendShape(r,i,a,r.parent,o);return e.fire("autoPlace.end",{source:r,shape:s}),s}}uk.$inject=["eventBus","modeling","canvas"];function kL(e,t,n){n||(n={});var r=n.defaultDistance||ck,i=Ze(e),o=Ue(e);return{x:o.right+r+t.width/2,y:i.y}}function pk(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}pk.$inject=["eventBus","selection"];const PL={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",uk],autoPlaceSelectionBehavior:["type",pk]};function Al(e,t){for(Br(t)&&(t=[t]);e=e.parent;)if(mt(e,t))return e;return null}function fk(e,t){var n=Al(e,"bpmn:Process");if(n)return!0;var r=["bpmn:Participant","bpmn:Lane"];if(n=Al(e,r),n)return Nn(n);if(mt(e,r))return Nn(e);var i;for(i=pe(e);i&&!A(i,"bpmn:Process");i=i.$parent);if(!t)return!0;var o=t.find(function(a){var s=pe(a);return s&&s.get("processRef")===i});return o?Nn(o):!0}function dk(e,t,n){var r=fk(e,n);if(A(t,"bpmn:TextAnnotation"))return AL(e,t,r);if(mt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return ML(e,t,r);if(A(t,"bpmn:FlowNode"))return TL(e,t,r)}function TL(e,t,n){var r=Ue(e),i=Ze(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=wL(e,{filter:function(y){return A(y,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,l=o.minDistance,u=o.baseOrientation;A(e,"bpmn:BoundaryEvent")&&(u=tr(e,e.host,-25),u.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var f=n?{x:r.right+a+t.width/2,y:i.y+nE(u,l,o)}:{x:i.x+nE(u,l,o),y:r.bottom+a+t.height/2},d={margin:s,minDistance:l},g=n?{y:d}:{x:d};return x0(e,t,f,_0(g))}function nE(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function AL(e,t,n){var r=Ue(e),i=n?{x:r.right+t.width/2,y:r.top-50-t.height/2}:{x:r.right+50+t.width/2,y:r.bottom+t.height/2};jt(e)&&(i=Ze(e),n?(i.x+=100,i.y-=50):(i.x+=100,i.y+=50));var o={margin:n?-30:30,minDistance:20},a=n?{y:o}:{x:o};return x0(e,t,i,_0(a))}function ML(e,t,n){var r=Ue(e),i=n?{x:r.right-10+t.width/2,y:r.bottom+40+t.width/2}:{x:r.left-40-t.width/2,y:r.bottom-10+t.height/2},o={margin:30,minDistance:30},a=n?{x:o}:{y:o};return x0(e,t,i,_0(a))}function hk(e,t){e.on("autoPlace",function(n){var r=n.shape,i=n.source;return dk(i,r,t)})}hk.$inject=["eventBus","elementRegistry"];const w0={__depends__:[PL],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",hk]};function Oo(e,t,n,r){ue.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},l=a.shape,u=a.parent||a.newParent;s.autoResize!==!1&&i._expand([l],u)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=zv(Hv(a.closure.topLevel)),l=a.hints,u=l?l.autoResize:!0;if(u!==!1){var f=jl(s,function(d){return d.parent.id});W(f,function(d,g){at(u)&&(d=d.filter(function(y){return Mt(u,Li({id:y.id}))})),i._expand(d,g)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,l=a.shape;s&&s.autoResize===!1||l.collapsed||i._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,l=a.shape,u=l.parent;s&&s.autoResize===!1||u&&i._expand([l],u)})}Oo.$inject=["eventBus","elementRegistry","modeling","rules"];De(Oo,ue);Oo.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),r=this.getPadding(t),i=Ue(Mn(e)),o=Ue(t),a={};return i.top-o.top<r.top&&(a.top=i.top-n.top),i.left-o.left<r.left&&(a.left=i.left-n.left),o.right-i.right<r.right&&(a.right=i.right+n.right),o.bottom-i.bottom<r.bottom&&(a.bottom=i.bottom+n.bottom),eh(q({},o,a))};Oo.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var r=this._getOptimalBounds(e,t);if(NL(r,t)){var i=DL(ji(t,["x","y","width","height"]),r);this.resize(t,r,{autoResize:i});var o=t.parent;o&&this._expand([t],o)}}};Oo.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Oo.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Oo.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function NL(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function DL(e,t){var n="";return e=Ue(e),t=Ue(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function xh(e){e.invoke(Oo,this)}xh.$inject=["injector"];De(xh,Oo);xh.prototype.resize=function(e,t,n){A(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function Iu(e){bi.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}Iu.$inject=["eventBus"];De(Iu,bi);Iu.prototype.canResize=function(e,t){return!1};function _h(e,t){Iu.call(this,e),this._modeling=t}De(_h,Iu);_h.$inject=["eventBus","modeling"];_h.prototype.canResize=function(e,t){if(A(t.di,"bpmndi:BPMNPlane")||!A(t,"bpmn:Participant")&&!A(t,"bpmn:Lane")&&!A(t,"bpmn:SubProcess"))return!1;var n=!0;return W(e,function(r){if(A(r,"bpmn:Lane")||Rt(r)){n=!1;return}}),n};const OL={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",xh],bpmnAutoResizeProvider:["type",_h]};var rE=1500;function mk(e,t,n){var r=this,i=n.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,l=r._findTargetGfx(s),u=l&&e.get(l);l&&u&&(a.stopPropagation(),i.hover({element:u,gfx:l}),i.move(s))}}i&&t.on("drag.start",function(a){t.once("drag.move",rE,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(l){a=l.gfx,s=l.element}),t.on("element.hover",rE,function(l){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,l;if(a instanceof MouseEvent)return s=ws(a),l=document.elementFromPoint(s.x,s.y),LL(l)}}mk.$inject=["elementRegistry","eventBus","injector"];function LL(e){return Sa(e,"svg, .djs-element",!0)}const IL={__init__:["hoverFix"],hoverFix:["type",mk]};var Ks=Math.round,iE="djs-drag-active";function Ja(e){e.preventDefault()}function BL(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function jL(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function gk(e,t,n,r){var i={threshold:5,trapClick:!0},o;function a(E){var b=t.viewbox(),D=t._container.getBoundingClientRect();return{x:b.x+(E.x-D.left)/b.scale,y:b.y+(E.y-D.top)/b.scale}}function s(E,b){b=b||o;var D=e.createEvent(q({},b.payload,b.data,{isTouch:b.isTouch}));return e.fire("drag."+E,D)===!1?!1:e.fire(b.prefix+"."+E,D)}function l(E){var b=E.filter(function(D){return r.get(D.id)});b.length&&n.select(b)}function u(E,b){var D=o.payload,B=o.displacement,z=o.globalStart,L=ws(E),X=Ii(L,z),Y=o.localStart,G=a(L),le=Ii(G,Y);if(!o.active&&(b||jL(X)>o.threshold)){if(q(D,{x:Ks(Y.x+B.x),y:Ks(Y.y+B.y),dx:0,dy:0},{originalEvent:E}),s("start")===!1)return C();o.active=!0,o.keepSelection||(D.previousSelection=n.get(),n.select(null)),o.cursor&&dh(o.cursor),t.addMarker(t.getRootElement(),iE)}Zm(E),o.active&&(q(D,{x:Ks(G.x+B.x),y:Ks(G.y+B.y),dx:Ks(le.x),dy:Ks(le.y)},{originalEvent:E}),s("move"))}function f(E){var b,D=!0;o.active&&(E&&(o.payload.originalEvent=E,Zm(E)),D=s("end")),D===!1&&s("rejected"),b=P(D!==!0),s("ended",b)}function d(E){Tn("Escape",E)&&(Ja(E),C())}function g(E){var b;o.active&&(b=IR(e),setTimeout(b,400),Ja(E)),f(E)}function y(E){u(E)}function v(E){var b=o.payload;b.hoverGfx=E.gfx,b.hover=E.element,s("hover")}function x(E){s("out");var b=o.payload;b.hoverGfx=null,b.hover=null}function C(E){var b;if(o){var D=o.active;D&&s("cancel"),b=P(E),D&&s("canceled",b)}}function P(E){var b,D;s("cleanup"),LR(),o.trapClick?D=g:D=f,ot.unbind(document,"mousemove",u),ot.unbind(document,"dragstart",Ja),ot.unbind(document,"selectstart",Ja),ot.unbind(document,"mousedown",D,!0),ot.unbind(document,"mouseup",D,!0),ot.unbind(document,"keyup",d),ot.unbind(document,"touchstart",y,!0),ot.unbind(document,"touchcancel",C,!0),ot.unbind(document,"touchmove",u,!0),ot.unbind(document,"touchend",f,!0),e.off("element.hover",v),e.off("element.out",x),t.removeMarker(t.getRootElement(),iE);var B=o.payload.previousSelection;return E!==!1&&B&&!n.get().length&&l(B),b=o,o=null,b}function R(E,b,D,B){o&&C(!1),typeof b=="string"&&(B=D,D=b,b=null),B=q({},i,B||{});var z=B.data||{},L,X,Y,G,le;B.trapClick?G=g:G=f,E?(L=Hl(E)||E,X=ws(E),Zm(E),L.type==="dragstart"&&Ja(L)):(L=null,X={x:0,y:0}),Y=a(X),b||(b=Y),le=BL(L),o=q({prefix:D,data:z,payload:{},globalStart:X,displacement:Ii(b,Y),localStart:Y,isTouch:le},B),B.manual||(le?(ot.bind(document,"touchstart",y,!0),ot.bind(document,"touchcancel",C,!0),ot.bind(document,"touchmove",u,!0),ot.bind(document,"touchend",f,!0)):(ot.bind(document,"mousemove",u),ot.bind(document,"dragstart",Ja),ot.bind(document,"selectstart",Ja),ot.bind(document,"mousedown",G,!0),ot.bind(document,"mouseup",G,!0)),ot.bind(document,"keyup",d),e.on("element.hover",v),e.on("element.out",x)),s("init"),B.autoActivate&&u(E,!0)}e.on("diagram.destroy",C),this.init=R,this.move=u,this.hover=v,this.out=x,this.end=f,this.cancel=C,this.context=function(){return o},this.setOptions=function(E){q(i,E)}}gk.$inject=["eventBus","canvas","selection","elementRegistry"];const Lo={__depends__:[IL,ro],dragging:["type",gk]};function Yl(e,t,n){this._canvas=n,this._opts=q({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(i){var o=r._toBorderPoint(i);r.startScroll(o)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}Yl.$inject=["config.autoScroll","eventBus","canvas"];Yl.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,i=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,i.width-e.x,i.height-e.y];this.stopScroll();for(var a=0,s=0,l=0;l<4;l++)$L(o[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?a=n.scrollStep:l==1?s=n.scrollStep:l==2?a=-n.scrollStep:l==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))};function $L(e,t,n){return t<e&&e<n}Yl.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Yl.prototype.setOptions=function(e){this._opts=q({},this._opts,e)};Yl.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=ws(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const FL={__depends__:[Lo],__init__:["autoScroll"],autoScroll:["type",Yl]};function E0(e){this._commandStack=e.get("commandStack",!1)}E0.$inject=["injector"];E0.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),n===void 0?!0:n};const oo={__init__:["rules"],rules:["type",E0]};var Zp=Math.round,zL=Math.max;function HL(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function VL(e){var t=[];return e.forEach(function(n,r){t.push([r===0?"M":"L",n.x,n.y])}),t}var yk=10;function WL(e,t){var n,r;for(n=0;r=e[n];n++)if(Pu(r,t)<=yk)return{point:e[n],bendpoint:!0,index:n};return null}function UL(e,t){var n=BC(HL(t,yk),VL(e)),r=n[0],i=n[n.length-1],o;return r?r!==i?r.segment2!==i.segment2?(o=zL(r.segment2,i.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:Zp(r.x+i.x)/2,y:Zp(r.y+i.y)/2},index:r.segment2}:{point:{x:Zp(r.x),y:Zp(r.y)},index:r.segment2}:null}function Ty(e,t){return WL(e,t)||UL(e,t)}function vk(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function oE(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function GL(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function KL(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],i=r[0].n*t[0]+r[1].n*t[1],o=r[0].lambda*t[0]+r[1].lambda*t[1];return-i/o}function b0(e,t){var n=t[0],r=t[1],i={x:r.x-n.x,y:r.y-n.y},o=KL([n.x,n.y],[i.x,i.y],[e.x,e.y]);return{x:n.x+o*i.x,y:n.y+o*i.y}}function xk(e,t){var n=b0(e,t),r={x:n.x-e.x,y:n.y-e.y};return vk(r)}function bd(e,t){return vk({x:e.x-t.x,y:e.y-t.y})}var _k="djs-bendpoint",wk="djs-segment-dragger";function YL(e,t){var n=ws(t),r=e._container.getBoundingClientRect(),i;i={x:r.left,y:r.top};var o=e.viewbox();return{x:o.x+(n.x-i.x)/o.scale,y:o.y+(n.y-i.y)/o.scale}}function Ay(e,t,n){var r=YL(e,n),i=Ty(t,r);return i}function My(e,t){var n=ze("g");St(n).add(_k),et(e,n);var r=ze("circle");be(r,{cx:0,cy:0,r:4}),St(r).add("djs-visual"),et(n,r);var i=ze("circle");return be(i,{cx:0,cy:0,r:10}),St(i).add("djs-hit"),et(n,i),t&&St(n).add(t),n}function qL(e,t,n,r){var i=ze("g");et(e,i);var o=18,a=6,s=11,l=QL(t,n,r),u=a+s,f=ze("rect");be(f,{x:-o/2,y:-a/2,width:o,height:a}),St(f).add("djs-visual"),et(i,f);var d=ze("rect");return be(d,{x:-l/2,y:-u/2,width:l,height:u}),St(d).add("djs-hit"),et(i,d),QC(i,r==="v"?90:0),i}function Ek(e,t,n){var r=ze("g"),i=hy(t,n),o=xo(t,n);return et(e,r),qL(r,t,n,o),St(r).add(wk),St(r).add(o==="h"?"horizontal":"vertical"),Vn(r,i.x,i.y),r}function Ny(e){return Math.abs(Math.round(e*2/3))}function XL(e,t){var n=ZL(e,t);return b0(e,n)}function QL(e,t,n){var r=t.x-e.x,i=t.y-e.y;return Ny(n==="h"?r:i)}function ZL(e,t){for(var n=t.waypoints,r=1/0,i,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1],l=xk(e,[a,s]);l<r&&(r=l,i=o)}return[n[i],n[i+1]]}function bk(e,t,n,r,i){function o(E,b,D){var B=E.index,z=E.point,L,X,Y,G,le,oe;return B<=0||E.bendpoint?!1:(L=b[B-1],X=b[B],Y=hy(L,X),G=xo(L,X),le=Math.abs(z.x-Y.x),oe=Math.abs(z.y-Y.y),G&&le<=D&&oe<=D)}function a(E,b){var D=E.waypoints,B,z,L,X;return b.index<=0||b.bendpoint||(B={start:D[b.index-1],end:D[b.index]},z=xo(B.start,B.end),!z)?null:(z==="h"?L=B.end.x-B.start.x:L=B.end.y-B.start.y,X=Ny(L)/2,X)}function s(E,b){var D=b.waypoints,B=Ay(t,D,E),z;if(B)return z=a(b,B),o(B,D,z)?i.start(E,b,B.index):r.start(E,b,B.index,!B.bendpoint),!0}function l(E,b,D){ot.bind(E,b,function(B){n.triggerMouseEvent(b,B,D),B.stopPropagation()})}function u(E,b){var D=t.getLayer("overlays"),B=It('.djs-bendpoints[data-element-id="'+hu(E.id)+'"]',D);return!B&&b&&(B=ze("g"),be(B,{"data-element-id":E.id}),St(B).add("djs-bendpoints"),et(D,B),l(B,"mousedown",E),l(B,"click",E),l(B,"dblclick",E)),B}function f(E,b){return It('.djs-segment-dragger[data-segment-idx="'+E+'"]',b)}function d(E,b){b.waypoints.forEach(function(D,B){var z=My(E);et(E,z),Vn(z,D.x,D.y)}),My(E,"floating")}function g(E,b){for(var D=b.waypoints,B,z,L,X=1;X<D.length;X++)B=D[X-1],z=D[X],xo(B,z)&&(L=Ek(E,B,z),be(L,{"data-segment-idx":X}),l(L,"mousemove",b))}function y(E){W(py("."+_k,E),function(b){Sn(b)})}function v(E){W(py("."+wk,E),function(b){Sn(b)})}function x(E){var b=u(E);return b||(b=u(E,!0),d(b,E),g(b,E)),b}function C(E){var b=u(E);b&&(v(b),y(b),g(b,E),d(b,E))}function P(E,b){var D=It(".floating",E),B=b.point;D&&Vn(D,B.x,B.y)}function R(E,b,D){var B=f(b.index,E),z=D[b.index-1],L=D[b.index],X=b.point,Y=hy(z,L),G=xo(z,L),le,oe;B&&(le=JL(B),oe={x:X.x-Y.x,y:X.y-Y.y},G==="v"&&(oe={x:oe.y,y:oe.x}),Vn(le,oe.x,oe.y))}e.on("connection.changed",function(E){C(E.element)}),e.on("connection.remove",function(E){var b=u(E.element);b&&Sn(b)}),e.on("element.marker.update",function(E){var b=E.element,D;b.waypoints&&(D=x(b),E.add?St(D).add(E.marker):St(D).remove(E.marker))}),e.on("element.mousemove",function(E){var b=E.element,D=b.waypoints,B,z;if(D){if(B=u(b,!0),z=Ay(t,D,E.originalEvent),!z)return;P(B,z),z.bendpoint||R(B,z,D)}}),e.on("element.mousedown",function(E){if(Ta(E)){var b=E.originalEvent,D=E.element;if(D.waypoints)return s(b,D)}}),e.on("selection.changed",function(E){var b=E.newSelection,D=b[0];D&&D.waypoints&&x(D)}),e.on("element.hover",function(E){var b=E.element;b.waypoints&&(x(b),n.registerEvent(E.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(E){n.unregisterEvent(E.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(E){var b=E.element,D=E.newId;if(b.waypoints){var B=u(b);B&&be(B,{"data-element-id":D})}}),this.addHandles=x,this.updateHandles=C,this.getBendpointsContainer=u,this.getSegmentDragger=f}bk.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function JL(e){return It(".djs-visual",e)}var aE=Math.round,ns="reconnectStart",rs="reconnectEnd",_c="updateWaypoints";function S0(e,t,n,r,i,o){this._injector=e,this.start=function(a,s,l,u){var f=n.getGraphics(s),d=s.source,g=s.target,y=s.waypoints,v;!u&&l===0?v=ns:!u&&l===y.length-1?v=rs:v=_c;var x=v===_c?"connection.updateWaypoints":"connection.reconnect",C=i.allowed(x,{connection:s,source:d,target:g});C===!1&&(C=i.allowed(x,{connection:s,source:g,target:d})),C!==!1&&r.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:f,context:{allowed:C,bendpointIndex:l,connection:s,source:d,target:g,insert:u,type:v}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,l=s.connection,u=l.source,f=l.target,d=a.hover,g=s.type;s.hover=d;var y;if(d){var v=g===_c?"connection.updateWaypoints":"connection.reconnect";if(y=s.allowed=i.allowed(v,{connection:l,source:g===ns?d:u,target:g===rs?d:f}),y){s.source=g===ns?d:u,s.target=g===rs?d:f;return}y===!1&&(y=s.allowed=i.allowed(v,{connection:l,source:g===rs?d:f,target:g===ns?d:u})),y&&(s.source=g===rs?d:f,s.target=g===ns?d:u)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,l=s.type;s.hover=null,s.source=null,s.target=null,l!==_c&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,l=s.allowed,u=s.bendpointIndex,f=s.connection,d=s.insert,g=f.waypoints.slice(),y=s.source,v=s.target,x=s.type,C=s.hints||{},P={x:aE(a.x),y:aE(a.y)};if(!l)return!1;x===_c?(d?g.splice(u,0,P):g[u]=P,C.bendpointMove={insert:d,bendpointIndex:u},g=this.cropWaypoints(f,g),o.updateWaypoints(f,HN(g),C)):(x===ns?(C.docking="source",Sd(s)&&(C.docking="target",C.newWaypoints=g.reverse())):x===rs&&(C.docking="target",Sd(s)&&(C.docking="source",C.newWaypoints=g.reverse())),o.reconnect(f,y,v,P,C))},this)}S0.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];S0.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var r=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=r,t};function Sd(e){var t=e.hover,n=e.source,r=e.target,i=e.type;if(i===ns)return t&&r&&t===r&&n!==r;if(i===rs)return t&&n&&t===n&&n!==r}var eI="reconnectStart",tI="reconnectEnd",sE="updateWaypoints",wc="connect-ok",Jp="connect-not-ok",lE="connect-hover",cE="djs-updating",uE="djs-dragging",pE=1100;function Sk(e,t,n,r){this._injector=t;var i=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,l=a.connection,u=a.insert,f=l.waypoints,d=f.slice();a.waypoints=f,u&&d.splice(s,0,{x:o.x,y:o.y}),l.waypoints=d;var g=a.draggerGfx=My(r.getLayer("overlays"));St(g).add("djs-dragging"),r.addMarker(l,uE),r.addMarker(l,cE)}),n.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,l=a.hover,u=a.type;if(l){if(r.addMarker(l,lE),u===sE)return;s?(r.removeMarker(l,Jp),r.addMarker(l,wc)):s===!1&&(r.removeMarker(l,wc),r.addMarker(l,Jp))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],pE,function(o){var a=o.context,s=a.hover,l=a.target;s&&(r.removeMarker(s,lE),r.removeMarker(s,l?wc:Jp))}),n.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,l=a.bendpointIndex,u=a.draggerGfx,f=a.hover,d=a.type,g=a.connection,y=g.source,v=g.target,x=g.waypoints.slice(),C={x:o.x,y:o.y},P=a.hints||{},R={};i&&(P.connectionStart&&(R.connectionStart=P.connectionStart),P.connectionEnd&&(R.connectionEnd=P.connectionEnd),d===eI?Sd(a)?(R.connectionEnd=R.connectionEnd||C,R.source=v,R.target=f||y,x=x.reverse()):(R.connectionStart=R.connectionStart||C,R.source=f||y,R.target=v):d===tI?Sd(a)?(R.connectionStart=R.connectionStart||C,R.source=f||v,R.target=y,x=x.reverse()):(R.connectionEnd=R.connectionEnd||C,R.source=y,R.target=f||v):(R.noCropping=!0,R.noLayout=!0,x[l]=C),d===sE&&(x=e.cropWaypoints(g,x)),R.waypoints=x,i.drawPreview(a,s,R)),Vn(u,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],pE,function(o){var a=o.context,s=a.connection,l=a.draggerGfx,u=a.hover,f=a.target,d=a.waypoints;s.waypoints=d,Sn(l),r.removeMarker(s,cE),r.removeMarker(s,uE),u&&(r.removeMarker(u,wc),r.removeMarker(u,f?wc:Jp)),i&&i.cleanUp(a)})}Sk.$inject=["bendpointMove","injector","eventBus","canvas"];var fE="connect-hover",dE="djs-updating";function hE(e,t,n){return C0(e,t,e[t]+n)}function C0(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function nI(e,t,n,r){var i=Math.max(t[r],n[r]),o=Math.min(t[r],n[r]),a=20,s=Math.min(Math.max(o+a,e[r]),i-a);return C0(t,r,s)}function Ck(e){return e==="x"?"y":"x"}function mE(e,t,n){var r,i;return e.original?e.original:(r=Ze(t),i=Ck(n),C0(e,i,r[i]))}function Rk(e,t,n,r,i,o){var a=e.get("connectionDocking",!1);this.start=function(d,g,y){var v,x=n.getGraphics(g),C=y-1,P=y,R=g.waypoints,E=R[C],b=R[P],D=Ay(n,R,d),B,z,L;B=xo(E,b),B&&(z=B==="v"?"x":"y",C===0&&(E=mE(E,g.source,z)),P===R.length-1&&(b=mE(b,g.target,z)),D?L=D.point:L={x:(E.x+b.x)/2,y:(E.y+b.y)/2},v={connection:g,segmentStartIndex:C,segmentEndIndex:P,segmentStart:E,segmentEnd:b,axis:z,dragPosition:L},r.init(d,L,"connectionSegment.move",{cursor:z==="x"?"resize-ew":"resize-ns",data:{connection:g,connectionGfx:x,context:v}}))};function s(d,g){if(!a)return g;var y=d.waypoints,v;return d.waypoints=g,v=a.getCroppedWaypoints(d),d.waypoints=y,v}function l(d){i.update("connection",d.connection,d.connectionGfx)}function u(d,g,y){var v=d.newWaypoints,x=d.segmentStartIndex+g,C=v[x],P=d.segmentEndIndex+g,R=v[P],E=Ck(d.axis),b=nI(y,C,R,E);Vn(d.draggerGfx,b.x,b.y)}function f(d,g){var y=0,v=d.filter(function(x,C){return Yv(d[C-1],d[C+1],x)?(y=C<=g?y-1:y,!1):!0});return{waypoints:v,segmentOffset:y}}t.on("connectionSegment.move.start",function(d){var g=d.context,y=d.connection,v=n.getLayer("overlays");g.originalWaypoints=y.waypoints.slice(),g.draggerGfx=Ek(v,g.segmentStart,g.segmentEnd),St(g.draggerGfx).add("djs-dragging"),n.addMarker(y,dE)}),t.on("connectionSegment.move.move",function(d){var g=d.context,y=g.connection,v=g.segmentStartIndex,x=g.segmentEndIndex,C=g.segmentStart,P=g.segmentEnd,R=g.axis,E=g.originalWaypoints.slice(),b=hE(C,R,d["d"+R]),D=hE(P,R,d["d"+R]),B=E.length,z=0;E[v]=b,E[x]=D;var L,X;v<2&&(L=tr(y.source,b),v===1?L==="intersect"&&(E.shift(),E[0]=b,z--):L!=="intersect"&&(E.unshift(C),z++)),x>B-3&&(X=tr(y.target,D),x===B-2?X==="intersect"&&(E.pop(),E[E.length-1]=D):X!=="intersect"&&E.push(P)),g.newWaypoints=y.waypoints=s(y,E),u(g,z,d),g.newSegmentStartIndex=v+z,l(d)}),t.on("connectionSegment.move.hover",function(d){d.context.hover=d.hover,n.addMarker(d.hover,fE)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(d){var g=d.context.hover;g&&n.removeMarker(g,fE)}),t.on("connectionSegment.move.cleanup",function(d){var g=d.context,y=g.connection;g.draggerGfx&&Sn(g.draggerGfx),n.removeMarker(y,dE)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(d){var g=d.context,y=g.connection;y.waypoints=g.originalWaypoints,l(d)}),t.on("connectionSegment.move.end",function(d){var g=d.context,y=g.connection,v=g.newWaypoints,x=g.newSegmentStartIndex;v=v.map(function(D){return{original:D.original,x:Math.round(D.x),y:Math.round(D.y)}});var C=f(v,x),P=C.waypoints,R=s(y,P),E=C.segmentOffset,b={segmentMove:{segmentStartIndex:g.segmentStartIndex,newSegmentStartIndex:x+E}};o.updateWaypoints(y,R,b)})}Rk.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var rI=Math.abs,gE=Math.round;function iI(e,t,n){n=n===void 0?10:n;var r,i;for(r=0;r<t.length;r++)if(i=t[r],rI(i-e)<=n)return i}function kk(e){return{x:e.x,y:e.y}}function Pk(e){return{x:e.x+e.width,y:e.y+e.height}}function gi(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:gE(e.x+e.width/2),y:gE(e.y+e.height/2)}}function Ml(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function hn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,i=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,r=n-i,e[t]+=r,e["d"+t]+=r),i}function Tk(e){return e.children||[]}var oI=Math.abs,yE=Math.round,rg=10;function Ak(e){function t(o,a){if(at(o)){for(var s=o.length;s--;)if(oI(o[s]-a)<=rg)return o[s]}else{o=+o;var l=a%o;if(l<rg)return a-l;if(l>o-rg)return a-l+o}return a}function n(o,a){if(o.waypoints)return XL(a,o);if(o.width)return{x:yE(o.width/2+o.x),y:yE(o.height/2+o.y)}}function r(o){var a=o.context,s=a.snapPoints,l=a.connection,u=l.waypoints,f=a.segmentStart,d=a.segmentStartIndex,g=a.segmentEnd,y=a.segmentEndIndex,v=a.axis;if(s)return s;var x=[u[d-1],f,g,u[y+1]];return d<2&&x.unshift(n(l.source,o)),y>u.length-3&&x.unshift(n(l.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},W(x,function(C){C&&(C=C.original||C,v==="y"&&s.horizontal.push(C.y),v==="x"&&s.vertical.push(C.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=r(o),s=o.x,l=o.y,u,f;if(a){u=t(a.vertical,s),f=t(a.horizontal,l);var d=s-u,g=l-f;q(o,{dx:o.dx-d,dy:o.dy-g,x:u,y:f}),(d||a.vertical.indexOf(s)!==-1)&&hn(o,"x",u),(g||a.horizontal.indexOf(l)!==-1)&&hn(o,"y",f)}});function i(o){var a=o.snapPoints,s=o.connection.waypoints,l=o.bendpointIndex;if(a)return a;var u=[s[l-1],s[l+1]];return o.snapPoints=a={horizontal:[],vertical:[]},W(u,function(f){f&&(f=f.original||f,a.horizontal.push(f.y),a.vertical.push(f.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,l=s&&n(s,o);!jt(s)||!l||!l.x||!l.y||(hn(o,"x",l.x),hn(o,"y",l.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=i(a),l=a.hover,u=l&&n(l,o),f=o.x,d=o.y,g,y;if(s){g=t(u?s.vertical.concat([u.x]):s.vertical,f),y=t(u?s.horizontal.concat([u.y]):s.horizontal,d);var v=f-g,x=d-y;q(o,{dx:o.dx-v,dy:o.dy-x,x:o.x-v,y:o.y-x}),(v||s.vertical.indexOf(f)!==-1)&&hn(o,"x",g),(x||s.horizontal.indexOf(d)!==-1)&&hn(o,"y",y)}})}Ak.$inject=["eventBus"];const aI={__depends__:[Lo,oo],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",bk],bendpointMove:["type",S0],bendpointMovePreview:["type",Sk],connectionSegmentMove:["type",Rk],bendpointSnapping:["type",Ak]};function Mk(e,t,n,r){function i(a,s){return r.allowed("connection.create",{source:a,target:s})}function o(a,s){return i(s,a)}e.on("connect.hover",function(a){var s=a.context,l=s.start,u=a.hover,f;if(s.hover=u,f=s.canExecute=i(l,u),!pu(f)){if(f!==!1){s.source=l,s.target=u;return}f=s.canExecute=o(l,u),!pu(f)&&f!==!1&&(s.source=u,s.target=l)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,l=s.canExecute,u=s.connectionStart,f={x:a.x,y:a.y},d=s.source,g=s.target;if(!l)return!1;var y=null,v={connectionStart:Dy(s)?f:u,connectionEnd:Dy(s)?u:f};jn(l)&&(y=l),s.connection=n.connect(d,g,y,v)}),this.start=function(a,s,l,u){jn(l)||(u=l,l=Ze(s)),t.init(a,"connect",{autoActivate:u,data:{shape:s,context:{start:s,connectionStart:l}}})}}Mk.$inject=["eventBus","dragging","modeling","rules"];function Dy(e){var t=e.hover,n=e.source,r=e.target;return t&&n&&t===n&&n!==r}var sI=1100,lI=900,vE="connect-ok",xE="connect-not-ok";function Nk(e,t,n){var r=e.get("connectionPreview",!1);r&&t.on("connect.move",function(i){var o=i.context,a=o.canExecute,s=o.hover,l=o.source,u=o.start,f=o.startPosition,d=o.target,g=o.connectionStart||f,y=o.connectionEnd||{x:i.x,y:i.y},v=g,x=y;Dy(o)&&(v=y,x=g),r.drawPreview(o,a,{source:l||u,target:d||s,connectionStart:v,connectionEnd:x})}),t.on("connect.hover",lI,function(i){var o=i.context,a=i.hover,s=o.canExecute;s!==null&&n.addMarker(a,s?vE:xE)}),t.on(["connect.out","connect.cleanup"],sI,function(i){var o=i.hover;o&&(n.removeMarker(o,vE),n.removeMarker(o,xE))}),r&&t.on("connect.cleanup",function(i){r.cleanUp(i.context)})}Nk.$inject=["injector","eventBus","canvas"];const R0={__depends__:[ro,oo,Lo],__init__:["connectPreview"],connect:["type",Mk],connectPreview:["type",Nk]};var cI="djs-dragger";function Io(e,t,n,r){this._canvas=t,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Io.$inject=["injector","canvas","graphicsFactory","elementFactory"];Io.prototype.drawPreview=function(e,t,n){n=n||{};var r=e.connectionPreviewGfx,i=e.getConnection,o=n.source,a=n.target,s=n.waypoints,l=n.connectionStart,u=n.connectionEnd,f=n.noLayout,d=n.noCropping,g=n.noNoop,y,v=this;if(r||(r=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Qd(r),i||(i=e.getConnection=uI(function(x,C,P){return v.getConnection(x,C,P)})),t&&(y=i(t,o,a)),!y){!g&&this.drawNoopPreview(r,n);return}y.waypoints=s||[],this._layouter&&!f&&(y.waypoints=this._layouter.layoutConnection(y,{source:o,target:a,connectionStart:l,connectionEnd:u,waypoints:n.waypoints||y.waypoints})),(!y.waypoints||!y.waypoints.length)&&(y.waypoints=[o?Ze(o):l,a?Ze(a):u]),this._connectionDocking&&(o||a)&&!d&&(y.waypoints=this._connectionDocking.getCroppedWaypoints(y,o,a)),this._graphicsFactory.drawConnection(r,y,{stroke:"var(--element-dragger-color)"})};Io.prototype.drawNoopPreview=function(e,t){var n=t.source,r=t.target,i=t.connectionStart||Ze(n),o=t.connectionEnd||Ze(r),a=this.cropWaypoints(i,o,n,r),s=this.createNoopConnection(a[0],a[1]);et(e,s)};Io.prototype.cropWaypoints=function(e,t,n,r){var i=this._graphicsFactory,o=n&&i.getShapePath(n),a=r&&i.getShapePath(r),s=i.getConnectionPath({waypoints:[e,t]});return e=n&&gy(o,s,!0)||e,t=r&&gy(a,s,!1)||t,[e,t]};Io.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Sn(e.connectionPreviewGfx)};Io.prototype.getConnection=function(e){var t=pI(e);return this._elementFactory.createConnection(t)};Io.prototype.createConnectionPreviewGfx=function(){var e=ze("g");return be(e,{pointerEvents:"none"}),St(e).add(cI),et(this._canvas.getActiveLayer(),e),e};Io.prototype.createNoopConnection=function(e,t){return Zd([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function uI(e){var t={};return function(n){var r=JSON.stringify(n),i=t[r];return i||(i=t[r]=e.apply(null,arguments)),i}}function pI(e){return jn(e)?e:{}}const fI={__init__:["connectionPreview"],connectionPreview:["type",Io]},dI=new Ou("ps");var hI=["marker-start","marker-mid","marker-end"],mI=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Ma(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r}Ma.$inject=["elementRegistry","eventBus","canvas","styles"];Ma.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};Ma.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Ma.prototype.addDragger=function(e,t,n,r="djs-dragger"){n=n||this.getGfx(e);var i=PC(n),o=n.getBoundingClientRect();return this._cloneMarkers(fs(i),r),be(i,this._styles.cls(r,[],{x:o.top,y:o.left})),et(t,i),be(i,"data-preview-support-element-id",e.id),i};Ma.prototype.addFrame=function(e,t){var n=ze("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return et(t,n),be(n,"data-preview-support-element-id",e.id),n};Ma.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var r=this;if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)r._cloneMarkers(e.childNodes[i],t,n);xI(e)&&hI.forEach(function(o){if(be(e,o)){var a=gI(e,o,r._canvas.getContainer());a&&r._cloneMarker(n,e,a,o,t)}})};Ma.prototype._cloneMarker=function(e,t,n,r,i="djs-dragger"){var o=[n.id,i,dI.next()].join("-"),a=It("marker#"+n.id,e);e=e||this._canvas._svg;var s=a||PC(n);s.id=o,St(s).add(i);var l=It(":scope > defs",e);l||(l=ze("defs"),et(e,l)),et(l,s);var u=vI(s.id);be(t,r,u)};function gI(e,t,n){var r=yI(be(e,t));return It("marker#"+r,n||document)}function yI(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function vI(e){return"url(#"+e+")"}function xI(e){return mI.indexOf(e.nodeName)!==-1}const ql={__init__:["previewSupport"],previewSupport:["type",Ma]},ef="complex-preview";class Dk{constructor(t,n,r){this._canvas=t,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:r=[],removed:i=[],resized:o=[]}=t,a=this._canvas.getLayer(ef);n.filter(s=>!_I(s)).forEach(s=>{let l;jt(s)?(l=this._graphicsFactory._createContainer("connection",ze("g")),this._graphicsFactory.drawConnection(fs(l),s)):(l=this._graphicsFactory._createContainer("shape",ze("g")),this._graphicsFactory.drawShape(fs(l),s),Vn(l,s.x,s.y)),this._previewSupport.addDragger(s,a,l)}),r.forEach(({element:s,delta:l})=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"]);const u=this._previewSupport.addDragger(s,a);jt(s)?Vn(u,l.x,l.y):Vn(u,s.x+l.x,s.y+l.y)}),i.forEach(s=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"])}),o.forEach(({shape:s,bounds:l})=>{this._canvas.addMarker(s,"djs-hidden"),this._markers.push([s,"djs-hidden"]),this._previewSupport.addDragger(s,a,void 0,"djs-dragging");const u=this._graphicsFactory._createContainer("shape",ze("g"));this._graphicsFactory.drawShape(fs(u),s,{width:l.width,height:l.height}),Vn(u,l.x,l.y),this._previewSupport.addDragger(s,a,u)})}cleanUp(){Qd(this._canvas.getLayer(ef)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(ef)}hide(){this._canvas.hideLayer(ef)}}Dk.$inject=["canvas","graphicsFactory","previewSupport"];function _I(e){return e.hidden}const wI={__depends__:[ql],__init__:["complexPreview"],complexPreview:["type",Dk]};var k0=["top","bottom","left","right"],tf=10;function P0(e,t){ue.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var o=i.context,a=o.connection,s=a.source,l=a.target,u=o.hints||{};u.createElementsBehavior!==!1&&(n(s),n(l))}),this.postExecuted(["label.create"],function(i){var o=i.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(i){var o=i.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(l){n(l)})});function n(i){if(oh(i)){var o=SI(i);o&&r(i,o)}}function r(i,o){var a=Ze(i),s=i.label,l=Ze(s);if(s.parent){var u=Ue(i),f;switch(o){case"top":f={x:a.x,y:u.top-tf-s.height/2};break;case"left":f={x:u.left-tf-s.width/2,y:a.y};break;case"bottom":f={x:a.x,y:u.bottom+tf+s.height/2};break;case"right":f={x:u.right+tf+s.width/2,y:a.y};break}var d=Ii(f,l);t.moveShape(s,d)}}}De(P0,ue);P0.$inject=["eventBus","modeling"];function EI(e){var t=e.host,n=Ze(e),r=tr(n,t),i;r.indexOf("-")>=0?i=r.split("-"):i=[r];var o=k0.filter(function(a){return i.indexOf(a)===-1});return o}function bI(e){var t=Ze(e),n=[].concat(e.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),e.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return Ok(t,r)});return n}function SI(e){var t=Ze(e.label),n=Ze(e),r=Ok(n,t);if(CI(r)){var i=bI(e);if(e.host){var o=EI(e);i=i.concat(o)}var a=k0.filter(function(s){return i.indexOf(s)===-1});if(a.indexOf(r)===-1)return a[0]}}function Ok(e,t){return tr(t,e,5)}function CI(e){return k0.indexOf(e)!==-1}function T0(e){ue.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,r=t.shape;t.position||(A(r,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-r.height/2}:t.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}De(T0,ue);T0.$inject=["eventBus"];function A0(e,t){e.invoke(ue,this),this.postExecute("shape.move",function(n){var r=n.newParent,i=n.shape,o=yt(i.incoming.concat(i.outgoing),function(a){return A(a,"bpmn:Association")});W(o,function(a){t.moveConnection(a,{x:0,y:0},r)})},!0)}De(A0,ue);A0.$inject=["injector","modeling"];var _E=500;function wh(e,t){t.invoke(ue,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",_E,function(r){var i=r.elements;i=i.filter(function(o){var a=o.host;return wE(o,a)}),i.length===1&&i.map(function(o){return i.indexOf(o)}).forEach(function(o){var a=i[o];r.elements[o]=n._replaceShape(i[o],a)})},!0),this.preExecute("elements.move",_E,function(r){var i=r.shapes,o=r.newHost;if(i.length===1){var a=i[0];wE(a,o)&&(r.shapes=[n._replaceShape(a,o)])}},!0)}wh.$inject=["bpmnReplace","injector"];De(wh,ue);wh.prototype._replaceShape=function(e,t){var n=RI(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})};function RI(e){var t=pe(e),n=t.eventDefinitions;return n&&n[0]}function wE(e,t){return!Rt(e)&&mt(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function M0(e,t){ue.call(this,e);function n(r){return yt(r.attachers,function(i){return A(i,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var i=r.context.source,o=r.context.target,a=n(o);A(i,"bpmn:EventBasedGateway")&&A(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(r){var i=r.context.oldSource,o=r.context.newSource;A(i,"bpmn:Gateway")&&A(o,"bpmn:EventBasedGateway")&&W(o.outgoing,function(a){var s=a.target,l=n(s);A(s,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)})})}M0.$inject=["eventBus","modeling"];De(M0,ue);function N0(e,t,n){ue.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",i,!0),this.postExecuted("connection.delete",r,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function r(C){const P=C.source,R=C.target;Ys(P)&&Ec(R)&&f(R)}function i(C){const P=C.connection,R=C.source,E=C.target;Ys(R)&&nf(E)&&(u(E),g(R,[P]))}function o(C){const P=C.newTarget,R=C.oldSource,E=C.oldTarget;if(E!==P){const b=R;Ec(E)&&f(E),Ys(b)&&nf(P)&&u(P)}}function a(C){const{element:P}=C;Ec(P)?(d(P),y(P)):nf(P)&&v(P)}function s(C){const{newData:P,oldShape:R}=C;if(Ys(C.oldShape)&&P.eventDefinitionType!=="bpmn:CompensateEventDefinition"||P.type!=="bpmn:BoundaryEvent"){const E=R.outgoing.find(({target:b})=>Ec(b));E&&E.target&&(C._connectionTarget=E.target)}else if(!Ys(C.oldShape)&&P.eventDefinitionType==="bpmn:CompensateEventDefinition"&&P.type==="bpmn:BoundaryEvent"){const E=R.outgoing.find(({target:b})=>nf(b));E&&E.target&&(C._connectionTarget=E.target),x(R)}}function l(C){const{_connectionTarget:P,newShape:R}=C;P&&t.connect(R,P)}function u(C){t.updateProperties(C,{isForCompensation:!0})}function f(C){t.updateProperties(C,{isForCompensation:void 0})}function d(C){for(const P of C.incoming)n.canConnect(P.source,C)||t.removeConnection(P);for(const P of C.outgoing)n.canConnect(C,P.target)||t.removeConnection(P)}function g(C,P){C.outgoing.filter(b=>A(b,"bpmn:Association")).filter(b=>Ec(b.target)&&!P.includes(b)).forEach(b=>t.removeConnection(b))}function y(C){const P=C.attachers.slice();P.length&&t.removeElements(P)}function v(C){const P=C.incoming.filter(R=>Ys(R.source));t.removeElements(P)}function x(C){const P=C.outgoing.filter(R=>A(R,"bpmn:SequenceFlow"));t.removeElements(P)}}De(N0,ue);N0.$inject=["eventBus","modeling","bpmnRules"];function Ec(e){const t=pe(e);return t&&t.get("isForCompensation")}function Ys(e){return e&&A(e,"bpmn:BoundaryEvent")&&zl(e,"bpmn:CompensateEventDefinition")}function nf(e){return e&&A(e,"bpmn:Activity")&&!Jn(e)}function D0(e){e.invoke(ue,this),this.preExecute("shape.create",1500,function(t){var n=t.context,r=n.parent,i=n.shape;A(r,"bpmn:Lane")&&!A(i,"bpmn:Lane")&&(n.parent=Al(r,"bpmn:Participant"))})}D0.$inject=["injector"];De(D0,ue);function O0(e,t){ue.call(this,e),this.preExecute("shape.create",function(n){var r=n.context,i=r.shape;if(A(i,"bpmn:DataObjectReference")&&i.type!=="label"){var o=t.create("bpmn:DataObject");i.businessObject.dataObjectRef=o}})}O0.$inject=["eventBus","bpmnFactory"];De(O0,ue);var Oy=20,Ly=20,Lk=30,rf=2e3;function L0(e,t,n){ue.call(this,t),t.on(["create.start","shape.move.start"],rf,function(i){var o=i.context,a=o.shape,s=e.getRootElement();if(!(!A(a,"bpmn:Participant")||!A(s,"bpmn:Process")||!s.children.length)){var l=s.children.filter(function(d){return!A(d,"bpmn:Group")&&!Rt(d)&&!jt(d)});if(l.length){var u=Mn(l),f=kI(a,u);q(a,f),o.createConstraints=PI(a,u)}}}),t.on("create.start",rf,function(i){var o=i.context,a=o.shape,s=e.getRootElement(),l=e.getGraphics(s);function u(f){f.element=s,f.gfx=l}A(a,"bpmn:Participant")&&A(s,"bpmn:Process")&&(t.on("element.hover",rf,u),t.once("create.cleanup",function(){t.off("element.hover",u)}))});function r(){var i=e.getRootElement();return A(i,"bpmn:Collaboration")?i:n.makeCollaboration()}this.preExecute("elements.create",rf,function(i){var o=i.elements,a=i.parent,s=TI(o),l;s&&A(a,"bpmn:Process")&&(i.parent=r(),l=i.hints=i.hints||{},l.participant=s,l.process=a,l.processRef=pe(s).get("processRef"))},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;A(a,"bpmn:Participant")&&A(o,"bpmn:Process")&&(i.parent=r(),i.process=o,i.processRef=pe(a).get("processRef"))},!0),this.execute("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.shape,l=o.participant;a&&(!l||s===l)&&pe(s).set("processRef",pe(a))},!0),this.revert("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.processRef||o.processRef,l=i.shape,u=o.participant;a&&(!u||l===u)&&pe(l).set("processRef",s)},!0),this.postExecute("shape.create",function(i){var o=i.hints||{},a=i.process||i.hints.process,s=i.shape,l=o.participant;if(a){var u=a.children.slice();l?s===l&&n.moveElements(u,{x:0,y:0},l):n.moveElements(u,{x:0,y:0},s)}},!0)}L0.$inject=["canvas","eventBus","modeling"];De(L0,ue);function kI(e,t){t={width:t.width+Oy*2+Lk,height:t.height+Ly*2};var n=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-n/2,y:-r/2,width:n,height:r}}function PI(e,t){return t=Ue(t),{bottom:t.top+e.height/2-Ly,left:t.right-e.width/2+Oy,top:t.bottom-e.height/2+Ly,right:t.left+e.width/2-Oy-Lk}}function TI(e){return Mt(e,function(t){return A(t,"bpmn:Participant")})}var EE="__targetRef_placeholder";function I0(e,t){ue.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],bE(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],bE(o));function n(a,s,l){var u=a.get("dataInputAssociations");return Mt(u,function(f){return f!==l&&f.targetRef===s})}function r(a,s){var l=a.get("properties"),u=Mt(l,function(f){return f.name===EE});return!u&&s&&(u=t.create("bpmn:Property",{name:EE}),Rn(l,u)),u}function i(a,s){var l=r(a);l&&(n(a,l,s)||mn(a.get("properties"),l))}function o(a){var s=a.context,l=s.connection,u=l.businessObject,f=l.target,d=f&&f.businessObject,g=s.newTarget,y=g&&g.businessObject,v=s.oldTarget||s.target,x=v&&v.businessObject,C=l.businessObject,P;x&&x!==d&&i(x,u),y&&y!==d&&i(y,u),d?(P=r(d,!0),C.targetRef=P):C.targetRef=null}}I0.$inject=["eventBus","bpmnFactory"];De(I0,ue);function bE(e){return function(t){var n=t.context,r=n.connection;if(A(r,"bpmn:DataInputAssociation"))return e(t)}}function Eh(e){this._bpmnUpdater=e}Eh.$inject=["bpmnUpdater"];Eh.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.newSemanticParent,i=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};Eh.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.oldSemanticParent,i=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};function B0(e,t,n,r){ue.call(this,r),t.registerHandler("dataStore.updateContainment",Eh);function i(){return n.filter(function(s){return A(s,"bpmn:Participant")&&pe(s).processRef})[0]}function o(s){return s.children.filter(function(l){return A(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function a(s,l){var u=s.businessObject||s;if(l=l||i(),l){var f=l.businessObject||l;t.execute("dataStore.updateContainment",{dataStoreBo:u,dataStoreDi:Ct(s),newSemanticParent:f.processRef||f,newDiParent:Ct(l)})}}this.preExecute("shape.create",function(s){var l=s.context,u=l.shape;A(u,"bpmn:DataStoreReference")&&u.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var l=s.context,u=l.shapes,f=u.filter(function(d){return A(d,"bpmn:DataStoreReference")});f.length&&(l.hints||(l.hints={}),l.hints.autoResize=u.filter(function(d){return!A(d,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var l=s.context,u=l.shape,f=u.parent;A(u,"bpmn:DataStoreReference")&&u.type!=="label"&&A(f,"bpmn:Collaboration")&&a(u)}),this.postExecute("shape.move",function(s){var l=s.context,u=l.shape,f=l.oldParent,d=u.parent;if(!A(f,"bpmn:Collaboration")&&A(u,"bpmn:DataStoreReference")&&u.type!=="label"&&A(d,"bpmn:Collaboration")){var g=A(f,"bpmn:Participant")?f:MI(f,"bpmn:Participant");a(u,g)}}),this.postExecute("shape.delete",function(s){var l=s.context,u=l.shape,f=e.getRootElement();mt(u,["bpmn:Participant","bpmn:SubProcess"])&&A(f,"bpmn:Collaboration")&&o(f).filter(function(d){return AI(d,u)}).forEach(function(d){a(d)})}),this.postExecute("canvas.updateRoot",function(s){var l=s.context,u=l.oldRoot,f=l.newRoot,d=o(u);d.forEach(function(g){A(f,"bpmn:Process")&&a(g,f)})})}B0.$inject=["canvas","commandStack","elementRegistry","eventBus"];De(B0,ue);function AI(e,t){for(var n=e.businessObject||e,r=t.businessObject||t;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function MI(e,t){for(;e.parent;){if(A(e.parent,t))return e.parent;e=e.parent}}var Cd=Math.max,Rd=Math.min,NI=20;function Ik(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function DI(e,t,n){var r=n.x,i=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+i,o.height=e.height-i):t.indexOf("s")!==-1&&(o.height=e.height+i),t.indexOf("e")!==-1?o.width=e.width+r:t.indexOf("w")!==-1&&(o.x=e.x+r,o.width=e.width-r),o}function OI(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function of(e,t,n){var r=t[e],i=n.min&&n.min[e],o=n.max&&n.max[e];return Qe(i)&&(r=(/top|left/.test(e)?Rd:Cd)(r,i)),Qe(o)&&(r=(/top|left/.test(e)?Cd:Rd)(r,o)),r}function LI(e,t){if(!t)return e;var n=Ue(e);return eh({top:of("top",n,t),right:of("right",n,t),bottom:of("bottom",n,t),left:of("left",n,t)})}function II(e,t,n,r){var i=Ue(t),o={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},a=r?Ue(r):o,s={top:Rd(o.top,a.top),left:Rd(o.left,a.left),bottom:Cd(o.bottom,a.bottom),right:Cd(o.right,a.right)};return eh(s)}function bc(e,t){return typeof e<"u"?e:NI}function BI(e,t){var n,r,i,o;return typeof t=="object"?(n=bc(t.left),r=bc(t.right),i=bc(t.top),o=bc(t.bottom)):n=r=i=o=bc(t),{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+o}}function jI(e){return!(e.waypoints||e.type==="label")}function Bk(e,t){var n;if(e.length===void 0?n=yt(e.children,jI):n=e,n.length)return BI(Mn(n),t)}var Yo=Math.abs;function $I(e,t){return Ik(Ue(t),Ue(e))}var FI=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],pi=30;function bh(e,t){return t=t||[],e.children.filter(function(n){A(n,"bpmn:Lane")&&(bh(n,t),t.push(n))}),t}function Na(e){return e.children.filter(function(t){return A(t,"bpmn:Lane")})}function hi(e){return Al(e,FI)||e}function zI(e,t){var n=hi(e),r=A(n,"bpmn:Process")?[]:[n],i=bh(n,r),o=Ue(e),a=Ue(t),s=$I(e,t),l=[],u=Nn(e);return i.forEach(function(f){if(f!==e){var d=u?0:s.top,g=u?s.right:0,y=u?0:s.bottom,v=u?s.left:0,x=Ue(f);s.top&&(Yo(x.bottom-o.top)<10&&(y=a.top-x.bottom),Yo(x.top-o.top)<5&&(d=a.top-x.top)),s.left&&(Yo(x.right-o.left)<10&&(g=a.left-x.right),Yo(x.left-o.left)<5&&(v=a.left-x.left)),s.bottom&&(Yo(x.top-o.bottom)<10&&(d=a.bottom-x.top),Yo(x.bottom-o.bottom)<5&&(y=a.bottom-x.bottom)),s.right&&(Yo(x.left-o.right)<10&&(v=a.right-x.left),Yo(x.right-o.right)<5&&(g=a.right-x.right)),(d||g||y||v)&&l.push({shape:f,newBounds:OI(f,{top:d,right:g,bottom:y,left:v})})}}),l}var HI=500;function j0(e,t){ue.call(this,e);function n(r,i){var o=Nn(r),a=Na(i),s=[],l=[],u=[],f=[];if(Rs(a,function(C){return o?C.y>r.y?l.push(C):s.push(C):C.x>r.x?f.push(C):u.push(C),C.children}),!!a.length){var d;o?l.length&&s.length?d=r.height/2:d=r.height:f.length&&u.length?d=r.width/2:d=r.width;var g,y,v,x;s.length&&(g=t.calculateAdjustments(s,"y",d,r.y-10),t.makeSpace(g.movingShapes,g.resizingShapes,{x:0,y:d},"s")),l.length&&(y=t.calculateAdjustments(l,"y",-d,r.y+r.height+10),t.makeSpace(y.movingShapes,y.resizingShapes,{x:0,y:-d},"n")),u.length&&(v=t.calculateAdjustments(u,"x",d,r.x-10),t.makeSpace(v.movingShapes,v.resizingShapes,{x:d,y:0},"e")),f.length&&(x=t.calculateAdjustments(f,"x",-d,r.x+r.width+10),t.makeSpace(x.movingShapes,x.resizingShapes,{x:-d,y:0},"w"))}}this.postExecuted("shape.delete",HI,function(r){var i=r.context,o=i.hints,a=i.shape,s=i.oldParent;A(a,"bpmn:Lane")&&(o&&o.nested||n(a,s))})}j0.$inject=["eventBus","spaceTool"];De(j0,ue);var SE=500;function Sh(e,t){t.invoke(ue,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",SE,function(r){var i=r.elements;i.filter(function(o){var a=o.host;return CE(o,a)}).map(function(o){return i.indexOf(o)}).forEach(function(o){r.elements[o]=n._replaceShape(i[o])})},!0),this.preExecute("elements.move",SE,function(r){var i=r.shapes,o=r.newHost;i.forEach(function(a,s){var l=a.host;CE(a,WI(i,l)?l:o)&&(i[s]=n._replaceShape(a))})},!0)}Sh.$inject=["bpmnReplace","injector"];De(Sh,ue);Sh.prototype._replaceShape=function(e){var t=VI(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function VI(e){var t=pe(e),n=t.eventDefinitions;return n&&n[0]}function CE(e,t){return!Rt(e)&&A(e,"bpmn:BoundaryEvent")&&!t}function WI(e,t){return e.indexOf(t)!==-1}function $0(e,t,n){ue.call(this,e);function r(i,o,a){var s=o.waypoints,l,u,f,d,g,y,v,x=i.outgoing.slice(),C=i.incoming.slice(),P;Qe(a.width)?P=Ze(a):P=a;var R=Ty(s,P);if(R){if(l=s.slice(0,R.index),u=s.slice(R.index+(R.bendpoint?1:0)),!l.length||!u.length)return;f=R.bendpoint?s[R.index]:P,(l.length===1||!RE(i,l[l.length-1]))&&l.push(kE(f)),(u.length===1||!RE(i,u[0]))&&u.unshift(kE(f))}d=o.source,g=o.target,t.canConnect(d,i,o)&&(n.reconnectEnd(o,i,l||P),y=o),t.canConnect(i,g,o)&&(y?v=n.connect(i,g,{type:o.type,waypoints:u}):(n.reconnectStart(o,i,u||P),v=o));var E=[].concat(y&&yt(C,function(b){return b.source===y.source})||[],v&&yt(x,function(b){return b.target===v.target})||[]);E.length&&n.removeElements(E)}this.preExecute("elements.move",function(i){var o=i.newParent,a=i.shapes,s=i.delta,l=a[0];if(!(!l||!o)){o&&o.waypoints&&(i.newParent=o=o.parent);var u=Ze(l),f={x:u.x+s.x,y:u.y+s.y},d=Mt(o.children,function(g){var y=t.canInsert(a,g);return y&&Ty(g.waypoints,f)});d&&(i.targetFlow=d,i.position=f)}},!0),this.postExecuted("elements.move",function(i){var o=i.shapes,a=i.targetFlow,s=i.position;a&&r(o[0],a,s)},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;t.canInsert(a,o)&&(i.targetFlow=o,i.parent=o.parent)},!0),this.postExecuted("shape.create",function(i){var o=i.shape,a=i.targetFlow,s=i.position;a&&r(o,a,s)},!0)}De($0,ue);$0.$inject=["eventBus","bpmnRules","modeling"];function RE(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function kE(e){return q({},e)}function F0(e,t){ue.call(this,e),this.preExecuted("connection.create",function(n){var r=n.context,i=r.connection,o=r.source,a=r.target,s=r.hints;if(!(s&&s.createElementsBehavior===!1)&&qs(i)){var l=[];A(o,"bpmn:EventBasedGateway")?l=a.incoming.filter(u=>u!==i&&qs(u)):l=a.incoming.filter(u=>u!==i&&qs(u)&&A(u.source,"bpmn:EventBasedGateway")),l.forEach(function(u){t.removeConnection(u)})}}),this.preExecuted("shape.replace",function(n){var r=n.context,i=r.newShape;if(A(i,"bpmn:EventBasedGateway")){var o=i.outgoing.filter(qs).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(qs).forEach(function(s){const l=a.incoming.filter(qs).filter(function(u){return u.source===i});(s.source!==i||l.length>1)&&t.removeConnection(s)})})}})}F0.$inject=["eventBus","modeling"];De(F0,ue);function qs(e){return A(e,"bpmn:SequenceFlow")}var af=1500,PE=2e3;function jk(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],af,function(r){var i=r.context,o=i.shape||r.shape,a=r.hover;A(a,"bpmn:Lane")&&!mt(o,["bpmn:Lane","bpmn:Participant"])&&(r.hover=hi(a),r.hoverGfx=e.getGraphics(r.hover));var s=n.getRootElement();a!==s&&(o.labelTarget||mt(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(r.hover=s,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],af,function(r){var i=r.hover;A(i,"bpmn:Lane")&&(r.hover=hi(i)||i,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["bendpoint.move.hover"],af,function(r){var i=r.context,o=r.hover,a=i.type;A(o,"bpmn:Lane")&&/reconnect/.test(a)&&(r.hover=hi(o)||o,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.start"],af,function(r){var i=r.context,o=i.start;A(o,"bpmn:Lane")&&(i.start=hi(o)||o)}),t.on("shape.move.start",PE,function(r){var i=r.shape;A(i,"bpmn:Lane")&&(r.shape=hi(i)||i)}),t.on("spaceTool.move",PE,function(r){var i=r.hover;i&&A(i,"bpmn:Lane")&&(r.hover=hi(i))})}jk.$inject=["elementRegistry","eventBus","canvas"];function UI(e){return e.create("bpmn:Category")}function GI(e){return e.create("bpmn:CategoryValue")}function KI(e,t,n){return Rn(t.get("categoryValue"),e),e.$parent=t,Rn(n.get("rootElements"),t),t.$parent=n,e}function YI(e){var t=e.$parent;return t&&(mn(t.get("categoryValue"),e),e.$parent=null),e}function qI(e){var t=e.$parent;return t&&(mn(t.get("rootElements"),e),e.$parent=null),e}var TE=770;function z0(e,t,n,r,i,o){i.invoke(ue,this);function a(){return n.filter(function(v){return A(v,"bpmn:Group")})}function s(v,x){return v.some(function(C){var P=pe(C),R=P.categoryValueRef&&P.categoryValueRef.$parent;return R===x})}function l(v,x){return v.some(function(C){var P=pe(C);return P.categoryValueRef===x})}function u(v,x,C){var P=a().filter(function(R){return R.businessObject!==C});x&&!s(P,x)&&qI(x),v&&!l(P,v)&&YI(v)}function f(v,x){return KI(v,x,t.getDefinitions())}function d(v,x){var C=pe(v),P=C.categoryValueRef;P||(P=C.categoryValueRef=x.categoryValue=x.categoryValue||GI(e));var R=P.$parent;R||(R=P.$parent=x.category=x.category||UI(e)),f(P,R,t.getDefinitions())}function g(v,x){var C=x.category,P=x.categoryValue,R=pe(v);P?(R.categoryValueRef=null,u(P,C,R)):u(null,R.categoryValueRef.$parent,R)}this.execute("label.create",function(v){var x=v.context,C=x.labelTarget;A(C,"bpmn:Group")&&d(C,x)}),this.revert("label.create",function(v){var x=v.context,C=x.labelTarget;A(C,"bpmn:Group")&&g(C,x)}),this.execute("shape.delete",function(v){var x=v.context,C=x.shape,P=pe(C);if(!(!A(C,"bpmn:Group")||C.labelTarget)){var R=x.categoryValue=P.categoryValueRef,E;R&&(E=x.category=R.$parent,u(R,E,P),P.categoryValueRef=null)}}),this.reverted("shape.delete",function(v){var x=v.context,C=x.shape;if(!(!A(C,"bpmn:Group")||C.labelTarget)){var P=x.category,R=x.categoryValue,E=pe(C);R&&(E.categoryValueRef=R,f(R,P))}}),this.execute("shape.create",function(v){var x=v.context,C=x.shape;!A(C,"bpmn:Group")||C.labelTarget||pe(C).categoryValueRef&&d(C,x)}),this.reverted("shape.create",function(v){var x=v.context,C=x.shape;!A(C,"bpmn:Group")||C.labelTarget||pe(C).categoryValueRef&&g(C,x)});function y(v,x){var C=e.create(v.$type);return o.copyElement(v,C,null,x)}r.on("copyPaste.copyElement",TE,function(v){var x=v.descriptor,C=v.element;if(!(!A(C,"bpmn:Group")||C.labelTarget)){var P=pe(C);if(P.categoryValueRef){var R=P.categoryValueRef;x.categoryValue=y(R,!0),R.$parent&&(x.category=y(R.$parent,!0))}}}),r.on("copyPaste.pasteElement",TE,function(v){var x=v.descriptor,C=x.businessObject,P=x.categoryValue,R=x.category;P&&(P=C.categoryValueRef=y(P)),R&&(P.$parent=y(R)),delete x.category,delete x.categoryValue})}z0.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];De(z0,ue);function Iy(e,t,n,r){var i,o,a,s,l;return i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),i==0?null:(o=e.y-n.y,a=e.x-n.x,l=(r.x-n.x)*o-(r.y-n.y)*a,s=l/i,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function $k(e){function t(r,i,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},l=Iy(r,i,o,a),u=Iy(r,i,o,s),f;l&&u?AE(l,o)>AE(u,o)?f=u:f=l:f=l||u,r.original=f}function n(r){var i=r.waypoints;t(i[0],i[1],Ze(r.source)),t(i[i.length-1],i[i.length-2],Ze(r.target))}e.on("bpmnElement.added",function(r){var i=r.element;i.waypoints&&n(i)})}$k.$inject=["eventBus"];function AE(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function H0(e){ue.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var r=n.context.shape,i=pe(r),o=Ct(r);if(mt(i,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}H0.$inject=["eventBus"];De(H0,ue);var Fk=Math.sqrt,zk=Math.min,XI=Math.max,ME=Math.abs;function NE(e){return Math.pow(e,2)}function Sc(e,t){return Fk(NE(e.x-t.x)+NE(e.y-t.y))}function QI(e,t){var n=0,r,i,o,a,s,l,u,f,d,g,y;for(n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],OE(r,i)?u=[r]:(o=Sc(e,r),a=Sc(e,i),l=zk(o,a),u=ZI(r,i,e,l)),u.length<1)throw new Error("expected between [1, 2] circle -> line intersections");u.length===1&&(f={type:"bendpoint",position:u[0],segmentIndex:n,bendpointIndex:OE(r,u[0])?n:n+1}),u.length===2&&(s=e9(u[0],u[1]),f={type:"segment",position:s,segmentIndex:n,relativeLocation:Sc(r,s)/Sc(r,i)}),d=Sc(f.position,e),(!y||g>d)&&(y=f,g=d)}return y}function ZI(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,l=i*i+o*o,u=i*a+o*s,f=a*a+s*s-r*r,d=u/l,g=f/l,y=d*d-g;if(y<0&&y>-1e-6&&(y=0),y<0)return[];var v=Fk(y),x=-d+v,C=-d-v,P={x:e.x-i*x,y:e.y-o*x};if(y===0)return[P];var R={x:e.x-i*C,y:e.y-o*C};return[P,R].filter(function(E){return JI(E,e,t)})}function JI(e,t,n){return DE(e.x,t.x,n.x)&&DE(e.y,t.y,n.y)}function DE(e,t,n){return e>=zk(t,n)-kd&&e<=XI(t,n)+kd}function e9(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var kd=.1;function OE(e,t){return ME(e.x-t.x)<=kd&&ME(e.y-t.y)<=kd}function t9(e,t,n,r){var i=n.segmentIndex,o=t.length-e.length;if(r.segmentMove){var a=r.segmentMove.segmentStartIndex,s=r.segmentMove.newSegmentStartIndex;return i===a?s:i>=s?i+o<s?s:i+o:i}if(r.bendpointMove){var l=r.bendpointMove.insert,u=r.bendpointMove.bendpointIndex,f;if(o===0)return i;if(i>=u&&(f=l?i+1:i-1),i<u&&(f=i,l&&n.type!=="bendpoint"&&u-1===i)){var d=Vk(t,u);d<n.relativeLocation&&f++}return f}return o===0?i:r.connectionStart&&i===0?0:r.connectionEnd&&i===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function Hk(e,t,n,r){var i=0,o=0,a={point:e,delta:{x:0,y:0}},s=QI(e,n),l=s.segmentIndex,u=t9(n,t,s,r);if(u<0||u>t.length-2||u===null)return a;var f=LE(n,l),d=LE(t,u),g=s.position,y=r9(f,g),v=n9(f,d);if(s.type==="bendpoint"){var x=t.length-n.length,C=s.bendpointIndex,P=n[C];if(t.indexOf(P)!==-1)return a;if(x===0){var R=t[C];return i=R.x-s.position.x,o=R.y-s.position.y,{delta:{x:i,y:o},point:{x:e.x+i,y:e.y+o}}}x<0&&C!==0&&C<n.length-1&&(y=Vk(n,C))}var E={x:(d[1].x-d[0].x)*y+d[0].x,y:(d[1].y-d[0].y)*y+d[0].y},b=GL({x:e.x-g.x,y:e.y-g.y},v);return i=E.x+b.x-e.x,o=E.y+b.y-e.y,{point:Eo(E),delta:Eo({x:i,y:o})}}function Vk(e,t){var n=bd(e[t-1],e[t]),r=bd(e[t],e[t+1]),i=n/(n+r);return i}function n9(e,t){var n=oE(e),r=oE(t);return r-n}function LE(e,t){return[e[t],e[t+1]]}function r9(e,t){var n=bd(e[0],e[1]),r=bd(e[0],t);return n===0?0:r/n}function i9(e,t,n,r){var i=Ze(e);return Hk(i,t,n,r).delta}function Bu(e,t,n){var r=Uc(t),i=Uc(n),o=Ii(e,r),a={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return Eo({x:i.x+a.x,y:i.y+a.y})}function IE(e,t,n){var r=Uc(e),i=Uc(t),o=Uc(n),a=Ii(e,r),s=Ii(r,i),l=o9(r,t,n);if(l)return l;var u={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},f={x:o.x+u.x,y:o.y+u.y};return Eo({x:f.x+a.x-e.x,y:f.y+a.y-e.y})}function o9(e,t,n){var r=Ue(t),i=Ue(n);if(a9(r,i))return null;var o=tr(t,e),a,s,l;if(o==="top")a={x:0,y:i.bottom-r.bottom};else if(o==="bottom")a={x:0,y:i.top-r.top};else if(o==="right")a={x:i.left-r.left,y:0};else if(o==="left")a={x:i.right-r.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},l=tr(n,s),l!==o?null:a}function a9(e,t){return s9(e,t)||l9(e,t)}function s9(e,t){return e.right!==t.right&&e.left!==t.left}function l9(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var BE="name",jE="text";function V0(e,t,n,r){ue.call(this,e),this.postExecute("element.updateProperties",i),this.postExecute("element.updateModdleProperties",a=>{pe(a.context.element)===a.context.moddleElement&&i(a)});function i(a){var s=a.context,l=s.element,u=s.properties;if(BE in u&&t.updateLabel(l,u[BE]),jE in u&&A(l,"bpmn:TextAnnotation")){var f=r.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},u[jE]||"");t.updateLabel(l,u.text,f)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,l=s.hints||{};if(l.createElementsBehavior!==!1){var u=s.shape||s.connection;Rt(u)||!_s(u)||qr(u)&&t.updateLabel(u,qr(u))}}),this.postExecute("shape.delete",function(a){var s=a.context,l=s.labelTarget,u=s.hints||{};l&&u.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})});function o(a){var s=a.context,l=s.connection,u=l.label,f=q({},s.hints),d=s.newWaypoints||l.waypoints,g=s.oldWaypoints;return typeof f.startChanged>"u"&&(f.startChanged=!!f.connectionStart),typeof f.endChanged>"u"&&(f.endChanged=!!f.connectionEnd),i9(u,d,g,f)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,l=s.hints||{};if(l.labelBehavior!==!1){var u=s.connection,f=u.label,d;!f||!f.parent||(d=o(a),t.moveShape(f,d))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,l=s.newShape,u=s.oldShape,f=pe(l);f&&_s(f)&&u.label&&l.label&&(l.label.x=u.label.x,l.label.y=u.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,u=s.newBounds,f=s.oldBounds;if(oh(l)){var d=l.label,g=Ze(d),y=p9(f),v=u9(g,y),x=c9(v,f,u);t.moveShape(d,x)}})}De(V0,ue);V0.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function c9(e,t,n){var r=Bu(e,t,n);return Eo(Ii(r,e))}function u9(e,t){if(t.length){var n=f9(e,t);return b0(e,n)}}function p9(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function f9(e,t){var n=t.map(function(i){return{line:i,distance:xk(e,i)}}),r=to(n,"distance");return r[0].line}function d9(e,t,n,r){return Hk(e,t,n,r).point}function W0(e,t){ue.call(this,e);function n(r,i){var o=r.context,a=o.connection,s=q({},o.hints),l=o.newWaypoints||a.waypoints,u=o.oldWaypoints;return typeof s.startChanged>"u"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged>"u"&&(s.endChanged=!!s.connectionEnd),d9(i,l,u,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming;s.forEach(function(l){var u=l.waypoints[l.waypoints.length-1],f=n(r,u),d=[].concat(l.waypoints.slice(0,-1),[f]);t.updateWaypoints(l,d)}),a.forEach(function(l){var u=l.waypoints[0],f=n(r,u),d=[].concat([f],l.waypoints.slice(1));t.updateWaypoints(l,d)})}),this.postExecute(["connection.move"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming,l=i.delta;s.forEach(function(u){var f=u.waypoints[u.waypoints.length-1],d={x:f.x+l.x,y:f.y+l.y},g=[].concat(u.waypoints.slice(0,-1),[d]);t.updateWaypoints(u,g)}),a.forEach(function(u){var f=u.waypoints[0],d={x:f.x+l.x,y:f.y+l.y},g=[].concat([d],u.waypoints.slice(1));t.updateWaypoints(u,g)})})}De(W0,ue);W0.$inject=["eventBus","modeling"];function Ch(e,t,n){var r=kh(e),i=Uk(r,t),o=r[0];return i.length?i[i.length-1]:Bu(o.original||o,n,t)}function Rh(e,t,n){var r=kh(e),i=Uk(r,t),o=r[r.length-1];return i.length?i[0]:Bu(o.original||o,n,t)}function U0(e,t,n){var r=kh(e),i=Wk(t,n),o=r[0];return Bu(o.original||o,i,t)}function G0(e,t,n){var r=kh(e),i=Wk(t,n),o=r[r.length-1];return Bu(o.original||o,i,t)}function Wk(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function kh(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function Uk(e,t){var n=Zn(e,m9);return yt(n,function(r){return h9(r,t)})}function h9(e,t){return tr(t,e,1)==="intersect"}function m9(e){return e.original||e}function K0(e,t){ue.call(this,e),this.postExecute("shape.replace",function(n){var r=n.oldShape,i=n.newShape;if(g9(r,i)){var o=y9(r);o.incoming.forEach(function(a){var s=Rh(a,i,r);t.reconnectEnd(a,i,s)}),o.outgoing.forEach(function(a){var s=Ch(a,i,r);t.reconnectStart(a,i,s)})}},!0)}K0.$inject=["eventBus","modeling"];De(K0,ue);function g9(e,t){return A(e,"bpmn:Participant")&&xt(e)&&A(t,"bpmn:Participant")&&!xt(t)}function y9(e){var t=ku([e],!1),n=[],r=[];return t.forEach(function(i){i!==e&&(i.incoming.forEach(function(o){A(o,"bpmn:MessageFlow")&&n.push(o)}),i.outgoing.forEach(function(o){A(o,"bpmn:MessageFlow")&&r.push(o)}))},[]),{incoming:n,outgoing:r}}const v9=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function Gk(e){const t=pe(e);if(!A(t,"bpmn:BoundaryEvent")&&!(A(t,"bpmn:StartEvent")&&Jn(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:v9.some(r=>A(n[0],r))}function Kk(e){return A(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function Y0(e,t){e.invoke(ue,this),this.postExecuted("shape.replace",function(n){const r=n.context.oldShape,i=n.context.newShape,o=n.context.hints;if(!Gk(i))return;const a=Kk(i);if(o.targetElement&&o.targetElement[a]!==void 0)return;const l=pe(r).get(a),u=pe(i).get(a);l!==u&&t.updateProperties(i,{[a]:l})})}Y0.$inject=["injector","modeling"];De(Y0,ue);function q0(e,t){ue.call(this,e),this.preExecute("shape.resize",function(n){var r=n.shape,i=Ct(r),o=i&&i.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(r,o,{bounds:void 0})},!0)}De(q0,ue);q0.$inject=["eventBus","modeling"];function X0(e,t,n){ue.call(this,e),this.preExecute("shape.delete",function(r){var i=r.context.shape;if(!(i.incoming.length!==1||i.outgoing.length!==1)){var o=i.incoming[0],a=i.outgoing[0];if(!(!A(o,"bpmn:SequenceFlow")||!A(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=x9(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,s)}}})}De(X0,ue);X0.$inject=["eventBus","bpmnRules","modeling"];function Xs(e){return e.original||e}function x9(e,t){var n=Iy(Xs(e[e.length-2]),Xs(e[e.length-1]),Xs(t[1]),Xs(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[Xs(e[0]),Xs(t[t.length-1])]}function Q0(e,t){ue.call(this,e),this.preExecute("shape.delete",function(n){var r=n.shape,i=r.parent;A(r,"bpmn:Participant")&&(n.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(n){var r=n.collaborationRoot;if(r&&!r.businessObject.participants.length){var i=t.makeProcess(),o=r.children.slice();t.moveElements(o,{x:0,y:0},i)}},!0)}Q0.$inject=["eventBus","modeling"];De(Q0,ue);function Z0(e,t,n,r){ue.call(this,e);var i=r.get("dragging",!1);function o(l){var u=l.source,f=l.target,d=l.parent;if(d){var g,y;A(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,f)||(y=!0),n.canConnectMessageFlow(u,f)&&(g="bpmn:MessageFlow")),A(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,f)||(y=!0),n.canConnectSequenceFlow(u,f)&&(g="bpmn:SequenceFlow")),y&&t.removeConnection(l),g&&t.connect(u,f,{type:g,waypoints:l.waypoints.slice()})}}function a(l){var u=l.context,f=u.connection,d=u.newSource||f.source,g=u.newTarget||f.target,y,v;y=n.canConnect(d,g),!(!y||y.type===f.type)&&(v=t.connect(d,g,{type:y.type,associationDirection:y.associationDirection,waypoints:f.waypoints.slice()}),f.parent&&t.removeConnection(f),u.connection=v,i&&s(f,v))}function s(l,u){var f=i.context(),d=f&&f.payload.previousSelection,g;!d||!d.length||(g=d.indexOf(l),g!==-1&&d.splice(g,1,u))}this.postExecuted("elements.move",function(l){var u=l.closure,f=u.allConnections;W(f,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(l){var u=l.context,f=u.properties,d=u.element,g=d.businessObject,y;f.default&&(y=Mt(d.outgoing,Li({id:d.businessObject.default.id})),y&&t.updateProperties(y,{conditionExpression:void 0})),f.conditionExpression&&g.sourceRef.default===g&&t.updateProperties(d.source,{default:void 0})})}De(Z0,ue);Z0.$inject=["eventBus","modeling","bpmnRules","injector"];function Ph(e,t,n,r,i,o){r.invoke(ue,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,l=s.parent,u=s.elements,f=jr(u,function(d,g){var y=t.canReplace([g],g.host||g.parent||l);return y?d.concat(y.replacements):d},[]);f.length&&this._replaceElements(u,f)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,l=s.newParent,u=s.newHost,f=[];W(s.closure.topLevel,function(g){Jn(g)?f=f.concat(g.children):f=f.concat(g)}),f.length===1&&u&&(l=u);var d=t.canReplace(f,l);d&&this._replaceElements(f,d.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,u=s.newShape,f=l.attachers,d;f&&f.length&&(d=t.canReplace(f,u),this._replaceElements(f,d.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,u=s.newShape;i.unclaimId(l.businessObject.id,l.businessObject),i.updateProperties(u,{id:l.id})})}De(Ph,ue);Ph.prototype._replaceElements=function(e,t){var n=this._elementRegistry,r=this._bpmnReplace,i=this._selection;W(t,function(o){var a={type:o.newElementType},s=n.get(o.oldElementId),l=e.indexOf(s);e[l]=r.replaceElement(s,a,{select:!1})}),t&&i.select(e)};Ph.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var _9=1500,w9={width:140,height:120},J0={width:300,height:60},ex={width:60,height:300},jf={width:300,height:150},$f={width:150,height:300},Yk={width:140,height:120},qk={width:50,height:30};function Xk(e){e.on("resize.start",_9,function(t){var n=t.context,r=n.shape,i=n.direction,o=n.balanced;(A(r,"bpmn:Lane")||A(r,"bpmn:Participant"))&&(n.resizeConstraints=R9(r,i,o)),A(r,"bpmn:SubProcess")&&xt(r)&&(n.minDimensions=Yk),A(r,"bpmn:TextAnnotation")&&(n.minDimensions=qk)})}Xk.$inject=["eventBus"];var qo=Math.abs,E9=Math.min,b9=Math.max;function Qk(e,t,n,r){var i=e[t];e[t]=i===void 0?n:r(n,i)}function Qs(e,t,n){return Qk(e,t,n,E9)}function Zs(e,t,n){return Qk(e,t,n,b9)}var S9={top:20,left:50,right:20,bottom:20},C9={top:50,left:20,right:20,bottom:20};function R9(e,t,n){var r=hi(e),i=!0,o=!0,a=bh(r,[r]),s=Ue(e),l={},u={},f=Nn(e),d=f?J0:ex;/n/.test(t)?u.top=s.bottom-d.height:/e/.test(t)?u.right=s.left+d.width:/s/.test(t)?u.bottom=s.top+d.height:/w/.test(t)&&(u.left=s.right-d.width),a.forEach(function(v){var x=Ue(v);f?(x.top<s.top-10&&(i=!1),x.bottom>s.bottom+10&&(o=!1)):(x.left<s.left-10&&(i=!1),x.right>s.right+10&&(o=!1)),/n/.test(t)&&(n&&qo(s.top-x.bottom)<10&&Zs(l,"top",x.top+d.height),qo(s.top-x.top)<5&&Qs(u,"top",x.bottom-d.height)),/e/.test(t)&&(n&&qo(s.right-x.left)<10&&Qs(l,"right",x.right-d.width),qo(s.right-x.right)<5&&Zs(u,"right",x.left+d.width)),/s/.test(t)&&(n&&qo(s.bottom-x.top)<10&&Qs(l,"bottom",x.bottom-d.height),qo(s.bottom-x.bottom)<5&&Zs(u,"bottom",x.top+d.height)),/w/.test(t)&&(n&&qo(s.left-x.right)<10&&Zs(l,"left",x.left+d.width),qo(s.left-x.left)<5&&Qs(u,"left",x.right-d.width))});var g=r.children.filter(function(v){return!v.hidden&&!v.waypoints&&(A(v,"bpmn:FlowElement")||A(v,"bpmn:Artifact"))}),y=f?S9:C9;return g.forEach(function(v){var x=Ue(v);/n/.test(t)&&(!f||i)&&Qs(u,"top",x.top-y.top),/e/.test(t)&&(f||o)&&Zs(u,"right",x.right+y.right),/s/.test(t)&&(!f||o)&&Zs(u,"bottom",x.bottom+y.bottom),/w/.test(t)&&(f||i)&&Qs(u,"left",x.left-y.left)}),{min:u,max:l}}var $E=1001;function Zk(e,t){e.on("resize.start",$E+500,function(n){var r=n.context,i=r.shape;(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))&&(r.balanced=!mu(n))}),e.on("resize.end",$E,function(n){var r=n.context,i=r.shape,o=r.canExecute,a=r.newBounds;if(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))return o&&(a=$C(a),t.resizeLane(i,a,r.balanced)),!1})}Zk.$inject=["eventBus","modeling"];var k9=500;function tx(e,t,n,r,i){n.invoke(ue,this);function o(f){return mt(f,["bpmn:ReceiveTask","bpmn:SendTask"])||P9(f,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(f){var d=e.getDefinitions(),g=d.get("rootElements");return!!Mt(g,Li({id:f.id}))}function s(f){if(A(f,"bpmn:ErrorEventDefinition"))return"errorRef";if(A(f,"bpmn:EscalationEventDefinition"))return"escalationRef";if(A(f,"bpmn:MessageEventDefinition"))return"messageRef";if(A(f,"bpmn:SignalEventDefinition"))return"signalRef"}function l(f){if(mt(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.get("messageRef");var d=f.get("eventDefinitions"),g=d[0];return g.get(s(g))}function u(f,d){if(mt(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.set("messageRef",d);var g=f.get("eventDefinitions"),y=g[0];return y.set(s(y),d)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(f){var d=f.shape||f.element;if(o(d)){var g=pe(d),y=l(g),v;y&&!a(y)&&(v=e.getDefinitions().get("rootElements"),Rn(v,y),f.addedRootElement=y)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(f){var d=f.addedRootElement;if(d){var g=e.getDefinitions().get("rootElements");mn(g,d)}},!0),t.on("copyPaste.copyElement",function(f){var d=f.descriptor,g=f.element;if(!(g.labelTarget||!o(g))){var y=pe(g),v=l(y);v&&(d.referencedRootElement=v)}}),t.on("copyPaste.pasteElement",k9,function(f){var d=f.descriptor,g=d.businessObject,y=d.referencedRootElement;y&&(a(y)||(y=r.copyElement(y,i.create(y.$type))),u(g,y),delete d.referencedRootElement)})}tx.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];De(tx,ue);function P9(e,t){return at(t)||(t=[t]),ba(t,function(n){return zl(e,n)})}var Jk=Math.max;function eP(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,r=t.axis,i=t.start,o={};return W(n,function(a){var s=a.id;A(a,"bpmn:Participant")&&(o[s]=A9(a,r,i)),A(a,"bpmn:Lane")&&(o[s]=Nn(a)?J0:ex),A(a,"bpmn:SubProcess")&&xt(a)&&(o[s]=Yk),A(a,"bpmn:TextAnnotation")&&(o[s]=qk),A(a,"bpmn:Group")&&(o[s]=w9)}),o})}eP.$inject=["eventBus"];function T9(e){return e==="x"}function A9(e,t,n){var r=Nn(e);if(!D9(e))return r?jf:$f;var i=T9(t),o={};return i?r?o=jf:o={width:N9(e,n,i),height:$f.height}:r?o={width:jf.width,height:M9(e,n,i)}:o=$f,o}function M9(e,t,n){var r;return r=O9(e,t,n),Jk(jf.height,r)}function N9(e,t,n){var r;return r=L9(e,t,n),Jk($f.width,r)}function D9(e){return!!Na(e).length}function O9(e,t,n){var r=Na(e),i;return i=nx(r,t,n),e.height-i.height+J0.height}function L9(e,t,n){var r=Na(e),i;return i=nx(r,t,n),e.width-i.width+ex.width}function nx(e,t,n){var r,i,o;for(r=0;r<e.length;r++)if(i=e[r],!n&&t>=i.y&&t<=i.y+i.height||n&&t>=i.x&&t<=i.x+i.width)return o=Na(i),o.length?nx(o,t,n):i}var FE=400,I9=600,zE={x:180,y:160};function Da(e,t,n,r,i,o,a){ue.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=r,this._bpmnFactory=i,this._bpmnjs=o,this._elementRegistry=a;var s=this;function l(d){return A(d,"bpmn:SubProcess")&&!xt(d)}function u(d){var g=d.shape,y=d.newRootElement,v=pe(g);y=s._addDiagram(y||v),d.newRootElement=e.addRootElement(y)}function f(d){var g=d.shape,y=pe(g);s._removeDiagram(y);var v=d.newRootElement=a.get(go(y));e.removeRootElement(v)}this.executed("shape.create",function(d){var g=d.shape;l(g)&&u(d)},!0),this.postExecuted("shape.create",function(d){var g=d.shape,y=d.newRootElement;!y||!g.children||(s._showRecursively(g.children),s._moveChildrenToShape(g,y))},!0),this.reverted("shape.create",function(d){var g=d.shape;l(g)&&f(d)},!0),this.preExecuted("shape.delete",function(d){var g=d.shape;if(l(g)){var y=a.get(go(g));y&&n.removeElements(y.children.slice())}},!0),this.executed("shape.delete",function(d){var g=d.shape;l(g)&&f(d)},!0),this.reverted("shape.delete",function(d){var g=d.shape;l(g)&&u(d)},!0),this.preExecuted("shape.replace",function(d){var g=d.oldShape,y=d.newShape;!l(g)||!l(y)||(d.oldRoot=e.removeRootElement(go(g)))},!0),this.postExecuted("shape.replace",function(d){var g=d.newShape,y=d.oldRoot,v=e.findRoot(go(g));if(!(!y||!v)){var x=y.children;n.moveElements(x,{x:0,y:0},v)}},!0),this.executed("element.updateProperties",function(d){var g=d.element;if(A(g,"bpmn:SubProcess")){var y=d.properties,v=d.oldProperties,x=v.id,C=y.id;if(x!==C){if(Of(g)){a.updateId(g,Za(C)),a.updateId(x,C);return}var P=a.get(Za(x));P&&a.updateId(Za(x),Za(C))}}},!0),this.reverted("element.updateProperties",function(d){var g=d.element;if(A(g,"bpmn:SubProcess")){var y=d.properties,v=d.oldProperties,x=v.id,C=y.id;if(x!==C){if(Of(g)){a.updateId(g,Za(x)),a.updateId(C,x);return}var P=a.get(Za(C));P&&a.updateId(P,Za(x))}}},!0),t.on("element.changed",function(d){var g=d.element;if(Of(g)){var y=g,v=a.get(Aw(y));!v||v===y||t.fire("element.changed",{element:v})}}),this.executed("shape.toggleCollapse",FE,function(d){var g=d.shape;A(g,"bpmn:SubProcess")&&(xt(g)?f(d):(u(d),s._showRecursively(g.children)))},!0),this.reverted("shape.toggleCollapse",FE,function(d){var g=d.shape;A(g,"bpmn:SubProcess")&&(xt(g)?f(d):(u(d),s._showRecursively(g.children)))},!0),this.postExecuted("shape.toggleCollapse",I9,function(d){var g=d.shape;if(A(g,"bpmn:SubProcess")){var y=d.newRootElement;y&&(xt(g)?s._moveChildrenToShape(y,g):s._moveChildrenToShape(g,y))}},!0),t.on("copyPaste.createTree",function(d){var g=d.element,y=d.children;if(l(g)){var v=go(g),x=a.get(v);x&&y.push.apply(y,x.children)}}),t.on("copyPaste.copyElement",function(d){var g=d.descriptor,y=d.element,v=d.elements,x=y.parent,C=A(Ct(x),"bpmndi:BPMNPlane");if(C){var P=Aw(x),R=Mt(v,function(E){return E.id===P});R&&(g.parent=R.id)}}),t.on("copyPaste.pasteElement",function(d){var g=d.descriptor;g.parent&&(l(g.parent)||g.parent.hidden)&&(g.hidden=!0)})}De(Da,ue);Da.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,r=e.children,i;if(r){r=r.concat(r.reduce(function(u,f){return f.label&&f.label.parent!==e?u.concat(f.label):u},[]));var o=r.filter(function(u){return!u.hidden});if(!o.length){n.moveElements(r,{x:0,y:0},t,{autoResize:!1});return}var a=Mn(o);if(!t.x)i={x:zE.x-a.x,y:zE.y-a.y};else{var s=Ze(t),l=Ze(a);i={x:s.x-l.x,y:s.y-l.y}}n.moveElements(r,i,t,{autoResize:!1})}};Da.prototype._showRecursively=function(e,t){var n=this,r=[];return e.forEach(function(i){i.hidden=!!t,r=r.concat(i),i.children&&(r=r.concat(n._showRecursively(i.children,i.collapsed||t)))}),r};Da.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};Da.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,r=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),i=t.create("bpmndi:BPMNDiagram",{plane:r});r.$parent=i;var o=n.createRoot({id:go(e),type:e.$type,di:r,businessObject:e,collapsed:!0});return o};Da.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,r=Mt(n,function(i){return i.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(r),1),r};Da.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function rx(e,t){e.invoke(ue,this),this.postExecuted("shape.replace",function(n){var r=n.context.oldShape,i=n.context.newShape;if(!(!A(i,"bpmn:SubProcess")||!(A(r,"bpmn:Task")||A(r,"bpmn:CallActivity"))||!xt(i))){var o=B9(i);t.createShape({type:"bpmn:StartEvent"},o,i)}})}rx.$inject=["injector","modeling"];De(rx,ue);function B9(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function ix(e){ue.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;A(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&A(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}De(ix,ue);ix.$inject=["eventBus"];function ox(e,t){ue.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var r=n.shape;if(xt(r))return;var i=ku(r);i.forEach(function(a){var s=a.incoming.slice(),l=a.outgoing.slice();W(s,function(u){o(u,!0)}),W(l,function(u){o(u,!1)})});function o(a,s){i.indexOf(a.source)!==-1&&i.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,r,Ze(r)):t.reconnectStart(a,r,Ze(r)))}},!0)}De(ox,ue);ox.$inject=["eventBus","modeling"];var ig=500;function ax(e,t,n){ue.call(this,e);function r(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function i(a,s){var l=a.children,u=s,f,d;return f=j9(l).concat([a]),d=Bk(f),d?(u.width=Math.max(d.width,u.width),u.height=Math.max(d.height,u.height),u.x=d.x+(d.width-u.width)/2,u.y=d.y+(d.height-u.height)/2):(u.x=a.x+(a.width-u.width)/2,u.y=a.y+(a.height-u.height)/2),u}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],ig,function(a){var s=a.context,l=s.shape;A(l,"bpmn:SubProcess")&&(l.collapsed?Ct(l).isExpanded=!1:(r(l.children),Ct(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],ig,function(a){var s=a.context,l=s.shape;l.collapsed?Ct(l).isExpanded=!1:Ct(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],ig,function(a){var s=a.context.shape,l=t.getDefaultSize(s),u;s.collapsed?u=o(s,l):u=i(s,l),n.resizeShape(s,u,null,{autoResize:s.collapsed?!1:"nwse"})})}De(ax,ue);ax.$inject=["eventBus","elementFactory","modeling"];function j9(e){return e.filter(function(t){return!t.hidden})}function sx(e,t,n,r){t.invoke(ue,this),this.preExecute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.businessObject;Rt(a)||(A(a,"bpmn:Participant")&&xt(a)&&n.ids.unclaim(s.processRef.id),r.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(i){var o=i.context,a=o.connection,s=a.businessObject;r.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var i=e.getRootElement(),o=i.businessObject;A(i,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}De(sx,ue);sx.$inject=["canvas","injector","moddle","modeling"];function lx(e,t){ue.call(this,e),this.preExecute("connection.delete",function(n){var r=n.context,i=r.connection,o=i.source;$9(i,o)&&t.updateProperties(o,{default:null})})}De(lx,ue);lx.$inject=["eventBus","modeling"];function $9(e,t){if(!A(e,"bpmn:SequenceFlow"))return!1;var n=pe(t),r=pe(e);return n.get("default")===r}var F9=500,z9=5e3;function cx(e,t){ue.call(this,e);var n;function r(){return n=n||new H9,n.enter(),n}function i(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var s=n.leave();return s&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,z9,function(s){r()}),this.postExecuted(a,F9,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var l=s.context,u=l.shape,f=i();u.labelTarget||(A(u,"bpmn:Lane")&&f.addLane(u),A(u,"bpmn:FlowNode")&&f.addFlowNode(u))})}cx.$inject=["eventBus","modeling"];De(cx,ue);function H9(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function ux(e,t){ue.call(this,e),this.postExecuted("elements.create",function(n){const r=n.context,i=r.elements;for(const o of i)V9(o)&&!U9(o)&&t.updateProperties(o,{isForCompensation:void 0})})}De(ux,ue);ux.$inject=["eventBus","modeling"];function V9(e){const t=pe(e);return t&&t.isForCompensation}function W9(e){return e&&A(e,"bpmn:BoundaryEvent")&&zl(e,"bpmn:CompensateEventDefinition")}function U9(e){return e.incoming.filter(n=>W9(n.source)).length>0}const G9={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",P0],appendBehavior:["type",T0],associationBehavior:["type",A0],attachEventBehavior:["type",wh],boundaryEventBehavior:["type",M0],compensateBoundaryEventBehaviour:["type",N0],createBehavior:["type",D0],createDataObjectBehavior:["type",O0],createParticipantBehavior:["type",L0],dataInputAssociationBehavior:["type",I0],dataStoreBehavior:["type",B0],deleteLaneBehavior:["type",j0],detachEventBehavior:["type",Sh],dropOnFlowBehavior:["type",$0],eventBasedGatewayBehavior:["type",F0],fixHoverBehavior:["type",jk],groupBehavior:["type",z0],importDockingFix:["type",$k],isHorizontalFix:["type",H0],labelBehavior:["type",V0],layoutConnectionBehavior:["type",W0],messageFlowBehavior:["type",K0],nonInterruptingBehavior:["type",Y0],removeElementBehavior:["type",X0],removeEmbeddedLabelBoundsBehavior:["type",q0],removeParticipantBehavior:["type",Q0],replaceConnectionBehavior:["type",Z0],replaceElementBehaviour:["type",Ph],resizeBehavior:["type",Xk],resizeLaneBehavior:["type",Zk],rootElementReferenceBehavior:["type",tx],spaceToolBehavior:["type",eP],subProcessPlaneBehavior:["type",Da],subProcessStartEventBehavior:["type",rx],textAnnotationBehavior:["type",ix],toggleCollapseConnectionBehaviour:["type",ox],toggleElementCollapseBehaviour:["type",ax],unclaimIdBehavior:["type",sx],unsetDefaultFlowBehavior:["type",lx],updateFlowNodeRefsBehavior:["type",cx],setCompensationActivityAfterPasteBehavior:["type",ux]};function tP(e,t){var n=tr(e,t,-15);return n!=="intersect"?n:null}function Gn(e){bi.call(this,e)}De(Gn,bi);Gn.$inject=["eventBus"];Gn.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return K9(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,r=e.hints||{},i=r.targetParent,o=r.targetAttach;if(o)return!1;i&&(n.parent=i);try{return Ff(t,n)}finally{i&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,r=e.target;return Ff(n,r,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return uP(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,r=e.target;return jt(r)&&!Pd(t,r)?!1:Ss(t,function(i){return jt(i)?Ff(i.source,i.target,i):i.host?Gc(i,i.host,null,n):Fy(i,r,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,r=e.position;return Gc(n,t,null,r)||lP(n,t,r)||cP(n,t)||Pd(n,t)}),this.addRule("shape.create",function(e){return Fy(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Gc(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return mP(n,t)})};Gn.prototype.canConnectMessageFlow=dP;Gn.prototype.canConnectSequenceFlow=hP;Gn.prototype.canConnectDataAssociation=fx;Gn.prototype.canConnectAssociation=pP;Gn.prototype.canConnectCompensationAssociation=fP;Gn.prototype.canMove=cP;Gn.prototype.canAttach=Gc;Gn.prototype.canReplace=lP;Gn.prototype.canDrop=Nl;Gn.prototype.canInsert=Pd;Gn.prototype.canCreate=Fy;Gn.prototype.canConnect=Ff;Gn.prototype.canResize=uP;Gn.prototype.canCopy=mP;function K9(e){return By(e)?null:mt(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function By(e){return!e||Rt(e)}function Y9(e,t){return e===t}function HE(e){do{if(A(e,"bpmn:Process"))return pe(e);if(A(e,"bpmn:Participant"))return pe(e).processRef||pe(e)}while(e=e.parent)}function jy(e){return A(e,"bpmn:TextAnnotation")}function px(e){return A(e,"bpmn:Group")&&!e.labelTarget}function nP(e){return A(e,"bpmn:BoundaryEvent")&&Xi(e,"bpmn:CompensateEventDefinition")}function Th(e){return pe(e).isForCompensation}function q9(e,t){var n=HE(e),r=HE(t);return n===r}function X9(e){return A(e,"bpmn:InteractionNode")&&!A(e,"bpmn:BoundaryEvent")&&(!A(e,"bpmn:Event")||A(e,"bpmn:ThrowEvent")&&iP(e,"bpmn:MessageEventDefinition"))}function Q9(e){return A(e,"bpmn:InteractionNode")&&!Th(e)&&(!A(e,"bpmn:Event")||A(e,"bpmn:CatchEvent")&&iP(e,"bpmn:MessageEventDefinition"))&&!(A(e,"bpmn:BoundaryEvent")&&!Xi(e,"bpmn:MessageEventDefinition"))}function VE(e){for(var t=e;t=t.parent;){if(A(t,"bpmn:FlowElementsContainer"))return pe(t);if(A(t,"bpmn:Participant"))return pe(t).processRef}return null}function rP(e,t){var n=VE(e),r=VE(t);return n===r}function Xi(e,t){var n=pe(e);return!!Mt(n.eventDefinitions||[],function(r){return A(r,t)})}function iP(e,t){var n=pe(e);return(n.eventDefinitions||[]).every(function(r){return A(r,t)})}function Z9(e){return A(e,"bpmn:FlowNode")&&!A(e,"bpmn:EndEvent")&&!Jn(e)&&!(A(e,"bpmn:IntermediateThrowEvent")&&Xi(e,"bpmn:LinkEventDefinition"))&&!nP(e)&&!Th(e)}function J9(e){return A(e,"bpmn:FlowNode")&&!A(e,"bpmn:StartEvent")&&!A(e,"bpmn:BoundaryEvent")&&!Jn(e)&&!(A(e,"bpmn:IntermediateCatchEvent")&&Xi(e,"bpmn:LinkEventDefinition"))&&!Th(e)}function eB(e){return A(e,"bpmn:ReceiveTask")||A(e,"bpmn:IntermediateCatchEvent")&&(Xi(e,"bpmn:MessageEventDefinition")||Xi(e,"bpmn:TimerEventDefinition")||Xi(e,"bpmn:ConditionalEventDefinition")||Xi(e,"bpmn:SignalEventDefinition"))}function tB(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function $y(e,t){var n=tB(t);return n.indexOf(e)!==-1}function Ff(e,t,n){if(By(e)||By(t))return null;if(!A(n,"bpmn:DataAssociation")){if(dP(e,t))return{type:"bpmn:MessageFlow"};if(hP(e,t))return{type:"bpmn:SequenceFlow"}}var r=fx(e,t);return r||(fP(e,t)?{type:"bpmn:Association",associationDirection:"One"}:pP(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function Nl(e,t){return Rt(e)||px(e)?!0:A(t,"bpmn:Participant")&&!xt(t)?!1:A(e,"bpmn:Participant")?A(t,"bpmn:Process")||A(t,"bpmn:Collaboration"):mt(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:A(e,"bpmn:Lane")?A(t,"bpmn:Participant")||A(t,"bpmn:Lane"):A(e,"bpmn:BoundaryEvent")&&!nB(e)?!1:A(e,"bpmn:FlowElement")&&!A(e,"bpmn:DataStoreReference")?A(t,"bpmn:FlowElementsContainer")?xt(t):mt(t,["bpmn:Participant","bpmn:Lane"]):A(e,"bpmn:DataStoreReference")&&A(t,"bpmn:Collaboration")?ba(pe(t).get("participants"),function(n){return!!n.get("processRef")}):mt(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?mt(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):A(e,"bpmn:MessageFlow")?A(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function nB(e){return pe(e).cancelActivity&&(oP(e)||aP(e))}function rB(e){return!Rt(e)&&A(e,"bpmn:BoundaryEvent")}function iB(e){return A(e,"bpmn:Lane")}function oB(e){return rB(e)||A(e,"bpmn:IntermediateThrowEvent")&&oP(e)?!0:A(e,"bpmn:IntermediateCatchEvent")&&aP(e)}function oP(e){var t=pe(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function aP(e){return sP(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function sP(e,t){return t.some(function(n){return Xi(e,n)})}function aB(e){return A(e,"bpmn:ReceiveTask")&&Mt(e.incoming,function(t){return A(t.source,"bpmn:EventBasedGateway")})}function Gc(e,t,n,r){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var i=e[0];return Rt(i)||!oB(i)||Jn(t)||!A(t,"bpmn:Activity")||Th(t)||r&&!tP(r,t)||aB(t)?!1:"attach"}function lP(e,t,n){if(!t)return!1;var r={replacements:[]};return W(e,function(i){Jn(t)||A(i,"bpmn:StartEvent")&&i.type!=="label"&&Nl(i,t)&&(X4(i)||r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),(Q4(i)||Z4(i)||J4(i))&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),sP(i,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&A(t,"bpmn:SubProcess")&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"})),A(t,"bpmn:Transaction")||Xi(i,"bpmn:CancelEventDefinition")&&i.type!=="label"&&(A(i,"bpmn:EndEvent")&&Nl(i,t)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:EndEvent"}),A(i,"bpmn:BoundaryEvent")&&Gc(i,t,null,n)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:BoundaryEvent"}))}),r.replacements.length?r:!1}function cP(e,t){return ba(e,iB)?!1:t?e.every(function(n){return Nl(n,t)}):!0}function Fy(e,t,n,r){return t?Rt(e)||px(e)?!0:Y9(n,t)||n&&$y(n,t)?!1:Nl(e,t)||Pd(e,t):!1}function uP(e,t){return A(e,"bpmn:SubProcess")?xt(e)&&(!t||t.width>=100&&t.height>=80):!!(A(e,"bpmn:Lane")||A(e,"bpmn:Participant")||jy(e)||px(e))}function sB(e,t){var n=jy(e),r=jy(t);return(n||r)&&n!==r}function pP(e,t){return $y(t,e)||$y(e,t)?!1:sB(e,t)?!0:!!fx(e,t)}function fP(e,t){return rP(e,t)&&nP(e)&&A(t,"bpmn:Activity")&&!cB(t,e)&&!Jn(t)}function dP(e,t){return WE(e)&&!WE(t)?!1:X9(e)&&Q9(t)&&!q9(e,t)}function hP(e,t){return Z9(e)&&J9(t)&&rP(e,t)&&!(A(e,"bpmn:EventBasedGateway")&&!eB(t))}function fx(e,t){return mt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&mt(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:mt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&mt(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Pd(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:mt(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Rt(t)&&A(e,"bpmn:FlowNode")&&!A(e,"bpmn:BoundaryEvent")&&Nl(e,t.parent)}function lB(e,t){return e&&t&&e.indexOf(t)!==-1}function mP(e,t){return Rt(t)?!0:!(A(t,"bpmn:Lane")&&!lB(e,t.parent))}function WE(e){return Al(e,"bpmn:Process")||Al(e,"bpmn:Collaboration")}function cB(e,t){return e.attachers.includes(t)}const uB={__depends__:[oo],__init__:["bpmnRules"],bpmnRules:["type",Gn]};var pB=2e3;function gP(e,t){e.on("saveXML.start",pB,n);function n(){var r=t.getRootElements();W(r,function(i){var o=Ct(i),a,s;a=ku([i],!1),a=yt(a,function(l){return l!==i&&!l.labelTarget}),s=Zn(a,Ct),o.set("planeElement",s)})}}gP.$inject=["eventBus","canvas"];const fB={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",gP]};function Ah(e){ue.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,i=r.shape||r.connection,o=r.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.parent=a.parent),r.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,i=r.shape||r.connection,o=r.newParent||i.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.newParent=a.parent),r.newParentIndex=a.index)})}Ah.prototype.getOrdering=function(e,t){return null};De(Ah,ue);function dx(e,t){Ah.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(a){if(a.labelTarget)return{level:10};var s=Mt(n,function(l){return mt(a,[l.type])});return s&&s.order||{level:1}}function i(a){var s=a.order;if(s||(a.order=s=r(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,l){for(var u=s;u&&!mt(u,l);)u=u.parent;if(!u)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return u}this.getOrdering=function(a,s){if(a.labelTarget||A(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var l=i(a);l.containers&&(s=o(a,s,l.containers));var u=s.children.indexOf(a),f=_C(s.children,function(d){return!a.labelTarget&&d.labelTarget?!1:l.level<i(d).level});return f!==-1&&u!==-1&&u<f&&(f-=1),{index:f,parent:s}}}dx.$inject=["eventBus","canvas"];De(dx,Ah);const dB={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",dx]};function ju(){}ju.prototype.get=function(){return this._data};ju.prototype.set=function(e){this._data=e};ju.prototype.clear=function(){var e=this._data;return delete this._data,e};ju.prototype.isEmpty=function(){return!this._data};const hB={clipboard:["type",ju]};var mB="drop-ok",UE="drop-not-ok",GE="attach-ok",KE="new-parent",YE="create",gB=2e3;function yP(e,t,n,r,i){function o(l,u,f,d,g){if(!u)return!1;l=yt(l,function(R){var E=R.labelTarget;return!R.parent&&!(Rt(R)&&l.indexOf(E)!==-1)});var y=Mt(l,function(R){return!jt(R)}),v=!1,x=!1,C=!1;XE(l)&&(v=i.allowed("shape.attach",{position:f,shape:y,target:u})),v||(XE(l)?C=i.allowed("shape.create",{position:f,shape:y,source:d,target:u}):C=i.allowed("elements.create",{elements:l,position:f,target:u}));var P=g.connectionTarget;return C||v?(y&&d&&(x=i.allowed("connection.create",{source:P===d?y:d,target:P===d?d:y,hints:{targetParent:u,targetAttach:v}})),{attach:v,connect:x}):C===null||v===null?null:!1}function a(l,u){[GE,mB,UE,KE].forEach(function(f){f===u?e.addMarker(l,f):e.removeMarker(l,f)})}n.on(["create.move","create.hover"],function(l){var u=l.context,f=u.elements,d=l.hover,g=u.source,y=u.hints||{};if(!d){u.canExecute=!1,u.target=null;return}qE(l);var v={x:l.x,y:l.y},x=u.canExecute=d&&o(f,d,v,g,y);d&&x!==null&&(u.target=d,x&&x.attach?a(d,GE):a(d,x?KE:UE))}),n.on(["create.end","create.out","create.cleanup"],function(l){var u=l.hover;u&&a(u,null)}),n.on("create.end",function(l){var u=l.context,f=u.source,d=u.shape,g=u.elements,y=u.target,v=u.canExecute,x=v&&v.attach,C=v&&v.connect,P=u.hints||{};if(v===!1||!y)return!1;qE(l);var R={x:l.x,y:l.y};C?d=r.appendShape(f,d,R,y,{attach:x,connection:C===!0?{}:C,connectionTarget:P.connectionTarget}):(g=r.createElements(g,R,y,q({},P,{attach:x})),d=Mt(g,function(E){return!jt(E)})),q(u,{elements:g,shape:d}),q(l,{elements:g,shape:d})});function s(){var l=t.context();l&&l.prefix===YE&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],gB,function(){n.off("elements.changed",s)})}),this.start=function(l,u,f){at(u)||(u=[u]);var d=Mt(u,function(v){return!jt(v)});if(d){f=q({elements:u,hints:{},shape:d},f||{}),W(u,function(v){Qe(v.x)||(v.x=0),Qe(v.y)||(v.y=0)});var g=yt(u,function(v){return!v.hidden}),y=Mn(g);W(u,function(v){jt(v)&&(v.waypoints=Zn(v.waypoints,function(x){return{x:x.x-y.x-y.width/2,y:x.y-y.y-y.height/2}})),q(v,{x:v.x-y.x-y.width/2,y:v.y-y.y-y.height/2})}),t.init(l,YE,{cursor:"grabbing",autoActivate:!0,data:{shape:d,elements:u,context:f}})}}}yP.$inject=["canvas","dragging","eventBus","modeling","rules"];function qE(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function XE(e){return e&&e.length===1&&!jt(e[0])}var yB=750;function vP(e,t,n,r,i){function o(a){var s=ze("g");be(s,i.cls("djs-drag-group",["no-events"]));var l=ze("g");return a.forEach(function(u){var f;u.hidden||(u.waypoints?(f=n._createContainer("connection",l),n.drawConnection(fs(f),u)):(f=n._createContainer("shape",l),n.drawShape(fs(f),u),Vn(f,u.x,u.y)),r.addDragger(u,s,f))}),s}t.on("create.move",yB,function(a){var s=a.hover,l=a.context,u=l.elements,f=l.dragGroup;f||(f=l.dragGroup=o(u));var d;s?(f.parentNode||(d=e.getActiveLayer(),et(d,f)),Vn(f,a.x,a.y)):Sn(f)}),t.on("create.cleanup",function(a){var s=a.context,l=s.dragGroup;l&&Sn(l)})}vP.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Mh={__depends__:[Lo,ql,oo,ro],__init__:["create","createPreview"],create:["type",yP],createPreview:["type",vP]};function hx(e){var t=this;this._lastMoveEvent=null;function n(r){t._lastMoveEvent=r}e.on("canvas.init",function(r){var i=t._svg=r.svg;i.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}hx.$inject=["eventBus"];hx.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||vB(0,0)};function vB(e,t){var n=document.createEvent("MouseEvent"),r=e,i=t,o=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,i,o,a,!1,!1,!1,!1,0,null),n}const $u={__init__:["mouse"],mouse:["type",hx]};function $i(e,t,n,r,i,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=r,this._eventBus=i,this._modeling=o,this._mouse=a,this._rules=s,i.on("copyPaste.copyElement",function(l){var u=l.descriptor,f=l.element,d=l.elements;u.priority=1,u.id=f.id;var g=Mt(d,function(y){return y===f.parent});g&&(u.parent=f.parent.id),xB(f)&&(u.priority=2,u.host=f.host.id),jt(f)&&(u.priority=3,u.source=f.source.id,u.target=f.target.id,u.waypoints=_B(f)),Rt(f)&&(u.priority=4,u.labelTarget=f.labelTarget.id),W(["x","y","width","height"],function(y){Qe(f[y])&&(u[y]=f[y])}),u.hidden=f.hidden,u.collapsed=f.collapsed}),i.on("copyPaste.pasteElements",function(l){var u=l.hints;q(u,{createElementsBehavior:!1})})}$i.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];$i.prototype.copy=function(e){var t,n;return at(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(at(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};$i.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};$i.prototype._paste=function(e,t,n,r){W(e,function(o){Qe(o.x)||(o.x=0),Qe(o.y)||(o.y=0)});var i=Mn(e);return W(e,function(o){jt(o)&&(o.waypoints=Zn(o.waypoints,function(a){return{x:a.x-i.x-i.width/2,y:a.y-i.y-i.height/2}})),q(o,{x:o.x-i.x-i.width/2,y:o.y-i.y-i.height/2})}),this._modeling.createElements(e,n,t,q({},r))};$i.prototype._createElements=function(e){var t=this,n=this._eventBus,r={},i=[];return W(e,function(o,a){o=to(o,"priority"),W(o,function(s){var l=q({},_i(s,["priority"]));r[s.parent]?l.parent=r[s.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:l});var u;if(jt(l)){l.source=r[s.source],l.target=r[s.target],u=r[s.id]=t.createConnection(l),i.push(u);return}if(Rt(l)){l.labelTarget=r[l.labelTarget],u=r[s.id]=t.createLabel(l),i.push(u);return}l.host&&(l.host=r[l.host]),u=r[s.id]=t.createShape(l),i.push(u)})}),i};$i.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(_i(e,["id"]));return t};$i.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(_i(e,["id"]));return t};$i.prototype.createShape=function(e){var t=this._elementFactory.createShape(_i(e,["id"]));return t};$i.prototype.hasRelations=function(e,t){var n,r,i;return!(jt(e)&&(r=Mt(t,Li({id:e.source.id})),i=Mt(t,Li({id:e.target.id})),!r||!i)||Rt(e)&&(n=Mt(t,Li({id:e.labelTarget.id})),!n))};$i.prototype.createTree=function(e){var t=this._rules,n=this,r={},i=[],o=Jd(e);function a(u,f){return t.allowed("element.copy",{element:u,elements:f})}function s(u,f){var d=Mt(i,function(g){return u===g.element});if(!d){i.push({element:u,depth:f});return}d.depth<f&&(i=l(d,i),i.push({element:d.element,depth:f}))}function l(u,f){var d=f.indexOf(u);return d!==-1&&f.splice(d,1),f}return Rs(o,function(u,f,d){if(Rt(u))return;W(u.labels,function(v){s(v,d)});function g(v){v&&v.length&&W(v,function(x){W(x.labels,function(C){s(C,d)}),s(x,d)})}W([u.attachers,u.incoming,u.outgoing],g),s(u,d);var y=[];return u.children&&(y=u.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:u,children:y}),y}),e=Zn(i,function(u){return u.element}),i=Zn(i,function(u){return u.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:u.descriptor,element:u.element,elements:e}),u}),i=to(i,function(u){return u.descriptor.priority}),e=Zn(i,function(u){return u.element}),W(i,function(u){var f=u.depth;if(!n.hasRelations(u.element,e)){ZE(u.element,e);return}if(!a(u.element,e)){ZE(u.element,e);return}r[f]||(r[f]=[]),r[f].push(u.descriptor)}),r};function xB(e){return!!e.host}function _B(e){return Zn(e.waypoints,function(t){return t=QE(t),t.original&&(t.original=QE(t.original)),t})}function QE(e){return q({},e)}function ZE(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const wB={__depends__:[hB,Mh,$u,oo],__init__:["copyPaste"],copyPaste:["type",$i]};function og(e,t,n){at(n)||(n=[n]),W(n,function(r){vs(e[r])||(t[r]=e[r])})}var ag=750;function xP(e,t,n){function r(l,u){var f=e.create(l.$type);return n.copyElement(l,f,null,u)}t.on("copyPaste.copyElement",ag,function(l){var u=l.descriptor,f=l.element,d=pe(f);if(Rt(f))return u;var g=u.businessObject=r(d,!0),y=u.di=r(Ct(f),!0);y.bpmnElement=g,og(g,u,"name"),og(y,u,"isExpanded"),d.default&&(u.default=d.default.id)});var i="-bpmn-js-refs";function o(l){return l[i]=l[i]||{}}function a(l,u){l[i]=u}function s(l,u,f){var d=pe(l);return l.default&&(f[l.default]={element:d,property:"default"}),l.host&&(pe(l).attachedToRef=pe(u[l.host])),_i(f,jr(f,function(g,y,v){var x=y.element,C=y.property;return v===l.id&&(x.set(C,d),g.push(l.id)),g},[]))}t.on("copyPaste.pasteElement",function(l){var u=l.cache,f=l.descriptor,d=f.businessObject,g=f.di;if(Rt(f)){f.businessObject=pe(u[f.labelTarget]),f.di=Ct(u[f.labelTarget]);return}d=f.businessObject=r(d),g=f.di=r(g),g.bpmnElement=d,og(f,d,["isExpanded","name"]),f.type=d.$type}),t.on("copyPaste.copyElement",ag,function(l){var u=l.descriptor,f=l.element;if(A(f,"bpmn:Participant")){var d=pe(f);d.processRef&&(u.processRef=r(d.processRef,!0))}}),t.on("copyPaste.pasteElement",function(l){var u=l.descriptor,f=u.processRef;f&&(u.processRef=r(f))}),t.on("copyPaste.pasteElement",ag,function(l){var u=l.cache,f=l.descriptor;a(u,s(f,u,o(u)))})}xP.$inject=["bpmnFactory","eventBus","moddleCopy"];var EB=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function Fu(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(r){var i=r.propertyNames;if(!(!i||!i.length))return to(i,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(r){var i=r.parent,o=jn(i)&&i.$descriptor,a=r.propertyName;if(a&&EB.indexOf(a)!==-1||a&&o&&!Mt(o.properties,Li({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(r){var i=r.property;if(bB(i,"bpmn:ExtensionElements")&&(!i.values||!i.values.length))return!1})}Fu.$inject=["eventBus","bpmnFactory","moddle"];Fu.prototype.copyElement=function(e,t,n,r=!1){var i=this;n&&!at(n)&&(n=[n]),n=n||zy(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:r});return o===!1||(at(o)&&(n=o),W(n,function(a){var s;vr(e,a)&&(s=e.get(a));var l=i.copyProperty(s,t,a,r);if(In(l)){var u=i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:l,propertyName:a});u!==!1&&t.set(a,l)}})),t};Fu.prototype.copyProperty=function(e,t,n,r=!1){var i=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:r});if(o!==!1){if(o)return jn(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,r):at(e)?jr(e,function(s,l){return o=i.copyProperty(l,t,n,r),o?s.concat(o):s},[]):jn(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=i._bpmnFactory.create(e.$type),o.$parent=t,o=i.copyElement(e,o,null,r),o):e}};Fu.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function zy(e,t){return jr(e.properties,function(n,r){return t&&r.default?n:n.concat(r.name)},[])}function bB(e,t){return e&&Cn(e.$instanceOf)&&e.$instanceOf(t)}const _P={__depends__:[wB],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",xP],moddleCopy:["type",Fu]};var JE=Math.round;function mx(e,t){this._modeling=e,this._eventBus=t}mx.$inject=["modeling","eventBus"];mx.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,i=this._eventBus;i.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,l=t.y||e.y,u=JE(s+o/2),f=JE(l+a/2),d=r.replaceShape(e,q({},t,{x:u,y:f,width:o,height:a}),n);return i.fire("replace.end",{element:e,newElement:d,hints:n}),d};function wP(e,t){t.on("replace.end",500,function(n){const{newElement:r,hints:i={}}=n;i.select!==!1&&e.select(r)})}wP.$inject=["selection","eventBus"];const SB={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",wP],replace:["type",mx]};function CB(e,t,n){at(n)||(n=[n]),W(n,function(r){vs(e[r])||(t[r]=e[r])})}var RB=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function kB(e,t){var n=e&&vr(e,"collapsed")?e.collapsed:!xt(e),r;return t&&(vr(t,"collapsed")||vr(t,"isExpanded"))?r=vr(t,"collapsed")?t.collapsed:!t.isExpanded:r=n,n!==r}function EP(e,t,n,r,i,o){function a(s,l,u){u=u||{};var f=l.type,d=s.businessObject;if(sf(d)&&f==="bpmn:SubProcess"&&kB(s,l))return r.toggleCollapse(s),s;var g=e.create(f),y={type:f,businessObject:g};y.di={},f==="bpmn:ExclusiveGateway"&&(y.di.isMarkerVisible=!0),CB(s.di,y.di,["fill","stroke","background-color","border-color","color"]);var v=zy(d.$descriptor),x=zy(g.$descriptor,!0),C=PB(v,x);q(g,ji(l,RB));var P=yt(C,function(b){return b==="eventDefinitions"?eb(s,l.eventDefinitionType):b==="loopCharacteristics"?!Jn(g):vr(g,b)||b==="processRef"&&l.isExpanded===!1||b==="triggeredByEvent"?!1:b==="isForCompensation"?!Jn(g):!0});if(g=n.copyElement(d,g,P),l.eventDefinitionType&&(eb(g,l.eventDefinitionType)||(y.eventDefinitionType=l.eventDefinitionType,y.eventDefinitionAttrs=l.eventDefinitionAttrs)),A(d,"bpmn:Activity")){if(sf(d))y.isExpanded=xt(s);else if(l&&vr(l,"isExpanded")){y.isExpanded=l.isExpanded;var R=t.getDefaultSize(g,{isExpanded:y.isExpanded});y.width=R.width,y.height=R.height,y.x=s.x-(y.width-s.width)/2,y.y=s.y-(y.height-s.height)/2}xt(s)&&!A(d,"bpmn:Task")&&y.isExpanded&&(y.width=s.width,y.height=s.height)}if(sf(d)&&!sf(g)&&(u.moveChildren=!1),A(d,"bpmn:Participant")){l.isExpanded===!0?g.processRef=e.create("bpmn:Process"):u.moveChildren=!1;var E=Nn(s);Ct(s).isHorizontal||(Ct(y).isHorizontal=E),y.width=E?s.width:t.getDefaultSize(y).width,y.height=E?t.getDefaultSize(y).height:s.height}return o.allowed("shape.resize",{shape:g})||(y.height=t.getDefaultSize(y).height,y.width=t.getDefaultSize(y).width),g.name=d.name,mt(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&mt(g,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(g.default=d.default),l.host&&!A(d,"bpmn:BoundaryEvent")&&A(g,"bpmn:BoundaryEvent")&&(y.host=l.host),(y.type==="bpmn:DataStoreReference"||y.type==="bpmn:DataObjectReference")&&(y.x=s.x+(s.width-y.width)/2),i.replaceElement(s,y,{...u,targetElement:l})}this.replaceElement=a}EP.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function sf(e){return A(e,"bpmn:SubProcess")}function eb(e,t){var n=pe(e);return t&&n.get("eventDefinitions").some(function(r){return A(r,t)})}function PB(e,t){return e.filter(function(n){return t.includes(n)})}const bP={__depends__:[_P,SB,ro],bpmnReplace:["type",EP]};var TB=250;function Ms(e){this._eventBus=e,this._tools=[],this._active=null}Ms.$inject=["eventBus"];Ms.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Ms.prototype.isActive=function(e){return e&&this._active===e};Ms.prototype.length=function(e){return this._tools.length};Ms.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Ms.prototype.bindEvents=function(e,t){var n=this._eventBus,r=[];n.on(t.tool+".init",function(i){var o=i.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),W(t,function(i){r.push(i+".ended"),r.push(i+".canceled")}),n.on(r,TB,function(i){this._active&&(AB(i)||this.setActive(null))},this)};function AB(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Sa(t,'.group[data-group="tools"]')}const Nh={__depends__:[Lo],__init__:["toolManager"],toolManager:["type",Ms]};function MB(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function NB(e,t){var n=[];return W(e.concat(t),function(r){var i=r.incoming,o=r.outgoing;W(i.concat(o),function(a){var s=a.source,l=a.target;(Cc(e,s)||Cc(e,l)||Cc(t,s)||Cc(t,l))&&(Cc(n,a)||n.push(a))})}),n}function Cc(e,t){return e.indexOf(t)!==-1}function DB(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,s=n.x,l=n.y;switch(t){case"n":return{x:r,y:i+l,width:o,height:a-l};case"s":return{x:r,y:i,width:o,height:a+l};case"w":return{x:r+s,y:i,width:o-s,height:a};case"e":return{x:r,y:i,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var sg=Math.abs,OB=Math.round,fo={x:"width",y:"height"},SP="crosshair",Xo={n:"top",w:"left",s:"bottom",e:"right"},LB=1500,lf={n:"s",w:"e",s:"n",e:"w"},cf=20;function Si(e,t,n,r,i,o,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=r,this._rules=i,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",LB,function(l){var u=l.context,f=u.initialized;f||(f=u.initialized=s.init(l,u)),f&&nb(l)}),n.on("spaceTool.end",function(l){var u=l.context,f=u.axis,d=u.direction,g=u.movingShapes,y=u.resizingShapes,v=u.start;if(u.initialized){nb(l);var x={x:0,y:0};x[f]=OB(l["d"+f]),s.makeSpace(g,y,x,d,v),n.once("spaceTool.ended",function(C){s.activateSelection(C.originalEvent,!0,!0)})}})}Si.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Si.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:SP,data:{context:{reactivate:n}},trapClick:!1})};Si.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:SP,data:{context:{}}})};Si.prototype.makeSpace=function(e,t,n,r,i){return this._modeling.createSpace(e,t,n,r,i)};Si.prototype.init=function(e,t){var n=sg(e.dx)>sg(e.dy)?"x":"y",r=e["d"+n],i=e[n]-r;if(sg(r)<5)return!1;r<0&&(r*=-1),mu(e)&&(r*=-1);var o=MB(n,r),a=this._canvas.getRootElement();!_d(e)&&e.hover&&(a=e.hover);var s=[...ku(a,!0),...a.attachers||[]],l=this.calculateAdjustments(s,n,r,i),u=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:l.resizingShapes,start:i}),f=IB(l,n,o,i,u);return q(t,l,{axis:n,direction:o,spaceToolConstraints:f,start:i}),dh("resize-"+(n==="x"?"ew":"ns")),!0};Si.prototype.calculateAdjustments=function(e,t,n,r){var i=this._rules,o=[],a=[],s=[],l=[];function u(g){o.includes(g)||o.push(g);var y=g.label;y&&!o.includes(y)&&o.push(y)}function f(g){a.includes(g)||a.push(g)}W(e,function(g){if(!(!g.parent||Rt(g))){if(jt(g)){l.push(g);return}var y=g[t],v=y+g[fo[t]];if(BB(g)&&(n>0&&Ze(g)[t]>r||n<0&&Ze(g)[t]<r)){s.push(g);return}if(n>0&&y>r||n<0&&v<r){u(g);return}if(y<r&&v>r&&i.allowed("shape.resize",{shape:g})){f(g);return}}}),W(o,function(g){var y=g.attachers;y&&W(y,function(v){u(v)})});var d=o.concat(a);return W(s,function(g){var y=g.host;ls(d,y)&&u(g)}),d=o.concat(a),W(l,function(g){var y=g.source,v=g.target,x=g.label;ls(d,y)&&ls(d,v)&&x&&u(x)}),{movingShapes:o,resizingShapes:a}};Si.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Si.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function tb(e){return{top:e.top-cf,right:e.right+cf,bottom:e.bottom+cf,left:e.left-cf}}function nb(e){var t=e.context,n=t.spaceToolConstraints;if(n){var r,i;Qe(n.left)&&(r=Math.max(e.x,n.left),e.dx=e.dx+r-e.x,e.x=r),Qe(n.right)&&(r=Math.min(e.x,n.right),e.dx=e.dx+r-e.x,e.x=r),Qe(n.top)&&(i=Math.max(e.y,n.top),e.dy=e.dy+i-e.y,e.y=i),Qe(n.bottom)&&(i=Math.min(e.y,n.bottom),e.dy=e.dy+i-e.y,e.y=i)}}function IB(e,t,n,r,i){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},l,u;return W(a,function(f){var d=f.attachers,g=f.children,y=Ue(f),v=yt(g,function(Y){return!jt(Y)&&!Rt(Y)&&!ls(o,Y)&&!ls(a,Y)}),x=yt(g,function(Y){return!jt(Y)&&!Rt(Y)&&ls(o,Y)}),C,P,R,E=[],b=[],D,B,z,L;v.length&&(P=tb(Ue(Mn(v))),C=r-y[Xo[n]]+P[Xo[n]],n==="n"?s.bottom=u=Qe(u)?Math.min(u,C):C:n==="w"?s.right=u=Qe(u)?Math.min(u,C):C:n==="s"?s.top=l=Qe(l)?Math.max(l,C):C:n==="e"&&(s.left=l=Qe(l)?Math.max(l,C):C)),x.length&&(R=tb(Ue(Mn(x))),C=r-R[Xo[lf[n]]]+y[Xo[lf[n]]],n==="n"?s.bottom=u=Qe(u)?Math.min(u,C):C:n==="w"?s.right=u=Qe(u)?Math.min(u,C):C:n==="s"?s.top=l=Qe(l)?Math.max(l,C):C:n==="e"&&(s.left=l=Qe(l)?Math.max(l,C):C)),d&&d.length&&(d.forEach(function(Y){ls(o,Y)?E.push(Y):b.push(Y)}),E.length&&(D=Ue(Mn(E.map(Ze))),B=y[Xo[lf[n]]]-(D[Xo[lf[n]]]-r)),b.length&&(z=Ue(Mn(b.map(Ze))),L=z[Xo[n]]-(y[Xo[n]]-r)),n==="n"?(C=Math.min(B||1/0,L||1/0),s.bottom=u=Qe(u)?Math.min(u,C):C):n==="w"?(C=Math.min(B||1/0,L||1/0),s.right=u=Qe(u)?Math.min(u,C):C):n==="s"?(C=Math.max(B||-1/0,L||-1/0),s.top=l=Qe(l)?Math.max(l,C):C):n==="e"&&(C=Math.max(B||-1/0,L||-1/0),s.left=l=Qe(l)?Math.max(l,C):C));var X=i&&i[f.id];X&&(n==="n"?(C=r+f[fo[t]]-X[fo[t]],s.bottom=u=Qe(u)?Math.min(u,C):C):n==="w"?(C=r+f[fo[t]]-X[fo[t]],s.right=u=Qe(u)?Math.min(u,C):C):n==="s"?(C=r-f[fo[t]]+X[fo[t]],s.top=l=Qe(l)?Math.max(l,C):C):n==="e"&&(C=r-f[fo[t]]+X[fo[t]],s.left=l=Qe(l)?Math.max(l,C):C))}),s}}function ls(e,t){return e.indexOf(t)!==-1}function BB(e){return!!e.host}var lg="djs-dragging",rb="djs-resizing",jB=250,uf=Math.max;function CP(e,t,n,r,i){function o(a,s){W(a,function(l){i.addDragger(l,s),n.addMarker(l,lg)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),l=a.context,u={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},f=ze("g");be(f,r.cls("djs-crosshair-group",["no-events"])),et(s,f);var d=ze("path");be(d,"d",u.x),St(d).add("djs-crosshair"),et(f,d);var g=ze("path");be(g,"d",u.y),St(g).add("djs-crosshair"),et(f,g),l.crosshairGroup=f}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;Vn(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,l=s.crosshairGroup;l&&Sn(l)}),e.on("spaceTool.move",jB,function(a){var s=a.context,l=s.line,u=s.axis,f=s.movingShapes,d=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var g=n.getLayer("space");l=ze("path"),be(l,"d","M0,0 L0,0"),St(l).add("djs-crosshair"),et(g,l),s.line=l;var y=ze("g");be(y,r.cls("djs-drag-group",["no-events"])),et(n.getActiveLayer(),y),o(f,y);var v=s.movingConnections=t.filter(function(b){var D=!1;W(f,function(X){W(X.outgoing,function(Y){b===Y&&(D=!0)})});var B=!1;W(f,function(X){W(X.incoming,function(Y){b===Y&&(B=!0)})});var z=!1;W(d,function(X){W(X.outgoing,function(Y){b===Y&&(z=!0)})});var L=!1;return W(d,function(X){W(X.incoming,function(Y){b===Y&&(L=!0)})}),jt(b)&&(D||z)&&(B||L)});o(v,y),s.dragGroup=y}if(!s.frameGroup){var x=ze("g");be(x,r.cls("djs-frame-group",["no-events"])),et(n.getActiveLayer(),x);var C=[];W(d,function(b){var D=i.addFrame(b,x),B=D.getBBox();C.push({element:D,initialBounds:B}),n.addMarker(b,rb)}),s.frameGroup=x,s.frames=C}var P={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};be(l,{d:P[u]});var R={x:"y",y:"x"},E={x:a.dx,y:a.dy};E[R[s.axis]]=0,Vn(s.dragGroup,E.x,E.y),W(s.frames,function(b){var D=b.element,B=b.initialBounds,z,L;s.direction==="e"?be(D,{width:uf(B.width+E.x,5)}):(z=uf(B.width-E.x,5),be(D,{width:z,x:B.x+B.width-z})),s.direction==="s"?be(D,{height:uf(B.height+E.y,5)}):(L=uf(B.height-E.y,5),be(D,{height:L,y:B.y+B.height-L}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,l=s.movingShapes,u=s.movingConnections,f=s.resizingShapes,d=s.line,g=s.dragGroup,y=s.frameGroup;W(l,function(v){n.removeMarker(v,lg)}),W(u,function(v){n.removeMarker(v,lg)}),g&&(Sn(d),Sn(g)),W(f,function(v){n.removeMarker(v,rb)}),y&&Sn(y)})}CP.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const $B={__init__:["spaceToolPreview"],__depends__:[Lo,oo,Nh,ql,$u],spaceTool:["type",Si],spaceToolPreview:["type",CP]};function Dh(e){e.invoke(Si,this)}Dh.$inject=["injector"];De(Dh,Si);Dh.prototype.calculateAdjustments=function(e,t,n,r){var i=Si.prototype.calculateAdjustments.call(this,e,t,n,r);return i.resizingShapes=i.resizingShapes.filter(function(o){return!(A(o,"bpmn:TextAnnotation")||FB(o)&&(t==="y"&&Nn(o)||t==="x"&&!Nn(o)))}),i};function FB(e){return A(e,"bpmn:Participant")&&!pe(e).processRef}const RP={__depends__:[$B],spaceTool:["type",Dh]};function Jt(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Jt.$inject=["eventBus","injector"];Jt.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};Jt.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i};Jt.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Jt.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Jt.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Jt.prototype.register=function(e,t){this._setHandler(e,t)};Jt.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Jt.prototype.canUndo=function(){return!!this._getUndoAction()};Jt.prototype.canRedo=function(){return!!this._getRedoAction()};Jt.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Jt.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Jt.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Jt.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const o of r)if(i=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return i};Jt.prototype._createId=function(){return this._uid++};Jt.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Jt.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()};Jt.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)};Jt.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:wC("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Jt.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=at(e)?e:[e],t.dirty=t.dirty.concat(e))};Jt.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Jt.prototype._revertedAction=function(e){this._stackIdx--};Jt.prototype._getHandler=function(e){return this._handlerMap[e]};Jt.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const zB={commandStack:["type",Jt]};function ha(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var HB=250,ib=1400;function gx(e,t,n){ue.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",ib,function(i){var o=i.context,a=o.shapes,s=o.validatedShapes;o.shapes=ob(a),o.validatedShapes=ob(s)}),r&&t.on("shape.move.start",HB,function(i){var o=i.context,a=o.shapes,s=[];W(a,function(l){W(l.labels,function(u){!u.hidden&&o.shapes.indexOf(u)===-1&&s.push(u),l.labelTarget&&s.push(l)})}),W(s,function(l){r.makeDraggable(o,l,!0)})}),this.preExecuted("elements.move",ib,function(i){var o=i.context,a=o.closure,s=a.enclosedElements,l=[];W(s,function(u){W(u.labels,function(f){s[f.id]||l.push(f)})}),a.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(i){var o=i.context,a=o.connection||o.shape;ha(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=Kv(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(i){var o=i.context,a=o.shape,s=o.labelTarget,l=o.labelTargetIndex;s&&(Rn(s.labels,a,l),a.labelTarget=s)})}De(gx,ue);gx.$inject=["injector","eventBus","modeling"];function ob(e){return yt(e,function(t){return e.indexOf(t.labelTarget)===-1})}const VB={__init__:["labelSupport"],labelSupport:["type",gx]};var WB=251,ab=1401,sb="attach-ok";function yx(e,t,n,r,i){ue.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",ab,function(a){var s=a.context,l=s.shapes,u=s.validatedShapes;s.shapes=UB(l),s.validatedShapes=GB(u)}),o&&t.on("shape.move.start",WB,function(a){var s=a.context,l=s.shapes,u=Hy(l);W(u,function(f){o.makeDraggable(s,f,!0),W(f.labels,function(d){o.makeDraggable(s,d,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,l=s.shapes;if(l.length===1){var u=l[0],f=u.host;f&&(n.addMarker(f,sb),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(f,sb)}))}}),this.preExecuted("elements.move",ab,function(a){var s=a.context,l=s.closure,u=s.shapes,f=Hy(u);W(f,function(d){l.add(d,l.topLevel[d.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,l=s.shapes,u=s.newHost,f;u&&l.length!==1||(u?f=l:f=yt(l,function(d){var g=d.host;return KB(d)&&!YB(l,g)}),W(f,function(d){i.updateAttachment(d,u)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;W(s,function(l){W(l.attachers,function(u){W(u.outgoing.slice(),function(f){var d=r.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||i.removeConnection(f)}),W(u.incoming.slice(),function(f){var d=r.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||i.removeConnection(f)})})})}),this.postExecute("shape.create",function(a){var s=a.context,l=s.shape,u=s.host;u&&i.updateAttachment(l,u)}),this.postExecute("shape.replace",function(a){var s=a.context,l=s.oldShape,u=s.newShape;ha(l.attachers,function(f){var d=r.allowed("elements.move",{target:u,shapes:[f]});d==="attach"?i.updateAttachment(f,u):i.removeShape(f)}),u.attachers.length&&W(u.attachers,function(f){var d=IE(f,l,u);i.moveShape(f,d,f.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,u=s.oldBounds,f=s.newBounds,d=l.attachers,g=s.hints||{};g.attachSupport!==!1&&W(d,function(y){var v=IE(y,u,f);i.moveShape(y,v,y.parent),W(y.labels,function(x){i.moveShape(x,v,x.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;ha(s.attachers,function(l){i.removeShape(l)}),s.host&&i.updateAttachment(s,null)})}De(yx,ue);yx.$inject=["injector","eventBus","canvas","rules","modeling"];function Hy(e){return zv(Zn(e,function(t){return t.attachers||[]}))}function UB(e){var t=Hy(e);return MM("id",e,t)}function GB(e){var t=jl(e,"id");return yt(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function KB(e){return!!e.host}function YB(e,t){return e.indexOf(t)!==-1}const qB={__depends__:[oo],__init__:["attachSupport"],attachSupport:["type",yx]};function Ci(e){this._model=e}Ci.$inject=["moddle"];Ci.prototype._needsId=function(e){return mt(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};Ci.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;A(e,"bpmn:Activity")?t="Activity":A(e,"bpmn:Event")?t="Event":A(e,"bpmn:Gateway")?t="Gateway":mt(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Ci.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};Ci.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};Ci.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",q({bpmnElement:e,bounds:this.createDiBounds()},t))};Ci.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Ci.prototype.createDiWaypoints=function(e){var t=this;return Zn(e,function(n){return t.createDiWaypoint(n)})};Ci.prototype.createDiWaypoint=function(e){return this.create("dc:Point",ji(e,["x","y"]))};Ci.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",q({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};Ci.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",q({bpmnElement:e},t))};function Fr(e,t,n){ue.call(this,e),this._bpmnFactory=t;var r=this;function i(y){var v=y.context,x=v.hints||{},C;!v.cropped&&x.createElementsBehavior!==!1&&(C=v.connection,C.waypoints=n.getCroppedWaypoints(C),v.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(y){delete y.context.cropped});function o(y){var v=y.context;r.updateParent(v.shape||v.connection,v.oldParent)}function a(y){var v=y.context,x=v.shape||v.connection,C=v.parent||v.newParent;r.updateParent(x,C)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Tr(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Tr(a));function s(y){var v=y.context,x=v.oldRoot,C=x.children;W(C,function(P){A(P,"bpmn:BaseElement")&&r.updateParent(P)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function l(y){var v=y.context.shape;A(v,"bpmn:BaseElement")&&r.updateBounds(v)}this.executed(["shape.move","shape.create","shape.resize"],Tr(function(y){y.context.shape.type!=="label"&&l(y)})),this.reverted(["shape.move","shape.create","shape.resize"],Tr(function(y){y.context.shape.type!=="label"&&l(y)})),e.on("shape.changed",function(y){y.element.type==="label"&&l({context:{shape:y.element}})});function u(y){r.updateConnection(y.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Tr(u)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Tr(u));function f(y){r.updateConnectionWaypoints(y.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Tr(f)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Tr(f)),this.executed("connection.reconnect",Tr(function(y){var v=y.context,x=v.connection,C=v.oldSource,P=v.newSource,R=pe(x),E=pe(C),b=pe(P);R.conditionExpression&&!mt(b,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(v.oldConditionExpression=R.conditionExpression,delete R.conditionExpression),C!==P&&E.default===R&&(v.oldDefault=E.default,delete E.default)})),this.reverted("connection.reconnect",Tr(function(y){var v=y.context,x=v.connection,C=v.oldSource,P=v.newSource,R=pe(x),E=pe(C),b=pe(P);v.oldConditionExpression&&(R.conditionExpression=v.oldConditionExpression),v.oldDefault&&(E.default=v.oldDefault,delete b.default)}));function d(y){r.updateAttachment(y.context)}this.executed(["element.updateAttachment"],Tr(d)),this.reverted(["element.updateAttachment"],Tr(d)),this.executed("element.updateLabel",Tr(g)),this.reverted("element.updateLabel",Tr(g));function g(y){const{element:v}=y.context,x=qr(v),C=Ct(v),P=C&&C.get("label");_s(v)||Of(v)||(x&&!P?C.set("label",t.create("bpmndi:BPMNLabel")):!x&&P&&C.set("label",void 0))}}De(Fr,ue);Fr.$inject=["eventBus","bpmnFactory","connectionDocking"];Fr.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject};Fr.prototype.updateParent=function(e,t){if(!Rt(e)&&!(A(e,"bpmn:DataStoreReference")&&e.parent&&A(e.parent,"bpmn:Collaboration"))){var n=e.parent,r=e.businessObject,i=Ct(e),o=n&&n.businessObject,a=Ct(n);A(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,o,t&&t.businessObject),A(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),A(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(r,o),A(e,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,o),this.updateDiParent(i,a)}};Fr.prototype.updateBounds=function(e){var t=Ct(e),n=QB(e);if(n){var r=Ii(n,t.get("bounds"));q(n,{x:e.x+r.x,y:e.y+r.y})}var i=Rt(e)?this._getLabel(t):t,o=i.bounds;o||(o=this._bpmnFactory.createDiBounds(),i.set("bounds",o)),q(o,{x:e.x,y:e.y,width:e.width,height:e.height})};Fr.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var r,i;A(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),mn(r,e)),A(t,"bpmn:Lane")&&(i=t.get("flowNodeRef"),Rn(i,e))}};Fr.prototype.updateDiConnection=function(e,t,n){var r=Ct(e),i=Ct(t),o=Ct(n);r.sourceElement&&r.sourceElement.bpmnElement!==pe(t)&&(r.sourceElement=t&&i),r.targetElement&&r.targetElement.bpmnElement!==pe(n)&&(r.targetElement=n&&o)};Fr.prototype.updateDiParent=function(e,t){if(t&&!A(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(mn(n,e),e.$parent=null)}};function XB(e){for(;e&&!A(e,"bpmn:Definitions");)e=e.$parent;return e}Fr.prototype.getLaneSet=function(e){var t,n;return A(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(A(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Fr.prototype.updateSemanticParent=function(e,t,n){var r;if(e.$parent!==t&&!((A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput"))&&(A(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(A(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),r="lanes";else if(A(e,"bpmn:FlowElement")){if(t){if(A(t,"bpmn:Participant"))t=t.processRef;else if(A(t,"bpmn:Lane"))do t=t.$parent.$parent;while(A(t,"bpmn:Lane"))}r="flowElements"}else if(A(e,"bpmn:Artifact")){for(;t&&!A(t,"bpmn:Process")&&!A(t,"bpmn:SubProcess")&&!A(t,"bpmn:Collaboration");)if(A(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;r="artifacts"}else if(A(e,"bpmn:MessageFlow"))r="messageFlows";else if(A(e,"bpmn:Participant")){r="participants";var i=e.processRef,o;i&&(o=XB(e.$parent||t),e.$parent&&(mn(o.get("rootElements"),i),i.$parent=null),t&&(Rn(o.get("rootElements"),i),i.$parent=o))}else A(e,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":A(e,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(r),mn(a,e)),t?(a=t.get(r),a.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(r);mn(a,e),t&&(s||(s=[],t.set(r,s)),s.push(e))}}};Fr.prototype.updateConnectionWaypoints=function(e){var t=Ct(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Fr.prototype.updateConnection=function(e){var t=e.connection,n=pe(t),r=t.source,i=pe(r),o=t.target,a=pe(t.target),s;if(A(n,"bpmn:DataAssociation"))A(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,s=e.parent||e.newParent||a,this.updateSemanticParent(n,a,s)):A(n,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||i,this.updateSemanticParent(n,i,s),n.targetRef=a);else{var l=A(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(l&&(mn(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==a&&(l&&(mn(n.targetRef&&n.targetRef.get("incoming"),n),a&&a.get("incoming")&&a.get("incoming").push(n)),n.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,r,o)};Fr.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function Tr(e){return function(t){var n=t.context,r=n.shape||n.connection||n.element;A(r,"bpmn:BaseElement")&&e(t)}}function QB(e){if(A(e,"bpmn:Activity")){var t=Ct(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function Oa(e,t){Mo.call(this),this._bpmnFactory=e,this._moddle=t}De(Oa,Mo);Oa.$inject=["bpmnFactory","moddle"];Oa.prototype._baseCreate=Mo.prototype.create;Oa.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,q({type:"label",di:n},du,t))}return this.createElement(e,t)};Oa.prototype.createElement=function(e,t){t=q({},t||{});var n,r=t.businessObject,i=t.di;if(!r){if(!t.type)throw new Error("no shape type specified");r=this._bpmnFactory.create(t.type),fR(r)}if(!JB(i)){var o=q({},i||{},{id:r.id+"_di"});e==="root"?i=this._bpmnFactory.createDiPlane(r,o):e==="connection"?i=this._bpmnFactory.createDiEdge(r,o):i=this._bpmnFactory.createDiShape(r,o)}A(r,"bpmn:Group")&&(t=q({isFrame:!0},t)),t=ZB(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Vy(i,t,"isExpanded")),mt(r,["bpmn:Lane","bpmn:Participant"])&&(t=Vy(i,t,"isHorizontal")),A(r,"bpmn:SubProcess")&&(t.collapsed=!xt(r,i)),A(r,"bpmn:ExclusiveGateway")&&(vr(i,"isMarkerVisible")?i.isMarkerVisible===void 0&&(i.isMarkerVisible=!1):i.isMarkerVisible=!0),In(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),In(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=r.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=r,r.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(r,i),t=q({id:r.id},n,t,{businessObject:r,di:i}),this._baseCreate(e,t)};Oa.prototype.getDefaultSize=function(e,t){var n=pe(e);if(t=t||Ct(e),A(n,"bpmn:SubProcess"))return xt(n,t)?{width:350,height:200}:{width:100,height:80};if(A(n,"bpmn:Task"))return{width:100,height:80};if(A(n,"bpmn:Gateway"))return{width:50,height:50};if(A(n,"bpmn:Event"))return{width:36,height:36};if(A(n,"bpmn:Participant")){var r=t.isHorizontal===void 0||t.isHorizontal===!0;return xt(n,t)?r?{width:600,height:250}:{width:250,height:600}:r?{width:400,height:60}:{width:60,height:400}}return A(n,"bpmn:Lane")?{width:400,height:100}:A(n,"bpmn:DataObjectReference")?{width:36,height:50}:A(n,"bpmn:DataStoreReference")?{width:50,height:50}:A(n,"bpmn:TextAnnotation")?{width:100,height:30}:A(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Oa.prototype.createParticipantShape=function(e){return jn(e)||(e={isExpanded:e}),e=q({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function ZB(e,t,n){return W(n,function(r){t=Vy(e,t,r)}),t}function Vy(e,t,n){return t[n]===void 0?t:(e[n]=t[n],_i(t,[n]))}function JB(e){return mt(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Oh(e,t){this._modeling=e,this._canvas=t}Oh.$inject=["modeling","canvas"];Oh.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;W(n,function(i){var o={x:0,y:0};In(r.left)?o.x=r.left-i.x:In(r.right)?o.x=r.right-i.width-i.x:In(r.center)?o.x=r.center-Math.round(i.width/2)-i.x:In(r.top)?o.y=r.top-i.y:In(r.bottom)?o.y=r.bottom-i.height-i.y:In(r.middle)&&(o.y=r.middle-Math.round(i.height/2)-i.y),t.moveElements([i],o,i.parent)})};Oh.prototype.postExecute=function(e){};function Lh(e){this._modeling=e}Lh.$inject=["modeling"];Lh.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,r=e.shape,i=e.hints||{};r=e.shape=this._modeling.createShape(r,e.position,n,{attach:i.attach}),e.shape=r};Lh.prototype.postExecute=function(e){var t=e.hints||{};e8(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function e8(e,t){return ba(e.outgoing,function(n){return n.target===t})}function Ih(e,t){this._canvas=e,this._layouter=t}Ih.$inject=["canvas","layouter"];Ih.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,i=e.parent,o=e.parentIndex,a=e.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,i,o),t};Ih.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var pf=Math.round;function vx(e){this._modeling=e}vx.$inject=["modeling"];vx.prototype.preExecute=function(e){var t=e.elements,n=e.parent,r=e.parentIndex,i=e.position,o=e.hints,a=this._modeling;W(t,function(d){Qe(d.x)||(d.x=0),Qe(d.y)||(d.y=0)});var s=yt(t,function(d){return!d.hidden}),l=Mn(s);W(t,function(d){jt(d)&&(d.waypoints=Zn(d.waypoints,function(g){return{x:pf(g.x-l.x-l.width/2+i.x),y:pf(g.y-l.y-l.height/2+i.y)}})),q(d,{x:pf(d.x-l.x-l.width/2+i.x),y:pf(d.y-l.y-l.height/2+i.y)})});var u=Jd(t),f={};W(t,function(d){if(jt(d)){f[d.id]=Qe(r)?a.createConnection(f[d.source.id],f[d.target.id],r,d,d.parent||n,o):a.createConnection(f[d.source.id],f[d.target.id],d,d.parent||n,o);return}var g=q({},o);u.indexOf(d)===-1&&(g.autoResize=!1),Rt(d)&&(g=_i(g,["attach"])),f[d.id]=Qe(r)?a.createShape(d,ji(d,["x","y","width","height"]),d.parent||n,r,g):a.createShape(d,ji(d,["x","y","width","height"]),d.parent||n,g)}),e.elements=Hv(f)};var lb=Math.round;function La(e){this._canvas=e}La.$inject=["canvas"];La.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,i=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?q(t,n):q(t,{x:n.x-lb(t.width/2),y:n.y-lb(t.height/2)}),this._canvas.addShape(t,r,i),t};La.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function zu(e){La.call(this,e)}De(zu,La);zu.$inject=["canvas"];var t8=La.prototype.execute;zu.prototype.execute=function(e){var t=e.shape;return r8(t),t.labelTarget=e.labelTarget,t8.call(this,e)};var n8=La.prototype.revert;zu.prototype.revert=function(e){return e.shape.labelTarget=null,n8.call(this,e)};function r8(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Hu(e,t){this._canvas=e,this._modeling=t}Hu.$inject=["canvas","modeling"];Hu.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;ha(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),ha(n.outgoing,function(r){t.removeConnection(r,{nested:!0})})};Hu.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Kv(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Hu.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,Rn(n.children,t,r),this._canvas.addConnection(t,n),t};function xx(e,t){this._modeling=e,this._elementRegistry=t}xx.$inject=["modeling","elementRegistry"];xx.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;W(r,function(i){n.get(i.id)&&(i.waypoints?t.removeConnection(i):t.removeShape(i))})};function Vu(e,t){this._canvas=e,this._modeling=t}Vu.$inject=["canvas","modeling"];Vu.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;ha(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),ha(n.outgoing,function(r){t.removeConnection(r,{nested:!0})}),ha(n.children,function(r){jt(r)?t.removeConnection(r,{nested:!0}):t.removeShape(r,{nested:!0})})};Vu.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=Kv(r.children,n),t.removeShape(n),n};Vu.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,i=e.oldParentIndex;return Rn(r.children,n,i),t.addShape(n,r),n};function Bh(e){this._modeling=e}Bh.$inject=["modeling"];var cb={x:"y",y:"x"};Bh.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,r=e.axis,i=e.dimension;function o(C,P){C.range.min=Math.min(P[r],C.range.min),C.range.max=Math.max(P[r]+P[i],C.range.max)}function a(C){return C[r]+C[i]/2}function s(C){return C.length-1}function l(C){return C.max-C.min}function u(C,P){var R={y:0};R[r]=C-a(P),R[r]&&(R[cb[r]]=0,t.moveElements([P],R,P.parent))}var f=n[0],d=s(n),g=n[d],y,v,x=0;W(n,function(C,P){var R,E,b;if(C.elements.length<2){P&&P!==n.length-1&&(o(C,C.elements[0]),x+=l(C.range));return}R=to(C.elements,r),E=R[0],P===d&&(E=R[s(R)]),b=a(E),C.range=null,W(R,function(D){if(u(b,D),C.range===null){C.range={min:D[r],max:D[r]+D[i]};return}o(C,D)}),P&&P!==n.length-1&&(x+=l(C.range))}),v=Math.abs(g.range.min-f.range.max),y=Math.round((v-x)/(n.length-1)),!(y<n.length-1)&&W(n,function(C,P){var R={},E;C===f||C===g||(E=n[P-1],C.range.max=0,W(C.elements,function(b,D){R[cb[r]]=0,R[r]=E.range.max-b[r]+y,C.range.min!==b[r]&&(R[r]+=b[r]-C.range.min),R[r]&&t.moveElements([b],R,b.parent),C.range.max=Math.max(b[r]+b[i],D?C.range.max:0)}))})};Bh.prototype.postExecute=function(e){};function jh(e,t){this._layouter=e,this._canvas=t}jh.$inject=["layouter","canvas"];jh.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return q(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};jh.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function _x(){}_x.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=mn(o.children,t),Rn(r.children,t,i),t.parent=r,W(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t};_x.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,i=e.oldParentIndex,o=e.delta;return mn(n.children,t),Rn(r.children,t,i),t.parent=r,W(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function wx(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}wx.prototype.add=function(e,t){return this.addAll([e],t)};wx.prototype.addAll=function(e,t){var n=wN(e,!!t,this);return q(this,n),this};function Wu(e){this._modeling=e}Wu.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Wu.prototype.moveClosure=function(e,t,n,r,i){var o=this._modeling,a=e.allShapes,s=e.allConnections,l=e.enclosedConnections,u=e.topLevel,f=!1;i&&i.parent===n&&(f=!0),W(a,function(d){o.moveShape(d,t,u[d.id]&&!f&&n,{recurse:!1,layout:!1})}),W(s,function(d){var g=!!a[d.source.id],y=!!a[d.target.id];l[d.id]&&g&&y?o.moveConnection(d,t,u[d.id]&&!f&&n):o.layoutConnection(d,{connectionStart:g&&U0(d,d.source,t),connectionEnd:y&&G0(d,d.target,t)})})};Wu.prototype.getClosure=function(e){return new wx().addAll(e,!0)};function $h(e){this._helper=new Wu(e)}$h.$inject=["modeling"];$h.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};$h.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Ns(e){this._modeling=e,this._helper=new Wu(e)}Ns.$inject=["modeling"];Ns.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldBounds=ji(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=mn(o.children,t),Rn(r.children,t,i),q(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t};Ns.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,i=this._modeling;r.layout!==!1&&(W(t.incoming,function(o){i.layoutConnection(o,{connectionEnd:G0(o,t,n)})}),W(t.outgoing,function(o){i.layoutConnection(o,{connectionStart:U0(o,t,n)})})),r.recurse!==!1&&this.moveChildren(e)};Ns.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,i=e.delta;return Rn(n.children,t,r),q(t,{parent:n,x:t.x-i.x,y:t.y-i.y}),t};Ns.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Ns.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Uu(e){this._modeling=e}Uu.$inject=["modeling"];Uu.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,r=e.connection,i=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return at(i)&&(e.oldWaypoints=r.waypoints,r.waypoints=i),t&&(e.oldSource=r.source,r.source=t),n&&(e.oldTarget=r.target,r.target=n),r};Uu.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,r=e.newTarget,i=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!r||o.docking==="source")&&(a.connectionStart=a.connectionStart||ub(at(i)?i[0]:i)),r&&(!n||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||ub(at(i)?i[i.length-1]:i)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))};Uu.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,r=e.oldWaypoints,i=e.connection;return t&&(i.source=t),n&&(i.target=n),r&&(i.waypoints=r),i};function ub(e){return e.original||e}function Bo(e,t){this._modeling=e,this._rules=t}Bo.$inject=["modeling","rules"];Bo.prototype.preExecute=function(e){var t=this,n=this._modeling,r=this._rules,i=e.oldShape,o=e.newData,a=e.hints||{},s;function l(v,x,C){return r.allowed("connection.reconnect",{connection:C,source:v,target:x})}var u={x:o.x,y:o.y},f={x:i.x,y:i.y,width:i.width,height:i.height};s=e.newShape=e.newShape||t.createShape(o,u,i.parent,a),i.host&&n.updateAttachment(s,i.host);var d;a.moveChildren!==!1&&(d=i.children.slice(),n.moveElements(d,{x:0,y:0},s,a));var g=i.incoming.slice(),y=i.outgoing.slice();W(g,function(v){var x=v.source,C=l(x,s,v);C&&t.reconnectEnd(v,s,Rh(v,s,f),a)}),W(y,function(v){var x=v.target,C=l(s,x,v);C&&t.reconnectStart(v,s,Ch(v,s,f),a)})};Bo.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Bo.prototype.execute=function(e){};Bo.prototype.revert=function(e){};Bo.prototype.createShape=function(e,t,n,r){return this._modeling.createShape(e,t,n,r)};Bo.prototype.reconnectStart=function(e,t,n,r){this._modeling.reconnectStart(e,t,n,r)};Bo.prototype.reconnectEnd=function(e,t,n,r){this._modeling.reconnectEnd(e,t,n,r)};function Gu(e){this._modeling=e}Gu.$inject=["modeling"];Gu.prototype.execute=function(e){var t=e.shape,n=e.newBounds,r=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};Gu.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,r=e.oldBounds,i=e.hints||{};i.layout!==!1&&(W(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:Rh(o,n,r)})}),W(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:Ch(o,n,r)})}))};Gu.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function Ia(e){this._modeling=e}Ia.$inject=["modeling"];Ia.prototype.preExecute=function(e){var t=e.delta,n=e.direction,r=e.movingShapes,i=e.resizingShapes,o=e.start,a={};this.moveShapes(r,t),W(i,function(s){a[s.id]=o8(s)}),this.resizeShapes(i,t,n),this.updateConnectionWaypoints(NB(r,i),t,n,o,r,i,a)};Ia.prototype.execute=function(){};Ia.prototype.revert=function(){};Ia.prototype.moveShapes=function(e,t){var n=this;W(e,function(r){n._modeling.moveShape(r,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Ia.prototype.resizeShapes=function(e,t,n){var r=this;W(e,function(i){var o=DB(i,n,t);r._modeling.resizeShape(i,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Ia.prototype.updateConnectionWaypoints=function(e,t,n,r,i,o,a){var s=this,l=i.concat(o);W(e,function(u){var f=u.source,d=u.target,g=i8(u),y=kP(n),v={};Qo(l,f)&&Qo(l,d)?(g=Zn(g,function(x){return fb(x,r,n)&&(x[y]=x[y]+t[y]),x.original&&fb(x.original,r,n)&&(x.original[y]=x.original[y]+t[y]),x}),s._modeling.updateWaypoints(u,g,{labelBehavior:!1})):(Qo(l,f)||Qo(l,d))&&(Qo(i,f)?v.connectionStart=U0(u,f,t):Qo(i,d)?v.connectionEnd=G0(u,d,t):Qo(o,f)?v.connectionStart=Ch(u,f,a[f.id]):Qo(o,d)&&(v.connectionEnd=Rh(u,d,a[d.id])),s._modeling.layoutConnection(u,v))})};function pb(e){return q({},e)}function i8(e){return Zn(e.waypoints,function(t){return t=pb(t),t.original&&(t.original=pb(t.original)),t})}function kP(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function fb(e,t,n){var r=kP(n);if(/e|s/.test(n))return e[r]>t;if(/n|w/.test(n))return e[r]<t}function Qo(e,t){return e.indexOf(t)!==-1}function o8(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Fh(e){this._modeling=e}Fh.$inject=["modeling"];Fh.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=PP(n),t.collapsed=!t.collapsed;var r=TP(n,t.collapsed);return[t].concat(r)};Fh.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,r=t.children,i=AP(r,n);return t.collapsed=!t.collapsed,[t].concat(i)};function PP(e){var t={};return W(e,function(n){t[n.id]=n.hidden,n.children&&(t=q({},t,PP(n.children)))}),t}function TP(e,t){var n=[];return W(e,function(r){r.hidden=t,n=n.concat(r),r.children&&(n=n.concat(TP(r.children,r.collapsed||t)))}),n}function AP(e,t){var n=[];return W(e,function(r){r.hidden=t[r.id],n=n.concat(r),r.children&&(n=n.concat(AP(r.children,t)))}),n}function zh(e){this._modeling=e}zh.$inject=["modeling"];zh.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=MP(r,t),NP(n,t),t.host=n,t};zh.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,i=e.attacherIdx;return t.host=r,MP(n,t),NP(r,t,i),t};function MP(e,t){return mn(e&&e.attachers,t)}function NP(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),Rn(r,t,n)}}function Ex(){}Ex.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};Ex.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function Bt(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}Bt.$inject=["eventBus","elementFactory","commandStack"];Bt.prototype.getHandlers=function(){return{"shape.append":Lh,"shape.create":La,"shape.delete":Vu,"shape.move":Ns,"shape.resize":Gu,"shape.replace":Bo,"shape.toggleCollapse":Fh,spaceTool:Ia,"label.create":zu,"connection.create":Ih,"connection.delete":Hu,"connection.move":_x,"connection.layout":jh,"connection.updateWaypoints":Ex,"connection.reconnect":Uu,"elements.create":vx,"elements.move":$h,"elements.delete":xx,"elements.distribute":Bh,"elements.align":Oh,"element.updateAttachment":zh}};Bt.prototype.registerHandlers=function(e){W(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};Bt.prototype.moveShape=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=null);var o={shape:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",o)};Bt.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};Bt.prototype.moveElements=function(e,t,n,r){r=r||{};var i=r.attach,o=n,a;i===!0?(a=n,o=n.parent):i===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:r};this._commandStack.execute("elements.move",s)};Bt.prototype.moveConnection=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",o)};Bt.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};Bt.prototype.createConnection=function(e,t,n,r,i,o){typeof n=="object"&&(o=i,i=r,r=n,n=void 0),r=this._create("connection",r);var a={source:e,target:t,parent:i,parentIndex:n,connection:r,hints:o};return this._commandStack.execute("connection.create",a),a.connection};Bt.prototype.createShape=function(e,t,n,r,i){typeof r!="number"&&(i=r,r=void 0),i=i||{};var o=i.attach,a,s;e=this._create("shape",e),o?(a=n.parent,s=n):a=n;var l={position:t,shape:e,parent:a,parentIndex:r,host:s,hints:i};return this._commandStack.execute("shape.create",l),l.shape};Bt.prototype.createElements=function(e,t,n,r,i){at(e)||(e=[e]),typeof r!="number"&&(i=r,r=void 0),i=i||{};var o={position:t,elements:e,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",o),o.elements};Bt.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var i={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape};Bt.prototype.appendShape=function(e,t,n,r,i){i=i||{},t=this._create("shape",t);var o={source:e,position:n,target:r,shape:t,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",o),o.shape};Bt.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};Bt.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)};Bt.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};Bt.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};Bt.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};Bt.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};Bt.prototype.resizeShape=function(e,t,n,r){var i={shape:e,newBounds:t,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)};Bt.prototype.createSpace=function(e,t,n,r,i){var o={delta:n,direction:r,movingShapes:e,resizingShapes:t,start:i};this._commandStack.execute("spaceTool",o)};Bt.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};Bt.prototype.reconnect=function(e,t,n,r,i){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",o)};Bt.prototype.reconnectStart=function(e,t,n,r){r||(r={}),this.reconnect(e,t,e.target,n,q(r,{docking:"source"}))};Bt.prototype.reconnectEnd=function(e,t,n,r){r||(r={}),this.reconnect(e,e.source,t,n,q(r,{docking:"target"}))};Bt.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)};Bt.prototype._create=function(e,t){return tD(t)?t:this._elementFactory.create(e,t)};Bt.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Ku(e){this._elementRegistry=e}Ku.$inject=["elementRegistry"];Ku.prototype.execute=function(e){var t=e.element,n=e.moddleElement,r=e.properties;if(!n)throw new Error("<moddleElement> required");var i=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||a8(n,dd(r));return DP(n,r),e.oldProperties=o,e.changed=i,i};Ku.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,r=e.changed;return DP(n,t),r};Ku.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return A(e,"bpmn:DataObject")?s8(e,t):[]};function a8(e,t){return jr(t,function(n,r){return n[r]=e.get(r),n},{})}function DP(e,t){W(t,function(n,r){e.set(r,n)})}function s8(e,t){return t.filter(function(n){return A(n,"bpmn:DataObjectReference")&&pe(n).dataObjectRef===e})}var Rc="default",So="id",OP="di",l8={width:0,height:0};function Yu(e,t,n,r){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=r}Yu.$inject=["elementRegistry","moddle","modeling","textRenderer"];Yu.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var r=this._elementRegistry,i=this._moddle.ids,o=t.businessObject,a=d8(e.properties),s=e.oldProperties||c8(t,a);return LP(a,o)&&(i.unclaim(o[So]),r.updateId(t,a[So]),i.claim(a[So],o)),Rc in a&&(a[Rc]&&n.push(r.get(a[Rc].id)),o[Rc]&&n.push(r.get(o[Rc].id))),IP(t,a),e.oldProperties=s,e.changed=n,n};Yu.prototype.postExecute=function(e){var t=e.element,n=t.label,r=n&&pe(n).name;if(r){var i=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,i,l8)}};Yu.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,i=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return IP(t,r),LP(n,i)&&(a.unclaim(n[So]),o.updateId(t,r[So]),a.claim(r[So],i)),e.changed};function LP(e,t){return So in e&&e[So]!==t[So]}function c8(e,t){var n=dd(t),r=e.businessObject,i=Ct(e);return jr(n,function(o,a){return a!==OP?o[a]=r.get(a):o[a]=u8(i,dd(t.di)),o},{})}function u8(e,t){return jr(t,function(n,r){return n[r]=e&&e.get(r),n},{})}function IP(e,t){var n=e.businessObject,r=Ct(e);W(t,function(i,o){o!==OP?n.set(o,i):r&&p8(r,i)})}function p8(e,t){W(t,function(n,r){e.set(r,n)})}var f8=["default"];function d8(e){var t=q({},e);return f8.forEach(function(n){n in e&&(t[n]=pe(t[n]))}),t}function Hh(e,t){this._canvas=e,this._modeling=t}Hh.$inject=["canvas","modeling"];Hh.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=t.getRootElement(),o=i.businessObject,a=o.$parent,s=Ct(i);return t.setRootElement(n),t.removeRootElement(i),Rn(a.rootElements,r),r.$parent=a,mn(a.rootElements,o),o.$parent=null,i.di=null,s.bpmnElement=r,n.di=s,e.oldRoot=i,[]};Hh.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=e.oldRoot,o=i.businessObject,a=r.$parent,s=Ct(n);return t.setRootElement(i),t.removeRootElement(n),mn(a.rootElements,r),r.$parent=null,Rn(a.rootElements,o),o.$parent=a,n.di=null,s.bpmnElement=o,i.di=s,[]};function bx(e,t){this._modeling=e,this._spaceTool=t}bx.$inject=["modeling","spaceTool"];bx.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,r=e.shape,i=e.location,o=hi(r),a=o===r,s=a?r:r.parent,l=Na(s),u=Nn(r);if(u?i==="left"?i="top":i==="right"&&(i="bottom"):i==="top"?i="left":i==="bottom"&&(i="right"),!l.length){var f=u?{x:r.x+pi,y:r.y,width:r.width-pi,height:r.height}:{x:r.x,y:r.y+pi,width:r.width,height:r.height-pi};n.createShape({type:"bpmn:Lane",isHorizontal:u},f,s)}var d=[];Rs(o,function(b){return d.push(b),b.label&&d.push(b.label),b===r?[]:yt(b.children,function(D){return D!==r})});var g,y,v,x,C;i==="top"?(g=-120,y=r.y,v=y+10,x="n",C="y"):i==="left"?(g=-120,y=r.x,v=y+10,x="w",C="x"):i==="bottom"?(g=120,y=r.y+r.height,v=y-10,x="s",C="y"):i==="right"&&(g=120,y=r.x+r.width,v=y-10,x="e",C="x");var P=t.calculateAdjustments(d,C,g,v),R=u?{x:0,y:g}:{x:g,y:0};t.makeSpace(P.movingShapes,P.resizingShapes,R,x,v);var E=u?{x:r.x+(a?pi:0),y:y-(i==="top"?120:0),width:r.width-(a?pi:0),height:120}:{x:y-(i==="left"?120:0),y:r.y+(a?pi:0),width:120,height:r.height-(a?pi:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:u},E,s)};function Sx(e){this._modeling=e}Sx.$inject=["modeling"];Sx.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,r=e.count,i=Na(n),o=i.length;if(o>r)throw new Error(`more than <${r}> child lanes`);var a=Nn(n),s=a?n.height:n.width,l=Math.round(s/r),u,f,d,g;for(g=0;g<r;g++)g===r-1?u=s-l*g:u=l,f=a?{x:n.x+pi,y:n.y+g*l,width:n.width-pi,height:u}:{x:n.x+g*l,y:n.y+pi,width:u,height:n.height-pi},g<o?t.resizeShape(i[g],f):(d={type:"bpmn:Lane",isHorizontal:a},t.createShape(d,f,n))};function qu(e,t){this._modeling=e,this._spaceTool=t}qu.$inject=["modeling","spaceTool"];qu.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,r=e.balanced;r!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};qu.prototype.resizeBalanced=function(e,t){var n=this._modeling,r=zI(e,t);n.resizeShape(e,t),r.forEach(function(i){n.resizeShape(i.shape,i.newBounds)})};qu.prototype.resizeSpace=function(e,t){var n=this._spaceTool,r=Ue(e),i=Ue(t),o=Ik(i,r),a=hi(e),s=[],l=[];Rs(a,function(v){return s.push(v),(A(v,"bpmn:Lane")||A(v,"bpmn:Participant"))&&l.push(v),v.children});var u,f,d,g,y;(o.bottom||o.top)&&(u=o.bottom||o.top,f=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),d=o.bottom?"s":"n",g=o.top>0||o.bottom<0?-u:u,y=n.calculateAdjustments(s,"y",g,f),n.makeSpace(y.movingShapes,y.resizingShapes,{x:0,y:u},d)),(o.left||o.right)&&(u=o.right||o.left,f=e.x+(o.right?e.width:0)+(o.right?-10:100),d=o.right?"e":"w",g=o.left>0||o.right<0?-u:u,y=n.calculateAdjustments(l,"x",g,f),n.makeSpace(y.movingShapes,y.resizingShapes,{x:u,y:0},d))};var xu="flowNodeRef",Cx="lanes";function Xu(e){this._elementRegistry=e}Xu.$inject=["elementRegistry"];Xu.prototype._computeUpdates=function(e,t){var n=[],r=[],i={},o=[];function a(f,d){var g=Ue(d),y={x:f.x+f.width/2,y:f.y+f.height/2};return y.x>g.left&&y.x<g.right&&y.y>g.top&&y.y<g.bottom}function s(f){n.indexOf(f)===-1&&(o.push(f),n.push(f))}function l(f){var d=hi(f);return i[d.id]||(i[d.id]=bh(d)),i[d.id]}function u(f){if(!f.parent)return[];var d=l(f);return d.filter(function(g){return a(f,g)}).map(function(g){return g.businessObject})}return t.forEach(function(f){var d=hi(f);if(!(!d||n.indexOf(d)!==-1)){var g=d.children.filter(function(y){return A(y,"bpmn:FlowNode")});g.forEach(s),n.push(d)}}),e.forEach(s),o.forEach(function(f){var d=f.businessObject,g=d.get(Cx),y=g.slice(),v=u(f);r.push({flowNode:d,remove:y,add:v})}),t.forEach(function(f){var d=f.businessObject;f.parent||d.get(xu).forEach(function(g){r.push({flowNode:g,remove:[d],add:[]})})}),r};Xu.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var r=n.flowNode,i=r.get(Cx);n.remove.forEach(function(o){mn(i,o),mn(o.get(xu),r)}),n.add.forEach(function(o){Rn(i,o),Rn(o.get(xu),r)})}),[]};Xu.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var r=n.flowNode,i=r.get(Cx);n.add.forEach(function(o){mn(i,o),mn(o.get(xu),r)}),n.remove.forEach(function(o){Rn(i,o),Rn(o.get(xu),r)})}),[]};function Vh(e){this._moddle=e}Vh.$inject=["moddle"];Vh.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.claim(n,r):t.unclaim(n),[]};Vh.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.unclaim(n):t.claim(n,r),[]};var h8={fill:void 0,stroke:void 0};function Rx(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(Br(t)){var n=m8(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}Rx.$inject=["commandStack"];Rx.prototype.postExecute=function(e){var t=e.elements,n=e.colors||h8,r=this,i={};"fill"in n&&q(i,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&q(i,{"border-color":this._normalizeColor(n.stroke)}),W(t,function(o){var a=jt(o)?ji(i,["border-color"]):i,s=Ct(o);if(g8(a),Rt(o))r._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:i["border-color"]}});else{if(!mt(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;r._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function m8(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function g8(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var y8={width:0,height:0};function BP(e,t,n){function r(l,u){var f=l.label||l,d=l.labelTarget||l;return iO(f,u),[f,d]}function i(l){var u=l.element,f=u.businessObject,d=l.newLabel;if(!Rt(u)&&_s(u)&&!oh(u)&&!db(d)){var g=7,y=o0(u);y={x:y.x,y:y.y+g},e.createLabel(u,y,{id:f.id+"_label",businessObject:f,di:u.di})}}function o(l){return l.oldLabel=qr(l.element),r(l.element,l.newLabel)}function a(l){return r(l.element,l.oldLabel)}function s(l){var u=l.element,f=u.label||u,d=l.newLabel,g=l.newBounds,y=l.hints||{};if(!(!Rt(f)&&!A(f,"bpmn:TextAnnotation"))){if(Rt(f)&&db(d)){y.removeShape!==!1&&e.removeShape(f,{unsetLabel:!1});return}var v=qr(u);typeof g>"u"&&(g=t.getExternalLabelBounds(f,v)),g&&e.resizeShape(f,g,y8)}}this.preExecute=i,this.execute=o,this.revert=a,this.postExecute=s}BP.$inject=["modeling","textRenderer","bpmnFactory"];function db(e){return!e||!e.trim()}function nr(e,t,n,r){Bt.call(this,e,t,n),this._bpmnRules=r}De(nr,Bt);nr.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];nr.prototype.getHandlers=function(){var e=Bt.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Ku,e["element.updateProperties"]=Yu,e["canvas.updateRoot"]=Hh,e["lane.add"]=bx,e["lane.resize"]=qu,e["lane.split"]=Sx,e["lane.updateRefs"]=Xu,e["id.updateClaim"]=Vh,e["element.setColor"]=Rx,e["element.updateLabel"]=BP,e};nr.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})};nr.prototype.connect=function(e,t,n,r){var i=this._bpmnRules;if(n||(n=i.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,r)};nr.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};nr.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};nr.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};nr.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};nr.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};nr.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};nr.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};nr.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};nr.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};nr.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};nr.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function jP(){}jP.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Ze(t.source||e.source),t.connectionEnd||Ze(t.target||e.target)]};var ff=20,v8=5,Td=Math.round,hb=20,x8={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function _8(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function w8(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function $P(e,t,n){var r=tr(t,e,v8),i=n.split(":")[0],o=Td((t.x-e.x)/2+e.x),a=Td((t.y-e.y)/2+e.y),s,l,u=w8(i,r),f=/h|r|l/.test(i),d=!1,g=!1;return u?(s=f?{x:o,y:e.y}:{x:e.x,y:a},l=f?"h:h":"v:v"):(d=_8(r,i),l=f?"h:v":"v:h",d?f?(g=a===e.y,s={x:e.x+ff*(/l/.test(i)?-1:1),y:g?a+ff:a}):(g=o===e.x,s={x:g?o+ff:o,y:e.y+ff*(/t/.test(i)?-1:1)}):s={x:o,y:a}),{waypoints:kx(e,s,l).concat(s),directions:l,turnNextDirections:g}}function E8(e,t,n){return $P(e,t,n)}function b8(e,t,n){var r=$P(t,e,mb(n));return{waypoints:r.waypoints.slice().reverse(),directions:mb(r.directions),turnNextDirections:r.turnNextDirections}}function S8(e,t){var n=e.directions.split(":")[1],r=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(r=r=="h"?"v":"h");var i=n+":"+r,o=kx(e.waypoints[e.waypoints.length-1],t.waypoints[0],i);return{waypoints:o,directions:i}}function mb(e){return e.split(":").reverse().join(":")}function C8(e,t,n){var r=Td((t.x-e.x)/2+e.x),i=Td((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:r,y:e.y},{x:r,y:t.y}];if(n==="v:v")return[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function kx(e,t,n){if(n=n||"h:h",!O8(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(FP(n)){var r=E8(e,t,n),i=b8(e,t,n),o=S8(r,i);return[].concat(r.waypoints,o.waypoints,i.waypoints)}return C8(e,t,n)}function R8(e,t,n){var r=kx(e,t,n);return r.unshift(e),r.push(t),zP(r)}function k8(e,t,n,r,i){var o=i&&i.preferredLayouts||[],a=TM(o,"straight")[0]||"h:h",s=x8[a]||0,l=tr(e,t,s),u=D8(l,a);n=n||Ze(e),r=r||Ze(t);var f=u.split(":"),d=yb(n,e,f[0],L8(l)),g=yb(r,t,f[1],l);return R8(d,g,u)}function P8(e,t,n,r,i,o){at(n)&&(i=n,o=r,n=Ze(e),r=Ze(t)),o=q({preferredLayouts:[]},o),i=i||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,l;return l=s&&A8(e,t,n,r,o),l||(l=o.connectionEnd&&N8(t,e,r,i),l)||(l=o.connectionStart&&M8(e,t,n,i),l)?l:!o.connectionStart&&!o.connectionEnd&&i&&i.length?i:k8(e,t,n,r,o)}function T8(e,t,n){return e>=t&&e<=n}function gb(e,t,n){var r={x:"width",y:"height"};return T8(t[e],n[e],n[e]+n[r[e]])}function A8(e,t,n,r,i){var o={},a,s;return s=tr(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),i.preserveDocking==="target"?gb(a,r,e)?(o[a]=r[a],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:r.x,y:r.y}]):null:gb(a,n,t)?(o[a]=n[a],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y,original:{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y}}]):null):null}function M8(e,t,n,r){return Px(e,t,n,r)}function N8(e,t,n,r){var i=r.slice().reverse();return i=Px(e,t,n,i),i?i.reverse():null}function Px(e,t,n,r){function i(f){return f.length<3?!0:f.length>4?!1:!!Mt(f,function(d,g){var y=f[g-1];return y&&Pu(d,y)<3})}function o(f,d,g){var y=xo(d,f);switch(y){case"v":return{x:g.x,y:f.y};case"h":return{x:f.x,y:g.y}}return{x:f.x,y:f.y}}function a(f,d,g){var y;for(y=f.length-2;y!==0;y--)if(cw(f[y],d,hb)||cw(f[y],g,hb))return f.slice(y);return f}if(i(r))return null;var s=r[0],l=r.slice(),u;return l[0]=n,l[1]=o(l[1],s,n),u=a(l,e,t),u!==l&&(l=Px(e,t,n,u)),l&&xo(l)?null:l}function D8(e,t){if(FP(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function O8(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function FP(e){return e&&/t|r|b|l/.test(e)}function L8(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function yb(e,t,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function zP(e){return e.reduce(function(t,n,r){var i=t[t.length-1],o=e[r+1];return Yv(i,o,n,0)||t.push(n),t},[])}var I8=-10,B8=40,j8={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},$8={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},Tx={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Nc={top:"t",right:"r",bottom:"b",left:"l"};function Wh(e){this._elementRegistry=e}De(Wh,jP);Wh.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,r=t.target||e.target,i=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,l,u;if(o||(o=vb(i&&i[0],n)),a||(a=vb(i&&i[i.length-1],r)),(A(e,"bpmn:Association")||A(e,"bpmn:DataAssociation"))&&i&&!xb(n,r))return[].concat([o],i.slice(1,-1),[a]);var f=fk(n,s)?j8:$8;return A(e,"bpmn:MessageFlow")?l=z8(n,r,f):(A(e,"bpmn:SequenceFlow")||xb(n,r))&&(n===r?l={preferredLayouts:K8(n,e,f)}:A(n,"bpmn:BoundaryEvent")?l={preferredLayouts:Y8(n,r,a,f)}:_u(n)||_u(r)?l={preferredLayouts:f.subProcess,preserveDocking:V8(n)}:A(n,"bpmn:Gateway")?l={preferredLayouts:f.fromGateway}:A(r,"bpmn:Gateway")?l={preferredLayouts:f.toGateway}:l={preferredLayouts:f.default}),l&&(l=q(l,t),u=zP(P8(n,r,o,a,i,l))),u||[o,a]};function F8(e){var t=e.host;return tr(Ze(e),t,I8)}function z8(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:H8(e,t)}}function H8(e,t){return A(t,"bpmn:Participant")?"source":A(e,"bpmn:Participant")?"target":_u(t)?"source":_u(e)||A(t,"bpmn:Event")?"target":A(e,"bpmn:Event")?"source":null}function V8(e){return _u(e)?"target":"source"}function vb(e,t){return e?e.original||e:Ze(t)}function xb(e,t){return A(t,"bpmn:Activity")&&A(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function _u(e){return A(e,"bpmn:SubProcess")&&xt(e)}function cs(e,t){return e===t}function W8(e,t){return t.indexOf(e)!==-1}function Dl(e){var t=/right|left/.exec(e);return t&&t[0]}function Ol(e){var t=/top|bottom/.exec(e);return t&&t[0]}function _b(e,t){return Tx[e]===t}function U8(e,t){var n=Dl(e),r=Tx[n];return t.indexOf(r)!==-1}function G8(e,t){var n=Ol(e),r=Tx[n];return t.indexOf(r)!==-1}function HP(e){return e==="right"||e==="left"}function K8(e,t,n){var r=t.waypoints,i=r&&r.length&&tr(r[0],e);return i==="top"?n.loop.fromTop:i==="right"?n.loop.fromRight:i==="left"?n.loop.fromLeft:n.loop.fromBottom}function Y8(e,t,n,r){var i=Ze(e),o=Ze(t),a=F8(e),s,l,u=cs(e.host,t),f=W8(a,["top","right","bottom","left"]),d=tr(o,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return u?q8(a,f,e,t,n,r):(s=X8(a,d,f,r.isHorizontal),l=Q8(a,d,f,r.isHorizontal),[s+":"+l])}function q8(e,t,n,r,i,o){var a=t?e:o.isHorizontal?Ol(e):Dl(e),s=Nc[a],l;return t?HP(e)?l=wb("y",n,r,i)?"h":o.boundaryLoop.alternateHorizontalSide:l=wb("x",n,r,i)?"v":o.boundaryLoop.alternateVerticalSide:l=o.boundaryLoop.default,[s+":"+l]}function wb(e,t,n,r){var i=B8;return!(cg(e,r,n,i)||cg(e,r,{x:n.x+n.width,y:n.y+n.height},i)||cg(e,r,Ze(t),i))}function cg(e,t,n,r){return Math.abs(t[e]-n[e])<r}function X8(e,t,n,r){if(n)return Nc[e];var i=Ol(e),o=Dl(e),a=Ol(t),s=Dl(t);if(r){if(cs(i,a)||_b(o,s))return Nc[i]}else if(cs(o,s)||_b(i,a))return Nc[o];return Nc[r?o:i]}function Q8(e,t,n,r){return n?HP(e)?U8(e,t)||cs(e,t)?"h":"v":G8(e,t)||cs(e,t)?"v":"h":r?cs(Ol(e),Ol(t))?"h":"v":cs(Dl(e),Dl(t))?"v":"h"}Wh.$inject=["elementRegistry"];function Eb(e){return q({original:e.point.original||e.point},e.actual)}function Ba(e,t){this._elementRegistry=e,this._graphicsFactory=t}Ba.$inject=["elementRegistry","graphicsFactory"];Ba.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),i=this.getDockingPoint(e,n),o=e.waypoints.slice(r.idx+1,i.idx);return o.unshift(Eb(r)),o.push(Eb(i)),o};Ba.prototype.getDockingPoint=function(e,t,n){var r=e.waypoints,i,o,a;return i=n?0:r.length-1,o=r[i],a=this._getIntersection(t,e,n),{point:o,actual:a||o,idx:i}};Ba.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),i=this._getConnectionPath(t);return gy(r,i,n)};Ba.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};Ba.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};Ba.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const VP={__init__:["modeling","bpmnUpdater"],__depends__:[G9,uB,fB,dB,bP,zB,VB,qB,ro,a0,RP],bpmnFactory:["type",Ci],bpmnUpdater:["type",Fr],elementFactory:["type",Oa],modeling:["type",nr],layouter:["type",Wh],connectionDocking:["type",Ba]},bb=Math.round;function Uh(e,t,n,r,i,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=r,this._layouter=i,this._rules=o}Uh.prototype.create=function(e,t,n){const r=this._complexPreview,i=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,l=this._rules,u=o.createShape(q({type:t},n)),f=a.fire("autoPlace",{source:e,shape:u});if(!f)return;q(u,{x:f.x-bb(u.width/2),y:f.y-bb(u.height/2)});const d=l.allowed("connection.create",{source:e,target:u,hints:{targetParent:e.parent}});let g=null;d&&(g=o.createConnection(d),g.waypoints=s.layoutConnection(g,{source:e,target:u}),g.waypoints=i.getCroppedWaypoints(g,e,u)),r.create({created:[u,g].filter(y=>!pu(y))})};Uh.prototype.cleanUp=function(){this._complexPreview.cleanUp()};Uh.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const Z8={__depends__:[w0,wI,VP],__init__:["appendPreview"],appendPreview:["type",Uh]};var Sb=Math.min,Cb=Math.max;function ug(e){e.preventDefault()}function Kc(e){e.stopPropagation()}function J8(e){return e.nodeType===Node.TEXT_NODE}function ej(e){return[].slice.call(e)}function Fi(e){this.container=e.container,this.parent=zt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=It("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=_r(this.autoResize,this),this.handlePaste=_r(this.handlePaste,this)}Fi.prototype.create=function(e,t,n,r){var i=this,o=this.parent,a=this.content,s=this.container;r=this.options=r||{},t=this.style=t||{};var l=ji(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);q(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var u=ji(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return q(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},u),r.centerVertically&&q(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},u),a.innerText=n,ot.bind(a,"keydown",this.keyHandler),ot.bind(a,"mousedown",Kc),ot.bind(a,"paste",i.handlePaste),r.autoResize&&ot.bind(a,"input",this.autoResize),r.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o};Fi.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var r;if(e.clipboardData?r=e.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),t.autoResize){var i=this.autoResize(n);i&&this.resizeHandler(i)}};Fi.prototype.insertText=function(e){e=tj(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Fi.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,r=t.endContainer,i=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=ej(a.childNodes),l,u;if(J8(a)){var f=n.textContent;n.textContent=f.substring(0,i)+e+f.substring(o),l=n,u=i+e.length}else if(n===this.content&&r===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,s[i]),l=d,u=d.textContent.length}else{var g=s.indexOf(n),y=s.indexOf(r);s.forEach(function(v,x){x===g?v.textContent=n.textContent.substring(0,i)+e+r.textContent.substring(o):x>g&&x<=y&&no(v)}),l=n,u=i+e.length}l&&u!==void 0&&setTimeout(function(){self.setSelection(l,u)})};Fi.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var r=e.getBoundingClientRect(),i=t.scrollHeight;e.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}};Fi.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=zt('<div class="djs-direct-editing-resize-handle"></div>');var s,l,u,f,d=function(v){ug(v),Kc(v),s=v.clientX,l=v.clientY;var x=t.getBoundingClientRect();u=x.width,f=x.height,ot.bind(document,"mousemove",g),ot.bind(document,"mouseup",y)},g=function(v){ug(v),Kc(v);var x=Sb(Cb(u+v.clientX-s,r),o),C=Sb(Cb(f+v.clientY-l,i),a);t.style.width=x+"px",t.style.height=C+"px",e.resizeHandler({width:u,height:f,dx:v.clientX-s,dy:v.clientY-l})},y=function(v){ug(v),Kc(v),ot.unbind(document,"mousemove",g,!1),ot.unbind(document,"mouseup",y,!1)};ot.bind(n,"mousedown",d)}q(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Fi.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),ot.unbind(t,"keydown",this.keyHandler),ot.unbind(t,"mousedown",Kc),ot.unbind(t,"input",this.autoResize),ot.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),no(n)),no(e)};Fi.prototype.getValue=function(){return this.content.innerText.trim()};Fi.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Fi.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function tj(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Ri(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new Fi({container:t.getContainer(),keyHandler:_r(this._handleKey,this),resizeHandler:_r(this._handleResize,this)})}Ri.$inject=["eventBus","canvas"];Ri.prototype.registerProvider=function(e){this._providers.push(e)};Ri.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Ri.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Ri.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Ri.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};Ri.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),o=e.context.text;(i!==o||r.height!==n.height||r.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,i,e.context.text,{x:r.left-t.left,y:r.top-t.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};Ri.prototype.getValue=function(){return this._textbox.getValue()};Ri.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Ri.prototype._handleResize=function(e){this._fire("resize",e)};Ri.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=Mt(this._providers,function(r){return(t=r.activate(e))?r:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const WP={__depends__:[ph],__init__:["directEditing"],directEditing:["type",Ri]};function Rb(e){return function(t){var n=t.target,r=pe(e),i=r.eventDefinitions&&r.eventDefinitions[0],o=r.$type===n.type,a=(i&&i.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!r.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===xt(e);return!o||!a||!s||!l}}var nj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],rj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],ij=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],oj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],aj=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],sj=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],UP=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],lj=UP,kb=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],cj=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],uj=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],pj=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],fj=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],dj=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],hj=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const Pb={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function ri(e,t,n,r,i,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=r,this._bpmnReplace=i,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}ri.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];ri.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};ri.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,r=[];if(at(e)||!n.allowed("shape.replace",{element:e}))return{};var i=Rb(e);return A(t,"bpmn:DataObjectReference")?this._createEntries(e,cj):A(t,"bpmn:DataStoreReference")&&!A(e.parent,"bpmn:Collaboration")?this._createEntries(e,uj):A(t,"bpmn:StartEvent")&&!A(t.$parent,"bpmn:SubProcess")?(r=yt(nj,i),this._createEntries(e,r)):A(t,"bpmn:Participant")?(r=yt(hj,function(o){return xt(e)!==o.target.isExpanded}),this._createEntries(e,r)):A(t,"bpmn:StartEvent")&&Jn(t.$parent)?(r=yt(fj,function(o){var a=o.target,s=a.isInterrupting!==!1,l=t.isInterrupting===s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):A(t,"bpmn:StartEvent")&&!Jn(t.$parent)&&A(t.$parent,"bpmn:SubProcess")?(r=yt(rj,i),this._createEntries(e,r)):A(t,"bpmn:EndEvent")?(r=yt(oj,function(o){var a=o.target;return a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(t.$parent,"bpmn:Transaction")?!1:i(o)}),this._createEntries(e,r)):A(t,"bpmn:BoundaryEvent")?(r=yt(pj,function(o){var a=o.target;if(a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(t.attachedToRef,"bpmn:Transaction"))return!1;var s=a.cancelActivity!==!1,l=t.cancelActivity==s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):A(t,"bpmn:IntermediateCatchEvent")||A(t,"bpmn:IntermediateThrowEvent")?(r=yt(ij,i),this._createEntries(e,r)):A(t,"bpmn:Gateway")?(r=yt(aj,i),this._createEntries(e,r)):A(t,"bpmn:Transaction")?(r=yt(UP,i),this._createEntries(e,r)):Jn(t)&&xt(e)?(r=yt(lj,i),this._createEntries(e,r)):A(t,"bpmn:SubProcess")&&xt(e)?(r=yt(sj,i),this._createEntries(e,r)):A(t,"bpmn:AdHocSubProcess")&&!xt(e)?(r=yt(kb,function(o){var a=o.target,s=a.type==="bpmn:SubProcess",l=a.isExpanded===!0;return Rb(a)&&(!s||l)}),this._createEntries(e,r)):A(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,dj):A(t,"bpmn:FlowNode")?(r=yt(kb,i),A(t,"bpmn:SubProcess")&&!xt(e)&&(r=yt(r,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,r)):{}};ri.prototype.getPopupMenuHeaderEntries=function(e){var t={};return A(e,"bpmn:Activity")&&!Jn(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),A(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),A(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),A(e,"bpmn:SubProcess")&&!A(e,"bpmn:Transaction")&&!Jn(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),Gk(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};ri.prototype._createEntries=function(e,t){var n={},r=this;return W(t,function(i){n[i.actionName]=r._createEntry(i,e)}),n};ri.prototype._createSequenceFlowEntries=function(e,t){var n=pe(e),r={},i=this._modeling,o=this._moddle,a=this;return W(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&A(n.sourceRef,"bpmn:Activity")&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){var l=o.create("bpmn:FormalExpression",{body:""});i.updateProperties(e,{conditionExpression:l})})});break;default:A(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e,{conditionExpression:void 0})})}),(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:void 0})})})}}),r};ri.prototype._createEntry=function(e,t,n){var r=this._translate,i=this._bpmnReplace.replaceElement,o=function(){return i(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),n=n||o,{label:r(a),className:e.className,action:n}};ri.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function r(u,f){if(f.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const d=e.businessObject.get("loopCharacteristics"),g=t._moddle.create(f.options.loopCharacteristics);d&&t._moddleCopy.copyElement(d,g),g.set("isSequential",f.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:g})}var i=pe(e),o=i.loopCharacteristics,a,s,l;return o&&(a=o.isSequential,s=o.isSequential===void 0,l=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};ri.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,r=e.businessObject.dataObjectRef;if(!r)return{};function i(a,s){t._modeling.updateModdleProperties(e,r,{isCollection:!s.active})}var o=r.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:i}}};ri.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,r=this._translate;function i(a,s){var l=s.active,u;l||(u=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:u})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:r("Participant multiplicity"),active:!!o,action:i}}};ri.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=pe(e),r=A(n,"bpmn:AdHocSubProcess"),i=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:r,action:function(o,a){return r?i(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):i(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};ri.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=pe(e),r=this,i=Kk(e),o=A(e,"bpmn:BoundaryEvent")?Pb["intermediate-event-non-interrupting"]:Pb["start-event-non-interrupting"],a=!n[i];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){r._modeling.updateProperties(e,{[i]:!!a})}}}};const mj={__depends__:[v0,bP,w0],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",ri]};function Qu(e,t,n,r,i,o,a,s,l,u,f,d,g){e=e||{},r.registerProvider(this),this._contextPad=r,this._modeling=i,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=l,this._canvas=u,this._rules=f,this._translate=d,this._eventBus=n,this._appendPreview=g,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(y){var v=y.context,x=v.shape;if(!(!mu(y)||!r.isOpen(x))){var C=r.getEntries(x);C.replace&&C.replace.action.click(y,x)}}),n.on("contextPad.close",function(){g.cleanUp()})}Qu.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];Qu.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&q(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(r,i){t.removeElements(i.slice())}}}}),n};Qu.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return at(t)?Ss(e,n=>t.includes(n)):t};Qu.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,r=this._elementFactory,i=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,l=this._translate,u=this._appendPreview,f={};if(e.type==="label")return this._isDeleteAllowed([e])&&q(f,v()),f;var d=e.businessObject;function g(E,b){i.start(E,b)}function y(E,b){n.removeElements([b])}function v(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:y}}}}function x(E){var b=5,D=t.getPad(E).html,B=D.getBoundingClientRect(),z={x:B.left,y:B.bottom+b};return z}function C(E,b,D,B){function z(Y,G){var le=r.createShape(q({type:E},B));o.start(Y,le,{source:G})}var L=s?function(Y,G){var le=r.createShape(q({type:E},B));s.append(G,le)}:z,X=s?function(Y,G){return u.create(G,E,B),()=>{u.cleanUp()}}:null;return{group:"model",className:b,title:D,action:{dragstart:z,click:L,hover:X}}}function P(E){return function(b,D){n.splitLane(D,E),t.open(D,!0)}}if(mt(d,["bpmn:Lane","bpmn:Participant"])&&xt(e)){var R=Na(e);q(f,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(E,b){n.addLane(b,"top")}}}}),R.length<2&&((Nn(e)?e.height>=120:e.width>=120)&&q(f,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:P(2)}}}),(Nn(e)?e.height>=180:e.width>=180)&&q(f,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:P(3)}}})),q(f,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(E,b){n.addLane(b,"bottom")}}}})}return A(d,"bpmn:FlowNode")&&(A(d,"bpmn:EventBasedGateway")?q(f,{"append.receive-task":C("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Tb(d,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?q(f,{"append.compensation-activity":C("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!A(d,"bpmn:EndEvent")&&!d.isForCompensation&&!Tb(d,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Jn(d)&&q(f,{"append.end-event":C("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":C("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":C("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":C("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||q(f,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(E,b){var D=q(x(b),{cursor:{x:E.x,y:E.y}});a.open(b,"bpmn-replace",D,{title:l("Change element"),width:300,search:!0})}}}}),A(d,"bpmn:SequenceFlow")&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),mt(d,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:g,dragstart:g}}}),A(d,"bpmn:TextAnnotation")&&q(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:g,dragstart:g}}}),mt(d,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:g,dragstart:g}}}),A(d,"bpmn:Group")&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([e])&&q(f,v()),f};function Tb(e,t,n){var r=e.$instanceOf(t),i=!1,o=e.eventDefinitions||[];return W(o,function(a){a.$type===n&&(i=!0)}),r&&i}const gj={__depends__:[Z8,WP,HR,ro,R0,Mh,mj],__init__:["contextPadProvider"],contextPadProvider:["type",Qu]};var yj={horizontal:["x","width"],vertical:["y","height"]},Ab=5;function jo(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var r=t.allowed("elements.distribute",{elements:n});return at(r)?r:r?n:[]})}jo.$inject=["modeling","rules"];jo.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};jo.prototype.trigger=function(e,t){var n=this._modeling,r,i;if(!(e.length<3)&&(this._setOrientation(t),i=this._filterElements(e),r=this._createGroups(i),!(r.length<=2)))return n.distributeElements(r,this._axis,this._dimension),r};jo.prototype._filterElements=function(e){var t=this._filters,n=this._axis,r=this._dimension,i=[].concat(e);return t.length?(W(t,function(o){i=o(i,n,r)}),i):e};jo.prototype._createGroups=function(e){var t=[],n=this,r=this._axis,i=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var o=to(e,r);return W(o,function(a,s){var l=n._findRange(a,r,i),u,f=t[t.length-1];f&&n._hasIntersection(f.range,l)?t[t.length-1].elements.push(a):(u={range:l,elements:[a]},t.push(u))}),t};jo.prototype._setOrientation=function(e){var t=yj[e];this._axis=t[0],this._dimension=t[1]};jo.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};jo.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+Ab,max:t+n-Ab}};const vj={__init__:["distributeElements"],distributeElements:["type",jo]};function Gh(e){bi.call(this,e)}Gh.$inject=["eventBus"];De(Gh,bi);Gh.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=yt(t,function(n){var r=mt(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||r)}),t=Jd(t),t.length<3?!1:t})};var Mb={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},xj=900;function Zu(e,t,n,r){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",xj,this)}Zu.$inject=["popupMenu","distributeElements","translate","rules"];Zu.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Zu.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Zu.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,r=this._popupMenu,i={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:Mb.horizontal,action:function(o,a){t.trigger(e,"horizontal"),r.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:Mb.vertical,action:function(o,a){t.trigger(e,"vertical"),r.close()}}};return i};const _j={__depends__:[v0,vj],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Gh],distributeElementsMenuProvider:["type",Zu]};var GP="is not a registered action",wj="is already registered";function ki(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}ki.$inject=["eventBus","injector"];ki.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),i=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),l=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&r&&this.register("copy",function(){var f=r.get();if(f.length)return o.copy(f)}),o&&this.register("paste",function(){o.paste()}),i&&this.register("stepZoom",function(f){i.stepZoom(f.value)}),a&&this.register("zoom",function(f){a.zoom(f.value)}),n&&r&&s&&this.register("removeSelection",function(){var f=r.get();if(f.length){var d=s.allowed("elements.delete",{elements:f}),g;d!==!1&&(at(d)?g=d:g=f,g.length&&n.removeElements(g.slice()))}}),l&&this.register("moveCanvas",function(f){l.moveCanvas(f)}),u&&this.register("moveSelection",function(f){u.moveSelection(f.direction,f.accelerated)})};ki.prototype.trigger=function(e,t){if(!this._actions[e])throw Ax(e,GP);return this._actions[e](t)};ki.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);W(e,function(r,i){n._registerAction(i,r)})};ki.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw Ax(e,wj);this._actions[e]=t};ki.prototype.unregister=function(e){if(!this.isRegistered(e))throw Ax(e,GP);this._actions[e]=void 0};ki.prototype.getActions=function(){return Object.keys(this._actions)};ki.prototype.isRegistered=function(e){return!!this._actions[e]};function Ax(e,t){return new Error(e+" "+t)}const Ej={__init__:["editorActions"],editorActions:["type",ki]};function Kh(e){e.invoke(ki,this)}De(Kh,ki);Kh.$inject=["injector"];Kh.prototype._registerDefaultActions=function(e){ki.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),i=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),l=e.get("distributeElements",!1),u=e.get("alignElements",!1),f=e.get("directEditing",!1),d=e.get("searchPad",!1),g=e.get("modeling",!1),y=e.get("contextPad",!1);t&&n&&r&&this._registerAction("selectElements",function(){var v=t.getRootElement(),x=n.filter(function(C){return C!==v});return r.select(x),x}),i&&this._registerAction("spaceTool",function(){i.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),r&&l&&this._registerAction("distributeElements",function(v){var x=r.get(),C=v.type;x.length&&l.trigger(x,C)}),r&&u&&this._registerAction("alignElements",function(v){var x=r.get(),C=[],P=v.type;x.length&&(C=yt(x,function(R){return!A(R,"bpmn:Lane")}),u.trigger(C,P))}),r&&g&&this._registerAction("setColor",function(v){var x=r.get();x.length&&g.setColor(x,v)}),r&&f&&this._registerAction("directEditing",function(){var v=r.get();v.length&&f.activate(v[0])}),d&&this._registerAction("find",function(){d.toggle()}),t&&g&&this._registerAction("moveToOrigin",function(){var v=t.getRootElement(),x,C;A(v,"bpmn:Collaboration")?C=n.filter(function(P){return A(P.parent,"bpmn:Collaboration")}):C=n.filter(function(P){return P!==v&&!A(P.parent,"bpmn:SubProcess")}),x=Mn(C),g.moveElements(C,{x:-x.x,y:-x.y},v)}),r&&y&&this._registerAction("replaceElement",function(v){y.triggerEntry("replace","click",v)})};const bj={__depends__:[Ej],editorActions:["type",Kh]};function KP(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,r=t.shape;mt(r,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}KP.$inject=["eventBus"];var zf=10;function pg(e,t,n){return n||(n="round"),Math[n](e/t)*t}var Sj=1200,Cj=800;function ja(e,t,n){var r=!n||n.active!==!1;this._eventBus=t;var i=this;t.on("diagram.init",Cj,function(){i.setActive(r)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],Sj,function(o){var a=o.originalEvent;if(!(!i.active||a&&Xr(a))){var s=o.context,l=s.gridSnappingContext;l||(l=s.gridSnappingContext={}),["x","y"].forEach(function(u){var f={},d=kj(o,u,e);d&&(f.offset=d);var g=Rj(o,u);g&&q(f,g),Ml(o,u)||i.snapEvent(o,u,f)})}})}ja.prototype.snapEvent=function(e,t,n){var r=this.snapValue(e[t],n);hn(e,t,r)};ja.prototype.getGridSpacing=function(){return zf};ja.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=pg(e,zf);var r,i;return t&&t.min&&(r=t.min,Qe(r)&&(r=pg(r+n,zf,"ceil"),e=Math.max(e,r))),t&&t.max&&(i=t.max,Qe(i)&&(i=pg(i+n,zf,"floor"),e=Math.min(e,i))),e-=n,e};ja.prototype.isActive=function(){return this.active};ja.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};ja.prototype.toggleActive=function(){this.setActive(!this.active)};ja.$inject=["elementRegistry","eventBus","config.gridSnapping"];function Rj(e,t){var n=e.context,r=n.createConstraints,i=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;r&&(Hf(t)?(a.x.min=r.left,a.x.max=r.right):(a.y.min=r.top,a.y.max=r.bottom));var l=i.min,u=i.max;return l&&(Hf(t)?Db(s)?a.x.max=l.left:a.x.min=l.right:Nb(s)?a.y.max=l.top:a.y.min=l.bottom),u&&(Hf(t)?Db(s)?a.x.min=u.left:a.x.max=u.right:Nb(s)?a.y.min=u.top:a.y.max=u.bottom),a[t]}function kj(e,t,n){var r=e.context,i=e.shape,o=r.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&Qe(s[t])||(s||(s=o.snapOffset={}),Qe(s[t])||(s[t]=0),!i)||(n.get(i.id)||(Hf(t)?s[t]+=i[t]+i.width/2:s[t]+=i[t]+i.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=i.width/2:/right/.test(a)&&(s[t]+=i.width/2):/top/.test(a)?s[t]-=i.height/2:/bottom/.test(a)&&(s[t]+=i.height/2)),s[t]}function Hf(e){return e==="x"}function Nb(e){return e.indexOf("n")!==-1}function Db(e){return e.indexOf("w")!==-1}function Ds(e,t){ue.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(r){var i=r.context,o=i.hints||{},a=o.autoResize;if(a){var s=i.shape,l=i.newBounds;Br(a)?i.newBounds=n.snapComplex(l,a):i.newBounds=n.snapSimple(s,l)}})}Ds.$inject=["eventBus","gridSnapping","modeling"];De(Ds,ue);Ds.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Ds.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Ds.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,r=/w/.test(t),i=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),i&&(r?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),q(e,o),e};Ds.prototype.snapVertically=function(e,t){var n=this._gridSnapping,r=/n/.test(t),i=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),r&&(i?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),q(e,o),e};var Pj=2e3;function YP(e,t){e.on(["spaceTool.move","spaceTool.end"],Pj,function(n){var r=n.context;if(r.initialized){var i=r.axis,o;i==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}YP.$inject=["eventBus","gridSnapping"];const Tj={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Ds],gridSnappingSpaceToolBehavior:["type",YP]},Aj={__depends__:[Tj],__init__:["gridSnapping"],gridSnapping:["type",ja]};var Mj=2e3;function qP(e,t,n){e.on("autoPlace",Mj,function(r){var i=r.source,o=Ze(i),a=r.shape,s=dk(i,a,n);return["x","y"].forEach(function(l){var u={};s[l]!==o[l]&&(s[l]>o[l]?u.min=s[l]:u.max=s[l],A(a,"bpmn:TextAnnotation")&&(Nj(l)?u.offset=-a.width/2:u.offset=-a.height/2),s[l]=t.snapValue(s[l],u))}),s})}qP.$inject=["eventBus","gridSnapping","elementRegistry"];function Nj(e){return e==="x"}var Dj=1750;function XP(e,t,n){t.on(["create.start","shape.move.start"],Dj,function(r){var i=r.context,o=i.shape,a=e.getRootElement();if(!(!A(o,"bpmn:Participant")||!A(a,"bpmn:Process")||!a.children.length)){var s=i.createConstraints;s&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}XP.$inject=["canvas","eventBus","gridSnapping"];var Oj=3e3;function Yh(e,t,n){ue.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],Oj,function(i){var o=i.context,a=o.connection,s=o.hints||{},l=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||Lj(l)&&n.updateWaypoints(a,r.snapMiddleSegments(l))})}Yh.$inject=["eventBus","gridSnapping","modeling"];De(Yh,ue);Yh.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var r=1;r<e.length-2;r++)n=jj(t,e[r],e[r+1]),e[r]=n[0],e[r+1]=n[1];return e};function Lj(e){return e.length>3}function Ij(e){return e==="h"}function Bj(e){return e==="v"}function jj(e,t,n){var r=xo(t,n),i={};return Ij(r)&&(i.y=e.snapValue(t.y)),Bj(r)&&(i.x=e.snapValue(t.x)),("x"in i||"y"in i)&&(t=q({},t,i),n=q({},n,i)),[t,n]}const $j={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",qP],gridSnappingParticipantBehavior:["type",XP],gridSnappingLayoutConnectionBehavior:["type",Yh]},Fj={__depends__:[Aj,$j],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",KP]};var zj=30,QP=30;function Ju(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(r){var i=r.element,o=r.gfx;if(A(i,"bpmn:Lane"))return n._createParticipantHit(i,o);if(A(i,"bpmn:Participant"))return xt(i)?n._createParticipantHit(i,o):n._createDefaultHit(i,o);if(A(i,"bpmn:SubProcess"))return xt(i)?n._createSubProcessHit(i,o):n._createDefaultHit(i,o)})}Ju.$inject=["eventBus","interactionEvents"];Ju.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Ju.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=Nn(e)?{width:zj,height:e.height}:{width:e.width,height:QP};return this._interactionEvents.createBoxHit(t,"all",n),!0};Ju.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:QP}),!0};const Hj={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Ju]};function qh(e){e.invoke(Wl,this)}De(qh,Wl);qh.$inject=["injector"];qh.prototype.registerBindings=function(e,t){Wl.prototype.registerBindings.call(this,e,t);function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("selectElements",function(r){var i=r.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("find",function(r){var i=r.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}),n("spaceTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["s","S"],i))return t.trigger("spaceTool"),!0}),n("lassoTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["l","L"],i))return t.trigger("lassoTool"),!0}),n("handTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["h","H"],i))return t.trigger("handTool"),!0}),n("globalConnectTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["c","C"],i))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["e","E"],i))return t.trigger("directEditing"),!0}),n("replaceElement",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["r","R"],i))return t.trigger("replaceElement",i),!0})};const Vj={__depends__:[p0],__init__:["keyboardBindings"],keyboardBindings:["type",qh]};var Wj={moveSpeed:1,moveSpeedAccelerated:10},Uj=1500,Ob="left",Lb="up",Ib="right",Bb="down",Gj={ArrowLeft:Ob,Left:Ob,ArrowUp:Lb,Up:Lb,ArrowRight:Ib,Right:Ib,ArrowDown:Bb,Down:Bb},Kj={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function ZP(e,t,n,r,i){var o=this;this._config=q({},Wj,e||{}),t.addListener(Uj,function(a){var s=a.keyEvent,l=Gj[s.key];if(l&&!t.isCmd(s)){var u=t.isShift(s);return o.moveSelection(l,u),!0}}),this.moveSelection=function(a,s){var l=i.get();if(l.length){var u=this._config[s?"moveSpeedAccelerated":"moveSpeed"],f=Kj[a](u),d=r.allowed("elements.move",{shapes:l});d&&n.moveElements(l,f)}}}ZP.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const Yj={__depends__:[p0,ro],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",ZP]};var jb=10;function ep(e,t,n,r){this._dragging=r,this._rules=t;var i=this;function o(l,u){var f=l.shape,d=l.direction,g=l.resizeConstraints,y;l.delta=u,y=DI(f,d,u),l.newBounds=LI(y,g),l.canExecute=i.canResize(l)}function a(l){var u=l.resizeConstraints,f=l.minBounds;u===void 0&&(f===void 0&&(f=i.computeMinResizeBox(l)),l.resizeConstraints={min:Ue(f)})}function s(l){var u=l.shape,f=l.canExecute,d=l.newBounds;if(f){if(d=$C(d),!qj(u,d))return;n.resizeShape(u,d)}}e.on("resize.start",function(l){a(l.context)}),e.on("resize.move",function(l){var u={x:l.dx,y:l.dy};o(l.context,u)}),e.on("resize.end",function(l){s(l.context)})}ep.prototype.canResize=function(e){var t=this._rules,n=ji(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};ep.prototype.activate=function(e,t,n){var r=this._dragging,i,o;if(typeof n=="string"&&(n={direction:n}),i=q({shape:t},n),o=i.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,JP(t,o),"resize",{autoActivate:!0,cursor:Xj(o),data:{shape:t,context:i}})};ep.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,r,i;return r=e.minDimensions||{width:jb,height:jb},i=Bk(t,e.childrenBoxPadding),II(n,t,r,i)};ep.$inject=["eventBus","rules","modeling","dragging"];function qj(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function JP(e,t){var n=Ze(e),r=Ue(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Xj(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var $b="djs-resizing",Fb="resize-not-ok",Qj=500;function eT(e,t,n){function r(o){var a=o.shape,s=o.newBounds,l=o.frame;l||(l=o.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,$b)),s.width>5&&be(l,{x:s.x,width:s.width}),s.height>5&&be(l,{y:s.y,height:s.height}),o.canExecute?St(l).remove(Fb):St(l).add(Fb)}function i(o){var a=o.shape,s=o.frame;s&&Sn(o.frame),t.removeMarker(a,$b)}e.on("resize.move",Qj,function(o){r(o.context)}),e.on("resize.cleanup",function(o){i(o.context)})}eT.$inject=["eventBus","canvas","previewSupport"];var df=-6,hf=8,mf=20,kc="djs-resizer",Zj=["n","w","s","e","nw","ne","se","sw"];function $a(e,t,n,r){this._resize=r,this._canvas=t;var i=this;e.on("selection.changed",function(o){var a=o.newSelection;i.removeResizers(),a.length===1&&W(a,_r(i.addResizer,i))}),e.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(i.removeResizers(),i.addResizer(a))})}$a.prototype.makeDraggable=function(e,t,n){var r=this._resize;function i(o){Ta(o)&&r.activate(o,e,n)}ot.bind(t,"mousedown",i),ot.bind(t,"touchstart",i)};$a.prototype._createResizer=function(e,t,n,r){var i=this._getResizersParent(),o=Jj(r),a=ze("g");St(a).add(kc),St(a).add(kc+"-"+e.id),St(a).add(kc+"-"+r),et(i,a);var s=ze("rect");be(s,{x:-hf/2+o.x,y:-hf/2+o.y,width:hf,height:hf}),St(s).add(kc+"-visual"),et(a,s);var l=ze("rect");return be(l,{x:-mf/2+o.x,y:-mf/2+o.y,width:mf,height:mf}),St(l).add(kc+"-hit"),et(a,l),Af(a,t,n),a};$a.prototype.createResizer=function(e,t){var n=JP(e,t),r=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,r,t)};$a.prototype.addResizer=function(e){var t=this;jt(e)||!this._resize.canResize({shape:e})||W(Zj,function(n){t.createResizer(e,n)})};$a.prototype.removeResizers=function(){var e=this._getResizersParent();Qd(e)};$a.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};$a.$inject=["eventBus","canvas","selection","resize"];function Jj(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-df:e.indexOf("w")!==-1&&(t.x=df),e.indexOf("s")!==-1?t.y=-df:e.indexOf("n")!==-1&&(t.y=df),t}const tT={__depends__:[oo,Lo,ql],__init__:["resize","resizePreview","resizeHandles"],resize:["type",ep],resizePreview:["type",eT],resizeHandles:["type",$a]};var e$=2e3;function tp(e,t,n,r,i,o,a){this._bpmnFactory=t,this._canvas=n,this._modeling=i,this._textRenderer=a,r.registerProvider(this),e.on("element.dblclick",function(l){s(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){r.isActive()&&r.complete()}),e.on(["shape.remove","connection.remove"],e$,function(l){r.isActive(l.element)&&r.cancel()}),e.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),e.on("directEditing.activate",function(l){o.removeResizers()}),e.on("create.end",500,function(l){var u=l.context,f=u.shape,d=l.context.canExecute,g=l.isTouch;g||d&&(u.hints&&u.hints.createElementsBehavior===!1||s(f))}),e.on("autoPlace.end",500,function(l){s(l.shape)});function s(l,u){(u||mt(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||Mx(l))&&r.activate(l)}}tp.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];tp.prototype.activate=function(e){var t=qr(e);if(t!==void 0){var n={text:t},r=this.getEditingBBox(e);q(n,r);var i={},o=n.style||{};return q(o,{backgroundColor:null,border:null}),(mt(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Mx(e))&&q(i,{centerVertically:!0}),_s(e)&&(q(i,{autoResize:!0}),q(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),A(e,"bpmn:TextAnnotation")&&(q(i,{resizable:!0,autoResize:!0}),q(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),q(n,{options:i,style:o}),n}};tp.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},o={x:r.x,y:r.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),u=l.fontSize*a,f=l.lineHeight,d=s.fontSize*a,g=s.lineHeight,y={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(A(e,"bpmn:Lane")||r$(e)){var v=Nn(e),x=v?{width:r.height,height:30*a,x:r.x-r.height/2+15*a,y:i.y-30*a/2}:{width:r.width,height:30*a};q(o,x),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:v?"rotate(-90deg)":null})}if(n$(e)){var C=Nn(e),P=C?{width:r.width,height:r.height}:{width:r.height,height:r.width,x:i.x-r.height/2,y:i.y-r.width/2};q(o,P),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:C?null:"rotate(-90deg)"})}(mt(e,["bpmn:Task","bpmn:CallActivity"])||Mx(e))&&(q(o,{width:r.width,height:r.height}),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),t$(e)&&(q(o,{width:r.width,x:r.x}),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var R=90*a,E=7*a,b=4*a;if(n.labelTarget&&(q(o,{width:R,height:r.height+E+b,x:i.x-R/2,y:r.y-E}),q(y,{fontSize:u+"px",lineHeight:f,paddingTop:E+"px",paddingBottom:b+"px"})),_s(n)&&!oh(n)&&!Rt(n)){var D=o0(e),B=t.getAbsoluteBBox({x:D.x,y:D.y,width:0,height:0}),z=u+E+b;q(o,{width:R,height:z,x:B.x-R/2,y:B.y-z/2}),q(y,{fontSize:u+"px",lineHeight:f,paddingTop:E+"px",paddingBottom:b+"px"})}return A(e,"bpmn:TextAnnotation")&&(q(o,{width:r.width,height:r.height,minWidth:30*a,minHeight:10*a}),q(y,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:d+"px",lineHeight:g})),{bounds:o,style:y}};tp.prototype.update=function(e,t,n,r){var i,o;A(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),i={x:e.x,y:e.y,width:e.width/o.width*r.width,height:e.height/o.height*r.height}),i$(t)&&(t=null),this._modeling.updateLabel(e,t,i)};function Mx(e){return A(e,"bpmn:SubProcess")&&!xt(e)}function t$(e){return A(e,"bpmn:SubProcess")&&xt(e)}function n$(e){return A(e,"bpmn:Participant")&&!xt(e)}function r$(e){return A(e,"bpmn:Participant")&&xt(e)}function i$(e){return!e||!e.trim()}var zb="djs-element-hidden",Hb="djs-label-hidden";function nT(e,t,n){var r=this,i=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(l){var u=l.active;if(o=u.element.label||u.element,A(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=ze("g");var f=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),d=r.path=ze("path");be(d,{d:f,strokeWidth:2,stroke:o$(o)}),et(s,d),et(i,s),Vn(s,o.x,o.y)}A(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,zb):(A(o,"bpmn:Task")||A(o,"bpmn:CallActivity")||A(o,"bpmn:SubProcess")||A(o,"bpmn:Participant")||A(o,"bpmn:Lane"))&&t.addMarker(o,Hb)}),e.on("directEditing.resize",function(l){if(A(o,"bpmn:TextAnnotation")){var u=l.height,f=l.dy,d=Math.max(o.height/a.height*(u+f),0),g=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:d,position:{mx:0,my:0}});be(r.path,{d:g})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var u=l.active;u&&(t.removeMarker(u.element.label||u.element,zb),t.removeMarker(o,Hb)),o=void 0,a=void 0,s&&(Sn(s),s=void 0)})}nT.$inject=["eventBus","canvas","pathMap"];function o$(e,t){var n=Ct(e);return n.get("stroke")||t||"black"}const a$={__depends__:[a0,tT,WP],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",tp],labelEditingPreview:["type",nT]};var s$=new Ou("tt");function l$(e){var t=zt('<div class="djs-tooltip-container" />');return Xn(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function c$(e,t,n){Xn(e,{left:t+"px",top:n+"px"})}function Nx(e,t){e.style.display=t===!1?"none":""}var rT="djs-tooltip",fg="."+rT;function br(e,t){this._eventBus=e,this._canvas=t,this._ids=s$,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=l$(t.getContainer());var n=this;Dr.bind(this._tooltipRoot,fg,"mousedown",function(r){r.stopPropagation()}),Dr.bind(this._tooltipRoot,fg,"mouseover",function(r){n.trigger("mouseover",r)}),Dr.bind(this._tooltipRoot,fg,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}br.$inject=["eventBus","canvas"];br.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=q({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};br.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,r=this.get(lr(n,"data-tooltip-id"));r&&(e==="mouseover"&&r.timeout&&this.clearTimeout(r),e==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};br.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};br.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};br.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};br.prototype.remove=function(e){var t=this.get(e);t&&(no(t.html),no(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};br.prototype.show=function(){Nx(this._tooltipRoot)};br.prototype.hide=function(){Nx(this._tooltipRoot,!1)};br.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};br.prototype._addTooltip=function(e){var t=e.id,n=e.html,r,i=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),Br(n)&&(n=zt(n)),r=zt('<div data-tooltip-id="'+t+'" class="'+rT+'">'),Xn(r,{position:"absolute"}),r.appendChild(n),e.type&&nn(r).add("djs-tooltip-"+e.type),e.className&&nn(r).add(e.className),e.htmlContainer=r,i.appendChild(r),this._tooltips[t]=e,this._updateTooltip(e)};br.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;c$(n,t.x,t.y)};br.prototype._updateTooltipVisibilty=function(e){W(this._tooltips,function(t){var n=t.show,r=t.htmlContainer,i=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(i=!1),Nx(r,i))})};br.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const u$={__init__:["tooltips"],tooltips:["type",br]};var p$="flow elements must be children of pools/participants";function iT(e,t,n){function r(i,o,a){t.add({position:{x:i.x+5,y:i.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(i){var o=i.context,a=o.shape,s=o.target;A(s,"bpmn:Collaboration")&&A(a,"bpmn:FlowNode")&&r(i,n(p$))})}iT.$inject=["eventBus","tooltips","translate"];const f$={__depends__:[u$],__init__:["modelingFeedback"],modelingFeedback:["type",iT]};var d$=500,h$=1250,m$=1500,Ad=Math.round;function g$(e){return{x:e.x+Ad(e.width/2),y:e.y+Ad(e.height/2)}}function oT(e,t,n,r,i){function o(s,l,u,f){return i.allowed("elements.move",{shapes:s,delta:l,position:u,target:f})}e.on("shape.move.start",m$,function(s){var l=s.context,u=s.shape,f=r.get().slice();f.indexOf(u)===-1&&(f=[u]),f=y$(f),q(l,{shapes:f,validatedShapes:f,shape:u})}),e.on("shape.move.start",h$,function(s){var l=s.context,u=l.validatedShapes,f;if(f=l.canExecute=o(u),!f)return!1}),e.on("shape.move.move",d$,function(s){var l=s.context,u=l.validatedShapes,f=s.hover,d={x:s.dx,y:s.dy},g={x:s.x,y:s.y},y;if(y=o(u,d,g,f),l.delta=d,l.canExecute=y,y===null){l.target=null;return}l.target=f}),e.on("shape.move.end",function(s){var l=s.context,u=l.delta,f=l.canExecute,d=f==="attach",g=l.shapes;if(f===!1)return!1;u.x=Ad(u.x),u.y=Ad(u.y),!(u.x===0&&u.y===0)&&n.moveElements(g,u,l.target,{primaryShape:l.shape,attach:d})}),e.on("element.mousedown",function(s){if(Ta(s)){var l=Hl(s);if(!l)throw new Error("must supply DOM mousedown event");return a(l,s.element)}});function a(s,l,u,f){if(jn(u)&&(f=u,u=!1),!(l.waypoints||!l.parent)&&!St(s.target).has("djs-hit-no-move")){var d=g$(l);return t.init(s,d,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:l,context:f||{}}}),!0}}this.start=a}oT.$inject=["eventBus","dragging","modeling","selection","rules"];function y$(e){var t=jl(e,"id");return yt(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var Vb=499,dg="djs-dragging",Wb="drop-ok",Ub="drop-not-ok",Gb="new-parent",Kb="attach-ok";function aT(e,t,n,r){function i(l){var u=o(l),f=v$(u);return f}function o(l){var u=ku(l,!0),f=u.flatMap(y=>(y.incoming||[]).concat(y.outgoing||[])),d=u.concat(f),g=[...new Set(d)];return g}function a(l,u){[Kb,Wb,Ub,Gb].forEach(function(f){f===u?t.addMarker(l,f):t.removeMarker(l,f)})}function s(l,u,f){r.addDragger(u,l.dragGroup),f&&t.addMarker(u,dg),l.allDraggedElements?l.allDraggedElements.push(u):l.allDraggedElements=[u]}e.on("shape.move.start",Vb,function(l){var u=l.context,f=u.shapes,d=u.allDraggedElements,g=i(f);if(!u.dragGroup){var y=ze("g");be(y,n.cls("djs-drag-group",["no-events"]));var v=t.getActiveLayer();et(v,y),u.dragGroup=y}g.forEach(function(x){r.addDragger(x,u.dragGroup)}),d?d=zv([d,o(f)]):d=o(f),W(d,function(x){t.addMarker(x,dg)}),u.allDraggedElements=d,u.differentParents=x$(f)}),e.on("shape.move.move",Vb,function(l){var u=l.context,f=u.dragGroup,d=u.target,g=u.shape.parent,y=u.canExecute;d&&(y==="attach"?a(d,Kb):u.canExecute&&g&&d.id!==g.id?a(d,Gb):a(d,u.canExecute?Wb:Ub)),Vn(f,l.dx,l.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(l){var u=l.context,f=u.target;f&&a(f,null)}),e.on("shape.move.cleanup",function(l){var u=l.context,f=u.allDraggedElements,d=u.dragGroup;W(f,function(g){t.removeMarker(g,dg)}),d&&Sn(d)}),this.makeDraggable=s}aT.$inject=["eventBus","canvas","styles","previewSupport"];function v$(e){var t=yt(e,function(n){return jt(n)?Mt(e,Li({id:n.source.id}))&&Mt(e,Li({id:n.target.id})):!0});return t}function x$(e){return AM(jl(e,function(t){return t.parent&&t.parent.id}))!==1}const _$={__depends__:[ph,ro,l0,oo,Lo,ql],__init__:["move","movePreview"],move:["type",oT],movePreview:["type",aT]};var sT=".djs-palette-toggle",lT=".entry",w$=sT+", "+lT,Wy="djs-palette-",E$="shown",Uy="open",Yb="two-column",b$=1e3;function gn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(r){var i=r.tool;n.updateToolHighlight(i)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}gn.$inject=["eventBus","canvas"];gn.prototype.registerProvider=function(e,t){t||(t=e,e=b$),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};gn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(C$,{})};gn.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};gn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),r=this._container=zt(gn.HTML_MARKUP);n.appendChild(r),nn(n).add(Wy+E$),Dr.bind(r,w$,"click",function(i){var o=i.delegateTarget;if(Xd(o,sT))return e.toggle();e.trigger("click",i)}),ot.bind(r,"mousedown",function(i){i.stopPropagation()}),Dr.bind(r,lT,"dragstart",function(i){e.trigger("dragstart",i)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})};gn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};gn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,r=this._eventBus,i,o=nn(n),a=nn(t);"twoColumn"in e?i=e.twoColumn:i=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(Yb,i),a.toggle(Wy+Yb,i),"open"in e&&(o.toggle(Uy,e.open),a.toggle(Wy+Uy,e.open)),r.fire("palette.changed",{twoColumn:i,open:this.isOpen()})};gn.prototype._update=function(){var e=It(".djs-palette-entries",this._container),t=this._entries=this.getEntries();qd(e),W(t,function(n,r){var i=n.group||"default",o=It("[data-group="+hu(i)+"]",e);o||(o=zt('<div class="group"></div>'),lr(o,"data-group",i),e.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=zt(a);if(o.appendChild(s),!n.separator&&(lr(s,"data-action",r),n.title&&lr(s,"title",n.title),n.className&&S$(s,n.className),n.imageUrl)){var l=zt("<img>");lr(l,"src",n.imageUrl),s.appendChild(l)}}),this.open()};gn.prototype.trigger=function(e,t,n){var r,i,o=t.delegateTarget||t.target;return o?(r=lr(o,"data-action"),i=t.originalEvent||t,this.triggerEntry(r,e,i,n)):t.preventDefault()};gn.prototype.triggerEntry=function(e,t,n,r){var i=this._entries,o,a;if(o=i[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(Cn(a)){if(t==="click")return a(n,r)}else if(a[t])return a[t](n,r);n.preventDefault()}};gn.prototype._layoutChanged=function(){this._toggleState({})};gn.prototype._needsCollapse=function(e,t){var n=50,r=Object.keys(t).length*46;return e<r+n};gn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};gn.prototype.open=function(){this._toggleState({open:!0})};gn.prototype.toggle=function(){this.isOpen()?this.close():this.open()};gn.prototype.isActiveTool=function(e){return e&&this._activeTool===e};gn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=It(".djs-palette-entries",this._container),this._toolsContainer=It("[data-group=tools]",t)),n=this._toolsContainer,W(n.children,function(r){var i=r.getAttribute("data-action");if(i){var o=nn(r);i=i.replace("-tool",""),o.contains("entry")&&i===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};gn.prototype.isOpen=function(){return nn(this._container).has(Uy)};gn.prototype._getParentContainer=function(){return this._canvas.getContainer()};gn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function S$(e,t){var n=nn(e),r=at(t)?t:t.split(/\s+/g);r.forEach(function(i){n.add(i)})}function C$(e,t){var n=t.getPaletteEntries();return Cn(n)?n(e):(W(n,function(r,i){e[i]=r}),e)}const R$={__init__:["palette"],palette:["type",gn]};var cT="crosshair";function Os(e,t,n,r,i,o,a){this._selection=i,this._dragging=n,this._mouse=a;var s=this,l={create:function(u){var f=t.getActiveLayer(),d;d=u.frame=ze("rect"),be(d,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),et(f,d)},update:function(u){var f=u.frame,d=u.bbox;be(f,{x:d.x,y:d.y,width:d.width,height:d.height})},remove:function(u){u.frame&&Sn(u.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(u){var f=u.originalEvent.target;!u.hover&&!(f instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(u.originalEvent,!0)})}),e.on("lasso.end",0,function(u){var f=u.context,d=hg(u),g=r.filter(function(v){return v}),y=_d(u);s.select(g,d,y?f.selection:[])}),e.on("lasso.start",function(u){var f=u.context;f.bbox=hg(u),l.create(f),f.selection=i.get()}),e.on("lasso.move",function(u){var f=u.context;f.bbox=hg(u),l.update(f)}),e.on("lasso.cleanup",function(u){var f=u.context;l.remove(f)}),e.on("element.mousedown",1500,function(u){if(_d(u))return s.activateLasso(u.originalEvent),!0})}Os.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];Os.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:cT,data:{context:{}}})};Os.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:cT,data:{context:{}},keepSelection:!0})};Os.prototype.select=function(e,t,n=[]){var r=EN(e,t);this._selection.select([...n,...Hv(r)])};Os.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Os.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function hg(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},r;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?r={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?r={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?r={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const k$={__depends__:[Nh,$u],__init__:["lassoTool"],lassoTool:["type",Os]};var mg=1500,uT="grab";function Xl(e,t,n,r,i,o){this._dragging=n,this._mouse=o;var a=this,s=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",mg,function(l){if(mu(l))return a.activateMove(l.originalEvent,!0),!1}),s&&s.addListener(mg,function(l){if(!(!qb(l.keyEvent)||a.isActive())){var u=a._mouse.getLastMoveEvent();a.activateMove(u,!!u)}},"keyboard.keydown"),s&&s.addListener(mg,function(l){!qb(l.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(l){var u=l.originalEvent.target;if(!l.hover&&!(u instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(l.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(l){var u=t.viewbox().scale;t.scroll({dx:l.dx*u,dy:l.dy*u})}),e.on("hand.move.end",function(l){var u=l.context,f=u.reactivate;return!mu(l)&&f&&e.once("hand.move.ended",function(d){a.activateHand(d.originalEvent,!0,!0)}),!1})}Xl.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Xl.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:uT,data:{context:n||{}}})};Xl.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:uT,data:{context:{reactivate:n}}})};Xl.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Xl.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function qb(e){return Tn("Space",e)}const P$={__depends__:[Nh,$u],__init__:["handTool"],handTool:["type",Xl]};var Xb="connect-ok",Qb="connect-not-ok";function Ql(e,t,n,r,i,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(l){var u=l.context,f=l.hover,d=u.canStartConnect=s.canStartConnect(f);d!==null&&(u.startTarget=f,r.addMarker(f,d?Xb:Qb))}),e.on(["global-connect.out","global-connect.cleanup"],function(l){var u=l.context.startTarget,f=l.context.canStartConnect;u&&r.removeMarker(u,f?Xb:Qb)}),e.on(["global-connect.ended"],function(l){var u=l.context,f=u.startTarget,d={x:l.x,y:l.y},g=s.canStartConnect(f);if(g)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,f,d)}),!1})}Ql.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Ql.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};Ql.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};Ql.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};Ql.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const T$={__depends__:[R0,oo,Lo,Nh,$u],globalConnect:["type",Ql]};function Dx(e,t,n,r,i,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=i,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}Dx.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Dx.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,r=this._spaceTool,i=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function l(d,g,y,v,x){function C(P){var R=n.createShape(q({type:d},x));t.start(P,R)}return{group:g,className:y,title:v,action:{dragstart:C,click:C}}}function u(d){var g=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),y=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:g});t.start(d,[g,y],{hints:{autoSelect:[g]}})}function f(d){t.start(d,n.createParticipantShape())}return q(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(d){o.activateHand(d)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(d){i.activateSelection(d)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(d){r.activateSelection(d)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(d){a.start(d)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:u,click:u}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:f,click:f}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};const A$={__depends__:[R$,Mh,RP,k$,P$,T$,sh],__init__:["paletteProvider"],paletteProvider:["type",Dx]};var M$=250;function Ox(e,t,n,r,i){ue.call(this,e);function o(s){var l=s.canExecute.replacements;W(l,function(u){var f=u.oldElementId,d={type:u.newElementType};if(!s.visualReplacements[f]){var g=t.get(f);q(d,{x:g.x,y:g.y});var y=n.createShape(d);r.addShape(y,g.parent);var v=It('[data-element-id="'+hu(g.id)+'"]',s.dragGroup);v&&be(v,{display:"none"});var x=i.addDragger(y,s.dragGroup);s.visualReplacements[f]=x,r.removeShape(y)}})}function a(s){var l=s.visualReplacements;W(l,function(u,f){var d=It('[data-element-id="'+hu(f)+'"]',s.dragGroup);d&&be(d,{display:"inline"}),u.remove(),l[f]&&delete l[f]})}e.on("shape.move.move",M$,function(s){var l=s.context,u=l.canExecute;l.visualReplacements||(l.visualReplacements={}),u&&u.replacements?o(l):a(l)})}Ox.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];De(Ox,ue);const N$={__depends__:[ql],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Ox]};var D$=1250,gg=40,O$=20,L$=10,Zb=20,pT=["x","y"],I$=Math.abs;function fT(e){e.on(["connect.hover","connect.move","connect.end"],D$,function(t){var n=t.context,r=n.canExecute,i=n.start,o=n.hover,a=n.source,s=n.target;t.originalEvent&&Xr(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&o&&B$(t,o,z$(o)),o&&F$(r,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=gi(i),mt(o,["bpmn:Event","bpmn:Gateway"])&&Jb(t,gi(o)),mt(o,["bpmn:Task","bpmn:SubProcess"])&&j$(t,o),A(a,"bpmn:BoundaryEvent")&&s===a.host&&$$(t)):dT(r,"bpmn:MessageFlow")?(A(i,"bpmn:Event")&&(n.connectionStart=gi(i)),A(o,"bpmn:Event")&&Jb(t,gi(o))):n.connectionStart=n.initialConnectionStart)})}fT.$inject=["eventBus"];function B$(e,t,n){pT.forEach(function(r){var i=hT(r,t);e[r]<t[r]+n?hn(e,r,t[r]+n):e[r]>t[r]+i-n&&hn(e,r,t[r]+i-n)})}function j$(e,t){var n=gi(t);pT.forEach(function(r){H$(e,t,r)&&hn(e,r,n[r])})}function $$(e){var t=e.context,n=t.source,r=t.target;if(!V$(t)){var i=gi(n),o=tr(i,r,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var l=e[s],u;I$(l-i[s])<gg&&(l>i[s]?u=i[s]+gg:u=i[s]-gg,hn(e,s,u))})}}function Jb(e,t){hn(e,"x",t.x),hn(e,"y",t.y)}function dT(e,t){return e&&e.type===t}function F$(e,t){return ba(t,function(n){return dT(e,n)})}function hT(e,t){return e==="x"?t.width:t.height}function z$(e){return A(e,"bpmn:Task")?L$:O$}function H$(e,t,n){return e[n]>t[n]+Zb&&e[n]<t[n]+hT(n,t)-Zb}function V$(e){var t=e.hover,n=e.source;return t&&n&&t===n}function Fa(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Fa.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Fa.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Fa.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Fa.prototype.getSnapLocations=function(){return this._snapLocations};Fa.prototype.setSnapLocations=function(e){this._snapLocations=e};Fa.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Xh,n.initDefaults(this._defaultSnaps)),n};function Xh(){this._snapValues={}}Xh.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Xh.prototype.snap=function(e,t,n,r){var i=this._snapValues[t];return i&&iI(e[n],i[n],r)};Xh.prototype.initDefaults=function(e){var t=this;W(e||{},function(n,r){W(n,function(i){t.add(r,i)})})};var W$=1250;function ao(e,t,n){var r=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(i){r.initSnap(i)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],W$,function(i){var o=i.context,a=o.shape,s=o.snapContext,l=o.target;if(!(i.originalEvent&&Xr(i.originalEvent))&&!(Ml(i)||!l)){var u=s.pointsForTarget(l);u.initialized||(u=r.addSnapTargetPoints(u,a,l),u.initialized=!0),n.snap(i,u)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}ao.$inject=["elementRegistry","eventBus","snapping"];ao.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,r=n.shape,i=n.snapContext;i||(i=n.snapContext=new Fa);var o;t.get(r.id)?o=gi(r,e):o={x:e.x+gi(r).x,y:e.y+gi(r).y};var a={x:o.x-r.width/2,y:o.y-r.height/2},s={x:o.x+r.width/2,y:o.y+r.height/2};return i.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Rt(r)||(i.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),i.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),i};ao.prototype.addSnapTargetPoints=function(e,t,n){var r=this.getSnapTargets(t,n);return W(r,function(i){if(Rt(i)){Rt(t)&&e.add("mid",gi(i));return}if(jt(i)){if(i.waypoints.length<3)return;var o=i.waypoints.slice(1,-1);W(o,function(a){e.add("mid",a)});return}e.add("mid",gi(i))}),!Qe(t.x)||!Qe(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",gi(t)),e};ao.prototype.getSnapTargets=function(e,t){return Tk(t).filter(function(n){return!U$(n)})};function U$(e){return!!e.hidden}var eS=1500;function Zl(e,t){t.invoke(ao,this),e.on(["create.move","create.end"],eS,q$),e.on(["create.move","create.end","shape.move.move","shape.move.end"],eS,function(n){var r=n.context,i=r.canExecute,o=r.target,a=i&&(i==="attach"||i.attach);a&&!Ml(n)&&G$(n,o)})}De(Zl,ao);Zl.$inject=["eventBus","injector"];Zl.prototype.initSnap=function(e){var t=ao.prototype.initSnap.call(this,e),n=e.shape,r=!!this._elementRegistry.get(n.id);return W(n.outgoing,function(i){var o=i.waypoints[0];o=o.original||o,t.setSnapOrigin(i.id+"-docking",nS(o,r,e))}),W(n.incoming,function(i){var o=i.waypoints[i.waypoints.length-1];o=o.original||o,t.setSnapOrigin(i.id+"-docking",nS(o,r,e))}),A(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};Zl.prototype.addSnapTargetPoints=function(e,t,n){ao.prototype.addSnapTargetPoints.call(this,e,t,n);var r=this.getSnapTargets(t,n);W(r,function(o){(Y$(o)||K$([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",kk(o)),e.add("bottom-right",Pk(o)))});var i=this._elementRegistry;return W(t.incoming,function(o){if(i.get(t.id)){tS(r,o.source)||e.add("mid",Ze(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),W(t.outgoing,function(o){if(i.get(t.id)){tS(r,o.target)||e.add("mid",Ze(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),A(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};Zl.prototype.getSnapTargets=function(e,t){return ao.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!A(n,"bpmn:Lane")})};function G$(e,t){var n=Ue(t),r=tP(e,t),i=e.context,o=i.shape,a;o.parent?a={x:0,y:0}:a=Ze(o),/top/.test(r)?hn(e,"y",n.top-a.y):/bottom/.test(r)&&hn(e,"y",n.bottom-a.y),/left/.test(r)?hn(e,"x",n.left-a.x):/right/.test(r)&&hn(e,"x",n.right-a.x)}function K$(e,t){return e.every(function(n){return A(n,t)})}function Y$(e){return A(e,"bpmn:SubProcess")&&xt(e)?!0:A(e,"bpmn:Participant")}function q$(e){var t=e.context,n=t.createConstraints;if(n){var r=n.top,i=n.right,o=n.bottom,a=n.left;(a&&a>=e.x||i&&i<=e.x)&&hn(e,"x",e.x),(r&&r>=e.y||o&&o<=e.y)&&hn(e,"y",e.y)}}function tS(e,t){return e.indexOf(t)!==-1}function nS(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var X$=1250;function np(e,t){var n=this;e.on(["resize.start"],function(r){n.initSnap(r)}),e.on(["resize.move","resize.end"],X$,function(r){var i=r.context,o=i.shape,a=o.parent,s=i.direction,l=i.snapContext;if(!(r.originalEvent&&Xr(r.originalEvent))&&!Ml(r)){var u=l.pointsForTarget(a);u.initialized||(u=n.addSnapTargetPoints(u,o,a,s),u.initialized=!0),J$(s)&&hn(r,"x",r.x),e7(s)&&hn(r,"y",r.y),t.snap(r,u)}}),e.on(["resize.cleanup"],function(){t.hide()})}np.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.direction,i=t.snapContext;i||(i=t.snapContext=new Fa);var o=mT(n,r);return i.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),i};np.prototype.addSnapTargetPoints=function(e,t,n,r){var i=this.getSnapTargets(t,n);return W(i,function(o){e.add("corner",Pk(o)),e.add("corner",kk(o))}),e.add("corner",mT(t,r)),e};np.$inject=["eventBus","snapping"];np.prototype.getSnapTargets=function(e,t){return Tk(t).filter(function(n){return!Q$(n,e)&&!jt(n)&&!Z$(n)&&!Rt(n)})};function mT(e,t){var n=Ze(e),r=Ue(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Q$(e,t){return e.host===t}function Z$(e){return!!e.hidden}function J$(e){return e==="n"||e==="s"}function e7(e){return e==="e"||e==="w"}var t7=7,n7=1e3;function za(e){this._canvas=e,this._asyncHide=EC(_r(this.hide,this),n7)}za.$inject=["canvas"];za.prototype.snap=function(e,t){var n=e.context,r=n.snapContext,i=r.getSnapLocations(),o={x:Ml(e,"x"),y:Ml(e,"y")};W(i,function(a){var s=r.getSnapOrigin(a),l={x:e.x+s.x,y:e.y+s.y};if(W(["x","y"],function(u){var f;o[u]||(f=t.snap(l,a,u,t7),f!==void 0&&(o[u]={value:f,originValue:f-s[u]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),W(["x","y"],function(a){var s=o[a];jn(s)&&hn(e,a,s.originValue)})};za.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=ze("path");return be(n,{d:"M0,0 L0,0"}),St(n).add("djs-snap-line"),et(t,n),{update:function(r){Qe(r)?e==="horizontal"?be(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):be(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):be(n,{display:"none"})}}};za.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};za.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};za.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};za.prototype.hide=function(){W(this._snapLines,function(e){e.update()})};const r7={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",ao],resizeSnapping:["type",np],snapping:["type",za]},i7={__depends__:[r7],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",fT],createMoveSnapping:["type",Zl]};var gT=300;function tt(e,t,n,r){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=It(tt.INPUT_SELECTOR,this._container),this._resultsContainer=It(tt.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}tt.$inject=["canvas","eventBus","selection","translate"];tt.prototype._bindEvents=function(){var e=this;function t(n,r,i,o){e._eventMaps.push({el:n,type:i,listener:Dr.bind(n,r,i,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,tt.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,tt.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,tt.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,tt.INPUT_SELECTOR,"keydown",function(n){Tn("ArrowUp",n)&&n.preventDefault(),Tn("ArrowDown",n)&&n.preventDefault()}),t(this._container,tt.INPUT_SELECTOR,"keyup",function(n){if(Tn("Escape",n))return e.close();if(Tn("Enter",n)){var r=e._getCurrentResult();return r?e._select(r):e.close(!1)}if(Tn("ArrowUp",n))return e._scrollToDirection(!0);if(Tn("ArrowDown",n))return e._scrollToDirection();Tn(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};tt.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Dr.unbind(e.el,e.type,e.listener)})};tt.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(i){return!t._canvas.getRootElements().includes(i.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(i){var o=i.element.id,a=t._createResultNode(i,o);t._results[o]={element:i.element,node:a}});var r=It(tt.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}};tt.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};tt.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<r&&(this._resultsContainer.scrollTop=r)}};tt.prototype._clearResults=function(){qd(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};tt.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")};tt.prototype._getCurrentResult=function(){return It(tt.RESULT_SELECTED_SELECTOR,this._resultsContainer)};tt.prototype._createResultNode=function(e,t){var n=zt(tt.RESULT_HTML);return e.primaryTokens.length>0&&rS(n,e.primaryTokens,tt.RESULT_PRIMARY_HTML),rS(n,e.secondaryTokens,tt.RESULT_SECONDARY_HTML),lr(n,tt.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};tt.prototype.registerProvider=function(e){this._searchProvider=e};tt.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,nn(this._canvas.getContainer()).add("djs-search-open"),nn(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};tt.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,nn(this._canvas.getContainer()).remove("djs-search-open"),nn(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))};tt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};tt.prototype.isOpen=function(){return this._open};tt.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&nn(t).remove(tt.RESULT_SELECTED_CLASS);var n=lr(e,tt.RESULT_ID_ATTRIBUTE),r=this._results[n].element;nn(e).add(tt.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(r,{top:gT}),this._selection.select(r),this._canvas.addMarker(r,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",r)}};tt.prototype._select=function(e){var t=lr(e,tt.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:gT}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};tt.prototype._getBoxHtml=function(){const e=zt(tt.BOX_HTML),t=It(tt.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function rS(e,t,n){var r=o7(t),i=zt(n);i.innerHTML=r,e.appendChild(i)}function o7(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+tt.RESULT_HIGHLIGHT_CLASS+'">'+wy(n.matched)+"</b>":t+=wy(n.normal)}),t!==""?t:null}tt.CONTAINER_SELECTOR=".djs-search-container";tt.INPUT_SELECTOR=".djs-search-input input";tt.RESULTS_CONTAINER_SELECTOR=".djs-search-results";tt.RESULT_SELECTOR=".djs-search-result";tt.RESULT_SELECTED_CLASS="djs-search-result-selected";tt.RESULT_SELECTED_SELECTOR="."+tt.RESULT_SELECTED_CLASS;tt.RESULT_ID_ATTRIBUTE="data-result-id";tt.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";tt.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;tt.RESULT_HTML='<div class="djs-search-result"></div>';tt.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';tt.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const a7={__depends__:[sh,ch,ro],searchPad:["type",tt]};function Lx(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}Lx.$inject=["elementRegistry","searchPad","canvas"];Lx.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(r){return!Rt(r)&&!t.includes(r)});return n.reduce(function(r,i){var o=qr(i),a=aS(o,e),s=aS(i.id,e);return Md(a)||Md(s)?[...r,{primaryTokens:a,secondaryTokens:s,element:i}]:r},[]).sort(function(r,i){return iS(r.primaryTokens,i.primaryTokens)||iS(r.secondaryTokens,i.secondaryTokens)||oS(qr(r.element),qr(i.element))||oS(r.element.id,i.element.id)}).map(function(r){return{element:r.element,primaryTokens:r.primaryTokens.map(function(i){return _i(i,["index"])}),secondaryTokens:r.secondaryTokens.map(function(i){return _i(i,["index"])})}})};function Gy(e){return"matched"in e}function Md(e){return e.find(Gy)}function iS(e,t){const n=Md(e),r=Md(t);if(n&&!r)return-1;if(!n&&r)return 1;if(!n&&!r)return 0;const i=e.find(Gy),o=t.find(Gy);return i.index<o.index?-1:i.index>o.index?1:0}function oS(e="",t=""){return e.localeCompare(t)}function aS(e,t){var n=[],r=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var i=e.indexOf(t);return i>-1?(i!==0&&n.push({normal:r.slice(0,i),index:0}),n.push({matched:r.slice(i,i+t.length),index:i}),t.length+i<e.length&&n.push({normal:r.slice(i+t.length),index:i+t.length})):n.push({normal:r,index:0}),n}const s7={__depends__:[a7],__init__:["bpmnSearch"],bpmnSearch:["type",Lx]};var l7='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Ji(e){Du.call(this,e)}De(Ji,Du);Ji.Viewer=Aa;Ji.NavigatedViewer=gu;Ji.prototype.createDiagram=function(){return this.importXML(l7)};Ji.prototype._interactionModules=[OR,jR,zR];Ji.prototype._modelingModules=[yL,w0,FL,OL,aI,R0,fI,gj,_P,Mh,_j,bj,Fj,Hj,Vj,Yj,a$,VP,f$,_$,A$,N$,tT,i7,s7];Ji.prototype._modules=[].concat(Aa.prototype._modules,Ji.prototype._interactionModules,Ji.prototype._modelingModules);const c7=({processId:e,onNavigate:t})=>{const n=Pe.useRef(null),r=Pe.useRef(null),[i,o]=Pe.useState("New Process"),[a,s]=Pe.useState(null),[l,u]=Pe.useState(""),[f,d]=Pe.useState(""),[g,y]=Pe.useState(2),[v,x]=Pe.useState(""),[C,P]=Pe.useState(""),[R,E]=Pe.useState(!1),[b,D]=Pe.useState(12),[B,z]=Pe.useState(!1),[L,X]=Pe.useState("#000000"),[Y,G]=Pe.useState("transparent"),[le,oe]=Pe.useState(12),[Se,kt]=Pe.useState("#fff2cc"),[Ge,Ke]=Pe.useState("#d6b656"),[me,$e]=Pe.useState(1),[Oe,qe]=Pe.useState(""),[Q,J]=Pe.useState(!1),[se,ye]=Pe.useState(!1),[I,w]=Pe.useState(!0),k=Pe.useRef(!1),[$,K]=Pe.useState(""),[ae,Te]=Pe.useState(""),Ae=["#EA4335","#E91E63","#9C27B0","#673AB7","#3F51B5","#4285F4","#03A9F4","#00BCD4","#009688","#34A853","#8BC34A","#CDDC39","#FBBC05","#FF9800"];Pe.useEffect(()=>{const ee=new Ji({container:n.current,keyboard:{bindTo:document}});r.current=ee,wM(n.current);try{const Me=ee.get("eventBus");console.log("EventBus retrieved, registering resize interceptor..."),Me.on("rule.call",9999,function(Nt){if(Nt.rule==="elements.resize"||Nt.rule==="shape.resize")return!0}),console.log("Resize interceptor registered.")}catch(Me){console.error("Failed to register resize interceptor:",Me)}(async()=>{let Me="";if(e){const _t=await(await fetch(`${Kt}/processes/${e}`)).json();o(_t.name),Me=_t.xml_content}else Me='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="173" y="102" width="36" height="36"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';try{await ee.importXML(Me),ee.get("canvas").zoom("fit-viewport"),J(!1),setTimeout(()=>{if(!n.current)return;const Nt=n.current.querySelector(".djs-palette-entries");if(Nt&&!Nt.querySelector(".custom-sticky-tool")){const _t=document.createElement("div");_t.className="group custom-sticky-tool";const wt=document.createElement("div");wt.className="entry",wt.innerHTML='<div style="font-family: serif; font-weight: bold; font-size: 18px;">T</div>',wt.title="",wt.style.cursor="pointer",wt.draggable=!0;const dt=Fn=>{const vn=ee.get("elementFactory"),ii=ee.get("create"),zi=ee.get("bpmnFactory"),Dn=vn.createShape({type:"bpmn:Group"}),oi=zi.create("bpmn:Documentation",{text:JSON.stringify({noteColor:"#fff2cc",borderColor:"#d6b656",text:"New Note",htmlContent:"New Note"})});Dn.businessObject.documentation=[oi],Dn.width=200,Dn.height=200,ii.start(Fn,Dn)};wt.addEventListener("click",dt),wt.addEventListener("dragstart",dt),_t.appendChild(wt),Nt.appendChild(_t)}},500)}catch(Nt){console.error(Nt)}})(),ee.on("selection.changed",Me=>{const Nt=Me.newSelection;if(Nt.length===1){w(!0);const _t=Nt[0];s(_t),K(_t.width),Te(_t.height),P(_t.businessObject.name||"");const wt=_t.businessObject.documentation;if(wt&&wt.length>0&&wt[0].text)try{const dt=JSON.parse(wt[0].text);u(dt.piTag||""),d(dt.piUnit||""),y(dt.piPrecision!==void 0?dt.piPrecision:2),x(dt.targetUrl||""),ye(dt.isFinalEnd||!1),E(dt.alwaysOn||!1),D(dt.textFontSize||12),z(dt.textBold||!1),X(dt.textColor||"#000000"),G(dt.textBgColor||"transparent"),oe(dt.nameFontSize||12),kt(dt.noteColor||"#fff2cc"),Ke(dt.borderColor||"#d6b656"),$e(dt.noteOpacity!==void 0?dt.noteOpacity:1),qe(dt.htmlContent||"")}catch{u(""),d(""),y(2),x(""),ye(!1),E(!1),D(12),z(!1),X("#000000"),G("transparent"),oe(12),kt("#fff2cc"),Ke("#d6b656"),$e(1),qe("")}else u(""),d(""),y(2),x(""),ye(!1),E(!1),D(12),z(!1),X("#000000"),G("transparent"),oe(12),kt("#fff2cc"),Ke("#d6b656"),$e(1),qe("")}else w(!1),s(null),P(""),u(""),d(""),y(2),x(""),ye(!1),E(!1),D(12),z(!1),X("#000000"),G("transparent"),oe(12),kt("#fff2cc"),Ke("#d6b656"),$e(1),qe("")}),ee.on("element.changed",Me=>{a&&Me.element.id===a.id&&P(Me.element.businessObject.name||"")}),ee.on("commandStack.changed",()=>{J(!0)}),ee.on("element.dblclick",1e4,Me=>{if(Me.element.type==="bpmn:Group")return!1});const Pt=Me=>{Me.preventDefault();const Nt=ee.get("canvas"),_t=Nt.zoom(),wt=Me.deltaY>0?.995:1.005;if(n.current){const dt=n.current.getBoundingClientRect(),Fn=Me.clientX-dt.left,vn=Me.clientY-dt.top;Nt.zoom(_t*wt,{x:Fn,y:vn})}},_e=n.current;return _e.addEventListener("wheel",Pt),()=>{_e.removeEventListener("wheel",Pt),ee.destroy()}},[e]);const de=()=>{Q?confirm("")&&t("dashboard"):t("dashboard")},pt=async()=>{const{xml:ee}=await r.current.saveXML({format:!0});await fetch(`${Kt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,name:i,xml_content:ee})}),J(!1),alert("")},rt=()=>{a&&r.current&&r.current.get("modeling").resizeShape(a,{x:a.x,y:a.y,width:Number($),height:Number(ae)})},Xe=ee=>{P(ee),a&&r.current&&r.current.get("modeling").updateLabel(a,ee)},nt=(ee,Ie,Pt,_e)=>{if(!Ie||!_e)return;const Nt=document.createElement("canvas").getContext("2d");Nt.font=`bold ${Pt}px Arial, sans-serif`;const wt=Nt.measureText(Ie).width;ee.width,ee.height,ee.type.includes("Task")&&wt+40>ee.width},je=ee=>{const Ie={piTag:ee.piTag!==void 0?ee.piTag:l,piUnit:ee.piUnit!==void 0?ee.piUnit:f,piPrecision:ee.piPrecision!==void 0?ee.piPrecision:g,targetUrl:ee.targetUrl!==void 0?ee.targetUrl:v,isFinalEnd:ee.isFinalEnd!==void 0?ee.isFinalEnd:se,alwaysOn:ee.alwaysOn!==void 0?ee.alwaysOn:R,textFontSize:ee.textFontSize!==void 0?ee.textFontSize:b,textBold:ee.textBold!==void 0?ee.textBold:B,textColor:ee.textColor!==void 0?ee.textColor:L,textBgColor:ee.textBgColor!==void 0?ee.textBgColor:Y,nameFontSize:ee.nameFontSize!==void 0?ee.nameFontSize:le,noteColor:ee.noteColor!==void 0?ee.noteColor:Se,borderColor:ee.borderColor!==void 0?ee.borderColor:Ge,noteOpacity:ee.noteOpacity!==void 0?ee.noteOpacity:me,htmlContent:ee.htmlContent!==void 0?ee.htmlContent:Oe};if(u(Ie.piTag),d(Ie.piUnit),y(Ie.piPrecision),x(Ie.targetUrl),ye(Ie.isFinalEnd),E(Ie.alwaysOn),D(Ie.textFontSize),z(Ie.textBold),X(Ie.textColor),G(Ie.textBgColor),oe(Ie.nameFontSize),kt(Ie.noteColor),Ke(Ie.borderColor),$e(Ie.noteOpacity),qe(Ie.htmlContent),a&&r.current){const Pt=r.current.get("modeling"),_e=r.current.get("bpmnFactory"),Me=r.current.get("elementRegistry");if(Ie.isFinalEnd&&a.type==="bpmn:EndEvent"){const _t=Me.filter(dt=>dt.type==="bpmn:EndEvent"&&dt.id!==a.id);let wt=!1;_t.forEach(dt=>{const Fn=dt.businessObject.documentation;if(Fn&&Fn.length>0&&Fn[0].text)try{const vn=JSON.parse(Fn[0].text);if(vn.isFinalEnd){vn.isFinalEnd=!1;const ii=_e.create("bpmn:Documentation",{text:JSON.stringify(vn)});Pt.updateProperties(dt,{documentation:[ii]}),wt=!0}}catch{}}),wt&&alert(" End Event ")}const Nt=_e.create("bpmn:Documentation",{text:JSON.stringify(Ie)});Pt.updateProperties(a,{documentation:[Nt]}),nt(a,C,Ie.nameFontSize,Pt)}},ft=ee=>{a&&r.current&&r.current.get("modeling").setColor(a,{stroke:ee,fill:bM(ee,.2)})};return Pe.useEffect(()=>{if(!r.current)return;const ee=()=>{const Pt=r.current.get("elementRegistry"),_e=r.current.get("canvas");Pt.forEach(Me=>{const Nt=Me.businessObject.documentation;if(Nt&&Nt.length>0&&Nt[0].text)try{const _t=JSON.parse(Nt[0].text),wt=_e.getGraphics(Me);if(Me.type==="bpmn:Group"){const dt=wt.querySelector("text"),Fn=wt.querySelector("path"),vn=wt.querySelector("rect");dt&&(dt.style.display="block"),Fn&&(Fn.style.display="block"),vn&&(vn.style.display="block");const ii=wt.querySelector(".sticky-bg");ii&&ii.remove();const zi=wt.querySelector(".sticky-fo");if(zi&&zi.remove(),_t.noteColor||_t.htmlContent){dt&&(dt.style.display="none"),Fn&&(Fn.style.display="none"),vn&&(vn.style.display="none");const Dn=Me.width||300,oi=Me.height||300,fr=document.createElementNS("http://www.w3.org/2000/svg","rect");fr.classList.add("sticky-bg"),fr.setAttribute("width",Dn),fr.setAttribute("height",oi),fr.setAttribute("fill",_t.noteColor||"transparent"),fr.setAttribute("stroke",_t.borderColor||"transparent"),fr.setAttribute("fill-opacity",_t.noteOpacity!==void 0?_t.noteOpacity:1),fr.setAttribute("stroke-width","1"),wt.prepend(fr);const xn=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");xn.classList.add("sticky-fo"),xn.setAttribute("width",Dn),xn.setAttribute("height",oi),xn.setAttribute("x",0),xn.setAttribute("y",0);const Ve=document.createElement("div");Ve.style.width="100%",Ve.style.height="100%",Ve.style.padding="10px",Ve.style.boxSizing="border-box",Ve.style.overflow="hidden",Ve.style.fontSize=`${_t.textFontSize||12}px`,Ve.style.fontWeight=_t.textBold?"bold":"normal",Ve.style.color=_t.textColor||"#000000",Ve.style.fontFamily="Arial, sans-serif",Ve.style.whiteSpace="pre-wrap",Ve.style.wordBreak="break-word",Ve.innerHTML=_t.htmlContent||(Nt[0].text?JSON.parse(Nt[0].text).text:"")||"",xn.appendChild(Ve),wt.appendChild(xn)}}if(_t.nameFontSize){const dt=wt.querySelector(".djs-label");dt&&(dt.style.fontSize=`${_t.nameFontSize}px`)}}catch{}})},Ie=r.current.get("eventBus");return Ie.on("element.changed",ee),Ie.on("import.done",ee),()=>{Ie.off("element.changed",ee),Ie.off("import.done",ee)}},[r.current]),H.jsxs("div",{className:"flex h-full flex-col bg-[#121212]",children:[H.jsxs("div",{className:"bg-[#1e1e1e] px-6 py-3 flex justify-between items-center border-b border-white/5",children:[H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsxs("button",{onClick:de,className:"text-white/60 hover:text-white transition flex items-center gap-1",children:[H.jsx("span",{className:"text-lg",children:""})," "]}),H.jsx("input",{value:i,onChange:ee=>{o(ee.target.value),J(!0)},className:"bg-[#2d2d2d] text-white px-4 py-1.5 rounded-full border-none outline-none focus:ring-2 focus:ring-[#8ab4f8]",placeholder:""}),Q&&H.jsx("span",{className:"text-[#f28b82] text-xs font-medium animate-pulse",children:" "})]}),H.jsxs("div",{className:"flex gap-3 items-center",children:[H.jsx("button",{onClick:()=>window.open("AboutBPMN.md","_blank"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full font-bold transition flex items-center justify-center text-sm",title:"BPMN ",children:"?"}),H.jsx("button",{onClick:pt,className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-1 rounded-full font-medium shadow-sm transition text-sm",children:""}),H.jsx("button",{onClick:()=>w(!I),className:`bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full transition flex items-center justify-center ${I?"":"text-[#8ab4f8]"}`,title:I?"":"",children:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})})]})]}),H.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[H.jsx("div",{className:"flex-1 relative bg-white",ref:n}),H.jsxs("div",{className:`bg-[#1e1e1e] border-l border-white/5 overflow-y-auto transition-all duration-300 ease-in-out ${I?"w-80 p-6 opacity-100":"w-0 p-0 opacity-0 border-none"}`,children:[H.jsx("h3",{className:"font-medium text-white/90 mb-6 text-lg",children:""}),a?H.jsxs("div",{children:[a.type!=="bpmn:Group"&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Name)"}),H.jsx("input",{value:C,onChange:ee=>Xe(ee.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:"..."}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("span",{className:"text-white/60 text-xs",children:""}),H.jsx("select",{value:le,onChange:ee=>je({nameFontSize:parseInt(ee.target.value)}),className:"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-xs outline-none",children:[12,14,16,18,20,24,30,36].map(ee=>H.jsxs("option",{value:ee,children:[ee,"px"]},ee))})]})]}),(a.type.includes("Task")||a.type==="bpmn:Participant")&&H.jsxs("div",{className:"mb-5 border-t border-white/10 pt-4",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Size)"}),H.jsxs("div",{className:"flex gap-2",children:[H.jsxs("div",{className:"flex-1",children:[H.jsx("span",{className:"text-white/60 text-xs block mb-1",children:" (Width)"}),H.jsx("input",{type:"number",value:$,onChange:ee=>K(ee.target.value),onBlur:rt,onKeyDown:ee=>ee.key==="Enter"&&rt(),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm"})]}),H.jsxs("div",{className:"flex-1",children:[H.jsx("span",{className:"text-white/60 text-xs block mb-1",children:" (Height)"}),H.jsx("input",{type:"number",value:ae,onChange:ee=>Te(ee.target.value),onBlur:rt,onKeyDown:ee=>ee.key==="Enter"&&rt(),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm"})]})]})]}),a.type==="bpmn:Group"&&H.jsxs("div",{className:"mb-5 border-t border-white/10 pt-4",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Sticky Note)"}),H.jsxs("div",{className:"mb-3",children:[H.jsx("span",{className:"text-white/60 text-sm block mb-1",children:""}),H.jsxs("div",{className:"flex gap-1 flex-wrap",children:[["#fff2cc","#fce5cd","#e6b8af","#d9ead3","#c9daf8","#d0e0e3","#ead1dc","#ffffff","transparent"].map(ee=>H.jsx("button",{onClick:()=>je({noteColor:ee}),className:`w-6 h-6 rounded border ${Se===ee?"border-white scale-110":"border-white/10"}`,style:{backgroundColor:ee},title:ee},ee)),H.jsx("input",{type:"color",value:Se,onChange:ee=>je({noteColor:ee.target.value}),className:"w-6 h-6 p-0 border-0 rounded overflow-hidden"})]})]}),H.jsxs("div",{className:"mb-3",children:[H.jsx("span",{className:"text-white/60 text-sm block mb-1",children:""}),H.jsx("div",{className:"flex gap-1 flex-wrap",children:["#d6b656","#e69138","#cc0000","#6aa84f","#3c78d8","#45818e","#a64d79","#000000","transparent"].map(ee=>H.jsx("button",{onClick:()=>je({borderColor:ee}),className:`w-6 h-6 rounded border ${Ge===ee?"border-white scale-110":"border-white/10"}`,style:{backgroundColor:ee},title:ee},ee))})]}),H.jsxs("div",{className:"mb-4",children:[H.jsxs("div",{className:"flex justify-between mb-1",children:[H.jsx("span",{className:"text-white/60 text-sm",children:""}),H.jsxs("span",{className:"text-white/80 text-xs",children:[Math.round(me*100),"%"]})]}),H.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:me,onChange:ee=>je({noteOpacity:parseFloat(ee.target.value)}),className:"w-full accent-[#8ab4f8] h-1 bg-white/10 rounded-lg appearance-none cursor-pointer"})]}),H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider border-t border-white/10 pt-4",children:" (Style)"}),H.jsxs("div",{className:"flex items-center justify-between mb-2",children:[H.jsx("span",{className:"text-white/60 text-sm",children:""}),H.jsx("select",{value:b,onChange:ee=>je({textFontSize:parseInt(ee.target.value)}),className:"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-sm outline-none",children:[12,14,16,18,20,24,30,36,48,64].map(ee=>H.jsxs("option",{value:ee,children:[ee,"px"]},ee))})]}),H.jsxs("div",{className:"mt-4 border-t border-white/10 pt-4",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Content)"}),H.jsxs("div",{className:"bg-[#2d2d2d] rounded-lg border border-white/10 p-2",children:[H.jsxs("div",{className:"flex gap-2 mb-2 border-b border-white/10 pb-2 flex-wrap",children:[H.jsx("button",{onClick:()=>{document.execCommand("bold",!1,null);const ee=document.getElementById("sticky-wysiwyg");ee&&(qe(ee.innerHTML),je({htmlContent:ee.innerHTML}))},className:"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-bold",children:"B"}),H.jsx("button",{onClick:()=>{document.execCommand("underline",!1,null);const ee=document.getElementById("sticky-wysiwyg");ee&&(qe(ee.innerHTML),je({htmlContent:ee.innerHTML}))},className:"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-medium underline",children:"U"}),H.jsx("button",{onClick:()=>{document.execCommand("hiliteColor",!1,"#ffff00");const ee=document.getElementById("sticky-wysiwyg");ee&&(qe(ee.innerHTML),je({htmlContent:ee.innerHTML}))},className:"bg-[#fbbc04] hover:bg-[#fdd663] text-black text-xs px-2 py-1 rounded font-medium",children:"Highlight"}),H.jsx("div",{className:"flex gap-1 items-center border-l border-white/10 pl-2",children:["#000000","#ff0000","#0000ff","#ffffff"].map(ee=>H.jsx("button",{onClick:()=>{document.execCommand("foreColor",!1,ee);const Ie=document.getElementById("sticky-wysiwyg");Ie&&(qe(Ie.innerHTML),je({htmlContent:Ie.innerHTML}))},className:"w-4 h-4 rounded-full border border-white/20 hover:scale-110 transition",style:{backgroundColor:ee}},ee))})]}),H.jsx("div",{id:"sticky-wysiwyg",contentEditable:!0,className:"w-full bg-white text-black text-sm outline-none min-h-[100px] p-2 rounded-t mb-1 overflow-auto",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:Oe},onCompositionStart:()=>{k.current=!0},onCompositionEnd:ee=>{k.current=!1,qe(ee.currentTarget.innerHTML),je({htmlContent:ee.currentTarget.innerHTML})},onInput:ee=>{k.current||(qe(ee.currentTarget.innerHTML),je({htmlContent:ee.currentTarget.innerHTML}))}}),H.jsx("textarea",{readOnly:!0,value:Oe,className:"w-full bg-[#1e1e1e] text-white/50 text-xs outline-none h-[60px] font-mono p-2 rounded-b border-t border-white/10",placeholder:"HTML ..."})]}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:" HTML "})]})]}),a.type!=="bpmn:Group"&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Color)"}),H.jsx("div",{className:"grid grid-cols-7 gap-2",children:Ae.map(ee=>H.jsx("button",{onClick:()=>ft(ee),className:"w-6 h-6 rounded-full border border-white/10 hover:scale-110 transition",style:{backgroundColor:ee}},ee))})]}),a.type!=="bpmn:Group"&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:"PI Tag "}),H.jsx("input",{value:l,onChange:ee=>{const Ie=ee.target.value;if(Ie.split(";").length>4){alert(" 4  PI Tag");return}je({piTag:Ie})},className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:": Tag1;Tag2 (4)"}),H.jsx("input",{value:f,onChange:ee=>je({piUnit:ee.target.value}),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:" (: kg/hr)"}),H.jsxs("div",{className:"flex items-center gap-2 bg-[#2d2d2d] border border-white/10 rounded-lg px-3 py-2 mb-2",children:[H.jsx("span",{className:"text-white/60 text-sm whitespace-nowrap",children:":"}),H.jsx("input",{type:"number",min:"0",max:"5",value:g,onChange:ee=>je({piPrecision:parseInt(ee.target.value)}),className:"w-full bg-transparent border-none outline-none text-white text-right"})]}),H.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-2 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition mb-2",children:[H.jsx("input",{type:"checkbox",checked:R,onChange:ee=>je({alwaysOn:ee.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]"}),H.jsx("span",{className:"text-sm text-white/90 font-medium",children:"Always On ()"})]})]}),(a.type==="bpmn:DataObjectReference"||a.type==="bpmn:DataStoreReference")&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Hyperlink)"}),H.jsx("input",{value:v,onChange:ee=>je({targetUrl:ee.target.value}),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition",placeholder:": https://google.com"}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:""})]}),a.type==="bpmn:EndEvent"&&H.jsxs("div",{className:"mb-5",children:[H.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-3 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition",children:[H.jsx("input",{type:"checkbox",checked:se,onChange:ee=>je({isFinalEnd:ee.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]"}),H.jsx("span",{className:"text-sm text-white/90 font-medium",children:" END (Final END)"})]}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:""})]})]}):H.jsx("p",{className:"text-white/40 text-sm",children:""})]})]})]})};var yT={exports:{}};/*! bpmn-js - bpmn-viewer v17.11.1 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */(function(e,t){(function(n,r){e.exports=r()})(KA,function(){function n(c,p){p&&(c.super_=p,c.prototype=Object.create(p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}const r=Object.prototype.toString,i=Object.prototype.hasOwnProperty;function o(c){return c===void 0}function a(c){return c!==void 0}function s(c){return r.call(c)==="[object Array]"}function l(c){return r.call(c)==="[object Object]"}function u(c){return r.call(c)==="[object Number]"}function f(c){const p=r.call(c);return p==="[object Function]"||p==="[object AsyncFunction]"||p==="[object GeneratorFunction]"||p==="[object AsyncGeneratorFunction]"||p==="[object Proxy]"}function d(c){return r.call(c)==="[object String]"}function g(c,p){return i.call(c,p)}function y(c,p){const h=b(p);let m;return x(c,function(_,S){if(h(_,S))return m=_,!1}),m}function v(c,p){const h=b(p);let m=[];return x(c,function(_,S){h(_,S)&&m.push(_)}),m}function x(c,p){let h,m;if(o(c))return;const _=s(c)?B:D;for(let S in c)if(g(c,S)&&(h=c[S],m=p(h,_(S)),m===!1))return h}function C(c,p,h){return x(c,function(m,_){h=p(h,m,_)}),h}function P(c,p){return!!C(c,function(h,m,_){return h&&p(m,_)},!0)}function R(c,p){return!!y(c,p)}function E(c){return function(p){return P(c,function(h,m){return p[m]===h})}}function b(c){return f(c)?c:p=>p===c}function D(c){return c}function B(c){return Number(c)}function z(c,p){return c.bind(p)}function L(c,...p){return Object.assign(c,...p)}var X=1e3;function Y(c,p){var h=this;p=p||X,c.on(["render.shape","render.connection"],p,function(m,_){var S=m.type,M=_.element,O=_.gfx,j=_.attrs;if(h.canRender(M))return S==="render.shape"?h.drawShape(O,M,j):h.drawConnection(O,M,j)}),c.on(["render.getShapePath","render.getConnectionPath"],p,function(m,_){if(h.canRender(_))return m.type==="render.getShapePath"?h.getShapePath(_):h.getConnectionPath(_)})}function G(c,p){var h=oe(c);return h&&typeof h.$instanceOf=="function"&&h.$instanceOf(p)}function le(c,p){return R(p,function(h){return G(c,h)})}function oe(c){return c&&c.businessObject||c}function Se(c){return c&&c.di}function kt(c,p){return!G(c,"bpmn:CallActivity")&&(G(c,"bpmn:SubProcess")?!(!(p=p||Se(c))||!G(p,"bpmndi:BPMNPlane"))||p&&!!p.isExpanded:!G(c,"bpmn:Participant")||!!oe(c).processRef)}function Ge(c){if(G(c,"bpmn:Participant")||G(c,"bpmn:Lane")){var p=Se(c).isHorizontal;return p===void 0||p}}function Ke(c){return l(c)&&g(c,"labelTarget")}Y.prototype.canRender=function(c){},Y.prototype.drawShape=function(c,p){},Y.prototype.drawConnection=function(c,p){},Y.prototype.getShapePath=function(c){},Y.prototype.getConnectionPath=function(c){};var me={width:90,height:20},$e=15;function Oe(c){var p=c.length/2-1,h=c[Math.floor(p)],m=c[Math.ceil(p+.01)],_=function(j){var Z=j.length/2-1,re=j[Math.floor(Z)],fe=j[Math.ceil(Z+.01)];return{x:re.x+(fe.x-re.x)/2,y:re.y+(fe.y-re.y)/2}}(c),S=Math.atan((m.y-h.y)/(m.x-h.x)),M=_.x,O=_.y;return Math.abs(S)<Math.PI/2?O-=$e:M+=$e,{x:M,y:O}}function qe(c,p){var h,m,_,S=c.label;return S&&S.bounds?(_=S.bounds,m={width:Math.max(me.width,_.width),height:_.height},h={x:_.x+_.width/2,y:_.y+_.height/2}):(h=function(M){return M.waypoints?Oe(M.waypoints):G(M,"bpmn:Group")?{x:M.x+M.width/2,y:M.y+me.height/2}:{x:M.x+M.width/2,y:M.y+M.height+me.height/2}}(p),m=me),L({x:h.x-m.width/2,y:h.y-m.height/2},m)}function Q(c){var p=c.businessObject,h=function(m){return G(m,"bpmn:FlowElement")||G(m,"bpmn:Participant")||G(m,"bpmn:Lane")||G(m,"bpmn:SequenceFlow")||G(m,"bpmn:MessageFlow")||G(m,"bpmn:DataInput")||G(m,"bpmn:DataOutput")?"name":G(m,"bpmn:TextAnnotation")?"text":G(m,"bpmn:Group")?"categoryValueRef":void 0}(p);if(h)return h==="categoryValueRef"?function(m){var _=m.categoryValueRef;return _&&_.value||""}(p):p[h]||""}function J(c,p){return function(h,m){m.appendChild(function(_,S){if(_.ownerDocument!==S.ownerDocument)try{return S.ownerDocument.importNode(_,!0)}catch{}return _}(h,m))}(p,c),c}var se=2,ye={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":se,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":se,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function I(c,p,h){var m=p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_=ye[m];_?(_===se&&typeof h=="number"&&(h=String(h)+"px"),c.style[m]=h):c.setAttributeNS(null,p,h)}function w(c,p,h){if(typeof p=="string"){if(h===void 0)return function(m,_){return ye[_]?m.style[_]:m.getAttributeNS(null,_)}(c,p);I(c,p,h)}else(function(m,_){var S,M,O=Object.keys(_);for(S=0;M=O[S];S++)I(m,M,_[M])})(c,p);return c}const k=Object.prototype.toString;function $(c){return new K(c)}function K(c){if(!c||!c.nodeType)throw new Error("A DOM element reference is required");this.el=c,this.list=c.classList}K.prototype.add=function(c){return this.list.add(c),this},K.prototype.remove=function(c){return k.call(c)=="[object RegExp]"?this.removeMatching(c):(this.list.remove(c),this)},K.prototype.removeMatching=function(c){const p=this.array();for(let h=0;h<p.length;h++)c.test(p[h])&&this.remove(p[h]);return this},K.prototype.toggle=function(c,p){return p!==void 0?p!==this.list.toggle(c,p)&&this.list.toggle(c):this.list.toggle(c),this},K.prototype.array=function(){return Array.from(this.list)},K.prototype.has=K.prototype.contains=function(c){return this.list.contains(c)};var ae={svg:"http://www.w3.org/2000/svg"},Te='<svg xmlns="'+ae.svg+'"';function Ae(c){var p=!1;c.substring(0,4)==="<svg"?c.indexOf(ae.svg)===-1&&(c=Te+c.substring(4)):(c=Te+">"+c+"</svg>",p=!0);var h=function(S){var M;return(M=new DOMParser).async=!1,M.parseFromString(S,"text/xml")}(c);if(!p)return h;for(var m=document.createDocumentFragment(),_=h.firstChild;_.firstChild;)m.appendChild(_.firstChild);return m}function de(c,p){var h;return(c=c.trim()).charAt(0)==="<"?(h=Ae(c).firstChild,h=document.importNode(h,!0)):h=document.createElementNS(ae.svg,c),p&&w(h,p),h}var pt=null;function rt(){return pt===null&&(pt=de("svg")),pt}function Xe(c,p){var h,m,_=Object.keys(p);for(h=0;m=_[h];h++)c[m]=p[m];return c}function nt(c){return rt().createSVGTransform()}var je=/([&<>]{1})/g,ft=/([\n\r"]{1})/g,ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Ie(c,p){return c.replace(p,function(h,m){return ee[m]||m})}function Pt(c,p){var h,m,_,S,M;switch(c.nodeType){case 3:p.push(Ie(c.textContent,je));break;case 1:if(p.push("<",c.tagName),c.hasAttributes())for(h=0,m=(_=c.attributes).length;h<m;++h)S=_.item(h),p.push(" ",S.name,'="',Ie(S.value,ft),'"');if(c.hasChildNodes()){for(p.push(">"),h=0,m=(M=c.childNodes).length;h<m;++h)Pt(M.item(h),p);p.push("</",c.tagName,">")}else p.push("/>");break;case 8:p.push("<!--",Ie(c.nodeValue,je),"-->");break;case 4:p.push("<![CDATA[",c.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+c.nodeType)}return p}function _e(c,p){return function(h){for(var m=h.firstChild,_=[];m;)Pt(m,_),m=m.nextSibling;return _.join("")}(c)}function Me(c){var p=c.parentNode;return p&&p.removeChild(c),c}function Nt(c,p){return p instanceof SVGMatrix?c.createSVGTransformFromMatrix(p):p}function _t(c,p){var h=c.transform.baseVal;return p&&(Array.isArray(p)||(p=[p]),function(m,_){var S,M;for(m.clear(),S=0;M=_[S];S++)m.appendItem(Nt(m,M))}(h,p)),h.consolidate()}function wt(c){return c.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function dt(c){return["L",c.x,c.y]}function Fn(c,p){const h=c.length,m=[(_=c[0],["M",_.x,_.y])];var _,S,M,O;for(let j=1;j<h;j++){const Z=c[j-1],re=c[j],fe=c[j+1];if(!fe||!p){m.push(dt(re));continue}const Ee=Math.min(p,ii(re.x-Z.x,re.y-Z.y),ii(fe.x-re.x,fe.y-re.y));if(!Ee){m.push(dt(re));continue}const Le=vn(re,Z,Ee),xe=vn(re,Z,.5*Ee),We=vn(re,fe,Ee),ce=vn(re,fe,.5*Ee);m.push(dt(Le)),m.push((M=ce,O=We,["C",(S=xe).x,S.y,M.x,M.y,O.x,O.y]))}return m}function vn(c,p,h){const m=p.x-c.x,_=p.y-c.y,S=h/ii(m,_);return{x:c.x+m*S,y:c.y+_*S}}function ii(c,p){return Math.sqrt(Math.pow(c,2)+Math.pow(p,2))}function zi(c,p,h){u(p)&&(h=p,p=null),p||(p={});const m=de("path",p);return u(h)&&(m.dataset.cornerRadius=String(h)),Dn(m,c)}function Dn(c,p){return w(c,{d:wt(Fn(p,parseInt(c.dataset.cornerRadius,10)||0))}),c}var oi="hsl(225, 10%, 15%)",fr="white";function xn(c,p){return R(c.eventDefinitions,function(h){return h.$type===p})}function Ve(c,p,h){var m=Se(c);return h||m.get("color:background-color")||m.get("bioc:fill")||p||fr}function Ce(c,p,h){var m=Se(c);return h||m.get("color:border-color")||m.get("bioc:stroke")||p||oi}function Jl(c,p,h,m){var _=Se(c).get("label");return m||_&&_.get("color:color")||p||Ce(c,h)}function ec(c,p={}){return{width:ai(c,p),height:Sr(c,p)}}function ai(c,p={}){return g(p,"width")?p.width:c.width}function Sr(c,p={}){return g(p,"height")?p.height:c.height}function _T(c,p){return p.forEach(function(h){h&&typeof h!="string"&&!Array.isArray(h)&&Object.keys(h).forEach(function(m){if(m!=="default"&&!(m in c)){var _=Object.getOwnPropertyDescriptor(h,m);Object.defineProperty(c,m,_.get?_:{enumerable:!0,get:function(){return h[m]}})}})}),Object.freeze(c)}const wT=Object.prototype.toString,ET=Object.prototype.hasOwnProperty;function bT(c,p){return ET.call(c,p)}function Ix(c,p){let h,m;if(c===void 0)return;const _=function(S){return wT.call(S)==="[object Array]"}(c)?CT:ST;for(let S in c)if(bT(c,S)&&(h=c[S],m=p(h,_(S)),m===!1))return h}function ST(c){return c}function CT(c){return Number(c)}function Cr(c,...p){const h=c.style;return Ix(p,function(m){m&&Ix(m,function(_,S){h[S]=_})}),c}const RT=Object.prototype.toString;function rp(c){return new $o(c)}function $o(c){if(!c||!c.nodeType)throw new Error("A DOM element reference is required");this.el=c,this.list=c.classList}function Bx(c){for(var p;p=c.firstChild;)c.removeChild(p);return c}$o.prototype.add=function(c){return this.list.add(c),this},$o.prototype.remove=function(c){return RT.call(c)=="[object RegExp]"?this.removeMatching(c):(this.list.remove(c),this)},$o.prototype.removeMatching=function(c){const p=this.array();for(let h=0;h<p.length;h++)c.test(p[h])&&this.remove(p[h]);return this},$o.prototype.toggle=function(c,p){return p!==void 0?p!==this.list.toggle(c,p)&&this.list.toggle(c):this.list.toggle(c),this},$o.prototype.array=function(){return Array.from(this.list)},$o.prototype.has=$o.prototype.contains=function(c){return this.list.contains(c)};var ip,Qh,Zh,op={};function jx(){ip=window.addEventListener?"addEventListener":"attachEvent",Qh=window.removeEventListener?"removeEventListener":"detachEvent",Zh=ip!=="addEventListener"?"on":""}var Jh=_T({__proto__:null,bind:op.bind=function(c,p,h,m){return ip||jx(),c[ip](Zh+p,h,m||!1),h},unbind:op.unbind=function(c,p,h,m){return Qh||jx(),c[Qh](Zh+p,h,m||!1),h},default:op},[op]),$x=["focus","blur"],em,tm={bind:function(c,p,h,m,_){return $x.indexOf(h)!==-1&&(_=!0),Jh.bind(c,h,function(S){var M=S.target||S.srcElement;S.delegateTarget=function(O,j,Z){var re=Z?O:O.parentNode;return re&&typeof re.closest=="function"&&re.closest(j)||null}(M,p,!0),S.delegateTarget&&m.call(c,S)},_)},unbind:function(c,p,h,m){return $x.indexOf(p)!==-1&&(m=!0),Jh.unbind(c,p,h,m)}},kT=function(c,p){if(typeof c!="string")throw new TypeError("String expected");p||(p=document);var h=/<([\w:]+)/.exec(c);if(!h)return p.createTextNode(c);c=c.replace(/^\s+|\s+$/g,"");var m=h[1];if(m=="body")return(_=p.createElement("html")).innerHTML=c,_.removeChild(_.lastChild);var _,S=Object.prototype.hasOwnProperty.call(_n,m)?_n[m]:_n._default,M=S[0],O=S[1],j=S[2];for((_=p.createElement("div")).innerHTML=O+c+j;M--;)_=_.lastChild;if(_.firstChild==_.lastChild)return _.removeChild(_.firstChild);for(var Z=p.createDocumentFragment();_.firstChild;)Z.appendChild(_.removeChild(_.firstChild));return Z},Fx=!1;typeof document<"u"&&((em=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Fx=!em.getElementsByTagName("link").length,em=void 0);var _n={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Fx?[1,"X<div>","</div>"]:[0,"",""]};_n.td=_n.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],_n.option=_n.optgroup=[1,'<select multiple="multiple">',"</select>"],_n.thead=_n.tbody=_n.colgroup=_n.caption=_n.tfoot=[1,"<table>","</table>"],_n.polyline=_n.ellipse=_n.polygon=_n.circle=_n.text=_n.line=_n.path=_n.rect=_n.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Hi=kT;function Pi(c,p){return(p=p||document).querySelector(c)}function ap(c){c.parentNode&&c.parentNode.removeChild(c)}function nm(c,p,h,m,_){var S=nt();S.setTranslate(p,h);var M=nt();M.setRotate(m||0,0,0);var O=nt();O.setScale(1,1),_t(c,[S,M,O])}function zx(c,p,h){var m=nt();m.setTranslate(p,h),_t(c,m)}var PT=function(c,p){return c(p={exports:{}},p.exports),p.exports}(function(c){var p=c.exports=function(h,m){if(m||(m=16),h===void 0&&(h=128),h<=0)return"0";for(var _=Math.log(Math.pow(2,h))/Math.log(m),S=2;_===1/0;S*=2)_=Math.log(Math.pow(2,h/S))/Math.log(m)*S;var M=_-Math.floor(_),O="";for(S=0;S<Math.floor(_);S++)O=Math.floor(Math.random()*m).toString(m)+O;if(M){var j=Math.pow(m,M);O=Math.floor(Math.random()*j).toString(m)+O}var Z=parseInt(O,m);return Z!==1/0&&Z>=Math.pow(2,h)?p(h,m):O};p.rack=function(h,m,_){var S=function(O){var j=0;do{if(j++>10){if(!_)throw new Error("too many ID collisions, use more bits");h+=_}var Z=p(h,m)}while(Object.hasOwnProperty.call(M,Z));return M[Z]=O,Z},M=S.hats={};return S.get=function(O){return S.hats[O]},S.set=function(O,j){return S.hats[O]=j,S},S.bits=h||128,S.base=m||16,S}});function so(c){if(!(this instanceof so))return new so(c);c=c||[128,36,1],this._seed=c.length?PT.rack(c[0],c[1],c[2]):c}so.prototype.next=function(c){return this._seed(c||!0)},so.prototype.nextPrefixed=function(c,p){var h;do h=c+this.next(!0);while(this.assigned(h));return this.claim(h,p),h},so.prototype.claim=function(c,p){this._seed.set(c,p||!0)},so.prototype.assigned=function(c){return this._seed.get(c)||!1},so.prototype.unclaim=function(c){delete this._seed.hats[c]},so.prototype.clear=function(){var c,p=this._seed.hats;for(c in p)this.unclaim(c)};var TT=new so,Ls=.95;function Ha(c,p,h,m,_,S,M){Y.call(this,p,M);var O=c&&c.defaultFillColor,j=c&&c.defaultStrokeColor,Z=c&&c.defaultLabelColor;function re(F){return h.computeStyle(F,{strokeLinecap:"round",strokeLinejoin:"round",stroke:oi,strokeWidth:2,fill:"white"})}function fe(F){return h.computeStyle(F,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:oi,strokeWidth:2})}function Ee(F,T){var{ref:N={x:0,y:0},scale:V=1,element:te,parentGfx:Ne=_._svg}=T,it=de("marker",{id:F,viewBox:"0 0 20 20",refX:N.x,refY:N.y,markerWidth:20*V,markerHeight:20*V,orient:"auto"});J(it,te);var Ye=Pi(":scope > defs",Ne);Ye||J(Ne,Ye=de("defs")),J(Ye,it)}function Le(F,T,N,V){var te=TT.nextPrefixed("marker-");return function(Ne,it,Ye,At,un){Ye==="sequenceflow-end"&&Ee(it,{element:de("path",{d:"M 1 5 L 11 10 L 1 15 Z",...re({fill:un,stroke:un,strokeWidth:1})}),ref:{x:11,y:10},scale:.5,parentGfx:Ne}),Ye==="messageflow-start"&&Ee(it,{element:de("circle",{cx:6,cy:6,r:3.5,...re({fill:At,stroke:un,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:6,y:6},parentGfx:Ne}),Ye==="messageflow-end"&&Ee(it,{element:de("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...re({fill:At,stroke:un,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:8.5,y:5},parentGfx:Ne}),Ye==="association-start"&&Ee(it,{element:de("path",{d:"M 11 5 L 1 10 L 11 15",...fe({fill:"none",stroke:un,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:1,y:10},scale:.5,parentGfx:Ne}),Ye==="association-end"&&Ee(it,{element:de("path",{d:"M 1 5 L 11 10 L 1 15",...fe({fill:"none",stroke:un,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:11,y:10},scale:.5,parentGfx:Ne}),Ye==="conditional-flow-marker"&&Ee(it,{element:de("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...re({fill:At,stroke:un})}),ref:{x:-1,y:10},scale:.5,parentGfx:Ne}),Ye==="conditional-default-flow-marker"&&Ee(it,{element:de("path",{d:"M 6 4 L 10 16",...re({stroke:un,fill:"none"})}),ref:{x:0,y:10},scale:.5,parentGfx:Ne})}(F,te,T,N,V),"url(#"+te+")"}function xe(F,T,N,V,te={}){l(V)&&(te=V,V=0),V=V||0,te=re(te);var Ne=de("circle",{cx:T/2,cy:N/2,r:Math.round((T+N)/4-V),...te});return J(F,Ne),Ne}function We(F,T,N,V,te,Ne){l(te)&&(Ne=te,te=0),te=te||0,Ne=re(Ne);var it=de("rect",{x:te,y:te,width:T-2*te,height:N-2*te,rx:V,ry:V,...Ne});return J(F,it),it}function ce(F,T,N,V){var te=zi(T,N=fe(N),V);return J(F,te),te}function Re(F,T,N){return ce(F,T,N,5)}function U(F,T,N){N=fe(N);var V=de("path",{...N,d:T});return J(F,V),V}function ie(F,T,N,V){return U(T,N,L({"data-marker":F},V))}function ne(F){return Ht[F]}function Be(F){return function(T,N,V){return ne(F)(T,N,V)}}var we=function(F,T,N={},V){return U(F,m.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:T.width,containerHeight:T.height,position:{mx:.235,my:.315}}),{fill:V?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:V?Ve(T,O,N.fill):Ce(T,j,N.stroke),strokeWidth:1})},ut=function(F,T,N={}){var V=xe(F,T.width,T.height,.2*T.height,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:2});U(F,m.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.5}}),{stroke:Ce(T,j,N.stroke),strokeWidth:2});for(var te=0;te<12;te++){var Ne=m.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.5}}),it=T.width/2,Ye=T.height/2;U(F,Ne,{strokeWidth:1,stroke:Ce(T,j,N.stroke),transform:"rotate("+30*te+","+Ye+","+it+")"})}return V},lt=function(F,T,N={},V){return U(F,m.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.2}}),{fill:V?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},He=function(F,T,N={}){return U(F,m.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.222}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},Ut=function(F,T,N={},V){return U(F,m.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.57,my:.263}}),{fill:V?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},ve=function(F,T,N={},V){return U(F,m.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:T.width,containerHeight:T.height,position:{mx:.2,my:.722}}),{fill:V?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},ge=function(F,T,N={},V){var te=U(F,m.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.638,my:-.055}}),{fill:V?Ce(T,j,N.stroke):"none",stroke:Ce(T,j,N.stroke),strokeWidth:1});return function(Ne,it){var Ye=nt();Ye.setRotate(it,0,0),_t(Ne,Ye)}(te,45),te},Je=function(F,T,N={},V){return U(F,m.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.22,my:.5}}),{fill:V?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},ht=function(F,T,N={},V){return U(F,m.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:V?Ce(T,j,N.stroke):Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},vt=function(F,T,N={},V){return U(F,m.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:T.width,containerHeight:T.height,position:{mx:.222,my:.36}}),{fill:V?Ce(T,j,N.stroke):Ve(T,O,N.fill),strokeWidth:1})},Wr=function(F,T,N={}){return U(F,m.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:T.width,containerHeight:T.height,position:{mx:.458,my:.194}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1})},Ft=function(F,T,N={}){return xe(F,T.width,T.height,8,{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:4})};function kr(F,T,N={}){var V=oe(F),te=function(Ne){return Ne.$type==="bpmn:IntermediateThrowEvent"||Ne.$type==="bpmn:EndEvent"}(V);return V.get("eventDefinitions")&&V.get("eventDefinitions").length>1?V.get("parallelMultiple")?Wr(T,F,N):vt(T,F,N,te):xn(V,"bpmn:MessageEventDefinition")?we(T,F,N,te):xn(V,"bpmn:TimerEventDefinition")?ut(T,F,N):xn(V,"bpmn:ConditionalEventDefinition")?He(T,F,N):xn(V,"bpmn:SignalEventDefinition")?ht(T,F,N,te):xn(V,"bpmn:EscalationEventDefinition")?lt(T,F,N,te):xn(V,"bpmn:LinkEventDefinition")?Ut(T,F,N,te):xn(V,"bpmn:ErrorEventDefinition")?ve(T,F,N,te):xn(V,"bpmn:CancelEventDefinition")?ge(T,F,N,te):xn(V,"bpmn:CompensateEventDefinition")?Je(T,F,N,te):xn(V,"bpmn:TerminateEventDefinition")?Ft(T,F,N):null}var ci={ParticipantMultiplicityMarker:function(F,T,N={}){var V=ai(T,N),te=Sr(T,N);ie("participant-multiplicity",F,m.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2-6)/V,my:(te-15)/te}}),{strokeWidth:2,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},SubProcessMarker:function(F,T,N={}){zx(We(F,14,14,0,{strokeWidth:1,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)}),T.width/2-7.5,T.height-20),ie("sub-process",F,m.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2-7.5)/T.width,my:(T.height-20)/T.height}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},ParallelMarker:function(F,T,N){var V=ai(T,N),te=Sr(T,N);ie("parallel",F,m.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2+N.parallel)/V,my:(te-20)/te}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},SequentialMarker:function(F,T,N){ie("sequential",F,m.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2+N.seq)/T.width,my:(T.height-19)/T.height}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},CompensationMarker:function(F,T,N){ie("compensation",F,m.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2+N.compensation)/T.width,my:(T.height-13)/T.height}}),{strokeWidth:1,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})},LoopMarker:function(F,T,N){var V=ai(T,N),te=Sr(T,N);ie("loop",F,m.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2+N.loop)/V,my:(te-7)/te}}),{strokeWidth:1.5,fill:"none",stroke:Ce(T,j,N.stroke),strokeMiterlimit:.5})},AdhocMarker:function(F,T,N){var V=ai(T,N),te=Sr(T,N);ie("adhoc",F,m.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2+N.adhoc)/V,my:(te-15)/te}}),{strokeWidth:1,fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke)})}};function en(F,T,N,V){ci[F](T,N,V)}function Ur(F,T,N,V={}){V={fill:V.fill,stroke:V.stroke,width:ai(T,V),height:Sr(T,V)};var te=oe(T),Ne=N&&N.includes("SubProcessMarker");V=Ne?{...V,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{...V,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},x(N,function(At){en(At,F,T,V)}),te.get("isForCompensation")&&en("CompensationMarker",F,T,V),G(te,"bpmn:AdHocSubProcess")&&en("AdhocMarker",F,T,V);var it=te.get("loopCharacteristics"),Ye=it&&it.get("isSequential");it&&(Ye===void 0&&en("LoopMarker",F,T,V),Ye===!1&&en("ParallelMarker",F,T,V),Ye===!0&&en("SequentialMarker",F,T,V))}function Tt(F,T,N={}){N=L({size:{width:100}},N);var V=S.createText(T||"",N);return $(V).add("djs-label"),J(F,V),V}function Dt(F,T,N,V={}){var te=oe(T),Ne=ec({x:T.x,y:T.y,width:T.width,height:T.height},V);return Tt(F,te.name,{align:N,box:Ne,padding:7,style:{fill:Jl(T,Z,j,V.stroke)}})}function Hs(F,T,N,V={}){var te=Ge(N),Ne=Tt(F,T,{box:{height:30,width:te?Sr(N,V):ai(N,V)},align:"center-middle",style:{fill:Jl(N,Z,j,V.stroke)}});te&&nm(Ne,0,-(-1*Sr(N,V)),270)}function Vs(F,T,N={}){var{width:V,height:te}=ec(T,N);return We(F,V,te,10,{...N,fill:Ve(T,O,N.fill),fillOpacity:Ls,stroke:Ce(T,j,N.stroke)})}function qa(F,T,N={}){var V=oe(T),te=Ve(T,O,N.fill),Ne=Ce(T,j,N.stroke);return V.get("associationDirection")!=="One"&&V.get("associationDirection")!=="Both"||(N.markerEnd=Le(F,"association-end",te,Ne)),V.get("associationDirection")==="Both"&&(N.markerStart=Le(F,"association-start",te,Ne)),N=Et(N,["markerStart","markerEnd"]),Re(F,T.waypoints,{...N,stroke:Ne,strokeDasharray:"0, 5"})}function sc(F,T,N={}){var V=Ve(T,O,N.fill),te=Ce(T,j,N.stroke),Ne=U(F,m.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.474,my:.296}}),{fill:V,fillOpacity:Ls,stroke:te});return function(it){var Ye=it.dataObjectRef;return it.isCollection||Ye&&Ye.isCollection}(oe(T))&&U(F,m.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.33,my:(T.height-18)/T.height}}),{strokeWidth:2,fill:V,stroke:te}),Ne}function zn(F,T,N={}){return xe(F,T.width,T.height,{fillOpacity:Ls,...N,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)})}function kn(F,T,N={}){return function(V,te,Ne,it){var Ye=te/2,At=Ne/2,un=[{x:Ye,y:0},{x:te,y:At},{x:Ye,y:Ne},{x:0,y:At}].map(function(Xa){return Xa.x+","+Xa.y}).join(" ");it=re(it);var mr=de("polygon",{...it,points:un});return J(V,mr),mr}(F,T.width,T.height,{fill:Ve(T,O,N.fill),fillOpacity:Ls,stroke:Ce(T,j,N.stroke)})}function rn(F,T,N={}){var V=We(F,ai(T,N),Sr(T,N),0,{fill:Ve(T,O,N.fill),fillOpacity:N.fillOpacity||Ls,stroke:Ce(T,j,N.stroke),strokeWidth:1.5}),te=oe(T);return G(te,"bpmn:Lane")&&Hs(F,te.get("name"),T,N),V}function Pr(F,T,N={}){var V=Vs(F,T,N);(function(Ne){return Ne&&!!oe(Ne).triggeredByEvent})(T)&&w(V,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var te=kt(T);return Dt(F,T,te?"center-top":"center-middle",N),Ur(F,T,te?void 0:["SubProcessMarker"],N),V}function Pn(F,T,N={}){var V=Vs(F,T,N);return Dt(F,T,"center-middle",N),Ur(F,T,void 0,N),V}var Ht=this.handlers={"bpmn:AdHocSubProcess":function(F,T,N={}){return Pr(F,T,N=kt(T)?Et(N,["fill","stroke","width","height"]):Et(N,["fill","stroke"]))},"bpmn:Association":function(F,T,N={}){return qa(F,T,N=Et(N,["fill","stroke"]))},"bpmn:BoundaryEvent":function(F,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]);var te=oe(T).get("cancelActivity");N={strokeWidth:1.5,fill:Ve(T,O,N.fill),fillOpacity:1,stroke:Ce(T,j,N.stroke)},te||(N.strokeDasharray="6");var Ne=zn(F,T,N);return xe(F,T.width,T.height,3,{...N,fill:"none"}),V&&kr(T,F,N),Ne},"bpmn:BusinessRuleTask":function(F,T,N={}){var V=Pn(F,T,N=Et(N,["fill","stroke"]));return w(U(F,m.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),w(U(F,m.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),V},"bpmn:CallActivity":function(F,T,N={}){return N=Et(N,["fill","stroke"]),Pr(F,T,{strokeWidth:5,...N})},"bpmn:ComplexGateway":function(F,T,N={}){var V=kn(F,T,N=Et(N,["fill","stroke"]));return U(F,m.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:T.width,containerHeight:T.height,position:{mx:.46,my:.26}}),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),V},"bpmn:DataInput":function(F,T,N={}){N=Et(N,["fill","stroke"]);var V=m.getRawPath("DATA_ARROW"),te=sc(F,T,N);return U(F,V,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1}),te},"bpmn:DataInputAssociation":function(F,T,N={}){return N=Et(N,["fill","stroke"]),qa(F,T,{...N,markerEnd:Le(F,"association-end",Ve(T,O,N.fill),Ce(T,j,N.stroke))})},"bpmn:DataObject":function(F,T,N={}){return sc(F,T,N=Et(N,["fill","stroke"]))},"bpmn:DataObjectReference":Be("bpmn:DataObject"),"bpmn:DataOutput":function(F,T,N={}){N=Et(N,["fill","stroke"]);var V=m.getRawPath("DATA_ARROW"),te=sc(F,T,N);return U(F,V,{strokeWidth:1,fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke)}),te},"bpmn:DataOutputAssociation":function(F,T,N={}){return N=Et(N,["fill","stroke"]),qa(F,T,{...N,markerEnd:Le(F,"association-end",Ve(T,O,N.fill),Ce(T,j,N.stroke))})},"bpmn:DataStoreReference":function(F,T,N={}){return N=Et(N,["fill","stroke"]),U(F,m.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:0,my:.133}}),{fill:Ve(T,O,N.fill),fillOpacity:Ls,stroke:Ce(T,j,N.stroke),strokeWidth:2})},"bpmn:EndEvent":function(F,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]);var te=zn(F,T,{...N,strokeWidth:4});return V&&kr(T,F,N),te},"bpmn:EventBasedGateway":function(F,T,N={}){N=Et(N,["fill","stroke"]);var V=oe(T),te=kn(F,T,N);xe(F,T.width,T.height,.2*T.height,{fill:Ve(T,"none",N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1});var Ne=V.get("eventGatewayType"),it=!!V.get("instantiate");if(Ne==="Parallel"){var Ye=m.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:T.width,containerHeight:T.height,position:{mx:.474,my:.296}});U(F,Ye,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1})}else Ne==="Exclusive"&&(it||xe(F,T.width,T.height,.26*T.height,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1}),function(){var At=m.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:T.width,containerHeight:T.height,position:{mx:.36,my:.44}});U(F,At,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:2})}());return te},"bpmn:ExclusiveGateway":function(F,T,N={}){var V=kn(F,T,N=Et(N,["fill","stroke"])),te=m.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:T.width,containerHeight:T.height,position:{mx:.32,my:.3}});return Se(T).get("isMarkerVisible")&&U(F,te,{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),V},"bpmn:Gateway":function(F,T,N={}){return kn(F,T,N=Et(N,["fill","stroke"]))},"bpmn:Group":function(F,T,N={}){return N=Et(N,["fill","stroke","width","height"]),We(F,T.width,T.height,10,{stroke:Ce(T,j,N.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:ai(T,N),height:Sr(T,N)})},"bpmn:InclusiveGateway":function(F,T,N={}){var V=kn(F,T,N=Et(N,["fill","stroke"]));return xe(F,T.width,T.height,.24*T.height,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:2.5}),V},"bpmn:IntermediateEvent":function(F,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]);var te=zn(F,T,{...N,strokeWidth:1.5});return xe(F,T.width,T.height,3,{fill:"none",stroke:Ce(T,j,N.stroke),strokeWidth:1.5}),V&&kr(T,F,N),te},"bpmn:IntermediateCatchEvent":Be("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":Be("bpmn:IntermediateEvent"),"bpmn:Lane":function(F,T,N={}){return N=Et(N,["fill","stroke","width","height"]),rn(F,T,{...N,fillOpacity:.25})},"bpmn:ManualTask":function(F,T,N={}){var V=Pn(F,T,N=Et(N,["fill","stroke"]));return U(F,m.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),V},"bpmn:MessageFlow":function(F,T,N={}){N=Et(N,["fill","stroke"]);var V=oe(T),te=Se(T),Ne=Ve(T,O,N.fill),it=Ce(T,j,N.stroke),Ye=Re(F,T.waypoints,{markerEnd:Le(F,"messageflow-end",Ne,it),markerStart:Le(F,"messageflow-start",Ne,it),stroke:it,strokeDasharray:"10, 11",strokeWidth:1.5});if(V.get("messageRef")){var At=Ye.getPointAtLength(Ye.getTotalLength()/2),un=m.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:At.x,y:At.y}}),mr={strokeWidth:1};te.get("messageVisibleKind")==="initiating"?(mr.fill=Ne,mr.stroke=it):(mr.fill=it,mr.stroke=Ne);var Xa=U(F,un,mr),K_=Tt(F,V.get("messageRef").get("name"),{align:"center-top",fitBox:!0,style:{fill:it}}),UA=Xa.getBBox(),GA=K_.getBBox();nm(K_,At.x-GA.width/2,At.y+UA.height/2+10,0)}return Ye},"bpmn:ParallelGateway":function(F,T,N={}){var V=kn(F,T,N=Et(N,["fill","stroke"]));return U(F,m.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:T.width,containerHeight:T.height,position:{mx:.46,my:.2}}),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:1}),V},"bpmn:Participant":function(F,T,N={}){var V=rn(F,T,N=Et(N,["fill","stroke","width","height"])),te=kt(T),Ne=Ge(T),it=oe(T),Ye=it.get("name");if(te)ce(F,Ne?[{x:30,y:0},{x:30,y:Sr(T,N)}]:[{x:0,y:30},{x:ai(T,N),y:30}],{stroke:Ce(T,j,N.stroke),strokeWidth:1.5}),Hs(F,Ye,T,N);else{var At=ec(T,N);Ne||(At.height=ai(T,N),At.width=Sr(T,N));var un=Tt(F,Ye,{box:At,align:"center-middle",style:{fill:Jl(T,Z,j,N.stroke)}});Ne||nm(un,0,-(-1*Sr(T,N)),270)}return it.get("participantMultiplicity")&&en("ParticipantMultiplicityMarker",F,T,N),V},"bpmn:ReceiveTask":function(F,T,N={}){N=Et(N,["fill","stroke"]);var V,te=oe(T),Ne=Pn(F,T,N);return te.get("instantiate")?(xe(F,28,28,4.4,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),V=m.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):V=m.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),U(F,V,{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),Ne},"bpmn:ScriptTask":function(F,T,N={}){var V=Pn(F,T,N=Et(N,["fill","stroke"]));return U(F,m.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),V},"bpmn:SendTask":function(F,T,N={}){var V=Pn(F,T,N=Et(N,["fill","stroke"]));return U(F,m.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{fill:Ce(T,j,N.stroke),stroke:Ve(T,O,N.fill),strokeWidth:1}),V},"bpmn:SequenceFlow":function(F,T,N={}){N=Et(N,["fill","stroke"]);var V=Ve(T,O,N.fill),te=Ce(T,j,N.stroke),Ne=Re(F,T.waypoints,{markerEnd:Le(F,"sequenceflow-end",V,te),stroke:te}),it=oe(T),{source:Ye}=T;if(Ye){var At=oe(Ye);it.get("conditionExpression")&&G(At,"bpmn:Activity")&&w(Ne,{markerStart:Le(F,"conditional-flow-marker",V,te)}),At.get("default")&&(G(At,"bpmn:Gateway")||G(At,"bpmn:Activity"))&&At.get("default")===it&&w(Ne,{markerStart:Le(F,"conditional-default-flow-marker",V,te)})}return Ne},"bpmn:ServiceTask":function(F,T,N={}){var V=Pn(F,T,N=Et(N,["fill","stroke"]));return xe(F,10,10,{fill:Ve(T,O,N.fill),stroke:"none",transform:"translate(6, 6)"}),U(F,m.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),xe(F,10,10,{fill:Ve(T,O,N.fill),stroke:"none",transform:"translate(11, 10)"}),U(F,m.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:1}),V},"bpmn:StartEvent":function(F,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]),oe(T).get("isInterrupting")||(N={...N,strokeDasharray:"6"});var te=zn(F,T,N);return V&&kr(T,F,N),te},"bpmn:SubProcess":function(F,T,N={}){return Pr(F,T,N=kt(T)?Et(N,["fill","stroke","width","height"]):Et(N,["fill","stroke"]))},"bpmn:Task":function(F,T,N={}){return Pn(F,T,N=Et(N,["fill","stroke"]))},"bpmn:TextAnnotation":function(F,T,N={}){N=Et(N,["fill","stroke","width","height"]);var{width:V,height:te}=ec(T,N),Ne=We(F,V,te,0,0,{fill:"none",stroke:"none"});return U(F,m.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:0,my:0}}),{stroke:Ce(T,j,N.stroke)}),Tt(F,oe(T).get("text")||"",{align:"left-top",box:ec(T,N),padding:7,style:{fill:Jl(T,Z,j,N.stroke)}}),Ne},"bpmn:Transaction":function(F,T,N={}){N=kt(T)?Et(N,["fill","stroke","width","height"]):Et(N,["fill","stroke"]);var V=Pr(F,T,{strokeWidth:1.5,...N}),te=h.style(["no-fill","no-events"],{stroke:Ce(T,j,N.stroke),strokeWidth:1.5});return kt(T)||(N={}),We(F,ai(T,N),Sr(T,N),7,3,te),V},"bpmn:UserTask":function(F,T,N={}){var V=Pn(F,T,N=Et(N,["fill","stroke"]));return U(F,m.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),U(F,m.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{fill:Ve(T,O,N.fill),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),U(F,m.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{fill:Ce(T,j,N.stroke),stroke:Ce(T,j,N.stroke),strokeWidth:.5}),V},label:function(F,T,N={}){return function(V,te,Ne={}){var it={width:90,height:30,x:te.width/2+te.x,y:te.height/2+te.y};return Tt(V,Q(te),{box:it,fitBox:!0,style:L({},S.getExternalStyle(),{fill:Jl(te,Z,j,Ne.stroke)})})}(F,T,N)}};this._drawPath=U,this._renderer=ne}function Et(c,p=[]){return p.reduce((h,m)=>(c[m]&&(h[m]=c[m]),h),{})}n(Ha,Y),Ha.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Ha.prototype.canRender=function(c){return G(c,"bpmn:BaseElement")},Ha.prototype.drawShape=function(c,p,h={}){var{type:m}=p;return this._renderer(m)(c,p,h)},Ha.prototype.drawConnection=function(c,p,h={}){var{type:m}=p;return this._renderer(m)(c,p,h)},Ha.prototype.getShapePath=function(c){return G(c,"bpmn:Event")?function(p){var h=p.x+p.width/2,m=p.y+p.height/2,_=p.width/2;return wt([["M",h,m],["m",0,-_],["a",_,_,0,1,1,0,2*_],["a",_,_,0,1,1,0,-2*_],["z"]])}(c):G(c,"bpmn:Activity")?function(p,h){var m=p.x,_=p.y,S=p.width,M=p.height;return wt([["M",m+h,_],["l",S-2*h,0],["a",h,h,0,0,1,h,h],["l",0,M-2*h],["a",h,h,0,0,1,-h,h],["l",2*h-S,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-M],["a",h,h,0,0,1,h,-h],["z"]])}(c,10):G(c,"bpmn:Gateway")?function(p){var h=p.width/2,m=p.height/2;return wt([["M",p.x+h,p.y],["l",h,m],["l",-h,m],["l",-h,-m],["z"]])}(c):function(p){var h=p.x,m=p.y,_=p.width;return wt([["M",h,m],["l",_,0],["l",0,p.height],["l",-_,0],["z"]])}(c)};var AT=0,MT={width:150,height:50};function NT(c,p){var h;p.textContent=c;try{var m,_=c==="";return p.textContent=_?"dummy":c,m={width:(h=p.getBBox()).width+2*h.x,height:h.height},_&&(m.width=0),m}catch{return{width:0,height:0}}}function DT(c,p,h){for(var m,_=c.shift(),S=_;;){if((m=NT(S,h)).width=S?m.width:0,S===" "||S===""||m.width<Math.round(p)||S.length<2)return OT(c,S,_,m);S=LT(S,m.width,p)}}function OT(c,p,h,m){if(p.length<h.length){var _=h.slice(p.length).trim();c.unshift(_)}return{width:m.width,height:m.height,text:p}}var Hx="";function LT(c,p,h){var m=Math.max(c.length*(h/p),1),_=function(S,M){var O,j=S.split(/(\s|-|\u00AD)/g),Z=[],re=0;if(j.length>1)for(;O=j.shift();){if(!(O.length+re<M)){O!=="-"&&O!==Hx||Z.pop();break}Z.push(O),re+=O.length}var fe=Z[Z.length-1];return fe&&fe===Hx&&(Z[Z.length-1]="-"),Z.join("")}(c,m);return _||(_=c.slice(0,Math.max(Math.round(m-1),1))),_}function sp(c){this._config=L({},{size:MT,padding:AT,style:{},align:"center-top"},c||{})}sp.prototype.createText=function(c,p){return this.layoutText(c,p).element},sp.prototype.getDimensions=function(c,p){return this.layoutText(c,p).dimensions},sp.prototype.layoutText=function(c,p){var h=L({},this._config.size,p.box),m=L({},this._config.style,p.style),_=function(ce){var Re=ce.split("-");return{horizontal:Re[0]||"center",vertical:Re[1]||"top"}}(p.align||this._config.align),S=function(ce){return l(ce)?L({top:0,left:0,right:0,bottom:0},ce):{top:ce,left:ce,right:ce,bottom:ce}}(p.padding!==void 0?p.padding:this._config.padding),M=p.fitBox||!1,O=function(ce){if("fontSize"in ce&&"lineHeight"in ce)return ce.lineHeight*parseInt(ce.fontSize,10)}(m),j=c.split(/\u00AD?\r?\n/),Z=[],re=h.width-S.left-S.right,fe=de("text");for(w(fe,{x:0,y:0}),w(fe,m),J(function(){var ce=document.getElementById("helper-svg");return ce||(w(ce=de("svg"),{id:"helper-svg"}),Cr(ce,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(ce)),ce}(),fe);j.length;)Z.push(DT(j,re,fe));_.vertical==="middle"&&(S.top=S.bottom=0);var Ee=C(Z,function(ce,Re,U){return ce+(O||Re.height)},0)+S.top+S.bottom,Le=C(Z,function(ce,Re,U){return Re.width>ce?Re.width:ce},0),xe=S.top;_.vertical==="middle"&&(xe+=(h.height-Ee)/2),xe-=(O||Z[0].height)/4;var We=de("text");return w(We,m),x(Z,function(ce){var Re;switch(xe+=O||ce.height,_.horizontal){case"left":Re=S.left;break;case"right":Re=(M?Le:re)-S.right-ce.width;break;default:Re=Math.max(((M?Le:re)-ce.width)/2+S.left,0)}var U=de("tspan");w(U,{x:Re,y:xe}),U.textContent=ce.text,J(We,U)}),Me(fe),{dimensions:{width:Le,height:Ee},element:We}};function Vx(c){var p=L({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},c&&c.defaultStyle||{}),h=parseInt(p.fontSize,10)-1,m=L({},p,{fontSize:h},c&&c.externalStyle||{}),_=new sp({style:p});this.getExternalLabelBounds=function(S,M){var O=_.getDimensions(M,{box:{width:90,height:30},style:m});return{x:Math.round(S.x+S.width/2-O.width/2),y:Math.round(S.y),width:Math.ceil(O.width),height:Math.ceil(O.height)}},this.getTextAnnotationBounds=function(S,M){var O=_.getDimensions(M,{box:S,style:p,align:"left-top",padding:5});return{x:S.x,y:S.y,width:S.width,height:Math.max(30,Math.round(O.height))}},this.createText=function(S,M){return _.createText(S,M||{})},this.getDefaultStyle=function(){return p},this.getExternalStyle=function(){return m}}Vx.$inject=["config.textRenderer"];var IT=/\{([^{}]+)\}/g,BT=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,jT={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ha],textRenderer:["type",Vx],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(c){return this.pathMap[c].d},this.getScaledPath=function(c,p){var h,m,_=this.pathMap[c];p.abspos?(h=p.abspos.x,m=p.abspos.y):(h=p.containerWidth*p.position.mx,m=p.containerHeight*p.position.my);var S={};if(p.position){for(var M=p.containerHeight/_.height*p.yScaleFactor,O=p.containerWidth/_.width*p.xScaleFactor,j=0;j<_.heightElements.length;j++)S["y"+j]=_.heightElements[j]*M;for(var Z=0;Z<_.widthElements.length;Z++)S["x"+Z]=_.widthElements[Z]*O}var re,fe,Ee=(re=_.d,fe={mx:h,my:m,e:S},String(re).replace(IT,function(Le,xe){return function(We,ce,Re){var U=Re;return ce.replace(BT,function(ie,ne,Be,we,ut){ne=ne||we,U&&(ne in U&&(U=U[ne]),typeof U=="function"&&ut&&(U=U()))}),U=(U==null||U==Re?We:U)+""}(Le,xe,fe)}));return Ee}}]},Wx={translate:["value",function(c,p){return p=p||{},c.replace(/{([^}]+)}/g,function(h,m){return p[m]||"{"+m+"}"})}]};function rm(c){return{top:c.y,right:c.x+(c.width||0),bottom:c.y+(c.height||0),left:c.x}}function $T(c){return p={x:c.x+(c.width||0)/2,y:c.y+(c.height||0)/2},{x:Math.round(p.x),y:Math.round(p.y)};var p}function FT(c){for(var p=c.waypoints,h=p.reduce(function(O,j,Z){var re,fe,Ee=p[Z-1];if(Ee){var Le=O[O.length-1],xe=Le&&Le.endLength||0,We=(re=Ee,fe=j,Math.sqrt(Math.pow(re.x-fe.x,2)+Math.pow(re.y-fe.y,2)));O.push({start:Ee,end:j,startLength:xe,endLength:xe+We,length:We})}return O},[]),m=h.reduce(function(O,j){return O+j.length},0)/2,_=0,S=h[_];S.endLength<m;)S=h[++_];var M=(m-S.startLength)/S.length;return{x:S.start.x+(S.end.x-S.start.x)*M,y:S.start.y+(S.end.y-S.start.y)*M}}function im(c){return l(p=c)&&g(p,"waypoints")?FT(c):$T(c);var p}function Kn(c){return c?"<"+c.$type+(c.id?' id="'+c.id:"")+'" />':"<null>"}function lp(c,p,h){return L({id:c.id,type:c.$type,businessObject:c,di:p},h)}function zT(c,p,h){var m=c.waypoint;return!m||m.length<2?[im(p),im(h)]:m.map(function(_){return{x:_.x,y:_.y}})}function Ux(c,p,h){return new Error(`element ${Kn(p)} referenced by ${Kn(c)}#${h} not yet drawn`)}function lo(c,p,h,m,_){this._eventBus=c,this._canvas=p,this._elementFactory=h,this._elementRegistry=m,this._textRenderer=_}lo.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"],lo.prototype.add=function(c,p,h){var m,_,S,M,O,j,Z;if(G(p,"bpmndi:BPMNPlane")){var re=G(c,"bpmn:SubProcess")?{id:c.id+"_plane"}:{};m=this._elementFactory.createRoot(lp(c,p,re)),this._canvas.addRootElement(m)}else if(G(p,"bpmndi:BPMNShape")){var fe=!kt(c,p),Ee=function(ce){return G(ce,"bpmn:Group")}(c);_=h&&(h.hidden||h.collapsed);var Le=p.bounds;m=this._elementFactory.createShape(lp(c,p,{collapsed:fe,hidden:_,x:Math.round(Le.x),y:Math.round(Le.y),width:Math.round(Le.width),height:Math.round(Le.height),isFrame:Ee})),G(c,"bpmn:BoundaryEvent")&&this._attachBoundary(c,m),G(c,"bpmn:Lane")&&(S=0),G(c,"bpmn:DataStoreReference")&&(M=h,O=im(Le),j=O.x,Z=O.y,j>=M.x&&j<=M.x+M.width&&Z>=M.y&&Z<=M.y+M.height||(h=this._canvas.findRoot(h))),this._canvas.addShape(m,h,S)}else{if(!G(p,"bpmndi:BPMNEdge"))throw new Error(`unknown di ${Kn(p)} for element ${Kn(c)}`);var xe=this._getSource(c),We=this._getTarget(c);_=h&&(h.hidden||h.collapsed),m=this._elementFactory.createConnection(lp(c,p,{hidden:_,source:xe,target:We,waypoints:zT(p,xe,We)})),G(c,"bpmn:DataAssociation")&&(h=this._canvas.findRoot(h)),this._canvas.addConnection(m,h,S)}return function(ce){return G(ce,"bpmn:Event")||G(ce,"bpmn:Gateway")||G(ce,"bpmn:DataStoreReference")||G(ce,"bpmn:DataObjectReference")||G(ce,"bpmn:DataInput")||G(ce,"bpmn:DataOutput")||G(ce,"bpmn:SequenceFlow")||G(ce,"bpmn:MessageFlow")||G(ce,"bpmn:Group")}(c)&&Q(m)&&this.addLabel(c,p,m),this._eventBus.fire("bpmnElement.added",{element:m}),m},lo.prototype._attachBoundary=function(c,p){var h=c.attachedToRef;if(!h)throw new Error(`missing ${Kn(c)}#attachedToRef`);var m=this._elementRegistry.get(h.id),_=m&&m.attachers;if(!m)throw Ux(c,h,"attachedToRef");p.host=m,_||(m.attachers=_=[]),_.indexOf(p)===-1&&_.push(p)},lo.prototype.addLabel=function(c,p,h){var m,_,S;return m=qe(p,h),(_=Q(h))&&(m=this._textRenderer.getExternalLabelBounds(m,_)),S=this._elementFactory.createLabel(lp(c,p,{id:c.id+"_label",labelTarget:h,type:"label",hidden:h.hidden||!Q(h),x:Math.round(m.x),y:Math.round(m.y),width:Math.round(m.width),height:Math.round(m.height)})),this._canvas.addShape(S,h.parent)},lo.prototype._getConnectedElement=function(c,p){var h,m,_=c.$type;if(m=c[p+"Ref"],p==="source"&&_==="bpmn:DataInputAssociation"&&(m=m&&m[0]),(p==="source"&&_==="bpmn:DataOutputAssociation"||p==="target"&&_==="bpmn:DataInputAssociation")&&(m=c.$parent),h=m&&this._getElement(m))return h;throw m?Ux(c,m,p+"Ref"):new Error(`${Kn(c)}#${p} Ref not specified`)},lo.prototype._getSource=function(c){return this._getConnectedElement(c,"source")},lo.prototype._getTarget=function(c){return this._getConnectedElement(c,"target")},lo.prototype._getElement=function(c){return this._elementRegistry.get(c.id)};var HT={__depends__:[jT,{__depends__:[Wx],bpmnImporter:["type",lo]}]};function Va(c,p){var h,m,_,S;return p=!!p,s(c)||(c=[c]),x(c,function(M){var O=M;M.waypoints&&!p&&(O=Va(M.waypoints,!0));var j=O.x,Z=O.y,re=O.height||0,fe=O.width||0;(j<h||h===void 0)&&(h=j),(Z<m||m===void 0)&&(m=Z),(j+fe>_||_===void 0)&&(_=j+fe),(Z+re>S||S===void 0)&&(S=Z+re)}),{x:h,y:m,height:S-m,width:_-h}}function Gx(c){return"waypoints"in c?"connection":"x"in c?"shape":"root"}function Kx(c){return!(!c||!c.isFrame)}function Yx(c){this._counter=0,this._prefix=(c?c+"-":"")+Math.floor(1e9*Math.random())+"-"}Yx.prototype.next=function(){return this._prefix+ ++this._counter};var VT=new Yx("ov");function On(c,p,h,m){var _,S;this._eventBus=p,this._canvas=h,this._elementRegistry=m,this._ids=VT,this._overlayDefaults=L({show:null,scale:!0},c&&c.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(_=h.getContainer(),Cr(S=Hi('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),_.insertBefore(S,_.firstChild),S),this._init()}function qx(c,p,h){Cr(c,{left:p+"px",top:h+"px"})}function cp(c,p){c.style.display=p===!1?"none":""}function Xx(c,p){c.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(h){c.style[h+"transform"]=p})}On.$inject=["config.overlays","eventBus","canvas","elementRegistry"],On.prototype.get=function(c){if(d(c)&&(c={id:c}),d(c.element)&&(c.element=this._elementRegistry.get(c.element)),c.element){var p=this._getOverlayContainer(c.element,!0);return p?c.type?v(p.overlays,E({type:c.type})):p.overlays.slice():[]}return c.type?v(this._overlays,E({type:c.type})):c.id?this._overlays[c.id]:null},On.prototype.add=function(c,p,h){if(l(p)&&(h=p,p=null),c.id||(c=this._elementRegistry.get(c)),!h.position)throw new Error("must specifiy overlay position");if(!h.html)throw new Error("must specifiy overlay html");if(!c)throw new Error("invalid element specified");var m=this._ids.next();return h=L({},this._overlayDefaults,h,{id:m,type:p,element:c,html:h.html}),this._addOverlay(h),m},On.prototype.remove=function(c){var p=this.get(c)||[];s(p)||(p=[p]);var h=this;x(p,function(m){var _=h._getOverlayContainer(m.element,!0);if(m&&(ap(m.html),ap(m.htmlContainer),delete m.htmlContainer,delete m.element,delete h._overlays[m.id]),_){var S=_.overlays.indexOf(m);S!==-1&&_.overlays.splice(S,1)}})},On.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"},On.prototype.show=function(){cp(this._overlayRoot)},On.prototype.hide=function(){cp(this._overlayRoot,!1)},On.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Bx(this._overlayRoot)},On.prototype._updateOverlayContainer=function(c){var p=c.element,h=c.html,m=p.x,_=p.y;if(p.waypoints){var S=Va(p);m=S.x,_=S.y}qx(h,m,_),function(M,O,j){arguments.length==2?M.getAttribute(O):j===null?M.removeAttribute(O):M.setAttribute(O,j)}(c.html,"data-container-id",p.id)},On.prototype._updateOverlay=function(c){var p,h,m=c.position,_=c.htmlContainer,S=c.element,M=m.left,O=m.top;m.right!==void 0&&(p=S.waypoints?Va(S).width:S.width,M=-1*m.right+p),m.bottom!==void 0&&(h=S.waypoints?Va(S).height:S.height,O=-1*m.bottom+h),qx(_,M||0,O||0),this._updateOverlayVisibilty(c,this._canvas.viewbox())},On.prototype._createOverlayContainer=function(c){var p=Hi('<div class="djs-overlays" />');Cr(p,{position:"absolute"}),this._overlayRoot.appendChild(p);var h={html:p,element:c,overlays:[]};return this._updateOverlayContainer(h),this._overlayContainers.push(h),h},On.prototype._updateRoot=function(c){var p=c.scale||1,h="matrix("+[p,0,0,p,-1*c.x*p,-1*c.y*p].join(",")+")";Xx(this._overlayRoot,h)},On.prototype._getOverlayContainer=function(c,p){var h=y(this._overlayContainers,function(m){return m.element===c});return h||p?h:this._createOverlayContainer(c)},On.prototype._addOverlay=function(c){var p,h,m=c.id,_=c.element,S=c.html;S.get&&S.constructor.prototype.jquery&&(S=S.get(0)),d(S)&&(S=Hi(S)),h=this._getOverlayContainer(_),Cr(p=Hi('<div class="djs-overlay" data-overlay-id="'+m+'">'),{position:"absolute"}),p.appendChild(S),c.type&&rp(p).add("djs-overlay-"+c.type),cp(p,this._canvas.findRoot(_)===this._canvas.getRootElement()),c.htmlContainer=p,h.overlays.push(c),h.html.appendChild(p),this._overlays[m]=c,this._updateOverlay(c),this._updateOverlayVisibilty(c,this._canvas.viewbox())},On.prototype._updateOverlayVisibilty=function(c,p){var h=c.show,m=this._canvas.findRoot(c.element),_=h&&h.minZoom,S=h&&h.maxZoom,M=c.htmlContainer,O=!0;(m!==this._canvas.getRootElement()||h&&(a(_)&&_>p.scale||a(S)&&S<p.scale))&&(O=!1),cp(M,O),this._updateOverlayScale(c,p)},On.prototype._updateOverlayScale=function(c,p){var h,m,_,S=c.scale,M=c.htmlContainer,O="";S!==!0&&(S===!1?(h=1,m=1):(h=S.min,m=S.max),a(h)&&p.scale<h&&(_=(1/p.scale||1)*h),a(m)&&p.scale>m&&(_=(1/p.scale||1)*m)),a(_)&&(O="scale("+_+","+_+")"),Xx(M,O)},On.prototype._updateOverlaysVisibilty=function(c){var p=this;x(this._overlays,function(h){p._updateOverlayVisibilty(h,c)})},On.prototype._init=function(){var c=this._eventBus,p=this;c.on("canvas.viewbox.changing",function(h){p.hide()}),c.on("canvas.viewbox.changed",function(h){var m;m=h.viewbox,p._updateRoot(m),p._updateOverlaysVisibilty(m),p.show()}),c.on(["shape.remove","connection.remove"],function(h){var m=h.element;x(p.get({element:m}),function(M){p.remove(M.id)});var _=p._getOverlayContainer(m);if(_){ap(_.html);var S=p._overlayContainers.indexOf(_);S!==-1&&p._overlayContainers.splice(S,1)}}),c.on("element.changed",500,function(h){var m=h.element,_=p._getOverlayContainer(m,!0);_&&(x(_.overlays,function(S){p._updateOverlay(S)}),p._updateOverlayContainer(_))}),c.on("element.marker.update",function(h){var m=p._getOverlayContainer(h.element,!0);m&&rp(m.html)[h.add?"add":"remove"](h.marker)}),c.on("root.set",function(){p._updateOverlaysVisibilty(p._canvas.viewbox())}),c.on("diagram.clear",this.clear,this)};var Qx={__init__:["overlays"],overlays:["type",On]};function Zx(c,p,h,m){c.on("element.changed",function(_){var S=_.element;(S.parent||S===p.getRootElement())&&(_.gfx=h.getGraphics(S)),_.gfx&&c.fire(Gx(S)+".changed",_)}),c.on("elements.changed",function(_){var S=_.elements;S.forEach(function(M){c.fire("element.changed",{element:M})}),m.updateContainments(S)}),c.on("shape.changed",function(_){m.update("shape",_.element,_.gfx)}),c.on("connection.changed",function(_){m.update("connection",_.element,_.gfx)})}Zx.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var WT={__init__:["changeSupport"],changeSupport:["type",Zx]};function dr(c){this._eventBus=c}function co(c){return function(p,h,m,_,S){(f(p)||u(p))&&(S=_,_=m,m=h,h=p,p=null),this.on(p,c,h,m,_,S)}}function om(c,p){p.invoke(dr,this),this.executed(function(h){var m=h.context;m.rootElement?c.setRootElement(m.rootElement):m.rootElement=c.getRootElement()}),this.revert(function(h){var m=h.context;m.rootElement&&c.setRootElement(m.rootElement)})}dr.$inject=["eventBus"],dr.prototype.on=function(c,p,h,m,_,S){if((f(p)||u(p))&&(S=_,_=m,m=h,h=p,p=null),f(h)&&(S=_,_=m,m=h,h=1e3),l(_)&&(S=_,_=!1),!f(m))throw new Error("handlerFn must be a function");s(c)||(c=[c]);var M=this._eventBus;x(c,function(O){var j=["commandStack",O,p].filter(function(Z){return Z}).join(".");M.on(j,h,_?function(Z,re){return function(fe){return Z.call(re||null,fe.context,fe.command,fe)}}(m,S):m,S)})},dr.prototype.canExecute=co("canExecute"),dr.prototype.preExecute=co("preExecute"),dr.prototype.preExecuted=co("preExecuted"),dr.prototype.execute=co("execute"),dr.prototype.executed=co("executed"),dr.prototype.postExecute=co("postExecute"),dr.prototype.postExecuted=co("postExecuted"),dr.prototype.revert=co("revert"),dr.prototype.reverted=co("reverted"),n(om,dr),om.$inject=["canvas","injector"];var UT={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",om]},GT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},KT="_plane";function am(c){var p=c.id;return G(c,"bpmn:SubProcess")?function(h){return h+KT}(p):p}function Jx(c,p,h){var m=Hi('<ul class="bjs-breadcrumbs"></ul>'),_=h.getContainer(),S=rp(_);_.appendChild(m);var M=[];function O(j){j&&(M=function(fe){for(var Ee=oe(fe),Le=[],xe=Ee;xe;xe=xe.$parent)(G(xe,"bpmn:SubProcess")||G(xe,"bpmn:Process"))&&Le.push(xe);return Le.reverse()}(j));var Z=M.flatMap(function(fe){var Ee=h.findRoot(am(fe))||h.findRoot(fe.id);if(!Ee&&G(fe,"bpmn:Process")){var Le=p.find(function(Re){var U=oe(Re);return U&&U.get("processRef")===fe});Ee=Le&&h.findRoot(Le.id)}if(!Ee)return[];var xe,We=(xe=""+(xe=fe.name||fe.id))&&xe.replace(/[&<>"']/g,function(Re){return GT[Re]}),ce=Hi('<li><span class="bjs-crumb"><a title="'+We+'">'+We+"</a></span></li>");return ce.addEventListener("click",function(){h.setRootElement(Ee)}),ce});m.innerHTML="";var re=Z.length>1;S.toggle("bjs-breadcrumbs-shown",re),Z.forEach(function(fe){m.appendChild(fe)})}c.on("element.changed",function(j){var Z=oe(j.element);y(M,function(re){return re===Z})&&O()}),c.on("root.set",function(j){O(j.element)})}function e_(c,p){var h=null,m=new YT;c.on("root.set",function(_){var S=_.element,M=p.viewbox(),O=m.get(S);if(m.set(h,{x:M.x,y:M.y,zoom:M.scale}),h=S,G(S,"bpmn:SubProcess")||O){O=O||{x:0,y:0,zoom:1};var j=(M.x-O.x)*M.scale,Z=(M.y-O.y)*M.scale;j===0&&Z===0||p.scroll({dx:j,dy:Z}),O.zoom!==M.scale&&p.zoom(O.zoom,{x:0,y:0})}}),c.on("diagram.clear",function(){m.clear(),h=null})}function YT(){this._entries=[],this.set=function(c,p){var h=!1;for(var m in this._entries)if(this._entries[m][0]===c){this._entries[m][1]=p,h=!0;break}h||this._entries.push([c,p])},this.get=function(c){for(var p in this._entries)if(this._entries[p][0]===c)return this._entries[p][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(c){var p=-1;for(var h in this._entries)if(this._entries[h][0]===c){p=h;break}p!==-1&&this._entries.splice(p,1)}}Jx.$inject=["eventBus","elementRegistry","canvas"],e_.$inject=["eventBus","canvas"];var qT=180,XT=160;function Wa(c,p){this._eventBus=c,this._moddle=p;var h=this;c.on("import.render.start",1500,function(m,_){h._handleImport(_.definitions)})}function t_(c){return G(c,"bpmndi:BPMNDiagram")?c:t_(c.$parent)}Wa.prototype._handleImport=function(c){if(c.diagrams){var p=this;this._definitions=c,this._processToDiagramMap={},c.diagrams.forEach(function(h){h.plane&&h.plane.bpmnElement&&(p._processToDiagramMap[h.plane.bpmnElement.id]=h)}),c.diagrams.filter(h=>h.plane).flatMap(h=>p._createNewDiagrams(h.plane)).forEach(function(h){p._movePlaneElementsToOrigin(h.plane)})}},Wa.prototype._createNewDiagrams=function(c){var p=this,h=[],m=[];c.get("planeElement").forEach(function(S){var M=S.bpmnElement;if(M){var O=M.$parent;G(M,"bpmn:SubProcess")&&!S.isExpanded&&h.push(M),function(j,Z){var re=j.$parent;return!(!G(re,"bpmn:SubProcess")||re===Z.bpmnElement||le(j,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}(M,c)&&m.push({diElement:S,parent:O})}});var _=[];return h.forEach(function(S){if(!p._processToDiagramMap[S.id]){var M=p._createDiagram(S);p._processToDiagramMap[S.id]=M,_.push(M)}}),m.forEach(function(S){for(var M=S.diElement,O=S.parent;O&&h.indexOf(O)===-1;)O=O.$parent;if(O){var j=p._processToDiagramMap[O.id];p._moveToDiPlane(M,j.plane)}}),_},Wa.prototype._movePlaneElementsToOrigin=function(c){var p=c.get("planeElement"),h=function(S){var M={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return S.planeElement.forEach(function(O){if(O.bounds){var j=rm(O.bounds);M.top=Math.min(j.top,M.top),M.left=Math.min(j.left,M.left)}}),function(O){return{x:O.left,y:O.top,width:O.right-O.left,height:O.bottom-O.top}}(M)}(c),m=h.x-qT,_=h.y-XT;p.forEach(function(S){S.waypoint?S.waypoint.forEach(function(M){M.x=M.x-m,M.y=M.y-_}):S.bounds&&(S.bounds.x=S.bounds.x-m,S.bounds.y=S.bounds.y-_)})},Wa.prototype._moveToDiPlane=function(c,p){var h=t_(c).plane.get("planeElement");h.splice(h.indexOf(c),1),p.get("planeElement").push(c)},Wa.prototype._createDiagram=function(c){var p=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:c}),h=this._moddle.create("bpmndi:BPMNDiagram",{plane:p});return p.$parent=h,p.bpmnElement=c,h.$parent=this._definitions,this._definitions.diagrams.push(h),h},Wa.$inject=["eventBus","moddle"];var up=250;function Fo(c,p,h,m,_){dr.call(this,p),this._canvas=c,this._eventBus=p,this._elementRegistry=h,this._overlays=m,this._translate=_;var S=this;this.executed("shape.toggleCollapse",up,function(M){var O=M.shape;S._canDrillDown(O)?S._addOverlay(O):S._removeOverlay(O)},!0),this.reverted("shape.toggleCollapse",up,function(M){var O=M.shape;S._canDrillDown(O)?S._addOverlay(O):S._removeOverlay(O)},!0),this.executed(["shape.create","shape.move","shape.delete"],up,function(M){var O=M.oldParent,j=M.newParent||M.parent,Z=M.shape;S._canDrillDown(Z)&&S._addOverlay(Z),S._updateDrilldownOverlay(O),S._updateDrilldownOverlay(j),S._updateDrilldownOverlay(Z)},!0),this.reverted(["shape.create","shape.move","shape.delete"],up,function(M){var O=M.oldParent,j=M.newParent||M.parent,Z=M.shape;S._canDrillDown(Z)&&S._addOverlay(Z),S._updateDrilldownOverlay(O),S._updateDrilldownOverlay(j),S._updateDrilldownOverlay(Z)},!0),p.on("import.render.complete",function(){h.filter(function(M){return S._canDrillDown(M)}).map(function(M){S._addOverlay(M)})})}n(Fo,dr),Fo.prototype._updateDrilldownOverlay=function(c){var p=this._canvas;if(c){var h=p.findRoot(c);h&&this._updateOverlayVisibility(h)}},Fo.prototype._canDrillDown=function(c){var p=this._canvas;return G(c,"bpmn:SubProcess")&&p.findRoot(am(c))},Fo.prototype._updateOverlayVisibility=function(c){var p=this._overlays,h=oe(c),m=p.get({element:h.id,type:"drilldown"})[0];if(m){var _=h&&h.get("flowElements")&&h.get("flowElements").length;rp(m.html).toggle("bjs-drilldown-empty",!_)}},Fo.prototype._addOverlay=function(c){var p=this._canvas,h=this._overlays,m=oe(c);h.get({element:c,type:"drilldown"}).length&&this._removeOverlay(c);var _=Hi('<button type="button" class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>'),S=m.get("name")||m.get("id"),M=this._translate("Open {element}",{element:S});_.setAttribute("title",M),_.addEventListener("click",function(){p.setRootElement(p.findRoot(am(c)))}),h.add(c,"drilldown",{position:{bottom:-7,right:-8},html:_}),this._updateOverlayVisibility(c)},Fo.prototype._removeOverlay=function(c){this._overlays.remove({element:c,type:"drilldown"})},Fo.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];var QT={__depends__:[Qx,WT,UT],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",Jx],drilldownCentering:["type",e_],drilldownOverlayBehavior:["type",Fo],subprocessCompatibility:["type",Wa]};function Ua(c,p){this._eventBus=c,this.offset=5;var h=p.cls("djs-outline",["no-fill"]),m=this;function _(S){var M=de("rect");return w(M,L({x:0,y:0,rx:4,width:100,height:100},h)),M}c.on(["shape.added","shape.changed"],500,function(S){var M=S.element,O=S.gfx,j=Pi(".djs-outline",O);j||J(O,j=m.getOutline(M)||_()),m.updateShapeOutline(j,M)}),c.on(["connection.added","connection.changed"],function(S){var M=S.element,O=S.gfx,j=Pi(".djs-outline",O);j||J(O,j=_()),m.updateConnectionOutline(j,M)})}Ua.prototype.updateShapeOutline=function(c,p){var h=!1,m=this._getProviders();m.length&&x(m,function(_){h=h||_.updateOutline(p,c)}),h||w(c,{x:-this.offset,y:-this.offset,width:p.width+2*this.offset,height:p.height+2*this.offset})},Ua.prototype.updateConnectionOutline=function(c,p){var h=Va(p);w(c,{x:h.x-this.offset,y:h.y-this.offset,width:h.width+2*this.offset,height:h.height+2*this.offset})},Ua.prototype.registerProvider=function(c,p){p||(p=c,c=1e3),this._eventBus.on("outline.getProviders",c,function(h){h.providers.push(p)})},Ua.prototype._getProviders=function(){var c=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(c),c.providers},Ua.prototype.getOutline=function(c){var p;return x(this._getProviders(),function(h){f(h.getOutline)&&(p=p||h.getOutline(c))}),p},Ua.$inject=["eventBus","styles","elementRegistry"];var n_={__init__:["outline"],outline:["type",Ua]};const ZT={width:36,height:50},JT={width:50,height:50};function r_(c,p,h){return de("path",{d:c,strokeWidth:2,transform:`translate(${p.x}, ${p.y})`,...h})}function pp(c,p){this._styles=p,c.registerProvider(this)}function i_(c,p){var h;return p==="bpmn:DataObjectReference"?h=ZT:p==="bpmn:DataStoreReference"&&(h=JT),c.width===h.width&&c.height===h.height}pp.$inject=["outline","styles"],pp.prototype.getOutline=function(c){const p=this._styles.cls("djs-outline",["no-fill"]);var h;if(!Ke(c))return G(c,"bpmn:Gateway")?(L((h=de("rect")).style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),w(h,L({x:2,y:2,rx:4,width:c.width-4,height:c.height-4},p))):le(c,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?w(h=de("rect"),L({x:-5,y:-5,rx:14,width:c.width+10,height:c.height+10},p)):G(c,"bpmn:EndEvent")?w(h=de("circle"),L({cx:c.width/2,cy:c.height/2,r:c.width/2+5+1},p)):G(c,"bpmn:Event")?w(h=de("circle"),L({cx:c.width/2,cy:c.height/2,r:c.width/2+5},p)):G(c,"bpmn:DataObjectReference")&&i_(c,"bpmn:DataObjectReference")?h=r_("M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",{x:-6,y:-6},p):G(c,"bpmn:DataStoreReference")&&i_(c,"bpmn:DataStoreReference")&&(h=r_("M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",{x:-6,y:-6},p)),h},pp.prototype.updateOutline=function(c,p){if(!Ke(c))return le(c,["bpmn:SubProcess","bpmn:Group"])?(w(p,{width:c.width+10,height:c.height+10}),!0):!!le(c,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};var eA={__depends__:[n_],__init__:["outlineProvider"],outlineProvider:["type",pp]};function o_(c){return c.originalEvent||c.srcEvent}function a_(c,p){return(o_(c)||c).button===p}function fp(c){return a_(c,0)}function tA(c){return!0}function dp(c){return fp(c)||function(p){return a_(p,1)}(c)}function s_(c,p,h){var m=this;function _(U,ie,ne){var Be,we;(function(ut,lt){var He=j[ut]||fp;return!He(lt)})(U,ie)||(ne?we=p.getGraphics(ne):(Be=ie.delegateTarget||ie.target)&&(we=Be,ne=p.get(we)),we&&ne&&c.fire(U,{element:ne,gfx:we,originalEvent:ie})===!1&&(ie.stopPropagation(),ie.preventDefault()))}var S={};function M(U){return S[U]}var O={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},j={"element.contextmenu":tA,"element.mousedown":dp,"element.mouseup":dp,"element.click":dp,"element.dblclick":dp},Z="svg, .djs-element";function re(U,ie,ne,Be){var we=S[ne]=function(ut){_(ne,ut)};Be&&(j[ne]=Be),we.$delegate=tm.bind(U,Z,ie,we)}function fe(U,ie,ne){var Be=M(ne);Be&&tm.unbind(U,ie,Be.$delegate)}c.on("canvas.destroy",function(U){var ie;ie=U.svg,x(O,function(ne,Be){fe(ie,Be,ne)})}),c.on("canvas.init",function(U){var ie;ie=U.svg,x(O,function(ne,Be){re(ie,Be,ne)})}),c.on(["shape.added","connection.added"],function(U){var ie=U.element,ne=U.gfx;c.fire("interactionEvents.createHit",{element:ie,gfx:ne})}),c.on(["shape.changed","connection.changed"],500,function(U){var ie=U.element,ne=U.gfx;c.fire("interactionEvents.updateHit",{element:ie,gfx:ne})}),c.on("interactionEvents.createHit",500,function(U){var ie=U.element,ne=U.gfx;m.createDefaultHit(ie,ne)}),c.on("interactionEvents.updateHit",function(U){var ie=U.element,ne=U.gfx;m.updateDefaultHit(ie,ne)});var Ee=We("djs-hit djs-hit-stroke"),Le=We("djs-hit djs-hit-click-stroke"),xe={all:We("djs-hit djs-hit-all"),"click-stroke":Le,stroke:Ee,"no-move":We("djs-hit djs-hit-no-move")};function We(U,ie){return ie=L({stroke:"white",strokeWidth:15},ie||{}),h.cls(U,["no-fill","no-border"],ie)}function ce(U,ie){var ne=xe[ie];if(!ne)throw new Error("invalid hit type <"+ie+">");return w(U,ne),U}function Re(U,ie){J(U,ie)}this.removeHits=function(U){var ie;x((ie=".djs-hit",(U||document).querySelectorAll(ie)),Me)},this.createDefaultHit=function(U,ie){var ne,Be=U.waypoints,we=U.isFrame;return Be?this.createWaypointsHit(ie,Be):(ne=we?"stroke":"all",this.createBoxHit(ie,ne,{width:U.width,height:U.height}))},this.createWaypointsHit=function(U,ie){var ne=zi(ie);return ce(ne,"stroke"),Re(U,ne),ne},this.createBoxHit=function(U,ie,ne){ne=L({x:0,y:0},ne);var Be=de("rect");return ce(Be,ie),w(Be,ne),Re(U,Be),Be},this.updateDefaultHit=function(U,ie){var ne=Pi(".djs-hit",ie);if(ne)return U.waypoints?Dn(ne,U.waypoints):w(ne,{width:U.width,height:U.height}),ne},this.fire=_,this.triggerMouseEvent=function(U,ie,ne){var Be=O[U];if(!Be)throw new Error("unmapped DOM event name <"+U+">");return _(Be,ie,ne)},this.mouseHandler=M,this.registerEvent=re,this.unregisterEvent=fe}s_.$inject=["eventBus","elementRegistry","styles"];var nA={__init__:["interactionEvents"],interactionEvents:["type",s_]};function Is(c,p){this._eventBus=c,this._canvas=p,this._selectedElements=[];var h=this;c.on(["shape.remove","connection.remove"],function(m){var _=m.element;h.deselect(_)}),c.on(["diagram.clear","root.set"],function(m){h.select(null)})}Is.$inject=["eventBus","canvas"],Is.prototype.deselect=function(c){var p=this._selectedElements,h=p.indexOf(c);if(h!==-1){var m=p.slice();p.splice(h,1),this._eventBus.fire("selection.changed",{oldSelection:m,newSelection:p})}},Is.prototype.get=function(){return this._selectedElements},Is.prototype.isSelected=function(c){return this._selectedElements.indexOf(c)!==-1},Is.prototype.select=function(c,p){var h=this._selectedElements,m=h.slice();s(c)||(c=c?[c]:[]);var _=this._canvas,S=_.getRootElement();c=c.filter(function(M){var O=_.findRoot(M);return S===O}),p?x(c,function(M){h.indexOf(M)===-1&&h.push(M)}):this._selectedElements=h=c.slice(),this._eventBus.fire("selection.changed",{oldSelection:m,newSelection:h})};var l_="hover",c_="selected";function sm(c,p,h){this._canvas=c;var m=this;function _(M,O){c.addMarker(M,O)}function S(M,O){c.removeMarker(M,O)}this._multiSelectionBox=null,p.on("element.hover",function(M){_(M.element,l_)}),p.on("element.out",function(M){S(M.element,l_)}),p.on("selection.changed",function(M){var O=M.oldSelection,j=M.newSelection;x(O,function(Z){j.indexOf(Z)===-1&&S(Z,c_)}),x(j,function(Z){O.indexOf(Z)===-1&&_(Z,c_)}),m._updateSelectionOutline(j)}),p.on("element.changed",function(M){h.isSelected(M.element)&&m._updateSelectionOutline(h.get())})}function u_(c,p,h,m){c.on("create.end",500,function(_){var S=_.context,M=S.canExecute,O=S.elements,j=(S.hints||{}).autoSelect;if(M){if(j===!1)return;s(j)?p.select(j):p.select(O.filter(rA))}}),c.on("connect.end",500,function(_){var S=_.context.connection;S&&p.select(S)}),c.on("shape.move.end",500,function(_){var S=_.previousSelection||[],M=m.get(_.context.shape.id);y(S,function(O){return M.id===O.id})||p.select(M)}),c.on("element.click",function(_){if(fp(_)){var S=_.element;S===h.getRootElement()&&(S=null);var M=p.isSelected(S),O=p.get().length>1,j=function(Z){var re=o_(Z)||Z;return fp(Z)&&re.shiftKey}(_);if(M&&O)return j?p.deselect(S):p.select(S);M?p.deselect(S):p.select(S,j)}})}function rA(c){return!c.hidden}sm.$inject=["canvas","eventBus","selection"],sm.prototype._updateSelectionOutline=function(c){var p=this._canvas.getLayer("selectionOutline");(function(S){for(var M;M=S.firstChild;)S.removeChild(M)})(p);var h=c.length>1;if($(this._canvas.getContainer())[h?"add":"remove"]("djs-multi-select"),h){var m=function(S){return{x:S.x-6,y:S.y-6,width:S.width+12,height:S.height+12}}(Va(c)),_=de("rect");w(_,L({rx:3},m)),$(_).add("djs-selection-outline"),J(p,_)}},u_.$inject=["eventBus","selection","canvas","elementRegistry"];var iA={__init__:["selectionVisuals","selectionBehavior"],__depends__:[nA,n_],selection:["type",Is],selectionVisuals:["type",sm],selectionBehavior:["type",u_]};const oA=/^class[ {]/;function lm(c){return Array.isArray(c)}function cm(c,p){return Object.prototype.hasOwnProperty.call(c,p)}function hp(...c){c.length===1&&lm(c[0])&&(c=c[0]);const p=(c=[...c]).pop();return p.$inject=c,p}const aA=/constructor\s*[^(]*\(\s*([^)]*)\)/m,sA=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,lA=/\/\*([^*]*)\*\//m;function cA(c){if(typeof c!="function")throw new Error(`Cannot annotate "${c}". Expected a function!`);const p=c.toString().match(function(m){return oA.test(m.toString())}(c)?aA:sA);if(!p)return[];const h=p[1]||p[2];return h&&h.split(",").map(m=>{const _=m.match(lA);return(_&&_[1]||m).trim()})||[]}function p_(c,p){const h=p||{get:function(U,ie){if(m.push(U),ie===!1)return null;throw O(`No provider for "${U}"!`)}},m=[],_=this._providers=Object.create(h._providers||null),S=this._instances=Object.create(null),M=S.injector=this,O=function(U){const ie=m.join(" -> ");return m.length=0,new Error(ie?`${U} (Resolving: ${ie})`:U)};function j(U,ie){if(!_[U]&&U.includes(".")){const ne=U.split(".");let Be=j(ne.shift());for(;ne.length;)Be=Be[ne.shift()];return Be}if(cm(S,U))return S[U];if(cm(_,U)){if(m.indexOf(U)!==-1)throw m.push(U),O("Cannot resolve circular dependency!");return m.push(U),S[U]=_[U][0](_[U][1]),m.pop(),S[U]}return h.get(U,ie)}function Z(U,ie){if(ie===void 0&&(ie={}),typeof U!="function"){if(!lm(U))throw O(`Cannot invoke "${U}". Expected a function!`);U=hp(U.slice())}return{fn:U,dependencies:(U.$inject||cA(U)).map(ne=>cm(ie,ne)?ie[ne]:j(ne))}}function re(U){const{fn:ie,dependencies:ne}=Z(U);return new(Function.prototype.bind.call(ie,null,...ne))}function fe(U,ie,ne){const{fn:Be,dependencies:we}=Z(U,ne);return Be.apply(ie,we)}function Ee(U){return hp(ie=>U.get(ie))}function Le(U,ie){if(ie&&ie.length){const ne=Object.create(null),Be=Object.create(null),we=[],ut=[],lt=[];let He,Ut,ve,ge;for(let Je in _)He=_[Je],ie.indexOf(Je)!==-1&&(He[2]==="private"?(Ut=we.indexOf(He[3]),Ut===-1?(ve=He[3].createChild([],ie),ge=Ee(ve),we.push(He[3]),ut.push(ve),lt.push(ge),ne[Je]=[ge,Je,"private",ve]):ne[Je]=[lt[Ut],Je,"private",ut[Ut]]):ne[Je]=[He[2],He[1]],Be[Je]=!0),He[2]!=="factory"&&He[2]!=="type"||!He[1].$scope||ie.forEach(ht=>{He[1].$scope.indexOf(ht)!==-1&&(ne[Je]=[He[2],He[1]],Be[ht]=!0)});ie.forEach(Je=>{if(!Be[Je])throw new Error('No provider for "'+Je+'". Cannot use provider from the parent!')}),U.unshift(ne)}return new p_(U,M)}const xe={factory:fe,type:re,value:function(U){return U}};function We(U,ie){const ne=U.__init__||[];return function(){ne.forEach(Be=>{typeof Be=="string"?ie.get(Be):ie.invoke(Be)})}}function ce(U){const ie=U.__exports__;if(ie){const ne=U.__modules__,Be=Object.keys(U).reduce((He,Ut)=>(Ut!=="__exports__"&&Ut!=="__modules__"&&Ut!=="__init__"&&Ut!=="__depends__"&&(He[Ut]=U[Ut]),He),Object.create(null)),we=Le((ne||[]).concat(Be)),ut=hp(function(He){return we.get(He)});ie.forEach(function(He){_[He]=[ut,He,"private",we]});const lt=(U.__init__||[]).slice();return lt.unshift(function(){we.init()}),We(U=Object.assign({},U,{__init__:lt}),we)}return Object.keys(U).forEach(function(ne){if(ne==="__init__"||ne==="__depends__")return;const Be=U[ne];if(Be[2]==="private")return void(_[ne]=Be);const we=Be[0],ut=Be[1];_[ne]=[xe[we],uA(we,ut),we]}),We(U,M)}function Re(U,ie){return U.indexOf(ie)!==-1||(U=(ie.__depends__||[]).reduce(Re,U)).indexOf(ie)!==-1?U:U.concat(ie)}this.get=j,this.invoke=fe,this.instantiate=re,this.createChild=Le,this.init=function(U){const ie=U.reduce(Re,[]).map(ce);let ne=!1;return function(){ne||(ne=!0,ie.forEach(Be=>Be()))}}(c)}function uA(c,p){return c!=="value"&&lm(p)&&(p=hp(p.slice())),p}function zo(c,p){Y.call(this,c,1),this.CONNECTION_STYLE=p.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=p.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=p.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}n(zo,Y),zo.prototype.canRender=function(){return!0},zo.prototype.drawShape=function(c,p,h){var m=de("rect");return w(m,{x:0,y:0,width:p.width||0,height:p.height||0}),Kx(p)?w(m,L({},this.FRAME_STYLE,h||{})):w(m,L({},this.SHAPE_STYLE,h||{})),J(c,m),m},zo.prototype.drawConnection=function(c,p,h){var m=zi(p.waypoints,L({},this.CONNECTION_STYLE,h||{}));return J(c,m),m},zo.prototype.getShapePath=function(c){var p=c.x,h=c.y,m=c.width;return wt([["M",p,h],["l",m,0],["l",0,c.height],["l",-m,0],["z"]])},zo.prototype.getConnectionPath=function(c){var p,h,m=c.waypoints,_=[];for(p=0;h=m[p];p++)h=h.original||h,_.push([p===0?"M":"L",h.x,h.y]);return wt(_)},zo.$inject=["eventBus","styles"];var pA={__init__:["defaultRenderer"],defaultRenderer:["type",zo],styles:["type",function(){var c={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},p=this;this.cls=function(h,m,_){return L(this.style(m,_),{class:h})},this.style=function(h,m){s(h)||m||(m=h,h=[]);var _=C(h,function(S,M){return L(S,c[M]||{})},{});return m?L(_,m):_},this.computeStyle=function(h,m,_){return s(m)||(_=m,m=[]),p.style(m||[],L({},_,h||{}))}}]};function mp(c,p){return Math.round(c*p)/p}function f_(c){return u(c)?c+"px":c}function d_(c,p,h){const m=de("g");$(m).add(p);const _=h!==void 0?h:c.childNodes.length-1;return c.insertBefore(m,c.childNodes[_]||null),m}const fA={shape:["x","y","width","height"],connection:["waypoints"]};function st(c,p,h,m){this._eventBus=p,this._elementRegistry=m,this._graphicsFactory=h,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(c||{})}function h_(c,p){const h="matrix("+p.a+","+p.b+","+p.c+","+p.d+","+p.e+","+p.f+")";c.setAttribute("transform",h)}st.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],st.prototype._init=function(c){const p=this._eventBus,h=this._container=function(S){const M=(S=L({},{width:"100%",height:"100%"},S)).container||document.body,O=document.createElement("div");return O.setAttribute("class","djs-container djs-parent"),Cr(O,{position:"relative",overflow:"hidden",width:f_(S.width),height:f_(S.height)}),M.appendChild(O),O}(c),m=this._svg=de("svg");w(m,{width:"100%",height:"100%"}),J(h,m);const _=this._viewport=d_(m,"viewport");c.deferUpdate&&(this._viewboxChanged=function(S,M){let O,j,Z,re;function fe(We){let ce=Date.now(),Re=We?0:re+M-ce;if(Re>0)return Ee(Re);S.apply(Z,j),Le()}function Ee(We){O=setTimeout(fe,We)}function Le(){O&&clearTimeout(O),O=re=j=Z=void 0}function xe(...We){re=Date.now(),j=We,Z=this,O||Ee(M)}return xe.flush=function(){O&&fe(!0),Le()},xe.cancel=Le,xe}(z(this._viewboxChanged,this),300)),p.on("diagram.init",()=>{p.fire("canvas.init",{svg:m,viewport:_})}),p.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),p.on("diagram.destroy",500,this._destroy,this),p.on("diagram.clear",500,this._clear,this)},st.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const c=this._container.parentNode;c&&c.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},st.prototype._clear=function(){this._elementRegistry.getAll().forEach(c=>{const p=Gx(c);p==="root"?this.removeRootElement(c):this._removeElement(c,p)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},st.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},st.prototype.getLayer=function(c,p){if(!c)throw new Error("must specify a name");let h=this._layers[c];if(h||(h=this._layers[c]=this._createLayer(c,p)),p!==void 0&&h.index!==p)throw new Error("layer <"+c+"> already created at index <"+p+">");return h.group},st.prototype._getChildIndex=function(c){return C(this._layers,function(p,h){return h.visible&&c>=h.index&&p++,p},0)},st.prototype._createLayer=function(c,p){p===void 0&&(p=1);const h=this._getChildIndex(p);return{group:d_(this._viewport,"layer-"+c,h),index:p,visible:!0}},st.prototype.showLayer=function(c){if(!c)throw new Error("must specify a name");const p=this._layers[c];if(!p)throw new Error("layer <"+c+"> does not exist");const h=this._viewport,m=p.group,_=p.index;if(p.visible)return m;const S=this._getChildIndex(_);return h.insertBefore(m,h.childNodes[S]||null),p.visible=!0,m},st.prototype.hideLayer=function(c){if(!c)throw new Error("must specify a name");const p=this._layers[c];if(!p)throw new Error("layer <"+c+"> does not exist");const h=p.group;return p.visible&&(Me(h),p.visible=!1),h},st.prototype._removeLayer=function(c){const p=this._layers[c];p&&(delete this._layers[c],Me(p.group))},st.prototype.getActiveLayer=function(){const c=this._findPlaneForRoot(this.getRootElement());return c?c.layer:null},st.prototype.findRoot=function(c){return typeof c=="string"&&(c=this._elementRegistry.get(c)),c?(this._findPlaneForRoot(function(h){for(;h.parent;)h=h.parent;return h}(c))||{}).rootElement:void 0},st.prototype.getRootElements=function(){return this._planes.map(function(c){return c.rootElement})},st.prototype._findPlaneForRoot=function(c){return y(this._planes,function(p){return p.rootElement===c})},st.prototype.getContainer=function(){return this._container},st.prototype._updateMarker=function(c,p,h){let m;c.id||(c=this._elementRegistry.get(c)),c.markers=c.markers||new Set,m=this._elementRegistry._elements[c.id],m&&(x([m.gfx,m.secondaryGfx],function(_){_&&(h?(c.markers.add(p),$(_).add(p)):(c.markers.delete(p),$(_).remove(p)))}),this._eventBus.fire("element.marker.update",{element:c,gfx:m.gfx,marker:p,add:!!h}))},st.prototype.addMarker=function(c,p){this._updateMarker(c,p,!0)},st.prototype.removeMarker=function(c,p){this._updateMarker(c,p,!1)},st.prototype.hasMarker=function(c,p){return c.id||(c=this._elementRegistry.get(c)),!!c.markers&&c.markers.has(p)},st.prototype.toggleMarker=function(c,p){this.hasMarker(c,p)?this.removeMarker(c,p):this.addMarker(c,p)},st.prototype.getRootElement=function(){const c=this._rootElement;return c||this._planes.length?c:this.setRootElement(this.addRootElement(null))},st.prototype.addRootElement=function(c){const p=this._rootsIdx++;c||(c={id:"__implicitroot_"+p,children:[],isImplicit:!0});const h=c.layer="root-"+p;this._ensureValid("root",c);const m=this.getLayer(h,0);return this.hideLayer(h),this._addRoot(c,m),this._planes.push({rootElement:c,layer:m}),c},st.prototype.removeRootElement=function(c){if(typeof c=="string"&&(c=this._elementRegistry.get(c)),this._findPlaneForRoot(c))return this._removeRoot(c),this._removeLayer(c.layer),this._planes=this._planes.filter(function(p){return p.rootElement!==c}),this._rootElement===c&&(this._rootElement=null),c},st.prototype.setRootElement=function(c){if(c===this._rootElement)return c;let p;if(!c)throw new Error("rootElement required");return p=this._findPlaneForRoot(c),p||(c=this.addRootElement(c)),this._setRoot(c),c},st.prototype._removeRoot=function(c){const p=this._elementRegistry,h=this._eventBus;h.fire("root.remove",{element:c}),h.fire("root.removed",{element:c}),p.remove(c)},st.prototype._addRoot=function(c,p){const h=this._elementRegistry,m=this._eventBus;m.fire("root.add",{element:c}),h.add(c,p),m.fire("root.added",{element:c,gfx:p})},st.prototype._setRoot=function(c,p){const h=this._rootElement;h&&(this._elementRegistry.updateGraphics(h,null,!0),this.hideLayer(h.layer)),c&&(p||(p=this._findPlaneForRoot(c).layer),this._elementRegistry.updateGraphics(c,this._svg,!0),this.showLayer(c.layer)),this._rootElement=c,this._eventBus.fire("root.set",{element:c})},st.prototype._ensureValid=function(c,p){if(!p.id)throw new Error("element must have an id");if(this._elementRegistry.get(p.id))throw new Error("element <"+p.id+"> already exists");const h=fA[c];if(!P(h,function(_){return p[_]!==void 0}))throw new Error("must supply { "+h.join(", ")+" } with "+c)},st.prototype._setParent=function(c,p,h){(function(m,_,S){if(m&&_){typeof S!="number"&&(S=-1);var M=m.indexOf(_);if(M!==-1){if(M===S||S===-1)return;m.splice(M,1)}S!==-1?m.splice(S,0,_):m.push(_)}})(p.children,c,h),c.parent=p},st.prototype._addElement=function(c,p,h,m){h=h||this.getRootElement();const _=this._eventBus,S=this._graphicsFactory;this._ensureValid(c,p),_.fire(c+".add",{element:p,parent:h}),this._setParent(p,h,m);const M=S.create(c,p,m);return this._elementRegistry.add(p,M),S.update(c,p,M),_.fire(c+".added",{element:p,gfx:M}),p},st.prototype.addShape=function(c,p,h){return this._addElement("shape",c,p,h)},st.prototype.addConnection=function(c,p,h){return this._addElement("connection",c,p,h)},st.prototype._removeElement=function(c,p){const h=this._elementRegistry,m=this._graphicsFactory,_=this._eventBus;if(c=h.get(c.id||c))return _.fire(p+".remove",{element:c}),m.remove(c),function(S,M){if(!S||!M)return-1;var O=S.indexOf(M);O!==-1&&S.splice(O,1)}(c.parent&&c.parent.children,c),c.parent=null,_.fire(p+".removed",{element:c}),h.remove(c),c},st.prototype.removeShape=function(c){return this._removeElement(c,"shape")},st.prototype.removeConnection=function(c){return this._removeElement(c,"connection")},st.prototype.getGraphics=function(c,p){return this._elementRegistry.getGraphics(c,p)},st.prototype._changeViewbox=function(c){this._eventBus.fire("canvas.viewbox.changing"),c.apply(this),this._cachedViewbox=null,this._viewboxChanged()},st.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},st.prototype.viewbox=function(c){if(c===void 0&&this._cachedViewbox)return this._cachedViewbox;const p=this._viewport,h=this.getSize();let m,_,S,M,O,j,Z;return c?(this._changeViewbox(function(){O=Math.min(h.width/c.width,h.height/c.height);const re=this._svg.createSVGMatrix().scale(O).translate(-c.x,-c.y);_t(p,re)}),c):(S=this._rootElement?this.getActiveLayer():null,m=S&&S.getBBox()||{},M=_t(p),_=M?M.matrix:function(re,fe,Ee,Le,xe,We){var ce=rt().createSVGMatrix();switch(arguments.length){case 0:return ce;case 1:return Xe(ce,re);case 6:return Xe(ce,{a:re,b:fe,c:Ee,d:Le,e:xe,f:We})}}(),O=mp(_.a,1e3),j=mp(-_.e||0,1e3),Z=mp(-_.f||0,1e3),c=this._cachedViewbox={x:j?j/O:0,y:Z?Z/O:0,width:h.width/O,height:h.height/O,scale:O,inner:{width:m.width||0,height:m.height||0,x:m.x||0,y:m.y||0},outer:h})},st.prototype.scroll=function(c){const p=this._viewport;let h=p.getCTM();return c&&this._changeViewbox(function(){c=L({dx:0,dy:0},c||{}),h=this._svg.createSVGMatrix().translate(c.dx,c.dy).multiply(h),h_(p,h)}),{x:h.e,y:h.f}},st.prototype.scrollToElement=function(c,p){let h=100;typeof c=="string"&&(c=this._elementRegistry.get(c));const m=this.findRoot(c);if(m!==this.getRootElement()&&this.setRootElement(m),m===c)return;p||(p={}),typeof p=="number"&&(h=p),p={top:p.top||h,right:p.right||h,bottom:p.bottom||h,left:p.left||h};const _=Va(c),S=rm(_),M=this.viewbox(),O=this.zoom();let j,Z;M.y+=p.top/O,M.x+=p.left/O,M.width-=(p.right+p.left)/O,M.height-=(p.bottom+p.top)/O;const re=rm(M);if(_.width<M.width&&_.height<M.height){const fe=Math.max(0,S.right-re.right),Ee=Math.min(0,S.left-re.left),Le=Math.max(0,S.bottom-re.bottom),xe=Math.min(0,S.top-re.top);j=fe||Ee,Z=Le||xe}else j=_.x-M.x,Z=_.y-M.y;this.scroll({dx:-j*O,dy:-Z*O})},st.prototype.zoom=function(c,p){if(!c)return this.viewbox(c).scale;if(c==="fit-viewport")return this._fitViewport(p);let h,m;return this._changeViewbox(function(){typeof p!="object"&&(h=this.viewbox().outer,p={x:h.width/2,y:h.height/2}),m=this._setZoom(c,p)}),mp(m.a,1e3)},st.prototype._fitViewport=function(c){const p=this.viewbox(),h=p.outer,m=p.inner;let _,S;return m.x>=0&&m.y>=0&&m.x+m.width<=h.width&&m.y+m.height<=h.height&&!c?S={x:0,y:0,width:Math.max(m.width+m.x,h.width),height:Math.max(m.height+m.y,h.height)}:(_=Math.min(1,h.width/m.width,h.height/m.height),S={x:m.x+(c?m.width/2-h.width/_/2:0),y:m.y+(c?m.height/2-h.height/_/2:0),width:h.width/_,height:h.height/_}),this.viewbox(S),this.viewbox(!1).scale},st.prototype._setZoom=function(c,p){const h=this._svg,m=this._viewport,_=h.createSVGMatrix(),S=h.createSVGPoint();let M,O,j,Z,re;j=m.getCTM();const fe=j.a;return p?(M=L(S,p),O=M.matrixTransform(j.inverse()),Z=_.translate(O.x,O.y).scale(1/fe*c).translate(-O.x,-O.y),re=j.multiply(Z)):re=_.scale(c),h_(this._viewport,re),re},st.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},st.prototype.getAbsoluteBBox=function(c){const p=this.viewbox();let h;return c.waypoints?h=this.getGraphics(c).getBBox():h=c,{x:h.x*p.scale-p.x*p.scale,y:h.y*p.scale-p.y*p.scale,width:h.width*p.scale,height:h.height*p.scale}},st.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Bs="data-element-id";function zr(c){this._elements={},this._eventBus=c}function m_(c,p,h){var m=function(_,S,M,O){var j=M.inverse;return Object.defineProperty(_,"remove",{value:function(Z){var re=this.indexOf(Z);return re!==-1&&(this.splice(re,1),S.unset(Z,j,O)),Z}}),Object.defineProperty(_,"contains",{value:function(Z){return this.indexOf(Z)!==-1}}),Object.defineProperty(_,"add",{value:function(Z,re){var fe=this.indexOf(Z);if(re===void 0){if(fe!==-1)return;re=this.length}fe!==-1&&this.splice(fe,1),this.splice(re,0,Z),fe===-1&&S.set(Z,j,O)}}),Object.defineProperty(_,"__refs_collection",{value:!0}),_}(h[p.name]||[],c,p,h);Object.defineProperty(h,p.name,{enumerable:p.enumerable,value:m}),m.length&&m.forEach(function(_){c.set(_,p.inverse,h)})}function si(c,p){if(!(this instanceof si))return new si(c,p);c.inverse=p,p.inverse=c,this.props={},this.props[c.name]=c,this.props[p.name]=p}zr.$inject=["eventBus"],zr.prototype.add=function(c,p,h){var m=c.id;this._validateId(m),w(p,Bs,m),h&&w(h,Bs,m),this._elements[m]={element:c,gfx:p,secondaryGfx:h}},zr.prototype.remove=function(c){var p=this._elements,h=c.id||c,m=h&&p[h];m&&(w(m.gfx,Bs,""),m.secondaryGfx&&w(m.secondaryGfx,Bs,""),delete p[h])},zr.prototype.updateId=function(c,p){this._validateId(p),typeof c=="string"&&(c=this.get(c)),this._eventBus.fire("element.updateId",{element:c,newId:p});var h=this.getGraphics(c),m=this.getGraphics(c,!0);this.remove(c),c.id=p,this.add(c,h,m)},zr.prototype.updateGraphics=function(c,p,h){var m=c.id||c,_=this._elements[m];return h?_.secondaryGfx=p:_.gfx=p,p&&w(p,Bs,m),p},zr.prototype.get=function(c){var p;p=typeof c=="string"?c:c&&w(c,Bs);var h=this._elements[p];return h&&h.element},zr.prototype.filter=function(c){var p=[];return this.forEach(function(h,m){c(h,m)&&p.push(h)}),p},zr.prototype.find=function(c){for(var p=this._elements,h=Object.keys(p),m=0;m<h.length;m++){var _=p[h[m]],S=_.element;if(c(S,_.gfx))return S}},zr.prototype.getAll=function(){return this.filter(function(c){return c})},zr.prototype.forEach=function(c){var p=this._elements;Object.keys(p).forEach(function(h){var m=p[h],_=m.element,S=m.gfx;return c(_,S)})},zr.prototype.getGraphics=function(c,p){var h=c.id||c,m=this._elements[h];return m&&(p?m.secondaryGfx:m.gfx)},zr.prototype._validateId=function(c){if(!c)throw new Error("element must have an id");if(this._elements[c])throw new Error("element with id "+c+" already added")},si.prototype.bind=function(c,p){if(typeof p=="string"){if(!this.props[p])throw new Error("no property <"+p+"> in ref");p=this.props[p]}p.collection?m_(this,p,c):function(h,m,_){var S=m.inverse,M=_[m.name];Object.defineProperty(_,m.name,{configurable:m.configurable,enumerable:m.enumerable,get:function(){return M},set:function(O){if(O!==M){var j=M;M=null,j&&h.unset(j,S,_),M=O,h.set(M,S,_)}}})}(this,p,c)},si.prototype.ensureRefsCollection=function(c,p){var h=c[p.name];return function(m){return m.__refs_collection===!0}(h)||m_(this,p,c),h},si.prototype.ensureBound=function(c,p){(function(h,m){return Object.prototype.hasOwnProperty.call(h,m.name||m)})(c,p)||this.bind(c,p)},si.prototype.unset=function(c,p,h){c&&(this.ensureBound(c,p),p.collection?this.ensureRefsCollection(c,p).remove(h):c[p.name]=void 0)},si.prototype.set=function(c,p,h){c&&(this.ensureBound(c,p),p.collection?this.ensureRefsCollection(c,p).add(h):c[p.name]=h)};var um=new si({name:"children",enumerable:!0,collection:!0},{name:"parent"}),g_=new si({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),y_=new si({name:"attachers",collection:!0},{name:"host"}),v_=new si({name:"outgoing",collection:!0},{name:"source"}),x_=new si({name:"incoming",collection:!0},{name:"target"});function tc(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(c){var p=this.label,h=this.labels;!c&&p?h.remove(p):h.add(c,0)}}),um.bind(this,"parent"),g_.bind(this,"labels"),v_.bind(this,"outgoing"),x_.bind(this,"incoming")}function nc(){tc.call(this),um.bind(this,"children"),y_.bind(this,"host"),y_.bind(this,"attachers")}function __(){tc.call(this),um.bind(this,"children")}function w_(){nc.call(this),g_.bind(this,"labelTarget")}function E_(){tc.call(this),v_.bind(this,"source"),x_.bind(this,"target")}n(nc,tc),n(__,nc),n(w_,nc),n(E_,tc);var dA={connection:E_,shape:nc,label:w_,root:__};function js(){this._uid=12}js.prototype.createRoot=function(c){return this.create("root",c)},js.prototype.createLabel=function(c){return this.create("label",c)},js.prototype.createShape=function(c){return this.create("shape",c)},js.prototype.createConnection=function(c){return this.create("connection",c)},js.prototype.create=function(c,p){return(p=L({},p||{})).id||(p.id=c+"_"+this._uid++),function(h,m){var _=dA[h];if(!_)throw new Error("unknown type: <"+h+">");return L(new _,m)}(c,p)};var gp="__fn",hA=Array.prototype.slice;function Rr(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function rc(){}function Hr(c,p){this._eventBus=c,this._elementRegistry=p}function b_(c,p,h){var m=h||p.firstChild;c!==m&&p.insertBefore(c,m)}Rr.prototype.on=function(c,p,h,m){if(c=s(c)?c:[c],f(p)&&(m=h,h=p,p=1e3),!u(p))throw new Error("priority must be a number");var _=h;m&&((_=z(h,m))[gp]=h[gp]||h);var S=this;c.forEach(function(M){S._addListener(M,{priority:p,callback:_,next:null})})},Rr.prototype.once=function(c,p,h,m){var _=this;if(f(p)&&(m=h,h=p,p=1e3),!u(p))throw new Error("priority must be a number");function S(){S.__isTomb=!0;var M=h.apply(m,arguments);return _.off(c,S),M}S[gp]=h,this.on(c,p,S)},Rr.prototype.off=function(c,p){c=s(c)?c:[c];var h=this;c.forEach(function(m){h._removeListener(m,p)})},Rr.prototype.createEvent=function(c){var p=new rc;return p.init(c),p},Rr.prototype.fire=function(c,p){var h,m,_,S;if(S=hA.call(arguments),typeof c=="object"&&(c=(p=c).type),!c)throw new Error("no event type specified");if(m=this._listeners[c]){h=p instanceof rc?p:this.createEvent(p),S[0]=h;var M=h.type;c!==M&&(h.type=c);try{_=this._invokeListeners(h,S,m)}finally{c!==M&&(h.type=M)}return _===void 0&&h.defaultPrevented&&(_=!1),_}},Rr.prototype.handleError=function(c){return this.fire("error",{error:c})===!1},Rr.prototype._destroy=function(){this._listeners={}},Rr.prototype._invokeListeners=function(c,p,h){for(var m;h&&!c.cancelBubble;)m=this._invokeListener(c,p,h),h=h.next;return m},Rr.prototype._invokeListener=function(c,p,h){var m;if(h.callback.__isTomb)return m;try{m=function(_,S){return _.apply(null,S)}(h.callback,p),m!==void 0&&(c.returnValue=m,c.stopPropagation()),m===!1&&c.preventDefault()}catch(_){if(!this.handleError(_))throw console.error("unhandled error in event listener",_),_}return m},Rr.prototype._addListener=function(c,p){var h,m=this._getListeners(c);if(m){for(;m;){if(m.priority<p.priority)return p.next=m,void(h?h.next=p:this._setListeners(c,p));h=m,m=m.next}h.next=p}else this._setListeners(c,p)},Rr.prototype._getListeners=function(c){return this._listeners[c]},Rr.prototype._setListeners=function(c,p){this._listeners[c]=p},Rr.prototype._removeListener=function(c,p){var h,m,_,S=this._getListeners(c);if(p)for(;S;)h=S.next,(_=S.callback)!==p&&_[gp]!==p||(m?m.next=h:this._setListeners(c,h)),m=S,S=h;else this._setListeners(c,null)},rc.prototype.stopPropagation=function(){this.cancelBubble=!0},rc.prototype.preventDefault=function(){this.defaultPrevented=!0},rc.prototype.init=function(c){L(this,c||{})},Hr.$inject=["eventBus","elementRegistry"],Hr.prototype._getChildrenContainer=function(c){var p,h=this._elementRegistry.getGraphics(c);return c.parent?(p=function(m){return m.parentNode.childNodes[1]}(h),p||($(p=de("g")).add("djs-children"),J(h.parentNode,p))):p=h,p},Hr.prototype._clear=function(c){var p=function(h){return h.childNodes[0]}(c);return Bx(p),p},Hr.prototype._createContainer=function(c,p,h,m){var _=de("g");$(_).add("djs-group"),h!==void 0?b_(_,p,p.childNodes[h]):J(p,_);var S=de("g");$(S).add("djs-element"),$(S).add("djs-"+c),m&&$(S).add("djs-frame"),J(_,S);var M=de("g");return $(M).add("djs-visual"),J(S,M),S},Hr.prototype.create=function(c,p,h){var m=this._getChildrenContainer(p.parent);return this._createContainer(c,m,h,Kx(p))},Hr.prototype.updateContainments=function(c){var p,h=this,m=this._elementRegistry;p=C(c,function(_,S){return S.parent&&(_[S.parent.id]=S.parent),_},{}),x(p,function(_){var S=_.children;if(S){var M=h._getChildrenContainer(_);x(S.slice().reverse(),function(O){b_(m.getGraphics(O).parentNode,M)})}})},Hr.prototype.drawShape=function(c,p,h={}){return this._eventBus.fire("render.shape",{gfx:c,element:p,attrs:h})},Hr.prototype.getShapePath=function(c){return this._eventBus.fire("render.getShapePath",c)},Hr.prototype.drawConnection=function(c,p,h={}){return this._eventBus.fire("render.connection",{gfx:c,element:p,attrs:h})},Hr.prototype.getConnectionPath=function(c){return this._eventBus.fire("render.getConnectionPath",c)},Hr.prototype.update=function(c,p,h){if(p.parent){var m=this._clear(h);if(c==="shape")this.drawShape(m,p),zx(h,p.x,p.y);else{if(c!=="connection")throw new Error("unknown type: "+c);this.drawConnection(m,p)}p.hidden?w(h,"display","none"):w(h,"display","block")}},Hr.prototype.remove=function(c){Me(this._elementRegistry.getGraphics(c).parentNode)};var mA={__depends__:[pA],__init__:["canvas"],canvas:["type",st],elementRegistry:["type",zr],elementFactory:["type",js],eventBus:["type",Rr],graphicsFactory:["type",Hr]};function gA(c){return function(p){var h=new p_(p);return h.init(),h}([{config:["value",c=c||{}]},mA].concat(c.modules||[]))}function Ho(c,p){this._injector=p||gA(c),this.get("eventBus").fire("diagram.init")}function pm(){}function S_(c,p){this.model=c,this.properties=p}Ho.prototype.get=function(c,p){return this._injector.get(c,p)},Ho.prototype.invoke=function(c,p,h){return this._injector.invoke(c,p,h)},Ho.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Ho.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},pm.prototype.get=function(c){return this.$model.properties.get(this,c)},pm.prototype.set=function(c,p){this.$model.properties.set(this,c,p)},S_.prototype.createType=function(c){var p=this.model,h=this.properties,m=Object.create(pm.prototype);x(c.properties,function(M){M.isMany||M.default===void 0||(m[M.name]=M.default)}),h.defineModel(m,p),h.defineDescriptor(m,c);var _=c.ns.name;function S(M){h.define(this,"$type",{value:_,enumerable:!0}),h.define(this,"$attrs",{value:{}}),h.define(this,"$parent",{writable:!0}),x(M,z(function(O,j){this.set(j,O)},this))}return S.prototype=m,S.hasType=m.$instanceOf=this.model.hasType,h.defineModel(S,p),h.defineDescriptor(S,c),S};var yA={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},C_={String:function(c){return c},Boolean:function(c){return c==="true"},Integer:function(c){return parseInt(c,10)},Real:function(c){return parseFloat(c)}};function fm(c,p){var h=C_[c];return h?h(p):p}function dm(c){return!!yA[c]}function R_(c){return!!C_[c]}function rr(c,p){var h,m,_=c.split(/:/);if(_.length===1)h=c,m=p;else{if(_.length!==2)throw new Error("expected <prefix:localName> or <localName>, got "+c);h=_[1],m=_[0]}return{name:c=(m?m+":":"")+h,prefix:m,localName:h}}function Vr(c){this.ns=c,this.name=c.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Vo(c,p){this.packageMap={},this.typeMap={},this.packages=[],this.properties=p,x(c,z(this.registerPackage,this))}function k_(c,p,h){var m=p[h];if(m in c)throw new Error("package with "+h+" <"+m+"> already defined")}function Ga(c){this.model=c}function P_(c,p,h){Object.defineProperty(c,p.name,{enumerable:!p.isReference,writable:!0,value:h,configurable:!0})}function hm(c){return c.replace(/^:/,"")}function li(c,p={}){this.properties=new Ga(this),this.factory=new S_(this,this.properties),this.registry=new Vo(c,this.properties),this.typeCache={},this.config=p}Vr.prototype.build=function(){return function(c,p){let h={},m=Object(c);return x(p,function(_){_ in m&&(h[_]=c[_])}),h}(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Vr.prototype.addProperty=function(c,p,h){typeof p=="boolean"&&(h=p,p=void 0),this.addNamedProperty(c,h!==!1);var m=this.properties;p!==void 0?m.splice(p,0,c):m.push(c)},Vr.prototype.replaceProperty=function(c,p,h){var m=c.ns,_=this.properties,S=this.propertiesByName,M=c.name!==p.name;if(c.isId){if(!p.isId)throw new Error("property <"+p.ns.name+"> must be id property to refine <"+c.ns.name+">");this.setIdProperty(p,!1)}if(c.isBody){if(!p.isBody)throw new Error("property <"+p.ns.name+"> must be body property to refine <"+c.ns.name+">");this.setBodyProperty(p,!1)}var O=_.indexOf(c);if(O===-1)throw new Error("property <"+m.name+"> not found in property list");_.splice(O,1),this.addProperty(p,h?void 0:O,M),S[m.name]=S[m.localName]=p},Vr.prototype.redefineProperty=function(c,p,h){var m=c.ns.prefix,_=p.split("#"),S=rr(_[0],m),M=rr(_[1],S.prefix).name,O=this.propertiesByName[M];if(!O)throw new Error("refined property <"+M+"> not found");this.replaceProperty(O,c,h),delete c.redefines},Vr.prototype.addNamedProperty=function(c,p){var h=c.ns,m=this.propertiesByName;p&&(this.assertNotDefined(c,h.name),this.assertNotDefined(c,h.localName)),m[h.name]=m[h.localName]=c},Vr.prototype.removeNamedProperty=function(c){var p=c.ns,h=this.propertiesByName;delete h[p.name],delete h[p.localName]},Vr.prototype.setBodyProperty=function(c,p){if(p&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+c.ns.name+">)");this.bodyProperty=c},Vr.prototype.setIdProperty=function(c,p){if(p&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+c.ns.name+">)");this.idProperty=c},Vr.prototype.assertNotTrait=function(c){if((c.extends||[]).length)throw new Error(`cannot create <${c.name}> extending <${c.extends}>`)},Vr.prototype.assertNotDefined=function(c,p){var h=c.name,m=this.propertiesByName[h];if(m)throw new Error("property <"+h+"> already defined; override of <"+m.definedBy.ns.name+"#"+m.ns.name+"> by <"+c.definedBy.ns.name+"#"+c.ns.name+"> not allowed without redefines")},Vr.prototype.hasProperty=function(c){return this.propertiesByName[c]},Vr.prototype.addTrait=function(c,p){p&&this.assertNotTrait(c);var h=this.allTypesByName,m=this.allTypes,_=c.name;_ in h||(x(c.properties,z(function(S){S=L({},S,{name:S.ns.localName,inherited:p}),Object.defineProperty(S,"definedBy",{value:c});var M=S.replaces,O=S.redefines;M||O?this.redefineProperty(S,M||O,M):(S.isBody&&this.setBodyProperty(S),S.isId&&this.setIdProperty(S),this.addProperty(S))},this)),m.push(c),h[_]=c)},Vo.prototype.getPackage=function(c){return this.packageMap[c]},Vo.prototype.getPackages=function(){return this.packages},Vo.prototype.registerPackage=function(c){c=L({},c);var p=this.packageMap;k_(p,c,"prefix"),k_(p,c,"uri"),x(c.types,z(function(h){this.registerType(h,c)},this)),p[c.uri]=p[c.prefix]=c,this.packages.push(c)},Vo.prototype.registerType=function(c,p){var h=rr((c=L({},c,{superClass:(c.superClass||[]).slice(),extends:(c.extends||[]).slice(),properties:(c.properties||[]).slice(),meta:L(c.meta||{})})).name,p.prefix),m=h.name,_={};x(c.properties,z(function(S){var M=rr(S.name,h.prefix),O=M.name;dm(S.type)||(S.type=rr(S.type,M.prefix).name),L(S,{ns:M,name:O}),_[O]=S},this)),L(c,{ns:h,name:m,propertiesByName:_}),x(c.extends,z(function(S){var M=rr(S,h.prefix),O=this.typeMap[M.name];O.traits=O.traits||[],O.traits.push(m)},this)),this.definePackage(c,p),this.typeMap[m]=c},Vo.prototype.mapTypes=function(c,p,h){var m=dm(c.name)?{name:c.name}:this.typeMap[c.name],_=this;function S(O,j){var Z=rr(O,dm(O)?"":c.prefix);_.mapTypes(Z,p,j)}function M(O){return S(O,!0)}if(!m)throw new Error("unknown type <"+c.name+">");x(m.superClass,h?M:function(O){return S(O,!1)}),p(m,!h),x(m.traits,M)},Vo.prototype.getEffectiveDescriptor=function(c){var p=rr(c),h=new Vr(p);this.mapTypes(p,function(_,S){h.addTrait(_,S)});var m=h.build();return this.definePackage(m,m.allTypes[m.allTypes.length-1].$pkg),m},Vo.prototype.definePackage=function(c,p){this.properties.define(c,"$pkg",{value:p})},Ga.prototype.set=function(c,p,h){if(!d(p)||!p.length)throw new TypeError("property name must be a non-empty string");var m=this.getProperty(c,p),_=m&&m.name;h===void 0?m?delete c[_]:delete c.$attrs[hm(p)]:m?_ in c?c[_]=h:P_(c,m,h):c.$attrs[hm(p)]=h},Ga.prototype.get=function(c,p){var h=this.getProperty(c,p);if(!h)return c.$attrs[hm(p)];var m=h.name;return!c[m]&&h.isMany&&P_(c,h,[]),c[m]},Ga.prototype.define=function(c,p,h){if(!h.writable){var m=h.value;delete(h=L({},h,{get:function(){return m}})).value}Object.defineProperty(c,p,h)},Ga.prototype.defineDescriptor=function(c,p){this.define(c,"$descriptor",{value:p})},Ga.prototype.defineModel=function(c,p){this.define(c,"$model",{value:p})},Ga.prototype.getProperty=function(c,p){var h=this.model,m=h.getPropertyDescriptor(c,p);if(m)return m;if(p.includes(":"))return null;const _=h.config.strict;if(_!==void 0){const S=new TypeError(`unknown property <${p}> on <${c.$type}>`);if(_)throw S;typeof console<"u"&&console.warn(S)}return null},li.prototype.create=function(c,p){var h=this.getType(c);if(!h)throw new Error("unknown type <"+c+">");return new h(p)},li.prototype.getType=function(c){var p=this.typeCache,h=d(c)?c:c.ns.name,m=p[h];return m||(c=this.registry.getEffectiveDescriptor(h),m=p[h]=this.factory.createType(c)),m},li.prototype.createAny=function(c,p,h){var m=rr(c),_={$type:c,$instanceOf:function(M){return M===this.$type},get:function(M){return this[M]},set:function(M,O){(function(j,Z,re){let fe=j;x(Z,function(Ee,Le){if(typeof Ee!="number"&&typeof Ee!="string")throw new Error("illegal key type: "+typeof Ee+". Key should be of type number or string.");if(Ee==="constructor")throw new Error("illegal key: constructor");if(Ee==="__proto__")throw new Error("illegal key: __proto__");let xe=Z[Le+1],We=fe[Ee];a(xe)&&We==null&&(We=fe[Ee]=isNaN(+xe)?{}:[]),o(xe)?o(re)?delete fe[Ee]:fe[Ee]=re:fe=We})})(this,[M],O)}},S={name:c,isGeneric:!0,ns:{prefix:m.prefix,localName:m.localName,uri:p}};return this.properties.defineDescriptor(_,S),this.properties.defineModel(_,this),this.properties.define(_,"get",{enumerable:!1,writable:!0}),this.properties.define(_,"set",{enumerable:!1,writable:!0}),this.properties.define(_,"$parent",{enumerable:!1,writable:!0}),this.properties.define(_,"$instanceOf",{enumerable:!1,writable:!0}),x(h,function(M,O){l(M)&&M.value!==void 0?_[M.name]=M.value:_[O]=M}),_},li.prototype.getPackage=function(c){return this.registry.getPackage(c)},li.prototype.getPackages=function(){return this.registry.getPackages()},li.prototype.getElementDescriptor=function(c){return c.$descriptor},li.prototype.hasType=function(c,p){return p===void 0&&(p=c,c=this),p in c.$model.getElementDescriptor(c).allTypesByName},li.prototype.getPropertyDescriptor=function(c,p){return this.getElementDescriptor(c).propertiesByName[p]},li.prototype.getTypeDescriptor=function(c){return this.registry.typeMap[c]};var vA=String.fromCharCode,xA=Object.prototype.hasOwnProperty,_A=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,ic={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function wA(c,p,h,m){return m?xA.call(ic,m)?ic[m]:"&"+m+";":vA(p||parseInt(h,16))}function Ka(c){return c.length>3&&c.indexOf("&")!==-1?c.replace(_A,wA):c}Object.keys(ic).forEach(function(c){ic[c.toUpperCase()]=ic[c]});var T_="xsi:type",A_="non-whitespace outside of root node";function $s(c){return new Error(c)}function M_(c){return"missing namespace for prefix <"+c+">"}function yp(c){return{get:c,enumerable:!0}}function EA(c){var p,h={};for(p in c)h[p]=c[p];return h}function mm(c){return c+"$uri"}function N_(){return{line:0,column:0}}function bA(c){throw c}function D_(c){if(!this)return new D_(c);var p,h,m,_,S,M,O,j,Z,re=c&&c.proxy,fe=bA,Ee=N_,Le=!1,xe=!1,We=null,ce=!1;function Re(ie){ie instanceof Error||(ie=$s(ie)),We=ie,fe(ie,Ee)}function U(ie){S&&(ie instanceof Error||(ie=$s(ie)),S(ie,Ee))}this.on=function(ie,ne){if(typeof ne!="function")throw $s("required args <name, cb>");switch(ie){case"openTag":h=ne;break;case"text":p=ne;break;case"closeTag":m=ne;break;case"error":fe=ne;break;case"warn":S=ne;break;case"cdata":_=ne;break;case"attention":j=ne;break;case"question":O=ne;break;case"comment":M=ne;break;default:throw $s("unsupported event: "+ie)}return this},this.ns=function(ie){if(ie===void 0&&(ie={}),typeof ie!="object")throw $s("required args <nsMap={}>");var ne,Be={};for(ne in ie)Be[ne]=ie[ne];return Be["http://www.w3.org/2001/XMLSchema-instance"]="xsi",xe=!0,Z=Be,this},this.parse=function(ie){if(typeof ie!="string")throw $s("required args <xml=string>");return We=null,function(ne){var Be,we,ut,lt,He,Ut,ve,ge,Je,ht,vt,Wr=xe?[]:null,Ft=xe?function(zn){var kn,rn,Pr={};for(kn in zn)Pr[rn=zn[kn]]=rn,Pr[mm(rn)]=kn;return Pr}(Z):null,kr=[],ci=0,en=!1,Ur=!1,Tt=0,Dt=0,Hs="",Vs=0;function qa(){if(vt!==null)return vt;var zn,kn,rn,Pr,Pn,Ht,F,T,N,V,te,Ne=xe&&Ft.xmlns,it=xe&&Le?[]:null,Ye=Vs,At=Hs,un=At.length,mr={},Xa={};e:for(;Ye<un;Ye++)if(N=!1,!((V=At.charCodeAt(Ye))===32||V<14&&V>8)){for((V<65||V>122||V>90&&V<97)&&V!==95&&V!==58&&(U("illegal first char attribute name"),N=!0),te=Ye+1;te<un;te++)if(!((V=At.charCodeAt(te))>96&&V<123||V>64&&V<91||V>47&&V<59||V===46||V===45||V===95)){if(V===32||V<14&&V>8){U("missing attribute value"),Ye=te;continue e}if(V===61)break;U("illegal attribute name char"),N=!0}if((T=At.substring(Ye,te))==="xmlns:xmlns"&&(U("illegal declaration of xmlns"),N=!0),(V=At.charCodeAt(te+1))===34)(te=At.indexOf('"',Ye=te+2))===-1&&(te=At.indexOf("'",Ye))!==-1&&(U("attribute value quote missmatch"),N=!0);else if(V===39)(te=At.indexOf("'",Ye=te+2))===-1&&(te=At.indexOf('"',Ye))!==-1&&(U("attribute value quote missmatch"),N=!0);else for(U("missing attribute value quotes"),N=!0,te+=1;te<un&&!((V=At.charCodeAt(te+1))===32||V<14&&V>8);te++);for(te===-1&&(U("missing closing quotes"),te=un,N=!0),N||(Ht=At.substring(Ye,te)),Ye=te;te+1<un&&!((V=At.charCodeAt(te+1))===32||V<14&&V>8);te++)Ye===te&&(U("illegal character after attribute end"),N=!0);if(Ye=te+1,!N)if(T in Xa)U("attribute <"+T+"> already defined");else if(Xa[T]=!0,xe)if(Le){if((Pn=T==="xmlns"?"xmlns":T.charCodeAt(0)===120&&T.substr(0,6)==="xmlns:"?T.substr(6):null)!==null){if(zn=Ka(Ht),kn=mm(Pn),!(F=Z[zn])){if(Pn==="xmlns"||kn in Ft&&Ft[kn]!==zn)do F="ns"+ci++;while(Ft[F]!==void 0);else F=Pn;Z[zn]=F}Ft[Pn]!==F&&(Pr||(Ft=EA(Ft),Pr=!0),Ft[Pn]=F,Pn==="xmlns"&&(Ft[mm(F)]=zn,Ne=F),Ft[kn]=zn),mr[T]=Ht;continue}it.push(T,Ht)}else(V=T.indexOf(":"))!==-1?(rn=Ft[T.substring(0,V)])?((T=Ne===rn?T.substr(V+1):rn+T.substr(V))===T_&&((V=Ht.indexOf(":"))!==-1?(rn=Ht.substring(0,V),Ht=(rn=Ft[rn]||rn)+Ht.substring(V)):Ht=Ne+":"+Ht),mr[T]=Ht):U(M_(T.substring(0,V))):mr[T]=Ht;else mr[T]=Ht}if(Le)for(Ye=0,un=it.length;Ye<un;Ye++){if(T=it[Ye++],Ht=it[Ye],(V=T.indexOf(":"))!==-1){if(!(rn=Ft[T.substring(0,V)])){U(M_(T.substring(0,V)));continue}(T=Ne===rn?T.substr(V+1):rn+T.substr(V))===T_&&((V=Ht.indexOf(":"))!==-1?(rn=Ht.substring(0,V),Ht=(rn=Ft[rn]||rn)+Ht.substring(V)):Ht=Ne+":"+Ht)}mr[T]=Ht}return vt=mr}function sc(){for(var zn,kn,rn=/(\r\n|\r|\n)/g,Pr=0,Pn=0,Ht=0,F=Dt;Tt>=Ht&&(zn=rn.exec(ne))&&!((F=zn[0].length+zn.index)>Tt);)Pr+=1,Ht=F;return Tt==-1?(Pn=F,kn=ne.substring(Dt)):Dt===0?kn=ne.substring(Dt,Tt):(Pn=Tt-Ht,kn=Dt==-1?ne.substring(Tt):ne.substring(Tt,Dt+1)),{data:kn,line:Pr,column:Pn}}for(Ee=sc,re&&(ht=Object.create({},{name:yp(function(){return ge}),originalName:yp(function(){return Je}),attrs:yp(qa),ns:yp(function(){return Ft})}));Dt!==-1;){if((Tt=ne.charCodeAt(Dt)===60?Dt:ne.indexOf("<",Dt))===-1)return kr.length?Re("unexpected end of file"):Dt===0?Re("missing start tag"):void(Dt<ne.length&&ne.substring(Dt).trim()&&U(A_));if(Dt!==Tt){if(kr.length){if(p&&(p(ne.substring(Dt,Tt),Ka,Ee),ce))return}else if(ne.substring(Dt,Tt).trim()&&(U(A_),ce))return}if((He=ne.charCodeAt(Tt+1))===33){if((lt=ne.charCodeAt(Tt+2))===91&&ne.substr(Tt+3,6)==="CDATA["){if((Dt=ne.indexOf("]]>",Tt))===-1)return Re("unclosed cdata");if(_&&(_(ne.substring(Tt+9,Dt),Ee),ce))return;Dt+=3;continue}if(lt===45&&ne.charCodeAt(Tt+3)===45){if((Dt=ne.indexOf("-->",Tt))===-1)return Re("unclosed comment");if(M&&(M(ne.substring(Tt+4,Dt),Ka,Ee),ce))return;Dt+=3;continue}}if(He!==63){for(we=Tt+1;;we++){if(Ut=ne.charCodeAt(we),isNaN(Ut))return Dt=-1,Re("unclosed tag");if(Ut===34)we=(lt=ne.indexOf('"',we+1))!==-1?lt:we;else if(Ut===39)we=(lt=ne.indexOf("'",we+1))!==-1?lt:we;else if(Ut===62){Dt=we;break}}if(He!==33){if(vt={},He===47){if(en=!1,Ur=!0,!kr.length)return Re("missing open tag");if(we=ge=kr.pop(),lt=Tt+2+we.length,ne.substring(Tt+2,lt)!==we)return Re("closing tag mismatch");for(;lt<Dt;lt++)if(!((He=ne.charCodeAt(lt))===32||He>8&&He<14))return Re("close tag")}else{if(ne.charCodeAt(Dt-1)===47?(we=ge=ne.substring(Tt+1,Dt-1),en=!0,Ur=!0):(we=ge=ne.substring(Tt+1,Dt),en=!0,Ur=!1),!(He>96&&He<123||He>64&&He<91||He===95||He===58))return Re("illegal first char nodeName");for(lt=1,ut=we.length;lt<ut;lt++)if(!((He=we.charCodeAt(lt))>96&&He<123||He>64&&He<91||He>47&&He<59||He===45||He===95||He==46)){if(He===32||He<14&&He>8){ge=we.substring(0,lt),vt=null;break}return Re("invalid nodeName")}Ur||kr.push(ge)}if(xe){if(Be=Ft,en&&(Ur||Wr.push(Be),vt===null&&(Le=we.indexOf("xmlns",lt)!==-1)&&(Vs=lt,Hs=we,qa(),Le=!1)),Je=ge,(He=ge.indexOf(":"))!==-1){if(!(ve=Ft[ge.substring(0,He)]))return Re("missing namespace on <"+Je+">");ge=ge.substr(He+1)}else ve=Ft.xmlns;ve&&(ge=ve+":"+ge)}if(en&&(Vs=lt,Hs=we,h&&(re?h(ht,Ka,Ur,Ee):h(ge,qa,Ka,Ur,Ee),ce)))return;if(Ur){if(m&&(m(re?ht:ge,Ka,en,Ee),ce))return;xe&&(Ft=en?Be:Wr.pop())}Dt+=1}else{if(j&&(j(ne.substring(Tt,Dt+1),Ka,Ee),ce))return;Dt+=1}}else{if((Dt=ne.indexOf("?>",Tt))===-1)return Re("unclosed question");if(O&&(O(ne.substring(Tt,Dt+2),Ee),ce))return;Dt+=2}}}(ie),Ee=N_,ce=!1,We},this.stop=function(){ce=!0}}function O_(c){return c.xml&&c.xml.tagAlias==="lowerCase"}var SA={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},vp="xsi:type";function L_(c){return c.xml&&c.xml.serialize}function I_(c){return L_(c)===vp}function B_(c,p){return O_(p)?c.prefix+":"+((h=c.localName).charAt(0).toUpperCase()+h.slice(1)):c.name;var h}function Wo(c){return new Error(c)}function uo(c){return c.$descriptor}function CA(c){L(this,c),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(p){this.references.push(p)},this.addElement=function(p){if(!p)throw Wo("expected element");var h,m=this.elementsById,_=uo(p).idProperty;if(_&&(h=p.get(_.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(h))throw new Error("illegal ID <"+h+">");if(m[h])throw Wo("duplicate ID <"+h+">");m[h]=p}},this.addWarning=function(p){this.warnings.push(p)}}function oc(){}function gm(){}function Fs(){}function ac(c,p){this.property=c,this.context=p}function ym(c,p){this.element=p,this.propertyDesc=c}function xp(){}function ir(c,p,h){this.model=c,this.type=c.getType(p),this.context=h}function vm(c,p,h){ir.call(this,c,p,h)}function zs(c,p,h){this.model=c,this.context=h}function xm(c){c instanceof li&&(c={model:c}),L(this,{lax:!1},c)}oc.prototype.handleEnd=function(){},oc.prototype.handleText=function(){},oc.prototype.handleNode=function(){},gm.prototype=Object.create(oc.prototype),gm.prototype.handleNode=function(){return this},Fs.prototype=Object.create(oc.prototype),Fs.prototype.handleText=function(c){this.body=(this.body||"")+c},ac.prototype=Object.create(Fs.prototype),ac.prototype.handleNode=function(c){if(this.element)throw Wo("expected no sub nodes");return this.element=this.createReference(c),this},ac.prototype.handleEnd=function(){this.element.id=this.body},ac.prototype.createReference=function(c){return{property:this.property.ns.name,id:""}},ym.prototype=Object.create(Fs.prototype),ym.prototype.handleEnd=function(){var c=this.body||"",p=this.element,h=this.propertyDesc;c=fm(h.type,c),h.isMany?p.get(h.name).push(c):p.set(h.name,c)},xp.prototype=Object.create(Fs.prototype),xp.prototype.handleNode=function(c){var p=this,h=this.element;return h?p=this.handleChild(c):(h=this.element=this.createElement(c),this.context.addElement(h)),p},ir.prototype=Object.create(xp.prototype),ir.prototype.addReference=function(c){this.context.addReference(c)},ir.prototype.handleText=function(c){if(!uo(this.element).bodyProperty)throw Wo("unexpected body text <"+c+">");Fs.prototype.handleText.call(this,c)},ir.prototype.handleEnd=function(){var c=this.body,p=this.element,h=uo(p).bodyProperty;h&&c!==void 0&&(c=fm(h.type,c),p.set(h.name,c))},ir.prototype.createElement=function(c){var p,h=c.attributes,m=this.type,_=uo(m),S=this.context,M=new m({}),O=this.model;return x(h,function(j,Z){var re=_.propertiesByName[Z];re&&re.isReference?re.isMany?x(j.split(" "),function(fe){S.addReference({element:M,property:re.ns.name,id:fe})}):S.addReference({element:M,property:re.ns.name,id:j}):(re?j=fm(re.type,j):Z!=="xmlns"&&(p=rr(Z,_.ns.prefix),O.getPackage(p.prefix)&&S.addWarning({message:"unknown attribute <"+Z+">",element:M,property:Z,value:j})),M.set(Z,j))}),M},ir.prototype.getPropertyForNode=function(c){var p,h,m=rr(c.name),_=this.type,S=this.model,M=uo(_),O=m.name,j=M.propertiesByName[O];if(j&&!j.isAttr)return I_(j)&&(p=c.attributes[vp])?(p=function(re,fe){var Ee=rr(re);return function(Le,xe){var We=Le.name,ce=Le.localName,Re=xe.xml&&xe.xml.typePrefix;return Re&&ce.indexOf(Re)===0?Le.prefix+":"+ce.slice(Re.length):We}(Ee,fe.getPackage(Ee.prefix))}(p,S),L({},j,{effectiveType:uo(h=S.getType(p)).name})):j;var Z=S.getPackage(m.prefix);if(Z){if(p=B_(m,Z),h=S.getType(p),j=y(M.properties,function(re){return!re.isVirtual&&!re.isReference&&!re.isAttribute&&h.hasType(re.type)}))return L({},j,{effectiveType:uo(h).name})}else if(j=y(M.properties,function(re){return!re.isReference&&!re.isAttribute&&re.type==="Element"}))return j;throw Wo("unrecognized element <"+m.name+">")},ir.prototype.toString=function(){return"ElementDescriptor["+uo(this.type).name+"]"},ir.prototype.valueHandler=function(c,p){return new ym(c,p)},ir.prototype.referenceHandler=function(c){return new ac(c,this.context)},ir.prototype.handler=function(c){return c==="Element"?new zs(this.model,c,this.context):new ir(this.model,c,this.context)},ir.prototype.handleChild=function(c){var p,h,m,_;if(p=this.getPropertyForNode(c),m=this.element,R_(h=p.effectiveType||p.type))return this.valueHandler(p,m);var S=(_=p.isReference?this.referenceHandler(p).handleNode(c):this.handler(h).handleNode(c)).element;return S!==void 0&&(p.isMany?m.get(p.name).push(S):m.set(p.name,S),p.isReference?(L(S,{element:m}),this.context.addReference(S)):S.$parent=m),_},vm.prototype=Object.create(ir.prototype),vm.prototype.createElement=function(c){var p=c.name,h=rr(p),m=this.model,_=this.type,S=m.getPackage(h.prefix),M=S&&B_(h,S)||p;if(!_.hasType(M))throw Wo("unexpected element <"+c.originalName+">");return ir.prototype.createElement.call(this,c)},zs.prototype=Object.create(xp.prototype),zs.prototype.createElement=function(c){var p=c.name,h=rr(p).prefix,m=c.ns[h+"$uri"],_=c.attributes;return this.model.createAny(p,m,_)},zs.prototype.handleChild=function(c){var p=new zs(this.model,"Element",this.context).handleNode(c),h=this.element,m=p.element;return m!==void 0&&((h.$children=h.$children||[]).push(m),m.$parent=h),p},zs.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},xm.prototype.fromXML=function(c,p,h){var m=p.rootHandler;p instanceof ir?(m=p,p={}):typeof p=="string"?(m=this.handler(p),p={}):typeof m=="string"&&(m=this.handler(m));var _=this.model,S=this.lax,M=new CA(L({},p,{rootHandler:m})),O=new D_({proxy:!0}),j=function(){var ce=[];return Object.defineProperty(ce,"peek",{value:function(){return this[this.length-1]}}),ce}();function Z(ce,Re,U){var ie=Re(),ne=ie.line,Be=ie.column,we=ie.data;we.charAt(0)==="<"&&we.indexOf(" ")!==-1&&(we=we.slice(0,we.indexOf(" "))+">");var ut="unparsable content "+(we?we+" ":"")+`detected
	line: `+ne+`
	column: `+Be+`
	nested error: `+ce.message;if(U)return M.addWarning({message:ut,error:ce}),!0;throw Wo(ut)}function re(ce,Re){return Z(ce,Re,!0)}m.context=M,j.push(m);var fe=/^<\?xml /i,Ee=/ encoding="([^"]+)"/i,Le=/^utf-8$/i;function xe(ce,Re){try{j.peek().handleText(ce)}catch(U){re(U,Re)}}var We=_.getPackages().reduce(function(ce,Re){return ce[Re.uri]=Re.prefix,ce},{"http://www.w3.org/XML/1998/namespace":"xml"});return O.ns(We).on("openTag",function(ce,Re,U,ie){var ne=ce.attrs||{},Be=Object.keys(ne).reduce(function(we,ut){var lt=Re(ne[ut]);return we[ut]=lt,we},{});(function(we,ut){var lt=j.peek();try{j.push(lt.handleNode(we))}catch(He){Z(He,ut,S)&&j.push(new gm)}})({name:ce.name,originalName:ce.originalName,attributes:Be,ns:ce.ns},ie)}).on("question",function(ce){if(fe.test(ce)){var Re=Ee.exec(ce),U=Re&&Re[1];U&&!Le.test(U)&&M.addWarning({message:"unsupported document encoding <"+U+">, falling back to UTF-8"})}}).on("closeTag",function(){j.pop().handleEnd()}).on("cdata",xe).on("text",function(ce,Re,U){(function(ie,ne){ie.trim()&&xe(ie,ne)})(Re(ce),U)}).on("error",Z).on("warn",re),new Promise(function(ce,Re){var U;try{O.parse(c),function(){var ut,lt,He=M.elementsById,Ut=M.references;for(ut=0;lt=Ut[ut];ut++){var ve=lt.element,ge=He[lt.id],Je=uo(ve).propertiesByName[lt.property];if(ge||M.addWarning({message:"unresolved reference <"+lt.id+">",element:lt.element,property:lt.property,value:lt.id}),Je.isMany){var ht=ve.get(Je.name),vt=ht.indexOf(lt);vt===-1&&(vt=ht.length),ge?ht[vt]=ge:ht.splice(vt,1)}else ve.set(Je.name,ge)}}()}catch(ut){U=ut}var ie=m.element;U||ie||(U=Wo("failed to parse document as <"+m.type.$descriptor.name+">"));var ne=M.warnings,Be=M.references,we=M.elementsById;return U?(U.warnings=ne,Re(U)):ce({rootElement:ie,elementsById:we,references:Be,warnings:ne})})},xm.prototype.handler=function(c){return new vm(this.model,c)};var RA=/<|>|'|"|&|\n\r|\n/g,j_=/<|>|&/g;function kA(c){var p={},h={},m={},_=[],S=[];this.byUri=function(M){return h[M]||c&&c.byUri(M)},this.add=function(M,O){h[M.uri]=M,O?_.push(M):S.push(M),this.mapPrefix(M.prefix,M.uri)},this.uriByPrefix=function(M){return p[M||"xmlns"]},this.mapPrefix=function(M,O){p[M||"xmlns"]=O},this.getNSKey=function(M){return M.prefix!==void 0?M.uri+"|"+M.prefix:M.uri},this.logUsed=function(M){var O=M.uri,j=this.getNSKey(M);m[j]=this.byUri(O),c&&c.logUsed(M)},this.getUsed=function(M){var O=this;return[].concat(_,S).filter(function(j){var Z=O.getNSKey(j);return m[Z]})}}function PA(c,p){return O_(p)?(h=c).charAt(0).toLowerCase()+h.slice(1):c;var h}function $_(c,p){c.super_=p,c.prototype=Object.create(p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}function F_(c){return d(c)?c:(c.prefix?c.prefix+":":"")+c.localName}var TA={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},AA={"<":"lt",">":"gt","&":"amp"};function z_(c,p,h){return(c=d(c)?c:""+c).replace(p,function(m){return"&"+h[m]+";"})}function _m(c){this.tagName=c}function Ya(){}function wm(c){this.tagName=c}function Wt(c,p){this.body=[],this.attrs=[],this.parent=c,this.propertyDescriptor=p}function _p(c,p){Wt.call(this,c,p)}function MA(){this.value="",this.write=function(c){this.value+=c}}function NA(c,p){var h=[""];this.append=function(m){return c.write(m),this},this.appendNewLine=function(){return p&&c.write(`
`),this},this.appendIndent=function(){return p&&c.write(h.join("  ")),this},this.indent=function(){return h.push(""),this},this.unindent=function(){return h.pop(),this}}function DA(c){return c=L({format:!1,preamble:!0},c||{}),{toXML:function(p,h){var m=h||new MA,_=new NA(m,c.format);if(c.preamble&&_.append(`<?xml version="1.0" encoding="UTF-8"?>
`),new Wt().build(p).serializeTo(_),!h)return m.value}}}function wp(c,p){li.call(this,c,p)}_m.prototype.build=function(c){return this.element=c,this},_m.prototype.serializeTo=function(c){c.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Ya.prototype.serializeValue=Ya.prototype.serializeTo=function(c){c.append(this.escape?z_(this.value,j_,AA):this.value)},Ya.prototype.build=function(c,p){return this.value=p,c.type==="String"&&p.search(j_)!==-1&&(this.escape=!0),this},$_(wm,Ya),wm.prototype.serializeTo=function(c){c.appendIndent().append("<"+this.tagName+">"),this.serializeValue(c),c.append("</"+this.tagName+">").appendNewLine()},Wt.prototype.build=function(c){this.element=c;var p,h,m=c.$descriptor,_=this.propertyDescriptor,S=m.isGeneric;return p=S?this.parseGeneric(c):this.parseNsAttributes(c),this.ns=_?this.nsPropertyTagName(_):this.nsTagName(m),this.tagName=this.addTagName(this.ns),S||(h=function(M){return v(M.$descriptor.properties,function(O){var j=O.name;if(O.isVirtual||!g(M,j))return!1;var Z=M[j];return Z!==O.default&&Z!==null&&(!O.isMany||Z.length)})}(c),this.parseAttributes(v(h,function(M){return M.isAttr})),this.parseContainments(function(M){return v(M,function(O){return!O.isAttr})}(h))),this.parseGenericAttributes(c,p),this},Wt.prototype.nsTagName=function(c){return function(p,h){return h.isGeneric?L({localName:h.ns.localName},p):L({localName:PA(h.ns.localName,h.$pkg)},p)}(this.logNamespaceUsed(c.ns),c)},Wt.prototype.nsPropertyTagName=function(c){return function(p,h){return L({localName:h.ns.localName},p)}(this.logNamespaceUsed(c.ns),c)},Wt.prototype.isLocalNs=function(c){return c.uri===this.ns.uri},Wt.prototype.nsAttributeName=function(c){var p;if(p=d(c)?rr(c):c.ns,c.inherited)return{localName:p.localName};var h=this.logNamespaceUsed(p);return this.getNamespaces().logUsed(h),this.isLocalNs(h)?{localName:p.localName}:L({localName:p.localName},h)},Wt.prototype.parseGeneric=function(c){var p=this,h=this.body,m=[];return x(c,function(_,S){S==="$body"?h.push(new Ya().build({type:"String"},_)):S==="$children"?x(_,function(M){h.push(new Wt(p).build(M))}):S.indexOf("$")!==0&&p.parseNsAttribute(c,S,_)&&m.push({name:S,value:_})}),m},Wt.prototype.parseNsAttribute=function(c,p,h){var m,_=c.$model,S=rr(p);if(S.prefix==="xmlns"&&(m={prefix:S.localName,uri:h}),S.prefix||S.localName!=="xmlns"||(m={uri:h}),!m)return{name:p,value:h};if(_&&_.getPackage(h))this.logNamespace(m,!0,!0);else{var M=this.logNamespaceUsed(m,!0);this.getNamespaces().logUsed(M)}},Wt.prototype.parseNsAttributes=function(c,p){var h=this,m=c.$attrs,_=[];return x(m,function(S,M){var O=h.parseNsAttribute(c,M,S);O&&_.push(O)}),_},Wt.prototype.parseGenericAttributes=function(c,p){var h=this;x(p,function(m){if(m.name!==vp)try{h.addAttribute(h.nsAttributeName(m.name),m.value)}catch(_){console.warn("missing namespace information for ",m.name,"=",m.value,"on",c,_)}})},Wt.prototype.parseContainments=function(c){var p=this,h=this.body,m=this.element;x(c,function(_){var S=m.get(_.name),M=_.isReference;if(_.isMany||(S=[S]),_.isBody)h.push(new Ya().build(_,S[0]));else if(R_(_.type))x(S,function(Z){h.push(new wm(p.addTagName(p.nsPropertyTagName(_))).build(_,Z))});else if(M)x(S,function(Z){h.push(new _m(p.addTagName(p.nsPropertyTagName(_))).build(Z))});else{var O=I_(_),j=function(Z){return L_(Z)==="property"}(_);x(S,function(Z){var re;re=O?new _p(p,_):j?new Wt(p,_):new Wt(p),h.push(re.build(Z))})}})},Wt.prototype.getNamespaces=function(c){var p,h=this.namespaces,m=this.parent;return h||(p=m&&m.getNamespaces(),c||!p?this.namespaces=h=new kA(p):h=p),h},Wt.prototype.logNamespace=function(c,p,h){var m=this.getNamespaces(h),_=c.uri,S=c.prefix;return m.byUri(_)&&!h||m.add(c,p),m.mapPrefix(S,_),c},Wt.prototype.logNamespaceUsed=function(c,p){var h,m,_,S=this.element.$model,M=this.getNamespaces(p),O=c.prefix,j=c.uri;if(!O&&!j)return{localName:c.localName};if(_=SA[O]||S&&(S.getPackage(O)||{}).uri,!(j=j||_||M.uriByPrefix(O)))throw new Error("no namespace uri given for prefix <"+O+">");if(!(c=M.byUri(j))){for(h=O,m=1;M.uriByPrefix(h);)h=O+"_"+m++;c=this.logNamespace({prefix:h,uri:j},_===j)}return O&&M.mapPrefix(O,j),c},Wt.prototype.parseAttributes=function(c){var p=this,h=this.element;x(c,function(m){var _=h.get(m.name);if(m.isReference)if(m.isMany){var S=[];x(_,function(M){S.push(M.id)}),_=S.join(" ")}else _=_.id;p.addAttribute(p.nsAttributeName(m),_)})},Wt.prototype.addTagName=function(c){var p=this.logNamespaceUsed(c);return this.getNamespaces().logUsed(p),F_(c)},Wt.prototype.addAttribute=function(c,p){var h=this.attrs;d(p)&&(p=z_(p,RA,TA));var m=function(S,M){const O=b(M);let j=s(S)?-1:void 0;return x(S,function(Z,re){if(O(Z,re))return j=re,!1}),j}(h,function(S){return S.name.localName===c.localName&&S.name.uri===c.uri&&S.name.prefix===c.prefix}),_={name:c,value:p};m!==-1?h.splice(m,1,_):h.push(_)},Wt.prototype.serializeAttributes=function(c){var p=this.attrs,h=this.namespaces;h&&(p=function(m){return m.getUsed().filter(function(_){return _.prefix!=="xml"}).map(function(_){return{name:"xmlns"+(_.prefix?":"+_.prefix:""),value:_.uri}})}(h).concat(p)),x(p,function(m){c.append(" ").append(F_(m.name)).append('="').append(m.value).append('"')})},Wt.prototype.serializeTo=function(c){var p=this.body[0],h=p&&p.constructor!==Ya;c.appendIndent().append("<"+this.tagName),this.serializeAttributes(c),c.append(p?">":" />"),p&&(h&&c.appendNewLine().indent(),x(this.body,function(m){m.serializeTo(c)}),h&&c.unindent().appendIndent(),c.append("</"+this.tagName+">")),c.appendNewLine()},$_(_p,Wt),_p.prototype.parseNsAttributes=function(c){var p=Wt.prototype.parseNsAttributes.call(this,c),h=c.$descriptor;if(h.name===this.propertyDescriptor.type)return p;var m=this.typeNs=this.nsTagName(h);this.getNamespaces().logUsed(this.typeNs);var _=c.$model.getPackage(m.uri),S=_.xml&&_.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(vp),(m.prefix?m.prefix+":":"")+S+h.ns.localName),p},_p.prototype.isLocalNs=function(c){return c.uri===(this.typeNs||this.ns).uri},wp.prototype=Object.create(li.prototype),wp.prototype.fromXML=function(c,p,h){d(p)||(h=p,p="bpmn:Definitions");var m=new xm(L({model:this,lax:!0},h)),_=m.handler(p);return m.fromXML(c,_)},wp.prototype.toXML=function(c,p){var h=new DA(p);return new Promise(function(m,_){try{return m({xml:h.toXML(c)})}catch(S){return _(S)}})};var OA={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function LA(c,p){return new wp(L({},OA,c),p)}var IA="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function hr(c,p){return c.$instanceOf(p)}function BA(c){var p={},h=[],m={};function _(ve,ge){return function(Je){ve(Je,ge)}}function S(ve){p[ve.id]=ve}function M(ve,ge){try{var Je=m[ve.id]&&function(ht,vt){if(ht.gfx)throw new Error(`already rendered ${Kn(ht)}`);return c.element(ht,m[ht.id],vt)}(ve,ge);return S(ve),Je}catch(ht){O(ht.message,{element:ve,error:ht}),console.error(`failed to import ${Kn(ve)}`,ht)}}function O(ve,ge){c.error(ve,ge)}var j=this.registerDi=function(ve){var ge,Je=ve.bpmnElement;Je?m[Je.id]?O(`multiple DI elements defined for ${Kn(Je)}`,{element:Je}):(m[Je.id]=ve,g(ge=Je,"di")||Object.defineProperty(ge,"di",{enumerable:!1,get:function(){throw new Error(IA)}})):O(`no bpmnElement referenced in ${Kn(ve)}`,{element:ve})};function Z(ve){var ge;ge=ve.plane,j(ge),x(ge.planeElement,re)}function re(ve){j(ve)}this.handleDefinitions=function(ve,ge){var Je=ve.diagrams;if(ge&&Je.indexOf(ge)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!ge&&Je&&Je.length&&(ge=Je[0]),!ge)throw new Error("no diagram to display");m={},Z(ge);var ht=ge.plane;if(!ht)throw new Error(`no plane for ${Kn(ge)}`);var vt=ht.bpmnElement;if(!vt){if(vt=function(ci){return y(ci.rootElements,function(en){return hr(en,"bpmn:Process")||hr(en,"bpmn:Collaboration")})}(ve),!vt)throw new Error("no process or collaboration to display");O(`correcting missing bpmnElement on ${Kn(ht)} to ${Kn(vt)}`),ht.bpmnElement=vt,j(ht)}var Wr,Ft,kr=function(ci,en){return c.root(ci,m[ci.id],en)}(vt,ht);if(hr(vt,"bpmn:Process")||hr(vt,"bpmn:SubProcess"))Ee(vt,kr);else{if(!hr(vt,"bpmn:Collaboration"))throw new Error(`unsupported bpmnElement for ${Kn(ht)}: ${Kn(vt)}`);Ft=kr,x((Wr=vt).participants,_(Ut,Ft)),U(Wr.artifacts,Ft),h.push(function(){(function(ci,en){x(ci,_(Le,en))})(Wr.messageFlows,Ft)}),function(ci,en){var Ur=v(ci,function(Tt){return!p[Tt.id]&&hr(Tt,"bpmn:Process")&&Tt.laneSets});Ur.forEach(_(Ee,en))}(ve.rootElements,kr)}fe(h)};var fe=this.handleDeferred=function(){for(;h.length;)h.shift()()};function Ee(ve,ge){He(ve,ge),ie(ve.ioSpecification,ge),U(ve.artifacts,ge),S(ve)}function Le(ve,ge){M(ve,ge)}function xe(ve,ge){M(ve,ge)}function We(ve,ge){M(ve,ge)}function ce(ve,ge){M(ve,ge)}function Re(ve,ge){M(ve,ge)}function U(ve,ge){x(ve,function(Je){hr(Je,"bpmn:Association")?h.push(function(){Re(Je,ge)}):Re(Je,ge)})}function ie(ve,ge){ve&&(x(ve.dataInputs,_(We,ge)),x(ve.dataOutputs,_(ce,ge)))}var ne=this.handleSubProcess=function(ve,ge){He(ve,ge),U(ve.artifacts,ge)};function Be(ve,ge){var Je=M(ve,ge);hr(ve,"bpmn:SubProcess")&&ne(ve,Je||ge),hr(ve,"bpmn:Activity")&&ie(ve.ioSpecification,ge),h.push(function(){x(ve.dataInputAssociations,_(xe,ge)),x(ve.dataOutputAssociations,_(xe,ge))})}function we(ve,ge){M(ve,ge)}function ut(ve,ge){h.push(function(){var Je=M(ve,ge);ve.childLaneSet&&lt(ve.childLaneSet,Je||ge),function(ht){x(ht.flowNodeRef,function(vt){var Wr=vt.get("lanes");Wr&&Wr.push(ht)})}(ve)})}function lt(ve,ge){x(ve.lanes,_(ut,ge))}function He(ve,ge){(function(Je,ht){x(Je,function(vt){hr(vt,"bpmn:SequenceFlow")?h.push(function(){(function(Wr,Ft){M(Wr,Ft)})(vt,ht)}):hr(vt,"bpmn:BoundaryEvent")?h.unshift(function(){Be(vt,ht)}):hr(vt,"bpmn:FlowNode")?Be(vt,ht):hr(vt,"bpmn:DataObject")||(hr(vt,"bpmn:DataStoreReference")||hr(vt,"bpmn:DataObjectReference")?we(vt,ht):O(`unrecognized flowElement ${Kn(vt)} in context ${Kn(ht&&ht.businessObject)}`,{element:vt,context:ht}))})})(ve.flowElements,ge),ve.laneSets&&function(Je,ht){x(Je,_(lt,ht))}(ve.laneSets,ge)}function Ut(ve,ge){var Je=M(ve,ge),ht=ve.processRef;ht&&Ee(ht,Je||ge)}}function jA(c,p,h){var m,_,S,M=[];function O(j,Z){var re=new BA({root:function(Le,xe){return m.add(Le,xe)},element:function(Le,xe,We){return m.add(Le,xe,We)},error:function(Le,xe){M.push({message:Le,context:xe})}});Z=Z||j.diagrams&&j.diagrams[0];var fe=function(Le,xe){if(!(!xe||!xe.plane)){var We,ce=xe.plane.bpmnElement,Re=ce;G(ce,"bpmn:Process")||G(ce,"bpmn:Collaboration")||(Re=function(we){for(var ut=we;ut;){if(G(ut,"bpmn:Process"))return ut;ut=ut.$parent}}(ce)),We=G(Re,"bpmn:Collaboration")?Re:y(Le.rootElements,function(we){if(G(we,"bpmn:Collaboration"))return y(we.participants,function(ut){return ut.processRef===Re})});var U=[Re];We&&(U=function(we,ut){let lt=[];return x(we,function(He,Ut){lt.push(ut(He,Ut))}),lt}(We.participants,function(we){return we.processRef})).push(We);var ie=H_(U),ne=[xe],Be=[ce];return x(Le.diagrams,function(we){if(we.plane){var ut=we.plane.bpmnElement;ie.indexOf(ut)!==-1&&Be.indexOf(ut)===-1&&(ne.push(we),Be.push(ut))}}),ne}}(j,Z);if(!fe)throw new Error("no diagram to display");x(fe,function(Le){re.handleDefinitions(j,Le)});var Ee=Z.plane.bpmnElement.id;S.setRootElement(S.findRoot(Ee+"_plane")||S.findRoot(Ee))}return new Promise(function(j,Z){try{return m=c.get("bpmnImporter"),_=c.get("eventBus"),S=c.get("canvas"),_.fire("import.render.start",{definitions:p}),O(p,h),_.fire("import.render.complete",{error:void 0,warnings:M}),j({warnings:M})}catch(re){return re.warnings=M,Z(re)}})}function H_(c){var p=[];return x(c,function(h){h&&(p.push(h),p=p.concat(H_(h.flowElements)))}),p}var po,V_='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',W_={verticalAlign:"middle"},U_={color:"#404040"},$A={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},FA={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},zA={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},HA='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+V_+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function VA(){po||(Cr(po=Hi(HA),$A),Cr(Pi("svg",po),W_),Cr(Pi(".backdrop",po),FA),Cr(Pi(".notice",po),zA),Cr(Pi(".link",po),U_,{margin:"15px 20px 15px 10px",alignSelf:"center"}),tm.bind(po,".backdrop","click",function(c){document.body.removeChild(po)})),document.body.appendChild(po)}function cn(c){c=L({},WA,c),this._moddle=this._createModdle(c),this._container=this._createContainer(c),function(p){const h=Hi('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+V_+"</a>");Cr(Pi("svg",h),W_),Cr(h,U_,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),p.appendChild(h),Jh.bind(h,"click",function(m){VA(),m.preventDefault()})}(this._container),this._init(this._container,this._moddle,c)}function Ep(c,p){return c.warnings=p,c}n(cn,Ho),cn.prototype.importXML=async function(c,p){const h=this;let m=[];try{let S;c=this._emit("import.parse.start",{xml:c})||c;try{S=await this._moddle.fromXML(c,"bpmn:Definitions")}catch(fe){throw this._emit("import.parse.complete",{error:fe}),fe}let M=S.rootElement;const O=S.references,j=S.warnings,Z=S.elementsById;m=m.concat(j),M=this._emit("import.parse.complete",(_={error:null,definitions:M,elementsById:Z,references:O,warnings:m},h.get("eventBus").createEvent(_)))||M;const re=await this.importDefinitions(M,p);return m=m.concat(re.warnings),this._emit("import.done",{error:null,warnings:m}),{warnings:m}}catch(S){let M=S;throw m=m.concat(M.warnings||[]),Ep(M,m),M=function(O){const j=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(O.message);return j&&(O.message="unparsable content <"+j[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+j[2]),O}(M),this._emit("import.done",{error:M,warnings:M.warnings}),M}var _},cn.prototype.importDefinitions=async function(c,p){return this._setDefinitions(c),{warnings:(await this.open(p)).warnings}},cn.prototype.open=async function(c){const p=this._definitions;let h=c;if(!p){const _=new Error("no XML imported");throw Ep(_,[]),_}if(typeof c=="string"&&(h=function(_,S){return S&&y(_.diagrams,function(M){return M.id===S})||null}(p,c),!h)){const _=new Error("BPMNDiagram <"+c+"> not found");throw Ep(_,[]),_}try{this.clear()}catch(_){throw Ep(_,[]),_}const{warnings:m}=await jA(this,p,h);return{warnings:m}},cn.prototype.saveXML=async function(c){c=c||{};let p,h,m=this._definitions;try{if(!m)throw new Error("no definitions loaded");m=this._emit("saveXML.start",{definitions:m})||m,h=(await this._moddle.toXML(m,c)).xml,h=this._emit("saveXML.serialized",{xml:h})||h}catch(S){p=S}const _=p?{error:p}:{xml:h};if(this._emit("saveXML.done",_),p)throw p;return _},cn.prototype.saveSVG=async function(){let c,p;this._emit("saveSVG.start");try{const h=this.get("canvas"),m=h.getActiveLayer(),_=Pi(":scope > defs",h._svg),S=_e(m),M=_?"<defs>"+_e(_)+"</defs>":"",O=m.getBBox();c=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+O.width+'" height="'+O.height+'" viewBox="'+O.x+" "+O.y+" "+O.width+" "+O.height+'" version="1.1">'+M+S+"</svg>"}catch(h){p=h}if(this._emit("saveSVG.done",{error:p,svg:c}),p)throw p;return{svg:c}},cn.prototype._setDefinitions=function(c){this._definitions=c},cn.prototype.getModules=function(){return this._modules},cn.prototype.clear=function(){this.getDefinitions()&&Ho.prototype.clear.call(this)},cn.prototype.destroy=function(){Ho.prototype.destroy.call(this),ap(this._container)},cn.prototype.on=function(c,p,h,m){return this.get("eventBus").on(c,p,h,m)},cn.prototype.off=function(c,p){this.get("eventBus").off(c,p)},cn.prototype.attachTo=function(c){if(!c)throw new Error("parentNode required");this.detach(),c.get&&c.constructor.prototype.jquery&&(c=c.get(0)),typeof c=="string"&&(c=Pi(c)),c.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},cn.prototype.getDefinitions=function(){return this._definitions},cn.prototype.detach=function(){const c=this._container,p=c.parentNode;p&&(this._emit("detach",{}),p.removeChild(c))},cn.prototype._init=function(c,p,h){const m=h.modules||this.getModules(h),_=h.additionalModules||[],S=[].concat([{bpmnjs:["value",this],moddle:["value",p]}],m,_),M=L(function(O,j){let Z={};return x(Object(O),function(re,fe){j.indexOf(fe)===-1&&(Z[fe]=re)}),Z}(h,["additionalModules"]),{canvas:L({},h.canvas,{container:c}),modules:S});Ho.call(this,M),h&&h.container&&this.attachTo(h.container)},cn.prototype._emit=function(c,p){return this.get("eventBus").fire(c,p)},cn.prototype._createContainer=function(c){const p=Hi('<div class="bjs-container"></div>');return Cr(p,{width:G_(c.width),height:G_(c.height),position:c.position}),p},cn.prototype._createModdle=function(c){return new LA(L({},this._moddleExtensions,c.moddleExtensions))},cn.prototype._modules=[];const WA={width:"100%",height:"100%",position:"relative"};function G_(c){return c+(u(c)?"px":"")}function bp(c){cn.call(this,c)}return n(bp,cn),bp.prototype._modules=[HT,QT,eA,Qx,iA,Wx],bp.prototype._moddleExtensions={},bp})})(yT);var u7=yT.exports;const vT=sS(u7),xT=({logs:e,headerActions:t,onUpdateLog:n,piStatusNode:r})=>{const i=Pe.useRef(null);return Pe.useEffect(()=>{i.current&&(i.current.scrollLeft=i.current.scrollWidth)},[e]),H.jsxs("div",{className:"h-full w-full bg-[#1e1e1e] border-b border-white/10 flex flex-col",children:[H.jsxs("div",{className:"px-6 py-2 border-b border-white/5 flex justify-between items-center bg-[#252525]",children:[H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsx("h3",{className:"text-sm font-medium text-white/70 uppercase tracking-wider mr-4",children:" Timeline"}),H.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[H.jsxs("div",{className:"flex items-center gap-1.5",children:[H.jsx("div",{className:"w-2 h-2 rounded-full bg-[#8ab4f8]"}),H.jsx("span",{className:"text-white/60",children:""})]}),H.jsxs("div",{className:"flex items-center gap-1.5",children:[H.jsx("div",{className:"w-2 h-2 rounded-full bg-[#81c995]"}),H.jsx("span",{className:"text-white/60",children:""})]})]})]}),H.jsxs("div",{className:"flex items-center gap-4",children:[r,H.jsxs("span",{className:"text-xs text-white/30",children:[e.length," "]}),t]})]}),H.jsxs("div",{ref:i,className:"flex-1 overflow-x-auto overflow-y-hidden flex items-start px-6 gap-8 scrollbar-thin pt-4 pb-8",onWheel:o=>{i.current&&(i.current.scrollLeft+=o.deltaY)},children:[e.length===0&&H.jsx("div",{className:"text-white/20 text-sm italic w-full text-center",children:"..."}),e.map((o,a)=>H.jsxs("div",{className:"relative flex flex-col items-center min-w-[120px] group",children:[a<e.length-1&&H.jsx("div",{className:"absolute top-[18px] left-[50%] w-[calc(100%+32px)] h-[2px] bg-white/10 -z-0"}),H.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold z-10 mb-2 shadow-lg transition-transform group-hover:scale-110 ${o.message.includes("")?"bg-[#81c995] text-[#0f5132]":"bg-[#8ab4f8] text-[#002d6f]"}`,children:a+1}),H.jsx("div",{className:"text-xs text-white/50 mt-1",children:EM(o.time)}),H.jsx("div",{className:"text-sm font-medium text-white/90 mt-1 text-center px-2",children:o.message.split(": ")[1]||o.message}),H.jsxs("div",{className:"flex gap-2 mt-2",children:[o.note&&H.jsx("div",{className:"text-xs text-[#fbbc04] font-bold cursor-pointer animate-pulse hover:scale-110 transition border border-[#fbbc04]/30 px-2 py-0.5 rounded bg-[#fbbc04]/10",title:o.note,onClick:()=>{if(n){const s=prompt(":",o.note);s!==null&&n(a,s)}},children:""}),o.value&&o.value!=="-"&&o.value!=='"-"'&&H.jsx("div",{className:"text-xs text-[#81c995] font-bold cursor-help hover:scale-110 transition border border-[#81c995]/30 px-2 py-0.5 rounded bg-[#81c995]/10",title:o.value,children:""})]})]},a))]})]})},p7=({task:e,onStart:t,onEnd:n,onFinish:r,onClose:i,note:o,setNote:a,tagValues:s,loadingTag:l})=>{if(!e)return null;const u=e.status==="running",f=e.status==="completed",d=e.type==="bpmn:EndEvent";return H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:i,children:H.jsxs("div",{className:"bg-[#1e1e1e] border border-white/10 rounded-2xl shadow-2xl w-[400px] overflow-hidden animate-scale-in",onClick:g=>g.stopPropagation(),children:[H.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex justify-between items-center bg-[#252525]",children:[H.jsx("h3",{className:"text-lg font-bold text-white/90",children:e.name}),H.jsx("button",{onClick:i,className:"text-white/40 hover:text-white transition",children:""})]}),H.jsxs("div",{className:"p-6",children:[e.tag&&H.jsxs("div",{className:"mb-6 bg-[#121212] rounded-xl p-4 border border-white/5",children:[H.jsx("div",{className:"text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (PI Tag)"}),l?H.jsx("div",{className:"text-white/40 text-sm animate-pulse",children:"..."}):H.jsxs("div",{className:"grid gap-2",children:[s.map((g,y)=>H.jsxs("div",{className:"flex justify-between items-end",children:[H.jsx("span",{className:"text-white/60 text-sm",children:g.tag}),H.jsxs("span",{className:"text-[#81c995] font-mono font-bold",children:[g.value!==void 0?Number(g.value).toFixed(e.precision):"-"," ",H.jsx("span",{className:"text-sm text-white/40",children:e.unit})]})]},y)),s.length===0&&H.jsx("div",{className:"text-white/30 text-sm",children:""})]})]}),H.jsxs("div",{className:"mb-6",children:[H.jsx("label",{className:"block text-xs font-medium text-white/60 mb-2 uppercase tracking-wider",children:" / "}),H.jsx("textarea",{value:o,onChange:g=>a(g.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 rounded-xl p-3 text-white focus:border-[#8ab4f8] outline-none h-24 text-sm resize-none",placeholder:"...",disabled:f})]}),H.jsx("div",{className:"flex gap-3",children:d?H.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl font-medium bg-[#f28b82] hover:bg-[#f6aea9] text-[#5c1e1e] transition shadow-lg shadow-red-500/20",children:""}):H.jsxs(H.Fragment,{children:[!u&&!f&&H.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl font-medium bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] transition shadow-lg shadow-blue-500/20",children:""}),u&&H.jsx("button",{onClick:n,className:"w-full py-3 rounded-xl font-medium bg-[#81c995] hover:bg-[#a8dab5] text-[#0f5132] transition shadow-lg shadow-green-500/20",children:""}),f&&H.jsx("div",{className:"w-full py-3 rounded-xl font-medium bg-[#2d2d2d] text-white/40 text-center border border-white/5 cursor-not-allowed",children:""})]})})]})]})})},f7=({processId:e,onNavigate:t})=>{const n=Pe.useRef(null),r=Pe.useRef(null),[i,o]=Pe.useState(null),[a,s]=Pe.useState([]),[l,u]=Pe.useState(null),[f,d]=Pe.useState(!1),[g,y]=Pe.useState(!1),[v,x]=Pe.useState(null),[C,P]=Pe.useState(""),[R,E]=Pe.useState([]),[b,D]=Pe.useState(!1),[B,z]=Pe.useState(!1),[L,X]=Pe.useState("Checking..."),[Y,G]=Pe.useState(1),le=Pe.useMemo(()=>"user_"+Math.random().toString(36).substr(2,9),[]),oe=Q=>{if(r.current){const J=r.current.get("canvas");J.zoom(J.zoom()+Q)}},Se=Pe.useRef(a),kt=Pe.useRef(l);Pe.useEffect(()=>{Se.current=a},[a]),Pe.useEffect(()=>{kt.current=l},[l]),Pe.useEffect(()=>{fetch(`${Kt}/pi_status`).then(Q=>Q.json()).then(Q=>X(Q.status))},[]);const Ge=(Q,J)=>!Q||!Q.incoming||Q.incoming.length===0?!0:Q.incoming.every(se=>{if(se.source.type==="bpmn:StartEvent")return!0;const ye=se.source.businessObject.name;return J.some(I=>I.message.startsWith("")&&I.message.includes(ye))});Pe.useEffect(()=>{const Q=()=>{const se=r.current;if(!se)return;const ye=se.get("elementRegistry"),I=se.get("canvas");ye.forEach(w=>{if(w.type==="bpmn:TextAnnotation"||w.type==="bpmn:Group"){const k=w.businessObject;let $={};if(k.documentation&&k.documentation.length>0)try{$=JSON.parse(k.documentation[0].text)}catch{}if(w.type==="bpmn:Group"&&($.noteColor||($.noteColor="#fff9c4"),$.borderColor||($.borderColor="#d6b656")),$.noteColor||$.htmlContent||$.textFontSize||$.textColor||$.borderColor)try{const ae=I.getGraphics(w);if(!ae)return;const Te=ae.querySelector(".sticky-bg");Te&&Te.remove();const Ae=ae.querySelector(".sticky-fo");Ae&&Ae.remove(),["text","path","rect"].forEach(nt=>{const je=ae.querySelector(nt);je&&(je.style.display="none")});let de=w.width||w.di&&w.di.bounds&&w.di.bounds.width||300,pt=w.height||w.di&&w.di.bounds&&w.di.bounds.height||300;const rt=document.createElementNS("http://www.w3.org/2000/svg","rect");rt.setAttribute("class","sticky-bg"),rt.setAttribute("width",de),rt.setAttribute("height",pt),rt.setAttribute("rx","10"),rt.setAttribute("ry","10"),rt.setAttribute("fill",$.noteColor||"#fff9c4"),rt.setAttribute("stroke",$.borderColor||"#d6b656"),rt.setAttribute("stroke-width","2"),rt.setAttribute("fill-opacity",$.noteOpacity!==void 0?$.noteOpacity:1);const Xe=ae.querySelector(".djs-visual");if(Xe&&(Xe.firstChild?Xe.insertBefore(rt,Xe.firstChild):Xe.appendChild(rt)),$.htmlContent){const nt=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");nt.setAttribute("class","sticky-fo"),nt.setAttribute("width",de-20),nt.setAttribute("height",pt-20),nt.setAttribute("x","10"),nt.setAttribute("y","10");const je=document.createElement("div");je.xmlns="http://www.w3.org/1999/xhtml",je.style.width="100%",je.style.height="100%",je.style.overflow="auto",je.style.fontSize=`${$.textFontSize||14}px`,je.style.color=$.textColor||"#000000",je.innerHTML=$.htmlContent,nt.appendChild(je),Xe&&Xe.appendChild(nt)}}catch(ae){console.error(ae)}}})};return(async()=>{if(!e)return;const ye=await(await fetch(`${Kt}/processes/${e}`)).json();o(ye);const w=await(await fetch(`${Kt}/sessions/${e}`)).json();let k=[];w&&!w.is_finished?(k=w.logs||[],s(k),u(w.current_task_id),d(w.is_finished)):(await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:[],is_finished:!1})}),s([]),u(null),d(!1)),r.current&&r.current.destroy();const $=new vT({container:n.current});r.current=$,$._customState={runningTaskId:l,logs:k};try{await $.importXML(ye.xml_content),$.get("canvas").zoom("fit-viewport")}catch(rt){console.error("BPMN Import Error:",rt)}const K=$.get("eventBus"),ae=$.get("elementRegistry"),Te=$.get("canvas");if(["shape.move.start","connection.create.start","element.dblclick","contextPad.open","palette.create","shape.resize.start","connection.segment.move.start","bendlpoints.move.start","connection.layout.start","element.mousedown"].forEach(rt=>{K.on(rt,1e4,Xe=>{if(rt!=="element.mousedown")return!1})}),K.on("element.click",rt=>{if($._customState&&$._customState.isFinished)return;const Xe=rt.element;if(Xe.type==="bpmn:DataObjectReference"||Xe.type==="bpmn:DataStoreReference"){const je=Xe.businessObject.documentation;if(je&&je.length>0&&je[0].text)try{const ft=JSON.parse(je[0].text);if(ft.targetUrl){window.open(ft.targetUrl,"_blank");return}}catch{}}if(["bpmn:Task","bpmn:UserTask","bpmn:ServiceTask","bpmn:SendTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:CallActivity","bpmn:StartEvent","bpmn:EndEvent"].includes(Xe.type)){const je=$._customState.logs||[];$._customState.runningTaskId,Ke(Xe,je)}}),w&&w.current_task_id)try{ae.get(w.current_task_id)&&Te.addMarker(w.current_task_id,"highlight")}catch(rt){console.error("Error highlighting task:",rt)}if(k.length>0){const rt=k.filter(Xe=>Xe.message.startsWith("")).map(Xe=>Xe.message.split(": ")[1]);ae.forEach(Xe=>{rt.includes(Xe.businessObject.name)&&Te.addMarker(Xe.id,"completed-task")})}setTimeout(Q,100),setTimeout(Q,500);const de=[];ae.forEach(rt=>{const Xe=rt.businessObject;if(Xe.documentation&&Xe.documentation.length>0)try{const nt=JSON.parse(Xe.documentation[0].text);nt.alwaysOn&&nt.piTag&&de.push({id:rt.id,name:Xe.name||"",tag:nt.piTag,unit:nt.piUnit||"",precision:nt.piPrecision||2})}catch{}});const pt=$.get("overlays");if(de.length>0){const rt=async()=>{for(const je of de){if(!pt)return;let ft=pt.get({element:je.id}).find(Ie=>Ie.html&&Ie.html.querySelector(`#content-${je.id}`)),ee=[];try{$._hasConnectedPI||z(!0),ee=await(await fetch(`${Kt}/get_tag_value?tag=${encodeURIComponent(je.tag)}`)).json(),$._hasConnectedPI=!0}catch(Ie){console.error(Ie)}finally{z(!1)}if(ft){const Ie=ft.html.querySelector(`#content-${je.id}`);Ie&&Xe(Ie,ee,je)}else{const Ie=document.createElement("div");Ie.className="bg-[#1e1e1e] border border-white/20 rounded shadow-lg text-xs min-w-[150px] flex flex-col resize-x overflow-auto",Ie.style.pointerEvents="auto",Ie.style.position="absolute";const Pt=document.createElement("div");Pt.className="bg-[#2d2d2d] px-2 py-1 flex justify-between items-center cursor-move select-none border-b border-white/10",Pt.innerHTML=`
                               <span class="text-white/60 font-medium truncate flex-1 min-w-0 mr-2" title="${je.name}">${je.name}</span>
                               <button class="text-white/40 hover:text-white transition focus:outline-none">
                                   <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                   </svg>
                               </button>
                           `;const _e=document.createElement("div");_e.id=`content-${je.id}`,_e.className="p-2",Ie.appendChild(Pt),Ie.appendChild(_e),pt.add(je.id,{type:"always-on-pi",position:{bottom:0,right:-10},html:Ie});const Me=Pt.querySelector("button");let Nt=!1;Me.onclick=Dn=>{Dn.stopPropagation(),Nt=!Nt,_e.style.display=Nt?"none":"block",Me.innerHTML=Nt?'<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>':'<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>'};let _t=!1,wt,dt,Fn,vn;Pt.onmousedown=Dn=>{Dn.stopPropagation(),_t=!0,wt=Dn.clientX,dt=Dn.clientY;const oi=window.getComputedStyle(Ie);let fr=0,xn=0;if(window.WebKitCSSMatrix){const Ve=new WebKitCSSMatrix(oi.transform);fr=Ve.m41,xn=Ve.m42}Fn=fr,vn=xn,document.onmousemove=ii,document.onmouseup=zi};const ii=Dn=>{if(!_t)return;const oi=Dn.clientX-wt,fr=Dn.clientY-dt;Ie.style.transform=`translate(${Fn+oi}px, ${vn+fr}px)`},zi=()=>{_t=!1,document.onmousemove=null,document.onmouseup=null};Xe(_e,ee,je)}}},Xe=(je,ft,ee)=>{if(je.innerHTML="",ft.forEach(Ie=>{const Pt=document.createElement("div");Pt.className="flex justify-between gap-4 mb-1 last:mb-0";const _e=document.createElement("span");_e.className="text-white/60 flex-1 min-w-0 break-all",_e.innerText=Ie.tag;const Me=document.createElement("span");Me.className="text-[#81c995] font-mono font-bold";const Nt=parseFloat(Ie.value);Me.innerText=isNaN(Nt)?Ie.value:Nt.toFixed(ee.precision),Pt.appendChild(_e),Pt.appendChild(Me),je.appendChild(Pt)}),ee.unit){const Ie=document.createElement("div");Ie.className="text-right text-white/40 text-[10px] mt-1",Ie.innerText=ee.unit,je.appendChild(Ie)}},nt=setInterval(rt,5e3);$._customInterval=nt,rt()}})(),()=>{r.current&&(r.current._customInterval&&clearInterval(r.current._customInterval),r.current.destroy())}},[e]),Pe.useEffect(()=>{const Q=n.current;if(!Q)return;const J=se=>{if(r.current){if(se.ctrlKey||se.metaKey)return;se.preventDefault(),se.stopPropagation();const ye=r.current.get("canvas"),I=ye.viewbox();ye.viewbox({x:I.x+se.deltaY,y:I.y,width:I.width,height:I.height})}};return Q.addEventListener("wheel",J,{passive:!1,capture:!0}),()=>Q.removeEventListener("wheel",J,{capture:!0})},[]),Pe.useEffect(()=>{if(!r.current)return;r.current._customState={runningTaskId:l,logs:a,isFinished:f};const Q=r.current.get("canvas"),J=r.current.get("elementRegistry");J.forEach(I=>{Q.removeMarker(I.id,"highlight"),Q.removeMarker(I.id,"completed-task")});const se={},ye={};a.forEach(I=>{let w=null,k=null;I.message.startsWith(":")?(w="running",k=I.message.substring(5).trim()):I.message.startsWith(":")&&(w="completed",k=I.message.substring(5).trim()),w&&(I.taskId&&(ye[I.taskId]=w),k&&(se[k]=w))}),J.forEach(I=>{const w=I.id,k=I.businessObject.name;let $=null;ye[w]?$=ye[w]:k&&se[k]&&($=se[k]),$&&($==="completed"?Q.addMarker(w,"completed-task"):$==="running"&&Q.addMarker(w,"highlight"))})},[a,f,l]),Pe.useEffect(()=>{if(!e)return;const J=setInterval(async()=>{try{const se=await fetch(`${Kt}/sessions/${e}`);if(se.ok){const ye=await se.json();ye&&(JSON.stringify(ye.logs)!==JSON.stringify(a)&&s(ye.logs),ye.is_finished!==f&&d(ye.is_finished),ye.current_task_id!==l&&u(ye.current_task_id))}}catch(se){console.error("Sync error:",se)}},3e3);return()=>clearInterval(J)},[e,a,f,l]);const Ke=(Q,J,se)=>{const ye=Q.businessObject,I=ye.documentation;let w="",k="",$=2;if(I&&I.length>0&&I[0].text)try{const pt=JSON.parse(I[0].text);w=pt.piTag,k=pt.piUnit,$=parseInt(pt.piPrecision)||2}catch{}let K="idle";const ae=ye.name||"",Te=`: ${ae}`,Ae=`: ${ae}`;if(Q.type==="bpmn:StartEvent")J.some(pt=>pt.message===Te)&&(K="completed");else{const pt=J.some(Xe=>Xe.message===Te);J.some(Xe=>Xe.message===Ae)?K="completed":pt&&(K="running")}const de=Ge(Q,J);x({id:Q.id,name:ye.name||"",type:Q.type,tag:w,unit:k,precision:$,status:K,canStart:de}),P(""),E([]),y(!0),w&&(D(!0),fetch(`${Kt}/get_tag_value?tag=${encodeURIComponent(w)}`).then(pt=>pt.json()).then(pt=>{E(pt),D(!1)}))},me=Q=>{if(!Q||Q.length===0)return;let J="";i&&i.id&&i.updated_at&&(J+=`# Metadata: id=${i.id}, version=${i.updated_at}
`),J+=`Time,Source,Message,Value,Note
`,Q.forEach($=>{const K=[$.time,$.source,$.message,`"${$.value}"`,`"${$.note}"`].join(",");J+=K+`
`});const se=new Date,ye=se.getFullYear()+String(se.getMonth()+1).padStart(2,"0")+String(se.getDate()).padStart(2,"0")+String(se.getHours()).padStart(2,"0")+String(se.getMinutes()).padStart(2,"0"),I=new Blob(["\uFEFF"+J],{type:"text/csv;charset=utf-8;"}),w=URL.createObjectURL(I),k=document.createElement("a");k.setAttribute("href",w),k.setAttribute("download",`${i.name}_${ye}.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(w)},$e=async()=>{if(!v)return;let Q="-";if(v.tag)try{Q=(await(await fetch(`${Kt}/get_tag_value?tag=${encodeURIComponent(v.tag)}`)).json()).map(w=>{const k=parseFloat(w.value),$=isNaN(k)?w.value:k.toFixed(v.precision||2);return`${w.tag}=${$} ${v.unit||""}`}).join(", ")}catch(ye){console.error(ye)}if(v.type==="bpmn:StartEvent"){const ye={time:zp(),source:"User",message:`: ${v.name}`,value:Q,note:C},I=[...a,ye];s(I),u(null),x(k=>({...k,status:"completed"})),r.current&&(r.current._customState={runningTaskId:null,logs:I}),r.current.get("canvas").addMarker(v.id,"completed-task"),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:I,is_finished:!1})}),y(!1);return}const J={time:zp(),source:"User",message:`: ${v.name}`,value:Q,note:C,taskId:v.id},se=[...a,J];s(se),u(v.id),x(ye=>({...ye,status:"running"})),r.current&&(r.current._customState={runningTaskId:v.id,logs:se}),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:v.id,logs:se,is_finished:!1})}),y(!1)},Oe=async()=>{if(!v)return;const Q=R.map(ye=>{const I=parseFloat(ye.value),w=isNaN(I)?ye.value:I.toFixed(v.precision||2);return`${ye.tag}=${w} ${v.unit||""}`}).join(", ")||"-",J={time:zp(),source:"User",message:`: ${v.name}`,value:Q,note:C,taskId:v.id},se=[...a,J];s(se),u(null),x(ye=>({...ye,status:"completed"})),r.current&&(r.current._customState={runningTaskId:null,logs:se}),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:se,is_finished:!1})}),y(!1)},qe=async()=>{if(!confirm(""))return;const Q={time:zp(),source:"System",message:"",value:"-",note:""},J=[...a,Q];s(J),d(!0),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:J,is_finished:!0})}),alert(""),y(!1),me(J)};return Pe.useEffect(()=>{if(!e)return;const Q=async()=>{try{const se=await fetch(`${Kt}/heartbeat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,user_id:le})});if(se.ok){const ye=await se.json();G(ye.online_count)}}catch(se){console.error("Heartbeat error:",se)}};Q();const J=setInterval(Q,5e3);return()=>clearInterval(J)},[e,le]),H.jsxs("div",{className:"flex flex-col h-full bg-[#1e1e1e]",children:[H.jsx("div",{className:"h-1/3 min-h-[250px] border-b border-white/10 relative z-10 shrink-0",children:H.jsx(xT,{logs:a,totalSteps:i?(i.xml_content.match(/<bpmn:task/g)||[]).length:0,currentStep:a.length,activeProcessName:i?i.name:"",onNavigate:t,onlineCount:Y,onExport:()=>me(a),isFinished:f,onFinish:qe,piStatusNode:H.jsxs("div",{onClick:()=>t("settings"),className:"flex items-center gap-2 bg-[#1e1e1e] px-3 py-1.5 rounded-full border border-white/5 cursor-pointer hover:bg-white/5 transition mr-4",children:[H.jsx("div",{className:`w-2 h-2 rounded-full ${L==="Connected"?"bg-[#81c995] animate-pulse":L==="Not Configured"?"bg-gray-400":"bg-[#f28b82]"}`}),H.jsx("span",{className:"text-xs text-white/70 whitespace-nowrap",children:L==="Connected"?"PI ":L==="Not Configured"?"PI ":"PI "})]})})}),H.jsxs("div",{className:"flex-1 relative bg-white border-t-4 border-[#1e1e1e] min-h-0",children:[H.jsx("div",{ref:n,className:"w-full h-full operator-mode"}),B&&H.jsx("div",{className:"absolute inset-0 bg-black/60 z-[100] flex flex-col items-center justify-center backdrop-blur-sm transition-all duration-300",children:H.jsxs("div",{className:"bg-[#1e1e1e] p-6 rounded-2xl border border-white/10 shadow-2xl flex flex-col items-center gap-4",children:[H.jsx("div",{className:"w-12 h-12 border-4 border-[#2d2d2d] border-t-[#8ab4f8] rounded-full animate-spin"}),H.jsx("div",{className:"text-white/90 font-medium text-lg",children:" PI ..."}),H.jsx("div",{className:"text-white/50 text-xs",children:""})]})}),!i&&H.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex flex-col items-center justify-center",children:H.jsx("div",{className:"text-white/40",children:"Loading..."})}),H.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-10",children:[H.jsx("button",{onClick:()=>oe(.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"+"}),H.jsx("button",{onClick:()=>oe(-.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"-"}),H.jsx("button",{onClick:()=>{r.current&&r.current.get("canvas").zoom("fit-viewport")},className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs",children:"Fit"})]}),g&&v&&H.jsx(p7,{task:v,onClose:()=>y(!1),onStart:$e,onComplete:Oe,note:C,setNote:P,tagValues:R,loadingTag:b})]})]})},d7=({processId:e,onNavigate:t})=>{const n=Pe.useRef(null),[r,i]=Pe.useState([]),o=Pe.useRef(null),[a,s]=Pe.useState(""),[l,u]=Pe.useState(!1),[f,d]=Pe.useState(null),g=Pe.useCallback(()=>{if(!o.current)return;const C=o.current;C.get("canvas");const P=C.get("elementRegistry");P.filter(E=>E.type!=="bpmn:Process").forEach(E=>{const b=P.getGraphics(E),B=E.businessObject.documentation;if(E.type==="bpmn:Group"||E.type==="bpmn:TextAnnotation")try{let z={};if(B&&B.length>0&&B[0].text?z=JSON.parse(B[0].text):E.type==="bpmn:Group"&&(z={noteColor:"#fff2cc",borderColor:"#d6b656"}),z.noteColor||z.htmlContent||z.textFontSize||z.textColor){const L=b.querySelector(".djs-visual path");L&&(L.style.display="none");const X=b.querySelector(".djs-visual rect");X&&(X.style.display="none");let Y=b.querySelector(".sticky-bg");Y&&Y.remove();let G=b.querySelector(".sticky-fo");G&&G.remove();const le=E.width,oe=E.height,Se=document.createElementNS("http://www.w3.org/2000/svg","rect");Se.classList.add("sticky-bg"),Se.setAttribute("width",le),Se.setAttribute("height",oe),Se.setAttribute("fill",z.noteColor||"transparent"),Se.setAttribute("stroke",z.borderColor||"transparent"),Se.setAttribute("fill-opacity",z.noteOpacity!==void 0?z.noteOpacity:1),b.prepend(Se);const kt=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");kt.classList.add("sticky-fo"),kt.setAttribute("width",le),kt.setAttribute("height",oe);const Ge=document.createElement("div");Ge.style.width="100%",Ge.style.height="100%",Ge.style.padding="10px",Ge.style.boxSizing="border-box",Ge.style.overflow="hidden",Ge.style.fontSize=`${z.textFontSize||12}px`,Ge.style.fontWeight=z.textBold?"bold":"normal",Ge.style.color=z.textColor||"#000000",Ge.style.fontFamily="Arial, sans-serif",Ge.style.whiteSpace="pre-wrap",Ge.style.wordBreak="break-word",Ge.innerHTML=z.htmlContent||(B&&B[0]&&B[0].text?JSON.parse(B[0].text).text:"")||"",kt.appendChild(Ge),b.appendChild(kt)}if(z.nameFontSize){const L=b.querySelector(".djs-label");L&&(L.style.fontSize=`${z.nameFontSize}px`)}}catch{}})},[]);Pe.useEffect(()=>{if(!e)return;o.current&&o.current.destroy();const C=new vT({container:n.current});return o.current=C,(async()=>{try{const E=await(await fetch(`${Kt}/processes/${e}`)).json();s(E.name),d(E),await C.importXML(E.xml_content),C.get("canvas").zoom("fit-viewport");const b=C.get("eventBus");["shape.move.start","connection.create.start","shape.resize.start","element.dblclick","contextPad.open","palette.create","autoPlace.start"].forEach(B=>b.on(B,1e4,()=>!1)),setTimeout(g,500)}catch(R){console.error(R)}})(),()=>{o.current&&o.current.destroy()}},[e,g]),Pe.useEffect(()=>{if(!o.current||r.length===0)return;const C=o.current,P=C.get("canvas"),R=C.get("elementRegistry"),E={};r.forEach(b=>{if(b.message.includes(":")){const D=b.message.split(": ")[1].trim();E[D]||(E[D]="running")}else if(b.message.includes(":")){const D=b.message.split(": ")[1].trim();E[D]="completed"}}),R.forEach(b=>{const D=b.businessObject.name;if(D&&E[D]){const B=E[D];if(B==="completed"){P.addMarker(b.id,"completed-task");const L=R.getGraphics(b).querySelector(".djs-visual rect, .djs-visual circle, .djs-visual polygon");L&&(L.style.fill="#f0f0f0",L.style.stroke="#999")}else B==="running"&&P.addMarker(b.id,"highlight")}})},[r]);const y=C=>{const P=[];let R=0,E=!1;for(let D=0;D<C.length;D++)if(C[D]==='"')E=!E;else if(C[D]===","&&!E){let B=C.substring(R,D).trim();B.startsWith('"')&&B.endsWith('"')&&(B=B.substring(1,B.length-1)),P.push(B),R=D+1}let b=C.substring(R).trim();return b.startsWith('"')&&b.endsWith('"')&&(b=b.substring(1,b.length-1)),P.push(b),P},v=C=>{const P=C.target.files[0];if(!P)return;const R=new FileReader;R.onload=E=>{const D=E.target.result.split(`
`);let B=1;if(D[0].startsWith("# Metadata:")){B=2;const L=D[0].substring(11).split(",");let X=null,Y=null;L.forEach(G=>{const[le,oe]=G.split("=").map(Se=>Se.trim());le==="id"&&(X=parseInt(oe)),le==="version"&&(Y=oe)}),f&&(X!==f.id?alert(` (ID: ${X}) (ID: ${f.id}) `):Y!==f.updated_at&&alert(` (${Y})  (${f.updated_at}) `))}const z=D.slice(B).map(L=>{if(!L.trim())return null;const X=y(L);return X.length<4?null:{time:X[0],source:X[1],message:X[2],value:X[3],note:X[4]||""}}).filter(L=>L&&L.time);i(z),u(!0)},R.readAsText(P)},x=H.jsx("div",{className:"flex gap-2 items-center",children:H.jsx("button",{onClick:()=>t("dashboard"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-4 py-1 rounded-full text-sm font-medium transition",children:""})});return H.jsxs("div",{className:"flex flex-col h-full relative",children:[H.jsx("div",{className:"h-1/4 min-h-[180px] flex flex-col bg-[#1e1e1e]",children:H.jsx(xT,{logs:r,headerActions:x})}),H.jsxs("div",{className:"flex-1 relative bg-white border-t-4 border-[#1e1e1e]",children:[H.jsx("div",{ref:n,className:"w-full h-full operator-mode"}),!l&&H.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex flex-col items-center justify-center",children:H.jsxs("div",{className:"bg-[#1e1e1e] p-8 rounded-2xl border border-white/10 text-center max-w-md",children:[H.jsx("div",{className:"text-4xl mb-4",children:""}),H.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:""}),H.jsx("p",{className:"text-white/60 mb-6 text-sm",children:" CSV "}),H.jsxs("label",{className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-bold cursor-pointer transition inline-flex items-center gap-2",children:[H.jsx("span",{children:""}),H.jsx("input",{type:"file",accept:".csv",onChange:v,className:"hidden"})]})]})}),H.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-10",children:[H.jsx("button",{onClick:()=>o.current.get("canvas").zoom(o.current.get("canvas").zoom()+.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"+"}),H.jsx("button",{onClick:()=>o.current.get("canvas").zoom(o.current.get("canvas").zoom()-.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"-"}),H.jsx("button",{onClick:()=>o.current.get("canvas").zoom("fit-viewport"),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs",children:"Fit"})]})]})]})},h7=({onNavigate:e})=>{const[t,n]=Pe.useState(""),[r,i]=Pe.useState(!1);Pe.useEffect(()=>{fetch(`${Kt}/settings`).then(a=>a.json()).then(a=>n(a.pi_server_ip))},[]);const o=async()=>{i(!0),await fetch(`${Kt}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pi_server_ip:t})}),i(!1),alert(""),e("dashboard")};return H.jsx("div",{className:"flex h-full flex-col bg-[#121212] items-center justify-center",children:H.jsxs("div",{className:"bg-[#1e1e1e] p-8 rounded-2xl border border-white/5 w-full max-w-md shadow-xl",children:[H.jsx("h2",{className:"text-2xl font-medium text-white/90 mb-6",children:""}),H.jsxs("div",{className:"mb-6",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:"PI Server IP Address"}),H.jsx("input",{value:t,onChange:a=>n(a.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-4 py-3 text-white outline-none transition",placeholder:": 10.122.51.60"}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:" Ping  IP "})]}),H.jsxs("div",{className:"flex gap-3",children:[H.jsx("button",{onClick:()=>e("dashboard"),className:"flex-1 bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-3 rounded-full font-medium transition",children:""}),H.jsx("button",{onClick:o,disabled:r,className:"flex-1 bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] py-3 rounded-full font-medium transition",children:r?"...":""})]})]})})},m7=()=>{const[e,t]=Pe.useState("dashboard"),[n,r]=Pe.useState(null),i=(o,a=null)=>{r(a),t(o)};return H.jsxs("div",{className:"h-full",children:[e==="dashboard"&&H.jsx(SM,{onNavigate:i}),e==="editor"&&H.jsx(c7,{processId:n,onNavigate:i}),e==="operator"&&H.jsx(f7,{processId:n,onNavigate:i}),e==="review"&&H.jsx(d7,{processId:n,onNavigate:i}),e==="settings"&&H.jsx(h7,{onNavigate:i})]})};yg.createRoot(document.getElementById("root")).render(H.jsx(c3.StrictMode,{children:H.jsx(m7,{})}));
//# sourceMappingURL=index-B3xYuCol.js.map
