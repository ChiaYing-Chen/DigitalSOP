{"version":3,"file":"index-JyEFbUQ1.js","sources":["../../../frontend/node_modules/react/cjs/react.production.min.js","../../../frontend/node_modules/react/index.js","../../../frontend/node_modules/react/cjs/react-jsx-runtime.production.min.js","../../../frontend/node_modules/react/jsx-runtime.js","../../../frontend/node_modules/scheduler/cjs/scheduler.production.min.js","../../../frontend/node_modules/scheduler/index.js","../../../frontend/node_modules/react-dom/cjs/react-dom.production.min.js","../../../frontend/node_modules/react-dom/index.js","../../../frontend/node_modules/react-dom/client.js","../../../frontend/src/utilities.js","../../../frontend/src/components/Dashboard.jsx","../../../frontend/node_modules/inherits-browser/dist/index.es.js","../../../frontend/node_modules/ids/dist/index.esm.js","../../../frontend/node_modules/min-dash/dist/index.esm.js","../../../frontend/node_modules/min-dom/dist/index.esm.js","../../../frontend/node_modules/tiny-svg/dist/index.esm.js","../../../frontend/node_modules/didi/dist/index.js","../../../frontend/node_modules/diagram-js/lib/draw/BaseRenderer.js","../../../frontend/node_modules/diagram-js/lib/util/RenderUtil.js","../../../frontend/node_modules/diagram-js/lib/util/Elements.js","../../../frontend/node_modules/diagram-js/lib/draw/DefaultRenderer.js","../../../frontend/node_modules/diagram-js/lib/draw/Styles.js","../../../frontend/node_modules/diagram-js/lib/draw/index.js","../../../frontend/node_modules/diagram-js/lib/util/Collections.js","../../../frontend/node_modules/diagram-js/lib/util/Geometry.js","../../../frontend/node_modules/path-intersection/intersect.js","../../../frontend/node_modules/diagram-js/lib/util/ModelUtil.js","../../../frontend/node_modules/diagram-js/lib/layout/LayoutUtil.js","../../../frontend/node_modules/diagram-js/lib/core/Canvas.js","../../../frontend/node_modules/diagram-js/lib/core/ElementRegistry.js","../../../frontend/node_modules/object-refs/dist/index.js","../../../frontend/node_modules/diagram-js/lib/model/index.js","../../../frontend/node_modules/diagram-js/lib/core/ElementFactory.js","../../../frontend/node_modules/diagram-js/lib/core/EventBus.js","../../../frontend/node_modules/diagram-js/lib/util/GraphicsUtil.js","../../../frontend/node_modules/diagram-js/lib/util/SvgTransformUtil.js","../../../frontend/node_modules/diagram-js/lib/core/GraphicsFactory.js","../../../frontend/node_modules/diagram-js/lib/core/index.js","../../../frontend/node_modules/diagram-js/lib/Diagram.js","../../../frontend/node_modules/moddle/dist/index.esm.js","../../../frontend/node_modules/saxen/dist/index.esm.js","../../../frontend/node_modules/moddle-xml/dist/index.esm.js","../../../frontend/node_modules/bpmn-moddle/dist/index.esm.js","../../../frontend/node_modules/bpmn-js/lib/import/Util.js","../../../frontend/node_modules/bpmn-js/lib/util/CompatibilityUtil.js","../../../frontend/node_modules/bpmn-js/lib/import/BpmnTreeWalker.js","../../../frontend/node_modules/bpmn-js/lib/util/ModelUtil.js","../../../frontend/node_modules/bpmn-js/lib/import/Importer.js","../../../frontend/node_modules/bpmn-js/lib/util/PoweredByUtil.js","../../../frontend/node_modules/bpmn-js/lib/BaseViewer.js","../../../frontend/node_modules/bpmn-js/lib/BaseModeler.js","../../../frontend/node_modules/bpmn-js/lib/util/DiUtil.js","../../../frontend/node_modules/bpmn-js/lib/util/LabelUtil.js","../../../frontend/node_modules/bpmn-js/lib/draw/BpmnRenderUtil.js","../../../frontend/node_modules/bpmn-js/lib/draw/BpmnRenderer.js","../../../frontend/node_modules/diagram-js/lib/util/Text.js","../../../frontend/node_modules/bpmn-js/lib/draw/TextRenderer.js","../../../frontend/node_modules/bpmn-js/lib/draw/PathMap.js","../../../frontend/node_modules/bpmn-js/lib/draw/index.js","../../../frontend/node_modules/diagram-js/lib/i18n/translate/translate.js","../../../frontend/node_modules/diagram-js/lib/i18n/translate/index.js","../../../frontend/node_modules/bpmn-js/lib/import/BpmnImporter.js","../../../frontend/node_modules/bpmn-js/lib/import/index.js","../../../frontend/node_modules/bpmn-js/lib/core/index.js","../../../frontend/node_modules/diagram-js/lib/util/IdGenerator.js","../../../frontend/node_modules/diagram-js/lib/features/overlays/Overlays.js","../../../frontend/node_modules/diagram-js/lib/features/overlays/index.js","../../../frontend/node_modules/diagram-js/lib/features/change-support/ChangeSupport.js","../../../frontend/node_modules/diagram-js/lib/features/change-support/index.js","../../../frontend/node_modules/diagram-js/lib/command/CommandInterceptor.js","../../../frontend/node_modules/diagram-js/lib/features/root-elements/RootElementsBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/root-elements/index.js","../../../frontend/node_modules/diagram-js/lib/util/EscapeUtil.js","../../../frontend/node_modules/bpmn-js/lib/util/DrilldownUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/drilldown/DrilldownBreadcrumbs.js","../../../frontend/node_modules/bpmn-js/lib/features/drilldown/DrilldownCentering.js","../../../frontend/node_modules/bpmn-js/lib/features/drilldown/SubprocessCompatibility.js","../../../frontend/node_modules/bpmn-js/lib/features/drilldown/DrilldownOverlayBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/drilldown/index.js","../../../frontend/node_modules/diagram-js/lib/features/outline/Outline.js","../../../frontend/node_modules/diagram-js/lib/features/outline/index.js","../../../frontend/node_modules/bpmn-js/lib/features/outline/OutlineUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/outline/OutlineProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/outline/index.js","../../../frontend/node_modules/diagram-js/lib/util/Event.js","../../../frontend/node_modules/diagram-js/lib/util/Platform.js","../../../frontend/node_modules/diagram-js/lib/util/Mouse.js","../../../frontend/node_modules/diagram-js/lib/features/interaction-events/InteractionEvents.js","../../../frontend/node_modules/diagram-js/lib/features/interaction-events/index.js","../../../frontend/node_modules/diagram-js/lib/features/selection/Selection.js","../../../frontend/node_modules/diagram-js/lib/features/selection/SelectionVisuals.js","../../../frontend/node_modules/diagram-js/lib/features/selection/SelectionBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/selection/index.js","../../../frontend/node_modules/bpmn-js/lib/Viewer.js","../../../frontend/node_modules/diagram-js/lib/features/keyboard/KeyboardUtil.js","../../../frontend/node_modules/diagram-js/lib/features/keyboard/Keyboard.js","../../../frontend/node_modules/diagram-js/lib/features/keyboard/KeyboardBindings.js","../../../frontend/node_modules/diagram-js/lib/features/keyboard/index.js","../../../frontend/node_modules/diagram-js/lib/navigation/keyboard-move/KeyboardMove.js","../../../frontend/node_modules/diagram-js/lib/navigation/keyboard-move/index.js","../../../frontend/node_modules/diagram-js/lib/util/Cursor.js","../../../frontend/node_modules/diagram-js/lib/util/ClickTrap.js","../../../frontend/node_modules/diagram-js/lib/util/PositionUtil.js","../../../frontend/node_modules/diagram-js/lib/navigation/movecanvas/MoveCanvas.js","../../../frontend/node_modules/diagram-js/lib/navigation/movecanvas/index.js","../../../frontend/node_modules/diagram-js/lib/util/Math.js","../../../frontend/node_modules/diagram-js/lib/navigation/zoomscroll/ZoomUtil.js","../../../frontend/node_modules/diagram-js/lib/navigation/zoomscroll/ZoomScroll.js","../../../frontend/node_modules/diagram-js/lib/navigation/zoomscroll/index.js","../../../frontend/node_modules/bpmn-js/lib/NavigatedViewer.js","../../../frontend/node_modules/diagram-js/lib/features/align-elements/AlignElements.js","../../../frontend/node_modules/diagram-js/lib/features/align-elements/index.js","../../../frontend/node_modules/diagram-js/lib/features/scheduler/Scheduler.js","../../../frontend/node_modules/diagram-js/lib/features/scheduler/index.js","../../../frontend/node_modules/diagram-js/lib/features/context-pad/ContextPad.js","../../../frontend/node_modules/diagram-js/lib/features/context-pad/index.js","../../../frontend/node_modules/preact/dist/preact.module.js","../../../frontend/node_modules/htm/dist/htm.module.js","../../../frontend/node_modules/htm/preact/index.module.js","../../../frontend/node_modules/preact/hooks/dist/hooks.module.js","../../../frontend/node_modules/clsx/dist/clsx.mjs","../../../frontend/node_modules/diagram-js/lib/features/popup-menu/PopupMenuHeader.js","../../../frontend/node_modules/diagram-js/lib/features/popup-menu/PopupMenuItem.js","../../../frontend/node_modules/diagram-js/lib/features/popup-menu/PopupMenuList.js","../../../frontend/node_modules/diagram-js/lib/features/popup-menu/PopupMenuComponent.js","../../../frontend/node_modules/diagram-js/lib/features/popup-menu/PopupMenu.js","../../../frontend/node_modules/diagram-js/lib/features/popup-menu/index.js","../../../frontend/node_modules/bpmn-js/lib/features/align-elements/AlignElementsIcons.js","../../../frontend/node_modules/bpmn-js/lib/features/align-elements/AlignElementsContextPadProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/align-elements/AlignElementsMenuProvider.js","../../../frontend/node_modules/diagram-js/lib/features/rules/RuleProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/align-elements/BpmnAlignElements.js","../../../frontend/node_modules/bpmn-js/lib/features/align-elements/index.js","../../../frontend/node_modules/diagram-js/lib/features/auto-place/AutoPlaceUtil.js","../../../frontend/node_modules/diagram-js/lib/features/auto-place/AutoPlace.js","../../../frontend/node_modules/diagram-js/lib/features/auto-place/AutoPlaceSelectionBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/auto-place/index.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/util/ModelingUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/auto-place/BpmnAutoPlaceUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/auto-place/BpmnAutoPlace.js","../../../frontend/node_modules/bpmn-js/lib/features/auto-place/index.js","../../../frontend/node_modules/diagram-js/lib/features/auto-resize/AutoResize.js","../../../frontend/node_modules/bpmn-js/lib/features/auto-resize/BpmnAutoResize.js","../../../frontend/node_modules/diagram-js/lib/features/auto-resize/AutoResizeProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/auto-resize/BpmnAutoResizeProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/auto-resize/index.js","../../../frontend/node_modules/diagram-js/lib/features/hover-fix/HoverFix.js","../../../frontend/node_modules/diagram-js/lib/features/hover-fix/index.js","../../../frontend/node_modules/diagram-js/lib/features/dragging/Dragging.js","../../../frontend/node_modules/diagram-js/lib/features/dragging/index.js","../../../frontend/node_modules/diagram-js/lib/features/auto-scroll/AutoScroll.js","../../../frontend/node_modules/diagram-js/lib/features/auto-scroll/index.js","../../../frontend/node_modules/diagram-js/lib/features/rules/Rules.js","../../../frontend/node_modules/diagram-js/lib/features/rules/index.js","../../../frontend/node_modules/diagram-js/lib/util/LineIntersection.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/GeometricUtil.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/BendpointUtil.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/Bendpoints.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/BendpointMove.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/BendpointMovePreview.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/ConnectionSegmentMove.js","../../../frontend/node_modules/diagram-js/lib/features/snapping/SnapUtil.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/BendpointSnapping.js","../../../frontend/node_modules/diagram-js/lib/features/bendpoints/index.js","../../../frontend/node_modules/diagram-js/lib/features/connect/Connect.js","../../../frontend/node_modules/diagram-js/lib/features/connect/ConnectPreview.js","../../../frontend/node_modules/diagram-js/lib/features/connect/index.js","../../../frontend/node_modules/diagram-js/lib/features/connection-preview/ConnectionPreview.js","../../../frontend/node_modules/diagram-js/lib/features/connection-preview/index.js","../../../frontend/node_modules/diagram-js/lib/features/preview-support/PreviewSupport.js","../../../frontend/node_modules/diagram-js/lib/features/preview-support/index.js","../../../frontend/node_modules/diagram-js/lib/features/complex-preview/ComplexPreview.js","../../../frontend/node_modules/diagram-js/lib/features/complex-preview/index.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/AdaptiveLabelPositioningBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/AppendBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/AssociationBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/AttachEventBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/BoundaryEventBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/CompensateBoundaryEventBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/CreateBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/CreateDataObjectBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/CreateParticipantBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/DataInputAssociationBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/UpdateSemanticParentHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/DataStoreBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/resize/ResizeUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/util/LaneUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/DeleteLaneBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/DetachEventBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/DropOnFlowBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/EventBasedGatewayBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/FixHoverBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/util/CategoryUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/GroupBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/util/LineIntersect.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/ImportDockingFix.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/IsHorizontalFix.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/util/LineAttachmentUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/util/LayoutUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/util/LabelLayoutUtil.js","../../../frontend/node_modules/diagram-js/lib/util/AttachUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/LabelBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/util/ConnectionLayoutUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/LayoutConnectionBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/helper/AnchorsHelper.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/MessageFlowBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/util/NonInterruptingUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/NonInterruptingBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/RemoveEmbeddedLabelBoundsBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/RemoveElementBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/RemoveParticipantBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/ReplaceConnectionBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/ReplaceElementBehaviour.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/ResizeBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/ResizeLaneBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/RootElementReferenceBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/SpaceToolBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/SubProcessPlaneBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/SubProcessStartEventBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/TextAnnotationBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/ToggleCollapseConnectionBehaviour.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/ToggleElementCollapseBehaviour.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/UnclaimIdBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/UnsetDefaultFlowBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/UpdateFlowNodeRefsBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/SetCompensationActivityAfterPasteBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/behavior/index.js","../../../frontend/node_modules/bpmn-js/lib/features/snapping/BpmnSnappingUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/rules/BpmnRules.js","../../../frontend/node_modules/bpmn-js/lib/features/rules/index.js","../../../frontend/node_modules/bpmn-js/lib/features/di-ordering/BpmnDiOrdering.js","../../../frontend/node_modules/bpmn-js/lib/features/di-ordering/index.js","../../../frontend/node_modules/diagram-js/lib/features/ordering/OrderingProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/ordering/BpmnOrderingProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/ordering/index.js","../../../frontend/node_modules/diagram-js/lib/features/clipboard/Clipboard.js","../../../frontend/node_modules/diagram-js/lib/features/clipboard/index.js","../../../frontend/node_modules/diagram-js/lib/features/create/Create.js","../../../frontend/node_modules/diagram-js/lib/features/create/CreatePreview.js","../../../frontend/node_modules/diagram-js/lib/features/create/index.js","../../../frontend/node_modules/diagram-js/lib/features/mouse/Mouse.js","../../../frontend/node_modules/diagram-js/lib/features/mouse/index.js","../../../frontend/node_modules/diagram-js/lib/features/copy-paste/CopyPaste.js","../../../frontend/node_modules/diagram-js/lib/features/copy-paste/index.js","../../../frontend/node_modules/bpmn-js/lib/features/copy-paste/BpmnCopyPaste.js","../../../frontend/node_modules/bpmn-js/lib/features/copy-paste/ModdleCopy.js","../../../frontend/node_modules/bpmn-js/lib/features/copy-paste/index.js","../../../frontend/node_modules/diagram-js/lib/features/replace/Replace.js","../../../frontend/node_modules/diagram-js/lib/features/replace/ReplaceSelectionBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/replace/index.js","../../../frontend/node_modules/bpmn-js/lib/features/replace/BpmnReplace.js","../../../frontend/node_modules/bpmn-js/lib/features/replace/index.js","../../../frontend/node_modules/diagram-js/lib/features/tool-manager/ToolManager.js","../../../frontend/node_modules/diagram-js/lib/features/tool-manager/index.js","../../../frontend/node_modules/diagram-js/lib/features/space-tool/SpaceUtil.js","../../../frontend/node_modules/diagram-js/lib/features/space-tool/SpaceTool.js","../../../frontend/node_modules/diagram-js/lib/features/space-tool/SpaceToolPreview.js","../../../frontend/node_modules/diagram-js/lib/features/space-tool/index.js","../../../frontend/node_modules/bpmn-js/lib/features/space-tool/BpmnSpaceTool.js","../../../frontend/node_modules/bpmn-js/lib/features/space-tool/index.js","../../../frontend/node_modules/diagram-js/lib/command/CommandStack.js","../../../frontend/node_modules/diagram-js/lib/command/index.js","../../../frontend/node_modules/diagram-js/lib/util/Removal.js","../../../frontend/node_modules/diagram-js/lib/features/label-support/LabelSupport.js","../../../frontend/node_modules/diagram-js/lib/features/label-support/index.js","../../../frontend/node_modules/diagram-js/lib/features/attach-support/AttachSupport.js","../../../frontend/node_modules/diagram-js/lib/features/attach-support/index.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/BpmnFactory.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/BpmnUpdater.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/ElementFactory.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/AlignElementsHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/AppendShapeHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/CreateConnectionHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/CreateElementsHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/CreateShapeHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/CreateLabelHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/DeleteConnectionHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/DeleteElementsHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/DeleteShapeHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/DistributeElementsHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/LayoutConnectionHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/MoveConnectionHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/helper/MoveClosure.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/helper/MoveHelper.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/MoveElementsHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/MoveShapeHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/ReconnectConnectionHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/ReplaceShapeHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/ResizeShapeHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/SpaceToolHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/ToggleShapeCollapseHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/UpdateAttachmentHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/cmd/UpdateWaypointsHandler.js","../../../frontend/node_modules/diagram-js/lib/features/modeling/Modeling.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/UpdateModdlePropertiesHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/UpdatePropertiesHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/UpdateCanvasRootHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/AddLaneHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/SplitLaneHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/ResizeLaneHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/UpdateFlowNodeRefsHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/IdClaimHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/cmd/SetColorHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/label-editing/cmd/UpdateLabelHandler.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/Modeling.js","../../../frontend/node_modules/diagram-js/lib/layout/BaseLayouter.js","../../../frontend/node_modules/diagram-js/lib/layout/ManhattanLayout.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/BpmnLayouter.js","../../../frontend/node_modules/diagram-js/lib/layout/CroppingConnectionDocking.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling/index.js","../../../frontend/node_modules/bpmn-js/lib/features/append-preview/AppendPreview.js","../../../frontend/node_modules/bpmn-js/lib/features/append-preview/index.js","../../../frontend/node_modules/diagram-js-direct-editing/lib/TextBox.js","../../../frontend/node_modules/diagram-js-direct-editing/lib/DirectEditing.js","../../../frontend/node_modules/diagram-js-direct-editing/lib/index.js","../../../frontend/node_modules/bpmn-js/lib/features/popup-menu/util/TypeUtil.js","../../../frontend/node_modules/bpmn-js/lib/features/replace/ReplaceOptions.js","../../../frontend/node_modules/bpmn-js/lib/features/popup-menu/util/Icons.js","../../../frontend/node_modules/bpmn-js/lib/features/popup-menu/ReplaceMenuProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/popup-menu/index.js","../../../frontend/node_modules/bpmn-js/lib/features/context-pad/ContextPadProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/context-pad/index.js","../../../frontend/node_modules/diagram-js/lib/features/distribute-elements/DistributeElements.js","../../../frontend/node_modules/diagram-js/lib/features/distribute-elements/index.js","../../../frontend/node_modules/bpmn-js/lib/features/distribute-elements/BpmnDistributeElements.js","../../../frontend/node_modules/bpmn-js/lib/features/distribute-elements/DistributeElementsIcons.js","../../../frontend/node_modules/bpmn-js/lib/features/distribute-elements/DistributeElementsMenuProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/distribute-elements/index.js","../../../frontend/node_modules/diagram-js/lib/features/editor-actions/EditorActions.js","../../../frontend/node_modules/diagram-js/lib/features/editor-actions/index.js","../../../frontend/node_modules/bpmn-js/lib/features/editor-actions/BpmnEditorActions.js","../../../frontend/node_modules/bpmn-js/lib/features/editor-actions/index.js","../../../frontend/node_modules/bpmn-js/lib/features/grid-snapping/BpmnGridSnapping.js","../../../frontend/node_modules/diagram-js/lib/features/grid-snapping/GridUtil.js","../../../frontend/node_modules/diagram-js/lib/features/grid-snapping/GridSnapping.js","../../../frontend/node_modules/diagram-js/lib/features/grid-snapping/behavior/ResizeBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/grid-snapping/behavior/SpaceToolBehavior.js","../../../frontend/node_modules/diagram-js/lib/features/grid-snapping/behavior/index.js","../../../frontend/node_modules/diagram-js/lib/features/grid-snapping/index.js","../../../frontend/node_modules/bpmn-js/lib/features/grid-snapping/behavior/GridSnappingAutoPlaceBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/grid-snapping/behavior/GridSnappingParticipantBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/grid-snapping/behavior/GridSnappingLayoutConnectionBehavior.js","../../../frontend/node_modules/bpmn-js/lib/features/grid-snapping/behavior/index.js","../../../frontend/node_modules/bpmn-js/lib/features/grid-snapping/index.js","../../../frontend/node_modules/bpmn-js/lib/features/interaction-events/BpmnInteractionEvents.js","../../../frontend/node_modules/bpmn-js/lib/features/interaction-events/index.js","../../../frontend/node_modules/bpmn-js/lib/features/keyboard/BpmnKeyboardBindings.js","../../../frontend/node_modules/bpmn-js/lib/features/keyboard/index.js","../../../frontend/node_modules/diagram-js/lib/features/keyboard-move-selection/KeyboardMoveSelection.js","../../../frontend/node_modules/diagram-js/lib/features/keyboard-move-selection/index.js","../../../frontend/node_modules/diagram-js/lib/features/resize/Resize.js","../../../frontend/node_modules/diagram-js/lib/features/resize/ResizePreview.js","../../../frontend/node_modules/diagram-js/lib/features/resize/ResizeHandles.js","../../../frontend/node_modules/diagram-js/lib/features/resize/index.js","../../../frontend/node_modules/bpmn-js/lib/features/label-editing/LabelEditingProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/label-editing/LabelEditingPreview.js","../../../frontend/node_modules/bpmn-js/lib/features/label-editing/index.js","../../../frontend/node_modules/diagram-js/lib/features/tooltips/Tooltips.js","../../../frontend/node_modules/diagram-js/lib/features/tooltips/index.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling-feedback/ModelingFeedback.js","../../../frontend/node_modules/bpmn-js/lib/features/modeling-feedback/index.js","../../../frontend/node_modules/diagram-js/lib/features/move/Move.js","../../../frontend/node_modules/diagram-js/lib/features/move/MovePreview.js","../../../frontend/node_modules/diagram-js/lib/features/move/index.js","../../../frontend/node_modules/diagram-js/lib/features/palette/Palette.js","../../../frontend/node_modules/diagram-js/lib/features/palette/index.js","../../../frontend/node_modules/diagram-js/lib/features/lasso-tool/LassoTool.js","../../../frontend/node_modules/diagram-js/lib/features/lasso-tool/index.js","../../../frontend/node_modules/diagram-js/lib/features/hand-tool/HandTool.js","../../../frontend/node_modules/diagram-js/lib/features/hand-tool/index.js","../../../frontend/node_modules/diagram-js/lib/features/global-connect/GlobalConnect.js","../../../frontend/node_modules/diagram-js/lib/features/global-connect/index.js","../../../frontend/node_modules/bpmn-js/lib/features/palette/PaletteProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/palette/index.js","../../../frontend/node_modules/bpmn-js/lib/features/replace-preview/BpmnReplacePreview.js","../../../frontend/node_modules/bpmn-js/lib/features/replace-preview/index.js","../../../frontend/node_modules/bpmn-js/lib/features/snapping/BpmnConnectSnapping.js","../../../frontend/node_modules/diagram-js/lib/features/snapping/SnapContext.js","../../../frontend/node_modules/diagram-js/lib/features/snapping/CreateMoveSnapping.js","../../../frontend/node_modules/bpmn-js/lib/features/snapping/BpmnCreateMoveSnapping.js","../../../frontend/node_modules/diagram-js/lib/features/snapping/ResizeSnapping.js","../../../frontend/node_modules/diagram-js/lib/features/snapping/Snapping.js","../../../frontend/node_modules/diagram-js/lib/features/snapping/index.js","../../../frontend/node_modules/bpmn-js/lib/features/snapping/index.js","../../../frontend/node_modules/diagram-js/lib/features/search-pad/SearchPad.js","../../../frontend/node_modules/diagram-js/lib/features/search-pad/index.js","../../../frontend/node_modules/bpmn-js/lib/features/search/BpmnSearchProvider.js","../../../frontend/node_modules/bpmn-js/lib/features/search/index.js","../../../frontend/node_modules/bpmn-js/lib/Modeler.js","../../../frontend/src/components/Editor.jsx","../../../frontend/node_modules/bpmn-js/dist/bpmn-viewer.production.min.js","../../../frontend/src/components/TimelineViewer.jsx","../../../frontend/src/components/FloatingTaskWindow.jsx","../../../frontend/src/components/Operator.jsx","../../../frontend/src/components/Review.jsx","../../../frontend/src/components/Settings.jsx","../../../frontend/src/App.jsx","../../../frontend/src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error(\"act(...) is not supported in production builds of React.\");}\nexports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;exports.act=X;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=X;exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};\nexports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};\nexports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};exports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.3.1\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;\nfunction Lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction Mg(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function Ng(a){var b=a._init;return b(a._payload)}\nfunction Og(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Pg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Qg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&Ng(f)===b.type))return d=e(b,c.props),d.ref=Lg(a,b,c),d.return=a,d;d=Rg(c.type,c.key,c.props,null,a.mode,d);d.ref=Lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=Sg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Tg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=Qg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=Rg(b.type,b.key,b.props,null,a.mode,c),\nc.ref=Lg(a,null,b),c.return=a,c;case wa:return b=Sg(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Tg(b,a.mode,c,null),b.return=a,b;Mg(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);Mg(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);Mg(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&Ng(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=Lg(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Tg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Rg(f.type,f.key,f.props,null,a.mode,h),h.ref=Lg(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Sg(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);Mg(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=Qg(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var b=Wg.current;E(Wg);a._currentValue=b}function bh(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction ch(a,b){Xg=a;Zg=Yg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(dh=!0),a.firstContext=null)}function eh(a){var b=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:b,next:null},null===Yg){if(null===Xg)throw Error(p(308));Yg=a;Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return b}var fh=null;function gh(a){null===fh?fh=[a]:fh.push(a)}\nfunction hh(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,gh(b)):(c.next=e.next,e.next=c);b.interleaved=c;return ih(a,d)}function ih(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction lh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction nh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return ih(a,c)}e=d.interleaved;null===e?(b.next=b,gh(d)):(b.next=e.next,e.next=b);d.interleaved=b;return ih(a,c)}function oh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction ph(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction qh(a,b,c,d){var e=a.updateQueue;jh=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:jh=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);rh|=g;a.lanes=g;a.memoizedState=q}}\nfunction sh(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}\nfunction yh(a,b){G(wh,b);G(vh,a);G(uh,th);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(uh);G(uh,b)}function zh(){E(uh);E(vh);E(wh)}function Ah(a){xh(wh.current);var b=xh(uh.current);var c=lb(b,a.type);b!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);\nfunction Ch(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Dh=[];\nfunction Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321));}function Mh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Nh(a,b,c,d,e,f){Hh=f;M=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Fh.current=null===a||null===a.memoizedState?Oh:Ph;a=c(d,e);if(Jh){f=0;do{Jh=!1;Kh=0;if(25<=f)throw Error(p(301));f+=1;O=N=null;b.updateQueue=null;Fh.current=Qh;a=c(d,e)}while(Jh)}Fh.current=Rh;b=null!==N&&null!==N.next;Hh=0;O=N=M=null;Ih=!1;if(b)throw Error(p(300));return a}function Sh(){var a=0!==Kh;Kh=0;return a}\nfunction Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===O?M.memoizedState=O=a:O=O.next=a;return O}function Uh(){if(null===N){var a=M.alternate;a=null!==a?a.memoizedState:null}else a=N.next;var b=null===O?M.memoizedState:O.next;if(null!==b)O=b,N=a;else{if(null===a)throw Error(p(310));N=a;a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null};null===O?M.memoizedState=O=a:O=O.next=a}return O}\nfunction Vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Wh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=N,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Hh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;M.lanes|=m;rh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(dh=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,M.lanes|=f,rh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Xh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(dh=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Yh(){}\nfunction Zh(a,b){var c=M,d=Uh(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,dh=!0);d=d.queue;$h(ai.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==O&&O.memoizedState.tag&1){c.flags|=2048;bi(9,ci.bind(null,c,d,e,b),void 0,null);if(null===Q)throw Error(p(349));0!==(Hh&30)||di(c,b,e)}return e}function di(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction ci(a,b,c,d){b.value=c;b.getSnapshot=d;ei(b)&&fi(a)}function ai(a,b,c){return c(function(){ei(b)&&fi(a)})}function ei(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function fi(a){var b=ih(a,1);null!==b&&gi(b,a,1,-1)}\nfunction hi(a){var b=Th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a};b.queue=a;a=a.dispatch=ii.bind(null,M,a);return[b.memoizedState,a]}\nfunction bi(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ji(){return Uh().memoizedState}function ki(a,b,c,d){var e=Th();M.flags|=a;e.memoizedState=bi(1|b,c,void 0,void 0===d?null:d)}\nfunction li(a,b,c,d){var e=Uh();d=void 0===d?null:d;var f=void 0;if(null!==N){var g=N.memoizedState;f=g.destroy;if(null!==d&&Mh(d,g.deps)){e.memoizedState=bi(b,c,f,d);return}}M.flags|=a;e.memoizedState=bi(1|b,c,f,d)}function mi(a,b){return ki(8390656,8,a,b)}function $h(a,b){return li(2048,8,a,b)}function ni(a,b){return li(4,2,a,b)}function oi(a,b){return li(4,4,a,b)}\nfunction pi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function qi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return li(4,4,pi.bind(null,b,a),c)}function ri(){}function si(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction ti(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function ui(a,b,c){if(0===(Hh&21))return a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c;He(c,b)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0);return b}function vi(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),b()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}\nfunction xi(a,b,c){var d=yi(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,c);else if(c=hh(a,b,c,d),null!==c){var e=R();gi(c,a,d,e);Bi(c,b,d)}}\nfunction ii(a,b,c){var d=yi(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,gh(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=hh(a,b,e,d);null!==c&&(e=R(),gi(c,a,d,e),Bi(c,b,d))}}\nfunction zi(a){var b=a.alternate;return a===M||null!==b&&b===M}function Ai(a,b){Jh=Ih=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Bi(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,b){Th().memoizedState=[a,void 0===b?null:b];return a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ki(4194308,\n4,pi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ki(4194308,4,a,b)},useInsertionEffect:function(a,b){return ki(4,2,a,b)},useMemo:function(a,b){var c=Th();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=xi.bind(null,M,a);return[d.memoizedState,a]},useRef:function(a){var b=\nTh();a={current:a};return b.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),b=a[0];a=vi.bind(null,a[1]);Th().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=M,e=Th();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===Q)throw Error(p(349));0!==(Hh&30)||di(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;mi(ai.bind(null,d,\nf,a),[a]);d.flags|=2048;bi(9,ci.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Th(),b=Q.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Kh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Lh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},\nuseDebugValue:ri,useDeferredValue:function(a){var b=Uh();return ui(b,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var b=Uh();return null===\nN?b.memoizedState=a:ui(b,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Di(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=R(),d=\nyi(a),e=mh(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=nh(a,e,d);null!==b&&(gi(b,a,d,c),oh(b,a,d))}};function Fi(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction Gi(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=eh(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Ei;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Hi(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Ei.enqueueReplaceState(b,b.state,null)}\nfunction Ii(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};kh(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=eh(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Di(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Ei.enqueueReplaceState(e,e.state,null),qh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ji(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}\nfunction Ki(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function Li(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Mi=\"function\"===typeof WeakMap?WeakMap:Map;function Ni(a,b,c){c=mh(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Oi||(Oi=!0,Pi=d);Li(a,b)};return c}\nfunction Qi(a,b,c){c=mh(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Li(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Li(a,b);\"function\"!==typeof d&&(null===Ri?Ri=new Set([this]):Ri.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Si(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Mi;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ti.bind(null,a,b,c),b.then(a,a))}function Ui(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Vi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=mh(-1,1),b.tag=2,nh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,b,c,d){b.child=null===a?Vg(b,null,c,d):Ug(b,a.child,c,d)}\nfunction Yi(a,b,c,d,e){c=c.render;var f=b.ref;ch(b,e);d=Nh(a,b,c,d,f,e);c=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&c&&vg(b);b.flags|=1;Xi(a,b,d,e);return b.child}\nfunction $i(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!aj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bj(a,b,f,d,e);a=Rg(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return Zi(a,b,e)}b.flags|=1;a=Pg(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(dh=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(dh=!0);else return b.lanes=a.lanes,Zi(a,b,e)}return cj(a,b,c,d,e)}\nfunction dj(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(ej,fj),fj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(ej,fj);fj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(ej,fj),fj|=d;Xi(a,b,e,c);return b.child}function gj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);ch(b,e);c=Nh(a,b,c,d,f,e);d=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&d&&vg(b);b.flags|=1;Xi(a,b,c,e);return b.child}\nfunction hj(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;ch(b,e);if(null===b.stateNode)ij(a,b),Gi(b,c,d),Ii(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=eh(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&Hi(b,g,d,l);jh=!1;var r=b.memoizedState;g.state=r;qh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||jh?(\"function\"===typeof m&&(Di(b,c,m,d),k=b.memoizedState),(h=jh||Fi(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;lh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Ci(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=eh(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&Hi(b,g,d,k);jh=!1;r=b.memoizedState;g.state=r;qh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||jh?(\"function\"===typeof y&&(Di(b,c,y,d),n=b.memoizedState),(l=jh||Fi(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return jj(a,b,c,d,f,e)}\nfunction jj(a,b,c,d,e,f){gj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),Zi(a,b,f);d=b.stateNode;Wi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Ug(b,a.child,null,f),b.child=Ug(b,null,h,f)):Xi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function kj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);yh(a,b.containerInfo)}\nfunction lj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Xi(a,b,c,d);return b.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction oj(a,b,c){var d=b.pendingProps,e=L.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(L,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=pj(g,d,0,null),a=Tg(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=nj(c),b.memoizedState=mj,a):qj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return rj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=Pg(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=Pg(h,f):(f=Tg(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?nj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=mj;return d}f=a.child;a=f.sibling;d=Pg(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction qj(a,b){b=pj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sj(a,b,c,d){null!==d&&Jg(d);Ug(b,a.child,null,c);a=qj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction rj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Ki(Error(p(422))),sj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=pj({mode:\"visible\",children:d.children},e,0,null);f=Tg(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Ug(b,a.child,null,g);b.child.memoizedState=nj(g);b.memoizedState=mj;return f}if(0===(b.mode&1))return sj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Ki(f,d,void 0);return sj(a,b,g,d)}h=0!==(g&a.childLanes);if(dh||h){d=Q;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,ih(a,e),gi(d,a,e,-1))}tj();d=Ki(Error(p(421)));return sj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=uj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=qj(b,d.children);b.flags|=4096;return b}function vj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);bh(a.return,b,c)}\nfunction wj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction xj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Xi(a,b,d.children,c);d=L.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&vj(a,c,b);else if(19===a.tag)vj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(L,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Ch(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);wj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Ch(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}wj(b,!0,c,null,f);break;case \"together\":wj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction ij(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Zi(a,b,c){null!==a&&(b.dependencies=a.dependencies);rh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=Pg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction yj(a,b,c){switch(b.tag){case 3:kj(b);Ig();break;case 5:Ah(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:yh(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Wg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(L,L.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return oj(a,b,c);G(L,L.current&1);a=Zi(a,b,c);return null!==a?a.sibling:null}G(L,L.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return xj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(L,L.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dj(a,b,c)}return Zi(a,b,c)}var zj,Aj,Bj,Cj;\nzj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Aj=function(){};\nBj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;xh(uh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Cj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Dj(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Ej(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;zh();E(Wf);E(H);Eh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Fj(zg),zg=null));Aj(a,b);S(b);return null;case 5:Bh(b);var e=xh(wh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Bj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;zj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Cj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=xh(wh.current);xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(L);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Fj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(L.current&1)?0===T&&(T=3):tj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return zh(),\nAj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return ah(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(L);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dj(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Ch(a);if(null!==g){b.flags|=128;Dj(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(L,L.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Gj&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304)}else{if(!d)if(a=Ch(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dj(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Gj&&1073741824!==c&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=L.current,G(L,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Hj(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(fj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Ij(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return zh(),E(Wf),E(H),Eh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Bh(b),null;case 13:E(L);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(b.type._context),null;case 22:case 23:return Hj(),\nnull;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Lj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Mj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Nj=!1;\nfunction Oj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Ci(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Nj;Nj=!1;return n}\nfunction Pj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Mj(b,c,f)}e=e.next}while(e!==d)}}function Qj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Rj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Sj(a){var b=a.alternate;null!==b&&(a.alternate=null,Sj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Tj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Uj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Tj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Vj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Vj(a,b,c),a=a.sibling;null!==a;)Vj(a,b,c),a=a.sibling}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}var X=null,Xj=!1;function Yj(a,b,c){for(c=c.child;null!==c;)Zj(a,b,c),c=c.sibling}\nfunction Zj(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Lj(c,b);case 6:var d=X,e=Xj;X=null;Yj(a,b,c);X=d;Xj=e;null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Xj;X=c.stateNode.containerInfo;Xj=!0;\nYj(a,b,c);X=d;Xj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Mj(c,b,g):0!==(f&4)&&Mj(c,b,g));e=e.next}while(e!==d)}Yj(a,b,c);break;case 1:if(!U&&(Lj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Yj(a,b,c);break;case 21:Yj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Yj(a,b,c),U=d):Yj(a,b,c);break;default:Yj(a,b,c)}}function ak(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Kj);b.forEach(function(b){var d=bk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction ck(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Xj=!1;break a;case 3:X=h.stateNode.containerInfo;Xj=!0;break a;case 4:X=h.stateNode.containerInfo;Xj=!0;break a}h=h.return}if(null===X)throw Error(p(160));Zj(f,g,e);X=null;Xj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)dk(b,a),b=b.sibling}\nfunction dk(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ck(b,a);ek(a);if(d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(t){W(a,a.return,t)}try{Pj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);break;case 5:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:ck(b,a);ek(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:ck(b,a);ek(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:ck(b,a);ek(a);break;case 13:ck(b,a);ek(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(fk=B()));d&4&&ak(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,ck(b,a),U=l):ck(b,a);ek(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Pj(4,r,r.return);break;case 1:Lj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Lj(r,r.return);break;case 22:if(null!==r.memoizedState){gk(q);continue}}null!==y?(y.return=r,V=y):gk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:ck(b,a);ek(a);d&4&&ak(a);break;case 21:break;default:ck(b,\na),ek(a)}}function ek(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Tj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Uj(a);Wj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Uj(a);Vj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function hk(a,b,c){V=a;ik(a,b,c)}\nfunction ik(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Jj;var l=U;Jj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?jk(e):null!==k?(k.return=g,V=k):jk(e);for(;null!==f;)V=f,ik(f,b,c),f=f.sibling;V=e;Jj=h;U=l}kk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):kk(a,b,c)}}\nfunction kk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Qj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Ci(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&sh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}sh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Rj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function gk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction jk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Qj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Rj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Rj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=Infinity,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return 0!==(K&6)?B():-1!==Ak?Ak:Ak=B()}\nfunction yi(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Bk&&(Bk=yc()),Bk;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function gi(a,b,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==Q)a===Q&&(0===(K&2)&&(qk|=c),4===T&&Ck(a,Z)),Dk(a,d),1===c&&0===K&&0===(b.mode&1)&&(Gj=B()+500,fg&&jg())}\nfunction Dk(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===Q?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Gk(a,b){Ak=-1;Bk=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Ik(a,d);else{b=d;var e=K;K|=2;var f=Jk();if(Q!==a||Z!==b)uk=null,Gj=B()+500,Kk(a,b);do try{Lk();break}catch(h){Mk(a,h)}while(1);$g();mk.current=f;K=e;null!==Y?b=0:(Q=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Nk(a,e)));if(1===b)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(6===b)Ck(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Ok(e)&&(b=Ik(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Nk(a,f))),1===b))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:Ck(a,d);if((d&130023424)===d&&(b=fk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){R();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),b);break}Pk(a,tk,uk);break;case 4:Ck(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329));}}}Dk(a,B());return a.callbackNode===c?Gk.bind(null,a):null}\nfunction Nk(a,b){var c=sk;a.current.memoizedState.isDehydrated&&(Kk(a,b).flags|=256);a=Ik(a,b);2!==a&&(b=tk,tk=c,null!==b&&Fj(b));return a}function Fj(a){null===tk?tk=a:tk.push.apply(tk,a)}\nfunction Ok(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Ck(a,b){b&=~rk;b&=~qk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Ek(a){if(0!==(K&6))throw Error(p(327));Hk();var b=uc(a,0);if(0===(b&1))return Dk(a,B()),null;var c=Ik(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Nk(a,d))}if(1===c)throw c=pk,Kk(a,0),Ck(a,b),Dk(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Pk(a,tk,uk);Dk(a,B());return null}\nfunction Qk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Gj=B()+500,fg&&jg())}}function Rk(a){null!==wk&&0===wk.tag&&0===(K&6)&&Hk();var b=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=b,0===(K&6)&&jg()}}function Hj(){fj=ej.current;E(ej)}\nfunction Kk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:zh();E(Wf);E(H);Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}Q=a;Y=a=Pg(a.current,null);Z=fj=b;T=0;pk=null;rk=qk=rh=0;tk=sk=null;if(null!==fh){for(b=\n0;b<fh.length;b++)if(c=fh[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}fh=null}return a}\nfunction Mk(a,b){do{var c=Y;try{$g();Fh.current=Rh;if(Ih){for(var d=M.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ih=!1}Hh=0;O=N=M=null;Jh=!1;Kh=0;nk.current=null;if(null===c||null===c.return){T=1;pk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Ui(g);if(null!==y){y.flags&=-257;Vi(y,g,h,f,b);y.mode&1&&Si(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Si(f,l,b);tj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Ui(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Vi(J,g,h,f,b);Jg(Ji(k,h));break a}}f=k=Ji(k,h);4!==T&&(T=2);null===sk?sk=[f]:sk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Ni(f,k,b);ph(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ri||!Ri.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Qi(f,h,b);ph(f,F);break a}}f=f.return}while(null!==f)}Sk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Jk(){var a=mk.current;mk.current=Rh;return null===a?Rh:a}\nfunction tj(){if(0===T||3===T||2===T)T=4;null===Q||0===(rh&268435455)&&0===(qk&268435455)||Ck(Q,Z)}function Ik(a,b){var c=K;K|=2;var d=Jk();if(Q!==a||Z!==b)uk=null,Kk(a,b);do try{Tk();break}catch(e){Mk(a,e)}while(1);$g();K=c;mk.current=d;if(null!==Y)throw Error(p(261));Q=null;Z=0;return T}function Tk(){for(;null!==Y;)Uk(Y)}function Lk(){for(;null!==Y&&!cc();)Uk(Y)}function Uk(a){var b=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps;null===b?Sk(a):Y=b;nk.current=null}\nfunction Sk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Ej(c,b,fj),null!==c){Y=c;return}}else{c=Ij(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Pk(a,b,c){var d=C,e=ok.transition;try{ok.transition=null,C=1,Wk(a,b,c,d)}finally{ok.transition=e,C=d}return null}\nfunction Wk(a,b,c,d){do Hk();while(null!==wk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===Q&&(Y=Q=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){Hk();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ok.transition;ok.transition=null;\nvar g=C;C=1;var h=K;K|=4;nk.current=null;Oj(a,c);dk(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;hk(c,a,e);dc();K=h;C=g;ok.transition=f}else a.current=c;vk&&(vk=!1,wk=a,xk=e);f=a.pendingLanes;0===f&&(Ri=null);mc(c.stateNode,d);Dk(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;0!==(xk&1)&&0!==a.tag&&Hk();f=a.pendingLanes;0!==(f&1)?a===zk?yk++:(yk=0,zk=a):yk=0;jg();return null}\nfunction Hk(){if(null!==wk){var a=Dc(xk),b=ok.transition,c=C;try{ok.transition=null;C=16>a?16:a;if(null===wk)var d=!1;else{a=wk;wk=null;xk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Pj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Sj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Pj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,ok.transition=b}}return!1}function Xk(a,b,c){b=Ji(c,b);b=Ni(a,b,1);a=nh(a,b,1);b=R();null!==a&&(Ac(a,1,b),Dk(a,b))}\nfunction W(a,b,c){if(3===a.tag)Xk(a,a,c);else for(;null!==b;){if(3===b.tag){Xk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ri||!Ri.has(d))){a=Ji(c,a);a=Qi(b,a,1);b=nh(b,a,1);a=R();null!==b&&(Ac(b,1,a),Dk(b,a));break}}b=b.return}}\nfunction Ti(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=R();a.pingedLanes|=a.suspendedLanes&c;Q===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c);Dk(a,b)}function Yk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=R();a=ih(a,b);null!==a&&(Ac(a,b,c),Dk(a,c))}function uj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Yk(a,c)}\nfunction bk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Yk(a,c)}var Vk;\nVk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)dh=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return dh=!1,yj(a,b,c);dh=0!==(a.flags&131072)?!0:!1}else dh=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;ij(a,b);a=b.pendingProps;var e=Yf(b,H.current);ch(b,c);e=Nh(null,b,d,a,e,c);var f=Sh();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,kh(b),e.updater=Ei,b.stateNode=e,e._reactInternals=b,Ii(b,d,a,c),b=jj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Xi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{ij(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Zk(d);a=Ci(d,a);switch(e){case 0:b=cj(null,b,d,a,c);break a;case 1:b=hj(null,b,d,a,c);break a;case 11:b=Yi(null,b,d,a,c);break a;case 14:b=$i(null,b,d,Ci(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),cj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),hj(a,b,d,e,c);case 3:a:{kj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;lh(a,b);qh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ji(Error(p(423)),b);b=lj(a,b,d,c,e);break a}else if(d!==e){e=Ji(Error(p(424)),b);b=lj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Vg(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=Zi(a,b,c);break a}Xi(a,b,d,c)}b=b.child}return b;case 5:return Ah(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\ngj(a,b),Xi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return oj(a,b,c);case 4:return yh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Ug(b,null,d,c):Xi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),Yi(a,b,d,e,c);case 7:return Xi(a,b,b.pendingProps,c),b.child;case 8:return Xi(a,b,b.pendingProps.children,c),b.child;case 12:return Xi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Wg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=Zi(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=mh(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);bh(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);bh(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Xi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,ch(b,c),e=eh(e),d=d(e),b.flags|=1,Xi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Ci(d,b.pendingProps),e=Ci(d.type,e),$i(a,b,d,e,c);case 15:return bj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),ij(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,ch(b,c),Gi(b,d,e),Ii(b,d,e,c),jj(null,b,d,!0,a,c);case 19:return xj(a,b,c);case 22:return dj(a,b,c)}throw Error(p(156,b.tag));};function Fk(a,b){return ac(a,b)}\nfunction $k(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new $k(a,b,c,d)}function aj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Zk(a){if(\"function\"===typeof a)return aj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction Pg(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Rg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)aj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Tg(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return pj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Tg(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function pj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function Qg(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction Sg(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction al(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function bl(a,b,c,d,e,f,g,h,k){a=new al(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh(f);return a}function cl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction dl(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction el(a,b,c,d,e,f,g,h,k){a=bl(c,d,!0,a,e,f,g,h,k);a.context=dl(null);c=a.current;d=R();e=yi(c);f=mh(d,e);f.callback=void 0!==b&&null!==b?b:null;nh(c,f,e);a.current.lanes=e;Ac(a,e,d);Dk(a,d);return a}function fl(a,b,c,d){var e=b.current,f=R(),g=yi(e);c=dl(c);null===b.context?b.context=c:b.pendingContext=c;b=mh(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=nh(e,b,g);null!==a&&(gi(a,e,g,f),oh(a,e,g));return g}\nfunction gl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function il(a,b){hl(a,b);(a=a.alternate)&&hl(a,b)}function jl(){return null}var kl=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}\nml.prototype.render=ll.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));fl(a,b,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Rk(function(){fl(null,a,null,null)});b[uf]=null}};function ml(a){this._internalRoot=a}\nml.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function nl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function pl(){}\nfunction ql(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=gl(g);f.call(a)}}var g=el(b,d,a,0,null,!1,!1,\"\",pl);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Rk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=gl(k);h.call(a)}}var k=bl(a,0,!1,null,null,!1,!1,\"\",pl);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Rk(function(){fl(b,k,c,d)});return k}\nfunction rl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=gl(g);h.call(a)}}fl(b,g,a,e)}else g=ql(c,b,a,e,d);return gl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Dk(b,B()),0===(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(a,1);if(null!==b){var c=R();gi(b,a,1,c)}}),il(a,1)}};\nFc=function(a){if(13===a.tag){var b=ih(a,134217728);if(null!==b){var c=R();gi(b,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(13===a.tag){var b=yi(a),c=ih(a,b);if(null!==c){var d=R();gi(c,a,b,d)}il(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Qk;Hb=Rk;\nvar sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"};\nvar ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||\njl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(b))throw Error(p(200));return cl(a,b,null,c)};exports.createRoot=function(a,b){if(!nl(a))throw Error(p(299));var c=!1,d=\"\",e=kl;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=bl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ll(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Rk(a)};exports.hydrate=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!nl(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=kl;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=el(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new ml(b)};exports.render=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Qk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!ol(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return rl(a,b,c,!1,d)};exports.version=\"18.3.1-next-f1338f8080-20240426\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","export const API_BASE = \"api\";\r\n\r\nexport const makePaletteDraggable = (container) => {\r\n    const checkExist = setInterval(() => {\r\n        const palette = container.querySelector('.djs-palette');\r\n        if (palette) {\r\n            clearInterval(checkExist);\r\n            if (!palette.querySelector('.palette-handle')) {\r\n                const handle = document.createElement('div');\r\n                handle.className = 'palette-handle';\r\n                palette.prepend(handle);\r\n                let isDragging = false;\r\n                let startX, startY, initialLeft, initialTop;\r\n                handle.addEventListener('mousedown', (e) => {\r\n                    isDragging = true;\r\n                    startX = e.clientX;\r\n                    startY = e.clientY;\r\n                    const rect = palette.getBoundingClientRect();\r\n                    initialLeft = rect.left;\r\n                    initialTop = rect.top;\r\n                    e.preventDefault();\r\n                });\r\n                const onMouseMove = (e) => {\r\n                    if (!isDragging) return;\r\n                    const dx = e.clientX - startX;\r\n                    const dy = e.clientY - startY;\r\n                    palette.style.left = `${initialLeft + dx}px`;\r\n                    palette.style.top = `${initialTop + dy}px`;\r\n                    palette.style.right = 'auto';\r\n                    palette.style.bottom = 'auto';\r\n                };\r\n                const onMouseUp = () => { isDragging = false; };\r\n                document.addEventListener('mousemove', onMouseMove);\r\n                document.addEventListener('mouseup', onMouseUp);\r\n            }\r\n        }\r\n    }, 500);\r\n};\r\n\r\nexport const getCurrentTime = () => {\r\n    const now = new Date();\r\n    const yyyy = now.getFullYear();\r\n    const mm = String(now.getMonth() + 1).padStart(2, '0');\r\n    const dd = String(now.getDate()).padStart(2, '0');\r\n    const HH = String(now.getHours()).padStart(2, '0');\r\n    const MM = String(now.getMinutes()).padStart(2, '0');\r\n    const SS = String(now.getSeconds()).padStart(2, '0');\r\n    return `${yyyy}/${mm}/${dd} ${HH}:${MM}:${SS}`;\r\n};\r\n\r\nexport const formatTimelineTime = (fullTime) => {\r\n    if (!fullTime) return '';\r\n    const parts = fullTime.split(' ');\r\n    if (parts.length === 2) {\r\n        const dateParts = parts[0].split('/');\r\n        if (dateParts.length === 3) {\r\n            return `${dateParts[1]}/${dateParts[2]} ${parts[1]}`;\r\n        }\r\n    }\r\n    return fullTime;\r\n};\r\n\r\nexport const getLightHex = (hex, factor = 0.2) => {\r\n    const r = parseInt(hex.slice(1, 3), 16);\r\n    const g = parseInt(hex.slice(3, 5), 16);\r\n    const b = parseInt(hex.slice(5, 7), 16);\r\n\r\n    const newR = Math.round(r + (255 - r) * (1 - factor));\r\n    const newG = Math.round(g + (255 - g) * (1 - factor));\r\n    const newB = Math.round(b + (255 - b) * (1 - factor));\r\n\r\n    const toHex = (n) => {\r\n        const h = n.toString(16);\r\n        return h.length === 1 ? '0' + h : h;\r\n    };\r\n\r\n    return `#${toHex(newR)}${toHex(newG)}${toHex(newB)}`;\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { API_BASE } from '../utilities';\r\n\r\nconst Dashboard = ({ onNavigate }) => {\r\n    const [processes, setProcesses] = useState([]);\r\n    const [piStatus, setPiStatus] = useState('Checking...');\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [editName, setEditName] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetch(`${API_BASE}/processes`)\r\n            .then(res => res.json())\r\n            .then(data => setProcesses(data));\r\n\r\n        checkStatus();\r\n    }, []);\r\n\r\n    const checkStatus = () => {\r\n        fetch(`${API_BASE}/pi_status`)\r\n            .then(res => res.json())\r\n            .then(data => setPiStatus(data.status));\r\n    };\r\n\r\n    const startEditing = (p) => {\r\n        setEditingId(p.id);\r\n        setEditName(p.name);\r\n    };\r\n\r\n    const saveName = async (id) => {\r\n        if (!editName.trim()) return;\r\n        await fetch(`${API_BASE}/processes`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ id, name: editName })\r\n        });\r\n        setEditingId(null);\r\n        // Refresh\r\n        const res = await fetch(`${API_BASE}/processes`);\r\n        setProcesses(await res.json());\r\n    };\r\n\r\n    const handleDelete = (id) => {\r\n        if (confirm('')) {\r\n            fetch(`${API_BASE}/processes/${id}`, { method: 'DELETE' })\r\n                .then(() => setProcesses(processes.filter(p => p.id !== id)));\r\n        }\r\n    };\r\n\r\n    const handleExport = (p) => {\r\n        const blob = new Blob([p.xml_content], { type: 'text/xml' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `${p.name || 'process'}.bpmn`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n    };\r\n\r\n    const handleImport = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        const reader = new FileReader();\r\n        reader.onload = async (e) => {\r\n            const text = e.target.result;\r\n            if (!text.includes('bpmndi:BPMNDiagram')) {\r\n                alert(' BPMN  (BPMNDiagram)');\r\n                return;\r\n            }\r\n            const name = file.name.replace('.bpmn', '').replace('.xml', '');\r\n            await fetch(`${API_BASE}/processes`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ name, xml_content: text })\r\n            });\r\n            // Refresh\r\n            const res = await fetch(`${API_BASE}/processes`);\r\n            setProcesses(await res.json());\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-7xl mx-auto h-full overflow-y-auto\">\r\n            <div className=\"flex justify-between items-center mb-10 sticky top-0 bg-[#121212] z-10 py-4 border-b border-white/5\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-300 font-bold text-xl\">S</div>\r\n                    <h1 className=\"text-2xl font-medium tracking-wide text-white/90\"></h1>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button onClick={() => onNavigate('editor')} className=\"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-medium shadow-sm transition flex items-center gap-2\">\r\n                        <span className=\"text-xl leading-none\">+</span>\r\n                        <span></span>\r\n                    </button>\r\n                    <label className=\"cursor-pointer bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-5 py-2 rounded-full text-sm transition flex items-center gap-2\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\" />\r\n                        </svg>\r\n                        <span> BPMN </span>\r\n                        <input type=\"file\" accept=\".bpmn,.xml\" className=\"hidden\" onChange={handleImport} />\r\n                    </label>\r\n                    <button onClick={() => onNavigate('settings')} className=\"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition\" title=\"\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z\" />\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                {processes.map(p => {\r\n                    const isRunning = p.session_status === 0;\r\n                    return (\r\n                        <div key={p.id} className={`bg-[#1e1e1e] p-6 rounded-2xl border transition-all duration-200 flex flex-col group ${isRunning ? 'border-[#81c995]/50 shadow-[0_4px_20px_rgba(129,201,149,0.1)]' : 'border-white/5 hover:border-white/20 hover:shadow-lg'}`}>\r\n                            <div className=\"flex-1 mb-6\">\r\n                                <div className=\"flex justify-between items-start mb-3 h-8\">\r\n                                    {editingId === p.id ? (\r\n                                        <div className=\"flex items-center gap-1 w-full\">\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={editName}\r\n                                                onChange={e => setEditName(e.target.value)}\r\n                                                className=\"bg-[#2d2d2d] text-white px-2 py-1 rounded border border-white/10 focus:border-[#8ab4f8] outline-none text-sm w-full\"\r\n                                                autoFocus\r\n                                                onKeyDown={e => { if (e.key === 'Enter') saveName(p.id); else if (e.key === 'Escape') setEditingId(null); }}\r\n                                            />\r\n                                            <button onClick={() => saveName(p.id)} className=\"text-[#81c995] hover:text-green-400 px-1\"></button>\r\n                                            <button onClick={() => setEditingId(null)} className=\"text-[#f28b82] hover:text-red-400 px-1\"></button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"flex items-center gap-2 group/title w-full\">\r\n                                            <h3 className=\"text-lg font-medium text-white/90 group-hover:text-[#8ab4f8] transition-colors truncate\" title={p.name}>{p.name}</h3>\r\n                                            <button\r\n                                                onClick={(e) => { e.stopPropagation(); startEditing(p); }}\r\n                                                className=\"opacity-0 group-hover/title:opacity-100 text-white/40 hover:text-[#8ab4f8] transition\"\r\n                                                title=\"\"\r\n                                            >\r\n                                                \r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                    {isRunning && <span className=\"bg-[#81c995]/20 text-[#81c995] text-xs px-3 py-1 rounded-full font-medium ml-2 whitespace-nowrap\"></span>}\r\n                                </div>\r\n                                <p className=\"text-white/40 text-xs\">: {p.updated_at}</p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-3 mb-3\">\r\n                                <button onClick={() => onNavigate('operator', p.id)} className={`col-span-2 py-2.5 rounded-full text-sm font-medium transition ${isRunning ? 'bg-[#81c995] text-[#0f5132] hover:bg-[#a8dab5]' : 'bg-[#8ab4f8] text-[#002d6f] hover:bg-[#aecbfa]'}`}>\r\n                                    {isRunning ? '' : ''}\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => !isRunning && onNavigate('editor', p.id)}\r\n                                    disabled={isRunning}\r\n                                    className={`py-2 rounded-full text-sm transition ${isRunning ? 'bg-[#2d2d2d] text-white/20 cursor-not-allowed' : 'bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80'}`}\r\n                                >\r\n                                    \r\n                                </button>\r\n                                <button onClick={() => onNavigate('review', p.id)} className=\"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-2 rounded-full text-sm transition\"></button>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-2 pt-3 border-t border-white/5\">\r\n                                <button onClick={() => handleExport(p)} className=\"flex-1 text-xs text-white/40 hover:text-[#8ab4f8] py-1 transition\"> BPMN</button>\r\n                                <button onClick={() => handleDelete(p.id)} className=\"flex-1 text-xs text-white/40 hover:text-[#f28b82] py-1 transition\"></button>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n                {processes.length === 0 && (\r\n                    <div className=\"col-span-full flex flex-col items-center justify-center py-20 text-white/30 border-2 border-dashed border-white/10 rounded-3xl\">\r\n                        <div className=\"text-6xl mb-4\"></div>\r\n                        <p> SOP </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n","function e(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}export{e as default};\n//# sourceMappingURL=index.es.js.map\n","function createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar hat_1 = createCommonjsModule(function (module) {\nvar hat = module.exports = function (bits, base) {\n    if (!base) base = 16;\n    if (bits === undefined) bits = 128;\n    if (bits <= 0) return '0';\n    \n    var digits = Math.log(Math.pow(2, bits)) / Math.log(base);\n    for (var i = 2; digits === Infinity; i *= 2) {\n        digits = Math.log(Math.pow(2, bits / i)) / Math.log(base) * i;\n    }\n    \n    var rem = digits - Math.floor(digits);\n    \n    var res = '';\n    \n    for (var i = 0; i < Math.floor(digits); i++) {\n        var x = Math.floor(Math.random() * base).toString(base);\n        res = x + res;\n    }\n    \n    if (rem) {\n        var b = Math.pow(base, rem);\n        var x = Math.floor(Math.random() * b).toString(base);\n        res = x + res;\n    }\n    \n    var parsed = parseInt(res, base);\n    if (parsed !== Infinity && parsed >= Math.pow(2, bits)) {\n        return hat(bits, base)\n    }\n    else return res;\n};\n\nhat.rack = function (bits, base, expandBy) {\n    var fn = function (data) {\n        var iters = 0;\n        do {\n            if (iters ++ > 10) {\n                if (expandBy) bits += expandBy;\n                else throw new Error('too many ID collisions, use more bits')\n            }\n            \n            var id = hat(bits, base);\n        } while (Object.hasOwnProperty.call(hats, id));\n        \n        hats[id] = data;\n        return id;\n    };\n    var hats = fn.hats = {};\n    \n    fn.get = function (id) {\n        return fn.hats[id];\n    };\n    \n    fn.set = function (id, value) {\n        fn.hats[id] = value;\n        return fn;\n    };\n    \n    fn.bits = bits || 128;\n    fn.base = base || 16;\n    return fn;\n};\n});\n\n/**\n * Create a new id generator / cache instance.\n *\n * You may optionally provide a seed that is used internally.\n *\n * @param {Seed} seed\n */\nfunction Ids(seed) {\n  if (!(this instanceof Ids)) {\n    return new Ids(seed);\n  }\n  seed = seed || [128, 36, 1];\n  this._seed = seed.length ? hat_1.rack(seed[0], seed[1], seed[2]) : seed;\n}\n\n/**\n * Generate a next id.\n *\n * @param {Object} [element] element to bind the id to\n *\n * @return {String} id\n */\nIds.prototype.next = function (element) {\n  return this._seed(element || true);\n};\n\n/**\n * Generate a next id with a given prefix.\n *\n * @param {Object} [element] element to bind the id to\n *\n * @return {String} id\n */\nIds.prototype.nextPrefixed = function (prefix, element) {\n  var id;\n  do {\n    id = prefix + this.next(true);\n  } while (this.assigned(id));\n\n  // claim {prefix}{random}\n  this.claim(id, element);\n\n  // return\n  return id;\n};\n\n/**\n * Manually claim an existing id.\n *\n * @param {String} id\n * @param {String} [element] element the id is claimed by\n */\nIds.prototype.claim = function (id, element) {\n  this._seed.set(id, element || true);\n};\n\n/**\n * Returns true if the given id has already been assigned.\n *\n * @param  {String} id\n * @return {Boolean}\n */\nIds.prototype.assigned = function (id) {\n  return this._seed.get(id) || false;\n};\n\n/**\n * Unclaim an id.\n *\n * @param  {String} id the id to unclaim\n */\nIds.prototype.unclaim = function (id) {\n  delete this._seed.hats[id];\n};\n\n/**\n * Clear all claimed ids.\n */\nIds.prototype.clear = function () {\n  var hats = this._seed.hats,\n    id;\n  for (id in hats) {\n    this.unclaim(id);\n  }\n};\n\nexport default Ids;\n//# sourceMappingURL=index.esm.js.map\n","/**\n * Flatten array, one level deep.\n *\n * @template T\n *\n * @param {T[][] | T[] | null} [arr]\n *\n * @return {T[]}\n */\nfunction flatten(arr) {\n  return Array.prototype.concat.apply([], arr);\n}\n\nconst nativeToString = Object.prototype.toString;\nconst nativeHasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isUndefined(obj) {\n  return obj === undefined;\n}\n\nfunction isDefined(obj) {\n  return obj !== undefined;\n}\n\nfunction isNil(obj) {\n  return obj == null;\n}\n\nfunction isArray(obj) {\n  return nativeToString.call(obj) === '[object Array]';\n}\n\nfunction isObject(obj) {\n  return nativeToString.call(obj) === '[object Object]';\n}\n\nfunction isNumber(obj) {\n  return nativeToString.call(obj) === '[object Number]';\n}\n\n/**\n * @param {any} obj\n *\n * @return {boolean}\n */\nfunction isFunction(obj) {\n  const tag = nativeToString.call(obj);\n\n  return (\n    tag === '[object Function]' ||\n    tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' ||\n    tag === '[object AsyncGeneratorFunction]' ||\n    tag === '[object Proxy]'\n  );\n}\n\nfunction isString(obj) {\n  return nativeToString.call(obj) === '[object String]';\n}\n\n\n/**\n * Ensure collection is an array.\n *\n * @param {Object} obj\n */\nfunction ensureArray(obj) {\n\n  if (isArray(obj)) {\n    return;\n  }\n\n  throw new Error('must supply array');\n}\n\n/**\n * Return true, if target owns a property with the given key.\n *\n * @param {Object} target\n * @param {String} key\n *\n * @return {Boolean}\n */\nfunction has(target, key) {\n  return !isNil(target) && nativeHasOwnProperty.call(target, key);\n}\n\n/**\n * @template T\n * @typedef { (\n *   ((e: T) => boolean) |\n *   ((e: T, idx: number) => boolean) |\n *   ((e: T, key: string) => boolean) |\n *   string |\n *   number\n * ) } Matcher\n */\n\n/**\n * @template T\n * @template U\n *\n * @typedef { (\n *   ((e: T) => U) | string | number\n * ) } Extractor\n */\n\n\n/**\n * @template T\n * @typedef { (val: T, key: any) => boolean } MatchFn\n */\n\n/**\n * @template T\n * @typedef { T[] } ArrayCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: string]: T } } StringKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { { [key: number]: T } } NumberKeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { StringKeyValueCollection<T> | NumberKeyValueCollection<T> } KeyValueCollection\n */\n\n/**\n * @template T\n * @typedef { KeyValueCollection<T> | ArrayCollection<T> } Collection\n */\n\n/**\n * Find element in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {Object}\n */\nfunction find(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let match;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      match = val;\n\n      return false;\n    }\n  });\n\n  return match;\n\n}\n\n\n/**\n * Find element index in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {number | string | undefined}\n */\nfunction findIndex(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let idx = isArray(collection) ? -1 : undefined;\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      idx = key;\n\n      return false;\n    }\n  });\n\n  return idx;\n}\n\n\n/**\n * Filter elements in collection.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param {Matcher<T>} matcher\n *\n * @return {T[]} result\n */\nfunction filter(collection, matcher) {\n\n  const matchFn = toMatcher(matcher);\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    if (matchFn(val, key)) {\n      result.push(val);\n    }\n  });\n\n  return result;\n}\n\n\n/**\n * Iterate over collection; returning something\n * (non-undefined) will stop iteration.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param { ((item: T, idx: number) => (boolean|void)) | ((item: T, key: string) => (boolean|void)) } iterator\n *\n * @return {T} return result that stopped the iteration\n */\nfunction forEach(collection, iterator) {\n\n  let val,\n      result;\n\n  if (isUndefined(collection)) {\n    return;\n  }\n\n  const convertKey = isArray(collection) ? toNum : identity;\n\n  for (let key in collection) {\n\n    if (has(collection, key)) {\n      val = collection[key];\n\n      result = iterator(val, convertKey(key));\n\n      if (result === false) {\n        return val;\n      }\n    }\n  }\n}\n\n/**\n * Return collection without element.\n *\n * @template T\n * @param {ArrayCollection<T>} arr\n * @param {Matcher<T>} matcher\n *\n * @return {T[]}\n */\nfunction without(arr, matcher) {\n\n  if (isUndefined(arr)) {\n    return [];\n  }\n\n  ensureArray(arr);\n\n  const matchFn = toMatcher(matcher);\n\n  return arr.filter(function(el, idx) {\n    return !matchFn(el, idx);\n  });\n\n}\n\n\n/**\n * Reduce collection, returning a single result.\n *\n * @template T\n * @template V\n *\n * @param {Collection<T>} collection\n * @param {(result: V, entry: T, index: any) => V} iterator\n * @param {V} result\n *\n * @return {V} result returned from last iterator\n */\nfunction reduce(collection, iterator, result) {\n\n  forEach(collection, function(value, idx) {\n    result = iterator(result, value, idx);\n  });\n\n  return result;\n}\n\n\n/**\n * Return true if every element in the collection\n * matches the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction every(collection, matcher) {\n\n  return !!reduce(collection, function(matches, val, key) {\n    return matches && matcher(val, key);\n  }, true);\n}\n\n\n/**\n * Return true if some elements in the collection\n * match the criteria.\n *\n * @param  {Object|Array} collection\n * @param  {Function} matcher\n *\n * @return {Boolean}\n */\nfunction some(collection, matcher) {\n\n  return !!find(collection, matcher);\n}\n\n\n/**\n * Transform a collection into another collection\n * by piping each member through the given fn.\n *\n * @param  {Object|Array}   collection\n * @param  {Function} fn\n *\n * @return {Array} transformed collection\n */\nfunction map(collection, fn) {\n\n  let result = [];\n\n  forEach(collection, function(val, key) {\n    result.push(fn(val, key));\n  });\n\n  return result;\n}\n\n\n/**\n * Get the collections keys.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction keys(collection) {\n  return collection && Object.keys(collection) || [];\n}\n\n\n/**\n * Shorthand for `keys(o).length`.\n *\n * @param  {Object|Array} collection\n *\n * @return {Number}\n */\nfunction size(collection) {\n  return keys(collection).length;\n}\n\n\n/**\n * Get the values in the collection.\n *\n * @param  {Object|Array} collection\n *\n * @return {Array}\n */\nfunction values(collection) {\n  return map(collection, (val) => val);\n}\n\n\n/**\n * Group collection members by attribute.\n *\n * @param {Object|Array} collection\n * @param {Extractor} extractor\n *\n * @return {Object} map with { attrValue => [ a, b, c ] }\n */\nfunction groupBy(collection, extractor, grouped = {}) {\n\n  extractor = toExtractor(extractor);\n\n  forEach(collection, function(val) {\n    let discriminator = extractor(val) || '_';\n\n    let group = grouped[discriminator];\n\n    if (!group) {\n      group = grouped[discriminator] = [];\n    }\n\n    group.push(val);\n  });\n\n  return grouped;\n}\n\n\nfunction uniqueBy(extractor, ...collections) {\n\n  extractor = toExtractor(extractor);\n\n  let grouped = {};\n\n  forEach(collections, (c) => groupBy(c, extractor, grouped));\n\n  let result = map(grouped, function(val, key) {\n    return val[0];\n  });\n\n  return result;\n}\n\n\nconst unionBy = uniqueBy;\n\n\n\n/**\n * Sort collection by criteria.\n *\n * @template T\n *\n * @param {Collection<T>} collection\n * @param {Extractor<T, number | string>} extractor\n *\n * @return {Array}\n */\nfunction sortBy(collection, extractor) {\n\n  extractor = toExtractor(extractor);\n\n  let sorted = [];\n\n  forEach(collection, function(value, key) {\n    let disc = extractor(value, key);\n\n    let entry = {\n      d: disc,\n      v: value\n    };\n\n    for (var idx = 0; idx < sorted.length; idx++) {\n      let { d } = sorted[idx];\n\n      if (disc < d) {\n        sorted.splice(idx, 0, entry);\n        return;\n      }\n    }\n\n    // not inserted, append (!)\n    sorted.push(entry);\n  });\n\n  return map(sorted, (e) => e.v);\n}\n\n\n/**\n * Create an object pattern matcher.\n *\n * @example\n *\n * ```javascript\n * const matcher = matchPattern({ id: 1 });\n *\n * let element = find(elements, matcher);\n * ```\n *\n * @template T\n *\n * @param {T} pattern\n *\n * @return { (el: any) =>  boolean } matcherFn\n */\nfunction matchPattern(pattern) {\n\n  return function(el) {\n\n    return every(pattern, function(val, key) {\n      return el[key] === val;\n    });\n\n  };\n}\n\n\n/**\n * @param {string | ((e: any) => any) } extractor\n *\n * @return { (e: any) => any }\n */\nfunction toExtractor(extractor) {\n\n  /**\n   * @satisfies { (e: any) => any }\n   */\n  return isFunction(extractor) ? extractor : (e) => {\n\n    // @ts-ignore: just works\n    return e[extractor];\n  };\n}\n\n\n/**\n * @template T\n * @param {Matcher<T>} matcher\n *\n * @return {MatchFn<T>}\n */\nfunction toMatcher(matcher) {\n  return isFunction(matcher) ? matcher : (e) => {\n    return e === matcher;\n  };\n}\n\n\nfunction identity(arg) {\n  return arg;\n}\n\nfunction toNum(arg) {\n  return Number(arg);\n}\n\n/* global setTimeout clearTimeout */\n\n/**\n * @typedef { {\n *   (...args: any[]): any;\n *   flush: () => void;\n *   cancel: () => void;\n * } } DebouncedFunction\n */\n\n/**\n * Debounce fn, calling it only once if the given time\n * elapsed between calls.\n *\n * Lodash-style the function exposes methods to `#clear`\n * and `#flush` to control internal behavior.\n *\n * @param  {Function} fn\n * @param  {Number} timeout\n *\n * @return {DebouncedFunction} debounced function\n */\nfunction debounce(fn, timeout) {\n\n  let timer;\n\n  let lastArgs;\n  let lastThis;\n\n  let lastNow;\n\n  function fire(force) {\n\n    let now = Date.now();\n\n    let scheduledDiff = force ? 0 : (lastNow + timeout) - now;\n\n    if (scheduledDiff > 0) {\n      return schedule(scheduledDiff);\n    }\n\n    fn.apply(lastThis, lastArgs);\n\n    clear();\n  }\n\n  function schedule(timeout) {\n    timer = setTimeout(fire, timeout);\n  }\n\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = lastNow = lastArgs = lastThis = undefined;\n  }\n\n  function flush() {\n    if (timer) {\n      fire(true);\n    }\n\n    clear();\n  }\n\n  /**\n   * @type { DebouncedFunction }\n   */\n  function callback(...args) {\n    lastNow = Date.now();\n\n    lastArgs = args;\n    lastThis = this;\n\n    // ensure an execution is scheduled\n    if (!timer) {\n      schedule(timeout);\n    }\n  }\n\n  callback.flush = flush;\n  callback.cancel = clear;\n\n  return callback;\n}\n\n/**\n * Throttle fn, calling at most once\n * in the given interval.\n *\n * @param  {Function} fn\n * @param  {Number} interval\n *\n * @return {Function} throttled function\n */\nfunction throttle(fn, interval) {\n  let throttling = false;\n\n  return function(...args) {\n\n    if (throttling) {\n      return;\n    }\n\n    fn(...args);\n    throttling = true;\n\n    setTimeout(() => {\n      throttling = false;\n    }, interval);\n  };\n}\n\n/**\n * Bind function against target <this>.\n *\n * @param  {Function} fn\n * @param  {Object}   target\n *\n * @return {Function} bound function\n */\nfunction bind(fn, target) {\n  return fn.bind(target);\n}\n\n/**\n * Convenience wrapper for `Object.assign`.\n *\n * @param {Object} target\n * @param {...Object} others\n *\n * @return {Object} the target\n */\nfunction assign(target, ...others) {\n  return Object.assign(target, ...others);\n}\n\n/**\n * Sets a nested property of a given object to the specified value.\n *\n * This mutates the object and returns it.\n *\n * @template T\n *\n * @param {T} target The target of the set operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} value The value to set.\n *\n * @return {T}\n */\nfunction set(target, path, value) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key, idx) {\n\n    if (typeof key !== 'number' && typeof key !== 'string') {\n      throw new Error('illegal key type: ' + typeof key + '. Key should be of type number or string.');\n    }\n\n    if (key === 'constructor') {\n      throw new Error('illegal key: constructor');\n    }\n\n    if (key === '__proto__') {\n      throw new Error('illegal key: __proto__');\n    }\n\n    let nextKey = path[idx + 1];\n    let nextTarget = currentTarget[key];\n\n    if (isDefined(nextKey) && isNil(nextTarget)) {\n      nextTarget = currentTarget[key] = isNaN(+nextKey) ? {} : [];\n    }\n\n    if (isUndefined(nextKey)) {\n      if (isUndefined(value)) {\n        delete currentTarget[key];\n      } else {\n        currentTarget[key] = value;\n      }\n    } else {\n      currentTarget = nextTarget;\n    }\n  });\n\n  return target;\n}\n\n\n/**\n * Gets a nested property of a given object.\n *\n * @param {Object} target The target of the get operation.\n * @param {(string|number)[]} path The path to the nested value.\n * @param {any} [defaultValue] The value to return if no value exists.\n *\n * @return {any}\n */\nfunction get(target, path, defaultValue) {\n\n  let currentTarget = target;\n\n  forEach(path, function(key) {\n\n    // accessing nil property yields <undefined>\n    if (isNil(currentTarget)) {\n      currentTarget = undefined;\n\n      return false;\n    }\n\n    currentTarget = currentTarget[key];\n  });\n\n  return isUndefined(currentTarget) ? defaultValue : currentTarget;\n}\n\n/**\n * Pick properties from the given target.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return Pick<T, V>\n */\nfunction pick(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(properties, function(prop) {\n\n    if (prop in obj) {\n      result[prop] = target[prop];\n    }\n  });\n\n  return result;\n}\n\n/**\n * Pick all target properties, excluding the given ones.\n *\n * @template T\n * @template {any[]} V\n *\n * @param {T} target\n * @param {V} properties\n *\n * @return {Omit<T, V>} target\n */\nfunction omit(target, properties) {\n\n  let result = {};\n\n  let obj = Object(target);\n\n  forEach(obj, function(prop, key) {\n\n    if (properties.indexOf(key) === -1) {\n      result[key] = prop;\n    }\n  });\n\n  return result;\n}\n\n/**\n * Recursively merge `...sources` into given target.\n *\n * Does support merging objects; does not support merging arrays.\n *\n * @param {Object} target\n * @param {...Object} sources\n *\n * @return {Object} the target\n */\nfunction merge(target, ...sources) {\n\n  if (!sources.length) {\n    return target;\n  }\n\n  forEach(sources, function(source) {\n\n    // skip non-obj sources, i.e. null\n    if (!source || !isObject(source)) {\n      return;\n    }\n\n    forEach(source, function(sourceVal, key) {\n\n      if (key === '__proto__') {\n        return;\n      }\n\n      let targetVal = target[key];\n\n      if (isObject(sourceVal)) {\n\n        if (!isObject(targetVal)) {\n\n          // override target[key] with object\n          targetVal = {};\n        }\n\n        target[key] = merge(targetVal, sourceVal);\n      } else {\n        target[key] = sourceVal;\n      }\n\n    });\n  });\n\n  return target;\n}\n\nexport { assign, bind, debounce, ensureArray, every, filter, find, findIndex, flatten, forEach, get, groupBy, has, isArray, isDefined, isFunction, isNil, isNumber, isObject, isString, isUndefined, keys, map, matchPattern, merge, omit, pick, reduce, set, size, some, sortBy, throttle, unionBy, uniqueBy, values, without };\n","function _mergeNamespaces(n, m) {\n  m.forEach(function (e) {\n    e && typeof e !== 'string' && !Array.isArray(e) && Object.keys(e).forEach(function (k) {\n      if (k !== 'default' && !(k in n)) {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  });\n  return Object.freeze(n);\n}\n\n/**\n * Flatten array, one level deep.\n *\n * @template T\n *\n * @param {T[][] | T[] | null} [arr]\n *\n * @return {T[]}\n */\n\nconst nativeToString = Object.prototype.toString;\nconst nativeHasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isUndefined(obj) {\n  return obj === undefined;\n}\n\nfunction isArray(obj) {\n  return nativeToString.call(obj) === '[object Array]';\n}\n\n/**\n * Return true, if target owns a property with the given key.\n *\n * @param {Object} target\n * @param {String} key\n *\n * @return {Boolean}\n */\nfunction has(target, key) {\n  return nativeHasOwnProperty.call(target, key);\n}\n\n\n/**\n * Iterate over collection; returning something\n * (non-undefined) will stop iteration.\n *\n * @template T\n * @param {Collection<T>} collection\n * @param { ((item: T, idx: number) => (boolean|void)) | ((item: T, key: string) => (boolean|void)) } iterator\n *\n * @return {T} return result that stopped the iteration\n */\nfunction forEach(collection, iterator) {\n\n  let val,\n      result;\n\n  if (isUndefined(collection)) {\n    return;\n  }\n\n  const convertKey = isArray(collection) ? toNum : identity;\n\n  for (let key in collection) {\n\n    if (has(collection, key)) {\n      val = collection[key];\n\n      result = iterator(val, convertKey(key));\n\n      if (result === false) {\n        return val;\n      }\n    }\n  }\n}\n\n\nfunction identity(arg) {\n  return arg;\n}\n\nfunction toNum(arg) {\n  return Number(arg);\n}\n\n/**\n * Assigns style attributes in a style-src compliant way.\n *\n * @param {Element} element\n * @param {...Object} styleSources\n *\n * @return {Element} the element\n */\nfunction assign(element, ...styleSources) {\n  const target = element.style;\n\n  forEach(styleSources, function(style) {\n    if (!style) {\n      return;\n    }\n\n    forEach(style, function(value, key) {\n      target[key] = value;\n    });\n  });\n\n  return element;\n}\n\n/**\n * Set attribute `name` to `val`, or get attr `name`.\n *\n * @param {Element} el\n * @param {String} name\n * @param {String} [val]\n * @api public\n */\nfunction attr(el, name, val) {\n\n  // get\n  if (arguments.length == 2) {\n    return el.getAttribute(name);\n  }\n\n  // remove\n  if (val === null) {\n    return el.removeAttribute(name);\n  }\n\n  // set\n  el.setAttribute(name, val);\n\n  return el;\n}\n\n/**\n * Taken from https://github.com/component/classes\n *\n * Without the component bits.\n */\n\n/**\n * toString reference.\n */\n\nconst toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nfunction classes(el) {\n  return new ClassList(el);\n}\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name) {\n  this.list.add(name);\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name) {\n  if ('[object RegExp]' == toString.call(name)) {\n    return this.removeMatching(name);\n  }\n\n  this.list.remove(name);\n  return this;\n};\n\n/**\n * Remove all classes matching `re`.\n *\n * @param {RegExp} re\n * @return {ClassList}\n * @api private\n */\n\nClassList.prototype.removeMatching = function(re) {\n  const arr = this.array();\n  for (let i = 0; i < arr.length; i++) {\n    if (re.test(arr[i])) {\n      this.remove(arr[i]);\n    }\n  }\n  return this;\n};\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force) {\n  if ('undefined' !== typeof force) {\n    if (force !== this.list.toggle(name, force)) {\n      this.list.toggle(name); // toggle again to correct\n    }\n  } else {\n    this.list.toggle(name);\n  }\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function() {\n  return Array.from(this.list);\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has =\nClassList.prototype.contains = function(name) {\n  return this.list.contains(name);\n};\n\n/**\n * Clear utility\n */\n\n/**\n * Removes all children from the given element\n *\n * @param {Element} element\n *\n * @return {Element} the element (for chaining)\n */\nfunction clear(element) {\n  var child;\n\n  while ((child = element.firstChild)) {\n    element.removeChild(child);\n  }\n\n  return element;\n}\n\n/**\n * Closest\n *\n * @param {Element} el\n * @param {string} selector\n * @param {boolean} checkYourSelf (optional)\n */\nfunction closest(element, selector, checkYourSelf) {\n  var actualElement = checkYourSelf ? element : element.parentNode;\n\n  return actualElement && typeof actualElement.closest === 'function' && actualElement.closest(selector) || null;\n}\n\nvar componentEvent = {};\n\nvar bind$1, unbind$1, prefix;\n\nfunction detect () {\n  bind$1 = window.addEventListener ? 'addEventListener' : 'attachEvent';\n  unbind$1 = window.removeEventListener ? 'removeEventListener' : 'detachEvent';\n  prefix = bind$1 !== 'addEventListener' ? 'on' : '';\n}\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar bind_1 = componentEvent.bind = function(el, type, fn, capture){\n  if (!bind$1) detect();\n  el[bind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nvar unbind_1 = componentEvent.unbind = function(el, type, fn, capture){\n  if (!unbind$1) detect();\n  el[unbind$1](prefix + type, fn, capture || false);\n  return fn;\n};\n\nvar event = /*#__PURE__*/_mergeNamespaces({\n  __proto__: null,\n  bind: bind_1,\n  unbind: unbind_1,\n  'default': componentEvent\n}, [componentEvent]);\n\n/**\n * Module dependencies.\n */\n\n/**\n * Delegate event `type` to `selector`\n * and invoke `fn(e)`. A callback function\n * is returned which may be passed to `.unbind()`.\n *\n * @param {Element} el\n * @param {String} selector\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\n// Some events don't bubble, so we want to bind to the capture phase instead\n// when delegating.\nvar forceCaptureEvents = [ 'focus', 'blur' ];\n\nfunction bind(el, selector, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.bind(el, type, function(e) {\n    var target = e.target || e.srcElement;\n    e.delegateTarget = closest(target, selector, true);\n    if (e.delegateTarget) {\n      fn.call(el, e);\n    }\n  }, capture);\n}\n\n/**\n * Unbind event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\nfunction unbind(el, type, fn, capture) {\n  if (forceCaptureEvents.indexOf(type) !== -1) {\n    capture = true;\n  }\n\n  return event.unbind(el, type, fn, capture);\n}\n\nvar delegate = {\n  bind,\n  unbind\n};\n\n/**\n * Expose `parse`.\n */\n\nvar domify = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar innerHTMLBug = false;\nvar bugTestDiv;\nif (typeof document !== 'undefined') {\n  bugTestDiv = document.createElement('div');\n  // Setup\n  bugTestDiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n  // Make sure that link elements get serialized correctly by innerHTML\n  // This requires a wrapper element in IE\n  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;\n  bugTestDiv = undefined;\n}\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([\\w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^\\s+|\\s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = Object.prototype.hasOwnProperty.call(map, tag) ? map[tag] : map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n\nvar domify$1 = domify;\n\n/**\n * @param { HTMLElement } element\n * @param { String } selector\n *\n * @return { boolean }\n */\nfunction matches(element, selector) {\n  return element && typeof element.matches === 'function' && element.matches(selector) || false;\n}\n\nfunction query(selector, el) {\n  el = el || document;\n\n  return el.querySelector(selector);\n}\n\nfunction all(selector, el) {\n  el = el || document;\n\n  return el.querySelectorAll(selector);\n}\n\nfunction remove(el) {\n  el.parentNode && el.parentNode.removeChild(el);\n}\n\nexport { assign as assignStyle, attr, classes, clear, closest, delegate, domify$1 as domify, event, matches, query, all as queryAll, remove };\n//# sourceMappingURL=index.esm.js.map\n","function ensureImported(element, target) {\n\n  if (element.ownerDocument !== target.ownerDocument) {\n    try {\n\n      // may fail on webkit\n      return target.ownerDocument.importNode(element, true);\n    } catch (e) {\n\n      // ignore\n    }\n  }\n\n  return element;\n}\n\n/**\n * appendTo utility\n */\n\n\n/**\n * Append a node to a target element and return the appended node.\n *\n * @param  {SVGElement} element\n * @param  {SVGElement} target\n *\n * @return {SVGElement} the appended node\n */\nfunction appendTo(element, target) {\n  return target.appendChild(ensureImported(element, target));\n}\n\n/**\n * append utility\n */\n\n\n/**\n * Append a node to an element\n *\n * @param  {SVGElement} element\n * @param  {SVGElement} node\n *\n * @return {SVGElement} the element\n */\nfunction append(target, node) {\n  appendTo(node, target);\n  return target;\n}\n\n/**\n * attribute accessor utility\n */\n\nvar LENGTH_ATTR = 2;\n\nvar CSS_PROPERTIES = {\n  'alignment-baseline': 1,\n  'baseline-shift': 1,\n  'clip': 1,\n  'clip-path': 1,\n  'clip-rule': 1,\n  'color': 1,\n  'color-interpolation': 1,\n  'color-interpolation-filters': 1,\n  'color-profile': 1,\n  'color-rendering': 1,\n  'cursor': 1,\n  'direction': 1,\n  'display': 1,\n  'dominant-baseline': 1,\n  'enable-background': 1,\n  'fill': 1,\n  'fill-opacity': 1,\n  'fill-rule': 1,\n  'filter': 1,\n  'flood-color': 1,\n  'flood-opacity': 1,\n  'font': 1,\n  'font-family': 1,\n  'font-size': LENGTH_ATTR,\n  'font-size-adjust': 1,\n  'font-stretch': 1,\n  'font-style': 1,\n  'font-variant': 1,\n  'font-weight': 1,\n  'glyph-orientation-horizontal': 1,\n  'glyph-orientation-vertical': 1,\n  'image-rendering': 1,\n  'kerning': 1,\n  'letter-spacing': 1,\n  'lighting-color': 1,\n  'marker': 1,\n  'marker-end': 1,\n  'marker-mid': 1,\n  'marker-start': 1,\n  'mask': 1,\n  'opacity': 1,\n  'overflow': 1,\n  'pointer-events': 1,\n  'shape-rendering': 1,\n  'stop-color': 1,\n  'stop-opacity': 1,\n  'stroke': 1,\n  'stroke-dasharray': 1,\n  'stroke-dashoffset': 1,\n  'stroke-linecap': 1,\n  'stroke-linejoin': 1,\n  'stroke-miterlimit': 1,\n  'stroke-opacity': 1,\n  'stroke-width': LENGTH_ATTR,\n  'text-anchor': 1,\n  'text-decoration': 1,\n  'text-rendering': 1,\n  'unicode-bidi': 1,\n  'visibility': 1,\n  'word-spacing': 1,\n  'writing-mode': 1\n};\n\n\nfunction getAttribute(node, name) {\n  if (CSS_PROPERTIES[name]) {\n    return node.style[name];\n  } else {\n    return node.getAttributeNS(null, name);\n  }\n}\n\nfunction setAttribute(node, name, value) {\n  var hyphenated = name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\n  var type = CSS_PROPERTIES[hyphenated];\n\n  if (type) {\n\n    // append pixel unit, unless present\n    if (type === LENGTH_ATTR && typeof value === 'number') {\n      value = String(value) + 'px';\n    }\n\n    node.style[hyphenated] = value;\n  } else {\n    node.setAttributeNS(null, name, value);\n  }\n}\n\nfunction setAttributes(node, attrs) {\n\n  var names = Object.keys(attrs), i, name;\n\n  for (i = 0, name; (name = names[i]); i++) {\n    setAttribute(node, name, attrs[name]);\n  }\n}\n\n/**\n * Gets or sets raw attributes on a node.\n *\n * @param  {SVGElement} node\n * @param  {Object} [attrs]\n * @param  {String} [name]\n * @param  {String} [value]\n *\n * @return {String}\n */\nfunction attr(node, name, value) {\n  if (typeof name === 'string') {\n    if (value !== undefined) {\n      setAttribute(node, name, value);\n    } else {\n      return getAttribute(node, name);\n    }\n  } else {\n    setAttributes(node, name);\n  }\n\n  return node;\n}\n\n/**\r\n * Taken from https://github.com/component/classes\r\n *\r\n * Without the component bits.\r\n */\r\n\r\n/**\r\n * toString reference.\r\n */\r\n\r\nconst toString = Object.prototype.toString;\r\n\r\n/**\r\n  * Wrap `el` in a `ClassList`.\r\n  *\r\n  * @param {Element} el\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nfunction classes(el) {\r\n  return new ClassList(el);\r\n}\r\n\r\nfunction ClassList(el) {\r\n  if (!el || !el.nodeType) {\r\n    throw new Error('A DOM element reference is required');\r\n  }\r\n  this.el = el;\r\n  this.list = el.classList;\r\n}\r\n\r\n/**\r\n  * Add class `name` if not already present.\r\n  *\r\n  * @param {String} name\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.add = function(name) {\r\n  this.list.add(name);\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Remove class `name` when present, or\r\n  * pass a regular expression to remove\r\n  * any which match.\r\n  *\r\n  * @param {String|RegExp} name\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.remove = function(name) {\r\n  if ('[object RegExp]' == toString.call(name)) {\r\n    return this.removeMatching(name);\r\n  }\r\n\r\n  this.list.remove(name);\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Remove all classes matching `re`.\r\n  *\r\n  * @param {RegExp} re\r\n  * @return {ClassList}\r\n  * @api private\r\n  */\r\n\r\nClassList.prototype.removeMatching = function(re) {\r\n  const arr = this.array();\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (re.test(arr[i])) {\r\n      this.remove(arr[i]);\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Toggle class `name`, can force state via `force`.\r\n  *\r\n  * For browsers that support classList, but do not support `force` yet,\r\n  * the mistake will be detected and corrected.\r\n  *\r\n  * @param {String} name\r\n  * @param {Boolean} force\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.toggle = function(name, force) {\r\n  if ('undefined' !== typeof force) {\r\n    if (force !== this.list.toggle(name, force)) {\r\n      this.list.toggle(name); // toggle again to correct\r\n    }\r\n  } else {\r\n    this.list.toggle(name);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n  * Return an array of classes.\r\n  *\r\n  * @return {Array}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.array = function() {\r\n  return Array.from(this.list);\r\n};\r\n\r\n/**\r\n  * Check if class `name` is present.\r\n  *\r\n  * @param {String} name\r\n  * @return {ClassList}\r\n  * @api public\r\n  */\r\n\r\nClassList.prototype.has =\r\n ClassList.prototype.contains = function(name) {\r\n   return this.list.contains(name);\r\n };\n\n/**\n * Clear utility\n */\n\n/**\n * Removes all children from the given element\n *\n * @param  {SVGElement} element\n * @return {Element} the element (for chaining)\n */\nfunction clear(element) {\n  var child;\n\n  while ((child = element.firstChild)) {\n    element.removeChild(child);\n  }\n\n  return element;\n}\n\nfunction clone(element) {\n  return element.cloneNode(true);\n}\n\nvar ns = {\n  svg: 'http://www.w3.org/2000/svg'\n};\n\n/**\n * DOM parsing utility\n */\n\n\nvar SVG_START = '<svg xmlns=\"' + ns.svg + '\"';\n\nfunction parse(svg) {\n\n  var unwrap = false;\n\n  // ensure we import a valid svg document\n  if (svg.substring(0, 4) === '<svg') {\n    if (svg.indexOf(ns.svg) === -1) {\n      svg = SVG_START + svg.substring(4);\n    }\n  } else {\n\n    // namespace svg\n    svg = SVG_START + '>' + svg + '</svg>';\n    unwrap = true;\n  }\n\n  var parsed = parseDocument(svg);\n\n  if (!unwrap) {\n    return parsed;\n  }\n\n  var fragment = document.createDocumentFragment();\n\n  var parent = parsed.firstChild;\n\n  while (parent.firstChild) {\n    fragment.appendChild(parent.firstChild);\n  }\n\n  return fragment;\n}\n\nfunction parseDocument(svg) {\n\n  var parser;\n\n  // parse\n  parser = new DOMParser();\n  parser.async = false;\n\n  return parser.parseFromString(svg, 'text/xml');\n}\n\n/**\n * Create utility for SVG elements\n */\n\n\n\n/**\n * Create a specific type from name or SVG markup.\n *\n * @param {String} name the name or markup of the element\n * @param {Object} [attrs] attributes to set on the element\n *\n * @returns {SVGElement}\n */\nfunction create(name, attrs) {\n  var element;\n\n  name = name.trim();\n\n  if (name.charAt(0) === '<') {\n    element = parse(name).firstChild;\n    element = document.importNode(element, true);\n  } else {\n    element = document.createElementNS(ns.svg, name);\n  }\n\n  if (attrs) {\n    attr(element, attrs);\n  }\n\n  return element;\n}\n\n/**\n * Events handling utility\n */\n\nfunction on(node, event, listener, useCapture) {\n  node.addEventListener(event, listener, useCapture);\n}\n\nfunction off(node, event, listener, useCapture) {\n  node.removeEventListener(event, listener, useCapture);\n}\n\n/**\n * Geometry helpers\n */\n\n\n// fake node used to instantiate svg geometry elements\nvar node = null;\n\nfunction getNode() {\n  if (node === null) {\n    node = create('svg');\n  }\n\n  return node;\n}\n\nfunction extend(object, props) {\n  var i, k, keys = Object.keys(props);\n\n  for (i = 0; (k = keys[i]); i++) {\n    object[k] = props[k];\n  }\n\n  return object;\n}\n\n\nfunction createPoint(x, y) {\n  var point = getNode().createSVGPoint();\n\n  switch (arguments.length) {\n  case 0:\n    return point;\n  case 2:\n    x = {\n      x: x,\n      y: y\n    };\n    break;\n  }\n\n  return extend(point, x);\n}\n\n/**\n * Create matrix via args.\n *\n * @example\n *\n * createMatrix({ a: 1, b: 1 });\n * createMatrix();\n * createMatrix(1, 2, 0, 0, 30, 20);\n *\n * @return {SVGMatrix}\n */\nfunction createMatrix(a, b, c, d, e, f) {\n  var matrix = getNode().createSVGMatrix();\n\n  switch (arguments.length) {\n  case 0:\n    return matrix;\n  case 1:\n    return extend(matrix, a);\n  case 6:\n    return extend(matrix, {\n      a: a,\n      b: b,\n      c: c,\n      d: d,\n      e: e,\n      f: f\n    });\n  }\n}\n\nfunction createTransform(matrix) {\n  if (matrix) {\n    return getNode().createSVGTransformFromMatrix(matrix);\n  } else {\n    return getNode().createSVGTransform();\n  }\n}\n\n/**\n * Serialization util\n */\n\nvar TEXT_ENTITIES = /([&<>]{1})/g;\nvar ATTR_ENTITIES = /([&<>\\n\\r\"]{1})/g;\n\nvar ENTITY_REPLACEMENT = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '\\''\n};\n\nfunction escape(str, pattern) {\n\n  function replaceFn(match, entity) {\n    return ENTITY_REPLACEMENT[entity] || entity;\n  }\n\n  return str.replace(pattern, replaceFn);\n}\n\nfunction serialize(node, output) {\n\n  var i, len, attrMap, attrNode, childNodes;\n\n  switch (node.nodeType) {\n\n  // TEXT\n  case 3:\n\n    // replace special XML characters\n    output.push(escape(node.textContent, TEXT_ENTITIES));\n    break;\n\n  // ELEMENT\n  case 1:\n    output.push('<', node.tagName);\n\n    if (node.hasAttributes()) {\n      attrMap = node.attributes;\n      for (i = 0, len = attrMap.length; i < len; ++i) {\n        attrNode = attrMap.item(i);\n        output.push(' ', attrNode.name, '=\"', escape(attrNode.value, ATTR_ENTITIES), '\"');\n      }\n    }\n\n    if (node.hasChildNodes()) {\n      output.push('>');\n      childNodes = node.childNodes;\n      for (i = 0, len = childNodes.length; i < len; ++i) {\n        serialize(childNodes.item(i), output);\n      }\n      output.push('</', node.tagName, '>');\n    } else {\n      output.push('/>');\n    }\n    break;\n\n  // COMMENT\n  case 8:\n    output.push('<!--', escape(node.nodeValue, TEXT_ENTITIES), '-->');\n    break;\n\n  // CDATA\n  case 4:\n    output.push('<![CDATA[', node.nodeValue, ']]>');\n    break;\n\n  default:\n    throw new Error('unable to handle node ' + node.nodeType);\n  }\n\n  return output;\n}\n\n/**\n * innerHTML like functionality for SVG elements.\n * based on innerSVG (https://code.google.com/p/innersvg)\n */\n\n\n\nfunction set(element, svg) {\n\n  var parsed = parse(svg);\n\n  // clear element contents\n  clear(element);\n\n  if (!svg) {\n    return;\n  }\n\n  if (!isFragment(parsed)) {\n\n    // extract <svg> from parsed document\n    parsed = parsed.documentElement;\n  }\n\n  var nodes = slice(parsed.childNodes);\n\n  // import + append each node\n  for (var i = 0; i < nodes.length; i++) {\n    appendTo(nodes[i], element);\n  }\n\n}\n\nfunction get(element) {\n  var child = element.firstChild,\n      output = [];\n\n  while (child) {\n    serialize(child, output);\n    child = child.nextSibling;\n  }\n\n  return output.join('');\n}\n\nfunction isFragment(node) {\n  return node.nodeName === '#document-fragment';\n}\n\nfunction innerSVG(element, svg) {\n\n  if (svg !== undefined) {\n\n    try {\n      set(element, svg);\n    } catch (e) {\n      throw new Error('error parsing SVG: ' + e.message);\n    }\n\n    return element;\n  } else {\n    return get(element);\n  }\n}\n\n\nfunction slice(arr) {\n  return Array.prototype.slice.call(arr);\n}\n\n/**\n * Selection utilities\n */\n\nfunction select(node, selector) {\n  return node.querySelector(selector);\n}\n\nfunction selectAll(node, selector) {\n  var nodes = node.querySelectorAll(selector);\n\n  return [].map.call(nodes, function(element) {\n    return element;\n  });\n}\n\n/**\n * prependTo utility\n */\n\n\n/**\n * Prepend a node to a target element and return the prepended node.\n *\n * @param  {SVGElement} node\n * @param  {SVGElement} target\n *\n * @return {SVGElement} the prepended node\n */\nfunction prependTo(node, target) {\n  return target.insertBefore(ensureImported(node, target), target.firstChild || null);\n}\n\n/**\n * prepend utility\n */\n\n\n/**\n * Prepend a node to a target element\n *\n * @param  {SVGElement} target\n * @param  {SVGElement} node\n *\n * @return {SVGElement} the target element\n */\nfunction prepend(target, node) {\n  prependTo(node, target);\n  return target;\n}\n\nfunction remove(element) {\n  var parent = element.parentNode;\n\n  if (parent) {\n    parent.removeChild(element);\n  }\n\n  return element;\n}\n\n/**\n * Replace utility\n */\n\n\nfunction replace(element, replacement) {\n  element.parentNode.replaceChild(ensureImported(replacement, element), element);\n  return replacement;\n}\n\n/**\n * transform accessor utility\n */\n\nfunction wrapMatrix(transformList, transform) {\n  if (transform instanceof SVGMatrix) {\n    return transformList.createSVGTransformFromMatrix(transform);\n  }\n\n  return transform;\n}\n\n\nfunction setTransforms(transformList, transforms) {\n  var i, t;\n\n  transformList.clear();\n\n  for (i = 0; (t = transforms[i]); i++) {\n    transformList.appendItem(wrapMatrix(transformList, t));\n  }\n}\n\n/**\n * Get or set the transforms on the given node.\n *\n * @param {SVGElement} node\n * @param  {SVGTransform|SVGMatrix|Array<SVGTransform|SVGMatrix>} [transforms]\n *\n * @return {SVGTransform} the consolidated transform\n */\nfunction transform(node, transforms) {\n  var transformList = node.transform.baseVal;\n\n  if (transforms) {\n\n    if (!Array.isArray(transforms)) {\n      transforms = [ transforms ];\n    }\n\n    setTransforms(transformList, transforms);\n  }\n\n  return transformList.consolidate();\n}\n\nexport { append, appendTo, attr, classes, clear, clone, create, createMatrix, createPoint, createTransform, innerSVG, off, on, prepend, prependTo, remove, replace, select, selectAll, transform };\n","const CLASS_PATTERN = /^class[ {]/;\n\n\n/**\n * @param {function} fn\n *\n * @return {boolean}\n */\nfunction isClass(fn) {\n  return CLASS_PATTERN.test(fn.toString());\n}\n\n/**\n * @param {any} obj\n *\n * @return {boolean}\n */\nfunction isArray(obj) {\n  return Array.isArray(obj);\n}\n\n/**\n * @param {any} obj\n * @param {string} prop\n *\n * @return {boolean}\n */\nfunction hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n/**\n * @typedef {import('./index.js').InjectAnnotated } InjectAnnotated\n */\n\n/**\n * @template T\n *\n * @params {[...string[], T] | ...string[], T} args\n *\n * @return {T & InjectAnnotated}\n */\nfunction annotate(...args) {\n\n  if (args.length === 1 && isArray(args[0])) {\n    args = args[0];\n  }\n\n  args = [ ...args ];\n\n  const fn = args.pop();\n\n  fn.$inject = args;\n\n  return fn;\n}\n\n\n// Current limitations:\n// - can't put into \"function arg\" comments\n// function /* (no parenthesis like this) */ (){}\n// function abc( /* xx (no parenthesis like this) */ a, b) {}\n//\n// Just put the comment before function or inside:\n// /* (((this is fine))) */ function(a, b) {}\n// function abc(a) { /* (((this is fine))) */}\n//\n// - can't reliably auto-annotate constructor; we'll match the\n// first constructor(...) pattern found which may be the one\n// of a nested class, too.\n\nconst CONSTRUCTOR_ARGS = /constructor\\s*[^(]*\\(\\s*([^)]*)\\)/m;\nconst FN_ARGS = /^(?:async\\s+)?(?:function\\s*[^(]*)?(?:\\(\\s*([^)]*)\\)|(\\w+))/m;\nconst FN_ARG = /\\/\\*([^*]*)\\*\\//m;\n\n/**\n * @param {unknown} fn\n *\n * @return {string[]}\n */\nfunction parseAnnotations(fn) {\n\n  if (typeof fn !== 'function') {\n    throw new Error(`Cannot annotate \"${fn}\". Expected a function!`);\n  }\n\n  const match = fn.toString().match(isClass(fn) ? CONSTRUCTOR_ARGS : FN_ARGS);\n\n  // may parse class without constructor\n  if (!match) {\n    return [];\n  }\n\n  const args = match[1] || match[2];\n\n  return args && args.split(',').map(arg => {\n    const argMatch = arg.match(FN_ARG);\n    return (argMatch && argMatch[1] || arg).trim();\n  }) || [];\n}\n\n/**\n * @typedef { import('./index.js').ModuleDeclaration } ModuleDeclaration\n * @typedef { import('./index.js').ModuleDefinition } ModuleDefinition\n * @typedef { import('./index.js').InjectorContext } InjectorContext\n *\n * @typedef { import('./index.js').TypedDeclaration<any, any> } TypedDeclaration\n */\n\n/**\n * Create a new injector with the given modules.\n *\n * @param {ModuleDefinition[]} modules\n * @param {InjectorContext} [_parent]\n */\nfunction Injector(modules, _parent) {\n\n  const parent = _parent || /** @type InjectorContext */ ({\n    get: function(name, strict) {\n      currentlyResolving.push(name);\n\n      if (strict === false) {\n        return null;\n      } else {\n        throw error(`No provider for \"${ name }\"!`);\n      }\n    }\n  });\n\n  const currentlyResolving = [];\n  const providers = this._providers = Object.create(parent._providers || null);\n  const instances = this._instances = Object.create(null);\n\n  const self = instances.injector = this;\n\n  const error = function(msg) {\n    const stack = currentlyResolving.join(' -> ');\n    currentlyResolving.length = 0;\n    return new Error(stack ? `${ msg } (Resolving: ${ stack })` : msg);\n  };\n\n  /**\n   * Return a named service.\n   *\n   * @param {string} name\n   * @param {boolean} [strict=true] if false, resolve missing services to null\n   *\n   * @return {any}\n   */\n  function get(name, strict) {\n    if (!providers[name] && name.includes('.')) {\n\n      const parts = name.split('.');\n      let pivot = get(/** @type { string } */ (parts.shift()));\n\n      while (parts.length) {\n        pivot = pivot[/** @type { string } */ (parts.shift())];\n      }\n\n      return pivot;\n    }\n\n    if (hasOwnProp(instances, name)) {\n      return instances[name];\n    }\n\n    if (hasOwnProp(providers, name)) {\n      if (currentlyResolving.indexOf(name) !== -1) {\n        currentlyResolving.push(name);\n        throw error('Cannot resolve circular dependency!');\n      }\n\n      currentlyResolving.push(name);\n      instances[name] = providers[name][0](providers[name][1]);\n      currentlyResolving.pop();\n\n      return instances[name];\n    }\n\n    return parent.get(name, strict);\n  }\n\n  function fnDef(fn, locals) {\n\n    if (typeof locals === 'undefined') {\n      locals = {};\n    }\n\n    if (typeof fn !== 'function') {\n      if (isArray(fn)) {\n        fn = annotate(fn.slice());\n      } else {\n        throw error(`Cannot invoke \"${ fn }\". Expected a function!`);\n      }\n    }\n\n    /**\n     * @type {string[]}\n     */\n    const inject = fn.$inject || parseAnnotations(fn);\n    const dependencies = inject.map(dep => {\n      if (hasOwnProp(locals, dep)) {\n        return locals[dep];\n      } else {\n        return get(dep);\n      }\n    });\n\n    return {\n      fn: fn,\n      dependencies\n    };\n  }\n\n  /**\n   * Instantiate the given type, injecting dependencies.\n   *\n   * @template T\n   *\n   * @param { Function | [...string[], Function ]} type\n   *\n   * @return T\n   */\n  function instantiate(type) {\n    const {\n      fn,\n      dependencies\n    } = fnDef(type);\n\n    // instantiate var args constructor\n    const Constructor = Function.prototype.bind.call(fn, null, ...dependencies);\n\n    return new Constructor();\n  }\n\n  /**\n   * Invoke the given function, injecting dependencies. Return the result.\n   *\n   * @template T\n   *\n   * @param { Function | [...string[], Function ]} func\n   * @param { Object } [context]\n   * @param { Object } [locals]\n   *\n   * @return {T} invocation result\n   */\n  function invoke(func, context, locals) {\n    const {\n      fn,\n      dependencies\n    } = fnDef(func, locals);\n\n    return fn.apply(context, dependencies);\n  }\n\n  /**\n   * @param {Injector} childInjector\n   *\n   * @return {Function}\n   */\n  function createPrivateInjectorFactory(childInjector) {\n    return annotate(key => childInjector.get(key));\n  }\n\n  /**\n   * @param {ModuleDefinition[]} modules\n   * @param {string[]} [forceNewInstances]\n   *\n   * @return {Injector}\n   */\n  function createChild(modules, forceNewInstances) {\n    if (forceNewInstances && forceNewInstances.length) {\n      const fromParentModule = Object.create(null);\n      const matchedScopes = Object.create(null);\n\n      const privateInjectorsCache = [];\n      const privateChildInjectors = [];\n      const privateChildFactories = [];\n\n      let provider;\n      let cacheIdx;\n      let privateChildInjector;\n      let privateChildInjectorFactory;\n\n      for (let name in providers) {\n        provider = providers[name];\n\n        if (forceNewInstances.indexOf(name) !== -1) {\n          if (provider[2] === 'private') {\n            cacheIdx = privateInjectorsCache.indexOf(provider[3]);\n            if (cacheIdx === -1) {\n              privateChildInjector = provider[3].createChild([], forceNewInstances);\n              privateChildInjectorFactory = createPrivateInjectorFactory(privateChildInjector);\n              privateInjectorsCache.push(provider[3]);\n              privateChildInjectors.push(privateChildInjector);\n              privateChildFactories.push(privateChildInjectorFactory);\n              fromParentModule[name] = [ privateChildInjectorFactory, name, 'private', privateChildInjector ];\n            } else {\n              fromParentModule[name] = [ privateChildFactories[cacheIdx], name, 'private', privateChildInjectors[cacheIdx] ];\n            }\n          } else {\n            fromParentModule[name] = [ provider[2], provider[1] ];\n          }\n          matchedScopes[name] = true;\n        }\n\n        if ((provider[2] === 'factory' || provider[2] === 'type') && provider[1].$scope) {\n          /* jshint -W083 */\n          forceNewInstances.forEach(scope => {\n            if (provider[1].$scope.indexOf(scope) !== -1) {\n              fromParentModule[name] = [ provider[2], provider[1] ];\n              matchedScopes[scope] = true;\n            }\n          });\n        }\n      }\n\n      forceNewInstances.forEach(scope => {\n        if (!matchedScopes[scope]) {\n          throw new Error('No provider for \"' + scope + '\". Cannot use provider from the parent!');\n        }\n      });\n\n      modules.unshift(fromParentModule);\n    }\n\n    return new Injector(modules, self);\n  }\n\n  const factoryMap = {\n    factory: invoke,\n    type: instantiate,\n    value: function(value) {\n      return value;\n    }\n  };\n\n  /**\n   * @param {ModuleDefinition} moduleDefinition\n   * @param {Injector} injector\n   */\n  function createInitializer(moduleDefinition, injector) {\n\n    const initializers = moduleDefinition.__init__ || [];\n\n    return function() {\n      initializers.forEach(initializer => {\n\n        // eagerly resolve component (fn or string)\n        if (typeof initializer === 'string') {\n          injector.get(initializer);\n        } else {\n          injector.invoke(initializer);\n        }\n      });\n    };\n  }\n\n  /**\n   * @param {ModuleDefinition} moduleDefinition\n   */\n  function loadModule(moduleDefinition) {\n\n    const moduleExports = moduleDefinition.__exports__;\n\n    // private module\n    if (moduleExports) {\n      const nestedModules = moduleDefinition.__modules__;\n\n      const clonedModule = Object.keys(moduleDefinition).reduce((clonedModule, key) => {\n\n        if (key !== '__exports__' && key !== '__modules__' && key !== '__init__' && key !== '__depends__') {\n          clonedModule[key] = moduleDefinition[key];\n        }\n\n        return clonedModule;\n      }, Object.create(null));\n\n      const childModules = (nestedModules || []).concat(clonedModule);\n\n      const privateInjector = createChild(childModules);\n      const getFromPrivateInjector = annotate(function(key) {\n        return privateInjector.get(key);\n      });\n\n      moduleExports.forEach(function(key) {\n        providers[key] = [ getFromPrivateInjector, key, 'private', privateInjector ];\n      });\n\n      // ensure child injector initializes\n      const initializers = (moduleDefinition.__init__ || []).slice();\n\n      initializers.unshift(function() {\n        privateInjector.init();\n      });\n\n      moduleDefinition = Object.assign({}, moduleDefinition, {\n        __init__: initializers\n      });\n\n      return createInitializer(moduleDefinition, privateInjector);\n    }\n\n    // normal module\n    Object.keys(moduleDefinition).forEach(function(key) {\n\n      if (key === '__init__' || key === '__depends__') {\n        return;\n      }\n\n      const typeDeclaration = /** @type { TypedDeclaration } */ (\n        moduleDefinition[key]\n      );\n\n      if (typeDeclaration[2] === 'private') {\n        providers[key] = typeDeclaration;\n        return;\n      }\n\n      const type = typeDeclaration[0];\n      const value = typeDeclaration[1];\n\n      providers[key] = [ factoryMap[type], arrayUnwrap(type, value), type ];\n    });\n\n    return createInitializer(moduleDefinition, self);\n  }\n\n  /**\n   * @param {ModuleDefinition[]} moduleDefinitions\n   * @param {ModuleDefinition} moduleDefinition\n   *\n   * @return {ModuleDefinition[]}\n   */\n  function resolveDependencies(moduleDefinitions, moduleDefinition) {\n\n    if (moduleDefinitions.indexOf(moduleDefinition) !== -1) {\n      return moduleDefinitions;\n    }\n\n    moduleDefinitions = (moduleDefinition.__depends__ || []).reduce(resolveDependencies, moduleDefinitions);\n\n    if (moduleDefinitions.indexOf(moduleDefinition) !== -1) {\n      return moduleDefinitions;\n    }\n\n    return moduleDefinitions.concat(moduleDefinition);\n  }\n\n  /**\n   * @param {ModuleDefinition[]} moduleDefinitions\n   *\n   * @return { () => void } initializerFn\n   */\n  function bootstrap(moduleDefinitions) {\n\n    const initializers = moduleDefinitions\n      .reduce(resolveDependencies, [])\n      .map(loadModule);\n\n    let initialized = false;\n\n    return function() {\n\n      if (initialized) {\n        return;\n      }\n\n      initialized = true;\n\n      initializers.forEach(initializer => initializer());\n    };\n  }\n\n  // public API\n  this.get = get;\n  this.invoke = invoke;\n  this.instantiate = instantiate;\n  this.createChild = createChild;\n\n  // setup\n  this.init = bootstrap(modules);\n}\n\n\n// helpers ///////////////\n\nfunction arrayUnwrap(type, value) {\n  if (type !== 'value' && isArray(value)) {\n    value = annotate(value.slice());\n  }\n\n  return value;\n}\n\nexport { Injector, annotate, parseAnnotations };\n//# sourceMappingURL=index.js.map\n","var DEFAULT_RENDER_PRIORITY = 1000;\n\n/**\n * @typedef {import('../core/Types').ElementLike} Element\n * @typedef {import('../core/Types').ConnectionLike} Connection\n * @typedef {import('../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../core/EventBus').default} EventBus\n */\n\n/**\n * The base implementation of shape and connection renderers.\n *\n * @param {EventBus} eventBus\n * @param {number} [renderPriority=1000]\n */\nexport default function BaseRenderer(eventBus, renderPriority) {\n  var self = this;\n\n  renderPriority = renderPriority || DEFAULT_RENDER_PRIORITY;\n\n  eventBus.on([ 'render.shape', 'render.connection' ], renderPriority, function(evt, context) {\n    var type = evt.type,\n        element = context.element,\n        visuals = context.gfx,\n        attrs = context.attrs;\n\n    if (self.canRender(element)) {\n      if (type === 'render.shape') {\n        return self.drawShape(visuals, element, attrs);\n      } else {\n        return self.drawConnection(visuals, element, attrs);\n      }\n    }\n  });\n\n  eventBus.on([ 'render.getShapePath', 'render.getConnectionPath' ], renderPriority, function(evt, element) {\n    if (self.canRender(element)) {\n      if (evt.type === 'render.getShapePath') {\n        return self.getShapePath(element);\n      } else {\n        return self.getConnectionPath(element);\n      }\n    }\n  });\n}\n\n/**\n * Checks whether an element can be rendered.\n *\n * @param {Element} element The element to be rendered.\n *\n * @return {boolean} Whether the element can be rendered.\n */\nBaseRenderer.prototype.canRender = function(element) {};\n\n/**\n * Draws a shape.\n *\n * @param {SVGElement} visuals The SVG element to draw the shape into.\n * @param {Shape} shape The shape to be drawn.\n *\n * @return {SVGElement} The SVG element of the shape drawn.\n */\nBaseRenderer.prototype.drawShape = function(visuals, shape) {};\n\n/**\n * Draws a connection.\n *\n * @param {SVGElement} visuals The SVG element to draw the connection into.\n * @param {Connection} connection The connection to be drawn.\n *\n * @return {SVGElement} The SVG element of the connection drawn.\n */\nBaseRenderer.prototype.drawConnection = function(visuals, connection) {};\n\n/**\n * Gets the SVG path of the graphical representation of a shape.\n *\n * @param {Shape} shape The shape.\n *\n * @return {string} The SVG path of the shape.\n */\nBaseRenderer.prototype.getShapePath = function(shape) {};\n\n/**\n * Gets the SVG path of the graphical representation of a connection.\n *\n * @param {Connection} connection The connection.\n *\n * @return {string} The SVG path of the connection.\n */\nBaseRenderer.prototype.getConnectionPath = function(connection) {};\n","import {\n  isNumber\n} from 'min-dash';\n\nimport {\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\n\n/**\n * @typedef {(string|number)[]} Component\n *\n * @typedef {import('../util/Types').Point} Point\n */\n\n/**\n * @param {Component[] | Component[][]} elements\n *\n * @return {string}\n */\nexport function componentsToPath(elements) {\n  return elements.flat().join(',').replace(/,?([A-z]),?/g, '$1');\n}\n\n/**\n * @param {Point[]} points\n *\n * @return {string}\n */\nexport function toSVGPoints(points) {\n  var result = '';\n\n  for (var i = 0, p; (p = points[i]); i++) {\n    result += p.x + ',' + p.y + ' ';\n  }\n\n  return result;\n}\n\n/**\n * @param {Point} point\n *\n * @return {Component[]}\n */\nfunction move(point) {\n  return [ 'M', point.x, point.y ];\n}\n\n/**\n * @param {Point} point\n *\n * @return {Component[]}\n */\nfunction lineTo(point) {\n  return [ 'L', point.x, point.y ];\n}\n\n/**\n * @param {Point} p1\n * @param {Point} p2\n * @param {Point} p3\n *\n * @return {Component[]}\n */\nfunction curveTo(p1, p2, p3) {\n  return [ 'C', p1.x, p1.y, p2.x, p2.y, p3.x, p3.y ];\n}\n\n/**\n * @param {Point[]} waypoints\n * @param {number} [cornerRadius]\n * @return {Component[][]}\n */\nfunction drawPath(waypoints, cornerRadius) {\n  const pointCount = waypoints.length;\n\n  const path = [ move(waypoints[0]) ];\n\n  for (let i = 1; i < pointCount; i++) {\n\n    const pointBefore = waypoints[i - 1];\n    const point = waypoints[i];\n    const pointAfter = waypoints[i + 1];\n\n    if (!pointAfter || !cornerRadius) {\n      path.push(lineTo(point));\n\n      continue;\n    }\n\n    const effectiveRadius = Math.min(\n      cornerRadius,\n      vectorLength(point.x - pointBefore.x, point.y - pointBefore.y),\n      vectorLength(pointAfter.x - point.x, pointAfter.y - point.y)\n    );\n\n    if (!effectiveRadius) {\n      path.push(lineTo(point));\n\n      continue;\n    }\n\n    const beforePoint = getPointAtLength(point, pointBefore, effectiveRadius);\n    const beforePoint2 = getPointAtLength(point, pointBefore, effectiveRadius * .5);\n\n    const afterPoint = getPointAtLength(point, pointAfter, effectiveRadius);\n    const afterPoint2 = getPointAtLength(point, pointAfter, effectiveRadius * .5);\n\n    path.push(lineTo(beforePoint));\n    path.push(curveTo(beforePoint2, afterPoint2, afterPoint));\n  }\n\n  return path;\n}\n\nfunction getPointAtLength(start, end, length) {\n\n  const deltaX = end.x - start.x;\n  const deltaY = end.y - start.y;\n\n  const totalLength = vectorLength(deltaX, deltaY);\n\n  const percent = length / totalLength;\n\n  return {\n    x: start.x + deltaX * percent,\n    y: start.y + deltaY * percent\n  };\n}\n\nfunction vectorLength(x, y) {\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n}\n\n/**\n * @param {Point[]} points\n * @param {number|Object} [attrs]\n * @param {number} [radius]\n *\n * @return {SVGElement}\n */\nexport function createLine(points, attrs, radius) {\n\n  if (isNumber(attrs)) {\n    radius = attrs;\n    attrs = null;\n  }\n\n  if (!attrs) {\n    attrs = {};\n  }\n\n  const line = svgCreate('path', attrs);\n\n  if (isNumber(radius)) {\n    line.dataset.cornerRadius = String(radius);\n  }\n\n  return updateLine(line, points);\n}\n\n/**\n * @param {SVGElement} gfx\n * @param {Point[]} points\n *\n * @return {SVGElement}\n */\nexport function updateLine(gfx, points) {\n\n  const cornerRadius = parseInt(gfx.dataset.cornerRadius, 10) || 0;\n\n  svgAttr(gfx, {\n    d: componentsToPath(drawPath(points, cornerRadius))\n  });\n\n  return gfx;\n}\n","import {\n  assign,\n  filter,\n  find,\n  isArray,\n  isNumber,\n  isObject,\n  isUndefined,\n  groupBy,\n  forEach\n} from 'min-dash';\n\n/**\n * @typedef {import('../model/Types').Connection} Connection\n * @typedef {import('../model/Types').Element} Element\n * @typedef {import('../model/Types').Shape} Shape\n *\n * @typedef {import('../util/Types').Rect} Rect\n *\n * @typedef { {\n *   allShapes: Record<string, Shape>,\n *   allConnections: Record<string, Connection>,\n *   topLevel: Record<string, Element>,\n *   enclosedConnections: Record<string, Connection>,\n *   enclosedElements: Record<string, Element>\n * } } Closure\n */\n\n/**\n * Get parent elements.\n *\n * @param {Element[]} elements\n *\n * @return {Element[]}\n */\nexport function getParents(elements) {\n\n  // find elements that are not children of any other elements\n  return filter(elements, function(element) {\n    return !find(elements, function(e) {\n      return e !== element && getParent(element, e);\n    });\n  });\n}\n\n\nfunction getParent(element, parent) {\n  if (!parent) {\n    return;\n  }\n\n  if (element === parent) {\n    return parent;\n  }\n\n  if (!element.parent) {\n    return;\n  }\n\n  return getParent(element.parent, parent);\n}\n\n\n/**\n * Adds an element to a collection and returns true if the\n * element was added.\n *\n * @param {Object[]} elements\n * @param {Object} element\n * @param {boolean} [unique]\n */\nexport function add(elements, element, unique) {\n  var canAdd = !unique || elements.indexOf(element) === -1;\n\n  if (canAdd) {\n    elements.push(element);\n  }\n\n  return canAdd;\n}\n\n\n/**\n * Iterate over each element in a collection, calling the iterator function `fn`\n * with (element, index, recursionDepth).\n *\n * Recurse into all elements that are returned by `fn`.\n *\n * @param {Element|Element[]} elements\n * @param {(element: Element, index: number, depth: number) => Element[] | boolean | undefined} fn\n * @param {number} [depth] maximum recursion depth\n */\nexport function eachElement(elements, fn, depth) {\n\n  depth = depth || 0;\n\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  forEach(elements, function(s, i) {\n    var filter = fn(s, i, depth);\n\n    if (isArray(filter) && filter.length) {\n      eachElement(filter, fn, depth + 1);\n    }\n  });\n}\n\n\n/**\n * Collects self + child elements up to a given depth from a list of elements.\n *\n * @param {Element|Element[]} elements the elements to select the children from\n * @param {boolean} unique whether to return a unique result set (no duplicates)\n * @param {number} maxDepth the depth to search through or -1 for infinite\n *\n * @return {Element[]} found elements\n */\nexport function selfAndChildren(elements, unique, maxDepth) {\n  var result = [],\n      processedChildren = [];\n\n  eachElement(elements, function(element, i, depth) {\n    add(result, element, unique);\n\n    var children = element.children;\n\n    // max traversal depth not reached yet\n    if (maxDepth === -1 || depth < maxDepth) {\n\n      // children exist && children not yet processed\n      if (children && add(processedChildren, children, unique)) {\n        return children;\n      }\n    }\n  });\n\n  return result;\n}\n\n/**\n * Return self + direct children for a number of elements\n *\n * @param {Element[]} elements to query\n * @param {boolean} [allowDuplicates] to allow duplicates in the result set\n *\n * @return {Element[]} the collected elements\n */\nexport function selfAndDirectChildren(elements, allowDuplicates) {\n  return selfAndChildren(elements, !allowDuplicates, 1);\n}\n\n\n/**\n * Return self + ALL children for a number of elements\n *\n * @param {Element[]} elements to query\n * @param {boolean} [allowDuplicates] to allow duplicates in the result set\n *\n * @return {Element[]} the collected elements\n */\nexport function selfAndAllChildren(elements, allowDuplicates) {\n  return selfAndChildren(elements, !allowDuplicates, -1);\n}\n\n\n/**\n * Gets the the closure for all selected elements,\n * their enclosed children and connections.\n *\n * @param {Element[]} elements\n * @param {boolean} [isTopLevel=true]\n * @param {Closure} [closure]\n *\n * @return {Closure} newClosure\n */\nexport function getClosure(elements, isTopLevel, closure) {\n\n  if (isUndefined(isTopLevel)) {\n    isTopLevel = true;\n  }\n\n  if (isObject(isTopLevel)) {\n    closure = isTopLevel;\n    isTopLevel = true;\n  }\n\n\n  closure = closure || {};\n\n  var allShapes = copyObject(closure.allShapes),\n      allConnections = copyObject(closure.allConnections),\n      enclosedElements = copyObject(closure.enclosedElements),\n      enclosedConnections = copyObject(closure.enclosedConnections);\n\n  var topLevel = copyObject(\n    closure.topLevel,\n    isTopLevel && groupBy(elements, function(e) { return e.id; })\n  );\n\n\n  function handleConnection(c) {\n    if (topLevel[c.source.id] && topLevel[c.target.id]) {\n      topLevel[c.id] = [ c ];\n    }\n\n    // not enclosed as a child, but maybe logically\n    // (connecting two moved elements?)\n    if (allShapes[c.source.id] && allShapes[c.target.id]) {\n      enclosedConnections[c.id] = enclosedElements[c.id] = c;\n    }\n\n    allConnections[c.id] = c;\n  }\n\n  function handleElement(element) {\n\n    enclosedElements[element.id] = element;\n\n    if (element.waypoints) {\n\n      // remember connection\n      enclosedConnections[element.id] = allConnections[element.id] = element;\n    } else {\n\n      // remember shape\n      allShapes[element.id] = element;\n\n      // remember all connections\n      forEach(element.incoming, handleConnection);\n\n      forEach(element.outgoing, handleConnection);\n\n      // recurse into children\n      return element.children;\n    }\n  }\n\n  eachElement(elements, handleElement);\n\n  return {\n    allShapes: allShapes,\n    allConnections: allConnections,\n    topLevel: topLevel,\n    enclosedConnections: enclosedConnections,\n    enclosedElements: enclosedElements\n  };\n}\n\n/**\n * Returns the surrounding bbox for all elements in\n * the array or the element primitive.\n *\n * @param {Element|Element[]} elements\n * @param {boolean} [stopRecursion=false]\n *\n * @return {Rect}\n */\nexport function getBBox(elements, stopRecursion) {\n\n  stopRecursion = !!stopRecursion;\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  var minX,\n      minY,\n      maxX,\n      maxY;\n\n  forEach(elements, function(element) {\n\n    // If element is a connection the bbox must be computed first\n    var bbox = element;\n    if (element.waypoints && !stopRecursion) {\n      bbox = getBBox(element.waypoints, true);\n    }\n\n    var x = bbox.x,\n        y = bbox.y,\n        height = bbox.height || 0,\n        width = bbox.width || 0;\n\n    if (x < minX || minX === undefined) {\n      minX = x;\n    }\n    if (y < minY || minY === undefined) {\n      minY = y;\n    }\n\n    if ((x + width) > maxX || maxX === undefined) {\n      maxX = x + width;\n    }\n    if ((y + height) > maxY || maxY === undefined) {\n      maxY = y + height;\n    }\n  });\n\n  return {\n    x: minX,\n    y: minY,\n    height: maxY - minY,\n    width: maxX - minX\n  };\n}\n\n\n/**\n * Returns all elements that are enclosed from the bounding box.\n *\n *   * If bbox.(width|height) is not specified the method returns\n *     all elements with element.x/y > bbox.x/y\n *   * If only bbox.x or bbox.y is specified, method return all elements with\n *     e.x > bbox.x or e.y > bbox.y\n *\n * @param {Element[]} elements List of Elements to search through\n * @param {Rect} bbox the enclosing bbox.\n *\n * @return {Element[]} enclosed elements\n */\nexport function getEnclosedElements(elements, bbox) {\n\n  var filteredElements = {};\n\n  forEach(elements, function(element) {\n\n    var e = element;\n\n    if (e.waypoints) {\n      e = getBBox(e);\n    }\n\n    if (!isNumber(bbox.y) && (e.x > bbox.x)) {\n      filteredElements[element.id] = element;\n    }\n    if (!isNumber(bbox.x) && (e.y > bbox.y)) {\n      filteredElements[element.id] = element;\n    }\n    if (e.x > bbox.x && e.y > bbox.y) {\n      if (isNumber(bbox.width) && isNumber(bbox.height) &&\n          e.width + e.x < bbox.width + bbox.x &&\n          e.height + e.y < bbox.height + bbox.y) {\n\n        filteredElements[element.id] = element;\n      } else if (!isNumber(bbox.width) || !isNumber(bbox.height)) {\n        filteredElements[element.id] = element;\n      }\n    }\n  });\n\n  return filteredElements;\n}\n\n/**\n * Get the element's type\n *\n * @param {Element} element\n *\n * @return {'connection' | 'shape' | 'root'}\n */\nexport function getType(element) {\n\n  if ('waypoints' in element) {\n    return 'connection';\n  }\n\n  if ('x' in element) {\n    return 'shape';\n  }\n\n  return 'root';\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function isFrameElement(element) {\n  return !!(element && element.isFrame);\n}\n\n// helpers ///////////////////////////////\n\nfunction copyObject(src1, src2) {\n  return assign({}, src1 || {}, src2 || {});\n}\n","import inherits from 'inherits-browser';\n\nimport BaseRenderer from './BaseRenderer';\n\nimport {\n  componentsToPath,\n  createLine\n} from '../util/RenderUtil';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport { assign } from 'min-dash';\n\nimport {\n  isFrameElement\n} from '../util/Elements';\n\n/**\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./Styles').default} Styles\n */\n\n// apply default renderer with lowest possible priority\n// so that it only kicks in if noone else could render\nvar DEFAULT_RENDER_PRIORITY = 1;\n\n/**\n * The default renderer used for shapes and connections.\n *\n * @param {EventBus} eventBus\n * @param {Styles} styles\n */\nexport default function DefaultRenderer(eventBus, styles) {\n\n  BaseRenderer.call(this, eventBus, DEFAULT_RENDER_PRIORITY);\n\n  this.CONNECTION_STYLE = styles.style([ 'no-fill' ], { strokeWidth: 5, stroke: 'fuchsia' });\n  this.SHAPE_STYLE = styles.style({ fill: 'white', stroke: 'fuchsia', strokeWidth: 2 });\n  this.FRAME_STYLE = styles.style([ 'no-fill' ], { stroke: 'fuchsia', strokeDasharray: 4, strokeWidth: 2 });\n}\n\ninherits(DefaultRenderer, BaseRenderer);\n\n\n/**\n * @private\n */\nDefaultRenderer.prototype.canRender = function() {\n  return true;\n};\n\n/**\n * @private\n */\nDefaultRenderer.prototype.drawShape = function drawShape(visuals, element, attrs) {\n  var rect = svgCreate('rect');\n\n  svgAttr(rect, {\n    x: 0,\n    y: 0,\n    width: element.width || 0,\n    height: element.height || 0\n  });\n\n  if (isFrameElement(element)) {\n    svgAttr(rect, assign({}, this.FRAME_STYLE, attrs || {}));\n  } else {\n    svgAttr(rect, assign({}, this.SHAPE_STYLE, attrs || {}));\n  }\n\n  svgAppend(visuals, rect);\n\n  return rect;\n};\n\n/**\n * @private\n */\nDefaultRenderer.prototype.drawConnection = function drawConnection(visuals, connection, attrs) {\n\n  var line = createLine(connection.waypoints, assign({}, this.CONNECTION_STYLE, attrs || {}));\n  svgAppend(visuals, line);\n\n  return line;\n};\n\n/**\n * @private\n */\nDefaultRenderer.prototype.getShapePath = function getShapePath(shape) {\n\n  var x = shape.x,\n      y = shape.y,\n      width = shape.width,\n      height = shape.height;\n\n  var shapePath = [\n    [ 'M', x, y ],\n    [ 'l', width, 0 ],\n    [ 'l', 0, height ],\n    [ 'l', -width, 0 ],\n    [ 'z' ]\n  ];\n\n  return componentsToPath(shapePath);\n};\n\n/**\n * @private\n */\nDefaultRenderer.prototype.getConnectionPath = function getConnectionPath(connection) {\n  var waypoints = connection.waypoints;\n\n  var idx, point, connectionPath = [];\n\n  for (idx = 0; (point = waypoints[idx]); idx++) {\n\n    // take invisible docking into account\n    // when creating the path\n    point = point.original || point;\n\n    connectionPath.push([ idx === 0 ? 'M' : 'L', point.x, point.y ]);\n  }\n\n  return componentsToPath(connectionPath);\n};\n\nDefaultRenderer.$inject = [ 'eventBus', 'styles' ];\n","import {\n  isArray,\n  assign,\n  reduce\n} from 'min-dash';\n\n\n/**\n * A component that manages shape styles\n */\nexport default function Styles() {\n\n  var defaultTraits = {\n\n    'no-fill': {\n      fill: 'none'\n    },\n    'no-border': {\n      strokeOpacity: 0.0\n    },\n    'no-events': {\n      pointerEvents: 'none'\n    }\n  };\n\n  var self = this;\n\n  /**\n   * Builds a style definition from a className, a list of traits and an object\n   * of additional attributes.\n   *\n   * @param {string} className\n   * @param {string[]} [traits]\n   * @param {Object} [additionalAttrs]\n   *\n   * @return {Object} the style definition\n   */\n  this.cls = function(className, traits, additionalAttrs) {\n    var attrs = this.style(traits, additionalAttrs);\n\n    return assign(attrs, { 'class': className });\n  };\n\n  /**\n   * Builds a style definition from a list of traits and an object of additional\n   * attributes.\n   *\n   * @param {string[]} [traits]\n   * @param {Object} additionalAttrs\n   *\n   * @return {Object} the style definition\n   */\n  this.style = function(traits, additionalAttrs) {\n\n    if (!isArray(traits) && !additionalAttrs) {\n      additionalAttrs = traits;\n      traits = [];\n    }\n\n    var attrs = reduce(traits, function(attrs, t) {\n      return assign(attrs, defaultTraits[t] || {});\n    }, {});\n\n    return additionalAttrs ? assign(attrs, additionalAttrs) : attrs;\n  };\n\n\n  /**\n   * Computes a style definition from a list of traits and an object of\n   * additional attributes, with custom style definition object.\n   *\n   * @param {Object} custom\n   * @param {string[]} [traits]\n   * @param {Object} defaultStyles\n   *\n   * @return {Object} the style definition\n   */\n  this.computeStyle = function(custom, traits, defaultStyles) {\n    if (!isArray(traits)) {\n      defaultStyles = traits;\n      traits = [];\n    }\n\n    return self.style(traits || [], assign({}, defaultStyles, custom || {}));\n  };\n}\n","import DefaultRenderer from './DefaultRenderer';\nimport Styles from './Styles';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'defaultRenderer' ],\n  defaultRenderer: [ 'type', DefaultRenderer ],\n  styles: [ 'type', Styles ]\n};\n","/**\n * Failsafe remove an element from a collection\n *\n * @param {Array<Object>} [collection]\n * @param {Object} [element]\n *\n * @return {number} the previous index of the element\n */\nexport function remove(collection, element) {\n\n  if (!collection || !element) {\n    return -1;\n  }\n\n  var idx = collection.indexOf(element);\n\n  if (idx !== -1) {\n    collection.splice(idx, 1);\n  }\n\n  return idx;\n}\n\n/**\n * Fail save add an element to the given connection, ensuring\n * it does not yet exist.\n *\n * @param {Array<Object>} collection\n * @param {Object} element\n * @param {number} [idx]\n */\nexport function add(collection, element, idx) {\n\n  if (!collection || !element) {\n    return;\n  }\n\n  if (typeof idx !== 'number') {\n    idx = -1;\n  }\n\n  var currentIdx = collection.indexOf(element);\n\n  if (currentIdx !== -1) {\n\n    if (currentIdx === idx) {\n\n      // nothing to do, position has not changed\n      return;\n    } else {\n\n      if (idx !== -1) {\n\n        // remove from current position\n        collection.splice(currentIdx, 1);\n      } else {\n\n        // already exists in collection\n        return;\n      }\n    }\n  }\n\n  if (idx !== -1) {\n\n    // insert at specified position\n    collection.splice(idx, 0, element);\n  } else {\n\n    // push to end\n    collection.push(element);\n  }\n}\n\n\n/**\n * Fail save get the index of an element in a collection.\n *\n * @param {Array<Object>} collection\n * @param {Object} element\n *\n * @return {number} the index or -1 if collection or element do\n *                  not exist or the element is not contained.\n */\nexport function indexOf(collection, element) {\n\n  if (!collection || !element) {\n    return -1;\n  }\n\n  return collection.indexOf(element);\n}\n","import {\n  every\n} from 'min-dash';\n\n/**\n * @typedef {import('../util/Types').Axis} Axis\n * @typedef {import('../util/Types').Point} Point\n * @typedef {import('../util/Types').Rect} Rect\n */\n\n/**\n * Computes the distance between two points.\n *\n * @param {Point} a\n * @param {Point} b\n *\n * @return {number} The distance between the two points.\n */\nexport function pointDistance(a, b) {\n  if (!a || !b) {\n    return -1;\n  }\n\n  return Math.sqrt(\n    Math.pow(a.x - b.x, 2) +\n    Math.pow(a.y - b.y, 2)\n  );\n}\n\n\n/**\n * Returns true if the point r is on the line between p and q.\n *\n * @param {Point} p\n * @param {Point} q\n * @param {Point} r\n * @param {number} [accuracy=5] The accuracy with which to check (lower is better).\n *\n * @return {boolean}\n */\nexport function pointsOnLine(p, q, r, accuracy) {\n\n  if (typeof accuracy === 'undefined') {\n    accuracy = 5;\n  }\n\n  if (!p || !q || !r) {\n    return false;\n  }\n\n  var val = (q.x - p.x) * (r.y - p.y) - (q.y - p.y) * (r.x - p.x),\n      dist = pointDistance(p, q);\n\n  // @see http://stackoverflow.com/a/907491/412190\n  return Math.abs(val / dist) <= accuracy;\n}\n\n\nvar ALIGNED_THRESHOLD = 2;\n\n/**\n * Check whether two points are horizontally or vertically aligned.\n *\n * @param {Point[]|Point} a\n * @param {Point} [b]\n *\n * @return {string|boolean} If and how the two points are aligned ('h', 'v' or `false`).\n */\nexport function pointsAligned(a, b) {\n  var points = Array.from(arguments).flat();\n\n  const axisMap = {\n    'x': 'v',\n    'y': 'h'\n  };\n\n  for (const [ axis, orientation ] of Object.entries(axisMap)) {\n    if (pointsAlignedOnAxis(axis, points)) {\n      return orientation;\n    }\n  }\n\n  return false;\n}\n\n/**\n * @param {Axis} axis\n * @param {Point[]} points\n *\n * @return {boolean}\n */\nexport function pointsAlignedOnAxis(axis, points) {\n  const referencePoint = points[0];\n\n  return every(points, function(point) {\n    return Math.abs(referencePoint[axis] - point[axis]) <= ALIGNED_THRESHOLD;\n  });\n}\n\n/**\n * Returns true if the point p is inside the rectangle rect\n *\n * @param {Point} p\n * @param {Rect} rect\n * @param {number} tolerance\n *\n * @return {boolean}\n */\nexport function pointInRect(p, rect, tolerance) {\n  tolerance = tolerance || 0;\n\n  return p.x > rect.x - tolerance &&\n         p.y > rect.y - tolerance &&\n         p.x < rect.x + rect.width + tolerance &&\n         p.y < rect.y + rect.height + tolerance;\n}\n\n/**\n * Returns a point in the middle of points p and q\n *\n * @param {Point} p\n * @param {Point} q\n *\n * @return {Point} The mid point between the two points.\n */\nexport function getMidPoint(p, q) {\n  return {\n    x: Math.round(p.x + ((q.x - p.x) / 2.0)),\n    y: Math.round(p.y + ((q.y - p.y) / 2.0))\n  };\n}\n","/**\n * This file contains source code adapted from Snap.svg (licensed Apache-2.0).\n *\n * @see https://github.com/adobe-webplatform/Snap.svg/blob/master/src/path.js\n */\n\n/* eslint no-fallthrough: \"off\" */\n\nvar p2s = /,?([a-z]),?/gi,\n    toFloat = parseFloat,\n    math = Math,\n    PI = math.PI,\n    mmin = math.min,\n    mmax = math.max,\n    pow = math.pow,\n    abs = math.abs,\n    pathCommand = /([a-z])[\\s,]*((-?\\d*\\.?\\d*(?:e[-+]?\\d+)?[\\s]*,?[\\s]*)+)/ig,\n    pathValues = /(-?\\d*\\.?\\d*(?:e[-+]?\\d+)?)[\\s]*,?[\\s]*/ig;\n\nvar isArray = Array.isArray || function(o) { return o instanceof Array; };\n\nfunction hasProperty(obj, property) {\n  return Object.prototype.hasOwnProperty.call(obj, property);\n}\n\nfunction clone(obj) {\n\n  if (typeof obj == 'function' || Object(obj) !== obj) {\n    return obj;\n  }\n\n  var res = new obj.constructor;\n\n  for (var key in obj) {\n    if (hasProperty(obj, key)) {\n      res[key] = clone(obj[key]);\n    }\n  }\n\n  return res;\n}\n\nfunction repush(array, item) {\n  for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\n    return array.push(array.splice(i, 1)[0]);\n  }\n}\n\nfunction cacher(f) {\n\n  function newf() {\n\n    var arg = Array.prototype.slice.call(arguments, 0),\n        args = arg.join('\\u2400'),\n        cache = newf.cache = newf.cache || {},\n        count = newf.count = newf.count || [];\n\n    if (hasProperty(cache, args)) {\n      repush(count, args);\n      return cache[args];\n    }\n\n    count.length >= 1e3 && delete cache[count.shift()];\n    count.push(args);\n    cache[args] = f(...arguments);\n\n    return cache[args];\n  }\n  return newf;\n}\n\nfunction parsePathString(pathString) {\n\n  if (!pathString) {\n    return null;\n  }\n\n  var pth = paths(pathString);\n\n  if (pth.arr) {\n    return clone(pth.arr);\n  }\n\n  var paramCounts = { a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0 },\n      data = [];\n\n  if (isArray(pathString) && isArray(pathString[0])) { // rough assumption\n    data = clone(pathString);\n  }\n\n  if (!data.length) {\n\n    String(pathString).replace(pathCommand, function(a, b, c) {\n      var params = [],\n          name = b.toLowerCase();\n\n      c.replace(pathValues, function(a, b) {\n        b && params.push(+b);\n      });\n\n      if (name == 'm' && params.length > 2) {\n        data.push([ b, ...params.splice(0, 2) ]);\n        name = 'l';\n        b = b == 'm' ? 'l' : 'L';\n      }\n\n      while (params.length >= paramCounts[name]) {\n        data.push([ b, ...params.splice(0, paramCounts[name]) ]);\n        if (!paramCounts[name]) {\n          break;\n        }\n      }\n    });\n  }\n\n  data.toString = paths.toString;\n  pth.arr = clone(data);\n\n  return data;\n}\n\nfunction paths(ps) {\n  var p = paths.ps = paths.ps || {};\n\n  if (p[ps]) {\n    p[ps].sleep = 100;\n  } else {\n    p[ps] = {\n      sleep: 100\n    };\n  }\n\n  setTimeout(function() {\n    for (var key in p) {\n      if (hasProperty(p, key) && key != ps) {\n        p[key].sleep--;\n        !p[key].sleep && delete p[key];\n      }\n    }\n  });\n\n  return p[ps];\n}\n\nfunction rectBBox(x, y, width, height) {\n\n  if (arguments.length === 1) {\n    y = x.y;\n    width = x.width;\n    height = x.height;\n    x = x.x;\n  }\n\n  return {\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    x2: x + width,\n    y2: y + height\n  };\n}\n\nfunction pathToString() {\n  return this.join(',').replace(p2s, '$1');\n}\n\nfunction pathClone(pathArray) {\n  var res = clone(pathArray);\n  res.toString = pathToString;\n  return res;\n}\n\nfunction findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n  var t1 = 1 - t,\n      t13 = pow(t1, 3),\n      t12 = pow(t1, 2),\n      t2 = t * t,\n      t3 = t2 * t,\n      x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\n      y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y;\n\n  return {\n    x: fixError(x),\n    y: fixError(y)\n  };\n}\n\nfunction bezierBBox(points) {\n\n  var bbox = curveBBox(...points);\n\n  return rectBBox(\n    bbox.x0,\n    bbox.y0,\n    bbox.x1 - bbox.x0,\n    bbox.y1 - bbox.y0\n  );\n}\n\nfunction isPointInsideBBox(bbox, x, y) {\n  return x >= bbox.x &&\n    x <= bbox.x + bbox.width &&\n    y >= bbox.y &&\n    y <= bbox.y + bbox.height;\n}\n\nfunction isBBoxIntersect(bbox1, bbox2) {\n  bbox1 = rectBBox(bbox1);\n  bbox2 = rectBBox(bbox2);\n  return isPointInsideBBox(bbox2, bbox1.x, bbox1.y)\n    || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y)\n    || isPointInsideBBox(bbox2, bbox1.x, bbox1.y2)\n    || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y2)\n    || isPointInsideBBox(bbox1, bbox2.x, bbox2.y)\n    || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y)\n    || isPointInsideBBox(bbox1, bbox2.x, bbox2.y2)\n    || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y2)\n    || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x\n        || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)\n    && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y\n        || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n}\n\nfunction base3(t, p1, p2, p3, p4) {\n  var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\n      t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n  return t * t2 - 3 * p1 + 3 * p2;\n}\n\nfunction bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\n\n  if (z == null) {\n    z = 1;\n  }\n\n  z = z > 1 ? 1 : z < 0 ? 0 : z;\n\n  var z2 = z / 2,\n      n = 12,\n      Tvalues = [ -.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816 ],\n      Cvalues = [ 0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472 ],\n      sum = 0;\n\n  for (var i = 0; i < n; i++) {\n    var ct = z2 * Tvalues[i] + z2,\n        xbase = base3(ct, x1, x2, x3, x4),\n        ybase = base3(ct, y1, y2, y3, y4),\n        comb = xbase * xbase + ybase * ybase;\n\n    sum += Cvalues[i] * math.sqrt(comb);\n  }\n\n  return z2 * sum;\n}\n\n\nfunction intersectLines(x1, y1, x2, y2, x3, y3, x4, y4) {\n\n  if (\n    mmax(x1, x2) < mmin(x3, x4) ||\n      mmin(x1, x2) > mmax(x3, x4) ||\n      mmax(y1, y2) < mmin(y3, y4) ||\n      mmin(y1, y2) > mmax(y3, y4)\n  ) {\n    return;\n  }\n\n  var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n      ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n      denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n  if (!denominator) {\n    return;\n  }\n\n  var px = fixError(nx / denominator),\n      py = fixError(ny / denominator),\n      px2 = +px.toFixed(2),\n      py2 = +py.toFixed(2);\n\n  if (\n    px2 < +mmin(x1, x2).toFixed(2) ||\n      px2 > +mmax(x1, x2).toFixed(2) ||\n      px2 < +mmin(x3, x4).toFixed(2) ||\n      px2 > +mmax(x3, x4).toFixed(2) ||\n      py2 < +mmin(y1, y2).toFixed(2) ||\n      py2 > +mmax(y1, y2).toFixed(2) ||\n      py2 < +mmin(y3, y4).toFixed(2) ||\n      py2 > +mmax(y3, y4).toFixed(2)\n  ) {\n    return;\n  }\n\n  return { x: px, y: py };\n}\n\nfunction fixError(number) {\n  return Math.round(number * 100000000000) / 100000000000;\n}\n\nfunction findBezierIntersections(bez1, bez2, justCount) {\n  var bbox1 = bezierBBox(bez1),\n      bbox2 = bezierBBox(bez2);\n\n  if (!isBBoxIntersect(bbox1, bbox2)) {\n    return justCount ? 0 : [];\n  }\n\n  // As an optimization, lines will have only 1 segment\n\n  var l1 = bezlen(...bez1),\n      l2 = bezlen(...bez2),\n      n1 = isLine(bez1) ? 1 : ~~(l1 / 5) || 1,\n      n2 = isLine(bez2) ? 1 : ~~(l2 / 5) || 1,\n      dots1 = [],\n      dots2 = [],\n      xy = {},\n      res = justCount ? 0 : [];\n\n  for (var i = 0; i < n1 + 1; i++) {\n    var p = findDotsAtSegment(...bez1, i / n1);\n    dots1.push({ x: p.x, y: p.y, t: i / n1 });\n  }\n\n  for (i = 0; i < n2 + 1; i++) {\n    p = findDotsAtSegment(...bez2, i / n2);\n    dots2.push({ x: p.x, y: p.y, t: i / n2 });\n  }\n\n  for (i = 0; i < n1; i++) {\n\n    for (var j = 0; j < n2; j++) {\n      var di = dots1[i],\n          di1 = dots1[i + 1],\n          dj = dots2[j],\n          dj1 = dots2[j + 1],\n          ci = abs(di1.x - di.x) < .01 ? 'y' : 'x',\n          cj = abs(dj1.x - dj.x) < .01 ? 'y' : 'x',\n          is = intersectLines(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y),\n          key;\n\n      if (is) {\n        key = is.x.toFixed(9) + '#' + is.y.toFixed(9);\n\n        if (xy[key]) {\n          continue;\n        }\n\n        xy[key] = true;\n\n        var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\n            t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n\n        if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {\n\n          if (justCount) {\n            res++;\n          } else {\n            res.push({\n              x: is.x,\n              y: is.y,\n              t1: t1,\n              t2: t2\n            });\n          }\n        }\n      }\n    }\n  }\n\n  return res;\n}\n\n\n/**\n * Find or counts the intersections between two SVG paths.\n *\n * Returns a number in counting mode and a list of intersections otherwise.\n *\n * A single intersection entry contains the intersection coordinates (x, y)\n * as well as additional information regarding the intersecting segments\n * on each path (segment1, segment2) and the relative location of the\n * intersection on these segments (t1, t2).\n *\n * The path may be an SVG path string or a list of path components\n * such as `[ [ 'M', 0, 10 ], [ 'L', 20, 0 ] ]`.\n *\n * @example\n *\n * var intersections = findPathIntersections(\n *   'M0,0L100,100',\n *   [ [ 'M', 0, 100 ], [ 'L', 100, 0 ] ]\n * );\n *\n * // intersections = [\n * //   { x: 50, y: 50, segment1: 1, segment2: 1, t1: 0.5, t2: 0.5 }\n * // ]\n *\n * @param {String|Array<PathDef>} path1\n * @param {String|Array<PathDef>} path2\n * @param {Boolean} [justCount=false]\n *\n * @return {Array<Intersection>|Number}\n */\nexport default function findPathIntersections(path1, path2, justCount) {\n  path1 = pathToCurve(path1);\n  path2 = pathToCurve(path2);\n\n  var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\n      res = justCount ? 0 : [];\n\n  for (var i = 0, ii = path1.length; i < ii; i++) {\n    var pi = path1[i];\n\n    if (pi[0] == 'M') {\n      x1 = x1m = pi[1];\n      y1 = y1m = pi[2];\n    } else {\n\n      if (pi[0] == 'C') {\n        bez1 = [ x1, y1, ...pi.slice(1) ];\n        x1 = bez1[6];\n        y1 = bez1[7];\n      } else {\n        bez1 = [ x1, y1, x1, y1, x1m, y1m, x1m, y1m ];\n        x1 = x1m;\n        y1 = y1m;\n      }\n\n      for (var j = 0, jj = path2.length; j < jj; j++) {\n        var pj = path2[j];\n\n        if (pj[0] == 'M') {\n          x2 = x2m = pj[1];\n          y2 = y2m = pj[2];\n        } else {\n\n          if (pj[0] == 'C') {\n            bez2 = [ x2, y2, ...pj.slice(1) ];\n            x2 = bez2[6];\n            y2 = bez2[7];\n          } else {\n            bez2 = [ x2, y2, x2, y2, x2m, y2m, x2m, y2m ];\n            x2 = x2m;\n            y2 = y2m;\n          }\n\n          var intr = findBezierIntersections(bez1, bez2, justCount);\n\n          if (justCount) {\n            res += intr;\n          } else {\n\n            for (var k = 0, kk = intr.length; k < kk; k++) {\n              intr[k].segment1 = i;\n              intr[k].segment2 = j;\n              intr[k].bez1 = bez1;\n              intr[k].bez2 = bez2;\n            }\n\n            res = res.concat(intr);\n          }\n        }\n      }\n    }\n  }\n\n  return res;\n}\n\n\nfunction pathToAbsolute(pathArray) {\n  var pth = paths(pathArray);\n\n  if (pth.abs) {\n    return pathClone(pth.abs);\n  }\n\n  if (!isArray(pathArray) || !isArray(pathArray && pathArray[0])) { // rough assumption\n    pathArray = parsePathString(pathArray);\n  }\n\n  if (!pathArray || !pathArray.length) {\n    return [ [ 'M', 0, 0 ] ];\n  }\n\n  var res = [],\n      x = 0,\n      y = 0,\n      mx = 0,\n      my = 0,\n      start = 0,\n      pa0;\n\n  if (pathArray[0][0] == 'M') {\n    x = +pathArray[0][1];\n    y = +pathArray[0][2];\n    mx = x;\n    my = y;\n    start++;\n    res[0] = [ 'M', x, y ];\n  }\n\n  for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\n    res.push(r = []);\n    pa = pathArray[i];\n    pa0 = pa[0];\n\n    if (pa0 != pa0.toUpperCase()) {\n      r[0] = pa0.toUpperCase();\n\n      switch (r[0]) {\n      case 'A':\n        r[1] = pa[1];\n        r[2] = pa[2];\n        r[3] = pa[3];\n        r[4] = pa[4];\n        r[5] = pa[5];\n        r[6] = +pa[6] + x;\n        r[7] = +pa[7] + y;\n        break;\n      case 'V':\n        r[1] = +pa[1] + y;\n        break;\n      case 'H':\n        r[1] = +pa[1] + x;\n        break;\n      case 'M':\n        mx = +pa[1] + x;\n        my = +pa[2] + y;\n      default:\n        for (var j = 1, jj = pa.length; j < jj; j++) {\n          r[j] = +pa[j] + ((j % 2) ? x : y);\n        }\n      }\n    } else {\n      for (var k = 0, kk = pa.length; k < kk; k++) {\n        r[k] = pa[k];\n      }\n    }\n    pa0 = pa0.toUpperCase();\n\n    switch (r[0]) {\n    case 'Z':\n      x = +mx;\n      y = +my;\n      break;\n    case 'H':\n      x = r[1];\n      break;\n    case 'V':\n      y = r[1];\n      break;\n    case 'M':\n      mx = r[r.length - 2];\n      my = r[r.length - 1];\n    default:\n      x = r[r.length - 2];\n      y = r[r.length - 1];\n    }\n  }\n\n  res.toString = pathToString;\n  pth.abs = pathClone(res);\n\n  return res;\n}\n\nfunction isLine(bez) {\n  return (\n    bez[0] === bez[2] &&\n    bez[1] === bez[3] &&\n    bez[4] === bez[6] &&\n    bez[5] === bez[7]\n  );\n}\n\nfunction lineToCurve(x1, y1, x2, y2) {\n  return [\n    x1, y1, x2,\n    y2, x2, y2\n  ];\n}\n\nfunction qubicToCurve(x1, y1, ax, ay, x2, y2) {\n  var _13 = 1 / 3,\n      _23 = 2 / 3;\n\n  return [\n    _13 * x1 + _23 * ax,\n    _13 * y1 + _23 * ay,\n    _13 * x2 + _23 * ax,\n    _13 * y2 + _23 * ay,\n    x2,\n    y2\n  ];\n}\n\nfunction arcToCurve(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n\n  // for more information of where this math came from visit:\n  // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n  var _120 = PI * 120 / 180,\n      rad = PI / 180 * (+angle || 0),\n      res = [],\n      xy,\n      rotate = cacher(function(x, y, rad) {\n        var X = x * math.cos(rad) - y * math.sin(rad),\n            Y = x * math.sin(rad) + y * math.cos(rad);\n\n        return { x: X, y: Y };\n      });\n\n  if (!recursive) {\n    xy = rotate(x1, y1, -rad);\n    x1 = xy.x;\n    y1 = xy.y;\n    xy = rotate(x2, y2, -rad);\n    x2 = xy.x;\n    y2 = xy.y;\n\n    var x = (x1 - x2) / 2,\n        y = (y1 - y2) / 2;\n\n    var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n\n    if (h > 1) {\n      h = math.sqrt(h);\n      rx = h * rx;\n      ry = h * ry;\n    }\n\n    var rx2 = rx * rx,\n        ry2 = ry * ry,\n        k = (large_arc_flag == sweep_flag ? -1 : 1) *\n            math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n        cx = k * rx * y / ry + (x1 + x2) / 2,\n        cy = k * -ry * x / rx + (y1 + y2) / 2,\n        f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n        f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n\n    f1 = x1 < cx ? PI - f1 : f1;\n    f2 = x2 < cx ? PI - f2 : f2;\n    f1 < 0 && (f1 = PI * 2 + f1);\n    f2 < 0 && (f2 = PI * 2 + f2);\n\n    if (sweep_flag && f1 > f2) {\n      f1 = f1 - PI * 2;\n    }\n    if (!sweep_flag && f2 > f1) {\n      f2 = f2 - PI * 2;\n    }\n  } else {\n    f1 = recursive[0];\n    f2 = recursive[1];\n    cx = recursive[2];\n    cy = recursive[3];\n  }\n\n  var df = f2 - f1;\n\n  if (abs(df) > _120) {\n    var f2old = f2,\n        x2old = x2,\n        y2old = y2;\n\n    f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n    x2 = cx + rx * math.cos(f2);\n    y2 = cy + ry * math.sin(f2);\n    res = arcToCurve(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [ f2, f2old, cx, cy ]);\n  }\n\n  df = f2 - f1;\n\n  var c1 = math.cos(f1),\n      s1 = math.sin(f1),\n      c2 = math.cos(f2),\n      s2 = math.sin(f2),\n      t = math.tan(df / 4),\n      hx = 4 / 3 * rx * t,\n      hy = 4 / 3 * ry * t,\n      m1 = [ x1, y1 ],\n      m2 = [ x1 + hx * s1, y1 - hy * c1 ],\n      m3 = [ x2 + hx * s2, y2 - hy * c2 ],\n      m4 = [ x2, y2 ];\n\n  m2[0] = 2 * m1[0] - m2[0];\n  m2[1] = 2 * m1[1] - m2[1];\n\n  if (recursive) {\n    return [ m2, m3, m4 ].concat(res);\n  } else {\n    res = [ m2, m3, m4 ].concat(res).join().split(',');\n    var newres = [];\n\n    for (var i = 0, ii = res.length; i < ii; i++) {\n      newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n    }\n\n    return newres;\n  }\n}\n\n// Returns bounding box of cubic bezier curve.\n// Source: http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n// Original version: NISHIO Hirokazu\n// Modifications: https://github.com/timo22345\nfunction curveBBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var tvalues = [],\n      bounds = [ [], [] ],\n      a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n\n  for (var i = 0; i < 2; ++i) {\n\n    if (i == 0) {\n      b = 6 * x0 - 12 * x1 + 6 * x2;\n      a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n      c = 3 * x1 - 3 * x0;\n    } else {\n      b = 6 * y0 - 12 * y1 + 6 * y2;\n      a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n      c = 3 * y1 - 3 * y0;\n    }\n\n    if (abs(a) < 1e-12) {\n\n      if (abs(b) < 1e-12) {\n        continue;\n      }\n\n      t = -c / b;\n\n      if (0 < t && t < 1) {\n        tvalues.push(t);\n      }\n\n      continue;\n    }\n\n    b2ac = b * b - 4 * c * a;\n    sqrtb2ac = math.sqrt(b2ac);\n\n    if (b2ac < 0) {\n      continue;\n    }\n\n    t1 = (-b + sqrtb2ac) / (2 * a);\n\n    if (0 < t1 && t1 < 1) {\n      tvalues.push(t1);\n    }\n\n    t2 = (-b - sqrtb2ac) / (2 * a);\n\n    if (0 < t2 && t2 < 1) {\n      tvalues.push(t2);\n    }\n  }\n\n  var j = tvalues.length,\n      jlen = j,\n      mt;\n\n  while (j--) {\n    t = tvalues[j];\n    mt = 1 - t;\n    bounds[0][j] = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\n    bounds[1][j] = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\n  }\n\n  bounds[0][jlen] = x0;\n  bounds[1][jlen] = y0;\n  bounds[0][jlen + 1] = x3;\n  bounds[1][jlen + 1] = y3;\n  bounds[0].length = bounds[1].length = jlen + 2;\n\n  return {\n    x0: mmin(...bounds[0]),\n    y0: mmin(...bounds[1]),\n    x1: mmax(...bounds[0]),\n    y1: mmax(...bounds[1])\n  };\n}\n\nfunction pathToCurve(path) {\n\n  var pth = paths(path);\n\n  // return cached curve, if existing\n  if (pth.curve) {\n    return pathClone(pth.curve);\n  }\n\n  var curvedPath = pathToAbsolute(path),\n      attrs = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null },\n      processPath = function(path, d, pathCommand) {\n        var nx, ny;\n\n        if (!path) {\n          return [ 'C', d.x, d.y, d.x, d.y, d.x, d.y ];\n        }\n\n        !(path[0] in { T: 1, Q: 1 }) && (d.qx = d.qy = null);\n\n        switch (path[0]) {\n        case 'M':\n          d.X = path[1];\n          d.Y = path[2];\n          break;\n        case 'A':\n          path = [ 'C', ...arcToCurve(d.x, d.y, ...path.slice(1)) ];\n          break;\n        case 'S':\n          if (pathCommand == 'C' || pathCommand == 'S') {\n\n            // In 'S' case we have to take into account, if the previous command is C/S.\n            nx = d.x * 2 - d.bx;\n\n            // And reflect the previous\n            ny = d.y * 2 - d.by;\n\n            // command's control point relative to the current point.\n          }\n          else {\n\n            // or some else or nothing\n            nx = d.x;\n            ny = d.y;\n          }\n          path = [ 'C', nx, ny, ...path.slice(1) ];\n          break;\n        case 'T':\n          if (pathCommand == 'Q' || pathCommand == 'T') {\n\n            // In 'T' case we have to take into account, if the previous command is Q/T.\n            d.qx = d.x * 2 - d.qx;\n\n            // And make a reflection similar\n            d.qy = d.y * 2 - d.qy;\n\n            // to case 'S'.\n          }\n          else {\n\n            // or something else or nothing\n            d.qx = d.x;\n            d.qy = d.y;\n          }\n          path = [ 'C', ...qubicToCurve(d.x, d.y, d.qx, d.qy, path[1], path[2]) ];\n          break;\n        case 'Q':\n          d.qx = path[1];\n          d.qy = path[2];\n          path = [ 'C', ...qubicToCurve(d.x, d.y, path[1], path[2], path[3], path[4]) ];\n          break;\n        case 'L':\n          path = [ 'C', ...lineToCurve(d.x, d.y, path[1], path[2]) ];\n          break;\n        case 'H':\n          path = [ 'C', ...lineToCurve(d.x, d.y, path[1], d.y) ];\n          break;\n        case 'V':\n          path = [ 'C', ...lineToCurve(d.x, d.y, d.x, path[1]) ];\n          break;\n        case 'Z':\n          path = [ 'C', ...lineToCurve(d.x, d.y, d.X, d.Y) ];\n          break;\n        }\n\n        return path;\n      },\n\n      fixArc = function(pp, i) {\n\n        if (pp[i].length > 7) {\n          pp[i].shift();\n          var pi = pp[i];\n\n          while (pi.length) {\n            pathCommands[i] = 'A'; // if created multiple C:s, their original seg is saved\n            pp.splice(i++, 0, [ 'C', ...pi.splice(0, 6) ]);\n          }\n\n          pp.splice(i, 1);\n          ii = curvedPath.length;\n        }\n      },\n\n      pathCommands = [], // path commands of original path p\n      pfirst = '', // temporary holder for original path command\n      pathCommand = ''; // holder for previous path command of original path\n\n  for (var i = 0, ii = curvedPath.length; i < ii; i++) {\n    curvedPath[i] && (pfirst = curvedPath[i][0]); // save current path command\n\n    if (pfirst != 'C') // C is not saved yet, because it may be result of conversion\n    {\n      pathCommands[i] = pfirst; // Save current path command\n      i && (pathCommand = pathCommands[i - 1]); // Get previous path command pathCommand\n    }\n    curvedPath[i] = processPath(curvedPath[i], attrs, pathCommand); // Previous path command is inputted to processPath\n\n    if (pathCommands[i] != 'A' && pfirst == 'C') pathCommands[i] = 'C'; // A is the only command\n    // which may produce multiple C:s\n    // so we have to make sure that C is also C in original path\n\n    fixArc(curvedPath, i); // fixArc adds also the right amount of A:s to pathCommands\n\n    var seg = curvedPath[i],\n        seglen = seg.length;\n\n    attrs.x = seg[seglen - 2];\n    attrs.y = seg[seglen - 1];\n    attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n    attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n  }\n\n  // cache curve\n  pth.curve = pathClone(curvedPath);\n\n  return curvedPath;\n}","import {\n  has,\n  isNil,\n  isObject\n} from 'min-dash';\n\n/**\n * Checks whether a value is an instance of Connection.\n *\n * @param {any} value\n *\n * @return {boolean}\n */\nexport function isConnection(value) {\n  return isObject(value) && has(value, 'waypoints');\n}\n\n/**\n * Checks whether a value is an instance of Label.\n *\n * @param {any} value\n *\n * @return {boolean}\n */\nexport function isLabel(value) {\n  return isObject(value) && has(value, 'labelTarget');\n}\n\n/**\n * Checks whether a value is an instance of Root.\n *\n * @param {any} value\n *\n * @return {boolean}\n */\nexport function isRoot(value) {\n  return isObject(value) && isNil(value.parent);\n}","import {\n  isObject,\n  sortBy\n} from 'min-dash';\n\nimport {\n  pointDistance,\n  pointsOnLine\n} from '../util/Geometry';\n\nimport intersectPaths from 'path-intersection';\n\nimport { isConnection } from '../util/ModelUtil';\n\n/**\n * @typedef {import('../core/Types').ElementLike} Element\n * @typedef {import('../core/Types').ConnectionLike} Connection\n *\n * @typedef {import('../util/Types').DirectionTRBL} DirectionTRBL\n * @typedef {import('../util/Types').Intersection} Intersection\n * @typedef {import('../util/Types').Point} Point\n * @typedef {import('../util/Types').Rect} Rect\n * @typedef {import('../util/Types').RectTRBL} RectTRBL\n */\n\n/**\n * @param {Rect} bounds\n *\n * @returns {Rect}\n */\nexport function roundBounds(bounds) {\n  return {\n    x: Math.round(bounds.x),\n    y: Math.round(bounds.y),\n    width: Math.round(bounds.width),\n    height: Math.round(bounds.height)\n  };\n}\n\n/**\n * @param {Point} point\n *\n * @returns {Point}\n */\nexport function roundPoint(point) {\n\n  return {\n    x: Math.round(point.x),\n    y: Math.round(point.y)\n  };\n}\n\n\n/**\n * Convert the given bounds to a { top, left, bottom, right } descriptor.\n *\n * @param {Point|Rect} bounds\n *\n * @return {RectTRBL}\n */\nexport function asTRBL(bounds) {\n  return {\n    top: bounds.y,\n    right: bounds.x + (bounds.width || 0),\n    bottom: bounds.y + (bounds.height || 0),\n    left: bounds.x\n  };\n}\n\n\n/**\n * Convert a { top, left, bottom, right } to an objects bounds.\n *\n * @param {RectTRBL} trbl\n *\n * @return {Rect}\n */\nexport function asBounds(trbl) {\n  return {\n    x: trbl.left,\n    y: trbl.top,\n    width: trbl.right - trbl.left,\n    height: trbl.bottom - trbl.top\n  };\n}\n\n\n/**\n * Get the mid of the given bounds or point.\n *\n * @param {Point|Rect} bounds\n *\n * @return {Point}\n */\nexport function getBoundsMid(bounds) {\n  return roundPoint({\n    x: bounds.x + (bounds.width || 0) / 2,\n    y: bounds.y + (bounds.height || 0) / 2\n  });\n}\n\n\n/**\n * Get the mid of the given Connection.\n *\n * @param {Connection} connection\n *\n * @return {Point}\n */\nexport function getConnectionMid(connection) {\n  var waypoints = connection.waypoints;\n\n  // calculate total length and length of each segment\n  var parts = waypoints.reduce(function(parts, point, index) {\n\n    var lastPoint = waypoints[index - 1];\n\n    if (lastPoint) {\n      var lastPart = parts[parts.length - 1];\n\n      var startLength = lastPart && lastPart.endLength || 0;\n      var length = distance(lastPoint, point);\n\n      parts.push({\n        start: lastPoint,\n        end: point,\n        startLength: startLength,\n        endLength: startLength + length,\n        length: length\n      });\n    }\n\n    return parts;\n  }, []);\n\n  var totalLength = parts.reduce(function(length, part) {\n    return length + part.length;\n  }, 0);\n\n  // find which segement contains middle point\n  var midLength = totalLength / 2;\n\n  var i = 0;\n  var midSegment = parts[i];\n\n  while (midSegment.endLength < midLength) {\n    midSegment = parts[++i];\n  }\n\n  // calculate relative position on mid segment\n  var segmentProgress = (midLength - midSegment.startLength) / midSegment.length;\n\n  var midPoint = {\n    x: midSegment.start.x + (midSegment.end.x - midSegment.start.x) * segmentProgress,\n    y: midSegment.start.y + (midSegment.end.y - midSegment.start.y) * segmentProgress\n  };\n\n  return midPoint;\n}\n\n\n/**\n * Get the mid of the given Element.\n *\n * @param {Element} element\n *\n * @return {Point}\n */\nexport function getMid(element) {\n  if (isConnection(element)) {\n    return getConnectionMid(element);\n  }\n\n  return getBoundsMid(element);\n}\n\n// orientation utils //////////////////////\n\n/**\n * Get orientation of the given rectangle with respect to\n * the reference rectangle.\n *\n * A padding (positive or negative) may be passed to influence\n * horizontal / vertical orientation and intersection.\n *\n * @param {Rect} rect\n * @param {Rect} reference\n * @param {Point|number} padding\n *\n * @return {DirectionTRBL|Intersection} the orientation; one of top, top-left, left, ..., bottom, right or intersect.\n */\nexport function getOrientation(rect, reference, padding) {\n\n  padding = padding || 0;\n\n  // make sure we can use an object, too\n  // for individual { x, y } padding\n  if (!isObject(padding)) {\n    padding = { x: padding, y: padding };\n  }\n\n\n  var rectOrientation = asTRBL(rect),\n      referenceOrientation = asTRBL(reference);\n\n  var top = rectOrientation.bottom + padding.y <= referenceOrientation.top,\n      right = rectOrientation.left - padding.x >= referenceOrientation.right,\n      bottom = rectOrientation.top - padding.y >= referenceOrientation.bottom,\n      left = rectOrientation.right + padding.x <= referenceOrientation.left;\n\n  var vertical = top ? 'top' : (bottom ? 'bottom' : null),\n      horizontal = left ? 'left' : (right ? 'right' : null);\n\n  if (horizontal && vertical) {\n    return vertical + '-' + horizontal;\n  } else {\n    return horizontal || vertical || 'intersect';\n  }\n}\n\n\n// intersection utils //////////////////////\n\n/**\n * Get intersection between an element and a line path.\n *\n * @param {string} elementPath\n * @param {string} linePath\n * @param {boolean} cropStart Whether to crop start or end.\n *\n * @return {Point}\n */\nexport function getElementLineIntersection(elementPath, linePath, cropStart) {\n\n  var intersections = getIntersections(elementPath, linePath);\n\n  // recognize intersections\n  // only one -> choose\n  // two close together -> choose first\n  // two or more distinct -> pull out appropriate one\n  // none -> ok (fallback to point itself)\n  if (intersections.length === 1) {\n    return roundPoint(intersections[0]);\n  } else if (intersections.length === 2 && pointDistance(intersections[0], intersections[1]) < 1) {\n    return roundPoint(intersections[0]);\n  } else if (intersections.length > 1) {\n\n    // sort by intersections based on connection segment +\n    // distance from start\n    intersections = sortBy(intersections, function(i) {\n      var distance = Math.floor(i.t2 * 100) || 1;\n\n      distance = 100 - distance;\n\n      distance = (distance < 10 ? '0' : '') + distance;\n\n      // create a sort string that makes sure we sort\n      // line segment ASC + line segment position DESC (for cropStart)\n      // line segment ASC + line segment position ASC (for cropEnd)\n      return i.segment2 + '#' + distance;\n    });\n\n    return roundPoint(intersections[cropStart ? 0 : intersections.length - 1]);\n  }\n\n  return null;\n}\n\n\nexport function getIntersections(a, b) {\n  return intersectPaths(a, b);\n}\n\n\nexport function filterRedundantWaypoints(waypoints) {\n\n  // alter copy of waypoints, not original\n  waypoints = waypoints.slice();\n\n  var idx = 0,\n      point,\n      previousPoint,\n      nextPoint;\n\n  while (waypoints[idx]) {\n    point = waypoints[idx];\n    previousPoint = waypoints[idx - 1];\n    nextPoint = waypoints[idx + 1];\n\n    if (pointDistance(point, nextPoint) === 0 ||\n        pointsOnLine(previousPoint, nextPoint, point)) {\n\n      // remove point, if overlapping with {nextPoint}\n      // or on line with {previousPoint} -> {point} -> {nextPoint}\n      waypoints.splice(idx, 1);\n    } else {\n      idx++;\n    }\n  }\n\n  return waypoints;\n}\n\n// helpers //////////////////////\n\nfunction distance(a, b) {\n  return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n}","import {\n  isNumber,\n  assign,\n  forEach,\n  every,\n  debounce,\n  bind,\n  reduce,\n  find\n} from 'min-dash';\n\nimport {\n  assignStyle\n} from 'min-dom';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from '../util/Collections';\n\nimport {\n  getType,\n  getBBox as getBoundingBox\n} from '../util/Elements';\n\nimport { asTRBL } from '../layout/LayoutUtil';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  transform as svgTransform,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport { createMatrix as createMatrix } from 'tiny-svg';\n\n\n/**\n * @typedef {import('./Types').ConnectionLike} ConnectionLike\n * @typedef {import('./Types').RootLike} RootLike\n * @typedef {import('./Types').ParentLike } ParentLike\n * @typedef {import('./Types').ShapeLike} ShapeLike\n *\n * @typedef { {\n *   container?: HTMLElement;\n *   deferUpdate?: boolean;\n *   width?: number;\n *   height?: number;\n * } } CanvasConfig\n * @typedef { {\n *   group: SVGElement;\n *   index: number;\n *   visible: boolean;\n * } } CanvasLayer\n * @typedef { {\n *   [key: string]: CanvasLayer;\n * } } CanvasLayers\n * @typedef { {\n *   rootElement: ShapeLike;\n *   layer: CanvasLayer;\n * } } CanvasPlane\n * @typedef { {\n *   scale: number;\n *   inner: Rect;\n *   outer: Dimensions;\n * } & Rect } CanvasViewbox\n *\n * @typedef {import('./ElementRegistry').default} ElementRegistry\n * @typedef {import('./EventBus').default} EventBus\n * @typedef {import('./GraphicsFactory').default} GraphicsFactory\n *\n * @typedef {import('../util/Types').Dimensions} Dimensions\n * @typedef {import('../util/Types').Point} Point\n * @typedef {import('../util/Types').Rect} Rect\n * @typedef {import('../util/Types').RectTRBL} RectTRBL\n * @typedef {import('../util/Types').ScrollDelta} ScrollDelta\n */\n\nfunction round(number, resolution) {\n  return Math.round(number * resolution) / resolution;\n}\n\nfunction ensurePx(number) {\n  return isNumber(number) ? number + 'px' : number;\n}\n\nfunction findRoot(element) {\n  while (element.parent) {\n    element = element.parent;\n  }\n\n  return element;\n}\n\n/**\n * Creates a HTML container element for a SVG element with\n * the given configuration\n *\n * @param {CanvasConfig} options\n *\n * @return {HTMLElement} the container element\n */\nfunction createContainer(options) {\n\n  options = assign({}, { width: '100%', height: '100%' }, options);\n\n  const container = options.container || document.body;\n\n  // create a <div> around the svg element with the respective size\n  // this way we can always get the correct container size\n  // (this is impossible for <svg> elements at the moment)\n  const parent = document.createElement('div');\n  parent.setAttribute('class', 'djs-container djs-parent');\n\n  assignStyle(parent, {\n    position: 'relative',\n    overflow: 'hidden',\n    width: ensurePx(options.width),\n    height: ensurePx(options.height)\n  });\n\n  container.appendChild(parent);\n\n  return parent;\n}\n\nfunction createGroup(parent, cls, childIndex) {\n  const group = svgCreate('g');\n  svgClasses(group).add(cls);\n\n  const index = childIndex !== undefined ? childIndex : parent.childNodes.length - 1;\n\n  // must ensure second argument is node or _null_\n  // cf. https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n  parent.insertBefore(group, parent.childNodes[index] || null);\n\n  return group;\n}\n\nconst BASE_LAYER = 'base';\n\n// render plane contents behind utility layers\nconst PLANE_LAYER_INDEX = 0;\nconst UTILITY_LAYER_INDEX = 1;\n\n\nconst REQUIRED_MODEL_ATTRS = {\n  shape: [ 'x', 'y', 'width', 'height' ],\n  connection: [ 'waypoints' ]\n};\n\n/**\n * The main drawing canvas.\n *\n * @class\n * @constructor\n *\n * @emits Canvas#canvas.init\n *\n * @param {CanvasConfig|null} config\n * @param {EventBus} eventBus\n * @param {GraphicsFactory} graphicsFactory\n * @param {ElementRegistry} elementRegistry\n */\nexport default function Canvas(config, eventBus, graphicsFactory, elementRegistry) {\n  this._eventBus = eventBus;\n  this._elementRegistry = elementRegistry;\n  this._graphicsFactory = graphicsFactory;\n\n  /**\n   * @type {number}\n   */\n  this._rootsIdx = 0;\n\n  /**\n   * @type {CanvasLayers}\n   */\n  this._layers = {};\n\n  /**\n   * @type {CanvasPlane[]}\n   */\n  this._planes = [];\n\n  /**\n   * @type {RootLike|null}\n   */\n  this._rootElement = null;\n\n  this._init(config || {});\n}\n\nCanvas.$inject = [\n  'config.canvas',\n  'eventBus',\n  'graphicsFactory',\n  'elementRegistry'\n];\n\n/**\n * Creates a <svg> element that is wrapped into a <div>.\n * This way we are always able to correctly figure out the size of the svg element\n * by querying the parent node.\n\n * (It is not possible to get the size of a svg element cross browser @ 2014-04-01)\n\n * <div class=\"djs-container\" style=\"width: {desired-width}, height: {desired-height}\">\n *   <svg width=\"100%\" height=\"100%\">\n *    ...\n *   </svg>\n * </div>\n *\n * @param {CanvasConfig} config\n */\nCanvas.prototype._init = function(config) {\n\n  const eventBus = this._eventBus;\n\n  // html container\n  const container = this._container = createContainer(config);\n\n  const svg = this._svg = svgCreate('svg');\n  svgAttr(svg, { width: '100%', height: '100%' });\n\n  svgAppend(container, svg);\n\n  const viewport = this._viewport = createGroup(svg, 'viewport');\n\n  // debounce canvas.viewbox.changed events when deferUpdate is set\n  // to help with potential performance issues\n  if (config.deferUpdate) {\n    this._viewboxChanged = debounce(bind(this._viewboxChanged, this), 300);\n  }\n\n  eventBus.on('diagram.init', () => {\n\n    /**\n     * An event indicating that the canvas is ready to be drawn on.\n     *\n     * @memberOf Canvas\n     *\n     * @event canvas.init\n     *\n     * @type {Object}\n     * @property {SVGElement} svg the created svg element\n     * @property {SVGElement} viewport the direct parent of diagram elements and shapes\n     */\n    eventBus.fire('canvas.init', {\n      svg: svg,\n      viewport: viewport\n    });\n\n  });\n\n  // reset viewbox on shape changes to\n  // recompute the viewbox\n  eventBus.on([\n    'shape.added',\n    'connection.added',\n    'shape.removed',\n    'connection.removed',\n    'elements.changed',\n    'root.set'\n  ], () => {\n    delete this._cachedViewbox;\n  });\n\n  eventBus.on('diagram.destroy', 500, this._destroy, this);\n  eventBus.on('diagram.clear', 500, this._clear, this);\n};\n\nCanvas.prototype._destroy = function() {\n  this._eventBus.fire('canvas.destroy', {\n    svg: this._svg,\n    viewport: this._viewport\n  });\n\n  const parent = this._container.parentNode;\n\n  if (parent) {\n    parent.removeChild(this._container);\n  }\n\n  delete this._svg;\n  delete this._container;\n  delete this._layers;\n  delete this._planes;\n  delete this._rootElement;\n  delete this._viewport;\n};\n\nCanvas.prototype._clear = function() {\n\n  const allElements = this._elementRegistry.getAll();\n\n  // remove all elements\n  allElements.forEach(element => {\n    const type = getType(element);\n\n    if (type === 'root') {\n      this.removeRootElement(element);\n    } else {\n      this._removeElement(element, type);\n    }\n  });\n\n  // remove all planes\n  this._planes = [];\n  this._rootElement = null;\n\n  // force recomputation of view box\n  delete this._cachedViewbox;\n};\n\n/**\n * Returns the default layer on which\n * all elements are drawn.\n *\n * @return {SVGElement}  The SVG element of the layer.\n */\nCanvas.prototype.getDefaultLayer = function() {\n  return this.getLayer(BASE_LAYER, PLANE_LAYER_INDEX);\n};\n\n/**\n * Returns a layer that is used to draw elements\n * or annotations on it.\n *\n * Non-existing layers retrieved through this method\n * will be created. During creation, the optional index\n * may be used to create layers below or above existing layers.\n * A layer with a certain index is always created above all\n * existing layers with the same index.\n *\n * @param {string} name The name of the layer.\n * @param {number} [index] The index of the layer.\n *\n * @return {SVGElement} The SVG element of the layer.\n */\nCanvas.prototype.getLayer = function(name, index) {\n\n  if (!name) {\n    throw new Error('must specify a name');\n  }\n\n  let layer = this._layers[name];\n\n  if (!layer) {\n    layer = this._layers[name] = this._createLayer(name, index);\n  }\n\n  // throw an error if layer creation / retrival is\n  // requested on different index\n  if (typeof index !== 'undefined' && layer.index !== index) {\n    throw new Error('layer <' + name + '> already created at index <' + index + '>');\n  }\n\n  return layer.group;\n};\n\n/**\n * For a given index, return the number of layers that have a higher index and\n * are visible.\n *\n * This is used to determine the node a layer should be inserted at.\n *\n * @param {number} index\n *\n * @return {number}\n */\nCanvas.prototype._getChildIndex = function(index) {\n  return reduce(this._layers, function(childIndex, layer) {\n    if (layer.visible && index >= layer.index) {\n      childIndex++;\n    }\n\n    return childIndex;\n  }, 0);\n};\n\n/**\n * Creates a given layer and returns it.\n *\n * @param {string} name\n * @param {number} [index=0]\n *\n * @return {CanvasLayer}\n */\nCanvas.prototype._createLayer = function(name, index) {\n\n  if (typeof index === 'undefined') {\n    index = UTILITY_LAYER_INDEX;\n  }\n\n  const childIndex = this._getChildIndex(index);\n\n  return {\n    group: createGroup(this._viewport, 'layer-' + name, childIndex),\n    index: index,\n    visible: true\n  };\n};\n\n\n/**\n * Shows a given layer.\n *\n * @param {string} name The name of the layer.\n *\n * @return {SVGElement} The SVG element of the layer.\n */\nCanvas.prototype.showLayer = function(name) {\n\n  if (!name) {\n    throw new Error('must specify a name');\n  }\n\n  const layer = this._layers[name];\n\n  if (!layer) {\n    throw new Error('layer <' + name + '> does not exist');\n  }\n\n  const viewport = this._viewport;\n  const group = layer.group;\n  const index = layer.index;\n\n  if (layer.visible) {\n    return group;\n  }\n\n  const childIndex = this._getChildIndex(index);\n\n  viewport.insertBefore(group, viewport.childNodes[childIndex] || null);\n\n  layer.visible = true;\n\n  return group;\n};\n\n/**\n * Hides a given layer.\n *\n * @param {string} name The name of the layer.\n *\n * @return {SVGElement} The SVG element of the layer.\n */\nCanvas.prototype.hideLayer = function(name) {\n\n  if (!name) {\n    throw new Error('must specify a name');\n  }\n\n  const layer = this._layers[name];\n\n  if (!layer) {\n    throw new Error('layer <' + name + '> does not exist');\n  }\n\n  const group = layer.group;\n\n  if (!layer.visible) {\n    return group;\n  }\n\n  svgRemove(group);\n\n  layer.visible = false;\n\n  return group;\n};\n\n\nCanvas.prototype._removeLayer = function(name) {\n\n  const layer = this._layers[name];\n\n  if (layer) {\n    delete this._layers[name];\n\n    svgRemove(layer.group);\n  }\n};\n\n/**\n * Returns the currently active layer. Can be null.\n *\n * @return {CanvasLayer|null} The active layer of `null`.\n */\nCanvas.prototype.getActiveLayer = function() {\n  const plane = this._findPlaneForRoot(this.getRootElement());\n\n  if (!plane) {\n    return null;\n  }\n\n  return plane.layer;\n};\n\n\n/**\n * Returns the plane which contains the given element.\n *\n * @param {ShapeLike|ConnectionLike|string} element The element or its ID.\n *\n * @return {RootLike|undefined} The root of the element.\n */\nCanvas.prototype.findRoot = function(element) {\n  if (typeof element === 'string') {\n    element = this._elementRegistry.get(element);\n  }\n\n  if (!element) {\n    return;\n  }\n\n  const plane = this._findPlaneForRoot(\n    findRoot(element)\n  ) || {};\n\n  return plane.rootElement;\n};\n\n/**\n * Return a list of all root elements on the diagram.\n *\n * @return {(RootLike)[]} The list of root elements.\n */\nCanvas.prototype.getRootElements = function() {\n  return this._planes.map(function(plane) {\n    return plane.rootElement;\n  });\n};\n\nCanvas.prototype._findPlaneForRoot = function(rootElement) {\n  return find(this._planes, function(plane) {\n    return plane.rootElement === rootElement;\n  });\n};\n\n\n/**\n * Returns the html element that encloses the\n * drawing canvas.\n *\n * @return {HTMLElement} The HTML element of the container.\n */\nCanvas.prototype.getContainer = function() {\n  return this._container;\n};\n\n\n// markers //////////////////////\n\nCanvas.prototype._updateMarker = function(element, marker, add) {\n  let container;\n\n  if (!element.id) {\n    element = this._elementRegistry.get(element);\n  }\n\n  element.markers = element.markers || new Set();\n\n  // we need to access all\n  container = this._elementRegistry._elements[element.id];\n\n  if (!container) {\n    return;\n  }\n\n  forEach([ container.gfx, container.secondaryGfx ], function(gfx) {\n    if (gfx) {\n\n      // invoke either addClass or removeClass based on mode\n      if (add) {\n        element.markers.add(marker);\n        svgClasses(gfx).add(marker);\n      } else {\n        element.markers.delete(marker);\n        svgClasses(gfx).remove(marker);\n      }\n    }\n  });\n\n  /**\n   * An event indicating that a marker has been updated for an element\n   *\n   * @event element.marker.update\n   * @type {Object}\n   * @property {Element} element the shape\n   * @property {SVGElement} gfx the graphical representation of the shape\n   * @property {string} marker\n   * @property {boolean} add true if the marker was added, false if it got removed\n   */\n  this._eventBus.fire('element.marker.update', { element: element, gfx: container.gfx, marker: marker, add: !!add });\n};\n\n\n/**\n * Adds a marker to an element (basically a css class).\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @example\n *\n * ```javascript\n * canvas.addMarker('foo', 'some-marker');\n *\n * const fooGfx = canvas.getGraphics('foo');\n *\n * fooGfx; // <g class=\"... some-marker\"> ... </g>\n * ```\n *\n * @param {ShapeLike|ConnectionLike|string} element The element or its ID.\n * @param {string} marker The marker.\n */\nCanvas.prototype.addMarker = function(element, marker) {\n  this._updateMarker(element, marker, true);\n};\n\n\n/**\n * Remove a marker from an element.\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @param {ShapeLike|ConnectionLike|string} element The element or its ID.\n * @param {string} marker The marker.\n */\nCanvas.prototype.removeMarker = function(element, marker) {\n  this._updateMarker(element, marker, false);\n};\n\n/**\n * Check whether an element has a given marker.\n *\n * @param {ShapeLike|ConnectionLike|string} element The element or its ID.\n * @param {string} marker The marker.\n */\nCanvas.prototype.hasMarker = function(element, marker) {\n  if (!element.id) {\n    element = this._elementRegistry.get(element);\n  }\n\n  if (!element.markers) {\n    return false;\n  }\n\n  return element.markers.has(marker);\n};\n\n/**\n * Toggles a marker on an element.\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @param {ShapeLike|ConnectionLike|string} element The element or its ID.\n * @param {string} marker The marker.\n */\nCanvas.prototype.toggleMarker = function(element, marker) {\n  if (this.hasMarker(element, marker)) {\n    this.removeMarker(element, marker);\n  } else {\n    this.addMarker(element, marker);\n  }\n};\n\n/**\n * Returns the current root element.\n *\n * Supports two different modes for handling root elements:\n *\n * 1. if no root element has been added before, an implicit root will be added\n * and returned. This is used in applications that don't require explicit\n * root elements.\n *\n * 2. when root elements have been added before calling `getRootElement`,\n * root elements can be null. This is used for applications that want to manage\n * root elements themselves.\n *\n * @return {RootLike} The current root element.\n */\nCanvas.prototype.getRootElement = function() {\n  const rootElement = this._rootElement;\n\n  // can return null if root elements are present but none was set yet\n  if (rootElement || this._planes.length) {\n    return rootElement;\n  }\n\n  return this.setRootElement(this.addRootElement(null));\n};\n\n/**\n * Adds a given root element and returns it.\n *\n * @param {RootLike} [rootElement] The root element to be added.\n *\n * @return {RootLike} The added root element or an implicit root element.\n */\nCanvas.prototype.addRootElement = function(rootElement) {\n  const idx = this._rootsIdx++;\n\n  if (!rootElement) {\n    rootElement = {\n      id: '__implicitroot_' + idx,\n      children: [],\n      isImplicit: true\n    };\n  }\n\n  const layerName = rootElement.layer = 'root-' + idx;\n\n  this._ensureValid('root', rootElement);\n\n  const layer = this.getLayer(layerName, PLANE_LAYER_INDEX);\n\n  this.hideLayer(layerName);\n\n  this._addRoot(rootElement, layer);\n\n  this._planes.push({\n    rootElement: rootElement,\n    layer: layer\n  });\n\n  return rootElement;\n};\n\n/**\n * Removes a given root element and returns it.\n *\n * @param {RootLike|string} rootElement element or element ID\n *\n * @return {RootLike|undefined} removed element\n */\nCanvas.prototype.removeRootElement = function(rootElement) {\n\n  if (typeof rootElement === 'string') {\n    rootElement = this._elementRegistry.get(rootElement);\n  }\n\n  const plane = this._findPlaneForRoot(rootElement);\n\n  if (!plane) {\n    return;\n  }\n\n  // hook up life-cycle events\n  this._removeRoot(rootElement);\n\n  // clean up layer\n  this._removeLayer(rootElement.layer);\n\n  // clean up plane\n  this._planes = this._planes.filter(function(plane) {\n    return plane.rootElement !== rootElement;\n  });\n\n  // clean up active root\n  if (this._rootElement === rootElement) {\n    this._rootElement = null;\n  }\n\n  return rootElement;\n};\n\n\n/**\n * Sets a given element as the new root element for the canvas\n * and returns the new root element.\n *\n * @param {RootLike} rootElement The root element to be set.\n *\n * @return {RootLike} The set root element.\n */\nCanvas.prototype.setRootElement = function(rootElement) {\n\n  if (rootElement === this._rootElement) {\n    return rootElement;\n  }\n\n  let plane;\n\n  if (!rootElement) {\n    throw new Error('rootElement required');\n  }\n\n  plane = this._findPlaneForRoot(rootElement);\n\n  // give set add semantics for backwards compatibility\n  if (!plane) {\n    rootElement = this.addRootElement(rootElement);\n  }\n\n  this._setRoot(rootElement);\n\n  return rootElement;\n};\n\n\nCanvas.prototype._removeRoot = function(element) {\n  const elementRegistry = this._elementRegistry,\n        eventBus = this._eventBus;\n\n  // simulate element remove event sequence\n  eventBus.fire('root.remove', { element: element });\n  eventBus.fire('root.removed', { element: element });\n\n  elementRegistry.remove(element);\n};\n\n\nCanvas.prototype._addRoot = function(element, gfx) {\n  const elementRegistry = this._elementRegistry,\n        eventBus = this._eventBus;\n\n  // resemble element add event sequence\n  eventBus.fire('root.add', { element: element });\n\n  elementRegistry.add(element, gfx);\n\n  eventBus.fire('root.added', { element: element, gfx: gfx });\n};\n\n\nCanvas.prototype._setRoot = function(rootElement, layer) {\n\n  const currentRoot = this._rootElement;\n\n  if (currentRoot) {\n\n    // un-associate previous root element <svg>\n    this._elementRegistry.updateGraphics(currentRoot, null, true);\n\n    // hide previous layer\n    this.hideLayer(currentRoot.layer);\n  }\n\n  if (rootElement) {\n\n    if (!layer) {\n      layer = this._findPlaneForRoot(rootElement).layer;\n    }\n\n    // associate element with <svg>\n    this._elementRegistry.updateGraphics(rootElement, this._svg, true);\n\n    // show root layer\n    this.showLayer(rootElement.layer);\n  }\n\n  this._rootElement = rootElement;\n\n  this._eventBus.fire('root.set', { element: rootElement });\n};\n\nCanvas.prototype._ensureValid = function(type, element) {\n  if (!element.id) {\n    throw new Error('element must have an id');\n  }\n\n  if (this._elementRegistry.get(element.id)) {\n    throw new Error('element <' + element.id + '> already exists');\n  }\n\n  const requiredAttrs = REQUIRED_MODEL_ATTRS[type];\n\n  const valid = every(requiredAttrs, function(attr) {\n    return typeof element[attr] !== 'undefined';\n  });\n\n  if (!valid) {\n    throw new Error(\n      'must supply { ' + requiredAttrs.join(', ') + ' } with ' + type);\n  }\n};\n\nCanvas.prototype._setParent = function(element, parent, parentIndex) {\n  collectionAdd(parent.children, element, parentIndex);\n  element.parent = parent;\n};\n\n/**\n * Adds an element to the canvas.\n *\n * This wires the parent <-> child relationship between the element and\n * a explicitly specified parent or an implicit root element.\n *\n * During add it emits the events\n *\n *  * <{type}.add> (element, parent)\n *  * <{type}.added> (element, gfx)\n *\n * Extensions may hook into these events to perform their magic.\n *\n * @param {string} type\n * @param {ConnectionLike|ShapeLike} element\n * @param {ShapeLike} [parent]\n * @param {number} [parentIndex]\n *\n * @return {ConnectionLike|ShapeLike} The added element.\n */\nCanvas.prototype._addElement = function(type, element, parent, parentIndex) {\n\n  parent = parent || this.getRootElement();\n\n  const eventBus = this._eventBus,\n        graphicsFactory = this._graphicsFactory;\n\n  this._ensureValid(type, element);\n\n  eventBus.fire(type + '.add', { element: element, parent: parent });\n\n  this._setParent(element, parent, parentIndex);\n\n  // create graphics\n  const gfx = graphicsFactory.create(type, element, parentIndex);\n\n  this._elementRegistry.add(element, gfx);\n\n  // update its visual\n  graphicsFactory.update(type, element, gfx);\n\n  eventBus.fire(type + '.added', { element: element, gfx: gfx });\n\n  return element;\n};\n\n/**\n * Adds a shape to the canvas.\n *\n * @param {ShapeLike} shape The shape to be added\n * @param {ParentLike} [parent] The shape's parent.\n * @param {number} [parentIndex] The index at which to add the shape to the parent's children.\n *\n * @return {ShapeLike} The added shape.\n */\nCanvas.prototype.addShape = function(shape, parent, parentIndex) {\n  return this._addElement('shape', shape, parent, parentIndex);\n};\n\n/**\n * Adds a connection to the canvas.\n *\n * @param {ConnectionLike} connection The connection to be added.\n * @param {ParentLike} [parent] The connection's parent.\n * @param {number} [parentIndex] The index at which to add the connection to the parent's children.\n *\n * @return {ConnectionLike} The added connection.\n */\nCanvas.prototype.addConnection = function(connection, parent, parentIndex) {\n  return this._addElement('connection', connection, parent, parentIndex);\n};\n\n\n/**\n * Internal remove element\n */\nCanvas.prototype._removeElement = function(element, type) {\n\n  const elementRegistry = this._elementRegistry,\n        graphicsFactory = this._graphicsFactory,\n        eventBus = this._eventBus;\n\n  element = elementRegistry.get(element.id || element);\n\n  if (!element) {\n\n    // element was removed already\n    return;\n  }\n\n  eventBus.fire(type + '.remove', { element: element });\n\n  graphicsFactory.remove(element);\n\n  // unset parent <-> child relationship\n  collectionRemove(element.parent && element.parent.children, element);\n  element.parent = null;\n\n  eventBus.fire(type + '.removed', { element: element });\n\n  elementRegistry.remove(element);\n\n  return element;\n};\n\n\n/**\n * Removes a shape from the canvas.\n *\n * @fires ShapeRemoveEvent\n * @fires ShapeRemovedEvent\n *\n * @param {ShapeLike|string} shape The shape or its ID.\n *\n * @return {ShapeLike} The removed shape.\n */\nCanvas.prototype.removeShape = function(shape) {\n\n  /**\n   * An event indicating that a shape is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event ShapeRemoveEvent\n   * @type {Object}\n   * @property {ShapeLike} element The shape.\n   * @property {SVGElement} gfx The graphical element.\n   */\n\n  /**\n   * An event indicating that a shape has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event ShapeRemovedEvent\n   * @type {Object}\n   * @property {ShapeLike} element The shape.\n   * @property {SVGElement} gfx The graphical element.\n   */\n  return this._removeElement(shape, 'shape');\n};\n\n\n/**\n * Removes a connection from the canvas.\n *\n * @fires ConnectionRemoveEvent\n * @fires ConnectionRemovedEvent\n *\n * @param {ConnectionLike|string} connection The connection or its ID.\n *\n * @return {ConnectionLike} The removed connection.\n */\nCanvas.prototype.removeConnection = function(connection) {\n\n  /**\n   * An event indicating that a connection is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event ConnectionRemoveEvent\n   * @type {Object}\n   * @property {ConnectionLike} element The connection.\n   * @property {SVGElement} gfx The graphical element.\n   */\n\n  /**\n   * An event indicating that a connection has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event ConnectionRemovedEvent\n   * @type {Object}\n   * @property {ConnectionLike} element The connection.\n   * @property {SVGElement} gfx The graphical element.\n   */\n  return this._removeElement(connection, 'connection');\n};\n\n\n/**\n * Returns the graphical element of an element.\n *\n * @param {ShapeLike|ConnectionLike|string} element The element or its ID.\n * @param {boolean} [secondary=false] Whether to return the secondary graphical element.\n *\n * @return {SVGElement} The graphical element.\n */\nCanvas.prototype.getGraphics = function(element, secondary) {\n  return this._elementRegistry.getGraphics(element, secondary);\n};\n\n\n/**\n * Perform a viewbox update via a given change function.\n *\n * @param {Function} changeFn\n */\nCanvas.prototype._changeViewbox = function(changeFn) {\n\n  // notify others of the upcoming viewbox change\n  this._eventBus.fire('canvas.viewbox.changing');\n\n  // perform actual change\n  changeFn.apply(this);\n\n  // reset the cached viewbox so that\n  // a new get operation on viewbox or zoom\n  // triggers a viewbox re-computation\n  this._cachedViewbox = null;\n\n  // notify others of the change; this step\n  // may or may not be debounced\n  this._viewboxChanged();\n};\n\nCanvas.prototype._viewboxChanged = function() {\n  this._eventBus.fire('canvas.viewbox.changed', { viewbox: this.viewbox() });\n};\n\n\n/**\n * Gets or sets the view box of the canvas, i.e. the\n * area that is currently displayed.\n *\n * The getter may return a cached viewbox (if it is currently\n * changing). To force a recomputation, pass `false` as the first argument.\n *\n * @example\n *\n * ```javascript\n * canvas.viewbox({ x: 100, y: 100, width: 500, height: 500 })\n *\n * // sets the visible area of the diagram to (100|100) -> (600|100)\n * // and and scales it according to the diagram width\n *\n * const viewbox = canvas.viewbox(); // pass `false` to force recomputing the box.\n *\n * console.log(viewbox);\n * // {\n * //   inner: Dimensions,\n * //   outer: Dimensions,\n * //   scale,\n * //   x, y,\n * //   width, height\n * // }\n *\n * // if the current diagram is zoomed and scrolled, you may reset it to the\n * // default zoom via this method, too:\n *\n * const zoomedAndScrolledViewbox = canvas.viewbox();\n *\n * canvas.viewbox({\n *   x: 0,\n *   y: 0,\n *   width: zoomedAndScrolledViewbox.outer.width,\n *   height: zoomedAndScrolledViewbox.outer.height\n * });\n * ```\n *\n * @param {Rect} [box] The viewbox to be set.\n *\n * @return {CanvasViewbox} The set viewbox.\n */\nCanvas.prototype.viewbox = function(box) {\n\n  if (box === undefined && this._cachedViewbox) {\n    return structuredClone(this._cachedViewbox);\n  }\n\n  const viewport = this._viewport,\n        outerBox = this.getSize();\n  let innerBox,\n      matrix,\n      activeLayer,\n      transform,\n      scale,\n      x, y;\n\n  if (!box) {\n\n    // compute the inner box based on the\n    // diagrams active layer. This allows us to exclude\n    // external components, such as overlays\n\n    activeLayer = this._rootElement ? this.getActiveLayer() : null;\n    innerBox = activeLayer && activeLayer.getBBox() || {};\n\n    transform = svgTransform(viewport);\n    matrix = transform ? transform.matrix : createMatrix();\n    scale = round(matrix.a, 1000);\n\n    x = round(-matrix.e || 0, 1000);\n    y = round(-matrix.f || 0, 1000);\n\n    box = this._cachedViewbox = {\n      x: x ? x / scale : 0,\n      y: y ? y / scale : 0,\n      width: outerBox.width / scale,\n      height: outerBox.height / scale,\n      scale: scale,\n      inner: {\n        width: innerBox.width || 0,\n        height: innerBox.height || 0,\n        x: innerBox.x || 0,\n        y: innerBox.y || 0\n      },\n      outer: outerBox\n    };\n\n    return box;\n  } else {\n\n    this._changeViewbox(function() {\n      scale = Math.min(outerBox.width / box.width, outerBox.height / box.height);\n\n      const matrix = this._svg.createSVGMatrix()\n        .scale(scale)\n        .translate(-box.x, -box.y);\n\n      svgTransform(viewport, matrix);\n    });\n  }\n\n  return box;\n};\n\n\n/**\n * Gets or sets the scroll of the canvas.\n *\n * @param {ScrollDelta} [delta] The scroll to be set.\n *\n * @return {Point}\n */\nCanvas.prototype.scroll = function(delta) {\n\n  const node = this._viewport;\n  let matrix = node.getCTM();\n\n  if (delta) {\n    this._changeViewbox(function() {\n      delta = assign({ dx: 0, dy: 0 }, delta || {});\n\n      matrix = this._svg.createSVGMatrix().translate(delta.dx, delta.dy).multiply(matrix);\n\n      setCTM(node, matrix);\n    });\n  }\n\n  return { x: matrix.e, y: matrix.f };\n};\n\n/**\n * Scrolls the viewbox to contain the given element.\n * Optionally specify a padding to be applied to the edges.\n *\n * @param {ShapeLike|ConnectionLike|string} element The element to scroll to or its ID.\n * @param {RectTRBL|number} [padding=100] The padding to be applied. Can also specify top, bottom, left and right.\n */\nCanvas.prototype.scrollToElement = function(element, padding) {\n  let defaultPadding = 100;\n\n  if (typeof element === 'string') {\n    element = this._elementRegistry.get(element);\n  }\n\n  // set to correct rootElement\n  const rootElement = this.findRoot(element);\n\n  if (rootElement !== this.getRootElement()) {\n    this.setRootElement(rootElement);\n  }\n\n  // element is rootElement, do not change viewport\n  if (rootElement === element) {\n    return;\n  }\n\n  if (!padding) {\n    padding = {};\n  }\n  if (typeof padding === 'number') {\n    defaultPadding = padding;\n  }\n\n  padding = {\n    top: padding.top || defaultPadding,\n    right: padding.right || defaultPadding,\n    bottom: padding.bottom || defaultPadding,\n    left: padding.left || defaultPadding\n  };\n\n  const elementBounds = getBoundingBox(element),\n        elementTrbl = asTRBL(elementBounds),\n        viewboxBounds = this.viewbox(),\n        zoom = this.zoom();\n  let dx, dy;\n\n  // shrink viewboxBounds with padding\n  viewboxBounds.y += padding.top / zoom;\n  viewboxBounds.x += padding.left / zoom;\n  viewboxBounds.width -= (padding.right + padding.left) / zoom;\n  viewboxBounds.height -= (padding.bottom + padding.top) / zoom;\n\n  const viewboxTrbl = asTRBL(viewboxBounds);\n\n  const canFit = elementBounds.width < viewboxBounds.width && elementBounds.height < viewboxBounds.height;\n\n  if (!canFit) {\n\n    // top-left when element can't fit\n    dx = elementBounds.x - viewboxBounds.x;\n    dy = elementBounds.y - viewboxBounds.y;\n\n  } else {\n\n    const dRight = Math.max(0, elementTrbl.right - viewboxTrbl.right),\n          dLeft = Math.min(0, elementTrbl.left - viewboxTrbl.left),\n          dBottom = Math.max(0, elementTrbl.bottom - viewboxTrbl.bottom),\n          dTop = Math.min(0, elementTrbl.top - viewboxTrbl.top);\n\n    dx = dRight || dLeft;\n    dy = dBottom || dTop;\n\n  }\n\n  this.scroll({ dx: -dx * zoom, dy: -dy * zoom });\n};\n\n/**\n * Gets or sets the current zoom of the canvas, optionally zooming to the\n * specified position.\n *\n * The getter may return a cached zoom level. Call it with `false` as the first\n * argument to force recomputation of the current level.\n *\n * @param {number|'fit-viewport'} [newScale] The new zoom level, either a number,\n * i.e. 0.9, or `fit-viewport` to adjust the size to fit the current viewport.\n * @param {Point} [center] The reference point { x: ..., y: ...} to zoom to.\n *\n * @return {number} The set zoom level.\n */\nCanvas.prototype.zoom = function(newScale, center) {\n\n  if (!newScale) {\n    return this.viewbox(newScale).scale;\n  }\n\n  if (newScale === 'fit-viewport') {\n    return this._fitViewport(center);\n  }\n\n  let outer,\n      matrix;\n\n  this._changeViewbox(function() {\n\n    if (typeof center !== 'object') {\n      outer = this.viewbox().outer;\n\n      center = {\n        x: outer.width / 2,\n        y: outer.height / 2\n      };\n    }\n\n    matrix = this._setZoom(newScale, center);\n  });\n\n  return round(matrix.a, 1000);\n};\n\nfunction setCTM(node, m) {\n  const mstr = 'matrix(' + m.a + ',' + m.b + ',' + m.c + ',' + m.d + ',' + m.e + ',' + m.f + ')';\n  node.setAttribute('transform', mstr);\n}\n\nCanvas.prototype._fitViewport = function(center) {\n\n  const vbox = this.viewbox(),\n        outer = vbox.outer,\n        inner = vbox.inner;\n  let newScale,\n      newViewbox;\n\n  // display the complete diagram without zooming in.\n  // instead of relying on internal zoom, we perform a\n  // hard reset on the canvas viewbox to realize this\n  //\n  // if diagram does not need to be zoomed in, we focus it around\n  // the diagram origin instead\n\n  if (inner.x >= 0 &&\n      inner.y >= 0 &&\n      inner.x + inner.width <= outer.width &&\n      inner.y + inner.height <= outer.height &&\n      !center) {\n\n    newViewbox = {\n      x: 0,\n      y: 0,\n      width: Math.max(inner.width + inner.x, outer.width),\n      height: Math.max(inner.height + inner.y, outer.height)\n    };\n  } else {\n\n    newScale = Math.min(1, outer.width / inner.width, outer.height / inner.height);\n    newViewbox = {\n      x: inner.x + (center ? inner.width / 2 - outer.width / newScale / 2 : 0),\n      y: inner.y + (center ? inner.height / 2 - outer.height / newScale / 2 : 0),\n      width: outer.width / newScale,\n      height: outer.height / newScale\n    };\n  }\n\n  this.viewbox(newViewbox);\n\n  return this.viewbox(false).scale;\n};\n\n\nCanvas.prototype._setZoom = function(scale, center) {\n\n  const svg = this._svg,\n        viewport = this._viewport;\n\n  const matrix = svg.createSVGMatrix();\n  const point = svg.createSVGPoint();\n\n  let centerPoint,\n      originalPoint,\n      currentMatrix,\n      scaleMatrix,\n      newMatrix;\n\n  currentMatrix = viewport.getCTM();\n\n  const currentScale = currentMatrix.a;\n\n  if (center) {\n    centerPoint = assign(point, center);\n\n    // revert applied viewport transformations\n    originalPoint = centerPoint.matrixTransform(currentMatrix.inverse());\n\n    // create scale matrix\n    scaleMatrix = matrix\n      .translate(originalPoint.x, originalPoint.y)\n      .scale(1 / currentScale * scale)\n      .translate(-originalPoint.x, -originalPoint.y);\n\n    newMatrix = currentMatrix.multiply(scaleMatrix);\n  } else {\n    newMatrix = matrix.scale(scale);\n  }\n\n  setCTM(this._viewport, newMatrix);\n\n  return newMatrix;\n};\n\n\n/**\n * Returns the size of the canvas.\n *\n * @return {Dimensions} The size of the canvas.\n */\nCanvas.prototype.getSize = function() {\n  return {\n    width: this._container.clientWidth,\n    height: this._container.clientHeight\n  };\n};\n\n\n/**\n * Returns the absolute bounding box of an element.\n *\n * The absolute bounding box may be used to display overlays in the callers\n * (browser) coordinate system rather than the zoomed in/out canvas coordinates.\n *\n * @param {ShapeLike|ConnectionLike} element The element.\n *\n * @return {Rect} The element's absolute bounding box.\n */\nCanvas.prototype.getAbsoluteBBox = function(element) {\n  const vbox = this.viewbox();\n  let bbox;\n\n  // connection\n  // use svg bbox\n  if (element.waypoints) {\n    const gfx = this.getGraphics(element);\n\n    bbox = gfx.getBBox();\n  }\n\n  // shapes\n  // use data\n  else {\n    bbox = element;\n  }\n\n  const x = bbox.x * vbox.scale - vbox.x * vbox.scale;\n  const y = bbox.y * vbox.scale - vbox.y * vbox.scale;\n\n  const width = bbox.width * vbox.scale;\n  const height = bbox.height * vbox.scale;\n\n  return {\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  };\n};\n\n/**\n * Fires an event so other modules can react to the canvas resizing.\n */\nCanvas.prototype.resized = function() {\n\n  // force recomputation of view box\n  delete this._cachedViewbox;\n\n  this._eventBus.fire('canvas.resized');\n};\n","var ELEMENT_ID = 'data-element-id';\n\nimport { attr as svgAttr } from 'tiny-svg';\n\n/**\n * @typedef {import('./Types').ElementLike} ElementLike\n *\n * @typedef {import('./EventBus').default} EventBus\n *\n * @typedef { (element: ElementLike, gfx: SVGElement) => boolean|any } ElementRegistryFilterCallback\n * @typedef { (element: ElementLike, gfx: SVGElement) => any } ElementRegistryForEachCallback\n */\n\n/**\n * A registry that keeps track of all shapes in the diagram.\n *\n * @class\n * @constructor\n *\n * @param {EventBus} eventBus\n */\nexport default function ElementRegistry(eventBus) {\n\n  /**\n   * @type { {\n   *   [id: string]: {\n   *     element: ElementLike;\n   *     gfx?: SVGElement;\n   *     secondaryGfx?: SVGElement;\n   *   }\n   * } }\n   */\n  this._elements = {};\n\n  this._eventBus = eventBus;\n}\n\nElementRegistry.$inject = [ 'eventBus' ];\n\n/**\n * Add an element and its graphical representation(s) to the registry.\n *\n * @param {ElementLike} element The element to be added.\n * @param {SVGElement} gfx The primary graphical representation.\n * @param {SVGElement} [secondaryGfx] The secondary graphical representation.\n */\nElementRegistry.prototype.add = function(element, gfx, secondaryGfx) {\n\n  var id = element.id;\n\n  this._validateId(id);\n\n  // associate dom node with element\n  svgAttr(gfx, ELEMENT_ID, id);\n\n  if (secondaryGfx) {\n    svgAttr(secondaryGfx, ELEMENT_ID, id);\n  }\n\n  this._elements[id] = { element: element, gfx: gfx, secondaryGfx: secondaryGfx };\n};\n\n/**\n * Remove an element from the registry.\n *\n * @param {ElementLike|string} element\n */\nElementRegistry.prototype.remove = function(element) {\n  var elements = this._elements,\n      id = element.id || element,\n      container = id && elements[id];\n\n  if (container) {\n\n    // unset element id on gfx\n    svgAttr(container.gfx, ELEMENT_ID, '');\n\n    if (container.secondaryGfx) {\n      svgAttr(container.secondaryGfx, ELEMENT_ID, '');\n    }\n\n    delete elements[id];\n  }\n};\n\n/**\n * Update an elements ID.\n *\n * @param {ElementLike|string} element The element or its ID.\n * @param {string} newId The new ID.\n */\nElementRegistry.prototype.updateId = function(element, newId) {\n\n  this._validateId(newId);\n\n  if (typeof element === 'string') {\n    element = this.get(element);\n  }\n\n  this._eventBus.fire('element.updateId', {\n    element: element,\n    newId: newId\n  });\n\n  var gfx = this.getGraphics(element),\n      secondaryGfx = this.getGraphics(element, true);\n\n  this.remove(element);\n\n  element.id = newId;\n\n  this.add(element, gfx, secondaryGfx);\n};\n\n/**\n * Update the graphical representation of an element.\n *\n * @param {ElementLike|string} filter The element or its ID.\n * @param {SVGElement} gfx The new graphical representation.\n * @param {boolean} [secondary=false] Whether to update the secondary graphical representation.\n */\nElementRegistry.prototype.updateGraphics = function(filter, gfx, secondary) {\n  var id = filter.id || filter;\n\n  var container = this._elements[id];\n\n  if (secondary) {\n    container.secondaryGfx = gfx;\n  } else {\n    container.gfx = gfx;\n  }\n\n  if (gfx) {\n    svgAttr(gfx, ELEMENT_ID, id);\n  }\n\n  return gfx;\n};\n\n/**\n * Get the element with the given ID or graphical representation.\n *\n * @example\n *\n * ```javascript\n * elementRegistry.get('SomeElementId_1');\n *\n * elementRegistry.get(gfx);\n * ```\n *\n * @param {string|SVGElement} filter The elements ID or graphical representation.\n *\n * @return {ElementLike|undefined} The element.\n */\nElementRegistry.prototype.get = function(filter) {\n  var id;\n\n  if (typeof filter === 'string') {\n    id = filter;\n  } else {\n    id = filter && svgAttr(filter, ELEMENT_ID);\n  }\n\n  var container = this._elements[id];\n  return container && container.element;\n};\n\n/**\n * Return all elements that match a given filter function.\n *\n * @param {ElementRegistryFilterCallback} fn The filter function.\n *\n * @return {ElementLike[]} The matching elements.\n */\nElementRegistry.prototype.filter = function(fn) {\n\n  var filtered = [];\n\n  this.forEach(function(element, gfx) {\n    if (fn(element, gfx)) {\n      filtered.push(element);\n    }\n  });\n\n  return filtered;\n};\n\n/**\n * Return the first element that matches the given filter function.\n *\n * @param {ElementRegistryFilterCallback} fn The filter function.\n *\n * @return {ElementLike|undefined} The matching element.\n */\nElementRegistry.prototype.find = function(fn) {\n  var map = this._elements,\n      keys = Object.keys(map);\n\n  for (var i = 0; i < keys.length; i++) {\n    var id = keys[i],\n        container = map[id],\n        element = container.element,\n        gfx = container.gfx;\n\n    if (fn(element, gfx)) {\n      return element;\n    }\n  }\n};\n\n/**\n * Get all elements.\n *\n * @return {ElementLike[]} All elements.\n */\nElementRegistry.prototype.getAll = function() {\n  return this.filter(function(e) { return e; });\n};\n\n/**\n * Execute a given function for each element.\n *\n * @param {ElementRegistryForEachCallback} fn The function to execute.\n */\nElementRegistry.prototype.forEach = function(fn) {\n\n  var map = this._elements;\n\n  Object.keys(map).forEach(function(id) {\n    var container = map[id],\n        element = container.element,\n        gfx = container.gfx;\n\n    return fn(element, gfx);\n  });\n};\n\n/**\n * Return the graphical representation of an element.\n *\n * @example\n *\n * ```javascript\n * elementRegistry.getGraphics('SomeElementId_1');\n *\n * elementRegistry.getGraphics(rootElement); // <g ...>\n *\n * elementRegistry.getGraphics(rootElement, true); // <svg ...>\n * ```\n *\n * @param {ElementLike|string} filter The element or its ID.\n * @param {boolean} [secondary=false] Whether to return the secondary graphical representation.\n *\n * @return {SVGElement} The graphical representation.\n */\nElementRegistry.prototype.getGraphics = function(filter, secondary) {\n  var id = filter.id || filter;\n\n  var container = this._elements[id];\n  return container && (secondary ? container.secondaryGfx : container.gfx);\n};\n\n/**\n * Validate an ID and throw an error if invalid.\n *\n * @param {string} id\n *\n * @throws {Error} Error indicating that the ID is invalid or already assigned.\n */\nElementRegistry.prototype._validateId = function(id) {\n  if (!id) {\n    throw new Error('element must have an id');\n  }\n\n  if (this._elements[id]) {\n    throw new Error('element with id ' + id + ' already added');\n  }\n};\n","/**\n * Extends a collection with {@link Refs} aware methods\n *\n * @param {Array<Object>} collection\n * @param {Refs} refs instance\n * @param {Object} property represented by the collection\n * @param {Object} target object the collection is attached to\n *\n * @return {RefsCollection<Object>} the extended array\n */\nfunction extend(collection, refs, property, target) {\n  var inverseProperty = property.inverse;\n\n  /**\n   * Removes the given element from the array and returns it.\n   *\n   * @method RefsCollection#remove\n   *\n   * @param {Object} element the element to remove\n   */\n  Object.defineProperty(collection, 'remove', {\n    value: function (element) {\n      var idx = this.indexOf(element);\n      if (idx !== -1) {\n        this.splice(idx, 1);\n\n        // unset inverse\n        refs.unset(element, inverseProperty, target);\n      }\n      return element;\n    }\n  });\n\n  /**\n   * Returns true if the collection contains the given element\n   *\n   * @method RefsCollection#contains\n   *\n   * @param {Object} element the element to check for\n   */\n  Object.defineProperty(collection, 'contains', {\n    value: function (element) {\n      return this.indexOf(element) !== -1;\n    }\n  });\n\n  /**\n   * Adds an element to the array, unless it exists already (set semantics).\n   *\n   * @method RefsCollection#add\n   *\n   * @param {Object} element the element to add\n   * @param {Number} optional index to add element to\n   *                 (possibly moving other elements around)\n   */\n  Object.defineProperty(collection, 'add', {\n    value: function (element, idx) {\n      var currentIdx = this.indexOf(element);\n      if (typeof idx === 'undefined') {\n        if (currentIdx !== -1) {\n          // element already in collection (!)\n          return;\n        }\n\n        // add to end of array, as no idx is specified\n        idx = this.length;\n      }\n\n      // handle already in collection\n      if (currentIdx !== -1) {\n        // remove element from currentIdx\n        this.splice(currentIdx, 1);\n      }\n\n      // add element at idx\n      this.splice(idx, 0, element);\n      if (currentIdx === -1) {\n        // set inverse, unless element was\n        // in collection already\n        refs.set(element, inverseProperty, target);\n      }\n    }\n  });\n\n  // a simple marker, identifying this element\n  // as being a refs collection\n  Object.defineProperty(collection, '__refs_collection', {\n    value: true\n  });\n  return collection;\n}\n\n/**\n * Checks if a given collection is extended\n *\n * @param {Array<Object>} collection\n *\n * @return {boolean}\n */\nfunction isExtended(collection) {\n  return collection.__refs_collection === true;\n}\n\nvar collection = {\n  __proto__: null,\n  extend: extend,\n  isExtended: isExtended\n};\n\nfunction hasOwnProperty(e, property) {\n  return Object.prototype.hasOwnProperty.call(e, property.name || property);\n}\nfunction defineCollectionProperty(ref, property, target) {\n  var collection = extend(target[property.name] || [], ref, property, target);\n  Object.defineProperty(target, property.name, {\n    enumerable: property.enumerable,\n    value: collection\n  });\n  if (collection.length) {\n    collection.forEach(function (o) {\n      ref.set(o, property.inverse, target);\n    });\n  }\n}\nfunction defineProperty(ref, property, target) {\n  var inverseProperty = property.inverse;\n  var _value = target[property.name];\n  Object.defineProperty(target, property.name, {\n    configurable: property.configurable,\n    enumerable: property.enumerable,\n    get: function () {\n      return _value;\n    },\n    set: function (value) {\n      // return if we already performed all changes\n      if (value === _value) {\n        return;\n      }\n      var old = _value;\n\n      // temporary set null\n      _value = null;\n      if (old) {\n        ref.unset(old, inverseProperty, target);\n      }\n\n      // set new value\n      _value = value;\n\n      // set inverse value\n      ref.set(_value, inverseProperty, target);\n    }\n  });\n}\n\n/**\n * Creates a new references object defining two inversly related\n * attribute descriptors a and b.\n *\n * <p>\n *   When bound to an object using {@link Refs#bind} the references\n *   get activated and ensure that add and remove operations are applied\n *   reversely, too.\n * </p>\n *\n * <p>\n *   For attributes represented as collections {@link Refs} provides the\n *   {@link RefsCollection#add}, {@link RefsCollection#remove} and {@link RefsCollection#contains} extensions\n *   that must be used to properly hook into the inverse change mechanism.\n * </p>\n *\n * @class Refs\n *\n * @classdesc A bi-directional reference between two attributes.\n *\n * @param {Refs.AttributeDescriptor} a property descriptor\n * @param {Refs.AttributeDescriptor} b property descriptor\n *\n * @example\n *\n * var refs = Refs({ name: 'wheels', collection: true, enumerable: true }, { name: 'car' });\n *\n * var car = { name: 'toyota' };\n * var wheels = [{ pos: 'front-left' }, { pos: 'front-right' }];\n *\n * refs.bind(car, 'wheels');\n *\n * car.wheels // []\n * car.wheels.add(wheels[0]);\n * car.wheels.add(wheels[1]);\n *\n * car.wheels // [{ pos: 'front-left' }, { pos: 'front-right' }]\n *\n * wheels[0].car // { name: 'toyota' };\n * car.wheels.remove(wheels[0]);\n *\n * wheels[0].car // undefined\n */\nfunction Refs(a, b) {\n  if (!(this instanceof Refs)) {\n    return new Refs(a, b);\n  }\n\n  // link\n  a.inverse = b;\n  b.inverse = a;\n  this.props = {};\n  this.props[a.name] = a;\n  this.props[b.name] = b;\n}\n\n/**\n * Binds one side of a bi-directional reference to a\n * target object.\n *\n * @memberOf Refs\n *\n * @param  {Object} target\n * @param  {String} property\n */\nRefs.prototype.bind = function (target, property) {\n  if (typeof property === 'string') {\n    if (!this.props[property]) {\n      throw new Error('no property <' + property + '> in ref');\n    }\n    property = this.props[property];\n  }\n  if (property.collection) {\n    defineCollectionProperty(this, property, target);\n  } else {\n    defineProperty(this, property, target);\n  }\n};\nRefs.prototype.ensureRefsCollection = function (target, property) {\n  var collection = target[property.name];\n  if (!isExtended(collection)) {\n    defineCollectionProperty(this, property, target);\n  }\n  return collection;\n};\nRefs.prototype.ensureBound = function (target, property) {\n  if (!hasOwnProperty(target, property)) {\n    this.bind(target, property);\n  }\n};\nRefs.prototype.unset = function (target, property, value) {\n  if (target) {\n    this.ensureBound(target, property);\n    if (property.collection) {\n      this.ensureRefsCollection(target, property).remove(value);\n    } else {\n      target[property.name] = undefined;\n    }\n  }\n};\nRefs.prototype.set = function (target, property, value) {\n  if (target) {\n    this.ensureBound(target, property);\n    if (property.collection) {\n      this.ensureRefsCollection(target, property).add(value);\n    } else {\n      target[property.name] = value;\n    }\n  }\n};\n\n/**\n * An attribute descriptor to be used specify an attribute in a {@link Refs} instance\n *\n * @typedef {Object} Refs.AttributeDescriptor\n * @property {String} name\n * @property {boolean} [collection=false]\n * @property {boolean} [enumerable=false]\n */\n\nexport { collection as Collection, Refs };\n","import { assign } from 'min-dash';\nimport inherits from 'inherits-browser';\n\nimport { Refs } from 'object-refs';\n\nvar parentRefs = new Refs({ name: 'children', enumerable: true, collection: true }, { name: 'parent' }),\n    labelRefs = new Refs({ name: 'labels', enumerable: true, collection: true }, { name: 'labelTarget' }),\n    attacherRefs = new Refs({ name: 'attachers', collection: true }, { name: 'host' }),\n    outgoingRefs = new Refs({ name: 'outgoing', collection: true }, { name: 'source' }),\n    incomingRefs = new Refs({ name: 'incoming', collection: true }, { name: 'target' });\n\n/**\n * @typedef {import('./Types').Element} Element\n * @typedef {import('./Types').Shape} Shape\n * @typedef {import('./Types').Root} Root\n * @typedef {import('./Types').Label} Label\n * @typedef {import('./Types').Connection} Connection\n */\n\n/**\n * The basic graphical representation\n *\n * @class\n * @constructor\n */\nfunction ElementImpl() {\n\n  /**\n   * The object that backs up the shape\n   *\n   * @name Element#businessObject\n   * @type Object\n   */\n  Object.defineProperty(this, 'businessObject', {\n    writable: true\n  });\n\n\n  /**\n   * Single label support, will mapped to multi label array\n   *\n   * @name Element#label\n   * @type Object\n   */\n  Object.defineProperty(this, 'label', {\n    get: function() {\n      return this.labels[0];\n    },\n    set: function(newLabel) {\n\n      var label = this.label,\n          labels = this.labels;\n\n      if (!newLabel && label) {\n        labels.remove(label);\n      } else {\n        labels.add(newLabel, 0);\n      }\n    }\n  });\n\n  /**\n   * The parent shape\n   *\n   * @name Element#parent\n   * @type Shape\n   */\n  parentRefs.bind(this, 'parent');\n\n  /**\n   * The list of labels\n   *\n   * @name Element#labels\n   * @type Label\n   */\n  labelRefs.bind(this, 'labels');\n\n  /**\n   * The list of outgoing connections\n   *\n   * @name Element#outgoing\n   * @type Array<Connection>\n   */\n  outgoingRefs.bind(this, 'outgoing');\n\n  /**\n   * The list of incoming connections\n   *\n   * @name Element#incoming\n   * @type Array<Connection>\n   */\n  incomingRefs.bind(this, 'incoming');\n}\n\n\n/**\n * A graphical object\n *\n * @class\n * @constructor\n *\n * @extends ElementImpl\n */\nfunction ShapeImpl() {\n  ElementImpl.call(this);\n\n  /**\n   * Indicates frame shapes\n   *\n   * @name ShapeImpl#isFrame\n   * @type boolean\n   */\n\n  /**\n   * The list of children\n   *\n   * @name ShapeImpl#children\n   * @type Element[]\n   */\n  parentRefs.bind(this, 'children');\n\n  /**\n   * @name ShapeImpl#host\n   * @type Shape\n   */\n  attacherRefs.bind(this, 'host');\n\n  /**\n   * @name ShapeImpl#attachers\n   * @type Shape\n   */\n  attacherRefs.bind(this, 'attachers');\n}\n\ninherits(ShapeImpl, ElementImpl);\n\n\n/**\n * A root graphical object\n *\n * @class\n * @constructor\n *\n * @extends ElementImpl\n */\nfunction RootImpl() {\n  ElementImpl.call(this);\n\n  /**\n   * The list of children\n   *\n   * @name RootImpl#children\n   * @type Element[]\n   */\n  parentRefs.bind(this, 'children');\n}\n\ninherits(RootImpl, ShapeImpl);\n\n\n/**\n * A label for an element\n *\n * @class\n * @constructor\n *\n * @extends ShapeImpl\n */\nfunction LabelImpl() {\n  ShapeImpl.call(this);\n\n  /**\n   * The labeled element\n   *\n   * @name LabelImpl#labelTarget\n   * @type Element\n   */\n  labelRefs.bind(this, 'labelTarget');\n}\n\ninherits(LabelImpl, ShapeImpl);\n\n\n/**\n * A connection between two elements\n *\n * @class\n * @constructor\n *\n * @extends ElementImpl\n */\nfunction ConnectionImpl() {\n  ElementImpl.call(this);\n\n  /**\n   * The element this connection originates from\n   *\n   * @name ConnectionImpl#source\n   * @type Element\n   */\n  outgoingRefs.bind(this, 'source');\n\n  /**\n   * The element this connection points to\n   *\n   * @name ConnectionImpl#target\n   * @type Element\n   */\n  incomingRefs.bind(this, 'target');\n}\n\ninherits(ConnectionImpl, ElementImpl);\n\n\nvar types = {\n  connection: ConnectionImpl,\n  shape: ShapeImpl,\n  label: LabelImpl,\n  root: RootImpl\n};\n\n/**\n * Creates a root element.\n *\n * @overlord\n *\n * @example\n *\n * ```javascript\n * import * as Model from 'diagram-js/lib/model';\n *\n * const root = Model.create('root', {\n *   x: 100,\n *   y: 100,\n *   width: 100,\n *   height: 100\n * });\n * ```\n *\n * @param {'root'} type\n * @param {any} [attrs]\n *\n * @return {Root}\n */\n\n/**\n * Creates a connection.\n *\n * @overlord\n *\n * @example\n *\n * ```javascript\n * import * as Model from 'diagram-js/lib/model';\n *\n * const connection = Model.create('connection', {\n *   waypoints: [\n *     { x: 100, y: 100 },\n *     { x: 200, y: 100 }\n *   ]\n * });\n * ```\n *\n * @param {'connection'} type\n * @param {any} [attrs]\n *\n * @return {Connection}\n */\n\n/**\n * Creates a shape.\n *\n * @overlord\n *\n * @example\n *\n * ```javascript\n * import * as Model from 'diagram-js/lib/model';\n *\n * const shape = Model.create('shape', {\n *   x: 100,\n *   y: 100,\n *   width: 100,\n *   height: 100\n * });\n * ```\n *\n * @param {'shape'} type\n * @param {any} [attrs]\n *\n * @return {Shape}\n */\n\n/**\n * Creates a label.\n *\n * @example\n *\n * ```javascript\n * import * as Model from 'diagram-js/lib/model';\n *\n * const label = Model.create('label', {\n *   x: 100,\n *   y: 100,\n *   width: 100,\n *   height: 100,\n *   labelTarget: shape\n * });\n * ```\n *\n * @param {'label'} type\n * @param {Object} [attrs]\n *\n * @return {Label}\n */\nexport function create(type, attrs) {\n  var Type = types[type];\n  if (!Type) {\n    throw new Error('unknown type: <' + type + '>');\n  }\n  return assign(new Type(), attrs);\n}\n\n/**\n * Checks whether an object is a model instance.\n *\n * @param {any} obj\n *\n * @return {boolean}\n */\nexport function isModelElement(obj) {\n  return obj instanceof ElementImpl;\n}","import {\n  create\n} from '../model';\n\nimport { assign } from 'min-dash';\n\n/**\n * @typedef {import('../model/Types').Element} Element\n * @typedef {import('../model/Types').Connection} Connection\n * @typedef {import('../model/Types').Label} Label\n * @typedef {import('../model/Types').Root} Root\n * @typedef {import('../model/Types').Shape} Shape\n */\n\n/**\n * A factory for model elements.\n *\n * @template {Connection} [T=Connection]\n * @template {Label} [U=Label]\n * @template {Root} [V=Root]\n * @template {Shape} [W=Shape]\n */\nexport default function ElementFactory() {\n  this._uid = 12;\n}\n\n/**\n * Create a root element.\n *\n * @param {Partial<Root>} [attrs]\n *\n * @return {V} The created root element.\n */\nElementFactory.prototype.createRoot = function(attrs) {\n  return this.create('root', attrs);\n};\n\n/**\n * Create a label.\n *\n * @param {Partial<Label>} [attrs]\n *\n * @return {U} The created label.\n */\nElementFactory.prototype.createLabel = function(attrs) {\n  return this.create('label', attrs);\n};\n\n/**\n * Create a shape.\n *\n * @param {Partial<Shape>} [attrs]\n *\n * @return {W} The created shape.\n */\nElementFactory.prototype.createShape = function(attrs) {\n  return this.create('shape', attrs);\n};\n\n/**\n * Create a connection.\n *\n * @param {Partial<Connection>} [attrs]\n *\n * @return {T} The created connection.\n */\nElementFactory.prototype.createConnection = function(attrs) {\n  return this.create('connection', attrs);\n};\n\n/**\n * Create a root element.\n *\n * @overlord\n * @param {'root'} type\n * @param {Partial<Root>} [attrs]\n * @return {V}\n */\n/**\n * Create a shape.\n *\n * @overlord\n * @param {'shape'} type\n * @param {Partial<Shape>} [attrs]\n * @return {W}\n */\n/**\n * Create a connection.\n *\n * @overlord\n * @param {'connection'} type\n * @param {Partial<Connection>} [attrs]\n * @return {T}\n */\n/**\n * Create a label.\n *\n * @param {'label'} type\n * @param {Partial<Label>} [attrs]\n * @return {U}\n */\nElementFactory.prototype.create = function(type, attrs) {\n\n  attrs = assign({}, attrs || {});\n\n  if (!attrs.id) {\n    attrs.id = type + '_' + (this._uid++);\n  }\n\n  return create(type, attrs);\n};","import {\n  isFunction,\n  isArray,\n  isNumber,\n  bind,\n  assign\n} from 'min-dash';\n\nvar FN_REF = '__fn';\n\nvar DEFAULT_PRIORITY = 1000;\n\nvar slice = Array.prototype.slice;\n\n/**\n * @typedef { {\n *   stopPropagation(): void;\n *   preventDefault(): void;\n *   cancelBubble: boolean;\n *   defaultPrevented: boolean;\n *   returnValue: any;\n * } } Event\n */\n\n/**\n * @template E\n *\n * @typedef { (event: E & Event, ...any) => any } EventBusEventCallback\n */\n\n/**\n * @typedef { {\n *  priority: number;\n *  next: EventBusListener | null;\n *  callback: EventBusEventCallback<any>;\n * } } EventBusListener\n */\n\n/**\n * A general purpose event bus.\n *\n * This component is used to communicate across a diagram instance.\n * Other parts of a diagram can use it to listen to and broadcast events.\n *\n *\n * ## Registering for Events\n *\n * The event bus provides the {@link EventBus#on} and {@link EventBus#once}\n * methods to register for events. {@link EventBus#off} can be used to\n * remove event registrations. Listeners receive an instance of {@link Event}\n * as the first argument. It allows them to hook into the event execution.\n *\n * ```javascript\n *\n * // listen for event\n * eventBus.on('foo', function(event) {\n *\n *   // access event type\n *   event.type; // 'foo'\n *\n *   // stop propagation to other listeners\n *   event.stopPropagation();\n *\n *   // prevent event default\n *   event.preventDefault();\n * });\n *\n * // listen for event with custom payload\n * eventBus.on('bar', function(event, payload) {\n *   console.log(payload);\n * });\n *\n * // listen for event returning value\n * eventBus.on('foobar', function(event) {\n *\n *   // stop event propagation + prevent default\n *   return false;\n *\n *   // stop event propagation + return custom result\n *   return {\n *     complex: 'listening result'\n *   };\n * });\n *\n *\n * // listen with custom priority (default=1000, higher is better)\n * eventBus.on('priorityfoo', 1500, function(event) {\n *   console.log('invoked first!');\n * });\n *\n *\n * // listen for event and pass the context (`this`)\n * eventBus.on('foobar', function(event) {\n *   this.foo();\n * }, this);\n * ```\n *\n *\n * ## Emitting Events\n *\n * Events can be emitted via the event bus using {@link EventBus#fire}.\n *\n * ```javascript\n *\n * // false indicates that the default action\n * // was prevented by listeners\n * if (eventBus.fire('foo') === false) {\n *   console.log('default has been prevented!');\n * };\n *\n *\n * // custom args + return value listener\n * eventBus.on('sum', function(event, a, b) {\n *   return a + b;\n * });\n *\n * // you can pass custom arguments + retrieve result values.\n * var sum = eventBus.fire('sum', 1, 2);\n * console.log(sum); // 3\n * ```\n *\n * @template [EventMap=null]\n */\nexport default function EventBus() {\n\n  /**\n   * @type { Record<string, EventBusListener> }\n   */\n  this._listeners = {};\n\n  // cleanup on destroy on lowest priority to allow\n  // message passing until the bitter end\n  this.on('diagram.destroy', 1, this._destroy, this);\n}\n\n/**\n * @overlord\n *\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.on = function(events, priority, callback, that) {\n\n  events = isArray(events) ? events : [ events ];\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  var actualCallback = callback;\n\n  if (that) {\n    actualCallback = bind(callback, that);\n\n    // make sure we remember and are able to remove\n    // bound callbacks via {@link #off} using the original\n    // callback\n    actualCallback[FN_REF] = callback[FN_REF] || callback;\n  }\n\n  var self = this;\n\n  events.forEach(function(e) {\n    self._addListener(e, {\n      priority: priority,\n      callback: actualCallback,\n      next: null\n    });\n  });\n};\n\n/**\n * @overlord\n *\n * Register an event listener that is called only once.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] the listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener that is called only once.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.once = function(events, priority, callback, that) {\n  var self = this;\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  function wrappedCallback() {\n    wrappedCallback.__isTomb = true;\n\n    var result = callback.apply(that, arguments);\n\n    self.off(events, wrappedCallback);\n\n    return result;\n  }\n\n  // make sure we remember and are able to remove\n  // bound callbacks via {@link #off} using the original\n  // callback\n  wrappedCallback[FN_REF] = callback;\n\n  this.on(events, priority, wrappedCallback);\n};\n\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {string|string[]} events\n * @param {EventBusEventCallback} [callback]\n */\nEventBus.prototype.off = function(events, callback) {\n\n  events = isArray(events) ? events : [ events ];\n\n  var self = this;\n\n  events.forEach(function(event) {\n    self._removeListener(event, callback);\n  });\n\n};\n\n\n/**\n * Create an event recognized be the event bus.\n *\n * @param {Object} data Event data.\n *\n * @return {Event} An event that will be recognized by the event bus.\n */\nEventBus.prototype.createEvent = function(data) {\n  var event = new InternalEvent();\n\n  event.init(data);\n\n  return event;\n};\n\n\n/**\n * Fires an event.\n *\n * @example\n *\n * ```javascript\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n * ```\n *\n * @param {string} [type] event type\n * @param {Object} [data] event or event data\n * @param {...any} [args] additional arguments the callback will be called with.\n *\n * @return {any} The return value. Will be set to `false` if the default was prevented.\n */\nEventBus.prototype.fire = function(type, data) {\n  var event,\n      firstListener,\n      returnValue,\n      args;\n\n  args = slice.call(arguments);\n\n  if (typeof type === 'object') {\n    data = type;\n    type = data.type;\n  }\n\n  if (!type) {\n    throw new Error('no event type specified');\n  }\n\n  firstListener = this._listeners[type];\n\n  if (!firstListener) {\n    return;\n  }\n\n  // we make sure we fire instances of our home made\n  // events here. We wrap them only once, though\n  if (data instanceof InternalEvent) {\n\n    // we are fine, we alread have an event\n    event = data;\n  } else {\n    event = this.createEvent(data);\n  }\n\n  // ensure we pass the event as the first parameter\n  args[0] = event;\n\n  // original event type (in case we delegate)\n  var originalType = event.type;\n\n  // update event type before delegation\n  if (type !== originalType) {\n    event.type = type;\n  }\n\n  try {\n    returnValue = this._invokeListeners(event, args, firstListener);\n  } finally {\n\n    // reset event type after delegation\n    if (type !== originalType) {\n      event.type = originalType;\n    }\n  }\n\n  // set the return value to false if the event default\n  // got prevented and no other return value exists\n  if (returnValue === undefined && event.defaultPrevented) {\n    returnValue = false;\n  }\n\n  return returnValue;\n};\n\n/**\n * Handle an error by firing an event.\n *\n * @param {Error} error The error to be handled.\n *\n * @return {boolean} Whether the error was handled.\n */\nEventBus.prototype.handleError = function(error) {\n  return this.fire('error', { error: error }) === false;\n};\n\n\nEventBus.prototype._destroy = function() {\n  this._listeners = {};\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListeners = function(event, args, listener) {\n\n  var returnValue;\n\n  while (listener) {\n\n    // handle stopped propagation\n    if (event.cancelBubble) {\n      break;\n    }\n\n    returnValue = this._invokeListener(event, args, listener);\n\n    listener = listener.next;\n  }\n\n  return returnValue;\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListener = function(event, args, listener) {\n\n  var returnValue;\n\n  if (listener.callback.__isTomb) {\n    return returnValue;\n  }\n\n  try {\n\n    // returning false prevents the default action\n    returnValue = invokeFunction(listener.callback, args);\n\n    // stop propagation on return value\n    if (returnValue !== undefined) {\n      event.returnValue = returnValue;\n      event.stopPropagation();\n    }\n\n    // prevent default on return false\n    if (returnValue === false) {\n      event.preventDefault();\n    }\n  } catch (error) {\n    if (!this.handleError(error)) {\n      console.error('unhandled error in event listener', error);\n\n      throw error;\n    }\n  }\n\n  return returnValue;\n};\n\n/**\n * Add new listener with a certain priority to the list\n * of listeners (for the given event).\n *\n * The semantics of listener registration / listener execution are\n * first register, first serve: New listeners will always be inserted\n * after existing listeners with the same priority.\n *\n * Example: Inserting two listeners with priority 1000 and 1300\n *\n *    * before: [ 1500, 1500, 1000, 1000 ]\n *    * after: [ 1500, 1500, (new=1300), 1000, 1000, (new=1000) ]\n *\n * @param {string} event\n * @param {EventBusListener} newListener\n */\nEventBus.prototype._addListener = function(event, newListener) {\n\n  var listener = this._getListeners(event),\n      previousListener;\n\n  // no prior listeners\n  if (!listener) {\n    this._setListeners(event, newListener);\n\n    return;\n  }\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  while (listener) {\n\n    if (listener.priority < newListener.priority) {\n\n      newListener.next = listener;\n\n      if (previousListener) {\n        previousListener.next = newListener;\n      } else {\n        this._setListeners(event, newListener);\n      }\n\n      return;\n    }\n\n    previousListener = listener;\n    listener = listener.next;\n  }\n\n  // add new listener to back\n  previousListener.next = newListener;\n};\n\n\n/**\n * @param {string} name\n *\n * @return {EventBusListener}\n */\nEventBus.prototype._getListeners = function(name) {\n  return this._listeners[name];\n};\n\n/**\n * @param {string} name\n * @param {EventBusListener} listener\n */\nEventBus.prototype._setListeners = function(name, listener) {\n  this._listeners[name] = listener;\n};\n\nEventBus.prototype._removeListener = function(event, callback) {\n\n  var listener = this._getListeners(event),\n      nextListener,\n      previousListener,\n      listenerCallback;\n\n  if (!callback) {\n\n    // clear listeners\n    this._setListeners(event, null);\n\n    return;\n  }\n\n  while (listener) {\n\n    nextListener = listener.next;\n\n    listenerCallback = listener.callback;\n\n    if (listenerCallback === callback || listenerCallback[FN_REF] === callback) {\n      if (previousListener) {\n        previousListener.next = nextListener;\n      } else {\n\n        // new first listener\n        this._setListeners(event, nextListener);\n      }\n    }\n\n    previousListener = listener;\n    listener = nextListener;\n  }\n};\n\n/**\n * A event that is emitted via the event bus.\n */\nfunction InternalEvent() { }\n\nInternalEvent.prototype.stopPropagation = function() {\n  this.cancelBubble = true;\n};\n\nInternalEvent.prototype.preventDefault = function() {\n  this.defaultPrevented = true;\n};\n\nInternalEvent.prototype.init = function(data) {\n  assign(this, data || {});\n};\n\n\n/**\n * Invoke function. Be fast...\n *\n * @param {Function} fn\n * @param {any[]} args\n *\n * @return {any}\n */\nfunction invokeFunction(fn, args) {\n  return fn.apply(null, args);\n}\n","/**\n * SVGs for elements are generated by the {@link GraphicsFactory}.\n *\n * This utility gives quick access to the important semantic\n * parts of an element.\n */\n\n/**\n * Returns the visual part of a diagram element.\n *\n * @param {SVGElement} gfx\n *\n * @return {SVGElement}\n */\nexport function getVisual(gfx) {\n  return gfx.childNodes[0];\n}\n\n/**\n * Returns the children for a given diagram element.\n *\n * @param {SVGElement} gfx\n * @return {SVGElement}\n */\nexport function getChildren(gfx) {\n  return gfx.parentNode.childNodes[1];\n}","import {\r\n  transform as svgTransform,\r\n  createTransform\r\n} from 'tiny-svg';\r\n\r\n\r\n/**\r\n * @param {SVGElement} gfx\r\n * @param {number} x\r\n * @param {number} y\r\n * @param {number} [angle]\r\n * @param {number} [amount]\r\n */\r\nexport function transform(gfx, x, y, angle, amount) {\r\n  var translate = createTransform();\r\n  translate.setTranslate(x, y);\r\n\r\n  var rotate = createTransform();\r\n  rotate.setRotate(angle || 0, 0, 0);\r\n\r\n  var scale = createTransform();\r\n  scale.setScale(amount || 1, amount || 1);\r\n\r\n  svgTransform(gfx, [ translate, rotate, scale ]);\r\n}\r\n\r\n\r\n/**\r\n * @param {SVGElement} gfx\r\n * @param {number} x\r\n * @param {number} y\r\n */\r\nexport function translate(gfx, x, y) {\r\n  var translate = createTransform();\r\n  translate.setTranslate(x, y);\r\n\r\n  svgTransform(gfx, translate);\r\n}\r\n\r\n\r\n/**\r\n * @param {SVGElement} gfx\r\n * @param {number} angle\r\n */\r\nexport function rotate(gfx, angle) {\r\n  var rotate = createTransform();\r\n  rotate.setRotate(angle, 0, 0);\r\n\r\n  svgTransform(gfx, rotate);\r\n}\r\n\r\n\r\n/**\r\n * @param {SVGElement} gfx\r\n * @param {number} amount\r\n */\r\nexport function scale(gfx, amount) {\r\n  var scale = createTransform();\r\n  scale.setScale(amount, amount);\r\n\r\n  svgTransform(gfx, scale);\r\n}\r\n","import {\n  forEach,\n  reduce\n} from 'min-dash';\n\nimport {\n  getChildren,\n  getVisual\n} from '../util/GraphicsUtil';\n\nimport { translate } from '../util/SvgTransformUtil';\n\nimport { clear as domClear } from 'min-dom';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  isFrameElement\n} from '../util/Elements';\n\n/**\n * @typedef {import('./Types').ConnectionLike} ConnectionLike\n * @typedef {import('./Types').ElementLike} ElementLike\n * @typedef {import('./Types').ShapeLike} ShapeLike\n *\n * @typedef {import('./ElementRegistry').default} ElementRegistry\n * @typedef {import('./EventBus').default} EventBus\n */\n\n/**\n * A factory that creates graphical elements.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n */\nexport default function GraphicsFactory(eventBus, elementRegistry) {\n  this._eventBus = eventBus;\n  this._elementRegistry = elementRegistry;\n}\n\nGraphicsFactory.$inject = [ 'eventBus' , 'elementRegistry' ];\n\n/**\n * @param { { parent?: any } } element\n * @return {SVGElement}\n */\nGraphicsFactory.prototype._getChildrenContainer = function(element) {\n\n  var gfx = this._elementRegistry.getGraphics(element);\n\n  var childrenGfx;\n\n  // root element\n  if (!element.parent) {\n    childrenGfx = gfx;\n  } else {\n    childrenGfx = getChildren(gfx);\n    if (!childrenGfx) {\n      childrenGfx = svgCreate('g');\n      svgClasses(childrenGfx).add('djs-children');\n\n      svgAppend(gfx.parentNode, childrenGfx);\n    }\n  }\n\n  return childrenGfx;\n};\n\n/**\n * Clears the graphical representation of the element and returns the\n * cleared visual (the <g class=\"djs-visual\" /> element).\n */\nGraphicsFactory.prototype._clear = function(gfx) {\n  var visual = getVisual(gfx);\n\n  domClear(visual);\n\n  return visual;\n};\n\n/**\n * Creates a gfx container for shapes and connections\n *\n * The layout is as follows:\n *\n * <g class=\"djs-group\">\n *\n *   <!-- the gfx -->\n *   <g class=\"djs-element djs-(shape|connection|frame)\">\n *     <g class=\"djs-visual\">\n *       <!-- the renderer draws in here -->\n *     </g>\n *\n *     <!-- extensions (overlays, click box, ...) goes here\n *   </g>\n *\n *   <!-- the gfx child nodes -->\n *   <g class=\"djs-children\"></g>\n * </g>\n *\n * @param {string} type the type of the element, i.e. shape | connection\n * @param {SVGElement} childrenGfx\n * @param {number} [parentIndex] position to create container in parent\n * @param {boolean} [isFrame] is frame element\n *\n * @return {SVGElement}\n */\nGraphicsFactory.prototype._createContainer = function(\n    type, childrenGfx, parentIndex, isFrame\n) {\n  var outerGfx = svgCreate('g');\n  svgClasses(outerGfx).add('djs-group');\n\n  // insert node at position\n  if (typeof parentIndex !== 'undefined') {\n    prependTo(outerGfx, childrenGfx, childrenGfx.childNodes[parentIndex]);\n  } else {\n    svgAppend(childrenGfx, outerGfx);\n  }\n\n  var gfx = svgCreate('g');\n  svgClasses(gfx).add('djs-element');\n  svgClasses(gfx).add('djs-' + type);\n\n  if (isFrame) {\n    svgClasses(gfx).add('djs-frame');\n  }\n\n  svgAppend(outerGfx, gfx);\n\n  // create visual\n  var visual = svgCreate('g');\n  svgClasses(visual).add('djs-visual');\n\n  svgAppend(gfx, visual);\n\n  return gfx;\n};\n\n/**\n * Create a graphical element.\n *\n * @param { 'shape' | 'connection' | 'label' | 'root' } type The type of the element.\n * @param {ElementLike} element The element.\n * @param {number} [parentIndex] The index at which to add the graphical element to its parent's children.\n *\n * @return {SVGElement} The graphical element.\n */\nGraphicsFactory.prototype.create = function(type, element, parentIndex) {\n  var childrenGfx = this._getChildrenContainer(element.parent);\n  return this._createContainer(type, childrenGfx, parentIndex, isFrameElement(element));\n};\n\n/**\n * Update the containments of the given elements.\n *\n * @param {ElementLike[]} elements The elements.\n */\nGraphicsFactory.prototype.updateContainments = function(elements) {\n\n  var self = this,\n      elementRegistry = this._elementRegistry,\n      parents;\n\n  parents = reduce(elements, function(map, e) {\n\n    if (e.parent) {\n      map[e.parent.id] = e.parent;\n    }\n\n    return map;\n  }, {});\n\n  // update all parents of changed and reorganized their children\n  // in the correct order (as indicated in our model)\n  forEach(parents, function(parent) {\n\n    var children = parent.children;\n\n    if (!children) {\n      return;\n    }\n\n    var childrenGfx = self._getChildrenContainer(parent);\n\n    forEach(children.slice().reverse(), function(child) {\n      var childGfx = elementRegistry.getGraphics(child);\n\n      prependTo(childGfx.parentNode, childrenGfx);\n    });\n  });\n};\n\n/**\n * Draw a shape.\n *\n * @param {SVGElement} visual The graphical element.\n * @param {ShapeLike} element The shape.\n * @param {Object} attrs Optional attributes.\n *\n * @return {SVGElement}\n */\nGraphicsFactory.prototype.drawShape = function(visual, element, attrs = {}) {\n  var eventBus = this._eventBus;\n\n  return eventBus.fire('render.shape', { gfx: visual, element, attrs });\n};\n\n/**\n * Get the path of a shape.\n *\n * @param {ShapeLike} element The shape.\n *\n * @return {string} The path of the shape.\n */\nGraphicsFactory.prototype.getShapePath = function(element) {\n  var eventBus = this._eventBus;\n\n  return eventBus.fire('render.getShapePath', element);\n};\n\n/**\n * Draw a connection.\n *\n * @param {SVGElement} visual The graphical element.\n * @param {ConnectionLike} element The connection.\n * @param {Object} attrs Optional attributes.\n *\n * @return {SVGElement}\n */\nGraphicsFactory.prototype.drawConnection = function(visual, element, attrs = {}) {\n  var eventBus = this._eventBus;\n\n  return eventBus.fire('render.connection', { gfx: visual, element, attrs });\n};\n\n/**\n * Get the path of a connection.\n *\n * @param {ConnectionLike} connection The connection.\n *\n * @return {string} The path of the connection.\n */\nGraphicsFactory.prototype.getConnectionPath = function(connection) {\n  var eventBus = this._eventBus;\n\n  return eventBus.fire('render.getConnectionPath', connection);\n};\n\n/**\n * Update an elements graphical representation.\n *\n * @param {'shape'|'connection'} type\n * @param {ElementLike} element\n * @param {SVGElement} gfx\n */\nGraphicsFactory.prototype.update = function(type, element, gfx) {\n\n  // do NOT update root element\n  if (!element.parent) {\n    return;\n  }\n\n  var visual = this._clear(gfx);\n\n  // redraw\n  if (type === 'shape') {\n    this.drawShape(visual, element);\n\n    // update positioning\n    translate(gfx, element.x, element.y);\n  } else if (type === 'connection') {\n    this.drawConnection(visual, element);\n  } else {\n    throw new Error('unknown type: ' + type);\n  }\n\n  if (element.hidden) {\n    svgAttr(gfx, 'display', 'none');\n  } else {\n    svgAttr(gfx, 'display', 'block');\n  }\n};\n\n/**\n * Remove a graphical element.\n *\n * @param {ElementLike} element The element.\n */\nGraphicsFactory.prototype.remove = function(element) {\n  var gfx = this._elementRegistry.getGraphics(element);\n\n  // remove\n  svgRemove(gfx.parentNode);\n};\n\n\n// helpers //////////\n\nfunction prependTo(newNode, parentNode, siblingNode) {\n  var node = siblingNode || parentNode.firstChild;\n\n  // do not prepend node to itself to prevent IE from crashing\n  // https://github.com/bpmn-io/bpmn-js/issues/746\n  if (newNode === node) {\n    return;\n  }\n\n  parentNode.insertBefore(newNode, node);\n}\n","import DrawModule from '../draw';\n\nimport Canvas from './Canvas';\nimport ElementRegistry from './ElementRegistry';\nimport ElementFactory from './ElementFactory';\nimport EventBus from './EventBus';\nimport GraphicsFactory from './GraphicsFactory';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [ DrawModule ],\n  __init__: [ 'canvas' ],\n  canvas: [ 'type', Canvas ],\n  elementRegistry: [ 'type', ElementRegistry ],\n  elementFactory: [ 'type', ElementFactory ],\n  eventBus: [ 'type', EventBus ],\n  graphicsFactory: [ 'type', GraphicsFactory ]\n};","import { Injector } from 'didi';\n\nimport CoreModule from './core';\n\n/**\n * @typedef {import('didi').InjectionContext} InjectionContext\n * @typedef {import('didi').LocalsMap} LocalsMap\n * @typedef {import('didi').ModuleDeclaration} ModuleDeclaration\n *\n * @typedef { {\n *   modules?: ModuleDeclaration[];\n * } & Record<string, any> } DiagramOptions\n */\n\n/**\n * @template T\n * @typedef {import('didi').FactoryFunction<T>} FactoryFunction\n */\n\n/**\n * @template T\n * @typedef {import('didi').ArrayFunc<T>} ArrayFunc\n */\n\n/**\n * Bootstrap an injector from a list of modules, instantiating a number of default components\n *\n * @param {ModuleDeclaration[]} modules\n *\n * @return {Injector} a injector to use to access the components\n */\nfunction bootstrap(modules) {\n  var injector = new Injector(modules);\n\n  injector.init();\n\n  return injector;\n}\n\n/**\n * Creates an injector from passed options.\n *\n * @template ServiceMap\n * @param {DiagramOptions} [options]\n *\n * @return {Injector<ServiceMap>}\n */\nfunction createInjector(options) {\n\n  options = options || {};\n\n  /**\n   * @type { ModuleDeclaration }\n   */\n  var configModule = {\n    'config': [ 'value', options ]\n  };\n\n  var modules = [ configModule, CoreModule ].concat(options.modules || []);\n\n  return bootstrap(modules);\n}\n\n\n/**\n * The main diagram-js entry point that bootstraps the diagram with the given\n * configuration.\n *\n * To register extensions with the diagram, pass them as Array<Module> to the constructor.\n *\n * @class\n * @constructor\n * @template [ServiceMap=null]\n *\n * @example Creating a plug-in that logs whenever a shape is added to the canvas.\n *\n * ```javascript\n * // plug-in implementation\n * function MyLoggingPlugin(eventBus) {\n *   eventBus.on('shape.added', function(event) {\n *     console.log('shape ', event.shape, ' was added to the diagram');\n *   });\n * }\n *\n * // export as module\n * export default {\n *   __init__: [ 'myLoggingPlugin' ],\n *     myLoggingPlugin: [ 'type', MyLoggingPlugin ]\n * };\n * ```\n *\n * Use the plug-in in a Diagram instance:\n *\n * ```javascript\n * import MyLoggingModule from 'path-to-my-logging-plugin';\n *\n * var diagram = new Diagram({\n *   modules: [\n *     MyLoggingModule\n *   ]\n * });\n *\n * diagram.invoke([ 'canvas', function(canvas) {\n *   // add shape to drawing canvas\n *   canvas.addShape({ x: 10, y: 10 });\n * });\n *\n * // 'shape ... was added to the diagram' logged to console\n * ```\n *\n * @param {DiagramOptions} [options]\n * @param {Injector<ServiceMap>} [injector] An (optional) injector to bootstrap the diagram with.\n */\nexport default function Diagram(options, injector) {\n\n  /**\n   * @type {Injector<ServiceMap>}\n   */\n  this._injector = injector || createInjector(options);\n\n  // init\n\n  /**\n   * An event indicating that all plug-ins are loaded.\n   *\n   * Use this event to fire other events to interested plug-ins\n   *\n   * @memberOf Diagram\n   *\n   * @event diagram.init\n   *\n   * @example\n   *\n   * ```javascript\n   * eventBus.on('diagram.init', function() {\n   *   eventBus.fire('my-custom-event', { foo: 'BAR' });\n   * });\n   * ```\n   *\n   * @type {Object}\n   */\n  this.get('eventBus').fire('diagram.init');\n}\n\n/**\n * @overlord\n *\n * Resolves a diagram service.\n *\n * @template T\n *\n * @param {string} name The name of the service to get.\n *\n * @return {T}\n */\n/**\n * @overlord\n *\n * Resolves a diagram service.\n *\n * @template T\n *\n * @param {string} name The name of the service to get.\n * @param {true} strict If false, resolve missing services to null.\n *\n * @return {T}\n */\n/**\n * @overlord\n *\n * Resolves a diagram service.\n *\n * @template T\n *\n * @param {string} name The name of the service to get.\n * @param {boolean} strict If false, resolve missing services to null.\n *\n * @return {T|null}\n */\n/**\n * Resolves a diagram service.\n *\n * @template {keyof ServiceMap} Name\n *\n * @param {Name} name The name of the service to get.\n *\n * @return {ServiceMap[Name]}\n */\nDiagram.prototype.get = function(name, strict) {\n  return this._injector.get(name, strict);\n};\n\n/**\n * @overlord\n *\n * Invoke the given function, injecting dependencies. Return the result.\n *\n * @template T\n *\n * @param {FactoryFunction<T>} func\n * @param {InjectionContext} [context]\n * @param {LocalsMap} [locals]\n *\n * @return {T}\n */\n/**\n * Invoke the given function, injecting dependencies provided in\n * array notation. Return the result.\n *\n * @template T\n *\n * @param {ArrayFunc<T>} func function to be invoked\n * @param {InjectionContext} [context] context of the invocation\n * @param {LocalsMap} [locals] locals provided\n *\n * @return {T}\n */\nDiagram.prototype.invoke = function(func, context, locals) {\n  return this._injector.invoke(func, context, locals);\n};\n\n/**\n * Destroys the diagram\n */\nDiagram.prototype.destroy = function() {\n  this.get('eventBus').fire('diagram.destroy');\n};\n\n/**\n * Clear the diagram, removing all contents.\n */\nDiagram.prototype.clear = function() {\n  this.get('eventBus').fire('diagram.clear');\n};\n","import { forEach, bind, pick, assign, isString, isObject, set } from 'min-dash';\n\n/**\n * Moddle base element.\n */\nfunction Base() { }\n\nBase.prototype.get = function(name) {\n  return this.$model.properties.get(this, name);\n};\n\nBase.prototype.set = function(name, value) {\n  this.$model.properties.set(this, name, value);\n};\n\n/**\n * A model element factory.\n *\n * @param {Moddle} model\n * @param {Properties} properties\n */\nfunction Factory(model, properties) {\n  this.model = model;\n  this.properties = properties;\n}\n\n\nFactory.prototype.createType = function(descriptor) {\n\n  var model = this.model;\n\n  var props = this.properties,\n      prototype = Object.create(Base.prototype);\n\n  // initialize default values\n  forEach(descriptor.properties, function(p) {\n    if (!p.isMany && p.default !== undefined) {\n      prototype[p.name] = p.default;\n    }\n  });\n\n  props.defineModel(prototype, model);\n  props.defineDescriptor(prototype, descriptor);\n\n  var name = descriptor.ns.name;\n\n  /**\n   * The new type constructor\n   */\n  function ModdleElement(attrs) {\n    props.define(this, '$type', { value: name, enumerable: true });\n    props.define(this, '$attrs', { value: {} });\n    props.define(this, '$parent', { writable: true });\n\n    forEach(attrs, bind(function(val, key) {\n      this.set(key, val);\n    }, this));\n  }\n\n  ModdleElement.prototype = prototype;\n\n  ModdleElement.hasType = prototype.$instanceOf = this.model.hasType;\n\n  // static links\n  props.defineModel(ModdleElement, model);\n  props.defineDescriptor(ModdleElement, descriptor);\n\n  return ModdleElement;\n};\n\n/**\n * Built-in moddle types\n */\nvar BUILTINS = {\n  String: true,\n  Boolean: true,\n  Integer: true,\n  Real: true,\n  Element: true\n};\n\n/**\n * Converters for built in types from string representations\n */\nvar TYPE_CONVERTERS = {\n  String: function(s) { return s; },\n  Boolean: function(s) { return s === 'true'; },\n  Integer: function(s) { return parseInt(s, 10); },\n  Real: function(s) { return parseFloat(s); }\n};\n\n/**\n * Convert a type to its real representation\n */\nfunction coerceType(type, value) {\n\n  var converter = TYPE_CONVERTERS[type];\n\n  if (converter) {\n    return converter(value);\n  } else {\n    return value;\n  }\n}\n\n/**\n * Return whether the given type is built-in\n */\nfunction isBuiltIn(type) {\n  return !!BUILTINS[type];\n}\n\n/**\n * Return whether the given type is simple\n */\nfunction isSimple(type) {\n  return !!TYPE_CONVERTERS[type];\n}\n\n/**\n * Parses a namespaced attribute name of the form (ns:)localName to an object,\n * given a default prefix to assume in case no explicit namespace is given.\n *\n * @param {String} name\n * @param {String} [defaultPrefix] the default prefix to take, if none is present.\n *\n * @return {Object} the parsed name\n */\nfunction parseName(name, defaultPrefix) {\n  var parts = name.split(/:/),\n      localName, prefix;\n\n  // no prefix (i.e. only local name)\n  if (parts.length === 1) {\n    localName = name;\n    prefix = defaultPrefix;\n  } else\n\n  // prefix + local name\n  if (parts.length === 2) {\n    localName = parts[1];\n    prefix = parts[0];\n  } else {\n    throw new Error('expected <prefix:localName> or <localName>, got ' + name);\n  }\n\n  name = (prefix ? prefix + ':' : '') + localName;\n\n  return {\n    name: name,\n    prefix: prefix,\n    localName: localName\n  };\n}\n\n/**\n * A utility to build element descriptors.\n */\nfunction DescriptorBuilder(nameNs) {\n  this.ns = nameNs;\n  this.name = nameNs.name;\n  this.allTypes = [];\n  this.allTypesByName = {};\n  this.properties = [];\n  this.propertiesByName = {};\n}\n\n\nDescriptorBuilder.prototype.build = function() {\n  return pick(this, [\n    'ns',\n    'name',\n    'allTypes',\n    'allTypesByName',\n    'properties',\n    'propertiesByName',\n    'bodyProperty',\n    'idProperty'\n  ]);\n};\n\n/**\n * Add property at given index.\n *\n * @param {Object} p\n * @param {Number} [idx]\n * @param {Boolean} [validate=true]\n */\nDescriptorBuilder.prototype.addProperty = function(p, idx, validate) {\n\n  if (typeof idx === 'boolean') {\n    validate = idx;\n    idx = undefined;\n  }\n\n  this.addNamedProperty(p, validate !== false);\n\n  var properties = this.properties;\n\n  if (idx !== undefined) {\n    properties.splice(idx, 0, p);\n  } else {\n    properties.push(p);\n  }\n};\n\n\nDescriptorBuilder.prototype.replaceProperty = function(oldProperty, newProperty, replace) {\n  var oldNameNs = oldProperty.ns;\n\n  var props = this.properties,\n      propertiesByName = this.propertiesByName,\n      rename = oldProperty.name !== newProperty.name;\n\n  if (oldProperty.isId) {\n    if (!newProperty.isId) {\n      throw new Error(\n        'property <' + newProperty.ns.name + '> must be id property ' +\n        'to refine <' + oldProperty.ns.name + '>');\n    }\n\n    this.setIdProperty(newProperty, false);\n  }\n\n  if (oldProperty.isBody) {\n\n    if (!newProperty.isBody) {\n      throw new Error(\n        'property <' + newProperty.ns.name + '> must be body property ' +\n        'to refine <' + oldProperty.ns.name + '>');\n    }\n\n    // TODO: Check compatibility\n    this.setBodyProperty(newProperty, false);\n  }\n\n  // validate existence and get location of old property\n  var idx = props.indexOf(oldProperty);\n  if (idx === -1) {\n    throw new Error('property <' + oldNameNs.name + '> not found in property list');\n  }\n\n  // remove old property\n  props.splice(idx, 1);\n\n  // replacing the named property is intentional\n  //\n  //  * validate only if this is a \"rename\" operation\n  //  * add at specific index unless we \"replace\"\n  //\n  this.addProperty(newProperty, replace ? undefined : idx, rename);\n\n  // make new property available under old name\n  propertiesByName[oldNameNs.name] = propertiesByName[oldNameNs.localName] = newProperty;\n};\n\n\nDescriptorBuilder.prototype.redefineProperty = function(p, targetPropertyName, replace) {\n\n  var nsPrefix = p.ns.prefix;\n  var parts = targetPropertyName.split('#');\n\n  var name = parseName(parts[0], nsPrefix);\n  var attrName = parseName(parts[1], name.prefix).name;\n\n  var redefinedProperty = this.propertiesByName[attrName];\n  if (!redefinedProperty) {\n    throw new Error('refined property <' + attrName + '> not found');\n  } else {\n    this.replaceProperty(redefinedProperty, p, replace);\n  }\n\n  delete p.redefines;\n};\n\nDescriptorBuilder.prototype.addNamedProperty = function(p, validate) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  if (validate) {\n    this.assertNotDefined(p, ns.name);\n    this.assertNotDefined(p, ns.localName);\n  }\n\n  propsByName[ns.name] = propsByName[ns.localName] = p;\n};\n\nDescriptorBuilder.prototype.removeNamedProperty = function(p) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  delete propsByName[ns.name];\n  delete propsByName[ns.localName];\n};\n\nDescriptorBuilder.prototype.setBodyProperty = function(p, validate) {\n\n  if (validate && this.bodyProperty) {\n    throw new Error(\n      'body property defined multiple times ' +\n      '(<' + this.bodyProperty.ns.name + '>, <' + p.ns.name + '>)');\n  }\n\n  this.bodyProperty = p;\n};\n\nDescriptorBuilder.prototype.setIdProperty = function(p, validate) {\n\n  if (validate && this.idProperty) {\n    throw new Error(\n      'id property defined multiple times ' +\n      '(<' + this.idProperty.ns.name + '>, <' + p.ns.name + '>)');\n  }\n\n  this.idProperty = p;\n};\n\nDescriptorBuilder.prototype.assertNotTrait = function(typeDescriptor) {\n\n  const _extends = typeDescriptor.extends || [];\n\n  if (_extends.length) {\n    throw new Error(\n      `cannot create <${ typeDescriptor.name }> extending <${ typeDescriptor.extends }>`\n    );\n  }\n};\n\nDescriptorBuilder.prototype.assertNotDefined = function(p, name) {\n  var propertyName = p.name,\n      definedProperty = this.propertiesByName[propertyName];\n\n  if (definedProperty) {\n    throw new Error(\n      'property <' + propertyName + '> already defined; ' +\n      'override of <' + definedProperty.definedBy.ns.name + '#' + definedProperty.ns.name + '> by ' +\n      '<' + p.definedBy.ns.name + '#' + p.ns.name + '> not allowed without redefines');\n  }\n};\n\nDescriptorBuilder.prototype.hasProperty = function(name) {\n  return this.propertiesByName[name];\n};\n\nDescriptorBuilder.prototype.addTrait = function(t, inherited) {\n\n  if (inherited) {\n    this.assertNotTrait(t);\n  }\n\n  var typesByName = this.allTypesByName,\n      types = this.allTypes;\n\n  var typeName = t.name;\n\n  if (typeName in typesByName) {\n    return;\n  }\n\n  forEach(t.properties, bind(function(p) {\n\n    // clone property to allow extensions\n    p = assign({}, p, {\n      name: p.ns.localName,\n      inherited: inherited\n    });\n\n    Object.defineProperty(p, 'definedBy', {\n      value: t\n    });\n\n    var replaces = p.replaces,\n        redefines = p.redefines;\n\n    // add replace/redefine support\n    if (replaces || redefines) {\n      this.redefineProperty(p, replaces || redefines, replaces);\n    } else {\n      if (p.isBody) {\n        this.setBodyProperty(p);\n      }\n      if (p.isId) {\n        this.setIdProperty(p);\n      }\n      this.addProperty(p);\n    }\n  }, this));\n\n  types.push(t);\n  typesByName[typeName] = t;\n};\n\n/**\n * A registry of Moddle packages.\n *\n * @param {Array<Package>} packages\n * @param {Properties} properties\n */\nfunction Registry(packages, properties) {\n  this.packageMap = {};\n  this.typeMap = {};\n\n  this.packages = [];\n\n  this.properties = properties;\n\n  forEach(packages, bind(this.registerPackage, this));\n}\n\n\nRegistry.prototype.getPackage = function(uriOrPrefix) {\n  return this.packageMap[uriOrPrefix];\n};\n\nRegistry.prototype.getPackages = function() {\n  return this.packages;\n};\n\n\nRegistry.prototype.registerPackage = function(pkg) {\n\n  // copy package\n  pkg = assign({}, pkg);\n\n  var pkgMap = this.packageMap;\n\n  ensureAvailable(pkgMap, pkg, 'prefix');\n  ensureAvailable(pkgMap, pkg, 'uri');\n\n  // register types\n  forEach(pkg.types, bind(function(descriptor) {\n    this.registerType(descriptor, pkg);\n  }, this));\n\n  pkgMap[pkg.uri] = pkgMap[pkg.prefix] = pkg;\n  this.packages.push(pkg);\n};\n\n\n/**\n * Register a type from a specific package with us\n */\nRegistry.prototype.registerType = function(type, pkg) {\n\n  type = assign({}, type, {\n    superClass: (type.superClass || []).slice(),\n    extends: (type.extends || []).slice(),\n    properties: (type.properties || []).slice(),\n    meta: assign((type.meta || {}))\n  });\n\n  var ns = parseName(type.name, pkg.prefix),\n      name = ns.name,\n      propertiesByName = {};\n\n  // parse properties\n  forEach(type.properties, bind(function(p) {\n\n    // namespace property names\n    var propertyNs = parseName(p.name, ns.prefix),\n        propertyName = propertyNs.name;\n\n    // namespace property types\n    if (!isBuiltIn(p.type)) {\n      p.type = parseName(p.type, propertyNs.prefix).name;\n    }\n\n    assign(p, {\n      ns: propertyNs,\n      name: propertyName\n    });\n\n    propertiesByName[propertyName] = p;\n  }, this));\n\n  // update ns + name\n  assign(type, {\n    ns: ns,\n    name: name,\n    propertiesByName: propertiesByName\n  });\n\n  forEach(type.extends, bind(function(extendsName) {\n    var extendsNameNs = parseName(extendsName, ns.prefix);\n\n    var extended = this.typeMap[extendsNameNs.name];\n\n    extended.traits = extended.traits || [];\n    extended.traits.push(name);\n  }, this));\n\n  // link to package\n  this.definePackage(type, pkg);\n\n  // register\n  this.typeMap[name] = type;\n};\n\n\n/**\n * Traverse the type hierarchy from bottom to top,\n * calling iterator with (type, inherited) for all elements in\n * the inheritance chain.\n *\n * @param {Object} nsName\n * @param {Function} iterator\n * @param {Boolean} [trait=false]\n */\nRegistry.prototype.mapTypes = function(nsName, iterator, trait) {\n\n  var type = isBuiltIn(nsName.name) ? { name: nsName.name } : this.typeMap[nsName.name];\n\n  var self = this;\n\n  /**\n   * Traverse the selected super type or trait\n   *\n   * @param {String} cls\n   * @param {Boolean} [trait=false]\n   */\n  function traverse(cls, trait) {\n    var parentNs = parseName(cls, isBuiltIn(cls) ? '' : nsName.prefix);\n    self.mapTypes(parentNs, iterator, trait);\n  }\n\n  /**\n   * Traverse the selected trait.\n   *\n   * @param {String} cls\n   */\n  function traverseTrait(cls) {\n    return traverse(cls, true);\n  }\n\n  /**\n   * Traverse the selected super type\n   *\n   * @param {String} cls\n   */\n  function traverseSuper(cls) {\n    return traverse(cls, false);\n  }\n\n  if (!type) {\n    throw new Error('unknown type <' + nsName.name + '>');\n  }\n\n  forEach(type.superClass, trait ? traverseTrait : traverseSuper);\n\n  // call iterator with (type, inherited=!trait)\n  iterator(type, !trait);\n\n  forEach(type.traits, traverseTrait);\n};\n\n\n/**\n * Returns the effective descriptor for a type.\n *\n * @param  {String} type the namespaced name (ns:localName) of the type\n *\n * @return {Descriptor} the resulting effective descriptor\n */\nRegistry.prototype.getEffectiveDescriptor = function(name) {\n\n  var nsName = parseName(name);\n\n  var builder = new DescriptorBuilder(nsName);\n\n  this.mapTypes(nsName, function(type, inherited) {\n    builder.addTrait(type, inherited);\n  });\n\n  var descriptor = builder.build();\n\n  // define package link\n  this.definePackage(descriptor, descriptor.allTypes[descriptor.allTypes.length - 1].$pkg);\n\n  return descriptor;\n};\n\n\nRegistry.prototype.definePackage = function(target, pkg) {\n  this.properties.define(target, '$pkg', { value: pkg });\n};\n\n\n\n// helpers ////////////////////////////\n\nfunction ensureAvailable(packageMap, pkg, identifierKey) {\n\n  var value = pkg[identifierKey];\n\n  if (value in packageMap) {\n    throw new Error('package with ' + identifierKey + ' <' + value + '> already defined');\n  }\n}\n\n/**\n * A utility that gets and sets properties of model elements.\n *\n * @param {Model} model\n */\nfunction Properties(model) {\n  this.model = model;\n}\n\n\n/**\n * Sets a named property on the target element.\n * If the value is undefined, the property gets deleted.\n *\n * @param {Object} target\n * @param {String} name\n * @param {Object} value\n */\nProperties.prototype.set = function(target, name, value) {\n\n  if (!isString(name) || !name.length) {\n    throw new TypeError('property name must be a non-empty string');\n  }\n\n  var property = this.getProperty(target, name);\n\n  var propertyName = property && property.name;\n\n  if (isUndefined(value)) {\n\n    // unset the property, if the specified value is undefined;\n    // delete from $attrs (for extensions) or the target itself\n    if (property) {\n      delete target[propertyName];\n    } else {\n      delete target.$attrs[stripGlobal(name)];\n    }\n  } else {\n\n    // set the property, defining well defined properties on the fly\n    // or simply updating them in target.$attrs (for extensions)\n    if (property) {\n      if (propertyName in target) {\n        target[propertyName] = value;\n      } else {\n        defineProperty(target, property, value);\n      }\n    } else {\n      target.$attrs[stripGlobal(name)] = value;\n    }\n  }\n};\n\n/**\n * Returns the named property of the given element\n *\n * @param  {Object} target\n * @param  {String} name\n *\n * @return {Object}\n */\nProperties.prototype.get = function(target, name) {\n\n  var property = this.getProperty(target, name);\n\n  if (!property) {\n    return target.$attrs[stripGlobal(name)];\n  }\n\n  var propertyName = property.name;\n\n  // check if access to collection property and lazily initialize it\n  if (!target[propertyName] && property.isMany) {\n    defineProperty(target, property, []);\n  }\n\n  return target[propertyName];\n};\n\n\n/**\n * Define a property on the target element\n *\n * @param  {Object} target\n * @param  {String} name\n * @param  {Object} options\n */\nProperties.prototype.define = function(target, name, options) {\n\n  if (!options.writable) {\n\n    var value = options.value;\n\n    // use getters for read-only variables to support ES6 proxies\n    // cf. https://github.com/bpmn-io/internal-docs/issues/386\n    options = assign({}, options, {\n      get: function() { return value; }\n    });\n\n    delete options.value;\n  }\n\n  Object.defineProperty(target, name, options);\n};\n\n\n/**\n * Define the descriptor for an element\n */\nProperties.prototype.defineDescriptor = function(target, descriptor) {\n  this.define(target, '$descriptor', { value: descriptor });\n};\n\n/**\n * Define the model for an element\n */\nProperties.prototype.defineModel = function(target, model) {\n  this.define(target, '$model', { value: model });\n};\n\n/**\n * Return property with the given name on the element.\n *\n * @param {any} target\n * @param {string} name\n *\n * @return {object | null} property\n */\nProperties.prototype.getProperty = function(target, name) {\n\n  var model = this.model;\n\n  var property = model.getPropertyDescriptor(target, name);\n\n  if (property) {\n    return property;\n  }\n\n  if (name.includes(':')) {\n    return null;\n  }\n\n  const strict = model.config.strict;\n\n  if (typeof strict !== 'undefined') {\n    const error = new TypeError(`unknown property <${ name }> on <${ target.$type }>`);\n\n    if (strict) {\n      throw error;\n    } else {\n\n      // eslint-disable-next-line no-undef\n      typeof console !== 'undefined' && console.warn(error);\n    }\n  }\n\n  return null;\n};\n\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\nfunction defineProperty(target, property, value) {\n  Object.defineProperty(target, property.name, {\n    enumerable: !property.isReference,\n    writable: true,\n    value: value,\n    configurable: true\n  });\n}\n\nfunction stripGlobal(name) {\n  return name.replace(/^:/, '');\n}\n\n// Moddle implementation /////////////////////////////////////////////////\n\n/**\n * @class Moddle\n *\n * A model that can be used to create elements of a specific type.\n *\n * @example\n *\n * var Moddle = require('moddle');\n *\n * var pkg = {\n *   name: 'mypackage',\n *   prefix: 'my',\n *   types: [\n *     { name: 'Root' }\n *   ]\n * };\n *\n * var moddle = new Moddle([pkg]);\n *\n * @param {Array<Package>} packages the packages to contain\n *\n * @param { { strict?: boolean } } [config] moddle configuration\n */\nfunction Moddle(packages, config = {}) {\n\n  this.properties = new Properties(this);\n\n  this.factory = new Factory(this, this.properties);\n  this.registry = new Registry(packages, this.properties);\n\n  this.typeCache = {};\n\n  this.config = config;\n}\n\n\n/**\n * Create an instance of the specified type.\n *\n * @method Moddle#create\n *\n * @example\n *\n * var foo = moddle.create('my:Foo');\n * var bar = moddle.create('my:Bar', { id: 'BAR_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @param  {Object} attrs   a number of attributes to initialize the model instance with\n * @return {Object}         model instance\n */\nModdle.prototype.create = function(descriptor, attrs) {\n  var Type = this.getType(descriptor);\n\n  if (!Type) {\n    throw new Error('unknown type <' + descriptor + '>');\n  }\n\n  return new Type(attrs);\n};\n\n\n/**\n * Returns the type representing a given descriptor\n *\n * @method Moddle#getType\n *\n * @example\n *\n * var Foo = moddle.getType('my:Foo');\n * var foo = new Foo({ 'id' : 'FOO_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @return {Object}         the type representing the descriptor\n */\nModdle.prototype.getType = function(descriptor) {\n\n  var cache = this.typeCache;\n\n  var name = isString(descriptor) ? descriptor : descriptor.ns.name;\n\n  var type = cache[name];\n\n  if (!type) {\n    descriptor = this.registry.getEffectiveDescriptor(name);\n    type = cache[name] = this.factory.createType(descriptor);\n  }\n\n  return type;\n};\n\n\n/**\n * Creates an any-element type to be used within model instances.\n *\n * This can be used to create custom elements that lie outside the meta-model.\n * The created element contains all the meta-data required to serialize it\n * as part of meta-model elements.\n *\n * @method Moddle#createAny\n *\n * @example\n *\n * var foo = moddle.createAny('vendor:Foo', 'http://vendor', {\n *   value: 'bar'\n * });\n *\n * var container = moddle.create('my:Container', 'http://my', {\n *   any: [ foo ]\n * });\n *\n * // go ahead and serialize the stuff\n *\n *\n * @param  {String} name  the name of the element\n * @param  {String} nsUri the namespace uri of the element\n * @param  {Object} [properties] a map of properties to initialize the instance with\n * @return {Object} the any type instance\n */\nModdle.prototype.createAny = function(name, nsUri, properties) {\n\n  var nameNs = parseName(name);\n\n  var element = {\n    $type: name,\n    $instanceOf: function(type) {\n      return type === this.$type;\n    },\n    get: function(key) {\n      return this[key];\n    },\n    set: function(key, value) {\n      set(this, [ key ], value);\n    }\n  };\n\n  var descriptor = {\n    name: name,\n    isGeneric: true,\n    ns: {\n      prefix: nameNs.prefix,\n      localName: nameNs.localName,\n      uri: nsUri\n    }\n  };\n\n  this.properties.defineDescriptor(element, descriptor);\n  this.properties.defineModel(element, this);\n  this.properties.define(element, 'get', { enumerable: false, writable: true });\n  this.properties.define(element, 'set', { enumerable: false, writable: true });\n  this.properties.define(element, '$parent', { enumerable: false, writable: true });\n  this.properties.define(element, '$instanceOf', { enumerable: false, writable: true });\n\n  forEach(properties, function(a, key) {\n    if (isObject(a) && a.value !== undefined) {\n      element[a.name] = a.value;\n    } else {\n      element[key] = a;\n    }\n  });\n\n  return element;\n};\n\n/**\n * Returns a registered package by uri or prefix\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackage = function(uriOrPrefix) {\n  return this.registry.getPackage(uriOrPrefix);\n};\n\n/**\n * Returns a snapshot of all known packages\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackages = function() {\n  return this.registry.getPackages();\n};\n\n/**\n * Returns the descriptor for an element\n */\nModdle.prototype.getElementDescriptor = function(element) {\n  return element.$descriptor;\n};\n\n/**\n * Returns true if the given descriptor or instance\n * represents the given type.\n *\n * May be applied to this, if element is omitted.\n */\nModdle.prototype.hasType = function(element, type) {\n  if (type === undefined) {\n    type = element;\n    element = this;\n  }\n\n  var descriptor = element.$model.getElementDescriptor(element);\n\n  return (type in descriptor.allTypesByName);\n};\n\n/**\n * Returns the descriptor of an elements named property\n */\nModdle.prototype.getPropertyDescriptor = function(element, property) {\n  return this.getElementDescriptor(element).propertiesByName[property];\n};\n\n/**\n * Returns a mapped type's descriptor\n */\nModdle.prototype.getTypeDescriptor = function(type) {\n  return this.registry.typeMap[type];\n};\n\nexport { Moddle, coerceType, isBuiltIn as isBuiltInType, isSimple as isSimpleType, parseName as parseNameNS };\n//# sourceMappingURL=index.esm.js.map\n","var fromCharCode = String.fromCharCode;\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar ENTITY_PATTERN = /&#(\\d+);|&#x([0-9a-f]+);|&(\\w+);/ig;\n\nvar ENTITY_MAPPING = {\n  'amp': '&',\n  'apos': '\\'',\n  'gt': '>',\n  'lt': '<',\n  'quot': '\"'\n};\n\n// map UPPERCASE variants of supported special chars\nObject.keys(ENTITY_MAPPING).forEach(function(k) {\n  ENTITY_MAPPING[k.toUpperCase()] = ENTITY_MAPPING[k];\n});\n\n\nfunction replaceEntities(_, d, x, z) {\n\n  // reserved names, i.e. &nbsp;\n  if (z) {\n    if (hasOwnProperty.call(ENTITY_MAPPING, z)) {\n      return ENTITY_MAPPING[z];\n    } else {\n\n      // fall back to original value\n      return '&' + z + ';';\n    }\n  }\n\n  // decimal encoded char\n  if (d) {\n    return fromCharCode(d);\n  }\n\n  // hex encoded char\n  return fromCharCode(parseInt(x, 16));\n}\n\n\n/**\n * A basic entity decoder that can decode a minimal\n * sub-set of reserved names (&amp;) as well as\n * hex (&#xaaf;) and decimal (&#1231;) encoded characters.\n *\n * @param {string} str\n *\n * @return {string} decoded string\n */\nfunction decodeEntities(s) {\n  if (s.length > 3 && s.indexOf('&') !== -1) {\n    return s.replace(ENTITY_PATTERN, replaceEntities);\n  }\n\n  return s;\n}\n\nvar XSI_URI = 'http://www.w3.org/2001/XMLSchema-instance';\nvar XSI_PREFIX = 'xsi';\nvar XSI_TYPE = 'xsi:type';\n\nvar NON_WHITESPACE_OUTSIDE_ROOT_NODE = 'non-whitespace outside of root node';\n\nfunction error(msg) {\n  return new Error(msg);\n}\n\nfunction missingNamespaceForPrefix(prefix) {\n  return 'missing namespace for prefix <' + prefix + '>';\n}\n\nfunction getter(getFn) {\n  return {\n    'get': getFn,\n    'enumerable': true\n  };\n}\n\nfunction cloneNsMatrix(nsMatrix) {\n  var clone = {}, key;\n  for (key in nsMatrix) {\n    clone[key] = nsMatrix[key];\n  }\n  return clone;\n}\n\nfunction uriPrefix(prefix) {\n  return prefix + '$uri';\n}\n\nfunction buildNsMatrix(nsUriToPrefix) {\n  var nsMatrix = {},\n      uri,\n      prefix;\n\n  for (uri in nsUriToPrefix) {\n    prefix = nsUriToPrefix[uri];\n    nsMatrix[prefix] = prefix;\n    nsMatrix[uriPrefix(prefix)] = uri;\n  }\n\n  return nsMatrix;\n}\n\nfunction noopGetContext() {\n  return { 'line': 0, 'column': 0 };\n}\n\nfunction throwFunc(err) {\n  throw err;\n}\n\n/**\n * Creates a new parser with the given options.\n *\n * @constructor\n *\n * @param  {!Object<string, ?>=} options\n */\nfunction Parser(options) {\n\n  if (!this) {\n    return new Parser(options);\n  }\n\n  var proxy = options && options['proxy'];\n\n  var onText,\n      onOpenTag,\n      onCloseTag,\n      onCDATA,\n      onError = throwFunc,\n      onWarning,\n      onComment,\n      onQuestion,\n      onAttention;\n\n  var getContext = noopGetContext;\n\n  /**\n   * Do we need to parse the current elements attributes for namespaces?\n   *\n   * @type {boolean}\n   */\n  var maybeNS = false;\n\n  /**\n   * Do we process namespaces at all?\n   *\n   * @type {boolean}\n   */\n  var isNamespace = false;\n\n  /**\n   * The caught error returned on parse end\n   *\n   * @type {Error}\n   */\n  var returnError = null;\n\n  /**\n   * Should we stop parsing?\n   *\n   * @type {boolean}\n   */\n  var parseStop = false;\n\n  /**\n   * A map of { uri: prefix } used by the parser.\n   *\n   * This map will ensure we can normalize prefixes during processing;\n   * for each uri, only one prefix will be exposed to the handlers.\n   *\n   * @type {!Object<string, string>}}\n   */\n  var nsUriToPrefix;\n\n  /**\n   * Handle parse error.\n   *\n   * @param  {string|Error} err\n   */\n  function handleError(err) {\n    if (!(err instanceof Error)) {\n      err = error(err);\n    }\n\n    returnError = err;\n\n    onError(err, getContext);\n  }\n\n  /**\n   * Handle parse error.\n   *\n   * @param  {string|Error} err\n   */\n  function handleWarning(err) {\n\n    if (!onWarning) {\n      return;\n    }\n\n    if (!(err instanceof Error)) {\n      err = error(err);\n    }\n\n    onWarning(err, getContext);\n  }\n\n  /**\n   * Register parse listener.\n   *\n   * @param  {string}   name\n   * @param  {Function} cb\n   *\n   * @return {Parser}\n   */\n  this['on'] = function(name, cb) {\n\n    if (typeof cb !== 'function') {\n      throw error('required args <name, cb>');\n    }\n\n    switch (name) {\n    case 'openTag': onOpenTag = cb; break;\n    case 'text': onText = cb; break;\n    case 'closeTag': onCloseTag = cb; break;\n    case 'error': onError = cb; break;\n    case 'warn': onWarning = cb; break;\n    case 'cdata': onCDATA = cb; break;\n    case 'attention': onAttention = cb; break; // <!XXXXX zzzz=\"eeee\">\n    case 'question': onQuestion = cb; break; // <? ....  ?>\n    case 'comment': onComment = cb; break;\n    default:\n      throw error('unsupported event: ' + name);\n    }\n\n    return this;\n  };\n\n  /**\n   * Set the namespace to prefix mapping.\n   *\n   * @example\n   *\n   * parser.ns({\n   *   'http://foo': 'foo',\n   *   'http://bar': 'bar'\n   * });\n   *\n   * @param  {!Object<string, string>} nsMap\n   *\n   * @return {Parser}\n   */\n  this['ns'] = function(nsMap) {\n\n    if (typeof nsMap === 'undefined') {\n      nsMap = {};\n    }\n\n    if (typeof nsMap !== 'object') {\n      throw error('required args <nsMap={}>');\n    }\n\n    var _nsUriToPrefix = {}, k;\n\n    for (k in nsMap) {\n      _nsUriToPrefix[k] = nsMap[k];\n    }\n\n    // FORCE default mapping for schema instance\n    _nsUriToPrefix[XSI_URI] = XSI_PREFIX;\n\n    isNamespace = true;\n    nsUriToPrefix = _nsUriToPrefix;\n\n    return this;\n  };\n\n  /**\n   * Parse xml string.\n   *\n   * @param  {string} xml\n   *\n   * @return {Error} returnError, if not thrown\n   */\n  this['parse'] = function(xml) {\n    if (typeof xml !== 'string') {\n      throw error('required args <xml=string>');\n    }\n\n    returnError = null;\n\n    parse(xml);\n\n    getContext = noopGetContext;\n    parseStop = false;\n\n    return returnError;\n  };\n\n  /**\n   * Stop parsing.\n   */\n  this['stop'] = function() {\n    parseStop = true;\n  };\n\n  /**\n   * Parse string, invoking configured listeners on element.\n   *\n   * @param  {string} xml\n   */\n  function parse(xml) {\n    var nsMatrixStack = isNamespace ? [] : null,\n        nsMatrix = isNamespace ? buildNsMatrix(nsUriToPrefix) : null,\n        _nsMatrix,\n        nodeStack = [],\n        anonymousNsCount = 0,\n        tagStart = false,\n        tagEnd = false,\n        i = 0, j = 0,\n        x, y, q, w, v,\n        xmlns,\n        elementName,\n        _elementName,\n        elementProxy\n        ;\n\n    var attrsString = '',\n        attrsStart = 0,\n        cachedAttrs // false = parsed with errors, null = needs parsing\n        ;\n\n    /**\n     * Parse attributes on demand and returns the parsed attributes.\n     *\n     * Return semantics: (1) `false` on attribute parse error,\n     * (2) object hash on extracted attrs.\n     *\n     * @return {boolean|Object}\n     */\n    function getAttrs() {\n      if (cachedAttrs !== null) {\n        return cachedAttrs;\n      }\n\n      var nsUri,\n          nsUriPrefix,\n          nsName,\n          defaultAlias = isNamespace && nsMatrix['xmlns'],\n          attrList = isNamespace && maybeNS ? [] : null,\n          i = attrsStart,\n          s = attrsString,\n          l = s.length,\n          hasNewMatrix,\n          newalias,\n          value,\n          alias,\n          name,\n          attrs = {},\n          seenAttrs = {},\n          skipAttr,\n          w,\n          j;\n\n      parseAttr:\n      for (; i < l; i++) {\n        skipAttr = false;\n        w = s.charCodeAt(i);\n\n        if (w === 32 || (w < 14 && w > 8)) { // WHITESPACE={ \\f\\n\\r\\t\\v}\n          continue;\n        }\n\n        // wait for non whitespace character\n        if (w < 65 || w > 122 || (w > 90 && w < 97)) {\n          if (w !== 95 && w !== 58) { // char 95\"_\" 58\":\"\n            handleWarning('illegal first char attribute name');\n            skipAttr = true;\n          }\n        }\n\n        // parse attribute name\n        for (j = i + 1; j < l; j++) {\n          w = s.charCodeAt(j);\n\n          if (\n            w > 96 && w < 123 ||\n            w > 64 && w < 91 ||\n            w > 47 && w < 59 ||\n            w === 46 || // '.'\n            w === 45 || // '-'\n            w === 95 // '_'\n          ) {\n            continue;\n          }\n\n          // unexpected whitespace\n          if (w === 32 || (w < 14 && w > 8)) { // WHITESPACE\n            handleWarning('missing attribute value');\n            i = j;\n\n            continue parseAttr;\n          }\n\n          // expected \"=\"\n          if (w === 61) { // \"=\" == 61\n            break;\n          }\n\n          handleWarning('illegal attribute name char');\n          skipAttr = true;\n        }\n\n        name = s.substring(i, j);\n\n        if (name === 'xmlns:xmlns') {\n          handleWarning('illegal declaration of xmlns');\n          skipAttr = true;\n        }\n\n        w = s.charCodeAt(j + 1);\n\n        if (w === 34) { // '\"'\n          j = s.indexOf('\"', i = j + 2);\n\n          if (j === -1) {\n            j = s.indexOf('\\'', i);\n\n            if (j !== -1) {\n              handleWarning('attribute value quote missmatch');\n              skipAttr = true;\n            }\n          }\n\n        } else if (w === 39) { // \"'\"\n          j = s.indexOf('\\'', i = j + 2);\n\n          if (j === -1) {\n            j = s.indexOf('\"', i);\n\n            if (j !== -1) {\n              handleWarning('attribute value quote missmatch');\n              skipAttr = true;\n            }\n          }\n\n        } else {\n          handleWarning('missing attribute value quotes');\n          skipAttr = true;\n\n          // skip to next space\n          for (j = j + 1; j < l; j++) {\n            w = s.charCodeAt(j + 1);\n\n            if (w === 32 || (w < 14 && w > 8)) { // WHITESPACE\n              break;\n            }\n          }\n\n        }\n\n        if (j === -1) {\n          handleWarning('missing closing quotes');\n\n          j = l;\n          skipAttr = true;\n        }\n\n        if (!skipAttr) {\n          value = s.substring(i, j);\n        }\n\n        i = j;\n\n        // ensure SPACE follows attribute\n        // skip illegal content otherwise\n        // example a=\"b\"c\n        for (; j + 1 < l; j++) {\n          w = s.charCodeAt(j + 1);\n\n          if (w === 32 || (w < 14 && w > 8)) { // WHITESPACE\n            break;\n          }\n\n          // FIRST ILLEGAL CHAR\n          if (i === j) {\n            handleWarning('illegal character after attribute end');\n            skipAttr = true;\n          }\n        }\n\n        // advance cursor to next attribute\n        i = j + 1;\n\n        if (skipAttr) {\n          continue parseAttr;\n        }\n\n        // check attribute re-declaration\n        if (name in seenAttrs) {\n          handleWarning('attribute <' + name + '> already defined');\n          continue;\n        }\n\n        seenAttrs[name] = true;\n\n        if (!isNamespace) {\n          attrs[name] = value;\n          continue;\n        }\n\n        // try to extract namespace information\n        if (maybeNS) {\n          newalias = (\n            name === 'xmlns'\n              ? 'xmlns'\n              : (name.charCodeAt(0) === 120 && name.substr(0, 6) === 'xmlns:')\n                ? name.substr(6)\n                : null\n          );\n\n          // handle xmlns(:alias) assignment\n          if (newalias !== null) {\n            nsUri = decodeEntities(value);\n            nsUriPrefix = uriPrefix(newalias);\n\n            alias = nsUriToPrefix[nsUri];\n\n            if (!alias) {\n\n              // no prefix defined or prefix collision\n              if (\n                (newalias === 'xmlns') ||\n                (nsUriPrefix in nsMatrix && nsMatrix[nsUriPrefix] !== nsUri)\n              ) {\n\n                // alocate free ns prefix\n                do {\n                  alias = 'ns' + (anonymousNsCount++);\n                } while (typeof nsMatrix[alias] !== 'undefined');\n              } else {\n                alias = newalias;\n              }\n\n              nsUriToPrefix[nsUri] = alias;\n            }\n\n            if (nsMatrix[newalias] !== alias) {\n              if (!hasNewMatrix) {\n                nsMatrix = cloneNsMatrix(nsMatrix);\n                hasNewMatrix = true;\n              }\n\n              nsMatrix[newalias] = alias;\n              if (newalias === 'xmlns') {\n                nsMatrix[uriPrefix(alias)] = nsUri;\n                defaultAlias = alias;\n              }\n\n              nsMatrix[nsUriPrefix] = nsUri;\n            }\n\n            // expose xmlns(:asd)=\"...\" in attributes\n            attrs[name] = value;\n            continue;\n          }\n\n          // collect attributes until all namespace\n          // declarations are processed\n          attrList.push(name, value);\n          continue;\n\n        } /** end if (maybeNs) */\n\n        // handle attributes on element without\n        // namespace declarations\n        w = name.indexOf(':');\n        if (w === -1) {\n          attrs[name] = value;\n          continue;\n        }\n\n        // normalize ns attribute name\n        if (!(nsName = nsMatrix[name.substring(0, w)])) {\n          handleWarning(missingNamespaceForPrefix(name.substring(0, w)));\n          continue;\n        }\n\n        name = defaultAlias === nsName\n          ? name.substr(w + 1)\n          : nsName + name.substr(w);\n\n        // end: normalize ns attribute name\n\n        // normalize xsi:type ns attribute value\n        if (name === XSI_TYPE) {\n          w = value.indexOf(':');\n\n          if (w !== -1) {\n            nsName = value.substring(0, w);\n\n            // handle default prefixes, i.e. xs:String gracefully\n            nsName = nsMatrix[nsName] || nsName;\n            value = nsName + value.substring(w);\n          } else {\n            value = defaultAlias + ':' + value;\n          }\n        }\n\n        // end: normalize xsi:type ns attribute value\n\n        attrs[name] = value;\n      }\n\n\n      // handle deferred, possibly namespaced attributes\n      if (maybeNS) {\n\n        // normalize captured attributes\n        for (i = 0, l = attrList.length; i < l; i++) {\n\n          name = attrList[i++];\n          value = attrList[i];\n\n          w = name.indexOf(':');\n\n          if (w !== -1) {\n\n            // normalize ns attribute name\n            if (!(nsName = nsMatrix[name.substring(0, w)])) {\n              handleWarning(missingNamespaceForPrefix(name.substring(0, w)));\n              continue;\n            }\n\n            name = defaultAlias === nsName\n              ? name.substr(w + 1)\n              : nsName + name.substr(w);\n\n            // end: normalize ns attribute name\n\n            // normalize xsi:type ns attribute value\n            if (name === XSI_TYPE) {\n              w = value.indexOf(':');\n\n              if (w !== -1) {\n                nsName = value.substring(0, w);\n\n                // handle default prefixes, i.e. xs:String gracefully\n                nsName = nsMatrix[nsName] || nsName;\n                value = nsName + value.substring(w);\n              } else {\n                value = defaultAlias + ':' + value;\n              }\n            }\n\n            // end: normalize xsi:type ns attribute value\n          }\n\n          attrs[name] = value;\n        }\n\n        // end: normalize captured attributes\n      }\n\n      return cachedAttrs = attrs;\n    }\n\n    /**\n     * Extract the parse context { line, column, part }\n     * from the current parser position.\n     *\n     * @return {Object} parse context\n     */\n    function getParseContext() {\n      var splitsRe = /(\\r\\n|\\r|\\n)/g;\n\n      var line = 0;\n      var column = 0;\n      var startOfLine = 0;\n      var endOfLine = j;\n      var match;\n      var data;\n\n      while (i >= startOfLine) {\n\n        match = splitsRe.exec(xml);\n\n        if (!match) {\n          break;\n        }\n\n        // end of line = (break idx + break chars)\n        endOfLine = match[0].length + match.index;\n\n        if (endOfLine > i) {\n          break;\n        }\n\n        // advance to next line\n        line += 1;\n\n        startOfLine = endOfLine;\n      }\n\n      // EOF errors\n      if (i == -1) {\n        column = endOfLine;\n        data = xml.substring(j);\n      } else\n\n      // start errors\n      if (j === 0) {\n        data = xml.substring(j, i);\n      }\n\n      // other errors\n      else {\n        column = i - startOfLine;\n        data = (j == -1 ? xml.substring(i) : xml.substring(i, j + 1));\n      }\n\n      return {\n        'data': data,\n        'line': line,\n        'column': column\n      };\n    }\n\n    getContext = getParseContext;\n\n\n    if (proxy) {\n      elementProxy = Object.create({}, {\n        'name': getter(function() {\n          return elementName;\n        }),\n        'originalName': getter(function() {\n          return _elementName;\n        }),\n        'attrs': getter(getAttrs),\n        'ns': getter(function() {\n          return nsMatrix;\n        })\n      });\n    }\n\n    // actual parse logic\n    while (j !== -1) {\n\n      if (xml.charCodeAt(j) === 60) { // \"<\"\n        i = j;\n      } else {\n        i = xml.indexOf('<', j);\n      }\n\n      // parse end\n      if (i === -1) {\n        if (nodeStack.length) {\n          return handleError('unexpected end of file');\n        }\n\n        if (j === 0) {\n          return handleError('missing start tag');\n        }\n\n        if (j < xml.length) {\n          if (xml.substring(j).trim()) {\n            handleWarning(NON_WHITESPACE_OUTSIDE_ROOT_NODE);\n          }\n        }\n\n        return;\n      }\n\n      // parse text\n      if (j !== i) {\n\n        if (nodeStack.length) {\n          if (onText) {\n            onText(xml.substring(j, i), decodeEntities, getContext);\n\n            if (parseStop) {\n              return;\n            }\n          }\n        } else {\n          if (xml.substring(j, i).trim()) {\n            handleWarning(NON_WHITESPACE_OUTSIDE_ROOT_NODE);\n\n            if (parseStop) {\n              return;\n            }\n          }\n        }\n      }\n\n      w = xml.charCodeAt(i+1);\n\n      // parse comments + CDATA\n      if (w === 33) { // \"!\"\n        q = xml.charCodeAt(i+2);\n\n        // CDATA section\n        if (q === 91 && xml.substr(i + 3, 6) === 'CDATA[') { // 91 == \"[\"\n          j = xml.indexOf(']]>', i);\n          if (j === -1) {\n            return handleError('unclosed cdata');\n          }\n\n          if (onCDATA) {\n            onCDATA(xml.substring(i + 9, j), getContext);\n            if (parseStop) {\n              return;\n            }\n          }\n\n          j += 3;\n          continue;\n        }\n\n        // comment\n        if (q === 45 && xml.charCodeAt(i + 3) === 45) { // 45 == \"-\"\n          j = xml.indexOf('-->', i);\n          if (j === -1) {\n            return handleError('unclosed comment');\n          }\n\n\n          if (onComment) {\n            onComment(xml.substring(i + 4, j), decodeEntities, getContext);\n            if (parseStop) {\n              return;\n            }\n          }\n\n          j += 3;\n          continue;\n        }\n      }\n\n      // parse question <? ... ?>\n      if (w === 63) { // \"?\"\n        j = xml.indexOf('?>', i);\n        if (j === -1) {\n          return handleError('unclosed question');\n        }\n\n        if (onQuestion) {\n          onQuestion(xml.substring(i, j + 2), getContext);\n          if (parseStop) {\n            return;\n          }\n        }\n\n        j += 2;\n        continue;\n      }\n\n      // find matching closing tag for attention or standard tags\n      // for that we must skip through attribute values\n      // (enclosed in single or double quotes)\n      for (x = i + 1; ; x++) {\n        v = xml.charCodeAt(x);\n        if (isNaN(v)) {\n          j = -1;\n          return handleError('unclosed tag');\n        }\n\n        // [10] AttValue ::= '\"' ([^<&\"] | Reference)* '\"' | \"'\" ([^<&'] | Reference)* \"'\"\n        // skips the quoted string\n        // (double quotes) does not appear in a literal enclosed by (double quotes)\n        // (single quote) does not appear in a literal enclosed by (single quote)\n        if (v === 34) { //  '\"'\n          q = xml.indexOf('\"', x + 1);\n          x = q !== -1 ? q : x;\n        } else if (v === 39) { // \"'\"\n          q = xml.indexOf(\"'\", x + 1);\n          x = q !== -1 ? q : x;\n        } else if (v === 62) { // '>'\n          j = x;\n          break;\n        }\n      }\n\n\n      // parse attention <! ...>\n      // previously comment and CDATA have already been parsed\n      if (w === 33) { // \"!\"\n\n        if (onAttention) {\n          onAttention(xml.substring(i, j + 1), decodeEntities, getContext);\n          if (parseStop) {\n            return;\n          }\n        }\n\n        j += 1;\n        continue;\n      }\n\n      // don't process attributes;\n      // there are none\n      cachedAttrs = {};\n\n      // if (xml.charCodeAt(i+1) === 47) { // </...\n      if (w === 47) { // </...\n        tagStart = false;\n        tagEnd = true;\n\n        if (!nodeStack.length) {\n          return handleError('missing open tag');\n        }\n\n        // verify open <-> close tag match\n        x = elementName = nodeStack.pop();\n        q = i + 2 + x.length;\n\n        if (xml.substring(i + 2, q) !== x) {\n          return handleError('closing tag mismatch');\n        }\n\n        // verify chars in close tag\n        for (; q < j; q++) {\n          w = xml.charCodeAt(q);\n\n          if (w === 32 || (w > 8 && w < 14)) { // \\f\\n\\r\\t\\v space\n            continue;\n          }\n\n          return handleError('close tag');\n        }\n\n      } else {\n        if (xml.charCodeAt(j - 1) === 47) { // .../>\n          x = elementName = xml.substring(i + 1, j - 1);\n\n          tagStart = true;\n          tagEnd = true;\n\n        } else {\n          x = elementName = xml.substring(i + 1, j);\n\n          tagStart = true;\n          tagEnd = false;\n        }\n\n        if (!(w > 96 && w < 123 || w > 64 && w < 91 || w === 95 || w === 58)) { // char 95\"_\" 58\":\"\n          return handleError('illegal first char nodeName');\n        }\n\n        for (q = 1, y = x.length; q < y; q++) {\n          w = x.charCodeAt(q);\n\n          if (w > 96 && w < 123 || w > 64 && w < 91 || w > 47 && w < 59 || w === 45 || w === 95 || w == 46) {\n            continue;\n          }\n\n          if (w === 32 || (w < 14 && w > 8)) { // \\f\\n\\r\\t\\v space\n            elementName = x.substring(0, q);\n\n            // maybe there are attributes\n            cachedAttrs = null;\n            break;\n          }\n\n          return handleError('invalid nodeName');\n        }\n\n        if (!tagEnd) {\n          nodeStack.push(elementName);\n        }\n      }\n\n      if (isNamespace) {\n\n        _nsMatrix = nsMatrix;\n\n        if (tagStart) {\n\n          // remember old namespace\n          // unless we're self-closing\n          if (!tagEnd) {\n            nsMatrixStack.push(_nsMatrix);\n          }\n\n          if (cachedAttrs === null) {\n\n            // quick check, whether there may be namespace\n            // declarations on the node; if that is the case\n            // we need to eagerly parse the node attributes\n            if ((maybeNS = x.indexOf('xmlns', q) !== -1)) {\n              attrsStart = q;\n              attrsString = x;\n\n              getAttrs();\n\n              maybeNS = false;\n            }\n          }\n        }\n\n        _elementName = elementName;\n\n        w = elementName.indexOf(':');\n        if (w !== -1) {\n          xmlns = nsMatrix[elementName.substring(0, w)];\n\n          // prefix given; namespace must exist\n          if (!xmlns) {\n            return handleError('missing namespace on <' + _elementName + '>');\n          }\n\n          elementName = elementName.substr(w + 1);\n        } else {\n          xmlns = nsMatrix['xmlns'];\n\n          // if no default namespace is defined,\n          // we'll import the element as anonymous.\n          //\n          // it is up to users to correct that to the document defined\n          // targetNamespace, or whatever their undersanding of the\n          // XML spec mandates.\n        }\n\n        // adjust namespace prefixs as configured\n        if (xmlns) {\n          elementName = xmlns + ':' + elementName;\n        }\n\n      }\n\n      if (tagStart) {\n        attrsStart = q;\n        attrsString = x;\n\n        if (onOpenTag) {\n          if (proxy) {\n            onOpenTag(elementProxy, decodeEntities, tagEnd, getContext);\n          } else {\n            onOpenTag(elementName, getAttrs, decodeEntities, tagEnd, getContext);\n          }\n\n          if (parseStop) {\n            return;\n          }\n        }\n\n      }\n\n      if (tagEnd) {\n\n        if (onCloseTag) {\n          onCloseTag(proxy ? elementProxy : elementName, decodeEntities, tagStart, getContext);\n\n          if (parseStop) {\n            return;\n          }\n        }\n\n        // restore old namespace\n        if (isNamespace) {\n          if (!tagStart) {\n            nsMatrix = nsMatrixStack.pop();\n          } else {\n            nsMatrix = _nsMatrix;\n          }\n        }\n      }\n\n      j += 1;\n    }\n  } /** end parse */\n\n}\n\nexport { Parser, decodeEntities as decode };\n","import { forEach, assign, find, isString, findIndex, filter, has } from 'min-dash';\nimport { Parser } from 'saxen';\nimport { coerceType, parseNameNS, isSimpleType, Moddle } from 'moddle';\n\nfunction hasLowerCaseAlias(pkg) {\n  return pkg.xml && pkg.xml.tagAlias === 'lowerCase';\n}\n\nvar DEFAULT_NS_MAP = {\n  'xsi': 'http://www.w3.org/2001/XMLSchema-instance',\n  'xml': 'http://www.w3.org/XML/1998/namespace'\n};\n\nvar XSI_TYPE = 'xsi:type';\n\nfunction serializeFormat(element) {\n  return element.xml && element.xml.serialize;\n}\n\nfunction serializeAsType(element) {\n  return serializeFormat(element) === XSI_TYPE;\n}\n\nfunction serializeAsProperty(element) {\n  return serializeFormat(element) === 'property';\n}\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nfunction aliasToName(aliasNs, pkg) {\n\n  if (!hasLowerCaseAlias(pkg)) {\n    return aliasNs.name;\n  }\n\n  return aliasNs.prefix + ':' + capitalize(aliasNs.localName);\n}\n\nfunction prefixedToName(nameNs, pkg) {\n\n  var name = nameNs.name,\n      localName = nameNs.localName;\n\n  var typePrefix = pkg.xml && pkg.xml.typePrefix;\n\n  if (typePrefix && localName.indexOf(typePrefix) === 0) {\n    return nameNs.prefix + ':' + localName.slice(typePrefix.length);\n  } else {\n    return name;\n  }\n}\n\nfunction normalizeXsiTypeName(name, model) {\n\n  var nameNs = parseNameNS(name);\n  var pkg = model.getPackage(nameNs.prefix);\n\n  return prefixedToName(nameNs, pkg);\n}\n\nfunction error(message) {\n  return new Error(message);\n}\n\n/**\n * Get the moddle descriptor for a given instance or type.\n *\n * @param  {ModdleElement|Function} element\n *\n * @return {Object} the moddle descriptor\n */\nfunction getModdleDescriptor(element) {\n  return element.$descriptor;\n}\n\n\n/**\n * A parse context.\n *\n * @class\n *\n * @param {Object} options\n * @param {ElementHandler} options.rootHandler the root handler for parsing a document\n * @param {boolean} [options.lax=false] whether or not to ignore invalid elements\n */\nfunction Context(options) {\n\n  /**\n   * @property {ElementHandler} rootHandler\n   */\n\n  /**\n   * @property {Boolean} lax\n   */\n\n  assign(this, options);\n\n  this.elementsById = {};\n  this.references = [];\n  this.warnings = [];\n\n  /**\n   * Add an unresolved reference.\n   *\n   * @param {Object} reference\n   */\n  this.addReference = function(reference) {\n    this.references.push(reference);\n  };\n\n  /**\n   * Add a processed element.\n   *\n   * @param {ModdleElement} element\n   */\n  this.addElement = function(element) {\n\n    if (!element) {\n      throw error('expected element');\n    }\n\n    var elementsById = this.elementsById;\n\n    var descriptor = getModdleDescriptor(element);\n\n    var idProperty = descriptor.idProperty,\n        id;\n\n    if (idProperty) {\n      id = element.get(idProperty.name);\n\n      if (id) {\n\n        // for QName validation as per http://www.w3.org/TR/REC-xml/#NT-NameChar\n        if (!/^([a-z][\\w-.]*:)?[a-z_][\\w-.]*$/i.test(id)) {\n          throw new Error('illegal ID <' + id + '>');\n        }\n\n        if (elementsById[id]) {\n          throw error('duplicate ID <' + id + '>');\n        }\n\n        elementsById[id] = element;\n      }\n    }\n  };\n\n  /**\n   * Add an import warning.\n   *\n   * @param {Object} warning\n   * @param {String} warning.message\n   * @param {Error} [warning.error]\n   */\n  this.addWarning = function(warning) {\n    this.warnings.push(warning);\n  };\n}\n\nfunction BaseHandler() {}\n\nBaseHandler.prototype.handleEnd = function() {};\nBaseHandler.prototype.handleText = function() {};\nBaseHandler.prototype.handleNode = function() {};\n\n\n/**\n * A simple pass through handler that does nothing except for\n * ignoring all input it receives.\n *\n * This is used to ignore unknown elements and\n * attributes.\n */\nfunction NoopHandler() { }\n\nNoopHandler.prototype = Object.create(BaseHandler.prototype);\n\nNoopHandler.prototype.handleNode = function() {\n  return this;\n};\n\nfunction BodyHandler() {}\n\nBodyHandler.prototype = Object.create(BaseHandler.prototype);\n\nBodyHandler.prototype.handleText = function(text) {\n  this.body = (this.body || '') + text;\n};\n\nfunction ReferenceHandler(property, context) {\n  this.property = property;\n  this.context = context;\n}\n\nReferenceHandler.prototype = Object.create(BodyHandler.prototype);\n\nReferenceHandler.prototype.handleNode = function(node) {\n\n  if (this.element) {\n    throw error('expected no sub nodes');\n  } else {\n    this.element = this.createReference(node);\n  }\n\n  return this;\n};\n\nReferenceHandler.prototype.handleEnd = function() {\n  this.element.id = this.body;\n};\n\nReferenceHandler.prototype.createReference = function(node) {\n  return {\n    property: this.property.ns.name,\n    id: ''\n  };\n};\n\nfunction ValueHandler(propertyDesc, element) {\n  this.element = element;\n  this.propertyDesc = propertyDesc;\n}\n\nValueHandler.prototype = Object.create(BodyHandler.prototype);\n\nValueHandler.prototype.handleEnd = function() {\n\n  var value = this.body || '',\n      element = this.element,\n      propertyDesc = this.propertyDesc;\n\n  value = coerceType(propertyDesc.type, value);\n\n  if (propertyDesc.isMany) {\n    element.get(propertyDesc.name).push(value);\n  } else {\n    element.set(propertyDesc.name, value);\n  }\n};\n\n\nfunction BaseElementHandler() {}\n\nBaseElementHandler.prototype = Object.create(BodyHandler.prototype);\n\nBaseElementHandler.prototype.handleNode = function(node) {\n  var parser = this,\n      element = this.element;\n\n  if (!element) {\n    element = this.element = this.createElement(node);\n\n    this.context.addElement(element);\n  } else {\n    parser = this.handleChild(node);\n  }\n\n  return parser;\n};\n\n/**\n * @class Reader.ElementHandler\n *\n */\nfunction ElementHandler(model, typeName, context) {\n  this.model = model;\n  this.type = model.getType(typeName);\n  this.context = context;\n}\n\nElementHandler.prototype = Object.create(BaseElementHandler.prototype);\n\nElementHandler.prototype.addReference = function(reference) {\n  this.context.addReference(reference);\n};\n\nElementHandler.prototype.handleText = function(text) {\n\n  var element = this.element,\n      descriptor = getModdleDescriptor(element),\n      bodyProperty = descriptor.bodyProperty;\n\n  if (!bodyProperty) {\n    throw error('unexpected body text <' + text + '>');\n  }\n\n  BodyHandler.prototype.handleText.call(this, text);\n};\n\nElementHandler.prototype.handleEnd = function() {\n\n  var value = this.body,\n      element = this.element,\n      descriptor = getModdleDescriptor(element),\n      bodyProperty = descriptor.bodyProperty;\n\n  if (bodyProperty && value !== undefined) {\n    value = coerceType(bodyProperty.type, value);\n    element.set(bodyProperty.name, value);\n  }\n};\n\n/**\n * Create an instance of the model from the given node.\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.createElement = function(node) {\n  var attributes = node.attributes,\n      Type = this.type,\n      descriptor = getModdleDescriptor(Type),\n      context = this.context,\n      instance = new Type({}),\n      model = this.model,\n      propNameNs;\n\n  forEach(attributes, function(value, name) {\n\n    var prop = descriptor.propertiesByName[name],\n        values;\n\n    if (prop && prop.isReference) {\n\n      if (!prop.isMany) {\n        context.addReference({\n          element: instance,\n          property: prop.ns.name,\n          id: value\n        });\n      } else {\n\n        // IDREFS: parse references as whitespace-separated list\n        values = value.split(' ');\n\n        forEach(values, function(v) {\n          context.addReference({\n            element: instance,\n            property: prop.ns.name,\n            id: v\n          });\n        });\n      }\n\n    } else {\n      if (prop) {\n        value = coerceType(prop.type, value);\n      } else\n      if (name !== 'xmlns') {\n        propNameNs = parseNameNS(name, descriptor.ns.prefix);\n\n        // check whether attribute is defined in a well-known namespace\n        // if that is the case we emit a warning to indicate potential misuse\n        if (model.getPackage(propNameNs.prefix)) {\n\n          context.addWarning({\n            message: 'unknown attribute <' + name + '>',\n            element: instance,\n            property: name,\n            value: value\n          });\n        }\n      }\n\n      instance.set(name, value);\n    }\n  });\n\n  return instance;\n};\n\nElementHandler.prototype.getPropertyForNode = function(node) {\n\n  var name = node.name;\n  var nameNs = parseNameNS(name);\n\n  var type = this.type,\n      model = this.model,\n      descriptor = getModdleDescriptor(type);\n\n  var propertyName = nameNs.name,\n      property = descriptor.propertiesByName[propertyName],\n      elementTypeName,\n      elementType;\n\n  // search for properties by name first\n\n  if (property && !property.isAttr) {\n\n    if (serializeAsType(property)) {\n      elementTypeName = node.attributes[XSI_TYPE];\n\n      // xsi type is optional, if it does not exists the\n      // default type is assumed\n      if (elementTypeName) {\n\n        // take possible type prefixes from XML\n        // into account, i.e.: xsi:type=\"t{ActualType}\"\n        elementTypeName = normalizeXsiTypeName(elementTypeName, model);\n\n        elementType = model.getType(elementTypeName);\n\n        return assign({}, property, {\n          effectiveType: getModdleDescriptor(elementType).name\n        });\n      }\n    }\n\n    // search for properties by name first\n    return property;\n  }\n\n  var pkg = model.getPackage(nameNs.prefix);\n\n  if (pkg) {\n    elementTypeName = aliasToName(nameNs, pkg);\n    elementType = model.getType(elementTypeName);\n\n    // search for collection members later\n    property = find(descriptor.properties, function(p) {\n      return !p.isVirtual && !p.isReference && !p.isAttribute && elementType.hasType(p.type);\n    });\n\n    if (property) {\n      return assign({}, property, {\n        effectiveType: getModdleDescriptor(elementType).name\n      });\n    }\n  } else {\n\n    // parse unknown element (maybe extension)\n    property = find(descriptor.properties, function(p) {\n      return !p.isReference && !p.isAttribute && p.type === 'Element';\n    });\n\n    if (property) {\n      return property;\n    }\n  }\n\n  throw error('unrecognized element <' + nameNs.name + '>');\n};\n\nElementHandler.prototype.toString = function() {\n  return 'ElementDescriptor[' + getModdleDescriptor(this.type).name + ']';\n};\n\nElementHandler.prototype.valueHandler = function(propertyDesc, element) {\n  return new ValueHandler(propertyDesc, element);\n};\n\nElementHandler.prototype.referenceHandler = function(propertyDesc) {\n  return new ReferenceHandler(propertyDesc, this.context);\n};\n\nElementHandler.prototype.handler = function(type) {\n  if (type === 'Element') {\n    return new GenericElementHandler(this.model, type, this.context);\n  } else {\n    return new ElementHandler(this.model, type, this.context);\n  }\n};\n\n/**\n * Handle the child element parsing\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.handleChild = function(node) {\n  var propertyDesc, type, element, childHandler;\n\n  propertyDesc = this.getPropertyForNode(node);\n  element = this.element;\n\n  type = propertyDesc.effectiveType || propertyDesc.type;\n\n  if (isSimpleType(type)) {\n    return this.valueHandler(propertyDesc, element);\n  }\n\n  if (propertyDesc.isReference) {\n    childHandler = this.referenceHandler(propertyDesc).handleNode(node);\n  } else {\n    childHandler = this.handler(type).handleNode(node);\n  }\n\n  var newElement = childHandler.element;\n\n  // child handles may decide to skip elements\n  // by not returning anything\n  if (newElement !== undefined) {\n\n    if (propertyDesc.isMany) {\n      element.get(propertyDesc.name).push(newElement);\n    } else {\n      element.set(propertyDesc.name, newElement);\n    }\n\n    if (propertyDesc.isReference) {\n      assign(newElement, {\n        element: element\n      });\n\n      this.context.addReference(newElement);\n    } else {\n\n      // establish child -> parent relationship\n      newElement.$parent = element;\n    }\n  }\n\n  return childHandler;\n};\n\n/**\n * An element handler that performs special validation\n * to ensure the node it gets initialized with matches\n * the handlers type (namespace wise).\n *\n * @param {Moddle} model\n * @param {String} typeName\n * @param {Context} context\n */\nfunction RootElementHandler(model, typeName, context) {\n  ElementHandler.call(this, model, typeName, context);\n}\n\nRootElementHandler.prototype = Object.create(ElementHandler.prototype);\n\nRootElementHandler.prototype.createElement = function(node) {\n\n  var name = node.name,\n      nameNs = parseNameNS(name),\n      model = this.model,\n      type = this.type,\n      pkg = model.getPackage(nameNs.prefix),\n      typeName = pkg && aliasToName(nameNs, pkg) || name;\n\n  // verify the correct namespace if we parse\n  // the first element in the handler tree\n  //\n  // this ensures we don't mistakenly import wrong namespace elements\n  if (!type.hasType(typeName)) {\n    throw error('unexpected element <' + node.originalName + '>');\n  }\n\n  return ElementHandler.prototype.createElement.call(this, node);\n};\n\n\nfunction GenericElementHandler(model, typeName, context) {\n  this.model = model;\n  this.context = context;\n}\n\nGenericElementHandler.prototype = Object.create(BaseElementHandler.prototype);\n\nGenericElementHandler.prototype.createElement = function(node) {\n\n  var name = node.name,\n      ns = parseNameNS(name),\n      prefix = ns.prefix,\n      uri = node.ns[prefix + '$uri'],\n      attributes = node.attributes;\n\n  return this.model.createAny(name, uri, attributes);\n};\n\nGenericElementHandler.prototype.handleChild = function(node) {\n\n  var handler = new GenericElementHandler(this.model, 'Element', this.context).handleNode(node),\n      element = this.element;\n\n  var newElement = handler.element,\n      children;\n\n  if (newElement !== undefined) {\n    children = element.$children = element.$children || [];\n    children.push(newElement);\n\n    // establish child -> parent relationship\n    newElement.$parent = element;\n  }\n\n  return handler;\n};\n\nGenericElementHandler.prototype.handleEnd = function() {\n  if (this.body) {\n    this.element.$body = this.body;\n  }\n};\n\n/**\n * A reader for a meta-model\n *\n * @param {Object} options\n * @param {Model} options.model used to read xml files\n * @param {Boolean} options.lax whether to make parse errors warnings\n */\nfunction Reader(options) {\n\n  if (options instanceof Moddle) {\n    options = {\n      model: options\n    };\n  }\n\n  assign(this, { lax: false }, options);\n}\n\n/**\n * The fromXML result.\n *\n * @typedef {Object} ParseResult\n *\n * @property {ModdleElement} rootElement\n * @property {Array<Object>} references\n * @property {Array<Error>} warnings\n * @property {Object} elementsById - a mapping containing each ID -> ModdleElement\n */\n\n/**\n * The fromXML result.\n *\n * @typedef {Error} ParseError\n *\n * @property {Array<Error>} warnings\n */\n\n/**\n * Parse the given XML into a moddle document tree.\n *\n * @param {String} xml\n * @param {ElementHandler|Object} options or rootHandler\n *\n * @returns {Promise<ParseResult, ParseError>}\n */\nReader.prototype.fromXML = function(xml, options, done) {\n\n  var rootHandler = options.rootHandler;\n\n  if (options instanceof ElementHandler) {\n\n    // root handler passed via (xml, { rootHandler: ElementHandler }, ...)\n    rootHandler = options;\n    options = {};\n  } else {\n    if (typeof options === 'string') {\n\n      // rootHandler passed via (xml, 'someString', ...)\n      rootHandler = this.handler(options);\n      options = {};\n    } else if (typeof rootHandler === 'string') {\n\n      // rootHandler passed via (xml, { rootHandler: 'someString' }, ...)\n      rootHandler = this.handler(rootHandler);\n    }\n  }\n\n  var model = this.model,\n      lax = this.lax;\n\n  var context = new Context(assign({}, options, { rootHandler: rootHandler })),\n      parser = new Parser({ proxy: true }),\n      stack = createStack();\n\n  rootHandler.context = context;\n\n  // push root handler\n  stack.push(rootHandler);\n\n\n  /**\n   * Handle error.\n   *\n   * @param  {Error} err\n   * @param  {Function} getContext\n   * @param  {boolean} lax\n   *\n   * @return {boolean} true if handled\n   */\n  function handleError(err, getContext, lax) {\n\n    var ctx = getContext();\n\n    var line = ctx.line,\n        column = ctx.column,\n        data = ctx.data;\n\n    // we receive the full context data here,\n    // for elements trim down the information\n    // to the tag name, only\n    if (data.charAt(0) === '<' && data.indexOf(' ') !== -1) {\n      data = data.slice(0, data.indexOf(' ')) + '>';\n    }\n\n    var message =\n      'unparsable content ' + (data ? data + ' ' : '') + 'detected\\n\\t' +\n        'line: ' + line + '\\n\\t' +\n        'column: ' + column + '\\n\\t' +\n        'nested error: ' + err.message;\n\n    if (lax) {\n      context.addWarning({\n        message: message,\n        error: err\n      });\n\n      return true;\n    } else {\n      throw error(message);\n    }\n  }\n\n  function handleWarning(err, getContext) {\n\n    // just like handling errors in <lax=true> mode\n    return handleError(err, getContext, true);\n  }\n\n  /**\n   * Resolve collected references on parse end.\n   */\n  function resolveReferences() {\n\n    var elementsById = context.elementsById;\n    var references = context.references;\n\n    var i, r;\n\n    for (i = 0; (r = references[i]); i++) {\n      var element = r.element;\n      var reference = elementsById[r.id];\n      var property = getModdleDescriptor(element).propertiesByName[r.property];\n\n      if (!reference) {\n        context.addWarning({\n          message: 'unresolved reference <' + r.id + '>',\n          element: r.element,\n          property: r.property,\n          value: r.id\n        });\n      }\n\n      if (property.isMany) {\n        var collection = element.get(property.name),\n            idx = collection.indexOf(r);\n\n        // we replace an existing place holder (idx != -1) or\n        // append to the collection instead\n        if (idx === -1) {\n          idx = collection.length;\n        }\n\n        if (!reference) {\n\n          // remove unresolvable reference\n          collection.splice(idx, 1);\n        } else {\n\n          // add or update reference in collection\n          collection[idx] = reference;\n        }\n      } else {\n        element.set(property.name, reference);\n      }\n    }\n  }\n\n  function handleClose() {\n    stack.pop().handleEnd();\n  }\n\n  var PREAMBLE_START_PATTERN = /^<\\?xml /i;\n\n  var ENCODING_PATTERN = / encoding=\"([^\"]+)\"/i;\n\n  var UTF_8_PATTERN = /^utf-8$/i;\n\n  function handleQuestion(question) {\n\n    if (!PREAMBLE_START_PATTERN.test(question)) {\n      return;\n    }\n\n    var match = ENCODING_PATTERN.exec(question);\n    var encoding = match && match[1];\n\n    if (!encoding || UTF_8_PATTERN.test(encoding)) {\n      return;\n    }\n\n    context.addWarning({\n      message:\n        'unsupported document encoding <' + encoding + '>, ' +\n        'falling back to UTF-8'\n    });\n  }\n\n  function handleOpen(node, getContext) {\n    var handler = stack.peek();\n\n    try {\n      stack.push(handler.handleNode(node));\n    } catch (err) {\n\n      if (handleError(err, getContext, lax)) {\n        stack.push(new NoopHandler());\n      }\n    }\n  }\n\n  function handleCData(text, getContext) {\n\n    try {\n      stack.peek().handleText(text);\n    } catch (err) {\n      handleWarning(err, getContext);\n    }\n  }\n\n  function handleText(text, getContext) {\n\n    // strip whitespace only nodes, i.e. before\n    // <!CDATA[ ... ]> sections and in between tags\n\n    if (!text.trim()) {\n      return;\n    }\n\n    handleCData(text, getContext);\n  }\n\n  var uriMap = model.getPackages().reduce(function(uriMap, p) {\n    uriMap[p.uri] = p.prefix;\n\n    return uriMap;\n  }, {\n    'http://www.w3.org/XML/1998/namespace': 'xml' // add default xml ns\n  });\n  parser\n    .ns(uriMap)\n    .on('openTag', function(obj, decodeStr, selfClosing, getContext) {\n\n      // gracefully handle unparsable attributes (attrs=false)\n      var attrs = obj.attrs || {};\n\n      var decodedAttrs = Object.keys(attrs).reduce(function(d, key) {\n        var value = decodeStr(attrs[key]);\n\n        d[key] = value;\n\n        return d;\n      }, {});\n\n      var node = {\n        name: obj.name,\n        originalName: obj.originalName,\n        attributes: decodedAttrs,\n        ns: obj.ns\n      };\n\n      handleOpen(node, getContext);\n    })\n    .on('question', handleQuestion)\n    .on('closeTag', handleClose)\n    .on('cdata', handleCData)\n    .on('text', function(text, decodeEntities, getContext) {\n      handleText(decodeEntities(text), getContext);\n    })\n    .on('error', handleError)\n    .on('warn', handleWarning);\n\n  // async XML parsing to make sure the execution environment\n  // (node or brower) is kept responsive and that certain optimization\n  // strategies can kick in.\n  return new Promise(function(resolve, reject) {\n\n    var err;\n\n    try {\n      parser.parse(xml);\n\n      resolveReferences();\n    } catch (e) {\n      err = e;\n    }\n\n    var rootElement = rootHandler.element;\n\n    if (!err && !rootElement) {\n      err = error('failed to parse document as <' + rootHandler.type.$descriptor.name + '>');\n    }\n\n    var warnings = context.warnings;\n    var references = context.references;\n    var elementsById = context.elementsById;\n\n    if (err) {\n      err.warnings = warnings;\n\n      return reject(err);\n    } else {\n      return resolve({\n        rootElement: rootElement,\n        elementsById: elementsById,\n        references: references,\n        warnings: warnings\n      });\n    }\n  });\n};\n\nReader.prototype.handler = function(name) {\n  return new RootElementHandler(this.model, name);\n};\n\n\n// helpers //////////////////////////\n\nfunction createStack() {\n  var stack = [];\n\n  Object.defineProperty(stack, 'peek', {\n    value: function() {\n      return this[this.length - 1];\n    }\n  });\n\n  return stack;\n}\n\nvar XML_PREAMBLE = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n';\n\nvar ESCAPE_ATTR_CHARS = /<|>|'|\"|&|\\n\\r|\\n/g;\nvar ESCAPE_CHARS = /<|>|&/g;\n\n\nfunction Namespaces(parent) {\n\n  var prefixMap = {};\n  var uriMap = {};\n  var used = {};\n\n  var wellknown = [];\n  var custom = [];\n\n  // API\n\n  this.byUri = function(uri) {\n    return uriMap[uri] || (\n      parent && parent.byUri(uri)\n    );\n  };\n\n  this.add = function(ns, isWellknown) {\n\n    uriMap[ns.uri] = ns;\n\n    if (isWellknown) {\n      wellknown.push(ns);\n    } else {\n      custom.push(ns);\n    }\n\n    this.mapPrefix(ns.prefix, ns.uri);\n  };\n\n  this.uriByPrefix = function(prefix) {\n    return prefixMap[prefix || 'xmlns'];\n  };\n\n  this.mapPrefix = function(prefix, uri) {\n    prefixMap[prefix || 'xmlns'] = uri;\n  };\n\n  this.getNSKey = function(ns) {\n    return (ns.prefix !== undefined) ? (ns.uri + '|' + ns.prefix) : ns.uri;\n  };\n\n  this.logUsed = function(ns) {\n\n    var uri = ns.uri;\n    var nsKey = this.getNSKey(ns);\n\n    used[nsKey] = this.byUri(uri);\n\n    // Inform parent recursively about the usage of this NS\n    if (parent) {\n      parent.logUsed(ns);\n    }\n  };\n\n  this.getUsed = function(ns) {\n\n    function isUsed(ns) {\n      var nsKey = self.getNSKey(ns);\n\n      return used[nsKey];\n    }\n\n    var self = this;\n\n    var allNs = [].concat(wellknown, custom);\n\n    return allNs.filter(isUsed);\n  };\n\n}\n\nfunction lower(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\nfunction nameToAlias(name, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return lower(name);\n  } else {\n    return name;\n  }\n}\n\nfunction inherits(ctor, superCtor) {\n  ctor.super_ = superCtor;\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nfunction nsName(ns) {\n  if (isString(ns)) {\n    return ns;\n  } else {\n    return (ns.prefix ? ns.prefix + ':' : '') + ns.localName;\n  }\n}\n\nfunction getNsAttrs(namespaces) {\n\n  return namespaces.getUsed().filter(function(ns) {\n\n    // do not serialize built in <xml> namespace\n    return ns.prefix !== 'xml';\n  }).map(function(ns) {\n    var name = 'xmlns' + (ns.prefix ? ':' + ns.prefix : '');\n    return { name: name, value: ns.uri };\n  });\n\n}\n\nfunction getElementNs(ns, descriptor) {\n  if (descriptor.isGeneric) {\n    return assign({ localName: descriptor.ns.localName }, ns);\n  } else {\n    return assign({ localName: nameToAlias(descriptor.ns.localName, descriptor.$pkg) }, ns);\n  }\n}\n\nfunction getPropertyNs(ns, descriptor) {\n  return assign({ localName: descriptor.ns.localName }, ns);\n}\n\nfunction getSerializableProperties(element) {\n  var descriptor = element.$descriptor;\n\n  return filter(descriptor.properties, function(p) {\n    var name = p.name;\n\n    if (p.isVirtual) {\n      return false;\n    }\n\n    // do not serialize defaults\n    if (!has(element, name)) {\n      return false;\n    }\n\n    var value = element[name];\n\n    // do not serialize default equals\n    if (value === p.default) {\n      return false;\n    }\n\n    // do not serialize null properties\n    if (value === null) {\n      return false;\n    }\n\n    return p.isMany ? value.length : true;\n  });\n}\n\nvar ESCAPE_ATTR_MAP = {\n  '\\n': '#10',\n  '\\n\\r': '#10',\n  '\"': '#34',\n  '\\'': '#39',\n  '<': '#60',\n  '>': '#62',\n  '&': '#38'\n};\n\nvar ESCAPE_MAP = {\n  '<': 'lt',\n  '>': 'gt',\n  '&': 'amp'\n};\n\nfunction escape(str, charPattern, replaceMap) {\n\n  // ensure we are handling strings here\n  str = isString(str) ? str : '' + str;\n\n  return str.replace(charPattern, function(s) {\n    return '&' + replaceMap[s] + ';';\n  });\n}\n\n/**\n * Escape a string attribute to not contain any bad values (line breaks, '\"', ...)\n *\n * @param {String} str the string to escape\n * @return {String} the escaped string\n */\nfunction escapeAttr(str) {\n  return escape(str, ESCAPE_ATTR_CHARS, ESCAPE_ATTR_MAP);\n}\n\nfunction escapeBody(str) {\n  return escape(str, ESCAPE_CHARS, ESCAPE_MAP);\n}\n\nfunction filterAttributes(props) {\n  return filter(props, function(p) { return p.isAttr; });\n}\n\nfunction filterContained(props) {\n  return filter(props, function(p) { return !p.isAttr; });\n}\n\n\nfunction ReferenceSerializer(tagName) {\n  this.tagName = tagName;\n}\n\nReferenceSerializer.prototype.build = function(element) {\n  this.element = element;\n  return this;\n};\n\nReferenceSerializer.prototype.serializeTo = function(writer) {\n  writer\n    .appendIndent()\n    .append('<' + this.tagName + '>' + this.element.id + '</' + this.tagName + '>')\n    .appendNewLine();\n};\n\nfunction BodySerializer() {}\n\nBodySerializer.prototype.serializeValue =\nBodySerializer.prototype.serializeTo = function(writer) {\n  writer.append(\n    this.escape\n      ? escapeBody(this.value)\n      : this.value\n  );\n};\n\nBodySerializer.prototype.build = function(prop, value) {\n  this.value = value;\n\n  if (prop.type === 'String' && value.search(ESCAPE_CHARS) !== -1) {\n    this.escape = true;\n  }\n\n  return this;\n};\n\nfunction ValueSerializer(tagName) {\n  this.tagName = tagName;\n}\n\ninherits(ValueSerializer, BodySerializer);\n\nValueSerializer.prototype.serializeTo = function(writer) {\n\n  writer\n    .appendIndent()\n    .append('<' + this.tagName + '>');\n\n  this.serializeValue(writer);\n\n  writer\n    .append('</' + this.tagName + '>')\n    .appendNewLine();\n};\n\nfunction ElementSerializer(parent, propertyDescriptor) {\n  this.body = [];\n  this.attrs = [];\n\n  this.parent = parent;\n  this.propertyDescriptor = propertyDescriptor;\n}\n\nElementSerializer.prototype.build = function(element) {\n  this.element = element;\n\n  var elementDescriptor = element.$descriptor,\n      propertyDescriptor = this.propertyDescriptor;\n\n  var otherAttrs,\n      properties;\n\n  var isGeneric = elementDescriptor.isGeneric;\n\n  if (isGeneric) {\n    otherAttrs = this.parseGeneric(element);\n  } else {\n    otherAttrs = this.parseNsAttributes(element);\n  }\n\n  if (propertyDescriptor) {\n    this.ns = this.nsPropertyTagName(propertyDescriptor);\n  } else {\n    this.ns = this.nsTagName(elementDescriptor);\n  }\n\n  // compute tag name\n  this.tagName = this.addTagName(this.ns);\n\n  if (!isGeneric) {\n    properties = getSerializableProperties(element);\n\n    this.parseAttributes(filterAttributes(properties));\n    this.parseContainments(filterContained(properties));\n  }\n\n  this.parseGenericAttributes(element, otherAttrs);\n\n  return this;\n};\n\nElementSerializer.prototype.nsTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getElementNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.nsPropertyTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getPropertyNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === this.ns.uri;\n};\n\n/**\n * Get the actual ns attribute name for the given element.\n *\n * @param {Object} element\n * @param {Boolean} [element.inherited=false]\n *\n * @return {Object} nsName\n */\nElementSerializer.prototype.nsAttributeName = function(element) {\n\n  var ns;\n\n  if (isString(element)) {\n    ns = parseNameNS(element);\n  } else {\n    ns = element.ns;\n  }\n\n  // return just local name for inherited attributes\n  if (element.inherited) {\n    return { localName: ns.localName };\n  }\n\n  // parse + log effective ns\n  var effectiveNs = this.logNamespaceUsed(ns);\n\n  // LOG ACTUAL namespace use\n  this.getNamespaces().logUsed(effectiveNs);\n\n  // strip prefix if same namespace like parent\n  if (this.isLocalNs(effectiveNs)) {\n    return { localName: ns.localName };\n  } else {\n    return assign({ localName: ns.localName }, effectiveNs);\n  }\n};\n\nElementSerializer.prototype.parseGeneric = function(element) {\n\n  var self = this,\n      body = this.body;\n\n  var attributes = [];\n\n  forEach(element, function(val, key) {\n\n    var nonNsAttr;\n\n    if (key === '$body') {\n      body.push(new BodySerializer().build({ type: 'String' }, val));\n    } else\n    if (key === '$children') {\n      forEach(val, function(child) {\n        body.push(new ElementSerializer(self).build(child));\n      });\n    } else\n    if (key.indexOf('$') !== 0) {\n      nonNsAttr = self.parseNsAttribute(element, key, val);\n\n      if (nonNsAttr) {\n        attributes.push({ name: key, value: val });\n      }\n    }\n  });\n\n  return attributes;\n};\n\nElementSerializer.prototype.parseNsAttribute = function(element, name, value) {\n  var model = element.$model;\n\n  var nameNs = parseNameNS(name);\n\n  var ns;\n\n  // parse xmlns:foo=\"http://foo.bar\"\n  if (nameNs.prefix === 'xmlns') {\n    ns = { prefix: nameNs.localName, uri: value };\n  }\n\n  // parse xmlns=\"http://foo.bar\"\n  if (!nameNs.prefix && nameNs.localName === 'xmlns') {\n    ns = { uri: value };\n  }\n\n  if (!ns) {\n    return {\n      name: name,\n      value: value\n    };\n  }\n\n  if (model && model.getPackage(value)) {\n\n    // register well known namespace\n    this.logNamespace(ns, true, true);\n  } else {\n\n    // log custom namespace directly as used\n    var actualNs = this.logNamespaceUsed(ns, true);\n\n    this.getNamespaces().logUsed(actualNs);\n  }\n};\n\n\n/**\n * Parse namespaces and return a list of left over generic attributes\n *\n * @param  {Object} element\n * @return {Array<Object>}\n */\nElementSerializer.prototype.parseNsAttributes = function(element, attrs) {\n  var self = this;\n\n  var genericAttrs = element.$attrs;\n\n  var attributes = [];\n\n  // parse namespace attributes first\n  // and log them. push non namespace attributes to a list\n  // and process them later\n  forEach(genericAttrs, function(value, name) {\n\n    var nonNsAttr = self.parseNsAttribute(element, name, value);\n\n    if (nonNsAttr) {\n      attributes.push(nonNsAttr);\n    }\n  });\n\n  return attributes;\n};\n\nElementSerializer.prototype.parseGenericAttributes = function(element, attributes) {\n\n  var self = this;\n\n  forEach(attributes, function(attr) {\n\n    // do not serialize xsi:type attribute\n    // it is set manually based on the actual implementation type\n    if (attr.name === XSI_TYPE) {\n      return;\n    }\n\n    try {\n      self.addAttribute(self.nsAttributeName(attr.name), attr.value);\n    } catch (e) {\n      /* global console */\n\n      console.warn(\n        'missing namespace information for ',\n        attr.name, '=', attr.value, 'on', element,\n        e);\n    }\n  });\n};\n\nElementSerializer.prototype.parseContainments = function(properties) {\n\n  var self = this,\n      body = this.body,\n      element = this.element;\n\n  forEach(properties, function(p) {\n    var value = element.get(p.name),\n        isReference = p.isReference,\n        isMany = p.isMany;\n\n    if (!isMany) {\n      value = [ value ];\n    }\n\n    if (p.isBody) {\n      body.push(new BodySerializer().build(p, value[0]));\n    } else\n    if (isSimpleType(p.type)) {\n      forEach(value, function(v) {\n        body.push(new ValueSerializer(self.addTagName(self.nsPropertyTagName(p))).build(p, v));\n      });\n    } else\n    if (isReference) {\n      forEach(value, function(v) {\n        body.push(new ReferenceSerializer(self.addTagName(self.nsPropertyTagName(p))).build(v));\n      });\n    } else {\n\n      // allow serialization via type\n      // rather than element name\n      var asType = serializeAsType(p),\n          asProperty = serializeAsProperty(p);\n\n      forEach(value, function(v) {\n        var serializer;\n\n        if (asType) {\n          serializer = new TypeSerializer(self, p);\n        } else\n        if (asProperty) {\n          serializer = new ElementSerializer(self, p);\n        } else {\n          serializer = new ElementSerializer(self);\n        }\n\n        body.push(serializer.build(v));\n      });\n    }\n  });\n};\n\nElementSerializer.prototype.getNamespaces = function(local) {\n\n  var namespaces = this.namespaces,\n      parent = this.parent,\n      parentNamespaces;\n\n  if (!namespaces) {\n    parentNamespaces = parent && parent.getNamespaces();\n\n    if (local || !parentNamespaces) {\n      this.namespaces = namespaces = new Namespaces(parentNamespaces);\n    } else {\n      namespaces = parentNamespaces;\n    }\n  }\n\n  return namespaces;\n};\n\nElementSerializer.prototype.logNamespace = function(ns, wellknown, local) {\n  var namespaces = this.getNamespaces(local);\n\n  var nsUri = ns.uri,\n      nsPrefix = ns.prefix;\n\n  var existing = namespaces.byUri(nsUri);\n\n  if (!existing || local) {\n    namespaces.add(ns, wellknown);\n  }\n\n  namespaces.mapPrefix(nsPrefix, nsUri);\n\n  return ns;\n};\n\nElementSerializer.prototype.logNamespaceUsed = function(ns, local) {\n  var element = this.element,\n      model = element.$model,\n      namespaces = this.getNamespaces(local);\n\n  // ns may be\n  //\n  //   * prefix only\n  //   * prefix:uri\n  //   * localName only\n\n  var prefix = ns.prefix,\n      uri = ns.uri,\n      newPrefix, idx,\n      wellknownUri;\n\n  // handle anonymous namespaces (elementForm=unqualified), cf. #23\n  if (!prefix && !uri) {\n    return { localName: ns.localName };\n  }\n\n  wellknownUri = DEFAULT_NS_MAP[prefix] || model && (model.getPackage(prefix) || {}).uri;\n\n  uri = uri || wellknownUri || namespaces.uriByPrefix(prefix);\n\n  if (!uri) {\n    throw new Error('no namespace uri given for prefix <' + prefix + '>');\n  }\n\n  ns = namespaces.byUri(uri);\n\n  if (!ns) {\n    newPrefix = prefix;\n    idx = 1;\n\n    // find a prefix that is not mapped yet\n    while (namespaces.uriByPrefix(newPrefix)) {\n      newPrefix = prefix + '_' + idx++;\n    }\n\n    ns = this.logNamespace({ prefix: newPrefix, uri: uri }, wellknownUri === uri);\n  }\n\n  if (prefix) {\n    namespaces.mapPrefix(prefix, uri);\n  }\n\n  return ns;\n};\n\nElementSerializer.prototype.parseAttributes = function(properties) {\n  var self = this,\n      element = this.element;\n\n  forEach(properties, function(p) {\n\n    var value = element.get(p.name);\n\n    if (p.isReference) {\n\n      if (!p.isMany) {\n        value = value.id;\n      }\n      else {\n        var values = [];\n        forEach(value, function(v) {\n          values.push(v.id);\n        });\n\n        // IDREFS is a whitespace-separated list of references.\n        value = values.join(' ');\n      }\n\n    }\n\n    self.addAttribute(self.nsAttributeName(p), value);\n  });\n};\n\nElementSerializer.prototype.addTagName = function(nsTagName) {\n  var actualNs = this.logNamespaceUsed(nsTagName);\n\n  this.getNamespaces().logUsed(actualNs);\n\n  return nsName(nsTagName);\n};\n\nElementSerializer.prototype.addAttribute = function(name, value) {\n  var attrs = this.attrs;\n\n  if (isString(value)) {\n    value = escapeAttr(value);\n  }\n\n  // de-duplicate attributes\n  // https://github.com/bpmn-io/moddle-xml/issues/66\n  var idx = findIndex(attrs, function(element) {\n    return (\n      element.name.localName === name.localName &&\n      element.name.uri === name.uri &&\n      element.name.prefix === name.prefix\n    );\n  });\n\n  var attr = { name: name, value: value };\n\n  if (idx !== -1) {\n    attrs.splice(idx, 1, attr);\n  } else {\n    attrs.push(attr);\n  }\n};\n\nElementSerializer.prototype.serializeAttributes = function(writer) {\n  var attrs = this.attrs,\n      namespaces = this.namespaces;\n\n  if (namespaces) {\n    attrs = getNsAttrs(namespaces).concat(attrs);\n  }\n\n  forEach(attrs, function(a) {\n    writer\n      .append(' ')\n      .append(nsName(a.name)).append('=\"').append(a.value).append('\"');\n  });\n};\n\nElementSerializer.prototype.serializeTo = function(writer) {\n  var firstBody = this.body[0],\n      indent = firstBody && firstBody.constructor !== BodySerializer;\n\n  writer\n    .appendIndent()\n    .append('<' + this.tagName);\n\n  this.serializeAttributes(writer);\n\n  writer.append(firstBody ? '>' : ' />');\n\n  if (firstBody) {\n\n    if (indent) {\n      writer\n        .appendNewLine()\n        .indent();\n    }\n\n    forEach(this.body, function(b) {\n      b.serializeTo(writer);\n    });\n\n    if (indent) {\n      writer\n        .unindent()\n        .appendIndent();\n    }\n\n    writer.append('</' + this.tagName + '>');\n  }\n\n  writer.appendNewLine();\n};\n\n/**\n * A serializer for types that handles serialization of data types\n */\nfunction TypeSerializer(parent, propertyDescriptor) {\n  ElementSerializer.call(this, parent, propertyDescriptor);\n}\n\ninherits(TypeSerializer, ElementSerializer);\n\nTypeSerializer.prototype.parseNsAttributes = function(element) {\n\n  // extracted attributes\n  var attributes = ElementSerializer.prototype.parseNsAttributes.call(this, element);\n\n  var descriptor = element.$descriptor;\n\n  // only serialize xsi:type if necessary\n  if (descriptor.name === this.propertyDescriptor.type) {\n    return attributes;\n  }\n\n  var typeNs = this.typeNs = this.nsTagName(descriptor);\n  this.getNamespaces().logUsed(this.typeNs);\n\n  // add xsi:type attribute to represent the elements\n  // actual type\n\n  var pkg = element.$model.getPackage(typeNs.uri),\n      typePrefix = (pkg.xml && pkg.xml.typePrefix) || '';\n\n  this.addAttribute(\n    this.nsAttributeName(XSI_TYPE),\n    (typeNs.prefix ? typeNs.prefix + ':' : '') + typePrefix + descriptor.ns.localName\n  );\n\n  return attributes;\n};\n\nTypeSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === (this.typeNs || this.ns).uri;\n};\n\nfunction SavingWriter() {\n  this.value = '';\n\n  this.write = function(str) {\n    this.value += str;\n  };\n}\n\nfunction FormatingWriter(out, format) {\n\n  var indent = [ '' ];\n\n  this.append = function(str) {\n    out.write(str);\n\n    return this;\n  };\n\n  this.appendNewLine = function() {\n    if (format) {\n      out.write('\\n');\n    }\n\n    return this;\n  };\n\n  this.appendIndent = function() {\n    if (format) {\n      out.write(indent.join('  '));\n    }\n\n    return this;\n  };\n\n  this.indent = function() {\n    indent.push('');\n    return this;\n  };\n\n  this.unindent = function() {\n    indent.pop();\n    return this;\n  };\n}\n\n/**\n * A writer for meta-model backed document trees\n *\n * @param {Object} options output options to pass into the writer\n */\nfunction Writer(options) {\n\n  options = assign({ format: false, preamble: true }, options || {});\n\n  function toXML(tree, writer) {\n    var internalWriter = writer || new SavingWriter();\n    var formatingWriter = new FormatingWriter(internalWriter, options.format);\n\n    if (options.preamble) {\n      formatingWriter.append(XML_PREAMBLE);\n    }\n\n    new ElementSerializer().build(tree).serializeTo(formatingWriter);\n\n    if (!writer) {\n      return internalWriter.value;\n    }\n  }\n\n  return {\n    toXML: toXML\n  };\n}\n\nexport { Reader, Writer };\n//# sourceMappingURL=index.esm.js.map\n","import { isString, assign } from 'min-dash';\nimport { Moddle } from 'moddle';\nimport { Reader, Writer } from 'moddle-xml';\n\n/**\n * A sub class of {@link Moddle} with support for import and export of BPMN 2.0 xml files.\n *\n * @class BpmnModdle\n * @extends Moddle\n *\n * @param {Object|Array} packages to use for instantiating the model\n * @param {Object} [options] additional options to pass over\n */\nfunction BpmnModdle(packages, options) {\n  Moddle.call(this, packages, options);\n}\n\nBpmnModdle.prototype = Object.create(Moddle.prototype);\n\n/**\n * The fromXML result.\n *\n * @typedef {Object} ParseResult\n *\n * @property {ModdleElement} rootElement\n * @property {Array<Object>} references\n * @property {Array<Error>} warnings\n * @property {Object} elementsById - a mapping containing each ID -> ModdleElement\n */\n\n/**\n * The fromXML error.\n *\n * @typedef {Error} ParseError\n *\n * @property {Array<Error>} warnings\n */\n\n/**\n * Instantiates a BPMN model tree from a given xml string.\n *\n * @param {String}   xmlStr\n * @param {String}   [typeName='bpmn:Definitions'] name of the root element\n * @param {Object}   [options]  options to pass to the underlying reader\n *\n * @returns {Promise<ParseResult, ParseError>}\n */\nBpmnModdle.prototype.fromXML = function(xmlStr, typeName, options) {\n\n  if (!isString(typeName)) {\n    options = typeName;\n    typeName = 'bpmn:Definitions';\n  }\n\n  var reader = new Reader(assign({ model: this, lax: true }, options));\n  var rootHandler = reader.handler(typeName);\n\n  return reader.fromXML(xmlStr, rootHandler);\n};\n\n\n/**\n * The toXML result.\n *\n * @typedef {Object} SerializationResult\n *\n * @property {String} xml\n */\n\n/**\n * Serializes a BPMN 2.0 object tree to XML.\n *\n * @param {String}   element    the root element, typically an instance of `bpmn:Definitions`\n * @param {Object}   [options]  to pass to the underlying writer\n *\n * @returns {Promise<SerializationResult, Error>}\n */\nBpmnModdle.prototype.toXML = function(element, options) {\n\n  var writer = new Writer(options);\n\n  return new Promise(function(resolve, reject) {\n    try {\n      var result = writer.toXML(element);\n\n      return resolve({\n        xml: result\n      });\n    } catch (err) {\n      return reject(err);\n    }\n  });\n};\n\nvar name$5 = \"BPMN20\";\nvar uri$5 = \"http://www.omg.org/spec/BPMN/20100524/MODEL\";\nvar prefix$5 = \"bpmn\";\nvar associations$5 = [\n];\nvar types$5 = [\n\t{\n\t\tname: \"Interface\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"operations\",\n\t\t\t\ttype: \"Operation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"implementationRef\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Operation\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inMessageRef\",\n\t\t\t\ttype: \"Message\",\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outMessageRef\",\n\t\t\t\ttype: \"Message\",\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"errorRef\",\n\t\t\t\ttype: \"Error\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"implementationRef\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"EndPoint\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"Auditing\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"GlobalTask\",\n\t\tsuperClass: [\n\t\t\t\"CallableElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"resources\",\n\t\t\t\ttype: \"ResourceRole\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Monitoring\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"Performer\",\n\t\tsuperClass: [\n\t\t\t\"ResourceRole\"\n\t\t]\n\t},\n\t{\n\t\tname: \"Process\",\n\t\tsuperClass: [\n\t\t\t\"FlowElementsContainer\",\n\t\t\t\"CallableElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"processType\",\n\t\t\t\ttype: \"ProcessType\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isClosed\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"auditing\",\n\t\t\t\ttype: \"Auditing\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"monitoring\",\n\t\t\t\ttype: \"Monitoring\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"properties\",\n\t\t\t\ttype: \"Property\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"laneSets\",\n\t\t\t\tisMany: true,\n\t\t\t\treplaces: \"FlowElementsContainer#laneSets\",\n\t\t\t\ttype: \"LaneSet\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"flowElements\",\n\t\t\t\tisMany: true,\n\t\t\t\treplaces: \"FlowElementsContainer#flowElements\",\n\t\t\t\ttype: \"FlowElement\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"artifacts\",\n\t\t\t\ttype: \"Artifact\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"resources\",\n\t\t\t\ttype: \"ResourceRole\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"correlationSubscriptions\",\n\t\t\t\ttype: \"CorrelationSubscription\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"supports\",\n\t\t\t\ttype: \"Process\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"definitionalCollaborationRef\",\n\t\t\t\ttype: \"Collaboration\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isExecutable\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"LaneSet\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"lanes\",\n\t\t\t\ttype: \"Lane\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Lane\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"partitionElementRef\",\n\t\t\t\ttype: \"BaseElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"partitionElement\",\n\t\t\t\ttype: \"BaseElement\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"flowNodeRef\",\n\t\t\t\ttype: \"FlowNode\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"childLaneSet\",\n\t\t\t\ttype: \"LaneSet\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"GlobalManualTask\",\n\t\tsuperClass: [\n\t\t\t\"GlobalTask\"\n\t\t]\n\t},\n\t{\n\t\tname: \"ManualTask\",\n\t\tsuperClass: [\n\t\t\t\"Task\"\n\t\t]\n\t},\n\t{\n\t\tname: \"UserTask\",\n\t\tsuperClass: [\n\t\t\t\"Task\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"renderings\",\n\t\t\t\ttype: \"Rendering\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"implementation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Rendering\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"HumanPerformer\",\n\t\tsuperClass: [\n\t\t\t\"Performer\"\n\t\t]\n\t},\n\t{\n\t\tname: \"PotentialOwner\",\n\t\tsuperClass: [\n\t\t\t\"HumanPerformer\"\n\t\t]\n\t},\n\t{\n\t\tname: \"GlobalUserTask\",\n\t\tsuperClass: [\n\t\t\t\"GlobalTask\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"implementation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"renderings\",\n\t\t\t\ttype: \"Rendering\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Gateway\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"FlowNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"gatewayDirection\",\n\t\t\t\ttype: \"GatewayDirection\",\n\t\t\t\t\"default\": \"Unspecified\",\n\t\t\t\tisAttr: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"EventBasedGateway\",\n\t\tsuperClass: [\n\t\t\t\"Gateway\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"instantiate\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"eventGatewayType\",\n\t\t\t\ttype: \"EventBasedGatewayType\",\n\t\t\t\tisAttr: true,\n\t\t\t\t\"default\": \"Exclusive\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ComplexGateway\",\n\t\tsuperClass: [\n\t\t\t\"Gateway\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"activationCondition\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"default\",\n\t\t\t\ttype: \"SequenceFlow\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ExclusiveGateway\",\n\t\tsuperClass: [\n\t\t\t\"Gateway\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"default\",\n\t\t\t\ttype: \"SequenceFlow\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"InclusiveGateway\",\n\t\tsuperClass: [\n\t\t\t\"Gateway\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"default\",\n\t\t\t\ttype: \"SequenceFlow\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ParallelGateway\",\n\t\tsuperClass: [\n\t\t\t\"Gateway\"\n\t\t]\n\t},\n\t{\n\t\tname: \"RootElement\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"Relationship\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"type\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"direction\",\n\t\t\t\ttype: \"RelationshipDirection\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"source\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"Element\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"target\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"Element\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"BaseElement\",\n\t\tisAbstract: true,\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"id\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\",\n\t\t\t\tisId: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"documentation\",\n\t\t\t\ttype: \"Documentation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"extensionDefinitions\",\n\t\t\t\ttype: \"ExtensionDefinition\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"extensionElements\",\n\t\t\t\ttype: \"ExtensionElements\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Extension\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"mustUnderstand\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"definition\",\n\t\t\t\ttype: \"ExtensionDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ExtensionDefinition\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"extensionAttributeDefinitions\",\n\t\t\t\ttype: \"ExtensionAttributeDefinition\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ExtensionAttributeDefinition\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"type\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isReference\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"extensionDefinition\",\n\t\t\t\ttype: \"ExtensionDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ExtensionElements\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"valueRef\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"Element\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"values\",\n\t\t\t\ttype: \"Element\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"extensionAttributeDefinition\",\n\t\t\t\ttype: \"ExtensionAttributeDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Documentation\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"text\",\n\t\t\t\ttype: \"String\",\n\t\t\t\tisBody: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"textFormat\",\n\t\t\t\t\"default\": \"text/plain\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Event\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"FlowNode\",\n\t\t\t\"InteractionNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"properties\",\n\t\t\t\ttype: \"Property\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"IntermediateCatchEvent\",\n\t\tsuperClass: [\n\t\t\t\"CatchEvent\"\n\t\t]\n\t},\n\t{\n\t\tname: \"IntermediateThrowEvent\",\n\t\tsuperClass: [\n\t\t\t\"ThrowEvent\"\n\t\t]\n\t},\n\t{\n\t\tname: \"EndEvent\",\n\t\tsuperClass: [\n\t\t\t\"ThrowEvent\"\n\t\t]\n\t},\n\t{\n\t\tname: \"StartEvent\",\n\t\tsuperClass: [\n\t\t\t\"CatchEvent\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"isInterrupting\",\n\t\t\t\t\"default\": true,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ThrowEvent\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"Event\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"dataInputs\",\n\t\t\t\ttype: \"DataInput\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataInputAssociations\",\n\t\t\t\ttype: \"DataInputAssociation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inputSet\",\n\t\t\t\ttype: \"InputSet\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"eventDefinitions\",\n\t\t\t\ttype: \"EventDefinition\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"eventDefinitionRef\",\n\t\t\t\ttype: \"EventDefinition\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CatchEvent\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"Event\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"parallelMultiple\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\",\n\t\t\t\t\"default\": false\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataOutputs\",\n\t\t\t\ttype: \"DataOutput\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataOutputAssociations\",\n\t\t\t\ttype: \"DataOutputAssociation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputSet\",\n\t\t\t\ttype: \"OutputSet\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"eventDefinitions\",\n\t\t\t\ttype: \"EventDefinition\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"eventDefinitionRef\",\n\t\t\t\ttype: \"EventDefinition\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"BoundaryEvent\",\n\t\tsuperClass: [\n\t\t\t\"CatchEvent\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"cancelActivity\",\n\t\t\t\t\"default\": true,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"attachedToRef\",\n\t\t\t\ttype: \"Activity\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"EventDefinition\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"CancelEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t]\n\t},\n\t{\n\t\tname: \"ErrorEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"errorRef\",\n\t\t\t\ttype: \"Error\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"TerminateEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t]\n\t},\n\t{\n\t\tname: \"EscalationEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"escalationRef\",\n\t\t\t\ttype: \"Escalation\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Escalation\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"structureRef\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"escalationCode\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"CompensateEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"waitForCompletion\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\",\n\t\t\t\t\"default\": true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"activityRef\",\n\t\t\t\ttype: \"Activity\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"TimerEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"timeDate\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"timeCycle\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"timeDuration\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"LinkEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"target\",\n\t\t\t\ttype: \"LinkEventDefinition\",\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"source\",\n\t\t\t\ttype: \"LinkEventDefinition\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"MessageEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"messageRef\",\n\t\t\t\ttype: \"Message\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"operationRef\",\n\t\t\t\ttype: \"Operation\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ConditionalEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"condition\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"SignalEventDefinition\",\n\t\tsuperClass: [\n\t\t\t\"EventDefinition\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"signalRef\",\n\t\t\t\ttype: \"Signal\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Signal\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"structureRef\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ImplicitThrowEvent\",\n\t\tsuperClass: [\n\t\t\t\"ThrowEvent\"\n\t\t]\n\t},\n\t{\n\t\tname: \"DataState\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ItemAwareElement\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"itemSubjectRef\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataState\",\n\t\t\t\ttype: \"DataState\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataAssociation\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"sourceRef\",\n\t\t\t\ttype: \"ItemAwareElement\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"targetRef\",\n\t\t\t\ttype: \"ItemAwareElement\",\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"transformation\",\n\t\t\t\ttype: \"FormalExpression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"property\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"assignment\",\n\t\t\t\ttype: \"Assignment\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataInput\",\n\t\tsuperClass: [\n\t\t\t\"ItemAwareElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isCollection\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inputSetRef\",\n\t\t\t\ttype: \"InputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inputSetWithOptional\",\n\t\t\t\ttype: \"InputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inputSetWithWhileExecuting\",\n\t\t\t\ttype: \"InputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataOutput\",\n\t\tsuperClass: [\n\t\t\t\"ItemAwareElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isCollection\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputSetRef\",\n\t\t\t\ttype: \"OutputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputSetWithOptional\",\n\t\t\t\ttype: \"OutputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputSetWithWhileExecuting\",\n\t\t\t\ttype: \"OutputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"InputSet\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataInputRefs\",\n\t\t\t\ttype: \"DataInput\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"optionalInputRefs\",\n\t\t\t\ttype: \"DataInput\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"whileExecutingInputRefs\",\n\t\t\t\ttype: \"DataInput\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputSetRefs\",\n\t\t\t\ttype: \"OutputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"OutputSet\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"dataOutputRefs\",\n\t\t\t\ttype: \"DataOutput\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inputSetRefs\",\n\t\t\t\ttype: \"InputSet\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"optionalOutputRefs\",\n\t\t\t\ttype: \"DataOutput\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"whileExecutingOutputRefs\",\n\t\t\t\ttype: \"DataOutput\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Property\",\n\t\tsuperClass: [\n\t\t\t\"ItemAwareElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataInputAssociation\",\n\t\tsuperClass: [\n\t\t\t\"DataAssociation\"\n\t\t]\n\t},\n\t{\n\t\tname: \"DataOutputAssociation\",\n\t\tsuperClass: [\n\t\t\t\"DataAssociation\"\n\t\t]\n\t},\n\t{\n\t\tname: \"InputOutputSpecification\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"dataInputs\",\n\t\t\t\ttype: \"DataInput\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataOutputs\",\n\t\t\t\ttype: \"DataOutput\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inputSets\",\n\t\t\t\ttype: \"InputSet\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputSets\",\n\t\t\t\ttype: \"OutputSet\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataObject\",\n\t\tsuperClass: [\n\t\t\t\"FlowElement\",\n\t\t\t\"ItemAwareElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"isCollection\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"InputOutputBinding\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"inputDataRef\",\n\t\t\t\ttype: \"InputSet\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputDataRef\",\n\t\t\t\ttype: \"OutputSet\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"operationRef\",\n\t\t\t\ttype: \"Operation\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Assignment\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"from\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"to\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataStore\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\",\n\t\t\t\"ItemAwareElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"capacity\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Integer\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isUnlimited\",\n\t\t\t\t\"default\": true,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataStoreReference\",\n\t\tsuperClass: [\n\t\t\t\"ItemAwareElement\",\n\t\t\t\"FlowElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"dataStoreRef\",\n\t\t\t\ttype: \"DataStore\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"DataObjectReference\",\n\t\tsuperClass: [\n\t\t\t\"ItemAwareElement\",\n\t\t\t\"FlowElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"dataObjectRef\",\n\t\t\t\ttype: \"DataObject\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ConversationLink\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"sourceRef\",\n\t\t\t\ttype: \"InteractionNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"targetRef\",\n\t\t\t\ttype: \"InteractionNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ConversationAssociation\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"innerConversationNodeRef\",\n\t\t\t\ttype: \"ConversationNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outerConversationNodeRef\",\n\t\t\t\ttype: \"ConversationNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CallConversation\",\n\t\tsuperClass: [\n\t\t\t\"ConversationNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"calledCollaborationRef\",\n\t\t\t\ttype: \"Collaboration\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantAssociations\",\n\t\t\t\ttype: \"ParticipantAssociation\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Conversation\",\n\t\tsuperClass: [\n\t\t\t\"ConversationNode\"\n\t\t]\n\t},\n\t{\n\t\tname: \"SubConversation\",\n\t\tsuperClass: [\n\t\t\t\"ConversationNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"conversationNodes\",\n\t\t\t\ttype: \"ConversationNode\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ConversationNode\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"InteractionNode\",\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageFlowRefs\",\n\t\t\t\ttype: \"MessageFlow\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"correlationKeys\",\n\t\t\t\ttype: \"CorrelationKey\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"GlobalConversation\",\n\t\tsuperClass: [\n\t\t\t\"Collaboration\"\n\t\t]\n\t},\n\t{\n\t\tname: \"PartnerEntity\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"PartnerRole\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CorrelationProperty\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"correlationPropertyRetrievalExpression\",\n\t\t\t\ttype: \"CorrelationPropertyRetrievalExpression\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"type\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Error\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"structureRef\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"errorCode\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CorrelationKey\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"correlationPropertyRef\",\n\t\t\t\ttype: \"CorrelationProperty\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Expression\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tisAbstract: false,\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"body\",\n\t\t\t\tisBody: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"FormalExpression\",\n\t\tsuperClass: [\n\t\t\t\"Expression\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"language\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"evaluatesToTypeRef\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Message\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"itemRef\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ItemDefinition\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"itemKind\",\n\t\t\t\ttype: \"ItemKind\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"structureRef\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isCollection\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"import\",\n\t\t\t\ttype: \"Import\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"FlowElement\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"auditing\",\n\t\t\t\ttype: \"Auditing\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"monitoring\",\n\t\t\t\ttype: \"Monitoring\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"categoryValueRef\",\n\t\t\t\ttype: \"CategoryValue\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"SequenceFlow\",\n\t\tsuperClass: [\n\t\t\t\"FlowElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"isImmediate\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"conditionExpression\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"sourceRef\",\n\t\t\t\ttype: \"FlowNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"targetRef\",\n\t\t\t\ttype: \"FlowNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"FlowElementsContainer\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"laneSets\",\n\t\t\t\ttype: \"LaneSet\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"flowElements\",\n\t\t\t\ttype: \"FlowElement\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CallableElement\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"ioSpecification\",\n\t\t\t\ttype: \"InputOutputSpecification\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"property\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"supportedInterfaceRef\",\n\t\t\t\ttype: \"Interface\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"ioBinding\",\n\t\t\t\ttype: \"InputOutputBinding\",\n\t\t\t\tisMany: true,\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"property\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"FlowNode\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"FlowElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"incoming\",\n\t\t\t\ttype: \"SequenceFlow\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outgoing\",\n\t\t\t\ttype: \"SequenceFlow\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"lanes\",\n\t\t\t\ttype: \"Lane\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CorrelationPropertyRetrievalExpression\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"messagePath\",\n\t\t\t\ttype: \"FormalExpression\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageRef\",\n\t\t\t\ttype: \"Message\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CorrelationPropertyBinding\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"dataPath\",\n\t\t\t\ttype: \"FormalExpression\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"correlationPropertyRef\",\n\t\t\t\ttype: \"CorrelationProperty\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Resource\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"resourceParameters\",\n\t\t\t\ttype: \"ResourceParameter\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ResourceParameter\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isRequired\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"type\",\n\t\t\t\ttype: \"ItemDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CorrelationSubscription\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"correlationKeyRef\",\n\t\t\t\ttype: \"CorrelationKey\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"correlationPropertyBinding\",\n\t\t\t\ttype: \"CorrelationPropertyBinding\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"MessageFlow\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"sourceRef\",\n\t\t\t\ttype: \"InteractionNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"targetRef\",\n\t\t\t\ttype: \"InteractionNode\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageRef\",\n\t\t\t\ttype: \"Message\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"MessageFlowAssociation\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"innerMessageFlowRef\",\n\t\t\t\ttype: \"MessageFlow\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outerMessageFlowRef\",\n\t\t\t\ttype: \"MessageFlow\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"InteractionNode\",\n\t\tisAbstract: true,\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"incomingConversationLinks\",\n\t\t\t\ttype: \"ConversationLink\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outgoingConversationLinks\",\n\t\t\t\ttype: \"ConversationLink\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Participant\",\n\t\tsuperClass: [\n\t\t\t\"InteractionNode\",\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"interfaceRef\",\n\t\t\t\ttype: \"Interface\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantMultiplicity\",\n\t\t\t\ttype: \"ParticipantMultiplicity\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"endPointRefs\",\n\t\t\t\ttype: \"EndPoint\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"processRef\",\n\t\t\t\ttype: \"Process\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ParticipantAssociation\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"innerParticipantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outerParticipantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ParticipantMultiplicity\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"minimum\",\n\t\t\t\t\"default\": 0,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Integer\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"maximum\",\n\t\t\t\t\"default\": 1,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Integer\"\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"Collaboration\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isClosed\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participants\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageFlows\",\n\t\t\t\ttype: \"MessageFlow\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"artifacts\",\n\t\t\t\ttype: \"Artifact\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"conversations\",\n\t\t\t\ttype: \"ConversationNode\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"conversationAssociations\",\n\t\t\t\ttype: \"ConversationAssociation\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantAssociations\",\n\t\t\t\ttype: \"ParticipantAssociation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageFlowAssociations\",\n\t\t\t\ttype: \"MessageFlowAssociation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"correlationKeys\",\n\t\t\t\ttype: \"CorrelationKey\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"choreographyRef\",\n\t\t\t\ttype: \"Choreography\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"conversationLinks\",\n\t\t\t\ttype: \"ConversationLink\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ChoreographyActivity\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"FlowNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"participantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"initiatingParticipantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"correlationKeys\",\n\t\t\t\ttype: \"CorrelationKey\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"loopType\",\n\t\t\t\ttype: \"ChoreographyLoopType\",\n\t\t\t\t\"default\": \"None\",\n\t\t\t\tisAttr: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CallChoreography\",\n\t\tsuperClass: [\n\t\t\t\"ChoreographyActivity\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"calledChoreographyRef\",\n\t\t\t\ttype: \"Choreography\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantAssociations\",\n\t\t\t\ttype: \"ParticipantAssociation\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"SubChoreography\",\n\t\tsuperClass: [\n\t\t\t\"ChoreographyActivity\",\n\t\t\t\"FlowElementsContainer\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"artifacts\",\n\t\t\t\ttype: \"Artifact\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ChoreographyTask\",\n\t\tsuperClass: [\n\t\t\t\"ChoreographyActivity\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"messageFlowRef\",\n\t\t\t\ttype: \"MessageFlow\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Choreography\",\n\t\tsuperClass: [\n\t\t\t\"Collaboration\",\n\t\t\t\"FlowElementsContainer\"\n\t\t]\n\t},\n\t{\n\t\tname: \"GlobalChoreographyTask\",\n\t\tsuperClass: [\n\t\t\t\"Choreography\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"initiatingParticipantRef\",\n\t\t\t\ttype: \"Participant\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"TextAnnotation\",\n\t\tsuperClass: [\n\t\t\t\"Artifact\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"text\",\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"textFormat\",\n\t\t\t\t\"default\": \"text/plain\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Group\",\n\t\tsuperClass: [\n\t\t\t\"Artifact\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"categoryValueRef\",\n\t\t\t\ttype: \"CategoryValue\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Association\",\n\t\tsuperClass: [\n\t\t\t\"Artifact\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"associationDirection\",\n\t\t\t\ttype: \"AssociationDirection\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"sourceRef\",\n\t\t\t\ttype: \"BaseElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"targetRef\",\n\t\t\t\ttype: \"BaseElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Category\",\n\t\tsuperClass: [\n\t\t\t\"RootElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"categoryValue\",\n\t\t\t\ttype: \"CategoryValue\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Artifact\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"CategoryValue\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"categorizedFlowElements\",\n\t\t\t\ttype: \"FlowElement\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"value\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Activity\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"FlowNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"isForCompensation\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"default\",\n\t\t\t\ttype: \"SequenceFlow\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"ioSpecification\",\n\t\t\t\ttype: \"InputOutputSpecification\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"property\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boundaryEventRefs\",\n\t\t\t\ttype: \"BoundaryEvent\",\n\t\t\t\tisMany: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"properties\",\n\t\t\t\ttype: \"Property\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataInputAssociations\",\n\t\t\t\ttype: \"DataInputAssociation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"dataOutputAssociations\",\n\t\t\t\ttype: \"DataOutputAssociation\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"startQuantity\",\n\t\t\t\t\"default\": 1,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Integer\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"resources\",\n\t\t\t\ttype: \"ResourceRole\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"completionQuantity\",\n\t\t\t\t\"default\": 1,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Integer\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"loopCharacteristics\",\n\t\t\t\ttype: \"LoopCharacteristics\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ServiceTask\",\n\t\tsuperClass: [\n\t\t\t\"Task\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"implementation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"operationRef\",\n\t\t\t\ttype: \"Operation\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"SubProcess\",\n\t\tsuperClass: [\n\t\t\t\"Activity\",\n\t\t\t\"FlowElementsContainer\",\n\t\t\t\"InteractionNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"triggeredByEvent\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"artifacts\",\n\t\t\t\ttype: \"Artifact\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"LoopCharacteristics\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"MultiInstanceLoopCharacteristics\",\n\t\tsuperClass: [\n\t\t\t\"LoopCharacteristics\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"isSequential\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"behavior\",\n\t\t\t\ttype: \"MultiInstanceBehavior\",\n\t\t\t\t\"default\": \"All\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"loopCardinality\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"loopDataInputRef\",\n\t\t\t\ttype: \"ItemAwareElement\",\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"loopDataOutputRef\",\n\t\t\t\ttype: \"ItemAwareElement\",\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"inputDataItem\",\n\t\t\t\ttype: \"DataInput\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"property\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"outputDataItem\",\n\t\t\t\ttype: \"DataOutput\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"property\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"complexBehaviorDefinition\",\n\t\t\t\ttype: \"ComplexBehaviorDefinition\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"completionCondition\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneBehaviorEventRef\",\n\t\t\t\ttype: \"EventDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"noneBehaviorEventRef\",\n\t\t\t\ttype: \"EventDefinition\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"StandardLoopCharacteristics\",\n\t\tsuperClass: [\n\t\t\t\"LoopCharacteristics\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"testBefore\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"loopCondition\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"loopMaximum\",\n\t\t\t\ttype: \"Integer\",\n\t\t\t\tisAttr: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"CallActivity\",\n\t\tsuperClass: [\n\t\t\t\"Activity\",\n\t\t\t\"InteractionNode\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"calledElement\",\n\t\t\t\ttype: \"String\",\n\t\t\t\tisAttr: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Task\",\n\t\tsuperClass: [\n\t\t\t\"Activity\",\n\t\t\t\"InteractionNode\"\n\t\t]\n\t},\n\t{\n\t\tname: \"SendTask\",\n\t\tsuperClass: [\n\t\t\t\"Task\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"implementation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"operationRef\",\n\t\t\t\ttype: \"Operation\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageRef\",\n\t\t\t\ttype: \"Message\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ReceiveTask\",\n\t\tsuperClass: [\n\t\t\t\"Task\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"implementation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"instantiate\",\n\t\t\t\t\"default\": false,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"operationRef\",\n\t\t\t\ttype: \"Operation\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageRef\",\n\t\t\t\ttype: \"Message\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ScriptTask\",\n\t\tsuperClass: [\n\t\t\t\"Task\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"scriptFormat\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"script\",\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"BusinessRuleTask\",\n\t\tsuperClass: [\n\t\t\t\"Task\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"implementation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"AdHocSubProcess\",\n\t\tsuperClass: [\n\t\t\t\"SubProcess\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"completionCondition\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"ordering\",\n\t\t\t\ttype: \"AdHocOrdering\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"cancelRemainingInstances\",\n\t\t\t\t\"default\": true,\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Transaction\",\n\t\tsuperClass: [\n\t\t\t\"SubProcess\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"protocol\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"method\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"GlobalScriptTask\",\n\t\tsuperClass: [\n\t\t\t\"GlobalTask\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"scriptLanguage\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"script\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"GlobalBusinessRuleTask\",\n\t\tsuperClass: [\n\t\t\t\"GlobalTask\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"implementation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ComplexBehaviorDefinition\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"condition\",\n\t\t\t\ttype: \"FormalExpression\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"event\",\n\t\t\t\ttype: \"ImplicitThrowEvent\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ResourceRole\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"resourceRef\",\n\t\t\t\ttype: \"Resource\",\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"resourceParameterBindings\",\n\t\t\t\ttype: \"ResourceParameterBinding\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"resourceAssignmentExpression\",\n\t\t\t\ttype: \"ResourceAssignmentExpression\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ResourceParameterBinding\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"expression\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"parameterRef\",\n\t\t\t\ttype: \"ResourceParameter\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"ResourceAssignmentExpression\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"expression\",\n\t\t\t\ttype: \"Expression\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"Import\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"importType\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"location\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"namespace\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Definitions\",\n\t\tsuperClass: [\n\t\t\t\"BaseElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"targetNamespace\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"expressionLanguage\",\n\t\t\t\t\"default\": \"http://www.w3.org/1999/XPath\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"typeLanguage\",\n\t\t\t\t\"default\": \"http://www.w3.org/2001/XMLSchema\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"imports\",\n\t\t\t\ttype: \"Import\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"extensions\",\n\t\t\t\ttype: \"Extension\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"rootElements\",\n\t\t\t\ttype: \"RootElement\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"diagrams\",\n\t\t\t\tisMany: true,\n\t\t\t\ttype: \"bpmndi:BPMNDiagram\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"exporter\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"relationships\",\n\t\t\t\ttype: \"Relationship\",\n\t\t\t\tisMany: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"exporterVersion\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t}\n];\nvar enumerations$3 = [\n\t{\n\t\tname: \"ProcessType\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Public\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Private\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"GatewayDirection\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"Unspecified\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Converging\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Diverging\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Mixed\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"EventBasedGatewayType\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"Parallel\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Exclusive\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"RelationshipDirection\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Forward\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Backward\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Both\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ItemKind\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"Physical\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Information\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ChoreographyLoopType\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Standard\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"MultiInstanceSequential\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"MultiInstanceParallel\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"AssociationDirection\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"One\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Both\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"MultiInstanceBehavior\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"One\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"All\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Complex\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"AdHocOrdering\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"Parallel\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Sequential\"\n\t\t\t}\n\t\t]\n\t}\n];\nvar xml$1 = {\n\ttagAlias: \"lowerCase\",\n\ttypePrefix: \"t\"\n};\nvar BpmnPackage = {\n\tname: name$5,\n\turi: uri$5,\n\tprefix: prefix$5,\n\tassociations: associations$5,\n\ttypes: types$5,\n\tenumerations: enumerations$3,\n\txml: xml$1\n};\n\nvar name$4 = \"BPMNDI\";\nvar uri$4 = \"http://www.omg.org/spec/BPMN/20100524/DI\";\nvar prefix$4 = \"bpmndi\";\nvar types$4 = [\n\t{\n\t\tname: \"BPMNDiagram\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"plane\",\n\t\t\t\ttype: \"BPMNPlane\",\n\t\t\t\tredefines: \"di:Diagram#rootElement\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"labelStyle\",\n\t\t\t\ttype: \"BPMNLabelStyle\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"di:Diagram\"\n\t\t]\n\t},\n\t{\n\t\tname: \"BPMNPlane\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"bpmnElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"bpmn:BaseElement\",\n\t\t\t\tredefines: \"di:DiagramElement#modelElement\"\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"di:Plane\"\n\t\t]\n\t},\n\t{\n\t\tname: \"BPMNShape\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"bpmnElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"bpmn:BaseElement\",\n\t\t\t\tredefines: \"di:DiagramElement#modelElement\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isHorizontal\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isExpanded\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isMarkerVisible\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttype: \"BPMNLabel\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isMessageVisible\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"participantBandKind\",\n\t\t\t\ttype: \"ParticipantBandKind\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"choreographyActivityShape\",\n\t\t\t\ttype: \"BPMNShape\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"di:LabeledShape\"\n\t\t]\n\t},\n\t{\n\t\tname: \"BPMNEdge\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttype: \"BPMNLabel\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"bpmnElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"bpmn:BaseElement\",\n\t\t\t\tredefines: \"di:DiagramElement#modelElement\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"sourceElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"di:DiagramElement\",\n\t\t\t\tredefines: \"di:Edge#source\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"targetElement\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"di:DiagramElement\",\n\t\t\t\tredefines: \"di:Edge#target\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"messageVisibleKind\",\n\t\t\t\ttype: \"MessageVisibleKind\",\n\t\t\t\tisAttr: true,\n\t\t\t\t\"default\": \"initiating\"\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"di:LabeledEdge\"\n\t\t]\n\t},\n\t{\n\t\tname: \"BPMNLabel\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"labelStyle\",\n\t\t\t\ttype: \"BPMNLabelStyle\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisReference: true,\n\t\t\t\tredefines: \"di:DiagramElement#style\"\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"di:Label\"\n\t\t]\n\t},\n\t{\n\t\tname: \"BPMNLabelStyle\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"font\",\n\t\t\t\ttype: \"dc:Font\"\n\t\t\t}\n\t\t],\n\t\tsuperClass: [\n\t\t\t\"di:Style\"\n\t\t]\n\t}\n];\nvar enumerations$2 = [\n\t{\n\t\tname: \"ParticipantBandKind\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"top_initiating\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"middle_initiating\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"bottom_initiating\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"top_non_initiating\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"middle_non_initiating\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"bottom_non_initiating\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"MessageVisibleKind\",\n\t\tliteralValues: [\n\t\t\t{\n\t\t\t\tname: \"initiating\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"non_initiating\"\n\t\t\t}\n\t\t]\n\t}\n];\nvar associations$4 = [\n];\nvar BpmnDiPackage = {\n\tname: name$4,\n\turi: uri$4,\n\tprefix: prefix$4,\n\ttypes: types$4,\n\tenumerations: enumerations$2,\n\tassociations: associations$4\n};\n\nvar name$3 = \"DC\";\nvar uri$3 = \"http://www.omg.org/spec/DD/20100524/DC\";\nvar prefix$3 = \"dc\";\nvar types$3 = [\n\t{\n\t\tname: \"Boolean\"\n\t},\n\t{\n\t\tname: \"Integer\"\n\t},\n\t{\n\t\tname: \"Real\"\n\t},\n\t{\n\t\tname: \"String\"\n\t},\n\t{\n\t\tname: \"Font\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\ttype: \"String\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"size\",\n\t\t\t\ttype: \"Real\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isBold\",\n\t\t\t\ttype: \"Boolean\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isItalic\",\n\t\t\t\ttype: \"Boolean\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isUnderline\",\n\t\t\t\ttype: \"Boolean\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"isStrikeThrough\",\n\t\t\t\ttype: \"Boolean\",\n\t\t\t\tisAttr: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Point\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"x\",\n\t\t\t\ttype: \"Real\",\n\t\t\t\t\"default\": \"0\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"y\",\n\t\t\t\ttype: \"Real\",\n\t\t\t\t\"default\": \"0\",\n\t\t\t\tisAttr: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Bounds\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"x\",\n\t\t\t\ttype: \"Real\",\n\t\t\t\t\"default\": \"0\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"y\",\n\t\t\t\ttype: \"Real\",\n\t\t\t\t\"default\": \"0\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"width\",\n\t\t\t\ttype: \"Real\",\n\t\t\t\tisAttr: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"height\",\n\t\t\t\ttype: \"Real\",\n\t\t\t\tisAttr: true\n\t\t\t}\n\t\t]\n\t}\n];\nvar associations$3 = [\n];\nvar DcPackage = {\n\tname: name$3,\n\turi: uri$3,\n\tprefix: prefix$3,\n\ttypes: types$3,\n\tassociations: associations$3\n};\n\nvar name$2 = \"DI\";\nvar uri$2 = \"http://www.omg.org/spec/DD/20100524/DI\";\nvar prefix$2 = \"di\";\nvar types$2 = [\n\t{\n\t\tname: \"DiagramElement\",\n\t\tisAbstract: true,\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"id\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisId: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"extension\",\n\t\t\t\ttype: \"Extension\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"owningDiagram\",\n\t\t\t\ttype: \"Diagram\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"owningElement\",\n\t\t\t\ttype: \"DiagramElement\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"modelElement\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true,\n\t\t\t\ttype: \"Element\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"style\",\n\t\t\t\ttype: \"Style\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"ownedElement\",\n\t\t\t\ttype: \"DiagramElement\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Node\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"DiagramElement\"\n\t\t]\n\t},\n\t{\n\t\tname: \"Edge\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"DiagramElement\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"source\",\n\t\t\t\ttype: \"DiagramElement\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"target\",\n\t\t\t\ttype: \"DiagramElement\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisVirtual: true,\n\t\t\t\tisReference: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"waypoint\",\n\t\t\t\tisUnique: false,\n\t\t\t\tisMany: true,\n\t\t\t\ttype: \"dc:Point\",\n\t\t\t\txml: {\n\t\t\t\t\tserialize: \"xsi:type\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Diagram\",\n\t\tisAbstract: true,\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"id\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisId: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"rootElement\",\n\t\t\t\ttype: \"DiagramElement\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisVirtual: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"name\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"documentation\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"resolution\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"Real\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"ownedStyle\",\n\t\t\t\ttype: \"Style\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Shape\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"Node\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"bounds\",\n\t\t\t\ttype: \"dc:Bounds\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Plane\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"Node\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"planeElement\",\n\t\t\t\ttype: \"DiagramElement\",\n\t\t\t\tsubsettedProperty: \"DiagramElement-ownedElement\",\n\t\t\t\tisMany: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"LabeledEdge\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"Edge\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"ownedLabel\",\n\t\t\t\ttype: \"Label\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tsubsettedProperty: \"DiagramElement-ownedElement\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"LabeledShape\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"Shape\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"ownedLabel\",\n\t\t\t\ttype: \"Label\",\n\t\t\t\tisReadOnly: true,\n\t\t\t\tsubsettedProperty: \"DiagramElement-ownedElement\",\n\t\t\t\tisMany: true,\n\t\t\t\tisVirtual: true\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Label\",\n\t\tisAbstract: true,\n\t\tsuperClass: [\n\t\t\t\"Node\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"bounds\",\n\t\t\t\ttype: \"dc:Bounds\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Style\",\n\t\tisAbstract: true,\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"id\",\n\t\t\t\tisAttr: true,\n\t\t\t\tisId: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"Extension\",\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"values\",\n\t\t\t\tisMany: true,\n\t\t\t\ttype: \"Element\"\n\t\t\t}\n\t\t]\n\t}\n];\nvar associations$2 = [\n];\nvar xml = {\n\ttagAlias: \"lowerCase\"\n};\nvar DiPackage = {\n\tname: name$2,\n\turi: uri$2,\n\tprefix: prefix$2,\n\ttypes: types$2,\n\tassociations: associations$2,\n\txml: xml\n};\n\nvar name$1 = \"bpmn.io colors for BPMN\";\nvar uri$1 = \"http://bpmn.io/schema/bpmn/biocolor/1.0\";\nvar prefix$1 = \"bioc\";\nvar types$1 = [\n\t{\n\t\tname: \"ColoredShape\",\n\t\t\"extends\": [\n\t\t\t\"bpmndi:BPMNShape\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"stroke\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"fill\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ColoredEdge\",\n\t\t\"extends\": [\n\t\t\t\"bpmndi:BPMNEdge\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"stroke\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"fill\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t}\n];\nvar enumerations$1 = [\n];\nvar associations$1 = [\n];\nvar BiocPackage = {\n\tname: name$1,\n\turi: uri$1,\n\tprefix: prefix$1,\n\ttypes: types$1,\n\tenumerations: enumerations$1,\n\tassociations: associations$1\n};\n\nvar name = \"BPMN in Color\";\nvar uri = \"http://www.omg.org/spec/BPMN/non-normative/color/1.0\";\nvar prefix = \"color\";\nvar types = [\n\t{\n\t\tname: \"ColoredLabel\",\n\t\t\"extends\": [\n\t\t\t\"bpmndi:BPMNLabel\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"color\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ColoredShape\",\n\t\t\"extends\": [\n\t\t\t\"bpmndi:BPMNShape\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"background-color\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"border-color\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tname: \"ColoredEdge\",\n\t\t\"extends\": [\n\t\t\t\"bpmndi:BPMNEdge\"\n\t\t],\n\t\tproperties: [\n\t\t\t{\n\t\t\t\tname: \"border-color\",\n\t\t\t\tisAttr: true,\n\t\t\t\ttype: \"String\"\n\t\t\t}\n\t\t]\n\t}\n];\nvar enumerations = [\n];\nvar associations = [\n];\nvar BpmnInColorPackage = {\n\tname: name,\n\turi: uri,\n\tprefix: prefix,\n\ttypes: types,\n\tenumerations: enumerations,\n\tassociations: associations\n};\n\nvar packages = {\n  bpmn: BpmnPackage,\n  bpmndi: BpmnDiPackage,\n  dc: DcPackage,\n  di: DiPackage,\n  bioc: BiocPackage,\n  color: BpmnInColorPackage\n};\n\nfunction simple(additionalPackages, options) {\n  var pks = assign({}, packages, additionalPackages);\n\n  return new BpmnModdle(pks, options);\n}\n\nexport { simple as default };\n","export function elementToString(e) {\n  if (!e) {\n    return '<null>';\n  }\n\n  return '<' + e.$type + (e.id ? ' id=\"' + e.id : '') + '\" />';\n}","import {\n  has\n} from 'min-dash';\n\n/**\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n */\n\n\n// TODO(nikku): remove with future bpmn-js version\n\nvar DI_ERROR_MESSAGE = 'Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472';\n\n/**\n * @private\n *\n * @param {ModdleElement} businessObject\n */\nexport function ensureCompatDiRef(businessObject) {\n\n  // bpmnElement can have multiple independent DIs\n  if (!has(businessObject, 'di')) {\n    Object.defineProperty(businessObject, 'di', {\n      enumerable: false,\n      get: function() {\n        throw new Error(DI_ERROR_MESSAGE);\n      }\n    });\n  }\n}","import {\n  filter,\n  find,\n  forEach\n} from 'min-dash';\n\nimport {\n  elementToString\n} from './Util';\n\nimport {\n  ensureCompatDiRef\n} from '../util/CompatibilityUtil';\n\n/**\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * Returns true if an element is of the given meta-model type.\n *\n * @param {ModdleElement} element\n * @param {string} type\n *\n * @return {boolean}\n */\nfunction is(element, type) {\n  return element.$instanceOf(type);\n}\n\n\n/**\n * Find a suitable display candidate for definitions where the DI does not\n * correctly specify one.\n *\n * @param {ModdleElement} definitions\n *\n * @return {ModdleElement}\n */\nfunction findDisplayCandidate(definitions) {\n  return find(definitions.rootElements, function(e) {\n    return is(e, 'bpmn:Process') || is(e, 'bpmn:Collaboration');\n  });\n}\n\n/**\n * @param {Record<'element' | 'root' | 'error', Function>} handler\n */\nexport default function BpmnTreeWalker(handler) {\n\n  // list of containers already walked\n  var handledElements = {};\n\n  // list of elements to handle deferred to ensure\n  // prerequisites are drawn\n  var deferred = [];\n\n  var diMap = {};\n\n  // Helpers //////////////////////\n\n  function contextual(fn, ctx) {\n    return function(e) {\n      fn(e, ctx);\n    };\n  }\n\n  function handled(element) {\n    handledElements[element.id] = element;\n  }\n\n  function isHandled(element) {\n    return handledElements[element.id];\n  }\n\n  function visit(element, ctx) {\n\n    var gfx = element.gfx;\n\n    // avoid multiple rendering of elements\n    if (gfx) {\n      throw new Error(\n        `already rendered ${ elementToString(element) }`\n      );\n    }\n\n    // call handler\n    return handler.element(element, diMap[element.id], ctx);\n  }\n\n  function visitRoot(element, diagram) {\n    return handler.root(element, diMap[element.id], diagram);\n  }\n\n  function visitIfDi(element, ctx) {\n\n    try {\n      var gfx = diMap[element.id] && visit(element, ctx);\n\n      handled(element);\n\n      return gfx;\n    } catch (error) {\n      logError(error.message, { element, error });\n\n      console.error(`failed to import ${ elementToString(element) }`, error);\n    }\n  }\n\n  function logError(message, context) {\n    handler.error(message, context);\n  }\n\n  // DI handling //////////////////////\n\n  var registerDi = this.registerDi = function registerDi(di) {\n    var bpmnElement = di.bpmnElement;\n\n    if (bpmnElement) {\n      if (diMap[bpmnElement.id]) {\n        logError(\n          `multiple DI elements defined for ${ elementToString(bpmnElement) }`,\n          { element: bpmnElement }\n        );\n      } else {\n        diMap[bpmnElement.id] = di;\n\n        ensureCompatDiRef(bpmnElement);\n      }\n    } else {\n      logError(\n        `no bpmnElement referenced in ${ elementToString(di) }`,\n        { element: di }\n      );\n    }\n  };\n\n  function handleDiagram(diagram) {\n    handlePlane(diagram.plane);\n  }\n\n  function handlePlane(plane) {\n    registerDi(plane);\n\n    forEach(plane.planeElement, handlePlaneElement);\n  }\n\n  function handlePlaneElement(planeElement) {\n    registerDi(planeElement);\n  }\n\n\n  // Semantic handling //////////////////////\n\n  /**\n   * Handle definitions and return the rendered diagram (if any).\n   *\n   * @param {ModdleElement} definitions to walk and import\n   * @param {ModdleElement} [diagram] specific diagram to import and display\n   *\n   * @throws {Error} if no diagram to display could be found\n   */\n  this.handleDefinitions = function handleDefinitions(definitions, diagram) {\n\n    // make sure we walk the correct bpmnElement\n\n    var diagrams = definitions.diagrams;\n\n    if (diagram && diagrams.indexOf(diagram) === -1) {\n      throw new Error('diagram not part of <bpmn:Definitions />');\n    }\n\n    if (!diagram && diagrams && diagrams.length) {\n      diagram = diagrams[0];\n    }\n\n    // no diagram -> nothing to import\n    if (!diagram) {\n      throw new Error('no diagram to display');\n    }\n\n    // load DI from selected diagram only\n    diMap = {};\n    handleDiagram(diagram);\n\n\n    var plane = diagram.plane;\n\n    if (!plane) {\n      throw new Error(\n        `no plane for ${ elementToString(diagram) }`\n      );\n    }\n\n    var rootElement = plane.bpmnElement;\n\n    // ensure we default to a suitable display candidate (process or collaboration),\n    // even if non is specified in DI\n    if (!rootElement) {\n      rootElement = findDisplayCandidate(definitions);\n\n      if (!rootElement) {\n        throw new Error('no process or collaboration to display');\n      } else {\n\n        logError(\n          `correcting missing bpmnElement on ${ elementToString(plane) } to ${ elementToString(rootElement) }`\n        );\n\n        // correct DI on the fly\n        plane.bpmnElement = rootElement;\n        registerDi(plane);\n      }\n    }\n\n\n    var ctx = visitRoot(rootElement, plane);\n\n    if (is(rootElement, 'bpmn:Process') || is(rootElement, 'bpmn:SubProcess')) {\n      handleProcess(rootElement, ctx);\n    } else if (is(rootElement, 'bpmn:Collaboration')) {\n      handleCollaboration(rootElement, ctx);\n\n      // force drawing of everything not yet drawn that is part of the target DI\n      handleUnhandledProcesses(definitions.rootElements, ctx);\n    } else {\n      throw new Error(\n        `unsupported bpmnElement for ${ elementToString(plane) }: ${ elementToString(rootElement) }`\n      );\n    }\n\n    // handle all deferred elements\n    handleDeferred(deferred);\n  };\n\n  var handleDeferred = this.handleDeferred = function handleDeferred() {\n\n    var fn;\n\n    // drain deferred until empty\n    while (deferred.length) {\n      fn = deferred.shift();\n\n      fn();\n    }\n  };\n\n  function handleProcess(process, context) {\n    handleFlowElementsContainer(process, context);\n    handleIoSpecification(process.ioSpecification, context);\n\n    handleArtifacts(process.artifacts, context);\n\n    // log process handled\n    handled(process);\n  }\n\n  function handleUnhandledProcesses(rootElements, ctx) {\n\n    // walk through all processes that have not yet been drawn and draw them\n    // if they contain lanes with DI information.\n    // we do this to pass the free-floating lane test cases in the MIWG test suite\n    var processes = filter(rootElements, function(e) {\n      return !isHandled(e) && is(e, 'bpmn:Process') && e.laneSets;\n    });\n\n    processes.forEach(contextual(handleProcess, ctx));\n  }\n\n  function handleMessageFlow(messageFlow, context) {\n    visitIfDi(messageFlow, context);\n  }\n\n  function handleMessageFlows(messageFlows, context) {\n    forEach(messageFlows, contextual(handleMessageFlow, context));\n  }\n\n  function handleDataAssociation(association, context) {\n    visitIfDi(association, context);\n  }\n\n  function handleDataInput(dataInput, context) {\n    visitIfDi(dataInput, context);\n  }\n\n  function handleDataOutput(dataOutput, context) {\n    visitIfDi(dataOutput, context);\n  }\n\n  function handleArtifact(artifact, context) {\n\n    // bpmn:TextAnnotation\n    // bpmn:Group\n    // bpmn:Association\n\n    visitIfDi(artifact, context);\n  }\n\n  function handleArtifacts(artifacts, context) {\n\n    forEach(artifacts, function(e) {\n      if (is(e, 'bpmn:Association')) {\n        deferred.push(function() {\n          handleArtifact(e, context);\n        });\n      } else {\n        handleArtifact(e, context);\n      }\n    });\n  }\n\n  function handleIoSpecification(ioSpecification, context) {\n\n    if (!ioSpecification) {\n      return;\n    }\n\n    forEach(ioSpecification.dataInputs, contextual(handleDataInput, context));\n    forEach(ioSpecification.dataOutputs, contextual(handleDataOutput, context));\n  }\n\n  var handleSubProcess = this.handleSubProcess = function handleSubProcess(subProcess, context) {\n    handleFlowElementsContainer(subProcess, context);\n    handleArtifacts(subProcess.artifacts, context);\n  };\n\n  function handleFlowNode(flowNode, context) {\n    var childCtx = visitIfDi(flowNode, context);\n\n    if (is(flowNode, 'bpmn:SubProcess')) {\n      handleSubProcess(flowNode, childCtx || context);\n    }\n\n    if (is(flowNode, 'bpmn:Activity')) {\n      handleIoSpecification(flowNode.ioSpecification, context);\n    }\n\n    // defer handling of associations\n    // affected types:\n    //\n    //   * bpmn:Activity\n    //   * bpmn:ThrowEvent\n    //   * bpmn:CatchEvent\n    //\n    deferred.push(function() {\n      forEach(flowNode.dataInputAssociations, contextual(handleDataAssociation, context));\n      forEach(flowNode.dataOutputAssociations, contextual(handleDataAssociation, context));\n    });\n  }\n\n  function handleSequenceFlow(sequenceFlow, context) {\n    visitIfDi(sequenceFlow, context);\n  }\n\n  function handleDataElement(dataObject, context) {\n    visitIfDi(dataObject, context);\n  }\n\n  function handleLane(lane, context) {\n\n    deferred.push(function() {\n\n      var newContext = visitIfDi(lane, context);\n\n      if (lane.childLaneSet) {\n        handleLaneSet(lane.childLaneSet, newContext || context);\n      }\n\n      wireFlowNodeRefs(lane);\n    });\n  }\n\n  function handleLaneSet(laneSet, context) {\n    forEach(laneSet.lanes, contextual(handleLane, context));\n  }\n\n  function handleLaneSets(laneSets, context) {\n    forEach(laneSets, contextual(handleLaneSet, context));\n  }\n\n  function handleFlowElementsContainer(container, context) {\n    handleFlowElements(container.flowElements, context);\n\n    if (container.laneSets) {\n      handleLaneSets(container.laneSets, context);\n    }\n  }\n\n  function handleFlowElements(flowElements, context) {\n    forEach(flowElements, function(flowElement) {\n      if (is(flowElement, 'bpmn:SequenceFlow')) {\n        deferred.push(function() {\n          handleSequenceFlow(flowElement, context);\n        });\n      } else if (is(flowElement, 'bpmn:BoundaryEvent')) {\n        deferred.unshift(function() {\n          handleFlowNode(flowElement, context);\n        });\n      } else if (is(flowElement, 'bpmn:FlowNode')) {\n        handleFlowNode(flowElement, context);\n      } else if (is(flowElement, 'bpmn:DataObject')) {\n\n        // SKIP (assume correct referencing via DataObjectReference)\n      } else if (is(flowElement, 'bpmn:DataStoreReference')) {\n        handleDataElement(flowElement, context);\n      } else if (is(flowElement, 'bpmn:DataObjectReference')) {\n        handleDataElement(flowElement, context);\n      } else {\n        logError(\n          `unrecognized flowElement ${ elementToString(flowElement) } in context ${ elementToString(context && context.businessObject) }`,\n          {\n            element: flowElement,\n            context\n          }\n        );\n      }\n    });\n  }\n\n  function handleParticipant(participant, context) {\n    var newCtx = visitIfDi(participant, context);\n\n    var process = participant.processRef;\n    if (process) {\n      handleProcess(process, newCtx || context);\n    }\n  }\n\n  function handleCollaboration(collaboration, context) {\n\n    forEach(collaboration.participants, contextual(handleParticipant, context));\n\n    handleArtifacts(collaboration.artifacts, context);\n\n    // handle message flows latest in the process\n    deferred.push(function() {\n      handleMessageFlows(collaboration.messageFlows, context);\n    });\n  }\n\n\n  function wireFlowNodeRefs(lane) {\n\n    // wire the virtual flowNodeRefs <-> relationship\n    forEach(lane.flowNodeRef, function(flowNode) {\n      var lanes = flowNode.get('lanes');\n\n      if (lanes) {\n        lanes.push(lane);\n      }\n    });\n  }\n}\n","import {\n  some\n} from 'min-dash';\n\n/**\n * @typedef { import('../model/Types').Element } Element\n * @typedef { import('../model/Types').ModdleElement } ModdleElement\n */\n\n/**\n * Is an element of the given BPMN type?\n *\n * @param  {Element|ModdleElement} element\n * @param  {string} type\n *\n * @return {boolean}\n */\nexport function is(element, type) {\n  var bo = getBusinessObject(element);\n\n  return bo && (typeof bo.$instanceOf === 'function') && bo.$instanceOf(type);\n}\n\n\n/**\n * Return true if element has any of the given types.\n *\n * @param {Element|ModdleElement} element\n * @param {string[]} types\n *\n * @return {boolean}\n */\nexport function isAny(element, types) {\n  return some(types, function(t) {\n    return is(element, t);\n  });\n}\n\n/**\n * Return the business object for a given element.\n *\n * @param {Element|ModdleElement} element\n *\n * @return {ModdleElement}\n */\nexport function getBusinessObject(element) {\n  return (element && element.businessObject) || element;\n}\n\n/**\n * Return the di object for a given element.\n *\n * @param {Element} element\n *\n * @return {ModdleElement}\n */\nexport function getDi(element) {\n  return element && element.di;\n}","import {\n  find,\n  forEach,\n  map\n} from 'min-dash';\n\nimport BpmnTreeWalker from './BpmnTreeWalker';\n\nimport { is } from '../util/ModelUtil';\n\n\n/**\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n *\n * @typedef { {\n *   warnings: string[];\n * } } ImportBPMNDiagramResult\n *\n * @typedef {ImportBPMNDiagramResult & Error} ImportBPMNDiagramError\n */\n\n/**\n * Import the definitions into a diagram.\n *\n * Errors and warnings are reported through the specified callback.\n *\n * @param {ModdleElement} diagram\n * @param {ModdleElement} definitions\n * @param {ModdleElement} [bpmnDiagram] The diagram to be rendered (if not\n * provided, the first one will be rendered).\n *\n * @return {Promise<ImportBPMNDiagramResult>}\n */\nexport function importBpmnDiagram(diagram, definitions, bpmnDiagram) {\n\n  var importer,\n      eventBus,\n      canvas;\n\n  var error,\n      warnings = [];\n\n  /**\n   * Walk the diagram semantically, importing (=drawing)\n   * all elements you encounter.\n   *\n   * @param {ModdleElement} definitions\n   * @param {ModdleElement} bpmnDiagram\n   */\n  function render(definitions, bpmnDiagram) {\n\n    var visitor = {\n\n      root: function(element, di) {\n        return importer.add(element, di);\n      },\n\n      element: function(element, di, parentShape) {\n        return importer.add(element, di, parentShape);\n      },\n\n      error: function(message, context) {\n        warnings.push({ message: message, context: context });\n      }\n    };\n\n    var walker = new BpmnTreeWalker(visitor);\n\n\n    bpmnDiagram = bpmnDiagram || (definitions.diagrams && definitions.diagrams[0]);\n\n    var diagramsToImport = getDiagramsToImport(definitions, bpmnDiagram);\n\n    if (!diagramsToImport) {\n      throw new Error('no diagram to display');\n    }\n\n    // traverse BPMN 2.0 document model,\n    // starting at definitions\n    forEach(diagramsToImport, function(diagram) {\n      walker.handleDefinitions(definitions, diagram);\n    });\n\n    var rootId = bpmnDiagram.plane.bpmnElement.id;\n\n    // we do need to account for different ways we create root elements\n    // each nested imported <root> do have the `_plane` suffix, while\n    // the root <root> is found under the business object ID\n    canvas.setRootElement(\n      canvas.findRoot(rootId + '_plane') || canvas.findRoot(rootId)\n    );\n  }\n\n  return new Promise(function(resolve, reject) {\n    try {\n      importer = diagram.get('bpmnImporter');\n      eventBus = diagram.get('eventBus');\n      canvas = diagram.get('canvas');\n\n      eventBus.fire('import.render.start', { definitions: definitions });\n\n      render(definitions, bpmnDiagram);\n\n      eventBus.fire('import.render.complete', {\n        error: error,\n        warnings: warnings\n      });\n\n      return resolve({ warnings: warnings });\n    } catch (e) {\n\n      e.warnings = warnings;\n      return reject(e);\n    }\n  });\n}\n\n/**\n * Returns all diagrams in the same hierarchy as the requested diagram.\n * Includes all parent and sub process diagrams.\n *\n * @param {ModdleElement} definitions\n * @param {ModdleElement} bpmnDiagram\n *\n * @return {ModdleElement[]}\n */\nfunction getDiagramsToImport(definitions, bpmnDiagram) {\n  if (!bpmnDiagram || !bpmnDiagram.plane) {\n    return;\n  }\n\n  var bpmnElement = bpmnDiagram.plane.bpmnElement,\n      rootElement = bpmnElement;\n\n  if (!is(bpmnElement, 'bpmn:Process') && !is(bpmnElement, 'bpmn:Collaboration')) {\n    rootElement = findRootProcess(bpmnElement);\n  }\n\n  // in case the process is part of a collaboration, the plane references the\n  // collaboration, not the process\n  var collaboration;\n\n  if (is(rootElement, 'bpmn:Collaboration')) {\n    collaboration = rootElement;\n  } else {\n    collaboration = find(definitions.rootElements, function(element) {\n      if (!is(element, 'bpmn:Collaboration')) {\n        return;\n      }\n\n      return find(element.participants, function(participant) {\n        return participant.processRef === rootElement;\n      });\n    });\n  }\n\n  var rootElements = [ rootElement ];\n\n  // all collaboration processes can contain sub-diagrams\n  if (collaboration) {\n    rootElements = map(collaboration.participants, function(participant) {\n      return participant.processRef;\n    });\n\n    rootElements.push(collaboration);\n  }\n\n  var allChildren = selfAndAllFlowElements(rootElements);\n\n  // if we have multiple diagrams referencing the same element, we\n  // use the first in the file\n  var diagramsToImport = [ bpmnDiagram ];\n  var handledElements = [ bpmnElement ];\n\n  forEach(definitions.diagrams, function(diagram) {\n\n    if (!diagram.plane) {\n      return;\n    }\n\n    var businessObject = diagram.plane.bpmnElement;\n\n    if (\n      allChildren.indexOf(businessObject) !== -1 &&\n      handledElements.indexOf(businessObject) === -1\n    ) {\n      diagramsToImport.push(diagram);\n      handledElements.push(businessObject);\n    }\n  });\n\n\n  return diagramsToImport;\n}\n\nfunction selfAndAllFlowElements(elements) {\n  var result = [];\n\n  forEach(elements, function(element) {\n    if (!element) {\n      return;\n    }\n\n    result.push(element);\n\n    result = result.concat(selfAndAllFlowElements(element.flowElements));\n  });\n\n  return result;\n}\n\nfunction findRootProcess(element) {\n  var parent = element;\n\n  while (parent) {\n    if (is(parent, 'bpmn:Process')) {\n      return parent;\n    }\n\n    parent = parent.$parent;\n  }\n}\n","/**\n * This file must not be changed or exchanged.\n *\n * @see http://bpmn.io/license for more information.\n */\n\nimport {\n  assignStyle,\n  domify,\n  delegate as domDelegate,\n  query as domQuery\n} from 'min-dom';\n\n\n// inlined ../../resources/logo.svg\nvar BPMNIO_LOGO_SVG = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14.02 5.57\" width=\"53\" height=\"21\"><path fill=\"currentColor\" d=\"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z\"/><path fill=\"currentColor\" d=\"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z\"/></svg>';\n\nexport var BPMNIO_IMG = BPMNIO_LOGO_SVG;\n\nexport var LOGO_STYLES = {\n  verticalAlign: 'middle'\n};\n\nexport var LINK_STYLES = {\n  'color': '#404040'\n};\n\nvar LIGHTBOX_STYLES = {\n  'zIndex': '1001',\n  'position': 'fixed',\n  'top': '0',\n  'left': '0',\n  'right': '0',\n  'bottom': '0'\n};\n\nvar BACKDROP_STYLES = {\n  'width': '100%',\n  'height': '100%',\n  'background': 'rgba(40,40,40,0.2)'\n};\n\nvar NOTICE_STYLES = {\n  'position': 'absolute',\n  'left': '50%',\n  'top': '40%',\n  'transform': 'translate(-50%)',\n  'width': '260px',\n  'padding': '10px',\n  'background': 'white',\n  'boxShadow': '0 1px 4px rgba(0,0,0,0.3)',\n  'fontFamily': 'Helvetica, Arial, sans-serif',\n  'fontSize': '14px',\n  'display': 'flex',\n  'lineHeight': '1.3'\n};\n\nvar LIGHTBOX_MARKUP =\n  '<div class=\"bjs-powered-by-lightbox\">' +\n    '<div class=\"backdrop\"></div>' +\n    '<div class=\"notice\">' +\n      '<a href=\"https://bpmn.io\" target=\"_blank\" rel=\"noopener\" class=\"link\">' +\n        BPMNIO_IMG +\n      '</a>' +\n      '<span>' +\n        'Web-based tooling for BPMN, DMN and forms ' +\n        'powered by <a href=\"https://bpmn.io\" target=\"_blank\" rel=\"noopener\">bpmn.io</a>.' +\n      '</span>' +\n    '</div>' +\n  '</div>';\n\n\nvar lightbox;\n\nfunction createLightbox() {\n  lightbox = domify(LIGHTBOX_MARKUP);\n\n  assignStyle(lightbox, LIGHTBOX_STYLES);\n  assignStyle(domQuery('svg', lightbox), LOGO_STYLES);\n  assignStyle(domQuery('.backdrop', lightbox), BACKDROP_STYLES);\n  assignStyle(domQuery('.notice', lightbox), NOTICE_STYLES);\n  assignStyle(domQuery('.link', lightbox), LINK_STYLES, {\n    'margin': '15px 20px 15px 10px',\n    'alignSelf': 'center'\n  });\n}\n\nexport function open() {\n\n  if (!lightbox) {\n    createLightbox();\n\n    domDelegate.bind(lightbox, '.backdrop', 'click', function(event) {\n      document.body.removeChild(lightbox);\n    });\n  }\n\n  document.body.appendChild(lightbox);\n}\n","/**\n * The code in the <project-logo></project-logo> area\n * must not be changed.\n *\n * @see http://bpmn.io/license for more information.\n */\nimport {\n  assign,\n  find,\n  isNumber,\n  omit\n} from 'min-dash';\n\nimport {\n  domify,\n  assignStyle,\n  query as domQuery,\n  remove as domRemove\n} from 'min-dom';\n\nimport {\n  innerSVG\n} from 'tiny-svg';\n\nimport Diagram from 'diagram-js';\nimport BpmnModdle from 'bpmn-moddle';\n\nimport inherits from 'inherits-browser';\n\nimport {\n  importBpmnDiagram\n} from './import/Importer';\n\n/**\n * @template T\n *\n * @typedef { import('diagram-js/lib/core/EventBus').default<T> } EventBus\n */\n\n/**\n * @template T\n *\n * @typedef {import('diagram-js/lib/core/EventBus').EventBusEventCallback<T>} EventBusEventCallback\n */\n\n/**\n * @typedef {import('didi').ModuleDeclaration} ModuleDeclaration\n *\n * @typedef {import('./model/Types').Moddle} Moddle\n * @typedef {import('./model/Types').ModdleElement} ModdleElement\n * @typedef {import('./model/Types').ModdleExtension} ModdleExtension\n *\n * @typedef { {\n *   width?: number|string;\n *   height?: number|string;\n *   position?: string;\n *   container?: string|HTMLElement;\n *   moddleExtensions?: ModdleExtensions;\n *   additionalModules?: ModuleDeclaration[];\n * } & Record<string, any> } BaseViewerOptions\n *\n * @typedef {Record<string, ModdleElement>} ModdleElementsById\n *\n * @typedef { {\n *   [key: string]: ModdleExtension;\n * } } ModdleExtensions\n *\n * @typedef { {\n *   warnings: string[];\n * } } ImportXMLResult\n *\n * @typedef {ImportXMLResult & Error} ImportXMLError\n *\n * @typedef {ImportXMLResult} ImportDefinitionsResult\n *\n * @typedef {ImportXMLError} ImportDefinitionsError\n *\n * @typedef {ImportXMLResult} OpenResult\n *\n * @typedef {ImportXMLError} OpenError\n *\n * @typedef { {\n *   format?: boolean;\n *   preamble?: boolean;\n * } } SaveXMLOptions\n *\n * @typedef { {\n *   xml?: string;\n *   error?: Error;\n * } } SaveXMLResult\n *\n * @typedef { {\n *   svg: string;\n * } } SaveSVGResult\n *\n * @typedef { {\n *   xml: string;\n * } } ImportParseStartEvent\n *\n * @typedef { {\n *   error?: ImportXMLError;\n *   definitions?: ModdleElement;\n *   elementsById?: ModdleElementsById;\n *   references?: ModdleElement[];\n *   warnings: string[];\n * } } ImportParseCompleteEvent\n *\n * @typedef { {\n *   error?: ImportXMLError;\n *   warnings: string[];\n * } } ImportDoneEvent\n *\n * @typedef { {\n *   definitions: ModdleElement;\n * } } SaveXMLStartEvent\n *\n * @typedef {SaveXMLResult} SaveXMLDoneEvent\n *\n * @typedef { {\n *   error?: Error;\n *   svg: string;\n * } } SaveSVGDoneEvent\n */\n\n/**\n * @template Type\n *\n * @typedef { Type extends { eventBus: EventBus<infer X> } ? X : never } EventMap\n */\n\n/**\n * A base viewer for BPMN 2.0 diagrams.\n *\n * Have a look at {@link bpmn-js/lib/Viewer}, {@link bpmn-js/lib/NavigatedViewer} or {@link bpmn-js/lib/Modeler} for\n * bundles that include actual features.\n *\n * @template [ServiceMap=null]\n *\n * @extends Diagram<ServiceMap>\n *\n * @param {BaseViewerOptions} [options] The options to configure the viewer.\n */\nexport default function BaseViewer(options) {\n\n  /**\n   * @type {BaseViewerOptions}\n   */\n  options = assign({}, DEFAULT_OPTIONS, options);\n\n  /**\n   * @type {Moddle}\n   */\n  this._moddle = this._createModdle(options);\n\n  /**\n   * @type {HTMLElement}\n   */\n  this._container = this._createContainer(options);\n\n  /* <project-logo> */\n\n  addProjectLogo(this._container);\n\n  /* </project-logo> */\n\n  this._init(this._container, this._moddle, options);\n}\n\ninherits(BaseViewer, Diagram);\n\n/**\n * Parse and render a BPMN 2.0 diagram.\n *\n * Once finished the viewer reports back the result to the\n * provided callback function with (err, warnings).\n *\n * ## Life-Cycle Events\n *\n * During import the viewer will fire life-cycle events:\n *\n *   * import.parse.start (about to read model from XML)\n *   * import.parse.complete (model read; may have worked or not)\n *   * import.render.start (graphical import start)\n *   * import.render.complete (graphical import finished)\n *   * import.done (everything done)\n *\n * You can use these events to hook into the life-cycle.\n *\n * @throws {ImportXMLError} An error thrown during the import of the XML.\n *\n * @fires BaseViewer#ImportParseStartEvent\n * @fires BaseViewer#ImportParseCompleteEvent\n * @fires Importer#ImportRenderStartEvent\n * @fires Importer#ImportRenderCompleteEvent\n * @fires BaseViewer#ImportDoneEvent\n *\n * @param {string} xml The BPMN 2.0 XML to be imported.\n * @param {ModdleElement|string} [bpmnDiagram] The optional diagram or Id of the BPMN diagram to open.\n *\n * @return {Promise<ImportXMLResult>} A promise resolving with warnings that were produced during the import.\n */\nBaseViewer.prototype.importXML = async function importXML(xml, bpmnDiagram) {\n\n  const self = this;\n\n  function ParseCompleteEvent(data) {\n    return self.get('eventBus').createEvent(data);\n  }\n\n  let aggregatedWarnings = [];\n  try {\n\n    // hook in pre-parse listeners +\n    // allow xml manipulation\n\n    /**\n     * A `import.parse.start` event.\n     *\n     * @event BaseViewer#ImportParseStartEvent\n     * @type {ImportParseStartEvent}\n     */\n    xml = this._emit('import.parse.start', { xml: xml }) || xml;\n\n    let parseResult;\n    try {\n      parseResult = await this._moddle.fromXML(xml, 'bpmn:Definitions');\n    } catch (error) {\n      this._emit('import.parse.complete', {\n        error\n      });\n\n      throw error;\n    }\n\n    let definitions = parseResult.rootElement;\n    const references = parseResult.references;\n    const parseWarnings = parseResult.warnings;\n    const elementsById = parseResult.elementsById;\n\n    aggregatedWarnings = aggregatedWarnings.concat(parseWarnings);\n\n    // hook in post parse listeners +\n    // allow definitions manipulation\n\n    /**\n     * A `import.parse.complete` event.\n     *\n     * @event BaseViewer#ImportParseCompleteEvent\n     * @type {ImportParseCompleteEvent}\n     */\n    definitions = this._emit('import.parse.complete', ParseCompleteEvent({\n      error: null,\n      definitions: definitions,\n      elementsById: elementsById,\n      references: references,\n      warnings: aggregatedWarnings\n    })) || definitions;\n\n    const importResult = await this.importDefinitions(definitions, bpmnDiagram);\n\n    aggregatedWarnings = aggregatedWarnings.concat(importResult.warnings);\n\n    /**\n     * A `import.parse.complete` event.\n     *\n     * @event BaseViewer#ImportDoneEvent\n     * @type {ImportDoneEvent}\n     */\n    this._emit('import.done', { error: null, warnings: aggregatedWarnings });\n\n    return { warnings: aggregatedWarnings };\n  } catch (err) {\n    let error = err;\n    aggregatedWarnings = aggregatedWarnings.concat(error.warnings || []);\n    addWarningsToError(error, aggregatedWarnings);\n\n    error = checkValidationError(error);\n\n    this._emit('import.done', { error, warnings: error.warnings });\n\n    throw error;\n  }\n};\n\n\n/**\n * Import parsed definitions and render a BPMN 2.0 diagram.\n *\n * Once finished the viewer reports back the result to the\n * provided callback function with (err, warnings).\n *\n * ## Life-Cycle Events\n *\n * During import the viewer will fire life-cycle events:\n *\n *   * import.render.start (graphical import start)\n *   * import.render.complete (graphical import finished)\n *\n * You can use these events to hook into the life-cycle.\n *\n * @throws {ImportDefinitionsError} An error thrown during the import of the definitions.\n *\n * @param {ModdleElement} definitions The definitions.\n * @param {ModdleElement|string} [bpmnDiagram] The optional diagram or ID of the BPMN diagram to open.\n *\n * @return {Promise<ImportDefinitionsResult>} A promise resolving with warnings that were produced during the import.\n */\nBaseViewer.prototype.importDefinitions = async function importDefinitions(definitions, bpmnDiagram) {\n  this._setDefinitions(definitions);\n  const result = await this.open(bpmnDiagram);\n\n  return { warnings: result.warnings };\n};\n\n\n/**\n * Open diagram of previously imported XML.\n *\n * Once finished the viewer reports back the result to the\n * provided callback function with (err, warnings).\n *\n * ## Life-Cycle Events\n *\n * During switch the viewer will fire life-cycle events:\n *\n *   * import.render.start (graphical import start)\n *   * import.render.complete (graphical import finished)\n *\n * You can use these events to hook into the life-cycle.\n *\n * @throws {OpenError} An error thrown during opening.\n *\n * @param {ModdleElement|string} bpmnDiagramOrId The diagram or Id of the BPMN diagram to open.\n *\n * @return {Promise<OpenResult>} A promise resolving with warnings that were produced during opening.\n */\nBaseViewer.prototype.open = async function open(bpmnDiagramOrId) {\n\n  const definitions = this._definitions;\n  let bpmnDiagram = bpmnDiagramOrId;\n\n  if (!definitions) {\n    const error = new Error('no XML imported');\n    addWarningsToError(error, []);\n\n    throw error;\n  }\n\n  if (typeof bpmnDiagramOrId === 'string') {\n    bpmnDiagram = findBPMNDiagram(definitions, bpmnDiagramOrId);\n\n    if (!bpmnDiagram) {\n      const error = new Error('BPMNDiagram <' + bpmnDiagramOrId + '> not found');\n      addWarningsToError(error, []);\n\n      throw error;\n    }\n  }\n\n  // clear existing rendered diagram\n  // catch synchronous exceptions during #clear()\n  try {\n    this.clear();\n  } catch (error) {\n    addWarningsToError(error, []);\n\n    throw error;\n  }\n\n  // perform graphical import\n  const { warnings } = await importBpmnDiagram(this, definitions, bpmnDiagram);\n\n  return { warnings };\n};\n\n/**\n * Export the currently displayed BPMN 2.0 diagram as\n * a BPMN 2.0 XML document.\n *\n * ## Life-Cycle Events\n *\n * During XML saving the viewer will fire life-cycle events:\n *\n *   * saveXML.start (before serialization)\n *   * saveXML.serialized (after xml generation)\n *   * saveXML.done (everything done)\n *\n * You can use these events to hook into the life-cycle.\n *\n * @throws {Error} An error thrown during export.\n *\n * @fires BaseViewer#SaveXMLStart\n * @fires BaseViewer#SaveXMLDone\n *\n * @param {SaveXMLOptions} [options] The options.\n *\n * @return {Promise<SaveXMLResult>} A promise resolving with the XML.\n */\nBaseViewer.prototype.saveXML = async function saveXML(options) {\n\n  options = options || {};\n\n  let definitions = this._definitions,\n      error, xml;\n\n  try {\n    if (!definitions) {\n      throw new Error('no definitions loaded');\n    }\n\n    // allow to fiddle around with definitions\n\n    /**\n     * A `saveXML.start` event.\n     *\n     * @event BaseViewer#SaveXMLStartEvent\n     * @type {SaveXMLStartEvent}\n     */\n    definitions = this._emit('saveXML.start', {\n      definitions\n    }) || definitions;\n\n    const result = await this._moddle.toXML(definitions, options);\n    xml = result.xml;\n\n    xml = this._emit('saveXML.serialized', {\n      xml\n    }) || xml;\n  } catch (err) {\n    error = err;\n  }\n\n  const result = error ? { error } : { xml };\n\n  /**\n   * A `saveXML.done` event.\n   *\n   * @event BaseViewer#SaveXMLDoneEvent\n   * @type {SaveXMLDoneEvent}\n   */\n  this._emit('saveXML.done', result);\n\n  if (error) {\n    throw error;\n  }\n\n  return result;\n};\n\n\n/**\n * Export the currently displayed BPMN 2.0 diagram as\n * an SVG image.\n *\n * ## Life-Cycle Events\n *\n * During SVG saving the viewer will fire life-cycle events:\n *\n *   * saveSVG.start (before serialization)\n *   * saveSVG.done (everything done)\n *\n * You can use these events to hook into the life-cycle.\n *\n * @throws {Error} An error thrown during export.\n *\n * @fires BaseViewer#SaveSVGDone\n *\n * @return {Promise<SaveSVGResult>} A promise resolving with the SVG.\n */\nBaseViewer.prototype.saveSVG = async function saveSVG() {\n  this._emit('saveSVG.start');\n\n  let svg, err;\n\n  try {\n    const canvas = this.get('canvas');\n\n    const contentNode = canvas.getActiveLayer(),\n          defsNode = domQuery(':scope > defs', canvas._svg);\n\n    const contents = innerSVG(contentNode),\n          defs = defsNode ? '<defs>' + innerSVG(defsNode) + '</defs>' : '';\n\n    const bbox = contentNode.getBBox();\n\n    svg =\n      '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n' +\n      '<!-- created with bpmn-js / http://bpmn.io -->\\n' +\n      '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n' +\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\n      'width=\"' + bbox.width + '\" height=\"' + bbox.height + '\" ' +\n      'viewBox=\"' + bbox.x + ' ' + bbox.y + ' ' + bbox.width + ' ' + bbox.height + '\" version=\"1.1\">' +\n      defs + contents +\n      '</svg>';\n  } catch (e) {\n    err = e;\n  }\n\n  /**\n   * A `saveSVG.done` event.\n   *\n   * @event BaseViewer#SaveSVGDoneEvent\n   * @type {SaveSVGDoneEvent}\n   */\n  this._emit('saveSVG.done', {\n    error: err,\n    svg: svg\n  });\n\n  if (err) {\n    throw err;\n  }\n\n  return { svg };\n};\n\nBaseViewer.prototype._setDefinitions = function(definitions) {\n  this._definitions = definitions;\n};\n\n/**\n * Return modules to instantiate with.\n *\n * @return {ModuleDeclaration[]} The modules.\n */\nBaseViewer.prototype.getModules = function() {\n  return this._modules;\n};\n\n/**\n * Remove all drawn elements from the viewer.\n *\n * After calling this method the viewer can still be reused for opening another\n * diagram.\n */\nBaseViewer.prototype.clear = function() {\n  if (!this.getDefinitions()) {\n\n    // no diagram to clear\n    return;\n  }\n\n  // remove drawn elements\n  Diagram.prototype.clear.call(this);\n};\n\n/**\n * Destroy the viewer instance and remove all its remainders from the document\n * tree.\n */\nBaseViewer.prototype.destroy = function() {\n\n  // diagram destroy\n  Diagram.prototype.destroy.call(this);\n\n  // dom detach\n  domRemove(this._container);\n};\n\n/**\n * @overlord\n *\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template T\n *\n * @param {string|string[]} events The event(s) to listen to.\n * @param {number} [priority] The priority with which to listen.\n * @param {EventBusEventCallback<T>} callback The callback.\n * @param {any} [that] Value of `this` the callback will be called with.\n */\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template {keyof EventMap<ServiceMap>} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<(EventMap<ServiceMap>)[EventName]>} callback\n * @param {any} [that] callback context\n */\nBaseViewer.prototype.on = function(events, priority, callback, that) {\n  return this.get('eventBus').on(events, priority, callback, that);\n};\n\n/**\n * Remove an event listener.\n *\n * @param {string|string[]} events The event(s).\n * @param {Function} [callback] The callback.\n */\nBaseViewer.prototype.off = function(events, callback) {\n  this.get('eventBus').off(events, callback);\n};\n\n/**\n * Attach the viewer to an HTML element.\n *\n * @param {HTMLElement} parentNode The parent node to attach to.\n */\nBaseViewer.prototype.attachTo = function(parentNode) {\n\n  if (!parentNode) {\n    throw new Error('parentNode required');\n  }\n\n  // ensure we detach from the\n  // previous, old parent\n  this.detach();\n\n  // unwrap jQuery if provided\n  if (parentNode.get && parentNode.constructor.prototype.jquery) {\n    parentNode = parentNode.get(0);\n  }\n\n  if (typeof parentNode === 'string') {\n    parentNode = domQuery(parentNode);\n  }\n\n  parentNode.appendChild(this._container);\n\n  this._emit('attach', {});\n\n  this.get('canvas').resized();\n};\n\n/**\n * Get the definitions model element.\n *\n * @return {ModdleElement} The definitions model element.\n */\nBaseViewer.prototype.getDefinitions = function() {\n  return this._definitions;\n};\n\n/**\n * Detach the viewer.\n *\n * @fires BaseViewer#DetachEvent\n */\nBaseViewer.prototype.detach = function() {\n\n  const container = this._container,\n        parentNode = container.parentNode;\n\n  if (!parentNode) {\n    return;\n  }\n\n  /**\n   * A `detach` event.\n   *\n   * @event BaseViewer#DetachEvent\n   * @type {Object}\n   */\n  this._emit('detach', {});\n\n  parentNode.removeChild(container);\n};\n\nBaseViewer.prototype._init = function(container, moddle, options) {\n\n  const baseModules = options.modules || this.getModules(options),\n        additionalModules = options.additionalModules || [],\n        staticModules = [\n          {\n            bpmnjs: [ 'value', this ],\n            moddle: [ 'value', moddle ]\n          }\n        ];\n\n  const diagramModules = [].concat(staticModules, baseModules, additionalModules);\n\n  const diagramOptions = assign(omit(options, [ 'additionalModules' ]), {\n    canvas: assign({}, options.canvas, { container: container }),\n    modules: diagramModules\n  });\n\n  // invoke diagram constructor\n  Diagram.call(this, diagramOptions);\n\n  if (options && options.container) {\n    this.attachTo(options.container);\n  }\n};\n\n/**\n * Emit an event on the underlying {@link EventBus}\n *\n * @param  {string} type\n * @param  {Object} event\n *\n * @return {Object} The return value after calling all event listeners.\n */\nBaseViewer.prototype._emit = function(type, event) {\n  return this.get('eventBus').fire(type, event);\n};\n\n/**\n * @param {BaseViewerOptions} options\n *\n * @return {HTMLElement}\n */\nBaseViewer.prototype._createContainer = function(options) {\n\n  const container = domify('<div class=\"bjs-container\"></div>');\n\n  assignStyle(container, {\n    width: ensureUnit(options.width),\n    height: ensureUnit(options.height),\n    position: options.position\n  });\n\n  return container;\n};\n\n/**\n * @param {BaseViewerOptions} options\n *\n * @return {Moddle}\n */\nBaseViewer.prototype._createModdle = function(options) {\n  const moddleOptions = assign({}, this._moddleExtensions, options.moddleExtensions);\n\n  return new BpmnModdle(moddleOptions);\n};\n\nBaseViewer.prototype._modules = [];\n\n// helpers ///////////////\n\nfunction addWarningsToError(err, warningsAry) {\n  err.warnings = warningsAry;\n  return err;\n}\n\nfunction checkValidationError(err) {\n\n  // check if we can help the user by indicating wrong BPMN 2.0 xml\n  // (in case he or the exporting tool did not get that right)\n\n  const pattern = /unparsable content <([^>]+)> detected([\\s\\S]*)$/;\n  const match = pattern.exec(err.message);\n\n  if (match) {\n    err.message =\n      'unparsable content <' + match[1] + '> detected; ' +\n      'this may indicate an invalid BPMN 2.0 diagram file' + match[2];\n  }\n\n  return err;\n}\n\nconst DEFAULT_OPTIONS = {\n  width: '100%',\n  height: '100%',\n  position: 'relative'\n};\n\n\n/**\n * Ensure the passed argument is a proper unit (defaulting to px)\n */\nfunction ensureUnit(val) {\n  return val + (isNumber(val) ? 'px' : '');\n}\n\n\n/**\n * Find BPMNDiagram in definitions by ID\n *\n * @param {ModdleElement<Definitions>} definitions\n * @param {string} diagramId\n *\n * @return {ModdleElement<BPMNDiagram>|null}\n */\nfunction findBPMNDiagram(definitions, diagramId) {\n  if (!diagramId) {\n    return null;\n  }\n\n  return find(definitions.diagrams, function(element) {\n    return element.id === diagramId;\n  }) || null;\n}\n\n\n/* <project-logo> */\n\nimport {\n  open as openPoweredBy,\n  BPMNIO_IMG,\n  LOGO_STYLES,\n  LINK_STYLES\n} from './util/PoweredByUtil';\n\nimport {\n  event as domEvent\n} from 'min-dom';\n\n/**\n * Adds the project logo to the diagram container as\n * required by the bpmn.io license.\n *\n * @see http://bpmn.io/license\n *\n * @param {Element} container\n */\nfunction addProjectLogo(container) {\n  const img = BPMNIO_IMG;\n\n  const linkMarkup =\n    '<a href=\"http://bpmn.io\" ' +\n    'target=\"_blank\" ' +\n    'class=\"bjs-powered-by\" ' +\n    'title=\"Powered by bpmn.io\" ' +\n    '>' +\n    img +\n    '</a>';\n\n  const linkElement = domify(linkMarkup);\n\n  assignStyle(domQuery('svg', linkElement), LOGO_STYLES);\n  assignStyle(linkElement, LINK_STYLES, {\n    position: 'absolute',\n    bottom: '15px',\n    right: '15px',\n    zIndex: '100'\n  });\n\n  container.appendChild(linkElement);\n\n  domEvent.bind(linkElement, 'click', function(event) {\n    openPoweredBy();\n\n    event.preventDefault();\n  });\n}\n\n/* </project-logo> */\n","import inherits from 'inherits-browser';\n\nimport Ids from 'ids';\n\nimport BaseViewer from './BaseViewer';\n\n\n/**\n * @typedef {import('./BaseViewer').BaseViewerOptions} BaseViewerOptions\n * @typedef {import('./BaseViewer').ModdleElementsById} ModdleElementsById\n *\n * @typedef {import('./model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * A base modeler for BPMN 2.0 diagrams.\n *\n * See {@link bpmn-js/lib/Modeler} for a fully-featured modeler.\n *\n * @template [ServiceMap=null]\n *\n * @extends BaseViewer<ServiceMap>\n *\n * @param {BaseViewerOptions} [options] The options to configure the modeler.\n */\nexport default function BaseModeler(options) {\n  BaseViewer.call(this, options);\n\n  // hook ID collection into the modeler\n  this.on('import.parse.complete', function(event) {\n    if (!event.error) {\n      this._collectIds(event.definitions, event.elementsById);\n    }\n  }, this);\n\n  this.on('diagram.destroy', function() {\n    this.get('moddle').ids.clear();\n  }, this);\n}\n\ninherits(BaseModeler, BaseViewer);\n\n\n/**\n * Create a moddle instance, attaching IDs to it.\n *\n * @param {BaseViewerOptions} options\n *\n * @return {Moddle}\n */\nBaseModeler.prototype._createModdle = function(options) {\n  var moddle = BaseViewer.prototype._createModdle.call(this, options);\n\n  // attach ids to moddle to be able to track and validated ids in the BPMN 2.0\n  // XML document tree\n  moddle.ids = new Ids([ 32, 36, 1 ]);\n\n  return moddle;\n};\n\n/**\n * Collect IDs processed during parsing of the definitions object.\n *\n * @param {ModdleElement} definitions\n * @param {ModdleElementsById} elementsById\n */\nBaseModeler.prototype._collectIds = function(definitions, elementsById) {\n\n  var moddle = definitions.$model,\n      ids = moddle.ids,\n      id;\n\n  // remove references from previous import\n  ids.clear();\n\n  for (id in elementsById) {\n    ids.claim(id, elementsById[ id ]);\n  }\n};\n","import {\n  is,\n  getBusinessObject,\n  getDi\n} from './ModelUtil';\n\nimport {\n  some\n} from 'min-dash';\n\n/**\n * @typedef {import('../model/Types').Element} Element\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * @param {Element} element\n * @param {ModdleElement} [di]\n *\n * @return {boolean}\n */\nexport function isExpanded(element, di) {\n\n  if (is(element, 'bpmn:CallActivity')) {\n    return false;\n  }\n\n  if (is(element, 'bpmn:SubProcess')) {\n    di = di || getDi(element);\n\n    if (di && is(di, 'bpmndi:BPMNPlane')) {\n      return true;\n    }\n\n    return di && !!di.isExpanded;\n  }\n\n  if (is(element, 'bpmn:Participant')) {\n    return !!getBusinessObject(element).processRef;\n  }\n\n  return true;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function isHorizontal(element) {\n\n  if (!is(element, 'bpmn:Participant') && !is(element, 'bpmn:Lane')) {\n    return undefined;\n  }\n\n  var isHorizontal = getDi(element).isHorizontal;\n\n  if (isHorizontal === undefined) {\n    return true;\n  }\n\n  return isHorizontal;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function isInterrupting(element) {\n  return element && getBusinessObject(element).isInterrupting !== false;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function isEventSubProcess(element) {\n  return element && !!getBusinessObject(element).triggeredByEvent;\n}\n\n/**\n * @param {Element} element\n * @param {string} eventType\n *\n * @return {boolean}\n */\nexport function hasEventDefinition(element, eventType) {\n  var eventDefinitions = getBusinessObject(element).eventDefinitions;\n\n  return some(eventDefinitions, function(event) {\n    return is(event, eventType);\n  });\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function hasErrorEventDefinition(element) {\n  return hasEventDefinition(element, 'bpmn:ErrorEventDefinition');\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function hasEscalationEventDefinition(element) {\n  return hasEventDefinition(element, 'bpmn:EscalationEventDefinition');\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function hasCompensateEventDefinition(element) {\n  return hasEventDefinition(element, 'bpmn:CompensateEventDefinition');\n}\n","import {\n  assign\n} from 'min-dash';\n\nimport { is } from './ModelUtil';\n\nimport { isLabel } from 'diagram-js/lib/util/ModelUtil';\n\nexport { isLabel } from 'diagram-js/lib/util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n *\n * @typedef {import('../model/Types').Element} Element\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n */\n\nexport var DEFAULT_LABEL_SIZE = {\n  width: 90,\n  height: 20\n};\n\nexport var FLOW_LABEL_INDENT = 15;\n\n\n/**\n * Return true if the given semantic has an external label.\n *\n * @param {Element} semantic\n *\n * @return {boolean}\n */\nexport function isLabelExternal(semantic) {\n  return is(semantic, 'bpmn:Event') ||\n         is(semantic, 'bpmn:Gateway') ||\n         is(semantic, 'bpmn:DataStoreReference') ||\n         is(semantic, 'bpmn:DataObjectReference') ||\n         is(semantic, 'bpmn:DataInput') ||\n         is(semantic, 'bpmn:DataOutput') ||\n         is(semantic, 'bpmn:SequenceFlow') ||\n         is(semantic, 'bpmn:MessageFlow') ||\n         is(semantic, 'bpmn:Group');\n}\n\n/**\n * Return true if the given element has an external label.\n *\n * @param {Element} element\n *\n * @return {boolean}\n */\nexport function hasExternalLabel(element) {\n  return isLabel(element.label);\n}\n\n/**\n * Get the position of a sequence flow label.\n *\n * @param  {Point[]} waypoints\n *\n * @return {Point}\n */\nexport function getFlowLabelPosition(waypoints) {\n\n  // get the waypoints mid\n  var mid = waypoints.length / 2 - 1;\n\n  var first = waypoints[Math.floor(mid)];\n  var second = waypoints[Math.ceil(mid + 0.01)];\n\n  // get position\n  var position = getWaypointsMid(waypoints);\n\n  // calculate angle\n  var angle = Math.atan((second.y - first.y) / (second.x - first.x));\n\n  var x = position.x,\n      y = position.y;\n\n  if (Math.abs(angle) < Math.PI / 2) {\n    y -= FLOW_LABEL_INDENT;\n  } else {\n    x += FLOW_LABEL_INDENT;\n  }\n\n  return { x: x, y: y };\n}\n\n\n/**\n * Get the middle of a number of waypoints.\n *\n * @param  {Point[]} waypoints\n *\n * @return {Point}\n */\nexport function getWaypointsMid(waypoints) {\n\n  var mid = waypoints.length / 2 - 1;\n\n  var first = waypoints[Math.floor(mid)];\n  var second = waypoints[Math.ceil(mid + 0.01)];\n\n  return {\n    x: first.x + (second.x - first.x) / 2,\n    y: first.y + (second.y - first.y) / 2\n  };\n}\n\n/**\n * Get the middle of the external label of an element.\n *\n * @param {Element} element\n *\n * @return {Point}\n */\nexport function getExternalLabelMid(element) {\n\n  if (element.waypoints) {\n    return getFlowLabelPosition(element.waypoints);\n  } else if (is(element, 'bpmn:Group')) {\n    return {\n      x: element.x + element.width / 2,\n      y: element.y + DEFAULT_LABEL_SIZE.height / 2\n    };\n  } else {\n    return {\n      x: element.x + element.width / 2,\n      y: element.y + element.height + DEFAULT_LABEL_SIZE.height / 2\n    };\n  }\n}\n\n\n/**\n * Return the bounds of an elements label, parsed from the elements DI or\n * generated from its bounds.\n *\n * @param {ModdleElement} di\n * @param {Element} element\n *\n * @return {Rect}\n */\nexport function getExternalLabelBounds(di, element) {\n\n  var mid,\n      size,\n      bounds,\n      label = di.label;\n\n  if (label && label.bounds) {\n    bounds = label.bounds;\n\n    size = {\n      width: Math.max(DEFAULT_LABEL_SIZE.width, bounds.width),\n      height: bounds.height\n    };\n\n    mid = {\n      x: bounds.x + bounds.width / 2,\n      y: bounds.y + bounds.height / 2\n    };\n  } else {\n\n    mid = getExternalLabelMid(element);\n\n    size = DEFAULT_LABEL_SIZE;\n  }\n\n  return assign({\n    x: mid.x - size.width / 2,\n    y: mid.y - size.height / 2\n  }, size);\n}\n\n/**\n * @param {ModdleElement} semantic\n *\n * @returns {string}\n */\nfunction getLabelAttr(semantic) {\n  if (\n    is(semantic, 'bpmn:FlowElement') ||\n    is(semantic, 'bpmn:Participant') ||\n    is(semantic, 'bpmn:Lane') ||\n    is(semantic, 'bpmn:SequenceFlow') ||\n    is(semantic, 'bpmn:MessageFlow') ||\n    is(semantic, 'bpmn:DataInput') ||\n    is(semantic, 'bpmn:DataOutput')\n  ) {\n    return 'name';\n  }\n\n  if (is(semantic, 'bpmn:TextAnnotation')) {\n    return 'text';\n  }\n\n  if (is(semantic, 'bpmn:Group')) {\n    return 'categoryValueRef';\n  }\n}\n\n/**\n * @param {ModdleElement} semantic\n *\n * @returns {string}\n */\nfunction getCategoryValue(semantic) {\n  var categoryValueRef = semantic['categoryValueRef'];\n\n  if (!categoryValueRef) {\n    return '';\n  }\n\n\n  return categoryValueRef.value || '';\n}\n\n/**\n * @param {Element} element\n *\n * @return {string}\n */\nexport function getLabel(element) {\n  var semantic = element.businessObject,\n      attr = getLabelAttr(semantic);\n\n  if (attr) {\n\n    if (attr === 'categoryValueRef') {\n\n      return getCategoryValue(semantic);\n    }\n\n    return semantic[attr] || '';\n  }\n}\n\n\n/**\n * @param {Element} element\n * @param {string} text\n *\n * @return {Element}\n */\nexport function setLabel(element, text) {\n  var semantic = element.businessObject,\n      attr = getLabelAttr(semantic);\n\n  if (attr) {\n\n    if (attr === 'categoryValueRef') {\n      semantic['categoryValueRef'].value = text;\n    } else {\n      semantic[attr] = text;\n    }\n\n  }\n\n  return element;\n}\n","import {\n  has,\n  some\n} from 'min-dash';\n\nimport {\n  getDi\n} from '../util/ModelUtil';\n\nimport {\n  componentsToPath\n} from 'diagram-js/lib/util/RenderUtil';\n\n\n/**\n * @typedef {import('../model').ModdleElement} ModdleElement\n * @typedef {import('../model').Element} Element\n *\n * @typedef {import('../model').ShapeLike} ShapeLike\n *\n * @typedef {import('diagram-js/lib/util/Types').Dimensions} Dimensions\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n */\n\n// re-export for compatibility\nexport {\n  getDi,\n  getBusinessObject as getSemantic\n} from '../util/ModelUtil';\n\n\nexport var black = 'hsl(225, 10%, 15%)';\nexport var white = 'white';\n\n// element utils //////////////////////\n\n/**\n * Checks if eventDefinition of the given element matches with semantic type.\n *\n * @param {ModdleElement} event\n * @param {string} eventDefinitionType\n *\n * @return {boolean}\n */\nexport function isTypedEvent(event, eventDefinitionType) {\n  return some(event.eventDefinitions, function(definition) {\n    return definition.$type === eventDefinitionType;\n  });\n}\n\n/**\n * Check if element is a throw event.\n *\n * @param {ModdleElement} event\n *\n * @return {boolean}\n */\nexport function isThrowEvent(event) {\n  return (event.$type === 'bpmn:IntermediateThrowEvent') || (event.$type === 'bpmn:EndEvent');\n}\n\n/**\n * Check if element is a throw event.\n *\n * @param {ModdleElement} element\n *\n * @return {boolean}\n */\nexport function isCollection(element) {\n  var dataObject = element.dataObjectRef;\n\n  return element.isCollection || (dataObject && dataObject.isCollection);\n}\n\n\n// color access //////////////////////\n\n/**\n * @param {Element} element\n * @param {string} [defaultColor]\n * @param {string} [overrideColor]\n *\n * @return {string}\n */\nexport function getFillColor(element, defaultColor, overrideColor) {\n  var di = getDi(element);\n\n  return overrideColor || di.get('color:background-color') || di.get('bioc:fill') || defaultColor || white;\n}\n\n/**\n * @param {Element} element\n * @param {string} [defaultColor]\n * @param {string} [overrideColor]\n *\n * @return {string}\n */\nexport function getStrokeColor(element, defaultColor, overrideColor) {\n  var di = getDi(element);\n\n  return overrideColor || di.get('color:border-color') || di.get('bioc:stroke') || defaultColor || black;\n}\n\n/**\n * @param {Element} element\n * @param {string} [defaultColor]\n * @param {string} [defaultStrokeColor]\n * @param {string} [overrideColor]\n *\n * @return {string}\n */\nexport function getLabelColor(element, defaultColor, defaultStrokeColor, overrideColor) {\n  var di = getDi(element),\n      label = di.get('label');\n\n  return overrideColor || (label && label.get('color:color')) || defaultColor ||\n    getStrokeColor(element, defaultStrokeColor);\n}\n\n// cropping path customizations //////////////////////\n\n/**\n * @param {ShapeLike} shape\n *\n * @return {string} path\n */\nexport function getCirclePath(shape) {\n\n  var cx = shape.x + shape.width / 2,\n      cy = shape.y + shape.height / 2,\n      radius = shape.width / 2;\n\n  var circlePath = [\n    [ 'M', cx, cy ],\n    [ 'm', 0, -radius ],\n    [ 'a', radius, radius, 0, 1, 1, 0, 2 * radius ],\n    [ 'a', radius, radius, 0, 1, 1, 0, -2 * radius ],\n    [ 'z' ]\n  ];\n\n  return componentsToPath(circlePath);\n}\n\n/**\n * @param {ShapeLike} shape\n * @param {number} [borderRadius]\n *\n * @return {string} path\n */\nexport function getRoundRectPath(shape, borderRadius) {\n\n  var x = shape.x,\n      y = shape.y,\n      width = shape.width,\n      height = shape.height;\n\n  var roundRectPath = [\n    [ 'M', x + borderRadius, y ],\n    [ 'l', width - borderRadius * 2, 0 ],\n    [ 'a', borderRadius, borderRadius, 0, 0, 1, borderRadius, borderRadius ],\n    [ 'l', 0, height - borderRadius * 2 ],\n    [ 'a', borderRadius, borderRadius, 0, 0, 1, -borderRadius, borderRadius ],\n    [ 'l', borderRadius * 2 - width, 0 ],\n    [ 'a', borderRadius, borderRadius, 0, 0, 1, -borderRadius, -borderRadius ],\n    [ 'l', 0, borderRadius * 2 - height ],\n    [ 'a', borderRadius, borderRadius, 0, 0, 1, borderRadius, -borderRadius ],\n    [ 'z' ]\n  ];\n\n  return componentsToPath(roundRectPath);\n}\n\n/**\n * @param {ShapeLike} shape\n *\n * @return {string} path\n */\nexport function getDiamondPath(shape) {\n\n  var width = shape.width,\n      height = shape.height,\n      x = shape.x,\n      y = shape.y,\n      halfWidth = width / 2,\n      halfHeight = height / 2;\n\n  var diamondPath = [\n    [ 'M', x + halfWidth, y ],\n    [ 'l', halfWidth, halfHeight ],\n    [ 'l', -halfWidth, halfHeight ],\n    [ 'l', -halfWidth, -halfHeight ],\n    [ 'z' ]\n  ];\n\n  return componentsToPath(diamondPath);\n}\n\n/**\n * @param {ShapeLike} shape\n *\n * @return {string} path\n */\nexport function getRectPath(shape) {\n  var x = shape.x,\n      y = shape.y,\n      width = shape.width,\n      height = shape.height;\n\n  var rectPath = [\n    [ 'M', x, y ],\n    [ 'l', width, 0 ],\n    [ 'l', 0, height ],\n    [ 'l', -width, 0 ],\n    [ 'z' ]\n  ];\n\n  return componentsToPath(rectPath);\n}\n\n/**\n * Get width and height from element or overrides.\n *\n * @param {Dimensions|Rect|ShapeLike} bounds\n * @param {Object} overrides\n *\n * @returns {Dimensions}\n */\nexport function getBounds(bounds, overrides = {}) {\n  return {\n    width: getWidth(bounds, overrides),\n    height: getHeight(bounds, overrides)\n  };\n}\n\n/**\n * Get width from element or overrides.\n *\n * @param {Dimensions|Rect|ShapeLike} bounds\n * @param {Object} overrides\n *\n * @returns {number}\n */\nexport function getWidth(bounds, overrides = {}) {\n  return has(overrides, 'width') ? overrides.width : bounds.width;\n}\n\n/**\n * Get height from element or overrides.\n *\n * @param {Dimensions|Rect|ShapeLike} bounds\n * @param {Object} overrides\n *\n * @returns {number}\n */\nexport function getHeight(bounds, overrides = {}) {\n  return has(overrides, 'height') ? overrides.height : bounds.height;\n}","import inherits from 'inherits-browser';\n\nimport {\n  assign,\n  forEach,\n  isObject\n} from 'min-dash';\n\nimport BaseRenderer from 'diagram-js/lib/draw/BaseRenderer';\n\nimport {\n  isExpanded,\n  isHorizontal,\n  isEventSubProcess\n} from '../util/DiUtil';\n\nimport {\n  getLabel\n} from '../util/LabelUtil';\n\nimport {\n  is\n} from '../util/ModelUtil';\n\nimport {\n  createLine\n} from 'diagram-js/lib/util/RenderUtil';\n\nimport {\n  isTypedEvent,\n  isThrowEvent,\n  isCollection,\n  getBounds,\n  getDi,\n  getSemantic,\n  getCirclePath,\n  getRoundRectPath,\n  getDiamondPath,\n  getRectPath,\n  getFillColor,\n  getStrokeColor,\n  getLabelColor,\n  getHeight,\n  getWidth\n} from './BpmnRenderUtil';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  classes as svgClasses\n} from 'tiny-svg';\n\nimport {\n  rotate,\n  transform,\n  translate\n} from 'diagram-js/lib/util/SvgTransformUtil';\n\nimport Ids from 'ids';\n\nimport { black } from './BpmnRenderUtil';\n\nvar markerIds = new Ids();\n\nvar ELEMENT_LABEL_DISTANCE = 10,\n    INNER_OUTER_DIST = 3,\n    PARTICIPANT_STROKE_WIDTH = 1.5,\n    TASK_BORDER_RADIUS = 10;\n\nvar DEFAULT_OPACITY = 0.95,\n    FULL_OPACITY = 1,\n    LOW_OPACITY = 0.25;\n\n/**\n * @typedef { Partial<{\n *   defaultFillColor: string,\n *   defaultStrokeColor: string,\n *   defaultLabelColor: string\n * }> } BpmnRendererConfig\n *\n * @typedef { Partial<{\n *   fill: string,\n *   stroke: string,\n *   width: string,\n *   height: string\n * }> } Attrs\n */\n\n/**\n * @typedef { import('../model/Types').Element } Element\n * @typedef { import('../model/Types').Shape } Shape\n * @typedef { import('../model/Types').Connection } Connection\n */\n\n/**\n * A renderer for BPMN elements\n *\n * @param {BpmnRendererConfig} config\n * @param {import('diagram-js/lib/core/EventBus').default} eventBus\n * @param {import('diagram-js/lib/draw/Styles').default} styles\n * @param {import('./PathMap').default} pathMap\n * @param {import('diagram-js/lib/core/Canvas').default} canvas\n * @param {import('./TextRenderer').default} textRenderer\n * @param {number} [priority]\n */\nexport default function BpmnRenderer(\n    config, eventBus, styles, pathMap,\n    canvas, textRenderer, priority) {\n\n  BaseRenderer.call(this, eventBus, priority);\n\n  var defaultFillColor = config && config.defaultFillColor,\n      defaultStrokeColor = config && config.defaultStrokeColor,\n      defaultLabelColor = config && config.defaultLabelColor;\n\n  function shapeStyle(attrs) {\n    return styles.computeStyle(attrs, {\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      stroke: black,\n      strokeWidth: 2,\n      fill: 'white'\n    });\n  }\n\n  function lineStyle(attrs) {\n    return styles.computeStyle(attrs, [ 'no-fill' ], {\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      stroke: black,\n      strokeWidth: 2\n    });\n  }\n\n  function addMarker(id, options) {\n    var {\n      ref = { x: 0, y: 0 },\n      scale = 1,\n      element,\n      parentGfx = canvas._svg\n    } = options;\n\n    var marker = svgCreate('marker', {\n      id: id,\n      viewBox: '0 0 20 20',\n      refX: ref.x,\n      refY: ref.y,\n      markerWidth: 20 * scale,\n      markerHeight: 20 * scale,\n      orient: 'auto'\n    });\n\n    svgAppend(marker, element);\n\n    var defs = domQuery(':scope > defs', parentGfx);\n\n    if (!defs) {\n      defs = svgCreate('defs');\n\n      svgAppend(parentGfx, defs);\n    }\n\n    svgAppend(defs, marker);\n  }\n\n  function marker(parentGfx, type, fill, stroke) {\n\n\n    var id = markerIds.nextPrefixed('marker-');\n\n    createMarker(parentGfx, id, type, fill, stroke);\n\n    return 'url(#' + id + ')';\n  }\n\n  function createMarker(parentGfx, id, type, fill, stroke) {\n\n    if (type === 'sequenceflow-end') {\n      var sequenceflowEnd = svgCreate('path', {\n        d: 'M 1 5 L 11 10 L 1 15 Z',\n        ...shapeStyle({\n          fill: stroke,\n          stroke: stroke,\n          strokeWidth: 1\n        })\n      });\n\n      addMarker(id, {\n        element: sequenceflowEnd,\n        ref: { x: 11, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'messageflow-start') {\n      var messageflowStart = svgCreate('circle', {\n        cx: 6,\n        cy: 6,\n        r: 3.5,\n        ...shapeStyle({\n          fill,\n          stroke: stroke,\n          strokeWidth: 1,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: messageflowStart,\n        ref: { x: 6, y: 6 },\n        parentGfx\n      });\n    }\n\n    if (type === 'messageflow-end') {\n      var messageflowEnd = svgCreate('path', {\n        d: 'm 1 5 l 0 -3 l 7 3 l -7 3 z',\n        ...shapeStyle({\n          fill,\n          stroke: stroke,\n          strokeWidth: 1,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: messageflowEnd,\n        ref: { x: 8.5, y: 5 },\n        parentGfx\n      });\n    }\n\n    if (type === 'association-start') {\n      var associationStart = svgCreate('path', {\n        d: 'M 11 5 L 1 10 L 11 15',\n        ...lineStyle({\n          fill: 'none',\n          stroke,\n          strokeWidth: 1.5,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: associationStart,\n        ref: { x: 1, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'association-end') {\n      var associationEnd = svgCreate('path', {\n        d: 'M 1 5 L 11 10 L 1 15',\n        ...lineStyle({\n          fill: 'none',\n          stroke,\n          strokeWidth: 1.5,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: associationEnd,\n        ref: { x: 11, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'conditional-flow-marker') {\n      var conditionalFlowMarker = svgCreate('path', {\n        d: 'M 0 10 L 8 6 L 16 10 L 8 14 Z',\n        ...shapeStyle({\n          fill,\n          stroke: stroke\n        })\n      });\n\n      addMarker(id, {\n        element: conditionalFlowMarker,\n        ref: { x: -1, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'conditional-default-flow-marker') {\n      var defaultFlowMarker = svgCreate('path', {\n        d: 'M 6 4 L 10 16',\n        ...shapeStyle({\n          stroke: stroke,\n          fill: 'none'\n        })\n      });\n\n      addMarker(id, {\n        element: defaultFlowMarker,\n        ref: { x: 0, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n  }\n\n  function drawCircle(parentGfx, width, height, offset, attrs = {}) {\n\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = shapeStyle(attrs);\n\n    var cx = width / 2,\n        cy = height / 2;\n\n    var circle = svgCreate('circle', {\n      cx: cx,\n      cy: cy,\n      r: Math.round((width + height) / 4 - offset),\n      ...attrs\n    });\n\n    svgAppend(parentGfx, circle);\n\n    return circle;\n  }\n\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\n\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = shapeStyle(attrs);\n\n    var rect = svgCreate('rect', {\n      x: offset,\n      y: offset,\n      width: width - offset * 2,\n      height: height - offset * 2,\n      rx: r,\n      ry: r,\n      ...attrs\n    });\n\n    svgAppend(parentGfx, rect);\n\n    return rect;\n  }\n\n  function drawDiamond(parentGfx, width, height, attrs) {\n\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n\n    var points = [\n      { x: x_2, y: 0 },\n      { x: width, y: y_2 },\n      { x: x_2, y: height },\n      { x: 0, y: y_2 }\n    ];\n\n    var pointsString = points.map(function(point) {\n      return point.x + ',' + point.y;\n    }).join(' ');\n\n    attrs = shapeStyle(attrs);\n\n    var polygon = svgCreate('polygon', {\n      ...attrs,\n      points: pointsString\n    });\n\n    svgAppend(parentGfx, polygon);\n\n    return polygon;\n  }\n\n  /**\n   * @param {SVGElement} parentGfx\n   * @param {Point[]} waypoints\n   * @param {any} attrs\n   * @param {number} [radius]\n   *\n   * @return {SVGElement}\n   */\n  function drawLine(parentGfx, waypoints, attrs, radius) {\n    attrs = lineStyle(attrs);\n\n    var line = createLine(waypoints, attrs, radius);\n\n    svgAppend(parentGfx, line);\n\n    return line;\n  }\n\n  /**\n   * @param {SVGElement} parentGfx\n   * @param {Point[]} waypoints\n   * @param {any} attrs\n   *\n   * @return {SVGElement}\n   */\n  function drawConnectionSegments(parentGfx, waypoints, attrs) {\n    return drawLine(parentGfx, waypoints, attrs, 5);\n  }\n\n  function drawPath(parentGfx, d, attrs) {\n    attrs = lineStyle(attrs);\n\n    var path = svgCreate('path', {\n      ...attrs,\n      d\n    });\n\n    svgAppend(parentGfx, path);\n\n    return path;\n  }\n\n  function drawMarker(type, parentGfx, path, attrs) {\n    return drawPath(parentGfx, path, assign({ 'data-marker': type }, attrs));\n  }\n\n  function renderer(type) {\n    return handlers[type];\n  }\n\n  function as(type) {\n    return function(parentGfx, element, attrs) {\n      return renderer(type)(parentGfx, element, attrs);\n    };\n  }\n\n  var eventIconRenderers = {\n    'bpmn:MessageEventDefinition': function(parentGfx, element, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n        : getFillColor(element, defaultFillColor, attrs.fill);\n\n      var stroke = isThrowing\n        ? getFillColor(element, defaultFillColor, attrs.fill)\n        : getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n      var messagePath = drawPath(parentGfx, pathData, {\n        fill,\n        stroke,\n        strokeWidth: 1\n      });\n\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function(parentGfx, element, attrs = {}) {\n      var circle = drawCircle(parentGfx, element.width, element.height, 0.2 * element.height, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2\n      });\n\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2\n      });\n\n      for (var i = 0; i < 12; i++) {\n        var linePathData = pathMap.getScaledPath('EVENT_TIMER_LINE', {\n          xScaleFactor: 0.75,\n          yScaleFactor: 0.75,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.5,\n            my: 0.5\n          }\n        });\n\n        var width = element.width / 2,\n            height = element.height / 2;\n\n        drawPath(parentGfx, linePathData, {\n          strokeWidth: 1,\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          transform: 'rotate(' + (i * 30) + ',' + height + ',' + width + ')'\n        });\n      }\n\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function(parentGfx, event, attrs = {}) {\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n\n      return drawPath(parentGfx, pathData, {\n        fill: getFillColor(event, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:LinkEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ErrorEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:CancelEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : 'none';\n\n      var path = drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      rotate(path, 45);\n\n      return path;\n    },\n    'bpmn:CompensateEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.22,\n          my: 0.5\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:SignalEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'bpmn:MultipleEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.222,\n          my: 0.36\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function(parentGfx, event, attrs = {}) {\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n\n      return drawPath(parentGfx, pathData, {\n        fill: getFillColor(event, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:TerminateEventDefinition': function(parentGfx, element, attrs = {}) {\n      var circle = drawCircle(parentGfx, element.width, element.height, 8, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 4\n      });\n\n      return circle;\n    }\n  };\n\n  function renderEventIcon(element, parentGfx, attrs = {}) {\n    var semantic = getSemantic(element),\n        isThrowing = isThrowEvent(semantic);\n\n    if (semantic.get('eventDefinitions') && semantic.get('eventDefinitions').length > 1) {\n      if (semantic.get('parallelMultiple')) {\n        return eventIconRenderers[ 'bpmn:ParallelMultipleEventDefinition' ](parentGfx, element, attrs, isThrowing);\n      }\n      else {\n        return eventIconRenderers[ 'bpmn:MultipleEventDefinition' ](parentGfx, element, attrs, isThrowing);\n      }\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:MessageEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:MessageEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:TimerEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:TimerEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:ConditionalEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:ConditionalEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:SignalEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:SignalEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:EscalationEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:EscalationEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:LinkEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:LinkEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:ErrorEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:ErrorEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:CancelEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:CancelEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:CompensateEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:CompensateEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:TerminateEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:TerminateEventDefinition' ](parentGfx, element, attrs, isThrowing);\n    }\n\n    return null;\n  }\n\n  var taskMarkerRenderers = {\n    'ParticipantMultiplicityMarker': function(parentGfx, element, attrs = {}) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 - 6) / width),\n          my: (height - 15) / height\n        }\n      });\n\n      drawMarker('participant-multiplicity', parentGfx, markerPath, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'SubProcessMarker': function(parentGfx, element, attrs = {}) {\n      var markerRect = drawRect(parentGfx, 14, 14, 0, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n\n      translate(markerRect, element.width / 2 - 7.5, element.height - 20);\n\n      var markerPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n\n      drawMarker('sub-process', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'ParallelMarker': function(parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 + attrs.parallel) / width),\n          my: (height - 20) / height\n        }\n      });\n\n      drawMarker('parallel', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'SequentialMarker': function(parentGfx, element, attrs) {\n      var markerPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + attrs.seq) / element.width),\n          my: (element.height - 19) / element.height\n        }\n      });\n\n      drawMarker('sequential', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'CompensationMarker': function(parentGfx, element, attrs) {\n      var markerMath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + attrs.compensation) / element.width),\n          my: (element.height - 13) / element.height\n        }\n      });\n\n      drawMarker('compensation', parentGfx, markerMath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'LoopMarker': function(parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 + attrs.loop) / width),\n          my: (height - 7) / height\n        }\n      });\n\n      drawMarker('loop', parentGfx, markerPath, {\n        strokeWidth: 1.5,\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function(parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 + attrs.adhoc) / width),\n          my: (height - 15) / height\n        }\n      });\n\n      drawMarker('adhoc', parentGfx, markerPath, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    }\n  };\n\n  function renderTaskMarker(type, parentGfx, element, attrs) {\n    taskMarkerRenderers[ type ](parentGfx, element, attrs);\n  }\n\n  function renderTaskMarkers(parentGfx, element, taskMarkers, attrs = {}) {\n    attrs = {\n      fill: attrs.fill,\n      stroke: attrs.stroke,\n      width: getWidth(element, attrs),\n      height: getHeight(element, attrs)\n    };\n\n    var semantic = getSemantic(element);\n\n    var subprocess = taskMarkers && taskMarkers.includes('SubProcessMarker');\n\n    if (subprocess) {\n      attrs = {\n        ...attrs,\n        seq: -21,\n        parallel: -22,\n        compensation: -42,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      attrs = {\n        ...attrs,\n        seq: -5,\n        parallel: -6,\n        compensation: -27,\n        loop: 0,\n        adhoc: 10\n      };\n    }\n\n    forEach(taskMarkers, function(marker) {\n      renderTaskMarker(marker, parentGfx, element, attrs);\n    });\n\n    if (semantic.get('isForCompensation')) {\n      renderTaskMarker('CompensationMarker', parentGfx, element, attrs);\n    }\n\n    if (is(semantic, 'bpmn:AdHocSubProcess')) {\n      renderTaskMarker('AdhocMarker', parentGfx, element, attrs);\n    }\n\n    var loopCharacteristics = semantic.get('loopCharacteristics'),\n        isSequential = loopCharacteristics && loopCharacteristics.get('isSequential');\n\n    if (loopCharacteristics) {\n\n      if (isSequential === undefined) {\n        renderTaskMarker('LoopMarker', parentGfx, element, attrs);\n      }\n\n      if (isSequential === false) {\n        renderTaskMarker('ParallelMarker', parentGfx, element, attrs);\n      }\n\n      if (isSequential === true) {\n        renderTaskMarker('SequentialMarker', parentGfx, element, attrs);\n      }\n    }\n  }\n\n  function renderLabel(parentGfx, label, attrs = {}) {\n    attrs = assign({\n      size: {\n        width: 100\n      }\n    }, attrs);\n\n    var text = textRenderer.createText(label || '', attrs);\n\n    svgClasses(text).add('djs-label');\n\n    svgAppend(parentGfx, text);\n\n    return text;\n  }\n\n  function renderEmbeddedLabel(parentGfx, element, align, attrs = {}) {\n    var semantic = getSemantic(element);\n\n    var box = getBounds({\n      x: element.x,\n      y: element.y,\n      width: element.width,\n      height: element.height\n    }, attrs);\n\n    return renderLabel(parentGfx, semantic.name, {\n      align,\n      box,\n      padding: 7,\n      style: {\n        fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n      }\n    });\n  }\n\n  function renderExternalLabel(parentGfx, element, attrs = {}) {\n    var box = {\n      width: 90,\n      height: 30,\n      x: element.width / 2 + element.x,\n      y: element.height / 2 + element.y\n    };\n\n    return renderLabel(parentGfx, getLabel(element), {\n      box: box,\n      fitBox: true,\n      style: assign(\n        {},\n        textRenderer.getExternalStyle(),\n        {\n          fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n        }\n      )\n    });\n  }\n\n  function renderLaneLabel(parentGfx, text, element, attrs = {}) {\n    var isHorizontalLane = isHorizontal(element);\n\n    var textBox = renderLabel(parentGfx, text, {\n      box: {\n        height: 30,\n        width: isHorizontalLane ? getHeight(element, attrs) : getWidth(element, attrs),\n      },\n      align: 'center-middle',\n      style: {\n        fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n      }\n    });\n\n    if (isHorizontalLane) {\n      var top = -1 * getHeight(element, attrs);\n      transform(textBox, 0, -top, 270);\n    }\n  }\n\n  function renderActivity(parentGfx, element, attrs = {}) {\n    var {\n      width,\n      height\n    } = getBounds(element, attrs);\n\n    return drawRect(parentGfx, width, height, TASK_BORDER_RADIUS, {\n      ...attrs,\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n\n  function renderAssociation(parentGfx, element, attrs = {}) {\n    var semantic = getSemantic(element);\n\n    var fill = getFillColor(element, defaultFillColor, attrs.fill),\n        stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n    if (semantic.get('associationDirection') === 'One' ||\n        semantic.get('associationDirection') === 'Both') {\n      attrs.markerEnd = marker(parentGfx, 'association-end', fill, stroke);\n    }\n\n    if (semantic.get('associationDirection') === 'Both') {\n      attrs.markerStart = marker(parentGfx, 'association-start', fill, stroke);\n    }\n\n    attrs = pickAttrs(attrs, [\n      'markerStart',\n      'markerEnd'\n    ]);\n\n    return drawConnectionSegments(parentGfx, element.waypoints, {\n      ...attrs,\n      stroke,\n      strokeDasharray: '0, 5'\n    });\n  }\n\n  function renderDataObject(parentGfx, element, attrs = {}) {\n    var fill = getFillColor(element, defaultFillColor, attrs.fill),\n        stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.474,\n        my: 0.296\n      }\n    });\n\n    var dataObject = drawPath(parentGfx, pathData, {\n      fill,\n      fillOpacity: DEFAULT_OPACITY,\n      stroke\n    });\n\n    var semantic = getSemantic(element);\n\n    if (isCollection(semantic)) {\n      var collectionPathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.33,\n          my: (element.height - 18) / element.height\n        }\n      });\n\n      drawPath(parentGfx, collectionPathData, {\n        strokeWidth: 2,\n        fill,\n        stroke\n      });\n    }\n\n    return dataObject;\n  }\n\n  function renderEvent(parentGfx, element, attrs = {}) {\n    return drawCircle(parentGfx, element.width, element.height, {\n      fillOpacity: DEFAULT_OPACITY,\n      ...attrs,\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n\n  function renderGateway(parentGfx, element, attrs = {}) {\n    return drawDiamond(parentGfx, element.width, element.height, {\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n\n  function renderLane(parentGfx, element, attrs = {}) {\n    var lane = drawRect(parentGfx, getWidth(element, attrs), getHeight(element, attrs), 0, {\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: attrs.fillOpacity || DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n      strokeWidth: 1.5\n    });\n\n    var semantic = getSemantic(element);\n\n    if (is(semantic, 'bpmn:Lane')) {\n      var text = semantic.get('name');\n\n      renderLaneLabel(parentGfx, text, element, attrs);\n    }\n\n    return lane;\n  }\n\n  function renderSubProcess(parentGfx, element, attrs = {}) {\n    var activity = renderActivity(parentGfx, element, attrs);\n\n    if (isEventSubProcess(element)) {\n      svgAttr(activity, {\n        strokeDasharray: '0, 5.5',\n        strokeWidth: 2.5\n      });\n    }\n\n    var expanded = isExpanded(element);\n\n    renderEmbeddedLabel(parentGfx, element, expanded ? 'center-top' : 'center-middle', attrs);\n\n    if (expanded) {\n      renderTaskMarkers(parentGfx, element, undefined, attrs);\n    } else {\n      renderTaskMarkers(parentGfx, element, [ 'SubProcessMarker' ], attrs);\n    }\n\n    return activity;\n  }\n\n  function renderTask(parentGfx, element, attrs = {}) {\n    var activity = renderActivity(parentGfx, element, attrs);\n\n    renderEmbeddedLabel(parentGfx, element, 'center-middle', attrs);\n\n    renderTaskMarkers(parentGfx, element, undefined, attrs);\n\n    return activity;\n  }\n\n  var handlers = this.handlers = {\n    'bpmn:AdHocSubProcess': function(parentGfx, element, attrs = {}) {\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke',\n          'width',\n          'height'\n        ]);\n      } else {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke'\n        ]);\n      }\n\n      return renderSubProcess(parentGfx, element, attrs);\n    },\n    'bpmn:Association': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderAssociation(parentGfx, element, attrs);\n    },\n    'bpmn:BoundaryEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element),\n          cancelActivity = semantic.get('cancelActivity');\n\n      attrs = {\n        strokeWidth: 1.5,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        fillOpacity: FULL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      };\n\n      if (!cancelActivity) {\n        attrs.strokeDasharray = '6';\n      }\n\n      var event = renderEvent(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        ...attrs,\n        fill: 'none'\n      });\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return event;\n    },\n    'bpmn:BusinessRuleTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessPath = drawPath(parentGfx, headerData);\n\n      svgAttr(businessPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessHeaderPath = drawPath(parentGfx, headerPathData);\n\n      svgAttr(businessHeaderPath, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:CallActivity': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderSubProcess(parentGfx, element, {\n        strokeWidth: 5,\n        ...attrs\n      });\n    },\n    'bpmn:ComplexGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var gateway = renderGateway(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor:0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return gateway;\n    },\n    'bpmn:DataInput': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      var dataObject = renderDataObject(parentGfx, element, attrs);\n\n      drawPath(parentGfx, arrowPathData, {\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return dataObject;\n    },\n    'bpmn:DataInputAssociation': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderAssociation(parentGfx, element, {\n        ...attrs,\n        markerEnd: marker(parentGfx, 'association-end', getFillColor(element, defaultFillColor, attrs.fill), getStrokeColor(element, defaultStrokeColor, attrs.stroke))\n      });\n    },\n    'bpmn:DataObject': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderDataObject(parentGfx, element, attrs);\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataOutput': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      var dataObject = renderDataObject(parentGfx, element, attrs);\n\n      drawPath(parentGfx, arrowPathData, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n\n      return dataObject;\n    },\n    'bpmn:DataOutputAssociation': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderAssociation(parentGfx, element, {\n        ...attrs,\n        markerEnd: marker(parentGfx, 'association-end', getFillColor(element, defaultFillColor, attrs.fill), getStrokeColor(element, defaultStrokeColor, attrs.stroke))\n      });\n    },\n    'bpmn:DataStoreReference': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var dataStorePath = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n\n      return drawPath(parentGfx, dataStorePath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        fillOpacity: DEFAULT_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2\n      });\n    },\n    'bpmn:EndEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var event = renderEvent(parentGfx, element, {\n        ...attrs,\n        strokeWidth: 4\n      });\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return event;\n    },\n    'bpmn:EventBasedGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element);\n\n      var diamond = renderGateway(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.20, {\n        fill: getFillColor(element, 'none', attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      var type = semantic.get('eventGatewayType'),\n          instantiate = !!semantic.get('instantiate');\n\n      function drawEvent() {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n\n        drawPath(parentGfx, pathData, {\n          fill: 'none',\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 2\n        });\n      }\n\n      if (type === 'Parallel') {\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor: 0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n\n        drawPath(parentGfx, pathData, {\n          fill: 'none',\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n      } else if (type === 'Exclusive') {\n        if (!instantiate) {\n          drawCircle(parentGfx, element.width, element.height, element.height * 0.26, {\n            fill: 'none',\n            stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n            strokeWidth: 1\n          });\n        }\n\n        drawEvent();\n      }\n\n\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var gateway = renderGateway(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n\n      var di = getDi(element);\n\n      if (di.get('isMarkerVisible')) {\n        drawPath(parentGfx, pathData, {\n          fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n      }\n\n      return gateway;\n    },\n    'bpmn:Gateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderGateway(parentGfx, element, attrs);\n    },\n    'bpmn:Group': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      return drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5,\n        strokeDasharray: '10, 6, 0, 6',\n        fill: 'none',\n        pointerEvents: 'none',\n        width: getWidth(element, attrs),\n        height: getHeight(element, attrs)\n      });\n    },\n    'bpmn:InclusiveGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var gateway = renderGateway(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.24, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2.5\n      });\n\n      return gateway;\n    },\n    'bpmn:IntermediateEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var outer = renderEvent(parentGfx, element, {\n        ...attrs,\n        strokeWidth: 1.5\n      });\n\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5\n      });\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:Lane': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      return renderLane(parentGfx, element, {\n        ...attrs,\n        fillOpacity: LOW_OPACITY\n      });\n    },\n    'bpmn:ManualTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      return task;\n    },\n    'bpmn:MessageFlow': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element),\n          di = getDi(element);\n\n      var fill = getFillColor(element, defaultFillColor, attrs.fill),\n          stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n      var path = drawConnectionSegments(parentGfx, element.waypoints, {\n        markerEnd: marker(parentGfx, 'messageflow-end', fill, stroke),\n        markerStart: marker(parentGfx, 'messageflow-start', fill, stroke),\n        stroke,\n        strokeDasharray: '10, 11',\n        strokeWidth: 1.5\n      });\n\n      if (semantic.get('messageRef')) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n\n        var messageAttrs = {\n          strokeWidth: 1\n        };\n\n        if (di.get('messageVisibleKind') === 'initiating') {\n          messageAttrs.fill = fill;\n          messageAttrs.stroke = stroke;\n        } else {\n          messageAttrs.fill = stroke;\n          messageAttrs.stroke = fill;\n        }\n\n        var message = drawPath(parentGfx, markerPathData, messageAttrs);\n\n        var messageRef = semantic.get('messageRef'),\n            name = messageRef.get('name');\n\n        var label = renderLabel(parentGfx, name, {\n          align: 'center-top',\n          fitBox: true,\n          style: {\n            fill: stroke\n          }\n        });\n\n        var messageBounds = message.getBBox(),\n            labelBounds = label.getBBox();\n\n        var translateX = midPoint.x - labelBounds.width / 2,\n            translateY = midPoint.y + messageBounds.height / 2 + ELEMENT_LABEL_DISTANCE;\n\n        transform(label, translateX, translateY, 0);\n      }\n\n      return path;\n    },\n    'bpmn:ParallelGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var diamond = renderGateway(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor: 0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return diamond;\n    },\n    'bpmn:Participant': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      var participant = renderLane(parentGfx, element, attrs);\n\n      var expandedParticipant = isExpanded(element);\n      var horizontalParticipant = isHorizontal(element);\n\n      var semantic = getSemantic(element),\n          name = semantic.get('name');\n\n      if (expandedParticipant) {\n        var waypoints = horizontalParticipant ? [\n          {\n            x: 30,\n            y: 0\n          },\n          {\n            x: 30,\n            y: getHeight(element, attrs)\n          }\n        ] : [\n          {\n            x: 0,\n            y: 30\n          },\n          {\n            x: getWidth(element, attrs),\n            y: 30\n          }\n        ];\n\n        drawLine(parentGfx, waypoints, {\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: PARTICIPANT_STROKE_WIDTH\n        });\n\n        renderLaneLabel(parentGfx, name, element, attrs);\n      } else {\n        var bounds = getBounds(element, attrs);\n\n        if (!horizontalParticipant) {\n          bounds.height = getWidth(element, attrs);\n          bounds.width = getHeight(element, attrs);\n        }\n\n        var textBox = renderLabel(parentGfx, name, {\n          box: bounds,\n          align: 'center-middle',\n          style: {\n            fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n          }\n        });\n\n        if (!horizontalParticipant) {\n          var top = -1 * getHeight(element, attrs);\n          transform(textBox, 0, -top, 270);\n        }\n      }\n\n      if (semantic.get('participantMultiplicity')) {\n        renderTaskMarker('ParticipantMultiplicityMarker', parentGfx, element, attrs);\n      }\n\n      return participant;\n    },\n    'bpmn:ReceiveTask' : function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData;\n\n      if (semantic.get('instantiate')) {\n        drawCircle(parentGfx, 28, 28, 20 * 0.22, {\n          fill: getFillColor(element, defaultFillColor, attrs.fill),\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:ScriptTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:SendTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getFillColor(element, defaultFillColor, attrs.fill),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:SequenceFlow': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var fill = getFillColor(element, defaultFillColor, attrs.fill),\n          stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n      var connection = drawConnectionSegments(parentGfx, element.waypoints, {\n        markerEnd: marker(parentGfx, 'sequenceflow-end', fill, stroke),\n        stroke\n      });\n\n      var semantic = getSemantic(element);\n\n      var { source } = element;\n\n      if (source) {\n        var sourceSemantic = getSemantic(source);\n\n        // conditional flow marker\n        if (semantic.get('conditionExpression') && is(sourceSemantic, 'bpmn:Activity')) {\n          svgAttr(connection, {\n            markerStart: marker(parentGfx, 'conditional-flow-marker', fill, stroke)\n          });\n        }\n\n        // default marker\n        if (sourceSemantic.get('default') && (is(sourceSemantic, 'bpmn:Gateway') || is(sourceSemantic, 'bpmn:Activity')) &&\n            sourceSemantic.get('default') === semantic) {\n          svgAttr(connection, {\n            markerStart: marker(parentGfx, 'conditional-default-flow-marker', fill, stroke)\n          });\n        }\n      }\n\n      return connection;\n    },\n    'bpmn:ServiceTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, 10, 10, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: 'none',\n        transform: 'translate(6, 6)'\n      });\n\n      var pathDataService1 = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n\n      drawPath(parentGfx, pathDataService1, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      drawCircle(parentGfx, 10, 10, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: 'none',\n        transform: 'translate(11, 10)'\n      });\n\n      var pathDataService2 = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n\n      drawPath(parentGfx, pathDataService2, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:StartEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element);\n\n      if (!semantic.get('isInterrupting')) {\n        attrs = {\n          ...attrs,\n          strokeDasharray: '6'\n        };\n      }\n\n      var event = renderEvent(parentGfx, element, attrs);\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return event;\n    },\n    'bpmn:SubProcess': function(parentGfx, element, attrs = {}) {\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke',\n          'width',\n          'height'\n        ]);\n      } else {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke'\n        ]);\n      }\n\n      return renderSubProcess(parentGfx, element, attrs);\n    },\n    'bpmn:Task': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderTask(parentGfx, element, attrs);\n    },\n    'bpmn:TextAnnotation': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      var {\n        width,\n        height\n      } = getBounds(element, attrs);\n\n      var textElement = drawRect(parentGfx, width, height, 0, 0, {\n        fill: 'none',\n        stroke: 'none'\n      });\n\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n\n      drawPath(parentGfx, textPathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n\n      var semantic = getSemantic(element),\n          text = semantic.get('text') || '';\n\n      renderLabel(parentGfx, text, {\n        align: 'left-top',\n        box: getBounds(element, attrs),\n        padding: 7,\n        style: {\n          fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n        }\n      });\n\n      return textElement;\n    },\n    'bpmn:Transaction': function(parentGfx, element, attrs = {}) {\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke',\n          'width',\n          'height'\n        ]);\n      } else {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke'\n        ]);\n      }\n\n      var outer = renderSubProcess(parentGfx, element, {\n        strokeWidth: 1.5,\n        ...attrs\n      });\n\n      var innerAttrs = styles.style([ 'no-fill', 'no-events' ], {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5\n      });\n\n      var expanded = isExpanded(element);\n\n      if (!expanded) {\n        attrs = {};\n      }\n\n      drawRect(\n        parentGfx,\n        getWidth(element, attrs),\n        getHeight(element, attrs),\n        TASK_BORDER_RADIUS - INNER_OUTER_DIST,\n        INNER_OUTER_DIST,\n        innerAttrs\n      );\n\n      return outer;\n    },\n    'bpmn:UserTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var x = 15;\n      var y = 12;\n\n      var pathDataUser1 = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      drawPath(parentGfx, pathDataUser1, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      var pathDataUser2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      drawPath(parentGfx, pathDataUser2, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      var pathDataUser3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      drawPath(parentGfx, pathDataUser3, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      return task;\n    },\n    'label': function(parentGfx, element, attrs = {}) {\n      return renderExternalLabel(parentGfx, element, attrs);\n    }\n  };\n\n  // extension API, use at your own risk\n  this._drawPath = drawPath;\n\n  this._renderer = renderer;\n}\n\n\ninherits(BpmnRenderer, BaseRenderer);\n\nBpmnRenderer.$inject = [\n  'config.bpmnRenderer',\n  'eventBus',\n  'styles',\n  'pathMap',\n  'canvas',\n  'textRenderer'\n];\n\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nBpmnRenderer.prototype.canRender = function(element) {\n  return is(element, 'bpmn:BaseElement');\n};\n\n/**\n * Draw shape into parentGfx.\n *\n * @param {SVGElement} parentGfx\n * @param {Shape} shape\n * @param {Attrs} [attrs]\n *\n * @return {SVGElement} mainGfx\n */\nBpmnRenderer.prototype.drawShape = function(parentGfx, shape, attrs = {}) {\n  var { type } = shape;\n\n  var handler = this._renderer(type);\n\n  return handler(parentGfx, shape, attrs);\n};\n\n/**\n * Draw connection into parentGfx.\n *\n * @param {SVGElement} parentGfx\n * @param {Connection} connection\n * @param {Attrs} [attrs]\n *\n * @return {SVGElement} mainGfx\n */\nBpmnRenderer.prototype.drawConnection = function(parentGfx, connection, attrs = {}) {\n  var { type } = connection;\n\n  var handler = this._renderer(type);\n\n  return handler(parentGfx, connection, attrs);\n};\n\n/**\n * Get shape path.\n *\n * @param {Shape} shape\n *\n * @return {string} path\n */\nBpmnRenderer.prototype.getShapePath = function(shape) {\n  if (is(shape, 'bpmn:Event')) {\n    return getCirclePath(shape);\n  }\n\n  if (is(shape, 'bpmn:Activity')) {\n    return getRoundRectPath(shape, TASK_BORDER_RADIUS);\n  }\n\n  if (is(shape, 'bpmn:Gateway')) {\n    return getDiamondPath(shape);\n  }\n\n  return getRectPath(shape);\n};\n\n/**\n * Pick attributes if they exist.\n *\n * @param {Object} attrs\n * @param {string[]} keys\n *\n * @returns {Object}\n */\nfunction pickAttrs(attrs, keys = []) {\n  return keys.reduce((pickedAttrs, key) => {\n    if (attrs[ key ]) {\n      pickedAttrs[ key ] = attrs[ key ];\n    }\n\n    return pickedAttrs;\n  }, {});\n}","import {\n  isObject,\n  assign,\n  forEach,\n  reduce\n} from 'min-dash';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  assignStyle\n} from 'min-dom';\n\n\n/**\n * @typedef {import('../util/Types').Dimensions} Dimensions\n *\n * @typedef { {\n *   top: number;\n *   left: number;\n *   right: number;\n *   bottom: number;\n * } } Padding\n *\n * @typedef { number | Partial<Padding> } PaddingConfig\n *\n * @typedef { {\n *   horizontal: 'center' | 'left' | 'right';\n *   vertical: 'top' | 'middle';\n * } } Alignment\n *\n *  @typedef { 'center-middle' | 'center-top' } AlignmentConfig\n *\n * @typedef { Partial<{\n *   align: AlignmentConfig;\n *   style: Record<string, number | string>;\n *   padding: PaddingConfig;\n * }> } BaseTextConfig\n *\n * @typedef { BaseTextConfig & Partial<{\n *   size: Dimensions;\n * }> } TextConfig\n *\n * @typedef { BaseTextConfig & Partial<{\n *   box: Dimensions;\n *   fitBox: boolean;\n * }> } TextLayoutConfig\n *\n *  @typedef { Dimensions & {\n *  text: string;\n * } } LineDescriptor\n */\n\nvar DEFAULT_BOX_PADDING = 0;\n\nvar DEFAULT_LABEL_SIZE = {\n  width: 150,\n  height: 50\n};\n\n\n/**\n * @param {AlignmentConfig} align\n * @return {Alignment}\n */\nfunction parseAlign(align) {\n\n  var parts = align.split('-');\n\n  return {\n    horizontal: parts[0] || 'center',\n    vertical: parts[1] || 'top'\n  };\n}\n\n/**\n * @param {PaddingConfig} padding\n *\n * @return {Padding}\n */\nfunction parsePadding(padding) {\n\n  if (isObject(padding)) {\n    return assign({ top: 0, left: 0, right: 0, bottom: 0 }, padding);\n  } else {\n    return {\n      top: padding,\n      left: padding,\n      right: padding,\n      bottom: padding\n    };\n  }\n}\n\n/**\n * @param {string} text\n * @param {SVGTextElement} fakeText\n *\n * @return {import('../util/Types').Dimensions}\n */\nfunction getTextBBox(text, fakeText) {\n\n  fakeText.textContent = text;\n\n  var textBBox;\n\n  try {\n    var bbox,\n        emptyLine = text === '';\n\n    // add dummy text, when line is empty to\n    // determine correct height\n    fakeText.textContent = emptyLine ? 'dummy' : text;\n\n    textBBox = fakeText.getBBox();\n\n    // take text rendering related horizontal\n    // padding into account\n    bbox = {\n      width: textBBox.width + textBBox.x * 2,\n      height: textBBox.height\n    };\n\n    if (emptyLine) {\n\n      // correct width\n      bbox.width = 0;\n    }\n\n    return bbox;\n  } catch (e) {\n    return { width: 0, height: 0 };\n  }\n}\n\n\n/**\n * Layout the next line and return the layouted element.\n *\n * Alters the lines passed.\n *\n * @param {string[]} lines\n * @param {number} maxWidth\n * @param {SVGTextElement} fakeText\n *\n * @return {LineDescriptor} the line descriptor\n */\nfunction layoutNext(lines, maxWidth, fakeText) {\n\n  var originalLine = lines.shift(),\n      fitLine = originalLine;\n\n  var textBBox;\n\n  for (;;) {\n    textBBox = getTextBBox(fitLine, fakeText);\n\n    textBBox.width = fitLine ? textBBox.width : 0;\n\n    // try to fit\n    if (fitLine === ' ' || fitLine === '' || textBBox.width < Math.round(maxWidth) || fitLine.length < 2) {\n      return fit(lines, fitLine, originalLine, textBBox);\n    }\n\n    fitLine = shortenLine(fitLine, textBBox.width, maxWidth);\n  }\n}\n\n/**\n * @param {string[]} lines\n * @param {string} fitLine\n * @param {string} originalLine\n * @param {Dimensions} textBBox\n *\n * @return {LineDescriptor}\n */\nfunction fit(lines, fitLine, originalLine, textBBox) {\n  if (fitLine.length < originalLine.length) {\n    var remainder = originalLine.slice(fitLine.length).trim();\n\n    lines.unshift(remainder);\n  }\n\n  return {\n    width: textBBox.width,\n    height: textBBox.height,\n    text: fitLine\n  };\n}\n\nvar SOFT_BREAK = '\\u00AD';\n\n\n/**\n * Shortens a line based on spacing and hyphens.\n * Returns the shortened result on success.\n *\n * @param {string} line\n * @param {number} maxLength the maximum characters of the string\n *\n * @return {string} the shortened string\n */\nfunction semanticShorten(line, maxLength) {\n\n  var parts = line.split(/(\\s|-|\\u00AD)/g),\n      part,\n      shortenedParts = [],\n      length = 0;\n\n  // try to shorten via break chars\n  if (parts.length > 1) {\n\n    while ((part = parts.shift())) {\n      if (part.length + length < maxLength) {\n        shortenedParts.push(part);\n        length += part.length;\n      } else {\n\n        // remove previous part, too if hyphen does not fit anymore\n        if (part === '-' || part === SOFT_BREAK) {\n          shortenedParts.pop();\n        }\n\n        break;\n      }\n    }\n  }\n\n  var last = shortenedParts[shortenedParts.length - 1];\n\n  // translate trailing soft break to actual hyphen\n  if (last && last === SOFT_BREAK) {\n    shortenedParts[shortenedParts.length - 1] = '-';\n  }\n\n  return shortenedParts.join('');\n}\n\n\n/**\n * @param {string} line\n * @param {number} width\n * @param {number} maxWidth\n *\n * @return {string}\n */\nfunction shortenLine(line, width, maxWidth) {\n  var length = Math.max(line.length * (maxWidth / width), 1);\n\n  // try to shorten semantically (i.e. based on spaces and hyphens)\n  var shortenedLine = semanticShorten(line, length);\n\n  if (!shortenedLine) {\n\n    // force shorten by cutting the long word\n    shortenedLine = line.slice(0, Math.max(Math.round(length - 1), 1));\n  }\n\n  return shortenedLine;\n}\n\n\n/**\n * @return {SVGSVGElement}\n */\nfunction getHelperSvg() {\n  var helperSvg = document.getElementById('helper-svg');\n\n  if (!helperSvg) {\n    helperSvg = svgCreate('svg');\n\n    svgAttr(helperSvg, {\n      id: 'helper-svg'\n    });\n\n    assignStyle(helperSvg, {\n      visibility: 'hidden',\n      position: 'fixed',\n      width: 0,\n      height: 0\n    });\n\n    document.body.appendChild(helperSvg);\n  }\n\n  return helperSvg;\n}\n\n\n/**\n * Creates a new label utility\n *\n * @param {TextConfig} [config]\n */\nexport default function Text(config) {\n\n  this._config = assign({}, {\n    size: DEFAULT_LABEL_SIZE,\n    padding: DEFAULT_BOX_PADDING,\n    style: {},\n    align: 'center-top'\n  }, config || {});\n}\n\n/**\n * Returns the layouted text as an SVG element.\n *\n * @param {string} text\n * @param {TextLayoutConfig} options\n *\n * @return {SVGElement}\n */\nText.prototype.createText = function(text, options) {\n  return this.layoutText(text, options).element;\n};\n\n/**\n * Returns a labels layouted dimensions.\n *\n * @param {string} text to layout\n * @param {TextLayoutConfig} options\n *\n * @return {Dimensions}\n */\nText.prototype.getDimensions = function(text, options) {\n  return this.layoutText(text, options).dimensions;\n};\n\n/**\n * Creates and returns a label and its bounding box.\n *\n * @param {string} text the text to render on the label\n * @param {TextLayoutConfig} options\n *\n * @return { {\n *   element: SVGElement,\n *   dimensions: Dimensions\n * } }\n */\nText.prototype.layoutText = function(text, options) {\n  var box = assign({}, this._config.size, options.box),\n      style = assign({}, this._config.style, options.style),\n      align = parseAlign(options.align || this._config.align),\n      padding = parsePadding(options.padding !== undefined ? options.padding : this._config.padding),\n      fitBox = options.fitBox || false;\n\n  var lineHeight = getLineHeight(style);\n\n  // we split text by lines and normalize\n  // {soft break} + {line break} => { line break }\n  var lines = text.split(/\\u00AD?\\r?\\n/),\n      layouted = [];\n\n  var maxWidth = box.width - padding.left - padding.right;\n\n  // ensure correct rendering by attaching helper text node to invisible SVG\n  var helperText = svgCreate('text');\n  svgAttr(helperText, { x: 0, y: 0 });\n  svgAttr(helperText, style);\n\n  var helperSvg = getHelperSvg();\n\n  svgAppend(helperSvg, helperText);\n\n  while (lines.length) {\n    layouted.push(layoutNext(lines, maxWidth, helperText));\n  }\n\n  if (align.vertical === 'middle') {\n    padding.top = padding.bottom = 0;\n  }\n\n  var totalHeight = reduce(layouted, function(sum, line, idx) {\n    return sum + (lineHeight || line.height);\n  }, 0) + padding.top + padding.bottom;\n\n  var maxLineWidth = reduce(layouted, function(sum, line, idx) {\n    return line.width > sum ? line.width : sum;\n  }, 0);\n\n  // the y position of the next line\n  var y = padding.top;\n\n  if (align.vertical === 'middle') {\n    y += (box.height - totalHeight) / 2;\n  }\n\n  // magic number initial offset\n  y -= (lineHeight || layouted[0].height) / 4;\n\n\n  var textElement = svgCreate('text');\n\n  svgAttr(textElement, style);\n\n  // layout each line taking into account that parent\n  // shape might resize to fit text size\n  forEach(layouted, function(line) {\n\n    var x;\n\n    y += (lineHeight || line.height);\n\n    switch (align.horizontal) {\n    case 'left':\n      x = padding.left;\n      break;\n\n    case 'right':\n      x = ((fitBox ? maxLineWidth : maxWidth)\n        - padding.right - line.width);\n      break;\n\n    default:\n\n      // aka center\n      x = Math.max((((fitBox ? maxLineWidth : maxWidth)\n        - line.width) / 2 + padding.left), 0);\n    }\n\n    var tspan = svgCreate('tspan');\n    svgAttr(tspan, { x: x, y: y });\n\n    tspan.textContent = line.text;\n\n    svgAppend(textElement, tspan);\n  });\n\n  svgRemove(helperText);\n\n  var dimensions = {\n    width: maxLineWidth,\n    height: totalHeight\n  };\n\n  return {\n    dimensions: dimensions,\n    element: textElement\n  };\n};\n\n\nfunction getLineHeight(style) {\n  if ('fontSize' in style && 'lineHeight' in style) {\n    return style.lineHeight * parseInt(style.fontSize, 10);\n  }\n}\n","import { assign } from 'min-dash';\n\nimport TextUtil from 'diagram-js/lib/util/Text';\n\nvar DEFAULT_FONT_SIZE = 12;\nvar LINE_HEIGHT_RATIO = 1.2;\n\nvar MIN_TEXT_ANNOTATION_HEIGHT = 30;\n\n/**\n * @typedef { {\n *   fontFamily: string;\n *   fontSize: number;\n *   fontWeight: string;\n *   lineHeight: number;\n * } } TextRendererStyle\n *\n * @typedef { {\n *   defaultStyle?: Partial<TextRendererStyle>;\n *   externalStyle?: Partial<TextRendererStyle>;\n * } } TextRendererConfig\n *\n * @typedef { import('diagram-js/lib/util/Text').TextLayoutConfig } TextLayoutConfig\n *\n * @typedef { import('diagram-js/lib/util/Types').Rect } Rect\n */\n\n\n/**\n * Renders text and computes text bounding boxes.\n *\n * @param {TextRendererConfig} [config]\n */\nexport default function TextRenderer(config) {\n\n  var defaultStyle = assign({\n    fontFamily: 'Arial, sans-serif',\n    fontSize: DEFAULT_FONT_SIZE,\n    fontWeight: 'normal',\n    lineHeight: LINE_HEIGHT_RATIO\n  }, config && config.defaultStyle || {});\n\n  var fontSize = parseInt(defaultStyle.fontSize, 10) - 1;\n\n  var externalStyle = assign({}, defaultStyle, {\n    fontSize: fontSize\n  }, config && config.externalStyle || {});\n\n  var textUtil = new TextUtil({\n    style: defaultStyle\n  });\n\n  /**\n   * Get the new bounds of an externally rendered,\n   * layouted label.\n   *\n   * @param {Rect} bounds\n   * @param {string} text\n   *\n   * @return {Rect}\n   */\n  this.getExternalLabelBounds = function(bounds, text) {\n\n    var layoutedDimensions = textUtil.getDimensions(text, {\n      box: {\n        width: 90,\n        height: 30\n      },\n      style: externalStyle\n    });\n\n    // resize label shape to fit label text\n    return {\n      x: Math.round(bounds.x + bounds.width / 2 - layoutedDimensions.width / 2),\n      y: Math.round(bounds.y),\n      width: Math.ceil(layoutedDimensions.width),\n      height: Math.ceil(layoutedDimensions.height)\n    };\n\n  };\n\n  /**\n   * Get the new bounds of text annotation.\n   *\n   * @param {Rect} bounds\n   * @param {string} text\n   *\n   * @return {Rect}\n   */\n  this.getTextAnnotationBounds = function(bounds, text) {\n\n    var layoutedDimensions = textUtil.getDimensions(text, {\n      box: bounds,\n      style: defaultStyle,\n      align: 'left-top',\n      padding: 5\n    });\n\n    return {\n      x: bounds.x,\n      y: bounds.y,\n      width: bounds.width,\n      height: Math.max(MIN_TEXT_ANNOTATION_HEIGHT, Math.round(layoutedDimensions.height))\n    };\n  };\n\n  /**\n   * Create a layouted text element.\n   *\n   * @param {string} text\n   * @param {TextLayoutConfig} [options]\n   *\n   * @return {SVGElement} rendered text\n   */\n  this.createText = function(text, options) {\n    return textUtil.createText(text, options || {});\n  };\n\n  /**\n   * Get default text style.\n   */\n  this.getDefaultStyle = function() {\n    return defaultStyle;\n  };\n\n  /**\n   * Get the external text style.\n   */\n  this.getExternalStyle = function() {\n    return externalStyle;\n  };\n\n}\n\nTextRenderer.$inject = [\n  'config.textRenderer'\n];","/**\n * Map containing SVG paths needed by BpmnRenderer\n */\nexport default function PathMap() {\n\n  /**\n   * Contains a map of path elements\n   *\n   * <h1>Path definition</h1>\n   * A parameterized path is defined like this:\n   * <pre>\n   * 'GATEWAY_PARALLEL': {\n   *   d: 'm {mx},{my} {e.x0},0 0,{e.x1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n          '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n   *   height: 17.5,\n   *   width:  17.5,\n   *   heightElements: [2.5, 7.5],\n   *   widthElements: [2.5, 7.5]\n   * }\n   * </pre>\n   * <p>It's important to specify a correct <b>height and width</b> for the path as the scaling\n   * is based on the ratio between the specified height and width in this object and the\n   * height and width that is set as scale target (Note x,y coordinates will be scaled with\n   * individual ratios).</p>\n   * <p>The '<b>heightElements</b>' and '<b>widthElements</b>' array must contain the values that will be scaled.\n   * The scaling is based on the computed ratios.\n   * Coordinates on the y axis should be in the <b>heightElement</b>'s array, they will be scaled using\n   * the computed ratio coefficient.\n   * In the parameterized path the scaled values can be accessed through the 'e' object in {} brackets.\n   *   <ul>\n   *    <li>The values for the y axis can be accessed in the path string using {e.y0}, {e.y1}, ....</li>\n   *    <li>The values for the x axis can be accessed in the path string using {e.x0}, {e.x1}, ....</li>\n   *   </ul>\n   *   The numbers x0, x1 respectively y0, y1, ... map to the corresponding array index.\n   * </p>\n   */\n  this.pathMap = {\n    'EVENT_MESSAGE': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 36,\n      width:  36,\n      heightElements: [ 6, 14 ],\n      widthElements: [ 10.5, 21 ]\n    },\n    'EVENT_SIGNAL': {\n      d: 'M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z',\n      height: 36,\n      width: 36,\n      heightElements: [ 18 ],\n      widthElements: [ 10, 20 ]\n    },\n    'EVENT_ESCALATION': {\n      d: 'M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z',\n      height: 36,\n      width: 36,\n      heightElements: [ 20, 7 ],\n      widthElements: [ 8 ]\n    },\n    'EVENT_CONDITIONAL': {\n      d: 'M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z ' +\n         'M {e.x2},{e.y3} l {e.x0},0 ' +\n         'M {e.x2},{e.y4} l {e.x0},0 ' +\n         'M {e.x2},{e.y5} l {e.x0},0 ' +\n         'M {e.x2},{e.y6} l {e.x0},0 ' +\n         'M {e.x2},{e.y7} l {e.x0},0 ' +\n         'M {e.x2},{e.y8} l {e.x0},0 ',\n      height: 36,\n      width:  36,\n      heightElements: [ 8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5 ],\n      widthElements:  [ 10.5, 14.5, 12.5 ]\n    },\n    'EVENT_LINK': {\n      d: 'm {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z',\n      height: 36,\n      width: 36,\n      heightElements: [ 4.4375, 6.75, 7.8125 ],\n      widthElements: [ 9.84375, 13.5 ]\n    },\n    'EVENT_ERROR': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z',\n      height: 36,\n      width: 36,\n      heightElements: [ 0.023, 8.737, 8.151, 16.564, 10.591, 8.714 ],\n      widthElements: [ 0.085, 6.672, 6.97, 4.273, 5.337, 6.636 ]\n    },\n    'EVENT_CANCEL_45': {\n      d: 'm {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 36,\n      width: 36,\n      heightElements: [ 4.75, 8.5 ],\n      widthElements: [ 4.75, 8.5 ]\n    },\n    'EVENT_COMPENSATION': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z',\n      height: 36,\n      width: 36,\n      heightElements: [ 6.5, 13, 0.4, 6.1 ],\n      widthElements: [ 9, 9.3, 8.7 ]\n    },\n    'EVENT_TIMER_WH': {\n      d: 'M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ',\n      height: 36,\n      width:  36,\n      heightElements: [ 10, 2 ],\n      widthElements: [ 3, 7 ]\n    },\n    'EVENT_TIMER_LINE': {\n      d:  'M {mx},{my} ' +\n          'm {e.x0},{e.y0} l -{e.x1},{e.y1} ',\n      height: 36,\n      width:  36,\n      heightElements: [ 10, 3 ],\n      widthElements: [ 0, 0 ]\n    },\n    'EVENT_MULTIPLE': {\n      d:'m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [ 6.28099, 12.56199 ],\n      widthElements: [ 3.1405, 9.42149, 12.56198 ]\n    },\n    'EVENT_PARALLEL_MULTIPLE': {\n      d:'m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n        '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [ 2.56228, 7.68683 ],\n      widthElements: [ 2.56228, 7.68683 ]\n    },\n    'GATEWAY_EXCLUSIVE': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} ' +\n                    '{e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} ' +\n                    '{e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z',\n      height: 17.5,\n      width:  17.5,\n      heightElements: [ 8.5, 6.5312, -6.5312, -8.5 ],\n      widthElements:  [ 6.5, -6.5, 3, -3, 5, -5 ]\n    },\n    'GATEWAY_PARALLEL': {\n      d:'m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 30,\n      width:  30,\n      heightElements: [ 5, 12.5 ],\n      widthElements: [ 5, 12.5 ]\n    },\n    'GATEWAY_EVENT_BASED': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z',\n      height: 11,\n      width:  11,\n      heightElements: [ -6, 6, 12, -12 ],\n      widthElements: [ 9, -3, -12 ]\n    },\n    'GATEWAY_COMPLEX': {\n      d:'m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} ' +\n        '{e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} ' +\n        '{e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} ' +\n        '-{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z',\n      height: 17.125,\n      width:  17.125,\n      heightElements: [ 4.875, 3.4375, 2.125, 3 ],\n      widthElements: [ 3.4375, 2.125, 4.875, 3 ]\n    },\n    'DATA_OBJECT_PATH': {\n      d:'m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0',\n      height: 61,\n      width:  51,\n      heightElements: [ 10, 50, 60 ],\n      widthElements: [ 10, 40, 50, 60 ]\n    },\n    'DATA_OBJECT_COLLECTION_PATH': {\n      d: 'm{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'DATA_ARROW': {\n      d:'m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z',\n      height: 61,\n      width:  51,\n      heightElements: [],\n      widthElements: []\n    },\n    'DATA_STORE': {\n      d:'m  {mx},{my} ' +\n        'l  0,{e.y2} ' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'l  0,-{e.y2} ' +\n        'c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0',\n      height: 61,\n      width:  61,\n      heightElements: [ 7, 10, 45 ],\n      widthElements:  [ 2, 58, 60 ]\n    },\n    'TEXT_ANNOTATION': {\n      d: 'm {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0',\n      height: 30,\n      width: 10,\n      heightElements: [ 30 ],\n      widthElements: [ 10 ]\n    },\n    'MARKER_SUB_PROCESS': {\n      d: 'm{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_PARALLEL': {\n      d: 'm{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_SEQUENTIAL': {\n      d: 'm{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_COMPENSATION': {\n      d: 'm {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z',\n      height: 10,\n      width: 21,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_LOOP': {\n      d: 'm {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 ' +\n        '-6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 ' +\n        '0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 ' +\n        'l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902',\n      height: 13.9,\n      width: 13.7,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_ADHOC': {\n      d: 'm {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 ' +\n        '3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 ' +\n        '1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 ' +\n        '-3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 ' +\n        '-2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z',\n      height: 4,\n      width: 15,\n      heightElements: [],\n      widthElements: []\n    },\n    'TASK_TYPE_SEND': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 14,\n      width:  21,\n      heightElements: [ 6, 14 ],\n      widthElements: [ 10.5, 21 ]\n    },\n    'TASK_TYPE_SCRIPT': {\n      d: 'm {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 ' +\n        'c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z ' +\n        'm -7,-12 l 5,0 ' +\n        'm -4.5,3 l 4.5,0 ' +\n        'm -3,3 l 5,0' +\n        'm -4,3 l 5,0',\n      height: 15,\n      width:  12.6,\n      heightElements: [ 6, 14 ],\n      widthElements: [ 10.5, 21 ]\n    },\n    'TASK_TYPE_USER_1': {\n      d: 'm {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 ' +\n        '-4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 ' +\n        '0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 ' +\n        'h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 z' +\n        'm -8,6 l 0,5.5 m 11,0 l 0,-5'\n    },\n    'TASK_TYPE_USER_2': {\n      d: 'm {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 ' +\n        '-2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 '\n    },\n    'TASK_TYPE_USER_3': {\n      d: 'm {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 ' +\n        '4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 ' +\n        '-4.20799998,3.36699999 -4.20699998,4.34799999 z'\n    },\n    'TASK_TYPE_MANUAL': {\n      d: 'm {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 ' +\n        '-0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 ' +\n        '0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 ' +\n        '-1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 ' +\n        '0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 ' +\n        '-10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 ' +\n        '2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 ' +\n        '-0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 ' +\n        '-1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 ' +\n        '-0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 ' +\n        '0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 ' +\n        '-5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z'\n    },\n    'TASK_TYPE_INSTANTIATING_SEND': {\n      d: 'm {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6'\n    },\n    'TASK_TYPE_SERVICE': {\n      d: 'm {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 ' +\n        '0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 ' +\n        '-1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 ' +\n        'v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 ' +\n        '-0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 ' +\n        '-1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 ' +\n        'h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 ' +\n        '-0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 ' +\n        'c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 ' +\n        'l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 ' +\n        '0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 ' +\n        'c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z ' +\n        'm 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_SERVICE_FILL': {\n      d: 'm {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_HEADER': {\n      d: 'm {mx},{my} 0,4 20,0 0,-4 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_MAIN': {\n      d: 'm {mx},{my} 0,12 20,0 0,-12 z' +\n        'm 0,8 l 20,0 ' +\n        'm -13,-4 l 0,8'\n    },\n    'MESSAGE_FLOW_MARKER': {\n      d: 'm {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6'\n    }\n  };\n\n  /**\n   * Return raw path for the given ID.\n   *\n   * @param {string} pathId\n   *\n   * @return {string} raw path\n   */\n  this.getRawPath = function getRawPath(pathId) {\n    return this.pathMap[pathId].d;\n  };\n\n  /**\n   * Scales the path to the given height and width.\n   * <h1>Use case</h1>\n   * <p>Use case is to scale the content of elements (event, gateways) based\n   * on the element bounding box's size.\n   * </p>\n   * <h1>Why not transform</h1>\n   * <p>Scaling a path with transform() will also scale the stroke and IE does not support\n   * the option 'non-scaling-stroke' to prevent this.\n   * Also there are use cases where only some parts of a path should be\n   * scaled.</p>\n   *\n   * @param {string} pathId The ID of the path.\n   * @param {Object} param <p>\n   *   Example param object scales the path to 60% size of the container (data.width, data.height).\n   *   <pre>\n   *   {\n   *     xScaleFactor: 0.6,\n   *     yScaleFactor:0.6,\n   *     containerWidth: data.width,\n   *     containerHeight: data.height,\n   *     position: {\n   *       mx: 0.46,\n   *       my: 0.2,\n   *     }\n   *   }\n   *   </pre>\n   *   <ul>\n   *    <li>targetpathwidth = xScaleFactor * containerWidth</li>\n   *    <li>targetpathheight = yScaleFactor * containerHeight</li>\n   *    <li>Position is used to set the starting coordinate of the path. M is computed:\n    *    <ul>\n    *      <li>position.x * containerWidth</li>\n    *      <li>position.y * containerHeight</li>\n    *    </ul>\n    *    Center of the container <pre> position: {\n   *       mx: 0.5,\n   *       my: 0.5,\n   *     }</pre>\n   *     Upper left corner of the container\n   *     <pre> position: {\n   *       mx: 0.0,\n   *       my: 0.0,\n   *     }</pre>\n   *    </li>\n   *   </ul>\n   * </p>\n   *\n   * @return {string} scaled path\n   */\n  this.getScaledPath = function getScaledPath(pathId, param) {\n    var rawPath = this.pathMap[pathId];\n\n    // positioning\n    // compute the start point of the path\n    var mx, my;\n\n    if (param.abspos) {\n      mx = param.abspos.x;\n      my = param.abspos.y;\n    } else {\n      mx = param.containerWidth * param.position.mx;\n      my = param.containerHeight * param.position.my;\n    }\n\n    var coordinates = {}; // map for the scaled coordinates\n    if (param.position) {\n\n      // path\n      var heightRatio = (param.containerHeight / rawPath.height) * param.yScaleFactor;\n      var widthRatio = (param.containerWidth / rawPath.width) * param.xScaleFactor;\n\n\n      // Apply height ratio\n      for (var heightIndex = 0; heightIndex < rawPath.heightElements.length; heightIndex++) {\n        coordinates['y' + heightIndex] = rawPath.heightElements[heightIndex] * heightRatio;\n      }\n\n      // Apply width ratio\n      for (var widthIndex = 0; widthIndex < rawPath.widthElements.length; widthIndex++) {\n        coordinates['x' + widthIndex] = rawPath.widthElements[widthIndex] * widthRatio;\n      }\n    }\n\n    // Apply value to raw path\n    var path = format(\n      rawPath.d, {\n        mx: mx,\n        my: my,\n        e: coordinates\n      }\n    );\n    return path;\n  };\n}\n\n// helpers //////////////////////\n\n// copied and adjusted from https://github.com/adobe-webplatform/Snap.svg/blob/master/src/svg.js\nvar tokenRegex = /\\{([^{}]+)\\}/g,\n    objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|\")(.+?)\\2\\])(\\(\\))?/g; // matches .xxxxx or [\"xxxxx\"] to run over object properties\n\nfunction replacer(all, key, obj) {\n  var res = obj;\n  key.replace(objNotationRegex, function(all, name, quote, quotedName, isFunc) {\n    name = name || quotedName;\n    if (res) {\n      if (name in res) {\n        res = res[name];\n      }\n      typeof res == 'function' && isFunc && (res = res());\n    }\n  });\n  res = (res == null || res == obj ? all : res) + '';\n\n  return res;\n}\n\nfunction format(str, obj) {\n  return String(str).replace(tokenRegex, function(all, key) {\n    return replacer(all, key, obj);\n  });\n}\n","import BpmnRenderer from './BpmnRenderer';\nimport TextRenderer from './TextRenderer';\n\nimport PathMap from './PathMap';\n\nexport default {\n  __init__: [ 'bpmnRenderer' ],\n  bpmnRenderer: [ 'type', BpmnRenderer ],\n  textRenderer: [ 'type', TextRenderer ],\n  pathMap: [ 'type', PathMap ]\n};\n","/**\n * @typedef { {\n *   [key: string]: string;\n * } } TranslateReplacements\n */\n\n/**\n * A simple translation stub to be used for multi-language support\n * in diagrams. Can be easily replaced with a more sophisticated\n * solution.\n *\n * @example\n *\n * ```javascript\n * // use it inside any diagram component by injecting `translate`.\n *\n * function MyService(translate) {\n *   alert(translate('HELLO {you}', { you: 'You!' }));\n * }\n * ```\n *\n * @param {string} template to interpolate\n * @param {TranslateReplacements} [replacements] a map with substitutes\n *\n * @return {string} the translated string\n */\nexport default function translate(template, replacements) {\n\n  replacements = replacements || {};\n\n  return template.replace(/{([^}]+)}/g, function(_, key) {\n    return replacements[key] || '{' + key + '}';\n  });\n}","import translate from './translate';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  translate: [ 'value', translate ]\n};","import {\n  assign\n} from 'min-dash';\n\nimport { is } from '../util/ModelUtil';\n\nimport {\n  isLabelExternal,\n  getExternalLabelBounds,\n  getLabel\n} from '../util/LabelUtil';\n\nimport {\n  getMid\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  isExpanded\n} from '../util/DiUtil';\n\nimport {\n  elementToString\n} from './Util';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n *\n * @typedef {import('../features/modeling/ElementFactory').default} ElementFactory\n * @typedef {import('../draw/TextRenderer').default} TextRenderer\n *\n * @typedef {import('../model/Types').Element} Element\n * @typedef {import('../model/Types').Label} Label\n * @typedef {import('../model/Types').Shape} Shape\n * @typedef {import('../model/Types').Connection} Connection\n * @typedef {import('../model/Types').Root} Root\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * @param {ModdleElement} semantic\n * @param {ModdleElement} di\n * @param {Object} [attrs=null]\n *\n * @return {Object}\n */\nfunction elementData(semantic, di, attrs) {\n  return assign({\n    id: semantic.id,\n    type: semantic.$type,\n    businessObject: semantic,\n    di: di\n  }, attrs);\n}\n\nfunction getWaypoints(di, source, target) {\n\n  var waypoints = di.waypoint;\n\n  if (!waypoints || waypoints.length < 2) {\n    return [ getMid(source), getMid(target) ];\n  }\n\n  return waypoints.map(function(p) {\n    return { x: p.x, y: p.y };\n  });\n}\n\nfunction notYetDrawn(semantic, refSemantic, property) {\n  return new Error(\n    `element ${ elementToString(refSemantic) } referenced by ${ elementToString(semantic) }#${ property } not yet drawn`\n  );\n}\n\n\n/**\n * An importer that adds bpmn elements to the canvas\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementFactory} elementFactory\n * @param {ElementRegistry} elementRegistry\n * @param {TextRenderer} textRenderer\n */\nexport default function BpmnImporter(\n    eventBus, canvas, elementFactory,\n    elementRegistry, textRenderer) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._elementFactory = elementFactory;\n  this._elementRegistry = elementRegistry;\n  this._textRenderer = textRenderer;\n}\n\nBpmnImporter.$inject = [\n  'eventBus',\n  'canvas',\n  'elementFactory',\n  'elementRegistry',\n  'textRenderer'\n];\n\n\n/**\n * Add a BPMN element (semantic) to the canvas making it a child of the\n * given parent.\n *\n * @param {ModdleElement} semantic\n * @param {ModdleElement} di\n * @param {Shape} parentElement\n *\n * @return {Shape | Root | Connection}\n */\nBpmnImporter.prototype.add = function(semantic, di, parentElement) {\n  var element,\n      hidden;\n\n  var parentIndex;\n\n  // ROOT ELEMENT\n  // handle the special case that we deal with a\n  // invisible root element (process, subprocess or collaboration)\n  if (is(di, 'bpmndi:BPMNPlane')) {\n\n    var attrs = is(semantic, 'bpmn:SubProcess')\n      ? { id: semantic.id + '_plane' }\n      : {};\n\n    // add a virtual element (not being drawn)\n    element = this._elementFactory.createRoot(elementData(semantic, di, attrs));\n\n    this._canvas.addRootElement(element);\n  }\n\n  // SHAPE\n  else if (is(di, 'bpmndi:BPMNShape')) {\n\n    var collapsed = !isExpanded(semantic, di),\n        isFrame = isFrameElement(semantic);\n\n    hidden = parentElement && (parentElement.hidden || parentElement.collapsed);\n\n    var bounds = di.bounds;\n\n    element = this._elementFactory.createShape(elementData(semantic, di, {\n      collapsed: collapsed,\n      hidden: hidden,\n      x: Math.round(bounds.x),\n      y: Math.round(bounds.y),\n      width: Math.round(bounds.width),\n      height: Math.round(bounds.height),\n      isFrame: isFrame\n    }));\n\n    if (is(semantic, 'bpmn:BoundaryEvent')) {\n      this._attachBoundary(semantic, element);\n    }\n\n    // insert lanes behind other flow nodes (cf. #727)\n    if (is(semantic, 'bpmn:Lane')) {\n      parentIndex = 0;\n    }\n\n    if (is(semantic, 'bpmn:DataStoreReference')) {\n\n      // check whether data store is inside our outside of its semantic parent\n      if (!isPointInsideBBox(parentElement, getMid(bounds))) {\n        parentElement = this._canvas.findRoot(parentElement);\n      }\n    }\n\n    this._canvas.addShape(element, parentElement, parentIndex);\n  }\n\n  // CONNECTION\n  else if (is(di, 'bpmndi:BPMNEdge')) {\n\n    var source = this._getSource(semantic),\n        target = this._getTarget(semantic);\n\n    hidden = parentElement && (parentElement.hidden || parentElement.collapsed);\n\n    element = this._elementFactory.createConnection(elementData(semantic, di, {\n      hidden: hidden,\n      source: source,\n      target: target,\n      waypoints: getWaypoints(di, source, target)\n    }));\n\n    if (is(semantic, 'bpmn:DataAssociation')) {\n\n      // render always on top; this ensures DataAssociations\n      // are rendered correctly across different \"hacks\" people\n      // love to model such as cross participant / sub process\n      // associations\n      parentElement = this._canvas.findRoot(parentElement);\n    }\n\n    this._canvas.addConnection(element, parentElement, parentIndex);\n  } else {\n    throw new Error(\n      `unknown di ${ elementToString(di) } for element ${ elementToString(semantic) }`\n    );\n  }\n\n  // (optional) LABEL\n  if (isLabelExternal(semantic) && getLabel(element)) {\n    this.addLabel(semantic, di, element);\n  }\n\n  this._eventBus.fire('bpmnElement.added', { element: element });\n\n  return element;\n};\n\n\n/**\n * Attach a boundary element to the given host.\n *\n * @param {ModdleElement} boundarySemantic\n * @param {Shape} boundaryElement\n */\nBpmnImporter.prototype._attachBoundary = function(boundarySemantic, boundaryElement) {\n  var hostSemantic = boundarySemantic.attachedToRef;\n\n  if (!hostSemantic) {\n    throw new Error(\n      `missing ${ elementToString(boundarySemantic) }#attachedToRef`\n    );\n  }\n\n  var host = this._elementRegistry.get(hostSemantic.id),\n      attachers = host && host.attachers;\n\n  if (!host) {\n    throw notYetDrawn(boundarySemantic, hostSemantic, 'attachedToRef');\n  }\n\n  // wire element.host <> host.attachers\n  boundaryElement.host = host;\n\n  if (!attachers) {\n    host.attachers = attachers = [];\n  }\n\n  if (attachers.indexOf(boundaryElement) === -1) {\n    attachers.push(boundaryElement);\n  }\n};\n\n\n/**\n * Add a label to a given element.\n *\n * @param {ModdleElement} semantic\n * @param {ModdleElement} di\n * @param {Element} element\n *\n * @return {Label}\n */\nBpmnImporter.prototype.addLabel = function(semantic, di, element) {\n  var bounds,\n      text,\n      label;\n\n  bounds = getExternalLabelBounds(di, element);\n\n  text = getLabel(element);\n\n  if (text) {\n\n    // get corrected bounds from actual layouted text\n    bounds = this._textRenderer.getExternalLabelBounds(bounds, text);\n  }\n\n  label = this._elementFactory.createLabel(elementData(semantic, di, {\n    id: semantic.id + '_label',\n    labelTarget: element,\n    type: 'label',\n    hidden: element.hidden || !getLabel(element),\n    x: Math.round(bounds.x),\n    y: Math.round(bounds.y),\n    width: Math.round(bounds.width),\n    height: Math.round(bounds.height)\n  }));\n\n  return this._canvas.addShape(label, element.parent);\n};\n\n/**\n * Get the source or target of the given connection.\n *\n * @param {ModdleElement} semantic\n * @param {'source' | 'target'} side\n *\n * @return {Element}\n */\nBpmnImporter.prototype._getConnectedElement = function(semantic, side) {\n\n  var element,\n      refSemantic,\n      type = semantic.$type;\n\n  refSemantic = semantic[side + 'Ref'];\n\n  // handle mysterious isMany DataAssociation#sourceRef\n  if (side === 'source' && type === 'bpmn:DataInputAssociation') {\n    refSemantic = refSemantic && refSemantic[0];\n  }\n\n  // fix source / target for DataInputAssociation / DataOutputAssociation\n  if (side === 'source' && type === 'bpmn:DataOutputAssociation' ||\n      side === 'target' && type === 'bpmn:DataInputAssociation') {\n\n    refSemantic = semantic.$parent;\n  }\n\n  element = refSemantic && this._getElement(refSemantic);\n\n  if (element) {\n    return element;\n  }\n\n  if (refSemantic) {\n    throw notYetDrawn(semantic, refSemantic, side + 'Ref');\n  } else {\n    throw new Error(\n      `${ elementToString(semantic) }#${ side } Ref not specified`\n    );\n  }\n};\n\nBpmnImporter.prototype._getSource = function(semantic) {\n  return this._getConnectedElement(semantic, 'source');\n};\n\nBpmnImporter.prototype._getTarget = function(semantic) {\n  return this._getConnectedElement(semantic, 'target');\n};\n\n\nBpmnImporter.prototype._getElement = function(semantic) {\n  return this._elementRegistry.get(semantic.id);\n};\n\n\n// helpers ////////////////////\n\nfunction isPointInsideBBox(bbox, point) {\n  var x = point.x,\n      y = point.y;\n\n  return x >= bbox.x &&\n    x <= bbox.x + bbox.width &&\n    y >= bbox.y &&\n    y <= bbox.y + bbox.height;\n}\n\nfunction isFrameElement(semantic) {\n  return is(semantic, 'bpmn:Group');\n}\n","import translate from 'diagram-js/lib/i18n/translate';\n\nimport BpmnImporter from './BpmnImporter';\n\nexport default {\n  __depends__: [\n    translate\n  ],\n  bpmnImporter: [ 'type', BpmnImporter ]\n};","import DrawModule from '../draw';\nimport ImportModule from '../import';\n\nexport default {\n  __depends__: [\n    DrawModule,\n    ImportModule\n  ]\n};","/**\n * Util that provides unique IDs.\n *\n * @class\n * @constructor\n *\n * The ids can be customized via a given prefix and contain a random value to avoid collisions.\n *\n * @param {string} [prefix] a prefix to prepend to generated ids (for better readability)\n */\nexport default function IdGenerator(prefix) {\n\n  this._counter = 0;\n  this._prefix = (prefix ? prefix + '-' : '') + Math.floor(Math.random() * 1000000000) + '-';\n}\n\n/**\n * Returns a next unique ID.\n *\n * @return {string} the id\n */\nIdGenerator.prototype.next = function() {\n  return this._prefix + (++this._counter);\n};\n","import {\n  isArray,\n  isString,\n  isObject,\n  assign,\n  forEach,\n  find,\n  filter,\n  matchPattern,\n  isDefined\n} from 'min-dash';\n\nimport {\n  assignStyle,\n  domify,\n  classes as domClasses,\n  attr as domAttr,\n  remove as domRemove,\n  clear as domClear\n} from 'min-dom';\n\nimport {\n  getBBox\n} from '../../util/Elements';\n\nimport Ids from '../../util/IdGenerator';\n\n// document wide unique overlay ids\nvar ids = new Ids('ov');\n\nvar LOW_PRIORITY = 500;\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef { {\n *   minZoom?: number,\n *   maxZoom?: number\n * } } OverlaysConfigShow\n *\n * @typedef { {\n *   min?: number,\n *   max?: number\n * } } OverlaysConfigScale\n *\n * @typedef { {\n*   id: string,\n*   type: string | null,\n*   element: Element | string\n* } & OverlayAttrs } Overlay\n*\n * @typedef { {\n *   html: HTMLElement | string,\n *   position: {\n *     top?: number,\n *     right?: number,\n *     bottom?: number,\n *     left?: number\n *   }\n * } & OverlaysConfigDefault } OverlayAttrs\n *\n * @typedef { {\n *   html: HTMLElement,\n *   element: Element,\n *   overlays: Overlay[]\n * } } OverlayContainer\n *\n * @typedef {{\n *   defaults?: OverlaysConfigDefault\n * }} OverlaysConfig\n *\n * @typedef { {\n *  show?: OverlaysConfigShow,\n *  scale?: OverlaysConfigScale | boolean\n * } } OverlaysConfigDefault\n *\n * @typedef { {\n *   id?: string;\n *   element?: Element | string;\n *   type?: string;\n * } | string } OverlaysFilter\n */\n\n/**\n * A service that allows users to attach overlays to diagram elements.\n *\n * The overlay service will take care of overlay positioning during updates.\n *\n * @example\n *\n * ```javascript\n * // add a pink badge on the top left of the shape\n *\n * overlays.add(someShape, {\n *   position: {\n *     top: -5,\n *     left: -5\n *   },\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add via shape id\n *\n * overlays.add('some-element-id', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add with optional type\n *\n * overlays.add(someShape, 'badge', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n * ```\n *\n * ```javascript\n * // remove an overlay\n *\n * var id = overlays.add(...);\n * overlays.remove(id);\n *\n *\n * You may configure overlay defaults during tool by providing a `config` module\n * with `overlays.defaults` as an entry:\n *\n * {\n *   overlays: {\n *     defaults: {\n *       show: {\n *         minZoom: 0.7,\n *         maxZoom: 5.0\n *       },\n *       scale: {\n *         min: 1\n *       }\n *     }\n * }\n * ```\n *\n * @param {OverlaysConfig} config\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n */\nexport default function Overlays(config, eventBus, canvas, elementRegistry) {\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._elementRegistry = elementRegistry;\n\n  this._ids = ids;\n\n  /**\n   * @type {OverlaysConfigDefault}\n   */\n  this._overlayDefaults = assign({\n\n    // no show constraints\n    show: null,\n\n    // always scale\n    scale: true\n  }, config && config.defaults);\n\n  /**\n   * @type {Record<string, Overlay>}\n   */\n  this._overlays = {};\n\n  /**\n   * @type {OverlayContainer[]}\n   */\n  this._overlayContainers = [];\n\n  /**\n   * @type {HTMLElement}\n   */\n  this._overlayRoot = createRoot(canvas.getContainer());\n\n  this._init();\n}\n\n\nOverlays.$inject = [\n  'config.overlays',\n  'eventBus',\n  'canvas',\n  'elementRegistry'\n];\n\n\n/**\n * Returns the overlay with the specified ID or a list of overlays\n * for an element with a given type.\n *\n * @example\n *\n * ```javascript\n * // return the single overlay with the given ID\n * overlays.get('some-id');\n *\n * // return all overlays for the shape\n * overlays.get({ element: someShape });\n *\n * // return all overlays on shape with type 'badge'\n * overlays.get({ element: someShape, type: 'badge' });\n *\n * // shape can also be specified as ID\n * overlays.get({ element: 'element-id', type: 'badge' });\n * ```\n *\n * @param {OverlaysFilter} search The filter to be used to find the overlay(s).\n *\n * @return {Overlay|Overlay[]} The overlay(s).\n */\nOverlays.prototype.get = function(search) {\n\n  if (isString(search)) {\n    search = { id: search };\n  }\n\n  if (isString(search.element)) {\n    search.element = this._elementRegistry.get(search.element);\n  }\n\n  if (search.element) {\n    var container = this._getOverlayContainer(search.element, true);\n\n    // return a list of overlays when searching by element (+type)\n    if (container) {\n      return search.type ? filter(container.overlays, matchPattern({ type: search.type })) : container.overlays.slice();\n    } else {\n      return [];\n    }\n  } else if (search.type) {\n    return filter(this._overlays, matchPattern({ type: search.type }));\n  } else {\n\n    // return single element when searching by id\n    return search.id ? this._overlays[search.id] : null;\n  }\n};\n\n/**\n * Adds an HTML overlay to an element.\n *\n * @param {Element|string} element The element to add the overlay to.\n * @param {string} [type] An optional type that can be used to filter.\n * @param {OverlayAttrs} overlay The overlay.\n *\n * @return {string} The overlay's ID that can be used to get or remove it.\n */\nOverlays.prototype.add = function(element, type, overlay) {\n\n  if (isObject(type)) {\n    overlay = type;\n    type = null;\n  }\n\n  if (!element.id) {\n    element = this._elementRegistry.get(element);\n  }\n\n  if (!overlay.position) {\n    throw new Error('must specifiy overlay position');\n  }\n\n  if (!overlay.html) {\n    throw new Error('must specifiy overlay html');\n  }\n\n  if (!element) {\n    throw new Error('invalid element specified');\n  }\n\n  var id = this._ids.next();\n\n  overlay = assign({}, this._overlayDefaults, overlay, {\n    id: id,\n    type: type,\n    element: element,\n    html: overlay.html\n  });\n\n  this._addOverlay(overlay);\n\n  return id;\n};\n\n\n/**\n * Remove an overlay with the given ID or all overlays matching the given filter.\n *\n * @see Overlays#get for filter options.\n *\n * @param {OverlaysFilter} filter The filter to be used to find the overlay.\n */\nOverlays.prototype.remove = function(filter) {\n\n  var overlays = this.get(filter) || [];\n\n  if (!isArray(overlays)) {\n    overlays = [ overlays ];\n  }\n\n  var self = this;\n\n  forEach(overlays, function(overlay) {\n\n    var container = self._getOverlayContainer(overlay.element, true);\n\n    if (overlay) {\n      domRemove(overlay.html);\n      domRemove(overlay.htmlContainer);\n\n      delete overlay.htmlContainer;\n      delete overlay.element;\n\n      delete self._overlays[overlay.id];\n    }\n\n    if (container) {\n      var idx = container.overlays.indexOf(overlay);\n      if (idx !== -1) {\n        container.overlays.splice(idx, 1);\n      }\n    }\n  });\n\n};\n\n/**\n * Checks whether overlays are shown.\n *\n * @return {boolean} Whether overlays are shown.\n */\nOverlays.prototype.isShown = function() {\n  return this._overlayRoot.style.display !== 'none';\n};\n\n/**\n * Show all overlays.\n */\nOverlays.prototype.show = function() {\n  setVisible(this._overlayRoot);\n};\n\n/**\n * Hide all overlays.\n */\nOverlays.prototype.hide = function() {\n  setVisible(this._overlayRoot, false);\n};\n\n/**\n * Remove all overlays and their container.\n */\nOverlays.prototype.clear = function() {\n  this._overlays = {};\n\n  this._overlayContainers = [];\n\n  domClear(this._overlayRoot);\n};\n\nOverlays.prototype._updateOverlayContainer = function(container) {\n  var element = container.element,\n      html = container.html;\n\n  // update container left,top according to the elements x,y coordinates\n  // this ensures we can attach child elements relative to this container\n\n  var x = element.x,\n      y = element.y;\n\n  if (element.waypoints) {\n    var bbox = getBBox(element);\n    x = bbox.x;\n    y = bbox.y;\n  }\n\n  setPosition(html, x, y);\n\n  domAttr(container.html, 'data-container-id', element.id);\n};\n\n\nOverlays.prototype._updateOverlay = function(overlay) {\n\n  var position = overlay.position,\n      htmlContainer = overlay.htmlContainer,\n      element = overlay.element;\n\n  // update overlay html relative to shape because\n  // it is already positioned on the element\n\n  // update relative\n  var left = position.left,\n      top = position.top;\n\n  if (position.right !== undefined) {\n\n    var width;\n\n    if (element.waypoints) {\n      width = getBBox(element).width;\n    } else {\n      width = element.width;\n    }\n\n    left = position.right * -1 + width;\n  }\n\n  if (position.bottom !== undefined) {\n\n    var height;\n\n    if (element.waypoints) {\n      height = getBBox(element).height;\n    } else {\n      height = element.height;\n    }\n\n    top = position.bottom * -1 + height;\n  }\n\n  setPosition(htmlContainer, left || 0, top || 0);\n  this._updateOverlayVisibilty(overlay, this._canvas.viewbox());\n};\n\n\nOverlays.prototype._createOverlayContainer = function(element) {\n  var html = domify('<div class=\"djs-overlays\" />');\n  assignStyle(html, { position: 'absolute' });\n\n  this._overlayRoot.appendChild(html);\n\n  var container = {\n    html: html,\n    element: element,\n    overlays: []\n  };\n\n  this._updateOverlayContainer(container);\n\n  this._overlayContainers.push(container);\n\n  return container;\n};\n\n\nOverlays.prototype._updateRoot = function(viewbox) {\n  var scale = viewbox.scale || 1;\n\n  var matrix = 'matrix(' +\n  [\n    scale,\n    0,\n    0,\n    scale,\n    -1 * viewbox.x * scale,\n    -1 * viewbox.y * scale\n  ].join(',') +\n  ')';\n\n  setTransform(this._overlayRoot, matrix);\n};\n\n\nOverlays.prototype._getOverlayContainer = function(element, raw) {\n  var container = find(this._overlayContainers, function(c) {\n    return c.element === element;\n  });\n\n\n  if (!container && !raw) {\n    return this._createOverlayContainer(element);\n  }\n\n  return container;\n};\n\n\nOverlays.prototype._addOverlay = function(overlay) {\n\n  var id = overlay.id,\n      element = overlay.element,\n      html = overlay.html,\n      htmlContainer,\n      overlayContainer;\n\n  // unwrap jquery (for those who need it)\n  if (html.get && html.constructor.prototype.jquery) {\n    html = html.get(0);\n  }\n\n  // create proper html elements from\n  // overlay HTML strings\n  if (isString(html)) {\n    html = domify(html);\n  }\n\n  overlayContainer = this._getOverlayContainer(element);\n\n  htmlContainer = domify('<div class=\"djs-overlay\" data-overlay-id=\"' + id + '\">');\n  assignStyle(htmlContainer, { position: 'absolute' });\n\n  htmlContainer.appendChild(html);\n\n  if (overlay.type) {\n    domClasses(htmlContainer).add('djs-overlay-' + overlay.type);\n  }\n\n  var elementRoot = this._canvas.findRoot(element);\n  var activeRoot = this._canvas.getRootElement();\n\n  setVisible(htmlContainer, elementRoot === activeRoot);\n\n  overlay.htmlContainer = htmlContainer;\n\n  overlayContainer.overlays.push(overlay);\n  overlayContainer.html.appendChild(htmlContainer);\n\n  this._overlays[id] = overlay;\n\n  this._updateOverlay(overlay);\n  this._updateOverlayVisibilty(overlay, this._canvas.viewbox());\n};\n\n\nOverlays.prototype._updateOverlayVisibilty = function(overlay, viewbox) {\n  var show = overlay.show,\n      rootElement = this._canvas.findRoot(overlay.element),\n      minZoom = show && show.minZoom,\n      maxZoom = show && show.maxZoom,\n      htmlContainer = overlay.htmlContainer,\n      activeRootElement = this._canvas.getRootElement(),\n      visible = true;\n\n  if (rootElement !== activeRootElement) {\n    visible = false;\n  } else if (show) {\n    if (\n      (isDefined(minZoom) && minZoom > viewbox.scale) ||\n      (isDefined(maxZoom) && maxZoom < viewbox.scale)\n    ) {\n      visible = false;\n    }\n  }\n\n  setVisible(htmlContainer, visible);\n\n  this._updateOverlayScale(overlay, viewbox);\n};\n\n\nOverlays.prototype._updateOverlayScale = function(overlay, viewbox) {\n  var shouldScale = overlay.scale,\n      minScale,\n      maxScale,\n      htmlContainer = overlay.htmlContainer;\n\n  var scale, transform = '';\n\n  if (shouldScale !== true) {\n\n    if (shouldScale === false) {\n      minScale = 1;\n      maxScale = 1;\n    } else {\n      minScale = shouldScale.min;\n      maxScale = shouldScale.max;\n    }\n\n    if (isDefined(minScale) && viewbox.scale < minScale) {\n      scale = (1 / viewbox.scale || 1) * minScale;\n    }\n\n    if (isDefined(maxScale) && viewbox.scale > maxScale) {\n      scale = (1 / viewbox.scale || 1) * maxScale;\n    }\n  }\n\n  if (isDefined(scale)) {\n    transform = 'scale(' + scale + ',' + scale + ')';\n  }\n\n  setTransform(htmlContainer, transform);\n};\n\n\nOverlays.prototype._updateOverlaysVisibilty = function(viewbox) {\n\n  var self = this;\n\n  forEach(this._overlays, function(overlay) {\n    self._updateOverlayVisibilty(overlay, viewbox);\n  });\n};\n\n\nOverlays.prototype._init = function() {\n\n  var eventBus = this._eventBus;\n\n  var self = this;\n\n\n  // scroll/zoom integration\n\n  function updateViewbox(viewbox) {\n    self._updateRoot(viewbox);\n    self._updateOverlaysVisibilty(viewbox);\n\n    self.show();\n  }\n\n  eventBus.on('canvas.viewbox.changing', function(event) {\n    self.hide();\n  });\n\n  eventBus.on('canvas.viewbox.changed', function(event) {\n    updateViewbox(event.viewbox);\n  });\n\n\n  // remove integration\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var element = e.element;\n    var overlays = self.get({ element: element });\n\n    forEach(overlays, function(o) {\n      self.remove(o.id);\n    });\n\n    var container = self._getOverlayContainer(element);\n\n    if (container) {\n      domRemove(container.html);\n      var i = self._overlayContainers.indexOf(container);\n      if (i !== -1) {\n        self._overlayContainers.splice(i, 1);\n      }\n    }\n  });\n\n\n  // move integration\n\n  eventBus.on('element.changed', LOW_PRIORITY, function(e) {\n    var element = e.element;\n\n    var container = self._getOverlayContainer(element, true);\n\n    if (container) {\n      forEach(container.overlays, function(overlay) {\n        self._updateOverlay(overlay);\n      });\n\n      self._updateOverlayContainer(container);\n    }\n  });\n\n\n  // marker integration, simply add them on the overlays as classes, too.\n\n  eventBus.on('element.marker.update', function(e) {\n    var container = self._getOverlayContainer(e.element, true);\n    if (container) {\n      domClasses(container.html)[e.add ? 'add' : 'remove'](e.marker);\n    }\n  });\n\n\n  eventBus.on('root.set', function() {\n    self._updateOverlaysVisibilty(self._canvas.viewbox());\n  });\n\n  // clear overlays with diagram\n\n  eventBus.on('diagram.clear', this.clear, this);\n};\n\n\n\n// helpers /////////////////////////////\n\nfunction createRoot(parentNode) {\n  var root = domify(\n    '<div class=\"djs-overlay-container\" />'\n  );\n\n  assignStyle(root, {\n    position: 'absolute',\n    width: 0,\n    height: 0\n  });\n\n  parentNode.insertBefore(root, parentNode.firstChild);\n\n  return root;\n}\n\nfunction setPosition(el, x, y) {\n  assignStyle(el, { left: x + 'px', top: y + 'px' });\n}\n\n/**\n * Set element visible\n *\n * @param {DOMElement} el\n * @param {boolean} [visible=true]\n */\nfunction setVisible(el, visible) {\n  el.style.display = visible === false ? 'none' : '';\n}\n\nfunction setTransform(el, transform) {\n\n  el.style['transform-origin'] = 'top left';\n\n  [ '', '-ms-', '-webkit-' ].forEach(function(prefix) {\n    el.style[prefix + 'transform'] = transform;\n  });\n}","import Overlays from './Overlays';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'overlays' ],\n  overlays: [ 'type', Overlays ]\n};","import {\n  getType as getElementType\n} from '../../util/Elements';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../../core/GraphicsFactory').default} GraphicsFactory\n */\n\n/**\n * Adds change support to the diagram, including\n *\n * <ul>\n *   <li>redrawing shapes and connections on change</li>\n * </ul>\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n * @param {GraphicsFactory} graphicsFactory\n */\nexport default function ChangeSupport(\n    eventBus, canvas, elementRegistry,\n    graphicsFactory) {\n\n\n  // redraw shapes / connections on change\n\n  eventBus.on('element.changed', function(event) {\n\n    var element = event.element;\n\n    // element might have been deleted and replaced by new element with same ID\n    // thus check for parent of element except for root element\n    if (element.parent || element === canvas.getRootElement()) {\n      event.gfx = elementRegistry.getGraphics(element);\n    }\n\n    // shape + gfx may have been deleted\n    if (!event.gfx) {\n      return;\n    }\n\n    eventBus.fire(getElementType(element) + '.changed', event);\n  });\n\n  eventBus.on('elements.changed', function(event) {\n\n    var elements = event.elements;\n\n    elements.forEach(function(e) {\n      eventBus.fire('element.changed', { element: e });\n    });\n\n    graphicsFactory.updateContainments(elements);\n  });\n\n  eventBus.on('shape.changed', function(event) {\n    graphicsFactory.update('shape', event.element, event.gfx);\n  });\n\n  eventBus.on('connection.changed', function(event) {\n    graphicsFactory.update('connection', event.element, event.gfx);\n  });\n}\n\nChangeSupport.$inject = [\n  'eventBus',\n  'canvas',\n  'elementRegistry',\n  'graphicsFactory'\n];","import ChangeSupport from './ChangeSupport';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'changeSupport' ],\n  changeSupport: [ 'type', ChangeSupport ]\n};","import {\n  forEach,\n  isFunction,\n  isArray,\n  isNumber,\n  isObject\n} from 'min-dash';\n\n/**\n * @typedef {import('../core/Types').ElementLike} ElementLike\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./CommandStack').CommandContext} CommandContext\n *\n * @typedef {string|string[]} Events\n * @typedef { (context: CommandContext) => ElementLike[] | void } HandlerFunction\n * @typedef { (context: CommandContext) => void } ComposeHandlerFunction\n */\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A utility that can be used to plug into the command execution for\n * extension and/or validation.\n *\n * @class\n * @constructor\n *\n * @example\n *\n * ```javascript\n * import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n *\n * class CommandLogger extends CommandInterceptor {\n *   constructor(eventBus) {\n *     super(eventBus);\n *\n *   this.preExecute('shape.create', (event) => {\n *     console.log('commandStack.shape-create.preExecute', event);\n *   });\n * }\n * ```\n *\n * @param {EventBus} eventBus\n */\nexport default function CommandInterceptor(eventBus) {\n\n  /**\n   * @type {EventBus}\n   */\n  this._eventBus = eventBus;\n}\n\nCommandInterceptor.$inject = [ 'eventBus' ];\n\nfunction unwrapEvent(fn, that) {\n  return function(event) {\n    return fn.call(that || null, event.context, event.command, event);\n  };\n}\n\n\n/**\n * Intercept a command during one of the phases.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {string} [hook] phase to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.on = function(events, hook, priority, handlerFn, unwrap, that) {\n\n  if (isFunction(hook) || isNumber(hook)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = hook;\n    hook = null;\n  }\n\n  if (isFunction(priority)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (isObject(unwrap)) {\n    that = unwrap;\n    unwrap = false;\n  }\n\n  if (!isFunction(handlerFn)) {\n    throw new Error('handlerFn must be a function');\n  }\n\n  if (!isArray(events)) {\n    events = [ events ];\n  }\n\n  var eventBus = this._eventBus;\n\n  forEach(events, function(event) {\n\n    // concat commandStack(.event)?(.hook)?\n    var fullEvent = [ 'commandStack', event, hook ].filter(function(e) { return e; }).join('.');\n\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\n  });\n};\n\n/**\n * Add a <canExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.canExecute = createHook('canExecute');\n\n/**\n * Add a <preExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.preExecute = createHook('preExecute');\n\n/**\n * Add a <preExecuted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.preExecuted = createHook('preExecuted');\n\n/**\n * Add a <execute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.execute = createHook('execute');\n\n/**\n * Add a <executed> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.executed = createHook('executed');\n\n/**\n * Add a <postExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.postExecute = createHook('postExecute');\n\n/**\n * Add a <postExecuted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.postExecuted = createHook('postExecuted');\n\n/**\n * Add a <revert> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.revert = createHook('revert');\n\n/**\n * Add a <reverted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.reverted = createHook('reverted');\n\n/*\n * Add prototype methods for each phase of command execution (e.g. execute,\n * revert).\n *\n * @param {string} hook\n *\n * @return { (\n *   events?: Events,\n *   priority?: number,\n *   handlerFn: ComposeHandlerFunction|HandlerFunction,\n *   unwrap?: boolean\n * ) => any }\n */\nfunction createHook(hook) {\n\n  /**\n   * @this {CommandInterceptor}\n   *\n   * @param {Events} [events]\n   * @param {number} [priority]\n   * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n   * @param {boolean} [unwrap]\n   * @param {any} [that]\n   */\n  const hookFn = function(events, priority, handlerFn, unwrap, that) {\n\n    if (isFunction(events) || isNumber(events)) {\n      that = unwrap;\n      unwrap = handlerFn;\n      handlerFn = priority;\n      priority = events;\n      events = null;\n    }\n\n    this.on(events, hook, priority, handlerFn, unwrap, that);\n  };\n\n  return hookFn;\n}\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n */\n\n/**\n * A modeling behavior that ensures we set the correct root element\n * as we undo and redo commands.\n *\n * @param {Canvas} canvas\n * @param {Injector} injector\n */\nexport default function RootElementsBehavior(canvas, injector) {\n\n  injector.invoke(CommandInterceptor, this);\n\n  this.executed(function(event) {\n    var context = event.context;\n\n    if (context.rootElement) {\n      canvas.setRootElement(context.rootElement);\n    } else {\n      context.rootElement = canvas.getRootElement();\n    }\n  });\n\n  this.revert(function(event) {\n    var context = event.context;\n\n    if (context.rootElement) {\n      canvas.setRootElement(context.rootElement);\n    }\n  });\n}\n\ninherits(RootElementsBehavior, CommandInterceptor);\n\nRootElementsBehavior.$inject = [ 'canvas', 'injector' ];","import RootElementsBehavior from './RootElementsBehavior';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'rootElementsBehavior' ],\n  rootElementsBehavior: [ 'type', RootElementsBehavior ]\n};\n","/**\n * @param {string} str\n *\n * @return {string}\n */\nexport function escapeCSS(str) {\n  return CSS.escape(str);\n}\n\nvar HTML_ESCAPE_MAP = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\n/**\n * @param {string} str\n *\n * @return {string}\n */\nexport function escapeHTML(str) {\n  str = '' + str;\n\n  return str && str.replace(/[&<>\"']/g, function(match) {\n    return HTML_ESCAPE_MAP[match];\n  });\n}\n","import { getDi, is } from './ModelUtil';\n\n/**\n * @typedef {import('../model/Types').Element} Element\n * @typedef {import('../model/Types').ModdleElement} ModdleElement\n */\n\nexport var planeSuffix = '_plane';\n\n/**\n * Get primary shape ID for a plane.\n *\n * @param  {Element|ModdleElement} element\n *\n * @return {string}\n */\nexport function getShapeIdFromPlane(element) {\n  var id = element.id;\n\n  return removePlaneSuffix(id);\n}\n\n/**\n * Get plane ID for a primary shape.\n *\n * @param  {Element|ModdleElement} element\n *\n * @return {string}\n */\nexport function getPlaneIdFromShape(element) {\n  var id = element.id;\n\n  if (is(element, 'bpmn:SubProcess')) {\n    return addPlaneSuffix(id);\n  }\n\n  return id;\n}\n\n/**\n * Get plane ID for primary shape ID.\n *\n * @param {string} id\n *\n * @return {string}\n */\nexport function toPlaneId(id) {\n  return addPlaneSuffix(id);\n}\n\n/**\n * Check wether element is plane.\n *\n * @param  {Element|ModdleElement} element\n *\n * @return {boolean}\n */\nexport function isPlane(element) {\n  var di = getDi(element);\n\n  return is(di, 'bpmndi:BPMNPlane');\n}\n\nfunction addPlaneSuffix(id) {\n  return id + planeSuffix;\n}\n\nfunction removePlaneSuffix(id) {\n  return id.replace(new RegExp(planeSuffix + '$'), '');\n}","import { domify, classes } from 'min-dom';\nimport { find } from 'min-dash';\n\nimport { escapeHTML } from 'diagram-js/lib/util/EscapeUtil';\nimport { getBusinessObject, is } from '../../util/ModelUtil';\nimport {\n  getPlaneIdFromShape\n} from '../../util/DrilldownUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n */\n\nvar OPEN_CLASS = 'bjs-breadcrumbs-shown';\n\n\n/**\n * Adds overlays that allow switching planes on collapsed subprocesses.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Canvas} canvas\n */\nexport default function DrilldownBreadcrumbs(eventBus, elementRegistry, canvas) {\n  var breadcrumbs = domify('<ul class=\"bjs-breadcrumbs\"></ul>');\n  var container = canvas.getContainer();\n  var containerClasses = classes(container);\n  container.appendChild(breadcrumbs);\n\n  var businessObjectParents = [];\n\n  // update breadcrumbs if name or ID of the primary shape changes\n  eventBus.on('element.changed', function(event) {\n    var shape = event.element,\n        businessObject = getBusinessObject(shape);\n\n    var isPresent = find(businessObjectParents, function(element) {\n      return element === businessObject;\n    });\n\n    if (!isPresent) {\n      return;\n    }\n\n    updateBreadcrumbs();\n  });\n\n  /**\n   * Updates the displayed breadcrumbs. If no element is provided, only the\n   * labels are updated.\n   *\n   * @param {Element} [element]\n   */\n  function updateBreadcrumbs(element) {\n    if (element) {\n      businessObjectParents = getBusinessObjectParentChain(element);\n    }\n\n    var path = businessObjectParents.flatMap(function(parent) {\n      var parentPlane =\n        canvas.findRoot(getPlaneIdFromShape(parent)) ||\n        canvas.findRoot(parent.id);\n\n      // when the root is a collaboration, the process does not have a\n      // corresponding element in the elementRegisty. Instead, we search\n      // for the corresponding participant\n      if (!parentPlane && is(parent, 'bpmn:Process')) {\n        var participant = elementRegistry.find(function(element) {\n          var businessObject = getBusinessObject(element);\n\n          return businessObject && businessObject.get('processRef') === parent;\n        });\n\n        parentPlane = participant && canvas.findRoot(participant.id);\n      }\n\n      if (!parentPlane) {\n        return [];\n      }\n\n      var title = escapeHTML(parent.name || parent.id);\n      var link = domify('<li><span class=\"bjs-crumb\"><a title=\"' + title + '\">' + title + '</a></span></li>');\n\n      link.addEventListener('click', function() {\n        canvas.setRootElement(parentPlane);\n      });\n\n      return link;\n    });\n\n    breadcrumbs.innerHTML = '';\n\n    // show breadcrumbs and expose state to .djs-container\n    var visible = path.length > 1;\n\n    containerClasses.toggle(OPEN_CLASS, visible);\n\n    path.forEach(function(element) {\n      breadcrumbs.appendChild(element);\n    });\n  }\n\n  eventBus.on('root.set', function(event) {\n    updateBreadcrumbs(event.element);\n  });\n\n}\n\nDrilldownBreadcrumbs.$inject = [ 'eventBus', 'elementRegistry', 'canvas' ];\n\n\n// helpers //////////\n\n/**\n * Returns the parents for the element using the business object chain,\n * starting with the root element.\n *\n * @param {Shape} child\n *\n * @return {Shape}\n */\nfunction getBusinessObjectParentChain(child) {\n  var businessObject = getBusinessObject(child);\n\n  var parents = [];\n\n  for (var element = businessObject; element; element = element.$parent) {\n    if (is(element, 'bpmn:SubProcess') || is(element, 'bpmn:Process')) {\n      parents.push(element);\n    }\n  }\n\n  return parents.reverse();\n}","import { is } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\n/**\n * Move collapsed subprocesses into view when drilling down.\n *\n * Zoom and scroll are saved in a session.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function DrilldownCentering(eventBus, canvas) {\n\n  var currentRoot = null;\n  var positionMap = new Map();\n\n  eventBus.on('root.set', function(event) {\n    var newRoot = event.element;\n    var currentViewbox = canvas.viewbox();\n    var storedViewbox = positionMap.get(newRoot);\n\n    positionMap.set(currentRoot, {\n      x: currentViewbox.x,\n      y: currentViewbox.y,\n      zoom: currentViewbox.scale\n    });\n\n    currentRoot = newRoot;\n\n    // Keep viewbox when replacing root elements\n    if (!is(newRoot, 'bpmn:SubProcess') && !storedViewbox) {\n      return;\n    }\n\n    storedViewbox = storedViewbox || { x: 0, y: 0, zoom: 1 };\n\n    var dx = (currentViewbox.x - storedViewbox.x) * currentViewbox.scale,\n        dy = (currentViewbox.y - storedViewbox.y) * currentViewbox.scale;\n\n    if (dx !== 0 || dy !== 0) {\n      canvas.scroll({\n        dx: dx,\n        dy: dy\n      });\n    }\n\n    if (storedViewbox.zoom !== currentViewbox.scale) {\n      canvas.zoom(storedViewbox.zoom, { x: 0, y: 0 });\n    }\n  });\n\n  eventBus.on('diagram.clear', function() {\n    positionMap.clear();\n    currentRoot = null;\n  });\n\n}\n\nDrilldownCentering.$inject = [ 'eventBus', 'canvas' ];\n\n\n/**\n * ES5 Map implementation. Works.\n */\nfunction Map() {\n\n  this._entries = [];\n\n  this.set = function(key, value) {\n\n    var found = false;\n\n    for (var k in this._entries) {\n      if (this._entries[k][0] === key) {\n        this._entries[k][1] = value;\n\n        found = true;\n\n        break;\n      }\n    }\n\n    if (!found) {\n      this._entries.push([ key, value ]);\n    }\n  };\n\n  this.get = function(key) {\n\n    for (var k in this._entries) {\n      if (this._entries[k][0] === key) {\n        return this._entries[k][1];\n      }\n    }\n\n    return null;\n  };\n\n  this.clear = function() {\n    this._entries.length = 0;\n  };\n\n  this.remove = function(key) {\n\n    var idx = -1;\n\n    for (var k in this._entries) {\n      if (this._entries[k][0] === key) {\n        idx = k;\n\n        break;\n      }\n    }\n\n    if (idx !== -1) {\n      this._entries.splice(idx, 1);\n    }\n  };\n}","\nimport { asBounds, asTRBL } from 'diagram-js/lib/layout/LayoutUtil';\nimport { is, isAny } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../../model/Types').Moddle} Moddle\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/core/Canvas').CanvasPlane} CanvasPlane\n *\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n */\n\nvar DEFAULT_POSITION = {\n  x: 180,\n  y: 160\n};\n\n/**\n * Hook into `import.render.start` and create new planes for diagrams with\n * collapsed subprocesses and all DI elements on the same plane.\n *\n * @param {EventBus} eventBus\n * @param {Moddle} moddle\n */\nexport default function SubprocessCompatibility(eventBus, moddle) {\n  this._eventBus = eventBus;\n  this._moddle = moddle;\n\n  var self = this;\n\n  eventBus.on('import.render.start', 1500, function(e, context) {\n    self._handleImport(context.definitions);\n  });\n}\n\n/**\n * @param {ModdleElement} definitions\n */\nSubprocessCompatibility.prototype._handleImport = function(definitions) {\n  if (!definitions.diagrams) {\n    return;\n  }\n\n  var self = this;\n  this._definitions = definitions;\n  this._processToDiagramMap = {};\n\n  definitions.diagrams.forEach(function(diagram) {\n    if (!diagram.plane || !diagram.plane.bpmnElement) {\n      return;\n    }\n\n    self._processToDiagramMap[diagram.plane.bpmnElement.id] = diagram;\n  });\n\n  var newDiagrams = definitions.diagrams\n    .filter(diagram => diagram.plane)\n    .flatMap(diagram => self._createNewDiagrams(diagram.plane));\n\n  newDiagrams.forEach(function(diagram) {\n    self._movePlaneElementsToOrigin(diagram.plane);\n  });\n};\n\n\n/**\n * Moves all DI elements from collapsed subprocesses to a new plane.\n *\n * @param {CanvasPlane} plane\n *\n * @return {ModdleElement[]} new diagrams created for the collapsed subprocesses\n */\nSubprocessCompatibility.prototype._createNewDiagrams = function(plane) {\n  var self = this;\n\n  var collapsedElements = [];\n  var elementsToMove = [];\n\n  plane.get('planeElement').forEach(function(diElement) {\n    var businessObject = diElement.bpmnElement;\n\n    if (!businessObject) {\n      return;\n    }\n\n    var parent = businessObject.$parent;\n\n    if (is(businessObject, 'bpmn:SubProcess') && !diElement.isExpanded) {\n      collapsedElements.push(businessObject);\n    }\n\n    if (shouldMoveToPlane(businessObject, plane)) {\n\n      // don't change the array while we iterate over it\n      elementsToMove.push({ diElement: diElement, parent: parent });\n    }\n  });\n\n  var newDiagrams = [];\n\n  // create new planes for all collapsed subprocesses, even when they are empty\n  collapsedElements.forEach(function(element) {\n    if (!self._processToDiagramMap[ element.id ]) {\n      var diagram = self._createDiagram(element);\n\n      self._processToDiagramMap[element.id] = diagram;\n\n      newDiagrams.push(diagram);\n    }\n  });\n\n  elementsToMove.forEach(function(element) {\n    var diElement = element.diElement;\n    var parent = element.parent;\n\n    // parent is expanded, get nearest collapsed parent\n    while (parent && collapsedElements.indexOf(parent) === -1) {\n      parent = parent.$parent;\n    }\n\n    // false positive, all parents are expanded\n    if (!parent) {\n      return;\n    }\n\n    var diagram = self._processToDiagramMap[ parent.id ];\n\n    self._moveToDiPlane(diElement, diagram.plane);\n  });\n\n  return newDiagrams;\n};\n\n/**\n * @param {CanvasPlane} plane\n */\nSubprocessCompatibility.prototype._movePlaneElementsToOrigin = function(plane) {\n  var elements = plane.get('planeElement');\n\n  // get bounding box of all elements\n  var planeBounds = getPlaneBounds(plane);\n\n  var offset = {\n    x: planeBounds.x - DEFAULT_POSITION.x,\n    y: planeBounds.y - DEFAULT_POSITION.y\n  };\n\n  elements.forEach(function(diElement) {\n    if (diElement.waypoint) {\n      diElement.waypoint.forEach(function(waypoint) {\n        waypoint.x = waypoint.x - offset.x;\n        waypoint.y = waypoint.y - offset.y;\n      });\n    } else if (diElement.bounds) {\n      diElement.bounds.x = diElement.bounds.x - offset.x;\n      diElement.bounds.y = diElement.bounds.y - offset.y;\n    }\n  });\n};\n\n/**\n * @param {ModdleElement} diElement\n * @param {CanvasPlane} newPlane\n */\nSubprocessCompatibility.prototype._moveToDiPlane = function(diElement, newPlane) {\n  var containingDiagram = findRootDiagram(diElement);\n\n  // remove DI from old Plane and add it to the new one\n  var parentPlaneElement = containingDiagram.plane.get('planeElement');\n\n  parentPlaneElement.splice(parentPlaneElement.indexOf(diElement), 1);\n\n  newPlane.get('planeElement').push(diElement);\n};\n\n/**\n * @param {ModdleElement} businessObject\n *\n * @return {ModdleElement}\n */\nSubprocessCompatibility.prototype._createDiagram = function(businessObject) {\n  var plane = this._moddle.create('bpmndi:BPMNPlane', {\n    bpmnElement: businessObject\n  });\n\n  var diagram = this._moddle.create('bpmndi:BPMNDiagram', {\n    plane: plane\n  });\n\n  plane.$parent = diagram;\n\n  plane.bpmnElement = businessObject;\n\n  diagram.$parent = this._definitions;\n\n  this._definitions.diagrams.push(diagram);\n\n  return diagram;\n};\n\nSubprocessCompatibility.$inject = [ 'eventBus', 'moddle' ];\n\n\n// helpers //////////\n\nfunction findRootDiagram(element) {\n  if (is(element, 'bpmndi:BPMNDiagram')) {\n    return element;\n  } else {\n    return findRootDiagram(element.$parent);\n  }\n}\n\n/**\n * @param {CanvasPlane} plane\n *\n * @return {Rect}\n */\nfunction getPlaneBounds(plane) {\n  var planeTrbl = {\n    top: Infinity,\n    right: -Infinity,\n    bottom: -Infinity,\n    left: Infinity\n  };\n\n  plane.planeElement.forEach(function(element) {\n    if (!element.bounds) {\n      return;\n    }\n\n    var trbl = asTRBL(element.bounds);\n\n    planeTrbl.top = Math.min(trbl.top, planeTrbl.top);\n    planeTrbl.left = Math.min(trbl.left, planeTrbl.left);\n  });\n\n  return asBounds(planeTrbl);\n}\n\n/**\n * @param {ModdleElement} businessObject\n * @param {CanvasPlane} plane\n *\n * @return {boolean}\n */\nfunction shouldMoveToPlane(businessObject, plane) {\n  var parent = businessObject.$parent;\n\n  // don't move elements that are already on the plane\n  if (!is(parent, 'bpmn:SubProcess') || parent === plane.bpmnElement) {\n    return false;\n  }\n\n  // dataAssociations are children of the subprocess but rendered on process level\n  // cf. https://github.com/bpmn-io/bpmn-js/issues/1619\n  if (isAny(businessObject, [ 'bpmn:DataInputAssociation', 'bpmn:DataOutputAssociation' ])) {\n    return false;\n  }\n\n  return true;\n}\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { getBusinessObject, is } from '../../util/ModelUtil';\nimport { classes, domify } from 'min-dom';\nimport { getPlaneIdFromShape } from '../../util/DrilldownUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/features/overlays/Overlays').default} Overlays\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Parent} Parent\n * @typedef {import('../../model/Types').Shape} Shape\n */\n\nvar LOW_PRIORITY = 250;\nvar ARROW_DOWN_SVG = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z\"/></svg>';\n\nvar EMPTY_MARKER = 'bjs-drilldown-empty';\n\n/**\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Overlays} overlays\n * @param {Translate} translate\n */\nexport default function DrilldownOverlayBehavior(\n    canvas, eventBus, elementRegistry, overlays, translate\n) {\n  CommandInterceptor.call(this, eventBus);\n\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._elementRegistry = elementRegistry;\n  this._overlays = overlays;\n  this._translate = translate;\n\n  var self = this;\n\n  this.executed('shape.toggleCollapse', LOW_PRIORITY, function(context) {\n    var shape = context.shape;\n\n    // Add overlay to the collapsed shape\n    if (self._canDrillDown(shape)) {\n      self._addOverlay(shape);\n    } else {\n      self._removeOverlay(shape);\n    }\n  }, true);\n\n\n  this.reverted('shape.toggleCollapse', LOW_PRIORITY, function(context) {\n    var shape = context.shape;\n\n    // Add overlay to the collapsed shape\n    if (self._canDrillDown(shape)) {\n      self._addOverlay(shape);\n    } else {\n      self._removeOverlay(shape);\n    }\n  }, true);\n\n\n  this.executed([ 'shape.create', 'shape.move', 'shape.delete' ], LOW_PRIORITY,\n    function(context) {\n      var oldParent = context.oldParent,\n          newParent = context.newParent || context.parent,\n          shape = context.shape;\n\n      // Add overlay to the collapsed shape\n      if (self._canDrillDown(shape)) {\n        self._addOverlay(shape);\n      }\n\n      self._updateDrilldownOverlay(oldParent);\n      self._updateDrilldownOverlay(newParent);\n      self._updateDrilldownOverlay(shape);\n    }, true);\n\n\n  this.reverted([ 'shape.create', 'shape.move', 'shape.delete' ], LOW_PRIORITY,\n    function(context) {\n      var oldParent = context.oldParent,\n          newParent = context.newParent || context.parent,\n          shape = context.shape;\n\n      // Add overlay to the collapsed shape\n      if (self._canDrillDown(shape)) {\n        self._addOverlay(shape);\n      }\n\n      self._updateDrilldownOverlay(oldParent);\n      self._updateDrilldownOverlay(newParent);\n      self._updateDrilldownOverlay(shape);\n    }, true);\n\n\n  eventBus.on('import.render.complete', function() {\n    elementRegistry.filter(function(e) {\n      return self._canDrillDown(e);\n    }).map(function(el) {\n      self._addOverlay(el);\n    });\n  });\n\n}\n\ninherits(DrilldownOverlayBehavior, CommandInterceptor);\n\n/**\n * @param {Shape} shape\n */\nDrilldownOverlayBehavior.prototype._updateDrilldownOverlay = function(shape) {\n  var canvas = this._canvas;\n\n  if (!shape) {\n    return;\n  }\n\n  var root = canvas.findRoot(shape);\n\n  if (root) {\n    this._updateOverlayVisibility(root);\n  }\n};\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nDrilldownOverlayBehavior.prototype._canDrillDown = function(element) {\n  var canvas = this._canvas;\n\n  return is(element, 'bpmn:SubProcess') && canvas.findRoot(getPlaneIdFromShape(element));\n};\n\n/**\n * Update the visibility of the drilldown overlay. If the plane has no elements,\n * the drilldown will only be shown when the element is selected.\n *\n * @param {Parent} element The collapsed root or shape.\n */\nDrilldownOverlayBehavior.prototype._updateOverlayVisibility = function(element) {\n  var overlays = this._overlays;\n\n  var businessObject = getBusinessObject(element);\n\n  var overlay = overlays.get({ element: businessObject.id, type: 'drilldown' })[0];\n\n  if (!overlay) {\n    return;\n  }\n\n  var hasFlowElements = businessObject\n    && businessObject.get('flowElements')\n    && businessObject.get('flowElements').length;\n\n  classes(overlay.html).toggle(EMPTY_MARKER, !hasFlowElements);\n};\n\n/**\n * Add a drilldown button to the given element assuming the plane has the same\n * ID as the element.\n *\n * @param {Shape} element The collapsed shape.\n */\nDrilldownOverlayBehavior.prototype._addOverlay = function(element) {\n  var canvas = this._canvas,\n      overlays = this._overlays,\n      bo = getBusinessObject(element);\n\n  var existingOverlays = overlays.get({ element: element, type: 'drilldown' });\n\n  if (existingOverlays.length) {\n    this._removeOverlay(element);\n  }\n\n  var button = domify('<button type=\"button\" class=\"bjs-drilldown\">' + ARROW_DOWN_SVG + '</button>'),\n      elementName = bo.get('name') || bo.get('id'),\n      title = this._translate('Open {element}', { element: elementName });\n  button.setAttribute('title', title);\n\n  button.addEventListener('click', function() {\n    canvas.setRootElement(canvas.findRoot(getPlaneIdFromShape(element)));\n  });\n\n  overlays.add(element, 'drilldown', {\n    position: {\n      bottom: -7,\n      right: -8\n    },\n    html: button\n  });\n\n  this._updateOverlayVisibility(element);\n};\n\nDrilldownOverlayBehavior.prototype._removeOverlay = function(element) {\n  var overlays = this._overlays;\n\n  overlays.remove({\n    element: element,\n    type: 'drilldown'\n  });\n};\n\nDrilldownOverlayBehavior.$inject = [\n  'canvas',\n  'eventBus',\n  'elementRegistry',\n  'overlays',\n  'translate'\n];","import OverlaysModule from 'diagram-js/lib/features/overlays';\nimport ChangeSupportModule from 'diagram-js/lib/features/change-support';\nimport RootElementsModule from 'diagram-js/lib/features/root-elements';\n\nimport DrilldownBreadcrumbs from './DrilldownBreadcrumbs';\nimport DrilldownCentering from './DrilldownCentering';\nimport SubprocessCompatibility from './SubprocessCompatibility';\nimport DrilldownOverlayBehavior from './DrilldownOverlayBehavior';\n\nexport default {\n  __depends__: [ OverlaysModule, ChangeSupportModule, RootElementsModule ],\n  __init__: [ 'drilldownBreadcrumbs', 'drilldownOverlayBehavior', 'drilldownCentering', 'subprocessCompatibility' ],\n  drilldownBreadcrumbs: [ 'type', DrilldownBreadcrumbs ],\n  drilldownCentering: [ 'type', DrilldownCentering ],\n  drilldownOverlayBehavior: [ 'type', DrilldownOverlayBehavior ],\n  subprocessCompatibility: [ 'type', SubprocessCompatibility ]\n};","import { getBBox } from '../../util/Elements';\n\nvar LOW_PRIORITY = 500;\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  assign,\n  forEach,\n  isFunction\n} from 'min-dash';\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('./OutlineProvider').default} OutlineProvider\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../../draw/Styles').default} Styles\n */\n\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} eventBus\n * @param {Styles} styles\n */\nexport default function Outline(eventBus, styles) {\n\n  this._eventBus = eventBus;\n\n  this.offset = 5;\n\n  var OUTLINE_STYLE = styles.cls('djs-outline', [ 'no-fill' ]);\n\n  var self = this;\n\n  /**\n   * @param {SVGElement} gfx\n   *\n   * @return {SVGElement} outline\n   */\n  function createOutline(gfx) {\n    var outline = svgCreate('rect');\n\n    svgAttr(outline, assign({\n      x: 0,\n      y: 0,\n      rx: 4,\n      width: 100,\n      height: 100\n    }, OUTLINE_STYLE));\n\n    return outline;\n  }\n\n  // A low priortity is necessary, because outlines of labels have to be updated\n  // after the label bounds have been updated in the renderer.\n  eventBus.on([ 'shape.added', 'shape.changed' ], LOW_PRIORITY, function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    var outline = domQuery('.djs-outline', gfx);\n\n    if (!outline) {\n      outline = self.getOutline(element) || createOutline(gfx);\n      svgAppend(gfx, outline);\n    }\n\n    self.updateShapeOutline(outline, element);\n  });\n\n  eventBus.on([ 'connection.added', 'connection.changed' ], function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    var outline = domQuery('.djs-outline', gfx);\n\n    if (!outline) {\n      outline = createOutline(gfx);\n      svgAppend(gfx, outline);\n    }\n\n    self.updateConnectionOutline(outline, element);\n  });\n}\n\n\n/**\n * Updates the outline of a shape respecting the dimension of the\n * element and an outline offset.\n *\n * @param {SVGElement} outline\n * @param {Element} element\n */\nOutline.prototype.updateShapeOutline = function(outline, element) {\n\n  var updated = false;\n  var providers = this._getProviders();\n\n  if (providers.length) {\n    forEach(providers, function(provider) {\n      updated = updated || provider.updateOutline(element, outline);\n    });\n  }\n\n  if (!updated) {\n    svgAttr(outline, {\n      x: -this.offset,\n      y: -this.offset,\n      width: element.width + this.offset * 2,\n      height: element.height + this.offset * 2\n    });\n  }\n};\n\n/**\n * Updates the outline of a connection respecting the bounding box of\n * the connection and an outline offset.\n * Register an outline provider with the given priority.\n *\n * @param {SVGElement} outline\n * @param {Element} connection\n */\nOutline.prototype.updateConnectionOutline = function(outline, connection) {\n  var bbox = getBBox(connection);\n\n  svgAttr(outline, {\n    x: bbox.x - this.offset,\n    y: bbox.y - this.offset,\n    width: bbox.width + this.offset * 2,\n    height: bbox.height + this.offset * 2\n  });\n};\n\n/**\n * Register an outline provider with the given priority.\n *\n * @param {number} priority\n * @param {OutlineProvider} provider\n */\nOutline.prototype.registerProvider = function(priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('outline.getProviders', priority, function(event) {\n    event.providers.push(provider);\n  });\n};\n\n/**\n * Returns the registered outline providers.\n *\n * @returns {OutlineProvider[]}\n */\nOutline.prototype._getProviders = function() {\n  var event = this._eventBus.createEvent({\n    type: 'outline.getProviders',\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\n/**\n * Returns the outline for an element.\n *\n * @param {Element} element\n */\nOutline.prototype.getOutline = function(element) {\n  var outline;\n  var providers = this._getProviders();\n\n  forEach(providers, function(provider) {\n\n    if (!isFunction(provider.getOutline)) {\n      return;\n    }\n\n    outline = outline || provider.getOutline(element);\n  });\n\n  return outline;\n};\n\nOutline.$inject = [ 'eventBus', 'styles', 'elementRegistry' ];","import Outline from './Outline';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'outline' ],\n  outline: [ 'type', Outline ]\n};","import {\n  create as svgCreate\n} from 'tiny-svg';\n\nexport const DATA_OBJECT_REFERENCE_OUTLINE_PATH = 'M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z';\nexport const DATA_STORE_REFERENCE_OUTLINE_PATH = 'M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z';\n\n/**\n * @typedef { import('diagram-js/lib/util/Types').Dimensions} Dimensions\n */\n\n/**\n * @type {Dimensions}\n */\nexport const DATA_OBJECT_REFERENCE_STANDARD_SIZE = { width: 36, height: 50 };\n\n/**\n * @type {Dimensions}\n */\nexport const DATA_STORE_REFERENCE_STANDARD_SIZE = { width: 50, height: 50 };\n\n/**\n * Create a path element with given attributes.\n * @param {string} path\n * @param {Object} attrs\n * @param {Object} OUTLINE_STYLE\n * @return {SVGElement}\n */\nexport function createPath(path, attrs, OUTLINE_STYLE) {\n  return svgCreate('path', {\n    d: path,\n    strokeWidth: 2,\n    transform: `translate(${attrs.x}, ${attrs.y})`,\n    ...OUTLINE_STYLE\n  });\n}","import { assign } from 'min-dash';\n\nimport {\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  is,\n  isAny\n} from '../../util/ModelUtil';\n\nimport { isLabel } from '../../util/LabelUtil';\n\nimport {\n  DATA_OBJECT_REFERENCE_OUTLINE_PATH,\n  DATA_STORE_REFERENCE_OUTLINE_PATH,\n  DATA_OBJECT_REFERENCE_STANDARD_SIZE,\n  DATA_STORE_REFERENCE_STANDARD_SIZE,\n  createPath\n} from './OutlineUtil';\n\n/**\n * @typedef { import('diagram-js/lib/features/outline/OutlineProvider').default } BaseOutlineProvider\n *\n * @typedef { import('diagram-js/lib/features/outline/OutlineProvider').Outline } Outline\n *\n * @typedef { import('diagram-js/lib/draw/Styles').default } Styles\n *\n * @typedef { import('diagram-js/lib/model/Types').Element } Element\n */\n\nconst DEFAULT_OFFSET = 5;\n\n/**\n * BPMN-specific outline provider.\n *\n * @implements {BaseOutlineProvider}\n *\n * @param {Outline} outline\n * @param {Styles} styles\n */\nexport default function OutlineProvider(outline, styles) {\n\n  this._styles = styles;\n  outline.registerProvider(this);\n}\n\nOutlineProvider.$inject = [\n  'outline',\n  'styles'\n];\n\n/**\n * Returns outline for a given element.\n *\n * @param {Element} element\n *\n * @return {Outline}\n */\nOutlineProvider.prototype.getOutline = function(element) {\n\n  const OUTLINE_STYLE = this._styles.cls('djs-outline', [ 'no-fill' ]);\n\n  var outline;\n\n  if (isLabel(element)) {\n    return;\n  }\n\n  if (is(element, 'bpmn:Gateway')) {\n    outline = svgCreate('rect');\n\n    assign(outline.style, {\n      'transform-box': 'fill-box',\n      'transform': 'rotate(45deg)',\n      'transform-origin': 'center'\n    });\n\n    svgAttr(outline, assign({\n      x: 2,\n      y: 2,\n      rx: 4,\n      width: element.width - 4,\n      height: element.height - 4,\n    }, OUTLINE_STYLE));\n\n  } else if (isAny(element, [ 'bpmn:Task', 'bpmn:SubProcess', 'bpmn:Group', 'bpmn:CallActivity' ])) {\n    outline = svgCreate('rect');\n\n    svgAttr(outline, assign({\n      x: -DEFAULT_OFFSET,\n      y: -DEFAULT_OFFSET,\n      rx: 14,\n      width: element.width + DEFAULT_OFFSET * 2,\n      height: element.height + DEFAULT_OFFSET * 2\n    }, OUTLINE_STYLE));\n\n  } else if (is(element, 'bpmn:EndEvent')) {\n\n    outline = svgCreate('circle');\n\n    // Extra 1px offset needed due to increased stroke-width of end event\n    // which makes it bigger than other events.\n\n    svgAttr(outline, assign({\n      cx: element.width / 2,\n      cy: element.height / 2,\n      r: element.width / 2 + DEFAULT_OFFSET + 1\n    }, OUTLINE_STYLE));\n\n  } else if (is(element, 'bpmn:Event')) {\n    outline = svgCreate('circle');\n\n    svgAttr(outline, assign({\n      cx: element.width / 2,\n      cy: element.height / 2,\n      r: element.width / 2 + DEFAULT_OFFSET\n    }, OUTLINE_STYLE));\n\n  } else if (is(element, 'bpmn:DataObjectReference') && isStandardSize(element, 'bpmn:DataObjectReference')) {\n\n    outline = createPath(\n      DATA_OBJECT_REFERENCE_OUTLINE_PATH,\n      { x: -6, y: -6 },\n      OUTLINE_STYLE\n    );\n\n  } else if (is(element, 'bpmn:DataStoreReference') && isStandardSize(element, 'bpmn:DataStoreReference')) {\n\n    outline = createPath(\n      DATA_STORE_REFERENCE_OUTLINE_PATH,\n      { x: -6, y: -6 },\n      OUTLINE_STYLE\n    );\n  }\n\n  return outline;\n};\n\n/**\n * Updates the outline for a given element.\n * Returns true if the update for the given element was handled by this provider.\n *\n * @param {Element} element\n * @param {Outline} outline\n * @returns {boolean}\n */\nOutlineProvider.prototype.updateOutline = function(element, outline) {\n\n  if (isLabel(element)) {\n    return;\n  }\n\n  if (isAny(element, [ 'bpmn:SubProcess', 'bpmn:Group' ])) {\n\n    svgAttr(outline, {\n      width: element.width + DEFAULT_OFFSET * 2,\n      height: element.height + DEFAULT_OFFSET * 2\n    });\n\n    return true;\n\n  } else if (isAny(element, [\n    'bpmn:Event',\n    'bpmn:Gateway',\n    'bpmn:DataStoreReference',\n    'bpmn:DataObjectReference'\n  ])) {\n    return true;\n  }\n\n  return false;\n};\n\n\n// helpers //////////\n\nfunction isStandardSize(element, type) {\n  var standardSize;\n\n  if (type === 'bpmn:DataObjectReference') {\n    standardSize = DATA_OBJECT_REFERENCE_STANDARD_SIZE;\n  } else if (type === 'bpmn:DataStoreReference') {\n    standardSize = DATA_STORE_REFERENCE_STANDARD_SIZE;\n  }\n\n  return element.width === standardSize.width\n          && element.height === standardSize.height;\n}","import Ouline from 'diagram-js/lib/features/outline';\nimport OulineProvider from './OutlineProvider';\n\nexport default {\n  __depends__: [\n    Ouline\n  ],\n  __init__: [ 'outlineProvider' ],\n  outlineProvider: [ 'type', OulineProvider ]\n};\n","/**\n * @typedef {import('../util/Types').Point} Point\n */\n\nfunction __stopPropagation(event) {\n  if (!event || typeof event.stopPropagation !== 'function') {\n    return;\n  }\n\n  event.stopPropagation();\n}\n\n/**\n * @param {import('../core/EventBus').Event} event\n *\n * @return {Event}\n */\nexport function getOriginal(event) {\n  return event.originalEvent || event.srcEvent;\n}\n\n/**\n * @param {Event|import('../core/EventBus').Event} event\n */\nexport function stopPropagation(event) {\n  __stopPropagation(event);\n  __stopPropagation(getOriginal(event));\n}\n\n/**\n * @param {Event} event\n *\n * @return {Point|null}\n */\nexport function toPoint(event) {\n\n  if (event.pointers && event.pointers.length) {\n    event = event.pointers[0];\n  }\n\n  if (event.touches && event.touches.length) {\n    event = event.touches[0];\n  }\n\n  return event ? {\n    x: event.clientX,\n    y: event.clientY\n  } : null;\n}","export function isMac() {\n  return (/mac/i).test(navigator.platform);\n}","import {\n  getOriginal as getOriginalEvent\n} from './Event';\n\nimport {\n  isMac\n} from './Platform';\n\nexport {\n  isMac\n} from './Platform';\n\n/**\n * @param {MouseEvent} event\n * @param {string} button\n *\n * @return {boolean}\n */\nexport function isButton(event, button) {\n  return (getOriginalEvent(event) || event).button === button;\n}\n\n/**\n * @param {MouseEvent} event\n *\n * @return {boolean}\n */\nexport function isPrimaryButton(event) {\n\n  // button === 0 -> left ka primary mouse button\n  return isButton(event, 0);\n}\n\n/**\n * @param {MouseEvent} event\n *\n * @return {boolean}\n */\nexport function isAuxiliaryButton(event) {\n\n  // button === 1 -> auxiliary ka wheel button\n  return isButton(event, 1);\n}\n\n/**\n * @param {MouseEvent} event\n *\n * @return {boolean}\n */\nexport function isSecondaryButton(event) {\n\n  // button === 2 -> right ka secondary button\n  return isButton(event, 2);\n}\n\n/**\n * @param {MouseEvent} event\n *\n * @return {boolean}\n */\nexport function hasPrimaryModifier(event) {\n  var originalEvent = getOriginalEvent(event) || event;\n\n  if (!isPrimaryButton(event)) {\n    return false;\n  }\n\n  // Use cmd as primary modifier key for mac OS\n  if (isMac()) {\n    return originalEvent.metaKey;\n  } else {\n    return originalEvent.ctrlKey;\n  }\n}\n\n/**\n * @param {MouseEvent} event\n *\n * @return {boolean}\n */\nexport function hasSecondaryModifier(event) {\n  var originalEvent = getOriginalEvent(event) || event;\n\n  return isPrimaryButton(event) && originalEvent.shiftKey;\n}\n","import {\n  forEach,\n  assign\n} from 'min-dash';\n\nimport {\n  delegate as domDelegate,\n  query as domQuery,\n  queryAll as domQueryAll\n} from 'min-dom';\n\nimport {\n  isPrimaryButton,\n  isAuxiliaryButton\n} from '../../util/Mouse';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  createLine,\n  updateLine\n} from '../../util/RenderUtil';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../../draw/Styles').default} Styles\n *\n * @typedef {import('../../util/Types').Point} Point\n */\n\nfunction allowAll(event) { return true; }\n\nfunction allowPrimaryAndAuxiliary(event) {\n  return isPrimaryButton(event) || isAuxiliaryButton(event);\n}\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * A plugin that provides interaction events for diagram elements.\n *\n * It emits the following events:\n *\n *   * element.click\n *   * element.contextmenu\n *   * element.dblclick\n *   * element.hover\n *   * element.mousedown\n *   * element.mousemove\n *   * element.mouseup\n *   * element.out\n *\n * Each event is a tuple { element, gfx, originalEvent }.\n *\n * Canceling the event via Event#preventDefault()\n * prevents the original DOM operation.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Styles} styles\n */\nexport default function InteractionEvents(eventBus, elementRegistry, styles) {\n\n  var self = this;\n\n  /**\n   * Fire an interaction event.\n   *\n   * @param {string} type local event name, e.g. element.click.\n   * @param {MouseEvent|TouchEvent} event native event\n   * @param {Element} [element] the diagram element to emit the event on;\n   *                                   defaults to the event target\n   */\n  function fire(type, event, element) {\n\n    if (isIgnored(type, event)) {\n      return;\n    }\n\n    var target, gfx, returnValue;\n\n    if (!element) {\n      target = event.delegateTarget || event.target;\n\n      if (target) {\n        gfx = target;\n        element = elementRegistry.get(gfx);\n      }\n    } else {\n      gfx = elementRegistry.getGraphics(element);\n    }\n\n    if (!gfx || !element) {\n      return;\n    }\n\n    returnValue = eventBus.fire(type, {\n      element: element,\n      gfx: gfx,\n      originalEvent: event\n    });\n\n    if (returnValue === false) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n\n  // TODO(nikku): document this\n  var handlers = {};\n\n  function mouseHandler(localEventName) {\n    return handlers[localEventName];\n  }\n\n  function isIgnored(localEventName, event) {\n\n    var filter = ignoredFilters[localEventName] || isPrimaryButton;\n\n    // only react on left mouse button interactions\n    // except for interaction events that are enabled\n    // for secundary mouse button\n    return !filter(event);\n  }\n\n  var bindings = {\n    click: 'element.click',\n    contextmenu: 'element.contextmenu',\n    dblclick: 'element.dblclick',\n    mousedown: 'element.mousedown',\n    mousemove: 'element.mousemove',\n    mouseover: 'element.hover',\n    mouseout: 'element.out',\n    mouseup: 'element.mouseup',\n  };\n\n  var ignoredFilters = {\n    'element.contextmenu': allowAll,\n    'element.mousedown': allowPrimaryAndAuxiliary,\n    'element.mouseup': allowPrimaryAndAuxiliary,\n    'element.click': allowPrimaryAndAuxiliary,\n    'element.dblclick': allowPrimaryAndAuxiliary\n  };\n\n\n  // manual event trigger //////////\n\n  /**\n   * Trigger an interaction event (based on a native dom event)\n   * on the target shape or connection.\n   *\n   * @param {string} eventName the name of the triggered DOM event\n   * @param {MouseEvent|TouchEvent} event\n   * @param {Element} targetElement\n   */\n  function triggerMouseEvent(eventName, event, targetElement) {\n\n    // i.e. element.mousedown...\n    var localEventName = bindings[eventName];\n\n    if (!localEventName) {\n      throw new Error('unmapped DOM event name <' + eventName + '>');\n    }\n\n    return fire(localEventName, event, targetElement);\n  }\n\n\n  var ELEMENT_SELECTOR = 'svg, .djs-element';\n\n  // event handling ///////\n\n  function registerEvent(node, event, localEvent, ignoredFilter) {\n\n    var handler = handlers[localEvent] = function(event) {\n      fire(localEvent, event);\n    };\n\n    if (ignoredFilter) {\n      ignoredFilters[localEvent] = ignoredFilter;\n    }\n\n    handler.$delegate = domDelegate.bind(node, ELEMENT_SELECTOR, event, handler);\n  }\n\n  function unregisterEvent(node, event, localEvent) {\n\n    var handler = mouseHandler(localEvent);\n\n    if (!handler) {\n      return;\n    }\n\n    domDelegate.unbind(node, event, handler.$delegate);\n  }\n\n  function registerEvents(svg) {\n    forEach(bindings, function(val, key) {\n      registerEvent(svg, key, val);\n    });\n  }\n\n  function unregisterEvents(svg) {\n    forEach(bindings, function(val, key) {\n      unregisterEvent(svg, key, val);\n    });\n  }\n\n  eventBus.on('canvas.destroy', function(event) {\n    unregisterEvents(event.svg);\n  });\n\n  eventBus.on('canvas.init', function(event) {\n    registerEvents(event.svg);\n  });\n\n\n  // hit box updating ////////////////\n\n  eventBus.on([ 'shape.added', 'connection.added' ], function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    eventBus.fire('interactionEvents.createHit', { element: element, gfx: gfx });\n  });\n\n  // Update djs-hit on change.\n  // A low priortity is necessary, because djs-hit of labels has to be updated\n  // after the label bounds have been updated in the renderer.\n  eventBus.on([\n    'shape.changed',\n    'connection.changed'\n  ], LOW_PRIORITY, function(event) {\n\n    var element = event.element,\n        gfx = event.gfx;\n\n    eventBus.fire('interactionEvents.updateHit', { element: element, gfx: gfx });\n  });\n\n  eventBus.on('interactionEvents.createHit', LOW_PRIORITY, function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    self.createDefaultHit(element, gfx);\n  });\n\n  eventBus.on('interactionEvents.updateHit', function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    self.updateDefaultHit(element, gfx);\n  });\n\n\n  // hit styles ////////////\n\n  var STROKE_HIT_STYLE = createHitStyle('djs-hit djs-hit-stroke');\n\n  var CLICK_STROKE_HIT_STYLE = createHitStyle('djs-hit djs-hit-click-stroke');\n\n  var ALL_HIT_STYLE = createHitStyle('djs-hit djs-hit-all');\n\n  var NO_MOVE_HIT_STYLE = createHitStyle('djs-hit djs-hit-no-move');\n\n  var HIT_TYPES = {\n    'all': ALL_HIT_STYLE,\n    'click-stroke': CLICK_STROKE_HIT_STYLE,\n    'stroke': STROKE_HIT_STYLE,\n    'no-move': NO_MOVE_HIT_STYLE\n  };\n\n  function createHitStyle(classNames, attrs) {\n\n    attrs = assign({\n      stroke: 'white',\n      strokeWidth: 15\n    }, attrs || {});\n\n    return styles.cls(classNames, [ 'no-fill', 'no-border' ], attrs);\n  }\n\n\n  // style helpers ///////////////\n\n  function applyStyle(hit, type) {\n\n    var attrs = HIT_TYPES[type];\n\n    if (!attrs) {\n      throw new Error('invalid hit type <' + type + '>');\n    }\n\n    svgAttr(hit, attrs);\n\n    return hit;\n  }\n\n  function appendHit(gfx, hit) {\n    svgAppend(gfx, hit);\n  }\n\n\n  // API\n\n  /**\n   * Remove hints on the given graphics.\n   *\n   * @param {SVGElement} gfx\n   */\n  this.removeHits = function(gfx) {\n    var hits = domQueryAll('.djs-hit', gfx);\n\n    forEach(hits, svgRemove);\n  };\n\n  /**\n   * Create default hit for the given element.\n   *\n   * @param {Element} element\n   * @param {SVGElement} gfx\n   *\n   * @return {SVGElement} created hit\n   */\n  this.createDefaultHit = function(element, gfx) {\n    var waypoints = element.waypoints,\n        isFrame = element.isFrame,\n        boxType;\n\n    if (waypoints) {\n      return this.createWaypointsHit(gfx, waypoints);\n    } else {\n\n      boxType = isFrame ? 'stroke' : 'all';\n\n      return this.createBoxHit(gfx, boxType, {\n        width: element.width,\n        height: element.height\n      });\n    }\n  };\n\n  /**\n   * Create hits for the given waypoints.\n   *\n   * @param {SVGElement} gfx\n   * @param {Point[]} waypoints\n   *\n   * @return {SVGElement}\n   */\n  this.createWaypointsHit = function(gfx, waypoints) {\n\n    var hit = createLine(waypoints);\n\n    applyStyle(hit, 'stroke');\n\n    appendHit(gfx, hit);\n\n    return hit;\n  };\n\n  /**\n   * Create hits for a box.\n   *\n   * @param {SVGElement} gfx\n   * @param {string} type\n   * @param {Object} attrs\n   *\n   * @return {SVGElement}\n   */\n  this.createBoxHit = function(gfx, type, attrs) {\n\n    attrs = assign({\n      x: 0,\n      y: 0\n    }, attrs);\n\n    var hit = svgCreate('rect');\n\n    applyStyle(hit, type);\n\n    svgAttr(hit, attrs);\n\n    appendHit(gfx, hit);\n\n    return hit;\n  };\n\n  /**\n   * Update default hit of the element.\n   *\n   * @param {Element} element\n   * @param {SVGElement} gfx\n   *\n   * @return {SVGElement} updated hit\n   */\n  this.updateDefaultHit = function(element, gfx) {\n\n    var hit = domQuery('.djs-hit', gfx);\n\n    if (!hit) {\n      return;\n    }\n\n    if (element.waypoints) {\n      updateLine(hit, element.waypoints);\n    } else {\n      svgAttr(hit, {\n        width: element.width,\n        height: element.height\n      });\n    }\n\n    return hit;\n  };\n\n  this.fire = fire;\n\n  this.triggerMouseEvent = triggerMouseEvent;\n\n  this.mouseHandler = mouseHandler;\n\n  this.registerEvent = registerEvent;\n  this.unregisterEvent = unregisterEvent;\n}\n\n\nInteractionEvents.$inject = [\n  'eventBus',\n  'elementRegistry',\n  'styles'\n];\n\n\n/**\n * An event indicating that the mouse hovered over an element\n *\n * @event element.hover\n *\n * @type {Object}\n * @property {Element} element\n * @property {SVGElement} gfx\n * @property {Event} originalEvent\n */\n\n/**\n * An event indicating that the mouse has left an element\n *\n * @event element.out\n *\n * @type {Object}\n * @property {Element} element\n * @property {SVGElement} gfx\n * @property {Event} originalEvent\n */\n\n/**\n * An event indicating that the mouse has clicked an element\n *\n * @event element.click\n *\n * @type {Object}\n * @property {Element} element\n * @property {SVGElement} gfx\n * @property {Event} originalEvent\n */\n\n/**\n * An event indicating that the mouse has double clicked an element\n *\n * @event element.dblclick\n *\n * @type {Object}\n * @property {Element} element\n * @property {SVGElement} gfx\n * @property {Event} originalEvent\n */\n\n/**\n * An event indicating that the mouse has gone down on an element.\n *\n * @event element.mousedown\n *\n * @type {Object}\n * @property {Element} element\n * @property {SVGElement} gfx\n * @property {Event} originalEvent\n */\n\n/**\n * An event indicating that the mouse has gone up on an element.\n *\n * @event element.mouseup\n *\n * @type {Object}\n * @property {Element} element\n * @property {SVGElement} gfx\n * @property {Event} originalEvent\n */\n\n/**\n * An event indicating that the context menu action is triggered\n * via mouse or touch controls.\n *\n * @event element.contextmenu\n *\n * @type {Object}\n * @property {Element} element\n * @property {SVGElement} gfx\n * @property {Event} originalEvent\n */","import InteractionEvents from './InteractionEvents';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'interactionEvents' ],\n  interactionEvents: [ 'type', InteractionEvents ]\n};","import {\n  isArray,\n  forEach\n} from 'min-dash';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\n/**\n * A service that offers the current selection in a diagram.\n * Offers the api to control the selection, too.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function Selection(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  /**\n   * @type {Object[]}\n   */\n  this._selectedElements = [];\n\n  var self = this;\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var element = e.element;\n    self.deselect(element);\n  });\n\n  eventBus.on([ 'diagram.clear', 'root.set' ], function(e) {\n    self.select(null);\n  });\n}\n\nSelection.$inject = [ 'eventBus', 'canvas' ];\n\n/**\n * Deselect an element.\n *\n * @param {Object} element The element to deselect.\n */\nSelection.prototype.deselect = function(element) {\n  var selectedElements = this._selectedElements;\n\n  var idx = selectedElements.indexOf(element);\n\n  if (idx !== -1) {\n    var oldSelection = selectedElements.slice();\n\n    selectedElements.splice(idx, 1);\n\n    this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n  }\n};\n\n/**\n * Get the selected elements.\n *\n * @return {Object[]} The selected elements.\n */\nSelection.prototype.get = function() {\n  return this._selectedElements;\n};\n\n/**\n * Check whether an element is selected.\n *\n * @param {Object} element The element.\n *\n * @return {boolean} Whether the element is selected.\n */\nSelection.prototype.isSelected = function(element) {\n  return this._selectedElements.indexOf(element) !== -1;\n};\n\n\n/**\n * Select one or many elements.\n *\n * @param {Object|Object[]} elements The element(s) to select.\n * @param {boolean} [add] Whether to add the element(s) to the selected elements.\n * Defaults to `false`.\n */\nSelection.prototype.select = function(elements, add) {\n  var selectedElements = this._selectedElements,\n      oldSelection = selectedElements.slice();\n\n  if (!isArray(elements)) {\n    elements = elements ? [ elements ] : [];\n  }\n\n  var canvas = this._canvas;\n\n  var rootElement = canvas.getRootElement();\n\n  elements = elements.filter(function(element) {\n    var elementRoot = canvas.findRoot(element);\n\n    return rootElement === elementRoot;\n  });\n\n  // selection may be cleared by passing an empty array or null\n  // to the method\n  if (add) {\n    forEach(elements, function(element) {\n      if (selectedElements.indexOf(element) !== -1) {\n\n        // already selected\n        return;\n      } else {\n        selectedElements.push(element);\n      }\n    });\n  } else {\n    this._selectedElements = selectedElements = elements.slice();\n  }\n\n  this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n};\n","import {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  clear as svgClear,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport { getBBox } from '../../util/Elements';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('./Selection').default} Selection\n */\n\nvar MARKER_HOVER = 'hover',\n    MARKER_SELECTED = 'selected';\n\nvar SELECTION_OUTLINE_PADDING = 6;\n\n\n/**\n * A plugin that adds a visible selection UI to shapes and connections\n * by appending the <code>hover</code> and <code>selected</code> classes to them.\n *\n * @class\n *\n * Makes elements selectable, too.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Selection} selection\n */\nexport default function SelectionVisuals(canvas, eventBus, selection) {\n  this._canvas = canvas;\n\n  var self = this;\n\n  this._multiSelectionBox = null;\n\n  function addMarker(e, cls) {\n    canvas.addMarker(e, cls);\n  }\n\n  function removeMarker(e, cls) {\n    canvas.removeMarker(e, cls);\n  }\n\n  eventBus.on('element.hover', function(event) {\n    addMarker(event.element, MARKER_HOVER);\n  });\n\n  eventBus.on('element.out', function(event) {\n    removeMarker(event.element, MARKER_HOVER);\n  });\n\n  eventBus.on('selection.changed', function(event) {\n\n    function deselect(s) {\n      removeMarker(s, MARKER_SELECTED);\n    }\n\n    function select(s) {\n      addMarker(s, MARKER_SELECTED);\n    }\n\n    var oldSelection = event.oldSelection,\n        newSelection = event.newSelection;\n\n    forEach(oldSelection, function(e) {\n      if (newSelection.indexOf(e) === -1) {\n        deselect(e);\n      }\n    });\n\n    forEach(newSelection, function(e) {\n      if (oldSelection.indexOf(e) === -1) {\n        select(e);\n      }\n    });\n\n    self._updateSelectionOutline(newSelection);\n  });\n\n\n  eventBus.on('element.changed', function(event) {\n    if (selection.isSelected(event.element)) {\n      self._updateSelectionOutline(selection.get());\n    }\n  });\n}\n\nSelectionVisuals.$inject = [\n  'canvas',\n  'eventBus',\n  'selection'\n];\n\nSelectionVisuals.prototype._updateSelectionOutline = function(selection) {\n  var layer = this._canvas.getLayer('selectionOutline');\n\n  svgClear(layer);\n\n  var enabled = selection.length > 1;\n\n  var container = this._canvas.getContainer();\n\n  svgClasses(container)[enabled ? 'add' : 'remove']('djs-multi-select');\n\n  if (!enabled) {\n    return;\n  }\n\n  var bBox = addSelectionOutlinePadding(getBBox(selection));\n\n  var rect = svgCreate('rect');\n\n  svgAttr(rect, assign({\n    rx: 3\n  }, bBox));\n\n  svgClasses(rect).add('djs-selection-outline');\n\n  svgAppend(layer, rect);\n};\n\n// helpers //////////\n\nfunction addSelectionOutlinePadding(bBox) {\n  return {\n    x: bBox.x - SELECTION_OUTLINE_PADDING,\n    y: bBox.y - SELECTION_OUTLINE_PADDING,\n    width: bBox.width + SELECTION_OUTLINE_PADDING * 2,\n    height: bBox.height + SELECTION_OUTLINE_PADDING * 2\n  };\n}","import {\n  hasSecondaryModifier,\n  isPrimaryButton\n} from '../../util/Mouse';\n\nimport {\n  find,\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('./Selection').default} Selection\n */\n\n/**\n * @param {EventBus} eventBus\n * @param {Selection} selection\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n */\nexport default function SelectionBehavior(eventBus, selection, canvas, elementRegistry) {\n\n  // Select elements on create\n  eventBus.on('create.end', 500, function(event) {\n    var context = event.context,\n        canExecute = context.canExecute,\n        elements = context.elements,\n        hints = context.hints || {},\n        autoSelect = hints.autoSelect;\n\n    if (canExecute) {\n      if (autoSelect === false) {\n\n        // Select no elements\n        return;\n      }\n\n      if (isArray(autoSelect)) {\n        selection.select(autoSelect);\n      } else {\n\n        // Select all elements by default\n        selection.select(elements.filter(isShown));\n      }\n    }\n  });\n\n  // Select connection targets on connect\n  eventBus.on('connect.end', 500, function(event) {\n    var context = event.context,\n        connection = context.connection;\n\n    if (connection) {\n      selection.select(connection);\n    }\n  });\n\n  // Select shapes on move\n  eventBus.on('shape.move.end', 500, function(event) {\n    var previousSelection = event.previousSelection || [];\n\n    var shape = elementRegistry.get(event.context.shape.id);\n\n    // Always select main shape on move\n    var isSelected = find(previousSelection, function(selectedShape) {\n      return shape.id === selectedShape.id;\n    });\n\n    if (!isSelected) {\n      selection.select(shape);\n    }\n  });\n\n  // Select elements on click\n  eventBus.on('element.click', function(event) {\n\n    if (!isPrimaryButton(event)) {\n      return;\n    }\n\n    var element = event.element;\n\n    if (element === canvas.getRootElement()) {\n      element = null;\n    }\n\n    var isSelected = selection.isSelected(element),\n        isMultiSelect = selection.get().length > 1;\n\n    // Add to selection if SHIFT pressed\n    var add = hasSecondaryModifier(event);\n\n    if (isSelected && isMultiSelect) {\n      if (add) {\n\n        // Deselect element\n        return selection.deselect(element);\n      } else {\n\n        // Select element only\n        return selection.select(element);\n      }\n    } else if (!isSelected) {\n\n      // Select element\n      selection.select(element, add);\n    } else {\n\n      // Deselect element\n      selection.deselect(element);\n    }\n  });\n}\n\nSelectionBehavior.$inject = [\n  'eventBus',\n  'selection',\n  'canvas',\n  'elementRegistry'\n];\n\n\nfunction isShown(element) {\n  return !element.hidden;\n}\n","import InteractionEventsModule from '../interaction-events';\nimport OutlineModule from '../outline';\n\nimport Selection from './Selection';\nimport SelectionVisuals from './SelectionVisuals';\nimport SelectionBehavior from './SelectionBehavior';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'selectionVisuals', 'selectionBehavior' ],\n  __depends__: [\n    InteractionEventsModule,\n    OutlineModule\n  ],\n  selection: [ 'type', Selection ],\n  selectionVisuals: [ 'type', SelectionVisuals ],\n  selectionBehavior: [ 'type', SelectionBehavior ]\n};\n","import inherits from 'inherits-browser';\n\nimport CoreModule from './core';\nimport DrilldownModdule from './features/drilldown';\nimport OutlineModule from './features/outline';\nimport OverlaysModule from 'diagram-js/lib/features/overlays';\nimport SelectionModule from 'diagram-js/lib/features/selection';\nimport TranslateModule from 'diagram-js/lib/i18n/translate';\n\nimport BaseViewer from './BaseViewer';\n\n\n/**\n * @typedef { import('./BaseViewer').BaseViewerOptions } BaseViewerOptions\n */\n\n/**\n * A viewer for BPMN 2.0 diagrams.\n *\n * Have a look at {@link bpmn-js/lib/NavigatedViewer} or {@link bpmn-js/lib/Modeler} for bundles that include\n * additional features.\n *\n *\n * ## Extending the Viewer\n *\n * In order to extend the viewer pass extension modules to bootstrap via the\n * `additionalModules` option. An extension module is an object that exposes\n * named services.\n *\n * The following example depicts the integration of a simple\n * logging component that integrates with interaction events:\n *\n *\n * ```javascript\n *\n * // logging component\n * function InteractionLogger(eventBus) {\n *   eventBus.on('element.hover', function(event) {\n *     console.log()\n *   })\n * }\n *\n * InteractionLogger.$inject = [ 'eventBus' ]; // minification save\n *\n * // extension module\n * var extensionModule = {\n *   __init__: [ 'interactionLogger' ],\n *   interactionLogger: [ 'type', InteractionLogger ]\n * };\n *\n * // extend the viewer\n * var bpmnViewer = new Viewer({ additionalModules: [ extensionModule ] });\n * bpmnViewer.importXML(...);\n * ```\n *\n * @template [ServiceMap=null]\n *\n * @extends BaseViewer<ServiceMap>\n *\n * @param {BaseViewerOptions} [options] The options to configure the viewer.\n */\nexport default function Viewer(options) {\n  BaseViewer.call(this, options);\n}\n\ninherits(Viewer, BaseViewer);\n\n// modules the viewer is composed of\nViewer.prototype._modules = [\n  CoreModule,\n  DrilldownModdule,\n  OutlineModule,\n  OverlaysModule,\n  SelectionModule,\n  TranslateModule\n];\n\n// default moddle extensions the viewer is composed of\nViewer.prototype._moddleExtensions = {};","import { isArray } from 'min-dash';\r\n\r\nexport var KEYS_COPY = [ 'c', 'C' ];\r\nexport var KEYS_PASTE = [ 'v', 'V' ];\r\nexport var KEYS_REDO = [ 'y', 'Y' ];\r\nexport var KEYS_UNDO = [ 'z', 'Z' ];\r\n\r\n/**\r\n * Returns true if event was triggered with any modifier\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function hasModifier(event) {\r\n  return (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n * @return {boolean}\r\n */\r\nexport function isCmd(event) {\r\n\r\n  // ensure we don't react to AltGr\r\n  // (mapped to CTRL + ALT)\r\n  if (event.altKey) {\r\n    return false;\r\n  }\r\n\r\n  return event.ctrlKey || event.metaKey;\r\n}\r\n\r\n/**\r\n * Checks if key pressed is one of provided keys.\r\n *\r\n * @param {string|string[]} keys\r\n * @param {KeyboardEvent} event\r\n * @return {boolean}\r\n */\r\nexport function isKey(keys, event) {\r\n  keys = isArray(keys) ? keys : [ keys ];\r\n\r\n  return keys.indexOf(event.key) !== -1 || keys.indexOf(event.code) !== -1;\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isShift(event) {\r\n  return event.shiftKey;\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isCopy(event) {\r\n  return isCmd(event) && isKey(KEYS_COPY, event);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isPaste(event) {\r\n  return isCmd(event) && isKey(KEYS_PASTE, event);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isUndo(event) {\r\n  return isCmd(event) && !isShift(event) && isKey(KEYS_UNDO, event);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isRedo(event) {\r\n  return isCmd(event) && (\r\n    isKey(KEYS_REDO, event) || (\r\n      isKey(KEYS_UNDO, event) && isShift(event)\r\n    )\r\n  );\r\n}\r\n","import {\n  isFunction\n} from 'min-dash';\n\nimport {\n  closest as domClosest,\n  event as domEvent,\n  matches as domMatches\n} from 'min-dom';\n\nimport {\n  hasModifier,\n  isCmd,\n  isKey,\n  isShift\n} from './KeyboardUtil';\n\n/**\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {({ keyEvent: KeyboardEvent }) => any} Listener\n */\n\nvar KEYDOWN_EVENT = 'keyboard.keydown',\n    KEYUP_EVENT = 'keyboard.keyup';\n\nvar HANDLE_MODIFIER_ATTRIBUTE = 'input-handle-modified-keys';\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A keyboard abstraction that may be activated and\n * deactivated by users at will, consuming global key events\n * and triggering diagram actions.\n *\n * For keys pressed down, keyboard fires `keyboard.keydown` event.\n * The event context contains one field which is `KeyboardEvent` event.\n *\n * The implementation fires the following key events that allow\n * other components to hook into key handling:\n *\n *  - keyboard.bind\n *  - keyboard.unbind\n *  - keyboard.init\n *  - keyboard.destroy\n *\n * All events contain one field which is node.\n *\n * A default binding for the keyboard may be specified via the\n * `keyboard.bindTo` configuration option.\n *\n * @param {Object} config\n * @param {EventTarget} [config.bindTo]\n * @param {EventBus} eventBus\n */\nexport default function Keyboard(config, eventBus) {\n  var self = this;\n\n  this._config = config || {};\n  this._eventBus = eventBus;\n\n  this._keydownHandler = this._keydownHandler.bind(this);\n  this._keyupHandler = this._keyupHandler.bind(this);\n\n  // properly clean dom registrations\n  eventBus.on('diagram.destroy', function() {\n    self._fire('destroy');\n\n    self.unbind();\n  });\n\n  eventBus.on('diagram.init', function() {\n    self._fire('init');\n  });\n\n  eventBus.on('attach', function() {\n    if (config && config.bindTo) {\n      self.bind(config.bindTo);\n    }\n  });\n\n  eventBus.on('detach', function() {\n    self.unbind();\n  });\n}\n\nKeyboard.$inject = [\n  'config.keyboard',\n  'eventBus'\n];\n\nKeyboard.prototype._keydownHandler = function(event) {\n  this._keyHandler(event, KEYDOWN_EVENT);\n};\n\nKeyboard.prototype._keyupHandler = function(event) {\n  this._keyHandler(event, KEYUP_EVENT);\n};\n\nKeyboard.prototype._keyHandler = function(event, type) {\n  var eventBusResult;\n\n  if (this._isEventIgnored(event)) {\n    return;\n  }\n\n  var context = {\n    keyEvent: event\n  };\n\n  eventBusResult = this._eventBus.fire(type || KEYDOWN_EVENT, context);\n\n  if (eventBusResult) {\n    event.preventDefault();\n  }\n};\n\nKeyboard.prototype._isEventIgnored = function(event) {\n  if (event.defaultPrevented) {\n    return true;\n  }\n\n  return (\n    isInput(event.target) || (\n      isButton(event.target) && isKey([ ' ', 'Enter' ], event)\n    )\n  ) && this._isModifiedKeyIgnored(event);\n};\n\nKeyboard.prototype._isModifiedKeyIgnored = function(event) {\n  if (!isCmd(event)) {\n    return true;\n  }\n\n  var allowedModifiers = this._getAllowedModifiers(event.target);\n  return allowedModifiers.indexOf(event.key) === -1;\n};\n\nKeyboard.prototype._getAllowedModifiers = function(element) {\n  var modifierContainer = domClosest(element, '[' + HANDLE_MODIFIER_ATTRIBUTE + ']', true);\n\n  if (!modifierContainer || (this._node && !this._node.contains(modifierContainer))) {\n    return [];\n  }\n\n  return modifierContainer.getAttribute(HANDLE_MODIFIER_ATTRIBUTE).split(',');\n};\n\n/**\n * Bind keyboard events to the given DOM node.\n *\n * @param {EventTarget} node\n */\nKeyboard.prototype.bind = function(node) {\n\n  // make sure that the keyboard is only bound once to the DOM\n  this.unbind();\n\n  this._node = node;\n\n  // bind key events\n  domEvent.bind(node, 'keydown', this._keydownHandler);\n  domEvent.bind(node, 'keyup', this._keyupHandler);\n\n  this._fire('bind');\n};\n\n/**\n * @return {EventTarget}\n */\nKeyboard.prototype.getBinding = function() {\n  return this._node;\n};\n\nKeyboard.prototype.unbind = function() {\n  var node = this._node;\n\n  if (node) {\n    this._fire('unbind');\n\n    // unbind key events\n    domEvent.unbind(node, 'keydown', this._keydownHandler);\n    domEvent.unbind(node, 'keyup', this._keyupHandler);\n  }\n\n  this._node = null;\n};\n\n/**\n * @param {string} event\n */\nKeyboard.prototype._fire = function(event) {\n  this._eventBus.fire('keyboard.' + event, { node: this._node });\n};\n\n/**\n * Add a listener function that is notified with `KeyboardEvent` whenever\n * the keyboard is bound and the user presses a key. If no priority is\n * provided, the default value of 1000 is used.\n *\n * @param {number} [priority]\n * @param {Listener} listener\n * @param {string} [type='keyboard.keydown']\n */\nKeyboard.prototype.addListener = function(priority, listener, type) {\n  if (isFunction(priority)) {\n    type = listener;\n    listener = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on(type || KEYDOWN_EVENT, priority, listener);\n};\n\n/**\n * Remove a listener function.\n *\n * @param {Listener} listener\n * @param {string} [type='keyboard.keydown']\n */\nKeyboard.prototype.removeListener = function(listener, type) {\n  this._eventBus.off(type || KEYDOWN_EVENT, listener);\n};\n\nKeyboard.prototype.hasModifier = hasModifier;\nKeyboard.prototype.isCmd = isCmd;\nKeyboard.prototype.isShift = isShift;\nKeyboard.prototype.isKey = isKey;\n\n\n\n// helpers ///////\n\nfunction isInput(target) {\n  return target && (domMatches(target, 'input, textarea') || target.contentEditable === 'true');\n}\n\nfunction isButton(target) {\n  return target && domMatches(target, 'button, input[type=submit], input[type=button], a[href], [aria-role=button]');\n}","import {\n  isCmd,\n  isKey,\n  isCopy,\n  isPaste,\n  isUndo,\n  isRedo,\n  KEYS_COPY,\n  KEYS_PASTE,\n  KEYS_UNDO,\n  KEYS_REDO\n} from './KeyboardUtil';\n\n/**\n * @typedef {import('../editor-actions/EditorActions').default} EditorActions\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('./Keyboard').default} Keyboard\n */\n\nexport {\n  KEYS_COPY,\n  KEYS_PASTE,\n  KEYS_UNDO,\n  KEYS_REDO\n};\n\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * Adds default keyboard bindings.\n *\n * This does not pull in any features will bind only actions that\n * have previously been registered against the editorActions component.\n *\n * @param {EventBus} eventBus\n * @param {Keyboard} keyboard\n */\nexport default function KeyboardBindings(eventBus, keyboard) {\n\n  var self = this;\n\n  eventBus.on('editorActions.init', LOW_PRIORITY, function(event) {\n\n    var editorActions = event.editorActions;\n\n    self.registerBindings(keyboard, editorActions);\n  });\n}\n\nKeyboardBindings.$inject = [\n  'eventBus',\n  'keyboard'\n];\n\n\n/**\n * Register available keyboard bindings.\n *\n * @param {Keyboard} keyboard\n * @param {EditorActions} editorActions\n */\nKeyboardBindings.prototype.registerBindings = function(keyboard, editorActions) {\n\n  /**\n   * Add keyboard binding if respective editor action\n   * is registered.\n   *\n   * @param {string} action name\n   * @param {Function} fn that implements the key binding\n   */\n  function addListener(action, fn) {\n\n    if (editorActions.isRegistered(action)) {\n      keyboard.addListener(fn);\n    }\n  }\n\n\n  // undo\n  // (CTRL|CMD) + Z\n  addListener('undo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isUndo(event)) {\n      editorActions.trigger('undo');\n\n      return true;\n    }\n  });\n\n  // redo\n  // CTRL + Y\n  // CMD + SHIFT + Z\n  addListener('redo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isRedo(event)) {\n      editorActions.trigger('redo');\n\n      return true;\n    }\n  });\n\n  // copy\n  // CTRL/CMD + C\n  addListener('copy', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isCopy(event)) {\n      editorActions.trigger('copy');\n\n      return true;\n    }\n  });\n\n  // paste\n  // CTRL/CMD + V\n  addListener('paste', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isPaste(event)) {\n      editorActions.trigger('paste');\n\n      return true;\n    }\n  });\n\n  // zoom in one step\n  // CTRL/CMD + +\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    // quirk: it has to be triggered by `=` as well to work on international keyboard layout\n    // cf: https://github.com/bpmn-io/bpmn-js/issues/1362#issuecomment-722989754\n    if (isKey([ '+', 'Add', '=' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // zoom out one step\n  // CTRL + -\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ '-', 'Subtract' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: -1 });\n\n      return true;\n    }\n  });\n\n  // zoom to the default level\n  // CTRL + 0\n  addListener('zoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey('0', event) && isCmd(event)) {\n      editorActions.trigger('zoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // delete selected element\n  // DEL\n  addListener('removeSelection', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ 'Backspace', 'Delete', 'Del' ], event)) {\n      editorActions.trigger('removeSelection');\n\n      return true;\n    }\n  });\n};","import Keyboard from './Keyboard';\nimport KeyboardBindings from './KeyboardBindings';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'keyboard', 'keyboardBindings' ],\n  keyboard: [ 'type', Keyboard ],\n  keyboardBindings: [ 'type', KeyboardBindings ]\n};\n","import { assign } from 'min-dash';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../features/keyboard/Keyboard').default} Keyboard\n */\n\nvar DEFAULT_CONFIG = {\n  moveSpeed: 50,\n  moveSpeedAccelerated: 200\n};\n\n\n/**\n * A feature that allows users to move the canvas using the keyboard.\n *\n * @param {Object} config\n * @param {number} [config.moveSpeed=50]\n * @param {number} [config.moveSpeedAccelerated=200]\n * @param {Keyboard} keyboard\n * @param {Canvas} canvas\n */\nexport default function KeyboardMove(\n    config,\n    keyboard,\n    canvas\n) {\n\n  var self = this;\n\n  this._config = assign({}, DEFAULT_CONFIG, config || {});\n\n  keyboard.addListener(arrowsListener);\n\n\n  function arrowsListener(context) {\n\n    var event = context.keyEvent,\n        config = self._config;\n\n    if (!keyboard.isCmd(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([\n      'ArrowLeft', 'Left',\n      'ArrowUp', 'Up',\n      'ArrowDown', 'Down',\n      'ArrowRight', 'Right'\n    ], event)) {\n\n      var speed = (\n        keyboard.isShift(event) ?\n          config.moveSpeedAccelerated :\n          config.moveSpeed\n      );\n\n      var direction;\n\n      switch (event.key) {\n      case 'ArrowLeft':\n      case 'Left':\n        direction = 'left';\n        break;\n      case 'ArrowUp':\n      case 'Up':\n        direction = 'up';\n        break;\n      case 'ArrowRight':\n      case 'Right':\n        direction = 'right';\n        break;\n      case 'ArrowDown':\n      case 'Down':\n        direction = 'down';\n        break;\n      }\n\n      self.moveCanvas({\n        speed: speed,\n        direction: direction\n      });\n\n      return true;\n    }\n  }\n\n  /**\n   * @param {{\n   *   direction: 'up' | 'down' | 'left' | 'right';\n   *   speed: number;\n   * }} options\n   */\n  this.moveCanvas = function(options) {\n\n    var dx = 0,\n        dy = 0,\n        speed = options.speed;\n\n    var actualSpeed = speed / Math.min(Math.sqrt(canvas.viewbox().scale), 1);\n\n    switch (options.direction) {\n    case 'left': // Left\n      dx = actualSpeed;\n      break;\n    case 'up': // Up\n      dy = actualSpeed;\n      break;\n    case 'right': // Right\n      dx = -actualSpeed;\n      break;\n    case 'down': // Down\n      dy = -actualSpeed;\n      break;\n    }\n\n    canvas.scroll({\n      dx: dx,\n      dy: dy\n    });\n  };\n\n}\n\n\nKeyboardMove.$inject = [\n  'config.keyboardMove',\n  'keyboard',\n  'canvas'\n];\n","import KeyboardModule from '../../features/keyboard';\n\nimport KeyboardMove from './KeyboardMove';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    KeyboardModule\n  ],\n  __init__: [ 'keyboardMove' ],\n  keyboardMove: [ 'type', KeyboardMove ]\n};","import {\n  classes as domClasses\n} from 'min-dom';\n\nvar CURSOR_CLS_PATTERN = /^djs-cursor-.*$/;\n\n/**\n * @param {string} mode\n */\nexport function set(mode) {\n  var classes = domClasses(document.body);\n\n  classes.removeMatching(CURSOR_CLS_PATTERN);\n\n  if (mode) {\n    classes.add('djs-cursor-' + mode);\n  }\n}\n\nexport function unset() {\n  set(null);\n}\n\n/**\n * @param {string} mode\n *\n * @return {boolean}\n */\nexport function has(mode) {\n  var classes = domClasses(document.body);\n\n  return classes.has('djs-cursor-' + mode);\n}\n","/**\n * @typedef {import('../core/EventBus').default} EventBus\n */\n\nvar TRAP_PRIORITY = 5000;\n\n/**\n * Installs a click trap that prevents a ghost click following a dragging operation.\n *\n * @param {EventBus} eventBus\n * @param {string} [eventName='element.click']\n *\n * @return {() => void} a function to immediately remove the installed trap.\n */\nexport function install(eventBus, eventName) {\n\n  eventName = eventName || 'element.click';\n\n  function trap() {\n    return false;\n  }\n\n  eventBus.once(eventName, TRAP_PRIORITY, trap);\n\n  return function() {\n    eventBus.off(eventName, trap);\n  };\n}","/**\n * @typedef {import('../util/Types').Point} Point\n * @typedef {import('../util/Types').Rect} Rect\n */\n\n/**\n * @param {Rect} bounds\n * @return {Point}\n */\nexport function center(bounds) {\n  return {\n    x: bounds.x + (bounds.width / 2),\n    y: bounds.y + (bounds.height / 2)\n  };\n}\n\n\n/**\n * @param {Point} a\n * @param {Point} b\n * @return {Point}\n */\nexport function delta(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n","import {\n  set as cursorSet,\n  unset as cursorUnset\n} from '../../util/Cursor';\n\nimport {\n  install as installClickTrap\n} from '../../util/ClickTrap';\n\nimport {\n  delta as deltaPos\n} from '../../util/PositionUtil';\n\nimport {\n  event as domEvent,\n  closest as domClosest\n} from 'min-dom';\n\nimport {\n  toPoint\n} from '../../util/Event';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar THRESHOLD = 15;\n\n\n/**\n * Move the canvas via mouse.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function MoveCanvas(eventBus, canvas) {\n\n  var context;\n\n\n  // listen for move on element mouse down;\n  // allow others to hook into the event before us though\n  // (dragging / element moving will do this)\n  eventBus.on('element.mousedown', 500, function(e) {\n    return handleStart(e.originalEvent);\n  });\n\n\n  function handleMove(event) {\n\n    var start = context.start,\n        button = context.button,\n        position = toPoint(event),\n        delta = deltaPos(position, start);\n\n    if (!context.dragging && length(delta) > THRESHOLD) {\n      context.dragging = true;\n\n      if (button === 0) {\n        installClickTrap(eventBus);\n      }\n\n      cursorSet('grab');\n    }\n\n    if (context.dragging) {\n\n      var lastPosition = context.last || context.start;\n\n      delta = deltaPos(position, lastPosition);\n\n      canvas.scroll({\n        dx: delta.x,\n        dy: delta.y\n      });\n\n      context.last = position;\n    }\n\n    // prevent select\n    event.preventDefault();\n  }\n\n\n  function handleEnd(event) {\n    domEvent.unbind(document, 'mousemove', handleMove);\n    domEvent.unbind(document, 'mouseup', handleEnd);\n\n    context = null;\n\n    cursorUnset();\n  }\n\n  function handleStart(event) {\n\n    // event is already handled by '.djs-draggable'\n    if (domClosest(event.target, '.djs-draggable')) {\n      return;\n    }\n\n    var button = event.button;\n\n    // reject right mouse button or modifier key\n    if (button >= 2 || event.ctrlKey || event.shiftKey || event.altKey) {\n      return;\n    }\n\n    context = {\n      button: button,\n      start: toPoint(event)\n    };\n\n    domEvent.bind(document, 'mousemove', handleMove);\n    domEvent.bind(document, 'mouseup', handleEnd);\n\n    // we've handled the event\n    return true;\n  }\n\n  this.isActive = function() {\n    return !!context;\n  };\n\n}\n\n\nMoveCanvas.$inject = [\n  'eventBus',\n  'canvas'\n];\n\n\n\n// helpers ///////\n\nfunction length(point) {\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}\n","import MoveCanvas from './MoveCanvas';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'moveCanvas' ],\n  moveCanvas: [ 'type', MoveCanvas ]\n};","/**\n * Get the logarithm of x with base 10.\n *\n * @param {number} x\n */\nexport function log10(x) {\n  return Math.log(x) / Math.log(10);\n}\n\nexport { delta as substract } from './PositionUtil';\n","import {\n  log10\n} from '../../util/Math';\n\n/**\n * Get step size for given range and number of steps.\n *\n * @param {Object} range\n * @param {number} range.min\n * @param {number} range.max\n * @param {number} steps\n */\nexport function getStepSize(range, steps) {\n\n  var minLinearRange = log10(range.min),\n      maxLinearRange = log10(range.max);\n\n  var absoluteLinearRange = Math.abs(minLinearRange) + Math.abs(maxLinearRange);\n\n  return absoluteLinearRange / steps;\n}\n\n/**\n * @param {Object} range\n * @param {number} range.min\n * @param {number} range.max\n * @param {number} scale\n */\nexport function cap(range, scale) {\n  return Math.max(range.min, Math.min(range.max, scale));\n}\n","import {\n  event as domEvent,\n  closest as domClosest\n} from 'min-dom';\n\nimport {\n  getStepSize,\n  cap\n} from './ZoomUtil';\n\nimport {\n  log10\n} from '../../util/Math';\n\nimport {\n  isMac\n} from '../../util/Platform';\n\nimport {\n  bind\n} from 'min-dash';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('../../util/Types').Point} Point\n * @typedef {import('../../util/Types').ScrollDelta} ScrollDelta\n */\n\nvar sign = Math.sign || function(n) {\n  return n >= 0 ? 1 : -1;\n};\n\nvar RANGE = { min: 0.2, max: 4 },\n    NUM_STEPS = 10;\n\nvar DELTA_THRESHOLD = 0.1;\n\nvar DEFAULT_SCALE = 0.75;\n\n/**\n * An implementation of zooming and scrolling within the\n * {@link Canvas} via the mouse wheel.\n *\n * Mouse wheel zooming / scrolling may be disabled using\n * the {@link toggle(enabled)} method.\n *\n * @param {Object} [config]\n * @param {boolean} [config.enabled=true] default enabled state\n * @param {number} [config.scale=.75] scroll sensivity\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function ZoomScroll(config, eventBus, canvas) {\n\n  config = config || {};\n\n  this._enabled = false;\n\n  this._canvas = canvas;\n  this._container = canvas._container;\n\n  this._handleWheel = bind(this._handleWheel, this);\n\n  this._totalDelta = 0;\n  this._scale = config.scale || DEFAULT_SCALE;\n\n  var self = this;\n\n  eventBus.on('canvas.init', function(e) {\n    self._init(config.enabled !== false);\n  });\n}\n\nZoomScroll.$inject = [\n  'config.zoomScroll',\n  'eventBus',\n  'canvas'\n];\n\n/**\n * @param {ScrollDelta} delta\n */\nZoomScroll.prototype.scroll = function scroll(delta) {\n  this._canvas.scroll(delta);\n};\n\n\nZoomScroll.prototype.reset = function reset() {\n  this._canvas.zoom('fit-viewport');\n};\n\n/**\n * Zoom depending on delta.\n *\n * @param {number} delta\n * @param {Point} position\n */\nZoomScroll.prototype.zoom = function zoom(delta, position) {\n\n  // zoom with half the step size of stepZoom\n  var stepSize = getStepSize(RANGE, NUM_STEPS * 2);\n\n  // add until threshold reached\n  this._totalDelta += delta;\n\n  if (Math.abs(this._totalDelta) > DELTA_THRESHOLD) {\n    this._zoom(delta, position, stepSize);\n\n    // reset\n    this._totalDelta = 0;\n  }\n};\n\n\nZoomScroll.prototype._handleWheel = function handleWheel(event) {\n\n  // event is already handled by '.djs-scrollable'\n  if (domClosest(event.target, '.djs-scrollable', true)) {\n    return;\n  }\n\n  var element = this._container;\n\n  event.preventDefault();\n\n  // pinch to zoom is mapped to wheel + ctrlKey = true\n  // in modern browsers (!)\n\n  var isZoom = event.ctrlKey || (isMac() && event.metaKey);\n\n  var isHorizontalScroll = event.shiftKey;\n\n  var factor = -1 * this._scale,\n      delta;\n\n  if (isZoom) {\n    factor *= event.deltaMode === 0 ? 0.020 : 0.32;\n  } else {\n    factor *= event.deltaMode === 0 ? 1.0 : 16.0;\n  }\n\n  if (isZoom) {\n    var elementRect = element.getBoundingClientRect();\n\n    var offset = {\n      x: event.clientX - elementRect.left,\n      y: event.clientY - elementRect.top\n    };\n\n    delta = (\n      Math.sqrt(\n        Math.pow(event.deltaY, 2) +\n        Math.pow(event.deltaX, 2)\n      ) * sign(event.deltaY) * factor\n    );\n\n    // zoom in relative to diagram {x,y} coordinates\n    this.zoom(delta, offset);\n  } else {\n\n    if (isHorizontalScroll) {\n      delta = {\n        dx: factor * event.deltaY,\n        dy: 0\n      };\n    } else {\n      delta = {\n        dx: factor * event.deltaX,\n        dy: factor * event.deltaY\n      };\n    }\n\n    this.scroll(delta);\n  }\n};\n\n/**\n * Zoom with fixed step size.\n *\n * @param {number} delta Zoom delta (1 for zooming in, -1 for zooming out).\n * @param {Point} [position]\n */\nZoomScroll.prototype.stepZoom = function stepZoom(delta, position) {\n\n  var stepSize = getStepSize(RANGE, NUM_STEPS);\n\n  this._zoom(delta, position, stepSize);\n};\n\n\n/**\n * Zoom in/out given a step size.\n *\n * @param {number} delta\n * @param {Point} [position]\n * @param {number} stepSize\n */\nZoomScroll.prototype._zoom = function(delta, position, stepSize) {\n  var canvas = this._canvas;\n\n  var direction = delta > 0 ? 1 : -1;\n\n  var currentLinearZoomLevel = log10(canvas.zoom());\n\n  // snap to a proximate zoom step\n  var newLinearZoomLevel = Math.round(currentLinearZoomLevel / stepSize) * stepSize;\n\n  // increase or decrease one zoom step in the given direction\n  newLinearZoomLevel += stepSize * direction;\n\n  // calculate the absolute logarithmic zoom level based on the linear zoom level\n  // (e.g. 2 for an absolute x2 zoom)\n  var newLogZoomLevel = Math.pow(10, newLinearZoomLevel);\n\n  canvas.zoom(cap(RANGE, newLogZoomLevel), position);\n};\n\n\n/**\n * Toggle the zoom scroll ability via mouse wheel.\n *\n * @param {boolean} [newEnabled] new enabled state\n */\nZoomScroll.prototype.toggle = function toggle(newEnabled) {\n\n  var element = this._container;\n  var handleWheel = this._handleWheel;\n\n  var oldEnabled = this._enabled;\n\n  if (typeof newEnabled === 'undefined') {\n    newEnabled = !oldEnabled;\n  }\n\n  // only react on actual changes\n  if (oldEnabled !== newEnabled) {\n\n    // add or remove wheel listener based on\n    // changed enabled state\n    domEvent[newEnabled ? 'bind' : 'unbind'](element, 'wheel', handleWheel, false);\n  }\n\n  this._enabled = newEnabled;\n\n  return newEnabled;\n};\n\n\nZoomScroll.prototype._init = function(newEnabled) {\n  this.toggle(newEnabled);\n};\n","import ZoomScroll from './ZoomScroll';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'zoomScroll' ],\n  zoomScroll: [ 'type', ZoomScroll ]\n};","import inherits from 'inherits-browser';\n\nimport Viewer from './Viewer';\n\nimport KeyboardMoveModule from 'diagram-js/lib/navigation/keyboard-move';\nimport MoveCanvasModule from 'diagram-js/lib/navigation/movecanvas';\nimport ZoomScrollModule from 'diagram-js/lib/navigation/zoomscroll';\n\n/**\n * @typedef { import('./BaseViewer').BaseViewerOptions } BaseViewerOptions\n */\n\n/**\n * A viewer with mouse and keyboard navigation features.\n *\n * @template [ServiceMap=null]\n *\n * @extends Viewer<ServiceMap>\n *\n * @param {BaseViewerOptions} [options]\n */\nexport default function NavigatedViewer(options) {\n  Viewer.call(this, options);\n}\n\ninherits(NavigatedViewer, Viewer);\n\n\nNavigatedViewer.prototype._navigationModules = [\n  KeyboardMoveModule,\n  MoveCanvasModule,\n  ZoomScrollModule\n];\n\nNavigatedViewer.prototype._modules = [].concat(\n  Viewer.prototype._modules,\n  NavigatedViewer.prototype._navigationModules\n);","import {\n  filter,\n  forEach,\n  isArray,\n  sortBy\n} from 'min-dash';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n *\n * @typedef {import('../../util/Types').Axis} Axis\n * @typedef {import('../../util/Types').Dimension} Dimension\n *\n * @typedef { 'top' | 'right' | 'bottom' | 'left' | 'center' | 'middle' } Alignment\n */\n\nfunction last(arr) {\n  return arr && arr[arr.length - 1];\n}\n\nfunction sortTopOrMiddle(element) {\n  return element.y;\n}\n\nfunction sortLeftOrCenter(element) {\n  return element.x;\n}\n\n/**\n * Sorting functions for different alignments.\n *\n * @type {Record<string, Function>}\n */\nvar ALIGNMENT_SORTING = {\n  left: sortLeftOrCenter,\n  center: sortLeftOrCenter,\n  right: function(element) {\n    return element.x + element.width;\n  },\n  top: sortTopOrMiddle,\n  middle: sortTopOrMiddle,\n  bottom: function(element) {\n    return element.y + element.height;\n  }\n};\n\n/**\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function AlignElements(modeling, rules) {\n  this._modeling = modeling;\n  this._rules = rules;\n}\n\nAlignElements.$inject = [ 'modeling', 'rules' ];\n\n\n/**\n * Get relevant axis and dimension for given alignment.\n *\n * @param {Alignment} type\n *\n * @return { {\n *   axis: Axis;\n *   dimension: Dimension;\n * } }\n */\nAlignElements.prototype._getOrientationDetails = function(type) {\n  var vertical = [ 'top', 'bottom', 'middle' ],\n      axis = 'x',\n      dimension = 'width';\n\n  if (vertical.indexOf(type) !== -1) {\n    axis = 'y';\n    dimension = 'height';\n  }\n\n  return {\n    axis: axis,\n    dimension: dimension\n  };\n};\n\nAlignElements.prototype._isType = function(type, types) {\n  return types.indexOf(type) !== -1;\n};\n\n/**\n * Get point on relevant axis for given alignment.\n *\n * @param {Alignment} type\n * @param {Element[]} sortedElements\n *\n * @return {Partial<Record<Alignment, number>>}\n */\nAlignElements.prototype._alignmentPosition = function(type, sortedElements) {\n  var orientation = this._getOrientationDetails(type),\n      axis = orientation.axis,\n      dimension = orientation.dimension,\n      alignment = {},\n      centers = {},\n      hasSharedCenters = false,\n      centeredElements,\n      firstElement,\n      lastElement;\n\n  function getMiddleOrTop(first, last) {\n    return Math.round((first[axis] + last[axis] + last[dimension]) / 2);\n  }\n\n  if (this._isType(type, [ 'left', 'top' ])) {\n    alignment[type] = sortedElements[0][axis];\n\n  } else if (this._isType(type, [ 'right', 'bottom' ])) {\n    lastElement = last(sortedElements);\n\n    alignment[type] = lastElement[axis] + lastElement[dimension];\n\n  } else if (this._isType(type, [ 'center', 'middle' ])) {\n\n    // check if there is a center shared by more than one shape\n    // if not, just take the middle of the range\n    forEach(sortedElements, function(element) {\n      var center = element[axis] + Math.round(element[dimension] / 2);\n\n      if (centers[center]) {\n        centers[center].elements.push(element);\n      } else {\n        centers[center] = {\n          elements: [ element ],\n          center: center\n        };\n      }\n    });\n\n    centeredElements = sortBy(centers, function(center) {\n      if (center.elements.length > 1) {\n        hasSharedCenters = true;\n      }\n\n      return center.elements.length;\n    });\n\n    if (hasSharedCenters) {\n      alignment[type] = last(centeredElements).center;\n\n      return alignment;\n    }\n\n    firstElement = sortedElements[0];\n\n    sortedElements = sortBy(sortedElements, function(element) {\n      return element[axis] + element[dimension];\n    });\n\n    lastElement = last(sortedElements);\n\n    alignment[type] = getMiddleOrTop(firstElement, lastElement);\n  }\n\n  return alignment;\n};\n\n/**\n * Align elements on relevant axis for given alignment.\n *\n * @param {Element[]} elements\n * @param {Alignment} type\n */\nAlignElements.prototype.trigger = function(elements, type) {\n  var modeling = this._modeling,\n      allowed;\n\n  // filter out elements which cannot be aligned\n  var filteredElements = filter(elements, function(element) {\n    return !(element.waypoints || element.host || element.labelTarget);\n  });\n\n  // filter out elements via rules\n  allowed = this._rules.allowed('elements.align', { elements: filteredElements });\n  if (isArray(allowed)) {\n    filteredElements = allowed;\n  }\n\n  if (filteredElements.length < 2 || !allowed) {\n    return;\n  }\n\n  var sortFn = ALIGNMENT_SORTING[type];\n\n  var sortedElements = sortBy(filteredElements, sortFn);\n\n  var alignment = this._alignmentPosition(type, sortedElements);\n\n  modeling.alignElements(sortedElements, alignment);\n};\n","import AlignElements from './AlignElements';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'alignElements' ],\n  alignElements: [ 'type', AlignElements ]\n};\n","import IdGenerator from '../../util/IdGenerator';\n\nconst Ids = new IdGenerator();\n\n\n/**\n * @typedef { {\n *   promise: Promise<unknown>,\n *   executionId: number\n * } } ScheduledTask\n */\n\n/**\n * A utility that allows you to schedule async tasks.\n *\n * @class\n * @constructor\n *\n * @param { import('../core/EventBus').default } eventBus\n */\nexport default function Scheduler(eventBus) {\n\n  /**\n   * @type { Record<string, ScheduledTask> }\n   */\n  this._scheduled = {};\n\n  eventBus.on('diagram.destroy', () => {\n    Object.keys(this._scheduled).forEach(id => {\n      this.cancel(id);\n    });\n  });\n}\n\nScheduler.$inject = [ 'eventBus' ];\n\n/**\n * Schedule execution of a task in the next tick.\n *\n * Call with an id to ensure only the latest call will be executed.\n *\n * @template T\n\n * @param {(...args: any[]) => T} taskFn function to be executed\n * @param {string} [id] identifying the task to ensure uniqueness\n *\n * @return Promise<T> result of the executed task\n */\nScheduler.prototype.schedule = function(taskFn, id = Ids.next()) {\n\n  this.cancel(id);\n\n  const newScheduled = this._schedule(taskFn, id);\n\n  this._scheduled[id] = newScheduled;\n\n  return newScheduled.promise;\n};\n\nScheduler.prototype._schedule = function(taskFn, id) {\n\n  const {\n    promise,\n    resolve,\n    reject\n  } = defer();\n\n  const executionId = requestAnimationFrame(() => {\n    try {\n      resolve(taskFn());\n    } catch (error) {\n      reject(error);\n    }\n  });\n\n  return {\n    executionId,\n    promise\n  };\n};\n\n/**\n * Cancel a previously scheduled task.\n *\n * @param {string} id\n */\nScheduler.prototype.cancel = function(id) {\n\n  const scheduled = this._scheduled[id];\n\n  if (scheduled) {\n    this._cancel(scheduled);\n\n    this._scheduled[id] = null;\n  }\n};\n\nScheduler.prototype._cancel = function(scheduled) {\n  cancelAnimationFrame(scheduled.executionId);\n};\n\n/**\n * @return { {\n *   promise: Promise,\n *   resolve: Function,\n *   reject: Function\n * } }\n */\nfunction defer() {\n\n  let resolve;\n  let reject;\n\n  const promise = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n\n  return {\n    promise,\n    resolve,\n    reject\n  };\n}","import Scheduler from './Scheduler';\n\nexport default {\n  scheduler: [ 'type', Scheduler ]\n};","import {\n  every,\n  forEach,\n  isArray,\n  isFunction\n} from 'min-dash';\n\nimport {\n  delegate as domDelegate,\n  event as domEvent,\n  attr as domAttr,\n  query as domQuery,\n  classes as domClasses,\n  domify as domify\n} from 'min-dom';\n\nimport {\n  escapeCSS\n} from '../../util/EscapeUtil';\n\nimport { isConnection } from '../../util/ModelUtil';\n\nvar MARKER_HIDDEN = 'djs-element-hidden';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../util/Types').Rect} Rect\n * @typedef {import('../../util/Types').RectTRBL} RectTRBL\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../../scheduler/Scheduler').default} Scheduler\n *\n * @typedef {import('./ContextPadProvider').default} ContextPadProvider\n * @typedef {import('./ContextPadProvider').ContextPadEntries} ContextPadEntries\n *\n */\n\n/**\n * @template {Element} [ElementType=Element]\n *\n * @typedef {ElementType|ElementType[]} ContextPadTarget\n */\n\nvar entrySelector = '.entry';\n\nvar DEFAULT_PRIORITY = 1000;\nvar CONTEXT_PAD_MARGIN = 8;\nvar HOVER_DELAY = 300;\n\n/**\n * A context pad that displays element specific, contextual actions next\n * to a diagram element.\n *\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n * @param {EventBus} eventBus\n * @param {Scheduler} scheduler\n */\nexport default function ContextPad(canvas, elementRegistry, eventBus, scheduler) {\n\n  this._canvas = canvas;\n  this._elementRegistry = elementRegistry;\n  this._eventBus = eventBus;\n  this._scheduler = scheduler;\n\n  this._current = null;\n\n  this._init();\n}\n\nContextPad.$inject = [\n  'canvas',\n  'elementRegistry',\n  'eventBus',\n  'scheduler'\n];\n\n\n/**\n * Registers events needed for interaction with other components.\n */\nContextPad.prototype._init = function() {\n  var self = this;\n\n  this._eventBus.on('selection.changed', function(event) {\n\n    var selection = event.newSelection;\n\n    var target = selection.length\n      ? selection.length === 1\n        ? selection[0]\n        : selection\n      : null;\n\n    if (target) {\n      self.open(target, true);\n    } else {\n      self.close();\n    }\n  });\n\n  this._eventBus.on('elements.changed', function(event) {\n    var elements = event.elements,\n        current = self._current;\n\n    if (!current) {\n      return;\n    }\n\n    var target = current.target;\n\n    var targets = isArray(target) ? target : [ target ];\n\n    var targetsChanged = targets.filter(function(element) {\n      return elements.includes(element);\n    });\n\n    if (targetsChanged.length) {\n\n      // (1) close\n      self.close();\n\n      var targetsNew = targets.filter(function(element) {\n        return self._elementRegistry.get(element.id);\n      });\n\n      if (targetsNew.length) {\n\n        // (2) re-open with new targets being all previous targets that still\n        // exist\n        self._updateAndOpen(targetsNew.length > 1 ? targetsNew : targetsNew[ 0 ]);\n      }\n    }\n  });\n\n  this._eventBus.on('canvas.viewbox.changed', function() {\n    self._updatePosition();\n  });\n\n  this._eventBus.on('element.marker.update', function(event) {\n    if (!self.isOpen()) {\n      return;\n    }\n\n    var element = event.element;\n\n    var current = self._current;\n\n    var targets = isArray(current.target) ? current.target : [ current.target ];\n\n    if (!targets.includes(element)) {\n      return;\n    }\n\n    self._updateVisibility();\n  });\n\n  this._container = this._createContainer();\n};\n\nContextPad.prototype._createContainer = function() {\n  var container = domify('<div class=\"djs-context-pad-parent\"></div>');\n\n  this._canvas.getContainer().appendChild(container);\n\n  return container;\n};\n\n/**\n * @overlord\n *\n * Register a context pad provider with the default priority. See\n * {@link ContextPadProvider} for examples.\n *\n * @param {ContextPadProvider} provider\n */\n\n/**\n * Register a context pad provider with the given priority. See\n * {@link ContextPadProvider} for examples.\n *\n * @param {number} priority\n * @param {ContextPadProvider} provider\n */\nContextPad.prototype.registerProvider = function(priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('contextPad.getProviders', priority, function(event) {\n    event.providers.push(provider);\n  });\n};\n\n\n/**\n * Get context pad entries for given elements.\n *\n * @param {ContextPadTarget} target\n *\n * @return {ContextPadEntries} list of entries\n */\nContextPad.prototype.getEntries = function(target) {\n  var providers = this._getProviders();\n\n  var provideFn = isArray(target)\n    ? 'getMultiElementContextPadEntries'\n    : 'getContextPadEntries';\n\n  var entries = {};\n\n  // loop through all providers and their entries.\n  // group entries by id so that overriding an entry is possible\n  forEach(providers, function(provider) {\n\n    if (!isFunction(provider[provideFn])) {\n      return;\n    }\n\n    var entriesOrUpdater = provider[provideFn](target);\n\n    if (isFunction(entriesOrUpdater)) {\n      entries = entriesOrUpdater(entries);\n    } else {\n      forEach(entriesOrUpdater, function(entry, id) {\n        entries[id] = entry;\n      });\n    }\n  });\n\n  return entries;\n};\n\n\n/**\n * Trigger context pad via DOM event.\n *\n * The entry to trigger is determined by the target element.\n *\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nContextPad.prototype.trigger = function(action, event, autoActivate) {\n  var self = this;\n\n  var entry,\n      originalEvent,\n      button = event.delegateTarget || event.target;\n\n  if (!button) {\n    return event.preventDefault();\n  }\n\n  entry = domAttr(button, 'data-action');\n  originalEvent = event.originalEvent || event;\n\n  if (action === 'mouseover') {\n    this._timeout = setTimeout(function() {\n      self._mouseout = self.triggerEntry(entry, 'hover', originalEvent, autoActivate);\n    }, HOVER_DELAY);\n\n    return;\n  } else if (action === 'mouseout') {\n    clearTimeout(this._timeout);\n\n    if (this._mouseout) {\n      this._mouseout();\n\n      this._mouseout = null;\n    }\n\n    return;\n  }\n\n  return this.triggerEntry(entry, action, originalEvent, autoActivate);\n};\n\n/**\n * Trigger action on context pad entry entry, e.g. click, mouseover or mouseout.\n *\n * @param {string} entryId\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nContextPad.prototype.triggerEntry = function(entryId, action, event, autoActivate) {\n\n  if (!this.isShown()) {\n    return;\n  }\n\n  var target = this._current.target,\n      entries = this._current.entries;\n\n  var entry = entries[entryId];\n\n  if (!entry) {\n    return;\n  }\n\n  var handler = entry.action;\n\n  if (this._eventBus.fire('contextPad.trigger', { entry, event }) === false) {\n    return;\n  }\n\n  // simple action (via callback function)\n  if (isFunction(handler)) {\n    if (action === 'click') {\n      return handler(event, target, autoActivate);\n    }\n  } else {\n    if (handler[action]) {\n      return handler[action](event, target, autoActivate);\n    }\n  }\n\n  // silence other actions\n  event.preventDefault();\n};\n\n\n/**\n * Open the context pad for given elements.\n *\n * @param {ContextPadTarget} target\n * @param {boolean} [force=false] - Force re-opening context pad.\n */\nContextPad.prototype.open = function(target, force) {\n  if (!force && this.isOpen(target)) {\n    return;\n  }\n\n  this.close();\n\n  this._updateAndOpen(target);\n};\n\nContextPad.prototype._getProviders = function() {\n\n  var event = this._eventBus.createEvent({\n    type: 'contextPad.getProviders',\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\n\n/**\n * @param {ContextPadTarget} target\n */\nContextPad.prototype._updateAndOpen = function(target) {\n  var entries = this.getEntries(target),\n      html = this._createHtml(target),\n      image;\n\n  forEach(entries, function(entry, id) {\n    var grouping = entry.group || 'default',\n        control = domify(entry.html || '<div class=\"entry\" draggable=\"true\"></div>'),\n        container;\n\n    domAttr(control, 'data-action', id);\n\n    container = domQuery('[data-group=' + escapeCSS(grouping) + ']', html);\n    if (!container) {\n      container = domify('<div class=\"group\"></div>');\n      domAttr(container, 'data-group', grouping);\n\n      html.appendChild(container);\n    }\n\n    container.appendChild(control);\n\n    if (entry.className) {\n      addClasses(control, entry.className);\n    }\n\n    if (entry.title) {\n      domAttr(control, 'title', entry.title);\n    }\n\n    if (entry.imageUrl) {\n      image = domify('<img>');\n      domAttr(image, 'src', entry.imageUrl);\n      image.style.width = '100%';\n      image.style.height = '100%';\n\n      control.appendChild(image);\n    }\n  });\n\n  domClasses(html).add('open');\n\n  this._current = {\n    entries,\n    html,\n    target,\n  };\n\n  this._updatePosition();\n\n  this._updateVisibility();\n\n  this._eventBus.fire('contextPad.open', { current: this._current });\n};\n\n/**\n * @param {ContextPadTarget} target\n *\n * @return {HTMLElement}\n */\nContextPad.prototype._createHtml = function(target) {\n  var self = this;\n\n  var html = domify('<div class=\"djs-context-pad\"></div>');\n\n  domDelegate.bind(html, entrySelector, 'click', function(event) {\n    self.trigger('click', event);\n  });\n\n  domDelegate.bind(html, entrySelector, 'dragstart', function(event) {\n    self.trigger('dragstart', event);\n  });\n\n  domDelegate.bind(html, entrySelector, 'mouseover', function(event) {\n    self.trigger('mouseover', event);\n  });\n\n  domDelegate.bind(html, entrySelector, 'mouseout', function(event) {\n    self.trigger('mouseout', event);\n  });\n\n  // stop propagation of mouse events\n  domEvent.bind(html, 'mousedown', function(event) {\n    event.stopPropagation();\n  });\n\n  this._container.appendChild(html);\n\n  this._eventBus.fire('contextPad.create', {\n    target: target,\n    pad: html\n  });\n\n  return html;\n};\n\n/**\n * @param {ContextPadTarget} target\n *\n * @return { { html: HTMLElement } }\n */\nContextPad.prototype.getPad = function(target) {\n  console.warn(new Error('ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888'));\n\n  let html;\n\n  if (this.isOpen() && targetsEqual(this._current.target, target)) {\n    html = this._current.html;\n  } else {\n    html = this._createHtml(target);\n  }\n\n  return { html };\n};\n\n\n/**\n * Close the context pad\n */\nContextPad.prototype.close = function() {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  clearTimeout(this._timeout);\n\n  this._container.innerHTML = '';\n\n  this._eventBus.fire('contextPad.close', { current: this._current });\n\n  this._current = null;\n};\n\n/**\n * Check if pad is open.\n *\n * If target is provided, check if it is opened\n * for the given target (single or multiple elements).\n *\n * @param {ContextPadTarget} [target]\n * @return {boolean}\n */\nContextPad.prototype.isOpen = function(target) {\n  var current = this._current;\n\n  if (!current) {\n    return false;\n  }\n\n  // basic no-args is open check\n  if (!target) {\n    return true;\n  }\n\n  var currentTarget = current.target;\n\n  // strict handling of single vs. multi-selection\n  if (isArray(target) !== isArray(currentTarget)) {\n    return false;\n  }\n\n  if (isArray(target)) {\n    return (\n      target.length === currentTarget.length &&\n      every(target, function(element) {\n        return currentTarget.includes(element);\n      })\n    );\n  } else {\n    return currentTarget === target;\n  }\n};\n\n\n/**\n * Check if pad is open and not hidden.\n *\n * @return {boolean}\n */\nContextPad.prototype.isShown = function() {\n  return this.isOpen() && domClasses(this._current.html).has('open');\n};\n\n/**\n * Show context pad.\n */\nContextPad.prototype.show = function() {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  domClasses(this._current.html).add('open');\n\n  this._updatePosition();\n\n  this._eventBus.fire('contextPad.show', { current: this._current });\n};\n\n/**\n * Hide context pad.\n */\nContextPad.prototype.hide = function() {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  domClasses(this._current.html).remove('open');\n\n  this._eventBus.fire('contextPad.hide', { current: this._current });\n};\n\n/**\n * Get context pad position.\n *\n * If target is connection context pad will be positioned at connection end.\n *\n * If multiple targets context pad will be placed at top right corner bounding\n * box.\n *\n * @param {ContextPadTarget} target\n *\n * @return {RectTRBL & { x: number, y: number }}\n */\nContextPad.prototype._getPosition = function(target) {\n  if (!isArray(target) && isConnection(target)) {\n    var viewbox = this._canvas.viewbox();\n\n    var lastWaypoint = getLastWaypoint(target);\n\n    var x = lastWaypoint.x * viewbox.scale - viewbox.x * viewbox.scale,\n        y = lastWaypoint.y * viewbox.scale - viewbox.y * viewbox.scale;\n\n    return {\n      left: x + CONTEXT_PAD_MARGIN * this._canvas.zoom(),\n      top: y\n    };\n  }\n\n  var container = this._canvas.getContainer();\n\n  var containerBounds = container.getBoundingClientRect();\n\n  var targetBounds = this._getTargetBounds(target);\n\n  return {\n    left: targetBounds.right - containerBounds.left + CONTEXT_PAD_MARGIN * this._canvas.zoom(),\n    top: targetBounds.top - containerBounds.top\n  };\n};\n\n/**\n * Update context pad position.\n */\nContextPad.prototype._updatePosition = function() {\n\n  const updateFn = () => {\n    if (!this.isOpen()) {\n      return;\n    }\n\n    var html = this._current.html;\n\n    var position = this._getPosition(this._current.target);\n\n    if ('x' in position && 'y' in position) {\n      html.style.left = position.x + 'px';\n      html.style.top = position.y + 'px';\n    } else {\n      [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ].forEach(function(key) {\n        if (key in position) {\n          html.style[ key ] = position[ key ] + 'px';\n        }\n      });\n    }\n  };\n\n  this._scheduler.schedule(updateFn, 'ContextPad#_updatePosition');\n};\n\n/**\n * Update context pad visibility. Hide if any of the target elements is hidden\n * using the `djs-element-hidden` or `djs-label-hidden` markers.\n */\nContextPad.prototype._updateVisibility = function() {\n\n  const updateFn = () => {\n    if (!this.isOpen()) {\n      return;\n    }\n\n    var self = this;\n\n    var target = this._current.target;\n\n    var targets = isArray(target) ? target : [ target ];\n\n    var isHidden = targets.some(function(target) {\n      return self._canvas.hasMarker(target, MARKER_HIDDEN);\n    });\n\n    if (isHidden) {\n      self.hide();\n    } else {\n      self.show();\n    }\n  };\n\n  this._scheduler.schedule(updateFn, 'ContextPad#_updateVisibility');\n};\n\n/**\n * Get bounding client rect of target element(s).\n *\n * @param {ContextPadTarget} target\n *\n * @returns {Rect & RectTRBL}\n */\nContextPad.prototype._getTargetBounds = function(target) {\n  var self = this;\n\n  var elements = isArray(target) ? target : [ target ];\n\n  var elementsGfx = elements.map(function(element) {\n    return self._canvas.getGraphics(element);\n  });\n\n  return elementsGfx.reduce(function(bounds, elementGfx) {\n    const elementBounds = elementGfx.getBoundingClientRect();\n\n    bounds.top = Math.min(bounds.top, elementBounds.top);\n    bounds.right = Math.max(bounds.right, elementBounds.right);\n    bounds.bottom = Math.max(bounds.bottom, elementBounds.bottom);\n    bounds.left = Math.min(bounds.left, elementBounds.left);\n\n    bounds.x = bounds.left;\n    bounds.y = bounds.top;\n\n    bounds.width = bounds.right - bounds.left;\n    bounds.height = bounds.bottom - bounds.top;\n\n    return bounds;\n  }, {\n    top: Infinity,\n    right: -Infinity,\n    bottom: -Infinity,\n    left: Infinity\n  });\n};\n\n// helpers //////////\n\nfunction addClasses(element, classNames) {\n  var classes = domClasses(element);\n\n  classNames = isArray(classNames) ? classNames : classNames.split(/\\s+/g);\n\n  classNames.forEach(function(cls) {\n    classes.add(cls);\n  });\n}\n\nfunction getLastWaypoint(connection) {\n  return connection.waypoints[connection.waypoints.length - 1];\n}\n\n/**\n * @param {ContextPadTarget} target\n * @param {ContextPadTarget} otherTarget\n *\n * @return {boolean}\n */\nfunction targetsEqual(target, otherTarget) {\n  target = isArray(target) ? target : [ target ];\n  otherTarget = isArray(otherTarget) ? otherTarget : [ otherTarget ];\n\n  return target.length === otherTarget.length\n    && every(target, function(element) {\n      return otherTarget.includes(element);\n    });\n}","import InteractionEventsModule from '../interaction-events';\nimport OverlaysModule from '../overlays';\nimport SchedulerModule from '../scheduler';\n\nimport ContextPad from './ContextPad';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    InteractionEventsModule,\n    SchedulerModule,\n    OverlaysModule\n  ],\n  contextPad: [ 'type', ContextPad ]\n};","var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,r=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,N(f,t,c),r.__e=r.__=null,t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_,m=t&&t.__k||v,b=l.length;for(f=P(u,l,m,f,b),a=0;a<b;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:m[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&B(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),(_=!!(4&y.__u))||h.__k===y.__k?f=A(y,f,n,_):\"function\"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?o=n.__k[r]=m(null,o,null,null,null):w(o)?o=n.__k[r]=m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?o=n.__k[r]=m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):n.__k[r]=o,f=r+h,o.__=n,o.__b=n.__b+1,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),D(e,e));return t}function A(n,l,u,t){var i,r;if(\"function\"==typeof n.type){for(i=n.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=n,l=A(i[r],l,u,t));return l}n.__e!=l&&(t&&(l&&n.type&&!l.parentNode&&(l=S(n)),u.insertBefore(n.__e,l||null)),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o,e=n.key,f=n.type,c=l[u],s=null!=c&&0==(2&c.__u);if(null===c&&null==e||s&&e==c.key&&f==c.type)return u;if(t>(s?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;)if(null!=(c=l[o=i>=0?i--:r++])&&0==(2&c.__u)&&e==c.key&&f==c.type)return o;return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var r,o;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),o=l.toLowerCase(),l=o in n||\"onFocusOut\"==l||\"onFocusIn\"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=E),C&&C.sub(h),h.state||(h.state={}),h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),u.__v==t.__v||!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=V(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else{for(T=o.length;T--;)g(o[T]);z(u)}else u.__e=t.__e,u.__k=t.__k,n.then||z(u);l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=q(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(z)}function N(n,u,t){for(var i=0;i<t.length;i++)B(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function V(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(V):d({},n)}function q(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props||p,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&\"setAttribute\"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=d;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],\"children\"==a?y=d:\"dangerouslySetInnerHTML\"==a?h=d:\"value\"==a?_=d:\"checked\"==a?m=d:c&&\"function\"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,w(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],o),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function B(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function D(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||B(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&D(i[r],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function E(n,l,u){return this.constructor(n,u)}function G(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),N(e,u,f)}function J(n,l){G(n,l,J)}function K(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function Q(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),\"function\"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,K as cloneElement,Q as createContext,_ as createElement,b as createRef,_ as h,J as hydrate,t as isValidElement,l as options,G as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","import{h as r,Component as o,render as t}from\"preact\";export{h,render,Component}from\"preact\";import e from\"htm\";var m=e.bind(r);export{m as html};\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\n//# sourceMappingURL=hooks.module.js.map\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import classNames from 'clsx';\n\nimport {\n  html,\n  useMemo\n} from '../../ui';\n\n/**\n * @typedef {import('./PopupMenuProvider').PopupMenuHeaderEntry} PopupMenuHeaderEntry\n */\n\n/**\n * Component that renders a popup menu header.\n *\n * @param {Object} props\n * @param {PopupMenuHeaderEntry[]} props.headerEntries\n * @param {PopupMenuHeaderEntry} props.selectedEntry\n * @param {(event: MouseEvent, entry: PopupMenuHeaderEntry) => void} props.onSelect\n * @param {(entry: PopupMenuHeaderEntry | null) => void} props.setSelectedEntry\n * @param {string} props.title\n */\nexport default function PopupMenuHeader(props) {\n  const {\n    headerEntries,\n    onSelect,\n    selectedEntry,\n    setSelectedEntry,\n    title\n  } = props;\n\n  const groups = useMemo(() => groupEntries(headerEntries), [ headerEntries ]);\n\n  return html`\n    <div class=\"djs-popup-header\">\n      <h3 class=\"djs-popup-title\" title=${ title }>${ title }</h3>\n      ${ groups.map((group) => html`\n        <ul key=${ group.id } class=\"djs-popup-header-group\" data-header-group=${ group.id }>\n\n          ${ group.entries.map(entry => html`\n            <li key=${ entry.id }>\n              <${ entry.action ? 'button' : 'span' }\n                class=${ getHeaderClasses(entry, entry === selectedEntry) }\n                onClick=${ event => entry.action && onSelect(event, entry) }\n                title=${ entry.title || entry.label }\n                data-id=${ entry.id }\n                onMouseEnter=${ () => entry.action && setSelectedEntry(entry) }\n                onMouseLeave=${ () => entry.action && setSelectedEntry(null) }\n                onFocus=${ () => entry.action && setSelectedEntry(entry) }\n                onBlur=${ () => entry.action && setSelectedEntry(null) }\n              >\n                ${(entry.imageUrl && html`<img class=\"djs-popup-entry-icon\" src=${ entry.imageUrl } alt=\"\" />`) ||\n                (entry.imageHtml && html`<div class=\"djs-popup-entry-icon\" dangerouslySetInnerHTML=${ { __html: entry.imageHtml } } />`)}\n                ${ entry.label ? html`\n                  <span class=\"djs-popup-label\">${ entry.label }</span>\n                ` : null }\n              </${ entry.action ? 'button' : 'span' }>\n            </li>\n          `) }\n        </ul>\n      `) }\n    </div>\n  `;\n}\n\n\n// helpers\nfunction groupEntries(entries) {\n  return entries.reduce((groups, entry) => {\n    const groupId = entry.group || 'default';\n\n    const group = groups.find(group => group.id === groupId);\n\n    if (group) {\n      group.entries.push(entry);\n    } else {\n      groups.push({\n        id: groupId,\n        entries: [ entry ]\n      });\n    }\n\n    return groups;\n  }, []);\n}\n\nfunction getHeaderClasses(entry, selected) {\n  return classNames(\n    'entry',\n    entry.className,\n    entry.active ? 'active' : '',\n    entry.disabled ? 'disabled' : '',\n    selected ? 'selected' : ''\n  );\n}","import classNames from 'clsx';\n\nimport {\n  html\n} from '../../ui';\n\n/**\n * @typedef {import('./PopupMenuProvider').PopupMenuEntry} PopupMenuEntry\n */\n\n/**\n * Component that renders a popup menu entry.\n *\n * @param {Object} props\n * @param {string} props.key\n * @param {PopupMenuEntry} props.entry\n * @param {boolean} props.selected\n * @param {(event: MouseEvent) => void} props.onMouseEnter\n * @param {(event: MouseEvent) => void} props.onMouseLeave\n * @param {(event: MouseEvent, entry?: PopupMenuEntry, action?: string) => void} props.onAction\n */\nexport default function PopupMenuItem(props) {\n  const {\n    entry,\n    selected,\n    onMouseEnter,\n    onMouseLeave,\n    onAction\n  } = props;\n\n  return html`\n    <li\n      class=${ classNames('entry', { selected }) }\n      data-id=${ entry.id }\n      title=${ entry.title || entry.label }\n      tabIndex=\"0\"\n      onClick=${ onAction }\n      onFocus=${ onMouseEnter }\n      onBlur=${ onMouseLeave }\n      onMouseEnter=${ onMouseEnter }\n      onMouseLeave=${ onMouseLeave }\n      onDragStart=${ (event) => onAction(event, entry, 'dragstart') }\n      draggable=${ true }\n    >\n      <div class=\"djs-popup-entry-content\">\n        <span\n          class=${ classNames('djs-popup-entry-name', entry.className) }\n        >\n          ${(entry.imageUrl && html`<img class=\"djs-popup-entry-icon\" src=${ entry.imageUrl } alt=\"\" />`) ||\n            (entry.imageHtml && html`<div class=\"djs-popup-entry-icon\" dangerouslySetInnerHTML=${ { __html: entry.imageHtml } } />`)}\n\n          ${ entry.label ? html`\n            <span class=\"djs-popup-label\">\n              ${ entry.label }\n            </span>\n          ` : null }\n        </span>\n        ${ entry.description && html`\n          <span\n            class=\"djs-popup-entry-description\"\n            title=${ entry.description }\n          >\n            ${ entry.description }\n          </span>\n        ` }\n      </div>\n      ${ entry.documentationRef && html`\n        <div class=\"djs-popup-entry-docs\">\n          <a\n            href=\"${ entry.documentationRef }\"\n            onClick=${ (event) => event.stopPropagation() }\n            title=\"Open element documentation\"\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z\" fill=\"#818798\"/>\n            </svg>\n          </a>\n        </div>\n      ` }\n    </li>\n  `;\n}\n","import {\n  html,\n  useMemo,\n  useLayoutEffect,\n  useRef\n} from '../../ui';\n\nimport PopupMenuItem from './PopupMenuItem';\n\n/**\n * @typedef {import('./PopupMenuProvider').PopupMenuEntry} PopupMenuEntry\n */\n\n/**\n * Component that renders a popup menu entry list.\n *\n * @param {Object} props\n * @param {PopupMenuEntry[]} props.entries\n * @param {PopupMenuEntry} props.selectedEntry\n * @param {(entry: PopupMenuEntry | null) => void} props.setSelectedEntry\n */\nexport default function PopupMenuList(props) {\n  const {\n    selectedEntry,\n    setSelectedEntry,\n    entries,\n    ...restProps\n  } = props;\n\n  const resultsRef = useRef();\n\n  const groups = useMemo(() => groupEntries(entries), [ entries ]);\n\n  // scroll to selected result\n  useLayoutEffect(() => {\n    const containerEl = resultsRef.current;\n\n    if (!containerEl)\n      return;\n\n    const selectedEl = containerEl.querySelector('.selected');\n\n    if (selectedEl) {\n      scrollIntoView(selectedEl);\n    }\n  }, [ selectedEntry ]);\n\n  return html`\n    <div class=\"djs-popup-results\" ref=${ resultsRef }>\n      ${ groups.map(group => html`\n        ${ group.name && html`\n          <div key=${ group.id } class=\"entry-header\" title=${ group.name }>\n            ${ group.name }\n          </div>\n        ` }\n        <ul class=\"djs-popup-group\" data-group=${ group.id }>\n          ${ group.entries.map(entry => html`\n            <${PopupMenuItem}\n              key=${ entry.id }\n              entry=${ entry }\n              selected=${ entry === selectedEntry }\n              onMouseEnter=${ () => setSelectedEntry(entry) }\n              onMouseLeave=${ () => setSelectedEntry(null) }\n              ...${ restProps }\n            />\n          `) }\n        </ul>\n      `) }\n    </div>\n  `;\n}\n\n\n// helpers\nfunction groupEntries(entries) {\n  const groups = [];\n\n  const getGroup = group => groups.find(elem => group.id === elem.id);\n\n  const containsGroup = group => !!getGroup(group);\n\n  // legacy support for provider built for the old popUp menu\n  const formatGroup = group =>\n    typeof group === 'string' ? { id: group } : group;\n\n  entries.forEach(entry => {\n\n    // assume a default group when none is provided\n    const group = entry.group ? formatGroup(entry.group) : { id: 'default' };\n\n    if (!containsGroup(group)) {\n      groups.push({ ...group, entries: [ entry ] });\n    } else {\n      getGroup(group).entries.push(entry);\n    }\n  });\n\n  return groups;\n}\n\n// helpers ////////////////\n\nfunction scrollIntoView(el) {\n  if (typeof el.scrollIntoViewIfNeeded === 'function') {\n    el.scrollIntoViewIfNeeded();\n  } else {\n    el.scrollIntoView({\n      scrollMode: 'if-needed',\n      block: 'nearest'\n    });\n  }\n}","import {\n  useEffect,\n  useRef,\n  useState,\n  useLayoutEffect,\n  html,\n  useMemo,\n  useCallback\n} from '../../ui';\n\nimport {\n  closest as domClosest,\n  matches as domMatches\n} from 'min-dom';\n\nimport PopupMenuHeader from './PopupMenuHeader';\nimport PopupMenuList from './PopupMenuList';\nimport classNames from 'clsx';\nimport { isDefined, isFunction } from 'min-dash';\n\n/**\n * @typedef {import('./PopupMenuProvider').PopupMenuEntry} PopupMenuEntry\n * @typedef {import('./PopupMenuProvider').PopupMenuHeaderEntry} PopupMenuHeaderEntry\n * @typedef {import('./PopupMenuProvider').PopupMenuEmptyPlaceholderProvider | import('./PopupMenuProvider').PopupMenuEmptyPlaceholder} PopupMenuEmptyPlaceholder\n *\n * @typedef {import('../../util/Types').Point} Point\n */\n\n/**\n * A component that renders the popup menus.\n *\n * @param {Object} props\n * @param {() => void} props.onClose\n * @param {() => void} props.onSelect\n * @param {(element: HTMLElement) => Point} props.position\n * @param {string} props.className\n * @param {PopupMenuEntry[]} props.entries\n * @param {PopupMenuHeaderEntry[]} props.headerEntries\n * @param {number} props.scale\n * @param {string} [props.title]\n * @param {boolean} [props.search]\n * @param {PopupMenuEmptyPlaceholder} [props.emptyPlaceholder]\n * @param {number} [props.width]\n */\nexport default function PopupMenuComponent(props) {\n  const {\n    onClose,\n    onSelect,\n    className,\n    headerEntries,\n    position,\n    title,\n    width,\n    scale,\n    search,\n    emptyPlaceholder,\n    entries: originalEntries,\n    onOpened,\n    onClosed\n  } = props;\n\n  const searchable = useMemo(() => {\n    if (!isDefined(search)) {\n      return false;\n    }\n\n    return originalEntries.length > 5;\n  }, [ search, originalEntries ]);\n\n  const [ value, setValue ] = useState('');\n\n  const filterEntries = useCallback((originalEntries, value) => {\n\n    if (!searchable) {\n      return originalEntries;\n    }\n\n    const filter = entry => {\n      if (!value) {\n        return (entry.rank || 0) >= 0;\n      }\n\n      if (entry.searchable === false) {\n        return false;\n      }\n\n      const searchableFields = [\n        entry.description || '',\n        entry.label || '',\n        entry.search || ''\n      ].map(string => string.toLowerCase());\n\n      // every word of `value` should be included in one of the searchable fields\n      return value\n        .toLowerCase()\n        .split(/\\s/g)\n        .every(word => searchableFields.some(field => field.includes(word)));\n    };\n\n    return originalEntries.filter(filter);\n  }, [ searchable ]);\n\n  const [ entries, setEntries ] = useState(filterEntries(originalEntries, value));\n  const [ selectedEntry, setSelectedEntry ] = useState(entries[0]);\n\n  const updateEntries = useCallback((newEntries) => {\n\n    // select first entry if non is selected\n    if (!selectedEntry || !newEntries.includes(selectedEntry)) {\n      setSelectedEntry(newEntries[0]);\n    }\n\n    setEntries(newEntries);\n  }, [ selectedEntry, setEntries, setSelectedEntry ]);\n\n  // filter entries on value change\n  useEffect(() => {\n    updateEntries(filterEntries(originalEntries, value));\n  }, [ value, originalEntries ]);\n\n  // handle keyboard seleciton\n  const keyboardSelect = useCallback(direction => {\n    const idx = entries.indexOf(selectedEntry);\n\n    let nextIdx = idx + direction;\n\n    if (nextIdx < 0) {\n      nextIdx = entries.length - 1;\n    }\n\n    if (nextIdx >= entries.length) {\n      nextIdx = 0;\n    }\n\n    setSelectedEntry(entries[nextIdx]);\n  }, [ entries, selectedEntry, setSelectedEntry ]);\n\n  const handleKeyDown = useCallback(event => {\n    if (event.key === 'Enter' && selectedEntry) {\n      return onSelect(event, selectedEntry);\n    }\n\n    // ARROW_UP\n    if (event.key === 'ArrowUp') {\n      keyboardSelect(-1);\n\n      return event.preventDefault();\n    }\n\n    // ARROW_DOWN\n    if (event.key === 'ArrowDown') {\n      keyboardSelect(1);\n\n      return event.preventDefault();\n    }\n  }, [ onSelect, selectedEntry, keyboardSelect ]);\n\n  const handleKey = useCallback(event => {\n    if (domMatches(event.target, 'input')) {\n      setValue(() => event.target.value);\n    }\n  }, [ setValue ]);\n\n  useEffect(() => {\n    onOpened();\n\n    return () => {\n      onClosed();\n    };\n  }, []);\n\n  const displayHeader = useMemo(() => title || headerEntries.length > 0, [ title, headerEntries ]);\n\n  return html`\n    <${PopupMenuWrapper}\n      onClose=${ onClose }\n      onKeyup=${ handleKey }\n      onKeydown=${ handleKeyDown }\n      className=${ className }\n      position=${ position }\n      width=${ width }\n      scale=${ scale }\n    >\n      ${ displayHeader && html`\n        <${PopupMenuHeader}\n          headerEntries=${ headerEntries }\n          onSelect=${ onSelect }\n          selectedEntry=${ selectedEntry }\n          setSelectedEntry=${ setSelectedEntry }\n          title=${ title }\n        />\n      ` }\n      ${ originalEntries.length > 0 && html`\n        <div class=\"djs-popup-body\">\n\n          ${ searchable && html`\n          <div class=\"djs-popup-search\">\n            <svg class=\"djs-popup-search-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z\" fill=\"#22242A\"/>\n            </svg>\n            <input type=\"text\" spellcheck=${ false } aria-label=\"${ title }\" />\n          </div>\n          ` }\n\n          <${PopupMenuList}\n            entries=${ entries }\n            selectedEntry=${ selectedEntry }\n            setSelectedEntry=${ setSelectedEntry }\n            onAction=${ onSelect }\n          />\n        </div>\n      ` }\n    ${ emptyPlaceholder && entries.length === 0 && html`\n      <div class=\"djs-popup-no-results\">${ isFunction(emptyPlaceholder) ? emptyPlaceholder(value) : emptyPlaceholder }</div>\n    ` }\n    </${PopupMenuWrapper}>\n  `;\n}\n\n/**\n * A component that wraps the popup menu.\n *\n * @param {*} props\n */\nfunction PopupMenuWrapper(props) {\n  const {\n    onClose,\n    onKeydown,\n    onKeyup,\n    className,\n    children,\n    position: positionGetter\n  } = props;\n\n  const popupRef = useRef();\n\n  // initial position\n  useLayoutEffect(() => {\n    if (typeof positionGetter !== 'function') {\n      return;\n    }\n\n    const popupEl = popupRef.current;\n    const position = positionGetter(popupEl);\n\n    popupEl.style.left = `${position.x}px`;\n    popupEl.style.top = `${position.y}px`;\n  }, [ popupRef.current, positionGetter ]);\n\n  // initial focus\n  useLayoutEffect(() => {\n    const popupEl = popupRef.current;\n\n    if (!popupEl) {\n      return;\n    }\n\n    const inputEl = popupEl.querySelector('input');\n\n    (inputEl || popupEl).focus();\n  }, []);\n\n  // global <Escape> / blur handlers\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.key === 'Escape') {\n        event.preventDefault();\n\n        return onClose();\n      }\n    };\n\n    const handleClick = event => {\n      const popup = domClosest(event.target, '.djs-popup', true);\n\n      if (popup) {\n        return;\n      }\n\n      return onClose();\n    };\n\n    document.documentElement.addEventListener('keydown', handleKeyDown);\n    document.body.addEventListener('click', handleClick);\n\n    return () => {\n      document.documentElement.removeEventListener('keydown', handleKeyDown);\n      document.body.removeEventListener('click', handleClick);\n    };\n  }, []);\n\n  return html`\n    <div\n      class=${ classNames('djs-popup', className) }\n      style=${ getPopupStyle(props) }\n      onKeydown=${ onKeydown }\n      onKeyup=${ onKeyup }\n      ref=${ popupRef }\n      tabIndex=\"-1\"\n    >\n      ${ children }\n    </div>\n  `;\n}\n\n// helpers //////////////////////\n\nfunction getPopupStyle(props) {\n  return {\n    transform: `scale(${props.scale})`,\n    width: `${props.width}px`,\n    'transform-origin': 'top left'\n  };\n}","import {\n  render,\n  html\n} from '../../ui';\n\nimport {\n  domify,\n  remove as domRemove,\n  closest as domClosest,\n  attr as domAttr\n} from 'min-dom';\n\nimport {\n  forEach,\n  isFunction,\n  omit,\n  isDefined\n} from 'min-dash';\n\nimport PopupMenuComponent from './PopupMenuComponent';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('./PopupMenuProvider').PopupMenuEntries} PopupMenuEntries\n * @typedef {import('./PopupMenuProvider').PopupMenuEntry} PopupMenuEntry\n * @typedef {import('./PopupMenuProvider').PopupMenuHeaderEntries} PopupMenuHeaderEntries\n * @typedef {import('./PopupMenuProvider').PopupMenuHeaderEntry} PopupMenuHeaderEntry\n * @typedef {import('./PopupMenuProvider').default} PopupMenuProvider\n *\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef { {\n *   scale?: {\n *     min?: number;\n *     max?: number;\n *   } | boolean;\n * } } PopupMenuConfig\n *\n * @typedef {Element|Element[]} PopupMenuTarget;\n */\n\nvar DATA_REF = 'data-id';\n\nvar CLOSE_EVENTS = [\n  'contextPad.close',\n  'canvas.viewbox.changing',\n  'commandStack.changed'\n];\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A popup menu to show a number of actions on the canvas.\n *\n * @param {PopupMenuConfig} config\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function PopupMenu(config, eventBus, canvas) {\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  this._current = null;\n\n  var scale = isDefined(config && config.scale) ? config.scale : {\n    min: 1,\n    max: 1\n  };\n\n  this._config = {\n    scale: scale\n  };\n\n\n  eventBus.on('diagram.destroy', () => {\n    this.close();\n  });\n\n  eventBus.on('element.changed', event => {\n\n    const element = this.isOpen() && this._current.target;\n\n    if (event.element === element) {\n      this.refresh();\n    }\n  });\n\n}\n\nPopupMenu.$inject = [\n  'config.popupMenu',\n  'eventBus',\n  'canvas'\n];\n\nPopupMenu.prototype._render = function() {\n\n  const {\n    position: _position,\n    providerId: className,\n    entries,\n    headerEntries,\n    emptyPlaceholder,\n    options\n  } = this._current;\n\n  const entriesArray = Object.entries(entries).map(\n    ([ key, value ]) => ({ id: key, ...value })\n  );\n\n  const headerEntriesArray = Object.entries(headerEntries).map(\n    ([ key, value ]) => ({ id: key, ...value })\n  );\n\n  const position = _position && (\n    (container) => this._ensureVisible(container, _position)\n  );\n\n  const scale = this._updateScale(this._current.container);\n\n  const onClose = result => this.close(result);\n  const onSelect = (event, entry, action) => this.trigger(event, entry, action);\n\n  render(\n    html`\n      <${PopupMenuComponent}\n        onClose=${ onClose }\n        onSelect=${ onSelect }\n        position=${ position }\n        className=${ className }\n        entries=${ entriesArray }\n        headerEntries=${ headerEntriesArray }\n        emptyPlaceholder=${ emptyPlaceholder }\n        scale=${ scale }\n        onOpened=${ this._onOpened.bind(this) }\n        onClosed=${ this._onClosed.bind(this) }\n        ...${{ ...options }}\n      />\n    `,\n    this._current.container\n  );\n};\n\n\n/**\n * Open the popup menu at the given position.\n *\n * @param {PopupMenuTarget} target\n * @param {string} providerId\n * @param {Point} position\n * @param {Object} [options]\n */\nPopupMenu.prototype.open = function(target, providerId, position, options) {\n  if (!target) {\n    throw new Error('target is missing');\n  }\n\n  if (!providerId) {\n    throw new Error('providers for <' + providerId + '> not found');\n  }\n\n  if (!position) {\n    throw new Error('position is missing');\n  }\n\n  if (this.isOpen()) {\n    this.close();\n  }\n\n  const {\n    entries,\n    headerEntries,\n    emptyPlaceholder\n  } = this._getContext(target, providerId);\n\n  this._current = {\n    position,\n    providerId,\n    target,\n    entries,\n    headerEntries,\n    emptyPlaceholder,\n    container: this._createContainer({ provider: providerId }),\n    options\n  };\n\n  this._emit('open');\n\n  this._bindAutoClose();\n\n  this._render();\n};\n\n/**\n * Refresh the popup menu entries without changing the target or position.\n */\nPopupMenu.prototype.refresh = function() {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  const {\n    target,\n    providerId\n  } = this._current;\n\n  const {\n    entries,\n    headerEntries,\n    emptyPlaceholder\n  } = this._getContext(target, providerId);\n\n  this._current = {\n    ...this._current,\n    entries,\n    headerEntries,\n    emptyPlaceholder\n  };\n\n  this._emit('refresh');\n\n  this._render();\n};\n\n\nPopupMenu.prototype._getContext = function(target, provider) {\n\n  const providers = this._getProviders(provider);\n\n  if (!providers || !providers.length) {\n    throw new Error('provider for <' + provider + '> not found');\n  }\n\n  const entries = this._getEntries(target, providers);\n\n  const headerEntries = this._getHeaderEntries(target, providers);\n\n  const emptyPlaceholder = this._getEmptyPlaceholder(providers);\n\n  return {\n    entries,\n    headerEntries,\n    emptyPlaceholder,\n    empty: !(\n      Object.keys(entries).length ||\n          Object.keys(headerEntries).length\n    )\n  };\n};\n\nPopupMenu.prototype.close = function() {\n\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._emit('close');\n\n  this.reset();\n\n  this._current = null;\n};\n\nPopupMenu.prototype.reset = function() {\n  const container = this._current.container;\n\n  render(null, container);\n\n  domRemove(container);\n};\n\nPopupMenu.prototype._emit = function(event, payload) {\n  this._eventBus.fire(`popupMenu.${ event }`, payload);\n};\n\nPopupMenu.prototype._onOpened = function() {\n  this._emit('opened');\n};\n\nPopupMenu.prototype._onClosed = function() {\n  this._emit('closed');\n};\n\nPopupMenu.prototype._createContainer = function(config) {\n\n  var canvas = this._canvas,\n      parent = canvas.getContainer();\n\n  const container = domify(`<div class=\"djs-popup-parent djs-scrollable\" data-popup=${config.provider}></div>`);\n\n  parent.appendChild(container);\n\n  return container;\n};\n\n/**\n * Set up listener to close popup automatically on certain events.\n */\nPopupMenu.prototype._bindAutoClose = function() {\n  this._eventBus.once(CLOSE_EVENTS, this.close, this);\n};\n\n\n/**\n * Remove the auto-closing listener.\n*/\nPopupMenu.prototype._unbindAutoClose = function() {\n  this._eventBus.off(CLOSE_EVENTS, this.close, this);\n};\n\n\n/**\n * Updates popup style.transform with respect to the config and zoom level.\n *\n * @return {number}\n */\nPopupMenu.prototype._updateScale = function() {\n  var zoom = this._canvas.zoom();\n\n  var scaleConfig = this._config.scale,\n      minScale,\n      maxScale,\n      scale = zoom;\n\n  if (scaleConfig !== true) {\n\n    if (scaleConfig === false) {\n      minScale = 1;\n      maxScale = 1;\n    } else {\n      minScale = scaleConfig.min;\n      maxScale = scaleConfig.max;\n    }\n\n    if (isDefined(minScale) && zoom < minScale) {\n      scale = minScale;\n    }\n\n    if (isDefined(maxScale) && zoom > maxScale) {\n      scale = maxScale;\n    }\n\n  }\n\n  return scale;\n};\n\nPopupMenu.prototype._ensureVisible = function(container, position) {\n  var documentBounds = document.documentElement.getBoundingClientRect();\n  var containerBounds = container.getBoundingClientRect();\n\n  var overAxis = {},\n      left = position.x,\n      top = position.y;\n\n  if (position.x + containerBounds.width > documentBounds.width) {\n    overAxis.x = true;\n  }\n\n  if (position.y + containerBounds.height > documentBounds.height) {\n    overAxis.y = true;\n  }\n\n  if (overAxis.x && overAxis.y) {\n    left = position.x - containerBounds.width;\n    top = position.y - containerBounds.height;\n  } else if (overAxis.x) {\n    left = position.x - containerBounds.width;\n    top = position.y;\n  } else if (overAxis.y && position.y < containerBounds.height) {\n    left = position.x;\n    top = 10;\n  } else if (overAxis.y) {\n    left = position.x;\n    top = position.y - containerBounds.height;\n  }\n\n  // underAxis\n  if (position.y < documentBounds.top) {\n    top = position.y + containerBounds.height;\n  }\n\n  return {\n    x: left,\n    y: top\n  };\n};\n\n/**\n * Check whether there are no popup menu providers or provided entries for the\n * given target.\n *\n * @param {PopupMenuTarget} target\n * @param {string} providerId\n *\n * @return {boolean}\n */\nPopupMenu.prototype.isEmpty = function(target, providerId) {\n  if (!target) {\n    throw new Error('target is missing');\n  }\n\n  if (!providerId) {\n    throw new Error('provider ID is missing');\n  }\n\n  const providers = this._getProviders(providerId);\n\n  if (!providers || !providers.length) {\n    return true;\n  }\n\n  return this._getContext(target, providerId).empty;\n};\n\n/**\n * @overlord\n *\n * Register a popup menu provider with default priority. See\n * {@link PopupMenuProvider} for examples.\n *\n * @param {string} id\n * @param {PopupMenuProvider} provider\n */\n\n/**\n * Register a popup menu provider with the given priority. See\n * {@link PopupMenuProvider} for examples.\n *\n * @param {string} id\n * @param {number} priority\n * @param {PopupMenuProvider} provider\n */\nPopupMenu.prototype.registerProvider = function(id, priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('popupMenu.getProviders.' + id, priority, function(event) {\n    event.providers.push(provider);\n  });\n};\n\n/**\n * @param {string} id\n *\n * @return {PopupMenuProvider[]}\n */\nPopupMenu.prototype._getProviders = function(id) {\n  var event = this._eventBus.createEvent({\n    type: 'popupMenu.getProviders.' + id,\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\n/**\n * @param {PopupMenuTarget} target\n * @param {PopupMenuProvider[]} providers\n *\n * @return {PopupMenuEntries}\n */\nPopupMenu.prototype._getEntries = function(target, providers) {\n  var entries = {};\n\n  forEach(providers, function(provider) {\n\n    // handle legacy method\n    if (!provider.getPopupMenuEntries) {\n      forEach(provider.getEntries(target), function(entry) {\n        var id = entry.id;\n\n        if (!id) {\n          throw new Error('entry ID is missing');\n        }\n\n        entries[id] = omit(entry, [ 'id' ]);\n      });\n\n      return;\n    }\n\n    var entriesOrUpdater = provider.getPopupMenuEntries(target);\n\n    if (isFunction(entriesOrUpdater)) {\n      entries = entriesOrUpdater(entries);\n    } else {\n      forEach(entriesOrUpdater, function(entry, id) {\n        entries[id] = entry;\n      });\n    }\n  });\n\n  return entries;\n};\n\n/**\n * @param {PopupMenuTarget} target\n * @param {PopupMenuProvider[]} providers\n *\n * @return {PopupMenuHeaderEntries}\n */\nPopupMenu.prototype._getHeaderEntries = function(target, providers) {\n  var entries = {};\n\n  forEach(providers, function(provider) {\n\n    // handle legacy method\n    if (!provider.getPopupMenuHeaderEntries) {\n      if (!provider.getHeaderEntries) {\n        return;\n      }\n\n      forEach(provider.getHeaderEntries(target), function(entry) {\n        var id = entry.id;\n\n        if (!id) {\n          throw new Error('entry ID is missing');\n        }\n\n        entries[id] = omit(entry, [ 'id' ]);\n      });\n\n      return;\n    }\n\n    var entriesOrUpdater = provider.getPopupMenuHeaderEntries(target);\n\n    if (isFunction(entriesOrUpdater)) {\n      entries = entriesOrUpdater(entries);\n    } else {\n      forEach(entriesOrUpdater, function(entry, id) {\n        entries[id] = entry;\n      });\n    }\n  });\n\n  return entries;\n};\n\n\nPopupMenu.prototype._getEmptyPlaceholder = function(providers) {\n\n  const provider = providers.find(\n    provider => isFunction(provider.getEmptyPlaceholder)\n  );\n\n  return provider && provider.getEmptyPlaceholder();\n};\n\n\n/**\n * Check if the popup menu is open.\n *\n * @return {boolean}\n */\nPopupMenu.prototype.isOpen = function() {\n  return !!this._current;\n};\n\n\n/**\n * Trigger an action associated with an entry.\n *\n * @param {Event} event\n * @param {PopupMenuEntry} entry\n * @param {string} [action='click']\n *\n * @return {any}\n */\nPopupMenu.prototype.trigger = function(event, entry, action = 'click') {\n\n  // silence other actions\n  event.preventDefault();\n\n  if (!entry) {\n    let element = domClosest(event.delegateTarget || event.target, '.entry', true);\n    let entryId = domAttr(element, DATA_REF);\n\n    entry = { id: entryId, ...this._getEntry(entryId) };\n  }\n\n  const handler = entry.action;\n\n  if (this._emit('trigger', { entry, event }) === false) {\n    return;\n  }\n\n  if (isFunction(handler)) {\n    if (action === 'click') {\n      return handler(event, entry);\n    }\n  } else {\n    if (handler[action]) {\n      return handler[action](event, entry);\n    }\n  }\n};\n\n/**\n * Get the entry (entry or header entry) with the given ID.\n *\n * @param {string} entryId\n *\n * @return {PopupMenuEntry|PopupMenuHeaderEntry}\n */\nPopupMenu.prototype._getEntry = function(entryId) {\n\n  var entry = this._current.entries[ entryId ] || this._current.headerEntries[ entryId ];\n\n\n  if (!entry) {\n    throw new Error('entry not found');\n  }\n\n  return entry;\n};","import PopupMenu from './PopupMenu';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'popupMenu' ],\n  popupMenu: [ 'type', PopupMenu ]\n};\n","/**\n * To change the icons, modify the SVGs in `./resources`, execute `npx svgo -f resources --datauri enc -o dist`,\n * and then replace respective icons with the optimized data URIs in `./dist`.\n */\nvar icons = {\n  align:  `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2000 2000\">\n              <line x1=\"200\" y1=\"150\" x2=\"200\" y2=\"1850\" style=\"stroke:currentColor;stroke-width:100;stroke-linecap:round;\"/>\n              <rect x=\"500\" y=\"150\" width=\"1300\" height=\"700\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n              <rect x=\"500\" y=\"1150\" width=\"700\" height=\"700\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n          </svg>`,\n  bottom: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n            <line x1=\"150\" y1=\"1650\" x2=\"1650\" y2=\"1650\" style=\"stroke:currentColor;stroke-width:100;stroke-linecap:round;\"/>\n            <rect x=\"150\" y=\"350\" width=\"600\" height=\"1300\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n            <rect x=\"1050\" y=\"850\" width=\"600\" height=\"800\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n          </svg>`,\n  center: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n            <line x1=\"900\" y1=\"150\" x2=\"900\" y2=\"1650\" style=\"stroke:currentColor;stroke-width:100;stroke-linecap:round;\"/>\n            <rect x=\"250\" y=\"150\" width=\"1300\" height=\"600\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n            <rect x=\"500\" y=\"1050\" width=\"800\" height=\"600\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n          </svg>`,\n  left:   `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n            <line x1=\"100\" y1=\"150\" x2=\"100\" y2=\"1650\" style=\"stroke:currentColor;stroke-width:100;stroke-linecap:round;\"/>\n            <rect x=\"100\" y=\"150\" width=\"1300\" height=\"600\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n            <rect x=\"100\" y=\"1050\" width=\"800\" height=\"600\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n          </svg>`,\n  right:  `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n            <line x1=\"1650\" y1=\"150\" x2=\"1650\" y2=\"1650\" style=\"stroke:currentColor;stroke-width:100;stroke-linecap:round;\"/>\n            <rect x=\"350\" y=\"150\" width=\"1300\" height=\"600\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n            <rect x=\"850\" y=\"1050\" width=\"800\" height=\"600\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n          </svg>`,\n  top:    `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n            <line x1=\"150\" y1=\"150\" x2=\"1650\" y2=\"150\" style=\"stroke:currentColor;stroke-width:100;stroke-linecap:round;\"/>\n            <rect x=\"150\" y=\"150\" width=\"600\" height=\"1300\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n            <rect x=\"1050\" y=\"150\" width=\"600\" height=\"800\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n          </svg>`,\n  middle: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n            <line x1=\"150\" y1=\"900\" x2=\"1650\" y2=\"900\" style=\"stroke:currentColor;stroke-width:100;stroke-linecap:round;\"/>\n            <rect x=\"150\" y=\"250\" width=\"600\" height=\"1300\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n            <rect x=\"1050\" y=\"500\" width=\"600\" height=\"800\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n          </svg>`\n};\n\nexport default icons;\n","import {\n  assign\n} from 'min-dash';\n\nimport ICONS from './AlignElementsIcons';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPad').default} ContextPad\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').default} PopupMenu\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPad').ContextPadEntries} ContextPadEntries\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').default<Element>} ContextPadProvider\n */\n\nvar LOW_PRIORITY = 900;\n\n/**\n * A provider for the `Align elements` context pad entry.\n *\n * @implements {ContextPadProvider}\n *\n * @param {ContextPad} contextPad\n * @param {PopupMenu} popupMenu\n * @param {Translate} translate\n * @param {Canvas} canvas\n */\nexport default function AlignElementsContextPadProvider(contextPad, popupMenu, translate, canvas) {\n\n  contextPad.registerProvider(LOW_PRIORITY, this);\n\n  this._contextPad = contextPad;\n  this._popupMenu = popupMenu;\n  this._translate = translate;\n  this._canvas = canvas;\n}\n\nAlignElementsContextPadProvider.$inject = [\n  'contextPad',\n  'popupMenu',\n  'translate',\n  'canvas'\n];\n\n/**\n * @param {Element[]} elements\n *\n * @return {ContextPadEntries}\n */\nAlignElementsContextPadProvider.prototype.getMultiElementContextPadEntries = function(elements) {\n  var actions = {};\n\n  if (this._isAllowed(elements)) {\n    assign(actions, this._getEntries(elements));\n  }\n\n  return actions;\n};\n\nAlignElementsContextPadProvider.prototype._isAllowed = function(elements) {\n  return !this._popupMenu.isEmpty(elements, 'align-elements');\n};\n\nAlignElementsContextPadProvider.prototype._getEntries = function() {\n  var self = this;\n\n  return {\n    'align-elements': {\n      group: 'align-elements',\n      title: self._translate('Align elements'),\n      html: `<div class=\"entry\">${ICONS['align']}</div>`,\n      action: {\n        click: function(event, target) {\n          var position = self._getMenuPosition(target);\n\n          assign(position, {\n            cursor: {\n              x: event.x,\n              y: event.y\n            }\n          });\n\n          self._popupMenu.open(target, 'align-elements', position);\n        }\n      }\n    }\n  };\n};\n\nAlignElementsContextPadProvider.prototype._getMenuPosition = function(elements) {\n  var Y_OFFSET = 5;\n\n  var pad = this._contextPad.getPad(elements).html;\n\n  var padRect = pad.getBoundingClientRect();\n\n  var pos = {\n    x: padRect.left,\n    y: padRect.bottom + Y_OFFSET\n  };\n\n  return pos;\n};\n","import ICONS from './AlignElementsIcons';\n\nimport {\n  assign,\n  forEach,\n} from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/features/align-elements/AlignElements').default} AlignElements\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').default} PopupMenu\n * @typedef {import('diagram-js/lib/features/rules/Rules').default} Rules\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n *\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').PopupMenuEntries} PopupMenuEntries\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').default} PopupMenuProvider\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').PopupMenuTarget} PopupMenuTarget\n */\n\nvar ALIGNMENT_OPTIONS = [\n  'left',\n  'center',\n  'right',\n  'top',\n  'middle',\n  'bottom'\n];\n\n/**\n * A provider for the `Align elements` popup menu.\n *\n * @implements {PopupMenuProvider}\n *\n * @param {PopupMenu} popupMenu\n * @param {AlignElements} alignElements\n * @param {Translate} translate\n * @param {Rules} rules\n */\nexport default function AlignElementsMenuProvider(popupMenu, alignElements, translate, rules) {\n\n  this._alignElements = alignElements;\n  this._translate = translate;\n  this._popupMenu = popupMenu;\n  this._rules = rules;\n\n  popupMenu.registerProvider('align-elements', this);\n}\n\nAlignElementsMenuProvider.$inject = [\n  'popupMenu',\n  'alignElements',\n  'translate',\n  'rules'\n];\n\n/**\n * @param {PopupMenuTarget} target\n *\n * @return {PopupMenuEntries}\n */\nAlignElementsMenuProvider.prototype.getPopupMenuEntries = function(target) {\n  var entries = {};\n\n  if (this._isAllowed(target)) {\n    assign(entries, this._getEntries(target));\n  }\n\n  return entries;\n};\n\nAlignElementsMenuProvider.prototype._isAllowed = function(target) {\n  return this._rules.allowed('elements.align', { elements: target });\n};\n\n/**\n * @param {PopupMenuTarget} target\n *\n * @return {PopupMenuEntries}\n */\nAlignElementsMenuProvider.prototype._getEntries = function(target) {\n  var alignElements = this._alignElements,\n      translate = this._translate,\n      popupMenu = this._popupMenu;\n\n  var entries = {};\n\n  forEach(ALIGNMENT_OPTIONS, function(alignment) {\n    entries[ 'align-elements-' + alignment ] = {\n      group: 'align',\n      title: translate('Align elements ' + alignment),\n      className: 'bjs-align-elements-menu-entry',\n      imageHtml: ICONS[ alignment ],\n      action: function() {\n        alignElements.trigger(target, alignment);\n        popupMenu.close();\n      }\n    };\n  });\n\n  return entries;\n};\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n/**\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\n/**\n * A basic provider that may be extended to implement modeling rules.\n *\n * Extensions should implement the init method to actually add their custom\n * modeling checks. Checks may be added via the #addRule(action, fn) method.\n *\n * @class\n *\n * @param {EventBus} eventBus\n */\nexport default function RuleProvider(eventBus) {\n  CommandInterceptor.call(this, eventBus);\n\n  this.init();\n}\n\nRuleProvider.$inject = [ 'eventBus' ];\n\ninherits(RuleProvider, CommandInterceptor);\n\n\n/**\n * Adds a modeling rule for the given action, implemented through\n * a callback function.\n *\n * The callback receives a modeling specific action context\n * to perform its check. It must return `false` to disallow the\n * action from happening or `true` to allow the action. Usually returing\n * `null` denotes that a particular interaction shall be ignored.\n * By returning nothing or `undefined` you pass evaluation to lower\n * priority rules.\n *\n * @example\n *\n * ```javascript\n * ResizableRules.prototype.init = function() {\n *\n *   \\/**\n *    * Return `true`, `false` or nothing to denote\n *    * _allowed_, _not allowed_ and _continue evaluating_.\n *    *\\/\n *   this.addRule('shape.resize', function(context) {\n *\n *     var shape = context.shape;\n *\n *     if (!context.newBounds) {\n *       // check general resizability\n *       if (!shape.resizable) {\n *         return false;\n *       }\n *\n *       // not returning anything (read: undefined)\n *       // will continue the evaluation of other rules\n *       // (with lower priority)\n *       return;\n *     } else {\n *       // element must have minimum size of 10*10 points\n *       return context.newBounds.width > 10 && context.newBounds.height > 10;\n *     }\n *   });\n * };\n * ```\n *\n * @param {string|string[]} actions the identifier for the modeling action to check\n * @param {number} [priority] the priority at which this rule is being applied\n * @param {(any) => any} fn the callback function that performs the actual check\n */\nRuleProvider.prototype.addRule = function(actions, priority, fn) {\n\n  var self = this;\n\n  if (typeof actions === 'string') {\n    actions = [ actions ];\n  }\n\n  actions.forEach(function(action) {\n\n    self.canExecute(action, priority, function(context, action, event) {\n      return fn(context);\n    }, true);\n  });\n};\n\n/**\n * Implement this method to add new rules during provider initialization.\n */\nRuleProvider.prototype.init = function() {};","import inherits from 'inherits-browser';\n\nimport RuleProvider from 'diagram-js/lib/features/rules/RuleProvider';\nimport { getParents } from 'diagram-js/lib/util/Elements';\n\nimport {\n  filter\n} from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\n/**\n * Rule provider for aligning BPMN elements.\n *\n * @param {EventBus} eventBus\n */\nexport default function BpmnAlignElements(eventBus) {\n  RuleProvider.call(this, eventBus);\n}\n\nBpmnAlignElements.$inject = [ 'eventBus' ];\n\ninherits(BpmnAlignElements, RuleProvider);\n\nBpmnAlignElements.prototype.init = function() {\n  this.addRule('elements.align', function(context) {\n    var elements = context.elements;\n\n    // filter out elements which cannot be aligned\n    var filteredElements = filter(elements, function(element) {\n      return !(element.waypoints || element.host || element.labelTarget);\n    });\n\n    // filter out elements which are children of any of the selected elements\n    filteredElements = getParents(filteredElements);\n\n    if (filteredElements.length < 2) {\n      return false;\n    }\n\n    return filteredElements;\n  });\n};\n","import AlignElementsModule from 'diagram-js/lib/features/align-elements';\nimport ContextPadModule from 'diagram-js/lib/features/context-pad';\nimport PopupMenuModule from 'diagram-js/lib/features/popup-menu';\n\nimport AlignElementsContextPadProvider from './AlignElementsContextPadProvider';\nimport AlignElementsMenuProvider from './AlignElementsMenuProvider';\nimport BpmnAlignElements from './BpmnAlignElements';\n\nexport default {\n  __depends__: [\n    AlignElementsModule,\n    ContextPadModule,\n    PopupMenuModule\n  ],\n  __init__: [\n    'alignElementsContextPadProvider',\n    'alignElementsMenuProvider',\n    'bpmnAlignElements'\n  ],\n  alignElementsContextPadProvider: [ 'type', AlignElementsContextPadProvider ],\n  alignElementsMenuProvider: [ 'type', AlignElementsMenuProvider ],\n  bpmnAlignElements: [ 'type', BpmnAlignElements ]\n};\n","import {\n  asTRBL,\n  getOrientation,\n  getMid\n} from '../../layout/LayoutUtil';\n\nimport {\n  find,\n  reduce\n} from 'min-dash';\n\n/**\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('../../util/Types').Point} Point\n */\n\n// padding to detect element placement\nvar PLACEMENT_DETECTION_PAD = 10;\n\nexport var DEFAULT_DISTANCE = 50;\n\nvar DEFAULT_MAX_DISTANCE = 250;\n\n\n/**\n * Get free position starting from given position.\n *\n * @param {Shape} source\n * @param {Shape} element\n * @param {Point} position\n * @param {(element: Element, position: Point, connectedAtPosition: Element) => Point} getNextPosition\n *\n * @return {Point}\n */\nexport function findFreePosition(source, element, position, getNextPosition) {\n  var connectedAtPosition;\n\n  while ((connectedAtPosition = getConnectedAtPosition(source, position, element))) {\n    position = getNextPosition(element, position, connectedAtPosition);\n  }\n\n  return position;\n}\n\n/**\n * Returns function that returns next position.\n *\n * @param {Object} nextPositionDirection\n * @param {Object} [nextPositionDirection.x]\n * @param {Object} [nextPositionDirection.y]\n *\n * @return {(element: Element, previousPosition: Point, connectedAtPosition: Element) => Point}\n */\nexport function generateGetNextPosition(nextPositionDirection) {\n  return function(element, previousPosition, connectedAtPosition) {\n    var nextPosition = {\n      x: previousPosition.x,\n      y: previousPosition.y\n    };\n\n    [ 'x', 'y' ].forEach(function(axis) {\n\n      var nextPositionDirectionForAxis = nextPositionDirection[ axis ];\n\n      if (!nextPositionDirectionForAxis) {\n        return;\n      }\n\n      var dimension = axis === 'x' ? 'width' : 'height';\n\n      var margin = nextPositionDirectionForAxis.margin,\n          minDistance = nextPositionDirectionForAxis.minDistance;\n\n      if (margin < 0) {\n        nextPosition[ axis ] = Math.min(\n          connectedAtPosition[ axis ] + margin - element[ dimension ] / 2,\n          previousPosition[ axis ] - minDistance + margin\n        );\n      } else {\n        nextPosition[ axis ] = Math.max(\n          connectedAtPosition[ axis ] + connectedAtPosition[ dimension ] + margin + element[ dimension ] / 2,\n          previousPosition[ axis ] + minDistance + margin\n        );\n      }\n    });\n\n    return nextPosition;\n  };\n}\n\n/**\n * Return connected element at given position and within given bounds. Takes\n * connected elements from host and attachers into account, too.\n *\n * @param {Shape} source\n * @param {Point} position\n * @param {Shape} element\n *\n * @return {Shape|undefined}\n */\nexport function getConnectedAtPosition(source, position, element) {\n\n  var bounds = {\n    x: position.x - (element.width / 2),\n    y: position.y - (element.height / 2),\n    width: element.width,\n    height: element.height\n  };\n\n  var closure = getAutoPlaceClosure(source);\n\n  return find(closure, function(target) {\n\n    if (target === element) {\n      return false;\n    }\n\n    var orientation = getOrientation(target, bounds, PLACEMENT_DETECTION_PAD);\n\n    return orientation === 'intersect';\n  });\n}\n\n/**\n* Compute optimal distance between source and target based on existing connections to and from source.\n* Assumes left-to-right and top-to-down modeling.\n*\n* @param {Shape} source\n* @param {Object} [hints]\n* @param {number} [hints.defaultDistance]\n* @param {string} [hints.direction]\n* @param {(connection: Connection) => boolean} [hints.filter]\n* @param {(connection: Connection) => number} [hints.getWeight]\n* @param {number} [hints.maxDistance]\n* @param {'start'|'center'|'end'} [hints.reference]\n*\n* @return {number}\n*/\nexport function getConnectedDistance(source, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  // targets > sources by default\n  function getDefaultWeight(connection) {\n    return connection.source === source ? 1 : -1;\n  }\n\n  var defaultDistance = hints.defaultDistance || DEFAULT_DISTANCE,\n      direction = hints.direction || 'e',\n      filter = hints.filter,\n      getWeight = hints.getWeight || getDefaultWeight,\n      maxDistance = hints.maxDistance || DEFAULT_MAX_DISTANCE,\n      reference = hints.reference || 'start';\n\n  if (!filter) {\n    filter = noneFilter;\n  }\n\n  function getDistance(a, b) {\n    if (direction === 'n') {\n      if (reference === 'start') {\n        return asTRBL(a).top - asTRBL(b).bottom;\n      } else if (reference === 'center') {\n        return asTRBL(a).top - getMid(b).y;\n      } else {\n        return asTRBL(a).top - asTRBL(b).top;\n      }\n    } else if (direction === 'w') {\n      if (reference === 'start') {\n        return asTRBL(a).left - asTRBL(b).right;\n      } else if (reference === 'center') {\n        return asTRBL(a).left - getMid(b).x;\n      } else {\n        return asTRBL(a).left - asTRBL(b).left;\n      }\n    } else if (direction === 's') {\n      if (reference === 'start') {\n        return asTRBL(b).top - asTRBL(a).bottom;\n      } else if (reference === 'center') {\n        return getMid(b).y - asTRBL(a).bottom;\n      } else {\n        return asTRBL(b).bottom - asTRBL(a).bottom;\n      }\n    } else {\n      if (reference === 'start') {\n        return asTRBL(b).left - asTRBL(a).right;\n      } else if (reference === 'center') {\n        return getMid(b).x - asTRBL(a).right;\n      } else {\n        return asTRBL(b).right - asTRBL(a).right;\n      }\n    }\n  }\n\n  var sourcesDistances = source.incoming\n    .filter(filter)\n    .map(function(connection) {\n      var weight = getWeight(connection);\n\n      var distance = weight < 0\n        ? getDistance(connection.source, source)\n        : getDistance(source, connection.source);\n\n      return {\n        id: connection.source.id,\n        distance: distance,\n        weight: weight\n      };\n    });\n\n  var targetsDistances = source.outgoing\n    .filter(filter)\n    .map(function(connection) {\n      var weight = getWeight(connection);\n\n      var distance = weight > 0\n        ? getDistance(source, connection.target)\n        : getDistance(connection.target, source);\n\n      return {\n        id: connection.target.id,\n        distance: distance,\n        weight: weight\n      };\n    });\n\n  var distances = sourcesDistances.concat(targetsDistances).reduce(function(accumulator, currentValue) {\n    accumulator[ currentValue.id + '__weight_' + currentValue.weight ] = currentValue;\n\n    return accumulator;\n  }, {});\n\n  var distancesGrouped = reduce(distances, function(accumulator, currentValue) {\n    var distance = currentValue.distance,\n        weight = currentValue.weight;\n\n    if (distance < 0 || distance > maxDistance) {\n      return accumulator;\n    }\n\n    if (!accumulator[ String(distance) ]) {\n      accumulator[ String(distance) ] = 0;\n    }\n\n    accumulator[ String(distance) ] += 1 * weight;\n\n    if (!accumulator.distance || accumulator[ accumulator.distance ] < accumulator[ String(distance) ]) {\n      accumulator.distance = distance;\n    }\n\n    return accumulator;\n  }, {});\n\n  return distancesGrouped.distance || defaultDistance;\n}\n\n/**\n * Returns all elements connected to given source.\n *\n * This includes:\n *\n *   - elements connected to source\n *   - elements connected to host if source is an attacher\n *   - elements connected to attachers if source is a host\n *\n * @param {Shape} source\n *\n * @return {Shape[]}\n */\nfunction getAutoPlaceClosure(source) {\n\n  var allConnected = getConnected(source);\n\n  if (source.host) {\n    allConnected = allConnected.concat(getConnected(source.host));\n  }\n\n  if (source.attachers) {\n    allConnected = allConnected.concat(source.attachers.reduce(function(shapes, attacher) {\n      return shapes.concat(getConnected(attacher));\n    }, []));\n  }\n\n  return allConnected;\n}\n\n/**\n * Get all connected elements.\n *\n * @param {Shape} element\n *\n * @returns {Shape[]}\n */\nfunction getConnected(element) {\n  return getTargets(element).concat(getSources(element));\n}\n\nfunction getSources(shape) {\n  return shape.incoming.map(function(connection) {\n    return connection.source;\n  });\n}\n\nfunction getTargets(shape) {\n  return shape.outgoing.map(function(connection) {\n    return connection.target;\n  });\n}\n\nfunction noneFilter() {\n  return true;\n}\n","import {\n  asTRBL,\n  getMid\n} from '../../layout/LayoutUtil';\n\nimport { DEFAULT_DISTANCE } from './AutoPlaceUtil';\n\n/**\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n */\n\nvar LOW_PRIORITY = 100;\n\n\n/**\n * A service that places elements connected to existing ones\n * to an appropriate position in an _automated_ fashion.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Canvas} canvas\n */\nexport default function AutoPlace(eventBus, modeling, canvas) {\n\n  eventBus.on('autoPlace', LOW_PRIORITY, function(context) {\n    var shape = context.shape,\n        source = context.source;\n\n    return getNewShapePosition(source, shape);\n  });\n\n  eventBus.on('autoPlace.end', function(event) {\n    canvas.scrollToElement(event.shape);\n  });\n\n  /**\n   * Append shape to source at appropriate position.\n   *\n   * @param {Shape} source\n   * @param {Shape} shape\n   * @param {any} [hints={}]\n   *\n   * @return {Shape} appended shape\n   */\n  this.append = function(source, shape, hints) {\n\n    eventBus.fire('autoPlace.start', {\n      source: source,\n      shape: shape\n    });\n\n    // allow others to provide the position\n    var position = eventBus.fire('autoPlace', {\n      source: source,\n      shape: shape\n    });\n\n    var newShape = modeling.appendShape(source, shape, position, source.parent, hints);\n\n    eventBus.fire('autoPlace.end', {\n      source: source,\n      shape: newShape\n    });\n\n    return newShape;\n  };\n\n}\n\nAutoPlace.$inject = [\n  'eventBus',\n  'modeling',\n  'canvas'\n];\n\n// helpers //////////\n\n/**\n * Find the new position for the target element to\n * connect to source.\n *\n * @param {Shape} source\n * @param {Shape} element\n * @param {Object} [hints]\n * @param {Object} [hints.defaultDistance]\n *\n * @return {Point}\n */\nfunction getNewShapePosition(source, element, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  var distance = hints.defaultDistance || DEFAULT_DISTANCE;\n\n  var sourceMid = getMid(source),\n      sourceTrbl = asTRBL(source);\n\n  // simply put element right next to source\n  return {\n    x: sourceTrbl.right + distance + element.width / 2,\n    y: sourceMid.y\n  };\n}","/**\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../selection/Selection').default} Selection\n */\n\n/**\n * Select element after auto placement.\n *\n * @param {EventBus} eventBus\n * @param {Selection} selection\n */\nexport default function AutoPlaceSelectionBehavior(eventBus, selection) {\n\n  eventBus.on('autoPlace.end', 500, function(e) {\n    selection.select(e.shape);\n  });\n\n}\n\nAutoPlaceSelectionBehavior.$inject = [\n  'eventBus',\n  'selection'\n];","import AutoPlace from './AutoPlace';\nimport AutoPlaceSelectionBehavior from './AutoPlaceSelectionBehavior';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'autoPlaceSelectionBehavior' ],\n  autoPlace: [ 'type', AutoPlace ],\n  autoPlaceSelectionBehavior: [ 'type', AutoPlaceSelectionBehavior ]\n};","import { isString } from 'min-dash';\n\nexport { is, isAny } from '../../../util/ModelUtil';\n\nimport {\n  is,\n  isAny,\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nimport { isHorizontal } from '../../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../../model/Types').Element} Element\n */\n\n/**\n * Return the parent of the element with any of the given types.\n *\n * @param {Element} element\n * @param {string|string[]} anyType\n *\n * @return {Element|null}\n */\nexport function getParent(element, anyType) {\n\n  if (isString(anyType)) {\n    anyType = [ anyType ];\n  }\n\n  while ((element = element.parent)) {\n    if (isAny(element, anyType)) {\n      return element;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Determines if the local modeling direction is vertical or horizontal.\n *\n * @param {Element} element\n * @param {ElementRegistry} [elementRegistry] - provide to consider parent diagram direction\n *\n * @return {boolean} false for vertical pools, lanes and their children. true otherwise\n */\nexport function isDirectionHorizontal(element, elementRegistry) {\n\n  var parent = getParent(element, 'bpmn:Process');\n  if (parent) {\n    return true;\n  }\n\n  var types = [ 'bpmn:Participant', 'bpmn:Lane' ];\n\n  parent = getParent(element, types);\n  if (parent) {\n    return isHorizontal(parent);\n  } else if (isAny(element, types)) {\n    return isHorizontal(element);\n  }\n\n  var process;\n  for (process = getBusinessObject(element); process; process = process.$parent) {\n    if (is(process, 'bpmn:Process')) {\n      break;\n    }\n  }\n\n  if (!elementRegistry) {\n    return true;\n  }\n\n  // The direction may be specified in another diagram. We ignore that there\n  // could be multiple diagrams with contradicting properties based on the\n  // assumption that such BPMN files are unusual.\n  var pool = elementRegistry.find(function(shape) {\n    var businessObject = getBusinessObject(shape);\n    return businessObject && businessObject.get('processRef') === process;\n  });\n\n  if (!pool) {\n    return true;\n  }\n\n  return isHorizontal(pool);\n}","import { is } from '../../util/ModelUtil';\n\nimport {\n  isAny,\n  isDirectionHorizontal\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  getMid,\n  asTRBL,\n  getOrientation\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  findFreePosition,\n  generateGetNextPosition,\n  getConnectedDistance\n} from 'diagram-js/lib/features/auto-place/AutoPlaceUtil';\n\nimport { isConnection } from 'diagram-js/lib/util/ModelUtil';\n\n/**\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n * @typedef {import('diagram-js/lib/util/Types').DirectionTRBL} DirectionTRBL\n */\n\n/**\n * Get the position for given new target relative to the source it will be\n * connected to.\n *\n * @param  {Shape} source\n * @param  {Shape} element\n * @param  {ElementRegistry} elementRegistry\n *\n * @return {Point}\n */\nexport function getNewShapePosition(source, element, elementRegistry) {\n\n  var placeHorizontally = isDirectionHorizontal(source, elementRegistry);\n\n  if (is(element, 'bpmn:TextAnnotation')) {\n    return getTextAnnotationPosition(source, element, placeHorizontally);\n  }\n\n  if (isAny(element, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ])) {\n    return getDataElementPosition(source, element, placeHorizontally);\n  }\n\n  if (is(element, 'bpmn:FlowNode')) {\n    return getFlowNodePosition(source, element, placeHorizontally);\n  }\n}\n\n/**\n * Get the position for given new flow node. Try placing the flow node right/bottom of\n * the source.\n *\n * @param {Shape} source\n * @param {Shape} element\n * @param {boolean} placeHorizontally Whether to place the new element horizontally\n *\n * @return {Point}\n */\nexport function getFlowNodePosition(source, element, placeHorizontally) {\n\n  var sourceTrbl = asTRBL(source);\n  var sourceMid = getMid(source);\n\n  var placement = placeHorizontally ? {\n    directionHint: 'e',\n    minDistance: 80,\n    baseOrientation: 'left',\n    boundaryOrientation: 'top',\n    start: 'top',\n    end: 'bottom'\n  } : {\n    directionHint: 's',\n    minDistance: 90,\n    baseOrientation: 'top',\n    boundaryOrientation: 'left',\n    start: 'left',\n    end: 'right'\n  };\n\n  var connectedDistance = getConnectedDistance(source, {\n    filter: function(connection) {\n      return is(connection, 'bpmn:SequenceFlow');\n    },\n    direction: placement.directionHint\n  });\n\n  var margin = 30,\n      minDistance = placement.minDistance,\n      orientation = placement.baseOrientation;\n\n  if (is(source, 'bpmn:BoundaryEvent')) {\n    orientation = getOrientation(source, source.host, -25);\n\n    if (orientation.indexOf(placement.boundaryOrientation) !== -1) {\n      margin *= -1;\n    }\n  }\n\n  var position = placeHorizontally ? {\n    x: sourceTrbl.right + connectedDistance + element.width / 2,\n    y: sourceMid.y + getDistance(orientation, minDistance, placement)\n  } : {\n    x: sourceMid.x + getDistance(orientation, minDistance, placement),\n    y: sourceTrbl.bottom + connectedDistance + element.height / 2\n  };\n\n  var nextPosition = {\n    margin: margin,\n    minDistance: minDistance\n  };\n\n  var nextPositionDirection = placeHorizontally ? {\n    y: nextPosition\n  } : {\n    x: nextPosition\n  };\n\n  return findFreePosition(source, element, position, generateGetNextPosition(nextPositionDirection));\n}\n\n/**\n * @param {DirectionTRBL} orientation\n * @param {number} minDistance\n * @param {{ start: DirectionTRBL, end: DirectionTRBL }} placement\n *\n * @return {number}\n */\nfunction getDistance(orientation, minDistance, placement) {\n  if (orientation.includes(placement.start)) {\n    return -1 * minDistance;\n  } else if (orientation.includes(placement.end)) {\n    return minDistance;\n  } else {\n    return 0;\n  }\n}\n\n\n/**\n * Get the position for given text annotation. Try placing the text annotation\n * top-right of the source (bottom-right in vertical layouts).\n *\n * @param {Shape} source\n * @param {Shape} element\n * @param {boolean} placeHorizontally Whether to place the new element horizontally\n *\n * @return {Point}\n */\nexport function getTextAnnotationPosition(source, element, placeHorizontally) {\n\n  var sourceTrbl = asTRBL(source);\n\n  var position = placeHorizontally ? {\n    x: sourceTrbl.right + element.width / 2,\n    y: sourceTrbl.top - 50 - element.height / 2\n  } : {\n    x: sourceTrbl.right + 50 + element.width / 2,\n    y: sourceTrbl.bottom + element.height / 2\n  };\n\n  if (isConnection(source)) {\n    position = getMid(source);\n    if (placeHorizontally) {\n      position.x += 100;\n      position.y -= 50;\n    } else {\n      position.x += 100;\n      position.y += 50;\n    }\n  }\n\n  var nextPosition = {\n    margin: placeHorizontally ? -30 : 30,\n    minDistance: 20\n  };\n  var nextPositionDirection = placeHorizontally ? {\n    y: nextPosition\n  } : {\n    x: nextPosition\n  };\n\n  return findFreePosition(source, element, position, generateGetNextPosition(nextPositionDirection));\n}\n\n\n/**\n * Get the position for given new data element. Try placing the data element\n * bottom-right of the source (bottom-left in vertical layouts).\n *\n * @param {Shape} source\n * @param {Shape} element\n * @param {boolean} placeHorizontally Whether to place the new element horizontally\n *\n * @return {Point}\n */\nexport function getDataElementPosition(source, element, placeHorizontally) {\n\n  var sourceTrbl = asTRBL(source);\n\n  var position = placeHorizontally ? {\n    x: sourceTrbl.right - 10 + element.width / 2,\n    y: sourceTrbl.bottom + 40 + element.width / 2\n  } : {\n    x: sourceTrbl.left - 40 - element.width / 2,\n    y: sourceTrbl.bottom - 10 + element.height / 2\n  };\n\n  var nextPosition = {\n    margin: 30,\n    minDistance: 30\n  };\n  var nextPositionDirection = placeHorizontally ? {\n    x: nextPosition\n  } : {\n    y: nextPosition\n  };\n\n  return findFreePosition(source, element, position, generateGetNextPosition(nextPositionDirection));\n}","import { getNewShapePosition } from './BpmnAutoPlaceUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n */\n\n/**\n * BPMN auto-place behavior.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n */\nexport default function AutoPlace(eventBus, elementRegistry) {\n  eventBus.on('autoPlace', function(context) {\n    var shape = context.shape,\n        source = context.source;\n\n    return getNewShapePosition(source, shape, elementRegistry);\n  });\n}\n\nAutoPlace.$inject = [ 'eventBus', 'elementRegistry' ];","import AutoPlaceModule from 'diagram-js/lib/features/auto-place';\n\nimport BpmnAutoPlace from './BpmnAutoPlace';\n\nexport default {\n  __depends__: [ AutoPlaceModule ],\n  __init__: [ 'bpmnAutoPlace' ],\n  bpmnAutoPlace: [ 'type', BpmnAutoPlace ]\n};","import inherits from 'inherits-browser';\n\nimport { getBBox as getBoundingBox } from '../../util/Elements';\n\nimport {\n  asTRBL,\n  asBounds\n} from '../../layout/LayoutUtil';\n\nimport {\n  assign,\n  flatten,\n  find,\n  forEach,\n  groupBy,\n  isArray,\n  matchPattern,\n  pick,\n  values\n} from 'min-dash';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('../../util/Types').Direction} Direction\n * @typedef {import('../../util/Types').Rect} Rect\n * @typedef {import('../../util/Types').RectTRBL} RectTRBL\n *\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n */\n\n/**\n * An auto resize component that takes care of expanding a parent element\n * if child elements are created or moved close the parents edge.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function AutoResize(eventBus, elementRegistry, modeling, rules) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this._elementRegistry = elementRegistry;\n  this._modeling = modeling;\n  this._rules = rules;\n\n  var self = this;\n\n  this.postExecuted([ 'shape.create' ], function(event) {\n    var context = event.context,\n        hints = context.hints || {},\n        shape = context.shape,\n        parent = context.parent || context.newParent;\n\n    if (hints.autoResize === false) {\n      return;\n    }\n\n    self._expand([ shape ], parent);\n  });\n\n  this.postExecuted([ 'elements.move' ], function(event) {\n    var context = event.context,\n        elements = flatten(values(context.closure.topLevel)),\n        hints = context.hints;\n\n    var autoResize = hints ? hints.autoResize : true;\n\n    if (autoResize === false) {\n      return;\n    }\n\n    var expandings = groupBy(elements, function(element) {\n      return element.parent.id;\n    });\n\n    forEach(expandings, function(elements, parentId) {\n\n      // optionally filter elements to be considered when resizing\n      if (isArray(autoResize)) {\n        elements = elements.filter(function(element) {\n          return find(autoResize, matchPattern({ id: element.id }));\n        });\n      }\n\n      self._expand(elements, parentId);\n    });\n  });\n\n  this.postExecuted([ 'shape.toggleCollapse' ], function(event) {\n    var context = event.context,\n        hints = context.hints,\n        shape = context.shape;\n\n    if (hints && hints.autoResize === false) {\n      return;\n    }\n\n    if (shape.collapsed) {\n      return;\n    }\n\n    self._expand(shape.children || [], shape);\n  });\n\n  this.postExecuted([ 'shape.resize' ], function(event) {\n    var context = event.context,\n        hints = context.hints,\n        shape = context.shape,\n        parent = shape.parent;\n\n    if (hints && hints.autoResize === false) {\n      return;\n    }\n\n    if (parent) {\n      self._expand([ shape ], parent);\n    }\n  });\n\n}\n\nAutoResize.$inject = [\n  'eventBus',\n  'elementRegistry',\n  'modeling',\n  'rules'\n];\n\ninherits(AutoResize, CommandInterceptor);\n\n\n/**\n * Calculate the new bounds of the target shape, given\n * a number of elements have been moved or added into the parent.\n *\n * This method considers the current size, the added elements as well as\n * the provided padding for the new bounds.\n *\n * @param {Shape[]} elements\n * @param {Shape} target\n */\nAutoResize.prototype._getOptimalBounds = function(elements, target) {\n\n  var offset = this.getOffset(target),\n      padding = this.getPadding(target);\n\n  var elementsTrbl = asTRBL(getBoundingBox(elements)),\n      targetTrbl = asTRBL(target);\n\n  var newTrbl = {};\n\n  if (elementsTrbl.top - targetTrbl.top < padding.top) {\n    newTrbl.top = elementsTrbl.top - offset.top;\n  }\n\n  if (elementsTrbl.left - targetTrbl.left < padding.left) {\n    newTrbl.left = elementsTrbl.left - offset.left;\n  }\n\n  if (targetTrbl.right - elementsTrbl.right < padding.right) {\n    newTrbl.right = elementsTrbl.right + offset.right;\n  }\n\n  if (targetTrbl.bottom - elementsTrbl.bottom < padding.bottom) {\n    newTrbl.bottom = elementsTrbl.bottom + offset.bottom;\n  }\n\n  return asBounds(assign({}, targetTrbl, newTrbl));\n};\n\n\n/**\n * Expand the target shape respecting rules, offset and padding\n *\n * @param {Shape[]} elements\n * @param {Shape|string} target The target or its ID.\n */\nAutoResize.prototype._expand = function(elements, target) {\n\n  if (typeof target === 'string') {\n    target = this._elementRegistry.get(target);\n  }\n\n  var allowed = this._rules.allowed('element.autoResize', {\n    elements: elements,\n    target: target\n  });\n\n  if (!allowed) {\n    return;\n  }\n\n  // calculate the new bounds\n  var newBounds = this._getOptimalBounds(elements, target);\n\n  if (!boundsChanged(newBounds, target)) {\n    return;\n  }\n\n  var resizeDirections = getResizeDirections(pick(target, [ 'x', 'y', 'width', 'height' ]), newBounds);\n\n  // resize the parent shape\n  this.resize(target, newBounds, {\n    autoResize: resizeDirections\n  });\n\n  var parent = target.parent;\n\n  // recursively expand parent elements\n  if (parent) {\n    this._expand([ target ], parent);\n  }\n};\n\n\n/**\n * Get the amount to expand the given shape in each direction.\n *\n * @param {Shape} shape\n *\n * @return {RectTRBL}\n */\nAutoResize.prototype.getOffset = function(shape) {\n  return { top: 60, bottom: 60, left: 100, right: 100 };\n};\n\n\n/**\n * Get the activation threshold for each side for which\n * resize triggers.\n *\n * @param {Shape} shape\n *\n * @return {RectTRBL}\n */\nAutoResize.prototype.getPadding = function(shape) {\n  return { top: 2, bottom: 2, left: 15, right: 15 };\n};\n\n\n/**\n * Perform the actual resize operation.\n *\n * @param {Shape} shape\n * @param {Rect} newBounds\n * @param {Object} [hints]\n * @param {string} [hints.autoResize]\n */\nAutoResize.prototype.resize = function(shape, newBounds, hints) {\n  this._modeling.resizeShape(shape, newBounds, null, hints);\n};\n\n\nfunction boundsChanged(newBounds, oldBounds) {\n  return (\n    newBounds.x !== oldBounds.x ||\n    newBounds.y !== oldBounds.y ||\n    newBounds.width !== oldBounds.width ||\n    newBounds.height !== oldBounds.height\n  );\n}\n\n/**\n * Get directions of resize as {n|w|s|e} e.g. \"nw\".\n *\n * @param {Rect} oldBounds\n * @param {Rect} newBounds\n *\n * @return {Direction} Resize directions as {n|w|s|e}.\n */\nfunction getResizeDirections(oldBounds, newBounds) {\n  var directions = '';\n\n  oldBounds = asTRBL(oldBounds);\n  newBounds = asTRBL(newBounds);\n\n  if (oldBounds.top > newBounds.top) {\n    directions = directions.concat('n');\n  }\n\n  if (oldBounds.right < newBounds.right) {\n    directions = directions.concat('w');\n  }\n\n  if (oldBounds.bottom < newBounds.bottom) {\n    directions = directions.concat('s');\n  }\n\n  if (oldBounds.left > newBounds.left) {\n    directions = directions.concat('e');\n  }\n\n  return directions;\n}","import AutoResize from 'diagram-js/lib/features/auto-resize/AutoResize';\n\nimport inherits from 'inherits-browser';\n\nimport { is } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n */\n\n/**\n * BPMN-specific resize behavior.\n *\n * @param {Injector} injector\n */\nexport default function BpmnAutoResize(injector) {\n\n  injector.invoke(AutoResize, this);\n}\n\nBpmnAutoResize.$inject = [\n  'injector'\n];\n\ninherits(BpmnAutoResize, AutoResize);\n\n/**\n * Perform BPMN-specific resizing of participants.\n *\n * @param {Shape} target\n * @param {Rect} newBounds\n * @param {Object} [hints]\n * @param {string} [hints.autoResize]\n */\nBpmnAutoResize.prototype.resize = function(target, newBounds, hints) {\n\n  if (is(target, 'bpmn:Participant')) {\n    this._modeling.resizeLane(target, newBounds, null, hints);\n  } else {\n    this._modeling.resizeShape(target, newBounds, null, hints);\n  }\n};","import RuleProvider from '../rules/RuleProvider';\n\nimport inherits from 'inherits-browser';\n\n/**\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\n/**\n * This is a base rule provider for the element.autoResize rule.\n *\n * @param {EventBus} eventBus\n */\nexport default function AutoResizeProvider(eventBus) {\n\n  RuleProvider.call(this, eventBus);\n\n  var self = this;\n\n  this.addRule('element.autoResize', function(context) {\n    return self.canResize(context.elements, context.target);\n  });\n}\n\nAutoResizeProvider.$inject = [ 'eventBus' ];\n\ninherits(AutoResizeProvider, RuleProvider);\n\n/**\n * Needs to be implemented by sub classes to allow actual auto resize\n *\n * @param {Shape[]} elements\n * @param {Shape} target\n *\n * @return {boolean}\n */\nAutoResizeProvider.prototype.canResize = function(elements, target) {\n  return false;\n};","import { is } from '../../util/ModelUtil';\n\nimport { isLabel } from '../../util/LabelUtil';\n\nimport inherits from 'inherits-browser';\n\nimport { forEach } from 'min-dash';\n\nimport AutoResizeProvider from 'diagram-js/lib/features/auto-resize/AutoResizeProvider';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n *\n * @typedef {import('../../model/Types').Shape} Shape\n */\n\n/**\n * BPMN-specific provider for automatic resizung.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function BpmnAutoResizeProvider(eventBus, modeling) {\n  AutoResizeProvider.call(this, eventBus);\n\n  this._modeling = modeling;\n}\n\ninherits(BpmnAutoResizeProvider, AutoResizeProvider);\n\nBpmnAutoResizeProvider.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n/**\n * BPMN-specific check whether given elements can be resized.\n *\n * @param {Shape[]} elements\n * @param {Shape} target\n *\n * @return {boolean}\n */\nBpmnAutoResizeProvider.prototype.canResize = function(elements, target) {\n\n  // do not resize plane elements:\n  // root elements, collapsed sub-processes\n  if (is(target.di, 'bpmndi:BPMNPlane')) {\n    return false;\n  }\n\n  if (!is(target, 'bpmn:Participant') && !is(target, 'bpmn:Lane') && !(is(target, 'bpmn:SubProcess'))) {\n    return false;\n  }\n\n  var canResize = true;\n\n  forEach(elements, function(element) {\n\n    if (is(element, 'bpmn:Lane') || isLabel(element)) {\n      canResize = false;\n      return;\n    }\n  });\n\n  return canResize;\n};\n","import BpmnAutoResize from './BpmnAutoResize';\nimport BpmnAutoResizeProvider from './BpmnAutoResizeProvider';\n\n\nexport default {\n  __init__: [\n    'bpmnAutoResize',\n    'bpmnAutoResizeProvider'\n  ],\n  bpmnAutoResize: [ 'type', BpmnAutoResize ],\n  bpmnAutoResizeProvider: [ 'type', BpmnAutoResizeProvider ]\n};\n","import {\n  closest as domClosest\n} from 'min-dom';\n\nimport {\n  toPoint\n} from '../../util/Event';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar HIGH_PRIORITY = 1500;\n\n\n/**\n * Browsers may swallow certain events (hover, out ...) if users are to\n * fast with the mouse.\n *\n * @see http://stackoverflow.com/questions/7448468/why-cant-i-reliably-capture-a-mouseout-event\n *\n * The fix implemented in this component ensure that we\n *\n * 1) have a hover state after a successful drag.move event\n * 2) have an out event when dragging leaves an element\n *\n * @param {ElementRegistry} elementRegistry\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function HoverFix(elementRegistry, eventBus, injector) {\n\n  var self = this;\n\n  var dragging = injector.get('dragging', false);\n\n  /**\n   * Make sure we are god damn hovering!\n   *\n   * @param {Event} dragging event\n   */\n  function ensureHover(event) {\n\n    if (event.hover) {\n      return;\n    }\n\n    var originalEvent = event.originalEvent;\n\n    var gfx = self._findTargetGfx(originalEvent);\n\n    var element = gfx && elementRegistry.get(gfx);\n\n    if (gfx && element) {\n\n      // 1) cancel current mousemove\n      event.stopPropagation();\n\n      // 2) emit fake hover for new target\n      dragging.hover({ element: element, gfx: gfx });\n\n      // 3) re-trigger move event\n      dragging.move(originalEvent);\n    }\n  }\n\n\n  if (dragging) {\n\n    /**\n     * We wait for a specific sequence of events before\n     * emitting a fake drag.hover event.\n     *\n     * Event Sequence:\n     *\n     * drag.start\n     * drag.move >> ensure we are hovering\n     */\n    eventBus.on('drag.start', function(event) {\n\n      eventBus.once('drag.move', HIGH_PRIORITY, function(event) {\n\n        ensureHover(event);\n\n      });\n\n    });\n  }\n\n\n  /**\n   * We make sure that element.out is always fired, even if the\n   * browser swallows an element.out event.\n   *\n   * Event sequence:\n   *\n   * element.hover\n   * (element.out >> sometimes swallowed)\n   * element.hover >> ensure we fired element.out\n   */\n  (function() {\n    var hoverGfx;\n    var hover;\n\n    eventBus.on('element.hover', function(event) {\n\n      // (1) remember current hover element\n      hoverGfx = event.gfx;\n      hover = event.element;\n    });\n\n    eventBus.on('element.hover', HIGH_PRIORITY, function(event) {\n\n      // (3) am I on an element still?\n      if (hover) {\n\n        // (4) that is a problem, gotta \"simulate the out\"\n        eventBus.fire('element.out', {\n          element: hover,\n          gfx: hoverGfx\n        });\n      }\n\n    });\n\n    eventBus.on('element.out', function() {\n\n      // (2) unset hover state if we correctly outed us *GG*\n      hoverGfx = null;\n      hover = null;\n    });\n\n  })();\n\n  this._findTargetGfx = function(event) {\n    var position,\n        target;\n\n    if (!(event instanceof MouseEvent)) {\n      return;\n    }\n\n    position = toPoint(event);\n\n    // damn expensive operation, ouch!\n    target = document.elementFromPoint(position.x, position.y);\n\n    return getGfx(target);\n  };\n\n}\n\nHoverFix.$inject = [\n  'elementRegistry',\n  'eventBus',\n  'injector'\n];\n\n\n// helpers /////////////////////\n\nfunction getGfx(target) {\n  return domClosest(target, 'svg, .djs-element', true);\n}","import HoverFix from './HoverFix';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [\n    'hoverFix'\n  ],\n  hoverFix: [ 'type', HoverFix ],\n};","var round = Math.round;\n\nimport { assign } from 'min-dash';\n\nimport {\n  event as domEvent\n} from 'min-dom';\n\nimport {\n  getOriginal,\n  toPoint,\n  stopPropagation\n} from '../../util/Event';\n\nimport {\n  set as cursorSet,\n  unset as cursorUnset\n} from '../../util/Cursor';\n\nimport {\n  install as installClickTrap\n} from '../../util/ClickTrap';\n\nimport {\n  delta as deltaPos\n} from '../../util/PositionUtil';\n\nimport { isKey } from '../keyboard/KeyboardUtil';\n\n/**\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../selection/Selection').default} Selection\n */\n\nvar DRAG_ACTIVE_CLS = 'djs-drag-active';\n\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nfunction isTouchEvent(event) {\n\n  // check for TouchEvent being available first\n  // (i.e. not available on desktop Firefox)\n  return typeof TouchEvent !== 'undefined' && event instanceof TouchEvent;\n}\n\nfunction getLength(point) {\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}\n\n/**\n * A helper that fires canvas localized drag events and realizes\n * the general \"drag-and-drop\" look and feel.\n *\n * Calling {@link Dragging#activate} activates dragging on a canvas.\n *\n * It provides the following:\n *\n *   * emits life cycle events, namespaced with a prefix assigned\n *     during dragging activation\n *   * sets and restores the cursor\n *   * sets and restores the selection if elements still exist\n *   * ensures there can be only one drag operation active at a time\n *\n * Dragging may be canceled manually by calling {@link Dragging#cancel}\n * or by pressing ESC.\n *\n *\n * ## Life-cycle events\n *\n * Dragging can be in three different states, off, initialized\n * and active.\n *\n * (1) off: no dragging operation is in progress\n * (2) initialized: a new drag operation got initialized but not yet\n *                  started (i.e. because of no initial move)\n * (3) started: dragging is in progress\n *\n * Eventually dragging will be off again after a drag operation has\n * been ended or canceled via user click or ESC key press.\n *\n * To indicate transitions between these states dragging emits generic\n * life-cycle events with the `drag.` prefix _and_ events namespaced\n * to a prefix choosen by a user during drag initialization.\n *\n * The following events are emitted (appropriately prefixed) via\n * the {@link EventBus}.\n *\n * * `init`\n * * `start`\n * * `move`\n * * `end`\n * * `ended` (dragging already in off state)\n * * `cancel` (only if previously started)\n * * `canceled` (dragging already in off state, only if previously started)\n * * `cleanup`\n *\n *\n * @example\n *\n * ```javascript\n * function MyDragComponent(eventBus, dragging) {\n *\n *   eventBus.on('mydrag.start', function(event) {\n *     console.log('yes, we start dragging');\n *   });\n *\n *   eventBus.on('mydrag.move', function(event) {\n *     console.log('canvas local coordinates', event.x, event.y, event.dx, event.dy);\n *\n *     // local drag data is passed with the event\n *     event.context.foo; // \"BAR\"\n *\n *     // the original mouse event, too\n *     event.originalEvent; // MouseEvent(...)\n *   });\n *\n *   eventBus.on('element.click', function(event) {\n *     dragging.init(event, 'mydrag', {\n *       cursor: 'grabbing',\n *       data: {\n *         context: {\n *           foo: \"BAR\"\n *         }\n *       }\n *     });\n *   });\n * }\n * ```\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Selection} selection\n * @param {ElementRegistry} elementRegistry\n */\nexport default function Dragging(eventBus, canvas, selection, elementRegistry) {\n\n  var defaultOptions = {\n    threshold: 5,\n    trapClick: true\n  };\n\n  // the currently active drag operation\n  // dragging is active as soon as this context exists.\n  //\n  // it is visually _active_ only when a context.active flag is set to true.\n  var context;\n\n  /* convert a global event into local coordinates */\n  function toLocalPoint(globalPosition) {\n\n    var viewbox = canvas.viewbox();\n\n    var clientRect = canvas._container.getBoundingClientRect();\n\n    return {\n      x: viewbox.x + (globalPosition.x - clientRect.left) / viewbox.scale,\n      y: viewbox.y + (globalPosition.y - clientRect.top) / viewbox.scale\n    };\n  }\n\n  // helpers\n\n  function fire(type, dragContext) {\n    dragContext = dragContext || context;\n\n    var event = eventBus.createEvent(\n      assign(\n        {},\n        dragContext.payload,\n        dragContext.data,\n        { isTouch: dragContext.isTouch }\n      )\n    );\n\n    // default integration\n    if (eventBus.fire('drag.' + type, event) === false) {\n      return false;\n    }\n\n    return eventBus.fire(dragContext.prefix + '.' + type, event);\n  }\n\n  function restoreSelection(previousSelection) {\n    var existingSelection = previousSelection.filter(function(element) {\n      return elementRegistry.get(element.id);\n    });\n\n    existingSelection.length && selection.select(existingSelection);\n  }\n\n  // event listeners\n\n  function move(event, activate) {\n    var payload = context.payload,\n        displacement = context.displacement;\n\n    var globalStart = context.globalStart,\n        globalCurrent = toPoint(event),\n        globalDelta = deltaPos(globalCurrent, globalStart);\n\n    var localStart = context.localStart,\n        localCurrent = toLocalPoint(globalCurrent),\n        localDelta = deltaPos(localCurrent, localStart);\n\n\n    // activate context explicitly or once threshold is reached\n    if (!context.active && (activate || getLength(globalDelta) > context.threshold)) {\n\n      // fire start event with original\n      // starting coordinates\n\n      assign(payload, {\n        x: round(localStart.x + displacement.x),\n        y: round(localStart.y + displacement.y),\n        dx: 0,\n        dy: 0\n      }, { originalEvent: event });\n\n      if (false === fire('start')) {\n        return cancel();\n      }\n\n      context.active = true;\n\n      // unset selection and remember old selection\n      // the previous (old) selection will always passed\n      // with the event via the event.previousSelection property\n      if (!context.keepSelection) {\n        payload.previousSelection = selection.get();\n        selection.select(null);\n      }\n\n      // allow custom cursor\n      if (context.cursor) {\n        cursorSet(context.cursor);\n      }\n\n      // indicate dragging via marker on root element\n      canvas.addMarker(canvas.getRootElement(), DRAG_ACTIVE_CLS);\n    }\n\n    stopPropagation(event);\n\n    if (context.active) {\n\n      // update payload with actual coordinates\n      assign(payload, {\n        x: round(localCurrent.x + displacement.x),\n        y: round(localCurrent.y + displacement.y),\n        dx: round(localDelta.x),\n        dy: round(localDelta.y)\n      }, { originalEvent: event });\n\n      // emit move event\n      fire('move');\n    }\n  }\n\n  function end(event) {\n    var previousContext,\n        returnValue = true;\n\n    if (context.active) {\n\n      if (event) {\n        context.payload.originalEvent = event;\n\n        // suppress original event (click, ...)\n        // because we just ended a drag operation\n        stopPropagation(event);\n      }\n\n      // implementations may stop restoring the\n      // original state (selections, ...) by preventing the\n      // end events default action\n      returnValue = fire('end');\n    }\n\n    if (returnValue === false) {\n      fire('rejected');\n    }\n\n    previousContext = cleanup(returnValue !== true);\n\n    // last event to be fired when all drag operations are done\n    // at this point in time no drag operation is in progress anymore\n    fire('ended', previousContext);\n  }\n\n\n  // cancel active drag operation if the user presses\n  // the ESC key on the keyboard\n\n  function checkCancel(event) {\n\n    if (isKey('Escape', event)) {\n      preventDefault(event);\n\n      cancel();\n    }\n  }\n\n\n  // prevent ghost click that might occur after a finished\n  // drag and drop session\n\n  function trapClickAndEnd(event) {\n\n    var untrap;\n\n    // trap the click in case we are part of an active\n    // drag operation. This will effectively prevent\n    // the ghost click that cannot be canceled otherwise.\n    if (context.active) {\n\n      untrap = installClickTrap(eventBus);\n\n      // remove trap after minimal delay\n      setTimeout(untrap, 400);\n\n      // prevent default action (click)\n      preventDefault(event);\n    }\n\n    end(event);\n  }\n\n  function trapTouch(event) {\n    move(event);\n  }\n\n  // update the drag events model element (`hover`) and graphical element (`hoverGfx`)\n  // properties during hover and out and fire {prefix}.hover and {prefix}.out properties\n  // respectively\n\n  function hover(event) {\n    var payload = context.payload;\n\n    payload.hoverGfx = event.gfx;\n    payload.hover = event.element;\n\n    fire('hover');\n  }\n\n  function out(event) {\n    fire('out');\n\n    var payload = context.payload;\n\n    payload.hoverGfx = null;\n    payload.hover = null;\n  }\n\n\n  // life-cycle methods\n\n  function cancel(restore) {\n    var previousContext;\n\n    if (!context) {\n      return;\n    }\n\n    var wasActive = context.active;\n\n    if (wasActive) {\n      fire('cancel');\n    }\n\n    previousContext = cleanup(restore);\n\n    if (wasActive) {\n\n      // last event to be fired when all drag operations are done\n      // at this point in time no drag operation is in progress anymore\n      fire('canceled', previousContext);\n    }\n  }\n\n  function cleanup(restore) {\n    var previousContext,\n        endDrag;\n\n    fire('cleanup');\n\n    // reset cursor\n    cursorUnset();\n\n    if (context.trapClick) {\n      endDrag = trapClickAndEnd;\n    } else {\n      endDrag = end;\n    }\n\n    // reset dom listeners\n    domEvent.unbind(document, 'mousemove', move);\n\n    domEvent.unbind(document, 'dragstart', preventDefault);\n    domEvent.unbind(document, 'selectstart', preventDefault);\n\n    domEvent.unbind(document, 'mousedown', endDrag, true);\n    domEvent.unbind(document, 'mouseup', endDrag, true);\n\n    domEvent.unbind(document, 'keyup', checkCancel);\n\n    domEvent.unbind(document, 'touchstart', trapTouch, true);\n    domEvent.unbind(document, 'touchcancel', cancel, true);\n    domEvent.unbind(document, 'touchmove', move, true);\n    domEvent.unbind(document, 'touchend', end, true);\n\n    eventBus.off('element.hover', hover);\n    eventBus.off('element.out', out);\n\n    // remove drag marker on root element\n    canvas.removeMarker(canvas.getRootElement(), DRAG_ACTIVE_CLS);\n\n    // restore selection, unless it has changed\n    var previousSelection = context.payload.previousSelection;\n\n    if (restore !== false && previousSelection && !selection.get().length) {\n      restoreSelection(previousSelection);\n    }\n\n    previousContext = context;\n\n    context = null;\n\n    return previousContext;\n  }\n\n  /**\n   * Initialize a drag operation.\n   *\n   * If `localPosition` is given, drag events will be emitted\n   * relative to it.\n   *\n   * @param {MouseEvent|TouchEvent} [event]\n   * @param {Point} [relativeTo] actual diagram local position this drag operation should start at\n   * @param {string} prefix\n   * @param {Object} [options]\n   */\n  function init(event, relativeTo, prefix, options) {\n\n    // only one drag operation may be active, at a time\n    if (context) {\n      cancel(false);\n    }\n\n    if (typeof relativeTo === 'string') {\n      options = prefix;\n      prefix = relativeTo;\n      relativeTo = null;\n    }\n\n    options = assign({}, defaultOptions, options || {});\n\n    var data = options.data || {},\n        originalEvent,\n        globalStart,\n        localStart,\n        endDrag,\n        isTouch;\n\n    if (options.trapClick) {\n      endDrag = trapClickAndEnd;\n    } else {\n      endDrag = end;\n    }\n\n    if (event) {\n      originalEvent = getOriginal(event) || event;\n      globalStart = toPoint(event);\n\n      stopPropagation(event);\n\n      // prevent default browser dragging behavior\n      if (originalEvent.type === 'dragstart') {\n        preventDefault(originalEvent);\n      }\n    } else {\n      originalEvent = null;\n      globalStart = { x: 0, y: 0 };\n    }\n\n    localStart = toLocalPoint(globalStart);\n\n    if (!relativeTo) {\n      relativeTo = localStart;\n    }\n\n    isTouch = isTouchEvent(originalEvent);\n\n    context = assign({\n      prefix: prefix,\n      data: data,\n      payload: {},\n      globalStart: globalStart,\n      displacement: deltaPos(relativeTo, localStart),\n      localStart: localStart,\n      isTouch: isTouch\n    }, options);\n\n    // skip dom registration if trigger\n    // is set to manual (during testing)\n    if (!options.manual) {\n\n      // add dom listeners\n\n      if (isTouch) {\n        domEvent.bind(document, 'touchstart', trapTouch, true);\n        domEvent.bind(document, 'touchcancel', cancel, true);\n        domEvent.bind(document, 'touchmove', move, true);\n        domEvent.bind(document, 'touchend', end, true);\n      } else {\n\n        // assume we use the mouse to interact per default\n        domEvent.bind(document, 'mousemove', move);\n\n        // prevent default browser drag and text selection behavior\n        domEvent.bind(document, 'dragstart', preventDefault);\n        domEvent.bind(document, 'selectstart', preventDefault);\n\n        domEvent.bind(document, 'mousedown', endDrag, true);\n        domEvent.bind(document, 'mouseup', endDrag, true);\n      }\n\n      domEvent.bind(document, 'keyup', checkCancel);\n\n      eventBus.on('element.hover', hover);\n      eventBus.on('element.out', out);\n    }\n\n    fire('init');\n\n    if (options.autoActivate) {\n      move(event, true);\n    }\n  }\n\n  // cancel on diagram destruction\n  eventBus.on('diagram.destroy', cancel);\n\n\n  // API\n\n  this.init = init;\n  this.move = move;\n  this.hover = hover;\n  this.out = out;\n  this.end = end;\n\n  this.cancel = cancel;\n\n  // for introspection\n\n  this.context = function() {\n    return context;\n  };\n\n  this.setOptions = function(options) {\n    assign(defaultOptions, options);\n  };\n}\n\nDragging.$inject = [\n  'eventBus',\n  'canvas',\n  'selection',\n  'elementRegistry'\n];\n","import HoverFixModule from '../hover-fix';\nimport SelectionModule from '../selection';\n\nimport Dragging from './Dragging';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    HoverFixModule,\n    SelectionModule,\n  ],\n  dragging: [ 'type', Dragging ],\n};","import { assign } from 'min-dash';\n\nimport {\n  toPoint\n} from '../../util/Event';\n\n/**\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../../core/Canvas').default} Canvas\n */\n\n/**\n * Initiates canvas scrolling if current cursor point is close to a border.\n * Cancelled when current point moves back inside the scrolling borders\n * or cancelled manually.\n *\n * Default options :\n *   scrollThresholdIn: [ 20, 20, 20, 20 ],\n *   scrollThresholdOut: [ 0, 0, 0, 0 ],\n *   scrollRepeatTimeout: 15,\n *   scrollStep: 10\n *\n * Threshold order:\n *   [ left, top, right, bottom ]\n *\n * @param {Object} config\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function AutoScroll(config, eventBus, canvas) {\n\n  this._canvas = canvas;\n\n  this._opts = assign({\n    scrollThresholdIn: [ 20, 20, 20, 20 ],\n    scrollThresholdOut: [ 0, 0, 0, 0 ],\n    scrollRepeatTimeout: 15,\n    scrollStep: 10\n  }, config);\n\n  var self = this;\n\n  eventBus.on('drag.move', function(e) {\n    var point = self._toBorderPoint(e);\n\n    self.startScroll(point);\n  });\n\n  eventBus.on([ 'drag.cleanup' ], function() {\n    self.stopScroll();\n  });\n}\n\nAutoScroll.$inject = [\n  'config.autoScroll',\n  'eventBus',\n  'canvas'\n];\n\n\n/**\n * Starts scrolling loop.\n * Point is given in global scale in canvas container box plane.\n *\n * @param {Point} point\n */\nAutoScroll.prototype.startScroll = function(point) {\n\n  var canvas = this._canvas;\n  var opts = this._opts;\n  var self = this;\n\n  var clientRect = canvas.getContainer().getBoundingClientRect();\n\n  var diff = [\n    point.x,\n    point.y,\n    clientRect.width - point.x,\n    clientRect.height - point.y\n  ];\n\n  this.stopScroll();\n\n  var dx = 0,\n      dy = 0;\n\n  for (var i = 0; i < 4; i++) {\n    if (between(diff[i], opts.scrollThresholdOut[i], opts.scrollThresholdIn[i])) {\n      if (i === 0) {\n        dx = opts.scrollStep;\n      } else if (i == 1) {\n        dy = opts.scrollStep;\n      } else if (i == 2) {\n        dx = -opts.scrollStep;\n      } else if (i == 3) {\n        dy = -opts.scrollStep;\n      }\n    }\n  }\n\n  if (dx !== 0 || dy !== 0) {\n    canvas.scroll({ dx: dx, dy: dy });\n\n    this._scrolling = setTimeout(function() {\n      self.startScroll(point);\n    }, opts.scrollRepeatTimeout);\n  }\n};\n\nfunction between(val, start, end) {\n  if (start < val && val < end) {\n    return true;\n  }\n\n  return false;\n}\n\n\n/**\n * Stops scrolling loop.\n */\nAutoScroll.prototype.stopScroll = function() {\n  clearTimeout(this._scrolling);\n};\n\n\n/**\n * Overrides defaults options.\n *\n * @param {Object} options\n */\nAutoScroll.prototype.setOptions = function(options) {\n  this._opts = assign({}, this._opts, options);\n};\n\n\n/**\n * Converts event to a point in canvas container plane in global scale.\n *\n * @param {Event} event\n * @return {Point}\n */\nAutoScroll.prototype._toBorderPoint = function(event) {\n  var clientRect = this._canvas._container.getBoundingClientRect();\n\n  var globalPosition = toPoint(event.originalEvent);\n\n  return {\n    x: globalPosition.x - clientRect.left,\n    y: globalPosition.y - clientRect.top\n  };\n};","import DraggingModule from '../dragging';\n\nimport AutoScroll from './AutoScroll';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    DraggingModule,\n  ],\n  __init__: [ 'autoScroll' ],\n  autoScroll: [ 'type', AutoScroll ]\n};","/**\n * @typedef {import('didi').Injector} Injector\n */\n\n/**\n * A service that provides rules for certain diagram actions.\n *\n * The default implementation will hook into the {@link CommandStack}\n * to perform the actual rule evaluation. Make sure to provide the\n * `commandStack` service with this module if you plan to use it.\n *\n * Together with this implementation you may use the {@link import('./RuleProvider').default}\n * to implement your own rule checkers.\n *\n * This module is ment to be easily replaced, thus the tiny foot print.\n *\n * @param {Injector} injector\n */\nexport default function Rules(injector) {\n  this._commandStack = injector.get('commandStack', false);\n}\n\nRules.$inject = [ 'injector' ];\n\n\n/**\n * Returns whether or not a given modeling action can be executed\n * in the specified context.\n *\n * This implementation will respond with allow unless anyone\n * objects.\n *\n * @param {string} action The action to be allowed or disallowed.\n * @param {Object} [context] The context for allowing or disallowing the action.\n *\n * @return {boolean|null} Wether the action is allowed. Returns `null` if the action\n * is to be ignored.\n */\nRules.prototype.allowed = function(action, context) {\n  var allowed = true;\n\n  var commandStack = this._commandStack;\n\n  if (commandStack) {\n    allowed = commandStack.canExecute(action, context);\n  }\n\n  // map undefined to true, i.e. no rules\n  return allowed === undefined ? true : allowed;\n};","import Rules from './Rules';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'rules' ],\n  rules: [ 'type', Rules ]\n};\n","import {\n  pointDistance\n} from './Geometry';\n\nimport intersectPaths from 'path-intersection';\n\n/**\n * @typedef {import('../util/Types').Point} Point\n *\n * @typedef { {\n *   bendpoint?: boolean;\n *   index: number;\n *   point: Point;\n * } } Intersection\n */\n\nvar round = Math.round,\n    max = Math.max;\n\n\nfunction circlePath(center, r) {\n  var x = center.x,\n      y = center.y;\n\n  return [\n    [ 'M', x, y ],\n    [ 'm', 0, -r ],\n    [ 'a', r, r, 0, 1, 1, 0, 2 * r ],\n    [ 'a', r, r, 0, 1, 1, 0, -2 * r ],\n    [ 'z' ]\n  ];\n}\n\nfunction linePath(points) {\n  var segments = [];\n\n  points.forEach(function(p, idx) {\n    segments.push([ idx === 0 ? 'M' : 'L', p.x, p.y ]);\n  });\n\n  return segments;\n}\n\n\nvar INTERSECTION_THRESHOLD = 10;\n\n/**\n * @param {Point[]} waypoints\n * @param {Point} reference\n *\n * @return {Intersection|null}\n */\nfunction getBendpointIntersection(waypoints, reference) {\n\n  var i, w;\n\n  for (i = 0; (w = waypoints[i]); i++) {\n\n    if (pointDistance(w, reference) <= INTERSECTION_THRESHOLD) {\n      return {\n        point: waypoints[i],\n        bendpoint: true,\n        index: i\n      };\n    }\n  }\n\n  return null;\n}\n\n/**\n * @param {Point[]} waypoints\n * @param {Point} reference\n *\n * @return {Intersection|null}\n */\nfunction getPathIntersection(waypoints, reference) {\n\n  var intersections = intersectPaths(circlePath(reference, INTERSECTION_THRESHOLD), linePath(waypoints));\n\n  var a = intersections[0],\n      b = intersections[intersections.length - 1],\n      idx;\n\n  if (!a) {\n\n    // no intersection\n    return null;\n  }\n\n  if (a !== b) {\n\n    if (a.segment2 !== b.segment2) {\n\n      // we use the bendpoint in between both segments\n      // as the intersection point\n\n      idx = max(a.segment2, b.segment2) - 1;\n\n      return {\n        point: waypoints[idx],\n        bendpoint: true,\n        index: idx\n      };\n    }\n\n    return {\n      point: {\n        x: (round(a.x + b.x) / 2),\n        y: (round(a.y + b.y) / 2)\n      },\n      index: a.segment2\n    };\n  }\n\n  return {\n    point: {\n      x: round(a.x),\n      y: round(a.y)\n    },\n    index: a.segment2\n  };\n}\n\n/**\n * Returns the closest point on the connection towards a given reference point.\n *\n * @param {Point[]} waypoints\n * @param {Point} reference\n *\n * @return {Intersection|null}\n */\nexport function getApproxIntersection(waypoints, reference) {\n  return getBendpointIntersection(waypoints, reference) || getPathIntersection(waypoints, reference);\n}\n","/**\n * @typedef {import('../../util/Types').Point} Point\n * @typedef {import('../../util/Types').Vector} Vector\n */\n\n/**\n * Returns the length of a vector.\n *\n * @param {Vector} vector\n *\n * @return {number}\n */\nexport function vectorLength(vector) {\n  return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));\n}\n\n\n/**\n * Calculates the angle between a line a the Y axis.\n *\n * @param {Point[]} line\n *\n * @return {number}\n */\nexport function getAngle(line) {\n\n  // return value is between 0, 180 and -180, -0\n  // @janstuemmel: maybe replace return a/b with b/a\n  return Math.atan((line[1].y - line[0].y) / (line[1].x - line[0].x));\n}\n\n\n/**\n * Rotates a vector by a given angle.\n *\n * @param {Vector} vector\n * @param {number} angle The angle in radians.\n *\n * @return {Vector}\n */\nexport function rotateVector(vector, angle) {\n  return (!angle) ? vector : {\n    x: Math.cos(angle) * vector.x - Math.sin(angle) * vector.y,\n    y: Math.sin(angle) * vector.x + Math.cos(angle) * vector.y\n  };\n}\n\n\n/**\n * Solves a 2D equation system\n * a + r*b = c, where a,b,c are 2D vectors\n *\n * @param {Vector} a\n * @param {Vector} b\n * @param {Vector} c\n *\n * @return {number}\n */\nfunction solveLambaSystem(a, b, c) {\n\n  // the 2d system\n  var system = [\n    { n: a[0] - c[0], lambda: b[0] },\n    { n: a[1] - c[1], lambda: b[1] }\n  ];\n\n  // solve\n  var n = system[0].n * b[0] + system[1].n * b[1],\n      l = system[0].lambda * b[0] + system[1].lambda * b[1];\n\n  return -n / l;\n}\n\n\n/**\n * Calculates the position of the perpendicular foot.\n *\n * @param {Point} point\n * @param {Point[]} line\n *\n * @return {Point}\n */\nexport function perpendicularFoot(point, line) {\n\n  var a = line[0], b = line[1];\n\n  // relative position of b from a\n  var bd = { x: b.x - a.x, y: b.y - a.y };\n\n  // solve equation system to the parametrized vectors param real value\n  var r = solveLambaSystem([ a.x, a.y ], [ bd.x, bd.y ], [ point.x, point.y ]);\n\n  return { x: a.x + r * bd.x, y: a.y + r * bd.y };\n}\n\n\n/**\n * Calculates the distance between a point and a line.\n *\n * @param {Point} point\n * @param {Point[]} line\n *\n * @return {number}\n */\nexport function getDistancePointLine(point, line) {\n\n  var pfPoint = perpendicularFoot(point, line);\n\n  // distance vector\n  var connectionVector = {\n    x: pfPoint.x - point.x,\n    y: pfPoint.y - point.y\n  };\n\n  return vectorLength(connectionVector);\n}\n\n\n/**\n * Calculates the distance between two points.\n *\n * @param {Point} point1\n * @param {Point} point2\n *\n * @return {number}\n */\nexport function getDistancePointPoint(point1, point2) {\n\n  return vectorLength({\n    x: point1.x - point2.x,\n    y: point1.y - point2.y\n  });\n}","import {\n  toPoint\n} from '../../util/Event';\n\nimport {\n  getMidPoint,\n  pointsAligned\n} from '../../util/Geometry';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  rotate,\n  translate\n} from '../../util/SvgTransformUtil';\n\nimport {\n  getApproxIntersection\n} from '../../util/LineIntersection';\n\nimport { getDistancePointLine, perpendicularFoot } from './GeometricUtil';\n\n/**\n * @typedef {import('../../core/Types').ConnectionLike} Connection\n *\n * @typedef {import('../../util/Types').Point} Point\n */\n\nexport var BENDPOINT_CLS = 'djs-bendpoint';\nexport var SEGMENT_DRAGGER_CLS = 'djs-segment-dragger';\n\nexport function toCanvasCoordinates(canvas, event) {\n\n  var position = toPoint(event),\n      clientRect = canvas._container.getBoundingClientRect(),\n      offset;\n\n  // canvas relative position\n\n  offset = {\n    x: clientRect.left,\n    y: clientRect.top\n  };\n\n  // update actual event payload with canvas relative measures\n\n  var viewbox = canvas.viewbox();\n\n  return {\n    x: viewbox.x + (position.x - offset.x) / viewbox.scale,\n    y: viewbox.y + (position.y - offset.y) / viewbox.scale\n  };\n}\n\nexport function getConnectionIntersection(canvas, waypoints, event) {\n  var localPosition = toCanvasCoordinates(canvas, event),\n      intersection = getApproxIntersection(waypoints, localPosition);\n\n  return intersection;\n}\n\nexport function addBendpoint(parentGfx, cls) {\n  var groupGfx = svgCreate('g');\n  svgClasses(groupGfx).add(BENDPOINT_CLS);\n\n  svgAppend(parentGfx, groupGfx);\n\n  var visual = svgCreate('circle');\n  svgAttr(visual, {\n    cx: 0,\n    cy: 0,\n    r: 4\n  });\n  svgClasses(visual).add('djs-visual');\n\n  svgAppend(groupGfx, visual);\n\n  var hit = svgCreate('circle');\n  svgAttr(hit, {\n    cx: 0,\n    cy: 0,\n    r: 10\n  });\n  svgClasses(hit).add('djs-hit');\n\n  svgAppend(groupGfx, hit);\n\n  if (cls) {\n    svgClasses(groupGfx).add(cls);\n  }\n\n  return groupGfx;\n}\n\nfunction createParallelDragger(parentGfx, segmentStart, segmentEnd, alignment) {\n  var draggerGfx = svgCreate('g');\n\n  svgAppend(parentGfx, draggerGfx);\n\n  var width = 18,\n      height = 6,\n      padding = 11,\n      hitWidth = calculateHitWidth(segmentStart, segmentEnd, alignment),\n      hitHeight = height + padding;\n\n  var visual = svgCreate('rect');\n  svgAttr(visual, {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  });\n  svgClasses(visual).add('djs-visual');\n\n  svgAppend(draggerGfx, visual);\n\n  var hit = svgCreate('rect');\n  svgAttr(hit, {\n    x: -hitWidth / 2,\n    y: -hitHeight / 2,\n    width: hitWidth,\n    height: hitHeight\n  });\n  svgClasses(hit).add('djs-hit');\n\n  svgAppend(draggerGfx, hit);\n\n  rotate(draggerGfx, alignment === 'v' ? 90 : 0, 0, 0);\n\n  return draggerGfx;\n}\n\n\nexport function addSegmentDragger(parentGfx, segmentStart, segmentEnd) {\n\n  var groupGfx = svgCreate('g'),\n      mid = getMidPoint(segmentStart, segmentEnd),\n      alignment = pointsAligned(segmentStart, segmentEnd);\n\n  svgAppend(parentGfx, groupGfx);\n\n  createParallelDragger(groupGfx, segmentStart, segmentEnd, alignment);\n\n  svgClasses(groupGfx).add(SEGMENT_DRAGGER_CLS);\n  svgClasses(groupGfx).add(alignment === 'h' ? 'horizontal' : 'vertical');\n\n  translate(groupGfx, mid.x, mid.y);\n\n  return groupGfx;\n}\n\n/**\n * Calculates region for segment move which is 2/3 of the full segment length\n * @param {number} segmentLength\n *\n * @return {number}\n */\nexport function calculateSegmentMoveRegion(segmentLength) {\n  return Math.abs(Math.round(segmentLength * 2 / 3));\n}\n\n/**\n * Returns the point with the closest distance that is on the connection path.\n *\n * @param {Point} position\n * @param {Connection} connection\n * @return {Point}\n */\nexport function getClosestPointOnConnection(position, connection) {\n  var segment = getClosestSegment(position, connection);\n\n  return perpendicularFoot(position, segment);\n}\n\n\n// helper //////////\n\nfunction calculateHitWidth(segmentStart, segmentEnd, alignment) {\n  var segmentLengthXAxis = segmentEnd.x - segmentStart.x,\n      segmentLengthYAxis = segmentEnd.y - segmentStart.y;\n\n  return alignment === 'h' ?\n    calculateSegmentMoveRegion(segmentLengthXAxis) :\n    calculateSegmentMoveRegion(segmentLengthYAxis);\n}\n\nfunction getClosestSegment(position, connection) {\n  var waypoints = connection.waypoints;\n\n  var minDistance = Infinity,\n      segmentIndex;\n\n  for (var i = 0; i < waypoints.length - 1; i++) {\n    var start = waypoints[i],\n        end = waypoints[i + 1],\n        distance = getDistancePointLine(position, [ start, end ]);\n\n    if (distance < minDistance) {\n      minDistance = distance;\n      segmentIndex = i;\n    }\n  }\n\n  return [ waypoints[segmentIndex], waypoints[segmentIndex + 1] ];\n}","import { forEach } from 'min-dash';\n\nimport {\n  event as domEvent,\n  query as domQuery,\n  queryAll as domQueryAll\n} from 'min-dom';\n\nimport {\n  BENDPOINT_CLS,\n  SEGMENT_DRAGGER_CLS,\n  addBendpoint,\n  addSegmentDragger,\n  calculateSegmentMoveRegion,\n  getConnectionIntersection\n} from './BendpointUtil';\n\nimport {\n  escapeCSS\n} from '../../util/EscapeUtil';\n\nimport {\n  pointsAligned,\n  getMidPoint\n} from '../../util/Geometry';\n\nimport {\n  isPrimaryButton\n} from '../../util/Mouse';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  translate\n} from '../../util/SvgTransformUtil';\n\n/**\n * @typedef {import('../bendpoints/BendpointMove').default} BendpointMove\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../bendpoints/ConnectionSegmentMove').default} ConnectionSegmentMove\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../interaction-events/InteractionEvents').default} InteractionEvents\n */\n\n/**\n * A service that adds editable bendpoints to connections.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {InteractionEvents} interactionEvents\n * @param {BendpointMove} bendpointMove\n * @param {ConnectionSegmentMove} connectionSegmentMove\n */\nexport default function Bendpoints(\n    eventBus, canvas, interactionEvents,\n    bendpointMove, connectionSegmentMove) {\n\n  /**\n   * Returns true if intersection point is inside middle region of segment, adjusted by\n   * optional threshold\n   */\n  function isIntersectionMiddle(intersection, waypoints, treshold) {\n    var idx = intersection.index,\n        p = intersection.point,\n        p0, p1, mid, aligned, xDelta, yDelta;\n\n    if (idx <= 0 || intersection.bendpoint) {\n      return false;\n    }\n\n    p0 = waypoints[idx - 1];\n    p1 = waypoints[idx];\n    mid = getMidPoint(p0, p1),\n    aligned = pointsAligned(p0, p1);\n    xDelta = Math.abs(p.x - mid.x);\n    yDelta = Math.abs(p.y - mid.y);\n\n    return aligned && xDelta <= treshold && yDelta <= treshold;\n  }\n\n  /**\n   * Calculates the threshold from a connection's middle which fits the two-third-region\n   */\n  function calculateIntersectionThreshold(connection, intersection) {\n    var waypoints = connection.waypoints,\n        relevantSegment, alignment, segmentLength, threshold;\n\n    if (intersection.index <= 0 || intersection.bendpoint) {\n      return null;\n    }\n\n    // segment relative to connection intersection\n    relevantSegment = {\n      start: waypoints[intersection.index - 1],\n      end: waypoints[intersection.index]\n    };\n\n    alignment = pointsAligned(relevantSegment.start, relevantSegment.end);\n\n    if (!alignment) {\n      return null;\n    }\n\n    if (alignment === 'h') {\n      segmentLength = relevantSegment.end.x - relevantSegment.start.x;\n    } else {\n      segmentLength = relevantSegment.end.y - relevantSegment.start.y;\n    }\n\n    // calculate threshold relative to 2/3 of segment length\n    threshold = calculateSegmentMoveRegion(segmentLength) / 2;\n\n    return threshold;\n  }\n\n  function activateBendpointMove(event, connection) {\n    var waypoints = connection.waypoints,\n        intersection = getConnectionIntersection(canvas, waypoints, event),\n        threshold;\n\n    if (!intersection) {\n      return;\n    }\n\n    threshold = calculateIntersectionThreshold(connection, intersection);\n\n    if (isIntersectionMiddle(intersection, waypoints, threshold)) {\n      connectionSegmentMove.start(event, connection, intersection.index);\n    } else {\n      bendpointMove.start(event, connection, intersection.index, !intersection.bendpoint);\n    }\n\n    // we've handled the event\n    return true;\n  }\n\n  function bindInteractionEvents(node, eventName, element) {\n\n    domEvent.bind(node, eventName, function(event) {\n      interactionEvents.triggerMouseEvent(eventName, event, element);\n      event.stopPropagation();\n    });\n  }\n\n  function getBendpointsContainer(element, create) {\n\n    var layer = canvas.getLayer('overlays'),\n        gfx = domQuery('.djs-bendpoints[data-element-id=\"' + escapeCSS(element.id) + '\"]', layer);\n\n    if (!gfx && create) {\n      gfx = svgCreate('g');\n      svgAttr(gfx, { 'data-element-id': element.id });\n      svgClasses(gfx).add('djs-bendpoints');\n\n      svgAppend(layer, gfx);\n\n      bindInteractionEvents(gfx, 'mousedown', element);\n      bindInteractionEvents(gfx, 'click', element);\n      bindInteractionEvents(gfx, 'dblclick', element);\n    }\n\n    return gfx;\n  }\n\n  function getSegmentDragger(idx, parentGfx) {\n    return domQuery(\n      '.djs-segment-dragger[data-segment-idx=\"' + idx + '\"]',\n      parentGfx\n    );\n  }\n\n  function createBendpoints(gfx, connection) {\n    connection.waypoints.forEach(function(p, idx) {\n      var bendpoint = addBendpoint(gfx);\n\n      svgAppend(gfx, bendpoint);\n\n      translate(bendpoint, p.x, p.y);\n    });\n\n    // add floating bendpoint\n    addBendpoint(gfx, 'floating');\n  }\n\n  function createSegmentDraggers(gfx, connection) {\n\n    var waypoints = connection.waypoints;\n\n    var segmentStart,\n        segmentEnd,\n        segmentDraggerGfx;\n\n    for (var i = 1; i < waypoints.length; i++) {\n\n      segmentStart = waypoints[i - 1];\n      segmentEnd = waypoints[i];\n\n      if (pointsAligned(segmentStart, segmentEnd)) {\n        segmentDraggerGfx = addSegmentDragger(gfx, segmentStart, segmentEnd);\n\n        svgAttr(segmentDraggerGfx, { 'data-segment-idx': i });\n\n        bindInteractionEvents(segmentDraggerGfx, 'mousemove', connection);\n      }\n    }\n  }\n\n  function clearBendpoints(gfx) {\n    forEach(domQueryAll('.' + BENDPOINT_CLS, gfx), function(node) {\n      svgRemove(node);\n    });\n  }\n\n  function clearSegmentDraggers(gfx) {\n    forEach(domQueryAll('.' + SEGMENT_DRAGGER_CLS, gfx), function(node) {\n      svgRemove(node);\n    });\n  }\n\n  function addHandles(connection) {\n\n    var gfx = getBendpointsContainer(connection);\n\n    if (!gfx) {\n      gfx = getBendpointsContainer(connection, true);\n\n      createBendpoints(gfx, connection);\n      createSegmentDraggers(gfx, connection);\n    }\n\n    return gfx;\n  }\n\n  function updateHandles(connection) {\n\n    var gfx = getBendpointsContainer(connection);\n\n    if (gfx) {\n      clearSegmentDraggers(gfx);\n      clearBendpoints(gfx);\n      createSegmentDraggers(gfx, connection);\n      createBendpoints(gfx, connection);\n    }\n  }\n\n  function updateFloatingBendpointPosition(parentGfx, intersection) {\n    var floating = domQuery('.floating', parentGfx),\n        point = intersection.point;\n\n    if (!floating) {\n      return;\n    }\n\n    translate(floating, point.x, point.y);\n\n  }\n\n  function updateSegmentDraggerPosition(parentGfx, intersection, waypoints) {\n\n    var draggerGfx = getSegmentDragger(intersection.index, parentGfx),\n        segmentStart = waypoints[intersection.index - 1],\n        segmentEnd = waypoints[intersection.index],\n        point = intersection.point,\n        mid = getMidPoint(segmentStart, segmentEnd),\n        alignment = pointsAligned(segmentStart, segmentEnd),\n        draggerVisual, relativePosition;\n\n    if (!draggerGfx) {\n      return;\n    }\n\n    draggerVisual = getDraggerVisual(draggerGfx);\n\n    relativePosition = {\n      x: point.x - mid.x,\n      y: point.y - mid.y\n    };\n\n    if (alignment === 'v') {\n\n      // rotate position\n      relativePosition = {\n        x: relativePosition.y,\n        y: relativePosition.x\n      };\n    }\n\n    translate(draggerVisual, relativePosition.x, relativePosition.y);\n  }\n\n  eventBus.on('connection.changed', function(event) {\n    updateHandles(event.element);\n  });\n\n  eventBus.on('connection.remove', function(event) {\n    var gfx = getBendpointsContainer(event.element);\n\n    if (gfx) {\n      svgRemove(gfx);\n    }\n  });\n\n  eventBus.on('element.marker.update', function(event) {\n\n    var element = event.element,\n        bendpointsGfx;\n\n    if (!element.waypoints) {\n      return;\n    }\n\n    bendpointsGfx = addHandles(element);\n\n    if (event.add) {\n      svgClasses(bendpointsGfx).add(event.marker);\n    } else {\n      svgClasses(bendpointsGfx).remove(event.marker);\n    }\n  });\n\n  eventBus.on('element.mousemove', function(event) {\n\n    var element = event.element,\n        waypoints = element.waypoints,\n        bendpointsGfx,\n        intersection;\n\n    if (waypoints) {\n      bendpointsGfx = getBendpointsContainer(element, true);\n\n      intersection = getConnectionIntersection(canvas, waypoints, event.originalEvent);\n\n      if (!intersection) {\n        return;\n      }\n\n      updateFloatingBendpointPosition(bendpointsGfx, intersection);\n\n      if (!intersection.bendpoint) {\n        updateSegmentDraggerPosition(bendpointsGfx, intersection, waypoints);\n      }\n\n    }\n  });\n\n  eventBus.on('element.mousedown', function(event) {\n\n    if (!isPrimaryButton(event)) {\n      return;\n    }\n\n    var originalEvent = event.originalEvent,\n        element = event.element;\n\n    if (!element.waypoints) {\n      return;\n    }\n\n    return activateBendpointMove(originalEvent, element);\n  });\n\n  eventBus.on('selection.changed', function(event) {\n    var newSelection = event.newSelection,\n        primary = newSelection[0];\n\n    if (primary && primary.waypoints) {\n      addHandles(primary);\n    }\n  });\n\n  eventBus.on('element.hover', function(event) {\n    var element = event.element;\n\n    if (element.waypoints) {\n      addHandles(element);\n      interactionEvents.registerEvent(event.gfx, 'mousemove', 'element.mousemove');\n    }\n  });\n\n  eventBus.on('element.out', function(event) {\n    interactionEvents.unregisterEvent(event.gfx, 'mousemove', 'element.mousemove');\n  });\n\n  // update bendpoint container data attribute on element ID change\n  eventBus.on('element.updateId', function(context) {\n    var element = context.element,\n        newId = context.newId;\n\n    if (element.waypoints) {\n      var bendpointContainer = getBendpointsContainer(element);\n\n      if (bendpointContainer) {\n        svgAttr(bendpointContainer, { 'data-element-id': newId });\n      }\n    }\n  });\n\n  // API\n\n  this.addHandles = addHandles;\n  this.updateHandles = updateHandles;\n  this.getBendpointsContainer = getBendpointsContainer;\n  this.getSegmentDragger = getSegmentDragger;\n}\n\nBendpoints.$inject = [\n  'eventBus',\n  'canvas',\n  'interactionEvents',\n  'bendpointMove',\n  'connectionSegmentMove'\n];\n\n\n\n// helper /////////////\n\nfunction getDraggerVisual(draggerGfx) {\n  return domQuery('.djs-visual', draggerGfx);\n}","import { filterRedundantWaypoints } from '../../layout/LayoutUtil';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n */\n\nvar round = Math.round;\n\nvar RECONNECT_START = 'reconnectStart',\n    RECONNECT_END = 'reconnectEnd',\n    UPDATE_WAYPOINTS = 'updateWaypoints';\n\n\n/**\n * Move bendpoints through drag and drop to add/remove bendpoints or reconnect connection.\n *\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {Rules} rules\n * @param {Modeling} modeling\n */\nexport default function BendpointMove(injector, eventBus, canvas, dragging, rules, modeling) {\n  this._injector = injector;\n\n  this.start = function(event, connection, bendpointIndex, insert) {\n    var gfx = canvas.getGraphics(connection),\n        source = connection.source,\n        target = connection.target,\n        waypoints = connection.waypoints,\n        type;\n\n    if (!insert && bendpointIndex === 0) {\n      type = RECONNECT_START;\n    } else if (!insert && bendpointIndex === waypoints.length - 1) {\n      type = RECONNECT_END;\n    } else {\n      type = UPDATE_WAYPOINTS;\n    }\n\n    var command = type === UPDATE_WAYPOINTS ? 'connection.updateWaypoints' : 'connection.reconnect';\n\n    var allowed = rules.allowed(command, {\n      connection: connection,\n      source: source,\n      target: target\n    });\n\n    if (allowed === false) {\n      allowed = rules.allowed(command, {\n        connection: connection,\n        source: target,\n        target: source\n      });\n    }\n\n    if (allowed === false) {\n      return;\n    }\n\n    dragging.init(event, 'bendpoint.move', {\n      data: {\n        connection: connection,\n        connectionGfx: gfx,\n        context: {\n          allowed: allowed,\n          bendpointIndex: bendpointIndex,\n          connection: connection,\n          source: source,\n          target: target,\n          insert: insert,\n          type: type\n        }\n      }\n    });\n  };\n\n  eventBus.on('bendpoint.move.hover', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source,\n        target = connection.target,\n        hover = event.hover,\n        type = context.type;\n\n    // cache hover state\n    context.hover = hover;\n\n    var allowed;\n\n    if (!hover) {\n      return;\n    }\n\n    var command = type === UPDATE_WAYPOINTS ? 'connection.updateWaypoints' : 'connection.reconnect';\n\n    allowed = context.allowed = rules.allowed(command, {\n      connection: connection,\n      source: type === RECONNECT_START ? hover : source,\n      target: type === RECONNECT_END ? hover : target\n    });\n\n    if (allowed) {\n      context.source = type === RECONNECT_START ? hover : source;\n      context.target = type === RECONNECT_END ? hover : target;\n\n      return;\n    }\n\n    if (allowed === false) {\n      allowed = context.allowed = rules.allowed(command, {\n        connection: connection,\n        source: type === RECONNECT_END ? hover : target,\n        target: type === RECONNECT_START ? hover : source\n      });\n    }\n\n    if (allowed) {\n      context.source = type === RECONNECT_END ? hover : target;\n      context.target = type === RECONNECT_START ? hover : source;\n    }\n  });\n\n  eventBus.on([ 'bendpoint.move.out', 'bendpoint.move.cleanup' ], function(event) {\n    var context = event.context,\n        type = context.type;\n\n    context.hover = null;\n    context.source = null;\n    context.target = null;\n\n    if (type !== UPDATE_WAYPOINTS) {\n      context.allowed = false;\n    }\n  });\n\n  eventBus.on('bendpoint.move.end', function(event) {\n    var context = event.context,\n        allowed = context.allowed,\n        bendpointIndex = context.bendpointIndex,\n        connection = context.connection,\n        insert = context.insert,\n        newWaypoints = connection.waypoints.slice(),\n        source = context.source,\n        target = context.target,\n        type = context.type,\n        hints = context.hints || {};\n\n    // ensure integer values (important if zoom level was > 1 during move)\n    var docking = {\n      x: round(event.x),\n      y: round(event.y)\n    };\n\n    if (!allowed) {\n      return false;\n    }\n\n    if (type === UPDATE_WAYPOINTS) {\n      if (insert) {\n\n        // insert new bendpoint\n        newWaypoints.splice(bendpointIndex, 0, docking);\n      } else {\n\n        // swap previous waypoint with moved one\n        newWaypoints[bendpointIndex] = docking;\n      }\n\n      // pass hints about actual moved bendpoint\n      // useful for connection/label layout\n      hints.bendpointMove = {\n        insert: insert,\n        bendpointIndex: bendpointIndex\n      };\n\n      newWaypoints = this.cropWaypoints(connection, newWaypoints);\n\n      modeling.updateWaypoints(connection, filterRedundantWaypoints(newWaypoints), hints);\n    } else {\n      if (type === RECONNECT_START) {\n        hints.docking = 'source';\n\n        if (isReverse(context)) {\n          hints.docking = 'target';\n\n          hints.newWaypoints = newWaypoints.reverse();\n        }\n      } else if (type === RECONNECT_END) {\n        hints.docking = 'target';\n\n        if (isReverse(context)) {\n          hints.docking = 'source';\n\n          hints.newWaypoints = newWaypoints.reverse();\n        }\n      }\n\n      modeling.reconnect(connection, source, target, docking, hints);\n    }\n  }, this);\n}\n\nBendpointMove.$inject = [\n  'injector',\n  'eventBus',\n  'canvas',\n  'dragging',\n  'rules',\n  'modeling'\n];\n\nBendpointMove.prototype.cropWaypoints = function(connection, newWaypoints) {\n  var connectionDocking = this._injector.get('connectionDocking', false);\n\n  if (!connectionDocking) {\n    return newWaypoints;\n  }\n\n  var waypoints = connection.waypoints;\n\n  connection.waypoints = newWaypoints;\n\n  connection.waypoints = connectionDocking.getCroppedWaypoints(connection);\n\n  newWaypoints = connection.waypoints;\n\n  connection.waypoints = waypoints;\n\n  return newWaypoints;\n};\n\n\n// helpers //////////\n\nexport function isReverse(context) {\n  var hover = context.hover,\n      source = context.source,\n      target = context.target,\n      type = context.type;\n\n  if (type === RECONNECT_START) {\n    return hover && target && hover === target && source !== target;\n  }\n\n  if (type === RECONNECT_END) {\n    return hover && source && hover === source && source !== target;\n  }\n}","import {\n  classes as svgClasses,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport { addBendpoint } from './BendpointUtil';\n\nimport { translate } from '../../util/SvgTransformUtil';\n\nimport { isReverse } from './BendpointMove';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../bendpoints/BendpointMove').default} BendpointMove\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar RECONNECT_START = 'reconnectStart',\n    RECONNECT_END = 'reconnectEnd',\n    UPDATE_WAYPOINTS = 'updateWaypoints';\n\nvar MARKER_OK = 'connect-ok',\n    MARKER_NOT_OK = 'connect-not-ok',\n    MARKER_CONNECT_HOVER = 'connect-hover',\n    MARKER_CONNECT_UPDATING = 'djs-updating',\n    MARKER_DRAGGER = 'djs-dragging';\n\nvar HIGH_PRIORITY = 1100;\n\n/**\n * Preview connection while moving bendpoints.\n *\n * @param {BendpointMove} bendpointMove\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function BendpointMovePreview(bendpointMove, injector, eventBus, canvas) {\n  this._injector = injector;\n\n  var connectionPreview = injector.get('connectionPreview', false);\n\n  eventBus.on('bendpoint.move.start', function(event) {\n    var context = event.context,\n        bendpointIndex = context.bendpointIndex,\n        connection = context.connection,\n        insert = context.insert,\n        waypoints = connection.waypoints,\n        newWaypoints = waypoints.slice();\n\n    context.waypoints = waypoints;\n\n    if (insert) {\n\n      // insert placeholder for new bendpoint\n      newWaypoints.splice(bendpointIndex, 0, { x: event.x, y: event.y });\n    }\n\n    connection.waypoints = newWaypoints;\n\n    // add dragger gfx\n    var draggerGfx = context.draggerGfx = addBendpoint(canvas.getLayer('overlays'));\n\n    svgClasses(draggerGfx).add('djs-dragging');\n\n    canvas.addMarker(connection, MARKER_DRAGGER);\n    canvas.addMarker(connection, MARKER_CONNECT_UPDATING);\n  });\n\n  eventBus.on('bendpoint.move.hover', function(event) {\n    var context = event.context,\n        allowed = context.allowed,\n        hover = context.hover,\n        type = context.type;\n\n    if (hover) {\n      canvas.addMarker(hover, MARKER_CONNECT_HOVER);\n\n      if (type === UPDATE_WAYPOINTS) {\n        return;\n      }\n\n      if (allowed) {\n        canvas.removeMarker(hover, MARKER_NOT_OK);\n        canvas.addMarker(hover, MARKER_OK);\n      } else if (allowed === false) {\n        canvas.removeMarker(hover, MARKER_OK);\n        canvas.addMarker(hover, MARKER_NOT_OK);\n      }\n    }\n  });\n\n  eventBus.on([\n    'bendpoint.move.out',\n    'bendpoint.move.cleanup'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        hover = context.hover,\n        target = context.target;\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_CONNECT_HOVER);\n      canvas.removeMarker(hover, target ? MARKER_OK : MARKER_NOT_OK);\n    }\n  });\n\n  eventBus.on('bendpoint.move.move', function(event) {\n    var context = event.context,\n        allowed = context.allowed,\n        bendpointIndex = context.bendpointIndex,\n        draggerGfx = context.draggerGfx,\n        hover = context.hover,\n        type = context.type,\n        connection = context.connection,\n        source = connection.source,\n        target = connection.target,\n        newWaypoints = connection.waypoints.slice(),\n        bendpoint = { x: event.x, y: event.y },\n        hints = context.hints || {},\n        drawPreviewHints = {};\n\n    if (connectionPreview) {\n      if (hints.connectionStart) {\n        drawPreviewHints.connectionStart = hints.connectionStart;\n      }\n\n      if (hints.connectionEnd) {\n        drawPreviewHints.connectionEnd = hints.connectionEnd;\n      }\n\n\n      if (type === RECONNECT_START) {\n        if (isReverse(context)) {\n          drawPreviewHints.connectionEnd = drawPreviewHints.connectionEnd || bendpoint;\n\n          drawPreviewHints.source = target;\n          drawPreviewHints.target = hover || source;\n\n          newWaypoints = newWaypoints.reverse();\n        } else {\n          drawPreviewHints.connectionStart = drawPreviewHints.connectionStart || bendpoint;\n\n          drawPreviewHints.source = hover || source;\n          drawPreviewHints.target = target;\n        }\n      } else if (type === RECONNECT_END) {\n        if (isReverse(context)) {\n          drawPreviewHints.connectionStart = drawPreviewHints.connectionStart || bendpoint;\n\n          drawPreviewHints.source = hover || target;\n          drawPreviewHints.target = source;\n\n          newWaypoints = newWaypoints.reverse();\n        } else {\n          drawPreviewHints.connectionEnd = drawPreviewHints.connectionEnd || bendpoint;\n\n          drawPreviewHints.source = source;\n          drawPreviewHints.target = hover || target;\n        }\n\n      } else {\n        drawPreviewHints.noCropping = true;\n        drawPreviewHints.noLayout = true;\n        newWaypoints[ bendpointIndex ] = bendpoint;\n      }\n\n      if (type === UPDATE_WAYPOINTS) {\n        newWaypoints = bendpointMove.cropWaypoints(connection, newWaypoints);\n      }\n\n      drawPreviewHints.waypoints = newWaypoints;\n\n      connectionPreview.drawPreview(context, allowed, drawPreviewHints);\n    }\n\n    translate(draggerGfx, event.x, event.y);\n  }, this);\n\n  eventBus.on([\n    'bendpoint.move.end',\n    'bendpoint.move.cancel'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        connection = context.connection,\n        draggerGfx = context.draggerGfx,\n        hover = context.hover,\n        target = context.target,\n        waypoints = context.waypoints;\n\n    connection.waypoints = waypoints;\n\n    // remove dragger gfx\n    svgRemove(draggerGfx);\n\n    canvas.removeMarker(connection, MARKER_CONNECT_UPDATING);\n    canvas.removeMarker(connection, MARKER_DRAGGER);\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_OK);\n      canvas.removeMarker(hover, target ? MARKER_OK : MARKER_NOT_OK);\n    }\n\n    if (connectionPreview) {\n      connectionPreview.cleanUp(context);\n    }\n  });\n}\n\nBendpointMovePreview.$inject = [\n  'bendpointMove',\n  'injector',\n  'eventBus',\n  'canvas'\n];","import {\n  pointsAligned,\n  pointsOnLine\n} from '../../util/Geometry';\n\nimport {\n  addSegmentDragger,\n  getConnectionIntersection\n} from './BendpointUtil';\n\nimport {\n  getMid,\n  getOrientation\n} from '../../layout/LayoutUtil';\n\nvar MARKER_CONNECT_HOVER = 'connect-hover',\n    MARKER_CONNECT_UPDATING = 'djs-updating';\n\nimport {\n  classes as svgClasses,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  translate\n} from '../../util/SvgTransformUtil';\n\n/**\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('../../util/Types').Axis} Axis\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../../core/GraphicsFactory').default} GraphicsFactory\n * @typedef {import('../modeling/Modeling').default} Modeling\n */\n\nfunction axisAdd(point, axis, delta) {\n  return axisSet(point, axis, point[axis] + delta);\n}\n\nfunction axisSet(point, axis, value) {\n  return {\n    x: (axis === 'x' ? value : point.x),\n    y: (axis === 'y' ? value : point.y)\n  };\n}\n\nfunction axisFenced(position, segmentStart, segmentEnd, axis) {\n\n  var maxValue = Math.max(segmentStart[axis], segmentEnd[axis]),\n      minValue = Math.min(segmentStart[axis], segmentEnd[axis]);\n\n  var padding = 20;\n\n  var fencedValue = Math.min(Math.max(minValue + padding, position[axis]), maxValue - padding);\n\n  return axisSet(segmentStart, axis, fencedValue);\n}\n\nfunction flipAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\n\n/**\n * Get the docking point on the given element.\n *\n * Compute a reasonable docking, if non exists.\n *\n * @param {Point} point\n * @param {Shape} referenceElement\n * @param {Axis} moveAxis\n *\n * @return {Point}\n */\nfunction getDocking(point, referenceElement, moveAxis) {\n\n  var referenceMid,\n      inverseAxis;\n\n  if (point.original) {\n    return point.original;\n  } else {\n    referenceMid = getMid(referenceElement);\n    inverseAxis = flipAxis(moveAxis);\n\n    return axisSet(point, inverseAxis, referenceMid[inverseAxis]);\n  }\n}\n\n/**\n * A component that implements moving of bendpoints.\n *\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Canvas} dragging\n * @param {GraphicsFactory} graphicsFactory\n * @param {Modeling} modeling\n */\nexport default function ConnectionSegmentMove(\n    injector, eventBus, canvas,\n    dragging, graphicsFactory, modeling) {\n\n  // optional connection docking integration\n  var connectionDocking = injector.get('connectionDocking', false);\n\n\n  // API\n\n  this.start = function(event, connection, idx) {\n\n    var context,\n        gfx = canvas.getGraphics(connection),\n        segmentStartIndex = idx - 1,\n        segmentEndIndex = idx,\n        waypoints = connection.waypoints,\n        segmentStart = waypoints[segmentStartIndex],\n        segmentEnd = waypoints[segmentEndIndex],\n        intersection = getConnectionIntersection(canvas, waypoints, event),\n        direction, axis, dragPosition;\n\n    direction = pointsAligned(segmentStart, segmentEnd);\n\n    // do not move diagonal connection\n    if (!direction) {\n      return;\n    }\n\n    // the axis where we are going to move things\n    axis = direction === 'v' ? 'x' : 'y';\n\n    if (segmentStartIndex === 0) {\n      segmentStart = getDocking(segmentStart, connection.source, axis);\n    }\n\n    if (segmentEndIndex === waypoints.length - 1) {\n      segmentEnd = getDocking(segmentEnd, connection.target, axis);\n    }\n\n    if (intersection) {\n      dragPosition = intersection.point;\n    } else {\n\n      // set to segment center as default\n      dragPosition = {\n        x: (segmentStart.x + segmentEnd.x) / 2,\n        y: (segmentStart.y + segmentEnd.y) / 2\n      };\n    }\n\n    context = {\n      connection: connection,\n      segmentStartIndex: segmentStartIndex,\n      segmentEndIndex: segmentEndIndex,\n      segmentStart: segmentStart,\n      segmentEnd: segmentEnd,\n      axis: axis,\n      dragPosition: dragPosition\n    };\n\n    dragging.init(event, dragPosition, 'connectionSegment.move', {\n      cursor: axis === 'x' ? 'resize-ew' : 'resize-ns',\n      data: {\n        connection: connection,\n        connectionGfx: gfx,\n        context: context\n      }\n    });\n  };\n\n  /**\n   * Crop connection if connection cropping is provided.\n   *\n   * @param {Connection} connection\n   * @param {Point[]} newWaypoints\n   *\n   * @return {Point[]} cropped connection waypoints\n   */\n  function cropConnection(connection, newWaypoints) {\n\n    // crop connection, if docking service is provided only\n    if (!connectionDocking) {\n      return newWaypoints;\n    }\n\n    var oldWaypoints = connection.waypoints,\n        croppedWaypoints;\n\n    // temporary set new waypoints\n    connection.waypoints = newWaypoints;\n\n    croppedWaypoints = connectionDocking.getCroppedWaypoints(connection);\n\n    // restore old waypoints\n    connection.waypoints = oldWaypoints;\n\n    return croppedWaypoints;\n  }\n\n  // DRAGGING IMPLEMENTATION\n\n  function redrawConnection(data) {\n    graphicsFactory.update('connection', data.connection, data.connectionGfx);\n  }\n\n  function updateDragger(context, segmentOffset, event) {\n\n    var newWaypoints = context.newWaypoints,\n        segmentStartIndex = context.segmentStartIndex + segmentOffset,\n        segmentStart = newWaypoints[segmentStartIndex],\n        segmentEndIndex = context.segmentEndIndex + segmentOffset,\n        segmentEnd = newWaypoints[segmentEndIndex],\n        axis = flipAxis(context.axis);\n\n    // make sure the dragger does not move\n    // outside the connection\n    var draggerPosition = axisFenced(event, segmentStart, segmentEnd, axis);\n\n    // update dragger\n    translate(context.draggerGfx, draggerPosition.x, draggerPosition.y);\n  }\n\n  /**\n   * Filter waypoints for redundant ones (i.e. on the same axis).\n   * Returns the filtered waypoints and the offset related to the segment move.\n   *\n   * @param {Point[]} waypoints\n   * @param {Integer} segmentStartIndex of moved segment start\n   *\n   * @return {Object} { filteredWaypoints, segmentOffset }\n   */\n  function filterRedundantWaypoints(waypoints, segmentStartIndex) {\n\n    var segmentOffset = 0;\n\n    var filteredWaypoints = waypoints.filter(function(r, idx) {\n      if (pointsOnLine(waypoints[idx - 1], waypoints[idx + 1], r)) {\n\n        // remove point and increment offset\n        segmentOffset = idx <= segmentStartIndex ? segmentOffset - 1 : segmentOffset;\n        return false;\n      }\n\n      // dont remove point\n      return true;\n    });\n\n    return {\n      waypoints: filteredWaypoints,\n      segmentOffset: segmentOffset\n    };\n  }\n\n  eventBus.on('connectionSegment.move.start', function(event) {\n\n    var context = event.context,\n        connection = event.connection,\n        layer = canvas.getLayer('overlays');\n\n    context.originalWaypoints = connection.waypoints.slice();\n\n    // add dragger gfx\n    context.draggerGfx = addSegmentDragger(layer, context.segmentStart, context.segmentEnd);\n    svgClasses(context.draggerGfx).add('djs-dragging');\n\n    canvas.addMarker(connection, MARKER_CONNECT_UPDATING);\n  });\n\n  eventBus.on('connectionSegment.move.move', function(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        segmentStartIndex = context.segmentStartIndex,\n        segmentEndIndex = context.segmentEndIndex,\n        segmentStart = context.segmentStart,\n        segmentEnd = context.segmentEnd,\n        axis = context.axis;\n\n    var newWaypoints = context.originalWaypoints.slice(),\n        newSegmentStart = axisAdd(segmentStart, axis, event['d' + axis]),\n        newSegmentEnd = axisAdd(segmentEnd, axis, event['d' + axis]);\n\n    // original waypoint count and added / removed\n    // from start waypoint delta. We use the later\n    // to retrieve the updated segmentStartIndex / segmentEndIndex\n    var waypointCount = newWaypoints.length,\n        segmentOffset = 0;\n\n    // move segment start / end by axis delta\n    newWaypoints[segmentStartIndex] = newSegmentStart;\n    newWaypoints[segmentEndIndex] = newSegmentEnd;\n\n    var sourceToSegmentOrientation,\n        targetToSegmentOrientation;\n\n    // handle first segment\n    if (segmentStartIndex < 2) {\n      sourceToSegmentOrientation = getOrientation(connection.source, newSegmentStart);\n\n      // first bendpoint, remove first segment if intersecting\n      if (segmentStartIndex === 1) {\n\n        if (sourceToSegmentOrientation === 'intersect') {\n          newWaypoints.shift();\n          newWaypoints[0] = newSegmentStart;\n          segmentOffset--;\n        }\n      }\n\n      // docking point, add segment if not intersecting anymore\n      else {\n        if (sourceToSegmentOrientation !== 'intersect') {\n          newWaypoints.unshift(segmentStart);\n          segmentOffset++;\n        }\n      }\n    }\n\n    // handle last segment\n    if (segmentEndIndex > waypointCount - 3) {\n      targetToSegmentOrientation = getOrientation(connection.target, newSegmentEnd);\n\n      // last bendpoint, remove last segment if intersecting\n      if (segmentEndIndex === waypointCount - 2) {\n\n        if (targetToSegmentOrientation === 'intersect') {\n          newWaypoints.pop();\n          newWaypoints[newWaypoints.length - 1] = newSegmentEnd;\n        }\n      }\n\n      // last bendpoint, remove last segment if intersecting\n      else {\n        if (targetToSegmentOrientation !== 'intersect') {\n          newWaypoints.push(segmentEnd);\n        }\n      }\n    }\n\n    // update connection waypoints\n    context.newWaypoints = connection.waypoints = cropConnection(connection, newWaypoints);\n\n    // update dragger position\n    updateDragger(context, segmentOffset, event);\n\n    // save segmentOffset in context\n    context.newSegmentStartIndex = segmentStartIndex + segmentOffset;\n\n    // redraw connection\n    redrawConnection(event);\n  });\n\n  eventBus.on('connectionSegment.move.hover', function(event) {\n\n    event.context.hover = event.hover;\n    canvas.addMarker(event.hover, MARKER_CONNECT_HOVER);\n  });\n\n  eventBus.on([\n    'connectionSegment.move.out',\n    'connectionSegment.move.cleanup'\n  ], function(event) {\n\n    // remove connect marker\n    // if it was added\n    var hover = event.context.hover;\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_CONNECT_HOVER);\n    }\n  });\n\n  eventBus.on('connectionSegment.move.cleanup', function(event) {\n\n    var context = event.context,\n        connection = context.connection;\n\n    // remove dragger gfx\n    if (context.draggerGfx) {\n      svgRemove(context.draggerGfx);\n    }\n\n    canvas.removeMarker(connection, MARKER_CONNECT_UPDATING);\n  });\n\n  eventBus.on([\n    'connectionSegment.move.cancel',\n    'connectionSegment.move.end'\n  ], function(event) {\n    var context = event.context,\n        connection = context.connection;\n\n    connection.waypoints = context.originalWaypoints;\n\n    redrawConnection(event);\n  });\n\n  eventBus.on('connectionSegment.move.end', function(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        newWaypoints = context.newWaypoints,\n        newSegmentStartIndex = context.newSegmentStartIndex;\n\n    // ensure we have actual pixel values bendpoint\n    // coordinates (important when zoom level was > 1 during move)\n    newWaypoints = newWaypoints.map(function(p) {\n      return {\n        original: p.original,\n        x: Math.round(p.x),\n        y: Math.round(p.y)\n      };\n    });\n\n    // apply filter redunant waypoints\n    var filtered = filterRedundantWaypoints(newWaypoints, newSegmentStartIndex);\n\n    // get filtered waypoints\n    var filteredWaypoints = filtered.waypoints,\n        croppedWaypoints = cropConnection(connection, filteredWaypoints),\n        segmentOffset = filtered.segmentOffset;\n\n    var hints = {\n      segmentMove: {\n        segmentStartIndex: context.segmentStartIndex,\n        newSegmentStartIndex: newSegmentStartIndex + segmentOffset\n      }\n    };\n\n    modeling.updateWaypoints(connection, croppedWaypoints, hints);\n  });\n}\n\nConnectionSegmentMove.$inject = [\n  'injector',\n  'eventBus',\n  'canvas',\n  'dragging',\n  'graphicsFactory',\n  'modeling'\n];\n","/**\n * @typedef {import('../../core/Types').ConnectionLike} Connection\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../core/EventBus').Event} Event\n *\n * @typedef {import('../../util/Types').Axis} Axis\n */\n\nvar abs = Math.abs,\n    round = Math.round;\n\n\n/**\n * Snap value to a collection of reference values.\n *\n * @param {number} value\n * @param {Array<number>} values\n * @param {number} [tolerance=10]\n *\n * @return {number} the value we snapped to or null, if none snapped\n */\nexport function snapTo(value, values, tolerance) {\n  tolerance = tolerance === undefined ? 10 : tolerance;\n\n  var idx, snapValue;\n\n  for (idx = 0; idx < values.length; idx++) {\n    snapValue = values[idx];\n\n    if (abs(snapValue - value) <= tolerance) {\n      return snapValue;\n    }\n  }\n}\n\n\nexport function topLeft(bounds) {\n  return {\n    x: bounds.x,\n    y: bounds.y\n  };\n}\n\nexport function topRight(bounds) {\n  return {\n    x: bounds.x + bounds.width,\n    y: bounds.y\n  };\n}\n\nexport function bottomLeft(bounds) {\n  return {\n    x: bounds.x,\n    y: bounds.y + bounds.height\n  };\n}\n\nexport function bottomRight(bounds) {\n  return {\n    x: bounds.x + bounds.width,\n    y: bounds.y + bounds.height\n  };\n}\n\nexport function mid(bounds, defaultValue) {\n\n  if (!bounds || isNaN(bounds.x) || isNaN(bounds.y)) {\n    return defaultValue;\n  }\n\n  return {\n    x: round(bounds.x + bounds.width / 2),\n    y: round(bounds.y + bounds.height / 2)\n  };\n}\n\n\n/**\n * Retrieve the snap state of the given event.\n *\n * @param {Event} event\n * @param {Axis} axis\n *\n * @return {boolean} the snapped state\n *\n */\nexport function isSnapped(event, axis) {\n  var snapped = event.snapped;\n\n  if (!snapped) {\n    return false;\n  }\n\n  if (typeof axis === 'string') {\n    return snapped[axis];\n  }\n\n  return snapped.x && snapped.y;\n}\n\n\n/**\n * Set the given event as snapped.\n *\n * This method may change the x and/or y position of the shape\n * from the given event!\n *\n * @param {Event} event\n * @param {Axis} axis\n * @param {number|boolean} value\n *\n * @return {number} old value\n */\nexport function setSnapped(event, axis, value) {\n  if (typeof axis !== 'string') {\n    throw new Error('axis must be in [x, y]');\n  }\n\n  if (typeof value !== 'number' && value !== false) {\n    throw new Error('value must be Number or false');\n  }\n\n  var delta,\n      previousValue = event[axis];\n\n  var snapped = event.snapped = (event.snapped || {});\n\n\n  if (value === false) {\n    snapped[axis] = false;\n  } else {\n    snapped[axis] = true;\n\n    delta = value - previousValue;\n\n    event[axis] += delta;\n    event['d' + axis] += delta;\n  }\n\n  return previousValue;\n}\n\n/**\n * Get children of a shape.\n *\n * @param {Shape} parent\n *\n * @return {Array<Shape|Connection>}\n */\nexport function getChildren(parent) {\n  return parent.children || [];\n}","import {\n  assign,\n  forEach,\n  isArray\n} from 'min-dash';\n\nimport { setSnapped } from '../snapping/SnapUtil';\n\nimport { getClosestPointOnConnection } from './BendpointUtil';\n\nimport { isConnection } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../core/EventBus').default} EventBus\n */\nvar abs = Math.abs,\n    round = Math.round;\n\nvar TOLERANCE = 10;\n\n/**\n * @param {EventBus} eventBus\n */\nexport default function BendpointSnapping(eventBus) {\n\n  function snapTo(values, value) {\n\n    if (isArray(values)) {\n      var i = values.length;\n\n      while (i--) if (abs(values[i] - value) <= TOLERANCE) {\n        return values[i];\n      }\n    } else {\n      values = +values;\n      var rem = value % values;\n\n      if (rem < TOLERANCE) {\n        return value - rem;\n      }\n\n      if (rem > values - TOLERANCE) {\n        return value - rem + values;\n      }\n    }\n\n    return value;\n  }\n\n  function getSnapPoint(element, event) {\n\n    if (element.waypoints) {\n      return getClosestPointOnConnection(event, element);\n    }\n\n    if (element.width) {\n      return {\n        x: round(element.width / 2 + element.x),\n        y: round(element.height / 2 + element.y)\n      };\n    }\n  }\n\n  // connection segment snapping //////////////////////\n\n  function getConnectionSegmentSnaps(event) {\n\n    var context = event.context,\n        snapPoints = context.snapPoints,\n        connection = context.connection,\n        waypoints = connection.waypoints,\n        segmentStart = context.segmentStart,\n        segmentStartIndex = context.segmentStartIndex,\n        segmentEnd = context.segmentEnd,\n        segmentEndIndex = context.segmentEndIndex,\n        axis = context.axis;\n\n    if (snapPoints) {\n      return snapPoints;\n    }\n\n    var referenceWaypoints = [\n      waypoints[segmentStartIndex - 1],\n      segmentStart,\n      segmentEnd,\n      waypoints[segmentEndIndex + 1]\n    ];\n\n    if (segmentStartIndex < 2) {\n      referenceWaypoints.unshift(getSnapPoint(connection.source, event));\n    }\n\n    if (segmentEndIndex > waypoints.length - 3) {\n      referenceWaypoints.unshift(getSnapPoint(connection.target, event));\n    }\n\n    context.snapPoints = snapPoints = { horizontal: [] , vertical: [] };\n\n    forEach(referenceWaypoints, function(p) {\n\n      // we snap on existing bendpoints only,\n      // not placeholders that are inserted during add\n      if (p) {\n        p = p.original || p;\n\n        if (axis === 'y') {\n          snapPoints.horizontal.push(p.y);\n        }\n\n        if (axis === 'x') {\n          snapPoints.vertical.push(p.x);\n        }\n      }\n    });\n\n    return snapPoints;\n  }\n\n  eventBus.on('connectionSegment.move.move', 1500, function(event) {\n    var snapPoints = getConnectionSegmentSnaps(event),\n        x = event.x,\n        y = event.y,\n        sx, sy;\n\n    if (!snapPoints) {\n      return;\n    }\n\n    // snap\n    sx = snapTo(snapPoints.vertical, x);\n    sy = snapTo(snapPoints.horizontal, y);\n\n\n    // correction x/y\n    var cx = (x - sx),\n        cy = (y - sy);\n\n    // update delta\n    assign(event, {\n      dx: event.dx - cx,\n      dy: event.dy - cy,\n      x: sx,\n      y: sy\n    });\n\n    // only set snapped if actually snapped\n    if (cx || snapPoints.vertical.indexOf(x) !== -1) {\n      setSnapped(event, 'x', sx);\n    }\n\n    if (cy || snapPoints.horizontal.indexOf(y) !== -1) {\n      setSnapped(event, 'y', sy);\n    }\n  });\n\n\n  // bendpoint snapping //////////////////////\n\n  function getBendpointSnaps(context) {\n\n    var snapPoints = context.snapPoints,\n        waypoints = context.connection.waypoints,\n        bendpointIndex = context.bendpointIndex;\n\n    if (snapPoints) {\n      return snapPoints;\n    }\n\n    var referenceWaypoints = [ waypoints[bendpointIndex - 1], waypoints[bendpointIndex + 1] ];\n\n    context.snapPoints = snapPoints = { horizontal: [] , vertical: [] };\n\n    forEach(referenceWaypoints, function(p) {\n\n      // we snap on existing bendpoints only,\n      // not placeholders that are inserted during add\n      if (p) {\n        p = p.original || p;\n\n        snapPoints.horizontal.push(p.y);\n        snapPoints.vertical.push(p.x);\n      }\n    });\n\n    return snapPoints;\n  }\n\n  // Snap Endpoint of new connection\n  eventBus.on([\n    'connect.hover',\n    'connect.move',\n    'connect.end'\n  ], 1500, function(event) {\n    var context = event.context,\n        hover = context.hover,\n        hoverMid = hover && getSnapPoint(hover, event);\n\n    // only snap on connections, elements can have multiple connect endpoints\n    if (!isConnection(hover) || !hoverMid || !hoverMid.x || !hoverMid.y) {\n      return;\n    }\n\n    setSnapped(event, 'x', hoverMid.x);\n    setSnapped(event, 'y', hoverMid.y);\n  });\n\n  eventBus.on([ 'bendpoint.move.move', 'bendpoint.move.end' ], 1500, function(event) {\n\n    var context = event.context,\n        snapPoints = getBendpointSnaps(context),\n        hover = context.hover,\n        hoverMid = hover && getSnapPoint(hover, event),\n        x = event.x,\n        y = event.y,\n        sx, sy;\n\n    if (!snapPoints) {\n      return;\n    }\n\n    // snap to hover mid\n    sx = snapTo(hoverMid ? snapPoints.vertical.concat([ hoverMid.x ]) : snapPoints.vertical, x);\n    sy = snapTo(hoverMid ? snapPoints.horizontal.concat([ hoverMid.y ]) : snapPoints.horizontal, y);\n\n    // correction x/y\n    var cx = (x - sx),\n        cy = (y - sy);\n\n    // update delta\n    assign(event, {\n      dx: event.dx - cx,\n      dy: event.dy - cy,\n      x: event.x - cx,\n      y: event.y - cy\n    });\n\n    // only set snapped if actually snapped\n    if (cx || snapPoints.vertical.indexOf(x) !== -1) {\n      setSnapped(event, 'x', sx);\n    }\n\n    if (cy || snapPoints.horizontal.indexOf(y) !== -1) {\n      setSnapped(event, 'y', sy);\n    }\n  });\n}\n\n\nBendpointSnapping.$inject = [ 'eventBus' ];\n","import DraggingModule from '../dragging';\nimport RulesModule from '../rules';\n\nimport Bendpoints from './Bendpoints';\nimport BendpointMove from './BendpointMove';\nimport BendpointMovePreview from './BendpointMovePreview';\nimport ConnectionSegmentMove from './ConnectionSegmentMove';\nimport BendpointSnapping from './BendpointSnapping';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    DraggingModule,\n    RulesModule\n  ],\n  __init__: [ 'bendpoints', 'bendpointSnapping', 'bendpointMovePreview' ],\n  bendpoints: [ 'type', Bendpoints ],\n  bendpointMove: [ 'type', BendpointMove ],\n  bendpointMovePreview: [ 'type', BendpointMovePreview ],\n  connectionSegmentMove: [ 'type', ConnectionSegmentMove ],\n  bendpointSnapping: [ 'type', BendpointSnapping ]\n};\n","import {\n  getMid\n} from '../../layout/LayoutUtil';\n\nimport {\n  isNil,\n  isObject\n} from 'min-dash';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n */\n\n/**\n * @param {EventBus} eventBus\n * @param {Dragging} dragging\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function Connect(eventBus, dragging, modeling, rules) {\n\n  // rules\n\n  function canConnect(source, target) {\n    return rules.allowed('connection.create', {\n      source: source,\n      target: target\n    });\n  }\n\n  function canConnectReverse(source, target) {\n    return canConnect(target, source);\n  }\n\n\n  // event handlers\n\n  eventBus.on('connect.hover', function(event) {\n    var context = event.context,\n        start = context.start,\n        hover = event.hover,\n        canExecute;\n\n    // cache hover state\n    context.hover = hover;\n\n    canExecute = context.canExecute = canConnect(start, hover);\n\n    // ignore hover\n    if (isNil(canExecute)) {\n      return;\n    }\n\n    if (canExecute !== false) {\n      context.source = start;\n      context.target = hover;\n\n      return;\n    }\n\n    canExecute = context.canExecute = canConnectReverse(start, hover);\n\n    // ignore hover\n    if (isNil(canExecute)) {\n      return;\n    }\n\n    if (canExecute !== false) {\n      context.source = hover;\n      context.target = start;\n    }\n  });\n\n  eventBus.on([ 'connect.out', 'connect.cleanup' ], function(event) {\n    var context = event.context;\n\n    context.hover = null;\n    context.source = null;\n    context.target = null;\n\n    context.canExecute = false;\n  });\n\n  eventBus.on('connect.end', function(event) {\n    var context = event.context,\n        canExecute = context.canExecute,\n        connectionStart = context.connectionStart,\n        connectionEnd = {\n          x: event.x,\n          y: event.y\n        },\n        source = context.source,\n        target = context.target;\n\n    if (!canExecute) {\n      return false;\n    }\n\n    var attrs = null,\n        hints = {\n          connectionStart: isReverse(context) ? connectionEnd : connectionStart,\n          connectionEnd: isReverse(context) ? connectionStart : connectionEnd\n        };\n\n    if (isObject(canExecute)) {\n      attrs = canExecute;\n    }\n\n    context.connection = modeling.connect(source, target, attrs, hints);\n  });\n\n\n  // API\n\n  /**\n   * Start connect operation.\n   *\n   * @param {MouseEvent|TouchEvent} event\n   * @param {Element} start\n   * @param {Point} [connectionStart]\n   * @param {boolean} [autoActivate=false]\n   */\n  this.start = function(event, start, connectionStart, autoActivate) {\n    if (!isObject(connectionStart)) {\n      autoActivate = connectionStart;\n      connectionStart = getMid(start);\n    }\n\n    dragging.init(event, 'connect', {\n      autoActivate: autoActivate,\n      data: {\n        shape: start,\n        context: {\n          start: start,\n          connectionStart: connectionStart\n        }\n      }\n    });\n  };\n}\n\nConnect.$inject = [\n  'eventBus',\n  'dragging',\n  'modeling',\n  'rules'\n];\n\n\n// helpers //////////\n\nexport function isReverse(context) {\n  var hover = context.hover,\n      source = context.source,\n      target = context.target;\n\n  return hover && source && hover === source && source !== target;\n}","import { isReverse } from './Connect';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar HIGH_PRIORITY = 1100,\n    LOW_PRIORITY = 900;\n\nvar MARKER_OK = 'connect-ok',\n    MARKER_NOT_OK = 'connect-not-ok';\n\n/**\n * Shows connection preview during connect.\n *\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function ConnectPreview(injector, eventBus, canvas) {\n  var connectionPreview = injector.get('connectionPreview', false);\n\n  connectionPreview && eventBus.on('connect.move', function(event) {\n    var context = event.context,\n        canConnect = context.canExecute,\n        hover = context.hover,\n        source = context.source,\n        start = context.start,\n        startPosition = context.startPosition,\n        target = context.target,\n        connectionStart = context.connectionStart || startPosition,\n        connectionEnd = context.connectionEnd || {\n          x: event.x,\n          y: event.y\n        },\n        previewStart = connectionStart,\n        previewEnd = connectionEnd;\n\n    if (isReverse(context)) {\n      previewStart = connectionEnd;\n      previewEnd = connectionStart;\n    }\n\n    connectionPreview.drawPreview(context, canConnect, {\n      source: source || start,\n      target: target || hover,\n      connectionStart: previewStart,\n      connectionEnd: previewEnd\n    });\n  });\n\n  eventBus.on('connect.hover', LOW_PRIORITY, function(event) {\n    var context = event.context,\n        hover = event.hover,\n        canExecute = context.canExecute;\n\n    // ignore hover\n    if (canExecute === null) {\n      return;\n    }\n\n    canvas.addMarker(hover, canExecute ? MARKER_OK : MARKER_NOT_OK);\n  });\n\n  eventBus.on([\n    'connect.out',\n    'connect.cleanup'\n  ], HIGH_PRIORITY, function(event) {\n    var hover = event.hover;\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_OK);\n      canvas.removeMarker(hover, MARKER_NOT_OK);\n    }\n  });\n\n  connectionPreview && eventBus.on('connect.cleanup', function(event) {\n    connectionPreview.cleanUp(event.context);\n  });\n}\n\nConnectPreview.$inject = [\n  'injector',\n  'eventBus',\n  'canvas'\n];\n","import SelectionModule from '../selection';\nimport RulesModule from '../rules';\nimport DraggingModule from '../dragging';\n\nimport Connect from './Connect';\nimport ConnectPreview from './ConnectPreview';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    SelectionModule,\n    RulesModule,\n    DraggingModule\n  ],\n  __init__: [\n    'connectPreview'\n  ],\n  connect: [ 'type', Connect ],\n  connectPreview: [ 'type', ConnectPreview ]\n};\n","import {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  remove as svgRemove,\n  clear as svgClear\n} from 'tiny-svg';\n\nimport {\n  isObject\n} from 'min-dash';\n\nimport {\n  getElementLineIntersection,\n  getMid\n} from '../../layout/LayoutUtil';\n\nimport {\n  createLine\n} from '../../util/RenderUtil';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/ElementFactory').default} ElementFactory\n * @typedef {import('../../core/GraphicsFactory').default} GraphicsFactory\n */\n\nvar MARKER_CONNECTION_PREVIEW = 'djs-dragger';\n\n/**\n * Draws connection preview. Optionally, this can use layouter and connection docking to draw\n * better looking previews.\n *\n * @param {Injector} injector\n * @param {Canvas} canvas\n * @param {GraphicsFactory} graphicsFactory\n * @param {ElementFactory} elementFactory\n */\nexport default function ConnectionPreview(\n    injector,\n    canvas,\n    graphicsFactory,\n    elementFactory\n) {\n  this._canvas = canvas;\n  this._graphicsFactory = graphicsFactory;\n  this._elementFactory = elementFactory;\n\n  // optional components\n  this._connectionDocking = injector.get('connectionDocking', false);\n  this._layouter = injector.get('layouter', false);\n}\n\nConnectionPreview.$inject = [\n  'injector',\n  'canvas',\n  'graphicsFactory',\n  'elementFactory'\n];\n\n/**\n * Draw connection preview.\n *\n * Provide at least one of <source, connectionStart> and <target, connectionEnd> to create a preview.\n * In the clean up stage, call `connectionPreview#cleanUp` with the context to remove preview.\n *\n * @param {Object} context\n * @param {Object|boolean} canConnect\n * @param {Object} hints\n * @param {Element} [hints.source] source element\n * @param {Element} [hints.target] target element\n * @param {Point} [hints.connectionStart] connection preview start\n * @param {Point} [hints.connectionEnd] connection preview end\n * @param {Point[]} [hints.waypoints] provided waypoints for preview\n * @param {boolean} [hints.noLayout] true if preview should not be laid out\n * @param {boolean} [hints.noCropping] true if preview should not be cropped\n * @param {boolean} [hints.noNoop] true if simple connection should not be drawn\n */\nConnectionPreview.prototype.drawPreview = function(context, canConnect, hints) {\n\n  hints = hints || {};\n\n  var connectionPreviewGfx = context.connectionPreviewGfx,\n      getConnection = context.getConnection,\n      source = hints.source,\n      target = hints.target,\n      waypoints = hints.waypoints,\n      connectionStart = hints.connectionStart,\n      connectionEnd = hints.connectionEnd,\n      noLayout = hints.noLayout,\n      noCropping = hints.noCropping,\n      noNoop = hints.noNoop,\n      connection;\n\n  var self = this;\n\n  if (!connectionPreviewGfx) {\n    connectionPreviewGfx = context.connectionPreviewGfx = this.createConnectionPreviewGfx();\n  }\n\n  svgClear(connectionPreviewGfx);\n\n  if (!getConnection) {\n    getConnection = context.getConnection = cacheReturnValues(function(canConnect, source, target) {\n      return self.getConnection(canConnect, source, target);\n    });\n  }\n\n  if (canConnect) {\n    connection = getConnection(canConnect, source, target);\n  }\n\n  if (!connection) {\n    !noNoop && this.drawNoopPreview(connectionPreviewGfx, hints);\n    return;\n  }\n\n  connection.waypoints = waypoints || [];\n\n  // optional layout\n  if (this._layouter && !noLayout) {\n    connection.waypoints = this._layouter.layoutConnection(connection, {\n      source: source,\n      target: target,\n      connectionStart: connectionStart,\n      connectionEnd: connectionEnd,\n      waypoints: hints.waypoints || connection.waypoints\n    });\n  }\n\n  // fallback if no waypoints were provided nor created with layouter\n  if (!connection.waypoints || !connection.waypoints.length) {\n    connection.waypoints = [\n      source ? getMid(source) : connectionStart,\n      target ? getMid(target) : connectionEnd\n    ];\n  }\n\n  // optional cropping\n  if (this._connectionDocking && (source || target) && !noCropping) {\n    connection.waypoints = this._connectionDocking.getCroppedWaypoints(connection, source, target);\n  }\n\n  this._graphicsFactory.drawConnection(connectionPreviewGfx, connection, {\n    stroke: 'var(--element-dragger-color)'\n  });\n};\n\n/**\n * Draw simple connection between source and target or provided points.\n *\n * @param {SVGElement} connectionPreviewGfx container for the connection\n * @param {Object} hints\n * @param {Element} [hints.source] source element\n * @param {Element} [hints.target] target element\n * @param {Point} [hints.connectionStart] required if source is not provided\n * @param {Point} [hints.connectionEnd] required if target is not provided\n */\nConnectionPreview.prototype.drawNoopPreview = function(connectionPreviewGfx, hints) {\n  var source = hints.source,\n      target = hints.target,\n      start = hints.connectionStart || getMid(source),\n      end = hints.connectionEnd || getMid(target);\n\n  var waypoints = this.cropWaypoints(start, end, source, target);\n\n  var connection = this.createNoopConnection(waypoints[0], waypoints[1]);\n\n  svgAppend(connectionPreviewGfx, connection);\n};\n\n/**\n * Return cropped waypoints.\n *\n * @param {Point} start\n * @param {Point} end\n * @param {Element} source\n * @param {Element} target\n *\n * @return {Point[]}\n */\nConnectionPreview.prototype.cropWaypoints = function(start, end, source, target) {\n  var graphicsFactory = this._graphicsFactory,\n      sourcePath = source && graphicsFactory.getShapePath(source),\n      targetPath = target && graphicsFactory.getShapePath(target),\n      connectionPath = graphicsFactory.getConnectionPath({ waypoints: [ start, end ] });\n\n  start = (source && getElementLineIntersection(sourcePath, connectionPath, true)) || start;\n  end = (target && getElementLineIntersection(targetPath, connectionPath, false)) || end;\n\n  return [ start, end ];\n};\n\n/**\n * Remove connection preview container if it exists.\n *\n * @param {Object} [context]\n * @param {SVGElement} [context.connectionPreviewGfx] preview container\n */\nConnectionPreview.prototype.cleanUp = function(context) {\n  if (context && context.connectionPreviewGfx) {\n    svgRemove(context.connectionPreviewGfx);\n  }\n};\n\n/**\n * Get connection that connects source and target.\n *\n * @param {Object|boolean} canConnect\n *\n * @return {Connection}\n */\nConnectionPreview.prototype.getConnection = function(canConnect) {\n  var attrs = ensureConnectionAttrs(canConnect);\n\n  return this._elementFactory.createConnection(attrs);\n};\n\n\n/**\n * Add and return preview graphics.\n *\n * @return {SVGElement}\n */\nConnectionPreview.prototype.createConnectionPreviewGfx = function() {\n  var gfx = svgCreate('g');\n\n  svgAttr(gfx, {\n    pointerEvents: 'none'\n  });\n\n  svgClasses(gfx).add(MARKER_CONNECTION_PREVIEW);\n\n  svgAppend(this._canvas.getActiveLayer(), gfx);\n\n  return gfx;\n};\n\n/**\n * Create and return simple connection.\n *\n * @param {Point} start\n * @param {Point} end\n *\n * @return {SVGElement}\n */\nConnectionPreview.prototype.createNoopConnection = function(start, end) {\n  return createLine([ start, end ], {\n    'stroke': '#333',\n    'strokeDasharray': [ 1 ],\n    'strokeWidth': 2,\n    'pointer-events': 'none'\n  });\n};\n\n// helpers //////////\n\n/**\n * Returns function that returns cached return values referenced by stringified first argument.\n *\n * @param {Function} fn\n *\n * @return {Function}\n */\nfunction cacheReturnValues(fn) {\n  var returnValues = {};\n\n  /**\n   * Return cached return value referenced by stringified first argument.\n   *\n   * @return {*}\n   */\n  return function(firstArgument) {\n    var key = JSON.stringify(firstArgument);\n\n    var returnValue = returnValues[key];\n\n    if (!returnValue) {\n      returnValue = returnValues[key] = fn.apply(null, arguments);\n    }\n\n    return returnValue;\n  };\n}\n\n/**\n * Ensure connection attributes is object.\n *\n * @param {Object|boolean} canConnect\n *\n * @return {Object}\n */\nfunction ensureConnectionAttrs(canConnect) {\n  if (isObject(canConnect)) {\n    return canConnect;\n  } else {\n    return {};\n  }\n}\n","import ConnectionPreview from './ConnectionPreview';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'connectionPreview' ],\n  connectionPreview: [ 'type', ConnectionPreview ]\n};\n","import {\r\n  append as svgAppend,\r\n  attr as svgAttr,\r\n  classes as svgClasses,\r\n  clone as svgClone,\r\n  create as svgCreate,\r\n} from 'tiny-svg';\r\n\r\nimport { query as domQuery } from 'min-dom';\r\n\r\nimport { getVisual } from '../../util/GraphicsUtil';\r\n\r\nimport Ids from '../../util/IdGenerator';\r\n\r\n/**\r\n * @typedef {import('../../core/Types').ElementLike} Element\r\n * @typedef {import('../../core/Types').ShapeLike} Shape\r\n *\r\n * @typedef {import('../../core/Canvas').default} Canvas\r\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\r\n * @typedef {import('../../core/EventBus').default} EventBus\r\n * @typedef {import('../../draw/Styles').default} Styles\r\n */\r\n\r\nconst cloneIds = new Ids('ps');\r\n\r\nvar MARKER_TYPES = [\r\n  'marker-start',\r\n  'marker-mid',\r\n  'marker-end'\r\n];\r\n\r\nvar NODES_CAN_HAVE_MARKER = [\r\n  'circle',\r\n  'ellipse',\r\n  'line',\r\n  'path',\r\n  'polygon',\r\n  'polyline',\r\n  'path',\r\n  'rect'\r\n];\r\n\r\n\r\n/**\r\n * Adds support for previews of moving/resizing elements.\r\n *\r\n * @param {ElementRegistry} elementRegistry\r\n * @param {EventBus} eventBus\r\n * @param {Canvas} canvas\r\n * @param {Styles} styles\r\n */\r\nexport default function PreviewSupport(elementRegistry, eventBus, canvas, styles) {\r\n  this._elementRegistry = elementRegistry;\r\n  this._canvas = canvas;\r\n  this._styles = styles;\r\n}\r\n\r\nPreviewSupport.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'canvas',\r\n  'styles'\r\n];\r\n\r\n// Markers are cleaned up with visuals, keep stub for compatibility\r\n// cf. https://github.com/camunda/camunda-modeler/issues/4307\r\nPreviewSupport.prototype.cleanUp = function() {\r\n  console.warn('PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906');\r\n};\r\n\r\n/**\r\n * Returns graphics of an element.\r\n *\r\n * @param {Element} element\r\n *\r\n * @return {SVGElement}\r\n */\r\nPreviewSupport.prototype.getGfx = function(element) {\r\n  return this._elementRegistry.getGraphics(element);\r\n};\r\n\r\n/**\r\n * Adds a move preview of a given shape to a given SVG group.\r\n *\r\n * @param {Element} element The element to be moved.\r\n * @param {SVGElement} group The SVG group to add the preview to.\r\n * @param {SVGElement} [gfx] The optional graphical element of the element.\r\n * @param {string} [className=\"djs-dragger\"] The optional class name to add to the preview.\r\n *\r\n * @return {SVGElement} The preview.\r\n */\r\nPreviewSupport.prototype.addDragger = function(element, group, gfx, className = 'djs-dragger') {\r\n  gfx = gfx || this.getGfx(element);\r\n\r\n  var dragger = svgClone(gfx);\r\n  var bbox = gfx.getBoundingClientRect();\r\n\r\n  this._cloneMarkers(getVisual(dragger), className);\r\n\r\n  svgAttr(dragger, this._styles.cls(className, [], {\r\n    x: bbox.top,\r\n    y: bbox.left\r\n  }));\r\n\r\n  svgAppend(group, dragger);\r\n\r\n  svgAttr(dragger, 'data-preview-support-element-id', element.id);\r\n\r\n  return dragger;\r\n};\r\n\r\n/**\r\n * Adds a resize preview of a given shape to a given SVG group.\r\n *\r\n * @param {Shape} shape The element to be resized.\r\n * @param {SVGElement} group The SVG group to add the preview to.\r\n *\r\n * @return {SVGElement} The preview.\r\n */\r\nPreviewSupport.prototype.addFrame = function(shape, group) {\r\n\r\n  var frame = svgCreate('rect', {\r\n    class: 'djs-resize-overlay',\r\n    width:  shape.width,\r\n    height: shape.height,\r\n    x: shape.x,\r\n    y: shape.y\r\n  });\r\n\r\n  svgAppend(group, frame);\r\n\r\n  svgAttr(frame, 'data-preview-support-element-id', shape.id);\r\n\r\n  return frame;\r\n};\r\n\r\n/**\r\n * Clone all markers referenced by a node and its child nodes.\r\n *\r\n * @param {SVGElement} gfx\r\n * @param {string} [className=\"djs-dragger\"]\r\n */\r\nPreviewSupport.prototype._cloneMarkers = function(gfx, className = 'djs-dragger', rootGfx = gfx) {\r\n  var self = this;\r\n\r\n  if (gfx.childNodes) {\r\n\r\n    // TODO: use forEach once we drop PhantomJS\r\n    for (var i = 0; i < gfx.childNodes.length; i++) {\r\n\r\n      // recursively clone markers of child nodes\r\n      self._cloneMarkers(gfx.childNodes[ i ], className, rootGfx);\r\n    }\r\n  }\r\n\r\n  if (!canHaveMarker(gfx)) {\r\n    return;\r\n  }\r\n\r\n  MARKER_TYPES.forEach(function(markerType) {\r\n    if (svgAttr(gfx, markerType)) {\r\n      var marker = getMarker(gfx, markerType, self._canvas.getContainer());\r\n\r\n      // Only clone marker if it is already present on the DOM\r\n      marker && self._cloneMarker(rootGfx, gfx, marker, markerType, className);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Clone marker referenced by an element.\r\n *\r\n * @param {SVGElement} gfx\r\n * @param {SVGElement} marker\r\n * @param {string} markerType\r\n * @param {string} [className=\"djs-dragger\"]\r\n */\r\nPreviewSupport.prototype._cloneMarker = function(parentGfx, gfx, marker, markerType, className = 'djs-dragger') {\r\n\r\n  // Add a random suffix to the marker ID in case the same marker is previewed multiple times\r\n  var clonedMarkerId = [ marker.id, className, cloneIds.next() ].join('-');\r\n\r\n  // reuse marker if it was part of original gfx\r\n  var copiedMarker = domQuery('marker#' + marker.id, parentGfx);\r\n\r\n  parentGfx = parentGfx || this._canvas._svg;\r\n\r\n  var clonedMarker = copiedMarker || svgClone(marker);\r\n\r\n  clonedMarker.id = clonedMarkerId;\r\n\r\n  svgClasses(clonedMarker).add(className);\r\n\r\n  var defs = domQuery(':scope > defs', parentGfx);\r\n\r\n  if (!defs) {\r\n    defs = svgCreate('defs');\r\n\r\n    svgAppend(parentGfx, defs);\r\n  }\r\n\r\n  svgAppend(defs, clonedMarker);\r\n\r\n  var reference = idToReference(clonedMarker.id);\r\n\r\n  svgAttr(gfx, markerType, reference);\r\n};\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Get marker of given type referenced by node.\r\n *\r\n * @param {HTMLElement} node\r\n * @param {string} markerType\r\n * @param {HTMLElement} [parentNode]\r\n *\r\n * @param {HTMLElement}\r\n */\r\nfunction getMarker(node, markerType, parentNode) {\r\n  var id = referenceToId(svgAttr(node, markerType));\r\n\r\n  return domQuery('marker#' + id, parentNode || document);\r\n}\r\n\r\n/**\r\n * Get ID of fragment within current document from its functional IRI reference.\r\n * References may use single or double quotes.\r\n *\r\n * @param {string} reference\r\n *\r\n * @return {string}\r\n */\r\nfunction referenceToId(reference) {\r\n  return reference.match(/url\\(['\"]?#([^'\"]*)['\"]?\\)/)[1];\r\n}\r\n\r\n/**\r\n * Get functional IRI reference for given ID of fragment within current document.\r\n *\r\n * @param {string} id\r\n *\r\n * @return {string}\r\n */\r\nfunction idToReference(id) {\r\n  return 'url(#' + id + ')';\r\n}\r\n\r\n/**\r\n * Check wether node type can have marker attributes.\r\n *\r\n * @param {HTMLElement} node\r\n *\r\n * @return {boolean}\r\n */\r\nfunction canHaveMarker(node) {\r\n  return NODES_CAN_HAVE_MARKER.indexOf(node.nodeName) !== -1;\r\n}","import PreviewSupport from './PreviewSupport';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'previewSupport' ],\n  previewSupport: [ 'type', PreviewSupport ]\n};\n","import {\n  clear as svgClear,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport { getVisual } from '../../util/GraphicsUtil';\n\nimport { isConnection } from '../../util/ModelUtil';\n\nimport { translate } from '../../util/SvgTransformUtil';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n * @typedef {import('../../util/Types').Point} Point\n * @typedef {import('../../util/Types').Rect} Rect\n *\n * @typedef { { element: Element, delta: Point } } MovedOption\n * @typedef { { shape: Shape, bounds: Rect } } ResizedOption\n *\n * @typedef { {\n *   created?: Element[],\n *   removed?: Element[],\n *   moved?: MovedOption[],\n *   resized?: ResizedOption[]\n * } } CreateOptions\n */\n\nconst LAYER_NAME = 'complex-preview';\n\n/**\n * Complex preview for shapes and connections.\n */\nexport default class ComplexPreview {\n  constructor(canvas, graphicsFactory, previewSupport) {\n    this._canvas = canvas;\n    this._graphicsFactory = graphicsFactory;\n    this._previewSupport = previewSupport;\n\n    this._markers = [];\n  }\n\n  /**\n   * Create complex preview.\n   *\n   * @param {CreateOptions} options\n   */\n  create(options) {\n\n    // there can only be one complex preview at a time\n    this.cleanUp();\n\n    const {\n      created = [],\n      moved = [],\n      removed = [],\n      resized = []\n    } = options;\n\n    const layer = this._canvas.getLayer(LAYER_NAME);\n\n    // shapes and connections to be created\n    created.filter(element => !isHidden(element)).forEach(element => {\n      let gfx;\n\n      if (isConnection(element)) {\n        gfx = this._graphicsFactory._createContainer('connection', svgCreate('g'));\n\n        this._graphicsFactory.drawConnection(getVisual(gfx), element);\n      } else {\n        gfx = this._graphicsFactory._createContainer('shape', svgCreate('g'));\n\n        this._graphicsFactory.drawShape(getVisual(gfx), element);\n\n        translate(gfx, element.x, element.y);\n      }\n\n      this._previewSupport.addDragger(element, layer, gfx);\n    });\n\n    // elements to be moved\n    moved.forEach(({ element, delta }) => {\n      this._previewSupport.addDragger(element, layer, undefined, 'djs-dragging');\n\n      this._canvas.addMarker(element, 'djs-element-hidden');\n\n      this._markers.push([ element, 'djs-element-hidden' ]);\n\n      const dragger = this._previewSupport.addDragger(element, layer);\n\n      if (isConnection(element)) {\n        translate(dragger, delta.x, delta.y);\n      } else {\n        translate(dragger, element.x + delta.x, element.y + delta.y);\n      }\n    });\n\n    // elements to be removed\n    removed.forEach(element => {\n      this._previewSupport.addDragger(element, layer, undefined, 'djs-dragging');\n\n      this._canvas.addMarker(element, 'djs-element-hidden');\n\n      this._markers.push([ element, 'djs-element-hidden' ]);\n    });\n\n    // elements to be resized\n    resized.forEach(({ shape, bounds }) => {\n      this._canvas.addMarker(shape, 'djs-hidden');\n\n      this._markers.push([ shape, 'djs-hidden' ]);\n\n      this._previewSupport.addDragger(shape, layer, undefined, 'djs-dragging');\n\n      const gfx = this._graphicsFactory._createContainer('shape', svgCreate('g'));\n\n      this._graphicsFactory.drawShape(getVisual(gfx), shape, {\n        width: bounds.width,\n        height: bounds.height\n      });\n\n      translate(gfx, bounds.x, bounds.y);\n\n      this._previewSupport.addDragger(shape, layer, gfx);\n    });\n  }\n\n  cleanUp() {\n    svgClear(this._canvas.getLayer(LAYER_NAME));\n\n    this._markers.forEach(([ element, marker ]) => this._canvas.removeMarker(element, marker));\n\n    this._markers = [];\n  }\n\n  show() {\n    this._canvas.showLayer(LAYER_NAME);\n  }\n\n  hide() {\n    this._canvas.hideLayer(LAYER_NAME);\n  }\n}\n\nComplexPreview.$inject = [\n  'canvas',\n  'graphicsFactory',\n  'previewSupport'\n];\n\nfunction isHidden(element) {\n  return element.hidden;\n}","import PreviewSupportModule from '../preview-support';\n\nimport ComplexPreview from './ComplexPreview';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [ PreviewSupportModule ],\n  __init__: [ 'complexPreview' ],\n  complexPreview: [ 'type', ComplexPreview ]\n};","import inherits from 'inherits-browser';\n\nimport {\n  getOrientation,\n  getMid,\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  substract\n} from 'diagram-js/lib/util/Math';\n\nimport {\n  hasExternalLabel\n} from '../../../util/LabelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n *\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').DirectionTRBL} DirectionTRBL\n */\n\nvar ALIGNMENTS = [\n  'top',\n  'bottom',\n  'left',\n  'right'\n];\n\nvar ELEMENT_LABEL_DISTANCE = 10;\n\n/**\n * A component that makes sure that external labels are added\n * together with respective elements and properly updated (DI wise)\n * during move.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function AdaptiveLabelPositioningBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this.postExecuted([\n    'connection.create',\n    'connection.layout',\n    'connection.updateWaypoints'\n  ], function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source,\n        target = connection.target,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior !== false) {\n      checkLabelAdjustment(source);\n      checkLabelAdjustment(target);\n    }\n  });\n\n\n  this.postExecuted([\n    'label.create'\n  ], function(event) {\n    var context = event.context,\n        shape = context.shape,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior !== false) {\n      checkLabelAdjustment(shape.labelTarget);\n    }\n  });\n\n\n  this.postExecuted([\n    'elements.create'\n  ], function(event) {\n    var context = event.context,\n        elements = context.elements,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior !== false) {\n      elements.forEach(function(element) {\n        checkLabelAdjustment(element);\n      });\n    }\n  });\n\n  function checkLabelAdjustment(element) {\n\n    // skip non-existing labels\n    if (!hasExternalLabel(element)) {\n      return;\n    }\n\n    var optimalPosition = getOptimalPosition(element);\n\n    // no optimal position found\n    if (!optimalPosition) {\n      return;\n    }\n\n    adjustLabelPosition(element, optimalPosition);\n  }\n\n  function adjustLabelPosition(element, orientation) {\n\n    var elementMid = getMid(element),\n        label = element.label,\n        labelMid = getMid(label);\n\n    // ignore labels that are being created\n    if (!label.parent) {\n      return;\n    }\n\n    var elementTrbl = asTRBL(element);\n\n    var newLabelMid;\n\n    switch (orientation) {\n    case 'top':\n      newLabelMid = {\n        x: elementMid.x,\n        y: elementTrbl.top - ELEMENT_LABEL_DISTANCE - label.height / 2\n      };\n\n      break;\n\n    case 'left':\n\n      newLabelMid = {\n        x: elementTrbl.left - ELEMENT_LABEL_DISTANCE - label.width / 2,\n        y: elementMid.y\n      };\n\n      break;\n\n    case 'bottom':\n\n      newLabelMid = {\n        x: elementMid.x,\n        y: elementTrbl.bottom + ELEMENT_LABEL_DISTANCE + label.height / 2\n      };\n\n      break;\n\n    case 'right':\n\n      newLabelMid = {\n        x: elementTrbl.right + ELEMENT_LABEL_DISTANCE + label.width / 2,\n        y: elementMid.y\n      };\n\n      break;\n    }\n\n    var delta = substract(newLabelMid, labelMid);\n\n    modeling.moveShape(label, delta);\n  }\n\n}\n\ninherits(AdaptiveLabelPositioningBehavior, CommandInterceptor);\n\nAdaptiveLabelPositioningBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\n/**\n * Return alignments which are taken by a boundary's host element\n *\n * @param {Shape} element\n *\n * @return {DirectionTRBL[]}\n */\nfunction getTakenHostAlignments(element) {\n\n  var hostElement = element.host,\n      elementMid = getMid(element),\n      hostOrientation = getOrientation(elementMid, hostElement);\n\n  var freeAlignments;\n\n  // check whether there is a multi-orientation, e.g. 'top-left'\n  if (hostOrientation.indexOf('-') >= 0) {\n    freeAlignments = hostOrientation.split('-');\n  } else {\n    freeAlignments = [ hostOrientation ];\n  }\n\n  var takenAlignments = ALIGNMENTS.filter(function(alignment) {\n\n    return freeAlignments.indexOf(alignment) === -1;\n  });\n\n  return takenAlignments;\n\n}\n\n/**\n * Return alignments which are taken by related connections\n *\n * @param {Element} element\n *\n * @return {DirectionTRBL[]}\n */\nfunction getTakenConnectionAlignments(element) {\n\n  var elementMid = getMid(element);\n\n  var takenAlignments = [].concat(\n    element.incoming.map(function(c) {\n      return c.waypoints[c.waypoints.length - 2 ];\n    }),\n    element.outgoing.map(function(c) {\n      return c.waypoints[1];\n    })\n  ).map(function(point) {\n    return getApproximateOrientation(elementMid, point);\n  });\n\n  return takenAlignments;\n}\n\n/**\n * Return the optimal label position around an element\n * or `undefined`, if none was found.\n *\n * @param  {Element} element\n *\n * @return {DirectionTRBL|undefined}\n */\nfunction getOptimalPosition(element) {\n\n  var labelMid = getMid(element.label);\n\n  var elementMid = getMid(element);\n\n  var labelOrientation = getApproximateOrientation(elementMid, labelMid);\n\n  if (!isAligned(labelOrientation)) {\n    return;\n  }\n\n  var takenAlignments = getTakenConnectionAlignments(element);\n\n  if (element.host) {\n    var takenHostAlignments = getTakenHostAlignments(element);\n\n    takenAlignments = takenAlignments.concat(takenHostAlignments);\n  }\n\n  var freeAlignments = ALIGNMENTS.filter(function(alignment) {\n\n    return takenAlignments.indexOf(alignment) === -1;\n  });\n\n  // NOTHING TO DO; label already aligned a.O.K.\n  if (freeAlignments.indexOf(labelOrientation) !== -1) {\n    return;\n  }\n\n  return freeAlignments[0];\n}\n\nfunction getApproximateOrientation(p0, p1) {\n  return getOrientation(p1, p0, 5);\n}\n\nfunction isAligned(orientation) {\n  return ALIGNMENTS.indexOf(orientation) !== -1;\n}\n","import inherits from 'inherits-browser';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\nexport default function AppendBehavior(eventBus) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  // assign correct shape position unless already set\n\n  this.preExecute('shape.append', function(context) {\n\n    var source = context.source,\n        shape = context.shape;\n\n    if (!context.position) {\n\n      if (is(shape, 'bpmn:TextAnnotation')) {\n        context.position = {\n          x: source.x + source.width / 2 + 75,\n          y: source.y - 50 - shape.height / 2\n        };\n      } else {\n        context.position = {\n          x: source.x + source.width + 80 + shape.width / 2,\n          y: source.y + source.height / 2\n        };\n      }\n    }\n  }, true);\n}\n\ninherits(AppendBehavior, CommandInterceptor);\n\nAppendBehavior.$inject = [\n  'eventBus'\n];","import inherits from 'inherits-browser';\r\n\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport {\r\n  filter,\r\n  forEach\r\n} from 'min-dash';\r\n\r\n/**\r\n * @typedef {import('didi').Injector} Injector\r\n * @typedef {import('../Modeling').default} Modeling\r\n */\r\n\r\n/**\r\n * @param {Injector} injector\r\n * @param {Modeling} modeling\r\n */\r\nexport default function AssociationBehavior(injector, modeling) {\r\n  injector.invoke(CommandInterceptor, this);\r\n\r\n  this.postExecute('shape.move', function(context) {\r\n    var newParent = context.newParent,\r\n        shape = context.shape;\r\n\r\n    var associations = filter(shape.incoming.concat(shape.outgoing), function(connection) {\r\n      return is(connection, 'bpmn:Association');\r\n    });\r\n\r\n    forEach(associations, function(association) {\r\n      modeling.moveConnection(association, { x: 0, y: 0 }, newParent);\r\n    });\r\n  }, true);\r\n}\r\n\r\ninherits(AssociationBehavior, CommandInterceptor);\r\n\r\nAssociationBehavior.$inject = [\r\n  'injector',\r\n  'modeling'\r\n];","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject } from '../../../util/ModelUtil';\n\nimport { isAny } from '../util/ModelingUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\n/**\n * @typedef {import('../../replace/BpmnReplace').default} BpmnReplace\n * @typedef {import('didi').Injector} Injector\n */\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * Replace intermediate event with boundary event when creating or moving results in attached event.\n *\n * @param {BpmnReplace} bpmnReplace\n * @param {Injector} injector\n */\nexport default function AttachEventBehavior(bpmnReplace, injector) {\n  injector.invoke(CommandInterceptor, this);\n\n  this._bpmnReplace = bpmnReplace;\n\n  var self = this;\n\n  this.postExecuted('elements.create', LOW_PRIORITY, function(context) {\n    var elements = context.elements;\n\n    elements = elements.filter(function(shape) {\n      var host = shape.host;\n\n      return shouldReplace(shape, host);\n    });\n\n    if (elements.length !== 1) {\n      return;\n    }\n\n    elements.map(function(element) {\n      return elements.indexOf(element);\n    }).forEach(function(index) {\n      var host = elements[ index ];\n\n      context.elements[ index ] = self._replaceShape(elements[ index ], host);\n    });\n  }, true);\n\n\n  this.preExecute('elements.move', LOW_PRIORITY, function(context) {\n    var shapes = context.shapes,\n        host = context.newHost;\n\n    if (shapes.length !== 1) {\n      return;\n    }\n\n    var shape = shapes[0];\n\n    if (shouldReplace(shape, host)) {\n      context.shapes = [ self._replaceShape(shape, host) ];\n    }\n  }, true);\n}\n\nAttachEventBehavior.$inject = [\n  'bpmnReplace',\n  'injector'\n];\n\ninherits(AttachEventBehavior, CommandInterceptor);\n\nAttachEventBehavior.prototype._replaceShape = function(shape, host) {\n  var eventDefinition = getEventDefinition(shape);\n\n  var boundaryEvent = {\n    type: 'bpmn:BoundaryEvent',\n    host: host\n  };\n\n  if (eventDefinition) {\n    boundaryEvent.eventDefinitionType = eventDefinition.$type;\n  }\n\n  return this._bpmnReplace.replaceElement(shape, boundaryEvent, { layoutConnection: false });\n};\n\n\n// helpers //////////\n\nfunction getEventDefinition(element) {\n  var businessObject = getBusinessObject(element),\n      eventDefinitions = businessObject.eventDefinitions;\n\n  return eventDefinitions && eventDefinitions[0];\n}\n\nfunction shouldReplace(shape, host) {\n  return !isLabel(shape) &&\n    isAny(shape, [ 'bpmn:IntermediateThrowEvent', 'bpmn:IntermediateCatchEvent' ]) && !!host;\n}\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport {\n  filter,\n  forEach\n} from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * BPMN specific boundary event behavior.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function BoundaryEventBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  function getBoundaryEvents(element) {\n    return filter(element.attachers, function(attacher) {\n      return is(attacher, 'bpmn:BoundaryEvent');\n    });\n  }\n\n  // remove after connecting to event-based gateway\n  this.postExecute('connection.create', function(event) {\n    var source = event.context.source,\n        target = event.context.target,\n        boundaryEvents = getBoundaryEvents(target);\n\n    if (\n      is(source, 'bpmn:EventBasedGateway') &&\n      is(target, 'bpmn:ReceiveTask') &&\n      boundaryEvents.length > 0\n    ) {\n      modeling.removeElements(boundaryEvents);\n    }\n\n  });\n\n  // remove after replacing connected gateway with event-based gateway\n  this.postExecute('connection.reconnect', function(event) {\n    var oldSource = event.context.oldSource,\n        newSource = event.context.newSource;\n\n    if (is(oldSource, 'bpmn:Gateway') &&\n        is(newSource, 'bpmn:EventBasedGateway')) {\n      forEach(newSource.outgoing, function(connection) {\n        var target = connection.target,\n            attachedboundaryEvents = getBoundaryEvents(target);\n\n        if (is(target, 'bpmn:ReceiveTask') &&\n            attachedboundaryEvents.length > 0) {\n          modeling.removeElements(attachedboundaryEvents);\n        }\n      });\n    }\n  });\n\n}\n\nBoundaryEventBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\ninherits(BoundaryEventBehavior, CommandInterceptor);","import inherits from 'inherits-browser';\n\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { hasEventDefinition, isEventSubProcess } from '../../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../lib/features/modeling/Modeling').default} Modeling\n */\n\n/**\n * Behavior ensuring that only a single compensation activity is connected to a\n * compensation boundary event when connecting, reconnecting or replacing shapes.\n *\n * @param {import('diagram-js/lib/core/EventBus').default} eventBus\n * @param {import('../Modeling').default} modeling\n * @param {import('../../rules/BpmnRules').default} bpmnRules\n */\nexport default function CompensateBoundaryEventBehavior(eventBus, modeling, bpmnRules) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this.preExecute('shape.replace', handleReplacement, true);\n  this.postExecuted('shape.replace', handleReplacementPostExecuted, true);\n  this.preExecute('connection.create', handleNewConnection, true);\n  this.postExecuted('connection.delete', handleConnectionRemoval, true);\n  this.postExecuted('connection.reconnect', handleReconnection, true);\n  this.postExecuted('element.updateProperties', handlePropertiesUpdate, true);\n\n  /**\n   * Given a connection from boundary event is removed, remove the `isForCompensation` property.\n   */\n  function handleConnectionRemoval(context) {\n    const source = context.source,\n          target = context.target;\n\n    if (isCompensationBoundaryEvent(source) && isForCompensation(target)) {\n      removeIsForCompensationProperty(target);\n    }\n  }\n\n  /**\n   * Add `isForCompensation` property and make sure only a single compensation activity is connected.\n   */\n  function handleNewConnection(context) {\n    const connection = context.connection,\n          source = context.source,\n          target = context.target;\n\n    if (isCompensationBoundaryEvent(source) && isForCompensationAllowed(target)) {\n      addIsForCompensationProperty(target);\n      removeExistingAssociations(source, [ connection ]);\n    }\n  }\n\n  function handleReconnection(context) {\n    const newTarget = context.newTarget,\n          oldSource = context.oldSource,\n          oldTarget = context.oldTarget;\n\n    // target changes\n    if (oldTarget !== newTarget) {\n      const source = oldSource;\n\n      // oldTarget perspective\n      if (isForCompensation(oldTarget)) {\n        removeIsForCompensationProperty(oldTarget);\n      }\n\n      // newTarget perspective\n      if (isCompensationBoundaryEvent(source) && isForCompensationAllowed(newTarget)) {\n        addIsForCompensationProperty(newTarget);\n      }\n    }\n  }\n\n  function handlePropertiesUpdate(context) {\n    const { element } = context;\n\n    if (isForCompensation(element)) {\n      removeDisallowedConnections(element);\n      removeAttachments(element);\n    } else if (isForCompensationAllowed(element)) {\n      removeIncomingCompensationAssociations(element);\n    }\n  }\n\n  /**\n   * When replacing a boundary event, make sure the compensation activity is connected,\n   * and remove the potential candidates for connection replacement to have a single compensation activity.\n   */\n  function handleReplacement(context) {\n    const {\n      newData,\n      oldShape\n    } = context;\n\n    // from compensate boundary event\n    if (isCompensationBoundaryEvent(context.oldShape) &&\n      newData.eventDefinitionType !== 'bpmn:CompensateEventDefinition' ||\n      newData.type !== 'bpmn:BoundaryEvent'\n    ) {\n      const targetConnection = oldShape.outgoing.find(\n        ({ target }) => isForCompensation(target)\n      );\n\n      if (targetConnection && targetConnection.target) {\n        context._connectionTarget = targetConnection.target;\n      }\n    }\n\n    // to compensate boundary event\n    else if (\n      !isCompensationBoundaryEvent(context.oldShape) &&\n      newData.eventDefinitionType === 'bpmn:CompensateEventDefinition' &&\n      newData.type === 'bpmn:BoundaryEvent'\n    ) {\n      const targetConnection = oldShape.outgoing.find(\n        ({ target }) => isForCompensationAllowed(target)\n      );\n\n      if (targetConnection && targetConnection.target) {\n        context._connectionTarget = targetConnection.target;\n      }\n\n      removeOutgoingSequenceFlows(oldShape);\n    }\n  }\n\n  function handleReplacementPostExecuted(context) {\n    const { _connectionTarget: target, newShape } = context;\n\n    if (target) {\n      modeling.connect(newShape, target);\n    }\n  }\n\n  function addIsForCompensationProperty(target) {\n    modeling.updateProperties(target, { isForCompensation: true });\n  }\n\n  function removeIsForCompensationProperty(target) {\n    modeling.updateProperties(target, { isForCompensation: undefined });\n  }\n\n  function removeDisallowedConnections(element) {\n\n    for (const connection of element.incoming) {\n      if (!bpmnRules.canConnect(connection.source, element)) {\n        modeling.removeConnection(connection);\n      }\n    }\n\n    for (const connection of element.outgoing) {\n      if (!bpmnRules.canConnect(element, connection.target)) {\n        modeling.removeConnection(connection);\n      }\n    }\n  }\n\n  function removeExistingAssociations(boundaryEvent, ignoredAssociations) {\n    const associations = boundaryEvent.outgoing.filter(connection => is(connection, 'bpmn:Association'));\n    const associationsToRemove = associations.filter(association => {\n      return isForCompensation(association.target) && !ignoredAssociations.includes(association);\n    });\n\n    // remove existing associations\n    associationsToRemove.forEach(association => modeling.removeConnection(association));\n  }\n\n  function removeAttachments(element) {\n    const attachments = element.attachers.slice();\n\n    if (!attachments.length) {\n      return;\n    }\n\n    modeling.removeElements(attachments);\n  }\n\n  function removeIncomingCompensationAssociations(element) {\n    const compensationAssociations = element.incoming.filter(\n      connection => isCompensationBoundaryEvent(connection.source)\n    );\n\n    modeling.removeElements(compensationAssociations);\n  }\n\n  function removeOutgoingSequenceFlows(element) {\n    const sequenceFlows = element.outgoing.filter(\n      connection => is(connection, 'bpmn:SequenceFlow')\n    );\n\n    modeling.removeElements(sequenceFlows);\n  }\n}\n\ninherits(CompensateBoundaryEventBehavior, CommandInterceptor);\n\nCompensateBoundaryEventBehavior.$inject = [\n  'eventBus',\n  'modeling',\n  'bpmnRules'\n];\n\n// helpers //////////\n\nfunction isForCompensation(element) {\n  const bo = getBusinessObject(element);\n  return bo && bo.get('isForCompensation');\n}\n\nfunction isCompensationBoundaryEvent(element) {\n  return element && is(element, 'bpmn:BoundaryEvent') &&\n    hasEventDefinition(element, 'bpmn:CompensateEventDefinition');\n}\n\nfunction isForCompensationAllowed(element) {\n  return element && is(element, 'bpmn:Activity') && !isEventSubProcess(element);\n}\n","import inherits from 'inherits-browser';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getParent } from '../util/ModelingUtil';\n\n/**\n * @typedef {import('didi').Injector} Injector\n */\n\n/**\n * @param {Injector} injector\n */\nexport default function CreateBehavior(injector) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.preExecute('shape.create', 1500, function(event) {\n    var context = event.context,\n        parent = context.parent,\n        shape = context.shape;\n\n    if (is(parent, 'bpmn:Lane') && !is(shape, 'bpmn:Lane')) {\n      context.parent = getParent(parent, 'bpmn:Participant');\n    }\n  });\n\n}\n\n\nCreateBehavior.$inject = [ 'injector' ];\n\ninherits(CreateBehavior, CommandInterceptor);","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../BpmnFactory').default} BpmnFactory\n */\n\n/**\n * BPMN specific create data object behavior.\n *\n * @param {EventBus} eventBus\n * @param {BpmnFactory} bpmnFactory\n */\nexport default function CreateDataObjectBehavior(eventBus, bpmnFactory) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this.preExecute('shape.create', function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:DataObjectReference') && shape.type !== 'label') {\n\n      // create a DataObject every time a DataObjectReference is created\n      var dataObject = bpmnFactory.create('bpmn:DataObject');\n\n      // set the reference to the DataObject\n      shape.businessObject.dataObjectRef = dataObject;\n    }\n  });\n\n}\n\nCreateDataObjectBehavior.$inject = [\n  'eventBus',\n  'bpmnFactory'\n];\n\ninherits(CreateDataObjectBehavior, CommandInterceptor);","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n\nimport {\n  assign,\n  find\n} from 'min-dash';\n\nimport { asTRBL } from 'diagram-js/lib/layout/LayoutUtil';\n\nimport { isConnection } from 'diagram-js/lib/util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\nvar HORIZONTAL_PARTICIPANT_PADDING = 20,\n    VERTICAL_PARTICIPANT_PADDING = 20;\n\nexport var PARTICIPANT_BORDER_WIDTH = 30;\n\nvar HIGH_PRIORITY = 2000;\n\n\n/**\n * BPMN-specific behavior for creating participants.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function CreateParticipantBehavior(canvas, eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  // fit participant\n  eventBus.on([\n    'create.start',\n    'shape.move.start'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement();\n\n    if (!is(shape, 'bpmn:Participant') ||\n      !is(rootElement, 'bpmn:Process') ||\n      !rootElement.children.length) {\n      return;\n    }\n\n    // ignore connections, groups and labels\n    var children = rootElement.children.filter(function(element) {\n      return !is(element, 'bpmn:Group') &&\n        !isLabel(element) &&\n        !isConnection(element);\n    });\n\n    // ensure for available children to calculate bounds\n    if (!children.length) {\n      return;\n    }\n\n    var childrenBBox = getBBox(children);\n\n    var participantBounds = getParticipantBounds(shape, childrenBBox);\n\n    // assign width and height\n    assign(shape, participantBounds);\n\n    // assign create constraints\n    context.createConstraints = getParticipantCreateConstraints(shape, childrenBBox);\n  });\n\n  // force hovering process when creating first participant\n  eventBus.on('create.start', HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement(),\n        rootElementGfx = canvas.getGraphics(rootElement);\n\n    function ensureHoveringProcess(event) {\n      event.element = rootElement;\n      event.gfx = rootElementGfx;\n    }\n\n    if (is(shape, 'bpmn:Participant') && is(rootElement, 'bpmn:Process')) {\n      eventBus.on('element.hover', HIGH_PRIORITY, ensureHoveringProcess);\n\n      eventBus.once('create.cleanup', function() {\n        eventBus.off('element.hover', ensureHoveringProcess);\n      });\n    }\n  });\n\n  // turn process into collaboration when creating first participant\n  function getOrCreateCollaboration() {\n    var rootElement = canvas.getRootElement();\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      return rootElement;\n    }\n\n    return modeling.makeCollaboration();\n  }\n\n  // when creating mutliple elements through `elements.create` parent must be set to collaboration\n  // and passed to `shape.create` as hint\n  this.preExecute('elements.create', HIGH_PRIORITY, function(context) {\n    var elements = context.elements,\n        parent = context.parent,\n        participant = findParticipant(elements),\n        hints;\n\n    if (participant && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n\n      hints = context.hints = context.hints || {};\n\n      hints.participant = participant;\n      hints.process = parent;\n      hints.processRef = getBusinessObject(participant).get('processRef');\n    }\n  }, true);\n\n  // when creating single shape through `shape.create` parent must be set to collaboration\n  // unless it was already set through `elements.create`\n  this.preExecute('shape.create', function(context) {\n    var parent = context.parent,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Participant') && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n\n      context.process = parent;\n      context.processRef = getBusinessObject(shape).get('processRef');\n    }\n  }, true);\n\n  // #execute necessary because #preExecute not called on CommandStack#redo\n  this.execute('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        shape = context.shape,\n        participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', getBusinessObject(process));\n    }\n  }, true);\n\n  this.revert('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        processRef = context.processRef || hints.processRef,\n        shape = context.shape,\n        participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', processRef);\n    }\n  }, true);\n\n  this.postExecute('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || context.hints.process,\n        shape = context.shape,\n        participant = hints.participant;\n\n    if (process) {\n      var children = process.children.slice();\n\n      // both shape.create and elements.create must be handled\n      if (!participant) {\n        modeling.moveElements(children, { x: 0, y: 0 }, shape);\n      } else if (shape === participant) {\n        modeling.moveElements(children, { x: 0, y: 0 }, participant);\n      }\n    }\n  }, true);\n}\n\nCreateParticipantBehavior.$inject = [\n  'canvas',\n  'eventBus',\n  'modeling'\n];\n\ninherits(CreateParticipantBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getParticipantBounds(shape, childrenBBox) {\n  childrenBBox = {\n    width: childrenBBox.width + HORIZONTAL_PARTICIPANT_PADDING * 2 + PARTICIPANT_BORDER_WIDTH,\n    height: childrenBBox.height + VERTICAL_PARTICIPANT_PADDING * 2\n  };\n\n  var width = Math.max(shape.width, childrenBBox.width),\n      height = Math.max(shape.height, childrenBBox.height);\n\n  return {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  };\n}\n\nfunction getParticipantCreateConstraints(shape, childrenBBox) {\n  childrenBBox = asTRBL(childrenBBox);\n\n  return {\n    bottom: childrenBBox.top + shape.height / 2 - VERTICAL_PARTICIPANT_PADDING,\n    left: childrenBBox.right - shape.width / 2 + HORIZONTAL_PARTICIPANT_PADDING,\n    top: childrenBBox.bottom - shape.height / 2 + VERTICAL_PARTICIPANT_PADDING,\n    right: childrenBBox.left + shape.width / 2 - HORIZONTAL_PARTICIPANT_PADDING - PARTICIPANT_BORDER_WIDTH\n  };\n}\n\nfunction findParticipant(elements) {\n  return find(elements, function(element) {\n    return is(element, 'bpmn:Participant');\n  });\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  find\n} from 'min-dash';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../BpmnFactory').default} BpmnFactory\n */\n\nvar TARGET_REF_PLACEHOLDER_NAME = '__targetRef_placeholder';\n\n\n/**\n * This behavior makes sure we always set a fake\n * DataInputAssociation#targetRef as demanded by the BPMN 2.0\n * XSD schema.\n *\n * The reference is set to a bpmn:Property{ name: '__targetRef_placeholder' }\n * which is created on the fly and cleaned up afterwards if not needed\n * anymore.\n *\n * @param {EventBus} eventBus\n * @param {BpmnFactory} bpmnFactory\n */\nexport default function DataInputAssociationBehavior(eventBus, bpmnFactory) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  this.executed([\n    'connection.create',\n    'connection.delete',\n    'connection.move',\n    'connection.reconnect'\n  ], ifDataInputAssociation(fixTargetRef));\n\n  this.reverted([\n    'connection.create',\n    'connection.delete',\n    'connection.move',\n    'connection.reconnect'\n  ], ifDataInputAssociation(fixTargetRef));\n\n\n  function usesTargetRef(element, targetRef, removedConnection) {\n\n    var inputAssociations = element.get('dataInputAssociations');\n\n    return find(inputAssociations, function(association) {\n      return association !== removedConnection &&\n             association.targetRef === targetRef;\n    });\n  }\n\n  function getTargetRef(element, create) {\n\n    var properties = element.get('properties');\n\n    var targetRefProp = find(properties, function(p) {\n      return p.name === TARGET_REF_PLACEHOLDER_NAME;\n    });\n\n    if (!targetRefProp && create) {\n      targetRefProp = bpmnFactory.create('bpmn:Property', {\n        name: TARGET_REF_PLACEHOLDER_NAME\n      });\n\n      collectionAdd(properties, targetRefProp);\n    }\n\n    return targetRefProp;\n  }\n\n  function cleanupTargetRef(element, connection) {\n\n    var targetRefProp = getTargetRef(element);\n\n    if (!targetRefProp) {\n      return;\n    }\n\n    if (!usesTargetRef(element, targetRefProp, connection)) {\n      collectionRemove(element.get('properties'), targetRefProp);\n    }\n  }\n\n  /**\n   * Make sure targetRef is set to a valid property or\n   * `null` if the connection is detached.\n   *\n   * @param {Event} event\n   */\n  function fixTargetRef(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        connectionBo = connection.businessObject,\n        target = connection.target,\n        targetBo = target && target.businessObject,\n        newTarget = context.newTarget,\n        newTargetBo = newTarget && newTarget.businessObject,\n        oldTarget = context.oldTarget || context.target,\n        oldTargetBo = oldTarget && oldTarget.businessObject;\n\n    var dataAssociation = connection.businessObject,\n        targetRefProp;\n\n    if (oldTargetBo && oldTargetBo !== targetBo) {\n      cleanupTargetRef(oldTargetBo, connectionBo);\n    }\n\n    if (newTargetBo && newTargetBo !== targetBo) {\n      cleanupTargetRef(newTargetBo, connectionBo);\n    }\n\n    if (targetBo) {\n      targetRefProp = getTargetRef(targetBo, true);\n      dataAssociation.targetRef = targetRefProp;\n    } else {\n      dataAssociation.targetRef = null;\n    }\n  }\n}\n\nDataInputAssociationBehavior.$inject = [\n  'eventBus',\n  'bpmnFactory'\n];\n\ninherits(DataInputAssociationBehavior, CommandInterceptor);\n\n\n/**\n * Only call the given function when the event\n * changes a bpmn:DataInputAssociation.\n *\n * @param {Function} fn\n * @return {Function}\n */\nfunction ifDataInputAssociation(fn) {\n\n  return function(event) {\n    var context = event.context,\n        connection = context.connection;\n\n    if (is(connection, 'bpmn:DataInputAssociation')) {\n      return fn(event);\n    }\n  };\n}","/**\r\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\r\n *\r\n * @typedef {import('../BpmnUpdater').default} BpmnUpdater\r\n */\r\n\r\n/**\r\n * @implements {CommandHandler}\r\n *\r\n * @param {BpmnUpdater} bpmnUpdater\r\n */\r\nexport default function UpdateSemanticParentHandler(bpmnUpdater) {\r\n  this._bpmnUpdater = bpmnUpdater;\r\n}\r\n\r\nUpdateSemanticParentHandler.$inject = [ 'bpmnUpdater' ];\r\n\r\n\r\nUpdateSemanticParentHandler.prototype.execute = function(context) {\r\n  var dataStoreBo = context.dataStoreBo,\r\n      dataStoreDi = context.dataStoreDi,\r\n      newSemanticParent = context.newSemanticParent,\r\n      newDiParent = context.newDiParent;\r\n\r\n  context.oldSemanticParent = dataStoreBo.$parent;\r\n  context.oldDiParent = dataStoreDi.$parent;\r\n\r\n  // update semantic parent\r\n  this._bpmnUpdater.updateSemanticParent(dataStoreBo, newSemanticParent);\r\n\r\n  // update DI parent\r\n  this._bpmnUpdater.updateDiParent(dataStoreDi, newDiParent);\r\n\r\n  return [];\r\n};\r\n\r\nUpdateSemanticParentHandler.prototype.revert = function(context) {\r\n  var dataStoreBo = context.dataStoreBo,\r\n      dataStoreDi = context.dataStoreDi,\r\n      oldSemanticParent = context.oldSemanticParent,\r\n      oldDiParent = context.oldDiParent;\r\n\r\n  // update semantic parent\r\n  this._bpmnUpdater.updateSemanticParent(dataStoreBo, oldSemanticParent);\r\n\r\n  // update DI parent\r\n  this._bpmnUpdater.updateDiParent(dataStoreDi, oldDiParent);\r\n\r\n  return [];\r\n};\r\n\r\n","import inherits from 'inherits-browser';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport {\r\n  getBusinessObject,\r\n  getDi,\r\n  is\r\n} from '../../../util/ModelUtil';\r\n\r\nimport { isAny } from '../util/ModelingUtil';\r\n\r\nimport UpdateSemanticParentHandler from '../cmd/UpdateSemanticParentHandler';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\r\n * @typedef {import('diagram-js/lib/command/CommandStack').default} CommandStack\r\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n */\r\n\r\n/**\r\n * BPMN specific data store behavior.\r\n *\r\n * @param {Canvas} canvas\r\n * @param {CommandStack} commandStack\r\n * @param {ElementRegistry} elementRegistry\r\n * @param {EventBus} eventBus\r\n */\r\nexport default function DataStoreBehavior(\r\n    canvas, commandStack, elementRegistry,\r\n    eventBus) {\r\n\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n  commandStack.registerHandler('dataStore.updateContainment', UpdateSemanticParentHandler);\r\n\r\n  function getFirstParticipantWithProcessRef() {\r\n    return elementRegistry.filter(function(element) {\r\n      return is(element, 'bpmn:Participant') && getBusinessObject(element).processRef;\r\n    })[0];\r\n  }\r\n\r\n  function getDataStores(element) {\r\n    return element.children.filter(function(child) {\r\n      return is(child, 'bpmn:DataStoreReference') && !child.labelTarget;\r\n    });\r\n  }\r\n\r\n  function updateDataStoreParent(dataStore, newDataStoreParent) {\r\n    var dataStoreBo = dataStore.businessObject || dataStore;\r\n\r\n    newDataStoreParent = newDataStoreParent || getFirstParticipantWithProcessRef();\r\n\r\n    if (newDataStoreParent) {\r\n      var newDataStoreParentBo = newDataStoreParent.businessObject || newDataStoreParent;\r\n\r\n      commandStack.execute('dataStore.updateContainment', {\r\n        dataStoreBo: dataStoreBo,\r\n        dataStoreDi: getDi(dataStore),\r\n        newSemanticParent: newDataStoreParentBo.processRef || newDataStoreParentBo,\r\n        newDiParent: getDi(newDataStoreParent)\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  // disable auto-resize for data stores\r\n  this.preExecute('shape.create', function(event) {\r\n\r\n    var context = event.context,\r\n        shape = context.shape;\r\n\r\n    if (is(shape, 'bpmn:DataStoreReference') &&\r\n        shape.type !== 'label') {\r\n\r\n      if (!context.hints) {\r\n        context.hints = {};\r\n      }\r\n\r\n      // prevent auto resizing\r\n      context.hints.autoResize = false;\r\n    }\r\n  });\r\n\r\n\r\n  // disable auto-resize for data stores\r\n  this.preExecute('elements.move', function(event) {\r\n    var context = event.context,\r\n        shapes = context.shapes;\r\n\r\n    var dataStoreReferences = shapes.filter(function(shape) {\r\n      return is(shape, 'bpmn:DataStoreReference');\r\n    });\r\n\r\n    if (dataStoreReferences.length) {\r\n      if (!context.hints) {\r\n        context.hints = {};\r\n      }\r\n\r\n      // prevent auto resizing for data store references\r\n      context.hints.autoResize = shapes.filter(function(shape) {\r\n        return !is(shape, 'bpmn:DataStoreReference');\r\n      });\r\n    }\r\n  });\r\n\r\n\r\n  // update parent on data store created\r\n  this.postExecute('shape.create', function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        parent = shape.parent;\r\n\r\n\r\n    if (is(shape, 'bpmn:DataStoreReference') &&\r\n        shape.type !== 'label' &&\r\n        is(parent, 'bpmn:Collaboration')) {\r\n\r\n      updateDataStoreParent(shape);\r\n    }\r\n  });\r\n\r\n\r\n  // update parent on data store moved\r\n  this.postExecute('shape.move', function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        oldParent = context.oldParent,\r\n        parent = shape.parent;\r\n\r\n    if (is(oldParent, 'bpmn:Collaboration')) {\r\n\r\n      // do nothing if not necessary\r\n      return;\r\n    }\r\n\r\n    if (is(shape, 'bpmn:DataStoreReference') &&\r\n        shape.type !== 'label' &&\r\n        is(parent, 'bpmn:Collaboration')) {\r\n\r\n      var participant = is(oldParent, 'bpmn:Participant') ?\r\n        oldParent :\r\n        getAncestor(oldParent, 'bpmn:Participant');\r\n\r\n      updateDataStoreParent(shape, participant);\r\n    }\r\n  });\r\n\r\n\r\n  // update data store parents on participant or subprocess deleted\r\n  this.postExecute('shape.delete', function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        rootElement = canvas.getRootElement();\r\n\r\n    if (isAny(shape, [ 'bpmn:Participant', 'bpmn:SubProcess' ])\r\n        && is(rootElement, 'bpmn:Collaboration')) {\r\n      getDataStores(rootElement)\r\n        .filter(function(dataStore) {\r\n          return isDescendant(dataStore, shape);\r\n        })\r\n        .forEach(function(dataStore) {\r\n          updateDataStoreParent(dataStore);\r\n        });\r\n    }\r\n  });\r\n\r\n  // update data store parents on collaboration -> process\r\n  this.postExecute('canvas.updateRoot', function(event) {\r\n    var context = event.context,\r\n        oldRoot = context.oldRoot,\r\n        newRoot = context.newRoot;\r\n\r\n    var dataStores = getDataStores(oldRoot);\r\n\r\n    dataStores.forEach(function(dataStore) {\r\n\r\n      if (is(newRoot, 'bpmn:Process')) {\r\n        updateDataStoreParent(dataStore, newRoot);\r\n      }\r\n\r\n    });\r\n  });\r\n}\r\n\r\nDataStoreBehavior.$inject = [\r\n  'canvas',\r\n  'commandStack',\r\n  'elementRegistry',\r\n  'eventBus',\r\n];\r\n\r\ninherits(DataStoreBehavior, CommandInterceptor);\r\n\r\n\r\n// helpers //////////\r\n\r\nfunction isDescendant(descendant, ancestor) {\r\n  var descendantBo = descendant.businessObject || descendant,\r\n      ancestorBo = ancestor.businessObject || ancestor;\r\n\r\n  while (descendantBo.$parent) {\r\n    if (descendantBo.$parent === ancestorBo.processRef || ancestorBo) {\r\n      return true;\r\n    }\r\n\r\n    descendantBo = descendantBo.$parent;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction getAncestor(element, type) {\r\n\r\n  while (element.parent) {\r\n    if (is(element.parent, type)) {\r\n      return element.parent;\r\n    }\r\n\r\n    element = element.parent;\r\n  }\r\n}","import {\n  filter,\n  isNumber\n} from 'min-dash';\n\nvar max = Math.max,\n    min = Math.min;\n\nvar DEFAULT_CHILD_BOX_PADDING = 20;\n\nimport {\n  getBBox\n} from '../../util/Elements';\n\nimport {\n  asTRBL,\n  asBounds\n} from '../../layout/LayoutUtil';\n\n/**\n * @typedef {import('../../core/Types').ElementLike} Element\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../util/Types').Direction} Direction\n * @typedef {import('../../util/Types').Point} Point\n * @typedef {import('../../util/Types').Rect} Rect\n * @typedef {import('../../util/Types').RectTRBL} RectTRBL\n */\n\n/**\n * Substract a TRBL from another\n *\n * @param {RectTRBL} trblA\n * @param {RectTRBL} trblB\n *\n * @return {RectTRBL}\n */\nexport function substractTRBL(trblA, trblB) {\n  return {\n    top: trblA.top - trblB.top,\n    right: trblA.right - trblB.right,\n    bottom: trblA.bottom - trblB.bottom,\n    left: trblA.left - trblB.left\n  };\n}\n\n/**\n * Resize the given bounds by the specified delta from a given anchor point.\n *\n * @param {Rect} bounds the bounding box that should be resized\n * @param {Direction} direction in which the element is resized (nw, ne, se, sw)\n * @param {Point} delta of the resize operation\n *\n * @return {Rect} resized bounding box\n */\nexport function resizeBounds(bounds, direction, delta) {\n  var dx = delta.x,\n      dy = delta.y;\n\n  var newBounds = {\n    x: bounds.x,\n    y: bounds.y,\n    width: bounds.width,\n    height: bounds.height\n  };\n\n  if (direction.indexOf('n') !== -1) {\n    newBounds.y = bounds.y + dy;\n    newBounds.height = bounds.height - dy;\n  } else if (direction.indexOf('s') !== -1) {\n    newBounds.height = bounds.height + dy;\n  }\n\n  if (direction.indexOf('e') !== -1) {\n    newBounds.width = bounds.width + dx;\n  } else if (direction.indexOf('w') !== -1) {\n    newBounds.x = bounds.x + dx;\n    newBounds.width = bounds.width - dx;\n  }\n\n  return newBounds;\n}\n\n\n/**\n * Resize the given bounds by applying the passed\n * { top, right, bottom, left } delta.\n *\n * @param {Rect} bounds\n * @param {RectTRBL} resize\n *\n * @return {Rect}\n */\nexport function resizeTRBL(bounds, resize) {\n  return {\n    x: bounds.x + (resize.left || 0),\n    y: bounds.y + (resize.top || 0),\n    width: bounds.width - (resize.left || 0) + (resize.right || 0),\n    height: bounds.height - (resize.top || 0) + (resize.bottom || 0)\n  };\n}\n\n\nexport function reattachPoint(bounds, newBounds, point) {\n\n  var sx = bounds.width / newBounds.width,\n      sy = bounds.height / newBounds.height;\n\n  return {\n    x: Math.round((newBounds.x + newBounds.width / 2)) - Math.floor(((bounds.x + bounds.width / 2) - point.x) / sx),\n    y: Math.round((newBounds.y + newBounds.height / 2)) - Math.floor(((bounds.y + bounds.height / 2) - point.y) / sy)\n  };\n}\n\n\nfunction applyConstraints(attr, trbl, resizeConstraints) {\n\n  var value = trbl[attr],\n      minValue = resizeConstraints.min && resizeConstraints.min[attr],\n      maxValue = resizeConstraints.max && resizeConstraints.max[attr];\n\n  if (isNumber(minValue)) {\n    value = (/top|left/.test(attr) ? min : max)(value, minValue);\n  }\n\n  if (isNumber(maxValue)) {\n    value = (/top|left/.test(attr) ? max : min)(value, maxValue);\n  }\n\n  return value;\n}\n\nexport function ensureConstraints(currentBounds, resizeConstraints) {\n\n  if (!resizeConstraints) {\n    return currentBounds;\n  }\n\n  var currentTrbl = asTRBL(currentBounds);\n\n  return asBounds({\n    top: applyConstraints('top', currentTrbl, resizeConstraints),\n    right: applyConstraints('right', currentTrbl, resizeConstraints),\n    bottom: applyConstraints('bottom', currentTrbl, resizeConstraints),\n    left: applyConstraints('left', currentTrbl, resizeConstraints)\n  });\n}\n\n\nexport function getMinResizeBounds(direction, currentBounds, minDimensions, childrenBounds) {\n\n  var currentBox = asTRBL(currentBounds);\n\n  var minBox = {\n    top: /n/.test(direction) ? currentBox.bottom - minDimensions.height : currentBox.top,\n    left: /w/.test(direction) ? currentBox.right - minDimensions.width : currentBox.left,\n    bottom: /s/.test(direction) ? currentBox.top + minDimensions.height : currentBox.bottom,\n    right: /e/.test(direction) ? currentBox.left + minDimensions.width : currentBox.right\n  };\n\n  var childrenBox = childrenBounds ? asTRBL(childrenBounds) : minBox;\n\n  var combinedBox = {\n    top: min(minBox.top, childrenBox.top),\n    left: min(minBox.left, childrenBox.left),\n    bottom: max(minBox.bottom, childrenBox.bottom),\n    right: max(minBox.right, childrenBox.right)\n  };\n\n  return asBounds(combinedBox);\n}\n\nfunction asPadding(mayBePadding, defaultValue) {\n  if (typeof mayBePadding !== 'undefined') {\n    return mayBePadding;\n  } else {\n    return DEFAULT_CHILD_BOX_PADDING;\n  }\n}\n\nexport function addPadding(bbox, padding) {\n  var left, right, top, bottom;\n\n  if (typeof padding === 'object') {\n    left = asPadding(padding.left);\n    right = asPadding(padding.right);\n    top = asPadding(padding.top);\n    bottom = asPadding(padding.bottom);\n  } else {\n    left = right = top = bottom = asPadding(padding);\n  }\n\n  return {\n    x: bbox.x - left,\n    y: bbox.y - top,\n    width: bbox.width + left + right,\n    height: bbox.height + top + bottom\n  };\n}\n\n\n/**\n * Is the given element part of the resize\n * targets min boundary box?\n *\n * This is the default implementation which excludes\n * connections and labels.\n *\n * @param {Element} element\n */\nfunction isBBoxChild(element) {\n\n  // exclude connections\n  if (element.waypoints) {\n    return false;\n  }\n\n  // exclude labels\n  if (element.type === 'label') {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Return children bounding computed from a shapes children\n * or a list of prefiltered children.\n *\n * @param {Shape|Shape[]} shapeOrChildren\n * @param {RectTRBL|number} padding\n *\n * @return {Rect}\n */\nexport function computeChildrenBBox(shapeOrChildren, padding) {\n\n  var elements;\n\n  // compute based on shape\n  if (shapeOrChildren.length === undefined) {\n\n    // grab all the children that are part of the\n    // parents children box\n    elements = filter(shapeOrChildren.children, isBBoxChild);\n\n  } else {\n    elements = shapeOrChildren;\n  }\n\n  if (elements.length) {\n    return addPadding(getBBox(elements), padding);\n  }\n}\n","import { is } from '../../../util/ModelUtil';\n\nimport {\n  getParent\n} from './ModelingUtil';\n\nimport {\n  isHorizontal\n} from '../../../util/DiUtil';\n\nimport {\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  substractTRBL,\n  resizeTRBL\n} from 'diagram-js/lib/features/resize/ResizeUtil';\n\n/**\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n */\n\nvar abs = Math.abs;\n\n\nfunction getTRBLResize(oldBounds, newBounds) {\n  return substractTRBL(asTRBL(newBounds), asTRBL(oldBounds));\n}\n\n\nvar LANE_PARENTS = [\n  'bpmn:Participant',\n  'bpmn:Process',\n  'bpmn:SubProcess'\n];\n\nexport var LANE_INDENTATION = 30;\n\n\n/**\n * Return all lanes that are children of the given shape.\n *\n * @param  {Shape} shape\n * @param  {Shape[]} [collectedShapes]\n *\n * @return {Shape[]}\n */\nexport function collectLanes(shape, collectedShapes) {\n\n  collectedShapes = collectedShapes || [];\n\n  shape.children.filter(function(s) {\n    if (is(s, 'bpmn:Lane')) {\n      collectLanes(s, collectedShapes);\n\n      collectedShapes.push(s);\n    }\n  });\n\n  return collectedShapes;\n}\n\n\n/**\n * Return all lanes that are direct children of the given shape.\n *\n * @param {Shape} shape\n *\n * @return {Shape[]}\n */\nexport function getChildLanes(shape) {\n  return shape.children.filter(function(c) {\n    return is(c, 'bpmn:Lane');\n  });\n}\n\n\n/**\n * Return the parent shape of the given lane.\n *\n * @param {Shape} shape\n *\n * @return {Shape}\n */\nexport function getLanesRoot(shape) {\n  return getParent(shape, LANE_PARENTS) || shape;\n}\n\n\n/**\n * Compute the required resize operations for lanes\n * adjacent to the given shape, assuming it will be\n * resized to the given new bounds.\n *\n * @param {Shape} shape\n * @param {Rect} newBounds\n *\n * @return { {\n *   shape: Shape;\n *   newBounds: Rect;\n * }[] }\n */\nexport function computeLanesResize(shape, newBounds) {\n\n  var rootElement = getLanesRoot(shape);\n\n  var initialShapes = is(rootElement, 'bpmn:Process') ? [] : [ rootElement ];\n\n  var allLanes = collectLanes(rootElement, initialShapes),\n      shapeTrbl = asTRBL(shape),\n      shapeNewTrbl = asTRBL(newBounds),\n      trblResize = getTRBLResize(shape, newBounds),\n      resizeNeeded = [];\n\n  var isHorizontalLane = isHorizontal(shape);\n\n  allLanes.forEach(function(other) {\n\n    if (other === shape) {\n      return;\n    }\n\n    var topResize = isHorizontalLane ? 0 : trblResize.top,\n        rightResize = isHorizontalLane ? trblResize.right : 0,\n        bottomResize = isHorizontalLane ? 0 : trblResize.bottom,\n        leftResize = isHorizontalLane ? trblResize.left : 0;\n\n    var otherTrbl = asTRBL(other);\n\n    if (trblResize.top) {\n      if (abs(otherTrbl.bottom - shapeTrbl.top) < 10) {\n        bottomResize = shapeNewTrbl.top - otherTrbl.bottom;\n      }\n\n      if (abs(otherTrbl.top - shapeTrbl.top) < 5) {\n        topResize = shapeNewTrbl.top - otherTrbl.top;\n      }\n    }\n\n    if (trblResize.left) {\n      if (abs(otherTrbl.right - shapeTrbl.left) < 10) {\n        rightResize = shapeNewTrbl.left - otherTrbl.right;\n      }\n\n      if (abs(otherTrbl.left - shapeTrbl.left) < 5) {\n        leftResize = shapeNewTrbl.left - otherTrbl.left;\n      }\n    }\n\n    if (trblResize.bottom) {\n      if (abs(otherTrbl.top - shapeTrbl.bottom) < 10) {\n        topResize = shapeNewTrbl.bottom - otherTrbl.top;\n      }\n\n      if (abs(otherTrbl.bottom - shapeTrbl.bottom) < 5) {\n        bottomResize = shapeNewTrbl.bottom - otherTrbl.bottom;\n      }\n    }\n\n    if (trblResize.right) {\n      if (abs(otherTrbl.left - shapeTrbl.right) < 10) {\n        leftResize = shapeNewTrbl.right - otherTrbl.left;\n      }\n\n      if (abs(otherTrbl.right - shapeTrbl.right) < 5) {\n        rightResize = shapeNewTrbl.right - otherTrbl.right;\n      }\n    }\n\n    if (topResize || rightResize || bottomResize || leftResize) {\n\n      resizeNeeded.push({\n        shape: other,\n        newBounds: resizeTRBL(other, {\n          top: topResize,\n          right: rightResize,\n          bottom: bottomResize,\n          left: leftResize\n        })\n      });\n    }\n\n  });\n\n  return resizeNeeded;\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport {\n  getChildLanes\n} from '../util/LaneUtil';\n\nimport {\n  isHorizontal\n} from '../../../util/DiUtil';\n\nimport {\n  eachElement\n} from 'diagram-js/lib/util/Elements';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../../space-tool/BpmnSpaceTool').default} SpaceTool\n */\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * BPMN specific delete lane behavior.\n *\n * @param {EventBus} eventBus\n * @param {SpaceTool} spaceTool\n */\nexport default function DeleteLaneBehavior(eventBus, spaceTool) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  function compensateLaneDelete(shape, oldParent) {\n    var isHorizontalLane = isHorizontal(shape);\n\n    var siblings = getChildLanes(oldParent);\n\n    var topAffected = [];\n    var bottomAffected = [];\n    var leftAffected = [];\n    var rightAffected = [];\n\n    eachElement(siblings, function(element) {\n\n      if (isHorizontalLane) {\n        if (element.y > shape.y) {\n          bottomAffected.push(element);\n        } else {\n          topAffected.push(element);\n        }\n      } else {\n        if (element.x > shape.x) {\n          rightAffected.push(element);\n        } else {\n          leftAffected.push(element);\n        }\n      }\n\n      return element.children;\n    });\n\n    if (!siblings.length) {\n      return;\n    }\n\n    var offset;\n\n    if (isHorizontalLane) {\n      if (bottomAffected.length && topAffected.length) {\n        offset = shape.height / 2;\n      } else {\n        offset = shape.height;\n      }\n    } else {\n      if (rightAffected.length && leftAffected.length) {\n        offset = shape.width / 2;\n      } else {\n        offset = shape.width;\n      }\n    }\n\n    var topAdjustments,\n        bottomAdjustments,\n        leftAdjustments,\n        rightAdjustments;\n\n    if (topAffected.length) {\n      topAdjustments = spaceTool.calculateAdjustments(\n        topAffected, 'y', offset, shape.y - 10);\n\n      spaceTool.makeSpace(\n        topAdjustments.movingShapes,\n        topAdjustments.resizingShapes,\n        { x: 0, y: offset }, 's');\n    }\n\n    if (bottomAffected.length) {\n      bottomAdjustments = spaceTool.calculateAdjustments(\n        bottomAffected, 'y', -offset, shape.y + shape.height + 10);\n\n      spaceTool.makeSpace(\n        bottomAdjustments.movingShapes,\n        bottomAdjustments.resizingShapes,\n        { x: 0, y: -offset }, 'n');\n    }\n\n    if (leftAffected.length) {\n      leftAdjustments = spaceTool.calculateAdjustments(\n        leftAffected, 'x', offset, shape.x - 10);\n\n      spaceTool.makeSpace(\n        leftAdjustments.movingShapes,\n        leftAdjustments.resizingShapes,\n        { x: offset, y: 0 }, 'e');\n    }\n\n    if (rightAffected.length) {\n      rightAdjustments = spaceTool.calculateAdjustments(\n        rightAffected, 'x', -offset, shape.x + shape.width + 10);\n\n      spaceTool.makeSpace(\n        rightAdjustments.movingShapes,\n        rightAdjustments.resizingShapes,\n        { x: -offset, y: 0 }, 'w');\n    }\n  }\n\n\n  /**\n   * Adjust sizes of other lanes after lane deletion\n   */\n  this.postExecuted('shape.delete', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        hints = context.hints,\n        shape = context.shape,\n        oldParent = context.oldParent;\n\n    // only compensate lane deletes\n    if (!is(shape, 'bpmn:Lane')) {\n      return;\n    }\n\n    // compensate root deletes only\n    if (hints && hints.nested) {\n      return;\n    }\n\n    compensateLaneDelete(shape, oldParent);\n  });\n}\n\nDeleteLaneBehavior.$inject = [\n  'eventBus',\n  'spaceTool'\n];\n\ninherits(DeleteLaneBehavior, CommandInterceptor);","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\n/**\n * @typedef {import('../../replace/BpmnReplace').default} BpmnReplace\n * @typedef {import('didi').Injector} Injector\n */\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * Replace boundary event with intermediate event when creating or moving results in detached event.\n *\n * @param {BpmnReplace} bpmnReplace\n * @param {Injector} injector\n */\nexport default function DetachEventBehavior(bpmnReplace, injector) {\n  injector.invoke(CommandInterceptor, this);\n\n  this._bpmnReplace = bpmnReplace;\n\n  var self = this;\n\n  this.postExecuted('elements.create', LOW_PRIORITY, function(context) {\n    var elements = context.elements;\n\n    elements.filter(function(shape) {\n      var host = shape.host;\n\n      return shouldReplace(shape, host);\n    }).map(function(shape) {\n      return elements.indexOf(shape);\n    }).forEach(function(index) {\n      context.elements[ index ] = self._replaceShape(elements[ index ]);\n    });\n  }, true);\n\n  this.preExecute('elements.move', LOW_PRIORITY, function(context) {\n    var shapes = context.shapes,\n        newHost = context.newHost;\n\n    shapes.forEach(function(shape, index) {\n      var host = shape.host;\n\n      if (shouldReplace(shape, includes(shapes, host) ? host : newHost)) {\n        shapes[ index ] = self._replaceShape(shape);\n      }\n    });\n  }, true);\n}\n\nDetachEventBehavior.$inject = [\n  'bpmnReplace',\n  'injector'\n];\n\ninherits(DetachEventBehavior, CommandInterceptor);\n\nDetachEventBehavior.prototype._replaceShape = function(shape) {\n  var eventDefinition = getEventDefinition(shape),\n      intermediateEvent;\n\n  if (eventDefinition) {\n    intermediateEvent = {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: eventDefinition.$type\n    };\n  } else {\n    intermediateEvent = {\n      type: 'bpmn:IntermediateThrowEvent'\n    };\n  }\n\n  return this._bpmnReplace.replaceElement(shape, intermediateEvent, { layoutConnection: false });\n};\n\n\n// helpers //////////\n\nfunction getEventDefinition(element) {\n  var businessObject = getBusinessObject(element),\n      eventDefinitions = businessObject.eventDefinitions;\n\n  return eventDefinitions && eventDefinitions[0];\n}\n\nfunction shouldReplace(shape, host) {\n  return !isLabel(shape) && is(shape, 'bpmn:BoundaryEvent') && !host;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}","import inherits from 'inherits-browser';\n\nimport {\n  assign,\n  filter,\n  find,\n  isNumber\n} from 'min-dash';\n\nimport { getMid } from 'diagram-js/lib/layout/LayoutUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getApproxIntersection\n} from 'diagram-js/lib/util/LineIntersection';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../../rules/BpmnRules').default} BpmnRules\n * @typedef {import('../../modeling/Modeling').default} Modeling\n */\n\n/**\n * @param {EventBus} eventBus\n * @param {BpmnRules} bpmnRules\n * @param {Modeling} modeling\n */\nexport default function DropOnFlowBehavior(eventBus, bpmnRules, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Reconnect start / end of a connection after\n   * dropping an element on a flow.\n   */\n\n  function insertShape(shape, targetFlow, positionOrBounds) {\n    var waypoints = targetFlow.waypoints,\n        waypointsBefore,\n        waypointsAfter,\n        dockingPoint,\n        source,\n        target,\n        incomingConnection,\n        outgoingConnection,\n        oldOutgoing = shape.outgoing.slice(),\n        oldIncoming = shape.incoming.slice();\n\n    var mid;\n\n    if (isNumber(positionOrBounds.width)) {\n      mid = getMid(positionOrBounds);\n    } else {\n      mid = positionOrBounds;\n    }\n\n    var intersection = getApproxIntersection(waypoints, mid);\n\n    if (intersection) {\n      waypointsBefore = waypoints.slice(0, intersection.index);\n      waypointsAfter = waypoints.slice(intersection.index + (intersection.bendpoint ? 1 : 0));\n\n      // due to inaccuracy intersection might have been found\n      if (!waypointsBefore.length || !waypointsAfter.length) {\n        return;\n      }\n\n      dockingPoint = intersection.bendpoint ? waypoints[intersection.index] : mid;\n\n      // if last waypointBefore is inside shape's bounds, ignore docking point\n      if (waypointsBefore.length === 1 || !isPointInsideBBox(shape, waypointsBefore[waypointsBefore.length - 1])) {\n        waypointsBefore.push(copy(dockingPoint));\n      }\n\n      // if first waypointAfter is inside shape's bounds, ignore docking point\n      if (waypointsAfter.length === 1 || !isPointInsideBBox(shape, waypointsAfter[0])) {\n        waypointsAfter.unshift(copy(dockingPoint));\n      }\n    }\n\n    source = targetFlow.source;\n    target = targetFlow.target;\n\n    if (bpmnRules.canConnect(source, shape, targetFlow)) {\n\n      // reconnect source -> inserted shape\n      modeling.reconnectEnd(targetFlow, shape, waypointsBefore || mid);\n\n      incomingConnection = targetFlow;\n    }\n\n    if (bpmnRules.canConnect(shape, target, targetFlow)) {\n\n      if (!incomingConnection) {\n\n        // reconnect inserted shape -> end\n        modeling.reconnectStart(targetFlow, shape, waypointsAfter || mid);\n\n        outgoingConnection = targetFlow;\n      } else {\n        outgoingConnection = modeling.connect(\n          shape, target, { type: targetFlow.type, waypoints: waypointsAfter }\n        );\n      }\n    }\n\n    var duplicateConnections = [].concat(\n\n      incomingConnection && filter(oldIncoming, function(connection) {\n        return connection.source === incomingConnection.source;\n      }) || [],\n\n      outgoingConnection && filter(oldOutgoing, function(connection) {\n        return connection.target === outgoingConnection.target;\n      }) || []\n    );\n\n    if (duplicateConnections.length) {\n      modeling.removeElements(duplicateConnections);\n    }\n  }\n\n  this.preExecute('elements.move', function(context) {\n\n    var newParent = context.newParent,\n        shapes = context.shapes,\n        delta = context.delta,\n        shape = shapes[0];\n\n    if (!shape || !newParent) {\n      return;\n    }\n\n    // if the new parent is a connection,\n    // change it to the new parent's parent\n    if (newParent && newParent.waypoints) {\n      context.newParent = newParent = newParent.parent;\n    }\n\n    var shapeMid = getMid(shape);\n    var newShapeMid = {\n      x: shapeMid.x + delta.x,\n      y: shapeMid.y + delta.y\n    };\n\n    // find a connection which intersects with the\n    // element's mid point\n    var connection = find(newParent.children, function(element) {\n      var canInsert = bpmnRules.canInsert(shapes, element);\n\n      return canInsert && getApproxIntersection(element.waypoints, newShapeMid);\n    });\n\n    if (connection) {\n      context.targetFlow = connection;\n      context.position = newShapeMid;\n    }\n\n  }, true);\n\n  this.postExecuted('elements.move', function(context) {\n\n    var shapes = context.shapes,\n        targetFlow = context.targetFlow,\n        position = context.position;\n\n    if (targetFlow) {\n      insertShape(shapes[0], targetFlow, position);\n    }\n\n  }, true);\n\n  this.preExecute('shape.create', function(context) {\n\n    var parent = context.parent,\n        shape = context.shape;\n\n    if (bpmnRules.canInsert(shape, parent)) {\n      context.targetFlow = parent;\n      context.parent = parent.parent;\n    }\n  }, true);\n\n  this.postExecuted('shape.create', function(context) {\n\n    var shape = context.shape,\n        targetFlow = context.targetFlow,\n        positionOrBounds = context.position;\n\n    if (targetFlow) {\n      insertShape(shape, targetFlow, positionOrBounds);\n    }\n  }, true);\n}\n\ninherits(DropOnFlowBehavior, CommandInterceptor);\n\nDropOnFlowBehavior.$inject = [\n  'eventBus',\n  'bpmnRules',\n  'modeling'\n];\n\n\n// helpers /////////////////////\n\nfunction isPointInsideBBox(bbox, point) {\n  var x = point.x,\n      y = point.y;\n\n  return x >= bbox.x &&\n    x <= bbox.x + bbox.width &&\n    y >= bbox.y &&\n    y <= bbox.y + bbox.height;\n}\n\nfunction copy(obj) {\n  return assign({}, obj);\n}\n\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function EventBasedGatewayBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Remove incoming sequence flows of event-based target when creating\n   * sequence flow.\n   *\n   * 1. If source is event-based gateway remove all incoming sequence flows\n   * 2. If source is not event-based gateway remove all incoming sequence flows\n   * whose source is event-based gateway\n   */\n  this.preExecuted('connection.create', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = context.source,\n        target = context.target,\n        hints = context.hints;\n\n    if (hints && hints.createElementsBehavior === false) {\n      return;\n    }\n\n    if (!isSequenceFlow(connection)) {\n      return;\n    }\n\n    var sequenceFlows = [];\n\n    if (is(source, 'bpmn:EventBasedGateway')) {\n      sequenceFlows = target.incoming\n        .filter(flow =>\n          flow !== connection &&\n          isSequenceFlow(flow)\n        );\n    } else {\n      sequenceFlows = target.incoming\n        .filter(flow =>\n          flow !== connection &&\n          isSequenceFlow(flow) &&\n          is(flow.source, 'bpmn:EventBasedGateway')\n        );\n    }\n\n    sequenceFlows.forEach(function(sequenceFlow) {\n      modeling.removeConnection(sequenceFlow);\n    });\n  });\n\n  /**\n   * Remove incoming sequence flows of event-based targets when replacing source\n   * with event-based gateway.\n   */\n  this.preExecuted('shape.replace', function(event) {\n    var context = event.context,\n        newShape = context.newShape;\n\n    if (!is(newShape, 'bpmn:EventBasedGateway')) {\n      return;\n    }\n\n    var targets = newShape.outgoing.filter(isSequenceFlow)\n      .reduce(function(targets, sequenceFlow) {\n        if (!targets.includes(sequenceFlow.target)) {\n          return targets.concat(sequenceFlow.target);\n        }\n\n        return targets;\n      }, []);\n\n    targets.forEach(function(target) {\n      target.incoming.filter(isSequenceFlow).forEach(function(sequenceFlow) {\n        const sequenceFlowsFromNewShape = target.incoming.filter(isSequenceFlow).filter(function(sequenceFlow) {\n          return sequenceFlow.source === newShape;\n        });\n\n        if (sequenceFlow.source !== newShape || sequenceFlowsFromNewShape.length > 1) {\n          modeling.removeConnection(sequenceFlow);\n        }\n      });\n    });\n  });\n}\n\nEventBasedGatewayBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\ninherits(EventBasedGatewayBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction isSequenceFlow(connection) {\n  return is(connection, 'bpmn:SequenceFlow');\n}","import { getLanesRoot } from '../util/LaneUtil';\r\n\r\nimport { is, isAny } from '../../../util/ModelUtil';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\r\n */\r\n\r\nvar HIGH_PRIORITY = 1500;\r\nvar HIGHEST_PRIORITY = 2000;\r\n\r\n\r\n/**\r\n * Correct hover targets in certain situations to improve diagram interaction.\r\n *\r\n * @param {ElementRegistry} elementRegistry\r\n * @param {EventBus} eventBus\r\n * @param {Canvas} canvas\r\n */\r\nexport default function FixHoverBehavior(elementRegistry, eventBus, canvas) {\r\n\r\n  eventBus.on([\r\n    'create.hover',\r\n    'create.move',\r\n    'create.out',\r\n    'create.end',\r\n    'shape.move.hover',\r\n    'shape.move.move',\r\n    'shape.move.out',\r\n    'shape.move.end'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape || event.shape,\r\n        hover = event.hover;\r\n\r\n    // ensure elements are not dropped onto a bpmn:Lane but onto\r\n    // the underlying bpmn:Participant\r\n    if (is(hover, 'bpmn:Lane') && !isAny(shape, [ 'bpmn:Lane', 'bpmn:Participant' ])) {\r\n      event.hover = getLanesRoot(hover);\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n\r\n    var rootElement = canvas.getRootElement();\r\n\r\n    // ensure bpmn:Group and label elements are dropped\r\n    // always onto the root\r\n    if (hover !== rootElement && (shape.labelTarget || isAny(shape, [ 'bpmn:Group', 'bpmn:TextAnnotation' ]))) {\r\n      event.hover = rootElement;\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n  });\r\n\r\n  eventBus.on([\r\n    'connect.hover',\r\n    'connect.out',\r\n    'connect.end',\r\n    'connect.cleanup',\r\n    'global-connect.hover',\r\n    'global-connect.out',\r\n    'global-connect.end',\r\n    'global-connect.cleanup'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var hover = event.hover;\r\n\r\n    // ensure connections start/end on bpmn:Participant,\r\n    // not the underlying bpmn:Lane\r\n    if (is(hover, 'bpmn:Lane')) {\r\n      event.hover = getLanesRoot(hover) || hover;\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n  });\r\n\r\n\r\n  eventBus.on([\r\n    'bendpoint.move.hover'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        hover = event.hover,\r\n        type = context.type;\r\n\r\n    // ensure reconnect start/end on bpmn:Participant,\r\n    // not the underlying bpmn:Lane\r\n    if (is(hover, 'bpmn:Lane') && /reconnect/.test(type)) {\r\n      event.hover = getLanesRoot(hover) || hover;\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n  });\r\n\r\n\r\n  eventBus.on([\r\n    'connect.start'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        start = context.start;\r\n\r\n    // ensure connect start on bpmn:Participant,\r\n    // not the underlying bpmn:Lane\r\n    if (is(start, 'bpmn:Lane')) {\r\n      context.start = getLanesRoot(start) || start;\r\n    }\r\n  });\r\n\r\n\r\n  // allow movement of participants from lanes\r\n  eventBus.on('shape.move.start', HIGHEST_PRIORITY, function(event) {\r\n    var shape = event.shape;\r\n\r\n    if (is(shape, 'bpmn:Lane')) {\r\n      event.shape = getLanesRoot(shape) || shape;\r\n    }\r\n  });\r\n\r\n  // ensure lanes aren't resized without their parent participant when using\r\n  // space tool\r\n  eventBus.on('spaceTool.move', HIGHEST_PRIORITY, function(event) {\r\n    var hover = event.hover;\r\n\r\n    if (hover && is(hover, 'bpmn:Lane')) {\r\n      event.hover = getLanesRoot(hover);\r\n    }\r\n  });\r\n\r\n}\r\n\r\nFixHoverBehavior.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'canvas'\r\n];","import {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\n/**\n * @typedef {import('../../BpmnFactory').default} BpmnFactory\n *\n * @typedef {import('../../../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * Creates a new bpmn:CategoryValue inside a new bpmn:Category\n *\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCategory(bpmnFactory) {\n  return bpmnFactory.create('bpmn:Category');\n}\n\n/**\n * Creates a new bpmn:CategoryValue inside a new bpmn:Category\n *\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nexport function createCategoryValue(bpmnFactory) {\n  return bpmnFactory.create('bpmn:CategoryValue');\n}\n\n/**\n * Adds category value to definitions\n *\n * @param {ModdleElement} categoryValue\n * @param {ModdleElement} category\n * @param {ModdleElement} definitions\n *\n * @return {ModdleElement}\n */\nexport function linkCategoryValue(categoryValue, category, definitions) {\n  collectionAdd(category.get('categoryValue'), categoryValue);\n  categoryValue.$parent = category;\n\n  collectionAdd(definitions.get('rootElements'), category);\n  category.$parent = definitions;\n\n  return categoryValue;\n}\n\n/**\n * Unlink category value from parent\n *\n * @param {ModdleElement} categoryValue\n *\n * @return {ModdleElement}\n */\nexport function unlinkCategoryValue(categoryValue) {\n  var category = categoryValue.$parent;\n\n  if (category) {\n    collectionRemove(category.get('categoryValue'), categoryValue);\n    categoryValue.$parent = null;\n  }\n\n  return categoryValue;\n}\n\n/**\n * Unlink category from parent\n *\n * @param {ModdleElement} category\n *\n * @return {ModdleElement}\n */\nexport function unlinkCategory(category) {\n  var definitions = category.$parent;\n\n  if (definitions) {\n    collectionRemove(definitions.get('rootElements'), category);\n    category.$parent = null;\n  }\n\n  return category;\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\nimport {\n  createCategory,\n  createCategoryValue,\n  linkCategoryValue,\n  unlinkCategory,\n  unlinkCategoryValue\n} from './util/CategoryUtil';\n\n/**\n * @typedef {import('../BpmnFactory').default} BpmnFactory\n * @typedef {import('../../../Modeler').default} Modeler\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('../../copy-paste/ModdleCopy').default} ModdleCopy\n *\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').DirectionTRBL} DirectionTRBL\n */\n\nvar LOWER_PRIORITY = 770;\n\n\n/**\n * BPMN specific group behavior.\n *\n * @param {BpmnFactory} bpmnFactory\n * @param {Modeler} bpmnjs\n * @param {ElementRegistry} elementRegistry\n * @param {EventBus} eventBus\n * @param {Injector} injector\n * @param {ModdleCopy} moddleCopy\n */\nexport default function GroupBehavior(\n    bpmnFactory,\n    bpmnjs,\n    elementRegistry,\n    eventBus,\n    injector,\n    moddleCopy\n) {\n  injector.invoke(CommandInterceptor, this);\n\n  /**\n   * Returns all group element in the current registry.\n   *\n   * @return {Shape[]}\n   */\n  function getGroupElements() {\n    return elementRegistry.filter(function(e) {\n      return is(e, 'bpmn:Group');\n    });\n  }\n\n  /**\n   * Returns true if given category is referenced in one of the given elements.\n   *\n   * @param {Element[]} elements\n   * @param {ModdleElement} category\n   *\n   * @return {boolean}\n   */\n  function isReferencedCategory(elements, category) {\n    return elements.some(function(element) {\n      var businessObject = getBusinessObject(element);\n\n      var _category = businessObject.categoryValueRef && businessObject.categoryValueRef.$parent;\n\n      return _category === category;\n    });\n  }\n\n  /**\n   * Returns true if given categoryValue is referenced in one of the given elements.\n   *\n   * @param {Element[]} elements\n   * @param {ModdleElement} categoryValue\n   *\n   * @return {boolean}\n   */\n  function isReferencedCategoryValue(elements, categoryValue) {\n    return elements.some(function(element) {\n      var businessObject = getBusinessObject(element);\n\n      return businessObject.categoryValueRef === categoryValue;\n    });\n  }\n\n  /**\n   * Remove category value unless it is still referenced.\n   *\n   * @param {ModdleElement} categoryValue\n   * @param {ModdleElement} category\n   * @param {ModdleElement} businessObject\n   */\n  function removeCategoryValue(categoryValue, category, businessObject) {\n\n    var groups = getGroupElements().filter(function(element) {\n      return element.businessObject !== businessObject;\n    });\n\n    if (category && !isReferencedCategory(groups, category)) {\n      unlinkCategory(category);\n    }\n\n    if (categoryValue && !isReferencedCategoryValue(groups, categoryValue)) {\n      unlinkCategoryValue(categoryValue);\n    }\n  }\n\n  /**\n   * Add category value.\n   *\n   * @param {ModdleElement} categoryValue\n   * @param {ModdleElement} category\n   *\n   * @return {ModdleElement}\n   */\n  function addCategoryValue(categoryValue, category) {\n    return linkCategoryValue(categoryValue, category, bpmnjs.getDefinitions());\n  }\n\n  function setCategoryValue(element, context) {\n    var businessObject = getBusinessObject(element),\n        categoryValue = businessObject.categoryValueRef;\n\n    if (!categoryValue) {\n      categoryValue =\n      businessObject.categoryValueRef =\n      context.categoryValue = (\n        context.categoryValue || createCategoryValue(bpmnFactory)\n      );\n    }\n\n    var category = categoryValue.$parent;\n\n    if (!category) {\n      category =\n      categoryValue.$parent =\n      context.category = (\n        context.category || createCategory(bpmnFactory)\n      );\n    }\n\n    addCategoryValue(categoryValue, category, bpmnjs.getDefinitions());\n  }\n\n  function unsetCategoryValue(element, context) {\n    var category = context.category,\n        categoryValue = context.categoryValue,\n        businessObject = getBusinessObject(element);\n\n    if (categoryValue) {\n      businessObject.categoryValueRef = null;\n\n      removeCategoryValue(categoryValue, category, businessObject);\n    } else {\n      removeCategoryValue(null, businessObject.categoryValueRef.$parent, businessObject);\n    }\n  }\n\n\n  // ensure category + value exist before label editing\n\n  this.execute('label.create', function(event) {\n    var context = event.context,\n        labelTarget = context.labelTarget;\n\n    if (!is(labelTarget, 'bpmn:Group')) {\n      return;\n    }\n\n    setCategoryValue(labelTarget, context);\n  });\n\n  this.revert('label.create', function(event) {\n    var context = event.context,\n        labelTarget = context.labelTarget;\n\n    if (!is(labelTarget, 'bpmn:Group')) {\n      return;\n    }\n\n    unsetCategoryValue(labelTarget, context);\n  });\n\n\n  // remove referenced category + value when group was deleted\n\n  this.execute('shape.delete', function(event) {\n\n    var context = event.context,\n        shape = context.shape,\n        businessObject = getBusinessObject(shape);\n\n    if (!is(shape, 'bpmn:Group') || shape.labelTarget) {\n      return;\n    }\n\n    var categoryValue = context.categoryValue = businessObject.categoryValueRef,\n        category;\n\n    if (categoryValue) {\n      category = context.category = categoryValue.$parent;\n\n      removeCategoryValue(categoryValue, category, businessObject);\n\n      businessObject.categoryValueRef = null;\n    }\n  });\n\n  this.reverted('shape.delete', function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    if (!is(shape, 'bpmn:Group') || shape.labelTarget) {\n      return;\n    }\n\n    var category = context.category,\n        categoryValue = context.categoryValue,\n        businessObject = getBusinessObject(shape);\n\n    if (categoryValue) {\n      businessObject.categoryValueRef = categoryValue;\n\n      addCategoryValue(categoryValue, category);\n    }\n  });\n\n\n  // create new category + value when group was created\n\n  this.execute('shape.create', function(event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (!is(shape, 'bpmn:Group') || shape.labelTarget) {\n      return;\n    }\n\n    if (getBusinessObject(shape).categoryValueRef) {\n      setCategoryValue(shape, context);\n    }\n  });\n\n  this.reverted('shape.create', function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    if (!is(shape, 'bpmn:Group') || shape.labelTarget) {\n      return;\n    }\n\n    if (getBusinessObject(shape).categoryValueRef) {\n      unsetCategoryValue(shape, context);\n    }\n  });\n\n\n  // copy + paste categoryValueRef with group\n\n  function copy(bo, clone) {\n    var targetBo = bpmnFactory.create(bo.$type);\n\n    return moddleCopy.copyElement(bo, targetBo, null, clone);\n  }\n\n  eventBus.on('copyPaste.copyElement', LOWER_PRIORITY, function(context) {\n    var descriptor = context.descriptor,\n        element = context.element;\n\n    if (!is(element, 'bpmn:Group') || element.labelTarget) {\n      return;\n    }\n\n    var groupBo = getBusinessObject(element);\n\n    if (groupBo.categoryValueRef) {\n\n      var categoryValue = groupBo.categoryValueRef;\n\n      descriptor.categoryValue = copy(categoryValue, true);\n\n      if (categoryValue.$parent) {\n        descriptor.category = copy(categoryValue.$parent, true);\n      }\n    }\n  });\n\n  eventBus.on('copyPaste.pasteElement', LOWER_PRIORITY, function(context) {\n    var descriptor = context.descriptor,\n        businessObject = descriptor.businessObject,\n        categoryValue = descriptor.categoryValue,\n        category = descriptor.category;\n\n    if (categoryValue) {\n      categoryValue = businessObject.categoryValueRef = copy(categoryValue);\n    }\n\n    if (category) {\n      categoryValue.$parent = copy(category);\n    }\n\n    delete descriptor.category;\n    delete descriptor.categoryValue;\n  });\n\n}\n\nGroupBehavior.$inject = [\n  'bpmnFactory',\n  'bpmnjs',\n  'elementRegistry',\n  'eventBus',\n  'injector',\n  'moddleCopy'\n];\n\ninherits(GroupBehavior, CommandInterceptor);","/**\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n */\n\n/**\n * Returns the intersection between two line segments a and b.\n *\n * @param {Point} l1s\n * @param {Point} l1e\n * @param {Point} l2s\n * @param {Point} l2e\n *\n * @return {Point}\n */\nexport default function lineIntersect(l1s, l1e, l2s, l2e) {\n\n  // if the lines intersect, the result contains the x and y of the\n  // intersection (treating the lines as infinite) and booleans for\n  // whether line segment 1 or line segment 2 contain the point\n  var denominator, a, b, c, numerator;\n\n  denominator = ((l2e.y - l2s.y) * (l1e.x - l1s.x)) - ((l2e.x - l2s.x) * (l1e.y - l1s.y));\n\n  if (denominator == 0) {\n    return null;\n  }\n\n  a = l1s.y - l2s.y;\n  b = l1s.x - l2s.x;\n  numerator = ((l2e.x - l2s.x) * a) - ((l2e.y - l2s.y) * b);\n\n  c = numerator / denominator;\n\n  // if we cast these lines infinitely in\n  // both directions, they intersect here\n  return {\n    x: Math.round(l1s.x + (c * (l1e.x - l1s.x))),\n    y: Math.round(l1s.y + (c * (l1e.y - l1s.y)))\n  };\n}","import {\n  getMid\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport lineIntersect from './util/LineIntersect';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\n/**\n * Fix broken dockings after DI imports.\n *\n * @param {EventBus} eventBus\n */\nexport default function ImportDockingFix(eventBus) {\n\n  function adjustDocking(startPoint, nextPoint, elementMid) {\n\n    var elementTop = {\n      x: elementMid.x,\n      y: elementMid.y - 50\n    };\n\n    var elementLeft = {\n      x: elementMid.x - 50,\n      y: elementMid.y\n    };\n\n    var verticalIntersect = lineIntersect(startPoint, nextPoint, elementMid, elementTop),\n        horizontalIntersect = lineIntersect(startPoint, nextPoint, elementMid, elementLeft);\n\n    // original is horizontal or vertical center cross intersection\n    var centerIntersect;\n\n    if (verticalIntersect && horizontalIntersect) {\n      if (getDistance(verticalIntersect, elementMid) > getDistance(horizontalIntersect, elementMid)) {\n        centerIntersect = horizontalIntersect;\n      } else {\n        centerIntersect = verticalIntersect;\n      }\n    } else {\n      centerIntersect = verticalIntersect || horizontalIntersect;\n    }\n\n    startPoint.original = centerIntersect;\n  }\n\n  function fixDockings(connection) {\n    var waypoints = connection.waypoints;\n\n    adjustDocking(\n      waypoints[0],\n      waypoints[1],\n      getMid(connection.source)\n    );\n\n    adjustDocking(\n      waypoints[waypoints.length - 1],\n      waypoints[waypoints.length - 2],\n      getMid(connection.target)\n    );\n  }\n\n  eventBus.on('bpmnElement.added', function(e) {\n\n    var element = e.element;\n\n    if (element.waypoints) {\n      fixDockings(element);\n    }\n  });\n}\n\nImportDockingFix.$inject = [\n  'eventBus'\n];\n\n\n// helpers //////////////////////\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  getDi\n} from '../../../util/ModelUtil';\n\nimport {\n  isAny\n} from '../util/ModelingUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\n/**\n * A component that makes sure that each created or updated\n * Pool and Lane is assigned an isHorizontal property set to true.\n *\n * @param {EventBus} eventBus\n */\nexport default function IsHorizontalFix(eventBus) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var elementTypesToUpdate = [\n    'bpmn:Participant',\n    'bpmn:Lane'\n  ];\n\n  this.executed([ 'shape.move', 'shape.create', 'shape.resize' ], function(event) {\n    var shape = event.context.shape,\n        bo = getBusinessObject(shape),\n        di = getDi(shape);\n\n    if (isAny(bo, elementTypesToUpdate)) {\n      var isHorizontal = di.get('isHorizontal');\n\n      if (isHorizontal === undefined) {\n        isHorizontal = true;\n      }\n\n      // set attribute directly to avoid modeling#updateProperty side effects\n      di.set('isHorizontal', isHorizontal);\n    }\n  });\n\n}\n\nIsHorizontalFix.$inject = [ 'eventBus' ];\n\ninherits(IsHorizontalFix, CommandInterceptor);\n","/**\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n *\n * @typedef { {\n*   type: 'bendpoint' | 'segment';\n*   position: Point;\n*   segmentIndex: number;\n*   bendpointIndex?: number;\n*   relativeLocation?: number;\n* } } Attachment\n*/\n\nvar sqrt = Math.sqrt,\n    min = Math.min,\n    max = Math.max,\n    abs = Math.abs;\n\n/**\n * Calculate the square (power to two) of a number.\n *\n * @param {number} n\n *\n * @return {number}\n */\nfunction sq(n) {\n  return Math.pow(n, 2);\n}\n\n/**\n * Get distance between two points.\n *\n * @param {Point} p1\n * @param {Point} p2\n *\n * @return {number}\n */\nfunction getDistance(p1, p2) {\n  return sqrt(sq(p1.x - p2.x) + sq(p1.y - p2.y));\n}\n\n/**\n * Return the attachment of the given point on the specified line.\n *\n * The attachment is either a bendpoint (attached to the given point)\n * or segment (attached to a location on a line segment) attachment:\n *\n * ```javascript\n * var pointAttachment = {\n *   type: 'bendpoint',\n *   bendpointIndex: 3,\n *   position: { x: 10, y: 10 } // the attach point on the line\n * };\n *\n * var segmentAttachment = {\n *   type: 'segment',\n *   segmentIndex: 2,\n *   relativeLocation: 0.31, // attach point location between 0 (at start) and 1 (at end)\n *   position: { x: 10, y: 10 } // the attach point on the line\n * };\n * ```\n *\n * @param {Point} point\n * @param {Point[]} line\n *\n * @return {Attachment}\n */\nexport function getAttachment(point, line) {\n\n  var idx = 0,\n      segmentStart,\n      segmentEnd,\n      segmentStartDistance,\n      segmentEndDistance,\n      attachmentPosition,\n      minDistance,\n      intersections,\n      attachment,\n      attachmentDistance,\n      closestAttachmentDistance,\n      closestAttachment;\n\n  for (idx = 0; idx < line.length - 1; idx++) {\n\n    segmentStart = line[idx];\n    segmentEnd = line[idx + 1];\n\n    if (pointsEqual(segmentStart, segmentEnd)) {\n      intersections = [ segmentStart ];\n    } else {\n      segmentStartDistance = getDistance(point, segmentStart);\n      segmentEndDistance = getDistance(point, segmentEnd);\n\n      minDistance = min(segmentStartDistance, segmentEndDistance);\n\n      intersections = getCircleSegmentIntersections(segmentStart, segmentEnd, point, minDistance);\n    }\n\n    if (intersections.length < 1) {\n      throw new Error('expected between [1, 2] circle -> line intersections');\n    }\n\n    // one intersection -> bendpoint attachment\n    if (intersections.length === 1) {\n      attachment = {\n        type: 'bendpoint',\n        position: intersections[0],\n        segmentIndex: idx,\n        bendpointIndex: pointsEqual(segmentStart, intersections[0]) ? idx : idx + 1\n      };\n    }\n\n    // two intersections -> segment attachment\n    if (intersections.length === 2) {\n\n      attachmentPosition = mid(intersections[0], intersections[1]);\n\n      attachment = {\n        type: 'segment',\n        position: attachmentPosition,\n        segmentIndex: idx,\n        relativeLocation: getDistance(segmentStart, attachmentPosition) / getDistance(segmentStart, segmentEnd)\n      };\n    }\n\n    attachmentDistance = getDistance(attachment.position, point);\n\n    if (!closestAttachment || closestAttachmentDistance > attachmentDistance) {\n      closestAttachment = attachment;\n      closestAttachmentDistance = attachmentDistance;\n    }\n  }\n\n  return closestAttachment;\n}\n\n/**\n * Get the intersection between a circle and a line segment.\n *\n * @param {Point} s1 segment start\n * @param {Point} s2 segment end\n * @param {Point} cc circle center\n * @param {number} cr circle radius\n *\n * @return {Point[]} intersections\n */\nfunction getCircleSegmentIntersections(s1, s2, cc, cr) {\n\n  var baX = s2.x - s1.x;\n  var baY = s2.y - s1.y;\n  var caX = cc.x - s1.x;\n  var caY = cc.y - s1.y;\n\n  var a = baX * baX + baY * baY;\n  var bBy2 = baX * caX + baY * caY;\n  var c = caX * caX + caY * caY - cr * cr;\n\n  var pBy2 = bBy2 / a;\n  var q = c / a;\n\n  var disc = pBy2 * pBy2 - q;\n\n  // check against negative value to work around\n  // negative, very close to zero results (-4e-15)\n  // being produced in some environments\n  if (disc < 0 && disc > -0.000001) {\n    disc = 0;\n  }\n\n  if (disc < 0) {\n    return [];\n  }\n\n  // if disc == 0 ... dealt with later\n  var tmpSqrt = sqrt(disc);\n  var abScalingFactor1 = -pBy2 + tmpSqrt;\n  var abScalingFactor2 = -pBy2 - tmpSqrt;\n\n  var i1 = {\n    x: s1.x - baX * abScalingFactor1,\n    y: s1.y - baY * abScalingFactor1\n  };\n\n  if (disc === 0) { // abScalingFactor1 == abScalingFactor2\n    return [ i1 ];\n  }\n\n  var i2 = {\n    x: s1.x - baX * abScalingFactor2,\n    y: s1.y - baY * abScalingFactor2\n  };\n\n  // return only points on line segment\n  return [ i1, i2 ].filter(function(p) {\n    return isPointInSegment(p, s1, s2);\n  });\n}\n\n\nfunction isPointInSegment(p, segmentStart, segmentEnd) {\n  return (\n    fenced(p.x, segmentStart.x, segmentEnd.x) &&\n    fenced(p.y, segmentStart.y, segmentEnd.y)\n  );\n}\n\nfunction fenced(n, rangeStart, rangeEnd) {\n\n  // use matching threshold to work around\n  // precision errors in intersection computation\n\n  return (\n    n >= min(rangeStart, rangeEnd) - EQUAL_THRESHOLD &&\n    n <= max(rangeStart, rangeEnd) + EQUAL_THRESHOLD\n  );\n}\n\n/**\n * Calculate the mid between two points.\n *\n * @param {Point} p1\n * @param {Point} p2\n *\n * @return {Point}\n */\nfunction mid(p1, p2) {\n\n  return {\n    x: (p1.x + p2.x) / 2,\n    y: (p1.y + p2.y) / 2\n  };\n}\n\nvar EQUAL_THRESHOLD = 0.1;\n\nfunction pointsEqual(p1, p2) {\n\n  return (\n    abs(p1.x - p2.x) <= EQUAL_THRESHOLD &&\n    abs(p1.y - p2.y) <= EQUAL_THRESHOLD\n  );\n}\n","import {\n  getDistancePointPoint,\n  rotateVector,\n  getAngle\n} from './GeometricUtil';\n\nimport {\n  getAttachment\n} from './LineAttachmentUtil';\n\nimport {\n  roundPoint\n} from 'diagram-js/lib/layout/LayoutUtil';\n\n/**\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n *\n * @typedef {import('./LineAttachmentUtil').Attachment} Attachment\n *\n * @typedef { {\n *   point: Point;\n *   delta: Point;\n * } } AnchorPointAdjustment\n *\n * @typedef { {\n *   segmentMove?: {\n*     segmentStartIndex: number;\n*     newSegmentStartIndex: number;\n*   };\n*   bendpointMove?: {\n*     insert: boolean;\n*     bendpointIndex: number;\n*   };\n*   connectionStart: boolean;\n*   connectionEnd: boolean;\n* } } FindNewLineStartIndexHints\n */\n\n/**\n * @param {Point[]} oldWaypoints\n * @param {Point[]} newWaypoints\n * @param {Attachment} attachment\n * @param {FindNewLineStartIndexHints} hints\n *\n * @return {number}\n */\nexport function findNewLineStartIndex(oldWaypoints, newWaypoints, attachment, hints) {\n\n  var index = attachment.segmentIndex;\n\n  var offset = newWaypoints.length - oldWaypoints.length;\n\n  // segmentMove happened\n  if (hints.segmentMove) {\n\n    var oldSegmentStartIndex = hints.segmentMove.segmentStartIndex,\n        newSegmentStartIndex = hints.segmentMove.newSegmentStartIndex;\n\n    // if point was on moved segment return new segment index\n    if (index === oldSegmentStartIndex) {\n      return newSegmentStartIndex;\n    }\n\n    // point is after new segment index\n    if (index >= newSegmentStartIndex) {\n      return (index + offset < newSegmentStartIndex) ? newSegmentStartIndex : index + offset;\n    }\n\n    // if point is before new segment index\n    return index;\n  }\n\n  // bendpointMove happened\n  if (hints.bendpointMove) {\n\n    var insert = hints.bendpointMove.insert,\n        bendpointIndex = hints.bendpointMove.bendpointIndex,\n        newIndex;\n\n    // waypoints length didnt change\n    if (offset === 0) {\n      return index;\n    }\n\n    // point behind new/removed bendpoint\n    if (index >= bendpointIndex) {\n      newIndex = insert ? index + 1 : index - 1;\n    }\n\n    // point before new/removed bendpoint\n    if (index < bendpointIndex) {\n\n      newIndex = index;\n\n      // decide point should take right or left segment\n      if (insert && attachment.type !== 'bendpoint' && bendpointIndex - 1 === index) {\n\n        var rel = relativePositionMidWaypoint(newWaypoints, bendpointIndex);\n\n        if (rel < attachment.relativeLocation) {\n          newIndex++;\n        }\n      }\n    }\n\n    return newIndex;\n  }\n\n  // start/end changed\n  if (offset === 0) {\n    return index;\n  }\n\n  if (hints.connectionStart && index === 0) {\n    return 0;\n  }\n\n  if (hints.connectionEnd && index === oldWaypoints.length - 2) {\n    return newWaypoints.length - 2;\n  }\n\n  // if nothing fits, take the middle segment\n  return Math.floor((newWaypoints.length - 2) / 2);\n}\n\n\n/**\n * Calculate the required adjustment (move delta) for the given point\n * after the connection waypoints got updated.\n *\n * @param {Point} position\n * @param {Point[]} newWaypoints\n * @param {Point[]} oldWaypoints\n * @param {FindNewLineStartIndexHints} hints\n *\n * @return {AnchorPointAdjustment} result\n */\nexport function getAnchorPointAdjustment(position, newWaypoints, oldWaypoints, hints) {\n\n  var dx = 0,\n      dy = 0;\n\n  var oldPosition = {\n    point: position,\n    delta: { x: 0, y: 0 }\n  };\n\n  // get closest attachment\n  var attachment = getAttachment(position, oldWaypoints),\n      oldLabelLineIndex = attachment.segmentIndex,\n      newLabelLineIndex = findNewLineStartIndex(oldWaypoints, newWaypoints, attachment, hints);\n\n\n  // should never happen\n  // TODO(@janstuemmel): throw an error here when connectionSegmentMove is refactored\n  if (newLabelLineIndex < 0 ||\n      newLabelLineIndex > newWaypoints.length - 2 ||\n      newLabelLineIndex === null) {\n    return oldPosition;\n  }\n\n  var oldLabelLine = getLine(oldWaypoints, oldLabelLineIndex),\n      newLabelLine = getLine(newWaypoints, newLabelLineIndex),\n      oldFoot = attachment.position;\n\n  var relativeFootPosition = getRelativeFootPosition(oldLabelLine, oldFoot),\n      angleDelta = getAngleDelta(oldLabelLine, newLabelLine);\n\n  // special rule if label on bendpoint\n  if (attachment.type === 'bendpoint') {\n\n    var offset = newWaypoints.length - oldWaypoints.length,\n        oldBendpointIndex = attachment.bendpointIndex,\n        oldBendpoint = oldWaypoints[oldBendpointIndex];\n\n    // bendpoint position hasn't changed, return same position\n    if (newWaypoints.indexOf(oldBendpoint) !== -1) {\n      return oldPosition;\n    }\n\n    // new bendpoint and old bendpoint have same index, then just return the offset\n    if (offset === 0) {\n      var newBendpoint = newWaypoints[oldBendpointIndex];\n\n      dx = newBendpoint.x - attachment.position.x,\n      dy = newBendpoint.y - attachment.position.y;\n\n      return {\n        delta: {\n          x: dx,\n          y: dy\n        },\n        point: {\n          x: position.x + dx,\n          y: position.y + dy\n        }\n      };\n    }\n\n    // if bendpoints get removed\n    if (offset < 0 && oldBendpointIndex !== 0 && oldBendpointIndex < oldWaypoints.length - 1) {\n      relativeFootPosition = relativePositionMidWaypoint(oldWaypoints, oldBendpointIndex);\n    }\n  }\n\n  var newFoot = {\n    x: (newLabelLine[1].x - newLabelLine[0].x) * relativeFootPosition + newLabelLine[0].x,\n    y: (newLabelLine[1].y - newLabelLine[0].y) * relativeFootPosition + newLabelLine[0].y\n  };\n\n  // the rotated vector to label\n  var newLabelVector = rotateVector({\n    x: position.x - oldFoot.x,\n    y: position.y - oldFoot.y\n  }, angleDelta);\n\n  // the new relative position\n  dx = newFoot.x + newLabelVector.x - position.x;\n  dy = newFoot.y + newLabelVector.y - position.y;\n\n  return {\n    point: roundPoint(newFoot),\n    delta: roundPoint({\n      x: dx,\n      y: dy\n    })\n  };\n}\n\n\n// HELPERS //////////////////////\n\nfunction relativePositionMidWaypoint(waypoints, idx) {\n\n  var distanceSegment1 = getDistancePointPoint(waypoints[idx - 1], waypoints[idx]),\n      distanceSegment2 = getDistancePointPoint(waypoints[idx], waypoints[idx + 1]);\n\n  var relativePosition = distanceSegment1 / (distanceSegment1 + distanceSegment2);\n\n  return relativePosition;\n}\n\nfunction getAngleDelta(l1, l2) {\n  var a1 = getAngle(l1),\n      a2 = getAngle(l2);\n  return a2 - a1;\n}\n\nfunction getLine(waypoints, idx) {\n  return [ waypoints[idx], waypoints[idx + 1] ];\n}\n\nfunction getRelativeFootPosition(line, foot) {\n\n  var length = getDistancePointPoint(line[0], line[1]),\n      lengthToFoot = getDistancePointPoint(line[0], foot);\n\n  return length === 0 ? 0 : lengthToFoot / length;\n}\n","import { findNewLineStartIndex, getAnchorPointAdjustment } from './LayoutUtil';\n\nimport { getMid } from 'diagram-js/lib/layout/LayoutUtil';\n\n/**\n * @typedef {import('./LineAttachmentUtil').Attachment} Attachment\n *\n * @typedef {import('./LayoutUtil').FindNewLineStartIndexHints} FindNewLineStartIndexHints\n *\n * @typedef {import('../../../../model/Types').Label} Label\n *\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n */\n\n/**\n * @param {Point[]} oldWaypoints\n * @param {Point[]} newWaypoints\n * @param {Attachment} attachment\n * @param {FindNewLineStartIndexHints} hints\n *\n * @return {number}\n */\nexport function findNewLabelLineStartIndex(oldWaypoints, newWaypoints, attachment, hints) {\n  return findNewLineStartIndex(oldWaypoints, newWaypoints, attachment, hints);\n}\n\n/**\n * Calculate the required adjustment (move delta) for the given label\n * after the connection waypoints got updated.\n *\n * @param {Label} label\n * @param {Point[]} newWaypoints\n * @param {Point[]} oldWaypoints\n * @param {FindNewLineStartIndexHints} hints\n *\n * @return {Point}\n */\nexport function getLabelAdjustment(label, newWaypoints, oldWaypoints, hints) {\n  var labelPosition = getMid(label);\n\n  return getAnchorPointAdjustment(labelPosition, newWaypoints, oldWaypoints, hints).delta;\n}","import {\n  asTRBL,\n  getOrientation,\n  roundPoint\n} from '../layout/LayoutUtil';\n\nimport {\n  center,\n  delta\n} from './PositionUtil';\n\n/**\n * @typedef {import('../model/Types').Shape} Shape\n *\n * @typedef {import('../util/Types').Point} Point\n * @typedef {import('../util/Types').Rect} Rect\n */\n\n/**\n * Calculates the absolute point relative to the new element's position.\n *\n * @param {Point} point [absolute]\n * @param {Rect} oldBounds\n * @param {Rect} newBounds\n *\n * @return {Point} point [absolute]\n */\nexport function getNewAttachPoint(point, oldBounds, newBounds) {\n  var oldCenter = center(oldBounds),\n      newCenter = center(newBounds),\n      oldDelta = delta(point, oldCenter);\n\n  var newDelta = {\n    x: oldDelta.x * (newBounds.width / oldBounds.width),\n    y: oldDelta.y * (newBounds.height / oldBounds.height)\n  };\n\n  return roundPoint({\n    x: newCenter.x + newDelta.x,\n    y: newCenter.y + newDelta.y\n  });\n}\n\n\n/**\n * Calculates the shape's delta relative to a new position\n * of a certain element's bounds.\n *\n * @param {Shape} shape\n * @param {Rect} oldBounds\n * @param {Rect} newBounds\n *\n * @return {Point} delta\n */\nexport function getNewAttachShapeDelta(shape, oldBounds, newBounds) {\n  var shapeCenter = center(shape),\n      oldCenter = center(oldBounds),\n      newCenter = center(newBounds),\n      shapeDelta = delta(shape, shapeCenter),\n      oldCenterDelta = delta(shapeCenter, oldCenter),\n      stickyPositionDelta = getStickyPositionDelta(shapeCenter, oldBounds, newBounds);\n\n  if (stickyPositionDelta) {\n    return stickyPositionDelta;\n  }\n\n  var newCenterDelta = {\n    x: oldCenterDelta.x * (newBounds.width / oldBounds.width),\n    y: oldCenterDelta.y * (newBounds.height / oldBounds.height)\n  };\n\n  var newShapeCenter = {\n    x: newCenter.x + newCenterDelta.x,\n    y: newCenter.y + newCenterDelta.y\n  };\n\n  return roundPoint({\n    x: newShapeCenter.x + shapeDelta.x - shape.x,\n    y: newShapeCenter.y + shapeDelta.y - shape.y\n  });\n}\n\nfunction getStickyPositionDelta(oldShapeCenter, oldBounds, newBounds) {\n  var oldTRBL = asTRBL(oldBounds),\n      newTRBL = asTRBL(newBounds);\n\n  if (isMoved(oldTRBL, newTRBL)) {\n    return null;\n  }\n\n  var oldOrientation = getOrientation(oldBounds, oldShapeCenter),\n      stickyPositionDelta,\n      newShapeCenter,\n      newOrientation;\n\n  if (oldOrientation === 'top') {\n    stickyPositionDelta = {\n      x: 0,\n      y: newTRBL.bottom - oldTRBL.bottom\n    };\n  } else if (oldOrientation === 'bottom') {\n    stickyPositionDelta = {\n      x: 0,\n      y: newTRBL.top - oldTRBL.top\n    };\n  } else if (oldOrientation === 'right') {\n    stickyPositionDelta = {\n      x: newTRBL.left - oldTRBL.left,\n      y: 0\n    };\n  } else if (oldOrientation === 'left') {\n    stickyPositionDelta = {\n      x: newTRBL.right - oldTRBL.right,\n      y: 0\n    };\n  } else {\n\n    // fallback to proportional movement for corner-placed attachments\n    return null;\n  }\n\n  newShapeCenter = {\n    x: oldShapeCenter.x + stickyPositionDelta.x,\n    y: oldShapeCenter.y + stickyPositionDelta.y\n  };\n\n  newOrientation = getOrientation(newBounds, newShapeCenter);\n\n  if (newOrientation !== oldOrientation) {\n\n    // fallback to proportional movement if orientation would otherwise change\n    return null;\n  }\n\n  return stickyPositionDelta;\n}\n\nfunction isMoved(oldTRBL, newTRBL) {\n  return isHorizontallyMoved(oldTRBL, newTRBL) || isVerticallyMoved(oldTRBL, newTRBL);\n}\n\nfunction isHorizontallyMoved(oldTRBL, newTRBL) {\n  return oldTRBL.right !== newTRBL.right && oldTRBL.left !== newTRBL.left;\n}\n\nfunction isVerticallyMoved(oldTRBL, newTRBL) {\n  return oldTRBL.top !== newTRBL.top && oldTRBL.bottom !== newTRBL.bottom;\n}\n","import {\n  assign\n} from 'min-dash';\n\nimport inherits from 'inherits-browser';\n\nimport {\n  is,\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nimport {\n  isLabelExternal,\n  getLabel,\n  hasExternalLabel,\n  isLabel\n} from '../../../util/LabelUtil';\n\nimport {\n  getLabelAdjustment\n} from './util/LabelLayoutUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getNewAttachPoint\n} from 'diagram-js/lib/util/AttachUtil';\n\nimport {\n  getMid,\n  roundPoint\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  delta\n} from 'diagram-js/lib/util/PositionUtil';\n\nimport {\n  sortBy\n} from 'min-dash';\n\nimport {\n  getDistancePointLine,\n  perpendicularFoot\n} from './util/GeometricUtil';\n\nvar NAME_PROPERTY = 'name';\nvar TEXT_PROPERTY = 'text';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('../BpmnFactory').default} BpmnFactory\n * @typedef {import('../../../draw/TextRenderer').default} TextRenderer\n *\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n *\n * @typedef {Point[]} Line\n */\n\n/**\n * A component that makes sure that external labels are added\n * together with respective elements and properly updated (DI wise)\n * during move.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {BpmnFactory} bpmnFactory\n * @param {TextRenderer} textRenderer\n */\nexport default function LabelBehavior(\n    eventBus, modeling, bpmnFactory,\n    textRenderer) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  // update label if name property was updated\n  this.postExecute('element.updateProperties', onPropertyUpdate);\n  this.postExecute('element.updateModdleProperties', e => {\n    const elementBo = getBusinessObject(e.context.element);\n\n    if (elementBo === e.context.moddleElement) {\n      onPropertyUpdate(e);\n    }\n  });\n\n  function onPropertyUpdate(e) {\n    var context = e.context,\n        element = context.element,\n        properties = context.properties;\n\n    if (NAME_PROPERTY in properties) {\n      modeling.updateLabel(element, properties[NAME_PROPERTY]);\n    }\n\n    if (TEXT_PROPERTY in properties\n        && is(element, 'bpmn:TextAnnotation')) {\n\n      var newBounds = textRenderer.getTextAnnotationBounds(\n        {\n          x: element.x,\n          y: element.y,\n          width: element.width,\n          height: element.height\n        },\n        properties[TEXT_PROPERTY] || ''\n      );\n\n      modeling.updateLabel(element, properties.text, newBounds);\n    }\n  }\n\n  // create label shape after shape/connection was created\n  this.postExecute([ 'shape.create', 'connection.create' ], function(e) {\n    var context = e.context,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior === false) {\n      return;\n    }\n\n    var element = context.shape || context.connection;\n\n    if (isLabel(element) || !isLabelExternal(element)) {\n      return;\n    }\n\n    // only create label if attribute available\n    if (!getLabel(element)) {\n      return;\n    }\n\n    modeling.updateLabel(element, getLabel(element));\n  });\n\n  // update label after label shape was deleted\n  this.postExecute('shape.delete', function(event) {\n    var context = event.context,\n        labelTarget = context.labelTarget,\n        hints = context.hints || {};\n\n    // check if label\n    if (labelTarget && hints.unsetLabel !== false) {\n      modeling.updateLabel(labelTarget, null, null, { removeShape: false });\n    }\n  });\n\n  function getVisibleLabelAdjustment(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        label = connection.label,\n        hints = assign({}, context.hints),\n        newWaypoints = context.newWaypoints || connection.waypoints,\n        oldWaypoints = context.oldWaypoints;\n\n\n    if (typeof hints.startChanged === 'undefined') {\n      hints.startChanged = !!hints.connectionStart;\n    }\n\n    if (typeof hints.endChanged === 'undefined') {\n      hints.endChanged = !!hints.connectionEnd;\n    }\n\n    return getLabelAdjustment(label, newWaypoints, oldWaypoints, hints);\n  }\n\n  this.postExecute([\n    'connection.layout',\n    'connection.updateWaypoints'\n  ], function(event) {\n    var context = event.context,\n        hints = context.hints || {};\n\n    if (hints.labelBehavior === false) {\n      return;\n    }\n\n    var connection = context.connection,\n        label = connection.label,\n        labelAdjustment;\n\n    // handle missing label as well as the case\n    // that the label parent does not exist (yet),\n    // because it is being pasted / created via multi element create\n    //\n    // Cf. https://github.com/bpmn-io/bpmn-js/pull/1227\n    if (!label || !label.parent) {\n      return;\n    }\n\n    labelAdjustment = getVisibleLabelAdjustment(event);\n\n    modeling.moveShape(label, labelAdjustment);\n  });\n\n\n  // keep label position on shape replace\n  this.postExecute([ 'shape.replace' ], function(event) {\n    var context = event.context,\n        newShape = context.newShape,\n        oldShape = context.oldShape;\n\n    var businessObject = getBusinessObject(newShape);\n\n    if (businessObject\n      && isLabelExternal(businessObject)\n      && oldShape.label\n      && newShape.label) {\n      newShape.label.x = oldShape.label.x;\n      newShape.label.y = oldShape.label.y;\n    }\n  });\n\n\n  // move external label after resizing\n  this.postExecute('shape.resize', function(event) {\n\n    var context = event.context,\n        shape = context.shape,\n        newBounds = context.newBounds,\n        oldBounds = context.oldBounds;\n\n    if (hasExternalLabel(shape)) {\n\n      var label = shape.label,\n          labelMid = getMid(label),\n          edges = asEdges(oldBounds);\n\n      // get nearest border point to label as reference point\n      var referencePoint = getReferencePoint(labelMid, edges);\n\n      var delta = getReferencePointDelta(referencePoint, oldBounds, newBounds);\n\n      modeling.moveShape(label, delta);\n\n    }\n\n  });\n\n}\n\ninherits(LabelBehavior, CommandInterceptor);\n\nLabelBehavior.$inject = [\n  'eventBus',\n  'modeling',\n  'bpmnFactory',\n  'textRenderer'\n];\n\n// helpers //////////////////////\n\n/**\n * Calculates a reference point delta relative to a new position\n * of a certain element's bounds\n *\n * @param {Point} referencePoint\n * @param {Rect} oldBounds\n * @param {Rect} newBounds\n *\n * @return {Point}\n */\nexport function getReferencePointDelta(referencePoint, oldBounds, newBounds) {\n\n  var newReferencePoint = getNewAttachPoint(referencePoint, oldBounds, newBounds);\n\n  return roundPoint(delta(newReferencePoint, referencePoint));\n}\n\n/**\n * Generates the nearest point (reference point) for a given point\n * onto given set of lines\n *\n * @param {Point} point\n * @param {Line[]} lines\n *\n * @return {Point}\n */\nexport function getReferencePoint(point, lines) {\n\n  if (!lines.length) {\n    return;\n  }\n\n  var nearestLine = getNearestLine(point, lines);\n\n  return perpendicularFoot(point, nearestLine);\n}\n\n/**\n * Convert the given bounds to a lines array containing all edges\n *\n * @param {Rect|Point} bounds\n *\n * @return {Line[]}\n */\nexport function asEdges(bounds) {\n  return [\n    [ // top\n      {\n        x: bounds.x,\n        y: bounds.y\n      },\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y\n      }\n    ],\n    [ // right\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y\n      },\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y + (bounds.height || 0)\n      }\n    ],\n    [ // bottom\n      {\n        x: bounds.x,\n        y: bounds.y + (bounds.height || 0)\n      },\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y + (bounds.height || 0)\n      }\n    ],\n    [ // left\n      {\n        x: bounds.x,\n        y: bounds.y\n      },\n      {\n        x: bounds.x,\n        y: bounds.y + (bounds.height || 0)\n      }\n    ]\n  ];\n}\n\n/**\n * Returns the nearest line for a given point by distance\n * @param {Point} point\n * @param {Line[]} lines\n *\n * @return {Line}\n */\nfunction getNearestLine(point, lines) {\n\n  var distances = lines.map(function(l) {\n    return {\n      line: l,\n      distance: getDistancePointLine(point, l)\n    };\n  });\n\n  var sorted = sortBy(distances, 'distance');\n\n  return sorted[0].line;\n}\n","import { getAnchorPointAdjustment } from './LayoutUtil';\n\n/**\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n *\n * @typedef {import('./LayoutUtil').FindNewLineStartIndexHints} FindNewLineStartIndexHints\n */\n\n/**\n * Calculate the new point after the connection waypoints got updated.\n *\n * @param {Point} position\n * @param {Point[]} newWaypoints\n * @param {Point[]} oldWaypoints\n * @param {FindNewLineStartIndexHints} hints\n *\n * @return {Point}\n */\nexport function getConnectionAdjustment(position, newWaypoints, oldWaypoints, hints) {\n  return getAnchorPointAdjustment(position, newWaypoints, oldWaypoints, hints).point;\n}\n\n","import {\n  assign\n} from 'min-dash';\n\nimport inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getConnectionAdjustment as getConnectionAnchorPoint } from './util/ConnectionLayoutUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A component that makes sure that Associations connected to Connections\n * are updated together with the Connection.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function LayoutConnectionBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  function getnewAnchorPoint(event, point) {\n\n    var context = event.context,\n        connection = context.connection,\n        hints = assign({}, context.hints),\n        newWaypoints = context.newWaypoints || connection.waypoints,\n        oldWaypoints = context.oldWaypoints;\n\n\n    if (typeof hints.startChanged === 'undefined') {\n      hints.startChanged = !!hints.connectionStart;\n    }\n\n    if (typeof hints.endChanged === 'undefined') {\n      hints.endChanged = !!hints.connectionEnd;\n    }\n\n    return getConnectionAnchorPoint(point, newWaypoints, oldWaypoints, hints);\n  }\n\n  this.postExecute([\n    'connection.layout',\n    'connection.updateWaypoints'\n  ], function(event) {\n    var context = event.context;\n\n    var connection = context.connection,\n        outgoing = connection.outgoing,\n        incoming = connection.incoming;\n\n    incoming.forEach(function(connection) {\n      var endPoint = connection.waypoints[connection.waypoints.length - 1];\n      var newEndpoint = getnewAnchorPoint(event, endPoint);\n\n      var newWaypoints = [].concat(connection.waypoints.slice(0, -1), [ newEndpoint ]);\n\n      modeling.updateWaypoints(connection, newWaypoints);\n    });\n\n    outgoing.forEach(function(connection) {\n      var startpoint = connection.waypoints[0];\n      var newStartpoint = getnewAnchorPoint(event, startpoint);\n\n      var newWaypoints = [].concat([ newStartpoint ], connection.waypoints.slice(1));\n\n      modeling.updateWaypoints(connection, newWaypoints);\n    });\n\n  });\n\n\n  this.postExecute([\n    'connection.move'\n  ], function(event) {\n    var context = event.context;\n\n    var connection = context.connection,\n        outgoing = connection.outgoing,\n        incoming = connection.incoming,\n        delta = context.delta;\n\n    incoming.forEach(function(connection) {\n      var endPoint = connection.waypoints[connection.waypoints.length - 1];\n      var newEndpoint = {\n        x: endPoint.x + delta.x,\n        y: endPoint.y + delta.y\n      };\n\n      var newWaypoints = [].concat(connection.waypoints.slice(0, -1), [ newEndpoint ]);\n\n      modeling.updateWaypoints(connection, newWaypoints);\n    });\n\n    outgoing.forEach(function(connection) {\n      var startpoint = connection.waypoints[0];\n      var newStartpoint = {\n        x: startpoint.x + delta.x,\n        y: startpoint.y + delta.y\n      };\n\n      var newWaypoints = [].concat([ newStartpoint ], connection.waypoints.slice(1));\n\n      modeling.updateWaypoints(connection, newWaypoints);\n    });\n\n  });\n\n}\n\ninherits(LayoutConnectionBehavior, CommandInterceptor);\n\nLayoutConnectionBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n","import {\n  getNewAttachPoint\n} from '../../../../util/AttachUtil';\n\nimport {\n  getOrientation\n} from '../../../../layout/LayoutUtil';\n\nimport {\n  filter,\n  map\n} from 'min-dash';\n\n/**\n * @typedef {import('../../../../core/Types').ConnectionLike} Connection\n * @typedef {import('../../../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../../../util/Types').Point} Point\n * @typedef {import('../../../../util/Types').Rect} Rect\n */\n\n/**\n * @param {Connection} connection\n * @param {Shape} shape\n * @param {Rect} oldBounds\n * @return {Point}\n */\nexport function getResizedSourceAnchor(connection, shape, oldBounds) {\n\n  var waypoints = safeGetWaypoints(connection),\n      waypointsInsideNewBounds = getWaypointsInsideBounds(waypoints, shape),\n      oldAnchor = waypoints[0];\n\n  // new anchor is the last waypoint enclosed be resized source\n  if (waypointsInsideNewBounds.length) {\n    return waypointsInsideNewBounds[ waypointsInsideNewBounds.length - 1 ];\n  }\n\n  return getNewAttachPoint(oldAnchor.original || oldAnchor, oldBounds, shape);\n}\n\n\nexport function getResizedTargetAnchor(connection, shape, oldBounds) {\n\n  var waypoints = safeGetWaypoints(connection),\n      waypointsInsideNewBounds = getWaypointsInsideBounds(waypoints, shape),\n      oldAnchor = waypoints[waypoints.length - 1];\n\n  // new anchor is the first waypoint enclosed be resized target\n  if (waypointsInsideNewBounds.length) {\n    return waypointsInsideNewBounds[ 0 ];\n  }\n\n  return getNewAttachPoint(oldAnchor.original || oldAnchor, oldBounds, shape);\n}\n\n\nexport function getMovedSourceAnchor(connection, source, moveDelta) {\n\n  var waypoints = safeGetWaypoints(connection),\n      oldBounds = subtract(source, moveDelta),\n      oldAnchor = waypoints[ 0 ];\n\n  return getNewAttachPoint(oldAnchor.original || oldAnchor, oldBounds, source);\n}\n\n\nexport function getMovedTargetAnchor(connection, target, moveDelta) {\n\n  var waypoints = safeGetWaypoints(connection),\n      oldBounds = subtract(target, moveDelta),\n      oldAnchor = waypoints[ waypoints.length - 1 ];\n\n  return getNewAttachPoint(oldAnchor.original || oldAnchor, oldBounds, target);\n}\n\n\n// helpers //////////////////////\n\nfunction subtract(bounds, delta) {\n  return {\n    x: bounds.x - delta.x,\n    y: bounds.y - delta.y,\n    width: bounds.width,\n    height: bounds.height\n  };\n}\n\n\n/**\n * Return waypoints of given connection; throw if non exists (should not happen!!).\n *\n * @param {Connection} connection\n *\n * @return {Point[]}\n */\nfunction safeGetWaypoints(connection) {\n\n  var waypoints = connection.waypoints;\n\n  if (!waypoints.length) {\n    throw new Error('connection#' + connection.id + ': no waypoints');\n  }\n\n  return waypoints;\n}\n\nfunction getWaypointsInsideBounds(waypoints, bounds) {\n  var originalWaypoints = map(waypoints, getOriginal);\n\n  return filter(originalWaypoints, function(waypoint) {\n    return isInsideBounds(waypoint, bounds);\n  });\n}\n\n/**\n * Checks if point is inside bounds, incl. edges.\n *\n * @param {Point} point\n * @param {Rect} bounds\n */\nfunction isInsideBounds(point, bounds) {\n  return getOrientation(bounds, point, 1) === 'intersect';\n}\n\nfunction getOriginal(point) {\n  return point.original || point;\n}\n","import inherits from 'inherits-browser';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\nimport { isExpanded } from '../../../util/DiUtil';\r\n\r\nimport { selfAndAllChildren } from 'diagram-js/lib/util/Elements';\r\n\r\nimport {\r\n  getResizedSourceAnchor,\r\n  getResizedTargetAnchor\r\n} from 'diagram-js/lib/features/modeling/cmd/helper/AnchorsHelper';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n * @typedef {import('../Modeling').default} Modeling\r\n */\r\n\r\n/**\r\n * BPMN-specific message flow behavior.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Modeling} modeling\r\n */\r\nexport default function MessageFlowBehavior(eventBus, modeling) {\r\n\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n  this.postExecute('shape.replace', function(context) {\r\n    var oldShape = context.oldShape,\r\n        newShape = context.newShape;\r\n\r\n    if (!isParticipantCollapse(oldShape, newShape)) {\r\n      return;\r\n    }\r\n\r\n    var messageFlows = getMessageFlows(oldShape);\r\n\r\n    messageFlows.incoming.forEach(function(incoming) {\r\n      var anchor = getResizedTargetAnchor(incoming, newShape, oldShape);\r\n\r\n      modeling.reconnectEnd(incoming, newShape, anchor);\r\n    });\r\n\r\n    messageFlows.outgoing.forEach(function(outgoing) {\r\n      var anchor = getResizedSourceAnchor(outgoing, newShape, oldShape);\r\n\r\n      modeling.reconnectStart(outgoing, newShape, anchor);\r\n    });\r\n  }, true);\r\n\r\n}\r\n\r\nMessageFlowBehavior.$inject = [ 'eventBus', 'modeling' ];\r\n\r\ninherits(MessageFlowBehavior, CommandInterceptor);\r\n\r\n// helpers //////////\r\n\r\nfunction isParticipantCollapse(oldShape, newShape) {\r\n  return is(oldShape, 'bpmn:Participant')\r\n    && isExpanded(oldShape)\r\n    && is(newShape, 'bpmn:Participant')\r\n    && !isExpanded(newShape);\r\n}\r\n\r\nfunction getMessageFlows(parent) {\r\n  var elements = selfAndAllChildren([ parent ], false);\r\n\r\n  var incoming = [],\r\n      outgoing = [];\r\n\r\n  elements.forEach(function(element) {\r\n    if (element === parent) {\r\n      return;\r\n    }\r\n\r\n    element.incoming.forEach(function(connection) {\r\n      if (is(connection, 'bpmn:MessageFlow')) {\r\n        incoming.push(connection);\r\n      }\r\n    });\r\n\r\n    element.outgoing.forEach(function(connection) {\r\n      if (is(connection, 'bpmn:MessageFlow')) {\r\n        outgoing.push(connection);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return {\r\n    incoming: incoming,\r\n    outgoing: outgoing\r\n  };\r\n}","import { isEventSubProcess } from '../../../../util/DiUtil';\nimport { getBusinessObject, is } from '../../../../util/ModelUtil';\n\nexport const NON_INTERRUPTING_EVENT_TYPES = [\n  'bpmn:MessageEventDefinition',\n  'bpmn:TimerEventDefinition',\n  'bpmn:EscalationEventDefinition',\n  'bpmn:ConditionalEventDefinition',\n  'bpmn:SignalEventDefinition'\n];\n\nexport function canBeNonInterrupting(shape) {\n\n  const businessObject = getBusinessObject(shape);\n\n  if (\n    !is(businessObject, 'bpmn:BoundaryEvent') &&\n    !(is(businessObject, 'bpmn:StartEvent') && isEventSubProcess(businessObject.$parent))\n  ) {\n    return false;\n  }\n\n  const eventDefinitions = businessObject.get('eventDefinitions');\n  if (!eventDefinitions || !eventDefinitions.length) {\n    return false;\n  }\n\n  return NON_INTERRUPTING_EVENT_TYPES.some(event => is(eventDefinitions[0], event));\n}\n\nexport function getInterruptingProperty(shape) {\n  return is(shape, 'bpmn:BoundaryEvent') ? 'cancelActivity' : 'isInterrupting';\n}","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport inherits from 'inherits-browser';\n\nimport { canBeNonInterrupting, getInterruptingProperty } from './util/NonInterruptingUtil';\nimport { getBusinessObject } from '../../../util/ModelUtil';\n\nexport default function NonInterruptingBehavior(injector, modeling) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.postExecuted('shape.replace', function(event) {\n    const oldShape = event.context.oldShape;\n    const newShape = event.context.newShape;\n    const hints = event.context.hints;\n\n    if (!canBeNonInterrupting(newShape)) {\n      return;\n    }\n\n    const property = getInterruptingProperty(newShape);\n    const isExplicitChange = hints.targetElement && hints.targetElement[property] !== undefined;\n\n    if (isExplicitChange) {\n      return;\n    }\n\n    const isOldInterrupting = getBusinessObject(oldShape).get(property);\n    const isNewInterruptingDefault = getBusinessObject(newShape).get(property);\n\n    if (isOldInterrupting === isNewInterruptingDefault) {\n      return;\n    }\n\n    modeling.updateProperties(newShape, {\n      [property]: isOldInterrupting\n    });\n  });\n}\n\nNonInterruptingBehavior.$inject = [ 'injector', 'modeling' ];\n\ninherits(NonInterruptingBehavior, CommandInterceptor);\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getDi } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * BPMN specific behavior ensuring that bpmndi:Label's dc:Bounds are removed\n * when shape is resized.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function RemoveEmbeddedLabelBoundsBehavior(eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  this.preExecute('shape.resize', function(context) {\n    var shape = context.shape;\n\n    var di = getDi(shape),\n        label = di && di.get('label'),\n        bounds = label && label.get('bounds');\n\n    if (bounds) {\n      modeling.updateModdleProperties(shape, label, {\n        bounds: undefined\n      });\n    }\n  }, true);\n}\n\ninherits(RemoveEmbeddedLabelBoundsBehavior, CommandInterceptor);\n\nRemoveEmbeddedLabelBoundsBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];","import inherits from 'inherits-browser';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport lineIntersect from './util/LineIntersect';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../../rules/BpmnRules').default} BpmnRules\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * @param {EventBus} eventBus\n * @param {BpmnRules} bpmnRules\n * @param {Modeling} modeling\n */\nexport default function RemoveElementBehavior(eventBus, bpmnRules, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Combine sequence flows when deleting an element\n   * if there is one incoming and one outgoing\n   * sequence flow\n   */\n  this.preExecute('shape.delete', function(e) {\n\n    var shape = e.context.shape;\n\n    // only handle [a] -> [shape] -> [b] patterns\n    if (shape.incoming.length !== 1 || shape.outgoing.length !== 1) {\n      return;\n    }\n\n    var inConnection = shape.incoming[0],\n        outConnection = shape.outgoing[0];\n\n    // only handle sequence flows\n    if (!is(inConnection, 'bpmn:SequenceFlow') || !is(outConnection, 'bpmn:SequenceFlow')) {\n      return;\n    }\n\n    if (bpmnRules.canConnect(inConnection.source, outConnection.target, inConnection)) {\n\n      // compute new, combined waypoints\n      var newWaypoints = getNewWaypoints(inConnection.waypoints, outConnection.waypoints);\n\n      modeling.reconnectEnd(inConnection, outConnection.target, newWaypoints);\n    }\n  });\n\n}\n\ninherits(RemoveElementBehavior, CommandInterceptor);\n\nRemoveElementBehavior.$inject = [\n  'eventBus',\n  'bpmnRules',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction getDocking(point) {\n  return point.original || point;\n}\n\n\nfunction getNewWaypoints(inWaypoints, outWaypoints) {\n\n  var intersection = lineIntersect(\n    getDocking(inWaypoints[inWaypoints.length - 2]),\n    getDocking(inWaypoints[inWaypoints.length - 1]),\n    getDocking(outWaypoints[1]),\n    getDocking(outWaypoints[0]));\n\n  if (intersection) {\n    return [].concat(\n      inWaypoints.slice(0, inWaypoints.length - 1),\n      [ intersection ],\n      outWaypoints.slice(1));\n  } else {\n    return [\n      getDocking(inWaypoints[0]),\n      getDocking(outWaypoints[outWaypoints.length - 1])\n    ];\n  }\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * BPMN specific remove behavior.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function(context) {\n\n    var shape = context.shape,\n        parent = shape.parent;\n\n    // activate the behavior if the shape to be removed\n    // is a participant\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n\n  this.postExecute('shape.delete', function(context) {\n\n    var collaborationRoot = context.collaborationRoot;\n\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n\n      // replace empty collaboration with process diagram\n      var process = modeling.makeProcess();\n\n      // move all root elements from collaboration to process\n      var children = collaborationRoot.children.slice();\n\n      modeling.moveElements(children, { x: 0, y: 0 }, process);\n    }\n  }, true);\n\n}\n\nRemoveParticipantBehavior.$inject = [ 'eventBus', 'modeling' ];\n\ninherits(RemoveParticipantBehavior, CommandInterceptor);","import {\n  forEach,\n  find,\n  matchPattern\n} from 'min-dash';\n\nimport inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('../../rules/BpmnRules').default} BpmnRules\n * @typedef {import('didi').Injector} Injector\n */\n\n/**\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {BpmnRules} bpmnRules\n * @param {Injector} injector\n */\nexport default function ReplaceConnectionBehavior(eventBus, modeling, bpmnRules, injector) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var dragging = injector.get('dragging', false);\n\n  function fixConnection(connection) {\n\n    var source = connection.source,\n        target = connection.target,\n        parent = connection.parent;\n\n    // do not do anything if connection\n    // is already deleted (may happen due to other\n    // behaviors plugged-in before)\n    if (!parent) {\n      return;\n    }\n\n    var replacementType,\n        remove;\n\n    /**\n     * Check if incoming or outgoing connections\n     * can stay or could be substituted with an\n     * appropriate replacement.\n     *\n     * This holds true for SequenceFlow <> MessageFlow.\n     */\n\n    if (is(connection, 'bpmn:SequenceFlow')) {\n      if (!bpmnRules.canConnectSequenceFlow(source, target)) {\n        remove = true;\n      }\n\n      if (bpmnRules.canConnectMessageFlow(source, target)) {\n        replacementType = 'bpmn:MessageFlow';\n      }\n    }\n\n    // transform message flows into sequence flows, if possible\n\n    if (is(connection, 'bpmn:MessageFlow')) {\n\n      if (!bpmnRules.canConnectMessageFlow(source, target)) {\n        remove = true;\n      }\n\n      if (bpmnRules.canConnectSequenceFlow(source, target)) {\n        replacementType = 'bpmn:SequenceFlow';\n      }\n    }\n\n    // remove invalid connection,\n    // unless it has been removed already\n    if (remove) {\n      modeling.removeConnection(connection);\n    }\n\n    // replace SequenceFlow <> MessageFlow\n\n    if (replacementType) {\n      modeling.connect(source, target, {\n        type: replacementType,\n        waypoints: connection.waypoints.slice()\n      });\n    }\n  }\n\n  function replaceReconnectedConnection(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        source = context.newSource || connection.source,\n        target = context.newTarget || connection.target,\n        allowed,\n        replacement;\n\n    allowed = bpmnRules.canConnect(source, target);\n\n    if (!allowed || allowed.type === connection.type) {\n      return;\n    }\n\n    replacement = modeling.connect(source, target, {\n      type: allowed.type,\n      associationDirection: allowed.associationDirection,\n      waypoints: connection.waypoints.slice()\n    });\n\n    // remove old connection unless it's already removed\n    if (connection.parent) {\n      modeling.removeConnection(connection);\n    }\n\n    // replace connection in context to reconnect end/start\n    context.connection = replacement;\n\n    if (dragging) {\n      cleanDraggingSelection(connection, replacement);\n    }\n  }\n\n  // monkey-patch selection saved in dragging in order to re-select it when operation is finished\n  function cleanDraggingSelection(oldConnection, newConnection) {\n    var context = dragging.context(),\n        previousSelection = context && context.payload.previousSelection,\n        index;\n\n    // do nothing if not dragging or no selection was present\n    if (!previousSelection || !previousSelection.length) {\n      return;\n    }\n\n    index = previousSelection.indexOf(oldConnection);\n\n    if (index === -1) {\n      return;\n    }\n\n    previousSelection.splice(index, 1, newConnection);\n  }\n\n  // lifecycle hooks\n\n  this.postExecuted('elements.move', function(context) {\n\n    var closure = context.closure,\n        allConnections = closure.allConnections;\n\n    forEach(allConnections, fixConnection);\n  }, true);\n\n  this.preExecute('connection.reconnect', replaceReconnectedConnection);\n\n  this.postExecuted('element.updateProperties', function(event) {\n    var context = event.context,\n        properties = context.properties,\n        element = context.element,\n        businessObject = element.businessObject,\n        connection;\n\n    // remove condition on change to default\n    if (properties.default) {\n      connection = find(\n        element.outgoing,\n        matchPattern({ id: element.businessObject.default.id })\n      );\n\n      if (connection) {\n        modeling.updateProperties(connection, { conditionExpression: undefined });\n      }\n    }\n\n    // remove default from source on change to conditional\n    if (properties.conditionExpression && businessObject.sourceRef.default === businessObject) {\n      modeling.updateProperties(element.source, { default: undefined });\n    }\n  });\n}\n\ninherits(ReplaceConnectionBehavior, CommandInterceptor);\n\nReplaceConnectionBehavior.$inject = [\n  'eventBus',\n  'modeling',\n  'bpmnRules',\n  'injector'\n];\n","import inherits from 'inherits-browser';\n\nimport { forEach, reduce } from 'min-dash';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { isEventSubProcess } from '../../../util/DiUtil';\n\n/**\n * @typedef {import('../../replace/BpmnReplace').default} BpmnReplace\n * @typedef {import('../../rules/BpmnRules').default} BpmnRules\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('diagram-js/lib/features/selection/Selection').default} Selection\n */\n\n/**\n * BPMN-specific replace behavior.\n *\n * @param {BpmnReplace} bpmnReplace\n * @param {BpmnRules} bpmnRules\n * @param {ElementRegistry} elementRegistry\n * @param {Injector} injector\n * @param {Modeling} modeling\n * @param {Selection} selection\n */\nexport default function ReplaceElementBehaviour(\n    bpmnReplace,\n    bpmnRules,\n    elementRegistry,\n    injector,\n    modeling,\n    selection\n) {\n  injector.invoke(CommandInterceptor, this);\n\n  this._bpmnReplace = bpmnReplace;\n  this._elementRegistry = elementRegistry;\n  this._selection = selection;\n\n  // replace elements on create, e.g. during copy-paste\n  this.postExecuted([ 'elements.create' ], 500, function(event) {\n    var context = event.context,\n        target = context.parent,\n        elements = context.elements;\n\n    var elementReplacements = reduce(elements, function(replacements, element) {\n      var canReplace = bpmnRules.canReplace([ element ], element.host || element.parent || target);\n\n      return canReplace ? replacements.concat(canReplace.replacements) : replacements;\n    }, []);\n\n    if (elementReplacements.length) {\n      this._replaceElements(elements, elementReplacements);\n    }\n  }, this);\n\n  // replace elements on move\n  this.postExecuted([ 'elements.move' ], 500, function(event) {\n    var context = event.context,\n        target = context.newParent,\n        newHost = context.newHost,\n        elements = [];\n\n    forEach(context.closure.topLevel, function(topLevelElements) {\n      if (isEventSubProcess(topLevelElements)) {\n        elements = elements.concat(topLevelElements.children);\n      } else {\n        elements = elements.concat(topLevelElements);\n      }\n    });\n\n    // set target to host if attaching\n    if (elements.length === 1 && newHost) {\n      target = newHost;\n    }\n\n    var canReplace = bpmnRules.canReplace(elements, target);\n\n    if (canReplace) {\n      this._replaceElements(elements, canReplace.replacements, newHost);\n    }\n  }, this);\n\n  // update attachments on host replace\n  this.postExecute([ 'shape.replace' ], 1500, function(e) {\n    var context = e.context,\n        oldShape = context.oldShape,\n        newShape = context.newShape,\n        attachers = oldShape.attachers,\n        canReplace;\n\n    if (attachers && attachers.length) {\n      canReplace = bpmnRules.canReplace(attachers, newShape);\n\n      this._replaceElements(attachers, canReplace.replacements);\n    }\n\n  }, this);\n\n  // keep ID on shape replace\n  this.postExecuted([ 'shape.replace' ], 1500, function(e) {\n    var context = e.context,\n        oldShape = context.oldShape,\n        newShape = context.newShape;\n\n    modeling.unclaimId(oldShape.businessObject.id, oldShape.businessObject);\n    modeling.updateProperties(newShape, { id: oldShape.id });\n  });\n}\n\ninherits(ReplaceElementBehaviour, CommandInterceptor);\n\nReplaceElementBehaviour.prototype._replaceElements = function(elements, newElements) {\n  var elementRegistry = this._elementRegistry,\n      bpmnReplace = this._bpmnReplace,\n      selection = this._selection;\n\n  forEach(newElements, function(replacement) {\n    var newElement = {\n      type: replacement.newElementType\n    };\n\n    var oldElement = elementRegistry.get(replacement.oldElementId);\n\n    var idx = elements.indexOf(oldElement);\n\n    elements[idx] = bpmnReplace.replaceElement(oldElement, newElement, { select: false });\n  });\n\n  if (newElements) {\n    selection.select(elements);\n  }\n};\n\nReplaceElementBehaviour.$inject = [\n  'bpmnReplace',\n  'bpmnRules',\n  'elementRegistry',\n  'injector',\n  'modeling',\n  'selection'\n];\n","import { is } from '../../../util/ModelUtil';\n\nimport {\n  isExpanded,\n  isHorizontal\n} from '../../../util/DiUtil';\n\nimport {\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  collectLanes,\n  getLanesRoot\n} from '../util/LaneUtil';\n\nvar HIGH_PRIORITY = 1500;\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n *\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').Dimensions} Dimensions\n * @typedef {import('diagram-js/lib/util/Types').Direction} Direction\n * @typedef {import('diagram-js/lib/util/Types').RectTRBL} RectTRBL\n */\n\n/**\n * @type {Dimensions}\n */\nexport var GROUP_MIN_DIMENSIONS = { width: 140, height: 120 };\n\n/**\n * @type {Dimensions}\n */\nexport var LANE_MIN_DIMENSIONS = { width: 300, height: 60 };\n\n/**\n * @type {Dimensions}\n */\nexport var VERTICAL_LANE_MIN_DIMENSIONS = { width: 60, height: 300 };\n\n/**\n * @type {Dimensions}\n */\nexport var PARTICIPANT_MIN_DIMENSIONS = { width: 300, height: 150 };\n\n/**\n * @type {Dimensions}\n */\nexport var VERTICAL_PARTICIPANT_MIN_DIMENSIONS = { width: 150, height: 300 };\n\n/**\n * @type {Dimensions}\n */\nexport var SUB_PROCESS_MIN_DIMENSIONS = { width: 140, height: 120 };\n\n/**\n * @type {Dimensions}\n */\nexport var TEXT_ANNOTATION_MIN_DIMENSIONS = { width: 50, height: 30 };\n\n/**\n * Set minimum bounds/resize constraints on resize.\n *\n * @param {EventBus} eventBus\n */\nexport default function ResizeBehavior(eventBus) {\n  eventBus.on('resize.start', HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        direction = context.direction,\n        balanced = context.balanced;\n\n    if (is(shape, 'bpmn:Lane') || is(shape, 'bpmn:Participant')) {\n      context.resizeConstraints = getParticipantResizeConstraints(shape, direction, balanced);\n    }\n\n    if (is(shape, 'bpmn:SubProcess') && isExpanded(shape)) {\n      context.minDimensions = SUB_PROCESS_MIN_DIMENSIONS;\n    }\n\n    if (is(shape, 'bpmn:TextAnnotation')) {\n      context.minDimensions = TEXT_ANNOTATION_MIN_DIMENSIONS;\n    }\n  });\n}\n\nResizeBehavior.$inject = [ 'eventBus' ];\n\n\nvar abs = Math.abs,\n    min = Math.min,\n    max = Math.max;\n\n\nfunction addToTrbl(trbl, attr, value, choice) {\n  var current = trbl[attr];\n\n  // make sure to set the value if it does not exist\n  // or apply the correct value by comparing against\n  // choice(value, currentValue)\n  trbl[attr] = current === undefined ? value : choice(value, current);\n}\n\nfunction addMin(trbl, attr, value) {\n  return addToTrbl(trbl, attr, value, min);\n}\n\nfunction addMax(trbl, attr, value) {\n  return addToTrbl(trbl, attr, value, max);\n}\n\nvar LANE_PADDING = { top: 20, left: 50, right: 20, bottom: 20 },\n    VERTICAL_LANE_PADDING = { top: 50, left: 20, right: 20, bottom: 20 };\n\n/**\n * @param {Shape} laneShape\n * @param {Direction} resizeDirection\n * @param {boolean} [balanced=false]\n *\n * @return { {\n *   min: RectTRBL;\n *   max: RectTRBL;\n * } }\n */\nexport function getParticipantResizeConstraints(laneShape, resizeDirection, balanced) {\n  var lanesRoot = getLanesRoot(laneShape);\n\n  var isFirst = true,\n      isLast = true;\n\n  var allLanes = collectLanes(lanesRoot, [ lanesRoot ]);\n\n  var laneTrbl = asTRBL(laneShape);\n\n  var maxTrbl = {},\n      minTrbl = {};\n\n  var isHorizontalLane = isHorizontal(laneShape);\n\n  var minDimensions = isHorizontalLane ? LANE_MIN_DIMENSIONS : VERTICAL_LANE_MIN_DIMENSIONS;\n\n  if (/n/.test(resizeDirection)) {\n    minTrbl.top = laneTrbl.bottom - minDimensions.height;\n  } else\n  if (/e/.test(resizeDirection)) {\n    minTrbl.right = laneTrbl.left + minDimensions.width;\n  } else\n  if (/s/.test(resizeDirection)) {\n    minTrbl.bottom = laneTrbl.top + minDimensions.height;\n  } else\n  if (/w/.test(resizeDirection)) {\n    minTrbl.left = laneTrbl.right - minDimensions.width;\n  }\n\n  // min/max size based on related lanes\n  allLanes.forEach(function(other) {\n\n    var otherTrbl = asTRBL(other);\n\n    // lane flags\n    if (isHorizontalLane) {\n      if (otherTrbl.top < (laneTrbl.top - 10)) {\n        isFirst = false;\n      }\n      if (otherTrbl.bottom > (laneTrbl.bottom + 10)) {\n        isLast = false;\n      }\n    }\n    else {\n      if (otherTrbl.left < (laneTrbl.left - 10)) {\n        isFirst = false;\n      }\n      if (otherTrbl.right > (laneTrbl.right + 10)) {\n        isLast = false;\n      }\n    }\n\n    if (/n/.test(resizeDirection)) {\n\n      // max top size (based on next element)\n      if (balanced && abs(laneTrbl.top - otherTrbl.bottom) < 10) {\n        addMax(maxTrbl, 'top', otherTrbl.top + minDimensions.height);\n      }\n\n      // min top size (based on self or nested element)\n      if (abs(laneTrbl.top - otherTrbl.top) < 5) {\n        addMin(minTrbl, 'top', otherTrbl.bottom - minDimensions.height);\n      }\n    }\n\n    if (/e/.test(resizeDirection)) {\n\n      // max right size (based on previous element)\n      if (balanced && abs(laneTrbl.right - otherTrbl.left) < 10) {\n        addMin(maxTrbl, 'right', otherTrbl.right - minDimensions.width);\n      }\n\n      // min right size (based on self or nested element)\n      if (abs(laneTrbl.right - otherTrbl.right) < 5) {\n        addMax(minTrbl, 'right', otherTrbl.left + minDimensions.width);\n      }\n    }\n\n    if (/s/.test(resizeDirection)) {\n\n      // max bottom size (based on previous element)\n      if (balanced && abs(laneTrbl.bottom - otherTrbl.top) < 10) {\n        addMin(maxTrbl, 'bottom', otherTrbl.bottom - minDimensions.height);\n      }\n\n      // min bottom size (based on self or nested element)\n      if (abs(laneTrbl.bottom - otherTrbl.bottom) < 5) {\n        addMax(minTrbl, 'bottom', otherTrbl.top + minDimensions.height);\n      }\n    }\n\n    if (/w/.test(resizeDirection)) {\n\n      // max left size (based on next element)\n      if (balanced && abs(laneTrbl.left - otherTrbl.right) < 10) {\n        addMax(maxTrbl, 'left', otherTrbl.left + minDimensions.width);\n      }\n\n      // min left size (based on self or nested element)\n      if (abs(laneTrbl.left - otherTrbl.left) < 5) {\n        addMin(minTrbl, 'left', otherTrbl.right - minDimensions.width);\n      }\n    }\n  });\n\n  // max top/bottom/left/right size based on flow nodes\n  var flowElements = lanesRoot.children.filter(function(s) {\n    return !s.hidden && !s.waypoints && (is(s, 'bpmn:FlowElement') || is(s, 'bpmn:Artifact'));\n  });\n\n  var padding = isHorizontalLane ? LANE_PADDING : VERTICAL_LANE_PADDING;\n\n  flowElements.forEach(function(flowElement) {\n\n    var flowElementTrbl = asTRBL(flowElement);\n\n    // vertical lane will resize from top with respect to flow element irrespective of first or last lane\n    if (/n/.test(resizeDirection) && (!isHorizontalLane || isFirst)) {\n      addMin(minTrbl, 'top', flowElementTrbl.top - padding.top);\n    }\n\n    // horizonal lane will resize from right with respect to flow element irrespective of first or last lane\n    if (/e/.test(resizeDirection) && (isHorizontalLane || isLast)) {\n      addMax(minTrbl, 'right', flowElementTrbl.right + padding.right);\n    }\n\n    // vertical lane will resize from bottom with respect to flow element irrespective of first or last lane\n    if (/s/.test(resizeDirection) && (!isHorizontalLane || isLast)) {\n      addMax(minTrbl, 'bottom', flowElementTrbl.bottom + padding.bottom);\n    }\n\n    // horizonal lane will resize from left with respect to flow element irrespective of first or last lane\n    if (/w/.test(resizeDirection) && (isHorizontalLane || isFirst)) {\n      addMin(minTrbl, 'left', flowElementTrbl.left - padding.left);\n    }\n  });\n  return {\n    min: minTrbl,\n    max: maxTrbl\n  };\n}","import { is } from '../../../util/ModelUtil';\n\nimport {\n  roundBounds\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  hasPrimaryModifier\n} from 'diagram-js/lib/util/Mouse';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\nvar SLIGHTLY_HIGHER_PRIORITY = 1001;\n\n\n/**\n * Invoke {@link Modeling#resizeLane} instead of {@link Modeling#resizeShape}\n * when resizing a lane or participant shape.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function ResizeLaneBehavior(eventBus, modeling) {\n\n  eventBus.on('resize.start', SLIGHTLY_HIGHER_PRIORITY + 500, function(event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Lane') || is(shape, 'bpmn:Participant')) {\n\n      // should we resize the opposite lane(s) in\n      // order to compensate for the resize operation?\n      context.balanced = !hasPrimaryModifier(event);\n    }\n  });\n\n  /**\n   * Intercept resize end and call resize lane function instead.\n   */\n  eventBus.on('resize.end', SLIGHTLY_HIGHER_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        canExecute = context.canExecute,\n        newBounds = context.newBounds;\n\n    if (is(shape, 'bpmn:Lane') || is(shape, 'bpmn:Participant')) {\n\n      if (canExecute) {\n\n        // ensure we have actual pixel values for new bounds\n        // (important when zoom level was > 1 during move)\n        newBounds = roundBounds(newBounds);\n\n        // perform the actual resize\n        modeling.resizeLane(shape, newBounds, context.balanced);\n      }\n\n      // stop propagation\n      return false;\n    }\n  });\n}\n\nResizeLaneBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n","import inherits from 'inherits-browser';\r\n\r\nimport {\r\n  find,\r\n  isArray,\r\n  matchPattern,\r\n  some\r\n} from 'min-dash';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport {\r\n  add as collectionAdd,\r\n  remove as collectionRemove\r\n} from 'diagram-js/lib/util/Collections';\r\n\r\nimport {\r\n  getBusinessObject,\r\n  is\r\n} from '../../../util/ModelUtil';\r\n\r\nimport { isAny } from '../util/ModelingUtil';\r\n\r\nimport { hasEventDefinition } from '../../../util/DiUtil';\r\n\r\n/**\r\n * @typedef {import('../../../Modeler').default} Modeler\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n * @typedef {import('didi').Injector} Injector\r\n * @typedef {import('../../copy-paste/ModdleCopy').default} ModdleCopy\r\n * @typedef {import('../BpmnFactory').default} BpmnFactory\r\n *\r\n * @typedef {import('../../../model/Types').Element} Element\r\n * @typedef {import('../../../model/Types').Shape} Shape\r\n *\r\n * @typedef {import('diagram-js/lib/util/Types').DirectionTRBL} DirectionTRBL\r\n */\r\n\r\nvar LOW_PRIORITY = 500;\r\n\r\n\r\n/**\r\n * Add referenced root elements (error, escalation, message, signal) if they don't exist.\r\n * Copy referenced root elements on copy & paste.\r\n *\r\n * @param {Modeler} bpmnjs\r\n * @param {EventBus} eventBus\r\n * @param {Injector} injector\r\n * @param {ModdleCopy} moddleCopy\r\n * @param {BpmnFactory} bpmnFactory\r\n */\r\nexport default function RootElementReferenceBehavior(\r\n    bpmnjs, eventBus, injector, moddleCopy, bpmnFactory\r\n) {\r\n  injector.invoke(CommandInterceptor, this);\r\n\r\n  function canHaveRootElementReference(element) {\r\n    return isAny(element, [ 'bpmn:ReceiveTask', 'bpmn:SendTask' ]) ||\r\n      hasAnyEventDefinition(element, [\r\n        'bpmn:ErrorEventDefinition',\r\n        'bpmn:EscalationEventDefinition',\r\n        'bpmn:MessageEventDefinition',\r\n        'bpmn:SignalEventDefinition'\r\n      ]);\r\n  }\r\n\r\n  function hasRootElement(rootElement) {\r\n    var definitions = bpmnjs.getDefinitions(),\r\n        rootElements = definitions.get('rootElements');\r\n\r\n    return !!find(rootElements, matchPattern({ id: rootElement.id }));\r\n  }\r\n\r\n  function getRootElementReferencePropertyName(eventDefinition) {\r\n    if (is(eventDefinition, 'bpmn:ErrorEventDefinition')) {\r\n      return 'errorRef';\r\n    } else if (is(eventDefinition, 'bpmn:EscalationEventDefinition')) {\r\n      return 'escalationRef';\r\n    } else if (is(eventDefinition, 'bpmn:MessageEventDefinition')) {\r\n      return 'messageRef';\r\n    } else if (is(eventDefinition, 'bpmn:SignalEventDefinition')) {\r\n      return 'signalRef';\r\n    }\r\n  }\r\n\r\n  function getRootElement(businessObject) {\r\n    if (isAny(businessObject, [ 'bpmn:ReceiveTask', 'bpmn:SendTask' ])) {\r\n      return businessObject.get('messageRef');\r\n    }\r\n\r\n    var eventDefinitions = businessObject.get('eventDefinitions'),\r\n        eventDefinition = eventDefinitions[ 0 ];\r\n\r\n    return eventDefinition.get(getRootElementReferencePropertyName(eventDefinition));\r\n  }\r\n\r\n  function setRootElement(businessObject, rootElement) {\r\n    if (isAny(businessObject, [ 'bpmn:ReceiveTask', 'bpmn:SendTask' ])) {\r\n      return businessObject.set('messageRef', rootElement);\r\n    }\r\n\r\n    var eventDefinitions = businessObject.get('eventDefinitions'),\r\n        eventDefinition = eventDefinitions[ 0 ];\r\n\r\n    return eventDefinition.set(getRootElementReferencePropertyName(eventDefinition), rootElement);\r\n  }\r\n\r\n  // create shape\r\n  this.executed([\r\n    'shape.create',\r\n    'element.updateProperties',\r\n    'element.updateModdleProperties'\r\n  ], function(context) {\r\n    var shape = context.shape || context.element;\r\n\r\n    if (!canHaveRootElementReference(shape)) {\r\n      return;\r\n    }\r\n\r\n    var businessObject = getBusinessObject(shape),\r\n        rootElement = getRootElement(businessObject),\r\n        rootElements;\r\n\r\n    if (rootElement && !hasRootElement(rootElement)) {\r\n      rootElements = bpmnjs.getDefinitions().get('rootElements');\r\n\r\n      // add root element\r\n      collectionAdd(rootElements, rootElement);\r\n\r\n      context.addedRootElement = rootElement;\r\n    }\r\n  }, true);\r\n\r\n  this.reverted([\r\n    'shape.create',\r\n    'element.updateProperties',\r\n    'element.updateModdleProperties'\r\n  ], function(context) {\r\n    var addedRootElement = context.addedRootElement;\r\n\r\n    if (!addedRootElement) {\r\n      return;\r\n    }\r\n\r\n    var rootElements = bpmnjs.getDefinitions().get('rootElements');\r\n\r\n    // remove root element\r\n    collectionRemove(rootElements, addedRootElement);\r\n  }, true);\r\n\r\n  eventBus.on('copyPaste.copyElement', function(context) {\r\n    var descriptor = context.descriptor,\r\n        element = context.element;\r\n\r\n    if (element.labelTarget || !canHaveRootElementReference(element)) {\r\n      return;\r\n    }\r\n\r\n    var businessObject = getBusinessObject(element),\r\n        rootElement = getRootElement(businessObject);\r\n\r\n    if (rootElement) {\r\n\r\n      // TODO(nikku): clone on copy\r\n      descriptor.referencedRootElement = rootElement;\r\n    }\r\n  });\r\n\r\n  eventBus.on('copyPaste.pasteElement', LOW_PRIORITY, function(context) {\r\n    var descriptor = context.descriptor,\r\n        businessObject = descriptor.businessObject,\r\n        referencedRootElement = descriptor.referencedRootElement;\r\n\r\n    if (!referencedRootElement) {\r\n      return;\r\n    }\r\n\r\n    if (!hasRootElement(referencedRootElement)) {\r\n      referencedRootElement = moddleCopy.copyElement(\r\n        referencedRootElement,\r\n        bpmnFactory.create(referencedRootElement.$type)\r\n      );\r\n    }\r\n\r\n    setRootElement(businessObject, referencedRootElement);\r\n\r\n    delete descriptor.referencedRootElement;\r\n  });\r\n}\r\n\r\nRootElementReferenceBehavior.$inject = [\r\n  'bpmnjs',\r\n  'eventBus',\r\n  'injector',\r\n  'moddleCopy',\r\n  'bpmnFactory'\r\n];\r\n\r\ninherits(RootElementReferenceBehavior, CommandInterceptor);\r\n\r\n// helpers //////////\r\n\r\nfunction hasAnyEventDefinition(element, types) {\r\n  if (!isArray(types)) {\r\n    types = [ types ];\r\n  }\r\n\r\n  return some(types, function(type) {\r\n    return hasEventDefinition(element, type);\r\n  });\r\n}","import { forEach } from 'min-dash';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport {\n  isExpanded,\n  isHorizontal\n} from '../../../util/DiUtil';\n\nimport {\n  GROUP_MIN_DIMENSIONS,\n  LANE_MIN_DIMENSIONS,\n  VERTICAL_LANE_MIN_DIMENSIONS,\n  PARTICIPANT_MIN_DIMENSIONS,\n  VERTICAL_PARTICIPANT_MIN_DIMENSIONS,\n  SUB_PROCESS_MIN_DIMENSIONS,\n  TEXT_ANNOTATION_MIN_DIMENSIONS\n} from './ResizeBehavior';\n\nimport { getChildLanes } from '../util/LaneUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n *\n * @typedef {import('../../../model/Types').Shape} Shape\n */\n\nvar max = Math.max;\n\n/**\n * @param {EventBus} eventBus\n */\nexport default function SpaceToolBehavior(eventBus) {\n  eventBus.on('spaceTool.getMinDimensions', function(context) {\n    var shapes = context.shapes,\n        axis = context.axis,\n        start = context.start,\n        minDimensions = {};\n\n    forEach(shapes, function(shape) {\n      var id = shape.id;\n\n      if (is(shape, 'bpmn:Participant')) {\n        minDimensions[ id ] = getParticipantMinDimensions(shape, axis, start);\n      }\n\n      if (is(shape, 'bpmn:Lane')) {\n        minDimensions[ id ] = isHorizontal(shape) ? LANE_MIN_DIMENSIONS : VERTICAL_LANE_MIN_DIMENSIONS;\n      }\n\n      if (is(shape, 'bpmn:SubProcess') && isExpanded(shape)) {\n        minDimensions[ id ] = SUB_PROCESS_MIN_DIMENSIONS;\n      }\n\n      if (is(shape, 'bpmn:TextAnnotation')) {\n        minDimensions[ id ] = TEXT_ANNOTATION_MIN_DIMENSIONS;\n      }\n\n      if (is(shape, 'bpmn:Group')) {\n        minDimensions[ id ] = GROUP_MIN_DIMENSIONS;\n      }\n    });\n\n    return minDimensions;\n  });\n}\n\nSpaceToolBehavior.$inject = [ 'eventBus' ];\n\n\n// helpers //////////\nfunction isHorizontalAxis(axis) {\n  return axis === 'x';\n}\n\n/**\n * Get minimum dimensions for participant taking lanes into account.\n *\n * @param {Shape} participant\n * @param {Axis} axis\n * @param {number} start\n *\n * @return {number}\n */\nfunction getParticipantMinDimensions(participant, axis, start) {\n  var isHorizontalLane = isHorizontal(participant);\n\n  if (!hasChildLanes(participant)) {\n    return isHorizontalLane ? PARTICIPANT_MIN_DIMENSIONS : VERTICAL_PARTICIPANT_MIN_DIMENSIONS;\n  }\n\n  var isHorizontalResize = isHorizontalAxis(axis);\n  var minDimensions = {};\n\n  if (isHorizontalResize) {\n    if (isHorizontalLane) {\n      minDimensions = PARTICIPANT_MIN_DIMENSIONS;\n    } else {\n      minDimensions = {\n        width: getParticipantMinWidth(participant, start, isHorizontalResize),\n        height: VERTICAL_PARTICIPANT_MIN_DIMENSIONS.height\n      };\n    }\n\n  } else {\n    if (isHorizontalLane) {\n      minDimensions = {\n        width: PARTICIPANT_MIN_DIMENSIONS.width,\n        height: getParticipantMinHeight(participant, start, isHorizontalResize)\n      };\n    } else {\n      minDimensions = VERTICAL_PARTICIPANT_MIN_DIMENSIONS;\n    }\n  }\n\n  return minDimensions;\n}\n\n/**\n * Get minimum height for participant taking lanes into account.\n *\n * @param {Shape} participant\n * @param {number} start\n * @param {boolean} isHorizontalResize\n *\n * @return {number}\n */\nfunction getParticipantMinHeight(participant, start, isHorizontalResize) {\n  var lanesMinHeight;\n  lanesMinHeight = getLanesMinHeight(participant, start, isHorizontalResize);\n  return max(PARTICIPANT_MIN_DIMENSIONS.height, lanesMinHeight);\n}\n\n/**\n * Get minimum width for participant taking lanes into account.\n *\n * @param {Shape} participant\n * @param {number} start\n * @param {boolean} isHorizontalResize\n *\n * @return {number}\n */\nfunction getParticipantMinWidth(participant, start, isHorizontalResize) {\n  var lanesMinWidth;\n  lanesMinWidth = getLanesMinWidth(participant, start, isHorizontalResize);\n  return max(VERTICAL_PARTICIPANT_MIN_DIMENSIONS.width, lanesMinWidth);\n}\n\nfunction hasChildLanes(element) {\n  return !!getChildLanes(element).length;\n}\n\nfunction getLanesMinHeight(participant, resizeStart, isHorizontalResize) {\n  var lanes = getChildLanes(participant),\n      resizedLane;\n\n  // find the nested lane which is currently resized\n  resizedLane = findResizedLane(lanes, resizeStart, isHorizontalResize);\n\n  // resized lane cannot shrink below the minimum height\n  // but remaining lanes' dimensions are kept intact\n  return participant.height - resizedLane.height + LANE_MIN_DIMENSIONS.height;\n}\n\nfunction getLanesMinWidth(participant, resizeStart, isHorizontalResize) {\n  var lanes = getChildLanes(participant),\n      resizedLane;\n\n  // find the nested lane which is currently resized\n  resizedLane = findResizedLane(lanes, resizeStart, isHorizontalResize);\n\n  // resized lane cannot shrink below the minimum width\n  // but remaining lanes' dimensions are kept intact\n  return participant.width - resizedLane.width + VERTICAL_LANE_MIN_DIMENSIONS.width;\n}\n\n/**\n * Find nested lane which is currently resized.\n *\n * @param {Shape[]} lanes\n * @param {number} resizeStart\n * @param {boolean} isHorizontalResize\n *\n * @return {Shape}\n */\nfunction findResizedLane(lanes, resizeStart, isHorizontalResize) {\n  var i, lane, childLanes;\n\n  for (i = 0; i < lanes.length; i++) {\n    lane = lanes[i];\n\n    // resizing current lane or a lane nested\n    if (!isHorizontalResize && resizeStart >= lane.y && resizeStart <= lane.y + lane.height ||\n        isHorizontalResize && resizeStart >= lane.x && resizeStart <= lane.x + lane.width) {\n\n      childLanes = getChildLanes(lane);\n\n      // a nested lane is resized\n      if (childLanes.length) {\n        return findResizedLane(childLanes, resizeStart, isHorizontalResize);\n      }\n\n      // current lane is the resized one\n      return lane;\n    }\n  }\n}\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { find } from 'min-dash';\n\nimport { isExpanded } from '../../../util/DiUtil';\n\nimport { getBusinessObject, getDi, is } from '../../../util/ModelUtil';\n\nimport { getMid } from 'diagram-js/lib/layout/LayoutUtil';\n\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n\nimport {\n  getPlaneIdFromShape,\n  getShapeIdFromPlane,\n  isPlane,\n  toPlaneId\n} from '../../../util/DrilldownUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('../ElementFactory').default} ElementFactory\n * @typedef {import('../BpmnFactory').default} BpmnFactory\n * @typedef {import('../../../Modeler').default} Modeler\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n *\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Root} Root\n * @typedef {import('../../../model/Types').ModdleElement} ModdleElement\n */\n\nvar LOW_PRIORITY = 400;\nvar HIGH_PRIORITY = 600;\n\nvar DEFAULT_POSITION = {\n  x: 180,\n  y: 160\n};\n\n\n/**\n * Creates bpmndi:BPMNPlane elements and canvas planes when collapsed subprocesses are created.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {ElementFactory} elementFactory\n * @param {BpmnFactory} bpmnFactory\n * @param {Modeler} bpmnjs\n * @param {ElementRegistry} elementRegistry\n */\nexport default function SubProcessPlaneBehavior(\n    canvas, eventBus, modeling,\n    elementFactory, bpmnFactory, bpmnjs, elementRegistry) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._elementFactory = elementFactory;\n  this._bpmnFactory = bpmnFactory;\n  this._bpmnjs = bpmnjs;\n  this._elementRegistry = elementRegistry;\n\n  var self = this;\n\n  function isCollapsedSubProcess(element) {\n    return is(element, 'bpmn:SubProcess') && !isExpanded(element);\n  }\n\n  function createRoot(context) {\n    var shape = context.shape,\n        rootElement = context.newRootElement;\n\n    var businessObject = getBusinessObject(shape);\n\n    rootElement = self._addDiagram(rootElement || businessObject);\n\n    context.newRootElement = canvas.addRootElement(rootElement);\n  }\n\n  function removeRoot(context) {\n    var shape = context.shape;\n\n    var businessObject = getBusinessObject(shape);\n    self._removeDiagram(businessObject);\n\n    var rootElement = context.newRootElement = elementRegistry.get(getPlaneIdFromShape(businessObject));\n\n    canvas.removeRootElement(rootElement);\n  }\n\n  // add plane elements for newly created sub-processes\n  // this ensures we can actually drill down into the element\n  this.executed('shape.create', function(context) {\n    var shape = context.shape;\n    if (!isCollapsedSubProcess(shape)) {\n      return;\n    }\n\n    createRoot(context);\n  }, true);\n\n\n  this.postExecuted('shape.create', function(context) {\n    var shape = context.shape,\n        rootElement = context.newRootElement;\n\n    if (!rootElement || !shape.children) {\n      return;\n    }\n\n    self._showRecursively(shape.children);\n\n    self._moveChildrenToShape(shape, rootElement);\n  }, true);\n\n\n  this.reverted('shape.create', function(context) {\n    var shape = context.shape;\n    if (!isCollapsedSubProcess(shape)) {\n      return;\n    }\n\n    removeRoot(context);\n  }, true);\n\n\n  this.preExecuted('shape.delete', function(context) {\n    var shape = context.shape;\n    if (!isCollapsedSubProcess(shape)) {\n      return;\n    }\n\n    var attachedRoot = elementRegistry.get(getPlaneIdFromShape(shape));\n\n    if (!attachedRoot) {\n      return;\n    }\n\n    modeling.removeElements(attachedRoot.children.slice());\n  }, true);\n\n\n  this.executed('shape.delete', function(context) {\n    var shape = context.shape;\n    if (!isCollapsedSubProcess(shape)) {\n      return;\n    }\n    removeRoot(context);\n  }, true);\n\n\n  this.reverted('shape.delete', function(context) {\n    var shape = context.shape;\n    if (!isCollapsedSubProcess(shape)) {\n      return;\n    }\n\n    createRoot(context);\n  }, true);\n\n\n  this.preExecuted('shape.replace', function(context) {\n    var oldShape = context.oldShape;\n    var newShape = context.newShape;\n\n    if (!isCollapsedSubProcess(oldShape) || !isCollapsedSubProcess(newShape)) {\n      return;\n    }\n\n    // old plane could have content,\n    // we remove it so it is not recursively deleted from 'shape.delete'\n    context.oldRoot = canvas.removeRootElement(getPlaneIdFromShape(oldShape));\n  }, true);\n\n\n  this.postExecuted('shape.replace', function(context) {\n    var newShape = context.newShape,\n        source = context.oldRoot,\n        target = canvas.findRoot(getPlaneIdFromShape(newShape));\n\n    if (!source || !target) {\n      return;\n    }\n    var elements = source.children;\n\n    modeling.moveElements(elements, { x: 0, y: 0 }, target);\n  }, true);\n\n\n  // rename primary elements when the secondary element changes\n  // this ensures rootElement.id = element.id + '_plane'\n  this.executed('element.updateProperties', function(context) {\n    var shape = context.element;\n\n    if (!is(shape, 'bpmn:SubProcess')) {\n      return;\n    }\n\n    var properties = context.properties;\n    var oldProperties = context.oldProperties;\n\n    var oldId = oldProperties.id,\n        newId = properties.id;\n\n    if (oldId === newId) {\n      return;\n    }\n\n    if (isPlane(shape)) {\n      elementRegistry.updateId(shape, toPlaneId(newId));\n      elementRegistry.updateId(oldId, newId);\n\n      return;\n    }\n\n    var planeElement = elementRegistry.get(toPlaneId(oldId));\n\n    if (!planeElement) {\n      return;\n    }\n\n    elementRegistry.updateId(toPlaneId(oldId), toPlaneId(newId));\n  }, true);\n\n\n  this.reverted('element.updateProperties', function(context) {\n    var shape = context.element;\n\n    if (!is(shape, 'bpmn:SubProcess')) {\n      return;\n    }\n\n    var properties = context.properties;\n    var oldProperties = context.oldProperties;\n\n    var oldId = oldProperties.id,\n        newId = properties.id;\n\n    if (oldId === newId) {\n      return;\n    }\n\n    if (isPlane(shape)) {\n      elementRegistry.updateId(shape, toPlaneId(oldId));\n      elementRegistry.updateId(newId, oldId);\n\n      return;\n    }\n\n    var planeElement = elementRegistry.get(toPlaneId(newId));\n\n    if (!planeElement) {\n      return;\n    }\n\n    elementRegistry.updateId(planeElement, toPlaneId(oldId));\n  }, true);\n\n  // re-throw element.changed to re-render primary shape if associated plane has\n  // changed (e.g. bpmn:name property has changed)\n  eventBus.on('element.changed', function(context) {\n    var element = context.element;\n\n    if (!isPlane(element)) {\n      return;\n    }\n\n    var plane = element;\n\n    var primaryShape = elementRegistry.get(getShapeIdFromPlane(plane));\n\n    // do not re-throw if no associated primary shape (e.g. bpmn:Process)\n    if (!primaryShape || primaryShape === plane) {\n      return;\n    }\n\n    eventBus.fire('element.changed', { element: primaryShape });\n  });\n\n\n  // create/remove plane for the subprocess\n  this.executed('shape.toggleCollapse', LOW_PRIORITY, function(context) {\n    var shape = context.shape;\n\n    if (!is(shape, 'bpmn:SubProcess')) {\n      return;\n    }\n\n    if (!isExpanded(shape)) {\n      createRoot(context);\n      self._showRecursively(shape.children);\n    } else {\n      removeRoot(context);\n    }\n\n  }, true);\n\n\n  // create/remove plane for the subprocess\n  this.reverted('shape.toggleCollapse', LOW_PRIORITY, function(context) {\n    var shape = context.shape;\n\n    if (!is(shape, 'bpmn:SubProcess')) {\n      return;\n    }\n\n    if (!isExpanded(shape)) {\n      createRoot(context);\n      self._showRecursively(shape.children);\n    } else {\n      removeRoot(context);\n    }\n\n  }, true);\n\n  // move elements between planes\n  this.postExecuted('shape.toggleCollapse', HIGH_PRIORITY, function(context) {\n    var shape = context.shape;\n\n    if (!is(shape, 'bpmn:SubProcess')) {\n      return;\n    }\n\n    var rootElement = context.newRootElement;\n\n    if (!rootElement) {\n      return;\n    }\n\n    if (!isExpanded(shape)) {\n\n      // collapsed\n      self._moveChildrenToShape(shape, rootElement);\n\n    } else {\n      self._moveChildrenToShape(rootElement, shape);\n    }\n  }, true);\n\n\n  // copy-paste ///////////\n\n  // add elements in plane to tree\n  eventBus.on('copyPaste.createTree', function(context) {\n    var element = context.element,\n        children = context.children;\n\n    if (!isCollapsedSubProcess(element)) {\n      return;\n    }\n\n    var id = getPlaneIdFromShape(element);\n    var parent = elementRegistry.get(id);\n\n    if (parent) {\n\n      // do not copy invisible root element\n      children.push.apply(children, parent.children);\n    }\n  });\n\n  // set plane children as direct children of collapsed shape\n  eventBus.on('copyPaste.copyElement', function(context) {\n    var descriptor = context.descriptor,\n        element = context.element,\n        elements = context.elements;\n\n    var parent = element.parent;\n\n    var isPlane = is(getDi(parent), 'bpmndi:BPMNPlane');\n    if (!isPlane) {\n      return;\n    }\n\n    var parentId = getShapeIdFromPlane(parent);\n\n    var referencedShape = find(elements, function(element) {\n      return element.id === parentId;\n    });\n\n    if (!referencedShape) {\n      return;\n    }\n\n    descriptor.parent = referencedShape.id;\n  });\n\n  // hide children during pasting\n  eventBus.on('copyPaste.pasteElement', function(context) {\n    var descriptor = context.descriptor;\n\n    if (!descriptor.parent) {\n      return;\n    }\n\n    if (isCollapsedSubProcess(descriptor.parent) || descriptor.parent.hidden) {\n      descriptor.hidden = true;\n    }\n  });\n\n}\n\ninherits(SubProcessPlaneBehavior, CommandInterceptor);\n\n/**\n * Moves the child elements from source to target.\n *\n * If the target is a plane, the children are moved to the top left corner.\n * Otherwise, the center of the target is used.\n *\n * @param {Root} source\n * @param {Root} target\n */\nSubProcessPlaneBehavior.prototype._moveChildrenToShape = function(source, target) {\n  var modeling = this._modeling;\n\n  var children = source.children;\n  var offset;\n\n  if (!children) {\n    return;\n  }\n\n  // add external labels that weren't children of sub process\n  children = children.concat(children.reduce(function(labels, child) {\n    if (child.label && child.label.parent !== source) {\n      return labels.concat(child.label);\n    }\n\n    return labels;\n  }, []));\n\n  // only change plane if there are no visible children, but don't move them\n  var visibleChildren = children.filter(function(child) {\n    return !child.hidden;\n  });\n\n  if (!visibleChildren.length) {\n    modeling.moveElements(children, { x: 0, y: 0 }, target, { autoResize: false });\n    return;\n  }\n\n  var childrenBounds = getBBox(visibleChildren);\n\n  // target is a plane\n  if (!target.x) {\n    offset = {\n      x: DEFAULT_POSITION.x - childrenBounds.x,\n      y: DEFAULT_POSITION.y - childrenBounds.y\n    };\n  }\n\n  // source is a plane\n  else {\n\n    // move relative to the center of the shape\n    var targetMid = getMid(target);\n    var childrenMid = getMid(childrenBounds);\n\n    offset = {\n      x: targetMid.x - childrenMid.x,\n      y: targetMid.y - childrenMid.y\n    };\n  }\n\n  modeling.moveElements(children, offset, target, { autoResize: false });\n};\n\n/**\n * Sets `hidden` property on all children of the given shape.\n *\n * @param {Element[]} elements\n * @param {boolean} [hidden=false]\n *\n * @return {Element[]}\n */\nSubProcessPlaneBehavior.prototype._showRecursively = function(elements, hidden) {\n  var self = this;\n\n  var result = [];\n  elements.forEach(function(element) {\n    element.hidden = !!hidden;\n\n    result = result.concat(element);\n\n    if (element.children) {\n      result = result.concat(\n        self._showRecursively(element.children, element.collapsed || hidden)\n      );\n    }\n  });\n\n  return result;\n};\n\n/**\n * Adds a given root element to the BPMNDI diagrams.\n *\n * @param {Root|ModdleElement} planeElement\n *\n * @return {Root}\n */\nSubProcessPlaneBehavior.prototype._addDiagram = function(planeElement) {\n  var bpmnjs = this._bpmnjs;\n  var diagrams = bpmnjs.getDefinitions().diagrams;\n\n  if (!planeElement.businessObject) {\n    planeElement = this._createNewDiagram(planeElement);\n  }\n\n  diagrams.push(planeElement.di.$parent);\n\n  return planeElement;\n};\n\n\n/**\n * Creates a new plane element for the given sub process.\n *\n * @param {ModdleElement} bpmnElement\n *\n * @return {Root}\n */\nSubProcessPlaneBehavior.prototype._createNewDiagram = function(bpmnElement) {\n  var bpmnFactory = this._bpmnFactory,\n      elementFactory = this._elementFactory;\n\n  var diPlane = bpmnFactory.create('bpmndi:BPMNPlane', {\n    bpmnElement: bpmnElement\n  });\n\n  var diDiagram = bpmnFactory.create('bpmndi:BPMNDiagram', {\n    plane: diPlane\n  });\n\n  diPlane.$parent = diDiagram;\n\n  // add a virtual element (not being drawn),\n  // a copy cat of our BpmnImporter code\n  var planeElement = elementFactory.createRoot({\n    id: getPlaneIdFromShape(bpmnElement),\n    type: bpmnElement.$type,\n    di: diPlane,\n    businessObject: bpmnElement,\n    collapsed: true\n  });\n\n  return planeElement;\n};\n\n/**\n * Removes the diagram for a given root element.\n *\n * @param {Root} rootElement\n *\n * @return {ModdleElement}\n */\nSubProcessPlaneBehavior.prototype._removeDiagram = function(rootElement) {\n  var bpmnjs = this._bpmnjs;\n\n  var diagrams = bpmnjs.getDefinitions().diagrams;\n\n  var removedDiagram = find(diagrams, function(diagram) {\n    return diagram.plane.bpmnElement.id === rootElement.id;\n  });\n\n  diagrams.splice(diagrams.indexOf(removedDiagram), 1);\n\n  return removedDiagram;\n};\n\n\nSubProcessPlaneBehavior.$inject = [\n  'canvas',\n  'eventBus',\n  'modeling',\n  'elementFactory',\n  'bpmnFactory',\n  'bpmnjs',\n  'elementRegistry'\n];\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport { isExpanded } from '../../../util/DiUtil.js';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * Add start event replacing element with expanded sub process.\n *\n * @param {Injector} injector\n * @param {Modeling} modeling\n */\nexport default function SubProcessStartEventBehavior(injector, modeling) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.postExecuted('shape.replace', function(event) {\n    var oldShape = event.context.oldShape,\n        newShape = event.context.newShape;\n\n    if (\n      !is(newShape, 'bpmn:SubProcess') ||\n      ! (is(oldShape, 'bpmn:Task') || is(oldShape, 'bpmn:CallActivity')) ||\n      !isExpanded(newShape)\n    ) {\n      return;\n    }\n\n    var position = getStartEventPosition(newShape);\n\n    modeling.createShape({ type: 'bpmn:StartEvent' }, position, newShape);\n  });\n}\n\nSubProcessStartEventBehavior.$inject = [\n  'injector',\n  'modeling'\n];\n\ninherits(SubProcessStartEventBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getStartEventPosition(shape) {\n  return {\n    x: shape.x + shape.width / 6,\n    y: shape.y + shape.height / 2\n  };\n}\n","import inherits from 'inherits-browser';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\nexport default function TextAnnotationBehavior(eventBus) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  // On Append, TextAnnotations will be created on the Root.\n  // The default for connections will create the connection in the parent of\n  // the source element, so we overwrite the parent here.\n  this.preExecute('connection.create', function(context) {\n    const { target } = context;\n\n    if (!is(target, 'bpmn:TextAnnotation')) {\n      return;\n    }\n\n    context.parent = target.parent;\n  }, true);\n\n  this.preExecute([ 'shape.create', 'shape.resize', 'elements.move' ], function(context) {\n    const shapes = context.shapes || [ context.shape ];\n\n    if (shapes.length === 1 && is(shapes[0], 'bpmn:TextAnnotation')) {\n      context.hints = context.hints || {};\n\n      context.hints.autoResize = false;\n    }\n  }, true);\n}\n\ninherits(TextAnnotationBehavior, CommandInterceptor);\n\nTextAnnotationBehavior.$inject = [\n  'eventBus'\n];","\nimport inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  forEach\n} from 'min-dash';\n\nimport { getMid } from 'diagram-js/lib/layout/LayoutUtil';\nimport { selfAndAllChildren } from 'diagram-js/lib/util/Elements';\n\nimport { isExpanded } from '../../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n *\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').DirectionTRBL} DirectionTRBL\n */\n\n/**\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function ToggleCollapseConnectionBehaviour(\n    eventBus, modeling\n) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this.postExecuted('shape.toggleCollapse', 1500, function(context) {\n\n    // var shape = context.shape;\n    var shape = context.shape;\n\n    // only change connections when collapsing\n    if (isExpanded(shape)) {\n      return;\n    }\n\n    var allChildren = selfAndAllChildren(shape);\n\n    allChildren.forEach(function(child) {\n\n      // Ensure that the connection array is not modified during iteration\n      var incomingConnections = child.incoming.slice(),\n          outgoingConnections = child.outgoing.slice();\n\n      forEach(incomingConnections, function(c) {\n        handleConnection(c, true);\n      });\n\n      forEach(outgoingConnections, function(c) {\n        handleConnection(c, false);\n      });\n    });\n\n\n    function handleConnection(c, incoming) {\n      if (allChildren.indexOf(c.source) !== -1 && allChildren.indexOf(c.target) !== -1) {\n        return;\n      }\n\n      if (incoming) {\n        modeling.reconnectEnd(c, shape, getMid(shape));\n      } else {\n        modeling.reconnectStart(c, shape, getMid(shape));\n      }\n\n    }\n\n  }, true);\n\n}\n\ninherits(ToggleCollapseConnectionBehaviour, CommandInterceptor);\n\nToggleCollapseConnectionBehaviour.$inject = [\n  'eventBus',\n  'modeling',\n];\n\n\n","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getDi,\n  is\n} from '../../../util/ModelUtil';\n\nimport {\n  computeChildrenBBox\n} from 'diagram-js/lib/features/resize/ResizeUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../ElementFactory').default} ElementFactory\n * @typedef {import('../Modeling').default} Modeling\n */\n\nvar LOW_PRIORITY = 500;\n\n/**\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {Modeling} modeling\n */\nexport default function ToggleElementCollapseBehaviour(\n    eventBus, elementFactory, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  function hideEmptyLabels(children) {\n    if (children.length) {\n      children.forEach(function(child) {\n        if (child.type === 'label' && !child.businessObject.name) {\n          child.hidden = true;\n        }\n      });\n    }\n  }\n\n  function expandedBounds(shape, defaultSize) {\n    var children = shape.children,\n        newBounds = defaultSize,\n        visibleElements,\n        visibleBBox;\n\n    visibleElements = filterVisible(children).concat([ shape ]);\n\n    visibleBBox = computeChildrenBBox(visibleElements);\n\n    if (visibleBBox) {\n\n      // center to visibleBBox with max(defaultSize, childrenBounds)\n      newBounds.width = Math.max(visibleBBox.width, newBounds.width);\n      newBounds.height = Math.max(visibleBBox.height, newBounds.height);\n\n      newBounds.x = visibleBBox.x + (visibleBBox.width - newBounds.width) / 2;\n      newBounds.y = visibleBBox.y + (visibleBBox.height - newBounds.height) / 2;\n    } else {\n\n      // center to collapsed shape with defaultSize\n      newBounds.x = shape.x + (shape.width - newBounds.width) / 2;\n      newBounds.y = shape.y + (shape.height - newBounds.height) / 2;\n    }\n\n    return newBounds;\n  }\n\n  function collapsedBounds(shape, defaultSize) {\n\n    return {\n      x: shape.x + (shape.width - defaultSize.width) / 2,\n      y: shape.y + (shape.height - defaultSize.height) / 2,\n      width: defaultSize.width,\n      height: defaultSize.height\n    };\n  }\n\n  this.executed([ 'shape.toggleCollapse' ], LOW_PRIORITY, function(e) {\n\n    var context = e.context,\n        shape = context.shape;\n\n    if (!is(shape, 'bpmn:SubProcess')) {\n      return;\n    }\n\n    if (!shape.collapsed) {\n\n      // all children got made visible through djs, hide empty labels\n      hideEmptyLabels(shape.children);\n\n      // remove collapsed marker\n      getDi(shape).isExpanded = true;\n    } else {\n\n      // place collapsed marker\n      getDi(shape).isExpanded = false;\n    }\n  });\n\n  this.reverted([ 'shape.toggleCollapse' ], LOW_PRIORITY, function(e) {\n\n    var context = e.context;\n    var shape = context.shape;\n\n\n    // revert removing/placing collapsed marker\n    if (!shape.collapsed) {\n      getDi(shape).isExpanded = true;\n\n    } else {\n      getDi(shape).isExpanded = false;\n    }\n  });\n\n  this.postExecuted([ 'shape.toggleCollapse' ], LOW_PRIORITY, function(e) {\n    var shape = e.context.shape,\n        defaultSize = elementFactory.getDefaultSize(shape),\n        newBounds;\n\n    if (shape.collapsed) {\n\n      // resize to default size of collapsed shapes\n      newBounds = collapsedBounds(shape, defaultSize);\n    } else {\n\n      // resize to bounds of max(visible children, defaultSize)\n      newBounds = expandedBounds(shape, defaultSize);\n    }\n\n    modeling.resizeShape(shape, newBounds, null, {\n      autoResize: shape.collapsed ? false : 'nwse'\n    });\n  });\n\n}\n\n\ninherits(ToggleElementCollapseBehaviour, CommandInterceptor);\n\nToggleElementCollapseBehaviour.$inject = [\n  'eventBus',\n  'elementFactory',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction filterVisible(elements) {\n  return elements.filter(function(e) {\n    return !e.hidden;\n  });\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\nimport { isExpanded } from '../../../util/DiUtil';\nimport { isLabel } from '../../../util/LabelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('../Modeling').default} Modeling\n *\n * @typedef {import('../../../model/Types').Moddle} Moddle\n */\n\n/**\n * Unclaims model IDs on element deletion.\n *\n * @param {Canvas} canvas\n * @param {Injector} injector\n * @param {Moddle} moddle\n * @param {Modeling} modeling\n */\nexport default function UnclaimIdBehavior(canvas, injector, moddle, modeling) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.preExecute('shape.delete', function(event) {\n    var context = event.context,\n        shape = context.shape,\n        shapeBo = shape.businessObject;\n\n    if (isLabel(shape)) {\n      return;\n    }\n\n    if (is(shape, 'bpmn:Participant') && isExpanded(shape)) {\n      moddle.ids.unclaim(shapeBo.processRef.id);\n    }\n\n    modeling.unclaimId(shapeBo.id, shapeBo);\n  });\n\n\n  this.preExecute('connection.delete', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        connectionBo = connection.businessObject;\n\n    modeling.unclaimId(connectionBo.id, connectionBo);\n  });\n\n  this.preExecute('canvas.updateRoot', function() {\n    var rootElement = canvas.getRootElement(),\n        rootElementBo = rootElement.businessObject;\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      moddle.ids.unclaim(rootElementBo.id);\n    }\n  });\n}\n\ninherits(UnclaimIdBehavior, CommandInterceptor);\n\nUnclaimIdBehavior.$inject = [ 'canvas', 'injector', 'moddle', 'modeling' ];","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A behavior that unsets the Default property of sequence flow source on\n * element delete, if the removed element is the Gateway or Task's default flow.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function DeleteSequenceFlowBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  this.preExecute('connection.delete', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source;\n\n    if (isDefaultFlow(connection, source)) {\n      modeling.updateProperties(source, {\n        'default': null\n      });\n    }\n  });\n}\n\ninherits(DeleteSequenceFlowBehavior, CommandInterceptor);\n\nDeleteSequenceFlowBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction isDefaultFlow(connection, source) {\n\n  if (!is(connection, 'bpmn:SequenceFlow')) {\n    return false;\n  }\n\n  var sourceBo = getBusinessObject(source),\n      sequenceFlow = getBusinessObject(connection);\n\n  return sourceBo.get('default') === sequenceFlow;\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\nvar LOW_PRIORITY = 500,\n    HIGH_PRIORITY = 5000;\n\n\n/**\n * BPMN specific delete lane behavior.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function UpdateFlowNodeRefsBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Update Lane#flowNodeRefs and FlowNode#lanes with every flow node\n   * move/resize and lane move/resize. Groups elements to recompute containments\n   * as efficient as possible.\n   */\n\n  // the update context\n  var context;\n\n\n  function initContext() {\n    context = context || new UpdateContext();\n    context.enter();\n\n    return context;\n  }\n\n  function getContext() {\n    if (!context) {\n      throw new Error('out of bounds release');\n    }\n\n    return context;\n  }\n\n  function releaseContext() {\n\n    if (!context) {\n      throw new Error('out of bounds release');\n    }\n\n    var triggerUpdate = context.leave();\n\n    if (triggerUpdate) {\n      modeling.updateLaneRefs(context.flowNodes, context.lanes);\n\n      context = null;\n    }\n\n    return triggerUpdate;\n  }\n\n\n  var laneRefUpdateEvents = [\n    'spaceTool',\n    'lane.add',\n    'lane.resize',\n    'lane.split',\n    'elements.create',\n    'elements.delete',\n    'elements.move',\n    'shape.create',\n    'shape.delete',\n    'shape.move',\n    'shape.resize'\n  ];\n\n\n  // listen to a lot of stuff to group lane updates\n\n  this.preExecute(laneRefUpdateEvents, HIGH_PRIORITY, function(event) {\n    initContext();\n  });\n\n  this.postExecuted(laneRefUpdateEvents, LOW_PRIORITY, function(event) {\n    releaseContext();\n  });\n\n\n  // Mark flow nodes + lanes that need an update\n\n  this.preExecute([\n    'shape.create',\n    'shape.move',\n    'shape.delete',\n    'shape.resize'\n  ], function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    var updateContext = getContext();\n\n    // no need to update labels\n    if (shape.labelTarget) {\n      return;\n    }\n\n    if (is(shape, 'bpmn:Lane')) {\n      updateContext.addLane(shape);\n    }\n\n    if (is(shape, 'bpmn:FlowNode')) {\n      updateContext.addFlowNode(shape);\n    }\n  });\n}\n\nUpdateFlowNodeRefsBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\ninherits(UpdateFlowNodeRefsBehavior, CommandInterceptor);\n\n\nfunction UpdateContext() {\n\n  this.flowNodes = [];\n  this.lanes = [];\n\n  this.counter = 0;\n\n  this.addLane = function(lane) {\n    this.lanes.push(lane);\n  };\n\n  this.addFlowNode = function(flowNode) {\n    this.flowNodes.push(flowNode);\n  };\n\n  this.enter = function() {\n    this.counter++;\n  };\n\n  this.leave = function() {\n    this.counter--;\n\n    return !this.counter;\n  };\n}","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\n\nimport { hasEventDefinition } from '../../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../../rules/BpmnRules').default} BpmnRules\n * @typedef {import('../Modeling').default} Modeling\n */\n\n\n/**\n * A behavior that sets the property of Compensation Activity after paste operation\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function SetCompensationActivityAfterPasteBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this.postExecuted('elements.create', function(event) {\n    const context = event.context,\n          elements = context.elements;\n\n    // check if compensation activity is connected to compensation boundary event\n    for (const element of elements) {\n      if (isForCompensation(element) && !isConnectedToCompensationBoundaryEvent(element)) {\n        modeling.updateProperties(element, { isForCompensation: undefined });\n      }\n    }\n  });\n}\n\ninherits(SetCompensationActivityAfterPasteBehavior, CommandInterceptor);\n\nSetCompensationActivityAfterPasteBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction isForCompensation(element) {\n  const bo = getBusinessObject(element);\n  return bo && bo.isForCompensation;\n}\n\nfunction isCompensationBoundaryEvent(element) {\n  return element && is(element, 'bpmn:BoundaryEvent') &&\n      hasEventDefinition(element, 'bpmn:CompensateEventDefinition');\n}\n\nfunction isConnectedToCompensationBoundaryEvent(element) {\n  const compensationAssociations = element.incoming.filter(\n    connection => isCompensationBoundaryEvent(connection.source)\n  );\n  if (compensationAssociations.length > 0) {\n    return true;\n  }\n  return false;\n}","import AdaptiveLabelPositioningBehavior from './AdaptiveLabelPositioningBehavior';\nimport AppendBehavior from './AppendBehavior';\nimport AssociationBehavior from './AssociationBehavior';\nimport AttachEventBehavior from './AttachEventBehavior';\nimport BoundaryEventBehavior from './BoundaryEventBehavior';\nimport CompensateBoundaryEventBehavior from './CompensateBoundaryEventBehavior';\nimport CreateBehavior from './CreateBehavior';\nimport CreateDataObjectBehavior from './CreateDataObjectBehavior';\nimport CreateParticipantBehavior from './CreateParticipantBehavior';\nimport DataInputAssociationBehavior from './DataInputAssociationBehavior';\nimport DataStoreBehavior from './DataStoreBehavior';\nimport DeleteLaneBehavior from './DeleteLaneBehavior';\nimport DetachEventBehavior from './DetachEventBehavior';\nimport DropOnFlowBehavior from './DropOnFlowBehavior';\nimport EventBasedGatewayBehavior from './EventBasedGatewayBehavior';\nimport FixHoverBehavior from './FixHoverBehavior';\nimport GroupBehavior from './GroupBehavior';\nimport ImportDockingFix from './ImportDockingFix';\nimport IsHorizontalFix from './IsHorizontalFix';\nimport LabelBehavior from './LabelBehavior';\nimport LayoutConnectionBehavior from './LayoutConnectionBehavior';\nimport MessageFlowBehavior from './MessageFlowBehavior';\nimport NonInterruptingBehavior from './NonInterruptingBehavior';\nimport RemoveEmbeddedLabelBoundsBehavior from './RemoveEmbeddedLabelBoundsBehavior';\nimport RemoveElementBehavior from './RemoveElementBehavior';\nimport RemoveParticipantBehavior from './RemoveParticipantBehavior';\nimport ReplaceConnectionBehavior from './ReplaceConnectionBehavior';\nimport ReplaceElementBehaviour from './ReplaceElementBehaviour';\nimport ResizeBehavior from './ResizeBehavior';\nimport ResizeLaneBehavior from './ResizeLaneBehavior';\nimport RootElementReferenceBehavior from './RootElementReferenceBehavior';\nimport SpaceToolBehavior from './SpaceToolBehavior';\nimport SubProcessPlaneBehavior from './SubProcessPlaneBehavior';\nimport SubProcessStartEventBehavior from './SubProcessStartEventBehavior';\nimport TextAnnotationBehavior from './TextAnnotationBehavior';\nimport ToggleCollapseConnectionBehaviour from './ToggleCollapseConnectionBehaviour';\nimport ToggleElementCollapseBehaviour from './ToggleElementCollapseBehaviour';\nimport UnclaimIdBehavior from './UnclaimIdBehavior';\nimport UnsetDefaultFlowBehavior from './UnsetDefaultFlowBehavior';\nimport UpdateFlowNodeRefsBehavior from './UpdateFlowNodeRefsBehavior';\nimport SetCompensationActivityAfterPasteBehavior from './SetCompensationActivityAfterPasteBehavior';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [\n    'adaptiveLabelPositioningBehavior',\n    'appendBehavior',\n    'associationBehavior',\n    'attachEventBehavior',\n    'boundaryEventBehavior',\n    'compensateBoundaryEventBehaviour',\n    'createBehavior',\n    'createDataObjectBehavior',\n    'createParticipantBehavior',\n    'dataInputAssociationBehavior',\n    'dataStoreBehavior',\n    'deleteLaneBehavior',\n    'detachEventBehavior',\n    'dropOnFlowBehavior',\n    'eventBasedGatewayBehavior',\n    'fixHoverBehavior',\n    'groupBehavior',\n    'importDockingFix',\n    'isHorizontalFix',\n    'labelBehavior',\n    'layoutConnectionBehavior',\n    'messageFlowBehavior',\n    'nonInterruptingBehavior',\n    'removeElementBehavior',\n    'removeEmbeddedLabelBoundsBehavior',\n    'removeParticipantBehavior',\n    'replaceConnectionBehavior',\n    'replaceElementBehaviour',\n    'resizeBehavior',\n    'resizeLaneBehavior',\n    'rootElementReferenceBehavior',\n    'spaceToolBehavior',\n    'subProcessPlaneBehavior',\n    'subProcessStartEventBehavior',\n    'textAnnotationBehavior',\n    'toggleCollapseConnectionBehaviour',\n    'toggleElementCollapseBehaviour',\n    'unclaimIdBehavior',\n    'updateFlowNodeRefsBehavior',\n    'unsetDefaultFlowBehavior',\n    'setCompensationActivityAfterPasteBehavior'\n  ],\n  adaptiveLabelPositioningBehavior: [ 'type', AdaptiveLabelPositioningBehavior ],\n  appendBehavior: [ 'type', AppendBehavior ],\n  associationBehavior: [ 'type', AssociationBehavior ],\n  attachEventBehavior: [ 'type', AttachEventBehavior ],\n  boundaryEventBehavior: [ 'type', BoundaryEventBehavior ],\n  compensateBoundaryEventBehaviour: [ 'type', CompensateBoundaryEventBehavior ],\n  createBehavior: [ 'type', CreateBehavior ],\n  createDataObjectBehavior: [ 'type', CreateDataObjectBehavior ],\n  createParticipantBehavior: [ 'type', CreateParticipantBehavior ],\n  dataInputAssociationBehavior: [ 'type', DataInputAssociationBehavior ],\n  dataStoreBehavior: [ 'type', DataStoreBehavior ],\n  deleteLaneBehavior: [ 'type', DeleteLaneBehavior ],\n  detachEventBehavior: [ 'type', DetachEventBehavior ],\n  dropOnFlowBehavior: [ 'type', DropOnFlowBehavior ],\n  eventBasedGatewayBehavior: [ 'type', EventBasedGatewayBehavior ],\n  fixHoverBehavior: [ 'type', FixHoverBehavior ],\n  groupBehavior: [ 'type', GroupBehavior ],\n  importDockingFix: [ 'type', ImportDockingFix ],\n  isHorizontalFix: [ 'type', IsHorizontalFix ],\n  labelBehavior: [ 'type', LabelBehavior ],\n  layoutConnectionBehavior: [ 'type', LayoutConnectionBehavior ],\n  messageFlowBehavior: [ 'type', MessageFlowBehavior ],\n  nonInterruptingBehavior: [ 'type', NonInterruptingBehavior ],\n  removeElementBehavior: [ 'type', RemoveElementBehavior ],\n  removeEmbeddedLabelBoundsBehavior: [ 'type', RemoveEmbeddedLabelBoundsBehavior ],\n  removeParticipantBehavior: [ 'type', RemoveParticipantBehavior ],\n  replaceConnectionBehavior: [ 'type', ReplaceConnectionBehavior ],\n  replaceElementBehaviour: [ 'type', ReplaceElementBehaviour ],\n  resizeBehavior: [ 'type', ResizeBehavior ],\n  resizeLaneBehavior: [ 'type', ResizeLaneBehavior ],\n  rootElementReferenceBehavior: [ 'type', RootElementReferenceBehavior ],\n  spaceToolBehavior: [ 'type', SpaceToolBehavior ],\n  subProcessPlaneBehavior: [ 'type', SubProcessPlaneBehavior ],\n  subProcessStartEventBehavior: [ 'type', SubProcessStartEventBehavior ],\n  textAnnotationBehavior: [ 'type', TextAnnotationBehavior ],\n  toggleCollapseConnectionBehaviour: [ 'type', ToggleCollapseConnectionBehaviour ],\n  toggleElementCollapseBehaviour : [ 'type', ToggleElementCollapseBehaviour ],\n  unclaimIdBehavior: [ 'type', UnclaimIdBehavior ],\n  unsetDefaultFlowBehavior: [ 'type', UnsetDefaultFlowBehavior ],\n  updateFlowNodeRefsBehavior: [ 'type', UpdateFlowNodeRefsBehavior ],\n  setCompensationActivityAfterPasteBehavior: [ 'type', SetCompensationActivityAfterPasteBehavior ]\n};\n","import { getOrientation } from 'diagram-js/lib/layout/LayoutUtil';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/util/Types').DirectionTRBL} DirectionTRBL\r\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\r\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\r\n */\r\n\r\n/**\r\n * @param {Point} position\r\n * @param {Rect} targetBounds\r\n *\r\n * @return {DirectionTRBL|null}\r\n */\r\nexport function getBoundaryAttachment(position, targetBounds) {\r\n\r\n  var orientation = getOrientation(position, targetBounds, -15);\r\n\r\n  if (orientation !== 'intersect') {\r\n    return orientation;\r\n  } else {\r\n    return null;\r\n  }\r\n}","import {\n  every,\n  find,\n  forEach,\n  some\n} from 'min-dash';\n\nimport inherits from 'inherits-browser';\n\nimport {\n  is,\n  getBusinessObject\n} from '../../util/ModelUtil';\n\nimport {\n  getParent,\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  isLabel\n} from '../../util/LabelUtil';\n\nimport {\n  isExpanded,\n  isEventSubProcess,\n  isInterrupting,\n  hasErrorEventDefinition,\n  hasEscalationEventDefinition,\n  hasCompensateEventDefinition\n} from '../../util/DiUtil';\n\nimport RuleProvider from 'diagram-js/lib/features/rules/RuleProvider';\n\nimport {\n  getBoundaryAttachment as isBoundaryAttachment\n} from '../snapping/BpmnSnappingUtil';\n\nimport { isConnection } from 'diagram-js/lib/util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n *\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n *\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n *\n * @typedef { {\n *   associationDirection?: 'None' | 'One' | 'Both';\n *   type: string;\n * } | boolean | null } CanConnectResult\n *\n * @typedef { {\n *   id: string;\n *   type: string;\n * } | boolean } CanReplaceResult\n */\n\n/**\n * BPMN-specific modeling rules.\n *\n * @param {EventBus} eventBus\n */\nexport default function BpmnRules(eventBus) {\n  RuleProvider.call(this, eventBus);\n}\n\ninherits(BpmnRules, RuleProvider);\n\nBpmnRules.$inject = [ 'eventBus' ];\n\nBpmnRules.prototype.init = function() {\n\n  this.addRule('connection.start', function(context) {\n    var source = context.source;\n\n    return canStartConnection(source);\n  });\n\n  this.addRule('connection.create', function(context) {\n    var source = context.source,\n        target = context.target,\n        hints = context.hints || {},\n        targetParent = hints.targetParent,\n        targetAttach = hints.targetAttach;\n\n    // don't allow incoming connections on\n    // newly created boundary events\n    // to boundary events\n    if (targetAttach) {\n      return false;\n    }\n\n    // temporarily set target parent for scoping\n    // checks to work\n    if (targetParent) {\n      target.parent = targetParent;\n    }\n\n    try {\n      return canConnect(source, target);\n    } finally {\n\n      // unset temporary target parent\n      if (targetParent) {\n        target.parent = null;\n      }\n    }\n  });\n\n  this.addRule('connection.reconnect', function(context) {\n\n    var connection = context.connection,\n        source = context.source,\n        target = context.target;\n\n    return canConnect(source, target, connection);\n  });\n\n  this.addRule('connection.updateWaypoints', function(context) {\n    return {\n      type: context.connection.type\n    };\n  });\n\n  this.addRule('shape.resize', function(context) {\n\n    var shape = context.shape,\n        newBounds = context.newBounds;\n\n    return canResize(shape, newBounds);\n  });\n\n  this.addRule('elements.create', function(context) {\n    var elements = context.elements,\n        position = context.position,\n        target = context.target;\n\n    if (isConnection(target) && !canInsert(elements, target, position)) {\n      return false;\n    }\n\n    return every(elements, function(element) {\n      if (isConnection(element)) {\n        return canConnect(element.source, element.target, element);\n      }\n\n      if (element.host) {\n        return canAttach(element, element.host, null, position);\n      }\n\n      return canCreate(element, target, null, position);\n    });\n  });\n\n  this.addRule('elements.move', function(context) {\n\n    var target = context.target,\n        shapes = context.shapes,\n        position = context.position;\n\n    return canAttach(shapes, target, null, position) ||\n           canReplace(shapes, target, position) ||\n           canMove(shapes, target, position) ||\n           canInsert(shapes, target, position);\n  });\n\n  this.addRule('shape.create', function(context) {\n    return canCreate(\n      context.shape,\n      context.target,\n      context.source,\n      context.position\n    );\n  });\n\n  this.addRule('shape.attach', function(context) {\n\n    return canAttach(\n      context.shape,\n      context.target,\n      null,\n      context.position\n    );\n  });\n\n  this.addRule('element.copy', function(context) {\n    var element = context.element,\n        elements = context.elements;\n\n    return canCopy(elements, element);\n  });\n};\n\nBpmnRules.prototype.canConnectMessageFlow = canConnectMessageFlow;\n\nBpmnRules.prototype.canConnectSequenceFlow = canConnectSequenceFlow;\n\nBpmnRules.prototype.canConnectDataAssociation = canConnectDataAssociation;\n\nBpmnRules.prototype.canConnectAssociation = canConnectAssociation;\n\nBpmnRules.prototype.canConnectCompensationAssociation = canConnectCompensationAssociation;\n\nBpmnRules.prototype.canMove = canMove;\n\nBpmnRules.prototype.canAttach = canAttach;\n\nBpmnRules.prototype.canReplace = canReplace;\n\nBpmnRules.prototype.canDrop = canDrop;\n\nBpmnRules.prototype.canInsert = canInsert;\n\nBpmnRules.prototype.canCreate = canCreate;\n\nBpmnRules.prototype.canConnect = canConnect;\n\nBpmnRules.prototype.canResize = canResize;\n\nBpmnRules.prototype.canCopy = canCopy;\n\n/**\n * Utility functions for rule checking\n */\n\n/**\n * Checks if given element can be used for starting connection.\n *\n * @param  {Element} source\n *\n * @return {boolean}\n */\nfunction canStartConnection(element) {\n  if (nonExistingOrLabel(element)) {\n    return null;\n  }\n\n  return isAny(element, [\n    'bpmn:FlowNode',\n    'bpmn:InteractionNode',\n    'bpmn:DataObjectReference',\n    'bpmn:DataStoreReference',\n    'bpmn:Group',\n    'bpmn:TextAnnotation'\n  ]);\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction nonExistingOrLabel(element) {\n  return !element || isLabel(element);\n}\n\nfunction isSame(a, b) {\n  return a === b;\n}\n\n/**\n * @param {Element} element\n *\n * @return {ModdleElement}\n */\nfunction getOrganizationalParent(element) {\n\n  do {\n    if (is(element, 'bpmn:Process')) {\n      return getBusinessObject(element);\n    }\n\n    if (is(element, 'bpmn:Participant')) {\n      return (\n        getBusinessObject(element).processRef ||\n        getBusinessObject(element)\n      );\n    }\n  } while ((element = element.parent));\n\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isTextAnnotation(element) {\n  return is(element, 'bpmn:TextAnnotation');\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isGroup(element) {\n  return is(element, 'bpmn:Group') && !element.labelTarget;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isCompensationBoundary(element) {\n  return is(element, 'bpmn:BoundaryEvent') &&\n         hasEventDefinition(element, 'bpmn:CompensateEventDefinition');\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isForCompensation(element) {\n  return getBusinessObject(element).isForCompensation;\n}\n\n/**\n * @param {Element} a\n * @param {Element} b\n *\n * @return {boolean}\n */\nfunction isSameOrganization(a, b) {\n  var parentA = getOrganizationalParent(a),\n      parentB = getOrganizationalParent(b);\n\n  return parentA === parentB;\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isMessageFlowSource(element) {\n  return (\n    is(element, 'bpmn:InteractionNode') &&\n    !is(element, 'bpmn:BoundaryEvent') && (\n      !is(element, 'bpmn:Event') || (\n        is(element, 'bpmn:ThrowEvent') &&\n        hasEventDefinitionOrNone(element, 'bpmn:MessageEventDefinition')\n      )\n    )\n  );\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isMessageFlowTarget(element) {\n  return (\n    is(element, 'bpmn:InteractionNode') &&\n    !isForCompensation(element) && (\n      !is(element, 'bpmn:Event') || (\n        is(element, 'bpmn:CatchEvent') &&\n        hasEventDefinitionOrNone(element, 'bpmn:MessageEventDefinition')\n      )\n    ) && !(\n      is(element, 'bpmn:BoundaryEvent') &&\n      !hasEventDefinition(element, 'bpmn:MessageEventDefinition')\n    )\n  );\n}\n\n/**\n * @param {Element} element\n *\n * @return {ModdleElement}\n */\nfunction getScopeParent(element) {\n\n  var parent = element;\n\n  while ((parent = parent.parent)) {\n\n    if (is(parent, 'bpmn:FlowElementsContainer')) {\n      return getBusinessObject(parent);\n    }\n\n    if (is(parent, 'bpmn:Participant')) {\n      return getBusinessObject(parent).processRef;\n    }\n  }\n\n  return null;\n}\n\n/**\n * @param {Element} a\n * @param {Element} b\n *\n * @return {boolean}\n */\nfunction isSameScope(a, b) {\n  var scopeParentA = getScopeParent(a),\n      scopeParentB = getScopeParent(b);\n\n  return scopeParentA === scopeParentB;\n}\n\n/**\n * @param {Element} element\n * @param {string} eventDefinition\n *\n * @return {boolean}\n */\nfunction hasEventDefinition(element, eventDefinition) {\n  var businessObject = getBusinessObject(element);\n\n  return !!find(businessObject.eventDefinitions || [], function(definition) {\n    return is(definition, eventDefinition);\n  });\n}\n\n/**\n * @param {Element} element\n * @param {string} eventDefinition\n *\n * @return {boolean}\n */\nfunction hasEventDefinitionOrNone(element, eventDefinition) {\n  var businessObject = getBusinessObject(element);\n\n  return (businessObject.eventDefinitions || []).every(function(definition) {\n    return is(definition, eventDefinition);\n  });\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isSequenceFlowSource(element) {\n  return (\n    is(element, 'bpmn:FlowNode') &&\n    !is(element, 'bpmn:EndEvent') &&\n    !isEventSubProcess(element) &&\n    !(is(element, 'bpmn:IntermediateThrowEvent') &&\n      hasEventDefinition(element, 'bpmn:LinkEventDefinition')\n    ) &&\n    !isCompensationBoundary(element) &&\n    !isForCompensation(element)\n  );\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isSequenceFlowTarget(element) {\n  return (\n    is(element, 'bpmn:FlowNode') &&\n    !is(element, 'bpmn:StartEvent') &&\n    !is(element, 'bpmn:BoundaryEvent') &&\n    !isEventSubProcess(element) &&\n    !(is(element, 'bpmn:IntermediateCatchEvent') &&\n      hasEventDefinition(element, 'bpmn:LinkEventDefinition')\n    ) &&\n    !isForCompensation(element)\n  );\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isEventBasedTarget(element) {\n  return (\n    is(element, 'bpmn:ReceiveTask') || (\n      is(element, 'bpmn:IntermediateCatchEvent') && (\n        hasEventDefinition(element, 'bpmn:MessageEventDefinition') ||\n        hasEventDefinition(element, 'bpmn:TimerEventDefinition') ||\n        hasEventDefinition(element, 'bpmn:ConditionalEventDefinition') ||\n        hasEventDefinition(element, 'bpmn:SignalEventDefinition')\n      )\n    )\n  );\n}\n\n/**\n * @param {Element} element\n *\n * @return {Shape[]}\n */\nfunction getParents(element) {\n\n  var parents = [];\n\n  while (element) {\n    element = element.parent;\n\n    if (element) {\n      parents.push(element);\n    }\n  }\n\n  return parents;\n}\n\n/**\n * @param {Shape} possibleParent\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isParent(possibleParent, element) {\n  var allParents = getParents(element);\n\n  return allParents.indexOf(possibleParent) !== -1;\n}\n\n/**\n * @param {Element} source\n * @param {Element} target\n * @param {Connection} connection\n *\n * @return {CanConnectResult}\n */\nfunction canConnect(source, target, connection) {\n\n  if (nonExistingOrLabel(source) || nonExistingOrLabel(target)) {\n    return null;\n  }\n\n  if (!is(connection, 'bpmn:DataAssociation')) {\n\n    if (canConnectMessageFlow(source, target)) {\n      return { type: 'bpmn:MessageFlow' };\n    }\n\n    if (canConnectSequenceFlow(source, target)) {\n      return { type: 'bpmn:SequenceFlow' };\n    }\n  }\n\n  var connectDataAssociation = canConnectDataAssociation(source, target);\n\n  if (connectDataAssociation) {\n    return connectDataAssociation;\n  }\n\n  if (canConnectCompensationAssociation(source, target)) {\n    return {\n      type: 'bpmn:Association',\n      associationDirection: 'One'\n    };\n  }\n\n  if (canConnectAssociation(source, target)) {\n    return {\n      type: 'bpmn:Association',\n      associationDirection: 'None'\n    };\n  }\n\n  return false;\n}\n\n/**\n * Can an element be dropped into the target element.\n *\n * @param {Element} element\n * @param {Shape} target\n *\n * @return {boolean}\n */\nfunction canDrop(element, target) {\n\n  // can move labels and groups everywhere\n  if (isLabel(element) || isGroup(element)) {\n    return true;\n  }\n\n\n  // disallow to create elements on collapsed pools\n  if (is(target, 'bpmn:Participant') && !isExpanded(target)) {\n    return false;\n  }\n\n  // allow to create new participants on\n  // existing collaboration and process diagrams\n  if (is(element, 'bpmn:Participant')) {\n    return is(target, 'bpmn:Process') || is(target, 'bpmn:Collaboration');\n  }\n\n  // allow moving DataInput / DataOutput within its original container only\n  if (isAny(element, [ 'bpmn:DataInput', 'bpmn:DataOutput' ])) {\n\n    if (element.parent) {\n      return target === element.parent;\n    }\n  }\n\n  // allow creating lanes on participants and other lanes only\n  if (is(element, 'bpmn:Lane')) {\n    return is(target, 'bpmn:Participant') || is(target, 'bpmn:Lane');\n  }\n\n  // disallow dropping boundary events which cannot replace with intermediate event\n  if (is(element, 'bpmn:BoundaryEvent') && !isDroppableBoundaryEvent(element)) {\n    return false;\n  }\n\n  // drop flow elements onto flow element containers\n  // and participants\n  if (is(element, 'bpmn:FlowElement') && !is(element, 'bpmn:DataStoreReference')) {\n    if (is(target, 'bpmn:FlowElementsContainer')) {\n      return isExpanded(target);\n    }\n\n    return isAny(target, [ 'bpmn:Participant', 'bpmn:Lane' ]);\n  }\n\n  // disallow dropping data store reference if there is no process to append to\n  if (is(element, 'bpmn:DataStoreReference') && is(target, 'bpmn:Collaboration')) {\n    return some(getBusinessObject(target).get('participants'), function(participant) {\n      return !!participant.get('processRef');\n    });\n  }\n\n  // account for the fact that data associations are always\n  // rendered and moved to top (Process or Collaboration level)\n  //\n  // artifacts may be placed wherever, too\n  if (isAny(element, [ 'bpmn:Artifact', 'bpmn:DataAssociation', 'bpmn:DataStoreReference' ])) {\n    return isAny(target, [\n      'bpmn:Collaboration',\n      'bpmn:Lane',\n      'bpmn:Participant',\n      'bpmn:Process',\n      'bpmn:SubProcess' ]);\n  }\n\n  if (is(element, 'bpmn:MessageFlow')) {\n    return is(target, 'bpmn:Collaboration')\n      || element.source.parent == target\n      || element.target.parent == target;\n  }\n\n  return false;\n}\n\n/**\n * @param {Shape} event\n *\n * @return {boolean}\n */\nfunction isDroppableBoundaryEvent(event) {\n  return getBusinessObject(event).cancelActivity && (\n    hasNoEventDefinition(event) || hasCommonBoundaryIntermediateEventDefinition(event)\n  );\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isBoundaryEvent(element) {\n  return !isLabel(element) && is(element, 'bpmn:BoundaryEvent');\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isLane(element) {\n  return is(element, 'bpmn:Lane');\n}\n\n/**\n * `bpmn:IntermediateThrowEvents` are treated as boundary events during create.\n *\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isBoundaryCandidate(element) {\n  if (isBoundaryEvent(element)) {\n    return true;\n  }\n\n  if (is(element, 'bpmn:IntermediateThrowEvent') && hasNoEventDefinition(element)) {\n    return true;\n  }\n\n  return (\n    is(element, 'bpmn:IntermediateCatchEvent') &&\n    hasCommonBoundaryIntermediateEventDefinition(element)\n  );\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction hasNoEventDefinition(element) {\n  var businessObject = getBusinessObject(element);\n\n  return businessObject && !(businessObject.eventDefinitions && businessObject.eventDefinitions.length);\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction hasCommonBoundaryIntermediateEventDefinition(element) {\n  return hasOneOfEventDefinitions(element, [\n    'bpmn:MessageEventDefinition',\n    'bpmn:TimerEventDefinition',\n    'bpmn:SignalEventDefinition',\n    'bpmn:ConditionalEventDefinition'\n  ]);\n}\n\n/**\n * @param {Element} element\n * @param {string[]} eventDefinitions\n *\n * @return {boolean}\n */\nfunction hasOneOfEventDefinitions(element, eventDefinitions) {\n  return eventDefinitions.some(function(definition) {\n    return hasEventDefinition(element, definition);\n  });\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isReceiveTaskAfterEventBasedGateway(element) {\n  return (\n    is(element, 'bpmn:ReceiveTask') &&\n    find(element.incoming, function(incoming) {\n      return is(incoming.source, 'bpmn:EventBasedGateway');\n    })\n  );\n}\n\n/**\n * TODO(philippfromme): remove `source` parameter\n *\n * @param {Element[]} elements\n * @param {Shape} target\n * @param {Element} source\n * @param {Point} [position]\n *\n * @return {boolean | 'attach'}\n */\nfunction canAttach(elements, target, source, position) {\n\n  if (!Array.isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  // only (re-)attach one element at a time\n  if (elements.length !== 1) {\n    return false;\n  }\n\n  var element = elements[0];\n\n  // do not attach labels\n  if (isLabel(element)) {\n    return false;\n  }\n\n  // only handle boundary events\n  if (!isBoundaryCandidate(element)) {\n    return false;\n  }\n\n  // disallow drop on event sub processes\n  if (isEventSubProcess(target)) {\n    return false;\n  }\n\n  // only allow drop on non compensation activities\n  if (!is(target, 'bpmn:Activity') || isForCompensation(target)) {\n    return false;\n  }\n\n  // only attach to subprocess border\n  if (position && !isBoundaryAttachment(position, target)) {\n    return false;\n  }\n\n  // do not attach on receive tasks after event based gateways\n  if (isReceiveTaskAfterEventBasedGateway(target)) {\n    return false;\n  }\n\n  return 'attach';\n}\n\n/**\n * Check whether the given elements can be replaced. Return all elements which\n * can be replaced.\n *\n * @example\n *\n * ```javascript\n * [{\n *   id: 'IntermediateEvent_1',\n *   type: 'bpmn:StartEvent'\n * },\n * {\n *   id: 'Task_1',\n *   type: 'bpmn:ServiceTask'\n * }]\n * ```\n *\n * @param  {Element[]} elements\n * @param  {Shape} [target]\n * @param  {Point} [position]\n *\n * @return {CanReplaceResult}\n */\nfunction canReplace(elements, target, position) {\n\n  if (!target) {\n    return false;\n  }\n\n  var canExecute = {\n    replacements: []\n  };\n\n  forEach(elements, function(element) {\n\n    if (!isEventSubProcess(target)) {\n\n      if (is(element, 'bpmn:StartEvent') &&\n          element.type !== 'label' &&\n          canDrop(element, target)) {\n\n        // replace a non-interrupting start event by a blank interrupting start event\n        // when the target is not an event sub process\n        if (!isInterrupting(element)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:StartEvent'\n          });\n        }\n\n        // replace an error/escalation/compensate start event by a blank interrupting start event\n        // when the target is not an event sub process\n        if (hasErrorEventDefinition(element) ||\n            hasEscalationEventDefinition(element) ||\n            hasCompensateEventDefinition(element)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:StartEvent'\n          });\n        }\n\n        // replace a typed start event by a blank interrupting start event\n        // when the target is a sub process but not an event sub process\n        if (hasOneOfEventDefinitions(element,\n          [\n            'bpmn:MessageEventDefinition',\n            'bpmn:TimerEventDefinition',\n            'bpmn:SignalEventDefinition',\n            'bpmn:ConditionalEventDefinition'\n          ]) &&\n            is(target, 'bpmn:SubProcess')) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:StartEvent'\n          });\n        }\n      }\n    }\n\n    if (!is(target, 'bpmn:Transaction')) {\n      if (hasEventDefinition(element, 'bpmn:CancelEventDefinition') &&\n          element.type !== 'label') {\n\n        if (is(element, 'bpmn:EndEvent') && canDrop(element, target)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:EndEvent'\n          });\n        }\n\n        if (is(element, 'bpmn:BoundaryEvent') && canAttach(element, target, null, position)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:BoundaryEvent'\n          });\n        }\n      }\n    }\n  });\n\n  return canExecute.replacements.length ? canExecute : false;\n}\n\n/**\n * @param {Element[]} elements\n * @param {Shape} target\n *\n * @return {boolean}\n */\nfunction canMove(elements, target) {\n\n  // do not move selection containing lanes\n  if (some(elements, isLane)) {\n    return false;\n  }\n\n  // allow default move check to start move operation\n  if (!target) {\n    return true;\n  }\n\n  return elements.every(function(element) {\n    return canDrop(element, target);\n  });\n}\n\n/**\n * @param {Shape} shape\n * @param {Shape} target\n * @param {Element} source\n * @param {Point} position\n *\n * @return {boolean}\n */\nfunction canCreate(shape, target, source, position) {\n\n  if (!target) {\n    return false;\n  }\n\n  if (isLabel(shape) || isGroup(shape)) {\n    return true;\n  }\n\n  if (isSame(source, target)) {\n    return false;\n  }\n\n  // ensure we do not drop the element\n  // into source\n  if (source && isParent(source, target)) {\n    return false;\n  }\n\n  return canDrop(shape, target, position) || canInsert(shape, target, position);\n}\n\n/**\n * @param {Shape} shape\n * @param {Rect} newBounds\n *\n * @return {boolean}\n */\nfunction canResize(shape, newBounds) {\n  if (is(shape, 'bpmn:SubProcess')) {\n    return (\n      isExpanded(shape) && (\n        !newBounds || (newBounds.width >= 100 && newBounds.height >= 80)\n      )\n    );\n  }\n\n  if (is(shape, 'bpmn:Lane')) {\n    return true;\n  }\n\n  if (is(shape, 'bpmn:Participant')) {\n    return true;\n  }\n\n  if (isTextAnnotation(shape)) {\n    return true;\n  }\n\n  if (isGroup(shape)) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Check whether one of of the elements to be connected is a text annotation.\n *\n * @param {Element} source\n * @param {Element} target\n *\n * @return {boolean}\n */\nfunction isOneTextAnnotation(source, target) {\n\n  var sourceTextAnnotation = isTextAnnotation(source),\n      targetTextAnnotation = isTextAnnotation(target);\n\n  return (\n    (sourceTextAnnotation || targetTextAnnotation) &&\n    (sourceTextAnnotation !== targetTextAnnotation)\n  );\n}\n\n/**\n * @param {Element} source\n * @param {Element} target\n *\n * @return {CanConnectResult}\n */\nfunction canConnectAssociation(source, target) {\n\n  // don't connect parent <-> child\n  if (isParent(target, source) || isParent(source, target)) {\n    return false;\n  }\n\n  // allow connection of associations between <!TextAnnotation> and <TextAnnotation>\n  if (isOneTextAnnotation(source, target)) {\n    return true;\n  }\n\n  // can connect associations where we can connect\n  // data associations, too (!)\n  return !!canConnectDataAssociation(source, target);\n}\n\n/**\n * @param {Element} source\n * @param {Element} target\n *\n * @return {boolean}\n */\nfunction canConnectCompensationAssociation(source, target) {\n  return (\n    isSameScope(source, target) &&\n    isCompensationBoundary(source) &&\n    is(target, 'bpmn:Activity') &&\n    !isHostOfElement(target, source) &&\n    !isEventSubProcess(target)\n  );\n}\n\n/**\n * @param {Element} source\n * @param {Element} target\n *\n * @return {boolean}\n */\nfunction canConnectMessageFlow(source, target) {\n\n  // during connect user might move mouse out of canvas\n  // https://github.com/bpmn-io/bpmn-js/issues/1033\n  if (getRootElement(source) && !getRootElement(target)) {\n    return false;\n  }\n\n  return (\n    isMessageFlowSource(source) &&\n    isMessageFlowTarget(target) &&\n    !isSameOrganization(source, target)\n  );\n}\n\n/**\n * @param {Element} source\n * @param {Element} target\n *\n * @return {boolean}\n */\nfunction canConnectSequenceFlow(source, target) {\n  return isSequenceFlowSource(source) &&\n         isSequenceFlowTarget(target) &&\n         isSameScope(source, target) &&\n         !(is(source, 'bpmn:EventBasedGateway') && !isEventBasedTarget(target));\n}\n\n/**\n * @param {Element} source\n * @param {Element} target\n *\n * @return {CanConnectResult}\n */\nfunction canConnectDataAssociation(source, target) {\n\n  if (isAny(source, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ]) &&\n      isAny(target, [ 'bpmn:Activity', 'bpmn:ThrowEvent' ])) {\n    return { type: 'bpmn:DataInputAssociation' };\n  }\n\n  if (isAny(target, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ]) &&\n      isAny(source, [ 'bpmn:Activity', 'bpmn:CatchEvent' ])) {\n    return { type: 'bpmn:DataOutputAssociation' };\n  }\n\n  return false;\n}\n\n/**\n * @param {Shape} shape\n * @param {Connection} connection\n * @param {Point} position\n *\n * @return {boolean}\n */\nfunction canInsert(shape, connection, position) {\n  if (!connection) {\n    return false;\n  }\n\n  if (Array.isArray(shape)) {\n    if (shape.length !== 1) {\n      return false;\n    }\n\n    shape = shape[ 0 ];\n  }\n\n  if (connection.source === shape ||\n      connection.target === shape) {\n    return false;\n  }\n\n  // return true if shape can be inserted into connection parent\n  return (\n    isAny(connection, [ 'bpmn:SequenceFlow', 'bpmn:MessageFlow' ]) &&\n    !isLabel(connection) &&\n    is(shape, 'bpmn:FlowNode') &&\n    !is(shape, 'bpmn:BoundaryEvent') &&\n    canDrop(shape, connection.parent, position));\n}\n\n/**\n * @param {Element[]} elements\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction includes(elements, element) {\n  return (elements && element) && elements.indexOf(element) !== -1;\n}\n\n/**\n * @param {Element[]} elements\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction canCopy(elements, element) {\n  if (isLabel(element)) {\n    return true;\n  }\n\n  if (is(element, 'bpmn:Lane') && !includes(elements, element.parent)) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * @param {Element} element\n *\n * @return {Element|null}\n */\nfunction getRootElement(element) {\n  return getParent(element, 'bpmn:Process') || getParent(element, 'bpmn:Collaboration');\n}\n\nfunction isHostOfElement(potentialHost, element) {\n  return potentialHost.attachers.includes(element);\n}\n","import RulesModule from 'diagram-js/lib/features/rules';\n\nimport BpmnRules from './BpmnRules';\n\nexport default {\n  __depends__: [\n    RulesModule\n  ],\n  __init__: [ 'bpmnRules' ],\n  bpmnRules: [ 'type', BpmnRules ]\n};\n","import { getDi } from '../../util/ModelUtil';\n\nimport {\n  filter,\n  forEach,\n  map\n} from 'min-dash';\n\nimport { selfAndAllChildren } from 'diagram-js/lib/util/Elements';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n */\n\nvar HIGH_PRIORITY = 2000;\n\n/**\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function BpmnDiOrdering(eventBus, canvas) {\n\n  eventBus.on('saveXML.start', HIGH_PRIORITY, orderDi);\n\n  function orderDi() {\n    var rootElements = canvas.getRootElements();\n\n    forEach(rootElements, function(root) {\n      var rootDi = getDi(root),\n          elements,\n          diElements;\n\n      elements = selfAndAllChildren([ root ], false);\n\n      // only bpmndi:Shape and bpmndi:Edge can be direct children of bpmndi:Plane\n      elements = filter(elements, function(element) {\n        return element !== root && !element.labelTarget;\n      });\n\n      diElements = map(elements, getDi);\n\n      rootDi.set('planeElement', diElements);\n    });\n  }\n}\n\nBpmnDiOrdering.$inject = [ 'eventBus', 'canvas' ];\n","import BpmnDiOrdering from '../di-ordering/BpmnDiOrdering';\n\nexport default {\n  __init__: [\n    'bpmnDiOrdering'\n  ],\n  bpmnDiOrdering: [ 'type', BpmnDiOrdering ]\n};","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n/**\n * @typedef {import('../../core/Types').ElementLike} Element\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\n/**\n * An abstract provider that allows modelers to implement a custom\n * ordering of diagram elements on the canvas.\n *\n * It makes sure that the order is always preserved during element\n * creation and move operations.\n *\n * In order to use this behavior, inherit from it and override\n * the method {@link OrderingProvider#getOrdering}.\n *\n * @example\n *\n * ```javascript\n * function CustomOrderingProvider(eventBus) {\n *   OrderingProvider.call(this, eventBus);\n *\n *   this.getOrdering = function(element, newParent) {\n *     // always insert elements at the front\n *     // when moving\n *     return {\n *       index: 0,\n *       parent: newParent\n *     };\n *   };\n * }\n * ```\n *\n * @param {EventBus} eventBus\n */\nexport default function OrderingProvider(eventBus) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  var self = this;\n\n  this.preExecute([ 'shape.create', 'connection.create' ], function(event) {\n\n    var context = event.context,\n        element = context.shape || context.connection,\n        parent = context.parent;\n\n    var ordering = self.getOrdering(element, parent);\n\n    if (ordering) {\n\n      if (ordering.parent !== undefined) {\n        context.parent = ordering.parent;\n      }\n\n      context.parentIndex = ordering.index;\n    }\n  });\n\n  this.preExecute([ 'shape.move', 'connection.move' ], function(event) {\n\n    var context = event.context,\n        element = context.shape || context.connection,\n        parent = context.newParent || element.parent;\n\n    var ordering = self.getOrdering(element, parent);\n\n    if (ordering) {\n\n      if (ordering.parent !== undefined) {\n        context.newParent = ordering.parent;\n      }\n\n      context.newParentIndex = ordering.index;\n    }\n  });\n}\n\n/**\n * Return a custom ordering of the element, both in terms\n * of parent element and index in the new parent.\n *\n * Implementors of this method must return an object with\n * `parent` _and_ `index` in it.\n *\n * @param {Element} element\n * @param {Shape} newParent\n *\n * @return {Object} ordering descriptor\n */\nOrderingProvider.prototype.getOrdering = function(element, newParent) {\n  return null;\n};\n\ninherits(OrderingProvider, CommandInterceptor);","import inherits from 'inherits-browser';\n\nimport OrderingProvider from 'diagram-js/lib/features/ordering/OrderingProvider';\n\nimport {\n  is,\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  findIndex,\n  find\n} from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\n/**\n * A BPMN-specific ordering provider.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function BpmnOrderingProvider(eventBus, canvas) {\n\n  OrderingProvider.call(this, eventBus);\n\n  var orders = [\n    { type: 'bpmn:SubProcess', order: { level: 6 } },\n\n    // handle SequenceFlow(s) like message flows and render them always on top\n    {\n      type: 'bpmn:SequenceFlow',\n      order: {\n        level: 9,\n        containers: [\n          'bpmn:Participant',\n          'bpmn:FlowElementsContainer'\n        ]\n      }\n    },\n\n    // handle DataAssociation(s) like message flows and render them always on top\n    {\n      type: 'bpmn:DataAssociation',\n      order: {\n        level: 9,\n        containers: [\n          'bpmn:Collaboration',\n          'bpmn:FlowElementsContainer'\n        ]\n      }\n    },\n    {\n      type: 'bpmn:TextAnnotation',\n      order: {\n        level: 9\n      }\n    },\n    {\n      type: 'bpmn:MessageFlow', order: {\n        level: 9,\n        containers: [ 'bpmn:Collaboration' ]\n      }\n    },\n    {\n      type: 'bpmn:Association',\n      order: {\n        level: 6,\n        containers: [\n          'bpmn:Participant',\n          'bpmn:FlowElementsContainer',\n          'bpmn:Collaboration'\n        ]\n      }\n    },\n    { type: 'bpmn:BoundaryEvent', order: { level: 8 } },\n    {\n      type: 'bpmn:Group',\n      order: {\n        level: 10,\n        containers: [\n          'bpmn:Collaboration',\n          'bpmn:FlowElementsContainer'\n        ]\n      }\n    },\n    { type: 'bpmn:FlowElement', order: { level: 5 } },\n    { type: 'bpmn:Participant', order: { level: -2 } },\n    { type: 'bpmn:Lane', order: { level: -1 } }\n  ];\n\n  function computeOrder(element) {\n    if (element.labelTarget) {\n      return { level: 10 };\n    }\n\n    var entry = find(orders, function(o) {\n      return isAny(element, [ o.type ]);\n    });\n\n    return entry && entry.order || { level: 1 };\n  }\n\n  function getOrder(element) {\n\n    var order = element.order;\n\n    if (!order) {\n      element.order = order = computeOrder(element);\n    }\n\n    if (!order) {\n      throw new Error(`no order for <${ element.id }>`);\n    }\n\n    return order;\n  }\n\n  function findActualParent(element, newParent, containers) {\n\n    var actualParent = newParent;\n\n    while (actualParent) {\n\n      if (isAny(actualParent, containers)) {\n        break;\n      }\n\n      actualParent = actualParent.parent;\n    }\n\n    if (!actualParent) {\n      throw new Error(`no parent for <${ element.id }> in <${ newParent && newParent.id }>`);\n    }\n\n    return actualParent;\n  }\n\n  this.getOrdering = function(element, newParent) {\n\n    // render labels and text annotations always on top\n    if (element.labelTarget || is(element, 'bpmn:TextAnnotation')) {\n      return {\n        parent: canvas.findRoot(newParent) || canvas.getRootElement(),\n        index: -1\n      };\n    }\n\n    var elementOrder = getOrder(element);\n\n    if (elementOrder.containers) {\n      newParent = findActualParent(element, newParent, elementOrder.containers);\n    }\n\n    var currentIndex = newParent.children.indexOf(element);\n\n    var insertIndex = findIndex(newParent.children, function(child) {\n\n      // do not compare with labels, they are created\n      // in the wrong order (right after elements) during import and\n      // mess up the positioning.\n      if (!element.labelTarget && child.labelTarget) {\n        return false;\n      }\n\n      return elementOrder.level < getOrder(child).level;\n    });\n\n\n    // if the element is already in the child list at\n    // a smaller index, we need to adjust the insert index.\n    // this takes into account that the element is being removed\n    // before being re-inserted\n    if (insertIndex !== -1) {\n      if (currentIndex !== -1 && currentIndex < insertIndex) {\n        insertIndex -= 1;\n      }\n    }\n\n    return {\n      index: insertIndex,\n      parent: newParent\n    };\n  };\n}\n\nBpmnOrderingProvider.$inject = [ 'eventBus', 'canvas' ];\n\ninherits(BpmnOrderingProvider, OrderingProvider);","import BpmnOrderingProvider from './BpmnOrderingProvider';\n\nexport default {\n  __init__: [ 'bpmnOrderingProvider' ],\n  bpmnOrderingProvider: [ 'type', BpmnOrderingProvider ]\n};","/**\n * A clip board stub\n */\nexport default function Clipboard() {}\n\n\nClipboard.prototype.get = function() {\n  return this._data;\n};\n\nClipboard.prototype.set = function(data) {\n  this._data = data;\n};\n\nClipboard.prototype.clear = function() {\n  var data = this._data;\n\n  delete this._data;\n\n  return data;\n};\n\nClipboard.prototype.isEmpty = function() {\n  return !this._data;\n};","import Clipboard from './Clipboard';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  clipboard: [ 'type', Clipboard ]\n};\n","var MARKER_OK = 'drop-ok',\n    MARKER_NOT_OK = 'drop-not-ok',\n    MARKER_ATTACH = 'attach-ok',\n    MARKER_NEW_PARENT = 'new-parent';\n\nimport {\n  assign,\n  filter,\n  find,\n  forEach,\n  isArray,\n  isNumber,\n  map\n} from 'min-dash';\n\nimport { getBBox } from '../../util/Elements';\n\nimport {\n  isConnection,\n  isLabel\n} from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../core/Types').ElementLike} Element\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n */\n\nvar PREFIX = 'create';\n\nvar HIGH_PRIORITY = 2000;\n\n\n/**\n * Create new elements through drag and drop.\n *\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function Create(\n    canvas,\n    dragging,\n    eventBus,\n    modeling,\n    rules\n) {\n\n  // rules //////////\n\n  /**\n   * Check wether elements can be created.\n   *\n   * @param {Element[]} elements\n   * @param {Shape} target\n   * @param {Point} position\n   * @param {Element} [source]\n   *\n   * @return {boolean|null|Object}\n   */\n  function canCreate(elements, target, position, source, hints) {\n    if (!target) {\n      return false;\n    }\n\n    // ignore child elements and external labels\n    elements = filter(elements, function(element) {\n      var labelTarget = element.labelTarget;\n\n      return !element.parent && !(isLabel(element) && elements.indexOf(labelTarget) !== -1);\n    });\n\n    var shape = find(elements, function(element) {\n      return !isConnection(element);\n    });\n\n    var attach = false,\n        connect = false,\n        create = false;\n\n    // (1) attaching single shapes\n    if (isSingleShape(elements)) {\n      attach = rules.allowed('shape.attach', {\n        position: position,\n        shape: shape,\n        target: target\n      });\n    }\n\n    if (!attach) {\n\n      // (2) creating elements\n      if (isSingleShape(elements)) {\n        create = rules.allowed('shape.create', {\n          position: position,\n          shape: shape,\n          source: source,\n          target: target\n        });\n      } else {\n        create = rules.allowed('elements.create', {\n          elements: elements,\n          position: position,\n          target: target\n        });\n      }\n\n    }\n\n    var connectionTarget = hints.connectionTarget;\n\n    // (3) appending single shapes\n    if (create || attach) {\n      if (shape && source) {\n        connect = rules.allowed('connection.create', {\n          source: connectionTarget === source ? shape : source,\n          target: connectionTarget === source ? source : shape,\n          hints: {\n            targetParent: target,\n            targetAttach: attach\n          }\n        });\n      }\n\n      return {\n        attach: attach,\n        connect: connect\n      };\n    }\n\n    // ignore wether or not elements can be created\n    if (create === null || attach === null) {\n      return null;\n    }\n\n    return false;\n  }\n\n  function setMarker(element, marker) {\n    [ MARKER_ATTACH, MARKER_OK, MARKER_NOT_OK, MARKER_NEW_PARENT ].forEach(function(m) {\n\n      if (m === marker) {\n        canvas.addMarker(element, m);\n      } else {\n        canvas.removeMarker(element, m);\n      }\n    });\n  }\n\n  // event handling //////////\n\n  eventBus.on([ 'create.move', 'create.hover' ], function(event) {\n    var context = event.context,\n        elements = context.elements,\n        hover = event.hover,\n        source = context.source,\n        hints = context.hints || {};\n\n    if (!hover) {\n      context.canExecute = false;\n      context.target = null;\n\n      return;\n    }\n\n    ensureConstraints(event);\n\n    var position = {\n      x: event.x,\n      y: event.y\n    };\n\n    var canExecute = context.canExecute = hover && canCreate(elements, hover, position, source, hints);\n\n    if (hover && canExecute !== null) {\n      context.target = hover;\n\n      if (canExecute && canExecute.attach) {\n        setMarker(hover, MARKER_ATTACH);\n      } else {\n        setMarker(hover, canExecute ? MARKER_NEW_PARENT : MARKER_NOT_OK);\n      }\n    }\n  });\n\n  eventBus.on([ 'create.end', 'create.out', 'create.cleanup' ], function(event) {\n    var hover = event.hover;\n\n    if (hover) {\n      setMarker(hover, null);\n    }\n  });\n\n  eventBus.on('create.end', function(event) {\n    var context = event.context,\n        source = context.source,\n        shape = context.shape,\n        elements = context.elements,\n        target = context.target,\n        canExecute = context.canExecute,\n        attach = canExecute && canExecute.attach,\n        connect = canExecute && canExecute.connect,\n        hints = context.hints || {};\n\n    if (canExecute === false || !target) {\n      return false;\n    }\n\n    ensureConstraints(event);\n\n    var position = {\n      x: event.x,\n      y: event.y\n    };\n\n    if (connect) {\n      shape = modeling.appendShape(source, shape, position, target, {\n        attach: attach,\n        connection: connect === true ? {} : connect,\n        connectionTarget: hints.connectionTarget\n      });\n    } else {\n      elements = modeling.createElements(elements, position, target, assign({}, hints, {\n        attach: attach\n      }));\n\n      // update shape\n      shape = find(elements, function(element) {\n        return !isConnection(element);\n      });\n    }\n\n    // update elements and shape\n    assign(context, {\n      elements: elements,\n      shape: shape\n    });\n\n    assign(event, {\n      elements: elements,\n      shape: shape\n    });\n  });\n\n  function cancel() {\n    var context = dragging.context();\n\n    if (context && context.prefix === PREFIX) {\n      dragging.cancel();\n    }\n  }\n\n  // cancel on <elements.changed> that is not result of <drag.end>\n  eventBus.on('create.init', function() {\n    eventBus.on('elements.changed', cancel);\n\n    eventBus.once([ 'create.cancel', 'create.end' ], HIGH_PRIORITY, function() {\n      eventBus.off('elements.changed', cancel);\n    });\n  });\n\n  // API //////////\n\n  /**\n   * @param event\n   * @param elements\n   * @param {any} [context={}]\n   */\n  this.start = function(event, elements, context) {\n    if (!isArray(elements)) {\n      elements = [ elements ];\n    }\n\n    var shape = find(elements, function(element) {\n      return !isConnection(element);\n    });\n\n    if (!shape) {\n\n      // at least one shape is required\n      return;\n    }\n\n    context = assign({\n      elements: elements,\n      hints: {},\n      shape: shape\n    }, context || {});\n\n    // make sure each element has x and y\n    forEach(elements, function(element) {\n      if (!isNumber(element.x)) {\n        element.x = 0;\n      }\n\n      if (!isNumber(element.y)) {\n        element.y = 0;\n      }\n    });\n\n    var visibleElements = filter(elements, function(element) {\n      return !element.hidden;\n    });\n\n    var bbox = getBBox(visibleElements);\n\n    // center elements around cursor\n    forEach(elements, function(element) {\n      if (isConnection(element)) {\n        element.waypoints = map(element.waypoints, function(waypoint) {\n          return {\n            x: waypoint.x - bbox.x - bbox.width / 2,\n            y: waypoint.y - bbox.y - bbox.height / 2\n          };\n        });\n      }\n\n      assign(element, {\n        x: element.x - bbox.x - bbox.width / 2,\n        y: element.y - bbox.y - bbox.height / 2\n      });\n    });\n\n    dragging.init(event, PREFIX, {\n      cursor: 'grabbing',\n      autoActivate: true,\n      data: {\n        shape: shape,\n        elements: elements,\n        context: context\n      }\n    });\n  };\n}\n\nCreate.$inject = [\n  'canvas',\n  'dragging',\n  'eventBus',\n  'modeling',\n  'rules'\n];\n\n// helpers //////////\n\nfunction ensureConstraints(event) {\n  var context = event.context,\n      createConstraints = context.createConstraints;\n\n  if (!createConstraints) {\n    return;\n  }\n\n  if (createConstraints.left) {\n    event.x = Math.max(event.x, createConstraints.left);\n  }\n\n  if (createConstraints.right) {\n    event.x = Math.min(event.x, createConstraints.right);\n  }\n\n  if (createConstraints.top) {\n    event.y = Math.max(event.y, createConstraints.top);\n  }\n\n  if (createConstraints.bottom) {\n    event.y = Math.min(event.y, createConstraints.bottom);\n  }\n}\n\nfunction isSingleShape(elements) {\n  return elements && elements.length === 1 && !isConnection(elements[ 0 ]);\n}","import {\r\n  translate\r\n} from '../../util/SvgTransformUtil';\r\n\r\nimport { getVisual } from '../../util/GraphicsUtil';\r\n\r\nimport {\r\n  append as svgAppend,\r\n  attr as svgAttr,\r\n  create as svgCreate,\r\n  remove as svgRemove\r\n} from 'tiny-svg';\r\n\r\n/**\r\n * @typedef {import('../../core/Canvas').default} Canvas\r\n * @typedef {import('../../core/EventBus').default} EventBus\r\n * @typedef {import('../../core/GraphicsFactory').default} GraphicsFactory\r\n * @typedef {import('../preview-support/PreviewSupport').default} PreviewSupport\r\n * @typedef {import('../../draw/Styles').default} Styles\r\n */\r\n\r\nvar LOW_PRIORITY = 750;\r\n\r\n/**\r\n * @param {Canvas} canvas\r\n * @param {EventBus} eventBus\r\n * @param {GraphicsFactory} graphicsFactory\r\n * @param {PreviewSupport} previewSupport\r\n * @param {Styles} styles\r\n */\r\nexport default function CreatePreview(\r\n    canvas,\r\n    eventBus,\r\n    graphicsFactory,\r\n    previewSupport,\r\n    styles\r\n) {\r\n  function createDragGroup(elements) {\r\n    var dragGroup = svgCreate('g');\r\n\r\n    svgAttr(dragGroup, styles.cls('djs-drag-group', [ 'no-events' ]));\r\n\r\n    var childrenGfx = svgCreate('g');\r\n\r\n    elements.forEach(function(element) {\r\n\r\n      // create graphics\r\n      var gfx;\r\n\r\n      if (element.hidden) {\r\n        return;\r\n      }\r\n\r\n      if (element.waypoints) {\r\n        gfx = graphicsFactory._createContainer('connection', childrenGfx);\r\n\r\n        graphicsFactory.drawConnection(getVisual(gfx), element);\r\n      } else {\r\n        gfx = graphicsFactory._createContainer('shape', childrenGfx);\r\n\r\n        graphicsFactory.drawShape(getVisual(gfx), element);\r\n\r\n        translate(gfx, element.x, element.y);\r\n      }\r\n\r\n      // add preview\r\n      previewSupport.addDragger(element, dragGroup, gfx);\r\n    });\r\n\r\n    return dragGroup;\r\n  }\r\n\r\n  eventBus.on('create.move', LOW_PRIORITY, function(event) {\r\n\r\n    var hover = event.hover,\r\n        context = event.context,\r\n        elements = context.elements,\r\n        dragGroup = context.dragGroup;\r\n\r\n    // lazily create previews\r\n    if (!dragGroup) {\r\n      dragGroup = context.dragGroup = createDragGroup(elements);\r\n    }\r\n\r\n    var activeLayer;\r\n\r\n    if (hover) {\r\n      if (!dragGroup.parentNode) {\r\n        activeLayer = canvas.getActiveLayer();\r\n\r\n        svgAppend(activeLayer, dragGroup);\r\n      }\r\n\r\n      translate(dragGroup, event.x, event.y);\r\n    } else {\r\n      svgRemove(dragGroup);\r\n    }\r\n  });\r\n\r\n  eventBus.on('create.cleanup', function(event) {\r\n    var context = event.context,\r\n        dragGroup = context.dragGroup;\r\n\r\n    if (dragGroup) {\r\n      svgRemove(dragGroup);\r\n    }\r\n  });\r\n}\r\n\r\nCreatePreview.$inject = [\r\n  'canvas',\r\n  'eventBus',\r\n  'graphicsFactory',\r\n  'previewSupport',\r\n  'styles'\r\n];\r\n","import DraggingModule from '../dragging';\nimport PreviewSupportModule from '../preview-support';\nimport RulesModule from '../rules';\nimport SelectionModule from '../selection';\n\nimport Create from './Create';\nimport CreatePreview from './CreatePreview';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    DraggingModule,\n    PreviewSupportModule,\n    RulesModule,\n    SelectionModule\n  ],\n  __init__: [\n    'create',\n    'createPreview'\n  ],\n  create: [ 'type', Create ],\n  createPreview: [ 'type', CreatePreview ]\n};\n","/**\r\n * @typedef {import('../../core/EventBus').default} EventBus\r\n */\r\n\r\n/**\r\n * @param {EventBus} eventBus\r\n */\r\nexport default function Mouse(eventBus) {\r\n  var self = this;\r\n\r\n  this._lastMoveEvent = null;\r\n\r\n  function setLastMoveEvent(mousemoveEvent) {\r\n    self._lastMoveEvent = mousemoveEvent;\r\n  }\r\n\r\n  eventBus.on('canvas.init', function(context) {\r\n    var svg = self._svg = context.svg;\r\n\r\n    svg.addEventListener('mousemove', setLastMoveEvent);\r\n  });\r\n\r\n  eventBus.on('canvas.destroy', function() {\r\n    self._lastMouseEvent = null;\r\n\r\n    self._svg.removeEventListener('mousemove', setLastMoveEvent);\r\n  });\r\n}\r\n\r\nMouse.$inject = [ 'eventBus' ];\r\n\r\nMouse.prototype.getLastMoveEvent = function() {\r\n  return this._lastMoveEvent || createMoveEvent(0, 0);\r\n};\r\n\r\n// helpers //////////\r\n\r\nexport function createMoveEvent(x, y) {\r\n  var event = document.createEvent('MouseEvent');\r\n\r\n  var screenX = x,\r\n      screenY = y,\r\n      clientX = x,\r\n      clientY = y;\r\n\r\n  if (event.initMouseEvent) {\r\n    event.initMouseEvent(\r\n      'mousemove',\r\n      true,\r\n      true,\r\n      window,\r\n      0,\r\n      screenX,\r\n      screenY,\r\n      clientX,\r\n      clientY,\r\n      false,\r\n      false,\r\n      false,\r\n      false,\r\n      0,\r\n      null\r\n    );\r\n  }\r\n\r\n  return event;\r\n}","import Mouse from './Mouse';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'mouse' ],\n  mouse: [ 'type', Mouse ]\n};\n","import {\n  assign,\n  find,\n  forEach,\n  isArray,\n  isNumber,\n  map,\n  matchPattern,\n  omit,\n  sortBy\n} from 'min-dash';\n\nimport {\n  getBBox,\n  getParents\n} from '../../util/Elements';\n\nimport { eachElement } from '../../util/Elements';\n\nimport {\n  isConnection,\n  isLabel\n} from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../core/Types').ElementLike} Element\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../clipboard/Clipboard').default} Clipboard\n * @typedef {import('../create/Create').default} Create\n * @typedef {import('../../core/ElementFactory').default} ElementFactory\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../mouse/Mouse').default} Mouse\n * @typedef {import('../rules/Rules').default} Rules\n */\n\n/**\n * @typedef { (event: { elements: Element[] }) => Element[]|boolean } CopyPasteCanCopyElementsListener\n */\n\n/**\n * @typedef { (event: { descriptor: any, element: Element, elements: Element[] }) => void } CopyPasteCopyElementListener\n */\n\n/**\n * @typedef { (event: { element: Element, children: Element[] }) => void } CopyPasteCreateTreeListener\n */\n\n/**\n * @typedef { (event: { elements: any, tree: any }) => void } CopyPasteElementsCopiedListener\n */\n\n/**\n * @typedef { (event: { cache: any, descriptor: any }) => void } CopyPastePasteElementListener\n */\n\n/**\n * @typedef { (event: { hints: any }) => void } CopyPastePasteElementsListener\n */\n\n/**\n * Copy and paste elements.\n *\n * @param {Canvas} canvas\n * @param {Create} create\n * @param {Clipboard} clipboard\n * @param {ElementFactory} elementFactory\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Mouse} mouse\n * @param {Rules} rules\n */\nexport default function CopyPaste(\n    canvas,\n    create,\n    clipboard,\n    elementFactory,\n    eventBus,\n    modeling,\n    mouse,\n    rules\n) {\n\n  this._canvas = canvas;\n  this._create = create;\n  this._clipboard = clipboard;\n  this._elementFactory = elementFactory;\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._mouse = mouse;\n  this._rules = rules;\n\n  eventBus.on('copyPaste.copyElement', function(context) {\n    var descriptor = context.descriptor,\n        element = context.element,\n        elements = context.elements;\n\n    // default priority (priority = 1)\n    descriptor.priority = 1;\n\n    descriptor.id = element.id;\n\n    var parentCopied = find(elements, function(e) {\n      return e === element.parent;\n    });\n\n    // do NOT reference parent if parent wasn't copied\n    if (parentCopied) {\n      descriptor.parent = element.parent.id;\n    }\n\n    // attachers (priority = 2)\n    if (isAttacher(element)) {\n      descriptor.priority = 2;\n\n      descriptor.host = element.host.id;\n    }\n\n    // connections (priority = 3)\n    if (isConnection(element)) {\n      descriptor.priority = 3;\n\n      descriptor.source = element.source.id;\n      descriptor.target = element.target.id;\n\n      descriptor.waypoints = copyWaypoints(element);\n    }\n\n    // labels (priority = 4)\n    if (isLabel(element)) {\n      descriptor.priority = 4;\n\n      descriptor.labelTarget = element.labelTarget.id;\n    }\n\n    forEach([ 'x', 'y', 'width', 'height' ], function(property) {\n      if (isNumber(element[ property ])) {\n        descriptor[ property ] = element[ property ];\n      }\n    });\n\n    descriptor.hidden = element.hidden;\n    descriptor.collapsed = element.collapsed;\n\n  });\n\n  eventBus.on('copyPaste.pasteElements', function(context) {\n    var hints = context.hints;\n\n    assign(hints, {\n      createElementsBehavior: false\n    });\n  });\n}\n\nCopyPaste.$inject = [\n  'canvas',\n  'create',\n  'clipboard',\n  'elementFactory',\n  'eventBus',\n  'modeling',\n  'mouse',\n  'rules'\n];\n\n\n/**\n * Copy elements.\n *\n * @param {Element[]} elements\n *\n * @return {Object}\n */\nCopyPaste.prototype.copy = function(elements) {\n  var allowed,\n      tree;\n\n  if (!isArray(elements)) {\n    elements = elements ? [ elements ] : [];\n  }\n\n  allowed = this._eventBus.fire('copyPaste.canCopyElements', {\n    elements: elements\n  });\n\n  if (allowed === false) {\n    tree = {};\n  } else {\n    tree = this.createTree(isArray(allowed) ? allowed : elements);\n  }\n\n  // we set an empty tree, selection of elements\n  // to copy was empty.\n  this._clipboard.set(tree);\n\n  this._eventBus.fire('copyPaste.elementsCopied', {\n    elements: elements,\n    tree: tree\n  });\n\n  return tree;\n};\n\n/**\n * Paste elements.\n *\n * @param {Object} [context]\n * @param {Shape} [context.element] The optional parent.\n * @param {Point} [context.point] The optional position.\n * @param {Object} [context.hints] The optional hints.\n */\nCopyPaste.prototype.paste = function(context) {\n  var tree = this._clipboard.get();\n\n  if (this._clipboard.isEmpty()) {\n    return;\n  }\n\n  var hints = context && context.hints || {};\n\n  this._eventBus.fire('copyPaste.pasteElements', {\n    hints: hints\n  });\n\n  var elements = this._createElements(tree);\n\n  // paste directly\n  if (context && context.element && context.point) {\n    return this._paste(elements, context.element, context.point, hints);\n  }\n\n  this._create.start(this._mouse.getLastMoveEvent(), elements, {\n    hints: hints || {}\n  });\n};\n\n/**\n * Paste elements directly.\n *\n * @param {Element[]} elements\n * @param {Shape} target\n * @param {Point} position\n * @param {Object} [hints]\n */\nCopyPaste.prototype._paste = function(elements, target, position, hints) {\n\n  // make sure each element has x and y\n  forEach(elements, function(element) {\n    if (!isNumber(element.x)) {\n      element.x = 0;\n    }\n\n    if (!isNumber(element.y)) {\n      element.y = 0;\n    }\n  });\n\n  var bbox = getBBox(elements);\n\n  // center elements around cursor\n  forEach(elements, function(element) {\n    if (isConnection(element)) {\n      element.waypoints = map(element.waypoints, function(waypoint) {\n        return {\n          x: waypoint.x - bbox.x - bbox.width / 2,\n          y: waypoint.y - bbox.y - bbox.height / 2\n        };\n      });\n    }\n\n    assign(element, {\n      x: element.x - bbox.x - bbox.width / 2,\n      y: element.y - bbox.y - bbox.height / 2\n    });\n  });\n\n  return this._modeling.createElements(elements, position, target, assign({}, hints));\n};\n\n/**\n * Create elements from tree.\n */\nCopyPaste.prototype._createElements = function(tree) {\n  var self = this;\n\n  var eventBus = this._eventBus;\n\n  var cache = {};\n\n  var elements = [];\n\n  forEach(tree, function(branch, depth) {\n\n    depth = parseInt(depth, 10);\n\n    // sort by priority\n    branch = sortBy(branch, 'priority');\n\n    forEach(branch, function(descriptor) {\n\n      // remove priority\n      var attrs = assign({}, omit(descriptor, [ 'priority' ]));\n\n      if (cache[ descriptor.parent ]) {\n        attrs.parent = cache[ descriptor.parent ];\n      } else {\n        delete attrs.parent;\n      }\n\n      eventBus.fire('copyPaste.pasteElement', {\n        cache: cache,\n        descriptor: attrs\n      });\n\n      var element;\n\n      if (isConnection(attrs)) {\n        attrs.source = cache[ descriptor.source ];\n        attrs.target = cache[ descriptor.target ];\n\n        element = cache[ descriptor.id ] = self.createConnection(attrs);\n\n        elements.push(element);\n\n        return;\n      }\n\n      if (isLabel(attrs)) {\n        attrs.labelTarget = cache[ attrs.labelTarget ];\n\n        element = cache[ descriptor.id ] = self.createLabel(attrs);\n\n        elements.push(element);\n\n        return;\n      }\n\n      if (attrs.host) {\n        attrs.host = cache[ attrs.host ];\n      }\n\n      element = cache[ descriptor.id ] = self.createShape(attrs);\n\n      elements.push(element);\n    });\n\n  });\n\n  return elements;\n};\n\nCopyPaste.prototype.createConnection = function(attrs) {\n  var connection = this._elementFactory.createConnection(omit(attrs, [ 'id' ]));\n\n  return connection;\n};\n\nCopyPaste.prototype.createLabel = function(attrs) {\n  var label = this._elementFactory.createLabel(omit(attrs, [ 'id' ]));\n\n  return label;\n};\n\nCopyPaste.prototype.createShape = function(attrs) {\n  var shape = this._elementFactory.createShape(omit(attrs, [ 'id' ]));\n\n  return shape;\n};\n\n/**\n * Check wether element has relations to other elements e.g. attachers, labels and connections.\n *\n * @param {Object} element\n * @param {Element[]} elements\n *\n * @return {boolean}\n */\nCopyPaste.prototype.hasRelations = function(element, elements) {\n  var labelTarget,\n      source,\n      target;\n\n  if (isConnection(element)) {\n    source = find(elements, matchPattern({ id: element.source.id }));\n    target = find(elements, matchPattern({ id: element.target.id }));\n\n    if (!source || !target) {\n      return false;\n    }\n  }\n\n  if (isLabel(element)) {\n    labelTarget = find(elements, matchPattern({ id: element.labelTarget.id }));\n\n    if (!labelTarget) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * Create a tree-like structure from elements.\n *\n * @example\n *\n * ```javascript\n * tree: {\n *  0: [\n *    { id: 'Shape_1', priority: 1, ... },\n *    { id: 'Shape_2', priority: 1, ... },\n *    { id: 'Connection_1', source: 'Shape_1', target: 'Shape_2', priority: 3, ... },\n *    ...\n *  ],\n *  1: [\n *    { id: 'Shape_3', parent: 'Shape1', priority: 1, ... },\n *    ...\n *  ]\n * };\n * ```\n *\n * @param {Element[]} elements\n *\n * @return {Object}\n */\nCopyPaste.prototype.createTree = function(elements) {\n  var rules = this._rules,\n      self = this;\n\n  var tree = {},\n      elementsData = [];\n\n  var parents = getParents(elements);\n\n  function canCopy(element, elements) {\n    return rules.allowed('element.copy', {\n      element: element,\n      elements: elements\n    });\n  }\n\n  function addElementData(element, depth) {\n\n    // (1) check wether element has already been added\n    var foundElementData = find(elementsData, function(elementsData) {\n      return element === elementsData.element;\n    });\n\n    // (2) add element if not already added\n    if (!foundElementData) {\n      elementsData.push({\n        element: element,\n        depth: depth\n      });\n\n      return;\n    }\n\n    // (3) update depth\n    if (foundElementData.depth < depth) {\n      elementsData = removeElementData(foundElementData, elementsData);\n\n      elementsData.push({\n        element: foundElementData.element,\n        depth: depth\n      });\n    }\n  }\n\n  function removeElementData(elementData, elementsData) {\n    var index = elementsData.indexOf(elementData);\n\n    if (index !== -1) {\n      elementsData.splice(index, 1);\n    }\n\n    return elementsData;\n  }\n\n  // (1) add elements\n  eachElement(parents, function(element, _index, depth) {\n\n    // do NOT add external labels directly\n    if (isLabel(element)) {\n      return;\n    }\n\n    // always copy external labels\n    forEach(element.labels, function(label) {\n      addElementData(label, depth);\n    });\n\n    function addRelatedElements(elements) {\n      elements && elements.length && forEach(elements, function(element) {\n\n        // add external labels\n        forEach(element.labels, function(label) {\n          addElementData(label, depth);\n        });\n\n        addElementData(element, depth);\n      });\n    }\n\n    forEach([ element.attachers, element.incoming, element.outgoing ], addRelatedElements);\n\n    addElementData(element, depth);\n\n    var children = [];\n\n    if (element.children) {\n      children = element.children.slice();\n    }\n\n    // allow others to add children to tree\n    self._eventBus.fire('copyPaste.createTree', {\n      element: element,\n      children: children\n    });\n\n    return children;\n  });\n\n  elements = map(elementsData, function(elementData) {\n    return elementData.element;\n  });\n\n  // (2) copy elements\n  elementsData = map(elementsData, function(elementData) {\n    elementData.descriptor = {};\n\n    self._eventBus.fire('copyPaste.copyElement', {\n      descriptor: elementData.descriptor,\n      element: elementData.element,\n      elements: elements\n    });\n\n    return elementData;\n  });\n\n  // (3) sort elements by priority\n  elementsData = sortBy(elementsData, function(elementData) {\n    return elementData.descriptor.priority;\n  });\n\n  elements = map(elementsData, function(elementData) {\n    return elementData.element;\n  });\n\n  // (4) create tree\n  forEach(elementsData, function(elementData) {\n    var depth = elementData.depth;\n\n    if (!self.hasRelations(elementData.element, elements)) {\n      removeElement(elementData.element, elements);\n\n      return;\n    }\n\n    if (!canCopy(elementData.element, elements)) {\n      removeElement(elementData.element, elements);\n\n      return;\n    }\n\n    if (!tree[depth]) {\n      tree[depth] = [];\n    }\n\n    tree[depth].push(elementData.descriptor);\n  });\n\n  return tree;\n};\n\n// helpers //////////\n\nfunction isAttacher(element) {\n  return !!element.host;\n}\n\nfunction copyWaypoints(element) {\n  return map(element.waypoints, function(waypoint) {\n\n    waypoint = copyWaypoint(waypoint);\n\n    if (waypoint.original) {\n      waypoint.original = copyWaypoint(waypoint.original);\n    }\n\n    return waypoint;\n  });\n}\n\nfunction copyWaypoint(waypoint) {\n  return assign({}, waypoint);\n}\n\nfunction removeElement(element, elements) {\n  var index = elements.indexOf(element);\n\n  if (index === -1) {\n    return elements;\n  }\n\n  return elements.splice(index, 1);\n}","import ClipboardModule from '../clipboard';\nimport CreateModule from '../create';\nimport MouseModule from '../mouse';\nimport RulesModule from '../rules';\n\nimport CopyPaste from './CopyPaste';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    ClipboardModule,\n    CreateModule,\n    MouseModule,\n    RulesModule\n  ],\n  __init__: [ 'copyPaste' ],\n  copyPaste: [ 'type', CopyPaste ]\n};\n","import {\n  getBusinessObject,\n  getDi,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  forEach,\n  isArray,\n  isUndefined,\n  omit,\n  reduce\n} from 'min-dash';\n\nimport { isLabel } from '../../util/LabelUtil';\n\n/**\n * @typedef {import('../modeling/BpmnFactory').default} BpmnFactory\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('./ModdleCopy').default} ModdleCopy\n */\n\nfunction copyProperties(source, target, properties) {\n  if (!isArray(properties)) {\n    properties = [ properties ];\n  }\n\n  forEach(properties, function(property) {\n    if (!isUndefined(source[property])) {\n      target[property] = source[property];\n    }\n  });\n}\n\nvar LOW_PRIORITY = 750;\n\n/**\n * BPMN-specific copy & paste.\n *\n * @param {BpmnFactory} bpmnFactory\n * @param {EventBus} eventBus\n * @param {ModdleCopy} moddleCopy\n */\nexport default function BpmnCopyPaste(bpmnFactory, eventBus, moddleCopy) {\n\n  function copy(bo, clone) {\n    var targetBo = bpmnFactory.create(bo.$type);\n\n    return moddleCopy.copyElement(bo, targetBo, null, clone);\n  }\n\n  eventBus.on('copyPaste.copyElement', LOW_PRIORITY, function(context) {\n    var descriptor = context.descriptor,\n        element = context.element,\n        businessObject = getBusinessObject(element);\n\n    // do not copy business object + di for labels;\n    // will be pulled from the referenced label target\n    if (isLabel(element)) {\n      return descriptor;\n    }\n\n    var businessObjectCopy = descriptor.businessObject = copy(businessObject, true);\n    var diCopy = descriptor.di = copy(getDi(element), true);\n    diCopy.bpmnElement = businessObjectCopy;\n\n    copyProperties(businessObjectCopy, descriptor, 'name');\n    copyProperties(diCopy, descriptor, 'isExpanded');\n\n    // default sequence flow\n    if (businessObject.default) {\n      descriptor.default = businessObject.default.id;\n    }\n  });\n\n  var referencesKey = '-bpmn-js-refs';\n\n  function getReferences(cache) {\n    return (cache[referencesKey] = cache[referencesKey] || {});\n  }\n\n  function setReferences(cache, references) {\n    cache[referencesKey] = references;\n  }\n\n  function resolveReferences(descriptor, cache, references) {\n    var businessObject = getBusinessObject(descriptor);\n\n    // default sequence flows\n    if (descriptor.default) {\n\n      // relationship cannot be resolved immediately\n      references[ descriptor.default ] = {\n        element: businessObject,\n        property: 'default'\n      };\n    }\n\n    // boundary events\n    if (descriptor.host) {\n\n      // relationship can be resolved immediately\n      getBusinessObject(descriptor).attachedToRef = getBusinessObject(cache[ descriptor.host ]);\n    }\n\n    return omit(references, reduce(references, function(array, reference, key) {\n      var element = reference.element,\n          property = reference.property;\n\n      if (key === descriptor.id) {\n        element.set(property, businessObject);\n\n        array.push(descriptor.id);\n      }\n\n      return array;\n    }, []));\n  }\n\n  eventBus.on('copyPaste.pasteElement', function(context) {\n    var cache = context.cache,\n        descriptor = context.descriptor,\n        businessObject = descriptor.businessObject,\n        di = descriptor.di;\n\n    // wire existing di + businessObject for external label\n    if (isLabel(descriptor)) {\n      descriptor.businessObject = getBusinessObject(cache[ descriptor.labelTarget ]);\n      descriptor.di = getDi(cache[ descriptor.labelTarget ]);\n\n      return;\n    }\n\n    businessObject = descriptor.businessObject = copy(businessObject);\n\n    di = descriptor.di = copy(di);\n    di.bpmnElement = businessObject;\n\n    copyProperties(descriptor, businessObject, [\n      'isExpanded',\n      'name'\n    ]);\n\n    descriptor.type = businessObject.$type;\n  });\n\n  // copy + paste processRef with participant\n\n  eventBus.on('copyPaste.copyElement', LOW_PRIORITY, function(context) {\n    var descriptor = context.descriptor,\n        element = context.element;\n\n    if (!is(element, 'bpmn:Participant')) {\n      return;\n    }\n\n    var participantBo = getBusinessObject(element);\n\n    if (participantBo.processRef) {\n      descriptor.processRef = copy(participantBo.processRef, true);\n    }\n  });\n\n  eventBus.on('copyPaste.pasteElement', function(context) {\n    var descriptor = context.descriptor,\n        processRef = descriptor.processRef;\n\n    if (processRef) {\n      descriptor.processRef = copy(processRef);\n    }\n  });\n\n  // resolve references\n\n  eventBus.on('copyPaste.pasteElement', LOW_PRIORITY, function(context) {\n    var cache = context.cache,\n        descriptor = context.descriptor;\n\n    // resolve references e.g. default sequence flow\n    setReferences(\n      cache,\n      resolveReferences(descriptor, cache, getReferences(cache))\n    );\n  });\n\n}\n\n\nBpmnCopyPaste.$inject = [\n  'bpmnFactory',\n  'eventBus',\n  'moddleCopy'\n];","import {\n  find,\n  forEach,\n  has,\n  isArray,\n  isDefined,\n  isFunction,\n  isObject,\n  matchPattern,\n  reduce,\n  sortBy\n} from 'min-dash';\n\nvar DISALLOWED_PROPERTIES = [\n  'artifacts',\n  'dataInputAssociations',\n  'dataOutputAssociations',\n  'default',\n  'flowElements',\n  'lanes',\n  'incoming',\n  'outgoing',\n  'categoryValue'\n];\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../modeling/BpmnFactory').default} BpmnFactory\n * @typedef {import('../../model/Types').Moddle} Moddle\n *\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * Utility for copying model properties from source element to target element.\n *\n * @param {EventBus} eventBus\n * @param {BpmnFactory} bpmnFactory\n * @param {Moddle} moddle\n */\nexport default function ModdleCopy(eventBus, bpmnFactory, moddle) {\n  this._bpmnFactory = bpmnFactory;\n  this._eventBus = eventBus;\n  this._moddle = moddle;\n\n  // copy extension elements last\n  eventBus.on('moddleCopy.canCopyProperties', function(context) {\n    var propertyNames = context.propertyNames;\n\n    if (!propertyNames || !propertyNames.length) {\n      return;\n    }\n\n    return sortBy(propertyNames, function(propertyName) {\n      return propertyName === 'extensionElements';\n    });\n  });\n\n  // default check whether property can be copied\n  eventBus.on('moddleCopy.canCopyProperty', function(context) {\n    var parent = context.parent,\n        parentDescriptor = isObject(parent) && parent.$descriptor,\n        propertyName = context.propertyName;\n\n    if (propertyName && DISALLOWED_PROPERTIES.indexOf(propertyName) !== -1) {\n\n      // disallow copying property\n      return false;\n    }\n\n    if (propertyName &&\n      parentDescriptor &&\n      !find(parentDescriptor.properties, matchPattern({ name: propertyName }))) {\n\n      // disallow copying property\n      return false;\n    }\n  });\n\n  // do NOT allow to copy empty extension elements\n  eventBus.on('moddleCopy.canSetCopiedProperty', function(context) {\n    var property = context.property;\n\n    if (is(property, 'bpmn:ExtensionElements') && (!property.values || !property.values.length)) {\n\n      // disallow setting copied property\n      return false;\n    }\n  });\n}\n\nModdleCopy.$inject = [\n  'eventBus',\n  'bpmnFactory',\n  'moddle'\n];\n\n/**\n * Copy model properties of source element to target element.\n *\n * @param {ModdleElement} sourceElement\n * @param {ModdleElement} targetElement\n * @param {string[]} [propertyNames]\n * @param {boolean} [clone=false]\n *\n * @return {ModdleElement}\n */\nModdleCopy.prototype.copyElement = function(sourceElement, targetElement, propertyNames, clone = false) {\n  var self = this;\n\n  if (propertyNames && !isArray(propertyNames)) {\n    propertyNames = [ propertyNames ];\n  }\n\n  propertyNames = propertyNames || getPropertyNames(sourceElement.$descriptor);\n\n  var canCopyProperties = this._eventBus.fire('moddleCopy.canCopyProperties', {\n    propertyNames: propertyNames,\n    sourceElement: sourceElement,\n    targetElement: targetElement,\n    clone: clone\n  });\n\n  if (canCopyProperties === false) {\n    return targetElement;\n  }\n\n  if (isArray(canCopyProperties)) {\n    propertyNames = canCopyProperties;\n  }\n\n  // copy properties\n  forEach(propertyNames, function(propertyName) {\n    var sourceProperty;\n\n    if (has(sourceElement, propertyName)) {\n      sourceProperty = sourceElement.get(propertyName);\n    }\n\n    var copiedProperty = self.copyProperty(sourceProperty, targetElement, propertyName, clone);\n\n    if (!isDefined(copiedProperty)) {\n      return;\n    }\n\n    var canSetProperty = self._eventBus.fire('moddleCopy.canSetCopiedProperty', {\n      parent: targetElement,\n      property: copiedProperty,\n      propertyName: propertyName\n    });\n\n    if (canSetProperty === false) {\n      return;\n    }\n\n    // TODO(nikku): unclaim old IDs if ID property is copied over\n    // this._moddle.getPropertyDescriptor(parent, propertyName)\n    targetElement.set(propertyName, copiedProperty);\n  });\n\n  return targetElement;\n};\n\n/**\n * Copy model property.\n *\n * @param {any} property\n * @param {ModdleElement} parent\n * @param {string} propertyName\n * @param {boolean} [clone=false]\n *\n * @return {any}\n */\nModdleCopy.prototype.copyProperty = function(property, parent, propertyName, clone = false) {\n  var self = this;\n\n  // allow others to copy property\n  var copiedProperty = this._eventBus.fire('moddleCopy.canCopyProperty', {\n    parent: parent,\n    property: property,\n    propertyName: propertyName,\n    clone: clone\n  });\n\n  // return if copying is NOT allowed\n  if (copiedProperty === false) {\n    return;\n  }\n\n  if (copiedProperty) {\n    if (isObject(copiedProperty) && copiedProperty.$type && !copiedProperty.$parent) {\n      copiedProperty.$parent = parent;\n    }\n\n    return copiedProperty;\n  }\n\n  var propertyDescriptor = this._moddle.getPropertyDescriptor(parent, propertyName);\n\n  // do NOT copy references\n  if (propertyDescriptor.isReference) {\n    return;\n  }\n\n  // copy id\n  if (propertyDescriptor.isId) {\n    return property && this._copyId(property, parent, clone);\n  }\n\n  // copy arrays\n  if (isArray(property)) {\n    return reduce(property, function(childProperties, childProperty) {\n\n      // recursion\n      copiedProperty = self.copyProperty(childProperty, parent, propertyName, clone);\n\n      // copying might NOT be allowed\n      if (copiedProperty) {\n        return childProperties.concat(copiedProperty);\n      }\n\n      return childProperties;\n    }, []);\n  }\n\n  // copy model elements\n  if (isObject(property) && property.$type) {\n    if (this._moddle.getElementDescriptor(property).isGeneric) {\n      return;\n    }\n\n    copiedProperty = self._bpmnFactory.create(property.$type);\n\n    copiedProperty.$parent = parent;\n\n    // recursion\n    copiedProperty = self.copyElement(property, copiedProperty, null, clone);\n\n    return copiedProperty;\n  }\n\n  // copy primitive properties\n  return property;\n};\n\nModdleCopy.prototype._copyId = function(id, element, clone = false) {\n  if (clone) {\n    return id;\n  }\n\n  // disallow if already taken\n  if (this._moddle.ids.assigned(id)) {\n    return;\n  } else {\n\n    this._moddle.ids.claim(id, element);\n    return id;\n  }\n};\n\n// helpers //////////\n\nexport function getPropertyNames(descriptor, keepDefaultProperties) {\n  return reduce(descriptor.properties, function(properties, property) {\n\n    if (keepDefaultProperties && property.default) {\n      return properties;\n    }\n\n    return properties.concat(property.name);\n  }, []);\n}\n\nfunction is(element, type) {\n  return element && isFunction(element.$instanceOf) && element.$instanceOf(type);\n}","import CopyPasteModule from 'diagram-js/lib/features/copy-paste';\n\nimport BpmnCopyPaste from './BpmnCopyPaste';\nimport ModdleCopy from './ModdleCopy';\n\nexport default {\n  __depends__: [\n    CopyPasteModule\n  ],\n  __init__: [ 'bpmnCopyPaste', 'moddleCopy' ],\n  bpmnCopyPaste: [ 'type', BpmnCopyPaste ],\n  moddleCopy: [ 'type', ModdleCopy ]\n};\n","import {\n  assign\n} from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n *\n * @typedef {import('../../core/Types').ShapeLike} Shape\n */\n\nvar round = Math.round;\n\n/**\n * Service that allows replacing of elements.\n *\n * @param {Modeling} modeling\n * @param {EventBus} eventBus\n */\nexport default function Replace(modeling, eventBus) {\n  this._modeling = modeling;\n  this._eventBus = eventBus;\n}\n\nReplace.$inject = [ 'modeling', 'eventBus' ];\n\n/**\n * Replace an element.\n *\n * @param {Shape} oldElement The element to be replaced.\n * @param {Object} attrs Containing information about the new element, for\n * example the new bounds and type.\n * @param {Object} hints Custom hints that will be attached to the context. It\n * can be used to inject data that is needed in the command chain. For example\n * it could be used in eventbus.on('commandStack.shape.replace.postExecute') to\n * change shape attributes after shape creation.\n *\n * @return {Shape}\n */\nReplace.prototype.replaceElement = function(oldElement, attrs, hints) {\n\n  if (oldElement.waypoints) {\n\n    // TODO(nikku): we do not replace connections, yet\n    return null;\n  }\n\n  var modeling = this._modeling;\n  var eventBus = this._eventBus;\n\n  eventBus.fire('replace.start', {\n    element: oldElement,\n    attrs,\n    hints\n  });\n\n  var width = attrs.width || oldElement.width,\n      height = attrs.height || oldElement.height,\n      x = attrs.x || oldElement.x,\n      y = attrs.y || oldElement.y,\n      centerX = round(x + width / 2),\n      centerY = round(y + height / 2);\n\n  // modeling API requires center coordinates,\n  // account for that when handling shape bounds\n\n  var newElement = modeling.replaceShape(\n    oldElement,\n    assign(\n      {},\n      attrs,\n      {\n        x: centerX,\n        y: centerY,\n        width: width,\n        height: height\n      }\n    ),\n    hints\n  );\n\n  eventBus.fire('replace.end', {\n    element: oldElement,\n    newElement,\n    hints\n  });\n\n  return newElement;\n};\n","export default function ReplaceSelectionBehavior(selection, eventBus) {\n\n  eventBus.on('replace.end', 500, function(event) {\n    const {\n      newElement,\n      hints = {}\n    } = event;\n\n    if (hints.select === false) {\n      return;\n    }\n\n    selection.select(newElement);\n  });\n\n}\n\nReplaceSelectionBehavior.$inject = [ 'selection', 'eventBus' ];","import Replace from './Replace';\nimport ReplaceSelectionBehavior from './ReplaceSelectionBehavior';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'replace', 'replaceSelectionBehavior' ],\n  replaceSelectionBehavior: [ 'type', ReplaceSelectionBehavior ],\n  replace: [ 'type', Replace ]\n};","import {\n  pick,\n  assign,\n  filter,\n  forEach,\n  isArray,\n  isUndefined,\n  has\n} from 'min-dash';\n\nimport {\n  is,\n  getDi,\n  getBusinessObject\n} from '../../util/ModelUtil';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  isExpanded,\n  isEventSubProcess,\n  isHorizontal\n} from '../../util/DiUtil';\n\nimport { getPropertyNames } from '../copy-paste/ModdleCopy';\n\n/**\n * @typedef {import('../modeling/BpmnFactory').default} BpmnFactory\n * @typedef {import('../modeling/ElementFactory').default} ElementFactory\n * @typedef {import('../copy-paste/ModdleCopy').default} ModdleCopy\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('diagram-js/lib/features/replace/Replace').default} Replace\n * @typedef {import('diagram-js/lib/features/rules/Rules').default} Rules\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n *\n * @typedef { {\n *   type: string;\n *   cancelActivity: boolean;\n *   instantiate: boolean;\n *   eventGatewayType: string;\n *   triggeredByEvent: boolean;\n *   isInterrupting: boolean;\n *   collapsed: boolean;\n *   isExpanded: boolean;\n *   eventDefinitionType: string;\n *   eventDefinitionAttrs: Object;\n *   host: Shape;\n * } } TargetElement\n *\n * @typedef { {\n *   moveChildren: boolean;\n * } & Record<string, any> } Hints\n */\n\nfunction copyProperties(source, target, properties) {\n  if (!isArray(properties)) {\n    properties = [ properties ];\n  }\n\n  forEach(properties, function(property) {\n    if (!isUndefined(source[property])) {\n      target[property] = source[property];\n    }\n  });\n}\n\n\nvar CUSTOM_PROPERTIES = [\n  'cancelActivity',\n  'instantiate',\n  'eventGatewayType',\n  'triggeredByEvent',\n  'isInterrupting'\n];\n\n/**\n * Check if element should be collapsed or expanded.\n */\nfunction shouldToggleCollapsed(element, targetElement) {\n\n  var oldCollapsed = (\n    element && has(element, 'collapsed') ? element.collapsed : !isExpanded(element)\n  );\n\n  var targetCollapsed;\n\n  if (targetElement && (has(targetElement, 'collapsed') || has(targetElement, 'isExpanded'))) {\n\n    // property is explicitly set so use it\n    targetCollapsed = (\n      has(targetElement, 'collapsed') ? targetElement.collapsed : !targetElement.isExpanded\n    );\n  } else {\n\n    // keep old state\n    targetCollapsed = oldCollapsed;\n  }\n\n  if (oldCollapsed !== targetCollapsed) {\n    return true;\n  }\n\n  return false;\n}\n\n\n/**\n * BPMN-specific replace.\n *\n * @param {BpmnFactory} bpmnFactory\n * @param {ElementFactory} elementFactory\n * @param {ModdleCopy} moddleCopy\n * @param {Modeling} modeling\n * @param {Replace} replace\n * @param {Rules} rules\n */\nexport default function BpmnReplace(\n    bpmnFactory,\n    elementFactory,\n    moddleCopy,\n    modeling,\n    replace,\n    rules\n) {\n\n  /**\n   * Prepares a new business object for the replacement element\n   * and triggers the replace operation.\n   *\n   * @param  {Element} element\n   * @param  {TargetElement} targetElement\n   * @param  {Hints} [hints]\n   *\n   * @return {Element}\n   */\n  function replaceElement(element, targetElement, hints) {\n\n    hints = hints || {};\n\n    var type = targetElement.type,\n        oldBusinessObject = element.businessObject;\n\n    if (isSubProcess(oldBusinessObject) && type === 'bpmn:SubProcess') {\n      if (shouldToggleCollapsed(element, targetElement)) {\n\n        // expanding or collapsing process\n        modeling.toggleCollapse(element);\n\n        return element;\n      }\n    }\n\n    var newBusinessObject = bpmnFactory.create(type);\n\n    var newElement = {\n      type: type,\n      businessObject: newBusinessObject,\n    };\n\n    newElement.di = {};\n\n    if (type === 'bpmn:ExclusiveGateway') {\n      newElement.di.isMarkerVisible = true;\n    }\n\n    // colors will be set to DI\n    copyProperties(element.di, newElement.di, [\n      'fill',\n      'stroke',\n      'background-color',\n      'border-color',\n      'color'\n    ]);\n\n    var elementProps = getPropertyNames(oldBusinessObject.$descriptor),\n        newElementProps = getPropertyNames(newBusinessObject.$descriptor, true),\n        copyProps = intersection(elementProps, newElementProps);\n\n    // initialize special properties defined in target definition\n    assign(newBusinessObject, pick(targetElement, CUSTOM_PROPERTIES));\n\n    var properties = filter(copyProps, function(propertyName) {\n\n      // copying event definitions, unless we replace\n      if (propertyName === 'eventDefinitions') {\n        return hasEventDefinition(element, targetElement.eventDefinitionType);\n      }\n\n      // retain loop characteristics if the target element\n      // is not an event sub process\n      if (propertyName === 'loopCharacteristics') {\n        return !isEventSubProcess(newBusinessObject);\n      }\n\n      // so the applied properties from 'target' don't get lost\n      if (has(newBusinessObject, propertyName)) {\n        return false;\n      }\n\n      if (propertyName === 'processRef' && targetElement.isExpanded === false) {\n        return false;\n      }\n\n      if (propertyName === 'triggeredByEvent') {\n        return false;\n      }\n\n      if (propertyName === 'isForCompensation') {\n        return !isEventSubProcess(newBusinessObject);\n      }\n\n      return true;\n    });\n\n    newBusinessObject = moddleCopy.copyElement(\n      oldBusinessObject,\n      newBusinessObject,\n      properties\n    );\n\n    // initialize custom BPMN extensions\n    if (targetElement.eventDefinitionType) {\n\n      // only initialize with new eventDefinition\n      // if we did not set an event definition yet,\n      // i.e. because we copied it\n      if (!hasEventDefinition(newBusinessObject, targetElement.eventDefinitionType)) {\n        newElement.eventDefinitionType = targetElement.eventDefinitionType;\n        newElement.eventDefinitionAttrs = targetElement.eventDefinitionAttrs;\n      }\n    }\n\n    if (is(oldBusinessObject, 'bpmn:Activity')) {\n\n      if (isSubProcess(oldBusinessObject)) {\n\n        // no toggeling, so keep old state\n        newElement.isExpanded = isExpanded(element);\n      }\n\n      // else if property is explicitly set, use it\n      else if (targetElement && has(targetElement, 'isExpanded')) {\n        newElement.isExpanded = targetElement.isExpanded;\n\n        // assign default size of new expanded element\n        var defaultSize = elementFactory.getDefaultSize(newBusinessObject, {\n          isExpanded: newElement.isExpanded\n        });\n\n        newElement.width = defaultSize.width;\n        newElement.height = defaultSize.height;\n\n        // keep element centered\n        newElement.x = element.x - (newElement.width - element.width) / 2;\n        newElement.y = element.y - (newElement.height - element.height) / 2;\n      }\n\n      // TODO: need also to respect min/max Size\n      // copy size, from an expanded subprocess to an expanded alternative subprocess\n      // except bpmn:Task, because Task is always expanded\n      if ((isExpanded(element) && !is(oldBusinessObject, 'bpmn:Task')) && newElement.isExpanded) {\n        newElement.width = element.width;\n        newElement.height = element.height;\n      }\n    }\n\n    // remove children if not expanding sub process\n    if (isSubProcess(oldBusinessObject) && !isSubProcess(newBusinessObject)) {\n      hints.moveChildren = false;\n    }\n\n    // transform collapsed/expanded pools\n    if (is(oldBusinessObject, 'bpmn:Participant')) {\n\n      // create expanded pool\n      if (targetElement.isExpanded === true) {\n        newBusinessObject.processRef = bpmnFactory.create('bpmn:Process');\n      } else {\n\n        // remove children when transforming to collapsed pool\n        hints.moveChildren = false;\n      }\n\n      // apply same directionality\n      var isHorizontalPool = isHorizontal(element);\n      if (!getDi(element).isHorizontal) {\n        getDi(newElement).isHorizontal = isHorizontalPool;\n      }\n\n      // keep the existing size of the pool's direction to\n      // prevent dangling message flows\n      newElement.width = isHorizontalPool ? element.width : elementFactory.getDefaultSize(newElement).width;\n      newElement.height = isHorizontalPool ? elementFactory.getDefaultSize(newElement).height : element.height;\n    }\n\n    if (!rules.allowed('shape.resize', { shape: newBusinessObject })) {\n      newElement.height = elementFactory.getDefaultSize(newElement).height;\n      newElement.width = elementFactory.getDefaultSize(newElement).width;\n    }\n\n    newBusinessObject.name = oldBusinessObject.name;\n\n    // retain default flow's reference between inclusive <-> exclusive gateways and activities\n    if (\n      isAny(oldBusinessObject, [\n        'bpmn:ExclusiveGateway',\n        'bpmn:InclusiveGateway',\n        'bpmn:Activity'\n      ]) &&\n      isAny(newBusinessObject, [\n        'bpmn:ExclusiveGateway',\n        'bpmn:InclusiveGateway',\n        'bpmn:Activity'\n      ])\n    ) {\n      newBusinessObject.default = oldBusinessObject.default;\n    }\n\n    if (\n      targetElement.host &&\n      !is(oldBusinessObject, 'bpmn:BoundaryEvent') &&\n      is(newBusinessObject, 'bpmn:BoundaryEvent')\n    ) {\n      newElement.host = targetElement.host;\n    }\n\n    // The DataStoreReference element is 14px wider than the DataObjectReference element\n    // This ensures that they stay centered on the x axis when replaced\n    if (\n      newElement.type === 'bpmn:DataStoreReference' ||\n      newElement.type === 'bpmn:DataObjectReference'\n    ) {\n      newElement.x = element.x + (element.width - newElement.width) / 2;\n    }\n\n    return replace.replaceElement(element, newElement, { ...hints, targetElement });\n  }\n\n  this.replaceElement = replaceElement;\n}\n\nBpmnReplace.$inject = [\n  'bpmnFactory',\n  'elementFactory',\n  'moddleCopy',\n  'modeling',\n  'replace',\n  'rules'\n];\n\n/**\n * @param {ModdleElement} businessObject\n *\n * @return {boolean}\n */\nfunction isSubProcess(businessObject) {\n  return is(businessObject, 'bpmn:SubProcess');\n}\n\n/**\n * @param {Element|ModdleElement} element\n * @param {string} type\n *\n * @return {boolean}\n */\nfunction hasEventDefinition(element, type) {\n  var businessObject = getBusinessObject(element);\n\n  return type && businessObject.get('eventDefinitions').some(function(definition) {\n    return is(definition, type);\n  });\n}\n\n/**\n * Compute intersection between two arrays.\n *\n * @param {Array} a\n * @param {Array} b\n *\n * @return {Array}\n */\nfunction intersection(a, b) {\n  return a.filter(function(item) {\n    return b.includes(item);\n  });\n}\n","import CopyPasteModule from '../copy-paste';\nimport ReplaceModule from 'diagram-js/lib/features/replace';\nimport SelectionModule from 'diagram-js/lib/features/selection';\n\nimport BpmnReplace from './BpmnReplace';\n\nexport default {\n  __depends__: [\n    CopyPasteModule,\n    ReplaceModule,\n    SelectionModule\n  ],\n  bpmnReplace: [ 'type', BpmnReplace ]\n};\n","import {\n  forEach\n} from 'min-dash';\n\nimport {\n  closest as domClosest\n} from 'min-dom';\n\n/**\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('../../core/EventBus').Event} Event\n */\n\nvar LOW_PRIORITY = 250;\n\n/**\n * The tool manager acts as middle-man between the available tool's and the Palette,\n * it takes care of making sure that the correct active state is set.\n *\n * @param {EventBus} eventBus\n */\nexport default function ToolManager(eventBus) {\n  this._eventBus = eventBus;\n\n  this._tools = [];\n  this._active = null;\n}\n\nToolManager.$inject = [ 'eventBus' ];\n\n/**\n * Register a tool.\n *\n * @param {string} name\n * @param { {\n *   tool: string;\n * } } events\n */\nToolManager.prototype.registerTool = function(name, events) {\n  var tools = this._tools;\n\n  if (!events) {\n    throw new Error('A tool has to be registered with it\\'s \"events\"');\n  }\n\n  tools.push(name);\n  this.bindEvents(name, events);\n};\n\nToolManager.prototype.isActive = function(tool) {\n  return tool && this._active === tool;\n};\n\nToolManager.prototype.length = function(tool) {\n  return this._tools.length;\n};\n\nToolManager.prototype.setActive = function(tool) {\n  var eventBus = this._eventBus;\n\n  if (this._active !== tool) {\n    this._active = tool;\n\n    eventBus.fire('tool-manager.update', { tool: tool });\n  }\n};\n\nToolManager.prototype.bindEvents = function(name, events) {\n  var eventBus = this._eventBus;\n\n  var eventsToRegister = [];\n\n  eventBus.on(events.tool + '.init', function(event) {\n    var context = event.context;\n\n    // Active tools that want to reactivate themselves must do this explicitly\n    if (!context.reactivate && this.isActive(name)) {\n      this.setActive(null);\n\n      return;\n    }\n\n    this.setActive(name);\n\n  }, this);\n\n  // TODO: add test cases\n  forEach(events, function(event) {\n    eventsToRegister.push(event + '.ended');\n    eventsToRegister.push(event + '.canceled');\n  });\n\n  eventBus.on(eventsToRegister, LOW_PRIORITY, function(event) {\n\n    // We defer the de-activation of the tool to the .activate phase,\n    // so we're able to check if we want to toggle off the current\n    // active tool or switch to a new one\n    if (!this._active) {\n      return;\n    }\n\n    if (isPaletteClick(event)) {\n      return;\n    }\n\n    this.setActive(null);\n  }, this);\n\n};\n\n\n// helpers ///////////////\n\n/**\n * Check if a given event is a palette click event.\n *\n * @param {Event} event\n *\n * @return {boolean}\n */\nfunction isPaletteClick(event) {\n  var target = event.originalEvent && event.originalEvent.target;\n\n  return target && domClosest(target, '.group[data-group=\"tools\"]');\n}","import DraggingModule from '../dragging';\n\nimport ToolManager from './ToolManager';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    DraggingModule\n  ],\n  __init__: [ 'toolManager' ],\n  toolManager: [ 'type', ToolManager ]\n};\n","/**\n * @typedef {import('../../core/Types').ConnectionLike} Connection\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../util/Types').Axis} Axis\n * @typedef {import('../../util/Types').Direction} Direction\n * @typedef {import('../../util/Types').Point} Point\n * @typedef {import('../../util/Types').Rect} Rect\n */\n\nimport { forEach } from 'min-dash';\n\n/**\n * Return direction given axis and delta.\n *\n * @param {Axis} axis\n * @param {number} delta\n *\n * @return {Direction}\n */\nexport function getDirection(axis, delta) {\n\n  if (axis === 'x') {\n    if (delta > 0) {\n      return 'e';\n    }\n\n    if (delta < 0) {\n      return 'w';\n    }\n  }\n\n  if (axis === 'y') {\n    if (delta > 0) {\n      return 's';\n    }\n\n    if (delta < 0) {\n      return 'n';\n    }\n  }\n\n  return null;\n}\n\n/**\n * Returns connections whose waypoints are to be updated. Waypoints are to be updated if start\n * or end is to be moved or resized.\n *\n * @param {Array<Shape>} movingShapes\n * @param {Array<Shape>} resizingShapes\n *\n * @return {Array<Connection>}\n */\nexport function getWaypointsUpdatingConnections(movingShapes, resizingShapes) {\n  var waypointsUpdatingConnections = [];\n\n  forEach(movingShapes.concat(resizingShapes), function(shape) {\n    var incoming = shape.incoming,\n        outgoing = shape.outgoing;\n\n    forEach(incoming.concat(outgoing), function(connection) {\n      var source = connection.source,\n          target = connection.target;\n\n      if (includes(movingShapes, source) ||\n        includes(movingShapes, target) ||\n        includes(resizingShapes, source) ||\n        includes(resizingShapes, target)) {\n\n        if (!includes(waypointsUpdatingConnections, connection)) {\n          waypointsUpdatingConnections.push(connection);\n        }\n      }\n    });\n  });\n\n  return waypointsUpdatingConnections;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\n/**\n * Resize bounds.\n *\n * @param {Rect} bounds\n * @param {Direction} direction\n * @param {Point} delta\n *\n * @return {Rect}\n */\nexport function resizeBounds(bounds, direction, delta) {\n  var x = bounds.x,\n      y = bounds.y,\n      width = bounds.width,\n      height = bounds.height,\n      dx = delta.x,\n      dy = delta.y;\n\n  switch (direction) {\n  case 'n':\n    return {\n      x: x,\n      y: y + dy,\n      width: width,\n      height: height - dy\n    };\n  case 's':\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height + dy\n    };\n  case 'w':\n    return {\n      x: x + dx,\n      y: y,\n      width: width - dx,\n      height: height\n    };\n  case 'e':\n    return {\n      x: x,\n      y: y,\n      width: width + dx,\n      height: height\n    };\n  default:\n    throw new Error('unknown direction: ' + direction);\n  }\n}","import {\n  assign,\n  filter,\n  forEach,\n  isNumber\n} from 'min-dash';\n\nimport {\n  asTRBL,\n  getMid\n} from '../../layout/LayoutUtil';\n\nimport { getBBox } from '../../util/Elements';\n\nimport { getDirection } from './SpaceUtil';\n\nimport {\n  hasPrimaryModifier,\n  hasSecondaryModifier\n} from '../../util/Mouse';\n\nimport { set as setCursor } from '../../util/Cursor';\n\nimport { selfAndAllChildren } from '../../util/Elements';\n\nimport {\n  isConnection,\n  isLabel\n} from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../mouse/Mouse').default} Mouse\n * @typedef {import('../rules/Rules').default} Rules\n * @typedef {import('../tool-manager/ToolManager').default} ToolManager\n *\n * @typedef {import('../../util/Types').Axis} Axis\n * @typedef {import('../../util/Types').Direction} Direction\n * @typedef {import('../../util/Types').Point} Point\n */\n\nvar abs = Math.abs,\n    round = Math.round;\n\nvar AXIS_TO_DIMENSION = {\n  x: 'width',\n  y: 'height'\n};\n\nvar CURSOR_CROSSHAIR = 'crosshair';\n\nvar DIRECTION_TO_TRBL = {\n  n: 'top',\n  w: 'left',\n  s: 'bottom',\n  e: 'right'\n};\n\nvar HIGH_PRIORITY = 1500;\n\nvar DIRECTION_TO_OPPOSITE = {\n  n: 's',\n  w: 'e',\n  s: 'n',\n  e: 'w'\n};\n\nvar PADDING = 20;\n\n\n/**\n * Add or remove space by moving and resizing elements.\n *\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Rules} rules\n * @param {ToolManager} toolManager\n * @param {Mouse} mouse\n */\nexport default function SpaceTool(\n    canvas, dragging, eventBus,\n    modeling, rules, toolManager,\n    mouse) {\n\n  this._canvas = canvas;\n  this._dragging = dragging;\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._rules = rules;\n  this._toolManager = toolManager;\n  this._mouse = mouse;\n\n  var self = this;\n\n  toolManager.registerTool('space', {\n    tool: 'spaceTool.selection',\n    dragging: 'spaceTool'\n  });\n\n  eventBus.on('spaceTool.selection.end', function(event) {\n    eventBus.once('spaceTool.selection.ended', function() {\n      self.activateMakeSpace(event.originalEvent);\n    });\n  });\n\n  eventBus.on('spaceTool.move', HIGH_PRIORITY , function(event) {\n    var context = event.context,\n        initialized = context.initialized;\n\n    if (!initialized) {\n      initialized = context.initialized = self.init(event, context);\n    }\n\n    if (initialized) {\n      ensureConstraints(event);\n    }\n  });\n\n  eventBus.on('spaceTool.end', function(event) {\n    var context = event.context,\n        axis = context.axis,\n        direction = context.direction,\n        movingShapes = context.movingShapes,\n        resizingShapes = context.resizingShapes,\n        start = context.start;\n\n    if (!context.initialized) {\n      return;\n    }\n\n    ensureConstraints(event);\n\n    var delta = {\n      x: 0,\n      y: 0\n    };\n\n    delta[ axis ] = round(event[ 'd' + axis ]);\n\n    self.makeSpace(movingShapes, resizingShapes, delta, direction, start);\n\n    eventBus.once('spaceTool.ended', function(event) {\n\n      // activate space tool selection after make space\n      self.activateSelection(event.originalEvent, true, true);\n    });\n  });\n}\n\nSpaceTool.$inject = [\n  'canvas',\n  'dragging',\n  'eventBus',\n  'modeling',\n  'rules',\n  'toolManager',\n  'mouse'\n];\n\n/**\n * Activate space tool selection.\n *\n * @param {MouseEvent|TouchEvent} event\n * @param {boolean} autoActivate\n * @param {boolean} reactivate\n */\nSpaceTool.prototype.activateSelection = function(event, autoActivate, reactivate) {\n  this._dragging.init(event, 'spaceTool.selection', {\n    autoActivate: autoActivate,\n    cursor: CURSOR_CROSSHAIR,\n    data: {\n      context: {\n        reactivate: reactivate\n      }\n    },\n    trapClick: false\n  });\n};\n\n/**\n * Activate space tool make space.\n *\n * @param {MouseEvent|TouchEvent} event\n */\nSpaceTool.prototype.activateMakeSpace = function(event) {\n  this._dragging.init(event, 'spaceTool', {\n    autoActivate: true,\n    cursor: CURSOR_CROSSHAIR,\n    data: {\n      context: {}\n    }\n  });\n};\n\n/**\n * Make space.\n *\n * @param {Array<Shape>} movingShapes\n * @param {Array<Shape>} resizingShapes\n * @param {Point} delta\n * @param {Direction} direction\n * @param {number} start\n */\nSpaceTool.prototype.makeSpace = function(movingShapes, resizingShapes, delta, direction, start) {\n  return this._modeling.createSpace(movingShapes, resizingShapes, delta, direction, start);\n};\n\n/**\n * Initialize make space and return true if that was successful.\n *\n * @param {MouseEvent|TouchEvent} event\n * @param {Object} context\n *\n * @return {boolean}\n */\nSpaceTool.prototype.init = function(event, context) {\n  var axis = abs(event.dx) > abs(event.dy) ? 'x' : 'y',\n      delta = event[ 'd' + axis ],\n      start = event[ axis ] - delta;\n\n  if (abs(delta) < 5) {\n    return false;\n  }\n\n  // invert delta to remove space when moving left\n  if (delta < 0) {\n    delta *= -1;\n  }\n\n  // invert delta to add/remove space when removing/adding space if modifier key is pressed\n  if (hasPrimaryModifier(event)) {\n    delta *= -1;\n  }\n\n  var direction = getDirection(axis, delta);\n\n  var root = this._canvas.getRootElement();\n\n  if (!hasSecondaryModifier(event) && event.hover) {\n    root = event.hover;\n  }\n\n  var children = [\n    ...selfAndAllChildren(root, true),\n    ...(root.attachers || [])\n  ];\n\n  var elements = this.calculateAdjustments(children, axis, delta, start);\n\n  var minDimensions = this._eventBus.fire('spaceTool.getMinDimensions', {\n    axis: axis,\n    direction: direction,\n    shapes: elements.resizingShapes,\n    start: start\n  });\n\n  var spaceToolConstraints = getSpaceToolConstraints(elements, axis, direction, start, minDimensions);\n\n  assign(\n    context,\n    elements,\n    {\n      axis: axis,\n      direction: direction,\n      spaceToolConstraints: spaceToolConstraints,\n      start: start\n    }\n  );\n\n  setCursor('resize-' + (axis === 'x' ? 'ew' : 'ns'));\n\n  return true;\n};\n\n/**\n * Get elements to be moved and resized.\n *\n * @param {Array<Shape>} elements\n * @param {Axis} axis\n * @param {Point} delta\n * @param {number} start\n *\n * @return {Object}\n */\nSpaceTool.prototype.calculateAdjustments = function(elements, axis, delta, start) {\n  var rules = this._rules;\n\n  var movingShapes = [],\n      resizingShapes = [];\n\n  var attachers = [],\n      connections = [];\n\n  function moveShape(shape) {\n    if (!movingShapes.includes(shape)) {\n      movingShapes.push(shape);\n    }\n\n    var label = shape.label;\n\n    // move external label if its label target is moving\n    if (label && !movingShapes.includes(label)) {\n      movingShapes.push(label);\n    }\n  }\n\n  function resizeShape(shape) {\n    if (!resizingShapes.includes(shape)) {\n      resizingShapes.push(shape);\n    }\n  }\n\n  forEach(elements, function(element) {\n    if (!element.parent || isLabel(element)) {\n      return;\n    }\n\n    // handle connections separately\n    if (isConnection(element)) {\n      connections.push(element);\n\n      return;\n    }\n\n    var shapeStart = element[ axis ],\n        shapeEnd = shapeStart + element[ AXIS_TO_DIMENSION[ axis ] ];\n\n    // handle attachers separately\n    if (isAttacher(element)\n      && ((delta > 0 && getMid(element)[ axis ] > start)\n        || (delta < 0 && getMid(element)[ axis ] < start))) {\n      attachers.push(element);\n\n      return;\n    }\n\n    // move shape if its start is after space tool\n    if ((delta > 0 && shapeStart > start)\n      || (delta < 0 && shapeEnd < start)) {\n      moveShape(element);\n\n      return;\n    }\n\n    // resize shape if it's resizable and its start is before and its end is after space tool\n    if (shapeStart < start\n      && shapeEnd > start\n      && rules.allowed('shape.resize', { shape: element })\n    ) {\n      resizeShape(element);\n\n      return;\n    }\n  });\n\n  // move attacher if its host is moving\n  forEach(movingShapes, function(shape) {\n    var attachers = shape.attachers;\n\n    if (attachers) {\n      forEach(attachers, function(attacher) {\n        moveShape(attacher);\n      });\n    }\n  });\n\n  var allShapes = movingShapes.concat(resizingShapes);\n\n  // move attacher if its mid is after space tool and its host is moving or resizing\n  forEach(attachers, function(attacher) {\n    var host = attacher.host;\n\n    if (includes(allShapes, host)) {\n      moveShape(attacher);\n    }\n  });\n\n  allShapes = movingShapes.concat(resizingShapes);\n\n  // move external label if its label target's (connection) source and target are moving\n  forEach(connections, function(connection) {\n    var source = connection.source,\n        target = connection.target,\n        label = connection.label;\n\n    if (includes(allShapes, source)\n      && includes(allShapes, target)\n      && label) {\n      moveShape(label);\n    }\n  });\n\n  return {\n    movingShapes: movingShapes,\n    resizingShapes: resizingShapes\n  };\n};\n\nSpaceTool.prototype.toggle = function() {\n\n  if (this.isActive()) {\n    return this._dragging.cancel();\n  }\n\n  var mouseEvent = this._mouse.getLastMoveEvent();\n\n  this.activateSelection(mouseEvent, !!mouseEvent);\n};\n\nSpaceTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  if (context) {\n    return /^spaceTool/.test(context.prefix);\n  }\n\n  return false;\n};\n\n// helpers //////////\n\nfunction addPadding(trbl) {\n  return {\n    top: trbl.top - PADDING,\n    right: trbl.right + PADDING,\n    bottom: trbl.bottom + PADDING,\n    left: trbl.left - PADDING\n  };\n}\n\nfunction ensureConstraints(event) {\n  var context = event.context,\n      spaceToolConstraints = context.spaceToolConstraints;\n\n  if (!spaceToolConstraints) {\n    return;\n  }\n\n  var x, y;\n\n  if (isNumber(spaceToolConstraints.left)) {\n    x = Math.max(event.x, spaceToolConstraints.left);\n\n    event.dx = event.dx + x - event.x;\n    event.x = x;\n  }\n\n  if (isNumber(spaceToolConstraints.right)) {\n    x = Math.min(event.x, spaceToolConstraints.right);\n\n    event.dx = event.dx + x - event.x;\n    event.x = x;\n  }\n\n  if (isNumber(spaceToolConstraints.top)) {\n    y = Math.max(event.y, spaceToolConstraints.top);\n\n    event.dy = event.dy + y - event.y;\n    event.y = y;\n  }\n\n  if (isNumber(spaceToolConstraints.bottom)) {\n    y = Math.min(event.y, spaceToolConstraints.bottom);\n\n    event.dy = event.dy + y - event.y;\n    event.y = y;\n  }\n}\n\nfunction getSpaceToolConstraints(elements, axis, direction, start, minDimensions) {\n  var movingShapes = elements.movingShapes,\n      resizingShapes = elements.resizingShapes;\n\n  if (!resizingShapes.length) {\n    return;\n  }\n\n  var spaceToolConstraints = {},\n      min,\n      max;\n\n  forEach(resizingShapes, function(resizingShape) {\n    var attachers = resizingShape.attachers,\n        children = resizingShape.children;\n\n    var resizingShapeBBox = asTRBL(resizingShape);\n\n    // find children that are not moving or resizing\n    var nonMovingResizingChildren = filter(children, function(child) {\n      return !isConnection(child) &&\n        !isLabel(child) &&\n        !includes(movingShapes, child) &&\n        !includes(resizingShapes, child);\n    });\n\n    // find children that are moving\n    var movingChildren = filter(children, function(child) {\n      return !isConnection(child) && !isLabel(child) && includes(movingShapes, child);\n    });\n\n    var minOrMax,\n        nonMovingResizingChildrenBBox,\n        movingChildrenBBox,\n        movingAttachers = [],\n        nonMovingAttachers = [],\n        movingAttachersBBox,\n        movingAttachersConstraint,\n        nonMovingAttachersBBox,\n        nonMovingAttachersConstraint;\n\n    if (nonMovingResizingChildren.length) {\n      nonMovingResizingChildrenBBox = addPadding(asTRBL(getBBox(nonMovingResizingChildren)));\n\n      minOrMax = start -\n        resizingShapeBBox[ DIRECTION_TO_TRBL[ direction ] ] +\n        nonMovingResizingChildrenBBox[ DIRECTION_TO_TRBL[ direction ] ];\n\n      if (direction === 'n') {\n        spaceToolConstraints.bottom = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 'w') {\n        spaceToolConstraints.right = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 's') {\n        spaceToolConstraints.top = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      } else if (direction === 'e') {\n        spaceToolConstraints.left = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      }\n    }\n\n    if (movingChildren.length) {\n      movingChildrenBBox = addPadding(asTRBL(getBBox(movingChildren)));\n\n      minOrMax = start -\n        movingChildrenBBox[ DIRECTION_TO_TRBL[ DIRECTION_TO_OPPOSITE[ direction ] ] ] +\n        resizingShapeBBox[ DIRECTION_TO_TRBL[ DIRECTION_TO_OPPOSITE[ direction ] ] ];\n\n      if (direction === 'n') {\n        spaceToolConstraints.bottom = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 'w') {\n        spaceToolConstraints.right = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 's') {\n        spaceToolConstraints.top = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      } else if (direction === 'e') {\n        spaceToolConstraints.left = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      }\n    }\n\n    if (attachers && attachers.length) {\n      attachers.forEach(function(attacher) {\n        if (includes(movingShapes, attacher)) {\n          movingAttachers.push(attacher);\n        } else {\n          nonMovingAttachers.push(attacher);\n        }\n      });\n\n      if (movingAttachers.length) {\n        movingAttachersBBox = asTRBL(getBBox(movingAttachers.map(getMid)));\n\n        movingAttachersConstraint = resizingShapeBBox[ DIRECTION_TO_TRBL[ DIRECTION_TO_OPPOSITE[ direction ] ] ]\n              - (movingAttachersBBox[ DIRECTION_TO_TRBL[ DIRECTION_TO_OPPOSITE[ direction ] ] ] - start);\n      }\n\n      if (nonMovingAttachers.length) {\n        nonMovingAttachersBBox = asTRBL(getBBox(nonMovingAttachers.map(getMid)));\n\n        nonMovingAttachersConstraint = nonMovingAttachersBBox[ DIRECTION_TO_TRBL[ direction ] ]\n              - (resizingShapeBBox[ DIRECTION_TO_TRBL[ direction ] ] - start);\n      }\n\n      if (direction === 'n') {\n        minOrMax = Math.min(movingAttachersConstraint || Infinity, nonMovingAttachersConstraint || Infinity);\n\n        spaceToolConstraints.bottom = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 'w') {\n        minOrMax = Math.min(movingAttachersConstraint || Infinity, nonMovingAttachersConstraint || Infinity);\n\n        spaceToolConstraints.right = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 's') {\n        minOrMax = Math.max(movingAttachersConstraint || -Infinity, nonMovingAttachersConstraint || -Infinity);\n\n        spaceToolConstraints.top = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      } else if (direction === 'e') {\n        minOrMax = Math.max(movingAttachersConstraint || -Infinity, nonMovingAttachersConstraint || -Infinity);\n\n        spaceToolConstraints.left = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      }\n    }\n\n    var resizingShapeMinDimensions = minDimensions && minDimensions[ resizingShape.id ];\n\n    if (resizingShapeMinDimensions) {\n\n      if (direction === 'n') {\n        minOrMax = start +\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] -\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.bottom = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 'w') {\n        minOrMax = start +\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] -\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.right = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 's') {\n        minOrMax = start -\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] +\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.top = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      } else if (direction === 'e') {\n        minOrMax = start -\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] +\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.left = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      }\n    }\n  });\n\n  return spaceToolConstraints;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nfunction isAttacher(element) {\n  return !!element.host;\n}","import {\n  forEach\n} from 'min-dash';\n\nvar MARKER_DRAGGING = 'djs-dragging',\n    MARKER_RESIZING = 'djs-resizing';\n\nvar LOW_PRIORITY = 250;\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  translate\n} from '../../util/SvgTransformUtil';\n\nimport { isConnection } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../../draw/Styles').default} Styles\n */\n\nvar max = Math.max;\n\n\n/**\n * Provides previews for selecting/moving/resizing shapes when creating/removing space.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Canvas} canvas\n * @param {Styles} styles\n */\nexport default function SpaceToolPreview(\n    eventBus, elementRegistry, canvas,\n    styles, previewSupport) {\n\n  function addPreviewGfx(collection, dragGroup) {\n    forEach(collection, function(element) {\n      previewSupport.addDragger(element, dragGroup);\n\n      canvas.addMarker(element, MARKER_DRAGGING);\n    });\n  }\n\n  // add crosshair\n  eventBus.on('spaceTool.selection.start', function(event) {\n    var space = canvas.getLayer('space'),\n        context = event.context;\n\n    var orientation = {\n      x: 'M 0,-10000 L 0,10000',\n      y: 'M -10000,0 L 10000,0'\n    };\n\n    var crosshairGroup = svgCreate('g');\n    svgAttr(crosshairGroup, styles.cls('djs-crosshair-group', [ 'no-events' ]));\n\n    svgAppend(space, crosshairGroup);\n\n    // horizontal path\n    var pathX = svgCreate('path');\n    svgAttr(pathX, 'd', orientation.x);\n    svgClasses(pathX).add('djs-crosshair');\n\n    svgAppend(crosshairGroup, pathX);\n\n    // vertical path\n    var pathY = svgCreate('path');\n    svgAttr(pathY, 'd', orientation.y);\n    svgClasses(pathY).add('djs-crosshair');\n\n    svgAppend(crosshairGroup, pathY);\n\n    context.crosshairGroup = crosshairGroup;\n  });\n\n  // update crosshair\n  eventBus.on('spaceTool.selection.move', function(event) {\n    var crosshairGroup = event.context.crosshairGroup;\n\n    translate(crosshairGroup, event.x, event.y);\n  });\n\n  // remove crosshair\n  eventBus.on('spaceTool.selection.cleanup', function(event) {\n    var context = event.context,\n        crosshairGroup = context.crosshairGroup;\n\n    if (crosshairGroup) {\n      svgRemove(crosshairGroup);\n    }\n  });\n\n  // add and update move/resize previews\n  eventBus.on('spaceTool.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        line = context.line,\n        axis = context.axis,\n        movingShapes = context.movingShapes,\n        resizingShapes = context.resizingShapes;\n\n    if (!context.initialized) {\n      return;\n    }\n\n    if (!context.dragGroup) {\n      var spaceLayer = canvas.getLayer('space');\n\n      line = svgCreate('path');\n      svgAttr(line, 'd', 'M0,0 L0,0');\n      svgClasses(line).add('djs-crosshair');\n\n      svgAppend(spaceLayer, line);\n\n      context.line = line;\n\n      var dragGroup = svgCreate('g');\n      svgAttr(dragGroup, styles.cls('djs-drag-group', [ 'no-events' ]));\n\n      svgAppend(canvas.getActiveLayer(), dragGroup);\n\n      // shapes\n      addPreviewGfx(movingShapes, dragGroup);\n\n      // connections\n      var movingConnections = context.movingConnections = elementRegistry.filter(function(element) {\n        var sourceIsMoving = false;\n\n        forEach(movingShapes, function(shape) {\n          forEach(shape.outgoing, function(connection) {\n            if (element === connection) {\n              sourceIsMoving = true;\n            }\n          });\n        });\n\n        var targetIsMoving = false;\n\n        forEach(movingShapes, function(shape) {\n          forEach(shape.incoming, function(connection) {\n            if (element === connection) {\n              targetIsMoving = true;\n            }\n          });\n        });\n\n        var sourceIsResizing = false;\n\n        forEach(resizingShapes, function(shape) {\n          forEach(shape.outgoing, function(connection) {\n            if (element === connection) {\n              sourceIsResizing = true;\n            }\n          });\n        });\n\n        var targetIsResizing = false;\n\n        forEach(resizingShapes, function(shape) {\n          forEach(shape.incoming, function(connection) {\n            if (element === connection) {\n              targetIsResizing = true;\n            }\n          });\n        });\n\n        return isConnection(element)\n          && (sourceIsMoving || sourceIsResizing)\n          && (targetIsMoving || targetIsResizing);\n      });\n\n\n      addPreviewGfx(movingConnections, dragGroup);\n\n      context.dragGroup = dragGroup;\n    }\n\n    if (!context.frameGroup) {\n      var frameGroup = svgCreate('g');\n      svgAttr(frameGroup, styles.cls('djs-frame-group', [ 'no-events' ]));\n\n      svgAppend(canvas.getActiveLayer(), frameGroup);\n\n      var frames = [];\n\n      forEach(resizingShapes, function(shape) {\n        var frame = previewSupport.addFrame(shape, frameGroup);\n\n        var initialBounds = frame.getBBox();\n\n        frames.push({\n          element: frame,\n          initialBounds: initialBounds\n        });\n\n        canvas.addMarker(shape, MARKER_RESIZING);\n      });\n\n      context.frameGroup = frameGroup;\n      context.frames = frames;\n    }\n\n    var orientation = {\n      x: 'M' + event.x + ', -10000 L' + event.x + ', 10000',\n      y: 'M -10000, ' + event.y + ' L 10000, ' + event.y\n    };\n\n    svgAttr(line, { d: orientation[ axis ] });\n\n    var opposite = { x: 'y', y: 'x' };\n    var delta = { x: event.dx, y: event.dy };\n    delta[ opposite[ context.axis ] ] = 0;\n\n    // update move previews\n    translate(context.dragGroup, delta.x, delta.y);\n\n    // update resize previews\n    forEach(context.frames, function(frame) {\n      var element = frame.element,\n          initialBounds = frame.initialBounds,\n          width,\n          height;\n\n      if (context.direction === 'e') {\n        svgAttr(element, {\n          width: max(initialBounds.width + delta.x, 5)\n        });\n      } else {\n        width = max(initialBounds.width - delta.x, 5);\n\n        svgAttr(element, {\n          width: width,\n          x: initialBounds.x + initialBounds.width - width\n        });\n      }\n\n      if (context.direction === 's') {\n        svgAttr(element, {\n          height: max(initialBounds.height + delta.y, 5)\n        });\n      } else {\n        height = max(initialBounds.height - delta.y, 5);\n\n        svgAttr(element, {\n          height: height,\n          y: initialBounds.y + initialBounds.height - height\n        });\n      }\n    });\n\n  });\n\n  // remove move/resize previews\n  eventBus.on('spaceTool.cleanup', function(event) {\n\n    var context = event.context,\n        movingShapes = context.movingShapes,\n        movingConnections = context.movingConnections,\n        resizingShapes = context.resizingShapes,\n        line = context.line,\n        dragGroup = context.dragGroup,\n        frameGroup = context.frameGroup;\n\n    // moving shapes\n    forEach(movingShapes, function(shape) {\n      canvas.removeMarker(shape, MARKER_DRAGGING);\n    });\n\n    // moving connections\n    forEach(movingConnections, function(connection) {\n      canvas.removeMarker(connection, MARKER_DRAGGING);\n    });\n\n    if (dragGroup) {\n      svgRemove(line);\n      svgRemove(dragGroup);\n    }\n\n    forEach(resizingShapes, function(shape) {\n      canvas.removeMarker(shape, MARKER_RESIZING);\n    });\n\n    if (frameGroup) {\n      svgRemove(frameGroup);\n    }\n  });\n}\n\nSpaceToolPreview.$inject = [\n  'eventBus',\n  'elementRegistry',\n  'canvas',\n  'styles',\n  'previewSupport'\n];\n","import DraggingModule from '../dragging';\nimport RulesModule from '../rules';\nimport ToolManagerModule from '../tool-manager';\nimport PreviewSupportModule from '../preview-support';\nimport MouseModule from '../mouse';\n\nimport SpaceTool from './SpaceTool';\nimport SpaceToolPreview from './SpaceToolPreview';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'spaceToolPreview' ],\n  __depends__: [\n    DraggingModule,\n    RulesModule,\n    ToolManagerModule,\n    PreviewSupportModule,\n    MouseModule\n  ],\n  spaceTool: [ 'type', SpaceTool ],\n  spaceToolPreview: [ 'type', SpaceToolPreview ]\n};\n","import inherits from 'inherits-browser';\n\nimport SpaceTool from 'diagram-js/lib/features/space-tool/SpaceTool';\n\nimport { getBusinessObject, is } from '../../util/ModelUtil';\n\nimport { isHorizontal } from '../../util/DiUtil';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').Axis} Axis\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n */\n\n/**\n * @param {Injector} injector\n */\nexport default function BpmnSpaceTool(injector) {\n  injector.invoke(SpaceTool, this);\n}\n\nBpmnSpaceTool.$inject = [\n  'injector'\n];\n\ninherits(BpmnSpaceTool, SpaceTool);\n\n/**\n * @param {Shape[]} elements\n * @param {Axis} axis\n * @param {Point} delta\n * @param {number} start\n *\n * @return {Object}\n */\nBpmnSpaceTool.prototype.calculateAdjustments = function(elements, axis, delta, start) {\n  var adjustments = SpaceTool.prototype.calculateAdjustments.call(this, elements, axis, delta, start);\n\n  // do not resize:\n  //\n  // * text annotations (horizontally/vertically)\n  // * empty horizontal pools (vertically)\n  // * empty vertical pools (horizontally)\n  adjustments.resizingShapes = adjustments.resizingShapes.filter(function(shape) {\n\n    if (is(shape, 'bpmn:TextAnnotation')) {\n      return false;\n    }\n\n    if (isCollapsedPool(shape)) {\n      if (axis === 'y' && isHorizontal(shape) || axis === 'x' && !isHorizontal(shape)) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n\n  return adjustments;\n};\n\n\n// helpers ///////////\n\nfunction isCollapsedPool(shape) {\n  return is(shape, 'bpmn:Participant') && !getBusinessObject(shape).processRef;\n}","import SpaceToolModule from 'diagram-js/lib/features/space-tool';\n\nimport BpmnSpaceTool from './BpmnSpaceTool';\n\nexport default {\n  __depends__: [ SpaceToolModule ],\n  spaceTool: [ 'type', BpmnSpaceTool ]\n};","import {\n  uniqueBy,\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../core/Types').ElementLike} ElementLike\n *\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./CommandHandler').default} CommandHandler\n *\n * @typedef { any } CommandContext\n * @typedef { {\n *   new (...args: any[]) : CommandHandler\n * } } CommandHandlerConstructor\n * @typedef { {\n *   [key: string]: CommandHandler;\n * } } CommandHandlerMap\n * @typedef { {\n *   command: string;\n *   context: any;\n *   id?: any;\n * } } CommandStackAction\n * @typedef { {\n *   actions: CommandStackAction[];\n *   dirty: ElementLike[];\n *   trigger: 'execute' | 'undo' | 'redo' | 'clear' | null;\n *   atomic?: boolean;\n * } } CurrentExecution\n */\n\n/**\n * A service that offers un- and redoable execution of commands.\n *\n * The command stack is responsible for executing modeling actions\n * in a un- and redoable manner. To do this it delegates the actual\n * command execution to {@link CommandHandler}s.\n *\n * Command handlers provide {@link CommandHandler#execute(ctx)} and\n * {@link CommandHandler#revert(ctx)} methods to un- and redo a command\n * identified by a command context.\n *\n *\n * ## Life-Cycle events\n *\n * In the process the command stack fires a number of life-cycle events\n * that other components to participate in the command execution.\n *\n *    * preExecute\n *    * preExecuted\n *    * execute\n *    * executed\n *    * postExecute\n *    * postExecuted\n *    * revert\n *    * reverted\n *\n * A special event is used for validating, whether a command can be\n * performed prior to its execution.\n *\n *    * canExecute\n *\n * Each of the events is fired as `commandStack.{eventName}` and\n * `commandStack.{commandName}.{eventName}`, respectively. This gives\n * components fine grained control on where to hook into.\n *\n * The event object fired transports `command`, the name of the\n * command and `context`, the command context.\n *\n *\n * ## Creating Command Handlers\n *\n * Command handlers should provide the {@link CommandHandler#execute(ctx)}\n * and {@link CommandHandler#revert(ctx)} methods to implement\n * redoing and undoing of a command.\n *\n * A command handler _must_ ensure undo is performed properly in order\n * not to break the undo chain. It must also return the shapes that\n * got changed during the `execute` and `revert` operations.\n *\n * Command handlers may execute other modeling operations (and thus\n * commands) in their `preExecute(d)` and `postExecute(d)` phases. The command\n * stack will properly group all commands together into a logical unit\n * that may be re- and undone atomically.\n *\n * Command handlers must not execute other commands from within their\n * core implementation (`execute`, `revert`).\n *\n *\n * ## Change Tracking\n *\n * During the execution of the CommandStack it will keep track of all\n * elements that have been touched during the command's execution.\n *\n * At the end of the CommandStack execution it will notify interested\n * components via an 'elements.changed' event with all the dirty\n * elements.\n *\n * The event can be picked up by components that are interested in the fact\n * that elements have been changed. One use case for this is updating\n * their graphical representation after moving / resizing or deletion.\n *\n * @see CommandHandler\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function CommandStack(eventBus, injector) {\n\n  /**\n   * A map of all registered command handlers.\n   *\n   * @type {CommandHandlerMap}\n   */\n  this._handlerMap = {};\n\n  /**\n   * A stack containing all re/undoable actions on the diagram\n   *\n   * @type {CommandStackAction[]}\n   */\n  this._stack = [];\n\n  /**\n   * The current index on the stack\n   *\n   * @type {number}\n   */\n  this._stackIdx = -1;\n\n  /**\n   * Current active commandStack execution\n   *\n   * @type {CurrentExecution}\n   */\n  this._currentExecution = {\n    actions: [],\n    dirty: [],\n    trigger: null\n  };\n\n  /**\n   * @type {Injector}\n   */\n  this._injector = injector;\n\n  /**\n   * @type EventBus\n   */\n  this._eventBus = eventBus;\n\n  /**\n   * @type { number }\n   */\n  this._uid = 1;\n\n  eventBus.on([\n    'diagram.destroy',\n    'diagram.clear'\n  ], function() {\n    this.clear(false);\n  }, this);\n}\n\nCommandStack.$inject = [ 'eventBus', 'injector' ];\n\n\n/**\n * Execute a command.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n */\nCommandStack.prototype.execute = function(command, context) {\n  if (!command) {\n    throw new Error('command required');\n  }\n\n  this._currentExecution.trigger = 'execute';\n\n  const action = { command: command, context: context };\n\n  this._pushAction(action);\n  this._internalExecute(action);\n  this._popAction();\n};\n\n\n/**\n * Check whether a command can be executed.\n *\n * Implementors may hook into the mechanism on two ways:\n *\n *   * in event listeners:\n *\n *     Users may prevent the execution via an event listener.\n *     It must prevent the default action for `commandStack.(<command>.)canExecute` events.\n *\n *   * in command handlers:\n *\n *     If the method {@link CommandHandler#canExecute} is implemented in a handler\n *     it will be called to figure out whether the execution is allowed.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n *\n * @return {boolean} Whether the command can be executed with the given context.\n */\nCommandStack.prototype.canExecute = function(command, context) {\n\n  const action = { command: command, context: context };\n\n  const handler = this._getHandler(command);\n\n  let result = this._fire(command, 'canExecute', action);\n\n  // handler#canExecute will only be called if no listener\n  // decided on a result already\n  if (result === undefined) {\n    if (!handler) {\n      return false;\n    }\n\n    if (handler.canExecute) {\n      result = handler.canExecute(context);\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Clear the command stack, erasing all undo / redo history.\n *\n * @param {boolean} [emit=true] Whether to fire an event. Defaults to `true`.\n */\nCommandStack.prototype.clear = function(emit) {\n  this._stack.length = 0;\n  this._stackIdx = -1;\n\n  if (emit !== false) {\n    this._fire('changed', { trigger: 'clear' });\n  }\n};\n\n\n/**\n * Undo last command(s)\n */\nCommandStack.prototype.undo = function() {\n  let action = this._getUndoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'undo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalUndo(action);\n      next = this._getUndoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Redo last command(s)\n */\nCommandStack.prototype.redo = function() {\n  let action = this._getRedoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'redo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalExecute(action, true);\n      next = this._getRedoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Register a handler instance with the command stack.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandler} handler Handler to execute the command.\n */\nCommandStack.prototype.register = function(command, handler) {\n  this._setHandler(command, handler);\n};\n\n\n/**\n * Register a handler type with the command stack  by instantiating it and\n * injecting its dependencies.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandlerConstructor} handlerCls Constructor to instantiate a {@link CommandHandler}.\n */\nCommandStack.prototype.registerHandler = function(command, handlerCls) {\n\n  if (!command || !handlerCls) {\n    throw new Error('command and handlerCls must be defined');\n  }\n\n  const handler = this._injector.instantiate(handlerCls);\n  this.register(command, handler);\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canUndo = function() {\n  return !!this._getUndoAction();\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canRedo = function() {\n  return !!this._getRedoAction();\n};\n\n// stack access  //////////////////////\n\nCommandStack.prototype._getRedoAction = function() {\n  return this._stack[this._stackIdx + 1];\n};\n\n\nCommandStack.prototype._getUndoAction = function() {\n  return this._stack[this._stackIdx];\n};\n\n\n// internal functionality //////////////////////\n\nCommandStack.prototype._internalUndo = function(action) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n    this._fire(command, 'revert', action);\n\n    if (handler.revert) {\n      this._markDirty(handler.revert(context));\n    }\n\n    this._revertedAction(action);\n\n    this._fire(command, 'reverted', action);\n  });\n};\n\n\nCommandStack.prototype._fire = function(command, qualifier, event) {\n  if (arguments.length < 3) {\n    event = qualifier;\n    qualifier = null;\n  }\n\n  const names = qualifier ? [ command + '.' + qualifier, qualifier ] : [ command ];\n  let result;\n\n  event = this._eventBus.createEvent(event);\n\n  for (const name of names) {\n    result = this._eventBus.fire('commandStack.' + name, event);\n\n    if (event.cancelBubble) {\n      break;\n    }\n  }\n\n  return result;\n};\n\nCommandStack.prototype._createId = function() {\n  return this._uid++;\n};\n\nCommandStack.prototype._atomicDo = function(fn) {\n\n  const execution = this._currentExecution;\n\n  execution.atomic = true;\n\n  try {\n    fn();\n  } finally {\n    execution.atomic = false;\n  }\n};\n\nCommandStack.prototype._internalExecute = function(action, redo) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  if (!handler) {\n    throw new Error('no command handler registered for <' + command + '>');\n  }\n\n  this._pushAction(action);\n\n  if (!redo) {\n    this._fire(command, 'preExecute', action);\n\n    if (handler.preExecute) {\n      handler.preExecute(context);\n    }\n\n    this._fire(command, 'preExecuted', action);\n  }\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n\n    this._fire(command, 'execute', action);\n\n    if (handler.execute) {\n\n      // actual execute + mark return results as dirty\n      this._markDirty(handler.execute(context));\n    }\n\n    // log to stack\n    this._executedAction(action, redo);\n\n    this._fire(command, 'executed', action);\n  });\n\n  if (!redo) {\n    this._fire(command, 'postExecute', action);\n\n    if (handler.postExecute) {\n      handler.postExecute(context);\n    }\n\n    this._fire(command, 'postExecuted', action);\n  }\n\n  this._popAction();\n};\n\n\nCommandStack.prototype._pushAction = function(action) {\n\n  const execution = this._currentExecution,\n        actions = execution.actions;\n\n  const baseAction = actions[0];\n\n  if (execution.atomic) {\n    throw new Error('illegal invocation in <execute> or <revert> phase (action: ' + action.command + ')');\n  }\n\n  if (!action.id) {\n    action.id = (baseAction && baseAction.id) || this._createId();\n  }\n\n  actions.push(action);\n};\n\n\nCommandStack.prototype._popAction = function() {\n  const execution = this._currentExecution,\n        trigger = execution.trigger,\n        actions = execution.actions,\n        dirty = execution.dirty;\n\n  actions.pop();\n\n  if (!actions.length) {\n    this._eventBus.fire('elements.changed', { elements: uniqueBy('id', dirty.reverse()) });\n\n    dirty.length = 0;\n\n    this._fire('changed', { trigger: trigger });\n\n    execution.trigger = null;\n  }\n};\n\n\nCommandStack.prototype._markDirty = function(elements) {\n  const execution = this._currentExecution;\n\n  if (!elements) {\n    return;\n  }\n\n  elements = isArray(elements) ? elements : [ elements ];\n\n  execution.dirty = execution.dirty.concat(elements);\n};\n\n\nCommandStack.prototype._executedAction = function(action, redo) {\n  const stackIdx = ++this._stackIdx;\n\n  if (!redo) {\n    this._stack.splice(stackIdx, this._stack.length, action);\n  }\n};\n\n\nCommandStack.prototype._revertedAction = function(action) {\n  this._stackIdx--;\n};\n\n\nCommandStack.prototype._getHandler = function(command) {\n  return this._handlerMap[command];\n};\n\nCommandStack.prototype._setHandler = function(command, handler) {\n  if (!command || !handler) {\n    throw new Error('command and handler required');\n  }\n\n  if (this._handlerMap[command]) {\n    throw new Error('overriding handler for command <' + command + '>');\n  }\n\n  this._handlerMap[command] = handler;\n};\n","import CommandStack from './CommandStack';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  commandStack: [ 'type', CommandStack ]\n};\n","/**\n * Remove from the beginning of a collection until it is empty.\n *\n * This is a null-safe operation that ensures elements\n * are being removed from the given collection until the\n * collection is empty.\n *\n * The implementation deals with the fact that a remove operation\n * may touch, i.e. remove multiple elements in the collection\n * at a time.\n *\n * @param {Object[]} [collection]\n * @param {(element: Object) => void} removeFn\n *\n * @return {Object[]} the cleared collection\n */\nexport function saveClear(collection, removeFn) {\n\n  if (typeof removeFn !== 'function') {\n    throw new Error('removeFn iterator must be a function');\n  }\n\n  if (!collection) {\n    return;\n  }\n\n  var e;\n\n  while ((e = collection[0])) {\n    removeFn(e);\n  }\n\n  return collection;\n}\n","import {\n  forEach,\n  filter\n} from 'min-dash';\n\nimport inherits from 'inherits-browser';\n\nvar LOW_PRIORITY = 250,\n    HIGH_PRIORITY = 1400;\n\nimport {\n  add as collectionAdd,\n  indexOf as collectionIdx\n} from '../../util/Collections';\n\nimport { saveClear } from '../../util/Removal';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n */\n\n/**\n * A handler that makes sure labels are properly moved with\n * their label targets.\n *\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function LabelSupport(injector, eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var movePreview = injector.get('movePreview', false);\n\n  // remove labels from the collection that are being\n  // moved with other elements anyway\n  eventBus.on('shape.move.start', HIGH_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        validatedShapes = context.validatedShapes;\n\n    context.shapes = removeLabels(shapes);\n    context.validatedShapes = removeLabels(validatedShapes);\n  });\n\n  // add labels to visual's group\n  movePreview && eventBus.on('shape.move.start', LOW_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes;\n\n    var labels = [];\n\n    forEach(shapes, function(element) {\n\n      forEach(element.labels, function(label) {\n\n        if (!label.hidden && context.shapes.indexOf(label) === -1) {\n          labels.push(label);\n        }\n\n        if (element.labelTarget) {\n          labels.push(element);\n        }\n      });\n    });\n\n    forEach(labels, function(label) {\n      movePreview.makeDraggable(context, label, true);\n    });\n\n  });\n\n  // add all labels to move closure\n  this.preExecuted('elements.move', HIGH_PRIORITY, function(e) {\n    var context = e.context,\n        closure = context.closure,\n        enclosedElements = closure.enclosedElements;\n\n    var enclosedLabels = [];\n\n    // find labels that are not part of\n    // move closure yet and add them\n    forEach(enclosedElements, function(element) {\n      forEach(element.labels, function(label) {\n\n        if (!enclosedElements[label.id]) {\n          enclosedLabels.push(label);\n        }\n      });\n    });\n\n    closure.addAll(enclosedLabels);\n  });\n\n\n  this.preExecute([\n    'connection.delete',\n    'shape.delete'\n  ], function(e) {\n\n    var context = e.context,\n        element = context.connection || context.shape;\n\n    saveClear(element.labels, function(label) {\n      modeling.removeShape(label, { nested: true });\n    });\n  });\n\n\n  this.execute('shape.delete', function(e) {\n\n    var context = e.context,\n        shape = context.shape,\n        labelTarget = shape.labelTarget;\n\n    // unset labelTarget\n    if (labelTarget) {\n      context.labelTargetIndex = collectionIdx(labelTarget.labels, shape);\n      context.labelTarget = labelTarget;\n\n      shape.labelTarget = null;\n    }\n  });\n\n  this.revert('shape.delete', function(e) {\n\n    var context = e.context,\n        shape = context.shape,\n        labelTarget = context.labelTarget,\n        labelTargetIndex = context.labelTargetIndex;\n\n    // restore labelTarget\n    if (labelTarget) {\n      collectionAdd(labelTarget.labels, shape, labelTargetIndex);\n\n      shape.labelTarget = labelTarget;\n    }\n  });\n\n}\n\ninherits(LabelSupport, CommandInterceptor);\n\nLabelSupport.$inject = [\n  'injector',\n  'eventBus',\n  'modeling'\n];\n\n\n/**\n * Return a filtered list of elements that do not\n * contain attached elements with hosts being part\n * of the selection.\n *\n * @param {Element[]} elements\n *\n * @return {Element[]} filtered\n */\nfunction removeLabels(elements) {\n\n  return filter(elements, function(element) {\n\n    // filter out labels that are move together\n    // with their label targets\n    return elements.indexOf(element.labelTarget) === -1;\n  });\n}\n","import LabelSupport from './LabelSupport';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'labelSupport' ],\n  labelSupport: [ 'type', LabelSupport ]\n};\n","import {\n  flatten,\n  filter,\n  forEach,\n  groupBy,\n  map,\n  unionBy\n} from 'min-dash';\n\nimport { saveClear } from '../../util/Removal';\n\nimport { getNewAttachShapeDelta } from '../../util/AttachUtil';\n\nimport inherits from 'inherits-browser';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../rules/Rules').default} Rules\n * @typedef {import('../modeling/Modeling').default} Modeling\n */\n\nvar LOW_PRIORITY = 251,\n    HIGH_PRIORITY = 1401;\n\nvar MARKER_ATTACH = 'attach-ok';\n\n\n/**\n * Adds the notion of attached elements to the modeler.\n *\n * Optionally depends on `diagram-js/lib/features/move` to render\n * the attached elements during move preview.\n *\n * Optionally depends on `diagram-js/lib/features/label-support`\n * to render attached labels during move preview.\n *\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Rules} rules\n * @param {Modeling} modeling\n */\nexport default function AttachSupport(injector, eventBus, canvas, rules, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var movePreview = injector.get('movePreview', false);\n\n\n  // remove all the attached elements from the shapes to be validated\n  // add all the attached shapes to the overall list of moved shapes\n  eventBus.on('shape.move.start', HIGH_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        validatedShapes = context.validatedShapes;\n\n    context.shapes = addAttached(shapes);\n\n    context.validatedShapes = removeAttached(validatedShapes);\n  });\n\n  // add attachers to the visual's group\n  movePreview && eventBus.on('shape.move.start', LOW_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        attachers = getAttachers(shapes);\n\n    forEach(attachers, function(attacher) {\n      movePreview.makeDraggable(context, attacher, true);\n\n      forEach(attacher.labels, function(label) {\n        movePreview.makeDraggable(context, label, true);\n      });\n    });\n  });\n\n  // add attach-ok marker to current host\n  movePreview && eventBus.on('shape.move.start', function(event) {\n    var context = event.context,\n        shapes = context.shapes;\n\n    if (shapes.length !== 1) {\n      return;\n    }\n\n    var shape = shapes[0];\n\n    var host = shape.host;\n\n    if (host) {\n      canvas.addMarker(host, MARKER_ATTACH);\n\n      eventBus.once([\n        'shape.move.out',\n        'shape.move.cleanup'\n      ], function() {\n        canvas.removeMarker(host, MARKER_ATTACH);\n      });\n    }\n  });\n\n  // add all attachers to move closure\n  this.preExecuted('elements.move', HIGH_PRIORITY, function(e) {\n    var context = e.context,\n        closure = context.closure,\n        shapes = context.shapes,\n        attachers = getAttachers(shapes);\n\n    forEach(attachers, function(attacher) {\n      closure.add(attacher, closure.topLevel[attacher.host.id]);\n    });\n  });\n\n  // perform the attaching after shapes are done moving\n  this.postExecuted('elements.move', function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        newHost = context.newHost,\n        attachers;\n\n    // only single elements can be attached\n    // multiply elements can be detached\n    if (newHost && shapes.length !== 1) {\n      return;\n    }\n\n    if (newHost) {\n      attachers = shapes;\n    } else {\n\n      // find attachers moved without host\n      attachers = filter(shapes, function(shape) {\n        var host = shape.host;\n\n        return isAttacher(shape) && !includes(shapes, host);\n      });\n    }\n\n    forEach(attachers, function(attacher) {\n      modeling.updateAttachment(attacher, newHost);\n    });\n  });\n\n  // ensure invalid attachment connections are removed\n  this.postExecuted('elements.move', function(e) {\n\n    var shapes = e.context.shapes;\n\n    forEach(shapes, function(shape) {\n\n      forEach(shape.attachers, function(attacher) {\n\n        // remove invalid outgoing connections\n        forEach(attacher.outgoing.slice(), function(connection) {\n          var allowed = rules.allowed('connection.reconnect', {\n            connection: connection,\n            source: connection.source,\n            target: connection.target\n          });\n\n          if (!allowed) {\n            modeling.removeConnection(connection);\n          }\n        });\n\n        // remove invalid incoming connections\n        forEach(attacher.incoming.slice(), function(connection) {\n          var allowed = rules.allowed('connection.reconnect', {\n            connection: connection,\n            source: connection.source,\n            target: connection.target\n          });\n\n          if (!allowed) {\n            modeling.removeConnection(connection);\n          }\n        });\n      });\n    });\n  });\n\n  this.postExecute('shape.create', function(e) {\n    var context = e.context,\n        shape = context.shape,\n        host = context.host;\n\n    if (host) {\n      modeling.updateAttachment(shape, host);\n    }\n  });\n\n  // update attachments if the host is replaced\n  this.postExecute('shape.replace', function(e) {\n\n    var context = e.context,\n        oldShape = context.oldShape,\n        newShape = context.newShape;\n\n    // move the attachers to the new host\n    saveClear(oldShape.attachers, function(attacher) {\n      var allowed = rules.allowed('elements.move', {\n        target: newShape,\n        shapes: [ attacher ]\n      });\n\n      if (allowed === 'attach') {\n        modeling.updateAttachment(attacher, newShape);\n      } else {\n        modeling.removeShape(attacher);\n      }\n    });\n\n    // move attachers if new host has different size\n    if (newShape.attachers.length) {\n\n      forEach(newShape.attachers, function(attacher) {\n        var delta = getNewAttachShapeDelta(attacher, oldShape, newShape);\n        modeling.moveShape(attacher, delta, attacher.parent);\n      });\n    }\n\n  });\n\n  // move shape on host resize\n  this.postExecute('shape.resize', function(event) {\n    var context = event.context,\n        shape = context.shape,\n        oldBounds = context.oldBounds,\n        newBounds = context.newBounds,\n        attachers = shape.attachers,\n        hints = context.hints || {};\n\n    if (hints.attachSupport === false) {\n      return;\n    }\n\n    forEach(attachers, function(attacher) {\n      var delta = getNewAttachShapeDelta(attacher, oldBounds, newBounds);\n\n      modeling.moveShape(attacher, delta, attacher.parent);\n\n      forEach(attacher.labels, function(label) {\n        modeling.moveShape(label, delta, label.parent);\n      });\n    });\n  });\n\n  // remove attachments\n  this.preExecute('shape.delete', function(event) {\n\n    var shape = event.context.shape;\n\n    saveClear(shape.attachers, function(attacher) {\n      modeling.removeShape(attacher);\n    });\n\n    if (shape.host) {\n      modeling.updateAttachment(shape, null);\n    }\n  });\n}\n\ninherits(AttachSupport, CommandInterceptor);\n\nAttachSupport.$inject = [\n  'injector',\n  'eventBus',\n  'canvas',\n  'rules',\n  'modeling'\n];\n\n\n/**\n * Return attachers of the given shapes\n *\n * @param {Element[]} shapes\n * @return {Element[]}\n */\nfunction getAttachers(shapes) {\n  return flatten(map(shapes, function(s) {\n    return s.attachers || [];\n  }));\n}\n\n/**\n * Return a combined list of elements and\n * attachers.\n *\n * @param {Element[]} elements\n * @return {Element[]} filtered\n */\nfunction addAttached(elements) {\n  var attachers = getAttachers(elements);\n\n  return unionBy('id', elements, attachers);\n}\n\n/**\n * Return a filtered list of elements that do not\n * contain attached elements with hosts being part\n * of the selection.\n *\n * @param {Element[]} elements\n *\n * @return {Element[]} filtered\n */\nfunction removeAttached(elements) {\n\n  var ids = groupBy(elements, 'id');\n\n  return filter(elements, function(element) {\n    while (element) {\n\n      // host in selection\n      if (element.host && ids[element.host.id]) {\n        return false;\n      }\n\n      element = element.parent;\n    }\n\n    return true;\n  });\n}\n\nfunction isAttacher(shape) {\n  return !!shape.host;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}","import RulesModule from '../rules';\n\nimport AttachSupport from './AttachSupport';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    RulesModule\n  ],\n  __init__: [ 'attachSupport' ],\n  attachSupport: [ 'type', AttachSupport ]\n};\n","import {\n  map,\n  assign,\n  pick\n} from 'min-dash';\n\nimport {\n  isAny\n} from './util/ModelingUtil';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../model/Types').Moddle} Moddle\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n *\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n */\n\n/**\n * A factory for BPMN elements.\n *\n * @param {Moddle} moddle\n */\nexport default function BpmnFactory(moddle) {\n  this._model = moddle;\n}\n\nBpmnFactory.$inject = [ 'moddle' ];\n\n/**\n * @param {ModdleElement} element\n *\n * @return {boolean}\n */\nBpmnFactory.prototype._needsId = function(element) {\n  return isAny(element, [\n    'bpmn:RootElement',\n    'bpmn:FlowElement',\n    'bpmn:MessageFlow',\n    'bpmn:DataAssociation',\n    'bpmn:Artifact',\n    'bpmn:Participant',\n    'bpmn:Lane',\n    'bpmn:LaneSet',\n    'bpmn:Process',\n    'bpmn:Collaboration',\n    'bpmndi:BPMNShape',\n    'bpmndi:BPMNEdge',\n    'bpmndi:BPMNDiagram',\n    'bpmndi:BPMNPlane',\n    'bpmn:Property',\n    'bpmn:CategoryValue'\n  ]);\n};\n\n/**\n * @param {ModdleElement} element\n */\nBpmnFactory.prototype._ensureId = function(element) {\n  if (element.id) {\n    this._model.ids.claim(element.id, element);\n    return;\n  }\n\n  // generate semantic ids for elements\n  // bpmn:SequenceFlow -> SequenceFlow_ID\n  var prefix;\n\n  if (is(element, 'bpmn:Activity')) {\n    prefix = 'Activity';\n  } else if (is(element, 'bpmn:Event')) {\n    prefix = 'Event';\n  } else if (is(element, 'bpmn:Gateway')) {\n    prefix = 'Gateway';\n  } else if (isAny(element, [ 'bpmn:SequenceFlow', 'bpmn:MessageFlow' ])) {\n    prefix = 'Flow';\n  } else {\n    prefix = (element.$type || '').replace(/^[^:]*:/g, '');\n  }\n\n  prefix += '_';\n\n  if (!element.id && this._needsId(element)) {\n    element.id = this._model.ids.nextPrefixed(prefix, element);\n  }\n};\n\n/**\n * Create BPMN element.\n *\n * @param {string} type\n * @param {Object} [attrs]\n *\n * @return {ModdleElement}\n */\nBpmnFactory.prototype.create = function(type, attrs) {\n  var element = this._model.create(type, attrs || {});\n\n  this._ensureId(element);\n\n  return element;\n};\n\n/**\n * @return {ModdleElement}\n */\nBpmnFactory.prototype.createDiLabel = function() {\n  return this.create('bpmndi:BPMNLabel', {\n    bounds: this.createDiBounds()\n  });\n};\n\n/**\n * @param {ModdleElement} semantic\n * @param {Object} [attrs]\n * @return {ModdleElement}\n */\nBpmnFactory.prototype.createDiShape = function(semantic, attrs) {\n  return this.create('bpmndi:BPMNShape', assign({\n    bpmnElement: semantic,\n    bounds: this.createDiBounds()\n  }, attrs));\n};\n\n/**\n * @return {ModdleElement}\n */\nBpmnFactory.prototype.createDiBounds = function(bounds) {\n  return this.create('dc:Bounds', bounds);\n};\n\n/**\n * @param {Point[]} waypoints\n *\n * @return {ModdleElement[]}\n */\nBpmnFactory.prototype.createDiWaypoints = function(waypoints) {\n  var self = this;\n\n  return map(waypoints, function(pos) {\n    return self.createDiWaypoint(pos);\n  });\n};\n\n/**\n * @param {Point} point\n *\n * @return {ModdleElement}\n */\nBpmnFactory.prototype.createDiWaypoint = function(point) {\n  return this.create('dc:Point', pick(point, [ 'x', 'y' ]));\n};\n\n/**\n * @param {ModdleElement} semantic\n * @param {Object} [attrs]\n *\n * @return {ModdleElement}\n */\nBpmnFactory.prototype.createDiEdge = function(semantic, attrs) {\n  return this.create('bpmndi:BPMNEdge', assign({\n    bpmnElement: semantic,\n    waypoint: this.createDiWaypoints([])\n  }, attrs));\n};\n\n/**\n * @param {ModdleElement} semantic\n * @param {Object} [attrs]\n *\n * @return {ModdleElement}\n */\nBpmnFactory.prototype.createDiPlane = function(semantic, attrs) {\n  return this.create('bpmndi:BPMNPlane', assign({\n    bpmnElement: semantic\n  }, attrs));\n};\n","import {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport inherits from 'inherits-browser';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  getBusinessObject,\n  getDi,\n  is\n} from '../../util/ModelUtil';\n\nimport { isAny } from './util/ModelingUtil';\n\nimport {\n  getLabel,\n  isLabel,\n  isLabelExternal\n} from '../../util/LabelUtil';\n\nimport { isPlane } from '../../util/DrilldownUtil';\n\nimport { delta } from 'diagram-js/lib/util/PositionUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('./BpmnFactory').default} BpmnFactory\n * @typedef {import('diagram-js/lib/layout/CroppingConnectionDocking').default} CroppingConnectionDocking\n *\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n * @typedef {import('../../model/Types').Parent} Parent\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * A handler responsible for updating the underlying BPMN 2.0 XML & DI\n * once changes on the diagram happen.\n *\n * @param {EventBus} eventBus\n * @param {BpmnFactory} bpmnFactory\n * @param {CroppingConnectionDocking} connectionDocking\n */\nexport default function BpmnUpdater(\n    eventBus,\n    bpmnFactory,\n    connectionDocking\n) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this._bpmnFactory = bpmnFactory;\n\n  var self = this;\n\n\n  // connection cropping //////////////////////\n\n  // crop connection ends during create/update\n  function cropConnection(e) {\n    var context = e.context,\n        hints = context.hints || {},\n        connection;\n\n    if (!context.cropped && hints.createElementsBehavior !== false) {\n      connection = context.connection;\n      connection.waypoints = connectionDocking.getCroppedWaypoints(connection);\n      context.cropped = true;\n    }\n  }\n\n  this.executed([\n    'connection.layout',\n    'connection.create'\n  ], cropConnection);\n\n  this.reverted([ 'connection.layout' ], function(e) {\n    delete e.context.cropped;\n  });\n\n\n\n  // BPMN + DI update //////////////////////\n\n\n  // update parent\n  function updateParent(e) {\n    var context = e.context;\n\n    self.updateParent(context.shape || context.connection, context.oldParent);\n  }\n\n  function reverseUpdateParent(e) {\n    var context = e.context;\n\n    var element = context.shape || context.connection,\n\n        // oldParent is the (old) new parent, because we are undoing\n        oldParent = context.parent || context.newParent;\n\n    self.updateParent(element, oldParent);\n  }\n\n  this.executed([\n    'shape.move',\n    'shape.create',\n    'shape.delete',\n    'connection.create',\n    'connection.move',\n    'connection.delete'\n  ], ifBpmn(updateParent));\n\n  this.reverted([\n    'shape.move',\n    'shape.create',\n    'shape.delete',\n    'connection.create',\n    'connection.move',\n    'connection.delete'\n  ], ifBpmn(reverseUpdateParent));\n\n  /*\n   * ## Updating Parent\n   *\n   * When morphing a Process into a Collaboration or vice-versa,\n   * make sure that both the *semantic* and *di* parent of each element\n   * is updated.\n   *\n   */\n  function updateRoot(event) {\n    var context = event.context,\n        oldRoot = context.oldRoot,\n        children = oldRoot.children;\n\n    forEach(children, function(child) {\n      if (is(child, 'bpmn:BaseElement')) {\n        self.updateParent(child);\n      }\n    });\n  }\n\n  this.executed([ 'canvas.updateRoot' ], updateRoot);\n  this.reverted([ 'canvas.updateRoot' ], updateRoot);\n\n\n  // update bounds\n  function updateBounds(e) {\n    var shape = e.context.shape;\n\n    if (!is(shape, 'bpmn:BaseElement')) {\n      return;\n    }\n\n    self.updateBounds(shape);\n  }\n\n  this.executed([ 'shape.move', 'shape.create', 'shape.resize' ], ifBpmn(function(event) {\n\n    // exclude labels because they're handled separately during shape.changed\n    if (event.context.shape.type === 'label') {\n      return;\n    }\n\n    updateBounds(event);\n  }));\n\n  this.reverted([ 'shape.move', 'shape.create', 'shape.resize' ], ifBpmn(function(event) {\n\n    // exclude labels because they're handled separately during shape.changed\n    if (event.context.shape.type === 'label') {\n      return;\n    }\n\n    updateBounds(event);\n  }));\n\n  // Handle labels separately. This is necessary, because the label bounds have to be updated\n  // every time its shape changes, not only on move, create and resize.\n  eventBus.on('shape.changed', function(event) {\n    if (event.element.type === 'label') {\n      updateBounds({ context: { shape: event.element } });\n    }\n  });\n\n  // attach / detach connection\n  function updateConnection(e) {\n    self.updateConnection(e.context);\n  }\n\n  this.executed([\n    'connection.create',\n    'connection.move',\n    'connection.delete',\n    'connection.reconnect'\n  ], ifBpmn(updateConnection));\n\n  this.reverted([\n    'connection.create',\n    'connection.move',\n    'connection.delete',\n    'connection.reconnect'\n  ], ifBpmn(updateConnection));\n\n\n  // update waypoints\n  function updateConnectionWaypoints(e) {\n    self.updateConnectionWaypoints(e.context.connection);\n  }\n\n  this.executed([\n    'connection.layout',\n    'connection.move',\n    'connection.updateWaypoints',\n  ], ifBpmn(updateConnectionWaypoints));\n\n  this.reverted([\n    'connection.layout',\n    'connection.move',\n    'connection.updateWaypoints',\n  ], ifBpmn(updateConnectionWaypoints));\n\n  // update conditional/default flows\n  this.executed('connection.reconnect', ifBpmn(function(event) {\n    var context = event.context,\n        connection = context.connection,\n        oldSource = context.oldSource,\n        newSource = context.newSource,\n        connectionBo = getBusinessObject(connection),\n        oldSourceBo = getBusinessObject(oldSource),\n        newSourceBo = getBusinessObject(newSource);\n\n    // remove condition from connection on reconnect to new source\n    // if new source can NOT have condional sequence flow\n    if (connectionBo.conditionExpression && !isAny(newSourceBo, [\n      'bpmn:Activity',\n      'bpmn:ExclusiveGateway',\n      'bpmn:InclusiveGateway'\n    ])) {\n      context.oldConditionExpression = connectionBo.conditionExpression;\n\n      delete connectionBo.conditionExpression;\n    }\n\n    // remove default from old source flow on reconnect to new source\n    // if source changed\n    if (oldSource !== newSource && oldSourceBo.default === connectionBo) {\n      context.oldDefault = oldSourceBo.default;\n\n      delete oldSourceBo.default;\n    }\n  }));\n\n  this.reverted('connection.reconnect', ifBpmn(function(event) {\n    var context = event.context,\n        connection = context.connection,\n        oldSource = context.oldSource,\n        newSource = context.newSource,\n        connectionBo = getBusinessObject(connection),\n        oldSourceBo = getBusinessObject(oldSource),\n        newSourceBo = getBusinessObject(newSource);\n\n    // add condition to connection on revert reconnect to new source\n    if (context.oldConditionExpression) {\n      connectionBo.conditionExpression = context.oldConditionExpression;\n    }\n\n    // add default to old source on revert reconnect to new source\n    if (context.oldDefault) {\n      oldSourceBo.default = context.oldDefault;\n\n      delete newSourceBo.default;\n    }\n  }));\n\n  // update attachments\n  function updateAttachment(e) {\n    self.updateAttachment(e.context);\n  }\n\n  this.executed([ 'element.updateAttachment' ], ifBpmn(updateAttachment));\n  this.reverted([ 'element.updateAttachment' ], ifBpmn(updateAttachment));\n\n\n  // update BPMNLabel\n  this.executed('element.updateLabel', ifBpmn(updateBPMNLabel));\n  this.reverted('element.updateLabel', ifBpmn(updateBPMNLabel));\n\n  function updateBPMNLabel(event) {\n    const { element } = event.context,\n          label = getLabel(element);\n    const di = getDi(element),\n          diLabel = di && di.get('label');\n\n    if (isLabelExternal(element) || isPlane(element)) {\n      return;\n    }\n\n    if (label && !diLabel) {\n      di.set('label', bpmnFactory.create('bpmndi:BPMNLabel'));\n    } else if (!label && diLabel) {\n      di.set('label', undefined);\n    }\n  }\n}\n\ninherits(BpmnUpdater, CommandInterceptor);\n\nBpmnUpdater.$inject = [\n  'eventBus',\n  'bpmnFactory',\n  'connectionDocking'\n];\n\n\n// implementation //////////////////////\n\n/**\n * @param { {\n *   shape: Shape;\n *   host: Shape;\n * } } context\n */\nBpmnUpdater.prototype.updateAttachment = function(context) {\n\n  var shape = context.shape,\n      businessObject = shape.businessObject,\n      host = shape.host;\n\n  businessObject.attachedToRef = host && host.businessObject;\n};\n\n/**\n * @param {Element} element\n * @param {Parent} oldParent\n */\nBpmnUpdater.prototype.updateParent = function(element, oldParent) {\n\n  // do not update BPMN 2.0 label parent\n  if (isLabel(element)) {\n    return;\n  }\n\n  // data stores in collaborations are handled separately by DataStoreBehavior\n  if (is(element, 'bpmn:DataStoreReference') &&\n      element.parent &&\n      is(element.parent, 'bpmn:Collaboration')) {\n    return;\n  }\n\n  var parentShape = element.parent;\n\n  var businessObject = element.businessObject,\n      di = getDi(element),\n      parentBusinessObject = parentShape && parentShape.businessObject,\n      parentDi = getDi(parentShape);\n\n  if (is(element, 'bpmn:FlowNode')) {\n    this.updateFlowNodeRefs(businessObject, parentBusinessObject, oldParent && oldParent.businessObject);\n  }\n\n  if (is(element, 'bpmn:DataOutputAssociation')) {\n    if (element.source) {\n      parentBusinessObject = element.source.businessObject;\n    } else {\n      parentBusinessObject = null;\n    }\n  }\n\n  if (is(element, 'bpmn:DataInputAssociation')) {\n    if (element.target) {\n      parentBusinessObject = element.target.businessObject;\n    } else {\n      parentBusinessObject = null;\n    }\n  }\n\n  this.updateSemanticParent(businessObject, parentBusinessObject);\n\n  if (is(element, 'bpmn:DataObjectReference') && businessObject.dataObjectRef) {\n    this.updateSemanticParent(businessObject.dataObjectRef, parentBusinessObject);\n  }\n\n  this.updateDiParent(di, parentDi);\n};\n\n/**\n * @param {Shape} shape\n */\nBpmnUpdater.prototype.updateBounds = function(shape) {\n\n  var di = getDi(shape),\n      embeddedLabelBounds = getEmbeddedLabelBounds(shape);\n\n  // update embedded label bounds if possible\n  if (embeddedLabelBounds) {\n    var embeddedLabelBoundsDelta = delta(embeddedLabelBounds, di.get('bounds'));\n\n    assign(embeddedLabelBounds, {\n      x: shape.x + embeddedLabelBoundsDelta.x,\n      y: shape.y + embeddedLabelBoundsDelta.y\n    });\n  }\n\n  var target = isLabel(shape) ? this._getLabel(di) : di;\n\n  var bounds = target.bounds;\n\n  if (!bounds) {\n    bounds = this._bpmnFactory.createDiBounds();\n    target.set('bounds', bounds);\n  }\n\n  assign(bounds, {\n    x: shape.x,\n    y: shape.y,\n    width: shape.width,\n    height: shape.height\n  });\n};\n\n/**\n * @param {ModdleElement} businessObject\n * @param {ModdleElement} newContainment\n * @param {ModdleElement} oldContainment\n */\nBpmnUpdater.prototype.updateFlowNodeRefs = function(businessObject, newContainment, oldContainment) {\n\n  if (oldContainment === newContainment) {\n    return;\n  }\n\n  var oldRefs, newRefs;\n\n  if (is (oldContainment, 'bpmn:Lane')) {\n    oldRefs = oldContainment.get('flowNodeRef');\n    collectionRemove(oldRefs, businessObject);\n  }\n\n  if (is(newContainment, 'bpmn:Lane')) {\n    newRefs = newContainment.get('flowNodeRef');\n    collectionAdd(newRefs, businessObject);\n  }\n};\n\n/**\n * @param {Connection} connection\n * @param {Element} newSource\n * @param {Element} newTarget\n */\nBpmnUpdater.prototype.updateDiConnection = function(connection, newSource, newTarget) {\n  var connectionDi = getDi(connection),\n      newSourceDi = getDi(newSource),\n      newTargetDi = getDi(newTarget);\n\n  if (connectionDi.sourceElement && connectionDi.sourceElement.bpmnElement !== getBusinessObject(newSource)) {\n    connectionDi.sourceElement = newSource && newSourceDi;\n  }\n\n  if (connectionDi.targetElement && connectionDi.targetElement.bpmnElement !== getBusinessObject(newTarget)) {\n    connectionDi.targetElement = newTarget && newTargetDi;\n  }\n\n};\n\n/**\n * @param {ModdleElement} di\n * @param {ModdleElement} parentDi\n */\nBpmnUpdater.prototype.updateDiParent = function(di, parentDi) {\n\n  if (parentDi && !is(parentDi, 'bpmndi:BPMNPlane')) {\n    parentDi = parentDi.$parent;\n  }\n\n  if (di.$parent === parentDi) {\n    return;\n  }\n\n  var planeElements = (parentDi || di.$parent).get('planeElement');\n\n  if (parentDi) {\n    planeElements.push(di);\n    di.$parent = parentDi;\n  } else {\n    collectionRemove(planeElements, di);\n    di.$parent = null;\n  }\n};\n\n/**\n * @param {ModdleElement} element\n *\n * @return {ModdleElement}\n */\nfunction getDefinitions(element) {\n  while (element && !is(element, 'bpmn:Definitions')) {\n    element = element.$parent;\n  }\n\n  return element;\n}\n\n/**\n * @param {ModdleElement} container\n *\n * @return {ModdleElement}\n */\nBpmnUpdater.prototype.getLaneSet = function(container) {\n\n  var laneSet, laneSets;\n\n  // bpmn:Lane\n  if (is(container, 'bpmn:Lane')) {\n    laneSet = container.childLaneSet;\n\n    if (!laneSet) {\n      laneSet = this._bpmnFactory.create('bpmn:LaneSet');\n      container.childLaneSet = laneSet;\n      laneSet.$parent = container;\n    }\n\n    return laneSet;\n  }\n\n  // bpmn:Participant\n  if (is(container, 'bpmn:Participant')) {\n    container = container.processRef;\n  }\n\n  // bpmn:FlowElementsContainer\n  laneSets = container.get('laneSets');\n  laneSet = laneSets[0];\n\n  if (!laneSet) {\n    laneSet = this._bpmnFactory.create('bpmn:LaneSet');\n    laneSet.$parent = container;\n    laneSets.push(laneSet);\n  }\n\n  return laneSet;\n};\n\n/**\n * @param {ModdleElement} businessObject\n * @param {ModdleElement} newParent\n * @param {ModdleElement} visualParent\n */\nBpmnUpdater.prototype.updateSemanticParent = function(businessObject, newParent, visualParent) {\n\n  var containment;\n\n  if (businessObject.$parent === newParent) {\n    return;\n  }\n\n  if (is(businessObject, 'bpmn:DataInput') || is(businessObject, 'bpmn:DataOutput')) {\n\n    if (is(newParent, 'bpmn:Participant') && 'processRef' in newParent) {\n      newParent = newParent.processRef;\n    }\n\n    // already in correct ioSpecification\n    if ('ioSpecification' in newParent && newParent.ioSpecification === businessObject.$parent) {\n      return;\n    }\n  }\n\n  if (is(businessObject, 'bpmn:Lane')) {\n\n    if (newParent) {\n      newParent = this.getLaneSet(newParent);\n    }\n\n    containment = 'lanes';\n  } else\n\n  if (is(businessObject, 'bpmn:FlowElement')) {\n\n    if (newParent) {\n\n      if (is(newParent, 'bpmn:Participant')) {\n        newParent = newParent.processRef;\n      } else\n\n      if (is(newParent, 'bpmn:Lane')) {\n        do {\n\n          // unwrap Lane -> LaneSet -> (Lane | FlowElementsContainer)\n          newParent = newParent.$parent.$parent;\n        } while (is(newParent, 'bpmn:Lane'));\n\n      }\n    }\n\n    containment = 'flowElements';\n\n  } else\n\n  if (is(businessObject, 'bpmn:Artifact')) {\n\n    while (newParent &&\n           !is(newParent, 'bpmn:Process') &&\n           !is(newParent, 'bpmn:SubProcess') &&\n           !is(newParent, 'bpmn:Collaboration')) {\n\n      if (is(newParent, 'bpmn:Participant')) {\n        newParent = newParent.processRef;\n        break;\n      } else {\n        newParent = newParent.$parent;\n      }\n    }\n\n    containment = 'artifacts';\n  } else\n\n  if (is(businessObject, 'bpmn:MessageFlow')) {\n    containment = 'messageFlows';\n\n  } else\n\n  if (is(businessObject, 'bpmn:Participant')) {\n    containment = 'participants';\n\n    // make sure the participants process is properly attached / detached\n    // from the XML document\n\n    var process = businessObject.processRef,\n        definitions;\n\n    if (process) {\n      definitions = getDefinitions(businessObject.$parent || newParent);\n\n      if (businessObject.$parent) {\n        collectionRemove(definitions.get('rootElements'), process);\n        process.$parent = null;\n      }\n\n      if (newParent) {\n        collectionAdd(definitions.get('rootElements'), process);\n        process.$parent = definitions;\n      }\n    }\n  } else\n\n  if (is(businessObject, 'bpmn:DataOutputAssociation')) {\n    containment = 'dataOutputAssociations';\n  } else\n\n  if (is(businessObject, 'bpmn:DataInputAssociation')) {\n    containment = 'dataInputAssociations';\n  }\n\n  if (!containment) {\n    throw new Error(`no parent for <${ businessObject.id }> in <${ newParent.id }>`);\n  }\n\n  var children;\n\n  if (businessObject.$parent) {\n\n    // remove from old parent\n    children = businessObject.$parent.get(containment);\n    collectionRemove(children, businessObject);\n  }\n\n  if (!newParent) {\n    businessObject.$parent = null;\n  } else {\n\n    // add to new parent\n    children = newParent.get(containment);\n    children.push(businessObject);\n    businessObject.$parent = newParent;\n  }\n\n  if (visualParent) {\n    var diChildren = visualParent.get(containment);\n\n    collectionRemove(children, businessObject);\n\n    if (newParent) {\n\n      if (!diChildren) {\n        diChildren = [];\n        newParent.set(containment, diChildren);\n      }\n\n      diChildren.push(businessObject);\n    }\n  }\n};\n\n/**\n * @param {Connection} connection\n */\nBpmnUpdater.prototype.updateConnectionWaypoints = function(connection) {\n  var di = getDi(connection);\n\n  di.set('waypoint', this._bpmnFactory.createDiWaypoints(connection.waypoints));\n};\n\n/**\n * @param { {\n *   connection: Connection;\n *   parent: Parent;\n *   newParent: Parent;\n * } } context\n */\nBpmnUpdater.prototype.updateConnection = function(context) {\n  var connection = context.connection,\n      businessObject = getBusinessObject(connection),\n      newSource = connection.source,\n      newSourceBo = getBusinessObject(newSource),\n      newTarget = connection.target,\n      newTargetBo = getBusinessObject(connection.target),\n      visualParent;\n\n  if (!is(businessObject, 'bpmn:DataAssociation')) {\n\n    var inverseSet = is(businessObject, 'bpmn:SequenceFlow');\n\n    if (businessObject.sourceRef !== newSourceBo) {\n      if (inverseSet) {\n        collectionRemove(businessObject.sourceRef && businessObject.sourceRef.get('outgoing'), businessObject);\n\n        if (newSourceBo && newSourceBo.get('outgoing')) {\n          newSourceBo.get('outgoing').push(businessObject);\n        }\n      }\n\n      businessObject.sourceRef = newSourceBo;\n    }\n\n    if (businessObject.targetRef !== newTargetBo) {\n      if (inverseSet) {\n        collectionRemove(businessObject.targetRef && businessObject.targetRef.get('incoming'), businessObject);\n\n        if (newTargetBo && newTargetBo.get('incoming')) {\n          newTargetBo.get('incoming').push(businessObject);\n        }\n      }\n\n      businessObject.targetRef = newTargetBo;\n    }\n  } else\n\n  if (is(businessObject, 'bpmn:DataInputAssociation')) {\n\n    // handle obnoxious isMsome sourceRef\n    businessObject.get('sourceRef')[0] = newSourceBo;\n\n    visualParent = context.parent || context.newParent || newTargetBo;\n\n    this.updateSemanticParent(businessObject, newTargetBo, visualParent);\n  } else\n\n  if (is(businessObject, 'bpmn:DataOutputAssociation')) {\n    visualParent = context.parent || context.newParent || newSourceBo;\n\n    this.updateSemanticParent(businessObject, newSourceBo, visualParent);\n\n    // targetRef = new target\n    businessObject.targetRef = newTargetBo;\n  }\n\n  this.updateConnectionWaypoints(connection);\n\n  this.updateDiConnection(connection, newSource, newTarget);\n};\n\n\n// helpers //////////////////////\n\nBpmnUpdater.prototype._getLabel = function(di) {\n  if (!di.label) {\n    di.label = this._bpmnFactory.createDiLabel();\n  }\n\n  return di.label;\n};\n\n\n/**\n * Call function if shape or connection is BPMN element.\n *\n * @param  {Function} fn\n *\n * @return {Function}\n */\nfunction ifBpmn(fn) {\n\n  return function(event) {\n\n    var context = event.context,\n        element = context.shape || context.connection || context.element;\n\n    if (is(element, 'bpmn:BaseElement')) {\n      fn(event);\n    }\n  };\n}\n\n/**\n * Return dc:Bounds of bpmndi:BPMNLabel if exists.\n *\n * @param {Shape} shape\n *\n * @return {ModdleElement|undefined}\n */\nfunction getEmbeddedLabelBounds(shape) {\n  if (!is(shape, 'bpmn:Activity')) {\n    return;\n  }\n\n  var di = getDi(shape);\n\n  if (!di) {\n    return;\n  }\n\n  var label = di.get('label');\n\n  if (!label) {\n    return;\n  }\n\n  return label.get('bounds');\n}","import {\n  assign,\n  forEach,\n  has,\n  isDefined,\n  isObject,\n  omit\n} from 'min-dash';\n\nimport inherits from 'inherits-browser';\n\nimport {\n  getBusinessObject,\n  getDi,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  isExpanded\n} from '../../util/DiUtil';\n\nimport BaseElementFactory from 'diagram-js/lib/core/ElementFactory';\n\nimport {\n  DEFAULT_LABEL_SIZE\n} from '../../util/LabelUtil';\n\nimport {\n  ensureCompatDiRef\n} from '../../util/CompatibilityUtil';\n\n/**\n * @typedef {import('diagram-js/lib/util/Types').Dimensions} Dimensions\n *\n * @typedef {import('./BpmnFactory').default} BpmnFactory\n *\n * @typedef {import('../../model/Types').BpmnAttributes} BpmnAttributes\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Label} Label\n * @typedef {import('../../model/Types').Root} Root\n * @typedef {import('../../model/Types').Shape} Shape\n * @typedef {import('../../model/Types').Moddle} Moddle\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * A BPMN-specific element factory.\n *\n * @template {Connection} [T=Connection]\n * @template {Label} [U=Label]\n * @template {Root} [V=Root]\n * @template {Shape} [W=Shape]\n *\n * @extends {BaseElementFactory<T, U, V, W>}\n *\n * @param {BpmnFactory} bpmnFactory\n * @param {Moddle} moddle\n */\nexport default function ElementFactory(bpmnFactory, moddle) {\n  BaseElementFactory.call(this);\n\n  this._bpmnFactory = bpmnFactory;\n  this._moddle = moddle;\n}\n\ninherits(ElementFactory, BaseElementFactory);\n\nElementFactory.$inject = [\n  'bpmnFactory',\n  'moddle'\n];\n\nElementFactory.prototype._baseCreate = BaseElementFactory.prototype.create;\n\n/**\n * Create a root element.\n *\n * @overlord\n * @param {'root'} elementType\n * @param {Partial<Root> & Partial<BpmnAttributes>} [attrs]\n * @return {V}\n */\n\n/**\n * Create a shape.\n *\n * @overlord\n * @param {'shape'} elementType\n * @param {Partial<Shape> & Partial<BpmnAttributes>} [attrs]\n * @return {W}\n */\n\n/**\n * Create a connection.\n *\n * @overlord\n * @param {'connection'} elementType\n * @param {Partial<Connection> & Partial<BpmnAttributes>} [attrs]\n * @return {T}\n */\n\n/**\n * Create a label.\n *\n * @param {'label'} elementType\n * @param {Partial<Label> & Partial<BpmnAttributes>} [attrs]\n * @return {U}\n */\nElementFactory.prototype.create = function(elementType, attrs) {\n\n  // no special magic for labels,\n  // we assume their businessObjects have already been created\n  // and wired via attrs\n  if (elementType === 'label') {\n    var di = attrs.di || this._bpmnFactory.createDiLabel();\n    return this._baseCreate(elementType, assign({ type: 'label', di: di }, DEFAULT_LABEL_SIZE, attrs));\n  }\n\n  return this.createElement(elementType, attrs);\n};\n\n/**\n * Create a BPMN root element.\n *\n * @overlord\n * @param {'root'} elementType\n * @param {Partial<Root> & Partial<BpmnAttributes>} [attrs]\n * @return {V}\n */\n\n/**\n * Create a BPMN shape.\n *\n * @overlord\n * @param {'shape'} elementType\n * @param {Partial<Shape> & Partial<BpmnAttributes>} [attrs]\n * @return {W}\n */\n\n/**\n * Create a BPMN connection.\n *\n * @param {'connection'} elementType\n * @param {Partial<Connection> & Partial<BpmnAttributes>} [attrs]\n * @return {T}\n */\nElementFactory.prototype.createElement = function(elementType, attrs) {\n\n  attrs = assign({}, attrs || {});\n\n  var size;\n\n  var businessObject = attrs.businessObject,\n      di = attrs.di;\n\n  if (!businessObject) {\n    if (!attrs.type) {\n      throw new Error('no shape type specified');\n    }\n\n    businessObject = this._bpmnFactory.create(attrs.type);\n\n    ensureCompatDiRef(businessObject);\n  }\n\n  if (!isModdleDi(di)) {\n    var diAttrs = assign(\n      {},\n      di || {},\n      { id: businessObject.id + '_di' }\n    );\n\n    if (elementType === 'root') {\n      di = this._bpmnFactory.createDiPlane(businessObject, diAttrs);\n    } else\n    if (elementType === 'connection') {\n      di = this._bpmnFactory.createDiEdge(businessObject, diAttrs);\n    } else {\n      di = this._bpmnFactory.createDiShape(businessObject, diAttrs);\n    }\n  }\n\n  if (is(businessObject, 'bpmn:Group')) {\n    attrs = assign({\n      isFrame: true\n    }, attrs);\n  }\n\n  attrs = applyAttributes(businessObject, attrs, [\n    'processRef',\n    'isInterrupting',\n    'associationDirection',\n    'isForCompensation'\n  ]);\n\n  if (attrs.isExpanded) {\n    attrs = applyAttribute(di, attrs, 'isExpanded');\n  }\n\n  if (isAny(businessObject, [ 'bpmn:Lane', 'bpmn:Participant' ])) {\n    attrs = applyAttribute(di, attrs, 'isHorizontal');\n  }\n\n  if (is(businessObject, 'bpmn:SubProcess')) {\n    attrs.collapsed = !isExpanded(businessObject, di);\n  }\n\n  if (is(businessObject, 'bpmn:ExclusiveGateway')) {\n    if (has(di, 'isMarkerVisible')) {\n      if (di.isMarkerVisible === undefined) {\n        di.isMarkerVisible = false;\n      }\n    } else {\n      di.isMarkerVisible = true;\n    }\n  }\n\n  if (isDefined(attrs.triggeredByEvent)) {\n    businessObject.triggeredByEvent = attrs.triggeredByEvent;\n    delete attrs.triggeredByEvent;\n  }\n\n  if (isDefined(attrs.cancelActivity)) {\n    businessObject.cancelActivity = attrs.cancelActivity;\n    delete attrs.cancelActivity;\n  }\n\n  var eventDefinitions,\n      newEventDefinition;\n\n  if (attrs.eventDefinitionType) {\n    eventDefinitions = businessObject.get('eventDefinitions') || [];\n    newEventDefinition = this._bpmnFactory.create(attrs.eventDefinitionType, attrs.eventDefinitionAttrs);\n\n    if (attrs.eventDefinitionType === 'bpmn:ConditionalEventDefinition') {\n      newEventDefinition.condition = this._bpmnFactory.create('bpmn:FormalExpression');\n    }\n\n    eventDefinitions.push(newEventDefinition);\n\n    newEventDefinition.$parent = businessObject;\n    businessObject.eventDefinitions = eventDefinitions;\n\n    delete attrs.eventDefinitionType;\n  }\n\n  size = this.getDefaultSize(businessObject, di);\n\n  attrs = assign({\n    id: businessObject.id\n  }, size, attrs, {\n    businessObject: businessObject,\n    di: di\n  });\n\n  return this._baseCreate(elementType, attrs);\n};\n\n/**\n * Get the default size of a diagram element.\n *\n * @param {Element} element The element.\n * @param {ModdleElement} di The DI.\n *\n * @return {Dimensions} Default width and height of the element.\n */\nElementFactory.prototype.getDefaultSize = function(element, di) {\n\n  var bo = getBusinessObject(element);\n  di = di || getDi(element);\n\n  if (is(bo, 'bpmn:SubProcess')) {\n    if (isExpanded(bo, di)) {\n      return { width: 350, height: 200 };\n    } else {\n      return { width: 100, height: 80 };\n    }\n  }\n\n  if (is(bo, 'bpmn:Task')) {\n    return { width: 100, height: 80 };\n  }\n\n  if (is(bo, 'bpmn:Gateway')) {\n    return { width: 50, height: 50 };\n  }\n\n  if (is(bo, 'bpmn:Event')) {\n    return { width: 36, height: 36 };\n  }\n\n  if (is(bo, 'bpmn:Participant')) {\n    var isHorizontalPool = di.isHorizontal === undefined || di.isHorizontal === true;\n    if (isExpanded(bo, di)) {\n      if (isHorizontalPool) {\n        return { width: 600, height: 250 };\n      }\n      return { width: 250, height: 600 };\n    } else {\n      if (isHorizontalPool) {\n        return { width: 400, height: 60 };\n      }\n      return { width: 60, height: 400 };\n    }\n  }\n\n  if (is(bo, 'bpmn:Lane')) {\n    return { width: 400, height: 100 };\n  }\n\n  if (is(bo, 'bpmn:DataObjectReference')) {\n    return { width: 36, height: 50 };\n  }\n\n  if (is(bo, 'bpmn:DataStoreReference')) {\n    return { width: 50, height: 50 };\n  }\n\n  if (is(bo, 'bpmn:TextAnnotation')) {\n    return { width: 100, height: 30 };\n  }\n\n  if (is(bo, 'bpmn:Group')) {\n    return { width: 300, height: 300 };\n  }\n\n  return { width: 100, height: 80 };\n};\n\n\n/**\n * Create participant.\n *\n * @param {boolean|Partial<Shape> & Partial<BpmnAttributes>} [attrs]\n * Attributes or whether the participant is expanded.\n *\n * @return {W} The created participant.\n */\nElementFactory.prototype.createParticipantShape = function(attrs) {\n\n  if (!isObject(attrs)) {\n    attrs = { isExpanded: attrs };\n  }\n\n  attrs = assign({ type: 'bpmn:Participant' }, attrs || {});\n\n  // participants are expanded by default\n  if (attrs.isExpanded !== false) {\n    attrs.processRef = this._bpmnFactory.create('bpmn:Process');\n  }\n\n  return this.createShape(attrs);\n};\n\n\n// helpers //////////////////////\n\n/**\n * Apply attributes from a map to the given element, remove attribute from the\n * map on application.\n *\n * @param {Element} element\n * @param {Object} attrs (in/out map of attributes)\n * @param {string[]} attributeNames name of attributes to apply\n *\n * @return {Object} changed attrs\n */\nfunction applyAttributes(element, attrs, attributeNames) {\n\n  forEach(attributeNames, function(property) {\n    attrs = applyAttribute(element, attrs, property);\n  });\n\n  return attrs;\n}\n\n/**\n * Apply named property to element and drain it from the attrs collection.\n *\n * @param {Element} element\n * @param {Object} attrs (in/out map of attributes)\n * @param {string} attributeName to apply\n *\n * @return {Object} changed attrs\n */\nfunction applyAttribute(element, attrs, attributeName) {\n  if (attrs[attributeName] === undefined) {\n    return attrs;\n  }\n\n  element[attributeName] = attrs[attributeName];\n\n  return omit(attrs, [ attributeName ]);\n}\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nfunction isModdleDi(element) {\n  return isAny(element, [\n    'bpmndi:BPMNShape',\n    'bpmndi:BPMNEdge',\n    'bpmndi:BPMNDiagram',\n    'bpmndi:BPMNPlane',\n  ]);\n}\n","import { forEach, isDefined } from 'min-dash';\n\n/**\n * @typedef {import('../../../core/Canvas').default} Canvas\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that align elements in a certain way.\n *\n * @param {Modeling} modeling\n * @param {Canvas} canvas\n */\nexport default function AlignElements(modeling, canvas) {\n  this._modeling = modeling;\n  this._canvas = canvas;\n}\n\nAlignElements.$inject = [ 'modeling', 'canvas' ];\n\n\nAlignElements.prototype.preExecute = function(context) {\n  var modeling = this._modeling;\n\n  var elements = context.elements,\n      alignment = context.alignment;\n\n\n  forEach(elements, function(element) {\n    var delta = {\n      x: 0,\n      y: 0\n    };\n\n    if (isDefined(alignment.left)) {\n      delta.x = alignment.left - element.x;\n\n    } else if (isDefined(alignment.right)) {\n      delta.x = (alignment.right - element.width) - element.x;\n\n    } else if (isDefined(alignment.center)) {\n      delta.x = (alignment.center - Math.round(element.width / 2)) - element.x;\n\n    } else if (isDefined(alignment.top)) {\n      delta.y = alignment.top - element.y;\n\n    } else if (isDefined(alignment.bottom)) {\n      delta.y = (alignment.bottom - element.height) - element.y;\n\n    } else if (isDefined(alignment.middle)) {\n      delta.y = (alignment.middle - Math.round(element.height / 2)) - element.y;\n    }\n\n    modeling.moveElements([ element ], delta, element.parent);\n  });\n};\n\nAlignElements.prototype.postExecute = function(context) {\n\n};\n","import { some } from 'min-dash';\n\n/**\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Parent} Parent\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('../../../util/Types').Point} Point\n *\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that implements reversible appending of shapes\n * to a source shape.\n *\n * @param {Modeling} modeling\n */\nexport default function AppendShapeHandler(modeling) {\n  this._modeling = modeling;\n}\n\nAppendShapeHandler.$inject = [ 'modeling' ];\n\n\n// api //////////////////////\n\n\n/**\n * Creates a new shape.\n *\n * @param {Object} context\n * @param {Partial<Shape>} context.shape The new shape.\n * @param {Element} context.source The element to which to append the new shape to.\n * @param {Parent} context.parent The parent.\n * @param {Point} context.position The position at which to create the new shape.\n */\nAppendShapeHandler.prototype.preExecute = function(context) {\n\n  var source = context.source;\n\n  if (!source) {\n    throw new Error('source required');\n  }\n\n  var target = context.target || source.parent,\n      shape = context.shape,\n      hints = context.hints || {};\n\n  shape = context.shape =\n    this._modeling.createShape(\n      shape,\n      context.position,\n      target, { attach: hints.attach });\n\n  context.shape = shape;\n};\n\nAppendShapeHandler.prototype.postExecute = function(context) {\n  var hints = context.hints || {};\n\n  if (!existsConnection(context.source, context.shape)) {\n\n    // create connection\n    if (hints.connectionTarget === context.source) {\n      this._modeling.connect(context.shape, context.source, context.connection);\n    } else {\n      this._modeling.connect(context.source, context.shape, context.connection);\n    }\n  }\n};\n\n\nfunction existsConnection(source, target) {\n  return some(source.outgoing, function(c) {\n    return c.target === target;\n  });\n}","/**\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('../../../util/Types').Point} Point\n *\n * @typedef {import('../Modeling').ModelingHints} ModelingHints\n *\n * @typedef {import('../../../core/Canvas').default} Canvas\n * @typedef {import('../../../layout/BaseLayouter').default} Layouter\n */\n\n/**\n * @param {Canvas} canvas\n * @param {Layouter} layouter\n */\nexport default function CreateConnectionHandler(canvas, layouter) {\n  this._canvas = canvas;\n  this._layouter = layouter;\n}\n\nCreateConnectionHandler.$inject = [ 'canvas', 'layouter' ];\n\n\n// api //////////////////////\n\n\n/**\n * Creates a new connection between two elements.\n *\n * @param {Object} context\n * @param {Element} context.source The source.\n * @param {Element} context.target The target.\n * @param {Shape} context.parent The parent.\n * @param {number} [context.parentIndex] The optional index at which to add the\n * connection to the parent's children.\n * @param {ModelingHints} [context.hints] The optional hints.\n */\nCreateConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      source = context.source,\n      target = context.target,\n      parent = context.parent,\n      parentIndex = context.parentIndex,\n      hints = context.hints;\n\n  if (!source || !target) {\n    throw new Error('source and target required');\n  }\n\n  if (!parent) {\n    throw new Error('parent required');\n  }\n\n  connection.source = source;\n  connection.target = target;\n\n  if (!connection.waypoints) {\n    connection.waypoints = this._layouter.layoutConnection(connection, hints);\n  }\n\n  // add connection\n  this._canvas.addConnection(connection, parent, parentIndex);\n\n  return connection;\n};\n\nCreateConnectionHandler.prototype.revert = function(context) {\n  var connection = context.connection;\n\n  this._canvas.removeConnection(connection);\n\n  connection.source = null;\n  connection.target = null;\n\n  return connection;\n};","import {\r\n  assign,\r\n  filter,\r\n  forEach,\r\n  isNumber,\r\n  map,\r\n  omit,\r\n  pick,\r\n  values\r\n} from 'min-dash';\r\n\r\nimport {\r\n  getBBox,\r\n  getParents\r\n} from '../../../util/Elements';\r\n\r\nimport {\r\n  isConnection,\r\n  isLabel\r\n} from '../../../util/ModelUtil';\r\n\r\n/**\r\n * @typedef {import('../Modeling').default} Modeling\r\n */\r\n\r\nvar round = Math.round;\r\n\r\n/**\r\n * @param {Modeling} modeling\r\n */\r\nexport default function CreateElementsHandler(modeling) {\r\n  this._modeling = modeling;\r\n}\r\n\r\nCreateElementsHandler.$inject = [\r\n  'modeling'\r\n];\r\n\r\nCreateElementsHandler.prototype.preExecute = function(context) {\r\n  var elements = context.elements,\r\n      parent = context.parent,\r\n      parentIndex = context.parentIndex,\r\n      position = context.position,\r\n      hints = context.hints;\r\n\r\n  var modeling = this._modeling;\r\n\r\n  // make sure each element has x and y\r\n  forEach(elements, function(element) {\r\n    if (!isNumber(element.x)) {\r\n      element.x = 0;\r\n    }\r\n\r\n    if (!isNumber(element.y)) {\r\n      element.y = 0;\r\n    }\r\n  });\r\n\r\n  var visibleElements = filter(elements, function(element) {\r\n    return !element.hidden;\r\n  });\r\n\r\n  var bbox = getBBox(visibleElements);\r\n\r\n  // center elements around position\r\n  forEach(elements, function(element) {\r\n    if (isConnection(element)) {\r\n      element.waypoints = map(element.waypoints, function(waypoint) {\r\n        return {\r\n          x: round(waypoint.x - bbox.x - bbox.width / 2 + position.x),\r\n          y: round(waypoint.y - bbox.y - bbox.height / 2 + position.y)\r\n        };\r\n      });\r\n    }\r\n\r\n    assign(element, {\r\n      x: round(element.x - bbox.x - bbox.width / 2 + position.x),\r\n      y: round(element.y - bbox.y - bbox.height / 2 + position.y)\r\n    });\r\n  });\r\n\r\n  var parents = getParents(elements);\r\n\r\n  var cache = {};\r\n\r\n  forEach(elements, function(element) {\r\n    if (isConnection(element)) {\r\n      cache[ element.id ] = isNumber(parentIndex) ?\r\n        modeling.createConnection(\r\n          cache[ element.source.id ],\r\n          cache[ element.target.id ],\r\n          parentIndex,\r\n          element,\r\n          element.parent || parent,\r\n          hints\r\n        ) :\r\n        modeling.createConnection(\r\n          cache[ element.source.id ],\r\n          cache[ element.target.id ],\r\n          element,\r\n          element.parent || parent,\r\n          hints\r\n        );\r\n\r\n      return;\r\n    }\r\n\r\n    var createShapeHints = assign({}, hints);\r\n\r\n    if (parents.indexOf(element) === -1) {\r\n      createShapeHints.autoResize = false;\r\n    }\r\n\r\n    if (isLabel(element)) {\r\n      createShapeHints = omit(createShapeHints, [ 'attach' ]);\r\n    }\r\n\r\n    cache[ element.id ] = isNumber(parentIndex) ?\r\n      modeling.createShape(\r\n        element,\r\n        pick(element, [ 'x', 'y', 'width', 'height' ]),\r\n        element.parent || parent,\r\n        parentIndex,\r\n        createShapeHints\r\n      ) :\r\n      modeling.createShape(\r\n        element,\r\n        pick(element, [ 'x', 'y', 'width', 'height' ]),\r\n        element.parent || parent,\r\n        createShapeHints\r\n      );\r\n  });\r\n\r\n  context.elements = values(cache);\r\n};","import { assign } from 'min-dash';\n\n/**\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../util/Types').Point} Point\n *\n * @typedef {import('../../../core/Canvas').default} Canvas\n */\n\nvar round = Math.round;\n\n\n/**\n * A handler that implements reversible addition of shapes.\n *\n * @param {Canvas} canvas\n */\nexport default function CreateShapeHandler(canvas) {\n  this._canvas = canvas;\n}\n\nCreateShapeHandler.$inject = [ 'canvas' ];\n\n\n// api //////////////////////\n\n\n/**\n * Appends a shape to a target shape\n *\n * @param {Object} context\n * @param {Element} context.parent The parent.\n * @param {Point} context.position The position at which to create the new shape.\n * @param {number} [context.parentIndex] The optional index at which to add the\n * shape to the parent's children.\n */\nCreateShapeHandler.prototype.execute = function(context) {\n\n  var shape = context.shape,\n      positionOrBounds = context.position,\n      parent = context.parent,\n      parentIndex = context.parentIndex;\n\n  if (!parent) {\n    throw new Error('parent required');\n  }\n\n  if (!positionOrBounds) {\n    throw new Error('position required');\n  }\n\n  // (1) add at event center position _or_ at given bounds\n  if (positionOrBounds.width !== undefined) {\n    assign(shape, positionOrBounds);\n  } else {\n    assign(shape, {\n      x: positionOrBounds.x - round(shape.width / 2),\n      y: positionOrBounds.y - round(shape.height / 2)\n    });\n  }\n\n  // (2) add to canvas\n  this._canvas.addShape(shape, parent, parentIndex);\n\n  return shape;\n};\n\n\n/**\n * Undo append by removing the shape\n */\nCreateShapeHandler.prototype.revert = function(context) {\n\n  var shape = context.shape;\n\n  // (3) remove form canvas\n  this._canvas.removeShape(shape);\n\n  return shape;\n};","import inherits from 'inherits-browser';\n\nimport CreateShapeHandler from './CreateShapeHandler';\n\n/**\n * @typedef {import('../../../core/Canvas').default} Canvas\n *\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Parent} Parent\n * @typedef {import('../../../model/Types').Shape} Shape\n * @typedef {import('../../../util/Types').Point} Point\n */\n\n/**\n * A handler that attaches a label to a given target shape.\n *\n * @param {Canvas} canvas\n */\nexport default function CreateLabelHandler(canvas) {\n  CreateShapeHandler.call(this, canvas);\n}\n\ninherits(CreateLabelHandler, CreateShapeHandler);\n\nCreateLabelHandler.$inject = [ 'canvas' ];\n\n\n// api //////////////////////\n\n\nvar originalExecute = CreateShapeHandler.prototype.execute;\n\n/**\n * Append label to element.\n *\n * @param { {\n *   parent: Parent;\n *   position: Point;\n *   shape: Shape;\n *   target: Element;\n * } } context\n */\nCreateLabelHandler.prototype.execute = function(context) {\n\n  var label = context.shape;\n\n  ensureValidDimensions(label);\n\n  label.labelTarget = context.labelTarget;\n\n  return originalExecute.call(this, context);\n};\n\nvar originalRevert = CreateShapeHandler.prototype.revert;\n\n/**\n * Revert appending by removing label.\n */\nCreateLabelHandler.prototype.revert = function(context) {\n  context.shape.labelTarget = null;\n\n  return originalRevert.call(this, context);\n};\n\n\n// helpers //////////////////////\n\nfunction ensureValidDimensions(label) {\n\n  // make sure a label has valid { width, height } dimensions\n  [ 'width', 'height' ].forEach(function(prop) {\n    if (typeof label[prop] === 'undefined') {\n      label[prop] = 0;\n    }\n  });\n}","import {\n  add as collectionAdd,\n  indexOf as collectionIdx\n} from '../../../util/Collections';\n\nimport { saveClear } from '../../../util/Removal';\n\n/**\n * @typedef {import('../../../core/Canvas').default} Canvas\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that implements reversible deletion of Connections.\n */\nexport default function DeleteConnectionHandler(canvas, modeling) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n}\n\nDeleteConnectionHandler.$inject = [\n  'canvas',\n  'modeling'\n];\n\n\n/**\n * - Remove connections\n */\nDeleteConnectionHandler.prototype.preExecute = function(context) {\n\n  var modeling = this._modeling;\n\n  var connection = context.connection;\n\n  // remove connections\n  saveClear(connection.incoming, function(connection) {\n\n    // To make sure that the connection isn't removed twice\n    // For example if a container is removed\n    modeling.removeConnection(connection, { nested: true });\n  });\n\n  saveClear(connection.outgoing, function(connection) {\n    modeling.removeConnection(connection, { nested: true });\n  });\n\n};\n\n\nDeleteConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      parent = connection.parent;\n\n  context.parent = parent;\n\n  // remember containment\n  context.parentIndex = collectionIdx(parent.children, connection);\n\n  context.source = connection.source;\n  context.target = connection.target;\n\n  this._canvas.removeConnection(connection);\n\n  connection.source = null;\n  connection.target = null;\n\n  return connection;\n};\n\n/**\n * Command revert implementation.\n */\nDeleteConnectionHandler.prototype.revert = function(context) {\n\n  var connection = context.connection,\n      parent = context.parent,\n      parentIndex = context.parentIndex;\n\n  connection.source = context.source;\n  connection.target = context.target;\n\n  // restore containment\n  collectionAdd(parent.children, connection, parentIndex);\n\n  this._canvas.addConnection(connection, parent);\n\n  return connection;\n};\n","import { forEach } from 'min-dash';\n\n/**\n * @typedef {import('../../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * @param {Modeling} modeling\n * @param {ElementRegistry} elementRegistry\n */\nexport default function DeleteElementsHandler(modeling, elementRegistry) {\n  this._modeling = modeling;\n  this._elementRegistry = elementRegistry;\n}\n\nDeleteElementsHandler.$inject = [\n  'modeling',\n  'elementRegistry'\n];\n\n\nDeleteElementsHandler.prototype.postExecute = function(context) {\n\n  var modeling = this._modeling,\n      elementRegistry = this._elementRegistry,\n      elements = context.elements;\n\n  forEach(elements, function(element) {\n\n    // element may have been removed with previous\n    // remove operations already (e.g. in case of nesting)\n    if (!elementRegistry.get(element.id)) {\n      return;\n    }\n\n    if (element.waypoints) {\n      modeling.removeConnection(element);\n    } else {\n      modeling.removeShape(element);\n    }\n  });\n};","import {\n  add as collectionAdd,\n  indexOf as collectionIdx\n} from '../../../util/Collections';\n\nimport { saveClear } from '../../../util/Removal';\n\nimport { isConnection } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('../../../core/Canvas').default} Canvas\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that implements reversible deletion of shapes.\n *\n * @param {Canvas} canvas\n * @param {Modeling} modeling\n */\nexport default function DeleteShapeHandler(canvas, modeling) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n}\n\nDeleteShapeHandler.$inject = [ 'canvas', 'modeling' ];\n\n\n/**\n * - Remove connections\n * - Remove all direct children\n */\nDeleteShapeHandler.prototype.preExecute = function(context) {\n\n  var modeling = this._modeling;\n\n  var shape = context.shape;\n\n  // remove connections\n  saveClear(shape.incoming, function(connection) {\n\n    // To make sure that the connection isn't removed twice\n    // For example if a container is removed\n    modeling.removeConnection(connection, { nested: true });\n  });\n\n  saveClear(shape.outgoing, function(connection) {\n    modeling.removeConnection(connection, { nested: true });\n  });\n\n  // remove child shapes and connections\n  saveClear(shape.children, function(child) {\n    if (isConnection(child)) {\n      modeling.removeConnection(child, { nested: true });\n    } else {\n      modeling.removeShape(child, { nested: true });\n    }\n  });\n};\n\n/**\n * Remove shape and remember the parent\n */\nDeleteShapeHandler.prototype.execute = function(context) {\n  var canvas = this._canvas;\n\n  var shape = context.shape,\n      oldParent = shape.parent;\n\n  context.oldParent = oldParent;\n\n  // remove containment\n  context.oldParentIndex = collectionIdx(oldParent.children, shape);\n\n  // remove shape\n  canvas.removeShape(shape);\n\n  return shape;\n};\n\n\n/**\n * Command revert implementation\n */\nDeleteShapeHandler.prototype.revert = function(context) {\n\n  var canvas = this._canvas;\n\n  var shape = context.shape,\n      oldParent = context.oldParent,\n      oldParentIndex = context.oldParentIndex;\n\n  // restore containment\n  collectionAdd(oldParent.children, shape, oldParentIndex);\n\n  canvas.addShape(shape, oldParent);\n\n  return shape;\n};\n","import {\n  forEach,\n  sortBy\n} from 'min-dash';\n\n/**\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that distributes elements evenly.\n *\n * @param {Modeling} modeling\n */\nexport default function DistributeElements(modeling) {\n  this._modeling = modeling;\n}\n\nDistributeElements.$inject = [ 'modeling' ];\n\nvar OFF_AXIS = {\n  x: 'y',\n  y: 'x'\n};\n\nDistributeElements.prototype.preExecute = function(context) {\n  var modeling = this._modeling;\n\n  var groups = context.groups,\n      axis = context.axis,\n      dimension = context.dimension;\n\n  function updateRange(group, element) {\n    group.range.min = Math.min(element[axis], group.range.min);\n    group.range.max = Math.max(element[axis] + element[dimension], group.range.max);\n  }\n\n  function center(element) {\n    return element[axis] + element[dimension] / 2;\n  }\n\n  function lastIdx(arr) {\n    return arr.length - 1;\n  }\n\n  function rangeDiff(range) {\n    return range.max - range.min;\n  }\n\n  function centerElement(refCenter, element) {\n    var delta = { y: 0 };\n\n    delta[axis] = refCenter - center(element);\n\n    if (delta[axis]) {\n\n      delta[OFF_AXIS[axis]] = 0;\n\n      modeling.moveElements([ element ], delta, element.parent);\n    }\n  }\n\n  var firstGroup = groups[0],\n      lastGroupIdx = lastIdx(groups),\n      lastGroup = groups[ lastGroupIdx ];\n\n  var margin,\n      spaceInBetween,\n      groupsSize = 0; // the size of each range\n\n  forEach(groups, function(group, idx) {\n    var sortedElements,\n        refElem,\n        refCenter;\n\n    if (group.elements.length < 2) {\n      if (idx && idx !== groups.length - 1) {\n        updateRange(group, group.elements[0]);\n\n        groupsSize += rangeDiff(group.range);\n      }\n      return;\n    }\n\n    sortedElements = sortBy(group.elements, axis);\n\n    refElem = sortedElements[0];\n\n    if (idx === lastGroupIdx) {\n      refElem = sortedElements[lastIdx(sortedElements)];\n    }\n\n    refCenter = center(refElem);\n\n    // wanna update the ranges after the shapes have been centered\n    group.range = null;\n\n    forEach(sortedElements, function(element) {\n\n      centerElement(refCenter, element);\n\n      if (group.range === null) {\n        group.range = {\n          min: element[axis],\n          max: element[axis] + element[dimension]\n        };\n\n        return;\n      }\n\n      // update group's range after centering the range elements\n      updateRange(group, element);\n    });\n\n    if (idx && idx !== groups.length - 1) {\n      groupsSize += rangeDiff(group.range);\n    }\n  });\n\n  spaceInBetween = Math.abs(lastGroup.range.min - firstGroup.range.max);\n\n  margin = Math.round((spaceInBetween - groupsSize) / (groups.length - 1));\n\n  if (margin < groups.length - 1) {\n    return;\n  }\n\n  forEach(groups, function(group, groupIdx) {\n    var delta = {},\n        prevGroup;\n\n    if (group === firstGroup || group === lastGroup) {\n      return;\n    }\n\n    prevGroup = groups[groupIdx - 1];\n\n    group.range.max = 0;\n\n    forEach(group.elements, function(element, idx) {\n      delta[OFF_AXIS[axis]] = 0;\n      delta[axis] = (prevGroup.range.max - element[axis]) + margin;\n\n      if (group.range.min !== element[axis]) {\n        delta[axis] += element[axis] - group.range.min;\n      }\n\n      if (delta[axis]) {\n        modeling.moveElements([ element ], delta, element.parent);\n      }\n\n      group.range.max = Math.max(element[axis] + element[dimension], idx ? group.range.max : 0);\n    });\n  });\n};\n\nDistributeElements.prototype.postExecute = function(context) {\n\n};\n","import { assign } from 'min-dash';\n\n/**\n * @typedef {import('../../../core/Canvas').default} Canvas\n * @typedef {import('../../../layout/BaseLayouter').default} Layouter\n */\n\n/**\n * A handler that implements reversible moving of shapes.\n *\n * @param {Layouter} layouter\n * @param {Canvas} canvas\n */\nexport default function LayoutConnectionHandler(layouter, canvas) {\n  this._layouter = layouter;\n  this._canvas = canvas;\n}\n\nLayoutConnectionHandler.$inject = [ 'layouter', 'canvas' ];\n\nLayoutConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection;\n\n  var oldWaypoints = connection.waypoints;\n\n  assign(context, {\n    oldWaypoints: oldWaypoints\n  });\n\n  connection.waypoints = this._layouter.layoutConnection(connection, context.hints);\n\n  return connection;\n};\n\nLayoutConnectionHandler.prototype.revert = function(context) {\n\n  var connection = context.connection;\n\n  connection.waypoints = context.oldWaypoints;\n\n  return connection;\n};\n","import { forEach } from 'min-dash';\n\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from '../../../util/Collections';\n\n\n/**\n * A handler that implements reversible moving of connections.\n *\n * The handler differs from the layout connection handler in a sense\n * that it preserves the connection layout.\n */\nexport default function MoveConnectionHandler() { }\n\n\nMoveConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      delta = context.delta;\n\n  var newParent = context.newParent || connection.parent,\n      newParentIndex = context.newParentIndex,\n      oldParent = connection.parent;\n\n  // save old parent in context\n  context.oldParent = oldParent;\n  context.oldParentIndex = collectionRemove(oldParent.children, connection);\n\n  // add to new parent at position\n  collectionAdd(newParent.children, connection, newParentIndex);\n\n  // update parent\n  connection.parent = newParent;\n\n  // update waypoint positions\n  forEach(connection.waypoints, function(p) {\n    p.x += delta.x;\n    p.y += delta.y;\n\n    if (p.original) {\n      p.original.x += delta.x;\n      p.original.y += delta.y;\n    }\n  });\n\n  return connection;\n};\n\nMoveConnectionHandler.prototype.revert = function(context) {\n\n  var connection = context.connection,\n      newParent = connection.parent,\n      oldParent = context.oldParent,\n      oldParentIndex = context.oldParentIndex,\n      delta = context.delta;\n\n  // remove from newParent\n  collectionRemove(newParent.children, connection);\n\n  // restore previous location in old parent\n  collectionAdd(oldParent.children, connection, oldParentIndex);\n\n  // restore parent\n  connection.parent = oldParent;\n\n  // revert to old waypoint positions\n  forEach(connection.waypoints, function(p) {\n    p.x -= delta.x;\n    p.y -= delta.y;\n\n    if (p.original) {\n      p.original.x -= delta.x;\n      p.original.y -= delta.y;\n    }\n  });\n\n  return connection;\n};","import {\n  assign\n} from 'min-dash';\n\nimport {\n  getClosure\n} from '../../../../util/Elements';\n\n/**\n * @typedef {import('../../../../model/Types').Connection} Connection\n * @typedef {import('../../../../model/Types').Element} Element\n * @typedef {import('../../../../model/Types').Shape} Shape\n */\n\nexport default function MoveClosure() {\n\n  /**\n   * @type {Record<string, Shape>}\n   */\n  this.allShapes = {};\n\n  /**\n   * @type {Record<string, Connection>}\n   */\n  this.allConnections = {};\n\n  /**\n   * @type {Record<string, Element>}\n   */\n  this.enclosedElements = {};\n\n  /**\n   * @type {Record<string, Connection>}\n   */\n  this.enclosedConnections = {};\n\n  /**\n   * @type {Record<string, Element>}\n   */\n  this.topLevel = {};\n}\n\n/**\n * @param {Element} element\n * @param {boolean} [isTopLevel]\n *\n * @return {MoveClosure}\n */\nMoveClosure.prototype.add = function(element, isTopLevel) {\n  return this.addAll([ element ], isTopLevel);\n};\n\n/**\n * @param {Element[]} elements\n * @param {boolean} [isTopLevel]\n *\n * @return {MoveClosure}\n */\nMoveClosure.prototype.addAll = function(elements, isTopLevel) {\n\n  var newClosure = getClosure(elements, !!isTopLevel, this);\n\n  assign(this, newClosure);\n\n  return this;\n};","import {\n  forEach\n} from 'min-dash';\n\nimport {\n  getMovedSourceAnchor,\n  getMovedTargetAnchor\n} from './AnchorsHelper';\n\nimport MoveClosure from './MoveClosure';\n\n/**\n * @typedef {import('../../../../core/Types').ElementLike} Element\n * @typedef {import('../../../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../../../util/Types').Point} Point\n *\n * @typedef {import('../../Modeling').default} Modeling\n */\n\n/**\n * A helper that is able to carry out serialized move\n * operations on multiple elements.\n *\n * @param {Modeling} modeling\n */\nexport default function MoveHelper(modeling) {\n  this._modeling = modeling;\n}\n\n/**\n * Move the specified elements and all children by the given delta.\n *\n * This moves all enclosed connections, too and layouts all affected\n * external connections.\n *\n * @template {Element} T\n *\n * @param {T[]} elements\n * @param {Point} delta\n * @param {Shape} newParent The new parent of all elements that are not nested.\n *\n * @return {T[]}\n */\nMoveHelper.prototype.moveRecursive = function(elements, delta, newParent) {\n  if (!elements) {\n    return [];\n  } else {\n    return this.moveClosure(this.getClosure(elements), delta, newParent);\n  }\n};\n\n/**\n * Move the given closure of elmements.\n *\n * @param {Object} closure\n * @param {Point} delta\n * @param {Shape} [newParent]\n * @param {Shape} [newHost]\n */\nMoveHelper.prototype.moveClosure = function(closure, delta, newParent, newHost, primaryShape) {\n  var modeling = this._modeling;\n\n  var allShapes = closure.allShapes,\n      allConnections = closure.allConnections,\n      enclosedConnections = closure.enclosedConnections,\n      topLevel = closure.topLevel,\n      keepParent = false;\n\n  if (primaryShape && primaryShape.parent === newParent) {\n    keepParent = true;\n  }\n\n  // move all shapes\n  forEach(allShapes, function(shape) {\n\n    // move the element according to the given delta\n    modeling.moveShape(shape, delta, topLevel[shape.id] && !keepParent && newParent, {\n      recurse: false,\n      layout: false\n    });\n  });\n\n  // move all child connections / layout external connections\n  forEach(allConnections, function(c) {\n\n    var sourceMoved = !!allShapes[c.source.id],\n        targetMoved = !!allShapes[c.target.id];\n\n    if (enclosedConnections[c.id] && sourceMoved && targetMoved) {\n      modeling.moveConnection(c, delta, topLevel[c.id] && !keepParent && newParent);\n    } else {\n      modeling.layoutConnection(c, {\n        connectionStart: sourceMoved && getMovedSourceAnchor(c, c.source, delta),\n        connectionEnd: targetMoved && getMovedTargetAnchor(c, c.target, delta)\n      });\n    }\n  });\n};\n\n/**\n * Returns the closure for the selected elements\n *\n * @param {Element[]} elements\n *\n * @return {MoveClosure}\n */\nMoveHelper.prototype.getClosure = function(elements) {\n  return new MoveClosure().addAll(elements, true);\n};","import MoveHelper from './helper/MoveHelper';\n\n/**\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that implements reversible moving of shapes.\n *\n * @param {Modeling} modeling\n */\nexport default function MoveElementsHandler(modeling) {\n  this._helper = new MoveHelper(modeling);\n}\n\nMoveElementsHandler.$inject = [ 'modeling' ];\n\nMoveElementsHandler.prototype.preExecute = function(context) {\n  context.closure = this._helper.getClosure(context.shapes);\n};\n\nMoveElementsHandler.prototype.postExecute = function(context) {\n\n  var hints = context.hints,\n      primaryShape;\n\n  if (hints && hints.primaryShape) {\n    primaryShape = hints.primaryShape;\n    hints.oldParent = primaryShape.parent;\n  }\n\n  this._helper.moveClosure(\n    context.closure,\n    context.delta,\n    context.newParent,\n    context.newHost,\n    primaryShape\n  );\n};","import {\n  assign,\n  forEach,\n  pick\n} from 'min-dash';\n\nimport MoveHelper from './helper/MoveHelper';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from '../../../util/Collections';\n\nimport {\n  getMovedSourceAnchor,\n  getMovedTargetAnchor\n} from './helper/AnchorsHelper';\n\n/**\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that implements reversible moving of shapes.\n *\n * @param {Modeling} modeling\n */\nexport default function MoveShapeHandler(modeling) {\n  this._modeling = modeling;\n\n  this._helper = new MoveHelper(modeling);\n}\n\nMoveShapeHandler.$inject = [ 'modeling' ];\n\n\nMoveShapeHandler.prototype.execute = function(context) {\n\n  var shape = context.shape,\n      delta = context.delta,\n      newParent = context.newParent || shape.parent,\n      newParentIndex = context.newParentIndex,\n      oldParent = shape.parent;\n\n  context.oldBounds = pick(shape, [ 'x', 'y', 'width', 'height' ]);\n\n  // save old parent in context\n  context.oldParent = oldParent;\n  context.oldParentIndex = collectionRemove(oldParent.children, shape);\n\n  // add to new parent at position\n  collectionAdd(newParent.children, shape, newParentIndex);\n\n  // update shape parent + position\n  assign(shape, {\n    parent: newParent,\n    x: shape.x + delta.x,\n    y: shape.y + delta.y\n  });\n\n  return shape;\n};\n\nMoveShapeHandler.prototype.postExecute = function(context) {\n\n  var shape = context.shape,\n      delta = context.delta,\n      hints = context.hints;\n\n  var modeling = this._modeling;\n\n  if (hints.layout !== false) {\n\n    forEach(shape.incoming, function(c) {\n      modeling.layoutConnection(c, {\n        connectionEnd: getMovedTargetAnchor(c, shape, delta)\n      });\n    });\n\n    forEach(shape.outgoing, function(c) {\n      modeling.layoutConnection(c, {\n        connectionStart: getMovedSourceAnchor(c, shape, delta)\n      });\n    });\n  }\n\n  if (hints.recurse !== false) {\n    this.moveChildren(context);\n  }\n};\n\nMoveShapeHandler.prototype.revert = function(context) {\n\n  var shape = context.shape,\n      oldParent = context.oldParent,\n      oldParentIndex = context.oldParentIndex,\n      delta = context.delta;\n\n  // restore previous location in old parent\n  collectionAdd(oldParent.children, shape, oldParentIndex);\n\n  // revert to old position and parent\n  assign(shape, {\n    parent: oldParent,\n    x: shape.x - delta.x,\n    y: shape.y - delta.y\n  });\n\n  return shape;\n};\n\nMoveShapeHandler.prototype.moveChildren = function(context) {\n\n  var delta = context.delta,\n      shape = context.shape;\n\n  this._helper.moveRecursive(shape.children, delta, null);\n};\n\nMoveShapeHandler.prototype.getNewParent = function(context) {\n  return context.newParent || context.shape.parent;\n};\n","import { isArray } from 'min-dash';\n\n/**\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * Reconnect connection handler.\n *\n * @param {Modeling} modeling\n */\nexport default function ReconnectConnectionHandler(modeling) {\n  this._modeling = modeling;\n}\n\nReconnectConnectionHandler.$inject = [ 'modeling' ];\n\nReconnectConnectionHandler.prototype.execute = function(context) {\n  var newSource = context.newSource,\n      newTarget = context.newTarget,\n      connection = context.connection,\n      dockingOrPoints = context.dockingOrPoints;\n\n  if (!newSource && !newTarget) {\n    throw new Error('newSource or newTarget required');\n  }\n\n  if (isArray(dockingOrPoints)) {\n    context.oldWaypoints = connection.waypoints;\n    connection.waypoints = dockingOrPoints;\n  }\n\n  if (newSource) {\n    context.oldSource = connection.source;\n    connection.source = newSource;\n  }\n\n  if (newTarget) {\n    context.oldTarget = connection.target;\n    connection.target = newTarget;\n  }\n\n  return connection;\n};\n\nReconnectConnectionHandler.prototype.postExecute = function(context) {\n  var connection = context.connection,\n      newSource = context.newSource,\n      newTarget = context.newTarget,\n      dockingOrPoints = context.dockingOrPoints,\n      hints = context.hints || {};\n\n  var layoutConnectionHints = {};\n\n  if (hints.connectionStart) {\n    layoutConnectionHints.connectionStart = hints.connectionStart;\n  }\n\n  if (hints.connectionEnd) {\n    layoutConnectionHints.connectionEnd = hints.connectionEnd;\n  }\n\n  if (hints.layoutConnection === false) {\n    return;\n  }\n\n  if (newSource && (!newTarget || hints.docking === 'source')) {\n    layoutConnectionHints.connectionStart = layoutConnectionHints.connectionStart\n      || getDocking(isArray(dockingOrPoints) ? dockingOrPoints[ 0 ] : dockingOrPoints);\n  }\n\n  if (newTarget && (!newSource || hints.docking === 'target')) {\n    layoutConnectionHints.connectionEnd = layoutConnectionHints.connectionEnd\n      || getDocking(isArray(dockingOrPoints) ? dockingOrPoints[ dockingOrPoints.length - 1 ] : dockingOrPoints);\n  }\n\n  if (hints.newWaypoints) {\n    layoutConnectionHints.waypoints = hints.newWaypoints;\n  }\n\n  this._modeling.layoutConnection(connection, layoutConnectionHints);\n};\n\nReconnectConnectionHandler.prototype.revert = function(context) {\n  var oldSource = context.oldSource,\n      oldTarget = context.oldTarget,\n      oldWaypoints = context.oldWaypoints,\n      connection = context.connection;\n\n  if (oldSource) {\n    connection.source = oldSource;\n  }\n\n  if (oldTarget) {\n    connection.target = oldTarget;\n  }\n\n  if (oldWaypoints) {\n    connection.waypoints = oldWaypoints;\n  }\n\n  return connection;\n};\n\n\n\n// helpers //////////\n\nfunction getDocking(point) {\n  return point.original || point;\n}","import { forEach } from 'min-dash';\n\nimport {\n  getResizedSourceAnchor,\n  getResizedTargetAnchor\n} from './helper/AnchorsHelper';\n\n/**\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('../../rules/Rules').default} Rules\n */\n\n/**\n * Replace shape by adding new shape and removing old shape. Incoming and outgoing connections will\n * be kept if possible.\n *\n * @class\n * @constructor\n *\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function ReplaceShapeHandler(modeling, rules) {\n  this._modeling = modeling;\n  this._rules = rules;\n}\n\nReplaceShapeHandler.$inject = [ 'modeling', 'rules' ];\n\n\n/**\n * Add new shape.\n *\n * @param {Object} context\n * @param {Shape} context.oldShape\n * @param {Object} context.newData\n * @param {string} context.newData.type\n * @param {number} context.newData.x\n * @param {number} context.newData.y\n * @param {Object} [context.hints]\n */\nReplaceShapeHandler.prototype.preExecute = function(context) {\n  var self = this,\n      modeling = this._modeling,\n      rules = this._rules;\n\n  var oldShape = context.oldShape,\n      newData = context.newData,\n      hints = context.hints || {},\n      newShape;\n\n  function canReconnect(source, target, connection) {\n    return rules.allowed('connection.reconnect', {\n      connection: connection,\n      source: source,\n      target: target\n    });\n  }\n\n  // (1) add new shape at given position\n  var position = {\n    x: newData.x,\n    y: newData.y\n  };\n\n  var oldBounds = {\n    x: oldShape.x,\n    y: oldShape.y,\n    width: oldShape.width,\n    height: oldShape.height\n  };\n\n  newShape = context.newShape =\n    context.newShape ||\n    self.createShape(newData, position, oldShape.parent, hints);\n\n  // (2) update host\n  if (oldShape.host) {\n    modeling.updateAttachment(newShape, oldShape.host);\n  }\n\n  // (3) adopt all children from old shape\n  var children;\n\n  if (hints.moveChildren !== false) {\n    children = oldShape.children.slice();\n\n    modeling.moveElements(children, { x: 0, y: 0 }, newShape, hints);\n  }\n\n  // (4) reconnect connections to new shape if possible\n  var incoming = oldShape.incoming.slice(),\n      outgoing = oldShape.outgoing.slice();\n\n  forEach(incoming, function(connection) {\n    var source = connection.source,\n        allowed = canReconnect(source, newShape, connection);\n\n    if (allowed) {\n      self.reconnectEnd(\n        connection, newShape,\n        getResizedTargetAnchor(connection, newShape, oldBounds),\n        hints\n      );\n    }\n  });\n\n  forEach(outgoing, function(connection) {\n    var target = connection.target,\n        allowed = canReconnect(newShape, target, connection);\n\n    if (allowed) {\n      self.reconnectStart(\n        connection, newShape,\n        getResizedSourceAnchor(connection, newShape, oldBounds),\n        hints\n      );\n    }\n  });\n};\n\n\n/**\n * Remove old shape.\n */\nReplaceShapeHandler.prototype.postExecute = function(context) {\n  var oldShape = context.oldShape;\n\n  this._modeling.removeShape(oldShape);\n};\n\n\nReplaceShapeHandler.prototype.execute = function(context) {};\n\n\nReplaceShapeHandler.prototype.revert = function(context) {};\n\n\nReplaceShapeHandler.prototype.createShape = function(shape, position, target, hints) {\n  return this._modeling.createShape(shape, position, target, hints);\n};\n\n\nReplaceShapeHandler.prototype.reconnectStart = function(connection, newSource, dockingPoint, hints) {\n  this._modeling.reconnectStart(connection, newSource, dockingPoint, hints);\n};\n\n\nReplaceShapeHandler.prototype.reconnectEnd = function(connection, newTarget, dockingPoint, hints) {\n  this._modeling.reconnectEnd(connection, newTarget, dockingPoint, hints);\n};\n","import {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  getResizedSourceAnchor,\n  getResizedTargetAnchor\n} from './helper/AnchorsHelper';\n\n/**\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that implements reversible resizing of shapes.\n *\n * @param {Modeling} modeling\n */\nexport default function ResizeShapeHandler(modeling) {\n  this._modeling = modeling;\n}\n\nResizeShapeHandler.$inject = [ 'modeling' ];\n\n/**\n * {\n *   shape: {....}\n *   newBounds: {\n *     width:  20,\n *     height: 40,\n *     x:       5,\n *     y:      10\n *   }\n *\n * }\n */\nResizeShapeHandler.prototype.execute = function(context) {\n  var shape = context.shape,\n      newBounds = context.newBounds,\n      minBounds = context.minBounds;\n\n  if (newBounds.x === undefined || newBounds.y === undefined ||\n      newBounds.width === undefined || newBounds.height === undefined) {\n    throw new Error('newBounds must have {x, y, width, height} properties');\n  }\n\n  if (minBounds && (newBounds.width < minBounds.width\n    || newBounds.height < minBounds.height)) {\n    throw new Error('width and height cannot be less than minimum height and width');\n  } else if (!minBounds\n    && newBounds.width < 10 || newBounds.height < 10) {\n    throw new Error('width and height cannot be less than 10px');\n  }\n\n  // save old bbox in context\n  context.oldBounds = {\n    width:  shape.width,\n    height: shape.height,\n    x:      shape.x,\n    y:      shape.y\n  };\n\n  // update shape\n  assign(shape, {\n    width:  newBounds.width,\n    height: newBounds.height,\n    x:      newBounds.x,\n    y:      newBounds.y\n  });\n\n  return shape;\n};\n\nResizeShapeHandler.prototype.postExecute = function(context) {\n  var modeling = this._modeling;\n\n  var shape = context.shape,\n      oldBounds = context.oldBounds,\n      hints = context.hints || {};\n\n  if (hints.layout === false) {\n    return;\n  }\n\n  forEach(shape.incoming, function(c) {\n    modeling.layoutConnection(c, {\n      connectionEnd: getResizedTargetAnchor(c, shape, oldBounds)\n    });\n  });\n\n  forEach(shape.outgoing, function(c) {\n    modeling.layoutConnection(c, {\n      connectionStart: getResizedSourceAnchor(c, shape, oldBounds)\n    });\n  });\n\n};\n\nResizeShapeHandler.prototype.revert = function(context) {\n\n  var shape = context.shape,\n      oldBounds = context.oldBounds;\n\n  // restore previous bbox\n  assign(shape, {\n    width:  oldBounds.width,\n    height: oldBounds.height,\n    x:      oldBounds.x,\n    y:      oldBounds.y\n  });\n\n  return shape;\n};\n","import {\n  assign,\n  forEach,\n  map\n} from 'min-dash';\n\nimport {\n  getWaypointsUpdatingConnections,\n  resizeBounds\n} from '../../space-tool/SpaceUtil';\n\nimport {\n  getMovedSourceAnchor,\n  getMovedTargetAnchor,\n  getResizedSourceAnchor,\n  getResizedTargetAnchor\n} from './helper/AnchorsHelper';\n\n/**\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * Add or remove space by moving and resizing shapes and updating connection waypoints.\n *\n * @param {Modeling} modeling\n */\nexport default function SpaceToolHandler(modeling) {\n  this._modeling = modeling;\n}\n\nSpaceToolHandler.$inject = [ 'modeling' ];\n\nSpaceToolHandler.prototype.preExecute = function(context) {\n  var delta = context.delta,\n      direction = context.direction,\n      movingShapes = context.movingShapes,\n      resizingShapes = context.resizingShapes,\n      start = context.start,\n      oldBounds = {};\n\n  // (1) move shapes\n  this.moveShapes(movingShapes, delta);\n\n  // (2a) save old bounds of resized shapes\n  forEach(resizingShapes, function(shape) {\n    oldBounds[shape.id] = getBounds(shape);\n  });\n\n  // (2b) resize shapes\n  this.resizeShapes(resizingShapes, delta, direction);\n\n  // (3) update connection waypoints\n  this.updateConnectionWaypoints(\n    getWaypointsUpdatingConnections(movingShapes, resizingShapes),\n    delta,\n    direction,\n    start,\n    movingShapes,\n    resizingShapes,\n    oldBounds\n  );\n};\n\nSpaceToolHandler.prototype.execute = function() {};\nSpaceToolHandler.prototype.revert = function() {};\n\nSpaceToolHandler.prototype.moveShapes = function(shapes, delta) {\n  var self = this;\n\n  forEach(shapes, function(element) {\n    self._modeling.moveShape(element, delta, null, {\n      autoResize: false,\n      layout: false,\n      recurse: false\n    });\n  });\n};\n\nSpaceToolHandler.prototype.resizeShapes = function(shapes, delta, direction) {\n  var self = this;\n\n  forEach(shapes, function(shape) {\n    var newBounds = resizeBounds(shape, direction, delta);\n\n    self._modeling.resizeShape(shape, newBounds, null, {\n      attachSupport: false,\n      autoResize: false,\n      layout: false\n    });\n  });\n};\n\n/**\n * Update connections waypoints according to the rules:\n *   1. Both source and target are moved/resized => move waypoints by the delta\n *   2. Only one of source and target is moved/resized => re-layout connection with moved start/end\n */\nSpaceToolHandler.prototype.updateConnectionWaypoints = function(\n    connections,\n    delta,\n    direction,\n    start,\n    movingShapes,\n    resizingShapes,\n    oldBounds\n) {\n  var self = this,\n      affectedShapes = movingShapes.concat(resizingShapes);\n\n  forEach(connections, function(connection) {\n    var source = connection.source,\n        target = connection.target,\n        waypoints = copyWaypoints(connection),\n        axis = getAxisFromDirection(direction),\n        layoutHints = {};\n\n    if (includes(affectedShapes, source) && includes(affectedShapes, target)) {\n\n      // move waypoints\n      waypoints = map(waypoints, function(waypoint) {\n        if (shouldMoveWaypoint(waypoint, start, direction)) {\n\n          // move waypoint\n          waypoint[ axis ] = waypoint[ axis ] + delta[ axis ];\n        }\n\n        if (waypoint.original && shouldMoveWaypoint(waypoint.original, start, direction)) {\n\n          // move waypoint original\n          waypoint.original[ axis ] = waypoint.original[ axis ] + delta[ axis ];\n        }\n\n        return waypoint;\n      });\n\n      self._modeling.updateWaypoints(connection, waypoints, {\n        labelBehavior: false\n      });\n    } else if (includes(affectedShapes, source) || includes(affectedShapes, target)) {\n\n      // re-layout connection with moved start/end\n      if (includes(movingShapes, source)) {\n        layoutHints.connectionStart = getMovedSourceAnchor(connection, source, delta);\n      } else if (includes(movingShapes, target)) {\n        layoutHints.connectionEnd = getMovedTargetAnchor(connection, target, delta);\n      } else if (includes(resizingShapes, source)) {\n        layoutHints.connectionStart = getResizedSourceAnchor(\n          connection, source, oldBounds[source.id]\n        );\n      } else if (includes(resizingShapes, target)) {\n        layoutHints.connectionEnd = getResizedTargetAnchor(\n          connection, target, oldBounds[target.id]\n        );\n      }\n\n      self._modeling.layoutConnection(connection, layoutHints);\n    }\n  });\n};\n\n\n// helpers //////////\n\nfunction copyWaypoint(waypoint) {\n  return assign({}, waypoint);\n}\n\nfunction copyWaypoints(connection) {\n  return map(connection.waypoints, function(waypoint) {\n\n    waypoint = copyWaypoint(waypoint);\n\n    if (waypoint.original) {\n      waypoint.original = copyWaypoint(waypoint.original);\n    }\n\n    return waypoint;\n  });\n}\n\nfunction getAxisFromDirection(direction) {\n  switch (direction) {\n  case 'n':\n    return 'y';\n  case 'w':\n    return 'x';\n  case 's':\n    return 'y';\n  case 'e':\n    return 'x';\n  }\n}\n\nfunction shouldMoveWaypoint(waypoint, start, direction) {\n  var relevantAxis = getAxisFromDirection(direction);\n\n  if (/e|s/.test(direction)) {\n    return waypoint[ relevantAxis ] > start;\n  } else if (/n|w/.test(direction)) {\n    return waypoint[ relevantAxis ] < start;\n  }\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nfunction getBounds(shape) {\n  return {\n    x: shape.x,\n    y: shape.y,\n    height: shape.height,\n    width: shape.width\n  };\n}\n","import {\n  assign,\n  forEach\n} from 'min-dash';\n\n/**\n * @typedef {import('../../model/Types').Shape} Shape\n *\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that toggles the collapsed state of an element\n * and the visibility of all its children.\n *\n * @param {Modeling} modeling\n */\nexport default function ToggleShapeCollapseHandler(modeling) {\n  this._modeling = modeling;\n}\n\nToggleShapeCollapseHandler.$inject = [ 'modeling' ];\n\n\nToggleShapeCollapseHandler.prototype.execute = function(context) {\n\n  var shape = context.shape,\n      children = shape.children;\n\n  // recursively remember previous visibility of children\n  context.oldChildrenVisibility = getElementsVisibilityRecursive(children);\n\n  // toggle state\n  shape.collapsed = !shape.collapsed;\n\n  // recursively hide/show children\n  var result = setHiddenRecursive(children, shape.collapsed);\n\n  return [ shape ].concat(result);\n};\n\n\nToggleShapeCollapseHandler.prototype.revert = function(context) {\n\n  var shape = context.shape,\n      oldChildrenVisibility = context.oldChildrenVisibility;\n\n  var children = shape.children;\n\n  // recursively set old visability of children\n  var result = restoreVisibilityRecursive(children, oldChildrenVisibility);\n\n  // retoggle state\n  shape.collapsed = !shape.collapsed;\n\n  return [ shape ].concat(result);\n};\n\n\n// helpers //////////////////////\n\n/**\n * Return a map { elementId -> hiddenState}.\n *\n * @param {Shape[]} elements\n *\n * @return {Object}\n */\nfunction getElementsVisibilityRecursive(elements) {\n\n  var result = {};\n\n  forEach(elements, function(element) {\n    result[element.id] = element.hidden;\n\n    if (element.children) {\n      result = assign({}, result, getElementsVisibilityRecursive(element.children));\n    }\n  });\n\n  return result;\n}\n\n\nfunction setHiddenRecursive(elements, newHidden) {\n  var result = [];\n  forEach(elements, function(element) {\n    element.hidden = newHidden;\n\n    result = result.concat(element);\n\n    if (element.children) {\n      result = result.concat(setHiddenRecursive(element.children, element.collapsed || newHidden));\n    }\n  });\n\n  return result;\n}\n\nfunction restoreVisibilityRecursive(elements, lastState) {\n  var result = [];\n  forEach(elements, function(element) {\n    element.hidden = lastState[element.id];\n\n    result = result.concat(element);\n\n    if (element.children) {\n      result = result.concat(restoreVisibilityRecursive(element.children, lastState));\n    }\n  });\n\n  return result;\n}\n","import {\n  add as collectionAdd,\n  remove as collectionRemove\n} from '../../../util/Collections';\n\n/**\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that implements reversible attaching/detaching of shapes.\n *\n * @param {Modeling} modeling\n */\nexport default function UpdateAttachmentHandler(modeling) {\n  this._modeling = modeling;\n}\n\nUpdateAttachmentHandler.$inject = [ 'modeling' ];\n\n\nUpdateAttachmentHandler.prototype.execute = function(context) {\n  var shape = context.shape,\n      newHost = context.newHost,\n      oldHost = shape.host;\n\n  // (0) detach from old host\n  context.oldHost = oldHost;\n  context.attacherIdx = removeAttacher(oldHost, shape);\n\n  // (1) attach to new host\n  addAttacher(newHost, shape);\n\n  // (2) update host\n  shape.host = newHost;\n\n  return shape;\n};\n\nUpdateAttachmentHandler.prototype.revert = function(context) {\n  var shape = context.shape,\n      newHost = context.newHost,\n      oldHost = context.oldHost,\n      attacherIdx = context.attacherIdx;\n\n  // (2) update host\n  shape.host = oldHost;\n\n  // (1) attach to new host\n  removeAttacher(newHost, shape);\n\n  // (0) detach from old host\n  addAttacher(oldHost, shape, attacherIdx);\n\n  return shape;\n};\n\n\nfunction removeAttacher(host, attacher) {\n\n  // remove attacher from host\n  return collectionRemove(host && host.attachers, attacher);\n}\n\nfunction addAttacher(host, attacher, idx) {\n\n  if (!host) {\n    return;\n  }\n\n  var attachers = host.attachers;\n\n  if (!attachers) {\n    host.attachers = attachers = [];\n  }\n\n  collectionAdd(attachers, attacher, idx);\n}\n","export default function UpdateWaypointsHandler() { }\n\nUpdateWaypointsHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      newWaypoints = context.newWaypoints;\n\n  context.oldWaypoints = connection.waypoints;\n\n  connection.waypoints = newWaypoints;\n\n  return connection;\n};\n\nUpdateWaypointsHandler.prototype.revert = function(context) {\n\n  var connection = context.connection,\n      oldWaypoints = context.oldWaypoints;\n\n  connection.waypoints = oldWaypoints;\n\n  return connection;\n};","import {\n  assign,\n  forEach,\n  isArray\n} from 'min-dash';\n\nimport AlignElementsHandler from './cmd/AlignElementsHandler';\nimport AppendShapeHandler from './cmd/AppendShapeHandler';\nimport CreateConnectionHandler from './cmd/CreateConnectionHandler';\nimport CreateElementsHandler from './cmd/CreateElementsHandler';\nimport CreateLabelHandler from './cmd/CreateLabelHandler';\nimport CreateShapeHandler from './cmd/CreateShapeHandler';\nimport DeleteConnectionHandler from './cmd/DeleteConnectionHandler';\nimport DeleteElementsHandler from './cmd/DeleteElementsHandler';\nimport DeleteShapeHandler from './cmd/DeleteShapeHandler';\nimport DistributeElementsHandler from './cmd/DistributeElementsHandler';\nimport LayoutConnectionHandler from './cmd/LayoutConnectionHandler';\nimport MoveConnectionHandler from './cmd/MoveConnectionHandler';\nimport MoveElementsHandler from './cmd/MoveElementsHandler';\nimport MoveShapeHandler from './cmd/MoveShapeHandler';\nimport ReconnectConnectionHandler from './cmd/ReconnectConnectionHandler';\nimport ReplaceShapeHandler from './cmd/ReplaceShapeHandler';\nimport ResizeShapeHandler from './cmd/ResizeShapeHandler';\nimport SpaceToolHandler from './cmd/SpaceToolHandler';\nimport ToggleShapeCollapseHandler from './cmd/ToggleShapeCollapseHandler';\nimport UpdateAttachmentHandler from './cmd/UpdateAttachmentHandler';\nimport UpdateWaypointsHandler from './cmd/UpdateWaypointsHandler';\n\nimport { isModelElement } from '../../model';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Parent} Parent\n * @typedef {import('../../model/Types').Shape} Shape\n * @typedef {import('../../model/Types').Label} Label\n *\n * @typedef {import('../../command/CommandStack').default} CommandStack\n * @typedef {import('../../core/ElementFactory').default} ElementFactory\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('../../command/CommandStack').CommandHandlerConstructor} CommandHandlerConstructor\n *\n * @typedef {import('../../util/Types').Dimensions} Dimensions\n * @typedef {import('../../util/Types').Direction} Direction\n * @typedef {import('../../util/Types').Point} Point\n * @typedef {import('../../util/Types').Rect} Rect\n *\n * @typedef { 'x' | 'y' } ModelingDistributeAxis\n *\n * @typedef { 'width' | 'height' } ModelingDistributeDimension\n *\n * @typedef { {\n *   bottom?: number;\n *   center?: number;\n *   left?: number;\n *   middle?: number;\n *   right?: number;\n *   top?: number;\n * } } ModelingAlignAlignment\n *\n * @typedef { {\n *   [key: string]: any;\n * } } ModelingHints\n *\n * @typedef { {\n *   attach?: boolean;\n * } & ModelingHints } ModelingMoveElementsHints\n *\n * @typedef { {\n *   attach?: boolean;\n * } & ModelingHints } ModelingCreateShapeHints\n */\n\n/**\n * @template {Element} U\n *\n * @typedef { {\n *   elements: U[],\n *   range: {\n *     min: number;\n *     max: number;\n *   } }\n * } ModelingDistributeGroup\n */\n\n/**\n * The basic modeling entry point.\n *\n * @template {Connection} [T=Connection]\n * @template {Element} [U=Element]\n * @template {Label} [V=Label]\n * @template {Parent} [W=Parent]\n * @template {Shape} [X=Shape]\n *\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {CommandStack} commandStack\n */\nexport default function Modeling(eventBus, elementFactory, commandStack) {\n  this._eventBus = eventBus;\n  this._elementFactory = elementFactory;\n  this._commandStack = commandStack;\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n\n    // register modeling handlers\n    self.registerHandlers(commandStack);\n  });\n}\n\nModeling.$inject = [ 'eventBus', 'elementFactory', 'commandStack' ];\n\n/**\n * Get a map of all command handlers.\n *\n * @return {Map<string, CommandHandlerConstructor>}\n */\nModeling.prototype.getHandlers = function() {\n  return {\n    'shape.append': AppendShapeHandler,\n    'shape.create': CreateShapeHandler,\n    'shape.delete': DeleteShapeHandler,\n    'shape.move': MoveShapeHandler,\n    'shape.resize': ResizeShapeHandler,\n    'shape.replace': ReplaceShapeHandler,\n    'shape.toggleCollapse': ToggleShapeCollapseHandler,\n\n    'spaceTool': SpaceToolHandler,\n\n    'label.create': CreateLabelHandler,\n\n    'connection.create': CreateConnectionHandler,\n    'connection.delete': DeleteConnectionHandler,\n    'connection.move': MoveConnectionHandler,\n    'connection.layout': LayoutConnectionHandler,\n\n    'connection.updateWaypoints': UpdateWaypointsHandler,\n\n    'connection.reconnect': ReconnectConnectionHandler,\n\n    'elements.create': CreateElementsHandler,\n    'elements.move': MoveElementsHandler,\n    'elements.delete': DeleteElementsHandler,\n\n    'elements.distribute': DistributeElementsHandler,\n    'elements.align': AlignElementsHandler,\n\n    'element.updateAttachment': UpdateAttachmentHandler\n  };\n};\n\n/**\n * Register handlers with the command stack\n *\n * @param {CommandStack} commandStack\n */\nModeling.prototype.registerHandlers = function(commandStack) {\n  forEach(this.getHandlers(), function(handler, id) {\n    commandStack.registerHandler(id, handler);\n  });\n};\n\n\n/**\n * Move a shape by the given delta and optionally to a new parent.\n *\n * @param {X} shape\n * @param {Point} delta\n * @param {W} [newParent]\n * @param {number} [newParentIndex]\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.moveShape = function(shape, delta, newParent, newParentIndex, hints) {\n\n  if (typeof newParentIndex === 'object') {\n    hints = newParentIndex;\n    newParentIndex = null;\n  }\n\n  var context = {\n    shape: shape,\n    delta:  delta,\n    newParent: newParent,\n    newParentIndex: newParentIndex,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.move', context);\n};\n\n\n/**\n * Update the attachment of a shape.\n *\n * @param {X} shape\n * @param {X} [newHost=undefined]\n */\nModeling.prototype.updateAttachment = function(shape, newHost) {\n  var context = {\n    shape: shape,\n    newHost: newHost\n  };\n\n  this._commandStack.execute('element.updateAttachment', context);\n};\n\n\n/**\n * Move elements by a given delta and optionally to a new parent.\n *\n * @param {U[]} shapes\n * @param {Point} delta\n * @param {W} [target]\n * @param {ModelingMoveElementsHints} [hints]\n */\nModeling.prototype.moveElements = function(shapes, delta, target, hints) {\n\n  hints = hints || {};\n\n  var attach = hints.attach;\n\n  var newParent = target,\n      newHost;\n\n  if (attach === true) {\n    newHost = target;\n    newParent = target.parent;\n  } else if (attach === false) {\n    newHost = null;\n  }\n\n  var context = {\n    shapes: shapes,\n    delta: delta,\n    newParent: newParent,\n    newHost: newHost,\n    hints: hints\n  };\n\n  this._commandStack.execute('elements.move', context);\n};\n\n/**\n * Move a shape by the given delta and optionally to a new parent.\n *\n * @param {T} connection\n * @param {Point} delta\n * @param {W} [newParent]\n * @param {number} [newParentIndex]\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.moveConnection = function(connection, delta, newParent, newParentIndex, hints) {\n\n  if (typeof newParentIndex === 'object') {\n    hints = newParentIndex;\n    newParentIndex = undefined;\n  }\n\n  var context = {\n    connection: connection,\n    delta: delta,\n    newParent: newParent,\n    newParentIndex: newParentIndex,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.move', context);\n};\n\n/**\n * Layout a connection.\n *\n * @param {T} connection\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.layoutConnection = function(connection, hints) {\n  var context = {\n    connection: connection,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.layout', context);\n};\n\n/**\n * Create a connection.\n *\n * @overlord\n *\n * @param {U} source\n * @param {U} target\n * @param {Partial<T>} connection\n * @param {W} parent\n * @param {ModelingHints} [hints]\n *\n * @return {T}\n */\n\n/**\n * Create a connection.\n *\n * @param {U} source\n * @param {U} target\n * @param {number} parentIndex\n * @param {Partial<T>} connection\n * @param {W} parent\n * @param {ModelingHints} [hints]\n *\n * @return {T}\n */\nModeling.prototype.createConnection = function(source, target, parentIndex, connection, parent, hints) {\n\n  if (typeof parentIndex === 'object') {\n    hints = parent;\n    parent = connection;\n    connection = parentIndex;\n    parentIndex = undefined;\n  }\n\n  connection = this._create('connection', connection);\n\n  var context = {\n    source: source,\n    target: target,\n    parent: parent,\n    parentIndex: parentIndex,\n    connection: connection,\n    hints: hints\n  };\n\n  this._commandStack.execute('connection.create', context);\n\n  return context.connection;\n};\n\n\n/**\n * Create a shape.\n *\n * @overlord\n *\n * @param {Partial<X>} shape\n * @param {Point} position\n * @param {W} target\n * @param {ModelingCreateShapeHints} [hints]\n *\n * @return {X}\n */\n\n/**\n * Create a shape.\n *\n * @param {Partial<X>} shape\n * @param {Point} position\n * @param {W} target\n * @param {number} parentIndex\n * @param {ModelingCreateShapeHints} [hints]\n *\n * @return {X}\n */\nModeling.prototype.createShape = function(shape, position, target, parentIndex, hints) {\n\n  if (typeof parentIndex !== 'number') {\n    hints = parentIndex;\n    parentIndex = undefined;\n  }\n\n  hints = hints || {};\n\n  var attach = hints.attach,\n      parent,\n      host;\n\n  shape = this._create('shape', shape);\n\n  if (attach) {\n    parent = target.parent;\n    host = target;\n  } else {\n    parent = target;\n  }\n\n  var context = {\n    position: position,\n    shape: shape,\n    parent: parent,\n    parentIndex: parentIndex,\n    host: host,\n    hints: hints\n  };\n\n  this._commandStack.execute('shape.create', context);\n\n  return context.shape;\n};\n\n/**\n * Create elements.\n *\n * @param {Partial<U>[]} elements\n * @param {Point} position\n * @param {W} parent\n * @param {number} [parentIndex]\n * @param {ModelingHints} [hints]\n *\n * @return {U[]}\n */\nModeling.prototype.createElements = function(elements, position, parent, parentIndex, hints) {\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  if (typeof parentIndex !== 'number') {\n    hints = parentIndex;\n    parentIndex = undefined;\n  }\n\n  hints = hints || {};\n\n  var context = {\n    position: position,\n    elements: elements,\n    parent: parent,\n    parentIndex: parentIndex,\n    hints: hints\n  };\n\n  this._commandStack.execute('elements.create', context);\n\n  return context.elements;\n};\n\n/**\n * Create a label.\n *\n * @param {U} labelTarget\n * @param {Point} position\n * @param {Partial<V>} label\n * @param {W} [parent]\n *\n * @return {V}\n */\nModeling.prototype.createLabel = function(labelTarget, position, label, parent) {\n\n  label = this._create('label', label);\n\n  var context = {\n    labelTarget: labelTarget,\n    position: position,\n    parent: parent || labelTarget.parent,\n    shape: label\n  };\n\n  this._commandStack.execute('label.create', context);\n\n  return context.shape;\n};\n\n\n/**\n * Create and connect a shape to a source.\n *\n * @param {U} source\n * @param {Partial<X>} shape\n * @param {Point} position\n * @param {W} target\n * @param {ModelingHints} [hints]\n *\n * @return {X}\n */\nModeling.prototype.appendShape = function(source, shape, position, target, hints) {\n\n  hints = hints || {};\n\n  shape = this._create('shape', shape);\n\n  var context = {\n    source: source,\n    position: position,\n    target: target,\n    shape: shape,\n    connection: hints.connection,\n    connectionParent: hints.connectionParent,\n    hints: hints\n  };\n\n  this._commandStack.execute('shape.append', context);\n\n  return context.shape;\n};\n\n/**\n * Remove elements.\n *\n * @param {U[]} elements\n */\nModeling.prototype.removeElements = function(elements) {\n  var context = {\n    elements: elements\n  };\n\n  this._commandStack.execute('elements.delete', context);\n};\n\n/**\n * Distribute elements along a given axis.\n *\n * @param {ModelingDistributeGroup<U>[]} groups\n * @param {ModelingDistributeAxis} axis\n * @param {ModelingDistributeDimension} dimension\n */\nModeling.prototype.distributeElements = function(groups, axis, dimension) {\n  var context = {\n    groups: groups,\n    axis: axis,\n    dimension: dimension\n  };\n\n  this._commandStack.execute('elements.distribute', context);\n};\n\n/**\n * Remove a shape.\n *\n * @param {X} shape\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.removeShape = function(shape, hints) {\n  var context = {\n    shape: shape,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.delete', context);\n};\n\n/**\n * Remove a connection.\n *\n * @param {T} connection\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.removeConnection = function(connection, hints) {\n  var context = {\n    connection: connection,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.delete', context);\n};\n\n/**\n * Replace a shape.\n *\n * @param {X} oldShape\n * @param {Partial<X>} newShape\n * @param {ModelingHints} [hints]\n *\n * @return {X}\n */\nModeling.prototype.replaceShape = function(oldShape, newShape, hints) {\n  var context = {\n    oldShape: oldShape,\n    newData: newShape,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.replace', context);\n\n  return context.newShape;\n};\n\n/**\n * Align elements.\n *\n * @param {U[]} elements\n * @param {ModelingAlignAlignment} alignment\n */\nModeling.prototype.alignElements = function(elements, alignment) {\n  var context = {\n    elements: elements,\n    alignment: alignment\n  };\n\n  this._commandStack.execute('elements.align', context);\n};\n\n/**\n * Resize a shape.\n *\n * @param {X} shape\n * @param {Rect} newBounds\n * @param {Dimensions} [minBounds]\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.resizeShape = function(shape, newBounds, minBounds, hints) {\n  var context = {\n    shape: shape,\n    newBounds: newBounds,\n    minBounds: minBounds,\n    hints: hints\n  };\n\n  this._commandStack.execute('shape.resize', context);\n};\n\n/**\n * Create space along an horizontally or vertically.\n *\n * @param {X[]} movingShapes\n * @param {X[]} resizingShapes\n * @param {Point} delta\n * @param {Direction} direction\n * @param {number} start\n */\nModeling.prototype.createSpace = function(movingShapes, resizingShapes, delta, direction, start) {\n  var context = {\n    delta: delta,\n    direction: direction,\n    movingShapes: movingShapes,\n    resizingShapes: resizingShapes,\n    start: start\n  };\n\n  this._commandStack.execute('spaceTool', context);\n};\n\n/**\n * Update a connetions waypoints.\n *\n * @param {T} connection\n * @param {Point[]} newWaypoints\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.updateWaypoints = function(connection, newWaypoints, hints) {\n  var context = {\n    connection: connection,\n    newWaypoints: newWaypoints,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.updateWaypoints', context);\n};\n\n/**\n * Reconnect a connections source and/or target.\n *\n * @param {T} connection\n * @param {U} source\n * @param {U} target\n * @param {Point|Point[]} dockingOrPoints\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.reconnect = function(connection, source, target, dockingOrPoints, hints) {\n  var context = {\n    connection: connection,\n    newSource: source,\n    newTarget: target,\n    dockingOrPoints: dockingOrPoints,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.reconnect', context);\n};\n\n/**\n * Reconnect a connections source.\n *\n * @param {T} connection\n * @param {U} newSource\n * @param {Point|Point[]} dockingOrPoints\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.reconnectStart = function(connection, newSource, dockingOrPoints, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  this.reconnect(connection, newSource, connection.target, dockingOrPoints, assign(hints, {\n    docking: 'source'\n  }));\n};\n\n/**\n * Reconnect a connections target.\n *\n * @param {T} connection\n * @param {U} newTarget\n * @param {Point|Point[]} dockingOrPoints\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.reconnectEnd = function(connection, newTarget, dockingOrPoints, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  this.reconnect(connection, connection.source, newTarget, dockingOrPoints, assign(hints, {\n    docking: 'target'\n  }));\n};\n\n/**\n * Connect two elements.\n *\n * @param {U} source\n * @param {U} target\n * @param {Partial<T>} [attrs]\n * @param {ModelingHints} [hints]\n *\n * @return {T}\n */\nModeling.prototype.connect = function(source, target, attrs, hints) {\n  return this.createConnection(source, target, attrs || {}, source.parent, hints);\n};\n\nModeling.prototype._create = function(type, attrs) {\n  if (isModelElement(attrs)) {\n    return attrs;\n  } else {\n    return this._elementFactory.create(type, attrs);\n  }\n};\n\n/**\n * Collapse or expand a shape.\n *\n * @param {X} shape\n * @param {ModelingHints} [hints]\n */\nModeling.prototype.toggleCollapse = function(shape, hints) {\n  var context = {\n    shape: shape,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.toggleCollapse', context);\n};\n","import {\n  reduce,\n  keys,\n  forEach\n} from 'min-dash';\n\nimport {\n  is,\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n *\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n *\n * @typedef {import('../../../model/Types').Shape} Shape\n * @typedef {import('../../../model/Types').ModdleElement} ModdleElement\n */\n\n/**\n * @implements {CommandHandler}\n *\n * @param {ElementRegistry} elementRegistry\n */\nexport default function UpdateModdlePropertiesHandler(elementRegistry) {\n  this._elementRegistry = elementRegistry;\n}\n\nUpdateModdlePropertiesHandler.$inject = [ 'elementRegistry' ];\n\nUpdateModdlePropertiesHandler.prototype.execute = function(context) {\n\n  var element = context.element,\n      moddleElement = context.moddleElement,\n      properties = context.properties;\n\n  if (!moddleElement) {\n    throw new Error('<moddleElement> required');\n  }\n\n  // TODO(nikku): we need to ensure that ID properties\n  // are properly registered / unregistered via\n  // this._moddle.ids.assigned(id)\n  var changed = context.changed || this._getVisualReferences(moddleElement).concat(element);\n  var oldProperties = context.oldProperties || getModdleProperties(moddleElement, keys(properties));\n\n  setModdleProperties(moddleElement, properties);\n\n  context.oldProperties = oldProperties;\n  context.changed = changed;\n\n  return changed;\n};\n\nUpdateModdlePropertiesHandler.prototype.revert = function(context) {\n  var oldProperties = context.oldProperties,\n      moddleElement = context.moddleElement,\n      changed = context.changed;\n\n  setModdleProperties(moddleElement, oldProperties);\n\n  return changed;\n};\n\n/**\n * Return visual references of given moddle element within the diagram.\n *\n * @param {ModdleElement} moddleElement\n *\n * @return {Shape[]}\n */\nUpdateModdlePropertiesHandler.prototype._getVisualReferences = function(moddleElement) {\n\n  var elementRegistry = this._elementRegistry;\n\n  if (is(moddleElement, 'bpmn:DataObject')) {\n    return getAllDataObjectReferences(moddleElement, elementRegistry);\n  }\n\n  return [];\n};\n\n\n// helpers /////////////////\n\nfunction getModdleProperties(moddleElement, propertyNames) {\n  return reduce(propertyNames, function(result, key) {\n    result[key] = moddleElement.get(key);\n    return result;\n  }, {});\n}\n\nfunction setModdleProperties(moddleElement, properties) {\n  forEach(properties, function(value, key) {\n    moddleElement.set(key, value);\n  });\n}\n\nfunction getAllDataObjectReferences(dataObject, elementRegistry) {\n  return elementRegistry.filter(function(element) {\n    return (\n      is(element, 'bpmn:DataObjectReference') &&\n          getBusinessObject(element).dataObjectRef === dataObject\n    );\n  });\n}\n","import {\n  reduce,\n  keys,\n  forEach,\n  assign\n} from 'min-dash';\n\nimport {\n  getBusinessObject,\n  getDi\n} from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n * @typedef {import('diagram-js/lib/command/CommandStack').CommandContext} CommandContext\n *\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../../model/Types').Moddle} Moddle\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('../../../draw/TextRenderer').default} TextRenderer\n *\n * @typedef {import('../../../model/Types').Element} Element\n */\n\nvar DEFAULT_FLOW = 'default',\n    ID = 'id',\n    DI = 'di';\n\nvar NULL_DIMENSIONS = {\n  width: 0,\n  height: 0\n};\n\n/**\n * A handler that implements a BPMN 2.0 property update.\n *\n * This should be used to set simple properties on elements with\n * an underlying BPMN business object.\n *\n * Use respective diagram-js provided handlers if you would\n * like to perform automated modeling.\n *\n * @implements {CommandHandler}\n *\n * @param {ElementRegistry} elementRegistry\n * @param {Moddle} moddle\n * @param {Modeling} modeling\n * @param {TextRenderer} textRenderer\n */\nexport default function UpdatePropertiesHandler(\n    elementRegistry, moddle,\n    modeling, textRenderer) {\n\n  this._elementRegistry = elementRegistry;\n  this._moddle = moddle;\n  this._modeling = modeling;\n  this._textRenderer = textRenderer;\n}\n\nUpdatePropertiesHandler.$inject = [\n  'elementRegistry',\n  'moddle',\n  'modeling',\n  'textRenderer'\n];\n\n\n// api //////////////////////\n\n/**\n * Update a BPMN element's properties.\n *\n * @param { {\n *   element: Element;\n *   properties: Record<string, any>;\n * } & CommandContext } context\n *\n * @return {Element[]}\n */\nUpdatePropertiesHandler.prototype.execute = function(context) {\n\n  var element = context.element,\n      changed = [ element ];\n\n  if (!element) {\n    throw new Error('element required');\n  }\n\n  var elementRegistry = this._elementRegistry,\n      ids = this._moddle.ids;\n\n  var businessObject = element.businessObject,\n      properties = unwrapBusinessObjects(context.properties),\n      oldProperties = context.oldProperties || getProperties(element, properties);\n\n  if (isIdChange(properties, businessObject)) {\n    ids.unclaim(businessObject[ID]);\n\n    elementRegistry.updateId(element, properties[ID]);\n\n    ids.claim(properties[ID], businessObject);\n  }\n\n  // correctly indicate visual changes on default flow updates\n  if (DEFAULT_FLOW in properties) {\n\n    if (properties[DEFAULT_FLOW]) {\n      changed.push(elementRegistry.get(properties[DEFAULT_FLOW].id));\n    }\n\n    if (businessObject[DEFAULT_FLOW]) {\n      changed.push(elementRegistry.get(businessObject[DEFAULT_FLOW].id));\n    }\n  }\n\n  // update properties\n  setProperties(element, properties);\n\n  // store old values\n  context.oldProperties = oldProperties;\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n\nUpdatePropertiesHandler.prototype.postExecute = function(context) {\n  var element = context.element,\n      label = element.label;\n\n  var text = label && getBusinessObject(label).name;\n\n  if (!text) {\n    return;\n  }\n\n  // get layouted text bounds and resize external\n  // external label accordingly\n  var newLabelBounds = this._textRenderer.getExternalLabelBounds(label, text);\n\n  this._modeling.resizeShape(label, newLabelBounds, NULL_DIMENSIONS);\n};\n\n/**\n * Revert updating a BPMN element's properties.\n *\n * @param { {\n *   element: Element;\n *   properties: Record<string, any>;\n *   oldProperties: Record<string, any>;\n * } & CommandContext } context\n *\n * @return {Element[]}\n */\nUpdatePropertiesHandler.prototype.revert = function(context) {\n\n  var element = context.element,\n      properties = context.properties,\n      oldProperties = context.oldProperties,\n      businessObject = element.businessObject,\n      elementRegistry = this._elementRegistry,\n      ids = this._moddle.ids;\n\n  // update properties\n  setProperties(element, oldProperties);\n\n  if (isIdChange(properties, businessObject)) {\n    ids.unclaim(properties[ID]);\n\n    elementRegistry.updateId(element, oldProperties[ID]);\n\n    ids.claim(oldProperties[ID], businessObject);\n  }\n\n  return context.changed;\n};\n\n\nfunction isIdChange(properties, businessObject) {\n  return ID in properties && properties[ID] !== businessObject[ID];\n}\n\n\nfunction getProperties(element, properties) {\n  var propertyNames = keys(properties),\n      businessObject = element.businessObject,\n      di = getDi(element);\n\n  return reduce(propertyNames, function(result, key) {\n\n    // handle DI separately\n    if (key !== DI) {\n      result[key] = businessObject.get(key);\n\n    } else {\n      result[key] = getDiProperties(di, keys(properties.di));\n    }\n\n    return result;\n  }, {});\n}\n\n\nfunction getDiProperties(di, propertyNames) {\n  return reduce(propertyNames, function(result, key) {\n    result[key] = di && di.get(key);\n\n    return result;\n  }, {});\n}\n\n\nfunction setProperties(element, properties) {\n  var businessObject = element.businessObject,\n      di = getDi(element);\n\n  forEach(properties, function(value, key) {\n\n    if (key !== DI) {\n      businessObject.set(key, value);\n    } else {\n\n      // only update, if di exists\n      if (di) {\n        setDiProperties(di, value);\n      }\n    }\n  });\n}\n\n\nfunction setDiProperties(di, properties) {\n  forEach(properties, function(value, key) {\n    di.set(key, value);\n  });\n}\n\n\nvar referencePropertyNames = [ 'default' ];\n\n/**\n * Make sure we unwrap the actual business object behind diagram element that\n * may have been passed as arguments.\n *\n * @param  {Record<string, any>} properties\n *\n * @return {Record<string, any>} unwrappedProps\n */\nfunction unwrapBusinessObjects(properties) {\n\n  var unwrappedProps = assign({}, properties);\n\n  referencePropertyNames.forEach(function(name) {\n    if (name in properties) {\n      unwrappedProps[name] = getBusinessObject(unwrappedProps[name]);\n    }\n  });\n\n  return unwrappedProps;\n}","import {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\nimport { getDi } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n *\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * @implements {CommandHandler}\n *\n * @param {Canvas} canvas\n * @param {Modeling} modeling\n */\nexport default function UpdateCanvasRootHandler(canvas, modeling) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n}\n\nUpdateCanvasRootHandler.$inject = [\n  'canvas',\n  'modeling'\n];\n\n\nUpdateCanvasRootHandler.prototype.execute = function(context) {\n\n  var canvas = this._canvas;\n\n  var newRoot = context.newRoot,\n      newRootBusinessObject = newRoot.businessObject,\n      oldRoot = canvas.getRootElement(),\n      oldRootBusinessObject = oldRoot.businessObject,\n      bpmnDefinitions = oldRootBusinessObject.$parent,\n      diPlane = getDi(oldRoot);\n\n  // (1) replace process old <> new root\n  canvas.setRootElement(newRoot);\n  canvas.removeRootElement(oldRoot);\n\n  // (2) update root elements\n  collectionAdd(bpmnDefinitions.rootElements, newRootBusinessObject);\n  newRootBusinessObject.$parent = bpmnDefinitions;\n\n  collectionRemove(bpmnDefinitions.rootElements, oldRootBusinessObject);\n  oldRootBusinessObject.$parent = null;\n\n  // (3) wire di\n  oldRoot.di = null;\n\n  diPlane.bpmnElement = newRootBusinessObject;\n  newRoot.di = diPlane;\n\n  context.oldRoot = oldRoot;\n\n  // TODO(nikku): return changed elements?\n  // return [ newRoot, oldRoot ];\n  return [];\n};\n\n\nUpdateCanvasRootHandler.prototype.revert = function(context) {\n\n  var canvas = this._canvas;\n\n  var newRoot = context.newRoot,\n      newRootBusinessObject = newRoot.businessObject,\n      oldRoot = context.oldRoot,\n      oldRootBusinessObject = oldRoot.businessObject,\n      bpmnDefinitions = newRootBusinessObject.$parent,\n      diPlane = getDi(newRoot);\n\n  // (1) replace process old <> new root\n  canvas.setRootElement(oldRoot);\n  canvas.removeRootElement(newRoot);\n\n  // (2) update root elements\n  collectionRemove(bpmnDefinitions.rootElements, newRootBusinessObject);\n  newRootBusinessObject.$parent = null;\n\n  collectionAdd(bpmnDefinitions.rootElements, oldRootBusinessObject);\n  oldRootBusinessObject.$parent = bpmnDefinitions;\n\n  // (3) wire di\n  newRoot.di = null;\n\n  diPlane.bpmnElement = oldRootBusinessObject;\n  oldRoot.di = diPlane;\n\n  // TODO(nikku): return changed elements?\n  // return [ newRoot, oldRoot ];\n\n  return [];\n};","import {\n  filter\n} from 'min-dash';\n\nimport {\n  eachElement\n} from 'diagram-js/lib/util/Elements';\n\nimport {\n  getLanesRoot,\n  getChildLanes,\n  LANE_INDENTATION\n} from '../util/LaneUtil';\n\nimport {\n  isHorizontal\n} from '../../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n *\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('../../space-tool/BpmnSpaceTool').default} SpaceTool\n */\n\n/**\n * A handler that allows us to add a new lane\n * above or below an existing one.\n *\n * @implements {CommandHandler}\n *\n * @param {Modeling} modeling\n * @param {SpaceTool} spaceTool\n */\nexport default function AddLaneHandler(modeling, spaceTool) {\n  this._modeling = modeling;\n  this._spaceTool = spaceTool;\n}\n\nAddLaneHandler.$inject = [\n  'modeling',\n  'spaceTool'\n];\n\n\nAddLaneHandler.prototype.preExecute = function(context) {\n\n  var spaceTool = this._spaceTool,\n      modeling = this._modeling;\n\n  var shape = context.shape,\n      location = context.location;\n\n  var lanesRoot = getLanesRoot(shape);\n\n  var isRoot = lanesRoot === shape,\n      laneParent = isRoot ? shape : shape.parent;\n\n  var existingChildLanes = getChildLanes(laneParent);\n\n  var isHorizontalLane = isHorizontal(shape);\n\n  // never mix up horizontal/vertical lanes\n  if (isHorizontalLane) {\n    if (location === 'left') {\n      location = 'top';\n    } else\n    if (location === 'right') {\n      location = 'bottom';\n    }\n  } else {\n    if (location === 'top') {\n      location = 'left';\n    } else\n    if (location === 'bottom') {\n      location = 'right';\n    }\n  }\n\n  // (0) add a lane if we currently got none and are adding to root\n  if (!existingChildLanes.length) {\n    var siblingPosition = isHorizontalLane ? {\n      x: shape.x + LANE_INDENTATION,\n      y: shape.y,\n      width: shape.width - LANE_INDENTATION,\n      height: shape.height\n    } : {\n      x: shape.x,\n      y: shape.y + LANE_INDENTATION,\n      width: shape.width,\n      height: shape.height - LANE_INDENTATION\n    };\n\n    modeling.createShape(\n      {\n        type: 'bpmn:Lane',\n        isHorizontal: isHorizontalLane\n      },\n      siblingPosition,\n      laneParent\n    );\n  }\n\n  // (1) collect affected elements to create necessary space\n  var allAffected = [];\n\n  eachElement(lanesRoot, function(element) {\n    allAffected.push(element);\n\n    // handle element labels in the diagram root\n    if (element.label) {\n      allAffected.push(element.label);\n    }\n\n    if (element === shape) {\n      return [];\n    }\n\n    return filter(element.children, function(c) {\n      return c !== shape;\n    });\n  });\n\n  var offset,\n      lanePosition,\n      spacePos,\n      direction,\n      axis;\n\n  if (location === 'top') {\n    offset = -120;\n    lanePosition = shape.y;\n    spacePos = lanePosition + 10;\n    direction = 'n';\n    axis = 'y';\n  } else\n  if (location === 'left') {\n    offset = -120;\n    lanePosition = shape.x;\n    spacePos = lanePosition + 10;\n    direction = 'w';\n    axis = 'x';\n  } else\n  if (location === 'bottom') {\n    offset = 120;\n    lanePosition = shape.y + shape.height;\n    spacePos = lanePosition - 10;\n    direction = 's';\n    axis = 'y';\n  } else\n  if (location === 'right') {\n    offset = 120;\n    lanePosition = shape.x + shape.width;\n    spacePos = lanePosition - 10;\n    direction = 'e';\n    axis = 'x';\n  }\n\n  var adjustments = spaceTool.calculateAdjustments(allAffected, axis, offset, spacePos);\n\n  var delta = isHorizontalLane ? { x: 0, y: offset } : { x: offset, y: 0 };\n\n  spaceTool.makeSpace(\n    adjustments.movingShapes,\n    adjustments.resizingShapes,\n    delta,\n    direction,\n    spacePos\n  );\n\n  // (2) create new lane at open space\n  var newLanePosition = isHorizontalLane ? {\n    x: shape.x + (isRoot ? LANE_INDENTATION : 0),\n    y: lanePosition - (location === 'top' ? 120 : 0),\n    width: shape.width - (isRoot ? LANE_INDENTATION : 0),\n    height: 120\n  } : {\n    x: lanePosition - (location === 'left' ? 120 : 0),\n    y: shape.y + (isRoot ? LANE_INDENTATION : 0),\n    width: 120,\n    height: shape.height - (isRoot ? LANE_INDENTATION : 0)\n  };\n\n  context.newLane = modeling.createShape(\n    {\n      type: 'bpmn:Lane',\n      isHorizontal: isHorizontalLane\n    },\n    newLanePosition,\n    laneParent\n  );\n};\n","import {\n  getChildLanes,\n  LANE_INDENTATION\n} from '../util/LaneUtil';\n\nimport {\n  isHorizontal\n} from '../../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n *\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * A handler that splits a lane into a number of sub-lanes,\n * creating new sub lanes, if necessary.\n *\n * @implements {CommandHandler}\n *\n * @param {Modeling} modeling\n */\nexport default function SplitLaneHandler(modeling) {\n  this._modeling = modeling;\n}\n\nSplitLaneHandler.$inject = [\n  'modeling'\n];\n\n\nSplitLaneHandler.prototype.preExecute = function(context) {\n\n  var modeling = this._modeling;\n\n  var shape = context.shape,\n      newLanesCount = context.count;\n\n  var childLanes = getChildLanes(shape),\n      existingLanesCount = childLanes.length;\n\n  if (existingLanesCount > newLanesCount) {\n    throw new Error(`more than <${ newLanesCount }> child lanes`);\n  }\n\n  var isHorizontalLane = isHorizontal(shape);\n\n  var laneBaseSize = isHorizontalLane ? shape.height : shape.width;\n  var newLanesSize = Math.round(laneBaseSize / newLanesCount);\n\n  // Iterate from first to last in child lane order,\n  // resizing existing lanes and creating new ones\n  // so that they split the parent proportionally.\n  //\n  // Due to rounding related errors, the last lane\n  // needs to take up all the remaining space.\n  var laneSize,\n      laneBounds,\n      newLaneAttrs,\n      idx;\n\n  for (idx = 0; idx < newLanesCount; idx++) {\n\n    // if last lane\n    if (idx === newLanesCount - 1) {\n      laneSize = laneBaseSize - (newLanesSize * idx);\n    } else {\n      laneSize = newLanesSize;\n    }\n\n    laneBounds = isHorizontalLane ? {\n      x: shape.x + LANE_INDENTATION,\n      y: shape.y + idx * newLanesSize,\n      width: shape.width - LANE_INDENTATION,\n      height: laneSize\n    } : {\n      x: shape.x + idx * newLanesSize,\n      y: shape.y + LANE_INDENTATION,\n      width: laneSize,\n      height: shape.height - LANE_INDENTATION\n    };\n\n    if (idx < existingLanesCount) {\n\n      // resize existing lane\n      modeling.resizeShape(childLanes[idx], laneBounds);\n    } else {\n\n      // create a new lane at position\n      newLaneAttrs = {\n        type: 'bpmn:Lane',\n        isHorizontal: isHorizontalLane\n      };\n\n      modeling.createShape(newLaneAttrs, laneBounds, shape);\n    }\n  }\n};\n","import { is } from '../../../util/ModelUtil';\n\nimport {\n  getLanesRoot,\n  computeLanesResize\n} from '../util/LaneUtil';\n\nimport {\n  eachElement\n} from 'diagram-js/lib/util/Elements';\n\nimport {\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  substractTRBL\n} from 'diagram-js/lib/features/resize/ResizeUtil';\n\n/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n *\n * @typedef {import('../Modeling').default} Modeling\n * @typedef {import('../../space-tool/BpmnSpaceTool').default} SpaceTool\n *\n * @typedef {import('../../../model/Types').Shape} Shape\n *\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n */\n\n/**\n * A handler that resizes a lane.\n *\n * @implements {CommandHandler}\n *\n * @param {Modeling} modeling\n * @param {SpaceTool} spaceTool\n */\nexport default function ResizeLaneHandler(modeling, spaceTool) {\n  this._modeling = modeling;\n  this._spaceTool = spaceTool;\n}\n\nResizeLaneHandler.$inject = [\n  'modeling',\n  'spaceTool'\n];\n\n\nResizeLaneHandler.prototype.preExecute = function(context) {\n\n  var shape = context.shape,\n      newBounds = context.newBounds,\n      balanced = context.balanced;\n\n  if (balanced !== false) {\n    this.resizeBalanced(shape, newBounds);\n  } else {\n    this.resizeSpace(shape, newBounds);\n  }\n};\n\n\n/**\n * Resize balanced, adjusting next / previous lane sizes.\n *\n * @param {Shape} shape\n * @param {Rect} newBounds\n */\nResizeLaneHandler.prototype.resizeBalanced = function(shape, newBounds) {\n\n  var modeling = this._modeling;\n\n  var resizeNeeded = computeLanesResize(shape, newBounds);\n\n  // resize the lane\n  modeling.resizeShape(shape, newBounds);\n\n  // resize other lanes as needed\n  resizeNeeded.forEach(function(r) {\n    modeling.resizeShape(r.shape, r.newBounds);\n  });\n};\n\n\n/**\n * Resize, making actual space and moving below / above elements.\n *\n * @param {Shape} shape\n * @param {Rect} newBounds\n */\nResizeLaneHandler.prototype.resizeSpace = function(shape, newBounds) {\n  var spaceTool = this._spaceTool;\n\n  var shapeTrbl = asTRBL(shape),\n      newTrbl = asTRBL(newBounds);\n\n  var trblDiff = substractTRBL(newTrbl, shapeTrbl);\n\n  var lanesRoot = getLanesRoot(shape);\n\n  var allAffected = [],\n      allLanes = [];\n\n  eachElement(lanesRoot, function(element) {\n    allAffected.push(element);\n\n    if (is(element, 'bpmn:Lane') || is(element, 'bpmn:Participant')) {\n      allLanes.push(element);\n    }\n\n    return element.children;\n  });\n\n  var change,\n      spacePos,\n      direction,\n      offset,\n      adjustments;\n\n  if (trblDiff.bottom || trblDiff.top) {\n\n    change = trblDiff.bottom || trblDiff.top;\n    spacePos = shape.y + (trblDiff.bottom ? shape.height : 0) + (trblDiff.bottom ? -10 : 10);\n    direction = trblDiff.bottom ? 's' : 'n';\n\n    offset = trblDiff.top > 0 || trblDiff.bottom < 0 ? -change : change;\n\n    adjustments = spaceTool.calculateAdjustments(allAffected, 'y', offset, spacePos);\n\n    spaceTool.makeSpace(adjustments.movingShapes, adjustments.resizingShapes, { x: 0, y: change }, direction);\n  }\n\n\n  if (trblDiff.left || trblDiff.right) {\n\n    change = trblDiff.right || trblDiff.left;\n    spacePos = shape.x + (trblDiff.right ? shape.width : 0) + (trblDiff.right ? -10 : 100);\n    direction = trblDiff.right ? 'e' : 'w';\n\n    offset = trblDiff.left > 0 || trblDiff.right < 0 ? -change : change;\n\n    adjustments = spaceTool.calculateAdjustments(allLanes, 'x', offset, spacePos);\n\n    spaceTool.makeSpace(adjustments.movingShapes, adjustments.resizingShapes, { x: change, y: 0 }, direction);\n  }\n};","import {\n  collectLanes,\n  getLanesRoot\n} from '../util/LaneUtil';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\n/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n *\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n *\n * @typedef {import('../../../model/Types').Shape} Shape\n */\n\nvar FLOW_NODE_REFS_ATTR = 'flowNodeRef',\n    LANES_ATTR = 'lanes';\n\n\n/**\n * A handler that updates lane refs on changed elements.\n *\n * @implements {CommandHandler}\n *\n * @param {ElementRegistry} elementRegistry\n */\nexport default function UpdateFlowNodeRefsHandler(elementRegistry) {\n  this._elementRegistry = elementRegistry;\n}\n\nUpdateFlowNodeRefsHandler.$inject = [\n  'elementRegistry'\n];\n\n/**\n * @param {Shape} flowNodeShapes\n * @param {Shape} laneShapes\n *\n * @return { {\n *   flowNode: Shape;\n *   add: Shape[];\n *   remove: Shape[];\n * }[] }\n */\nUpdateFlowNodeRefsHandler.prototype._computeUpdates = function(flowNodeShapes, laneShapes) {\n\n  var handledNodes = [];\n\n  var updates = [];\n\n  var participantCache = {};\n\n  var allFlowNodeShapes = [];\n\n  function isInLaneShape(element, laneShape) {\n\n    var laneTrbl = asTRBL(laneShape);\n\n    var elementMid = {\n      x: element.x + element.width / 2,\n      y: element.y + element.height / 2\n    };\n\n    return elementMid.x > laneTrbl.left &&\n           elementMid.x < laneTrbl.right &&\n           elementMid.y > laneTrbl.top &&\n           elementMid.y < laneTrbl.bottom;\n  }\n\n  function addFlowNodeShape(flowNodeShape) {\n    if (handledNodes.indexOf(flowNodeShape) === -1) {\n      allFlowNodeShapes.push(flowNodeShape);\n      handledNodes.push(flowNodeShape);\n    }\n  }\n\n  function getAllLaneShapes(flowNodeShape) {\n\n    var root = getLanesRoot(flowNodeShape);\n\n    if (!participantCache[root.id]) {\n      participantCache[root.id] = collectLanes(root);\n    }\n\n    return participantCache[root.id];\n  }\n\n  function getNewLanes(flowNodeShape) {\n    if (!flowNodeShape.parent) {\n      return [];\n    }\n\n    var allLaneShapes = getAllLaneShapes(flowNodeShape);\n\n    return allLaneShapes.filter(function(l) {\n      return isInLaneShape(flowNodeShape, l);\n    }).map(function(shape) {\n      return shape.businessObject;\n    });\n  }\n\n  laneShapes.forEach(function(laneShape) {\n    var root = getLanesRoot(laneShape);\n\n    if (!root || handledNodes.indexOf(root) !== -1) {\n      return;\n    }\n\n    var children = root.children.filter(function(c) {\n      return is(c, 'bpmn:FlowNode');\n    });\n\n    children.forEach(addFlowNodeShape);\n\n    handledNodes.push(root);\n  });\n\n  flowNodeShapes.forEach(addFlowNodeShape);\n\n\n  allFlowNodeShapes.forEach(function(flowNodeShape) {\n\n    var flowNode = flowNodeShape.businessObject;\n\n    var lanes = flowNode.get(LANES_ATTR),\n        remove = lanes.slice(),\n        add = getNewLanes(flowNodeShape);\n\n    updates.push({ flowNode: flowNode, remove: remove, add: add });\n  });\n\n  laneShapes.forEach(function(laneShape) {\n\n    var lane = laneShape.businessObject;\n\n    // lane got removed XX-)\n    if (!laneShape.parent) {\n      lane.get(FLOW_NODE_REFS_ATTR).forEach(function(flowNode) {\n        updates.push({ flowNode: flowNode, remove: [ lane ], add: [] });\n      });\n    }\n  });\n\n  return updates;\n};\n\nUpdateFlowNodeRefsHandler.prototype.execute = function(context) {\n\n  var updates = context.updates;\n\n  if (!updates) {\n    updates = context.updates = this._computeUpdates(context.flowNodeShapes, context.laneShapes);\n  }\n\n\n  updates.forEach(function(update) {\n\n    var flowNode = update.flowNode,\n        lanes = flowNode.get(LANES_ATTR);\n\n    // unwire old\n    update.remove.forEach(function(oldLane) {\n      collectionRemove(lanes, oldLane);\n      collectionRemove(oldLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n\n    // wire new\n    update.add.forEach(function(newLane) {\n      collectionAdd(lanes, newLane);\n      collectionAdd(newLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n  });\n\n  // TODO(nikku): return changed elements\n  // return [ ... ];\n\n  return [];\n};\n\n\nUpdateFlowNodeRefsHandler.prototype.revert = function(context) {\n\n  var updates = context.updates;\n\n  updates.forEach(function(update) {\n\n    var flowNode = update.flowNode,\n        lanes = flowNode.get(LANES_ATTR);\n\n    // unwire new\n    update.add.forEach(function(newLane) {\n      collectionRemove(lanes, newLane);\n      collectionRemove(newLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n\n    // wire old\n    update.remove.forEach(function(oldLane) {\n      collectionAdd(lanes, oldLane);\n      collectionAdd(oldLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n  });\n\n  // TODO(nikku): return changed elements\n  // return [ ... ];\n\n  return [];\n};\n","/**\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\n *\n * @typedef {import('../../../model/Types').Moddle} Moddle\n */\n\n/**\n * @implements {CommandHandler}\n *\n * @param {Moddle} moddle\n */\nexport default function IdClaimHandler(moddle) {\n  this._moddle = moddle;\n}\n\nIdClaimHandler.$inject = [ 'moddle' ];\n\n\nIdClaimHandler.prototype.execute = function(context) {\n  var ids = this._moddle.ids,\n      id = context.id,\n      element = context.element,\n      claiming = context.claiming;\n\n  if (claiming) {\n    ids.claim(id, element);\n  } else {\n    ids.unclaim(id);\n  }\n\n  return [];\n};\n\n/**\n * Command revert implementation.\n */\nIdClaimHandler.prototype.revert = function(context) {\n  var ids = this._moddle.ids,\n      id = context.id,\n      element = context.element,\n      claiming = context.claiming;\n\n  if (claiming) {\n    ids.unclaim(id);\n  } else {\n    ids.claim(id, element);\n  }\n\n  return [];\n};\n\n","import {\r\n  assign,\r\n  forEach,\r\n  isString,\r\n  pick\r\n} from 'min-dash';\r\n\r\nimport {\r\n  getDi,\r\n  isAny\r\n} from '../../../util/ModelUtil';\r\n\r\nimport {\r\n  isLabel\r\n} from '../../../util/LabelUtil';\r\n\r\nimport { isConnection } from 'diagram-js/lib/util/ModelUtil';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/command/CommandHandler').default} CommandHandler\r\n *\r\n * @typedef {import('diagram-js/lib/command/CommandStack').default} CommandStack\r\n *\r\n * @typedef {import('../../../model/Types').ModdleElement} ModdleElement\r\n */\r\n\r\nvar DEFAULT_COLORS = {\r\n  fill: undefined,\r\n  stroke: undefined\r\n};\r\n\r\n/**\r\n * @implements {CommandHandler}\r\n *\r\n * @param {CommandStack} commandStack\r\n */\r\nexport default function SetColorHandler(commandStack) {\r\n  this._commandStack = commandStack;\r\n\r\n  this._normalizeColor = function(color) {\r\n\r\n    // Remove color for falsy values.\r\n    if (!color) {\r\n      return undefined;\r\n    }\r\n\r\n    if (isString(color)) {\r\n      var hexColor = colorToHex(color);\r\n\r\n      if (hexColor) {\r\n        return hexColor;\r\n      }\r\n    }\r\n\r\n    throw new Error(`invalid color value: ${ color }`);\r\n  };\r\n}\r\n\r\nSetColorHandler.$inject = [\r\n  'commandStack'\r\n];\r\n\r\n\r\nSetColorHandler.prototype.postExecute = function(context) {\r\n  var elements = context.elements,\r\n      colors = context.colors || DEFAULT_COLORS;\r\n\r\n  var self = this;\r\n\r\n  var di = {};\r\n\r\n  if ('fill' in colors) {\r\n    assign(di, {\r\n      'background-color': this._normalizeColor(colors.fill) });\r\n  }\r\n\r\n  if ('stroke' in colors) {\r\n    assign(di, {\r\n      'border-color': this._normalizeColor(colors.stroke) });\r\n  }\r\n\r\n  forEach(elements, function(element) {\r\n    var assignedDi = isConnection(element) ? pick(di, [ 'border-color' ]) : di,\r\n        elementDi = getDi(element);\r\n\r\n    // TODO @barmac: remove once we drop bpmn.io properties\r\n    ensureLegacySupport(assignedDi);\r\n\r\n    if (isLabel(element)) {\r\n\r\n      // set label colors as bpmndi:BPMNLabel#color\r\n      self._commandStack.execute('element.updateModdleProperties', {\r\n        element: element,\r\n        moddleElement: elementDi.label,\r\n        properties: {\r\n          color: di['border-color']\r\n        }\r\n      });\r\n    } else {\r\n\r\n      // ignore non-compliant di\r\n      if (!isAny(elementDi, [ 'bpmndi:BPMNEdge', 'bpmndi:BPMNShape' ])) {\r\n        return;\r\n      }\r\n\r\n      // set colors bpmndi:BPMNEdge or bpmndi:BPMNShape\r\n      self._commandStack.execute('element.updateProperties', {\r\n        element: element,\r\n        properties: {\r\n          di: assignedDi\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n};\r\n\r\n/**\r\n * Convert color from rgb(a)/hsl to hex. Returns `null` for unknown color names\r\n * and for colors with alpha less than 1.0. This depends on `<canvas>`\r\n * serialization of the `context.fillStyle`.\r\n * Cf. https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-fillstyle\r\n *\r\n * @example\r\n *\r\n * ```javascript\r\n * colorToHex('fuchsia'); // \"#ff00ff\"\r\n *\r\n * colorToHex('rgba(1, 2, 3, 0.4)'); // null\r\n * ```\r\n *\r\n * @param {string} color\r\n *\r\n * @return {string|null}\r\n */\r\nfunction colorToHex(color) {\r\n  var context = document.createElement('canvas').getContext('2d');\r\n\r\n  // (0) Start with transparent to account for browser default values.\r\n  context.fillStyle = 'transparent';\r\n\r\n  // (1) Assign color so that it's serialized.\r\n  context.fillStyle = color;\r\n\r\n  // (2) Return null for non-hex serialization result.\r\n  return /^#[0-9a-fA-F]{6}$/.test(context.fillStyle) ? context.fillStyle : null;\r\n}\r\n\r\n/**\r\n * Add legacy properties if required.\r\n *\r\n * @param {ModdleElement} di\r\n */\r\nfunction ensureLegacySupport(di) {\r\n  if ('border-color' in di) {\r\n    di.stroke = di['border-color'];\r\n  }\r\n\r\n  if ('background-color' in di) {\r\n    di.fill = di['background-color'];\r\n  }\r\n}\r\n","import {\n  setLabel,\n  getLabel\n} from '../../../util/LabelUtil';\n\nimport {\n  getExternalLabelMid,\n  isLabelExternal,\n  hasExternalLabel,\n  isLabel\n} from '../../../util/LabelUtil';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\nvar NULL_DIMENSIONS = {\n  width: 0,\n  height: 0\n};\n\n/**\n * @typedef {import('../../modeling/Modeling').default} Modeling\n * @typedef {import('../../../draw/TextRenderer').default} TextRenderer\n * @typedef {import('../../modeling/BpmnFactory').default} BpmnFactory\n *\n * @typedef {import('../../../model/Types').Element} Element\n */\n\n/**\n * A handler that updates the text of a BPMN element.\n *\n * @param {Modeling} modeling\n * @param {TextRenderer} textRenderer\n * @param {BpmnFactory} bpmnFactory\n */\nexport default function UpdateLabelHandler(modeling, textRenderer, bpmnFactory) {\n\n  /**\n   * Set the label and return the changed elements.\n   *\n   * Element parameter can be label itself or connection (i.e. sequence flow).\n   *\n   * @param {Element} element\n   * @param {string} text\n   */\n  function setText(element, text) {\n\n    // external label if present\n    var label = element.label || element;\n\n    var labelTarget = element.labelTarget || element;\n\n    setLabel(label, text, labelTarget !== label);\n\n    return [ label, labelTarget ];\n  }\n\n  function preExecute(ctx) {\n    var element = ctx.element,\n        businessObject = element.businessObject,\n        newLabel = ctx.newLabel;\n\n    if (!isLabel(element)\n        && isLabelExternal(element)\n        && !hasExternalLabel(element)\n        && !isEmptyText(newLabel)) {\n\n      // create label\n      var paddingTop = 7;\n\n      var labelCenter = getExternalLabelMid(element);\n\n      labelCenter = {\n        x: labelCenter.x,\n        y: labelCenter.y + paddingTop\n      };\n\n      modeling.createLabel(element, labelCenter, {\n        id: businessObject.id + '_label',\n        businessObject: businessObject,\n        di: element.di\n      });\n    }\n  }\n\n  function execute(ctx) {\n    ctx.oldLabel = getLabel(ctx.element);\n    return setText(ctx.element, ctx.newLabel);\n  }\n\n  function revert(ctx) {\n    return setText(ctx.element, ctx.oldLabel);\n  }\n\n  function postExecute(ctx) {\n    var element = ctx.element,\n        label = element.label || element,\n        newLabel = ctx.newLabel,\n        newBounds = ctx.newBounds,\n        hints = ctx.hints || {};\n\n    // ignore internal labels for elements except text annotations\n    if (!isLabel(label) && !is(label, 'bpmn:TextAnnotation')) {\n      return;\n    }\n\n    if (isLabel(label) && isEmptyText(newLabel)) {\n\n      if (hints.removeShape !== false) {\n        modeling.removeShape(label, { unsetLabel: false });\n      }\n\n      return;\n    }\n\n    var text = getLabel(element);\n\n    // resize element based on label _or_ pre-defined bounds\n    if (typeof newBounds === 'undefined') {\n      newBounds = textRenderer.getExternalLabelBounds(label, text);\n    }\n\n    // setting newBounds to false or _null_ will\n    // disable the postExecute resize operation\n    if (newBounds) {\n      modeling.resizeShape(label, newBounds, NULL_DIMENSIONS);\n    }\n  }\n\n  // API\n\n  this.preExecute = preExecute;\n  this.execute = execute;\n  this.revert = revert;\n  this.postExecute = postExecute;\n}\n\nUpdateLabelHandler.$inject = [\n  'modeling',\n  'textRenderer',\n  'bpmnFactory'\n];\n\n\n// helpers //////////\n\nfunction isEmptyText(label) {\n  return !label || !label.trim();\n}","import inherits from 'inherits-browser';\n\nimport BaseModeling from 'diagram-js/lib/features/modeling/Modeling';\n\nimport UpdateModdlePropertiesHandler from './cmd/UpdateModdlePropertiesHandler';\nimport UpdatePropertiesHandler from './cmd/UpdatePropertiesHandler';\nimport UpdateCanvasRootHandler from './cmd/UpdateCanvasRootHandler';\nimport AddLaneHandler from './cmd/AddLaneHandler';\nimport SplitLaneHandler from './cmd/SplitLaneHandler';\nimport ResizeLaneHandler from './cmd/ResizeLaneHandler';\nimport UpdateFlowNodeRefsHandler from './cmd/UpdateFlowNodeRefsHandler';\nimport IdClaimHandler from './cmd/IdClaimHandler';\nimport SetColorHandler from './cmd/SetColorHandler';\n\nimport UpdateLabelHandler from '../label-editing/cmd/UpdateLabelHandler';\n\n/**\n * @typedef {import('../rules/BpmnRules').default} BpmnRules\n * @typedef {import('diagram-js/lib/command/CommandStack').default} CommandStack\n * @typedef {import('./ElementFactory').default} ElementFactory\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n *\n * @typedef {import('diagram-js/lib/features/modeling/Modeling').ModelingHints} ModelingHints\n *\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Label} Label\n * @typedef {import('../../model/Types').Parent} Parent\n * @typedef {import('../../model/Types').Root} Root\n * @typedef {import('../../model/Types').Shape} Shape\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n *\n * @typedef {import('diagram-js/lib/util/Types').Rect} Rect\n *\n * @typedef {import('../../util/Types').Colors} Colors\n *\n * @typedef { {\n *   removeShape?: boolean;\n * } } UpdateLabelHints\n */\n\n/**\n * The BPMN 2.0 modeling entry point.\n *\n * @template {Connection} [T=Connection]\n * @template {Element} [U=Element]\n * @template {Label} [V=Label]\n * @template {Parent} [W=Parent]\n * @template {Shape} [X=Shape]\n *\n * @extends {BaseModeling<T, U, V, W, X>}\n *\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {CommandStack} commandStack\n * @param {BpmnRules} bpmnRules\n */\nexport default function Modeling(\n    eventBus,\n    elementFactory,\n    commandStack,\n    bpmnRules\n) {\n\n  BaseModeling.call(this, eventBus, elementFactory, commandStack);\n\n  this._bpmnRules = bpmnRules;\n}\n\ninherits(Modeling, BaseModeling);\n\nModeling.$inject = [\n  'eventBus',\n  'elementFactory',\n  'commandStack',\n  'bpmnRules'\n];\n\n\nModeling.prototype.getHandlers = function() {\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\n\n  handlers['element.updateModdleProperties'] = UpdateModdlePropertiesHandler;\n  handlers['element.updateProperties'] = UpdatePropertiesHandler;\n  handlers['canvas.updateRoot'] = UpdateCanvasRootHandler;\n  handlers['lane.add'] = AddLaneHandler;\n  handlers['lane.resize'] = ResizeLaneHandler;\n  handlers['lane.split'] = SplitLaneHandler;\n  handlers['lane.updateRefs'] = UpdateFlowNodeRefsHandler;\n  handlers['id.updateClaim'] = IdClaimHandler;\n  handlers['element.setColor'] = SetColorHandler;\n  handlers['element.updateLabel'] = UpdateLabelHandler;\n\n  return handlers;\n};\n\n/**\n * Update an element's label.\n *\n * @param {Element} element The element.\n * @param {string} newLabel The new label.\n * @param {Rect} [newBounds] The optional bounds of the label.\n * @param {UpdateLabelHints} [hints] The optional hints.\n */\nModeling.prototype.updateLabel = function(element, newLabel, newBounds, hints) {\n  this._commandStack.execute('element.updateLabel', {\n    element: element,\n    newLabel: newLabel,\n    newBounds: newBounds,\n    hints: hints || {}\n  });\n};\n\n/**\n * @param {Element} source\n * @param {Element} target\n * @param {Partial<Connection>} [attrs]\n * @param {ModelingHints} [hints]\n *\n * @return {T}\n */\nModeling.prototype.connect = function(source, target, attrs, hints) {\n\n  var bpmnRules = this._bpmnRules;\n\n  if (!attrs) {\n    attrs = bpmnRules.canConnect(source, target);\n  }\n\n  if (!attrs) {\n    return;\n  }\n\n  return this.createConnection(source, target, attrs, source.parent, hints);\n};\n\n/**\n * Update a model element's properties.\n *\n * @param {Element} element The element.\n * @param {ModdleElement} moddleElement The model element.\n * @param {Object} properties The updated properties.\n */\nModeling.prototype.updateModdleProperties = function(element, moddleElement, properties) {\n  this._commandStack.execute('element.updateModdleProperties', {\n    element: element,\n    moddleElement: moddleElement,\n    properties: properties\n  });\n};\n\n/**\n * Update an element's properties.\n *\n * @param {Element} element The element.\n * @param {Object} properties The updated properties.\n */\nModeling.prototype.updateProperties = function(element, properties) {\n  this._commandStack.execute('element.updateProperties', {\n    element: element,\n    properties: properties\n  });\n};\n\n/**\n * Resize a lane.\n *\n * @param {Shape} laneShape The lane.\n * @param {Rect} newBounds The new bounds of the lane.\n * @param {boolean} [balanced] Wether to resize neighboring lanes.\n */\nModeling.prototype.resizeLane = function(laneShape, newBounds, balanced) {\n  this._commandStack.execute('lane.resize', {\n    shape: laneShape,\n    newBounds: newBounds,\n    balanced: balanced\n  });\n};\n\n/**\n * Add a lane.\n *\n * @param {Shape} targetLaneShape The shape to add the lane to.\n * @param {string} location The location.\n *\n * @return {Shape} The added lane.\n */\nModeling.prototype.addLane = function(targetLaneShape, location) {\n  var context = {\n    shape: targetLaneShape,\n    location: location\n  };\n\n  this._commandStack.execute('lane.add', context);\n\n  return context.newLane;\n};\n\n/**\n * Split a lane.\n *\n * @param {Shape} targetLane The lane to split.\n * @param {number} count The number of lanes to split the lane into. Must not\n * exceed the number of existing lanes.\n */\nModeling.prototype.splitLane = function(targetLane, count) {\n  this._commandStack.execute('lane.split', {\n    shape: targetLane,\n    count: count\n  });\n};\n\n/**\n * Turn a process into a collaboration.\n *\n * @return {Root} The root of the collaboration.\n */\nModeling.prototype.makeCollaboration = function() {\n\n  var collaborationElement = this._create('root', {\n    type: 'bpmn:Collaboration'\n  });\n\n  var context = {\n    newRoot: collaborationElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n\n  return collaborationElement;\n};\n\n/**\n * Transform a collaboration into a process.\n *\n * @return {Root} The root of the process.\n */\nModeling.prototype.makeProcess = function() {\n\n  var processElement = this._create('root', {\n    type: 'bpmn:Process'\n  });\n\n  var context = {\n    newRoot: processElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n\n  return processElement;\n};\n\n/**\n * Update the referenced lanes of each flow node.\n *\n * @param {Shape[]} flowNodeShapes The flow nodes to update.\n * @param {Shape[]} laneShapes The lanes.\n */\nModeling.prototype.updateLaneRefs = function(flowNodeShapes, laneShapes) {\n\n  this._commandStack.execute('lane.updateRefs', {\n    flowNodeShapes: flowNodeShapes,\n    laneShapes: laneShapes\n  });\n};\n\n/**\n * Claim an ID.\n *\n * @param {string} id The ID to claim.\n * @param {ModdleElement} moddleElement The model element the ID is claimed for.\n */\nModeling.prototype.claimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement,\n    claiming: true\n  });\n};\n\n/**\n * Unclaim an ID.\n *\n * @param {string} id The ID to unclaim.\n * @param {ModdleElement} moddleElement The model element the ID is claimed for.\n */\nModeling.prototype.unclaimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement\n  });\n};\n\n/**\n * Set the color(s) of one or many elements.\n *\n * @param {Element[]} elements The elements to set the color(s) for.\n * @param {Colors} colors The color(s) to set.\n */\nModeling.prototype.setColor = function(elements, colors) {\n  if (!elements.length) {\n    elements = [ elements ];\n  }\n\n  this._commandStack.execute('element.setColor', {\n    elements: elements,\n    colors: colors\n  });\n};\n","/**\n * @typedef {import('../core/Types').ElementLike} Element\n * @typedef {import('../core/Types').ConnectionLike} Connection\n *\n * @typedef {import('../util').Point} Point\n *\n * @typedef { {\n *   connectionStart?: Point;\n *   connectionEnd?: Point;\n *   source?: Element;\n *   target?: Element;\n * } } LayoutConnectionHints\n */\n\nimport {\n  getMid\n} from './LayoutUtil';\n\n\n/**\n * A base connection layouter implementation\n * that layouts the connection by directly connecting\n * mid(source) + mid(target).\n */\nexport default function BaseLayouter() {}\n\n\n/**\n * Return the new layouted waypoints for the given connection.\n *\n * The connection passed is still unchanged; you may figure out about\n * the new connection start / end via the layout hints provided.\n *\n * @param {Connection} connection\n * @param {LayoutConnectionHints} [hints]\n *\n * @return {Point[]} The waypoints of the laid out connection.\n */\nBaseLayouter.prototype.layoutConnection = function(connection, hints) {\n\n  hints = hints || {};\n\n  return [\n    hints.connectionStart || getMid(hints.source || connection.source),\n    hints.connectionEnd || getMid(hints.target || connection.target)\n  ];\n};\n","import {\n  assign,\n  find,\n  isArray,\n  without\n} from 'min-dash';\n\nimport {\n  getOrientation,\n  getMid\n} from './LayoutUtil';\n\nimport {\n  pointInRect,\n  pointDistance,\n  pointsAligned,\n  pointsOnLine\n} from '../util/Geometry';\n\n/**\n * @typedef {import('../util/Types').Point} Point\n * @typedef {import('../util/Types').Rect} Rect\n */\n\nvar MIN_SEGMENT_LENGTH = 20,\n    POINT_ORIENTATION_PADDING = 5;\n\nvar round = Math.round;\n\nvar INTERSECTION_THRESHOLD = 20,\n    ORIENTATION_THRESHOLD = {\n      'h:h': 20,\n      'v:v': 20,\n      'h:v': -10,\n      'v:h': -10\n    };\n\nfunction needsTurn(orientation, startDirection) {\n  return !{\n    t: /top/,\n    r: /right/,\n    b: /bottom/,\n    l: /left/,\n    h: /./,\n    v: /./\n  }[startDirection].test(orientation);\n}\n\nfunction canLayoutStraight(direction, targetOrientation) {\n  return {\n    t: /top/,\n    r: /right/,\n    b: /bottom/,\n    l: /left/,\n    h: /left|right/,\n    v: /top|bottom/\n  }[direction].test(targetOrientation);\n}\n\nfunction getSegmentBendpoints(a, b, directions) {\n  var orientation = getOrientation(b, a, POINT_ORIENTATION_PADDING);\n\n  var startDirection = directions.split(':')[0];\n\n  var xmid = round((b.x - a.x) / 2 + a.x),\n      ymid = round((b.y - a.y) / 2 + a.y);\n\n  var segmentEnd, segmentDirections;\n\n  var layoutStraight = canLayoutStraight(startDirection, orientation),\n      layoutHorizontal = /h|r|l/.test(startDirection),\n      layoutTurn = false;\n\n  var turnNextDirections = false;\n\n  if (layoutStraight) {\n    segmentEnd = layoutHorizontal ? { x: xmid, y: a.y } : { x: a.x, y: ymid };\n\n    segmentDirections = layoutHorizontal ? 'h:h' : 'v:v';\n  } else {\n    layoutTurn = needsTurn(orientation, startDirection);\n\n    segmentDirections = layoutHorizontal ? 'h:v' : 'v:h';\n\n    if (layoutTurn) {\n\n      if (layoutHorizontal) {\n        turnNextDirections = ymid === a.y;\n\n        segmentEnd = {\n          x: a.x + MIN_SEGMENT_LENGTH * (/l/.test(startDirection) ? -1 : 1),\n          y: turnNextDirections ? ymid + MIN_SEGMENT_LENGTH : ymid\n        };\n      } else {\n        turnNextDirections = xmid === a.x;\n\n        segmentEnd = {\n          x: turnNextDirections ? xmid + MIN_SEGMENT_LENGTH : xmid,\n          y: a.y + MIN_SEGMENT_LENGTH * (/t/.test(startDirection) ? -1 : 1)\n        };\n      }\n\n    } else {\n      segmentEnd = {\n        x: xmid,\n        y: ymid\n      };\n    }\n  }\n\n  return {\n    waypoints: getBendpoints(a, segmentEnd, segmentDirections).concat(segmentEnd),\n    directions:  segmentDirections,\n    turnNextDirections: turnNextDirections\n  };\n}\n\nfunction getStartSegment(a, b, directions) {\n  return getSegmentBendpoints(a, b, directions);\n}\n\nfunction getEndSegment(a, b, directions) {\n  var invertedSegment = getSegmentBendpoints(b, a, invertDirections(directions));\n\n  return {\n    waypoints: invertedSegment.waypoints.slice().reverse(),\n    directions: invertDirections(invertedSegment.directions),\n    turnNextDirections: invertedSegment.turnNextDirections\n  };\n}\n\nfunction getMidSegment(startSegment, endSegment) {\n\n  var startDirection = startSegment.directions.split(':')[1],\n      endDirection = endSegment.directions.split(':')[0];\n\n  if (startSegment.turnNextDirections) {\n    startDirection = startDirection == 'h' ? 'v' : 'h';\n  }\n\n  if (endSegment.turnNextDirections) {\n    endDirection = endDirection == 'h' ? 'v' : 'h';\n  }\n\n  var directions = startDirection + ':' + endDirection;\n\n  var bendpoints = getBendpoints(\n    startSegment.waypoints[startSegment.waypoints.length - 1],\n    endSegment.waypoints[0],\n    directions\n  );\n\n  return {\n    waypoints: bendpoints,\n    directions: directions\n  };\n}\n\nfunction invertDirections(directions) {\n  return directions.split(':').reverse().join(':');\n}\n\n/**\n * Handle simple layouts with maximum two bendpoints.\n */\nfunction getSimpleBendpoints(a, b, directions) {\n\n  var xmid = round((b.x - a.x) / 2 + a.x),\n      ymid = round((b.y - a.y) / 2 + a.y);\n\n  // one point, right or left from a\n  if (directions === 'h:v') {\n    return [ { x: b.x, y: a.y } ];\n  }\n\n  // one point, above or below a\n  if (directions === 'v:h') {\n    return [ { x: a.x, y: b.y } ];\n  }\n\n  // vertical segment between a and b\n  if (directions === 'h:h') {\n    return [\n      { x: xmid, y: a.y },\n      { x: xmid, y: b.y }\n    ];\n  }\n\n  // horizontal segment between a and b\n  if (directions === 'v:v') {\n    return [\n      { x: a.x, y: ymid },\n      { x: b.x, y: ymid }\n    ];\n  }\n\n  throw new Error('invalid directions: can only handle varians of [hv]:[hv]');\n}\n\n\n/**\n * Returns the mid points for a manhattan connection between two points.\n *\n * @example h:h (horizontal:horizontal)\n *\n * [a]----[x]\n *         |\n *        [x]----[b]\n *\n * @example h:v (horizontal:vertical)\n *\n * [a]----[x]\n *         |\n *        [b]\n *\n * @example h:r (horizontal:right)\n *\n * [a]----[x]\n *         |\n *    [b]-[x]\n *\n * @param {Point} a\n * @param {Point} b\n * @param {string} directions\n *\n * @return {Point[]}\n */\nfunction getBendpoints(a, b, directions) {\n  directions = directions || 'h:h';\n\n  if (!isValidDirections(directions)) {\n    throw new Error(\n      'unknown directions: <' + directions + '>: ' +\n      'must be specified as <start>:<end> ' +\n      'with start/end in { h,v,t,r,b,l }'\n    );\n  }\n\n  // compute explicit directions, involving trbl dockings\n  // using a three segmented layouting algorithm\n  if (isExplicitDirections(directions)) {\n    var startSegment = getStartSegment(a, b, directions),\n        endSegment = getEndSegment(a, b, directions),\n        midSegment = getMidSegment(startSegment, endSegment);\n\n    return [].concat(\n      startSegment.waypoints,\n      midSegment.waypoints,\n      endSegment.waypoints\n    );\n  }\n\n  // handle simple [hv]:[hv] cases that can be easily computed\n  return getSimpleBendpoints(a, b, directions);\n}\n\n/**\n * Create a connection between the two points according\n * to the manhattan layout (only horizontal and vertical) edges.\n *\n * @param {Point} a\n * @param {Point} b\n * @param {string} [directions='h:h'] Specifies manhattan directions for each\n * point as {direction}:{direction}. A direction for a point is either\n * `h` (horizontal) or `v` (vertical).\n *\n * @return {Point[]}\n */\nexport function connectPoints(a, b, directions) {\n\n  var points = getBendpoints(a, b, directions);\n\n  points.unshift(a);\n  points.push(b);\n\n  return withoutRedundantPoints(points);\n}\n\n\n/**\n * Connect two rectangles using a manhattan layouted connection.\n *\n * @param {Rect} source source rectangle\n * @param {Rect} target target rectangle\n * @param {Point} [start] source docking\n * @param {Point} [end] target docking\n * @param {Object} [hints]\n * @param {string} [hints.preserveDocking=source] preserve docking on selected side\n * @param {string[]} [hints.preferredLayouts]\n * @param {Point|boolean} [hints.connectionStart] whether the start changed\n * @param {Point|boolean} [hints.connectionEnd] whether the end changed\n *\n * @return {Point[]} connection points\n */\nexport function connectRectangles(source, target, start, end, hints) {\n\n  var preferredLayouts = hints && hints.preferredLayouts || [];\n\n  var preferredLayout = without(preferredLayouts, 'straight')[0] || 'h:h';\n\n  var threshold = ORIENTATION_THRESHOLD[preferredLayout] || 0;\n\n  var orientation = getOrientation(source, target, threshold);\n\n  var directions = getDirections(orientation, preferredLayout);\n\n  start = start || getMid(source);\n  end = end || getMid(target);\n\n  var directionSplit = directions.split(':');\n\n  // compute actual docking points for start / end\n  // this ensures we properly layout only parts of the\n  // connection that lies in between the two rectangles\n  var startDocking = getDockingPoint(start, source, directionSplit[0], invertOrientation(orientation)),\n      endDocking = getDockingPoint(end, target, directionSplit[1], orientation);\n\n  return connectPoints(startDocking, endDocking, directions);\n}\n\n\n/**\n * Repair the connection between two rectangles, of which one has been updated.\n *\n * @param {Rect} source\n * @param {Rect} target\n * @param {Point} [start]\n * @param {Point} [end]\n * @param {Point[]} [waypoints]\n * @param {Object} [hints]\n * @param {string[]} [hints.preferredLayouts] The list of preferred layouts.\n * @param {boolean} [hints.connectionStart]\n * @param {boolean} [hints.connectionEnd]\n *\n * @return {Point[]} The waypoints of the repaired connection.\n */\nexport function repairConnection(source, target, start, end, waypoints, hints) {\n\n  if (isArray(start)) {\n    waypoints = start;\n    hints = end;\n\n    start = getMid(source);\n    end = getMid(target);\n  }\n\n  hints = assign({ preferredLayouts: [] }, hints);\n  waypoints = waypoints || [];\n\n  var preferredLayouts = hints.preferredLayouts,\n      preferStraight = preferredLayouts.indexOf('straight') !== -1,\n      repairedWaypoints;\n\n  // just layout non-existing or simple connections\n  // attempt to render straight lines, if required\n\n  // attempt to layout a straight line\n  repairedWaypoints = preferStraight && tryLayoutStraight(source, target, start, end, hints);\n\n  if (repairedWaypoints) {\n    return repairedWaypoints;\n  }\n\n  // try to layout from end\n  repairedWaypoints = hints.connectionEnd && tryRepairConnectionEnd(target, source, end, waypoints);\n\n  if (repairedWaypoints) {\n    return repairedWaypoints;\n  }\n\n  // try to layout from start\n  repairedWaypoints = hints.connectionStart && tryRepairConnectionStart(source, target, start, waypoints);\n\n  if (repairedWaypoints) {\n    return repairedWaypoints;\n  }\n\n  // or whether nothing seems to have changed\n  if (!hints.connectionStart && !hints.connectionEnd && waypoints && waypoints.length) {\n    return waypoints;\n  }\n\n  // simply reconnect if nothing else worked\n  return connectRectangles(source, target, start, end, hints);\n}\n\n\nfunction inRange(a, start, end) {\n  return a >= start && a <= end;\n}\n\nfunction isInRange(axis, a, b) {\n  var size = {\n    x: 'width',\n    y: 'height'\n  };\n\n  return inRange(a[axis], b[axis], b[axis] + b[size[axis]]);\n}\n\n/**\n * Lay out a straight connection.\n *\n * @param {Rect} source\n * @param {Rect} target\n * @param {Point} start\n * @param {Point} end\n * @param {Object} [hints]\n * @param {string} [hints.preserveDocking]\n *\n * @return {Point[]|null} The waypoints or null if layout isn't possible.\n */\nexport function tryLayoutStraight(source, target, start, end, hints) {\n  var axis = {},\n      primaryAxis,\n      orientation;\n\n  orientation = getOrientation(source, target);\n\n  // only layout a straight connection if shapes are\n  // horizontally or vertically aligned\n  if (!/^(top|bottom|left|right)$/.test(orientation)) {\n    return null;\n  }\n\n  if (/top|bottom/.test(orientation)) {\n    primaryAxis = 'x';\n  }\n\n  if (/left|right/.test(orientation)) {\n    primaryAxis = 'y';\n  }\n\n  if (hints.preserveDocking === 'target') {\n\n    if (!isInRange(primaryAxis, end, source)) {\n      return null;\n    }\n\n    axis[primaryAxis] = end[primaryAxis];\n\n    return [\n      {\n        x: axis.x !== undefined ? axis.x : start.x,\n        y: axis.y !== undefined ? axis.y : start.y,\n        original: {\n          x: axis.x !== undefined ? axis.x : start.x,\n          y: axis.y !== undefined ? axis.y : start.y\n        }\n      },\n      {\n        x: end.x,\n        y: end.y\n      }\n    ];\n\n  } else {\n\n    if (!isInRange(primaryAxis, start, target)) {\n      return null;\n    }\n\n    axis[primaryAxis] = start[primaryAxis];\n\n    return [\n      {\n        x: start.x,\n        y: start.y\n      },\n      {\n        x: axis.x !== undefined ? axis.x : end.x,\n        y: axis.y !== undefined ? axis.y : end.y,\n        original: {\n          x: axis.x !== undefined ? axis.x : end.x,\n          y: axis.y !== undefined ? axis.y : end.y\n        }\n      }\n    ];\n  }\n\n}\n\n/**\n * Repair a connection from start.\n *\n * @param {Rect} moved\n * @param {Rect} other\n * @param {Point} newDocking\n * @param {Point[]} points originalPoints from moved to other\n *\n * @return {Point[]|null} The waypoints of the repaired connection.\n */\nfunction tryRepairConnectionStart(moved, other, newDocking, points) {\n  return _tryRepairConnectionSide(moved, other, newDocking, points);\n}\n\n/**\n * Repair a connection from end.\n *\n * @param {Rect} moved\n * @param {Rect} other\n * @param {Point} newDocking\n * @param {Point[]} points originalPoints from moved to other\n *\n * @return {Point[]|null} The waypoints of the repaired connection.\n */\nfunction tryRepairConnectionEnd(moved, other, newDocking, points) {\n  var waypoints = points.slice().reverse();\n\n  waypoints = _tryRepairConnectionSide(moved, other, newDocking, waypoints);\n\n  return waypoints ? waypoints.reverse() : null;\n}\n\n/**\n * Repair a connection from one side that moved.\n *\n * @param {Rect} moved\n * @param {Rect} other\n * @param {Point} newDocking\n * @param {Point[]} points originalPoints from moved to other\n *\n * @return {Point[]} The waypoints of the repaired connection.\n */\nfunction _tryRepairConnectionSide(moved, other, newDocking, points) {\n\n  function needsRelayout(points) {\n    if (points.length < 3) {\n      return true;\n    }\n\n    if (points.length > 4) {\n      return false;\n    }\n\n    // relayout if two points overlap\n    // this is most likely due to\n    return !!find(points, function(p, idx) {\n      var q = points[idx - 1];\n\n      return q && pointDistance(p, q) < 3;\n    });\n  }\n\n  function repairBendpoint(candidate, oldPeer, newPeer) {\n\n    var alignment = pointsAligned(oldPeer, candidate);\n\n    switch (alignment) {\n    case 'v':\n\n      // repair horizontal alignment\n      return { x: newPeer.x, y: candidate.y };\n    case 'h':\n\n      // repair vertical alignment\n      return { x: candidate.x, y: newPeer.y };\n    }\n\n    return { x: candidate.x, y: candidate. y };\n  }\n\n  function removeOverlapping(points, a, b) {\n    var i;\n\n    for (i = points.length - 2; i !== 0; i--) {\n\n      // intersects (?) break, remove all bendpoints up to this one and relayout\n      if (pointInRect(points[i], a, INTERSECTION_THRESHOLD) ||\n          pointInRect(points[i], b, INTERSECTION_THRESHOLD)) {\n\n        // return sliced old connection\n        return points.slice(i);\n      }\n    }\n\n    return points;\n  }\n\n  // (0) only repair what has layoutable bendpoints\n\n  // (1) if only one bendpoint and on shape moved onto other shapes axis\n  //     (horizontally / vertically), relayout\n\n  if (needsRelayout(points)) {\n    return null;\n  }\n\n  var oldDocking = points[0],\n      newPoints = points.slice(),\n      slicedPoints;\n\n  // (2) repair only last line segment and only if it was layouted before\n\n  newPoints[0] = newDocking;\n  newPoints[1] = repairBendpoint(newPoints[1], oldDocking, newDocking);\n\n\n  // (3) if shape intersects with any bendpoint after repair,\n  //     remove all segments up to this bendpoint and repair from there\n  slicedPoints = removeOverlapping(newPoints, moved, other);\n\n  if (slicedPoints !== newPoints) {\n    newPoints = _tryRepairConnectionSide(moved, other, newDocking, slicedPoints);\n  }\n\n  // (4) do NOT repair if repaired bendpoints are aligned\n  if (newPoints && pointsAligned(newPoints)) {\n    return null;\n  }\n\n  return newPoints;\n}\n\n\n/**\n * Returns the manhattan directions connecting two rectangles\n * with the given orientation.\n *\n * Will always return the default layout, if it is specific\n * regarding sides already (trbl).\n *\n * @example\n *\n * ```javascript\n * getDirections('top'); // -> 'v:v'\n * getDirections('intersect'); // -> 't:t'\n *\n * getDirections('top-right', 'v:h'); // -> 'v:h'\n * getDirections('top-right', 'h:h'); // -> 'h:h'\n * ```\n *\n * @param {string} orientation\n * @param {string} defaultLayout\n *\n * @return {string}\n */\nfunction getDirections(orientation, defaultLayout) {\n\n  // don't override specific trbl directions\n  if (isExplicitDirections(defaultLayout)) {\n    return defaultLayout;\n  }\n\n  switch (orientation) {\n  case 'intersect':\n    return 't:t';\n\n  case 'top':\n  case 'bottom':\n    return 'v:v';\n\n  case 'left':\n  case 'right':\n    return 'h:h';\n\n  // 'top-left'\n  // 'top-right'\n  // 'bottom-left'\n  // 'bottom-right'\n  default:\n    return defaultLayout;\n  }\n}\n\nfunction isValidDirections(directions) {\n  return directions && /^h|v|t|r|b|l:h|v|t|r|b|l$/.test(directions);\n}\n\nfunction isExplicitDirections(directions) {\n  return directions && /t|r|b|l/.test(directions);\n}\n\nfunction invertOrientation(orientation) {\n  return {\n    'top': 'bottom',\n    'bottom': 'top',\n    'left': 'right',\n    'right': 'left',\n    'top-left': 'bottom-right',\n    'bottom-right': 'top-left',\n    'top-right': 'bottom-left',\n    'bottom-left': 'top-right',\n  }[orientation];\n}\n\nfunction getDockingPoint(point, rectangle, dockingDirection, targetOrientation) {\n\n  // ensure we end up with a specific docking direction\n  // based on the targetOrientation, if <h|v> is being passed\n\n  if (dockingDirection === 'h') {\n    dockingDirection = /left/.test(targetOrientation) ? 'l' : 'r';\n  }\n\n  if (dockingDirection === 'v') {\n    dockingDirection = /top/.test(targetOrientation) ? 't' : 'b';\n  }\n\n  if (dockingDirection === 't') {\n    return { original: point, x: point.x, y: rectangle.y };\n  }\n\n  if (dockingDirection === 'r') {\n    return { original: point, x: rectangle.x + rectangle.width, y: point.y };\n  }\n\n  if (dockingDirection === 'b') {\n    return { original: point, x: point.x, y: rectangle.y + rectangle.height };\n  }\n\n  if (dockingDirection === 'l') {\n    return { original: point, x: rectangle.x, y: point.y };\n  }\n\n  throw new Error('unexpected dockingDirection: <' + dockingDirection + '>');\n}\n\n\n/**\n * Return list of waypoints with redundant ones filtered out.\n *\n * @example\n *\n * Original points:\n *\n *   [x] ----- [x] ------ [x]\n *                         |\n *                        [x] ----- [x] - [x]\n *\n * Filtered:\n *\n *   [x] ---------------- [x]\n *                         |\n *                        [x] ----------- [x]\n *\n * @param {Point[]} waypoints\n *\n * @return {Point[]}\n */\nexport function withoutRedundantPoints(waypoints) {\n  return waypoints.reduce(function(points, p, idx) {\n\n    var previous = points[points.length - 1],\n        next = waypoints[idx + 1];\n\n    if (!pointsOnLine(previous, next, p, 0)) {\n      points.push(p);\n    }\n\n    return points;\n  }, []);\n}\n","import inherits from 'inherits-browser';\n\nimport {\n  assign\n} from 'min-dash';\n\nimport BaseLayouter from 'diagram-js/lib/layout/BaseLayouter';\n\nimport {\n  repairConnection,\n  withoutRedundantPoints\n} from 'diagram-js/lib/layout/ManhattanLayout';\n\nimport {\n  getMid,\n  getOrientation\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  isExpanded\n} from '../../util/DiUtil';\n\nimport { is } from '../../util/ModelUtil';\n\nimport { isDirectionHorizontal } from './util/ModelingUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n *\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n *\n * @typedef {import('../../model/Types').Connection} Connection\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('diagram-js/lib/layout/BaseLayouter').LayoutConnectionHints} LayoutConnectionHints\n *\n * @typedef { {\n *   source?: Element;\n *   target?: Element;\n *   waypoints?: Point[];\n *   connectionStart?: Point;\n *   connectionEnd?: Point;\n * } & LayoutConnectionHints } BpmnLayoutConnectionHints\n */\n\nvar ATTACH_ORIENTATION_PADDING = -10,\n    BOUNDARY_TO_HOST_THRESHOLD = 40;\n\n// layout all connection between flow elements h:h, except for\n// (1) outgoing of boundary events -> layout based on attach orientation and target orientation\n// (2) incoming/outgoing of gateways -> v:h for outgoing, h:v for incoming\n// (3) loops connect sides clockwise\nvar PREFERRED_LAYOUTS_HORIZONTAL = {\n  default: [ 'h:h' ],\n  fromGateway: [ 'v:h' ],\n  toGateway: [ 'h:v' ],\n  loop: {\n    fromTop: [ 't:r' ],\n    fromRight: [ 'r:b' ],\n    fromLeft: [ 'l:t' ],\n    fromBottom: [ 'b:l' ]\n  },\n  boundaryLoop: {\n    alternateHorizontalSide: 'b',\n    alternateVerticalSide: 'l',\n    default: 'v'\n  },\n  messageFlow: [ 'straight', 'v:v' ],\n  subProcess: [ 'straight', 'h:h' ],\n  isHorizontal: true\n};\n\n// for vertical layouts, switch h and v and loop counter-clockwise\nvar PREFERRED_LAYOUTS_VERTICAL = {\n  default: [ 'v:v' ],\n  fromGateway: [ 'h:v' ],\n  toGateway: [ 'v:h' ],\n  loop: {\n    fromTop: [ 't:l' ],\n    fromRight: [ 'r:t' ],\n    fromLeft: [ 'l:b' ],\n    fromBottom: [ 'b:r' ]\n  },\n  boundaryLoop: {\n    alternateHorizontalSide: 't',\n    alternateVerticalSide: 'r',\n    default: 'h'\n  },\n  messageFlow: [ 'straight', 'h:h' ],\n  subProcess: [ 'straight', 'v:v' ],\n  isHorizontal: false\n};\n\nvar oppositeOrientationMapping = {\n  'top': 'bottom',\n  'top-right': 'bottom-left',\n  'top-left': 'bottom-right',\n  'right': 'left',\n  'bottom': 'top',\n  'bottom-right': 'top-left',\n  'bottom-left': 'top-right',\n  'left': 'right'\n};\n\nvar orientationDirectionMapping = {\n  top: 't',\n  right: 'r',\n  bottom: 'b',\n  left: 'l'\n};\n\nexport default function BpmnLayouter(elementRegistry) {\n  this._elementRegistry = elementRegistry;\n}\n\ninherits(BpmnLayouter, BaseLayouter);\n\n/**\n * Returns waypoints of laid out connection.\n *\n * @param {Connection} connection\n * @param {BpmnLayoutConnectionHints} [hints]\n *\n * @return {Point[]}\n */\nBpmnLayouter.prototype.layoutConnection = function(connection, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  var source = hints.source || connection.source,\n      target = hints.target || connection.target,\n      waypoints = hints.waypoints || connection.waypoints,\n      connectionStart = hints.connectionStart,\n      connectionEnd = hints.connectionEnd,\n      elementRegistry = this._elementRegistry;\n\n  var manhattanOptions,\n      updatedWaypoints;\n\n  if (!connectionStart) {\n    connectionStart = getConnectionDocking(waypoints && waypoints[ 0 ], source);\n  }\n\n  if (!connectionEnd) {\n    connectionEnd = getConnectionDocking(waypoints && waypoints[ waypoints.length - 1 ], target);\n  }\n\n  if (is(connection, 'bpmn:Association') ||\n      is(connection, 'bpmn:DataAssociation')) {\n\n    if (waypoints && !isCompensationAssociation(source, target)) {\n      return [].concat([ connectionStart ], waypoints.slice(1, -1), [ connectionEnd ]);\n    }\n  }\n\n  var layout = isDirectionHorizontal(source, elementRegistry) ? PREFERRED_LAYOUTS_HORIZONTAL : PREFERRED_LAYOUTS_VERTICAL;\n\n  if (is(connection, 'bpmn:MessageFlow')) {\n    manhattanOptions = getMessageFlowManhattanOptions(source, target, layout);\n  } else if (is(connection, 'bpmn:SequenceFlow') || isCompensationAssociation(source, target)) {\n\n    if (source === target) {\n      manhattanOptions = {\n        preferredLayouts: getLoopPreferredLayout(source, connection, layout)\n      };\n    } else if (is(source, 'bpmn:BoundaryEvent')) {\n      manhattanOptions = {\n        preferredLayouts: getBoundaryEventPreferredLayouts(source, target, connectionEnd, layout)\n      };\n    } else if (isExpandedSubProcess(source) || isExpandedSubProcess(target)) {\n      manhattanOptions = {\n        preferredLayouts: layout.subProcess,\n        preserveDocking: getSubProcessPreserveDocking(source)\n      };\n    } else if (is(source, 'bpmn:Gateway')) {\n      manhattanOptions = {\n        preferredLayouts: layout.fromGateway\n      };\n    } else if (is(target, 'bpmn:Gateway')) {\n      manhattanOptions = {\n        preferredLayouts: layout.toGateway\n      };\n    } else {\n      manhattanOptions = {\n        preferredLayouts: layout.default\n      };\n    }\n  }\n\n  if (manhattanOptions) {\n    manhattanOptions = assign(manhattanOptions, hints);\n\n    updatedWaypoints = withoutRedundantPoints(repairConnection(\n      source,\n      target,\n      connectionStart,\n      connectionEnd,\n      waypoints,\n      manhattanOptions\n    ));\n  }\n\n  return updatedWaypoints || [ connectionStart, connectionEnd ];\n};\n\n\n// helpers //////////\n\nfunction getAttachOrientation(attachedElement) {\n  var hostElement = attachedElement.host;\n\n  return getOrientation(getMid(attachedElement), hostElement, ATTACH_ORIENTATION_PADDING);\n}\n\nfunction getMessageFlowManhattanOptions(source, target, layout) {\n  return {\n    preferredLayouts: layout.messageFlow,\n    preserveDocking: getMessageFlowPreserveDocking(source, target)\n  };\n}\n\nfunction getMessageFlowPreserveDocking(source, target) {\n\n  // (1) docking element connected to participant has precedence\n  if (is(target, 'bpmn:Participant')) {\n    return 'source';\n  }\n\n  if (is(source, 'bpmn:Participant')) {\n    return 'target';\n  }\n\n  // (2) docking element connected to expanded sub-process has precedence\n  if (isExpandedSubProcess(target)) {\n    return 'source';\n  }\n\n  if (isExpandedSubProcess(source)) {\n    return 'target';\n  }\n\n  // (3) docking event has precedence\n  if (is(target, 'bpmn:Event')) {\n    return 'target';\n  }\n\n  if (is(source, 'bpmn:Event')) {\n    return 'source';\n  }\n\n  return null;\n}\n\nfunction getSubProcessPreserveDocking(source) {\n  return isExpandedSubProcess(source) ? 'target' : 'source';\n}\n\nfunction getConnectionDocking(point, shape) {\n  return point ? (point.original || point) : getMid(shape);\n}\n\nfunction isCompensationAssociation(source, target) {\n  return is(target, 'bpmn:Activity') &&\n    is(source, 'bpmn:BoundaryEvent') &&\n    target.businessObject.isForCompensation;\n}\n\nfunction isExpandedSubProcess(element) {\n  return is(element, 'bpmn:SubProcess') && isExpanded(element);\n}\n\nfunction isSame(a, b) {\n  return a === b;\n}\n\nfunction isAnyOrientation(orientation, orientations) {\n  return orientations.indexOf(orientation) !== -1;\n}\n\nfunction getHorizontalOrientation(orientation) {\n  var matches = /right|left/.exec(orientation);\n\n  return matches && matches[0];\n}\n\nfunction getVerticalOrientation(orientation) {\n  var matches = /top|bottom/.exec(orientation);\n\n  return matches && matches[0];\n}\n\nfunction isOppositeOrientation(a, b) {\n  return oppositeOrientationMapping[a] === b;\n}\n\nfunction isOppositeHorizontalOrientation(a, b) {\n  var horizontalOrientation = getHorizontalOrientation(a);\n\n  var oppositeHorizontalOrientation = oppositeOrientationMapping[horizontalOrientation];\n\n  return b.indexOf(oppositeHorizontalOrientation) !== -1;\n}\n\nfunction isOppositeVerticalOrientation(a, b) {\n  var verticalOrientation = getVerticalOrientation(a);\n\n  var oppositeVerticalOrientation = oppositeOrientationMapping[verticalOrientation];\n\n  return b.indexOf(oppositeVerticalOrientation) !== -1;\n}\n\nfunction isHorizontalOrientation(orientation) {\n  return orientation === 'right' || orientation === 'left';\n}\n\nfunction getLoopPreferredLayout(source, connection, layout) {\n  var waypoints = connection.waypoints;\n\n  var orientation = waypoints && waypoints.length && getOrientation(waypoints[0], source);\n\n  if (orientation === 'top') {\n    return layout.loop.fromTop;\n  } else if (orientation === 'right') {\n    return layout.loop.fromRight;\n  } else if (orientation === 'left') {\n    return layout.loop.fromLeft;\n  }\n\n  return layout.loop.fromBottom;\n}\n\nfunction getBoundaryEventPreferredLayouts(source, target, end, layout) {\n  var sourceMid = getMid(source),\n      targetMid = getMid(target),\n      attachOrientation = getAttachOrientation(source),\n      sourceLayout,\n      targetLayout;\n\n  var isLoop = isSame(source.host, target);\n\n  var attachedToSide = isAnyOrientation(attachOrientation, [ 'top', 'right', 'bottom', 'left' ]);\n\n  var targetOrientation = getOrientation(targetMid, sourceMid, {\n    x: source.width / 2 + target.width / 2,\n    y: source.height / 2 + target.height / 2\n  });\n\n  if (isLoop) {\n    return getBoundaryEventLoopLayout(attachOrientation, attachedToSide, source, target, end, layout);\n  }\n\n  // source layout\n  sourceLayout = getBoundaryEventSourceLayout(attachOrientation, targetOrientation, attachedToSide, layout.isHorizontal);\n\n  // target layout\n  targetLayout = getBoundaryEventTargetLayout(attachOrientation, targetOrientation, attachedToSide, layout.isHorizontal);\n\n  return [ sourceLayout + ':' + targetLayout ];\n}\n\nfunction getBoundaryEventLoopLayout(attachOrientation, attachedToSide, source, target, end, layout) {\n  var orientation = attachedToSide ? attachOrientation : layout.isHorizontal ? getVerticalOrientation(attachOrientation) : getHorizontalOrientation(attachOrientation),\n      sourceLayout = orientationDirectionMapping[ orientation ],\n      targetLayout;\n\n  if (attachedToSide) {\n    if (isHorizontalOrientation(attachOrientation)) {\n      targetLayout = shouldConnectToSameSide('y', source, target, end) ? 'h' : layout.boundaryLoop.alternateHorizontalSide;\n    } else {\n      targetLayout = shouldConnectToSameSide('x', source, target, end) ? 'v' : layout.boundaryLoop.alternateVerticalSide;\n    }\n  } else {\n    targetLayout = layout.boundaryLoop.default;\n  }\n\n  return [ sourceLayout + ':' + targetLayout ];\n}\n\nfunction shouldConnectToSameSide(axis, source, target, end) {\n  var threshold = BOUNDARY_TO_HOST_THRESHOLD;\n\n  return !(\n    areCloseOnAxis(axis, end, target, threshold) ||\n    areCloseOnAxis(axis, end, {\n      x: target.x + target.width,\n      y: target.y + target.height\n    }, threshold) ||\n    areCloseOnAxis(axis, end, getMid(source), threshold)\n  );\n}\n\nfunction areCloseOnAxis(axis, a, b, threshold) {\n  return Math.abs(a[ axis ] - b[ axis ]) < threshold;\n}\n\nfunction getBoundaryEventSourceLayout(attachOrientation, targetOrientation, attachedToSide, isHorizontal) {\n\n  // attached to either top, right, bottom or left side\n  if (attachedToSide) {\n    return orientationDirectionMapping[ attachOrientation ];\n  }\n\n  // attached to either top-right, top-left, bottom-right or bottom-left corner\n\n  var verticalAttachOrientation = getVerticalOrientation(attachOrientation),\n      horizontalAttachOrientation = getHorizontalOrientation(attachOrientation),\n      verticalTargetOrientation = getVerticalOrientation(targetOrientation),\n      horizontalTargetOrientation = getHorizontalOrientation(targetOrientation);\n\n  if (isHorizontal) {\n\n    // same vertical or opposite horizontal orientation\n    if (\n      isSame(verticalAttachOrientation, verticalTargetOrientation) ||\n      isOppositeOrientation(horizontalAttachOrientation, horizontalTargetOrientation)\n    ) {\n      return orientationDirectionMapping[ verticalAttachOrientation ];\n    }\n  } else {\n\n    // same horizontal or opposite vertical orientation\n    if (\n      isSame(horizontalAttachOrientation, horizontalTargetOrientation) ||\n      isOppositeOrientation(verticalAttachOrientation, verticalTargetOrientation)\n    ) {\n      return orientationDirectionMapping[ horizontalAttachOrientation ];\n    }\n  }\n\n  // fallback\n  return orientationDirectionMapping[ isHorizontal ? horizontalAttachOrientation : verticalAttachOrientation ];\n}\n\nfunction getBoundaryEventTargetLayout(attachOrientation, targetOrientation, attachedToSide, isHorizontal) {\n\n  // attached to either top, right, bottom or left side\n  if (attachedToSide) {\n    if (isHorizontalOrientation(attachOrientation)) {\n\n      // orientation is right or left\n\n      // opposite horizontal orientation or same orientation\n      if (\n        isOppositeHorizontalOrientation(attachOrientation, targetOrientation) ||\n        isSame(attachOrientation, targetOrientation)\n      ) {\n        return 'h';\n      }\n\n      // fallback\n      return 'v';\n    } else {\n\n      // orientation is top or bottom\n\n      // opposite vertical orientation or same orientation\n      if (\n        isOppositeVerticalOrientation(attachOrientation, targetOrientation) ||\n        isSame(attachOrientation, targetOrientation)\n      ) {\n        return 'v';\n      }\n\n      // fallback\n      return 'h';\n    }\n  }\n\n  // attached to either top-right, top-left, bottom-right or bottom-left corner\n  // and orientation is same on the counter-axis\n\n  if (isHorizontal) {\n    if (isSame(getVerticalOrientation(attachOrientation), getVerticalOrientation(targetOrientation))) {\n      return 'h';\n    } else {\n      return 'v';\n    }\n  } else {\n    if (isSame(getHorizontalOrientation(attachOrientation), getHorizontalOrientation(targetOrientation))) {\n      return 'v';\n    } else {\n      return 'h';\n    }\n  }\n}\n\nBpmnLayouter.$inject = [ 'elementRegistry' ];\n","import {\n  assign\n} from 'min-dash';\n\nimport {\n  getElementLineIntersection\n} from './LayoutUtil';\n\n/**\n * @typedef {import('../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../core/GraphicsFactory').default} GraphicsFactory\n */\n\nfunction dockingToPoint(docking) {\n\n  // use the dockings actual point and\n  // retain the original docking\n  return assign({ original: docking.point.original || docking.point }, docking.actual);\n}\n\n\n/**\n * A {@link ConnectionDocking} that crops connection waypoints based on\n * the path(s) of the connection source and target.\n *\n * @param {ElementRegistry} elementRegistry\n * @param {GraphicsFactory} graphicsFactory\n */\nexport default function CroppingConnectionDocking(elementRegistry, graphicsFactory) {\n  this._elementRegistry = elementRegistry;\n  this._graphicsFactory = graphicsFactory;\n}\n\nCroppingConnectionDocking.$inject = [ 'elementRegistry', 'graphicsFactory' ];\n\n\n/**\n * @inheritDoc ConnectionDocking#getCroppedWaypoints\n */\nCroppingConnectionDocking.prototype.getCroppedWaypoints = function(connection, source, target) {\n\n  source = source || connection.source;\n  target = target || connection.target;\n\n  var sourceDocking = this.getDockingPoint(connection, source, true),\n      targetDocking = this.getDockingPoint(connection, target);\n\n  var croppedWaypoints = connection.waypoints.slice(sourceDocking.idx + 1, targetDocking.idx);\n\n  croppedWaypoints.unshift(dockingToPoint(sourceDocking));\n  croppedWaypoints.push(dockingToPoint(targetDocking));\n\n  return croppedWaypoints;\n};\n\n/**\n * Return the connection docking point on the specified shape\n *\n * @inheritDoc ConnectionDocking#getDockingPoint\n */\nCroppingConnectionDocking.prototype.getDockingPoint = function(connection, shape, dockStart) {\n\n  var waypoints = connection.waypoints,\n      dockingIdx,\n      dockingPoint,\n      croppedPoint;\n\n  dockingIdx = dockStart ? 0 : waypoints.length - 1;\n  dockingPoint = waypoints[dockingIdx];\n\n  croppedPoint = this._getIntersection(shape, connection, dockStart);\n\n  return {\n    point: dockingPoint,\n    actual: croppedPoint || dockingPoint,\n    idx: dockingIdx\n  };\n};\n\n\n// helpers //////////////////////\n\nCroppingConnectionDocking.prototype._getIntersection = function(shape, connection, takeFirst) {\n\n  var shapePath = this._getShapePath(shape),\n      connectionPath = this._getConnectionPath(connection);\n\n  return getElementLineIntersection(shapePath, connectionPath, takeFirst);\n};\n\nCroppingConnectionDocking.prototype._getConnectionPath = function(connection) {\n  return this._graphicsFactory.getConnectionPath(connection);\n};\n\nCroppingConnectionDocking.prototype._getShapePath = function(shape) {\n  return this._graphicsFactory.getShapePath(shape);\n};\n\nCroppingConnectionDocking.prototype._getGfx = function(element) {\n  return this._elementRegistry.getGraphics(element);\n};\n","import BehaviorModule from './behavior';\nimport RulesModule from '../rules';\nimport DiOrderingModule from '../di-ordering';\nimport OrderingModule from '../ordering';\nimport ReplaceModule from '../replace';\nimport SpaceToolModule from '../space-tool';\n\nimport CommandModule from 'diagram-js/lib/command';\nimport LabelSupportModule from 'diagram-js/lib/features/label-support';\nimport AttachSupportModule from 'diagram-js/lib/features/attach-support';\nimport SelectionModule from 'diagram-js/lib/features/selection';\nimport ChangeSupportModule from 'diagram-js/lib/features/change-support';\n\nimport BpmnFactory from './BpmnFactory';\nimport BpmnUpdater from './BpmnUpdater';\nimport ElementFactory from './ElementFactory';\nimport Modeling from './Modeling';\nimport BpmnLayouter from './BpmnLayouter';\nimport CroppingConnectionDocking from 'diagram-js/lib/layout/CroppingConnectionDocking';\n\n\nexport default {\n  __init__: [\n    'modeling',\n    'bpmnUpdater'\n  ],\n  __depends__: [\n    BehaviorModule,\n    RulesModule,\n    DiOrderingModule,\n    OrderingModule,\n    ReplaceModule,\n    CommandModule,\n    LabelSupportModule,\n    AttachSupportModule,\n    SelectionModule,\n    ChangeSupportModule,\n    SpaceToolModule\n  ],\n  bpmnFactory: [ 'type', BpmnFactory ],\n  bpmnUpdater: [ 'type', BpmnUpdater ],\n  elementFactory: [ 'type', ElementFactory ],\n  modeling: [ 'type', Modeling ],\n  layouter: [ 'type', BpmnLayouter ],\n  connectionDocking: [ 'type', CroppingConnectionDocking ]\n};","import {\n  assign,\n  isNil\n} from 'min-dash';\n\nconst round = Math.round;\n\n/**\n * @typedef {import('diagram-js/lib/features/complex-preview/ComplexPreview').default} ComplexPreview\n * @typedef {import('diagram-js/lib/layout/ConnectionDocking').default} ConnectionDocking\n * @typedef {import('../modeling/ElementFactory').default} ElementFactory\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../modeling/BpmnLayouter').default} BpmnLayouter\n * @typedef {import('diagram-js/lib/features/rules/Rules').default} Rules\n *\n * @typedef {import('../../model/Types').Shape} Shape\n */\n\n/**\n * A preview for appending.\n *\n * @param {ComplexPreview} complexPreview\n * @param {ConnectionDocking} connectionDocking\n * @param {ElementFactory} elementFactory\n * @param {EventBus} eventBus\n * @param {BpmnLayouter} layouter\n * @param {Rules} rules\n */\nexport default function AppendPreview(complexPreview, connectionDocking, elementFactory, eventBus, layouter, rules) {\n  this._complexPreview = complexPreview;\n  this._connectionDocking = connectionDocking;\n  this._elementFactory = elementFactory;\n  this._eventBus = eventBus;\n  this._layouter = layouter;\n  this._rules = rules;\n}\n\n/**\n * Create a preview of appending a shape of the given type to the given source.\n *\n * @param {Shape} source\n * @param {string} type\n * @param {Partial<Shape>} options\n */\nAppendPreview.prototype.create = function(source, type, options) {\n  const complexPreview = this._complexPreview,\n        connectionDocking = this._connectionDocking,\n        elementFactory = this._elementFactory,\n        eventBus = this._eventBus,\n        layouter = this._layouter,\n        rules = this._rules;\n\n  const shape = elementFactory.createShape(assign({ type }, options));\n\n  const position = eventBus.fire('autoPlace', {\n    source,\n    shape\n  });\n\n  if (!position) {\n    return;\n  }\n\n  assign(shape, {\n    x: position.x - round(shape.width / 2),\n    y: position.y - round(shape.height / 2)\n  });\n\n  const connectionCreateAllowed = rules.allowed('connection.create', {\n    source,\n    target: shape,\n    hints: {\n      targetParent: source.parent\n    }\n  });\n\n  let connection = null;\n\n  if (connectionCreateAllowed) {\n    connection = elementFactory.createConnection(connectionCreateAllowed);\n\n    connection.waypoints = layouter.layoutConnection(connection, {\n      source,\n      target: shape\n    });\n\n    connection.waypoints = connectionDocking.getCroppedWaypoints(connection, source, shape);\n  }\n\n  complexPreview.create({\n    created: [\n      shape,\n      connection\n    ].filter((element) => !isNil(element))\n  });\n};\n\nAppendPreview.prototype.cleanUp = function() {\n  this._complexPreview.cleanUp();\n};\n\nAppendPreview.$inject = [\n  'complexPreview',\n  'connectionDocking',\n  'elementFactory',\n  'eventBus',\n  'layouter',\n  'rules'\n];","import AutoPlaceModule from '../auto-place';\nimport ComplexPreviewModule from 'diagram-js/lib/features/complex-preview';\nimport ModelingModule from '../modeling';\n\nimport AppendPreview from './AppendPreview';\n\nexport default {\n  __depends__: [\n    AutoPlaceModule,\n    ComplexPreviewModule,\n    ModelingModule\n  ],\n  __init__: [ 'appendPreview' ],\n  appendPreview: [ 'type', AppendPreview ]\n};\n","import {\n  assign,\n  bind,\n  pick\n} from 'min-dash';\n\nimport {\n  domify,\n  query as domQuery,\n  event as domEvent,\n  remove as domRemove\n} from 'min-dom';\n\nvar min = Math.min,\n    max = Math.max;\n\nfunction preventDefault(e) {\n  e.preventDefault();\n}\n\nfunction stopPropagation(e) {\n  e.stopPropagation();\n}\n\nfunction isTextNode(node) {\n  return node.nodeType === Node.TEXT_NODE;\n}\n\nfunction toArray(nodeList) {\n  return [].slice.call(nodeList);\n}\n\n/**\n * Initializes a container for a content editable div.\n *\n * Structure:\n *\n * container\n *   parent\n *     content\n *     resize-handle\n *\n * @param {object} options\n * @param {DOMElement} options.container The DOM element to append the contentContainer to\n * @param {Function} options.keyHandler Handler for key events\n * @param {Function} options.resizeHandler Handler for resize events\n */\nexport default function TextBox(options) {\n  this.container = options.container;\n\n  this.parent = domify(\n    '<div class=\"djs-direct-editing-parent\">' +\n      '<div class=\"djs-direct-editing-content\" contenteditable=\"true\"></div>' +\n    '</div>'\n  );\n\n  this.content = domQuery('[contenteditable]', this.parent);\n\n  this.keyHandler = options.keyHandler || function() {};\n  this.resizeHandler = options.resizeHandler || function() {};\n\n  this.autoResize = bind(this.autoResize, this);\n  this.handlePaste = bind(this.handlePaste, this);\n}\n\n\n/**\n * Create a text box with the given position, size, style and text content\n *\n * @param {Object} bounds\n * @param {Number} bounds.x absolute x position\n * @param {Number} bounds.y absolute y position\n * @param {Number} [bounds.width] fixed width value\n * @param {Number} [bounds.height] fixed height value\n * @param {Number} [bounds.maxWidth] maximum width value\n * @param {Number} [bounds.maxHeight] maximum height value\n * @param {Number} [bounds.minWidth] minimum width value\n * @param {Number} [bounds.minHeight] minimum height value\n * @param {Object} [style]\n * @param {String} value text content\n *\n * @return {DOMElement} The created content DOM element\n */\nTextBox.prototype.create = function(bounds, style, value, options) {\n  var self = this;\n\n  var parent = this.parent,\n      content = this.content,\n      container = this.container;\n\n  options = this.options = options || {};\n\n  style = this.style = style || {};\n\n  var parentStyle = pick(style, [\n    'width',\n    'height',\n    'maxWidth',\n    'maxHeight',\n    'minWidth',\n    'minHeight',\n    'left',\n    'top',\n    'backgroundColor',\n    'position',\n    'overflow',\n    'border',\n    'wordWrap',\n    'textAlign',\n    'outline',\n    'transform'\n  ]);\n\n  assign(parent.style, {\n    width: bounds.width + 'px',\n    height: bounds.height + 'px',\n    maxWidth: bounds.maxWidth + 'px',\n    maxHeight: bounds.maxHeight + 'px',\n    minWidth: bounds.minWidth + 'px',\n    minHeight: bounds.minHeight + 'px',\n    left: bounds.x + 'px',\n    top: bounds.y + 'px',\n    backgroundColor: '#ffffff',\n    position: 'absolute',\n    overflow: 'visible',\n    border: '1px solid #ccc',\n    boxSizing: 'border-box',\n    wordWrap: 'normal',\n    textAlign: 'center',\n    outline: 'none'\n  }, parentStyle);\n\n  var contentStyle = pick(style, [\n    'fontFamily',\n    'fontSize',\n    'fontWeight',\n    'lineHeight',\n    'padding',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft'\n  ]);\n\n  assign(content.style, {\n    boxSizing: 'border-box',\n    width: '100%',\n    outline: 'none',\n    wordWrap: 'break-word'\n  }, contentStyle);\n\n  if (options.centerVertically) {\n    assign(content.style, {\n      position: 'absolute',\n      top: '50%',\n      transform: 'translate(0, -50%)'\n    }, contentStyle);\n  }\n\n  content.innerText = value;\n\n  domEvent.bind(content, 'keydown', this.keyHandler);\n  domEvent.bind(content, 'mousedown', stopPropagation);\n  domEvent.bind(content, 'paste', self.handlePaste);\n\n  if (options.autoResize) {\n    domEvent.bind(content, 'input', this.autoResize);\n  }\n\n  if (options.resizable) {\n    this.resizable(style);\n  }\n\n  container.appendChild(parent);\n\n  // set selection to end of text\n  this.setSelection(content.lastChild, content.lastChild && content.lastChild.length);\n\n  return parent;\n};\n\n/**\n * Intercept paste events to remove formatting from pasted text.\n */\nTextBox.prototype.handlePaste = function(e) {\n  var options = this.options,\n      style = this.style;\n\n  e.preventDefault();\n\n  var text;\n\n  if (e.clipboardData) {\n\n    // Chrome, Firefox, Safari\n    text = e.clipboardData.getData('text/plain');\n  } else {\n\n    // Internet Explorer\n    text = window.clipboardData.getData('Text');\n  }\n\n  this.insertText(text);\n\n  if (options.autoResize) {\n    var hasResized = this.autoResize(style);\n\n    if (hasResized) {\n      this.resizeHandler(hasResized);\n    }\n  }\n};\n\nTextBox.prototype.insertText = function(text) {\n  text = normalizeEndOfLineSequences(text);\n\n  // insertText command not supported by Internet Explorer\n  var success = document.execCommand('insertText', false, text);\n\n  if (success) {\n    return;\n  }\n\n  this._insertTextIE(text);\n};\n\nTextBox.prototype._insertTextIE = function(text) {\n\n  // Internet Explorer\n  var range = this.getSelection(),\n      startContainer = range.startContainer,\n      endContainer = range.endContainer,\n      startOffset = range.startOffset,\n      endOffset = range.endOffset,\n      commonAncestorContainer = range.commonAncestorContainer;\n\n  var childNodesArray = toArray(commonAncestorContainer.childNodes);\n\n  var container,\n      offset;\n\n  if (isTextNode(commonAncestorContainer)) {\n    var containerTextContent = startContainer.textContent;\n\n    startContainer.textContent =\n      containerTextContent.substring(0, startOffset)\n      + text\n      + containerTextContent.substring(endOffset);\n\n    container = startContainer;\n    offset = startOffset + text.length;\n\n  } else if (startContainer === this.content && endContainer === this.content) {\n    var textNode = document.createTextNode(text);\n\n    this.content.insertBefore(textNode, childNodesArray[startOffset]);\n\n    container = textNode;\n    offset = textNode.textContent.length;\n  } else {\n    var startContainerChildIndex = childNodesArray.indexOf(startContainer),\n        endContainerChildIndex = childNodesArray.indexOf(endContainer);\n\n    childNodesArray.forEach(function(childNode, index) {\n\n      if (index === startContainerChildIndex) {\n        childNode.textContent =\n          startContainer.textContent.substring(0, startOffset) +\n          text +\n          endContainer.textContent.substring(endOffset);\n      } else if (index > startContainerChildIndex && index <= endContainerChildIndex) {\n        domRemove(childNode);\n      }\n    });\n\n    container = startContainer;\n    offset = startOffset + text.length;\n  }\n\n  if (container && offset !== undefined) {\n\n    // is necessary in Internet Explorer\n    setTimeout(function() {\n      self.setSelection(container, offset);\n    });\n  }\n};\n\n/**\n * Automatically resize element vertically to fit its content.\n */\nTextBox.prototype.autoResize = function() {\n  var parent = this.parent,\n      content = this.content;\n\n  var fontSize = parseInt(this.style.fontSize) || 12;\n\n  if (content.scrollHeight > parent.offsetHeight ||\n      content.scrollHeight < parent.offsetHeight - fontSize) {\n    var bounds = parent.getBoundingClientRect();\n\n    var height = content.scrollHeight;\n    parent.style.height = height + 'px';\n\n    this.resizeHandler({\n      width: bounds.width,\n      height: bounds.height,\n      dx: 0,\n      dy: height - bounds.height\n    });\n  }\n};\n\n/**\n * Make an element resizable by adding a resize handle.\n */\nTextBox.prototype.resizable = function() {\n  var self = this;\n\n  var parent = this.parent,\n      resizeHandle = this.resizeHandle;\n\n  var minWidth = parseInt(this.style.minWidth) || 0,\n      minHeight = parseInt(this.style.minHeight) || 0,\n      maxWidth = parseInt(this.style.maxWidth) || Infinity,\n      maxHeight = parseInt(this.style.maxHeight) || Infinity;\n\n  if (!resizeHandle) {\n    resizeHandle = this.resizeHandle = domify(\n      '<div class=\"djs-direct-editing-resize-handle\"></div>'\n    );\n\n    var startX, startY, startWidth, startHeight;\n\n    var onMouseDown = function(e) {\n      preventDefault(e);\n      stopPropagation(e);\n\n      startX = e.clientX;\n      startY = e.clientY;\n\n      var bounds = parent.getBoundingClientRect();\n\n      startWidth = bounds.width;\n      startHeight = bounds.height;\n\n      domEvent.bind(document, 'mousemove', onMouseMove);\n      domEvent.bind(document, 'mouseup', onMouseUp);\n    };\n\n    var onMouseMove = function(e) {\n      preventDefault(e);\n      stopPropagation(e);\n\n      var newWidth = min(max(startWidth + e.clientX - startX, minWidth), maxWidth);\n      var newHeight = min(max(startHeight + e.clientY - startY, minHeight), maxHeight);\n\n      parent.style.width = newWidth + 'px';\n      parent.style.height = newHeight + 'px';\n\n      self.resizeHandler({\n        width: startWidth,\n        height: startHeight,\n        dx: e.clientX - startX,\n        dy: e.clientY - startY\n      });\n    };\n\n    var onMouseUp = function(e) {\n      preventDefault(e);\n      stopPropagation(e);\n\n      domEvent.unbind(document,'mousemove', onMouseMove, false);\n      domEvent.unbind(document, 'mouseup', onMouseUp, false);\n    };\n\n    domEvent.bind(resizeHandle, 'mousedown', onMouseDown);\n  }\n\n  assign(resizeHandle.style, {\n    position: 'absolute',\n    bottom: '0px',\n    right: '0px',\n    cursor: 'nwse-resize',\n    width: '0',\n    height: '0',\n    borderTop: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid transparent',\n    borderRight: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid #ccc',\n    borderBottom: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid #ccc',\n    borderLeft: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid transparent'\n  });\n\n  parent.appendChild(resizeHandle);\n};\n\n\n/**\n * Clear content and style of the textbox, unbind listeners and\n * reset CSS style.\n */\nTextBox.prototype.destroy = function() {\n  var parent = this.parent,\n      content = this.content,\n      resizeHandle = this.resizeHandle;\n\n  // clear content\n  content.innerText = '';\n\n  // clear styles\n  parent.removeAttribute('style');\n  content.removeAttribute('style');\n\n  domEvent.unbind(content, 'keydown', this.keyHandler);\n  domEvent.unbind(content, 'mousedown', stopPropagation);\n  domEvent.unbind(content, 'input', this.autoResize);\n  domEvent.unbind(content, 'paste', this.handlePaste);\n\n  if (resizeHandle) {\n    resizeHandle.removeAttribute('style');\n\n    domRemove(resizeHandle);\n  }\n\n  domRemove(parent);\n};\n\n\nTextBox.prototype.getValue = function() {\n  return this.content.innerText.trim();\n};\n\n\nTextBox.prototype.getSelection = function() {\n  var selection = window.getSelection(),\n      range = selection.getRangeAt(0);\n\n  return range;\n};\n\n\nTextBox.prototype.setSelection = function(container, offset) {\n  var range = document.createRange();\n\n  if (container === null) {\n    range.selectNodeContents(this.content);\n  } else {\n    range.setStart(container, offset);\n    range.setEnd(container, offset);\n  }\n\n  var selection = window.getSelection();\n\n  selection.removeAllRanges();\n  selection.addRange(range);\n};\n\n// helpers //////////\n\nfunction normalizeEndOfLineSequences(string) {\n  return string.replace(/\\r\\n|\\r|\\n/g, '\\n');\n}","import {\n  bind,\n  find\n} from 'min-dash';\n\nimport TextBox from './TextBox.js';\n\n\n/**\n * A direct editing component that allows users\n * to edit an elements text directly in the diagram\n *\n * @param {EventBus} eventBus the event bus\n * @param {Canvas} canvas the canvas\n */\nexport default function DirectEditing(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  this._providers = [];\n  this._textbox = new TextBox({\n    container: canvas.getContainer(),\n    keyHandler: bind(this._handleKey, this),\n    resizeHandler: bind(this._handleResize, this)\n  });\n}\n\nDirectEditing.$inject = [ 'eventBus', 'canvas' ];\n\n\n/**\n * Register a direct editing provider\n\n * @param {Object} provider the provider, must expose an #activate(element) method that returns\n *                          an activation context ({ bounds: {x, y, width, height }, text }) if\n *                          direct editing is available for the given element.\n *                          Additionally the provider must expose a #update(element, value) method\n *                          to receive direct editing updates.\n */\nDirectEditing.prototype.registerProvider = function(provider) {\n  this._providers.push(provider);\n};\n\n\n/**\n * Returns true if direct editing is currently active\n *\n * @param {djs.model.Base} [element]\n *\n * @return {boolean}\n */\nDirectEditing.prototype.isActive = function(element) {\n  return !!(this._active && (!element || this._active.element === element));\n};\n\n\n/**\n * Cancel direct editing, if it is currently active\n */\nDirectEditing.prototype.cancel = function() {\n  if (!this._active) {\n    return;\n  }\n\n  this._fire('cancel');\n  this.close();\n};\n\n\nDirectEditing.prototype._fire = function(event, context) {\n  this._eventBus.fire('directEditing.' + event, context || { active: this._active });\n};\n\nDirectEditing.prototype.close = function() {\n  this._textbox.destroy();\n\n  this._fire('deactivate');\n\n  this._active = null;\n\n  this.resizable = undefined;\n\n  // restoreFocus API is available from diagram-js@15.0.0\n  this._canvas.restoreFocus && this._canvas.restoreFocus();\n};\n\n\nDirectEditing.prototype.complete = function() {\n\n  var active = this._active;\n\n  if (!active) {\n    return;\n  }\n\n  var containerBounds,\n      previousBounds = active.context.bounds,\n      newBounds = this.$textbox.getBoundingClientRect(),\n      newText = this.getValue(),\n      previousText = active.context.text;\n\n  if (\n    newText !== previousText ||\n    newBounds.height !== previousBounds.height ||\n    newBounds.width !== previousBounds.width\n  ) {\n    containerBounds = this._textbox.container.getBoundingClientRect();\n\n    active.provider.update(active.element, newText, active.context.text, {\n      x: newBounds.left - containerBounds.left,\n      y: newBounds.top - containerBounds.top,\n      width: newBounds.width,\n      height: newBounds.height\n    });\n  }\n\n  this._fire('complete');\n\n  this.close();\n};\n\n\nDirectEditing.prototype.getValue = function() {\n  return this._textbox.getValue();\n};\n\n\nDirectEditing.prototype._handleKey = function(e) {\n\n  // stop bubble\n  e.stopPropagation();\n\n  var key = e.keyCode || e.charCode;\n\n  // ESC\n  if (key === 27) {\n    e.preventDefault();\n    return this.cancel();\n  }\n\n  // Enter\n  if (key === 13 && !e.shiftKey) {\n    e.preventDefault();\n    return this.complete();\n  }\n};\n\n\nDirectEditing.prototype._handleResize = function(event) {\n  this._fire('resize', event);\n};\n\n\n/**\n * Activate direct editing on the given element\n *\n * @param {Object} ElementDescriptor the descriptor for a shape or connection\n * @return {Boolean} true if the activation was possible\n */\nDirectEditing.prototype.activate = function(element) {\n  if (this.isActive()) {\n    this.cancel();\n  }\n\n  // the direct editing context\n  var context;\n\n  var provider = find(this._providers, function(p) {\n    return ((context = p.activate(element))) ? p : null;\n  });\n\n  // check if activation took place\n  if (context) {\n    this.$textbox = this._textbox.create(\n      context.bounds,\n      context.style,\n      context.text,\n      context.options\n    );\n\n    this._active = {\n      element: element,\n      context: context,\n      provider: provider\n    };\n\n    if (context.options && context.options.resizable) {\n      this.resizable = true;\n    }\n\n    this._fire('activate');\n  }\n\n  return !!context;\n};\n","import InteractionEventsModule from 'diagram-js/lib/features/interaction-events';\n\nimport DirectEditing from './DirectEditing.js';\n\nexport default {\n  __depends__: [\n    InteractionEventsModule\n  ],\n  __init__: [ 'directEditing' ],\n  directEditing: [ 'type', DirectEditing ]\n};","import {\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nimport {\n  isExpanded\n} from '../../../util/DiUtil';\n\n/**\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').PopupMenuTarget} PopupMenuTarget\n *\n * @typedef {(entry: PopupMenuTarget) => boolean} DifferentTypeValidator\n */\n\n/**\n * Returns true, if an element is from a different type\n * than a target definition. Takes into account the type,\n * event definition type and triggeredByEvent property.\n *\n * @param {Element} element\n *\n * @return {DifferentTypeValidator}\n */\nexport function isDifferentType(element) {\n\n  return function(entry) {\n    var target = entry.target;\n\n    var businessObject = getBusinessObject(element),\n        eventDefinition = businessObject.eventDefinitions && businessObject.eventDefinitions[0];\n\n    var isTypeEqual = businessObject.$type === target.type;\n\n    var isEventDefinitionEqual = (\n      (eventDefinition && eventDefinition.$type) === target.eventDefinitionType\n    );\n\n    var isTriggeredByEventEqual = (\n\n      // coherse to <false>\n      !!target.triggeredByEvent === !!businessObject.triggeredByEvent\n    );\n\n    var isExpandedEqual = (\n      target.isExpanded === undefined ||\n      target.isExpanded === isExpanded(element)\n    );\n\n    return !isTypeEqual || !isEventDefinitionEqual || !isTriggeredByEventEqual || !isExpandedEqual;\n  };\n}\n","/**\n * @typedef { () => string } LabelGetter\n *\n * @typedef { {\n *   label: string | LabelGetter;\n *   actionName: string;\n *   className: string;\n *   target?: {\n *     type: string;\n *     isExpanded?: boolean;\n *     isInterrupting?: boolean;\n *     triggeredByEvent?: boolean;\n *     cancelActivity?: boolean;\n *     eventDefinitionType?: string;\n *     eventDefinitionAttrs?: Record<string, any>\n *   };\n * } } ReplaceOption\n */\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var START_EVENT = [\n  {\n    label: 'Start event',\n    actionName: 'replace-with-none-start',\n    className: 'bpmn-icon-start-event-none',\n    target: {\n      type: 'bpmn:StartEvent'\n    }\n  },\n  {\n    label: 'Intermediate throw event',\n    actionName: 'replace-with-none-intermediate-throwing',\n    className: 'bpmn-icon-intermediate-event-none',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent'\n    }\n  },\n  {\n    label: 'End event',\n    actionName: 'replace-with-none-end',\n    className: 'bpmn-icon-end-event-none',\n    target: {\n      type: 'bpmn:EndEvent'\n    }\n  },\n  {\n    label: 'Message start event',\n    actionName: 'replace-with-message-start',\n    className: 'bpmn-icon-start-event-message',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Timer start event',\n    actionName: 'replace-with-timer-start',\n    className: 'bpmn-icon-start-event-timer',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition'\n    }\n  },\n  {\n    label: 'Conditional start event',\n    actionName: 'replace-with-conditional-start',\n    className: 'bpmn-icon-start-event-condition',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n    }\n  },\n  {\n    label: 'Signal start event',\n    actionName: 'replace-with-signal-start',\n    className: 'bpmn-icon-start-event-signal',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var START_EVENT_SUB_PROCESS = [\n  {\n    label: 'Start event',\n    actionName: 'replace-with-none-start',\n    className: 'bpmn-icon-start-event-none',\n    target: {\n      type: 'bpmn:StartEvent'\n    }\n  },\n  {\n    label: 'Intermediate throw event',\n    actionName: 'replace-with-none-intermediate-throwing',\n    className: 'bpmn-icon-intermediate-event-none',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent'\n    }\n  },\n  {\n    label: 'End event',\n    actionName: 'replace-with-none-end',\n    className: 'bpmn-icon-end-event-none',\n    target: {\n      type: 'bpmn:EndEvent'\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var INTERMEDIATE_EVENT = [\n  {\n    label: 'Start event',\n    actionName: 'replace-with-none-start',\n    className: 'bpmn-icon-start-event-none',\n    target: {\n      type: 'bpmn:StartEvent'\n    }\n  },\n  {\n    label: 'Intermediate throw event',\n    actionName: 'replace-with-none-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-none',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent'\n    }\n  },\n  {\n    label: 'End event',\n    actionName: 'replace-with-none-end',\n    className: 'bpmn-icon-end-event-none',\n    target: {\n      type: 'bpmn:EndEvent'\n    }\n  },\n  {\n    label: 'Message intermediate catch event',\n    actionName: 'replace-with-message-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-message',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Message intermediate throw event',\n    actionName: 'replace-with-message-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-message',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Timer intermediate catch event',\n    actionName: 'replace-with-timer-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-timer',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition'\n    }\n  },\n  {\n    label: 'Escalation intermediate throw event',\n    actionName: 'replace-with-escalation-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-escalation',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition'\n    }\n  },\n  {\n    label: 'Conditional intermediate catch event',\n    actionName: 'replace-with-conditional-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-condition',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n    }\n  },\n  {\n    label: 'Link intermediate catch event',\n    actionName: 'replace-with-link-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-link',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:LinkEventDefinition',\n      eventDefinitionAttrs: {\n        name: ''\n      }\n    }\n  },\n  {\n    label: 'Link intermediate throw event',\n    actionName: 'replace-with-link-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-link',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:LinkEventDefinition',\n      eventDefinitionAttrs: {\n        name: ''\n      }\n    }\n  },\n  {\n    label: 'Compensation intermediate throw event',\n    actionName: 'replace-with-compensation-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-compensation',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition'\n    }\n  },\n  {\n    label: 'Signal intermediate catch event',\n    actionName: 'replace-with-signal-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-signal',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  },\n  {\n    label: 'Signal intermediate throw event',\n    actionName: 'replace-with-signal-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-signal',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var END_EVENT = [\n  {\n    label: 'Start event',\n    actionName: 'replace-with-none-start',\n    className: 'bpmn-icon-start-event-none',\n    target: {\n      type: 'bpmn:StartEvent'\n    }\n  },\n  {\n    label: 'Intermediate throw event',\n    actionName: 'replace-with-none-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-none',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent'\n    }\n  },\n  {\n    label: 'End event',\n    actionName: 'replace-with-none-end',\n    className: 'bpmn-icon-end-event-none',\n    target: {\n      type: 'bpmn:EndEvent'\n    }\n  },\n  {\n    label: 'Message end event',\n    actionName: 'replace-with-message-end',\n    className: 'bpmn-icon-end-event-message',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Escalation end event',\n    actionName: 'replace-with-escalation-end',\n    className: 'bpmn-icon-end-event-escalation',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition'\n    }\n  },\n  {\n    label: 'Error end event',\n    actionName: 'replace-with-error-end',\n    className: 'bpmn-icon-end-event-error',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:ErrorEventDefinition'\n    }\n  },\n  {\n    label: 'Cancel end event',\n    actionName: 'replace-with-cancel-end',\n    className: 'bpmn-icon-end-event-cancel',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:CancelEventDefinition'\n    }\n  },\n  {\n    label: 'Compensation end event',\n    actionName: 'replace-with-compensation-end',\n    className: 'bpmn-icon-end-event-compensation',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition'\n    }\n  },\n  {\n    label: 'Signal end event',\n    actionName: 'replace-with-signal-end',\n    className: 'bpmn-icon-end-event-signal',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  },\n  {\n    label: 'Terminate end event',\n    actionName: 'replace-with-terminate-end',\n    className: 'bpmn-icon-end-event-terminate',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:TerminateEventDefinition'\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var GATEWAY = [\n  {\n    label: 'Exclusive gateway',\n    actionName: 'replace-with-exclusive-gateway',\n    className: 'bpmn-icon-gateway-xor',\n    target: {\n      type: 'bpmn:ExclusiveGateway'\n    }\n  },\n  {\n    label: 'Parallel gateway',\n    actionName: 'replace-with-parallel-gateway',\n    className: 'bpmn-icon-gateway-parallel',\n    target: {\n      type: 'bpmn:ParallelGateway'\n    }\n  },\n  {\n    label: 'Inclusive gateway',\n    actionName: 'replace-with-inclusive-gateway',\n    className: 'bpmn-icon-gateway-or',\n    target: {\n      type: 'bpmn:InclusiveGateway'\n    }\n  },\n  {\n    label: 'Complex gateway',\n    actionName: 'replace-with-complex-gateway',\n    className: 'bpmn-icon-gateway-complex',\n    target: {\n      type: 'bpmn:ComplexGateway'\n    }\n  },\n  {\n    label: 'Event-based gateway',\n    actionName: 'replace-with-event-based-gateway',\n    className: 'bpmn-icon-gateway-eventbased',\n    target: {\n      type: 'bpmn:EventBasedGateway',\n      instantiate: false,\n      eventGatewayType: 'Exclusive'\n    }\n  }\n\n  // Gateways deactivated until https://github.com/bpmn-io/bpmn-js/issues/194\n  // {\n  //   label: 'Event based instantiating Gateway',\n  //   actionName: 'replace-with-exclusive-event-based-gateway',\n  //   className: 'bpmn-icon-exclusive-event-based',\n  //   target: {\n  //     type: 'bpmn:EventBasedGateway'\n  //   },\n  //   options: {\n  //     businessObject: { instantiate: true, eventGatewayType: 'Exclusive' }\n  //   }\n  // },\n  // {\n  //   label: 'Parallel Event based instantiating Gateway',\n  //   actionName: 'replace-with-parallel-event-based-instantiate-gateway',\n  //   className: 'bpmn-icon-parallel-event-based-instantiate-gateway',\n  //   target: {\n  //     type: 'bpmn:EventBasedGateway'\n  //   },\n  //   options: {\n  //     businessObject: { instantiate: true, eventGatewayType: 'Parallel' }\n  //   }\n  // }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var SUBPROCESS_EXPANDED = [\n  {\n    label: 'Transaction',\n    actionName: 'replace-with-transaction',\n    className: 'bpmn-icon-transaction',\n    target: {\n      type: 'bpmn:Transaction',\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Event sub-process',\n    actionName: 'replace-with-event-subprocess',\n    className: 'bpmn-icon-event-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      triggeredByEvent: true,\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Sub-process (collapsed)',\n    actionName: 'replace-with-collapsed-subprocess',\n    className: 'bpmn-icon-subprocess-collapsed',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: false\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var TRANSACTION = [\n  {\n    label: 'Transaction',\n    actionName: 'replace-with-transaction',\n    className: 'bpmn-icon-transaction',\n    target: {\n      type: 'bpmn:Transaction',\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Sub-process',\n    actionName: 'replace-with-subprocess',\n    className: 'bpmn-icon-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Event sub-process',\n    actionName: 'replace-with-event-subprocess',\n    className: 'bpmn-icon-event-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      triggeredByEvent: true,\n      isExpanded: true\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var EVENT_SUB_PROCESS = TRANSACTION;\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var TASK = [\n  {\n    label: 'Task',\n    actionName: 'replace-with-task',\n    className: 'bpmn-icon-task',\n    target: {\n      type: 'bpmn:Task'\n    }\n  },\n  {\n    label: 'User task',\n    actionName: 'replace-with-user-task',\n    className: 'bpmn-icon-user',\n    target: {\n      type: 'bpmn:UserTask'\n    }\n  },\n  {\n    label: 'Service task',\n    actionName: 'replace-with-service-task',\n    className: 'bpmn-icon-service',\n    target: {\n      type: 'bpmn:ServiceTask'\n    }\n  },\n  {\n    label: 'Send task',\n    actionName: 'replace-with-send-task',\n    className: 'bpmn-icon-send',\n    target: {\n      type: 'bpmn:SendTask'\n    }\n  },\n  {\n    label: 'Receive task',\n    actionName: 'replace-with-receive-task',\n    className: 'bpmn-icon-receive',\n    target: {\n      type: 'bpmn:ReceiveTask'\n    }\n  },\n  {\n    label: 'Manual task',\n    actionName: 'replace-with-manual-task',\n    className: 'bpmn-icon-manual',\n    target: {\n      type: 'bpmn:ManualTask'\n    }\n  },\n  {\n    label: 'Business rule task',\n    actionName: 'replace-with-rule-task',\n    className: 'bpmn-icon-business-rule',\n    target: {\n      type: 'bpmn:BusinessRuleTask'\n    }\n  },\n  {\n    label: 'Script task',\n    actionName: 'replace-with-script-task',\n    className: 'bpmn-icon-script',\n    target: {\n      type: 'bpmn:ScriptTask'\n    }\n  },\n  {\n    label: 'Call activity',\n    actionName: 'replace-with-call-activity',\n    className: 'bpmn-icon-call-activity',\n    target: {\n      type: 'bpmn:CallActivity'\n    }\n  },\n  {\n    label: 'Sub-process (collapsed)',\n    actionName: 'replace-with-collapsed-subprocess',\n    className: 'bpmn-icon-subprocess-collapsed',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: false\n    }\n  },\n  {\n    label: 'Sub-process (expanded)',\n    actionName: 'replace-with-expanded-subprocess',\n    className: 'bpmn-icon-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: true\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var DATA_OBJECT_REFERENCE = [\n  {\n    label: 'Data store reference',\n    actionName: 'replace-with-data-store-reference',\n    className: 'bpmn-icon-data-store',\n    target: {\n      type: 'bpmn:DataStoreReference'\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var DATA_STORE_REFERENCE = [\n  {\n    label: 'Data object reference',\n    actionName: 'replace-with-data-object-reference',\n    className: 'bpmn-icon-data-object',\n    target: {\n      type: 'bpmn:DataObjectReference'\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var BOUNDARY_EVENT = [\n  {\n    label: 'Message boundary event',\n    actionName: 'replace-with-message-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-message',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Timer boundary event',\n    actionName: 'replace-with-timer-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-timer',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Escalation boundary event',\n    actionName: 'replace-with-escalation-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-escalation',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Conditional boundary event',\n    actionName: 'replace-with-conditional-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-condition',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Error boundary event',\n    actionName: 'replace-with-error-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-error',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:ErrorEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Cancel boundary event',\n    actionName: 'replace-with-cancel-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-cancel',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:CancelEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Signal boundary event',\n    actionName: 'replace-with-signal-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-signal',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Compensation boundary event',\n    actionName: 'replace-with-compensation-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-compensation',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition',\n      cancelActivity: true\n    }\n  },\n  {\n    label: 'Message boundary event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-message-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-message',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Timer boundary event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-timer-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-timer',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Escalation boundary event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-escalation-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-escalation',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Conditional boundary event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-conditional-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-condition',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Signal boundary event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-signal-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-signal',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition',\n      cancelActivity: false\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var EVENT_SUB_PROCESS_START_EVENT = [\n  {\n    label: 'Message start event',\n    actionName: 'replace-with-message-start',\n    className: 'bpmn-icon-start-event-message',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition',\n      isInterrupting: true\n    }\n  },\n  {\n    label: 'Timer start event',\n    actionName: 'replace-with-timer-start',\n    className: 'bpmn-icon-start-event-timer',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition',\n      isInterrupting: true\n    }\n  },\n  {\n    label: 'Conditional start event',\n    actionName: 'replace-with-conditional-start',\n    className: 'bpmn-icon-start-event-condition',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition',\n      isInterrupting: true\n    }\n  },\n  {\n    label: 'Signal start event',\n    actionName: 'replace-with-signal-start',\n    className: 'bpmn-icon-start-event-signal',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition',\n      isInterrupting: true\n    }\n  },\n  {\n    label: 'Error start event',\n    actionName: 'replace-with-error-start',\n    className: 'bpmn-icon-start-event-error',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ErrorEventDefinition',\n      isInterrupting: true\n    }\n  },\n  {\n    label: 'Escalation start event',\n    actionName: 'replace-with-escalation-start',\n    className: 'bpmn-icon-start-event-escalation',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition',\n      isInterrupting: true\n    }\n  },\n  {\n    label: 'Compensation start event',\n    actionName: 'replace-with-compensation-start',\n    className: 'bpmn-icon-start-event-compensation',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition',\n      isInterrupting: true\n    }\n  },\n  {\n    label: 'Message start event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-message-start',\n    className: 'bpmn-icon-start-event-non-interrupting-message',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Timer start event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-timer-start',\n    className: 'bpmn-icon-start-event-non-interrupting-timer',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Conditional start event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-conditional-start',\n    className: 'bpmn-icon-start-event-non-interrupting-condition',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Signal start event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-signal-start',\n    className: 'bpmn-icon-start-event-non-interrupting-signal',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Escalation start event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-escalation-start',\n    className: 'bpmn-icon-start-event-non-interrupting-escalation',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition',\n      isInterrupting: false\n    }\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var SEQUENCE_FLOW = [\n  {\n    label: 'Sequence flow',\n    actionName: 'replace-with-sequence-flow',\n    className: 'bpmn-icon-connection'\n  },\n  {\n    label: 'Default flow',\n    actionName: 'replace-with-default-flow',\n    className: 'bpmn-icon-default-flow'\n  },\n  {\n    label: 'Conditional flow',\n    actionName: 'replace-with-conditional-flow',\n    className: 'bpmn-icon-conditional-flow'\n  }\n];\n\n/**\n * @type {ReplaceOption[]}\n */\nexport var PARTICIPANT = [\n  {\n    label: 'Expanded pool/participant',\n    actionName: 'replace-with-expanded-pool',\n    className: 'bpmn-icon-participant',\n    target: {\n      type: 'bpmn:Participant',\n      isExpanded: true\n    }\n  },\n  {\n    label: function(element) {\n      var label = 'Empty pool/participant';\n\n      if (element.children && element.children.length) {\n        label += ' (removes content)';\n      }\n\n      return label;\n    },\n    actionName: 'replace-with-collapsed-pool',\n\n    // TODO(@janstuemmel): maybe design new icon\n    className: 'bpmn-icon-lane',\n    target: {\n      type: 'bpmn:Participant',\n      isExpanded: false\n    }\n  }\n];\n","export default {\n  'start-event-non-interrupting': `\n  <svg viewBox=\"0 0 2048 2048\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g transform=\"translate(0 995.64)\">\n      <path d=\"m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z\" fill=\"none\" stroke=\"currentColor\" stroke-dasharray=\"418.310422, 361.2328165\" stroke-linecap=\"round\" stroke-width=\"100\"/>\n    </g>\n  </svg>`,\n  'intermediate-event-non-interrupting': `\n  <svg viewBox=\"0 0 2048 2048\" xmlns=\"http://www.w3.org/2000/svg\">\n     <g transform=\"translate(0 995.64)\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\">\n        <circle cx=\"1024\" cy=\"28.357\" r=\"875\" stroke-dasharray=\"418.310422, 361.2328165\" stroke-width=\"100\"/>\n        <circle cx=\"1024\" cy=\"28.357\" r=\"685\" stroke-dasharray=\"348.31044857,261.23283643\" stroke-dashoffset=\"500\" stroke-width=\"100\"/>\n     </g>\n  </svg>`\n};","import {\n  getBusinessObject,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isEventSubProcess,\n  isExpanded\n} from '../../util/DiUtil';\n\nimport {\n  isDifferentType\n} from './util/TypeUtil';\n\nimport {\n  forEach,\n  filter,\n  isArray\n} from 'min-dash';\n\nimport * as replaceOptions from '../replace/ReplaceOptions';\nimport { canBeNonInterrupting, getInterruptingProperty } from '../modeling/behavior/util/NonInterruptingUtil';\nimport Icons from './util/Icons';\n\n/**\n * @typedef {import('../modeling/BpmnFactory').default} BpmnFactory\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').default} PopupMenu\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../replace/BpmnReplace').default} BpmnReplace\n * @typedef {import('diagram-js/lib/features/Rules').default} Rules\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n * @typedef {import('../copy-paste/ModdleCopy').default} ModdleCopy\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Moddle} Moddle\n *\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntries} PopupMenuEntries\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntry} PopupMenuEntry\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntryAction} PopupMenuEntryAction\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuHeaderEntries} PopupMenuHeaderEntries\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').default} PopupMenuProvider\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').PopupMenuTarget} PopupMenuTarget\n *\n * @typedef {import('./ReplaceOptions').ReplaceOption} ReplaceOption\n */\n\n/**\n * A BPMN-specific popup menu provider.\n *\n * @implements {PopupMenuProvider}\n *\n * @param {BpmnFactory} bpmnFactory\n * @param {PopupMenu} popupMenu\n * @param {Modeling} modeling\n * @param {Moddle} moddle\n * @param {BpmnReplace} bpmnReplace\n * @param {Rules} rules\n * @param {Translate} translate\n * @param {ModdleCopy} moddleCopy\n */\nexport default function ReplaceMenuProvider(\n    bpmnFactory, popupMenu, modeling, moddle,\n    bpmnReplace, rules, translate, moddleCopy) {\n\n  this._bpmnFactory = bpmnFactory;\n  this._popupMenu = popupMenu;\n  this._modeling = modeling;\n  this._moddle = moddle;\n  this._bpmnReplace = bpmnReplace;\n  this._rules = rules;\n  this._translate = translate;\n  this._moddleCopy = moddleCopy;\n\n  this._register();\n}\n\nReplaceMenuProvider.$inject = [\n  'bpmnFactory',\n  'popupMenu',\n  'modeling',\n  'moddle',\n  'bpmnReplace',\n  'rules',\n  'translate',\n  'moddleCopy'\n];\n\nReplaceMenuProvider.prototype._register = function() {\n  this._popupMenu.registerProvider('bpmn-replace', this);\n};\n\n/**\n * @param {PopupMenuTarget} target\n *\n * @return {PopupMenuEntries}\n */\nReplaceMenuProvider.prototype.getPopupMenuEntries = function(target) {\n\n  var businessObject = target.businessObject;\n\n  var rules = this._rules;\n\n  var filteredReplaceOptions = [];\n\n  if (isArray(target) || !rules.allowed('shape.replace', { element: target })) {\n    return {};\n  }\n\n  var differentType = isDifferentType(target);\n\n  if (is(businessObject, 'bpmn:DataObjectReference')) {\n    return this._createEntries(target, replaceOptions.DATA_OBJECT_REFERENCE);\n  }\n\n  if (is(businessObject, 'bpmn:DataStoreReference') && !is(target.parent, 'bpmn:Collaboration')) {\n    return this._createEntries(target, replaceOptions.DATA_STORE_REFERENCE);\n  }\n\n  // start events outside sub processes\n  if (is(businessObject, 'bpmn:StartEvent') && !is(businessObject.$parent, 'bpmn:SubProcess')) {\n\n    filteredReplaceOptions = filter(replaceOptions.START_EVENT, differentType);\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // expanded/collapsed pools\n  if (is(businessObject, 'bpmn:Participant')) {\n\n    filteredReplaceOptions = filter(replaceOptions.PARTICIPANT, function(replaceOption) {\n      return isExpanded(target) !== replaceOption.target.isExpanded;\n    });\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // start events inside event sub processes\n  if (is(businessObject, 'bpmn:StartEvent') && isEventSubProcess(businessObject.$parent)) {\n    filteredReplaceOptions = filter(replaceOptions.EVENT_SUB_PROCESS_START_EVENT, function(replaceOption) {\n\n      var target = replaceOption.target;\n\n      var isInterrupting = target.isInterrupting !== false;\n\n      var isInterruptingEqual = businessObject.isInterrupting === isInterrupting;\n\n      // filters elements which types and event definition are equal but have have different interrupting types\n      return differentType(replaceOption) || !differentType(replaceOption) && !isInterruptingEqual;\n\n    });\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // start events inside sub processes\n  if (is(businessObject, 'bpmn:StartEvent') && !isEventSubProcess(businessObject.$parent)\n      && is(businessObject.$parent, 'bpmn:SubProcess')) {\n    filteredReplaceOptions = filter(replaceOptions.START_EVENT_SUB_PROCESS, differentType);\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // end events\n  if (is(businessObject, 'bpmn:EndEvent')) {\n\n    filteredReplaceOptions = filter(replaceOptions.END_EVENT, function(replaceOption) {\n      var target = replaceOption.target;\n\n      // hide cancel end events outside transactions\n      if (target.eventDefinitionType == 'bpmn:CancelEventDefinition' && !is(businessObject.$parent, 'bpmn:Transaction')) {\n        return false;\n      }\n\n      return differentType(replaceOption);\n    });\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // boundary events\n  if (is(businessObject, 'bpmn:BoundaryEvent')) {\n\n    filteredReplaceOptions = filter(replaceOptions.BOUNDARY_EVENT, function(replaceOption) {\n\n      var target = replaceOption.target;\n\n      if (target.eventDefinitionType == 'bpmn:CancelEventDefinition' &&\n         !is(businessObject.attachedToRef, 'bpmn:Transaction')) {\n        return false;\n      }\n      var cancelActivity = target.cancelActivity !== false;\n\n      var isCancelActivityEqual = businessObject.cancelActivity == cancelActivity;\n\n      return differentType(replaceOption) || !differentType(replaceOption) && !isCancelActivityEqual;\n    });\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // intermediate events\n  if (is(businessObject, 'bpmn:IntermediateCatchEvent') ||\n      is(businessObject, 'bpmn:IntermediateThrowEvent')) {\n\n    filteredReplaceOptions = filter(replaceOptions.INTERMEDIATE_EVENT, differentType);\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // gateways\n  if (is(businessObject, 'bpmn:Gateway')) {\n\n    filteredReplaceOptions = filter(replaceOptions.GATEWAY, differentType);\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // transactions\n  if (is(businessObject, 'bpmn:Transaction')) {\n\n    filteredReplaceOptions = filter(replaceOptions.TRANSACTION, differentType);\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // expanded event sub processes\n  if (isEventSubProcess(businessObject) && isExpanded(target)) {\n\n    filteredReplaceOptions = filter(replaceOptions.EVENT_SUB_PROCESS, differentType);\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // expanded sub processes\n  if (is(businessObject, 'bpmn:SubProcess') && isExpanded(target)) {\n\n    filteredReplaceOptions = filter(replaceOptions.SUBPROCESS_EXPANDED, differentType);\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // collapsed ad hoc sub processes\n  if (is(businessObject, 'bpmn:AdHocSubProcess') && !isExpanded(target)) {\n\n    filteredReplaceOptions = filter(replaceOptions.TASK, function(replaceOption) {\n\n      var target = replaceOption.target;\n\n      var isTargetSubProcess = target.type === 'bpmn:SubProcess';\n\n      var isTargetExpanded = target.isExpanded === true;\n\n      return isDifferentType(target, target) && (!isTargetSubProcess || isTargetExpanded);\n    });\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  // sequence flows\n  if (is(businessObject, 'bpmn:SequenceFlow')) {\n    return this._createSequenceFlowEntries(target, replaceOptions.SEQUENCE_FLOW);\n  }\n\n  // flow nodes\n  if (is(businessObject, 'bpmn:FlowNode')) {\n    filteredReplaceOptions = filter(replaceOptions.TASK, differentType);\n\n    // collapsed sub process cannot be replaced with itself\n    if (is(businessObject, 'bpmn:SubProcess') && !isExpanded(target)) {\n      filteredReplaceOptions = filter(filteredReplaceOptions, function(replaceOption) {\n        return replaceOption.label !== 'Sub-process (collapsed)';\n      });\n    }\n\n    return this._createEntries(target, filteredReplaceOptions);\n  }\n\n  return {};\n};\n\n/**\n * @param {PopupMenuTarget} target\n *\n * @return {PopupMenuHeaderEntries}\n */\nReplaceMenuProvider.prototype.getPopupMenuHeaderEntries = function(target) {\n\n  var headerEntries = {};\n\n  if (is(target, 'bpmn:Activity') && !isEventSubProcess(target)) {\n    headerEntries = {\n      ...headerEntries,\n      ...this._getLoopCharacteristicsHeaderEntries(target)\n    };\n  }\n\n  if (is(target, 'bpmn:DataObjectReference')) {\n    headerEntries = {\n      ...headerEntries,\n      ...this._getCollectionHeaderEntries(target)\n    };\n  }\n\n  if (is(target, 'bpmn:Participant')) {\n    headerEntries = {\n      ...headerEntries,\n      ...this._getParticipantMultiplicityHeaderEntries(target)\n    };\n  }\n\n  if (is(target, 'bpmn:SubProcess') &&\n      !is(target, 'bpmn:Transaction') &&\n      !isEventSubProcess(target)) {\n    headerEntries = {\n      ...headerEntries,\n      ...this._getAdHocHeaderEntries(target)\n    };\n  }\n\n  if (canBeNonInterrupting(target)) {\n    headerEntries = {\n      ...headerEntries,\n      ...this._getNonInterruptingHeaderEntries(target)\n    };\n  }\n\n  return headerEntries;\n};\n\n\n/**\n * Create popup menu entries for the given target.\n *\n * @param  {PopupMenuTarget} target\n * @param  {ReplaceOption[]} replaceOptions\n *\n * @return {PopupMenuEntries}\n */\nReplaceMenuProvider.prototype._createEntries = function(target, replaceOptions) {\n  var entries = {};\n\n  var self = this;\n\n  forEach(replaceOptions, function(replaceOption) {\n    entries[ replaceOption.actionName ] = self._createEntry(replaceOption, target);\n  });\n\n  return entries;\n};\n\n/**\n * Creates popup menu entries for the given sequence flow.\n *\n * @param  {PopupMenuTarget} target\n * @param  {ReplaceOption[]} replaceOptions\n *\n * @return {PopupMenuEntries}\n */\nReplaceMenuProvider.prototype._createSequenceFlowEntries = function(target, replaceOptions) {\n\n  var businessObject = getBusinessObject(target);\n\n  var entries = {};\n\n  var modeling = this._modeling,\n      moddle = this._moddle;\n\n  var self = this;\n\n  forEach(replaceOptions, function(replaceOption) {\n\n    switch (replaceOption.actionName) {\n    case 'replace-with-default-flow':\n      if (businessObject.sourceRef.default !== businessObject &&\n            (is(businessObject.sourceRef, 'bpmn:ExclusiveGateway') ||\n             is(businessObject.sourceRef, 'bpmn:InclusiveGateway') ||\n             is(businessObject.sourceRef, 'bpmn:ComplexGateway') ||\n             is(businessObject.sourceRef, 'bpmn:Activity'))) {\n\n        entries = {\n          ...entries,\n          [ replaceOption.actionName ]: self._createEntry(replaceOption, target, function() {\n            modeling.updateProperties(target.source, { default: businessObject });\n          })\n        };\n      }\n      break;\n    case 'replace-with-conditional-flow':\n      if (!businessObject.conditionExpression && is(businessObject.sourceRef, 'bpmn:Activity')) {\n\n        entries = {\n          ...entries,\n          [ replaceOption.actionName ]: self._createEntry(replaceOption, target, function() {\n            var conditionExpression = moddle.create('bpmn:FormalExpression', { body: '' });\n\n            modeling.updateProperties(target, { conditionExpression: conditionExpression });\n          })\n        };\n      }\n      break;\n    default:\n\n      // conditional flow -> sequence flow\n      if (is(businessObject.sourceRef, 'bpmn:Activity') && businessObject.conditionExpression) {\n        entries = {\n          ...entries,\n          [ replaceOption.actionName ]: self._createEntry(replaceOption, target, function() {\n            modeling.updateProperties(target, { conditionExpression: undefined });\n          })\n        };\n      }\n\n      // default flow -> sequence flow\n      if ((is(businessObject.sourceRef, 'bpmn:ExclusiveGateway') ||\n           is(businessObject.sourceRef, 'bpmn:InclusiveGateway') ||\n           is(businessObject.sourceRef, 'bpmn:ComplexGateway') ||\n           is(businessObject.sourceRef, 'bpmn:Activity')) &&\n           businessObject.sourceRef.default === businessObject) {\n        entries = {\n          ...entries,\n          [ replaceOption.actionName ]: self._createEntry(replaceOption, target, function() {\n            modeling.updateProperties(target.source, { default: undefined });\n          })\n        };\n      }\n    }\n  });\n\n  return entries;\n};\n\n/**\n * Create a popup menu entry for the given replace option.\n *\n * @param  {ReplaceOption} replaceOption\n * @param  {PopupMenuTarget} target\n * @param  {PopupMenuEntryAction} [action]\n *\n * @return {PopupMenuEntry}\n */\nReplaceMenuProvider.prototype._createEntry = function(replaceOption, target, action) {\n  var translate = this._translate;\n  var replaceElement = this._bpmnReplace.replaceElement;\n\n  var replaceAction = function() {\n    return replaceElement(target, replaceOption.target);\n  };\n\n  var label = replaceOption.label;\n  if (label && typeof label === 'function') {\n    label = label(target);\n  }\n\n  action = action || replaceAction;\n\n  return {\n    label: translate(label),\n    className: replaceOption.className,\n    action: action\n  };\n};\n\n/**\n * Get popup menu header entries for the loop characteristics of the given BPMN element.\n *\n * @param  {PopupMenuTarget} target\n *\n * @return {PopupMenuHeaderEntries}\n */\nReplaceMenuProvider.prototype._getLoopCharacteristicsHeaderEntries = function(target) {\n\n  var self = this;\n  var translate = this._translate;\n\n  function toggleLoopEntry(event, entry) {\n\n    // remove\n    if (entry.active) {\n      self._modeling.updateProperties(target, { loopCharacteristics: undefined });\n      return;\n    }\n\n    const currentLoopCharacteristics = target.businessObject.get('loopCharacteristics'),\n          newLoopCharacteristics = self._moddle.create(entry.options.loopCharacteristics);\n\n    // copy old properties\n    if (currentLoopCharacteristics) {\n      self._moddleCopy.copyElement(currentLoopCharacteristics, newLoopCharacteristics);\n    }\n\n    // update `isSequential` property\n    newLoopCharacteristics.set('isSequential', entry.options.isSequential);\n\n    self._modeling.updateProperties(target, { loopCharacteristics: newLoopCharacteristics });\n  }\n\n  var businessObject = getBusinessObject(target),\n      loopCharacteristics = businessObject.loopCharacteristics;\n\n  var isSequential,\n      isLoop,\n      isParallel;\n\n  if (loopCharacteristics) {\n    isSequential = loopCharacteristics.isSequential;\n    isLoop = loopCharacteristics.isSequential === undefined;\n    isParallel = loopCharacteristics.isSequential !== undefined && !loopCharacteristics.isSequential;\n  }\n\n\n  return {\n    'toggle-parallel-mi' : {\n      className: 'bpmn-icon-parallel-mi-marker',\n      title: translate('Parallel multi-instance'),\n      active: isParallel,\n      action: toggleLoopEntry,\n      options: {\n        loopCharacteristics: 'bpmn:MultiInstanceLoopCharacteristics',\n        isSequential: false\n      }\n    },\n    'toggle-sequential-mi': {\n      className: 'bpmn-icon-sequential-mi-marker',\n      title: translate('Sequential multi-instance'),\n      active: isSequential,\n      action: toggleLoopEntry,\n      options: {\n        loopCharacteristics: 'bpmn:MultiInstanceLoopCharacteristics',\n        isSequential: true\n      }\n    },\n    'toggle-loop': {\n      className: 'bpmn-icon-loop-marker',\n      title: translate('Loop'),\n      active: isLoop,\n      action: toggleLoopEntry,\n      options: {\n        loopCharacteristics: 'bpmn:StandardLoopCharacteristics'\n      }\n    }\n  };\n};\n\n/**\n * Get popup menu header entries for the collection property of the given BPMN element.\n *\n * @param  {PopupMenuTarget} target\n *\n * @return {PopupMenuHeaderEntries}\n */\nReplaceMenuProvider.prototype._getCollectionHeaderEntries = function(target) {\n\n  var self = this;\n  var translate = this._translate;\n\n  var dataObject = target.businessObject.dataObjectRef;\n\n  if (!dataObject) {\n    return {};\n  }\n\n  function toggleIsCollection(event, entry) {\n    self._modeling.updateModdleProperties(\n      target,\n      dataObject,\n      { isCollection: !entry.active });\n  }\n\n  var isCollection = dataObject.isCollection;\n\n  return {\n    'toggle-is-collection': {\n      className: 'bpmn-icon-parallel-mi-marker',\n      title: translate('Collection'),\n      active: isCollection,\n      action: toggleIsCollection,\n    }\n  };\n};\n\n/**\n * Get popup menu header entries for the participant multiplicity property of the given BPMN element.\n *\n * @param  {PopupMenuTarget} target\n *\n * @return {PopupMenuHeaderEntries}\n */\nReplaceMenuProvider.prototype._getParticipantMultiplicityHeaderEntries = function(target) {\n\n  var self = this;\n  var bpmnFactory = this._bpmnFactory;\n  var translate = this._translate;\n\n  function toggleParticipantMultiplicity(event, entry) {\n    var isActive = entry.active;\n    var participantMultiplicity;\n\n    if (!isActive) {\n      participantMultiplicity = bpmnFactory.create('bpmn:ParticipantMultiplicity');\n    }\n\n    self._modeling.updateProperties(\n      target,\n      { participantMultiplicity: participantMultiplicity });\n  }\n\n  var participantMultiplicity = target.businessObject.participantMultiplicity;\n\n  return {\n    'toggle-participant-multiplicity': {\n      className: 'bpmn-icon-parallel-mi-marker',\n      title: translate('Participant multiplicity'),\n      active: !!participantMultiplicity,\n      action: toggleParticipantMultiplicity,\n    }\n  };\n};\n\n/**\n * Get popup menu header entries for the ad-hoc property of the given BPMN element.\n *\n * @param  {PopupMenuTarget} element\n *\n * @return {PopupMenuHeaderEntries}\n */\nReplaceMenuProvider.prototype._getAdHocHeaderEntries = function(element) {\n  var translate = this._translate;\n  var businessObject = getBusinessObject(element);\n\n  var isAdHoc = is(businessObject, 'bpmn:AdHocSubProcess');\n\n  var replaceElement = this._bpmnReplace.replaceElement;\n\n  return {\n    'toggle-adhoc': {\n      className: 'bpmn-icon-ad-hoc-marker',\n      title: translate('Ad-hoc'),\n      active: isAdHoc,\n      action: function(event, entry) {\n        if (isAdHoc) {\n          return replaceElement(element, { type: 'bpmn:SubProcess' }, {\n            autoResize: false,\n            layoutConnection: false\n          });\n        } else {\n          return replaceElement(element, { type: 'bpmn:AdHocSubProcess' }, {\n            autoResize: false,\n            layoutConnection: false\n          });\n        }\n      }\n    }\n  };\n};\n\n\nReplaceMenuProvider.prototype._getNonInterruptingHeaderEntries = function(element) {\n  const translate = this._translate;\n  const businessObject = getBusinessObject(element);\n  const self = this;\n\n  const interruptingProperty = getInterruptingProperty(element);\n\n  const icon = is(element, 'bpmn:BoundaryEvent') ? Icons['intermediate-event-non-interrupting'] : Icons['start-event-non-interrupting'];\n\n  const isNonInterrupting = !businessObject[interruptingProperty];\n\n  return {\n    'toggle-non-interrupting': {\n      imageHtml: icon,\n      title: translate('Toggle non-interrupting'),\n      active: isNonInterrupting,\n      action: function() {\n        self._modeling.updateProperties(element, {\n          [interruptingProperty]: !!isNonInterrupting\n        });\n      }\n    }\n  };\n};","import PopupMenuModule from 'diagram-js/lib/features/popup-menu';\nimport ReplaceModule from '../replace';\n\nimport ReplaceMenuProvider from './ReplaceMenuProvider';\nimport AutoPlaceModule from '../auto-place';\n\nexport default {\n  __depends__: [\n    PopupMenuModule,\n    ReplaceModule,\n    AutoPlaceModule\n  ],\n  __init__: [\n    'replaceMenuProvider'\n  ],\n  replaceMenuProvider: [ 'type', ReplaceMenuProvider ]\n};","import {\n  assign,\n  forEach,\n  isArray,\n  every\n} from 'min-dash';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isExpanded,\n  isHorizontal,\n  isEventSubProcess\n} from '../../util/DiUtil';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  getChildLanes\n} from '../modeling/util/LaneUtil';\n\nimport {\n  hasPrimaryModifier\n} from 'diagram-js/lib/util/Mouse';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPad').default} ContextPad\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../modeling/ElementFactory').default} ElementFactory\n * @typedef {import('../append-preview/AppendPreview').default} AppendPreview\n * @typedef {import('diagram-js/lib/features/connect/Connect').default} Connect\n * @typedef {import('diagram-js/lib/features/create/Create').default} Create\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').default} PopupMenu\n * @typedef {import('diagram-js/lib/features/canvas/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/features/rules/Rules').default} Rules\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n *\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').default<Element>} BaseContextPadProvider\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').ContextPadEntries} ContextPadEntries\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').ContextPadEntry} ContextPadEntry\n *\n * @typedef { { autoPlace?: boolean; } } ContextPadConfig\n */\n\n/**\n * BPMN-specific context pad provider.\n *\n * @implements {BaseContextPadProvider}\n *\n * @param {ContextPadConfig} config\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {ContextPad} contextPad\n * @param {Modeling} modeling\n * @param {ElementFactory} elementFactory\n * @param {Connect} connect\n * @param {Create} create\n * @param {PopupMenu} popupMenu\n * @param {Canvas} canvas\n * @param {Rules} rules\n * @param {Translate} translate\n * @param {AppendPreview} appendPreview\n */\nexport default function ContextPadProvider(\n    config, injector, eventBus,\n    contextPad, modeling, elementFactory,\n    connect, create, popupMenu,\n    canvas, rules, translate, appendPreview) {\n\n  config = config || {};\n\n  contextPad.registerProvider(this);\n\n  this._contextPad = contextPad;\n\n  this._modeling = modeling;\n\n  this._elementFactory = elementFactory;\n  this._connect = connect;\n  this._create = create;\n  this._popupMenu = popupMenu;\n  this._canvas = canvas;\n  this._rules = rules;\n  this._translate = translate;\n  this._eventBus = eventBus;\n  this._appendPreview = appendPreview;\n\n  if (config.autoPlace !== false) {\n    this._autoPlace = injector.get('autoPlace', false);\n  }\n\n  eventBus.on('create.end', 250, function(event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (!hasPrimaryModifier(event) || !contextPad.isOpen(shape)) {\n      return;\n    }\n\n    var entries = contextPad.getEntries(shape);\n\n    if (entries.replace) {\n      entries.replace.action.click(event, shape);\n    }\n  });\n\n  eventBus.on('contextPad.close', function() {\n    appendPreview.cleanUp();\n  });\n}\n\nContextPadProvider.$inject = [\n  'config.contextPad',\n  'injector',\n  'eventBus',\n  'contextPad',\n  'modeling',\n  'elementFactory',\n  'connect',\n  'create',\n  'popupMenu',\n  'canvas',\n  'rules',\n  'translate',\n  'appendPreview'\n];\n\n/**\n * @param {Element[]} elements\n *\n * @return {ContextPadEntries}\n */\nContextPadProvider.prototype.getMultiElementContextPadEntries = function(elements) {\n  var modeling = this._modeling;\n\n  var actions = {};\n\n  if (this._isDeleteAllowed(elements)) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: this._translate('Delete'),\n        action: {\n          click: function(event, elements) {\n            modeling.removeElements(elements.slice());\n          }\n        }\n      }\n    });\n  }\n\n  return actions;\n};\n\n/**\n * @param {Element[]} elements\n *\n * @return {boolean}\n */\nContextPadProvider.prototype._isDeleteAllowed = function(elements) {\n\n  var baseAllowed = this._rules.allowed('elements.delete', {\n    elements: elements\n  });\n\n  if (isArray(baseAllowed)) {\n    return every(elements, el => baseAllowed.includes(el));\n  }\n\n  return baseAllowed;\n};\n\n/**\n * @param {Element} element\n *\n * @return {ContextPadEntries}\n */\nContextPadProvider.prototype.getContextPadEntries = function(element) {\n  var contextPad = this._contextPad,\n      modeling = this._modeling,\n      elementFactory = this._elementFactory,\n      connect = this._connect,\n      create = this._create,\n      popupMenu = this._popupMenu,\n      autoPlace = this._autoPlace,\n      translate = this._translate,\n      appendPreview = this._appendPreview;\n\n  var actions = {};\n\n  if (element.type === 'label') {\n    if (this._isDeleteAllowed([ element ])) {\n      assign(actions, deleteAction());\n    }\n\n    return actions;\n  }\n\n  var businessObject = element.businessObject;\n\n  function startConnect(event, element) {\n    connect.start(event, element);\n  }\n\n  function removeElement(e, element) {\n    modeling.removeElements([ element ]);\n  }\n\n  function deleteAction() {\n    return {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: translate('Delete'),\n        action: {\n          click: removeElement\n        }\n      }\n    };\n  }\n\n  function getReplaceMenuPosition(element) {\n\n    var Y_OFFSET = 5;\n\n    var pad = contextPad.getPad(element).html;\n\n    var padRect = pad.getBoundingClientRect();\n\n    var pos = {\n      x: padRect.left,\n      y: padRect.bottom + Y_OFFSET\n    };\n\n    return pos;\n  }\n\n  /**\n   * Create an append action.\n   *\n   * @param {string} type\n   * @param {string} className\n   * @param {string} title\n   * @param {Object} [options]\n   *\n   * @return {ContextPadEntry}\n   */\n  function appendAction(type, className, title, options) {\n\n    function appendStart(event, element) {\n\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n\n      create.start(event, shape, {\n        source: element\n      });\n    }\n\n    var append = autoPlace ? function(_, element) {\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n\n      autoPlace.append(element, shape);\n    } : appendStart;\n\n    var previewAppend = autoPlace ? function(_, element) {\n\n      // mouseover\n      appendPreview.create(element, type, options);\n\n      return () => {\n\n        // mouseout\n        appendPreview.cleanUp();\n      };\n    } : null;\n\n    return {\n      group: 'model',\n      className: className,\n      title: title,\n      action: {\n        dragstart: appendStart,\n        click: append,\n        hover: previewAppend\n      }\n    };\n  }\n\n  function splitLaneHandler(count) {\n\n    return function(_, element) {\n\n      // actual split\n      modeling.splitLane(element, count);\n\n      // refresh context pad after split to\n      // get rid of split icons\n      contextPad.open(element, true);\n    };\n  }\n\n\n  if (isAny(businessObject, [ 'bpmn:Lane', 'bpmn:Participant' ]) && isExpanded(element)) {\n\n    var childLanes = getChildLanes(element);\n\n    assign(actions, {\n      'lane-insert-above': {\n        group: 'lane-insert-above',\n        className: 'bpmn-icon-lane-insert-above',\n        title: translate('Add lane above'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'top');\n          }\n        }\n      }\n    });\n\n    if (childLanes.length < 2) {\n\n      if (isHorizontal(element) ? element.height >= 120 : element.width >= 120) {\n        assign(actions, {\n          'lane-divide-two': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-two',\n            title: translate('Divide into two lanes'),\n            action: {\n              click: splitLaneHandler(2)\n            }\n          }\n        });\n      }\n\n      if (isHorizontal(element) ? element.height >= 180 : element.width >= 180) {\n        assign(actions, {\n          'lane-divide-three': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-three',\n            title: translate('Divide into three lanes'),\n            action: {\n              click: splitLaneHandler(3)\n            }\n          }\n        });\n      }\n    }\n\n    assign(actions, {\n      'lane-insert-below': {\n        group: 'lane-insert-below',\n        className: 'bpmn-icon-lane-insert-below',\n        title: translate('Add lane below'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'bottom');\n          }\n        }\n      }\n    });\n\n  }\n\n  if (is(businessObject, 'bpmn:FlowNode')) {\n\n    if (is(businessObject, 'bpmn:EventBasedGateway')) {\n\n      assign(actions, {\n        'append.receive-task': appendAction(\n          'bpmn:ReceiveTask',\n          'bpmn-icon-receive-task',\n          translate('Append receive task')\n        ),\n        'append.message-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-message',\n          translate('Append message intermediate catch event'),\n          { eventDefinitionType: 'bpmn:MessageEventDefinition' }\n        ),\n        'append.timer-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-timer',\n          translate('Append timer intermediate catch event'),\n          { eventDefinitionType: 'bpmn:TimerEventDefinition' }\n        ),\n        'append.condition-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-condition',\n          translate('Append conditional intermediate catch event'),\n          { eventDefinitionType: 'bpmn:ConditionalEventDefinition' }\n        ),\n        'append.signal-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-signal',\n          translate('Append signal intermediate catch event'),\n          { eventDefinitionType: 'bpmn:SignalEventDefinition' }\n        )\n      });\n    } else\n\n    if (isEventType(businessObject, 'bpmn:BoundaryEvent', 'bpmn:CompensateEventDefinition')) {\n\n      assign(actions, {\n        'append.compensation-activity':\n            appendAction(\n              'bpmn:Task',\n              'bpmn-icon-task',\n              translate('Append compensation activity'),\n              {\n                isForCompensation: true\n              }\n            )\n      });\n    } else\n\n    if (!is(businessObject, 'bpmn:EndEvent') &&\n        !businessObject.isForCompensation &&\n        !isEventType(businessObject, 'bpmn:IntermediateThrowEvent', 'bpmn:LinkEventDefinition') &&\n        !isEventSubProcess(businessObject)) {\n\n      assign(actions, {\n        'append.end-event': appendAction(\n          'bpmn:EndEvent',\n          'bpmn-icon-end-event-none',\n          translate('Append end event')\n        ),\n        'append.gateway': appendAction(\n          'bpmn:ExclusiveGateway',\n          'bpmn-icon-gateway-none',\n          translate('Append gateway')\n        ),\n        'append.append-task': appendAction(\n          'bpmn:Task',\n          'bpmn-icon-task',\n          translate('Append task')\n        ),\n        'append.intermediate-event': appendAction(\n          'bpmn:IntermediateThrowEvent',\n          'bpmn-icon-intermediate-event-none',\n          translate('Append intermediate/boundary event')\n        )\n      });\n    }\n  }\n\n  if (!popupMenu.isEmpty(element, 'bpmn-replace')) {\n\n    // Replace menu entry\n    assign(actions, {\n      'replace': {\n        group: 'edit',\n        className: 'bpmn-icon-screw-wrench',\n        title: translate('Change element'),\n        action: {\n          click: function(event, element) {\n\n            var position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y }\n            });\n\n            popupMenu.open(element, 'bpmn-replace', position, {\n              title: translate('Change element'),\n              width: 300,\n              search: true\n            });\n          }\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:SequenceFlow')) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation',\n        translate('Add text annotation')\n      )\n    });\n  }\n\n  if (\n    isAny(businessObject, [\n      'bpmn:FlowNode',\n      'bpmn:InteractionNode',\n      'bpmn:DataObjectReference',\n      'bpmn:DataStoreReference',\n    ])\n  ) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation',\n        translate('Add text annotation')\n      ),\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect to other element'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  if (is(businessObject, 'bpmn:TextAnnotation')) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  if (isAny(businessObject, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ])) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using data input association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:Group')) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation',\n        translate('Add text annotation')\n      )\n    });\n  }\n\n  if (this._isDeleteAllowed([ element ])) {\n    assign(actions, deleteAction());\n  }\n\n  return actions;\n};\n\n\n// helpers /////////\n\n/**\n * @param {ModdleElement} businessObject\n * @param {string} type\n * @param {string} eventDefinitionType\n *\n * @return {boolean}\n */\nfunction isEventType(businessObject, type, eventDefinitionType) {\n\n  var isType = businessObject.$instanceOf(type);\n  var isDefinition = false;\n\n  var definitions = businessObject.eventDefinitions || [];\n  forEach(definitions, function(def) {\n    if (def.$type === eventDefinitionType) {\n      isDefinition = true;\n    }\n  });\n\n  return isType && isDefinition;\n}\n","import AppendPreviewModule from '../append-preview';\nimport DirectEditingModule from 'diagram-js-direct-editing';\nimport ContextPadModule from 'diagram-js/lib/features/context-pad';\nimport SelectionModule from 'diagram-js/lib/features/selection';\nimport ConnectModule from 'diagram-js/lib/features/connect';\nimport CreateModule from 'diagram-js/lib/features/create';\nimport PopupMenuModule from '../popup-menu';\n\nimport ContextPadProvider from './ContextPadProvider';\n\nexport default {\n  __depends__: [\n    AppendPreviewModule,\n    DirectEditingModule,\n    ContextPadModule,\n    SelectionModule,\n    ConnectModule,\n    CreateModule,\n    PopupMenuModule\n  ],\n  __init__: [ 'contextPadProvider' ],\n  contextPadProvider: [ 'type', ContextPadProvider ]\n};","import {\n  sortBy,\n  forEach,\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../util/Types').Axis} Axis\n * @typedef {import('../../util/Types').Dimension} Dimension\n * @typedef {import('../../util/Types').Rect} Rect\n *\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n *\n * @typedef { {\n *   min: number;\n *   max: number;\n * } } Range\n *\n * @typedef { {\n *   elements: Element[];\n *   range: Range;\n * } } Group\n */\n\nvar AXIS_DIMENSIONS = {\n  horizontal: [ 'x', 'width' ],\n  vertical: [ 'y', 'height' ]\n};\n\nvar THRESHOLD = 5;\n\n\n/**\n * Groups and filters elements and then trigger even distribution.\n *\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function DistributeElements(modeling, rules) {\n  this._modeling = modeling;\n\n  this._filters = [];\n\n  this.registerFilter(function(elements) {\n    var allowed = rules.allowed('elements.distribute', { elements: elements });\n\n    if (isArray(allowed)) {\n      return allowed;\n    }\n\n    return allowed ? elements : [];\n  });\n}\n\nDistributeElements.$inject = [ 'modeling', 'rules' ];\n\n\n/**\n * Registers filter functions that allow external parties to filter\n * out certain elements.\n *\n * @param {(distributableElements: Element[], axis: Axis, dimension: Dimension) => Element[]} filterFn\n */\nDistributeElements.prototype.registerFilter = function(filterFn) {\n  if (typeof filterFn !== 'function') {\n    throw new Error('the filter has to be a function');\n  }\n\n  this._filters.push(filterFn);\n};\n\n/**\n * Distributes the elements with a given orientation\n *\n * @param {Element[]} elements\n * @param {string} orientation\n */\nDistributeElements.prototype.trigger = function(elements, orientation) {\n  var modeling = this._modeling;\n\n  var groups,\n      distributableElements;\n\n  if (elements.length < 3) {\n    return;\n  }\n\n  this._setOrientation(orientation);\n\n  distributableElements = this._filterElements(elements);\n\n  groups = this._createGroups(distributableElements);\n\n  // nothing to distribute\n  if (groups.length <= 2) {\n    return;\n  }\n\n  modeling.distributeElements(groups, this._axis, this._dimension);\n\n  return groups;\n};\n\n/**\n * Filters the elements with provided filters by external parties\n *\n * @param {Element[]} elements\n *\n * @return {Element[]}\n */\nDistributeElements.prototype._filterElements = function(elements) {\n  var filters = this._filters,\n      axis = this._axis,\n      dimension = this._dimension,\n      distributableElements = [].concat(elements);\n\n  if (!filters.length) {\n    return elements;\n  }\n\n  forEach(filters, function(filterFn) {\n    distributableElements = filterFn(distributableElements, axis, dimension);\n  });\n\n  return distributableElements;\n};\n\n\n/**\n * Create range (min, max) groups. Also tries to group elements\n * together that share the same range.\n *\n * @example\n *\n * ```javascript\n *   const groups = [\n *     {\n *       range: { min: 100, max: 200 },\n *       elements: [ { id: 'shape1', ... } ]\n *     }\n *   ]\n * ```\n *\n * @param {Element[]} elements\n *\n * @return {Group[]}\n */\nDistributeElements.prototype._createGroups = function(elements) {\n  var rangeGroups = [],\n      self = this,\n      axis = this._axis,\n      dimension = this._dimension;\n\n  if (!axis) {\n    throw new Error('must have a defined \"axis\" and \"dimension\"');\n  }\n\n  // sort by 'left->right' or 'top->bottom'\n  var sortedElements = sortBy(elements, axis);\n\n  forEach(sortedElements, function(element, idx) {\n    var elementRange = self._findRange(element, axis, dimension),\n        range;\n\n    var previous = rangeGroups[rangeGroups.length - 1];\n\n    if (previous && self._hasIntersection(previous.range, elementRange)) {\n      rangeGroups[rangeGroups.length - 1].elements.push(element);\n    } else {\n      range = { range: elementRange, elements: [ element ] };\n\n      rangeGroups.push(range);\n    }\n  });\n\n  return rangeGroups;\n};\n\n\n/**\n * Maps a direction to the according axis and dimension.\n *\n * @param {'horizontal' | 'vertical'} direction 'horizontal' or 'vertical'\n */\nDistributeElements.prototype._setOrientation = function(direction) {\n  var orientation = AXIS_DIMENSIONS[direction];\n\n  this._axis = orientation[0];\n  this._dimension = orientation[1];\n};\n\n\n/**\n * Checks if the two ranges intercept each other.\n *\n * @param {Range} rangeA\n * @param {Range} rangeB\n *\n * @return {boolean}\n */\nDistributeElements.prototype._hasIntersection = function(rangeA, rangeB) {\n  return Math.max(rangeA.min, rangeA.max) >= Math.min(rangeB.min, rangeB.max) &&\n         Math.min(rangeA.min, rangeA.max) <= Math.max(rangeB.min, rangeB.max);\n};\n\n\n/**\n * Returns the min and max values for an element\n *\n * @param {Element} element\n *\n * @return {Range}\n */\nDistributeElements.prototype._findRange = function(element) {\n  var axis = element[this._axis],\n      dimension = element[this._dimension];\n\n  return {\n    min: axis + THRESHOLD,\n    max: axis + dimension - THRESHOLD\n  };\n};\n","import DistributeElements from './DistributeElements';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'distributeElements' ],\n  distributeElements: [ 'type', DistributeElements ]\n};\n","import inherits from 'inherits-browser';\n\nimport RuleProvider from 'diagram-js/lib/features/rules/RuleProvider';\nimport { getParents } from 'diagram-js/lib/util/Elements';\n\nimport {\n  filter\n} from 'min-dash';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n */\n\n/**\n * Registers element exclude filters for elements that currently do not support\n * distribution.\n *\n * @param {EventBus} eventBus\n */\nexport default function BpmnDistributeElements(eventBus) {\n  RuleProvider.call(this, eventBus);\n}\n\nBpmnDistributeElements.$inject = [ 'eventBus' ];\n\ninherits(BpmnDistributeElements, RuleProvider);\n\nBpmnDistributeElements.prototype.init = function() {\n  this.addRule('elements.distribute', function(context) {\n    var elements = context.elements;\n\n    elements = filter(elements, function(element) {\n      var cannotDistribute = isAny(element, [\n        'bpmn:Association',\n        'bpmn:BoundaryEvent',\n        'bpmn:DataInputAssociation',\n        'bpmn:DataOutputAssociation',\n        'bpmn:Lane',\n        'bpmn:MessageFlow',\n        'bpmn:SequenceFlow',\n        'bpmn:TextAnnotation'\n      ]);\n\n      return !(element.labelTarget || cannotDistribute);\n    });\n\n    // filter out elements which are children of any of the selected elements\n    elements = getParents(elements);\n\n    if (elements.length < 3) {\n      return false;\n    }\n\n    return elements;\n  });\n};\n","/**\n * To change the icons, modify the SVGs in `./resources`, execute `npx svgo -f resources --datauri enc -o dist`,\n * and then replace respective icons with the optimized data URIs in `./dist`.\n */\nvar icons = {\n  horizontal: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n                <polyline points=\"450 400 450 150 1350 150 1350 400\" style=\"fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;\"/>\n                <rect x=\"150\" y=\"450\" width=\"600\" height=\"1200\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n                <rect x=\"1050\" y=\"450\" width=\"600\" height=\"800\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n              </svg>`,\n  vertical: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1800 1800\">\n              <polyline points=\"400 1350 150 1350 150 450 400 450\" style=\"fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;\"/>\n              <rect x=\"450\" y=\"150\" width=\"1200\" height=\"600\" rx=\"1\" style=\"fill:none;stroke:currentColor;stroke-width:100;\"></rect>\n              <rect x=\"450\" y=\"1050\" width=\"800\" height=\"600\" rx=\"1\" style=\"fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;\"></rect>\n            </svg>`\n};\n\nexport default icons;\n","import ICONS from './DistributeElementsIcons';\n\nimport { assign } from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').default} PopupMenu\n * @typedef {import('./BpmnDistributeElements').default} DistributeElements\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n * @typedef {import('diagram-js/lib/features/rules/Rules').default} Rules\n *\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').PopupMenuEntries} PopupMenuEntries\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenuProvider').default} PopupMenuProvider\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').PopupMenuTarget} PopupMenuTarget\n */\n\nvar LOW_PRIORITY = 900;\n\n/**\n * A provider for the distribute elements popup menu.\n *\n * @implements {PopupMenuProvider}\n *\n * @param {PopupMenu} popupMenu\n * @param {DistributeElements} distributeElements\n * @param {Translate} translate\n * @param {Rules} rules\n */\nexport default function DistributeElementsMenuProvider(\n    popupMenu, distributeElements, translate, rules) {\n  this._distributeElements = distributeElements;\n  this._translate = translate;\n  this._popupMenu = popupMenu;\n  this._rules = rules;\n\n  popupMenu.registerProvider('align-elements', LOW_PRIORITY, this);\n}\n\nDistributeElementsMenuProvider.$inject = [\n  'popupMenu',\n  'distributeElements',\n  'translate',\n  'rules'\n];\n\n/**\n * @param {PopupMenuTarget} target\n *\n * @return {PopupMenuEntries}\n */\nDistributeElementsMenuProvider.prototype.getPopupMenuEntries = function(target) {\n  var entries = {};\n\n  if (this._isAllowed(target)) {\n    assign(entries, this._getEntries(target));\n  }\n\n  return entries;\n};\n\nDistributeElementsMenuProvider.prototype._isAllowed = function(elements) {\n  return this._rules.allowed('elements.distribute', { elements: elements });\n};\n\nDistributeElementsMenuProvider.prototype._getEntries = function(elements) {\n  var distributeElements = this._distributeElements,\n      translate = this._translate,\n      popupMenu = this._popupMenu;\n\n  var entries = {\n    'distribute-elements-horizontal': {\n      group: 'distribute',\n      title: translate('Distribute elements horizontally'),\n      className: 'bjs-align-elements-menu-entry',\n      imageHtml: ICONS['horizontal'],\n      action: function(event, entry) {\n        distributeElements.trigger(elements, 'horizontal');\n        popupMenu.close();\n      }\n    },\n    'distribute-elements-vertical': {\n      group: 'distribute',\n      title: translate('Distribute elements vertically'),\n      imageHtml: ICONS['vertical'],\n      action: function(event, entry) {\n        distributeElements.trigger(elements, 'vertical');\n        popupMenu.close();\n      }\n    },\n  };\n\n  return entries;\n};\n","import DistributeElementsModule from 'diagram-js/lib/features/distribute-elements';\nimport PopupMenuModule from 'diagram-js/lib/features/popup-menu';\n\nimport BpmnDistributeElements from './BpmnDistributeElements';\nimport DistributeElementsMenuProvider from './DistributeElementsMenuProvider';\n\n\nexport default {\n  __depends__: [\n    PopupMenuModule,\n    DistributeElementsModule\n  ],\n  __init__: [\n    'bpmnDistributeElements',\n    'distributeElementsMenuProvider'\n  ],\n  bpmnDistributeElements: [ 'type', BpmnDistributeElements ],\n  distributeElementsMenuProvider: [ 'type', DistributeElementsMenuProvider ]\n};\n","import {\n  forEach,\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar NOT_REGISTERED_ERROR = 'is not a registered action',\n    IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with registerAction\n * and likewise unregister existing ones with unregisterAction.\n *\n *\n * ## Life-Cycle and configuration\n *\n * The editor actions will wait for diagram initialization before\n * registering default actions _and_ firing an `editorActions.init` event.\n *\n * Interested parties may listen to the `editorActions.init` event with\n * low priority to check, which actions got registered. Other components\n * may use the event to register their own actions via `registerAction`.\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function EditorActions(eventBus, injector) {\n\n  // initialize actions\n  this._actions = {};\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n\n    // all diagram modules got loaded; check which ones\n    // are available and register the respective default actions\n    self._registerDefaultActions(injector);\n\n    // ask interested parties to register available editor\n    // actions on diagram initialization\n    eventBus.fire('editorActions.init', {\n      editorActions: self\n    });\n  });\n\n}\n\nEditorActions.$inject = [\n  'eventBus',\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (1) retrieve optional components to integrate with\n\n  var commandStack = injector.get('commandStack', false);\n  var modeling = injector.get('modeling', false);\n  var selection = injector.get('selection', false);\n  var zoomScroll = injector.get('zoomScroll', false);\n  var copyPaste = injector.get('copyPaste', false);\n  var canvas = injector.get('canvas', false);\n  var rules = injector.get('rules', false);\n  var keyboardMove = injector.get('keyboardMove', false);\n  var keyboardMoveSelection = injector.get('keyboardMoveSelection', false);\n\n  // (2) check components and register actions\n\n  if (commandStack) {\n    this.register('undo', function() {\n      commandStack.undo();\n    });\n\n    this.register('redo', function() {\n      commandStack.redo();\n    });\n  }\n\n  if (copyPaste && selection) {\n    this.register('copy', function() {\n      var selectedElements = selection.get();\n\n      if (selectedElements.length) {\n        return copyPaste.copy(selectedElements);\n      }\n    });\n  }\n\n  if (copyPaste) {\n    this.register('paste', function() {\n      copyPaste.paste();\n    });\n  }\n\n  if (zoomScroll) {\n    this.register('stepZoom', function(opts) {\n      zoomScroll.stepZoom(opts.value);\n    });\n  }\n\n  if (canvas) {\n    this.register('zoom', function(opts) {\n      canvas.zoom(opts.value);\n    });\n  }\n\n  if (modeling && selection && rules) {\n    this.register('removeSelection', function() {\n\n      var selectedElements = selection.get();\n\n      if (!selectedElements.length) {\n        return;\n      }\n\n      var allowed = rules.allowed('elements.delete', { elements: selectedElements }),\n          removableElements;\n\n      if (allowed === false) {\n        return;\n      }\n      else if (isArray(allowed)) {\n        removableElements = allowed;\n      }\n      else {\n        removableElements = selectedElements;\n      }\n\n      if (removableElements.length) {\n        modeling.removeElements(removableElements.slice());\n      }\n    });\n  }\n\n  if (keyboardMove) {\n    this.register('moveCanvas', function(opts) {\n      keyboardMove.moveCanvas(opts);\n    });\n  }\n\n  if (keyboardMoveSelection) {\n    this.register('moveSelection', function(opts) {\n      keyboardMoveSelection.moveSelection(opts.direction, opts.accelerated);\n    });\n  }\n\n};\n\n\n/**\n * Triggers a registered action\n *\n * @param {string} action\n * @param {Object} opts\n *\n * @return {unknown} Returns what the registered listener returns\n */\nEditorActions.prototype.trigger = function(action, opts) {\n  if (!this._actions[action]) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  return this._actions[action](opts);\n};\n\n\n/**\n * Registers a collections of actions.\n * The key of the object will be the name of the action.\n *\n * @example\n *\n * ```javascript\n * var actions = {\n *   spaceTool: function() {\n *     spaceTool.activateSelection();\n *   },\n *   lassoTool: function() {\n *     lassoTool.activateSelection();\n *   }\n * ];\n *\n * editorActions.register(actions);\n *\n * editorActions.isRegistered('spaceTool'); // true\n * ```\n *\n * @param {Object} actions\n */\nEditorActions.prototype.register = function(actions, listener) {\n  var self = this;\n\n  if (typeof actions === 'string') {\n    return this._registerAction(actions, listener);\n  }\n\n  forEach(actions, function(listener, action) {\n    self._registerAction(action, listener);\n  });\n};\n\n/**\n * Registers a listener to an action key\n *\n * @param {string} action\n * @param {Function} listener\n */\nEditorActions.prototype._registerAction = function(action, listener) {\n  if (this.isRegistered(action)) {\n    throw error(action, IS_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = listener;\n};\n\n/**\n * Unregister an existing action\n *\n * @param {string} action\n */\nEditorActions.prototype.unregister = function(action) {\n  if (!this.isRegistered(action)) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = undefined;\n};\n\n/**\n * Returns the identifiers of all currently registered editor actions\n *\n * @return {string[]}\n */\nEditorActions.prototype.getActions = function() {\n  return Object.keys(this._actions);\n};\n\n/**\n * Checks wether the given action is registered\n *\n * @param {string} action\n *\n * @return {boolean}\n */\nEditorActions.prototype.isRegistered = function(action) {\n  return !!this._actions[action];\n};\n\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}\n","import EditorActions from './EditorActions';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'editorActions' ],\n  editorActions: [ 'type', EditorActions ]\n};\n","import inherits from 'inherits-browser';\n\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\nimport { filter } from 'min-dash';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  getBBox\n} from 'diagram-js/lib/util/Elements';\n\n/**\n * @typedef {import('didi').Injector} Injector\n */\n\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\n\ninherits(BpmnEditorActions, EditorActions);\n\nBpmnEditorActions.$inject = [\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nBpmnEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false);\n  var contextPad = injector.get('contextPad', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function() {\n\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n\n      var elements = elementRegistry.filter(function(element) {\n        return element !== rootElement;\n      });\n\n      selection.select(elements);\n\n      return elements;\n    });\n  }\n\n  if (spaceTool) {\n    this._registerAction('spaceTool', function() {\n      spaceTool.toggle();\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function() {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function() {\n      handTool.toggle();\n    });\n  }\n\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function() {\n      globalConnect.toggle();\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function(opts) {\n      var currentSelection = selection.get(),\n          aligneableElements = [],\n          type = opts.type;\n\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function(element) {\n          return !is(element, 'bpmn:Lane');\n        });\n\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n\n  if (selection && modeling) {\n    this._registerAction('setColor', function(opts) {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function() {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n\n  if (searchPad) {\n    this._registerAction('find', function() {\n      searchPad.toggle();\n    });\n  }\n\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function() {\n      var rootElement = canvas.getRootElement(),\n          boundingBox,\n          elements;\n\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function(element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function(element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n\n      boundingBox = getBBox(elements);\n\n      modeling.moveElements(\n        elements,\n        { x: -boundingBox.x, y: -boundingBox.y },\n        rootElement\n      );\n    });\n  }\n\n  if (selection && contextPad) {\n    this._registerAction('replaceElement', function(event) {\n      contextPad.triggerEntry('replace', 'click', event);\n    });\n  }\n\n};\n","import EditorActionsModule from 'diagram-js/lib/features/editor-actions';\n\nimport BpmnEditorActions from './BpmnEditorActions';\n\nexport default {\n  __depends__: [\n    EditorActionsModule\n  ],\n  editorActions: [ 'type', BpmnEditorActions ]\n};\n","import { isAny } from '../modeling/util/ModelingUtil';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n */\r\n\r\n/**\r\n * @param {EventBus} eventBus\r\n */\r\nexport default function BpmnGridSnapping(eventBus) {\r\n  eventBus.on([\r\n    'create.init',\r\n    'shape.move.init'\r\n  ], function(event) {\r\n    var context = event.context,\r\n        shape = event.shape;\r\n\r\n    if (isAny(shape, [\r\n      'bpmn:Participant',\r\n      'bpmn:SubProcess',\r\n      'bpmn:TextAnnotation'\r\n    ])) {\r\n      if (!context.gridSnappingContext) {\r\n        context.gridSnappingContext = {};\r\n      }\r\n\r\n      context.gridSnappingContext.snapLocation = 'top-left';\r\n    }\r\n  });\r\n}\r\n\r\nBpmnGridSnapping.$inject = [ 'eventBus' ];","export var SPACING = 10;\n\nexport function quantize(value, quantum, fn) {\n  if (!fn) {\n    fn = 'round';\n  }\n\n  return Math[ fn ](value / quantum) * quantum;\n}","import {\r\n  setSnapped,\r\n  isSnapped\r\n} from '../snapping/SnapUtil';\r\n\r\nimport { isCmd } from '../keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  assign,\r\n  isNumber\r\n} from 'min-dash';\r\n\r\nimport {\r\n  SPACING,\r\n  quantize\r\n} from './GridUtil';\r\n\r\n/**\r\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\r\n * @typedef {import('../../core/EventBus').default} EventBus\r\n */\r\n\r\nvar LOWER_PRIORITY = 1200;\r\nvar LOW_PRIORITY = 800;\r\n\r\n/**\r\n * Basic grid snapping that covers connecting, creating, moving, resizing shapes, moving bendpoints\r\n * and connection segments.\r\n *\r\n * @param {ElementRegistry} elementRegistry\r\n * @param {EventBus} eventBus\r\n * @param {Object} config\r\n */\r\nexport default function GridSnapping(elementRegistry, eventBus, config) {\r\n\r\n  var active = !config || config.active !== false;\r\n\r\n  this._eventBus = eventBus;\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('diagram.init', LOW_PRIORITY, function() {\r\n    self.setActive(active);\r\n  });\r\n\r\n  eventBus.on([\r\n    'create.move',\r\n    'create.end',\r\n    'bendpoint.move.move',\r\n    'bendpoint.move.end',\r\n    'connect.move',\r\n    'connect.end',\r\n    'connectionSegment.move.move',\r\n    'connectionSegment.move.end',\r\n    'resize.move',\r\n    'resize.end',\r\n    'shape.move.move',\r\n    'shape.move.end'\r\n  ], LOWER_PRIORITY, function(event) {\r\n    var originalEvent = event.originalEvent;\r\n\r\n    if (!self.active || (originalEvent && isCmd(originalEvent))) {\r\n      return;\r\n    }\r\n\r\n    var context = event.context,\r\n        gridSnappingContext = context.gridSnappingContext;\r\n\r\n    if (!gridSnappingContext) {\r\n      gridSnappingContext = context.gridSnappingContext = {};\r\n    }\r\n\r\n    [ 'x', 'y' ].forEach(function(axis) {\r\n      var options = {};\r\n\r\n      // allow snapping with offset\r\n      var snapOffset = getSnapOffset(event, axis, elementRegistry);\r\n\r\n      if (snapOffset) {\r\n        options.offset = snapOffset;\r\n      }\r\n\r\n      // allow snapping with min and max\r\n      var snapConstraints = getSnapConstraints(event, axis);\r\n\r\n      if (snapConstraints) {\r\n        assign(options, snapConstraints);\r\n      }\r\n\r\n      if (!isSnapped(event, axis)) {\r\n        self.snapEvent(event, axis, options);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Snap an events x or y with optional min, max and offset.\r\n *\r\n * @param {Object} event\r\n * @param {string} axis\r\n * @param {number} [options.min]\r\n * @param {number} [options.max]\r\n * @param {number} [options.offset]\r\n */\r\nGridSnapping.prototype.snapEvent = function(event, axis, options) {\r\n  var snappedValue = this.snapValue(event[ axis ], options);\r\n\r\n  setSnapped(event, axis, snappedValue);\r\n};\r\n\r\n/**\r\n * Expose grid spacing for third parties (i.e. extensions).\r\n *\r\n * @return {number} spacing of grid dots\r\n */\r\nGridSnapping.prototype.getGridSpacing = function() {\r\n  return SPACING;\r\n};\r\n\r\n/**\r\n * Snap value with optional min, max and offset.\r\n *\r\n * @param {number} value\r\n * @param {Object} options\r\n * @param {number} [options.min]\r\n * @param {number} [options.max]\r\n * @param {number} [options.offset]\r\n */\r\nGridSnapping.prototype.snapValue = function(value, options) {\r\n  var offset = 0;\r\n\r\n  if (options && options.offset) {\r\n    offset = options.offset;\r\n  }\r\n\r\n  value += offset;\r\n\r\n  value = quantize(value, SPACING);\r\n\r\n  var min, max;\r\n\r\n  if (options && options.min) {\r\n    min = options.min;\r\n\r\n    if (isNumber(min)) {\r\n      min = quantize(min + offset, SPACING, 'ceil');\r\n\r\n      value = Math.max(value, min);\r\n    }\r\n  }\r\n\r\n  if (options && options.max) {\r\n    max = options.max;\r\n\r\n    if (isNumber(max)) {\r\n      max = quantize(max + offset, SPACING, 'floor');\r\n\r\n      value = Math.min(value, max);\r\n    }\r\n  }\r\n\r\n  value -= offset;\r\n\r\n  return value;\r\n};\r\n\r\nGridSnapping.prototype.isActive = function() {\r\n  return this.active;\r\n};\r\n\r\nGridSnapping.prototype.setActive = function(active) {\r\n  this.active = active;\r\n\r\n  this._eventBus.fire('gridSnapping.toggle', { active: active });\r\n};\r\n\r\nGridSnapping.prototype.toggleActive = function() {\r\n  this.setActive(!this.active);\r\n};\r\n\r\nGridSnapping.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'config.gridSnapping'\r\n];\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Get minimum and maximum snap constraints.\r\n * Constraints are cached.\r\n *\r\n * @param {Object} event\r\n * @param {Object} event.context\r\n * @param {string} axis\r\n *\r\n * @return {boolean|Object}\r\n */\r\nfunction getSnapConstraints(event, axis) {\r\n  var context = event.context,\r\n      createConstraints = context.createConstraints,\r\n      resizeConstraints = context.resizeConstraints || {},\r\n      gridSnappingContext = context.gridSnappingContext,\r\n      snapConstraints = gridSnappingContext.snapConstraints;\r\n\r\n  // cache snap constraints\r\n  if (snapConstraints && snapConstraints[ axis ]) {\r\n    return snapConstraints[ axis ];\r\n  }\r\n\r\n  if (!snapConstraints) {\r\n    snapConstraints = gridSnappingContext.snapConstraints = {};\r\n  }\r\n\r\n  if (!snapConstraints[ axis ]) {\r\n    snapConstraints[ axis ] = {};\r\n  }\r\n\r\n  var direction = context.direction;\r\n\r\n  // create\r\n  if (createConstraints) {\r\n    if (isHorizontal(axis)) {\r\n      snapConstraints.x.min = createConstraints.left;\r\n      snapConstraints.x.max = createConstraints.right;\r\n    } else {\r\n      snapConstraints.y.min = createConstraints.top;\r\n      snapConstraints.y.max = createConstraints.bottom;\r\n    }\r\n  }\r\n\r\n  // resize\r\n  var minResizeConstraints = resizeConstraints.min,\r\n      maxResizeConstraints = resizeConstraints.max;\r\n\r\n  if (minResizeConstraints) {\r\n    if (isHorizontal(axis)) {\r\n\r\n      if (isWest(direction)) {\r\n        snapConstraints.x.max = minResizeConstraints.left;\r\n      } else {\r\n        snapConstraints.x.min = minResizeConstraints.right;\r\n      }\r\n\r\n    } else {\r\n\r\n      if (isNorth(direction)) {\r\n        snapConstraints.y.max = minResizeConstraints.top;\r\n      } else {\r\n        snapConstraints.y.min = minResizeConstraints.bottom;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  if (maxResizeConstraints) {\r\n    if (isHorizontal(axis)) {\r\n\r\n      if (isWest(direction)) {\r\n        snapConstraints.x.min = maxResizeConstraints.left;\r\n      } else {\r\n        snapConstraints.x.max = maxResizeConstraints.right;\r\n      }\r\n\r\n    } else {\r\n\r\n      if (isNorth(direction)) {\r\n        snapConstraints.y.min = maxResizeConstraints.top;\r\n      } else {\r\n        snapConstraints.y.max = maxResizeConstraints.bottom;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  return snapConstraints[ axis ];\r\n}\r\n\r\n/**\r\n * Get snap offset.\r\n * Offset is cached.\r\n *\r\n * @param {Object} event\r\n * @param {string} axis\r\n * @param {ElementRegistry} elementRegistry\r\n *\r\n * @return {number}\r\n */\r\nfunction getSnapOffset(event, axis, elementRegistry) {\r\n  var context = event.context,\r\n      shape = event.shape,\r\n      gridSnappingContext = context.gridSnappingContext,\r\n      snapLocation = gridSnappingContext.snapLocation,\r\n      snapOffset = gridSnappingContext.snapOffset;\r\n\r\n  // cache snap offset\r\n  if (snapOffset && isNumber(snapOffset[ axis ])) {\r\n    return snapOffset[ axis ];\r\n  }\r\n\r\n  if (!snapOffset) {\r\n    snapOffset = gridSnappingContext.snapOffset = {};\r\n  }\r\n\r\n  if (!isNumber(snapOffset[ axis ])) {\r\n    snapOffset[ axis ] = 0;\r\n  }\r\n\r\n  if (!shape) {\r\n    return snapOffset[ axis ];\r\n  }\r\n\r\n  if (!elementRegistry.get(shape.id)) {\r\n\r\n    if (isHorizontal(axis)) {\r\n      snapOffset[ axis ] += shape[ axis ] + shape.width / 2;\r\n    } else {\r\n      snapOffset[ axis ] += shape[ axis ] + shape.height / 2;\r\n    }\r\n  }\r\n\r\n  if (!snapLocation) {\r\n    return snapOffset[ axis ];\r\n  }\r\n\r\n  if (axis === 'x') {\r\n    if (/left/.test(snapLocation)) {\r\n      snapOffset[ axis ] -= shape.width / 2;\r\n    } else if (/right/.test(snapLocation)) {\r\n      snapOffset[ axis ] += shape.width / 2;\r\n    }\r\n  } else {\r\n    if (/top/.test(snapLocation)) {\r\n      snapOffset[ axis ] -= shape.height / 2;\r\n    } else if (/bottom/.test(snapLocation)) {\r\n      snapOffset[ axis ] += shape.height / 2;\r\n    }\r\n  }\r\n\r\n  return snapOffset[ axis ];\r\n}\r\n\r\nfunction isHorizontal(axis) {\r\n  return axis === 'x';\r\n}\r\n\r\nfunction isNorth(direction) {\r\n  return direction.indexOf('n') !== -1;\r\n}\r\n\r\nfunction isWest(direction) {\r\n  return direction.indexOf('w') !== -1;\r\n}","import inherits from 'inherits-browser';\r\n\r\nimport CommandInterceptor from '../../../command/CommandInterceptor';\r\n\r\nimport {\r\n  assign,\r\n  isString\r\n} from 'min-dash';\r\n\r\n/**\r\n * @typedef {import('../../../model/Types').Shape} Shape\r\n *\r\n * @typedef {import('../../../util/Types').Rect} Rect\r\n *\r\n * @typedef {import('../../../core/EventBus').default} EventBus\r\n * @typedef {import('../../grid-snapping/GridSnapping').default} GridSnapping\r\n */\r\n\r\n/**\r\n * Integrates resizing with grid snapping.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {GridSnapping} gridSnapping\r\n */\r\nexport default function ResizeBehavior(eventBus, gridSnapping) {\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n  this._gridSnapping = gridSnapping;\r\n\r\n  var self = this;\r\n\r\n  this.preExecute('shape.resize', function(event) {\r\n    var context = event.context,\r\n        hints = context.hints || {},\r\n        autoResize = hints.autoResize;\r\n\r\n    if (!autoResize) {\r\n      return;\r\n    }\r\n\r\n    var shape = context.shape,\r\n        newBounds = context.newBounds;\r\n\r\n    if (isString(autoResize)) {\r\n      context.newBounds = self.snapComplex(newBounds, autoResize);\r\n    } else {\r\n      context.newBounds = self.snapSimple(shape, newBounds);\r\n    }\r\n  });\r\n}\r\n\r\nResizeBehavior.$inject = [\r\n  'eventBus',\r\n  'gridSnapping',\r\n  'modeling'\r\n];\r\n\r\ninherits(ResizeBehavior, CommandInterceptor);\r\n\r\n/**\r\n * Snap width and height in relation to center.\r\n *\r\n * @param {Shape} shape\r\n * @param {Rect} newBounds\r\n *\r\n * @return {Rect} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapSimple = function(shape, newBounds) {\r\n  var gridSnapping = this._gridSnapping;\r\n\r\n  newBounds.width = gridSnapping.snapValue(newBounds.width, {\r\n    min: newBounds.width\r\n  });\r\n\r\n  newBounds.height = gridSnapping.snapValue(newBounds.height, {\r\n    min: newBounds.height\r\n  });\r\n\r\n  newBounds.x = shape.x + (shape.width / 2) - (newBounds.width / 2);\r\n  newBounds.y = shape.y + (shape.height / 2) - (newBounds.height / 2);\r\n\r\n  return newBounds;\r\n};\r\n\r\n/**\r\n * Snap x, y, width and height according to given directions.\r\n *\r\n * @param {Rect} newBounds\r\n * @param {string} directions - Directions as {n|w|s|e}.\r\n *\r\n * @return {Rect} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapComplex = function(newBounds, directions) {\r\n  if (/w|e/.test(directions)) {\r\n    newBounds = this.snapHorizontally(newBounds, directions);\r\n  }\r\n\r\n  if (/n|s/.test(directions)) {\r\n    newBounds = this.snapVertically(newBounds, directions);\r\n  }\r\n\r\n  return newBounds;\r\n};\r\n\r\n/**\r\n * Snap in one or both directions horizontally.\r\n *\r\n * @param {Rect} newBounds\r\n * @param {string} directions - Directions as {n|w|s|e}.\r\n *\r\n * @return {Rect} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapHorizontally = function(newBounds, directions) {\r\n  var gridSnapping = this._gridSnapping,\r\n      west = /w/.test(directions),\r\n      east = /e/.test(directions);\r\n\r\n  var snappedNewBounds = {};\r\n\r\n  snappedNewBounds.width = gridSnapping.snapValue(newBounds.width, {\r\n    min: newBounds.width\r\n  });\r\n\r\n  if (east) {\r\n\r\n    // handle <we>\r\n    if (west) {\r\n      snappedNewBounds.x = gridSnapping.snapValue(newBounds.x, {\r\n        max: newBounds.x\r\n      });\r\n\r\n      snappedNewBounds.width += gridSnapping.snapValue(newBounds.x - snappedNewBounds.x, {\r\n        min: newBounds.x - snappedNewBounds.x\r\n      });\r\n    }\r\n\r\n    // handle <e>\r\n    else {\r\n      newBounds.x = newBounds.x + newBounds.width - snappedNewBounds.width;\r\n    }\r\n  }\r\n\r\n  // assign snapped x and width\r\n  assign(newBounds, snappedNewBounds);\r\n\r\n  return newBounds;\r\n};\r\n\r\n/**\r\n * Snap in one or both directions vertically.\r\n *\r\n * @param {Rect} newBounds\r\n * @param {string} directions - Directions as {n|w|s|e}.\r\n *\r\n * @return {Rect} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapVertically = function(newBounds, directions) {\r\n  var gridSnapping = this._gridSnapping,\r\n      north = /n/.test(directions),\r\n      south = /s/.test(directions);\r\n\r\n  var snappedNewBounds = {};\r\n\r\n  snappedNewBounds.height = gridSnapping.snapValue(newBounds.height, {\r\n    min: newBounds.height\r\n  });\r\n\r\n  if (north) {\r\n\r\n    // handle <ns>\r\n    if (south) {\r\n      snappedNewBounds.y = gridSnapping.snapValue(newBounds.y, {\r\n        max: newBounds.y\r\n      });\r\n\r\n      snappedNewBounds.height += gridSnapping.snapValue(newBounds.y - snappedNewBounds.y, {\r\n        min: newBounds.y - snappedNewBounds.y\r\n      });\r\n    }\r\n\r\n    // handle <n>\r\n    else {\r\n      newBounds.y = newBounds.y + newBounds.height - snappedNewBounds.height;\r\n    }\r\n  }\r\n\r\n  // assign snapped y and height\r\n  assign(newBounds, snappedNewBounds);\r\n\r\n  return newBounds;\r\n};","/**\r\n * @typedef {import('../../../core/EventBus').default} EventBus\r\n * @typedef {import('../../grid-snapping/GridSnapping').default} GridSnapping\r\n */\r\n\r\nvar HIGH_PRIORITY = 2000;\r\n\r\n/**\r\n * Integrates space tool with grid snapping.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {GridSnapping} gridSnapping\r\n */\r\nexport default function SpaceToolBehavior(eventBus, gridSnapping) {\r\n  eventBus.on([\r\n    'spaceTool.move',\r\n    'spaceTool.end'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context;\r\n\r\n    if (!context.initialized) {\r\n      return;\r\n    }\r\n\r\n    var axis = context.axis;\r\n\r\n    var snapped;\r\n\r\n    if (axis === 'x') {\r\n\r\n      // snap delta x to multiple of 10\r\n      snapped = gridSnapping.snapValue(event.dx);\r\n\r\n      event.x = event.x + snapped - event.dx;\r\n      event.dx = snapped;\r\n    } else {\r\n\r\n      // snap delta y to multiple of 10\r\n      snapped = gridSnapping.snapValue(event.dy);\r\n\r\n      event.y = event.y + snapped - event.dy;\r\n      event.dy = snapped;\r\n    }\r\n  });\r\n}\r\n\r\nSpaceToolBehavior.$inject = [\r\n  'eventBus',\r\n  'gridSnapping'\r\n];","import ResizeBehavior from './ResizeBehavior';\r\nimport SpaceToolBehavior from './SpaceToolBehavior';\r\n\r\nexport default {\r\n  __init__: [\r\n    'gridSnappingResizeBehavior',\r\n    'gridSnappingSpaceToolBehavior'\r\n  ],\r\n  gridSnappingResizeBehavior: [ 'type', ResizeBehavior ],\r\n  gridSnappingSpaceToolBehavior: [ 'type', SpaceToolBehavior ]\r\n};","import GridSnapping from './GridSnapping';\r\n\r\nimport GridSnappingBehaviorModule from './behavior';\r\n\r\n\r\n/**\r\n * @type { import('didi').ModuleDeclaration }\r\n */\r\nexport default {\r\n  __depends__: [ GridSnappingBehaviorModule ],\r\n  __init__: [ 'gridSnapping' ],\r\n  gridSnapping: [ 'type', GridSnapping ]\r\n};","import { getNewShapePosition } from '../../auto-place/BpmnAutoPlaceUtil';\r\n\r\nimport { getMid } from 'diagram-js/lib/layout/LayoutUtil';\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\r\n * @typedef {import('diagram-js/lib/features/grid-snapping/GridSnapping').default} GridSnapping\r\n *\r\n * @typedef {import('diagram-js/lib/util/Types').Axis} Axis\r\n */\r\n\r\nvar HIGH_PRIORITY = 2000;\r\n\r\n/**\r\n * @param {EventBus} eventBus\r\n * @param {GridSnapping} gridSnapping\r\n * @param {ElementRegistry} elementRegistry\r\n */\r\nexport default function GridSnappingAutoPlaceBehavior(eventBus, gridSnapping, elementRegistry) {\r\n  eventBus.on('autoPlace', HIGH_PRIORITY, function(context) {\r\n    var source = context.source,\r\n        sourceMid = getMid(source),\r\n        shape = context.shape;\r\n\r\n    var position = getNewShapePosition(source, shape, elementRegistry);\r\n\r\n    [ 'x', 'y' ].forEach(function(axis) {\r\n      var options = {};\r\n\r\n      // do not snap if x/y equal\r\n      if (position[ axis ] === sourceMid[ axis ]) {\r\n        return;\r\n      }\r\n\r\n      if (position[ axis ] > sourceMid[ axis ]) {\r\n        options.min = position[ axis ];\r\n      } else {\r\n        options.max = position[ axis ];\r\n      }\r\n\r\n      if (is(shape, 'bpmn:TextAnnotation')) {\r\n\r\n        if (isHorizontal(axis)) {\r\n          options.offset = -shape.width / 2;\r\n        } else {\r\n          options.offset = -shape.height / 2;\r\n        }\r\n\r\n      }\r\n\r\n      position[ axis ] = gridSnapping.snapValue(position[ axis ], options);\r\n\r\n    });\r\n\r\n    // must be returned to be considered by auto place\r\n    return position;\r\n  });\r\n}\r\n\r\nGridSnappingAutoPlaceBehavior.$inject = [\r\n  'eventBus',\r\n  'gridSnapping',\r\n  'elementRegistry'\r\n];\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * @param {Axis} axis\r\n *\r\n * @return {boolean}\r\n */\r\nfunction isHorizontal(axis) {\r\n  return axis === 'x';\r\n}","import { is } from '../../../util/ModelUtil';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n * @typedef {import('diagram-js/lib/features/grid-snapping/GridSnapping').default} GridSnapping\r\n */\r\n\r\nvar HIGHER_PRIORITY = 1750;\r\n\r\n/**\r\n * @param {Canvas} canvas\r\n * @param {EventBus} eventBus\r\n * @param {GridSnapping} gridSnapping\r\n */\r\nexport default function GridSnappingParticipantBehavior(canvas, eventBus, gridSnapping) {\r\n  eventBus.on([\r\n    'create.start',\r\n    'shape.move.start'\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        rootElement = canvas.getRootElement();\r\n\r\n    if (!is(shape, 'bpmn:Participant') ||\r\n      !is(rootElement, 'bpmn:Process') ||\r\n      !rootElement.children.length) {\r\n      return;\r\n    }\r\n\r\n    var createConstraints = context.createConstraints;\r\n\r\n    if (!createConstraints) {\r\n      return;\r\n    }\r\n\r\n    shape.width = gridSnapping.snapValue(shape.width, { min: shape.width });\r\n    shape.height = gridSnapping.snapValue(shape.height, { min: shape.height });\r\n  });\r\n}\r\n\r\nGridSnappingParticipantBehavior.$inject = [\r\n  'canvas',\r\n  'eventBus',\r\n  'gridSnapping'\r\n];","import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { pointsAligned } from 'diagram-js/lib/util/Geometry';\n\nimport {\n  assign\n} from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/features/grid-snapping/GridSnapping').default} GridSnapping\n * @typedef {import('../../modeling/Modeling').default} Modeling\n *\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\n */\n\nvar HIGH_PRIORITY = 3000;\n\n\n/**\n * Snaps connections with Manhattan layout.\n *\n * @param {EventBus} eventBus\n * @param {GridSnapping} gridSnapping\n * @param {Modeling} modeling\n */\nexport default function GridSnappingLayoutConnectionBehavior(eventBus, gridSnapping, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  this._gridSnapping = gridSnapping;\n\n  var self = this;\n\n  this.postExecuted([\n    'connection.create',\n    'connection.layout'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        connection = context.connection,\n        hints = context.hints || {},\n        waypoints = connection.waypoints;\n\n    if (hints.connectionStart || hints.connectionEnd || hints.createElementsBehavior === false) {\n      return;\n    }\n\n    if (!hasMiddleSegments(waypoints)) {\n      return;\n    }\n\n    modeling.updateWaypoints(connection, self.snapMiddleSegments(waypoints));\n  });\n}\n\nGridSnappingLayoutConnectionBehavior.$inject = [\n  'eventBus',\n  'gridSnapping',\n  'modeling'\n];\n\ninherits(GridSnappingLayoutConnectionBehavior, CommandInterceptor);\n\n/**\n * Snap middle segments of a given connection.\n *\n * @param {Point[]} waypoints\n *\n * @return {Point[]}\n */\nGridSnappingLayoutConnectionBehavior.prototype.snapMiddleSegments = function(waypoints) {\n  var gridSnapping = this._gridSnapping,\n      snapped;\n\n  waypoints = waypoints.slice();\n\n  for (var i = 1; i < waypoints.length - 2; i++) {\n\n    snapped = snapSegment(gridSnapping, waypoints[i], waypoints[i + 1]);\n\n    waypoints[i] = snapped[0];\n    waypoints[i + 1] = snapped[1];\n  }\n\n  return waypoints;\n};\n\n\n// helpers //////////\n\n/**\n * Check whether a connection has a middle segments.\n *\n * @param {Point[]} waypoints\n *\n * @return {boolean}\n */\nfunction hasMiddleSegments(waypoints) {\n  return waypoints.length > 3;\n}\n\n/**\n * Check whether an alignment is horizontal.\n *\n * @param {string} aligned\n *\n * @return {boolean}\n */\nfunction horizontallyAligned(aligned) {\n  return aligned === 'h';\n}\n\n/**\n * Check whether an alignment is vertical.\n *\n * @param {string} aligned\n *\n * @return {boolean}\n */\nfunction verticallyAligned(aligned) {\n  return aligned === 'v';\n}\n\n/**\n * Get middle segments from a given connection.\n *\n * @param {Point[]} waypoints\n *\n * @return {Point[]}\n */\nfunction snapSegment(gridSnapping, segmentStart, segmentEnd) {\n\n  var aligned = pointsAligned(segmentStart, segmentEnd);\n\n  var snapped = {};\n\n  if (horizontallyAligned(aligned)) {\n\n    // snap horizontally\n    snapped.y = gridSnapping.snapValue(segmentStart.y);\n  }\n\n  if (verticallyAligned(aligned)) {\n\n    // snap vertically\n    snapped.x = gridSnapping.snapValue(segmentStart.x);\n  }\n\n  if ('x' in snapped || 'y' in snapped) {\n    segmentStart = assign({}, segmentStart, snapped);\n    segmentEnd = assign({}, segmentEnd, snapped);\n  }\n\n  return [ segmentStart, segmentEnd ];\n}","import GridSnappingAutoPlaceBehavior from './GridSnappingAutoPlaceBehavior';\r\nimport GridSnappingParticipantBehavior from './GridSnappingParticipantBehavior';\r\nimport GridSnappingLayoutConnectionBehavior from './GridSnappingLayoutConnectionBehavior';\r\n\r\nexport default {\r\n  __init__: [\r\n    'gridSnappingAutoPlaceBehavior',\r\n    'gridSnappingParticipantBehavior',\r\n    'gridSnappingLayoutConnectionBehavior',\r\n  ],\r\n  gridSnappingAutoPlaceBehavior: [ 'type', GridSnappingAutoPlaceBehavior ],\r\n  gridSnappingParticipantBehavior: [ 'type', GridSnappingParticipantBehavior ],\r\n  gridSnappingLayoutConnectionBehavior: [ 'type', GridSnappingLayoutConnectionBehavior ]\r\n};","import BpmnGridSnapping from './BpmnGridSnapping';\r\nimport GridSnappingModule from 'diagram-js/lib/features/grid-snapping';\r\n\r\nimport GridSnappingBehaviorModule from './behavior';\r\n\r\nexport default {\r\n  __depends__: [\r\n    GridSnappingModule,\r\n    GridSnappingBehaviorModule\r\n  ],\r\n  __init__: [ 'bpmnGridSnapping' ],\r\n  bpmnGridSnapping: [ 'type', BpmnGridSnapping ]\r\n};","import { is } from '../../util/ModelUtil';\n\nimport {\n  isExpanded,\n  isHorizontal\n} from '../../util/DiUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/features/interaction-events/InteractionEvents').default} InteractionEvents\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n */\n\nvar LABEL_WIDTH = 30,\n    LABEL_HEIGHT = 30;\n\n\n/**\n * BPMN-specific hit zones and interaction fixes.\n *\n * @param {EventBus} eventBus\n * @param {InteractionEvents} interactionEvents\n */\nexport default function BpmnInteractionEvents(eventBus, interactionEvents) {\n\n  this._interactionEvents = interactionEvents;\n\n  var self = this;\n\n  eventBus.on([\n    'interactionEvents.createHit',\n    'interactionEvents.updateHit'\n  ], function(context) {\n    var element = context.element,\n        gfx = context.gfx;\n\n    if (is(element, 'bpmn:Lane')) {\n      return self._createParticipantHit(element, gfx);\n    } else\n\n    if (is(element, 'bpmn:Participant')) {\n      if (isExpanded(element)) {\n        return self._createParticipantHit(element, gfx);\n      } else {\n        return self._createDefaultHit(element, gfx);\n      }\n    } else\n\n    if (is(element, 'bpmn:SubProcess')) {\n      if (isExpanded(element)) {\n        return self._createSubProcessHit(element, gfx);\n      } else {\n        return self._createDefaultHit(element, gfx);\n      }\n    }\n  });\n\n}\n\nBpmnInteractionEvents.$inject = [\n  'eventBus',\n  'interactionEvents'\n];\n\n/**\n * @param {Element} element\n * @param {SVGElement} gfx\n *\n * @return {boolean}\n */\nBpmnInteractionEvents.prototype._createDefaultHit = function(element, gfx) {\n  this._interactionEvents.removeHits(gfx);\n\n  this._interactionEvents.createDefaultHit(element, gfx);\n\n  // indicate that we created a hit\n  return true;\n};\n\n/**\n * @param {Shape} element\n * @param {SVGElement} gfx\n *\n * @return {boolean}\n */\nBpmnInteractionEvents.prototype._createParticipantHit = function(element, gfx) {\n\n  // remove existing hits\n  this._interactionEvents.removeHits(gfx);\n\n  // add body hit\n  this._interactionEvents.createBoxHit(gfx, 'no-move', {\n    width: element.width,\n    height: element.height\n  });\n\n  // add outline hit\n  this._interactionEvents.createBoxHit(gfx, 'click-stroke', {\n    width: element.width,\n    height: element.height\n  });\n\n  // add label hit\n  var box = isHorizontal(element) ? {\n    width: LABEL_WIDTH,\n    height: element.height\n  } : {\n    width: element.width,\n    height: LABEL_HEIGHT\n  };\n\n  this._interactionEvents.createBoxHit(gfx, 'all', box);\n\n  // indicate that we created a hit\n  return true;\n};\n\n/**\n * @param {Shape} element\n * @param {SVGElement} gfx\n *\n * @return {boolean}\n */\nBpmnInteractionEvents.prototype._createSubProcessHit = function(element, gfx) {\n\n  // remove existing hits\n  this._interactionEvents.removeHits(gfx);\n\n  // add body hit\n  this._interactionEvents.createBoxHit(gfx, 'no-move', {\n    width: element.width,\n    height: element.height\n  });\n\n  // add outline hit\n  this._interactionEvents.createBoxHit(gfx, 'click-stroke', {\n    width: element.width,\n    height: element.height\n  });\n\n  // add label hit\n  this._interactionEvents.createBoxHit(gfx, 'all', {\n    width: element.width,\n    height: LABEL_HEIGHT\n  });\n\n  // indicate that we created a hit\n  return true;\n};","import BpmnInteractionEvents from './BpmnInteractionEvents';\n\nexport default {\n  __init__: [ 'bpmnInteractionEvents' ],\n  bpmnInteractionEvents: [ 'type', BpmnInteractionEvents ]\n};","import inherits from 'inherits-browser';\n\nimport KeyboardBindings from 'diagram-js/lib/features/keyboard/KeyboardBindings';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('diagram-js/lib/features/editor-actions/EditorActions').default} EditorActions\n * @typedef {import('diagram-js/lib/features/keyboard/Keyboard').default} Keyboard\n */\n\n/**\n * BPMN 2.0 specific keyboard bindings.\n *\n * @param {Injector} injector\n */\nexport default function BpmnKeyboardBindings(injector) {\n  injector.invoke(KeyboardBindings, this);\n}\n\ninherits(BpmnKeyboardBindings, KeyboardBindings);\n\nBpmnKeyboardBindings.$inject = [\n  'injector'\n];\n\n\n/**\n * Register available keyboard bindings.\n *\n * @param {Keyboard} keyboard\n * @param {EditorActions} editorActions\n */\nBpmnKeyboardBindings.prototype.registerBindings = function(keyboard, editorActions) {\n\n  // inherit default bindings\n  KeyboardBindings.prototype.registerBindings.call(this, keyboard, editorActions);\n\n  /**\n   * Add keyboard binding if respective editor action\n   * is registered.\n   *\n   * @param {string} action name\n   * @param {Function} fn that implements the key binding\n   */\n  function addListener(action, fn) {\n\n    if (editorActions.isRegistered(action)) {\n      keyboard.addListener(fn);\n    }\n  }\n\n  // select all elements\n  // CTRL + A\n  addListener('selectElements', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.isKey([ 'a', 'A' ], event) && keyboard.isCmd(event)) {\n      editorActions.trigger('selectElements');\n\n      return true;\n    }\n  });\n\n  // search labels\n  // CTRL + F\n  addListener('find', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.isKey([ 'f', 'F' ], event) && keyboard.isCmd(event)) {\n      editorActions.trigger('find');\n\n      return true;\n    }\n  });\n\n  // activate space tool\n  // S\n  addListener('spaceTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([ 's', 'S' ], event)) {\n      editorActions.trigger('spaceTool');\n\n      return true;\n    }\n  });\n\n  // activate lasso tool\n  // L\n  addListener('lassoTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([ 'l', 'L' ], event)) {\n      editorActions.trigger('lassoTool');\n\n      return true;\n    }\n  });\n\n  // activate hand tool\n  // H\n  addListener('handTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([ 'h', 'H' ], event)) {\n      editorActions.trigger('handTool');\n\n      return true;\n    }\n  });\n\n  // activate global connect tool\n  // C\n  addListener('globalConnectTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([ 'c', 'C' ], event)) {\n      editorActions.trigger('globalConnectTool');\n\n      return true;\n    }\n  });\n\n  // activate direct editing\n  // E\n  addListener('directEditing', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([ 'e', 'E' ], event)) {\n      editorActions.trigger('directEditing');\n\n      return true;\n    }\n  });\n\n  // activate replace element\n  // R\n  addListener('replaceElement', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([ 'r', 'R' ], event)) {\n      editorActions.trigger('replaceElement', event);\n\n      return true;\n    }\n  });\n\n};","import KeyboardModule from 'diagram-js/lib/features/keyboard';\n\nimport BpmnKeyboardBindings from './BpmnKeyboardBindings';\n\nexport default {\n  __depends__: [\n    KeyboardModule\n  ],\n  __init__: [ 'keyboardBindings' ],\n  keyboardBindings: [ 'type', BpmnKeyboardBindings ]\n};\n","import {\n  assign\n} from 'min-dash';\n\n/**\n * @typedef {import('../keyboard/Keyboard').default} Keyboard\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n * @typedef {import('../selection/Selection').default} Selection\n */\n\nvar DEFAULT_CONFIG = {\n  moveSpeed: 1,\n  moveSpeedAccelerated: 10\n};\n\nvar HIGHER_PRIORITY = 1500;\n\nvar LEFT = 'left';\nvar UP = 'up';\nvar RIGHT = 'right';\nvar DOWN = 'down';\n\nvar KEY_TO_DIRECTION = {\n  ArrowLeft: LEFT,\n  Left: LEFT,\n  ArrowUp: UP,\n  Up: UP,\n  ArrowRight: RIGHT,\n  Right: RIGHT,\n  ArrowDown: DOWN,\n  Down: DOWN\n};\n\nvar DIRECTIONS_DELTA = {\n  left: function(speed) {\n    return {\n      x: -speed,\n      y: 0\n    };\n  },\n  up: function(speed) {\n    return {\n      x: 0,\n      y: -speed\n    };\n  },\n  right: function(speed) {\n    return {\n      x: speed,\n      y: 0\n    };\n  },\n  down: function(speed) {\n    return {\n      x: 0,\n      y: speed\n    };\n  }\n};\n\n\n/**\n * Enables to move selection with keyboard arrows.\n * Use with Shift for modified speed (default=1, with Shift=10).\n * Pressed Cmd/Ctrl turns the feature off.\n *\n * @param {Object} config\n * @param {number} [config.moveSpeed=1]\n * @param {number} [config.moveSpeedAccelerated=10]\n * @param {Keyboard} keyboard\n * @param {Modeling} modeling\n * @param {Rules} rules\n * @param {Selection} selection\n */\nexport default function KeyboardMoveSelection(\n    config,\n    keyboard,\n    modeling,\n    rules,\n    selection\n) {\n\n  var self = this;\n\n  this._config = assign({}, DEFAULT_CONFIG, config || {});\n\n  keyboard.addListener(HIGHER_PRIORITY, function(event) {\n\n    var keyEvent = event.keyEvent;\n\n    var direction = KEY_TO_DIRECTION[keyEvent.key];\n\n    if (!direction) {\n      return;\n    }\n\n    if (keyboard.isCmd(keyEvent)) {\n      return;\n    }\n\n    var accelerated = keyboard.isShift(keyEvent);\n\n    self.moveSelection(direction, accelerated);\n\n    return true;\n  });\n\n\n  /**\n   * Move selected elements in the given direction,\n   * optionally specifying accelerated movement.\n   *\n   * @param {string} direction\n   * @param {boolean} [accelerated=false]\n   */\n  this.moveSelection = function(direction, accelerated) {\n\n    var selectedElements = selection.get();\n\n    if (!selectedElements.length) {\n      return;\n    }\n\n    var speed = this._config[\n      accelerated ?\n        'moveSpeedAccelerated' :\n        'moveSpeed'\n    ];\n\n    var delta = DIRECTIONS_DELTA[direction](speed);\n\n    var canMove = rules.allowed('elements.move', {\n      shapes: selectedElements\n    });\n\n    if (canMove) {\n      modeling.moveElements(selectedElements, delta);\n    }\n  };\n\n}\n\nKeyboardMoveSelection.$inject = [\n  'config.keyboardMoveSelection',\n  'keyboard',\n  'modeling',\n  'rules',\n  'selection'\n];","import KeyboardModule from '../keyboard';\nimport SelectionModule from '../selection';\n\nimport KeyboardMoveSelection from './KeyboardMoveSelection';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    KeyboardModule,\n    SelectionModule\n  ],\n  __init__: [\n    'keyboardMoveSelection'\n  ],\n  keyboardMoveSelection: [ 'type', KeyboardMoveSelection ]\n};\n","import {\n  pick,\n  assign\n} from 'min-dash';\n\nimport {\n  resizeBounds,\n  ensureConstraints,\n  computeChildrenBBox,\n  getMinResizeBounds\n} from './ResizeUtil';\n\nimport {\n  asTRBL,\n  getMid,\n  roundBounds\n} from '../../layout/LayoutUtil';\n\n/**\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../../util/Types').Direction} Direction\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n */\n\nvar DEFAULT_MIN_WIDTH = 10;\n\n\n/**\n * A component that provides resizing of shapes on the canvas.\n *\n * The following components are part of shape resize:\n *\n *  * adding resize handles,\n *  * creating a visual during resize\n *  * checking resize rules\n *  * committing a change once finished\n *\n *\n * ## Customizing\n *\n * It's possible to customize the resizing behaviour by intercepting 'resize.start'\n * and providing the following parameters through the 'context':\n *\n *   * minDimensions ({ width, height }): minimum shape dimensions\n *\n *   * childrenBoxPadding ({ left, top, bottom, right } || number):\n *     gap between the minimum bounding box and the container\n *\n * f.ex:\n *\n * ```javascript\n * eventBus.on('resize.start', 1500, function(event) {\n *   var context = event.context,\n *\n *  context.minDimensions = { width: 140, height: 120 };\n *\n *  // Passing general padding\n *  context.childrenBoxPadding = 30;\n *\n *  // Passing padding to a specific side\n *  context.childrenBoxPadding.left = 20;\n * });\n * ```\n *\n * @param {EventBus} eventBus\n * @param {Rules} rules\n * @param {Modeling} modeling\n * @param {Dragging} dragging\n */\nexport default function Resize(eventBus, rules, modeling, dragging) {\n\n  this._dragging = dragging;\n  this._rules = rules;\n\n  var self = this;\n\n\n  /**\n   * Handle resize move by specified delta.\n   *\n   * @param {Object} context\n   * @param {Point} delta\n   */\n  function handleMove(context, delta) {\n\n    var shape = context.shape,\n        direction = context.direction,\n        resizeConstraints = context.resizeConstraints,\n        newBounds;\n\n    context.delta = delta;\n\n    newBounds = resizeBounds(shape, direction, delta);\n\n    // ensure constraints during resize\n    context.newBounds = ensureConstraints(newBounds, resizeConstraints);\n\n    // update + cache executable state\n    context.canExecute = self.canResize(context);\n  }\n\n  /**\n   * Handle resize start.\n   *\n   * @param {Object} context\n   */\n  function handleStart(context) {\n\n    var resizeConstraints = context.resizeConstraints,\n\n        // evaluate minBounds for backwards compatibility\n        minBounds = context.minBounds;\n\n    if (resizeConstraints !== undefined) {\n      return;\n    }\n\n    if (minBounds === undefined) {\n      minBounds = self.computeMinResizeBox(context);\n    }\n\n    context.resizeConstraints = {\n      min: asTRBL(minBounds)\n    };\n  }\n\n  /**\n   * Handle resize end.\n   *\n   * @param {Object} context\n   */\n  function handleEnd(context) {\n    var shape = context.shape,\n        canExecute = context.canExecute,\n        newBounds = context.newBounds;\n\n    if (canExecute) {\n\n      // ensure we have actual pixel values for new bounds\n      // (important when zoom level was > 1 during move)\n      newBounds = roundBounds(newBounds);\n\n      if (!boundsChanged(shape, newBounds)) {\n\n        // no resize necessary\n        return;\n      }\n\n      // perform the actual resize\n      modeling.resizeShape(shape, newBounds);\n    }\n  }\n\n\n  eventBus.on('resize.start', function(event) {\n    handleStart(event.context);\n  });\n\n  eventBus.on('resize.move', function(event) {\n    var delta = {\n      x: event.dx,\n      y: event.dy\n    };\n\n    handleMove(event.context, delta);\n  });\n\n  eventBus.on('resize.end', function(event) {\n    handleEnd(event.context);\n  });\n\n}\n\n\nResize.prototype.canResize = function(context) {\n  var rules = this._rules;\n\n  var ctx = pick(context, [ 'newBounds', 'shape', 'delta', 'direction' ]);\n\n  return rules.allowed('shape.resize', ctx);\n};\n\n/**\n * Activate a resize operation.\n *\n * You may specify additional contextual information and must specify a\n * resize direction during activation of the resize event.\n *\n * @param {MouseEvent|TouchEvent} event\n * @param {Shape} shape\n * @param {Object|Direction} contextOrDirection\n */\nResize.prototype.activate = function(event, shape, contextOrDirection) {\n  var dragging = this._dragging,\n      context,\n      direction;\n\n  if (typeof contextOrDirection === 'string') {\n    contextOrDirection = {\n      direction: contextOrDirection\n    };\n  }\n\n  context = assign({ shape: shape }, contextOrDirection);\n\n  direction = context.direction;\n\n  if (!direction) {\n    throw new Error('must provide a direction (n|w|s|e|nw|se|ne|sw)');\n  }\n\n  dragging.init(event, getReferencePoint(shape, direction), 'resize', {\n    autoActivate: true,\n    cursor: getCursor(direction),\n    data: {\n      shape: shape,\n      context: context\n    }\n  });\n};\n\nResize.prototype.computeMinResizeBox = function(context) {\n  var shape = context.shape,\n      direction = context.direction,\n      minDimensions,\n      childrenBounds;\n\n  minDimensions = context.minDimensions || {\n    width: DEFAULT_MIN_WIDTH,\n    height: DEFAULT_MIN_WIDTH\n  };\n\n  // get children bounds\n  childrenBounds = computeChildrenBBox(shape, context.childrenBoxPadding);\n\n  // get correct minimum bounds from given resize direction\n  // basically ensures that the minBounds is max(childrenBounds, minDimensions)\n  return getMinResizeBounds(direction, shape, minDimensions, childrenBounds);\n};\n\n\nResize.$inject = [\n  'eventBus',\n  'rules',\n  'modeling',\n  'dragging'\n];\n\n// helpers //////////\n\nfunction boundsChanged(shape, newBounds) {\n  return shape.x !== newBounds.x ||\n    shape.y !== newBounds.y ||\n    shape.width !== newBounds.width ||\n    shape.height !== newBounds.height;\n}\n\nexport function getReferencePoint(shape, direction) {\n  var mid = getMid(shape),\n      trbl = asTRBL(shape);\n\n  var referencePoint = {\n    x: mid.x,\n    y: mid.y\n  };\n\n  if (direction.indexOf('n') !== -1) {\n    referencePoint.y = trbl.top;\n  } else if (direction.indexOf('s') !== -1) {\n    referencePoint.y = trbl.bottom;\n  }\n\n  if (direction.indexOf('e') !== -1) {\n    referencePoint.x = trbl.right;\n  } else if (direction.indexOf('w') !== -1) {\n    referencePoint.x = trbl.left;\n  }\n\n  return referencePoint;\n}\n\nfunction getCursor(direction) {\n  var prefix = 'resize-';\n\n  if (direction === 'n' || direction === 's') {\n    return prefix + 'ns';\n  } else if (direction === 'e' || direction === 'w') {\n    return prefix + 'ew';\n  } else if (direction === 'nw' || direction === 'se') {\n    return prefix + 'nwse';\n  } else {\n    return prefix + 'nesw';\n  }\n}","var MARKER_RESIZING = 'djs-resizing',\n    MARKER_RESIZE_NOT_OK = 'resize-not-ok';\n\nvar LOW_PRIORITY = 500;\n\nimport {\n  attr as svgAttr,\n  remove as svgRemove,\n  classes as svgClasses\n} from 'tiny-svg';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../preview-support/PreviewSupport').default} PreviewSupport\n */\n\n/**\n * Provides previews for resizing shapes when resizing.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {PreviewSupport} previewSupport\n */\nexport default function ResizePreview(eventBus, canvas, previewSupport) {\n\n  /**\n   * Update resizer frame.\n   *\n   * @param {Object} context\n   */\n  function updateFrame(context) {\n\n    var shape = context.shape,\n        bounds = context.newBounds,\n        frame = context.frame;\n\n    if (!frame) {\n      frame = context.frame = previewSupport.addFrame(shape, canvas.getActiveLayer());\n\n      canvas.addMarker(shape, MARKER_RESIZING);\n    }\n\n    if (bounds.width > 5) {\n      svgAttr(frame, { x: bounds.x, width: bounds.width });\n    }\n\n    if (bounds.height > 5) {\n      svgAttr(frame, { y: bounds.y, height: bounds.height });\n    }\n\n    if (context.canExecute) {\n      svgClasses(frame).remove(MARKER_RESIZE_NOT_OK);\n    } else {\n      svgClasses(frame).add(MARKER_RESIZE_NOT_OK);\n    }\n  }\n\n  /**\n   * Remove resizer frame.\n   *\n   * @param {Object} context\n   */\n  function removeFrame(context) {\n    var shape = context.shape,\n        frame = context.frame;\n\n    if (frame) {\n      svgRemove(context.frame);\n    }\n\n    canvas.removeMarker(shape, MARKER_RESIZING);\n  }\n\n  // add and update previews\n  eventBus.on('resize.move', LOW_PRIORITY, function(event) {\n    updateFrame(event.context);\n  });\n\n  // remove previews\n  eventBus.on('resize.cleanup', function(event) {\n    removeFrame(event.context);\n  });\n\n}\n\nResizePreview.$inject = [\n  'eventBus',\n  'canvas',\n  'previewSupport'\n];","import {\n  bind,\n  forEach\n} from 'min-dash';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  clear as svgClear,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  event as domEvent\n} from 'min-dom';\n\nimport {\n  isPrimaryButton\n} from '../../util/Mouse';\n\nimport {\n  transform\n} from '../../util/SvgTransformUtil';\n\nimport { getReferencePoint } from './Resize';\n\nimport { isConnection } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../resize/Resize').default} Resize\n * @typedef {import('../selection/Selection').default} Selection\n */\n\nvar HANDLE_OFFSET = -6,\n    HANDLE_SIZE = 8,\n    HANDLE_HIT_SIZE = 20;\n\nvar CLS_RESIZER = 'djs-resizer';\n\nvar directions = [ 'n', 'w', 's', 'e', 'nw', 'ne', 'se', 'sw' ];\n\n\n/**\n * This component is responsible for adding resize handles.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Selection} selection\n * @param {Resize} resize\n */\nexport default function ResizeHandles(eventBus, canvas, selection, resize) {\n\n  this._resize = resize;\n  this._canvas = canvas;\n\n  var self = this;\n\n  eventBus.on('selection.changed', function(e) {\n    var newSelection = e.newSelection;\n\n    // remove old selection markers\n    self.removeResizers();\n\n    // add new selection markers ONLY if single selection\n    if (newSelection.length === 1) {\n      forEach(newSelection, bind(self.addResizer, self));\n    }\n  });\n\n  eventBus.on('shape.changed', function(e) {\n    var shape = e.element;\n\n    if (selection.isSelected(shape)) {\n      self.removeResizers();\n\n      self.addResizer(shape);\n    }\n  });\n}\n\n\nResizeHandles.prototype.makeDraggable = function(element, gfx, direction) {\n  var resize = this._resize;\n\n  function startResize(event) {\n\n    // only trigger on left mouse button\n    if (isPrimaryButton(event)) {\n      resize.activate(event, element, direction);\n    }\n  }\n\n  domEvent.bind(gfx, 'mousedown', startResize);\n  domEvent.bind(gfx, 'touchstart', startResize);\n};\n\n\nResizeHandles.prototype._createResizer = function(element, x, y, direction) {\n  var resizersParent = this._getResizersParent();\n\n  var offset = getHandleOffset(direction);\n\n  var group = svgCreate('g');\n\n  svgClasses(group).add(CLS_RESIZER);\n  svgClasses(group).add(CLS_RESIZER + '-' + element.id);\n  svgClasses(group).add(CLS_RESIZER + '-' + direction);\n\n  svgAppend(resizersParent, group);\n\n  var visual = svgCreate('rect');\n\n  svgAttr(visual, {\n    x: -HANDLE_SIZE / 2 + offset.x,\n    y: -HANDLE_SIZE / 2 + offset.y,\n    width: HANDLE_SIZE,\n    height: HANDLE_SIZE\n  });\n\n  svgClasses(visual).add(CLS_RESIZER + '-visual');\n\n  svgAppend(group, visual);\n\n  var hit = svgCreate('rect');\n\n  svgAttr(hit, {\n    x: -HANDLE_HIT_SIZE / 2 + offset.x,\n    y: -HANDLE_HIT_SIZE / 2 + offset.y,\n    width: HANDLE_HIT_SIZE,\n    height: HANDLE_HIT_SIZE\n  });\n\n  svgClasses(hit).add(CLS_RESIZER + '-hit');\n\n  svgAppend(group, hit);\n\n  transform(group, x, y);\n\n  return group;\n};\n\nResizeHandles.prototype.createResizer = function(element, direction) {\n  var point = getReferencePoint(element, direction);\n\n  var resizer = this._createResizer(element, point.x, point.y, direction);\n\n  this.makeDraggable(element, resizer, direction);\n};\n\n// resize handles implementation ///////////////////////////////\n\n/**\n * Add resizers for a given element.\n *\n * @param {Element} element\n */\nResizeHandles.prototype.addResizer = function(element) {\n  var self = this;\n\n  if (isConnection(element) || !this._resize.canResize({ shape: element })) {\n    return;\n  }\n\n  forEach(directions, function(direction) {\n    self.createResizer(element, direction);\n  });\n};\n\n/**\n * Remove all resizers\n */\nResizeHandles.prototype.removeResizers = function() {\n  var resizersParent = this._getResizersParent();\n\n  svgClear(resizersParent);\n};\n\nResizeHandles.prototype._getResizersParent = function() {\n  return this._canvas.getLayer('resizers');\n};\n\nResizeHandles.$inject = [\n  'eventBus',\n  'canvas',\n  'selection',\n  'resize'\n];\n\n// helpers //////////\n\nfunction getHandleOffset(direction) {\n  var offset = {\n    x: 0,\n    y: 0\n  };\n\n  if (direction.indexOf('e') !== -1) {\n    offset.x = -HANDLE_OFFSET;\n  } else if (direction.indexOf('w') !== -1) {\n    offset.x = HANDLE_OFFSET;\n  }\n\n  if (direction.indexOf('s') !== -1) {\n    offset.y = -HANDLE_OFFSET;\n  } else if (direction.indexOf('n') !== -1) {\n    offset.y = HANDLE_OFFSET;\n  }\n\n  return offset;\n}","import RulesModule from '../rules';\nimport DraggingModule from '../dragging';\nimport PreviewSupportModule from '../preview-support';\n\nimport Resize from './Resize';\nimport ResizePreview from './ResizePreview';\nimport ResizeHandles from './ResizeHandles';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    RulesModule,\n    DraggingModule,\n    PreviewSupportModule\n  ],\n  __init__: [\n    'resize',\n    'resizePreview',\n    'resizeHandles'\n  ],\n  resize: [ 'type', Resize ],\n  resizePreview: [ 'type', ResizePreview ],\n  resizeHandles: [ 'type', ResizeHandles ]\n};\n","import {\n  assign\n} from 'min-dash';\n\nimport {\n  getLabel\n} from '../../util/LabelUtil';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\nimport { isAny } from '../modeling/util/ModelingUtil';\n\nimport {\n  isExpanded,\n  isHorizontal\n} from '../../util/DiUtil';\n\nimport {\n  getExternalLabelMid,\n  isLabelExternal,\n  hasExternalLabel,\n  isLabel\n} from '../../util/LabelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../modeling/BpmnFactory').default} BpmnFactory\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js-direct-editing/lib/DirectEditing').default} DirectEditing\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('diagram-js/lib/features/resize/ResizeHandles').default} ResizeHandles\n * @typedef {import('../../draw/TextRenderer').default} TextRenderer\n *\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef { {\n *   bounds: {\n *     x: number;\n *     y: number;\n *     width: number;\n *     height: number;\n *     minWidth?: number;\n *     minHeight?: number;\n *   };\n *   style: Object;\n * } } DirectEditingContext\n */\n\nvar HIGH_PRIORITY = 2000;\n\n/**\n * @param {EventBus} eventBus\n * @param {BpmnFactory} bpmnFactory\n * @param {Canvas} canvas\n * @param {DirectEditing} directEditing\n * @param {Modeling} modeling\n * @param {ResizeHandles} resizeHandles\n * @param {TextRenderer} textRenderer\n */\nexport default function LabelEditingProvider(\n    eventBus, bpmnFactory, canvas, directEditing,\n    modeling, resizeHandles, textRenderer) {\n\n  this._bpmnFactory = bpmnFactory;\n  this._canvas = canvas;\n  this._modeling = modeling;\n  this._textRenderer = textRenderer;\n\n  directEditing.registerProvider(this);\n\n  // listen to dblclick on non-root elements\n  eventBus.on('element.dblclick', function(event) {\n    activateDirectEdit(event.element, true);\n  });\n\n  // complete on followup canvas operation\n  eventBus.on([\n    'autoPlace.start',\n    'canvas.viewbox.changing',\n    'drag.init',\n    'element.mousedown',\n    'popupMenu.open',\n    'root.set',\n    'selection.changed'\n  ], function() {\n    if (directEditing.isActive()) {\n      directEditing.complete();\n    }\n  });\n\n  eventBus.on([\n    'shape.remove',\n    'connection.remove'\n  ], HIGH_PRIORITY, function(event) {\n\n    if (directEditing.isActive(event.element)) {\n      directEditing.cancel();\n    }\n  });\n\n  // cancel on command stack changes\n  eventBus.on([ 'commandStack.changed' ], function(e) {\n    if (directEditing.isActive()) {\n      directEditing.cancel();\n    }\n  });\n\n\n  eventBus.on('directEditing.activate', function(event) {\n    resizeHandles.removeResizers();\n  });\n\n  eventBus.on('create.end', 500, function(event) {\n\n    var context = event.context,\n        element = context.shape,\n        canExecute = event.context.canExecute,\n        isTouch = event.isTouch;\n\n    // TODO(nikku): we need to find a way to support the\n    // direct editing on mobile devices; right now this will\n    // break for desworkflowediting on mobile devices\n    // as it breaks the user interaction workflow\n\n    // TODO(nikku): we should temporarily focus the edited element\n    // here and release the focused viewport after the direct edit\n    // operation is finished\n    if (isTouch) {\n      return;\n    }\n\n    if (!canExecute) {\n      return;\n    }\n\n    if (context.hints && context.hints.createElementsBehavior === false) {\n      return;\n    }\n\n    activateDirectEdit(element);\n  });\n\n  eventBus.on('autoPlace.end', 500, function(event) {\n    activateDirectEdit(event.shape);\n  });\n\n\n  function activateDirectEdit(element, force) {\n    if (force ||\n        isAny(element, [ 'bpmn:Task', 'bpmn:TextAnnotation', 'bpmn:Participant' ]) ||\n        isCollapsedSubProcess(element)) {\n\n      directEditing.activate(element);\n    }\n  }\n\n}\n\nLabelEditingProvider.$inject = [\n  'eventBus',\n  'bpmnFactory',\n  'canvas',\n  'directEditing',\n  'modeling',\n  'resizeHandles',\n  'textRenderer'\n];\n\n\n/**\n * Activate direct editing for activities and text annotations.\n *\n * @param {Element} element\n *\n * @return { {\n *   text: string;\n *   options?: {\n *     autoResize?: boolean;\n *     centerVertically?: boolean;\n *     resizable?: boolean;\n *   }\n * } & DirectEditingContext }\n */\nLabelEditingProvider.prototype.activate = function(element) {\n\n  // text\n  var text = getLabel(element);\n\n  if (text === undefined) {\n    return;\n  }\n\n  var context = {\n    text: text\n  };\n\n  // bounds\n  var bounds = this.getEditingBBox(element);\n\n  assign(context, bounds);\n\n  var options = {};\n  var style = context.style || {};\n\n  // Remove background and border\n  assign(style, {\n    backgroundColor: null,\n    border: null\n  });\n\n  // tasks\n  if (\n    isAny(element, [\n      'bpmn:Task',\n      'bpmn:Participant',\n      'bpmn:Lane',\n      'bpmn:CallActivity'\n    ]) ||\n    isCollapsedSubProcess(element)\n  ) {\n    assign(options, {\n      centerVertically: true\n    });\n  }\n\n  // external labels\n  if (isLabelExternal(element)) {\n    assign(options, {\n      autoResize: true\n    });\n\n    // keep background and border for external labels\n    assign(style, {\n      backgroundColor: '#ffffff',\n      border: '1px solid #ccc'\n    });\n  }\n\n  // text annotations\n  if (is(element, 'bpmn:TextAnnotation')) {\n    assign(options, {\n      resizable: true,\n      autoResize: true\n    });\n\n    // keep background and border for text annotations\n    assign(style, {\n      backgroundColor: '#ffffff',\n      border: '1px solid #ccc'\n    });\n  }\n\n  assign(context, {\n    options: options,\n    style: style\n  });\n\n  return context;\n};\n\n\n/**\n * Get the editing bounding box based on the element's size and position.\n *\n * @param {Element} element\n *\n * @return {DirectEditingContext}\n */\nLabelEditingProvider.prototype.getEditingBBox = function(element) {\n  var canvas = this._canvas;\n\n  var target = element.label || element;\n\n  var bbox = canvas.getAbsoluteBBox(target);\n\n  var mid = {\n    x: bbox.x + bbox.width / 2,\n    y: bbox.y + bbox.height / 2\n  };\n\n  // default position\n  var bounds = { x: bbox.x, y: bbox.y };\n\n  var zoom = canvas.zoom();\n\n  var defaultStyle = this._textRenderer.getDefaultStyle(),\n      externalStyle = this._textRenderer.getExternalStyle();\n\n  // take zoom into account\n  var externalFontSize = externalStyle.fontSize * zoom,\n      externalLineHeight = externalStyle.lineHeight,\n      defaultFontSize = defaultStyle.fontSize * zoom,\n      defaultLineHeight = defaultStyle.lineHeight;\n\n  var style = {\n    fontFamily: this._textRenderer.getDefaultStyle().fontFamily,\n    fontWeight: this._textRenderer.getDefaultStyle().fontWeight\n  };\n\n  // adjust for expanded pools AND lanes\n  if (is(element, 'bpmn:Lane') || isExpandedPool(element)) {\n    var isHorizontalLane = isHorizontal(element);\n\n    var laneBounds = isHorizontalLane ? {\n      width: bbox.height,\n      height: 30 * zoom,\n      x: bbox.x - bbox.height / 2 + (15 * zoom),\n      y: mid.y - (30 * zoom) / 2\n    } : {\n      width: bbox.width,\n      height: 30 * zoom\n    };\n\n    assign(bounds, laneBounds);\n\n    assign(style, {\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight,\n      paddingTop: (7 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (5 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px',\n      transform: isHorizontalLane ? 'rotate(-90deg)' : null\n    });\n  }\n\n\n  // internal labels for collapsed participants\n  if (isCollapsedPool(element)) {\n    var isHorizontalPool = isHorizontal(element);\n\n    var poolBounds = isHorizontalPool ? {\n      width: bbox.width,\n      height: bbox.height\n    } : {\n      width: bbox.height,\n      height: bbox.width,\n      x: mid.x - bbox.height / 2,\n      y: mid.y - bbox.width / 2\n    };\n\n    assign(bounds, poolBounds);\n\n    assign(style, {\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight,\n      paddingTop: (7 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (5 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px',\n      transform: isHorizontalPool ? null : 'rotate(-90deg)'\n    });\n  }\n\n\n  // internal labels for tasks and collapsed call activities\n  // and sub processes\n  if (isAny(element, [ 'bpmn:Task', 'bpmn:CallActivity' ]) ||\n      isCollapsedSubProcess(element)) {\n\n    assign(bounds, {\n      width: bbox.width,\n      height: bbox.height\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight,\n      paddingTop: (7 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (5 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px'\n    });\n  }\n\n\n  // internal labels for expanded sub processes\n  if (isExpandedSubProcess(element)) {\n    assign(bounds, {\n      width: bbox.width,\n      x: bbox.x\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight,\n      paddingTop: (7 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (5 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px'\n    });\n  }\n\n  var width = 90 * zoom,\n      paddingTop = 7 * zoom,\n      paddingBottom = 4 * zoom;\n\n  // external labels for events, data elements, gateways, groups and connections\n  if (target.labelTarget) {\n    assign(bounds, {\n      width: width,\n      height: bbox.height + paddingTop + paddingBottom,\n      x: mid.x - width / 2,\n      y: bbox.y - paddingTop\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + 'px',\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + 'px',\n      paddingBottom: paddingBottom + 'px'\n    });\n  }\n\n  // external label not yet created\n  if (isLabelExternal(target)\n      && !hasExternalLabel(target)\n      && !isLabel(target)) {\n\n    var externalLabelMid = getExternalLabelMid(element);\n\n    var absoluteBBox = canvas.getAbsoluteBBox({\n      x: externalLabelMid.x,\n      y: externalLabelMid.y,\n      width: 0,\n      height: 0\n    });\n\n    var height = externalFontSize + paddingTop + paddingBottom;\n\n    assign(bounds, {\n      width: width,\n      height: height,\n      x: absoluteBBox.x - width / 2,\n      y: absoluteBBox.y - height / 2\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + 'px',\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + 'px',\n      paddingBottom: paddingBottom + 'px'\n    });\n  }\n\n  // text annotations\n  if (is(element, 'bpmn:TextAnnotation')) {\n    assign(bounds, {\n      width: bbox.width,\n      height: bbox.height,\n      minWidth: 30 * zoom,\n      minHeight: 10 * zoom\n    });\n\n    assign(style, {\n      textAlign: 'left',\n      paddingTop: (5 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (7 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px',\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight\n    });\n  }\n\n  return { bounds: bounds, style: style };\n};\n\n\nLabelEditingProvider.prototype.update = function(\n    element, newLabel,\n    activeContextText, bounds) {\n\n  var newBounds,\n      bbox;\n\n  if (is(element, 'bpmn:TextAnnotation')) {\n\n    bbox = this._canvas.getAbsoluteBBox(element);\n\n    newBounds = {\n      x: element.x,\n      y: element.y,\n      width: element.width / bbox.width * bounds.width,\n      height: element.height / bbox.height * bounds.height\n    };\n  }\n\n  if (isEmptyText(newLabel)) {\n    newLabel = null;\n  }\n\n  this._modeling.updateLabel(element, newLabel, newBounds);\n};\n\n\n\n// helpers //////////\n\nfunction isCollapsedSubProcess(element) {\n  return is(element, 'bpmn:SubProcess') && !isExpanded(element);\n}\n\nfunction isExpandedSubProcess(element) {\n  return is(element, 'bpmn:SubProcess') && isExpanded(element);\n}\n\nfunction isCollapsedPool(element) {\n  return is(element, 'bpmn:Participant') && !isExpanded(element);\n}\n\nfunction isExpandedPool(element) {\n  return is(element, 'bpmn:Participant') && isExpanded(element);\n}\n\nfunction isEmptyText(label) {\n  return !label || !label.trim();\n}","import {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  getDi,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  translate\n} from 'diagram-js/lib/util/SvgTransformUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../../draw/PathMap').default} PathMap\n */\n\nvar MARKER_HIDDEN = 'djs-element-hidden',\n    MARKER_LABEL_HIDDEN = 'djs-label-hidden';\n\n/**\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {PathMap} pathMap\n */\nexport default function LabelEditingPreview(eventBus, canvas, pathMap) {\n\n  var self = this;\n\n  var defaultLayer = canvas.getDefaultLayer();\n\n  var element, absoluteElementBBox, gfx;\n\n  eventBus.on('directEditing.activate', function(context) {\n    var activeProvider = context.active;\n\n    element = activeProvider.element.label || activeProvider.element;\n\n    // text annotation\n    if (is(element, 'bpmn:TextAnnotation')) {\n      absoluteElementBBox = canvas.getAbsoluteBBox(element);\n\n      gfx = svgCreate('g');\n\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n\n      var path = self.path = svgCreate('path');\n\n      svgAttr(path, {\n        d: textPathData,\n        strokeWidth: 2,\n        stroke: getStrokeColor(element)\n      });\n\n      svgAppend(gfx, path);\n\n      svgAppend(defaultLayer, gfx);\n\n      translate(gfx, element.x, element.y);\n    }\n\n    if (is(element, 'bpmn:TextAnnotation') ||\n        element.labelTarget) {\n      canvas.addMarker(element, MARKER_HIDDEN);\n    } else if (is(element, 'bpmn:Task') ||\n               is(element, 'bpmn:CallActivity') ||\n               is(element, 'bpmn:SubProcess') ||\n               is(element, 'bpmn:Participant') ||\n               is(element, 'bpmn:Lane')) {\n      canvas.addMarker(element, MARKER_LABEL_HIDDEN);\n    }\n  });\n\n  eventBus.on('directEditing.resize', function(context) {\n\n    // text annotation\n    if (is(element, 'bpmn:TextAnnotation')) {\n      var height = context.height,\n          dy = context.dy;\n\n      var newElementHeight = Math.max(element.height / absoluteElementBBox.height * (height + dy), 0);\n\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: newElementHeight,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n\n      svgAttr(self.path, {\n        d: textPathData\n      });\n    }\n  });\n\n  eventBus.on([ 'directEditing.complete', 'directEditing.cancel' ], function(context) {\n    var activeProvider = context.active;\n\n    if (activeProvider) {\n      canvas.removeMarker(activeProvider.element.label || activeProvider.element, MARKER_HIDDEN);\n      canvas.removeMarker(element, MARKER_LABEL_HIDDEN);\n    }\n\n    element = undefined;\n    absoluteElementBBox = undefined;\n\n    if (gfx) {\n      svgRemove(gfx);\n\n      gfx = undefined;\n    }\n  });\n}\n\nLabelEditingPreview.$inject = [\n  'eventBus',\n  'canvas',\n  'pathMap'\n];\n\n\n// helpers //////////\n\nfunction getStrokeColor(element, defaultColor) {\n  var di = getDi(element);\n\n  return di.get('stroke') || defaultColor || 'black';\n}","import ChangeSupportModule from 'diagram-js/lib/features/change-support';\nimport ResizeModule from 'diagram-js/lib/features/resize';\nimport DirectEditingModule from 'diagram-js-direct-editing';\n\nimport LabelEditingProvider from './LabelEditingProvider';\nimport LabelEditingPreview from './LabelEditingPreview';\n\n\nexport default {\n  __depends__: [\n    ChangeSupportModule,\n    ResizeModule,\n    DirectEditingModule\n  ],\n  __init__: [\n    'labelEditingProvider',\n    'labelEditingPreview'\n  ],\n  labelEditingProvider: [ 'type', LabelEditingProvider ],\n  labelEditingPreview: [ 'type', LabelEditingPreview ]\n};\n","import {\n  isString,\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  assignStyle,\n  domify,\n  attr as domAttr,\n  classes as domClasses,\n  remove as domRemove,\n  delegate as domDelegate\n} from 'min-dom';\n\nimport Ids from '../../util/IdGenerator';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('../../util/Types').RectTRBL} RectTRBL\n *\n * @typedef { {\n *   html: string | HTMLElement;\n *   position: RectTRBL;\n *   show?: {\n *     minZoom?: number;\n *     maxZoom?: number;\n *   };\n *   timeout?: number;\n * } } Tooltip\n */\n\n// document wide unique tooltip ids\nvar ids = new Ids('tt');\n\n\nfunction createRoot(parentNode) {\n  var root = domify(\n    '<div class=\"djs-tooltip-container\" />'\n  );\n\n  assignStyle(root, {\n    position: 'absolute',\n    width: '0',\n    height: '0'\n  });\n\n  parentNode.insertBefore(root, parentNode.firstChild);\n\n  return root;\n}\n\n\nfunction setPosition(el, x, y) {\n  assignStyle(el, { left: x + 'px', top: y + 'px' });\n}\n\nfunction setVisible(el, visible) {\n  el.style.display = visible === false ? 'none' : '';\n}\n\n\nvar tooltipClass = 'djs-tooltip',\n    tooltipSelector = '.' + tooltipClass;\n\n/**\n * A service that allows users to render tool tips on the diagram.\n *\n * The tooltip service will take care of updating the tooltip positioning\n * during navigation + zooming.\n *\n * @example\n *\n * ```javascript\n *\n * // add a pink badge on the top left of the shape\n * tooltips.add({\n *   position: {\n *     x: 50,\n *     y: 100\n *   },\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or with optional life span\n * tooltips.add({\n *   position: {\n *     top: -5,\n *     left: -5\n *   },\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>',\n *   ttl: 2000\n * });\n *\n * // remove a tool tip\n * var id = tooltips.add(...);\n *\n * tooltips.remove(id);\n * ```\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function Tooltips(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  this._ids = ids;\n\n  this._tooltipDefaults = {\n    show: {\n      minZoom: 0.7,\n      maxZoom: 5.0\n    }\n  };\n\n  /**\n   * @type {Record<string, Tooltip>}\n   */\n  this._tooltips = {};\n\n  // root html element for all tooltips\n  this._tooltipRoot = createRoot(canvas.getContainer());\n\n\n  var self = this;\n\n  domDelegate.bind(this._tooltipRoot, tooltipSelector, 'mousedown', function(event) {\n    event.stopPropagation();\n  });\n\n  domDelegate.bind(this._tooltipRoot, tooltipSelector, 'mouseover', function(event) {\n    self.trigger('mouseover', event);\n  });\n\n  domDelegate.bind(this._tooltipRoot, tooltipSelector, 'mouseout', function(event) {\n    self.trigger('mouseout', event);\n  });\n\n  this._init();\n}\n\n\nTooltips.$inject = [ 'eventBus', 'canvas' ];\n\n\n/**\n * Adds an HTML tooltip to the diagram.\n *\n * @param {Tooltip} tooltip\n *\n * @return {string} ID of the tooltip.\n */\nTooltips.prototype.add = function(tooltip) {\n\n  if (!tooltip.position) {\n    throw new Error('must specifiy tooltip position');\n  }\n\n  if (!tooltip.html) {\n    throw new Error('must specifiy tooltip html');\n  }\n\n  var id = this._ids.next();\n\n  tooltip = assign({}, this._tooltipDefaults, tooltip, {\n    id: id\n  });\n\n  this._addTooltip(tooltip);\n\n  if (tooltip.timeout) {\n    this.setTimeout(tooltip);\n  }\n\n  return id;\n};\n\n/**\n * @param {string} action\n * @param {Event} event\n */\nTooltips.prototype.trigger = function(action, event) {\n\n  var node = event.delegateTarget || event.target;\n\n  var tooltip = this.get(domAttr(node, 'data-tooltip-id'));\n\n  if (!tooltip) {\n    return;\n  }\n\n  if (action === 'mouseover' && tooltip.timeout) {\n    this.clearTimeout(tooltip);\n  }\n\n  if (action === 'mouseout' && tooltip.timeout) {\n\n    // cut timeout after mouse out\n    tooltip.timeout = 1000;\n\n    this.setTimeout(tooltip);\n  }\n};\n\n/**\n * Get tooltip with given ID.\n *\n * @param {Tooltip|string} id\n *\n * @return {Tooltip|undefined}\n */\nTooltips.prototype.get = function(id) {\n\n  if (typeof id !== 'string') {\n    id = id.id;\n  }\n\n  return this._tooltips[id];\n};\n\n/**\n * @param {Tooltip} tooltip\n */\nTooltips.prototype.clearTimeout = function(tooltip) {\n\n  tooltip = this.get(tooltip);\n\n  if (!tooltip) {\n    return;\n  }\n\n  var removeTimer = tooltip.removeTimer;\n\n  if (removeTimer) {\n    clearTimeout(removeTimer);\n    tooltip.removeTimer = null;\n  }\n};\n\n/**\n * @param {Tooltip} tooltip\n */\nTooltips.prototype.setTimeout = function(tooltip) {\n\n  tooltip = this.get(tooltip);\n\n  if (!tooltip) {\n    return;\n  }\n\n  this.clearTimeout(tooltip);\n\n  var self = this;\n\n  tooltip.removeTimer = setTimeout(function() {\n    self.remove(tooltip);\n  }, tooltip.timeout);\n};\n\n/**\n * Remove tooltip with given ID.\n *\n * @param {string | Tooltip} id\n */\nTooltips.prototype.remove = function(id) {\n\n  var tooltip = this.get(id);\n\n  if (tooltip) {\n    domRemove(tooltip.html);\n    domRemove(tooltip.htmlContainer);\n\n    delete tooltip.htmlContainer;\n\n    delete this._tooltips[tooltip.id];\n  }\n};\n\n\nTooltips.prototype.show = function() {\n  setVisible(this._tooltipRoot);\n};\n\n\nTooltips.prototype.hide = function() {\n  setVisible(this._tooltipRoot, false);\n};\n\n\nTooltips.prototype._updateRoot = function(viewbox) {\n  var a = viewbox.scale || 1;\n  var d = viewbox.scale || 1;\n\n  var matrix = 'matrix(' + a + ',0,0,' + d + ',' + (-1 * viewbox.x * a) + ',' + (-1 * viewbox.y * d) + ')';\n\n  this._tooltipRoot.style.transform = matrix;\n  this._tooltipRoot.style['-ms-transform'] = matrix;\n};\n\n\nTooltips.prototype._addTooltip = function(tooltip) {\n\n  var id = tooltip.id,\n      html = tooltip.html,\n      htmlContainer,\n      tooltipRoot = this._tooltipRoot;\n\n  // unwrap jquery (for those who need it)\n  if (html.get && html.constructor.prototype.jquery) {\n    html = html.get(0);\n  }\n\n  // create proper html elements from\n  // tooltip HTML strings\n  if (isString(html)) {\n    html = domify(html);\n  }\n\n  htmlContainer = domify('<div data-tooltip-id=\"' + id + '\" class=\"' + tooltipClass + '\">');\n  assignStyle(htmlContainer, { position: 'absolute' });\n\n  htmlContainer.appendChild(html);\n\n  if (tooltip.type) {\n    domClasses(htmlContainer).add('djs-tooltip-' + tooltip.type);\n  }\n\n  if (tooltip.className) {\n    domClasses(htmlContainer).add(tooltip.className);\n  }\n\n  tooltip.htmlContainer = htmlContainer;\n\n  tooltipRoot.appendChild(htmlContainer);\n\n  this._tooltips[id] = tooltip;\n\n  this._updateTooltip(tooltip);\n};\n\n\nTooltips.prototype._updateTooltip = function(tooltip) {\n\n  var position = tooltip.position,\n      htmlContainer = tooltip.htmlContainer;\n\n  // update overlay html based on tooltip x, y\n\n  setPosition(htmlContainer, position.x, position.y);\n};\n\n\nTooltips.prototype._updateTooltipVisibilty = function(viewbox) {\n\n  forEach(this._tooltips, function(tooltip) {\n    var show = tooltip.show,\n        htmlContainer = tooltip.htmlContainer,\n        visible = true;\n\n    if (show) {\n      if (show.minZoom > viewbox.scale ||\n          show.maxZoom < viewbox.scale) {\n        visible = false;\n      }\n\n      setVisible(htmlContainer, visible);\n    }\n  });\n};\n\nTooltips.prototype._init = function() {\n\n  var self = this;\n\n  // scroll/zoom integration\n\n  function updateViewbox(viewbox) {\n    self._updateRoot(viewbox);\n    self._updateTooltipVisibilty(viewbox);\n\n    self.show();\n  }\n\n  this._eventBus.on('canvas.viewbox.changing', function(event) {\n    self.hide();\n  });\n\n  this._eventBus.on('canvas.viewbox.changed', function(event) {\n    updateViewbox(event.viewbox);\n  });\n};\n","import Tooltips from './Tooltips';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'tooltips' ],\n  tooltips: [ 'type', Tooltips ]\n};","import { is } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/features/tooltips/Tooltips').default} Tooltips\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n */\n\nvar COLLAB_ERR_MSG = 'flow elements must be children of pools/participants';\n\n/**\n * @param {EventBus} eventBus\n * @param {Tooltips} tooltips\n * @param {Translate} translate\n */\nexport default function ModelingFeedback(eventBus, tooltips, translate) {\n\n  function showError(position, message, timeout) {\n    tooltips.add({\n      position: {\n        x: position.x + 5,\n        y: position.y + 5\n      },\n      type: 'error',\n      timeout: timeout || 2000,\n      html: '<div>' + message + '</div>'\n    });\n  }\n\n  eventBus.on([ 'shape.move.rejected', 'create.rejected' ], function(event) {\n    var context = event.context,\n        shape = context.shape,\n        target = context.target;\n\n    if (is(target, 'bpmn:Collaboration') && is(shape, 'bpmn:FlowNode')) {\n      showError(event, translate(COLLAB_ERR_MSG));\n    }\n  });\n\n}\n\nModelingFeedback.$inject = [\n  'eventBus',\n  'tooltips',\n  'translate'\n];\n","import TooltipsModule from 'diagram-js/lib/features/tooltips';\n\nimport ModelingFeedback from './ModelingFeedback';\n\nexport default {\n  __depends__: [\n    TooltipsModule\n  ],\n  __init__: [\n    'modelingFeedback'\n  ],\n  modelingFeedback: [ 'type', ModelingFeedback ]\n};","import {\n  assign,\n  filter,\n  groupBy,\n  isObject\n} from 'min-dash';\n\nimport {\n  classes as svgClasses\n} from 'tiny-svg';\n\n/**\n * @typedef {import('../../core/Types').ElementLike} Element\n * @typedef {import('../../core/Types').ShapeLike} Shape\n *\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../rules/Rules').default} Rules\n * @typedef {import('../selection/Selection').default} Selection\n */\n\nvar LOW_PRIORITY = 500,\n    MEDIUM_PRIORITY = 1250,\n    HIGH_PRIORITY = 1500;\n\nimport { getOriginal as getOriginalEvent } from '../../util/Event';\n\nimport {\n  isPrimaryButton\n} from '../../util/Mouse';\n\nvar round = Math.round;\n\nfunction mid(element) {\n  return {\n    x: element.x + round(element.width / 2),\n    y: element.y + round(element.height / 2)\n  };\n}\n\n/**\n * A plugin that makes shapes draggable / droppable.\n *\n * @param {EventBus} eventBus\n * @param {Dragging} dragging\n * @param {Modeling} modeling\n * @param {Selection} selection\n * @param {Rules} rules\n */\nexport default function MoveEvents(\n    eventBus, dragging, modeling,\n    selection, rules) {\n\n  // rules\n\n  function canMove(shapes, delta, position, target) {\n\n    return rules.allowed('elements.move', {\n      shapes: shapes,\n      delta: delta,\n      position: position,\n      target: target\n    });\n  }\n\n\n  // move events\n\n  // assign a high priority to this handler to setup the environment\n  // others may hook up later, e.g. at default priority and modify\n  // the move environment.\n  //\n  // This sets up the context with\n  //\n  // * shape: the primary shape being moved\n  // * shapes: a list of shapes to be moved\n  // * validatedShapes: a list of shapes that are being checked\n  //                    against the rules before and during move\n  //\n  eventBus.on('shape.move.start', HIGH_PRIORITY, function(event) {\n\n    var context = event.context,\n        shape = event.shape,\n        shapes = selection.get().slice();\n\n    // move only single shape if the dragged element\n    // is not part of the current selection\n    if (shapes.indexOf(shape) === -1) {\n      shapes = [ shape ];\n    }\n\n    // ensure we remove nested elements in the collection\n    // and add attachers for a proper dragger\n    shapes = removeNested(shapes);\n\n    // attach shapes to drag context\n    assign(context, {\n      shapes: shapes,\n      validatedShapes: shapes,\n      shape: shape\n    });\n  });\n\n\n  // assign a high priority to this handler to setup the environment\n  // others may hook up later, e.g. at default priority and modify\n  // the move environment\n  //\n  eventBus.on('shape.move.start', MEDIUM_PRIORITY, function(event) {\n\n    var context = event.context,\n        validatedShapes = context.validatedShapes,\n        canExecute;\n\n    canExecute = context.canExecute = canMove(validatedShapes);\n\n    // check if we can move the elements\n    if (!canExecute) {\n      return false;\n    }\n  });\n\n  // assign a low priority to this handler\n  // to let others modify the move event before we update\n  // the context\n  //\n  eventBus.on('shape.move.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        validatedShapes = context.validatedShapes,\n        hover = event.hover,\n        delta = { x: event.dx, y: event.dy },\n        position = { x: event.x, y: event.y },\n        canExecute;\n\n    // check if we can move the elements\n    canExecute = canMove(validatedShapes, delta, position, hover);\n\n    context.delta = delta;\n    context.canExecute = canExecute;\n\n    // simply ignore move over\n    if (canExecute === null) {\n      context.target = null;\n\n      return;\n    }\n\n    context.target = hover;\n  });\n\n  eventBus.on('shape.move.end', function(event) {\n\n    var context = event.context;\n\n    var delta = context.delta,\n        canExecute = context.canExecute,\n        isAttach = canExecute === 'attach',\n        shapes = context.shapes;\n\n    if (canExecute === false) {\n      return false;\n    }\n\n    // ensure we have actual pixel values deltas\n    // (important when zoom level was > 1 during move)\n    delta.x = round(delta.x);\n    delta.y = round(delta.y);\n\n    if (delta.x === 0 && delta.y === 0) {\n\n      // didn't move\n      return;\n    }\n\n    modeling.moveElements(shapes, delta, context.target, {\n      primaryShape: context.shape,\n      attach: isAttach\n    });\n  });\n\n\n  // move activation\n\n  eventBus.on('element.mousedown', function(event) {\n\n    if (!isPrimaryButton(event)) {\n      return;\n    }\n\n    var originalEvent = getOriginalEvent(event);\n\n    if (!originalEvent) {\n      throw new Error('must supply DOM mousedown event');\n    }\n\n    return start(originalEvent, event.element);\n  });\n\n  /**\n   * Start move.\n   *\n   * @param {MouseEvent|TouchEvent} event\n   * @param {Shape} element\n   * @param {boolean} [activate]\n   * @param {Object} [context]\n   */\n  function start(event, element, activate, context) {\n    if (isObject(activate)) {\n      context = activate;\n      activate = false;\n    }\n\n    // do not move connections or the root element\n    if (element.waypoints || !element.parent) {\n      return;\n    }\n\n    // ignore non-draggable hits\n    if (svgClasses(event.target).has('djs-hit-no-move')) {\n      return;\n    }\n\n    var referencePoint = mid(element);\n\n    dragging.init(event, referencePoint, 'shape.move', {\n      cursor: 'grabbing',\n      autoActivate: activate,\n      data: {\n        shape: element,\n        context: context || {}\n      }\n    });\n\n    // we've handled the event\n    return true;\n  }\n\n  // API\n\n  this.start = start;\n}\n\nMoveEvents.$inject = [\n  'eventBus',\n  'dragging',\n  'modeling',\n  'selection',\n  'rules'\n];\n\n\n/**\n * Return a filtered list of elements that do not contain\n * those nested into others.\n *\n * @param {Element[]} elements\n *\n * @return {Element[]} filtered\n */\nfunction removeNested(elements) {\n\n  var ids = groupBy(elements, 'id');\n\n  return filter(elements, function(element) {\n    while ((element = element.parent)) {\n\n      // parent in selection\n      if (ids[element.id]) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n}\n","import {\n  flatten,\n  forEach,\n  filter,\n  find,\n  groupBy,\n  matchPattern,\n  size\n} from 'min-dash';\n\nimport {\n  selfAndAllChildren\n} from '../../util/Elements';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport { translate } from '../../util/SvgTransformUtil';\n\nimport { isConnection } from '../../util/ModelUtil';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../preview-support/PreviewSupport').default} PreviewSupport\n * @typedef {import('../../draw/Styles').default} Styles\n */\n\nvar LOW_PRIORITY = 499;\n\nvar MARKER_DRAGGING = 'djs-dragging',\n    MARKER_OK = 'drop-ok',\n    MARKER_NOT_OK = 'drop-not-ok',\n    MARKER_NEW_PARENT = 'new-parent',\n    MARKER_ATTACH = 'attach-ok';\n\n\n/**\n * Provides previews for moving shapes when moving.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Styles} styles\n * @param {PreviewSupport} previewSupport\n */\nexport default function MovePreview(\n    eventBus, canvas, styles, previewSupport) {\n\n  function getVisualDragShapes(shapes) {\n    var elements = getAllDraggedElements(shapes);\n\n    var filteredElements = removeEdges(elements);\n\n    return filteredElements;\n  }\n\n  function getAllDraggedElements(shapes) {\n    var allShapes = selfAndAllChildren(shapes, true);\n\n    var allConnections = allShapes.flatMap(shape =>\n      (shape.incoming || []).concat(shape.outgoing || [])\n    );\n\n    var allElements = allShapes.concat(allConnections);\n    var uniqueElements = [ ...new Set(allElements) ];\n\n    return uniqueElements;\n  }\n\n  /**\n   * Sets drop marker on an element.\n   */\n  function setMarker(element, marker) {\n\n    [ MARKER_ATTACH, MARKER_OK, MARKER_NOT_OK, MARKER_NEW_PARENT ].forEach(function(m) {\n\n      if (m === marker) {\n        canvas.addMarker(element, m);\n      } else {\n        canvas.removeMarker(element, m);\n      }\n    });\n  }\n\n  /**\n   * Make an element draggable.\n   *\n   * @param {Object} context\n   * @param {Element} element\n   * @param {boolean} addMarker\n   */\n  function makeDraggable(context, element, addMarker) {\n\n    previewSupport.addDragger(element, context.dragGroup);\n\n    if (addMarker) {\n      canvas.addMarker(element, MARKER_DRAGGING);\n    }\n\n    if (context.allDraggedElements) {\n      context.allDraggedElements.push(element);\n    } else {\n      context.allDraggedElements = [ element ];\n    }\n  }\n\n  // assign a low priority to this handler\n  // to let others modify the move context before\n  // we draw things\n  eventBus.on('shape.move.start', LOW_PRIORITY, function(event) {\n    var context = event.context,\n        dragShapes = context.shapes,\n        allDraggedElements = context.allDraggedElements;\n\n    var visuallyDraggedShapes = getVisualDragShapes(dragShapes);\n\n    if (!context.dragGroup) {\n      var dragGroup = svgCreate('g');\n\n      svgAttr(dragGroup, styles.cls('djs-drag-group', [ 'no-events' ]));\n\n      var activeLayer = canvas.getActiveLayer();\n\n      svgAppend(activeLayer, dragGroup);\n\n      context.dragGroup = dragGroup;\n    }\n\n    // add previews\n    visuallyDraggedShapes.forEach(function(shape) {\n      previewSupport.addDragger(shape, context.dragGroup);\n    });\n\n    // cache all dragged elements / gfx\n    // so that we can quickly undo their state changes later\n    if (!allDraggedElements) {\n      allDraggedElements = getAllDraggedElements(dragShapes);\n    } else {\n      allDraggedElements = flatten([\n        allDraggedElements,\n        getAllDraggedElements(dragShapes)\n      ]);\n    }\n\n    // add dragging marker\n    forEach(allDraggedElements, function(e) {\n      canvas.addMarker(e, MARKER_DRAGGING);\n    });\n\n    context.allDraggedElements = allDraggedElements;\n\n    // determine, if any of the dragged elements have different parents\n    context.differentParents = haveDifferentParents(dragShapes);\n  });\n\n  // update previews\n  eventBus.on('shape.move.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        dragGroup = context.dragGroup,\n        target = context.target,\n        parent = context.shape.parent,\n        canExecute = context.canExecute;\n\n    if (target) {\n      if (canExecute === 'attach') {\n        setMarker(target, MARKER_ATTACH);\n      } else if (context.canExecute && parent && target.id !== parent.id) {\n        setMarker(target, MARKER_NEW_PARENT);\n      } else {\n        setMarker(target, context.canExecute ? MARKER_OK : MARKER_NOT_OK);\n      }\n    }\n\n    translate(dragGroup, event.dx, event.dy);\n  });\n\n  eventBus.on([ 'shape.move.out', 'shape.move.cleanup' ], function(event) {\n    var context = event.context,\n        target = context.target;\n\n    if (target) {\n      setMarker(target, null);\n    }\n  });\n\n  // remove previews\n  eventBus.on('shape.move.cleanup', function(event) {\n\n    var context = event.context,\n        allDraggedElements = context.allDraggedElements,\n        dragGroup = context.dragGroup;\n\n\n    // remove dragging marker\n    forEach(allDraggedElements, function(e) {\n      canvas.removeMarker(e, MARKER_DRAGGING);\n    });\n\n    if (dragGroup) {\n      svgRemove(dragGroup);\n    }\n  });\n\n\n  // API //////////////////////\n\n  /**\n   * Make an element draggable.\n   *\n   * @param {Object} context\n   * @param {Element} element\n   * @param {boolean} addMarker\n   */\n  this.makeDraggable = makeDraggable;\n}\n\nMovePreview.$inject = [\n  'eventBus',\n  'canvas',\n  'styles',\n  'previewSupport'\n];\n\n\n// helpers //////////////////////\n\n/**\n * returns elements minus all connections\n * where source or target is not elements\n */\nfunction removeEdges(elements) {\n\n  var filteredElements = filter(elements, function(element) {\n\n    if (!isConnection(element)) {\n      return true;\n    } else {\n\n      return (\n        find(elements, matchPattern({ id: element.source.id })) &&\n        find(elements, matchPattern({ id: element.target.id }))\n      );\n    }\n  });\n\n  return filteredElements;\n}\n\nfunction haveDifferentParents(elements) {\n  return size(groupBy(elements, function(e) { return e.parent && e.parent.id; })) !== 1;\n}\n","import InteractionEventsModule from '../interaction-events';\nimport SelectionModule from '../selection';\nimport OutlineModule from '../outline';\nimport RulesModule from '../rules';\nimport DraggingModule from '../dragging';\nimport PreviewSupportModule from '../preview-support';\n\nimport Move from './Move';\nimport MovePreview from './MovePreview';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    InteractionEventsModule,\n    SelectionModule,\n    OutlineModule,\n    RulesModule,\n    DraggingModule,\n    PreviewSupportModule\n  ],\n  __init__: [\n    'move',\n    'movePreview'\n  ],\n  move: [ 'type', Move ],\n  movePreview: [ 'type', MovePreview ]\n};\n","import {\n  isArray,\n  isFunction,\n  forEach\n} from 'min-dash';\n\nimport {\n  domify,\n  query as domQuery,\n  attr as domAttr,\n  clear as domClear,\n  classes as domClasses,\n  matches as domMatches,\n  delegate as domDelegate,\n  event as domEvent\n} from 'min-dom';\n\nimport {\n  escapeCSS\n} from '../../util/EscapeUtil';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('./PaletteProvider').PaletteEntries} PaletteEntries\n * @typedef {import('./PaletteProvider').default} PaletteProvider\n */\n\nvar TOGGLE_SELECTOR = '.djs-palette-toggle',\n    ENTRY_SELECTOR = '.entry',\n    ELEMENT_SELECTOR = TOGGLE_SELECTOR + ', ' + ENTRY_SELECTOR;\n\nvar PALETTE_PREFIX = 'djs-palette-',\n    PALETTE_SHOWN_CLS = 'shown',\n    PALETTE_OPEN_CLS = 'open',\n    PALETTE_TWO_COLUMN_CLS = 'two-column';\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A palette containing modeling elements.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function Palette(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  var self = this;\n\n  eventBus.on('tool-manager.update', function(event) {\n    var tool = event.tool;\n\n    self.updateToolHighlight(tool);\n  });\n\n  eventBus.on('i18n.changed', function() {\n    self._update();\n  });\n\n  eventBus.on('diagram.init', function() {\n\n    self._diagramInitialized = true;\n\n    self._rebuild();\n  });\n}\n\nPalette.$inject = [ 'eventBus', 'canvas' ];\n\n/**\n * @overlord\n *\n * Register a palette provider with default priority. See\n * {@link PaletteProvider} for examples.\n *\n * @param {PaletteProvider} provider\n */\n\n/**\n * Register a palette provider with the given priority. See\n * {@link PaletteProvider} for examples.\n *\n * @param {number} priority\n * @param {PaletteProvider} provider\n */\nPalette.prototype.registerProvider = function(priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('palette.getProviders', priority, function(event) {\n    event.providers.push(provider);\n  });\n\n  this._rebuild();\n};\n\n\n/**\n * Returns the palette entries.\n *\n * @return {PaletteEntries}\n */\nPalette.prototype.getEntries = function() {\n  var providers = this._getProviders();\n\n  return providers.reduce(addPaletteEntries, {});\n};\n\nPalette.prototype._rebuild = function() {\n\n  if (!this._diagramInitialized) {\n    return;\n  }\n\n  var providers = this._getProviders();\n\n  if (!providers.length) {\n    return;\n  }\n\n  if (!this._container) {\n    this._init();\n  }\n\n  this._update();\n};\n\n/**\n * Initialize palette.\n */\nPalette.prototype._init = function() {\n\n  var self = this;\n\n  var eventBus = this._eventBus;\n\n  var parentContainer = this._getParentContainer();\n\n  var container = this._container = domify(Palette.HTML_MARKUP);\n\n  parentContainer.appendChild(container);\n  domClasses(parentContainer).add(PALETTE_PREFIX + PALETTE_SHOWN_CLS);\n\n  domDelegate.bind(container, ELEMENT_SELECTOR, 'click', function(event) {\n\n    var target = event.delegateTarget;\n\n    if (domMatches(target, TOGGLE_SELECTOR)) {\n      return self.toggle();\n    }\n\n    self.trigger('click', event);\n  });\n\n  // prevent drag propagation\n  domEvent.bind(container, 'mousedown', function(event) {\n    event.stopPropagation();\n  });\n\n  // prevent drag propagation\n  domDelegate.bind(container, ENTRY_SELECTOR, 'dragstart', function(event) {\n    self.trigger('dragstart', event);\n  });\n\n  eventBus.on('canvas.resized', this._layoutChanged, this);\n\n  eventBus.fire('palette.create', {\n    container: container\n  });\n};\n\nPalette.prototype._getProviders = function(id) {\n\n  var event = this._eventBus.createEvent({\n    type: 'palette.getProviders',\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\n/**\n * Update palette state.\n *\n * @param { {\n *   open?: boolean;\n *   twoColumn?: boolean;\n * } } [state]\n */\nPalette.prototype._toggleState = function(state) {\n\n  state = state || {};\n\n  var parent = this._getParentContainer(),\n      container = this._container;\n\n  var eventBus = this._eventBus;\n\n  var twoColumn;\n\n  var cls = domClasses(container),\n      parentCls = domClasses(parent);\n\n  if ('twoColumn' in state) {\n    twoColumn = state.twoColumn;\n  } else {\n    twoColumn = this._needsCollapse(parent.clientHeight, this._entries || {});\n  }\n\n  // always update two column\n  cls.toggle(PALETTE_TWO_COLUMN_CLS, twoColumn);\n  parentCls.toggle(PALETTE_PREFIX + PALETTE_TWO_COLUMN_CLS, twoColumn);\n\n  if ('open' in state) {\n    cls.toggle(PALETTE_OPEN_CLS, state.open);\n    parentCls.toggle(PALETTE_PREFIX + PALETTE_OPEN_CLS, state.open);\n  }\n\n  eventBus.fire('palette.changed', {\n    twoColumn: twoColumn,\n    open: this.isOpen()\n  });\n};\n\nPalette.prototype._update = function() {\n\n  var entriesContainer = domQuery('.djs-palette-entries', this._container),\n      entries = this._entries = this.getEntries();\n\n  domClear(entriesContainer);\n\n  forEach(entries, function(entry, id) {\n\n    var grouping = entry.group || 'default';\n\n    var container = domQuery('[data-group=' + escapeCSS(grouping) + ']', entriesContainer);\n    if (!container) {\n      container = domify('<div class=\"group\"></div>');\n      domAttr(container, 'data-group', grouping);\n\n      entriesContainer.appendChild(container);\n    }\n\n    var html = entry.html || (\n      entry.separator ?\n        '<hr class=\"separator\" />' :\n        '<div class=\"entry\" draggable=\"true\"></div>');\n\n\n    var control = domify(html);\n    container.appendChild(control);\n\n    if (!entry.separator) {\n      domAttr(control, 'data-action', id);\n\n      if (entry.title) {\n        domAttr(control, 'title', entry.title);\n      }\n\n      if (entry.className) {\n        addClasses(control, entry.className);\n      }\n\n      if (entry.imageUrl) {\n        var image = domify('<img>');\n        domAttr(image, 'src', entry.imageUrl);\n\n        control.appendChild(image);\n      }\n    }\n  });\n\n  // open after update\n  this.open();\n};\n\n\n/**\n * Trigger an action available on the palette\n *\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nPalette.prototype.trigger = function(action, event, autoActivate) {\n  var entry,\n      originalEvent,\n      button = event.delegateTarget || event.target;\n\n  if (!button) {\n    return event.preventDefault();\n  }\n\n  entry = domAttr(button, 'data-action');\n  originalEvent = event.originalEvent || event;\n\n  return this.triggerEntry(entry, action, originalEvent, autoActivate);\n};\n\n/**\n * @param {string} entryId\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nPalette.prototype.triggerEntry = function(entryId, action, event, autoActivate) {\n  var entries = this._entries,\n      entry,\n      handler;\n\n  entry = entries[entryId];\n\n  // when user clicks on the palette and not on an action\n  if (!entry) {\n    return;\n  }\n\n  handler = entry.action;\n\n  if (this._eventBus.fire('palette.trigger', { entry, event }) === false) {\n    return;\n  }\n\n  // simple action (via callback function)\n  if (isFunction(handler)) {\n    if (action === 'click') {\n      return handler(event, autoActivate);\n    }\n  } else {\n    if (handler[action]) {\n      return handler[action](event, autoActivate);\n    }\n  }\n\n  // silence other actions\n  event.preventDefault();\n};\n\nPalette.prototype._layoutChanged = function() {\n  this._toggleState({});\n};\n\n/**\n * Do we need to collapse to two columns?\n *\n * @param {number} availableHeight\n * @param {PaletteEntries} entries\n *\n * @return {boolean}\n */\nPalette.prototype._needsCollapse = function(availableHeight, entries) {\n\n  // top margin + bottom toggle + bottom margin\n  // implementors must override this method if they\n  // change the palette styles\n  var margin = 20 + 10 + 20;\n\n  var entriesHeight = Object.keys(entries).length * 46;\n\n  return availableHeight < entriesHeight + margin;\n};\n\n/**\n * Close the palette.\n */\nPalette.prototype.close = function() {\n  this._toggleState({\n    open: false,\n    twoColumn: false\n  });\n};\n\n/**\n * Open the palette.\n */\nPalette.prototype.open = function() {\n  this._toggleState({ open: true });\n};\n\n/**\n * Toggle the palette.\n */\nPalette.prototype.toggle = function() {\n  if (this.isOpen()) {\n    this.close();\n  } else {\n    this.open();\n  }\n};\n\n/**\n * @param {string} tool\n *\n * @return {boolean}\n */\nPalette.prototype.isActiveTool = function(tool) {\n  return tool && this._activeTool === tool;\n};\n\n/**\n * @param {string} name\n */\nPalette.prototype.updateToolHighlight = function(name) {\n  var entriesContainer,\n      toolsContainer;\n\n  if (!this._toolsContainer) {\n    entriesContainer = domQuery('.djs-palette-entries', this._container);\n\n    this._toolsContainer = domQuery('[data-group=tools]', entriesContainer);\n  }\n\n  toolsContainer = this._toolsContainer;\n\n  forEach(toolsContainer.children, function(tool) {\n    var actionName = tool.getAttribute('data-action');\n\n    if (!actionName) {\n      return;\n    }\n\n    var toolClasses = domClasses(tool);\n\n    actionName = actionName.replace('-tool', '');\n\n    if (toolClasses.contains('entry') && actionName === name) {\n      toolClasses.add('highlighted-entry');\n    } else {\n      toolClasses.remove('highlighted-entry');\n    }\n  });\n};\n\n\n/**\n * Return `true` if the palette is opened.\n *\n * @example\n *\n * ```javascript\n * palette.open();\n *\n * if (palette.isOpen()) {\n *   // yes, we are open\n * }\n * ```\n *\n * @return {boolean}\n */\nPalette.prototype.isOpen = function() {\n  return domClasses(this._container).has(PALETTE_OPEN_CLS);\n};\n\n/**\n * Get parent element of palette.\n *\n * @return {HTMLElement}\n */\nPalette.prototype._getParentContainer = function() {\n  return this._canvas.getContainer();\n};\n\n\n/* markup definition */\n\nPalette.HTML_MARKUP =\n  '<div class=\"djs-palette\">' +\n    '<div class=\"djs-palette-entries\"></div>' +\n    '<div class=\"djs-palette-toggle\"></div>' +\n  '</div>';\n\n\n// helpers //////////////////////\n\nfunction addClasses(element, classNames) {\n\n  var classes = domClasses(element);\n\n  var actualClassNames = isArray(classNames) ? classNames : classNames.split(/\\s+/g);\n  actualClassNames.forEach(function(cls) {\n    classes.add(cls);\n  });\n}\n\nfunction addPaletteEntries(entries, provider) {\n\n  var entriesOrUpdater = provider.getPaletteEntries();\n\n  if (isFunction(entriesOrUpdater)) {\n    return entriesOrUpdater(entries);\n  }\n\n  forEach(entriesOrUpdater, function(entry, id) {\n    entries[id] = entry;\n  });\n\n  return entries;\n}","import Palette from './Palette';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'palette' ],\n  palette: [ 'type', Palette ]\n};\n","import { values } from 'min-dash';\n\nimport { getEnclosedElements } from '../../util/Elements';\n\nimport {\n  hasSecondaryModifier\n} from '../../util/Mouse';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../mouse/Mouse').default} Mouse\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../tool-manager/ToolManager').default} ToolManager\n *\n * @typedef {import('../../util/Types').Rect} Rect\n */\n\nvar LASSO_TOOL_CURSOR = 'crosshair';\n\n/**\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {ElementRegistry} elementRegistry\n * @param {Selection} selection\n * @param {ToolManager} toolManager\n * @param {Mouse} mouse\n */\nexport default function LassoTool(\n    eventBus, canvas, dragging,\n    elementRegistry, selection, toolManager,\n    mouse) {\n\n  this._selection = selection;\n  this._dragging = dragging;\n  this._mouse = mouse;\n\n  var self = this;\n\n  // lasso visuals implementation\n\n  /**\n  * A helper that realizes the selection box visual\n  */\n  var visuals = {\n\n    create: function(context) {\n      var container = canvas.getActiveLayer(),\n          frame;\n\n      frame = context.frame = svgCreate('rect');\n      svgAttr(frame, {\n        class: 'djs-lasso-overlay',\n        width:  1,\n        height: 1,\n        x: 0,\n        y: 0\n      });\n\n      svgAppend(container, frame);\n    },\n\n    update: function(context) {\n      var frame = context.frame,\n          bbox = context.bbox;\n\n      svgAttr(frame, {\n        x: bbox.x,\n        y: bbox.y,\n        width: bbox.width,\n        height: bbox.height\n      });\n    },\n\n    remove: function(context) {\n\n      if (context.frame) {\n        svgRemove(context.frame);\n      }\n    }\n  };\n\n  toolManager.registerTool('lasso', {\n    tool: 'lasso.selection',\n    dragging: 'lasso'\n  });\n\n  eventBus.on('lasso.selection.end', function(event) {\n    var target = event.originalEvent.target;\n\n    // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return;\n    }\n\n    eventBus.once('lasso.selection.ended', function() {\n      self.activateLasso(event.originalEvent, true);\n    });\n  });\n\n  // lasso interaction implementation\n\n  eventBus.on('lasso.end', 0, function(event) {\n\n    var context = event.context;\n\n    var bbox = toBBox(event);\n\n    var elements = elementRegistry.filter(function(element) {\n      return element;\n    });\n\n    var add = hasSecondaryModifier(event);\n\n    self.select(elements, bbox, add ? context.selection : []);\n  });\n\n  eventBus.on('lasso.start', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.create(context);\n\n    context.selection = selection.get();\n  });\n\n  eventBus.on('lasso.move', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.update(context);\n  });\n\n  eventBus.on('lasso.cleanup', function(event) {\n\n    var context = event.context;\n\n    visuals.remove(context);\n  });\n\n\n  // event integration\n\n  eventBus.on('element.mousedown', 1500, function(event) {\n\n    if (!hasSecondaryModifier(event)) {\n      return;\n    }\n\n    self.activateLasso(event.originalEvent);\n\n    // we've handled the event\n    return true;\n  });\n}\n\nLassoTool.$inject = [\n  'eventBus',\n  'canvas',\n  'dragging',\n  'elementRegistry',\n  'selection',\n  'toolManager',\n  'mouse'\n];\n\n/**\n * Activate lasso.\n *\n * @param {MouseEvent} event\n * @param {boolean} [autoActivate=false]\n */\nLassoTool.prototype.activateLasso = function(event, autoActivate) {\n\n  this._dragging.init(event, 'lasso', {\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\n/**\n * Activate selection.\n *\n * @param {MouseEvent} event\n * @param {boolean} [autoActivate=false]\n */\nLassoTool.prototype.activateSelection = function(event, autoActivate) {\n\n  this._dragging.init(event, 'lasso.selection', {\n    trapClick: false,\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    },\n    keepSelection: true\n  });\n};\n\n/**\n * Select elements within the given bounds.\n *\n * @param {Element[]} elements\n * @param {Rect} bbox\n * @param {Element[]} [previousSelection]\n */\nLassoTool.prototype.select = function(elements, bbox, previousSelection = []) {\n  var selectedElements = getEnclosedElements(elements, bbox);\n\n  this._selection.select([\n    ...previousSelection,\n    ...values(selectedElements)\n  ]);\n};\n\n/**\n * Toggle the lasso tool.\n */\nLassoTool.prototype.toggle = function() {\n  if (this.isActive()) {\n    return this._dragging.cancel();\n  }\n\n  var mouseEvent = this._mouse.getLastMoveEvent();\n\n  this.activateSelection(mouseEvent, !!mouseEvent);\n};\n\n/**\n * Check if the lasso tool is active.\n *\n * @returns {boolean}\n */\nLassoTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  return context && /^lasso/.test(context.prefix);\n};\n\n\nfunction toBBox(event) {\n\n  var start = {\n\n    x: event.x - event.dx,\n    y: event.y - event.dy\n  };\n\n  var end = {\n    x: event.x,\n    y: event.y\n  };\n\n  var bbox;\n\n  if ((start.x <= end.x && start.y < end.y) ||\n      (start.x < end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: start.y,\n      width:  end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x >= end.x && start.y < end.y) ||\n             (start.x > end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: start.y,\n      width:  start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x <= end.x && start.y > end.y) ||\n             (start.x < end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: end.y,\n      width:  end.x - start.x,\n      height: start.y - end.y\n    };\n  } else if ((start.x >= end.x && start.y > end.y) ||\n             (start.x > end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  start.x - end.x,\n      height: start.y - end.y\n    };\n  } else {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  0,\n      height: 0\n    };\n  }\n  return bbox;\n}\n","import ToolManagerModule from '../tool-manager';\nimport MouseModule from '../mouse';\n\nimport LassoTool from './LassoTool';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    ToolManagerModule,\n    MouseModule\n  ],\n  __init__: [ 'lassoTool' ],\n  lassoTool: [ 'type', LassoTool ]\n};\n","import {\n  hasPrimaryModifier\n} from '../../util/Mouse';\n\nimport { isKey } from '../../features/keyboard/KeyboardUtil';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../mouse/Mouse').default} Mouse\n * @typedef {import('../tool-manager/ToolManager').default} ToolManager\n */\n\nvar HIGH_PRIORITY = 1500;\nvar HAND_CURSOR = 'grab';\n\n/**\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {Injector} injector\n * @param {ToolManager} toolManager\n * @param {Mouse} mouse\n */\nexport default function HandTool(\n    eventBus, canvas, dragging,\n    injector, toolManager, mouse) {\n\n  this._dragging = dragging;\n  this._mouse = mouse;\n\n  var self = this,\n      keyboard = injector.get('keyboard', false);\n\n  toolManager.registerTool('hand', {\n    tool: 'hand',\n    dragging: 'hand.move'\n  });\n\n  eventBus.on('element.mousedown', HIGH_PRIORITY, function(event) {\n\n    if (!hasPrimaryModifier(event)) {\n      return;\n    }\n\n    self.activateMove(event.originalEvent, true);\n\n    return false;\n  });\n\n  keyboard && keyboard.addListener(HIGH_PRIORITY, function(e) {\n    if (!isSpace(e.keyEvent) || self.isActive()) {\n      return;\n    }\n\n    var mouseEvent = self._mouse.getLastMoveEvent();\n\n    self.activateMove(mouseEvent, !!mouseEvent);\n  }, 'keyboard.keydown');\n\n  keyboard && keyboard.addListener(HIGH_PRIORITY, function(e) {\n    if (!isSpace(e.keyEvent) || !self.isActive()) {\n      return;\n    }\n\n    self.toggle();\n  }, 'keyboard.keyup');\n\n  eventBus.on('hand.end', function(event) {\n    var target = event.originalEvent.target;\n\n    // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return false;\n    }\n\n    eventBus.once('hand.ended', function() {\n      self.activateMove(event.originalEvent, { reactivate: true });\n    });\n\n  });\n\n  eventBus.on('hand.move.move', function(event) {\n    var scale = canvas.viewbox().scale;\n\n    canvas.scroll({\n      dx: event.dx * scale,\n      dy: event.dy * scale\n    });\n  });\n\n  eventBus.on('hand.move.end', function(event) {\n    var context = event.context,\n        reactivate = context.reactivate;\n\n    // Don't reactivate if the user is using the keyboard keybinding\n    if (!hasPrimaryModifier(event) && reactivate) {\n\n      eventBus.once('hand.move.ended', function(event) {\n        self.activateHand(event.originalEvent, true, true);\n      });\n\n    }\n\n    return false;\n  });\n\n}\n\nHandTool.$inject = [\n  'eventBus',\n  'canvas',\n  'dragging',\n  'injector',\n  'toolManager',\n  'mouse'\n];\n\n/**\n *\n * @param event\n * @param {boolean} [autoActivate]\n * @param {object} [context]\n */\nHandTool.prototype.activateMove = function(event, autoActivate, context) {\n  if (typeof autoActivate === 'object') {\n    context = autoActivate;\n    autoActivate = false;\n  }\n\n  this._dragging.init(event, 'hand.move', {\n    autoActivate: autoActivate,\n    cursor: HAND_CURSOR,\n    data: {\n      context: context || {}\n    }\n  });\n};\n\n/**\n *\n * @param event\n * @param {boolean} [autoActivate]\n * @param {boolean} [reactivate]\n */\nHandTool.prototype.activateHand = function(event, autoActivate, reactivate) {\n  this._dragging.init(event, 'hand', {\n    trapClick: false,\n    autoActivate: autoActivate,\n    cursor: HAND_CURSOR,\n    data: {\n      context: {\n        reactivate: reactivate\n      }\n    }\n  });\n};\n\nHandTool.prototype.toggle = function() {\n  if (this.isActive()) {\n    return this._dragging.cancel();\n  }\n\n  var mouseEvent = this._mouse.getLastMoveEvent();\n\n  this.activateHand(mouseEvent, !!mouseEvent);\n};\n\nHandTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  if (context) {\n    return /^(hand|hand\\.move)$/.test(context.prefix);\n  }\n\n  return false;\n};\n\n// helpers //////////\n\nfunction isSpace(keyEvent) {\n  return isKey('Space', keyEvent);\n}","import ToolManagerModule from '../tool-manager';\nimport MouseModule from '../mouse';\n\nimport HandTool from './HandTool';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    ToolManagerModule,\n    MouseModule\n  ],\n  __init__: [ 'handTool' ],\n  handTool: [ 'type', HandTool ]\n};\n","var MARKER_OK = 'connect-ok',\n    MARKER_NOT_OK = 'connect-not-ok';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../connect/Connect').default} Connect\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../mouse/Mouse').default} Mouse\n * @typedef {import('../rules/Rules').default} Rules\n * @typedef {import('../tool-manager/ToolManager').default} ToolManager\n *\n * @typedef {import('../../model/Types').Element} Element\n */\n\n/**\n * @class\n * @constructor\n *\n * @param {EventBus} eventBus\n * @param {Dragging} dragging\n * @param {Connect} connect\n * @param {Canvas} canvas\n * @param {ToolManager} toolManager\n * @param {Rules} rules\n * @param {Mouse} mouse\n */\nexport default function GlobalConnect(\n    eventBus, dragging, connect,\n    canvas, toolManager, rules,\n    mouse) {\n\n  var self = this;\n\n  this._dragging = dragging;\n  this._rules = rules;\n  this._mouse = mouse;\n\n  toolManager.registerTool('global-connect', {\n    tool: 'global-connect',\n    dragging: 'global-connect.drag'\n  });\n\n  eventBus.on('global-connect.hover', function(event) {\n    var context = event.context,\n        startTarget = event.hover;\n\n    var canStartConnect = context.canStartConnect = self.canStartConnect(startTarget);\n\n    // simply ignore hover\n    if (canStartConnect === null) {\n      return;\n    }\n\n    context.startTarget = startTarget;\n\n    canvas.addMarker(startTarget, canStartConnect ? MARKER_OK : MARKER_NOT_OK);\n  });\n\n\n  eventBus.on([ 'global-connect.out', 'global-connect.cleanup' ], function(event) {\n    var startTarget = event.context.startTarget,\n        canStartConnect = event.context.canStartConnect;\n\n    if (startTarget) {\n      canvas.removeMarker(startTarget, canStartConnect ? MARKER_OK : MARKER_NOT_OK);\n    }\n  });\n\n\n  eventBus.on([ 'global-connect.ended' ], function(event) {\n    var context = event.context,\n        startTarget = context.startTarget,\n        startPosition = {\n          x: event.x,\n          y: event.y\n        };\n\n    var canStartConnect = self.canStartConnect(startTarget);\n\n    if (!canStartConnect) {\n      return;\n    }\n\n    eventBus.once('element.out', function() {\n      eventBus.once([ 'connect.ended', 'connect.canceled' ], function() {\n        eventBus.fire('global-connect.drag.ended');\n      });\n\n      connect.start(null, startTarget, startPosition);\n    });\n\n    return false;\n  });\n}\n\nGlobalConnect.$inject = [\n  'eventBus',\n  'dragging',\n  'connect',\n  'canvas',\n  'toolManager',\n  'rules',\n  'mouse'\n];\n\n/**\n * Initiates tool activity.\n */\nGlobalConnect.prototype.start = function(event, autoActivate) {\n  this._dragging.init(event, 'global-connect', {\n    autoActivate: autoActivate,\n    trapClick: false,\n    data: {\n      context: {}\n    }\n  });\n};\n\nGlobalConnect.prototype.toggle = function() {\n\n  if (this.isActive()) {\n    return this._dragging.cancel();\n  }\n\n  var mouseEvent = this._mouse.getLastMoveEvent();\n\n  return this.start(mouseEvent, !!mouseEvent);\n};\n\nGlobalConnect.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  return context && /^global-connect/.test(context.prefix);\n};\n\n/**\n * Check if source element can initiate connection.\n *\n * @param {Element} startTarget\n * @return {boolean}\n */\nGlobalConnect.prototype.canStartConnect = function(startTarget) {\n  return this._rules.allowed('connection.start', { source: startTarget });\n};\n","import ConnectModule from '../connect';\nimport RulesModule from '../rules';\nimport DraggingModule from '../dragging';\nimport ToolManagerModule from '../tool-manager';\nimport MouseModule from '../mouse';\n\nimport GlobalConnect from './GlobalConnect';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    ConnectModule,\n    RulesModule,\n    DraggingModule,\n    ToolManagerModule,\n    MouseModule\n  ],\n  globalConnect: [ 'type', GlobalConnect ]\n};\n","import {\n  assign\n} from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/features/palette/Palette').default} Palette\n * @typedef {import('diagram-js/lib/features/create/Create').default} Create\n * @typedef {import('diagram-js/lib/core/ElementFactory').default} ElementFactory\n * @typedef {import('../space-tool/BpmnSpaceTool').default} SpaceTool\n * @typedef {import('diagram-js/lib/features/lasso-tool/LassoTool').default} LassoTool\n * @typedef {import('diagram-js/lib/features/hand-tool/HandTool').default} HandTool\n * @typedef {import('diagram-js/lib/features/global-connect/GlobalConnect').default} GlobalConnect\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n *\n * @typedef {import('diagram-js/lib/features/palette/Palette').PaletteEntries} PaletteEntries\n */\n\n/**\n * A palette provider for BPMN 2.0 elements.\n *\n * @param {Palette} palette\n * @param {Create} create\n * @param {ElementFactory} elementFactory\n * @param {SpaceTool} spaceTool\n * @param {LassoTool} lassoTool\n * @param {HandTool} handTool\n * @param {GlobalConnect} globalConnect\n * @param {Translate} translate\n */\nexport default function PaletteProvider(\n    palette, create, elementFactory,\n    spaceTool, lassoTool, handTool,\n    globalConnect, translate) {\n\n  this._palette = palette;\n  this._create = create;\n  this._elementFactory = elementFactory;\n  this._spaceTool = spaceTool;\n  this._lassoTool = lassoTool;\n  this._handTool = handTool;\n  this._globalConnect = globalConnect;\n  this._translate = translate;\n\n  palette.registerProvider(this);\n}\n\nPaletteProvider.$inject = [\n  'palette',\n  'create',\n  'elementFactory',\n  'spaceTool',\n  'lassoTool',\n  'handTool',\n  'globalConnect',\n  'translate'\n];\n\n/**\n * @return {PaletteEntries}\n */\nPaletteProvider.prototype.getPaletteEntries = function() {\n\n  var actions = {},\n      create = this._create,\n      elementFactory = this._elementFactory,\n      spaceTool = this._spaceTool,\n      lassoTool = this._lassoTool,\n      handTool = this._handTool,\n      globalConnect = this._globalConnect,\n      translate = this._translate;\n\n  function createAction(type, group, className, title, options) {\n\n    function createListener(event) {\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n      create.start(event, shape);\n    }\n\n    return {\n      group: group,\n      className: className,\n      title: title,\n      action: {\n        dragstart: createListener,\n        click: createListener\n      }\n    };\n  }\n\n  function createSubprocess(event) {\n    var subProcess = elementFactory.createShape({\n      type: 'bpmn:SubProcess',\n      x: 0,\n      y: 0,\n      isExpanded: true\n    });\n\n    var startEvent = elementFactory.createShape({\n      type: 'bpmn:StartEvent',\n      x: 40,\n      y: 82,\n      parent: subProcess\n    });\n\n    create.start(event, [ subProcess, startEvent ], {\n      hints: {\n        autoSelect: [ subProcess ]\n      }\n    });\n  }\n\n  function createParticipant(event) {\n    create.start(event, elementFactory.createParticipantShape());\n  }\n\n  assign(actions, {\n    'hand-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-hand-tool',\n      title: translate('Activate hand tool'),\n      action: {\n        click: function(event) {\n          handTool.activateHand(event);\n        }\n      }\n    },\n    'lasso-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-lasso-tool',\n      title: translate('Activate lasso tool'),\n      action: {\n        click: function(event) {\n          lassoTool.activateSelection(event);\n        }\n      }\n    },\n    'space-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-space-tool',\n      title: translate('Activate create/remove space tool'),\n      action: {\n        click: function(event) {\n          spaceTool.activateSelection(event);\n        }\n      }\n    },\n    'global-connect-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-connection-multi',\n      title: translate('Activate global connect tool'),\n      action: {\n        click: function(event) {\n          globalConnect.start(event);\n        }\n      }\n    },\n    'tool-separator': {\n      group: 'tools',\n      separator: true\n    },\n    'create.start-event': createAction(\n      'bpmn:StartEvent', 'event', 'bpmn-icon-start-event-none',\n      translate('Create start event')\n    ),\n    'create.intermediate-event': createAction(\n      'bpmn:IntermediateThrowEvent', 'event', 'bpmn-icon-intermediate-event-none',\n      translate('Create intermediate/boundary event')\n    ),\n    'create.end-event': createAction(\n      'bpmn:EndEvent', 'event', 'bpmn-icon-end-event-none',\n      translate('Create end event')\n    ),\n    'create.exclusive-gateway': createAction(\n      'bpmn:ExclusiveGateway', 'gateway', 'bpmn-icon-gateway-none',\n      translate('Create gateway')\n    ),\n    'create.task': createAction(\n      'bpmn:Task', 'activity', 'bpmn-icon-task',\n      translate('Create task')\n    ),\n    'create.data-object': createAction(\n      'bpmn:DataObjectReference', 'data-object', 'bpmn-icon-data-object',\n      translate('Create data object reference')\n    ),\n    'create.data-store': createAction(\n      'bpmn:DataStoreReference', 'data-store', 'bpmn-icon-data-store',\n      translate('Create data store reference')\n    ),\n    'create.subprocess-expanded': {\n      group: 'activity',\n      className: 'bpmn-icon-subprocess-expanded',\n      title: translate('Create expanded sub-process'),\n      action: {\n        dragstart: createSubprocess,\n        click: createSubprocess\n      }\n    },\n    'create.participant-expanded': {\n      group: 'collaboration',\n      className: 'bpmn-icon-participant',\n      title: translate('Create pool/participant'),\n      action: {\n        dragstart: createParticipant,\n        click: createParticipant\n      }\n    },\n    'create.group': createAction(\n      'bpmn:Group', 'artifact', 'bpmn-icon-group',\n      translate('Create group')\n    ),\n  });\n\n  return actions;\n};\n","import PaletteModule from 'diagram-js/lib/features/palette';\nimport CreateModule from 'diagram-js/lib/features/create';\nimport SpaceToolModule from '../space-tool';\nimport LassoToolModule from 'diagram-js/lib/features/lasso-tool';\nimport HandToolModule from 'diagram-js/lib/features/hand-tool';\nimport GlobalConnectModule from 'diagram-js/lib/features/global-connect';\nimport translate from 'diagram-js/lib/i18n/translate';\n\nimport PaletteProvider from './PaletteProvider';\n\nexport default {\n  __depends__: [\n    PaletteModule,\n    CreateModule,\n    SpaceToolModule,\n    LassoToolModule,\n    HandToolModule,\n    GlobalConnectModule,\n    translate\n  ],\n  __init__: [ 'paletteProvider' ],\n  paletteProvider: [ 'type', PaletteProvider ]\n};\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport inherits from 'inherits-browser';\n\nimport { escapeCSS as cssEscape } from 'diagram-js/lib/util/EscapeUtil';\n\nimport {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  attr as svgAttr\n} from 'tiny-svg';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/core/ElementFactory').default} ElementFactory\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/features/preview-support/PreviewSupport').default} PreviewSupport\n */\n\nvar LOW_PRIORITY = 250;\n\n/**\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {ElementFactory} elementFactory\n * @param {Canvas} canvas\n * @param {PreviewSupport} previewSupport\n */\nexport default function BpmnReplacePreview(\n    eventBus, elementRegistry, elementFactory,\n    canvas, previewSupport) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Replace the visuals of all elements in the context which can be replaced\n   *\n   * @param  {Object} context\n   */\n  function replaceVisual(context) {\n\n    var replacements = context.canExecute.replacements;\n\n    forEach(replacements, function(replacement) {\n\n      var id = replacement.oldElementId;\n\n      var newElement = {\n        type: replacement.newElementType\n      };\n\n      // if the visual of the element is already replaced\n      if (context.visualReplacements[id]) {\n        return;\n      }\n\n      var element = elementRegistry.get(id);\n\n      assign(newElement, { x: element.x, y: element.y });\n\n      // create a temporary shape\n      var tempShape = elementFactory.createShape(newElement);\n\n      canvas.addShape(tempShape, element.parent);\n\n      // select the original SVG element related to the element and hide it\n      var gfx = domQuery('[data-element-id=\"' + cssEscape(element.id) + '\"]', context.dragGroup);\n\n      if (gfx) {\n        svgAttr(gfx, { display: 'none' });\n      }\n\n      // clone the gfx of the temporary shape and add it to the drag group\n      var dragger = previewSupport.addDragger(tempShape, context.dragGroup);\n\n      context.visualReplacements[id] = dragger;\n\n      canvas.removeShape(tempShape);\n    });\n  }\n\n  /**\n   * Restore the original visuals of the previously replaced elements\n   *\n   * @param  {Object} context\n   */\n  function restoreVisual(context) {\n\n    var visualReplacements = context.visualReplacements;\n\n    forEach(visualReplacements, function(dragger, id) {\n\n      var originalGfx = domQuery('[data-element-id=\"' + cssEscape(id) + '\"]', context.dragGroup);\n\n      if (originalGfx) {\n        svgAttr(originalGfx, { display: 'inline' });\n      }\n\n      dragger.remove();\n\n      if (visualReplacements[id]) {\n        delete visualReplacements[id];\n      }\n    });\n  }\n\n  eventBus.on('shape.move.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        canExecute = context.canExecute;\n\n    if (!context.visualReplacements) {\n      context.visualReplacements = {};\n    }\n\n    if (canExecute && canExecute.replacements) {\n      replaceVisual(context);\n    } else {\n      restoreVisual(context);\n    }\n  });\n}\n\nBpmnReplacePreview.$inject = [\n  'eventBus',\n  'elementRegistry',\n  'elementFactory',\n  'canvas',\n  'previewSupport'\n];\n\ninherits(BpmnReplacePreview, CommandInterceptor);","import PreviewSupportModule from 'diagram-js/lib/features/preview-support';\n\nimport BpmnReplacePreview from './BpmnReplacePreview';\n\nexport default {\n  __depends__: [\n    PreviewSupportModule\n  ],\n  __init__: [ 'bpmnReplacePreview' ],\n  bpmnReplacePreview: [ 'type', BpmnReplacePreview ]\n};\n","import {\r\n  mid,\r\n  setSnapped\r\n} from 'diagram-js/lib/features/snapping/SnapUtil';\r\n\r\nimport { isCmd } from 'diagram-js/lib/features/keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  getOrientation\r\n} from 'diagram-js/lib/layout/LayoutUtil';\r\n\r\nimport { is } from '../../util/ModelUtil';\r\n\r\nimport { isAny } from '../modeling/util/ModelingUtil';\r\n\r\nimport { some } from 'min-dash';\r\n\r\n/**\r\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\r\n *\r\n * @typedef {import('diagram-js/lib/core/EventBus').Event} Event\r\n *\r\n * @typedef {import('../../model/Types').Shape} Shape\r\n *\r\n * @typedef {import('diagram-js/lib/util/Types').Axis} Axis\r\n * @typedef {import('diagram-js/lib/util/Types').Point} Point\r\n */\r\n\r\nvar HIGHER_PRIORITY = 1250;\r\n\r\nvar BOUNDARY_TO_HOST_THRESHOLD = 40;\r\n\r\nvar TARGET_BOUNDS_PADDING = 20,\r\n    TASK_BOUNDS_PADDING = 10;\r\n\r\nvar TARGET_CENTER_PADDING = 20;\r\n\r\nvar AXES = [ 'x', 'y' ];\r\n\r\nvar abs = Math.abs;\r\n\r\n/**\r\n * Snap during connect.\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nexport default function BpmnConnectSnapping(eventBus) {\r\n  eventBus.on([\r\n    'connect.hover',\r\n    'connect.move',\r\n    'connect.end',\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        canExecute = context.canExecute,\r\n        start = context.start,\r\n        hover = context.hover,\r\n        source = context.source,\r\n        target = context.target;\r\n\r\n    // do NOT snap on CMD\r\n    if (event.originalEvent && isCmd(event.originalEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (!context.initialConnectionStart) {\r\n      context.initialConnectionStart = context.connectionStart;\r\n    }\r\n\r\n    // snap hover\r\n    if (canExecute && hover) {\r\n      snapToShape(event, hover, getTargetBoundsPadding(hover));\r\n    }\r\n\r\n    if (hover && isAnyType(canExecute, [\r\n      'bpmn:Association',\r\n      'bpmn:DataInputAssociation',\r\n      'bpmn:DataOutputAssociation',\r\n      'bpmn:SequenceFlow'\r\n    ])) {\r\n      context.connectionStart = mid(start);\r\n\r\n      // snap hover\r\n      if (isAny(hover, [ 'bpmn:Event', 'bpmn:Gateway' ])) {\r\n        snapToPosition(event, mid(hover));\r\n      }\r\n\r\n      // snap hover\r\n      if (isAny(hover, [ 'bpmn:Task', 'bpmn:SubProcess' ])) {\r\n        snapToTargetMid(event, hover);\r\n      }\r\n\r\n      // snap source and target\r\n      if (is(source, 'bpmn:BoundaryEvent') && target === source.host) {\r\n        snapBoundaryEventLoop(event);\r\n      }\r\n\r\n    } else if (isType(canExecute, 'bpmn:MessageFlow')) {\r\n\r\n      if (is(start, 'bpmn:Event')) {\r\n\r\n        // snap start\r\n        context.connectionStart = mid(start);\r\n      }\r\n\r\n      if (is(hover, 'bpmn:Event')) {\r\n\r\n        // snap hover\r\n        snapToPosition(event, mid(hover));\r\n      }\r\n\r\n    } else {\r\n\r\n      // un-snap source\r\n      context.connectionStart = context.initialConnectionStart;\r\n    }\r\n  });\r\n}\r\n\r\nBpmnConnectSnapping.$inject = [ 'eventBus' ];\r\n\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Snap to the given target if the event is inside the bounds of the target.\r\n *\r\n * @param {Event} event\r\n * @param {Shape} target\r\n * @param {number} padding\r\n */\r\nfunction snapToShape(event, target, padding) {\r\n  AXES.forEach(function(axis) {\r\n    var dimensionForAxis = getDimensionForAxis(axis, target);\r\n\r\n    if (event[ axis ] < target[ axis ] + padding) {\r\n      setSnapped(event, axis, target[ axis ] + padding);\r\n    } else if (event[ axis ] > target[ axis ] + dimensionForAxis - padding) {\r\n      setSnapped(event, axis, target[ axis ] + dimensionForAxis - padding);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Snap to the target mid if the event is in the target mid.\r\n *\r\n * @param {Event} event\r\n * @param {Shape} target\r\n */\r\nfunction snapToTargetMid(event, target) {\r\n  var targetMid = mid(target);\r\n\r\n  AXES.forEach(function(axis) {\r\n    if (isMid(event, target, axis)) {\r\n      setSnapped(event, axis, targetMid[ axis ]);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Snap to prevent a loop overlapping a boundary event.\r\n *\r\n * @param {Event} event\r\n */\r\nfunction snapBoundaryEventLoop(event) {\r\n  var context = event.context,\r\n      source = context.source,\r\n      target = context.target;\r\n\r\n  if (isReverse(context)) {\r\n    return;\r\n  }\r\n\r\n  var sourceMid = mid(source),\r\n      orientation = getOrientation(sourceMid, target, -10),\r\n      axes = [];\r\n\r\n  if (/top|bottom/.test(orientation)) {\r\n    axes.push('x');\r\n  }\r\n\r\n  if (/left|right/.test(orientation)) {\r\n    axes.push('y');\r\n  }\r\n\r\n  axes.forEach(function(axis) {\r\n    var coordinate = event[ axis ], newCoordinate;\r\n\r\n    if (abs(coordinate - sourceMid[ axis ]) < BOUNDARY_TO_HOST_THRESHOLD) {\r\n      if (coordinate > sourceMid[ axis ]) {\r\n        newCoordinate = sourceMid[ axis ] + BOUNDARY_TO_HOST_THRESHOLD;\r\n      }\r\n      else {\r\n        newCoordinate = sourceMid[ axis ] - BOUNDARY_TO_HOST_THRESHOLD;\r\n      }\r\n\r\n      setSnapped(event, axis, newCoordinate);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * @param {Event} event\r\n * @param {Point} position\r\n */\r\nfunction snapToPosition(event, position) {\r\n  setSnapped(event, 'x', position.x);\r\n  setSnapped(event, 'y', position.y);\r\n}\r\n\r\nfunction isType(attrs, type) {\r\n  return attrs && attrs.type === type;\r\n}\r\n\r\nfunction isAnyType(attrs, types) {\r\n  return some(types, function(type) {\r\n    return isType(attrs, type);\r\n  });\r\n}\r\n\r\n/**\r\n * @param {Axis} axis\r\n * @param {Shape} element\r\n *\r\n * @return {number}\r\n */\r\nfunction getDimensionForAxis(axis, element) {\r\n  return axis === 'x' ? element.width : element.height;\r\n}\r\n\r\n/**\r\n * @param {Shape} target\r\n *\r\n * @return {number}\r\n */\r\nfunction getTargetBoundsPadding(target) {\r\n  if (is(target, 'bpmn:Task')) {\r\n    return TASK_BOUNDS_PADDING;\r\n  } else {\r\n    return TARGET_BOUNDS_PADDING;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Event} event\r\n * @param {Shape} target\r\n * @param {Axis} axis\r\n *\r\n * @return {boolean}\r\n */\r\nfunction isMid(event, target, axis) {\r\n  return event[ axis ] > target[ axis ] + TARGET_CENTER_PADDING\r\n    && event[ axis ] < target[ axis ] + getDimensionForAxis(axis, target) - TARGET_CENTER_PADDING;\r\n}\r\n\r\nfunction isReverse(context) {\r\n  var hover = context.hover,\r\n      source = context.source;\r\n\r\n  return hover && source && hover === source;\r\n}","import {\n  forEach\n} from 'min-dash';\n\nimport {\n  snapTo\n} from './SnapUtil';\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../util/Types').Axis} Axis\n * @typedef {import('../../util/Types').DirectionTRBL} DirectionTRBL\n * @typedef {import('../../util/Types').Point} Point\n *\n * @typedef {DirectionTRBL & 'mid'} SnapLocation\n */\n\n/**\n * A snap context, containing the (possibly incomplete)\n * mappings of drop targets (to identify the snapping)\n * to computed snap points.\n */\nexport default function SnapContext() {\n\n  /**\n   * @type {Record<string, SnapPoints>}\n   */\n  this._targets = {};\n\n  /**\n   * @type {Record<SnapLocation, Point>}\n   */\n  this._snapOrigins = {};\n\n  /**\n   * @type {SnapLocation[]}\n   */\n  this._snapLocations = [];\n\n  /**\n   * @type {Record<SnapLocation, Point[]>}\n   */\n  this._defaultSnaps = {};\n}\n\n/**\n * Get the snap origin for a given location.\n *\n * @param {SnapLocation} snapLocation\n *\n * @return {Point}\n */\nSnapContext.prototype.getSnapOrigin = function(snapLocation) {\n  return this._snapOrigins[snapLocation];\n};\n\n/**\n * Set the snap origin for a given location.\n *\n * @param {SnapLocation} snapLocation\n * @param {Point} snapOrigin\n */\nSnapContext.prototype.setSnapOrigin = function(snapLocation, snapOrigin) {\n  this._snapOrigins[snapLocation] = snapOrigin;\n\n  if (this._snapLocations.indexOf(snapLocation) === -1) {\n    this._snapLocations.push(snapLocation);\n  }\n};\n\n/**\n * Add a default snap point.\n *\n * @param {SnapLocation} snapLocation\n * @param {Point} point\n */\nSnapContext.prototype.addDefaultSnap = function(snapLocation, point) {\n\n  var snapValues = this._defaultSnaps[snapLocation];\n\n  if (!snapValues) {\n    snapValues = this._defaultSnaps[snapLocation] = [];\n  }\n\n  snapValues.push(point);\n};\n\n/**\n * Get the snap locations for this context.\n *\n * @return {SnapLocation[]}\n */\nSnapContext.prototype.getSnapLocations = function() {\n  return this._snapLocations;\n};\n\n/**\n * Set the snap locations for this context.\n *\n * The order of locations determines precedence.\n *\n * @param {SnapLocation[]} snapLocations\n */\nSnapContext.prototype.setSnapLocations = function(snapLocations) {\n  this._snapLocations = snapLocations;\n};\n\n/**\n * Get snap points for the given target.\n *\n * @param {Element|string} target\n *\n * @return {SnapPoints}\n */\nSnapContext.prototype.pointsForTarget = function(target) {\n\n  var targetId = target.id || target;\n\n  var snapPoints = this._targets[targetId];\n\n  if (!snapPoints) {\n    snapPoints = this._targets[targetId] = new SnapPoints();\n    snapPoints.initDefaults(this._defaultSnaps);\n  }\n\n  return snapPoints;\n};\n\n\n/**\n * Add points to snap to.\n */\nexport function SnapPoints() {\n\n  /**\n   * Example:\n   *\n   * ```javascript\n   * {\n   *   'top-right': {\n   *     x: [ 100, 200, 300 ]\n   *     y: [ 100, 200, 300 ]\n   *   }\n   * }\n   * ```\n   *\n   * @type {Record<string, Record<Axis, number[]>>}\n   */\n  this._snapValues = {};\n}\n\n/**\n * Add a snap point.\n *\n * @param {SnapLocation} snapLocation\n * @param {Point} point\n */\nSnapPoints.prototype.add = function(snapLocation, point) {\n\n  var snapValues = this._snapValues[snapLocation];\n\n  if (!snapValues) {\n    snapValues = this._snapValues[snapLocation] = { x: [], y: [] };\n  }\n\n  if (snapValues.x.indexOf(point.x) === -1) {\n    snapValues.x.push(point.x);\n  }\n\n  if (snapValues.y.indexOf(point.y) === -1) {\n    snapValues.y.push(point.y);\n  }\n};\n\n/**\n * Snap a point's x or y value.\n *\n * @param {Point} point\n * @param {SnapLocation} snapLocation\n * @param {Axis} axis\n * @param {number} tolerance\n *\n * @return {number}\n */\nSnapPoints.prototype.snap = function(point, snapLocation, axis, tolerance) {\n  var snappingValues = this._snapValues[snapLocation];\n\n  return snappingValues && snapTo(point[axis], snappingValues[axis], tolerance);\n};\n\n/**\n * Initialize default snap points.\n *\n * @param {Record<SnapLocation, Point[]>} defaultSnaps\n */\nSnapPoints.prototype.initDefaults = function(defaultSnaps) {\n\n  var self = this;\n\n  forEach(defaultSnaps || {}, function(snapPoints, snapLocation) {\n    forEach(snapPoints, function(point) {\n      self.add(snapLocation, point);\n    });\n  });\n};","import SnapContext from './SnapContext';\r\n\r\nimport {\r\n  getChildren,\r\n  isSnapped,\r\n  mid\r\n} from './SnapUtil';\r\n\r\nimport { isCmd } from '../keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  forEach,\r\n  isNumber\r\n} from 'min-dash';\r\n\r\nimport {\r\n  isConnection,\r\n  isLabel\r\n} from '../../util/ModelUtil';\r\n\r\n/**\r\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\r\n * @typedef {import('../../core/EventBus').default} EventBus\r\n * @typedef {import('./Snapping').default} Snapping\r\n */\r\n\r\nvar HIGHER_PRIORITY = 1250;\r\n\r\n\r\n/**\r\n * Snap during create and move.\r\n *\r\n * @param {ElementRegistry} elementRegistry\r\n * @param {EventBus} eventBus\r\n * @param {Snapping} snapping\r\n */\r\nexport default function CreateMoveSnapping(elementRegistry, eventBus, snapping) {\r\n  var self = this;\r\n\r\n  this._elementRegistry = elementRegistry;\r\n\r\n  eventBus.on([\r\n    'create.start',\r\n    'shape.move.start'\r\n  ], function(event) {\r\n    self.initSnap(event);\r\n  });\r\n\r\n  eventBus.on([\r\n    'create.move',\r\n    'create.end',\r\n    'shape.move.move',\r\n    'shape.move.end'\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        snapContext = context.snapContext,\r\n        target = context.target;\r\n\r\n    if (event.originalEvent && isCmd(event.originalEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (isSnapped(event) || !target) {\r\n      return;\r\n    }\r\n\r\n    var snapPoints = snapContext.pointsForTarget(target);\r\n\r\n    if (!snapPoints.initialized) {\r\n      snapPoints = self.addSnapTargetPoints(snapPoints, shape, target);\r\n\r\n      snapPoints.initialized = true;\r\n    }\r\n\r\n    snapping.snap(event, snapPoints);\r\n  });\r\n\r\n  eventBus.on([\r\n    'create.cleanup',\r\n    'shape.move.cleanup'\r\n  ], function() {\r\n    snapping.hide();\r\n  });\r\n}\r\n\r\nCreateMoveSnapping.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'snapping'\r\n];\r\n\r\nCreateMoveSnapping.prototype.initSnap = function(event) {\r\n  var elementRegistry = this._elementRegistry;\r\n\r\n  var context = event.context,\r\n      shape = context.shape,\r\n      snapContext = context.snapContext;\r\n\r\n  if (!snapContext) {\r\n    snapContext = context.snapContext = new SnapContext();\r\n  }\r\n\r\n  var shapeMid;\r\n\r\n  if (elementRegistry.get(shape.id)) {\r\n\r\n    // move\r\n    shapeMid = mid(shape, event);\r\n  } else {\r\n\r\n    // create\r\n    shapeMid = {\r\n      x: event.x + mid(shape).x,\r\n      y: event.y + mid(shape).y\r\n    };\r\n  }\r\n\r\n  var shapeTopLeft = {\r\n        x: shapeMid.x - shape.width / 2,\r\n        y: shapeMid.y - shape.height / 2\r\n      },\r\n      shapeBottomRight = {\r\n        x: shapeMid.x + shape.width / 2,\r\n        y: shapeMid.y + shape.height / 2\r\n      };\r\n\r\n  snapContext.setSnapOrigin('mid', {\r\n    x: shapeMid.x - event.x,\r\n    y: shapeMid.y - event.y\r\n  });\r\n\r\n  // snap labels to mid only\r\n  if (isLabel(shape)) {\r\n    return snapContext;\r\n  }\r\n\r\n  snapContext.setSnapOrigin('top-left', {\r\n    x: shapeTopLeft.x - event.x,\r\n    y: shapeTopLeft.y - event.y\r\n  });\r\n\r\n  snapContext.setSnapOrigin('bottom-right', {\r\n    x: shapeBottomRight.x - event.x,\r\n    y: shapeBottomRight.y - event.y\r\n  });\r\n\r\n  return snapContext;\r\n};\r\n\r\nCreateMoveSnapping.prototype.addSnapTargetPoints = function(snapPoints, shape, target) {\r\n  var snapTargets = this.getSnapTargets(shape, target);\r\n\r\n  forEach(snapTargets, function(snapTarget) {\r\n\r\n    // handle labels\r\n    if (isLabel(snapTarget)) {\r\n\r\n      if (isLabel(shape)) {\r\n        snapPoints.add('mid', mid(snapTarget));\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    // handle connections\r\n    if (isConnection(snapTarget)) {\r\n\r\n      // ignore single segment connections\r\n      if (snapTarget.waypoints.length < 3) {\r\n        return;\r\n      }\r\n\r\n      // ignore first and last waypoint\r\n      var waypoints = snapTarget.waypoints.slice(1, -1);\r\n\r\n      forEach(waypoints, function(waypoint) {\r\n        snapPoints.add('mid', waypoint);\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    // handle shapes\r\n    snapPoints.add('mid', mid(snapTarget));\r\n  });\r\n\r\n  if (!isNumber(shape.x) || !isNumber(shape.y)) {\r\n    return snapPoints;\r\n  }\r\n\r\n  // snap to original position when moving\r\n  if (this._elementRegistry.get(shape.id)) {\r\n    snapPoints.add('mid', mid(shape));\r\n  }\r\n\r\n  return snapPoints;\r\n};\r\n\r\nCreateMoveSnapping.prototype.getSnapTargets = function(shape, target) {\r\n  return getChildren(target).filter(function(child) {\r\n    return !isHidden(child);\r\n  });\r\n};\r\n\r\n// helpers //////////\r\n\r\nfunction isHidden(element) {\r\n  return !!element.hidden;\r\n}","import inherits from 'inherits-browser';\n\nimport CreateMoveSnapping from 'diagram-js/lib/features/snapping/CreateMoveSnapping';\n\nimport {\n  isSnapped,\n  setSnapped,\n  topLeft,\n  bottomRight\n} from 'diagram-js/lib/features/snapping/SnapUtil';\n\nimport { isExpanded } from '../../util/DiUtil';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  asTRBL,\n  getMid\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport { getBoundaryAttachment } from './BpmnSnappingUtil';\n\nimport { forEach } from 'min-dash';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('diagram-js/lib/features/snapping/SnapContext').default} SnapContext\n * @typedef {import('diagram-js/lib/features/snapping/SnapContext').SnapPoints} SnapPoints\n *\n * @typedef {import('diagram-js/lib/core/EventBus').Event} Event\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').Shape} Shape\n */\n\nvar HIGH_PRIORITY = 1500;\n\n\n/**\n * Snap during create and move.\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function BpmnCreateMoveSnapping(eventBus, injector) {\n  injector.invoke(CreateMoveSnapping, this);\n\n  // creating first participant\n  eventBus.on([ 'create.move', 'create.end' ], HIGH_PRIORITY, setSnappedIfConstrained);\n\n  // snap boundary events\n  eventBus.on([\n    'create.move',\n    'create.end',\n    'shape.move.move',\n    'shape.move.end'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        canExecute = context.canExecute,\n        target = context.target;\n\n    var canAttach = canExecute && (canExecute === 'attach' || canExecute.attach);\n\n    if (canAttach && !isSnapped(event)) {\n      snapBoundaryEvent(event, target);\n    }\n  });\n}\n\ninherits(BpmnCreateMoveSnapping, CreateMoveSnapping);\n\nBpmnCreateMoveSnapping.$inject = [\n  'eventBus',\n  'injector'\n];\n\n/**\n * @param {Event} event\n *\n * @return {SnapContext}\n */\nBpmnCreateMoveSnapping.prototype.initSnap = function(event) {\n  var snapContext = CreateMoveSnapping.prototype.initSnap.call(this, event);\n\n  var shape = event.shape;\n\n  var isMove = !!this._elementRegistry.get(shape.id);\n\n  // snap to docking points\n  forEach(shape.outgoing, function(connection) {\n    var docking = connection.waypoints[0];\n\n    docking = docking.original || docking;\n\n    snapContext.setSnapOrigin(connection.id + '-docking', getDockingSnapOrigin(docking, isMove, event));\n  });\n\n  forEach(shape.incoming, function(connection) {\n    var docking = connection.waypoints[connection.waypoints.length - 1];\n\n    docking = docking.original || docking;\n\n    snapContext.setSnapOrigin(connection.id + '-docking', getDockingSnapOrigin(docking, isMove, event));\n  });\n\n  if (is(shape, 'bpmn:Participant')) {\n\n    // snap to borders with higher priority\n    snapContext.setSnapLocations([ 'top-left', 'bottom-right', 'mid' ]);\n  }\n\n  return snapContext;\n};\n\n/**\n * @param {SnapPoints} snapPoints\n * @param {Shape} shape\n * @param {Shape} target\n *\n * @return {SnapPoints}\n */\nBpmnCreateMoveSnapping.prototype.addSnapTargetPoints = function(snapPoints, shape, target) {\n  CreateMoveSnapping.prototype.addSnapTargetPoints.call(this, snapPoints, shape, target);\n\n  var snapTargets = this.getSnapTargets(shape, target);\n\n  forEach(snapTargets, function(snapTarget) {\n\n    // handle TRBL alignment\n    //\n    // * with container elements\n    // * with text annotations\n    if (isContainer(snapTarget) || areAll([ shape, snapTarget ], 'bpmn:TextAnnotation')) {\n      snapPoints.add('top-left', topLeft(snapTarget));\n      snapPoints.add('bottom-right', bottomRight(snapTarget));\n    }\n  });\n\n  var elementRegistry = this._elementRegistry;\n\n  // snap to docking points if not create mode\n  forEach(shape.incoming, function(connection) {\n    if (elementRegistry.get(shape.id)) {\n\n      if (!includes(snapTargets, connection.source)) {\n        snapPoints.add('mid', getMid(connection.source));\n      }\n\n      var docking = connection.waypoints[0];\n      snapPoints.add(connection.id + '-docking', docking.original || docking);\n    }\n  });\n\n  forEach(shape.outgoing, function(connection) {\n    if (elementRegistry.get(shape.id)) {\n\n      if (!includes(snapTargets, connection.target)) {\n        snapPoints.add('mid', getMid(connection.target));\n      }\n\n      var docking = connection.waypoints[ connection.waypoints.length - 1 ];\n\n      snapPoints.add(connection.id + '-docking', docking.original || docking);\n    }\n  });\n\n  // add sequence flow parents as snap targets\n  if (is(target, 'bpmn:SequenceFlow')) {\n    snapPoints = this.addSnapTargetPoints(snapPoints, shape, target.parent);\n  }\n\n  return snapPoints;\n};\n\n/**\n * @param {Shape} shape\n * @param {Shape} target\n *\n * @return {Shape[]}\n */\nBpmnCreateMoveSnapping.prototype.getSnapTargets = function(shape, target) {\n  return CreateMoveSnapping.prototype.getSnapTargets.call(this, shape, target)\n    .filter(function(snapTarget) {\n\n      // do not snap to lanes\n      return !is(snapTarget, 'bpmn:Lane');\n    });\n};\n\n// helpers //////////\n\n/**\n * @param {Shape} event\n * @param {Shape} target\n */\nfunction snapBoundaryEvent(event, target) {\n  var targetTRBL = asTRBL(target);\n\n  var direction = getBoundaryAttachment(event, target);\n\n  var context = event.context,\n      shape = context.shape;\n\n  var offset;\n\n  if (shape.parent) {\n    offset = { x: 0, y: 0 };\n  } else {\n    offset = getMid(shape);\n  }\n\n  if (/top/.test(direction)) {\n    setSnapped(event, 'y', targetTRBL.top - offset.y);\n  } else if (/bottom/.test(direction)) {\n    setSnapped(event, 'y', targetTRBL.bottom - offset.y);\n  }\n\n  if (/left/.test(direction)) {\n    setSnapped(event, 'x', targetTRBL.left - offset.x);\n  } else if (/right/.test(direction)) {\n    setSnapped(event, 'x', targetTRBL.right - offset.x);\n  }\n}\n\n/**\n * @param {Element[]} elements\n * @param {string} type\n *\n * @return {boolean}\n */\nfunction areAll(elements, type) {\n  return elements.every(function(el) {\n    return is(el, type);\n  });\n}\n\n/**\n * @param {Element} element\n */\nfunction isContainer(element) {\n  if (is(element, 'bpmn:SubProcess') && isExpanded(element)) {\n    return true;\n  }\n\n  return is(element, 'bpmn:Participant');\n}\n\n/**\n * @param {Event} event\n */\nfunction setSnappedIfConstrained(event) {\n  var context = event.context,\n      createConstraints = context.createConstraints;\n\n  if (!createConstraints) {\n    return;\n  }\n\n  var top = createConstraints.top,\n      right = createConstraints.right,\n      bottom = createConstraints.bottom,\n      left = createConstraints.left;\n\n  if ((left && left >= event.x) || (right && right <= event.x)) {\n    setSnapped(event, 'x', event.x);\n  }\n\n  if ((top && top >= event.y) || (bottom && bottom <= event.y)) {\n    setSnapped(event, 'y', event.y);\n  }\n}\n\nfunction includes(array, value) {\n  return array.indexOf(value) !== -1;\n}\n\nfunction getDockingSnapOrigin(docking, isMove, event) {\n  return isMove ? (\n    {\n      x: docking.x - event.x,\n      y: docking.y - event.y\n    }\n  ) : {\n    x: docking.x,\n    y: docking.y\n  };\n}\n","import SnapContext from './SnapContext';\r\n\r\nimport {\r\n  bottomRight,\r\n  getChildren,\r\n  isSnapped,\r\n  setSnapped,\r\n  topLeft,\r\n} from './SnapUtil';\r\n\r\nimport { isCmd } from '../keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  asTRBL,\r\n  getMid\r\n} from '../../layout/LayoutUtil';\r\n\r\nimport { forEach } from 'min-dash';\r\n\r\nimport {\r\n  isConnection,\r\n  isLabel\r\n} from '../../util/ModelUtil';\r\n\r\n/**\r\n * @typedef {import('../../core/EventBus').default} EventBus\r\n * @typedef {import('./Snapping').default} Snapping\r\n */\r\n\r\nvar HIGHER_PRIORITY = 1250;\r\n\r\n\r\n/**\r\n * Snap during resize.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Snapping} snapping\r\n */\r\nexport default function ResizeSnapping(eventBus, snapping) {\r\n  var self = this;\r\n\r\n  eventBus.on([ 'resize.start' ], function(event) {\r\n    self.initSnap(event);\r\n  });\r\n\r\n  eventBus.on([\r\n    'resize.move',\r\n    'resize.end',\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        parent = shape.parent,\r\n        direction = context.direction,\r\n        snapContext = context.snapContext;\r\n\r\n    if (event.originalEvent && isCmd(event.originalEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (isSnapped(event)) {\r\n      return;\r\n    }\r\n\r\n    var snapPoints = snapContext.pointsForTarget(parent);\r\n\r\n    if (!snapPoints.initialized) {\r\n      snapPoints = self.addSnapTargetPoints(snapPoints, shape, parent, direction);\r\n\r\n      snapPoints.initialized = true;\r\n    }\r\n\r\n    if (isHorizontal(direction)) {\r\n      setSnapped(event, 'x', event.x);\r\n    }\r\n\r\n    if (isVertical(direction)) {\r\n      setSnapped(event, 'y', event.y);\r\n    }\r\n\r\n    snapping.snap(event, snapPoints);\r\n  });\r\n\r\n  eventBus.on([ 'resize.cleanup' ], function() {\r\n    snapping.hide();\r\n  });\r\n}\r\n\r\nResizeSnapping.prototype.initSnap = function(event) {\r\n  var context = event.context,\r\n      shape = context.shape,\r\n      direction = context.direction,\r\n      snapContext = context.snapContext;\r\n\r\n  if (!snapContext) {\r\n    snapContext = context.snapContext = new SnapContext();\r\n  }\r\n\r\n  var snapOrigin = getSnapOrigin(shape, direction);\r\n\r\n  snapContext.setSnapOrigin('corner', {\r\n    x: snapOrigin.x - event.x,\r\n    y: snapOrigin.y - event.y\r\n  });\r\n\r\n  return snapContext;\r\n};\r\n\r\nResizeSnapping.prototype.addSnapTargetPoints = function(snapPoints, shape, target, direction) {\r\n  var snapTargets = this.getSnapTargets(shape, target);\r\n\r\n  forEach(snapTargets, function(snapTarget) {\r\n    snapPoints.add('corner', bottomRight(snapTarget));\r\n    snapPoints.add('corner', topLeft(snapTarget));\r\n  });\r\n\r\n  snapPoints.add('corner', getSnapOrigin(shape, direction));\r\n\r\n  return snapPoints;\r\n};\r\n\r\nResizeSnapping.$inject = [\r\n  'eventBus',\r\n  'snapping'\r\n];\r\n\r\nResizeSnapping.prototype.getSnapTargets = function(shape, target) {\r\n  return getChildren(target).filter(function(child) {\r\n    return !isAttached(child, shape)\r\n      && !isConnection(child)\r\n      && !isHidden(child)\r\n      && !isLabel(child);\r\n  });\r\n};\r\n\r\n// helpers //////////\r\n\r\nfunction getSnapOrigin(shape, direction) {\r\n  var mid = getMid(shape),\r\n      trbl = asTRBL(shape);\r\n\r\n  var snapOrigin = {\r\n    x: mid.x,\r\n    y: mid.y\r\n  };\r\n\r\n  if (direction.indexOf('n') !== -1) {\r\n    snapOrigin.y = trbl.top;\r\n  } else if (direction.indexOf('s') !== -1) {\r\n    snapOrigin.y = trbl.bottom;\r\n  }\r\n\r\n  if (direction.indexOf('e') !== -1) {\r\n    snapOrigin.x = trbl.right;\r\n  } else if (direction.indexOf('w') !== -1) {\r\n    snapOrigin.x = trbl.left;\r\n  }\r\n\r\n  return snapOrigin;\r\n}\r\n\r\nfunction isAttached(element, host) {\r\n  return element.host === host;\r\n}\r\n\r\nfunction isHidden(element) {\r\n  return !!element.hidden;\r\n}\r\n\r\nfunction isHorizontal(direction) {\r\n  return direction === 'n' || direction === 's';\r\n}\r\n\r\nfunction isVertical(direction) {\r\n  return direction === 'e' || direction === 'w';\r\n}","import {\n  bind,\n  debounce,\n  forEach,\n  isNumber,\n  isObject\n} from 'min-dash';\n\nimport {\n  isSnapped,\n  setSnapped\n} from './SnapUtil';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate\n} from 'tiny-svg';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n *\n * @typedef {import('../../core/EventBus').Event} Event\n *\n * @typedef {import('./SnapContext').SnapPoints} SnapPoints\n */\n\nvar SNAP_TOLERANCE = 7;\n\nexport var SNAP_LINE_HIDE_DELAY = 1000;\n\n\n/**\n * Generic snapping feature.\n *\n * @param {Canvas} canvas\n */\nexport default function Snapping(canvas) {\n  this._canvas = canvas;\n\n  // delay hide by 1000 seconds since last snap\n  this._asyncHide = debounce(bind(this.hide, this), SNAP_LINE_HIDE_DELAY);\n}\n\nSnapping.$inject = [ 'canvas' ];\n\n/**\n * Snap an event to given snap points.\n *\n * @param {Event} event\n * @param {SnapPoints} snapPoints\n */\nSnapping.prototype.snap = function(event, snapPoints) {\n  var context = event.context,\n      snapContext = context.snapContext,\n      snapLocations = snapContext.getSnapLocations();\n\n  var snapping = {\n    x: isSnapped(event, 'x'),\n    y: isSnapped(event, 'y')\n  };\n\n  forEach(snapLocations, function(location) {\n    var snapOrigin = snapContext.getSnapOrigin(location);\n\n    var snapCurrent = {\n      x: event.x + snapOrigin.x,\n      y: event.y + snapOrigin.y\n    };\n\n    // snap both axis if not snapped already\n    forEach([ 'x', 'y' ], function(axis) {\n      var locationSnapping;\n\n      if (!snapping[axis]) {\n        locationSnapping = snapPoints.snap(snapCurrent, location, axis, SNAP_TOLERANCE);\n\n        if (locationSnapping !== undefined) {\n          snapping[axis] = {\n            value: locationSnapping,\n            originValue: locationSnapping - snapOrigin[axis]\n          };\n        }\n      }\n    });\n\n    // no need to continue snapping\n    if (snapping.x && snapping.y) {\n      return false;\n    }\n  });\n\n  // show snap lines\n  this.showSnapLine('vertical', snapping.x && snapping.x.value);\n  this.showSnapLine('horizontal', snapping.y && snapping.y.value);\n\n  // snap event\n  forEach([ 'x', 'y' ], function(axis) {\n    var axisSnapping = snapping[axis];\n\n    if (isObject(axisSnapping)) {\n      setSnapped(event, axis, axisSnapping.originValue);\n    }\n  });\n};\n\nSnapping.prototype._createLine = function(orientation) {\n  var root = this._canvas.getLayer('snap');\n\n  var line = svgCreate('path');\n\n  svgAttr(line, { d: 'M0,0 L0,0' });\n\n  svgClasses(line).add('djs-snap-line');\n\n  svgAppend(root, line);\n\n  return {\n    update: function(position) {\n\n      if (!isNumber(position)) {\n        svgAttr(line, { display: 'none' });\n      } else {\n        if (orientation === 'horizontal') {\n          svgAttr(line, {\n            d: 'M-100000,' + position + ' L+100000,' + position,\n            display: ''\n          });\n        } else {\n          svgAttr(line, {\n            d: 'M ' + position + ',-100000 L ' + position + ', +100000',\n            display: ''\n          });\n        }\n      }\n    }\n  };\n};\n\nSnapping.prototype._createSnapLines = function() {\n  this._snapLines = {\n    horizontal: this._createLine('horizontal'),\n    vertical: this._createLine('vertical')\n  };\n};\n\nSnapping.prototype.showSnapLine = function(orientation, position) {\n\n  var line = this.getSnapLine(orientation);\n\n  if (line) {\n    line.update(position);\n  }\n\n  this._asyncHide();\n};\n\nSnapping.prototype.getSnapLine = function(orientation) {\n  if (!this._snapLines) {\n    this._createSnapLines();\n  }\n\n  return this._snapLines[orientation];\n};\n\nSnapping.prototype.hide = function() {\n  forEach(this._snapLines, function(snapLine) {\n    snapLine.update();\n  });\n};\n","import CreateMoveSnapping from './CreateMoveSnapping';\nimport ResizeSnapping from './ResizeSnapping';\nimport Snapping from './Snapping';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [\n    'createMoveSnapping',\n    'resizeSnapping',\n    'snapping'\n  ],\n  createMoveSnapping: [ 'type', CreateMoveSnapping ],\n  resizeSnapping: [ 'type', ResizeSnapping ],\n  snapping: [ 'type', Snapping ]\n};","import BpmnConnectSnapping from './BpmnConnectSnapping';\nimport BpmnCreateMoveSnapping from './BpmnCreateMoveSnapping';\nimport SnappingModule from 'diagram-js/lib/features/snapping';\n\nexport default {\n  __depends__: [ SnappingModule ],\n  __init__: [\n    'connectSnapping',\n    'createMoveSnapping'\n  ],\n  connectSnapping: [ 'type', BpmnConnectSnapping ],\n  createMoveSnapping: [ 'type', BpmnCreateMoveSnapping ]\n};","import {\n  clear as domClear,\n  delegate as domDelegate,\n  query as domQuery,\n  classes as domClasses,\n  attr as domAttr,\n  domify as domify\n} from 'min-dom';\n\nimport {\n  escapeHTML\n} from '../../util/EscapeUtil';\n\nimport { isKey } from '../keyboard/KeyboardUtil';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../../i18n/translate/translate.js').default} Translate\n *\n * @typedef {import('../../util/Types').Dimensions} Dimensions\n *\n * @typedef {import('./SearchPadProvider').default} SearchPadProvider\n * @typedef {import('./SearchPadProvider').SearchResult} SearchResult\n * @typedef {import('./SearchPadProvider').Token} Token\n */\n\nvar SCROLL_TO_ELEMENT_PADDING = 300;\n\n/**\n * Provides searching infrastructure.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Selection} selection\n * @param {Translate} translate\n */\nexport default function SearchPad(canvas, eventBus, selection, translate) {\n  this._open = false;\n  this._results = {};\n  this._eventMaps = [];\n\n  this._cachedRootElement = null;\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._selection = selection;\n  this._translate = translate;\n\n  // setup elements\n  this._container = this._getBoxHtml();\n  this._searchInput = domQuery(SearchPad.INPUT_SELECTOR, this._container);\n  this._resultsContainer = domQuery(SearchPad.RESULTS_CONTAINER_SELECTOR, this._container);\n\n  // attach search pad\n  this._canvas.getContainer().appendChild(this._container);\n\n  // cleanup whenever appropriate\n  eventBus.on([\n    'canvas.destroy',\n    'diagram.destroy',\n    'drag.init',\n    'elements.changed'\n  ], this.close, this);\n}\n\n\nSearchPad.$inject = [\n  'canvas',\n  'eventBus',\n  'selection',\n  'translate'\n];\n\n\n/**\n * Binds and keeps track of all event listereners\n */\nSearchPad.prototype._bindEvents = function() {\n  var self = this;\n\n  function listen(el, selector, type, fn) {\n    self._eventMaps.push({\n      el: el,\n      type: type,\n      listener: domDelegate.bind(el, selector, type, fn)\n    });\n  }\n\n  // close search on clicking anywhere outside\n  listen(document, 'html', 'click', function(e) {\n    self.close(false);\n  });\n\n  // stop event from propagating and closing search\n  // focus on input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    e.delegateTarget.focus();\n  });\n\n  // preselect result on hover\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'mouseover', function(e) {\n    e.stopPropagation();\n    self._scrollToNode(e.delegateTarget);\n    self._preselect(e.delegateTarget);\n  });\n\n  // selects desired result on mouse click\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    self._select(e.delegateTarget);\n  });\n\n  // prevent cursor in input from going left and right when using up/down to\n  // navigate results\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keydown', function(e) {\n\n    if (isKey('ArrowUp', e)) {\n      e.preventDefault();\n    }\n\n    if (isKey('ArrowDown', e)) {\n      e.preventDefault();\n    }\n  });\n\n  // handle keyboard input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keyup', function(e) {\n\n    if (isKey('Escape', e)) {\n      return self.close();\n    }\n\n    if (isKey('Enter', e)) {\n      var selected = self._getCurrentResult();\n\n      return selected ? self._select(selected) : self.close(false);\n    }\n\n    if (isKey('ArrowUp', e)) {\n      return self._scrollToDirection(true);\n    }\n\n    if (isKey('ArrowDown', e)) {\n      return self._scrollToDirection();\n    }\n\n    // do not search while navigating text input\n    if (isKey([ 'ArrowLeft', 'ArrowRight' ], e)) {\n      return;\n    }\n\n    // anything else\n    self._search(e.delegateTarget.value);\n  });\n};\n\n\n/**\n * Unbinds all previously established listeners\n */\nSearchPad.prototype._unbindEvents = function() {\n  this._eventMaps.forEach(function(m) {\n    domDelegate.unbind(m.el, m.type, m.listener);\n  });\n};\n\n\n/**\n * Performs a search for the given pattern.\n *\n * @param {string} pattern\n */\nSearchPad.prototype._search = function(pattern) {\n  var self = this;\n\n  this._clearResults();\n\n  // do not search on empty query\n  if (!pattern || pattern === '') {\n    return;\n  }\n\n  var searchResults = this._searchProvider.find(pattern);\n\n  searchResults = searchResults.filter(function(searchResult) {\n    return !self._canvas.getRootElements().includes(searchResult.element);\n  });\n\n  if (!searchResults.length) {\n    this._clearMarkers();\n    this._selection.select(null);\n\n    return;\n  }\n\n  // append new results\n  searchResults.forEach(function(result) {\n    var id = result.element.id;\n    var node = self._createResultNode(result, id);\n    self._results[id] = {\n      element: result.element,\n      node: node\n    };\n  });\n\n  // preselect first result\n  var node = domQuery(SearchPad.RESULT_SELECTOR, this._resultsContainer);\n  this._scrollToNode(node);\n  this._preselect(node);\n};\n\n\n/**\n * Navigate to the previous/next result. Defaults to next result.\n *\n * @param {boolean} previous\n */\nSearchPad.prototype._scrollToDirection = function(previous) {\n  var selected = this._getCurrentResult();\n  if (!selected) {\n    return;\n  }\n\n  var node = previous ? selected.previousElementSibling : selected.nextElementSibling;\n  if (node) {\n    this._scrollToNode(node);\n    this._preselect(node);\n  }\n};\n\n\n/**\n * Scroll to the node if it is not visible.\n *\n * @param {HTMLElement} node\n */\nSearchPad.prototype._scrollToNode = function(node) {\n  if (!node || node === this._getCurrentResult()) {\n    return;\n  }\n\n  var nodeOffset = node.offsetTop;\n  var containerScroll = this._resultsContainer.scrollTop;\n\n  var bottomScroll = nodeOffset - this._resultsContainer.clientHeight + node.clientHeight;\n\n  if (nodeOffset < containerScroll) {\n    this._resultsContainer.scrollTop = nodeOffset;\n  } else if (containerScroll < bottomScroll) {\n    this._resultsContainer.scrollTop = bottomScroll;\n  }\n};\n\n\n/**\n * Clears all results data.\n */\nSearchPad.prototype._clearResults = function() {\n  domClear(this._resultsContainer);\n\n  this._results = {};\n\n  this._eventBus.fire('searchPad.cleared');\n};\n\n\n/**\n * Clears all markers.\n */\nSearchPad.prototype._clearMarkers = function() {\n  for (var id in this._results) {\n    this._canvas.removeMarker(this._results[id].element, 'djs-search-preselected');\n  }\n};\n\n\n/**\n * Get currently selected result.\n *\n * @return {HTMLElement}\n */\nSearchPad.prototype._getCurrentResult = function() {\n  return domQuery(SearchPad.RESULT_SELECTED_SELECTOR, this._resultsContainer);\n};\n\n\n/**\n * Create result DOM element within results container\n * that corresponds to a search result.\n *\n * 'result' : one of the elements returned by Pad\n * 'id' : id attribute value to assign to the new DOM node\n * return : created DOM element\n *\n * @param {SearchResult} result\n * @param {string} id\n *\n * @return {HTMLElement}\n */\nSearchPad.prototype._createResultNode = function(result, id) {\n  var node = domify(SearchPad.RESULT_HTML);\n\n  // create only if available\n  if (result.primaryTokens.length > 0) {\n    createInnerTextNode(node, result.primaryTokens, SearchPad.RESULT_PRIMARY_HTML);\n  }\n\n  // secondary tokens (represent element ID) are allways available\n  createInnerTextNode(node, result.secondaryTokens, SearchPad.RESULT_SECONDARY_HTML);\n\n  domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE, id);\n\n  this._resultsContainer.appendChild(node);\n\n  return node;\n};\n\n\n/**\n * Register search element provider.\n *\n * @param {SearchPadProvider} provider\n */\nSearchPad.prototype.registerProvider = function(provider) {\n  this._searchProvider = provider;\n};\n\n\n/**\n * Open search pad.\n */\nSearchPad.prototype.open = function() {\n  if (!this._searchProvider) {\n    throw new Error('no search provider registered');\n  }\n\n  if (this.isOpen()) {\n    return;\n  }\n\n  this._cachedRootElement = this._canvas.getRootElement();\n  this._cachedSelection = this._selection.get();\n  this._cachedViewbox = this._canvas.viewbox();\n\n  this._bindEvents();\n\n  this._open = true;\n\n  domClasses(this._canvas.getContainer()).add('djs-search-open');\n  domClasses(this._container).add('open');\n\n  this._searchInput.focus();\n\n  this._eventBus.fire('searchPad.opened');\n};\n\n\n/**\n * Close search pad.\n */\nSearchPad.prototype.close = function(restoreCached = true) {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  if (restoreCached) {\n    if (this._cachedRootElement) {\n      this._canvas.setRootElement(this._cachedRootElement);\n    }\n\n    if (this._cachedSelection) {\n      this._selection.select(this._cachedSelection);\n    }\n\n    if (this._cachedViewbox) {\n      this._canvas.viewbox(this._cachedViewbox);\n    }\n\n    this._eventBus.fire('searchPad.restored');\n  }\n\n  this._cachedRootElement = null;\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n\n  this._unbindEvents();\n\n  this._open = false;\n\n  domClasses(this._canvas.getContainer()).remove('djs-search-open');\n  domClasses(this._container).remove('open');\n\n  this._clearMarkers();\n\n  this._clearResults();\n\n  this._searchInput.value = '';\n  this._searchInput.blur();\n\n  this._eventBus.fire('searchPad.closed');\n};\n\n\n/**\n * Toggles search pad on/off.\n */\nSearchPad.prototype.toggle = function() {\n  this.isOpen() ? this.close() : this.open();\n};\n\n\n/**\n * Report state of search pad.\n */\nSearchPad.prototype.isOpen = function() {\n  return this._open;\n};\n\n\n/**\n * Preselect result entry.\n *\n * @param {HTMLElement} element\n */\nSearchPad.prototype._preselect = function(node) {\n  var selectedNode = this._getCurrentResult();\n\n  // already selected\n  if (node === selectedNode) {\n    return;\n  }\n\n  this._clearMarkers();\n\n  // removing preselection from current node\n  if (selectedNode) {\n    domClasses(selectedNode).remove(SearchPad.RESULT_SELECTED_CLASS);\n  }\n\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  domClasses(node).add(SearchPad.RESULT_SELECTED_CLASS);\n\n  this._canvas.scrollToElement(element, {\n    top: SCROLL_TO_ELEMENT_PADDING\n  });\n\n  this._selection.select(element);\n\n  this._canvas.addMarker(element, 'djs-search-preselected');\n\n  this._eventBus.fire('searchPad.preselected', element);\n};\n\n\n/**\n * Select result node.\n *\n * @param {HTMLElement} element\n */\nSearchPad.prototype._select = function(node) {\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n\n  this.close(false);\n\n  this._canvas.scrollToElement(element, {\n    top: SCROLL_TO_ELEMENT_PADDING\n  });\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.selected', element);\n};\n\n\nSearchPad.prototype._getBoxHtml = function() {\n  const box = domify(SearchPad.BOX_HTML);\n  const input = domQuery(SearchPad.INPUT_SELECTOR, box);\n\n  if (input) {\n    input.setAttribute('aria-label', this._translate('Search in diagram'));\n  }\n\n  return box;\n};\n\n\n/**\n * Creates and appends child node from result tokens and HTML template.\n *\n * @param {HTMLElement} node\n * @param {Token[]} tokens\n * @param {string} template\n */\nfunction createInnerTextNode(parentNode, tokens, template) {\n  var text = createHtmlText(tokens);\n  var childNode = domify(template);\n  childNode.innerHTML = text;\n  parentNode.appendChild(childNode);\n}\n\n/**\n * Create internal HTML markup from result tokens.\n * Caters for highlighting pattern matched tokens.\n *\n * @param {Token[]} tokens\n *\n * @return {string|null}\n */\nfunction createHtmlText(tokens) {\n  var htmlText = '';\n\n  tokens.forEach(function(t) {\n    if (t.matched) {\n      htmlText += '<b class=\"' + SearchPad.RESULT_HIGHLIGHT_CLASS + '\">' + escapeHTML(t.matched) + '</b>';\n    } else {\n      htmlText += escapeHTML(t.normal);\n    }\n  });\n\n  return htmlText !== '' ? htmlText : null;\n}\n\n\n/**\n * CONSTANTS\n */\nSearchPad.CONTAINER_SELECTOR = '.djs-search-container';\nSearchPad.INPUT_SELECTOR = '.djs-search-input input';\nSearchPad.RESULTS_CONTAINER_SELECTOR = '.djs-search-results';\nSearchPad.RESULT_SELECTOR = '.djs-search-result';\nSearchPad.RESULT_SELECTED_CLASS = 'djs-search-result-selected';\nSearchPad.RESULT_SELECTED_SELECTOR = '.' + SearchPad.RESULT_SELECTED_CLASS;\nSearchPad.RESULT_ID_ATTRIBUTE = 'data-result-id';\nSearchPad.RESULT_HIGHLIGHT_CLASS = 'djs-search-highlight';\n\nSearchPad.BOX_HTML =\n`<div class=\"djs-search-container djs-scrollable\">\n  <div class=\"djs-search-input\">\n    <svg class=\"djs-search-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z\" fill=\"#22242A\"/>\n    </svg>\n    <input type=\"text\" spellcheck=\"false\" />\n  </div>\n  <div class=\"djs-search-results\" />\n</div>`;\n\nSearchPad.RESULT_HTML =\n  '<div class=\"djs-search-result\"></div>';\n\nSearchPad.RESULT_PRIMARY_HTML =\n  '<div class=\"djs-search-result-primary\"></div>';\n\nSearchPad.RESULT_SECONDARY_HTML =\n  '<p class=\"djs-search-result-secondary\"></p>';\n","import OverlaysModule from '../overlays';\nimport SelectionModule from '../selection';\nimport TranslateModule from '../../i18n/translate/index.js';\n\nimport SearchPad from './SearchPad';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __depends__: [\n    TranslateModule,\n    OverlaysModule,\n    SelectionModule\n  ],\n  searchPad: [ 'type', SearchPad ]\n};\n","import { omit } from 'min-dash';\n\nimport {\n  getLabel,\n  isLabel\n} from '../../util/LabelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPad').default} SearchPad\n *\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').default} SearchPadProvider\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').SearchResult} SearchResult\n */\n\n/**\n * Provides ability to search for BPMN elements.\n *\n * @implements {SearchPadProvider}\n *\n * @param {ElementRegistry} elementRegistry\n * @param {SearchPad} searchPad\n * @param {Canvas} canvas\n */\nexport default function BpmnSearchProvider(elementRegistry, searchPad, canvas) {\n  this._elementRegistry = elementRegistry;\n  this._canvas = canvas;\n\n  searchPad.registerProvider(this);\n}\n\nBpmnSearchProvider.$inject = [\n  'elementRegistry',\n  'searchPad',\n  'canvas'\n];\n\n/**\n * @param {string} pattern\n *\n * @return {SearchResult[]}\n */\nBpmnSearchProvider.prototype.find = function(pattern) {\n  var rootElements = this._canvas.getRootElements();\n\n  var elements = this._elementRegistry.filter(function(element) {\n    return !isLabel(element) && !rootElements.includes(element);\n  });\n\n  return elements\n    .reduce(function(results, element) {\n      var label = getLabel(element);\n\n      var primaryTokens = findMatches(label, pattern),\n          secondaryTokens = findMatches(element.id, pattern);\n\n      if (hasMatch(primaryTokens) || hasMatch(secondaryTokens)) {\n        return [\n          ...results,\n          {\n            primaryTokens,\n            secondaryTokens,\n            element\n          }\n        ];\n      }\n\n      return results;\n    }, [])\n    .sort(function(a, b) {\n      return compareTokens(a.primaryTokens, b.primaryTokens)\n        || compareTokens(a.secondaryTokens, b.secondaryTokens)\n        || compareStrings(getLabel(a.element), getLabel(b.element))\n        || compareStrings(a.element.id, b.element.id);\n    })\n    .map(function(result) {\n      return {\n        element: result.element,\n        primaryTokens: result.primaryTokens.map(function(token) {\n          return omit(token, [ 'index' ]);\n        }),\n        secondaryTokens: result.secondaryTokens.map(function(token) {\n          return omit(token, [ 'index' ]);\n        })\n      };\n    });\n};\n\n/**\n * @param {Token} token\n *\n * @return {boolean}\n */\nfunction isMatch(token) {\n  return 'matched' in token;\n}\n\n/**\n * @param {Token[]} tokens\n *\n * @return {boolean}\n */\nfunction hasMatch(tokens) {\n  return tokens.find(isMatch);\n}\n\n/**\n * Compares two token arrays.\n *\n * @param {Token[]} tokensA\n * @param {Token[]} tokensB\n *\n * @returns {number}\n */\nfunction compareTokens(tokensA, tokensB) {\n  const tokensAHasMatch = hasMatch(tokensA),\n        tokensBHasMatch = hasMatch(tokensB);\n\n  if (tokensAHasMatch && !tokensBHasMatch) {\n    return -1;\n  }\n\n  if (!tokensAHasMatch && tokensBHasMatch) {\n    return 1;\n  }\n\n  if (!tokensAHasMatch && !tokensBHasMatch) {\n    return 0;\n  }\n\n  const tokensAFirstMatch = tokensA.find(isMatch),\n        tokensBFirstMatch = tokensB.find(isMatch);\n\n  if (tokensAFirstMatch.index < tokensBFirstMatch.index) {\n    return -1;\n  }\n\n  if (tokensAFirstMatch.index > tokensBFirstMatch.index) {\n    return 1;\n  }\n\n  return 0;\n}\n\n/**\n * Compares two strings.\n *\n * @param {string} [a]\n * @param {string} [b]\n *\n * @returns {number}\n */\nfunction compareStrings(a = '', b = '') {\n  return a.localeCompare(b);\n}\n\n/**\n * @param {string} text\n * @param {string} pattern\n *\n * @return {Token[]}\n */\nfunction findMatches(text, pattern) {\n  var tokens = [],\n      originalText = text;\n\n  if (!text) {\n    return tokens;\n  }\n\n  text = text.toLowerCase();\n  pattern = pattern.toLowerCase();\n\n  var index = text.indexOf(pattern);\n\n  if (index > -1) {\n    if (index !== 0) {\n      tokens.push({\n        normal: originalText.slice(0, index),\n        index: 0\n      });\n    }\n\n    tokens.push({\n      matched: originalText.slice(index, index + pattern.length),\n      index: index\n    });\n\n    if (pattern.length + index < text.length) {\n      tokens.push({\n        normal: originalText.slice(index + pattern.length),\n        index: index + pattern.length\n      });\n    }\n  } else {\n    tokens.push({\n      normal: originalText,\n      index: 0\n    });\n  }\n\n  return tokens;\n}","import SearchPadModule from 'diagram-js/lib/features/search-pad';\n\nimport BpmnSearchProvider from './BpmnSearchProvider';\n\n\nexport default {\n  __depends__: [\n    SearchPadModule\n  ],\n  __init__: [ 'bpmnSearch' ],\n  bpmnSearch: [ 'type', BpmnSearchProvider ]\n};\n","import inherits from 'inherits-browser';\n\nimport BaseModeler from './BaseModeler';\n\nimport Viewer from './Viewer';\nimport NavigatedViewer from './NavigatedViewer';\n\nimport KeyboardMoveModule from 'diagram-js/lib/navigation/keyboard-move';\nimport MoveCanvasModule from 'diagram-js/lib/navigation/movecanvas';\nimport ZoomScrollModule from 'diagram-js/lib/navigation/zoomscroll';\n\nimport AlignElementsModule from './features/align-elements';\nimport AutoPlaceModule from './features/auto-place';\nimport AutoResizeModule from './features/auto-resize';\nimport AutoScrollModule from 'diagram-js/lib/features/auto-scroll';\nimport BendpointsModule from 'diagram-js/lib/features/bendpoints';\nimport ConnectModule from 'diagram-js/lib/features/connect';\nimport ConnectionPreviewModule from 'diagram-js/lib/features/connection-preview';\nimport ContextPadModule from './features/context-pad';\nimport CopyPasteModule from './features/copy-paste';\nimport CreateModule from 'diagram-js/lib/features/create';\nimport DistributeElementsModule from './features/distribute-elements';\nimport EditorActionsModule from './features/editor-actions';\nimport GridSnappingModule from './features/grid-snapping';\nimport InteractionEventsModule from './features/interaction-events';\nimport KeyboardModule from './features/keyboard';\nimport KeyboardMoveSelectionModule from 'diagram-js/lib/features/keyboard-move-selection';\nimport LabelEditingModule from './features/label-editing';\nimport ModelingModule from './features/modeling';\nimport ModelingFeedbackModule from './features/modeling-feedback';\nimport MoveModule from 'diagram-js/lib/features/move';\nimport PaletteModule from './features/palette';\nimport ReplacePreviewModule from './features/replace-preview';\nimport ResizeModule from 'diagram-js/lib/features/resize';\nimport SnappingModule from './features/snapping';\nimport SearchModule from './features/search';\n\nvar initialDiagram =\n  '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' +\n  '<bpmn:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\n                    'xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" ' +\n                    'xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" ' +\n                    'xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" ' +\n                    'targetNamespace=\"http://bpmn.io/schema/bpmn\" ' +\n                    'id=\"Definitions_1\">' +\n    '<bpmn:process id=\"Process_1\" isExecutable=\"false\">' +\n      '<bpmn:startEvent id=\"StartEvent_1\"/>' +\n    '</bpmn:process>' +\n    '<bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">' +\n      '<bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_1\">' +\n        '<bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\">' +\n          '<dc:Bounds height=\"36.0\" width=\"36.0\" x=\"173.0\" y=\"102.0\"/>' +\n        '</bpmndi:BPMNShape>' +\n      '</bpmndi:BPMNPlane>' +\n    '</bpmndi:BPMNDiagram>' +\n  '</bpmn:definitions>';\n\n\n/**\n * @typedef {import('./BaseViewer').BaseViewerOptions} BaseViewerOptions\n * @typedef {import('./BaseViewer').ImportXMLResult} ImportXMLResult\n */\n\n/**\n * A modeler for BPMN 2.0 diagrams.\n *\n * ## Extending the Modeler\n *\n * In order to extend the viewer pass extension modules to bootstrap via the\n * `additionalModules` option. An extension module is an object that exposes\n * named services.\n *\n * The following example depicts the integration of a simple\n * logging component that integrates with interaction events:\n *\n *\n * ```javascript\n *\n * // logging component\n * function InteractionLogger(eventBus) {\n *   eventBus.on('element.hover', function(event) {\n *     console.log()\n *   })\n * }\n *\n * InteractionLogger.$inject = [ 'eventBus' ]; // minification save\n *\n * // extension module\n * var extensionModule = {\n *   __init__: [ 'interactionLogger' ],\n *   interactionLogger: [ 'type', InteractionLogger ]\n * };\n *\n * // extend the viewer\n * var bpmnModeler = new Modeler({ additionalModules: [ extensionModule ] });\n * bpmnModeler.importXML(...);\n * ```\n *\n *\n * ## Customizing / Replacing Components\n *\n * You can replace individual diagram components by redefining them in override modules.\n * This works for all components, including those defined in the core.\n *\n * Pass in override modules via the `options.additionalModules` flag like this:\n *\n * ```javascript\n * function CustomContextPadProvider(contextPad) {\n *\n *   contextPad.registerProvider(this);\n *\n *   this.getContextPadEntries = function(element) {\n *     // no entries, effectively disable the context pad\n *     return {};\n *   };\n * }\n *\n * CustomContextPadProvider.$inject = [ 'contextPad' ];\n *\n * var overrideModule = {\n *   contextPadProvider: [ 'type', CustomContextPadProvider ]\n * };\n *\n * var bpmnModeler = new Modeler({ additionalModules: [ overrideModule ]});\n * ```\n *\n * @template [ServiceMap=null]\n *\n * @extends BaseModeler<ServiceMap>\n *\n * @param {BaseViewerOptions} [options] The options to configure the modeler.\n */\nexport default function Modeler(options) {\n  BaseModeler.call(this, options);\n}\n\ninherits(Modeler, BaseModeler);\n\n\nModeler.Viewer = Viewer;\nModeler.NavigatedViewer = NavigatedViewer;\n\n/**\n * Create a new diagram to start modeling.\n *\n * @throws {ImportXMLError} An error thrown during the import of the XML.\n *\n * @return {Promise<ImportXMLResult>} A promise resolving with warnings that were produced during the import.\n */\nModeler.prototype.createDiagram = function createDiagram() {\n  return this.importXML(initialDiagram);\n};\n\n\nModeler.prototype._interactionModules = [\n\n  // non-modeling components\n  KeyboardMoveModule,\n  MoveCanvasModule,\n  ZoomScrollModule\n];\n\nModeler.prototype._modelingModules = [\n\n  // modeling components\n  AlignElementsModule,\n  AutoPlaceModule,\n  AutoScrollModule,\n  AutoResizeModule,\n  BendpointsModule,\n  ConnectModule,\n  ConnectionPreviewModule,\n  ContextPadModule,\n  CopyPasteModule,\n  CreateModule,\n  DistributeElementsModule,\n  EditorActionsModule,\n  GridSnappingModule,\n  InteractionEventsModule,\n  KeyboardModule,\n  KeyboardMoveSelectionModule,\n  LabelEditingModule,\n  ModelingModule,\n  ModelingFeedbackModule,\n  MoveModule,\n  PaletteModule,\n  ReplacePreviewModule,\n  ResizeModule,\n  SnappingModule,\n  SearchModule\n];\n\n\n// modules the modeler is composed of\n//\n// - viewer modules\n// - interaction modules\n// - modeling modules\n\nModeler.prototype._modules = [].concat(\n  Viewer.prototype._modules,\n  Modeler.prototype._interactionModules,\n  Modeler.prototype._modelingModules\n);\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport BpmnModeler from 'bpmn-js/lib/Modeler';\r\nimport 'bpmn-js/dist/assets/diagram-js.css';\r\nimport 'bpmn-js/dist/assets/bpmn-font/css/bpmn.css';\r\nimport { API_BASE, makePaletteDraggable, getLightHex } from '../utilities';\r\n\r\nconst Editor = ({ processId, onNavigate }) => {\r\n    const containerRef = useRef(null);\r\n    const modelerRef = useRef(null);\r\n    const [name, setName] = useState('New Process');\r\n    const [selectedElement, setSelectedElement] = useState(null);\r\n    const [piTag, setPiTag] = useState('');\r\n    const [piUnit, setPiUnit] = useState('');\r\n    const [piPrecision, setPiPrecision] = useState(2);\r\n    const [targetUrl, setTargetUrl] = useState('');\r\n    const [elementName, setElementName] = useState('');\r\n    const [alwaysOn, setAlwaysOn] = useState(false);\r\n\r\n    // Text Annotation Styles\r\n    const [textFontSize, setTextFontSize] = useState(12);\r\n    const [textBold, setTextBold] = useState(false);\r\n    const [textColor, setTextColor] = useState('#000000');\r\n    const [textBgColor, setTextBgColor] = useState('transparent');\r\n    const [nameFontSize, setNameFontSize] = useState(12); // New State for Name Font Size\r\n\r\n    // Sticky Note State\r\n    const [noteColor, setNoteColor] = useState('#fff2cc'); // Default Post-it Yellow\r\n    const [borderColor, setBorderColor] = useState('#d6b656');\r\n    const [noteOpacity, setNoteOpacity] = useState(1);\r\n    const [htmlContent, setHtmlContent] = useState(''); // Store HTML content for sticky notes\r\n\r\n    const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n    const [isFinalEnd, setIsFinalEnd] = useState(false);\r\n    const [isPanelOpen, setIsPanelOpen] = useState(true); // 1. Collapsible Panel State\r\n    const isComposing = useRef(false); // Track IME composition state\r\n\r\n    // Resize State\r\n    const [elementWidth, setElementWidth] = useState('');\r\n    const [elementHeight, setElementHeight] = useState('');\r\n\r\n    const GOOGLE_COLORS = [\r\n        '#EA4335', '#E91E63', '#9C27B0', '#673AB7', '#3F51B5', '#4285F4', '#03A9F4',\r\n        '#00BCD4', '#009688', '#34A853', '#8BC34A', '#CDDC39', '#FBBC05', '#FF9800'\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const modeler = new BpmnModeler({\r\n            container: containerRef.current,\r\n            keyboard: { bindTo: document }\r\n        });\r\n        modelerRef.current = modeler;\r\n        makePaletteDraggable(containerRef.current);\r\n\r\n        // Force Enable Resizing via Runtime Interception\r\n        try {\r\n            const eventBus = modeler.get('eventBus');\r\n            console.log(\"EventBus retrieved, registering resize interceptor...\");\r\n\r\n            // Priority 9999 to override everything\r\n            eventBus.on('rule.call', 9999, function (e) {\r\n                if (e.rule === 'elements.resize' || e.rule === 'shape.resize') {\r\n                    // console.log(\"Resize rule intercepted for:\", e.context); // Uncomment for verbose debug\r\n                    return true; // Force allow\r\n                }\r\n            });\r\n            console.log(\"Resize interceptor registered.\");\r\n        } catch (e) {\r\n            console.error(\"Failed to register resize interceptor:\", e);\r\n        }\r\n\r\n        const loadDiagram = async () => {\r\n            let xml = '';\r\n            if (processId) {\r\n                const res = await fetch(`${API_BASE}/processes/${processId}`);\r\n                const data = await res.json();\r\n                setName(data.name);\r\n                xml = data.xml_content;\r\n            } else {\r\n                xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?><bpmn:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" id=\"Definitions_1\" targetNamespace=\"http://bpmn.io/schema/bpmn\"><bpmn:process id=\"Process_1\" isExecutable=\"false\"><bpmn:startEvent id=\"StartEvent_1\"/></bpmn:process><bpmndi:BPMNDiagram id=\"BPMNDiagram_1\"><bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_1\"><bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\"><dc:Bounds x=\"173\" y=\"102\" width=\"36\" height=\"36\"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>`;\r\n            }\r\n            try {\r\n                await modeler.importXML(xml);\r\n                modeler.get('canvas').zoom('fit-viewport');\r\n                setHasUnsavedChanges(false); // Reset after load\r\n\r\n                // Inject Custom Tools into Palette\r\n                setTimeout(() => {\r\n                    if (!containerRef.current) return;\r\n                    const palette = containerRef.current.querySelector('.djs-palette-entries');\r\n                    if (palette && !palette.querySelector('.custom-sticky-tool')) {\r\n                        const group = document.createElement('div');\r\n                        group.className = 'group custom-sticky-tool';\r\n\r\n                        const entry = document.createElement('div');\r\n                        entry.className = 'entry';\r\n                        entry.innerHTML = '<div style=\"font-family: serif; font-weight: bold; font-size: 18px;\">T</div>';\r\n                        entry.title = '';\r\n                        entry.style.cursor = 'pointer';\r\n                        entry.draggable = true;\r\n\r\n                        const createNote = (e) => {\r\n                            const elementFactory = modeler.get('elementFactory');\r\n                            const create = modeler.get('create');\r\n                            const bpmnFactory = modeler.get('bpmnFactory');\r\n\r\n                            const shape = elementFactory.createShape({ type: 'bpmn:Group' });\r\n                            const newDoc = bpmnFactory.create('bpmn:Documentation', {\r\n                                text: JSON.stringify({\r\n                                    noteColor: '#fff2cc', borderColor: '#d6b656', text: 'New Note', htmlContent: 'New Note'\r\n                                })\r\n                            });\r\n                            shape.businessObject.documentation = [newDoc];\r\n                            shape.width = 200; shape.height = 200;\r\n                            create.start(e, shape);\r\n                        };\r\n\r\n                        entry.addEventListener('click', createNote);\r\n                        entry.addEventListener('dragstart', createNote);\r\n\r\n                        group.appendChild(entry);\r\n                        palette.appendChild(group);\r\n                    }\r\n                }, 500);\r\n\r\n            } catch (err) { console.error(err); }\r\n        };\r\n        loadDiagram();\r\n\r\n        modeler.on('selection.changed', (e) => {\r\n            const selection = e.newSelection;\r\n            if (selection.length === 1) {\r\n                setIsPanelOpen(true); // Auto-open panel\r\n                const element = selection[0];\r\n                setSelectedElement(element);\r\n                setElementWidth(element.width);\r\n                setElementHeight(element.height);\r\n                setElementName(element.businessObject.name || '');\r\n                const docs = element.businessObject.documentation;\r\n                if (docs && docs.length > 0 && docs[0].text) {\r\n                    try {\r\n                        const data = JSON.parse(docs[0].text);\r\n                        setPiTag(data.piTag || '');\r\n                        setPiUnit(data.piUnit || '');\r\n                        setPiPrecision(data.piPrecision !== undefined ? data.piPrecision : 2);\r\n                        setTargetUrl(data.targetUrl || '');\r\n                        setIsFinalEnd(data.isFinalEnd || false);\r\n                        setAlwaysOn(data.alwaysOn || false);\r\n\r\n                        // Load Text Styles\r\n                        setTextFontSize(data.textFontSize || 12);\r\n                        setTextBold(data.textBold || false);\r\n                        setTextColor(data.textColor || '#000000');\r\n                        setTextBgColor(data.textBgColor || 'transparent');\r\n                        setNameFontSize(data.nameFontSize || 12);\r\n\r\n                        // Load Sticky Note Styles\r\n                        setNoteColor(data.noteColor || '#fff2cc');\r\n                        setBorderColor(data.borderColor || '#d6b656');\r\n                        setNoteOpacity(data.noteOpacity !== undefined ? data.noteOpacity : 1);\r\n                        setHtmlContent(data.htmlContent || '');\r\n                    } catch (e) {\r\n                        setPiTag(''); setPiUnit(''); setPiPrecision(2); setTargetUrl(''); setIsFinalEnd(false); setAlwaysOn(false);\r\n                        setTextFontSize(12); setTextBold(false); setTextColor('#000000'); setTextBgColor('transparent');\r\n                        setNameFontSize(12);\r\n                        setNoteColor('#fff2cc'); setBorderColor('#d6b656'); setNoteOpacity(1); setHtmlContent('');\r\n                    }\r\n                } else {\r\n                    setPiTag(''); setPiUnit(''); setPiPrecision(2); setTargetUrl(''); setIsFinalEnd(false); setAlwaysOn(false);\r\n                    setTextFontSize(12); setTextBold(false); setTextColor('#000000'); setTextBgColor('transparent');\r\n                    setNameFontSize(12);\r\n                    setNoteColor('#fff2cc'); setBorderColor('#d6b656'); setNoteOpacity(1); setHtmlContent('');\r\n                }\r\n            } else {\r\n                setIsPanelOpen(false); // Auto-close panel\r\n                setSelectedElement(null); setElementName(''); setPiTag(''); setPiUnit(''); setPiPrecision(2); setTargetUrl(''); setIsFinalEnd(false); setAlwaysOn(false);\r\n                setTextFontSize(12); setTextBold(false); setTextColor('#000000'); setTextBgColor('transparent');\r\n                setNameFontSize(12);\r\n                setNoteColor('#fff2cc'); setBorderColor('#d6b656'); setNoteOpacity(1); setHtmlContent('');\r\n            }\r\n        });\r\n\r\n        modeler.on('element.changed', (e) => {\r\n            if (selectedElement && e.element.id === selectedElement.id) { setElementName(e.element.businessObject.name || ''); }\r\n        });\r\n\r\n        modeler.on('commandStack.changed', () => {\r\n            setHasUnsavedChanges(true);\r\n        });\r\n\r\n        // Disable Double Click for Sticky Notes (bpmn:Group)\r\n        modeler.on('element.dblclick', 10000, (e) => {\r\n            if (e.element.type === 'bpmn:Group') {\r\n                return false; // Prevent default behavior (Label Editing)\r\n            }\r\n        });\r\n\r\n        // Mouse Wheel Zoom\r\n        const handleWheel = (e) => {\r\n            e.preventDefault();\r\n            const canvas = modeler.get('canvas');\r\n            const currentZoom = canvas.zoom();\r\n            const factor = e.deltaY > 0 ? 0.995 : 1.005;\r\n\r\n            // Check if containerRef is still valid\r\n            if (containerRef.current) {\r\n                const rect = containerRef.current.getBoundingClientRect();\r\n                const x = e.clientX - rect.left;\r\n                const y = e.clientY - rect.top;\r\n\r\n                canvas.zoom(currentZoom * factor, { x, y });\r\n            }\r\n        };\r\n\r\n        const container = containerRef.current;\r\n        container.addEventListener('wheel', handleWheel);\r\n\r\n        return () => {\r\n            container.removeEventListener('wheel', handleWheel);\r\n            modeler.destroy();\r\n        };\r\n    }, [processId]);\r\n\r\n    const handleBack = () => {\r\n        if (hasUnsavedChanges) {\r\n            if (confirm('')) {\r\n                onNavigate('dashboard');\r\n            }\r\n        } else {\r\n            onNavigate('dashboard');\r\n        }\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        const { xml } = await modelerRef.current.saveXML({ format: true });\r\n        await fetch(`${API_BASE}/processes`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ id: processId, name, xml_content: xml }) });\r\n        setHasUnsavedChanges(false);\r\n        alert('');\r\n        // Do NOT navigate back\r\n    };\r\n\r\n    const applyResize = () => {\r\n        if (selectedElement && modelerRef.current) {\r\n            const modeling = modelerRef.current.get('modeling');\r\n            modeling.resizeShape(selectedElement, {\r\n                x: selectedElement.x,\r\n                y: selectedElement.y,\r\n                width: Number(elementWidth),\r\n                height: Number(elementHeight)\r\n            });\r\n        }\r\n    };\r\n\r\n    // Helper to update name\r\n    const updateElementName = (newName) => {\r\n        setElementName(newName);\r\n        if (selectedElement && modelerRef.current) {\r\n            const modeling = modelerRef.current.get('modeling');\r\n            modeling.updateLabel(selectedElement, newName);\r\n            // Trigger auto resize logic if needed (simplified)\r\n        }\r\n    };\r\n\r\n    const autoResizeElement = (element, text, fontSize, modeling) => {\r\n        if (!text || !modeling) return;\r\n\r\n        // 1. Measure Text\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.font = `bold ${fontSize}px Arial, sans-serif`;\r\n        const metrics = ctx.measureText(text);\r\n        const textWidth = metrics.width;\r\n\r\n        let newWidth = element.width;\r\n        let newHeight = element.height;\r\n        let shouldResize = false;\r\n\r\n        // 2. Task Resizing (Expand Width)\r\n        if (element.type.includes('Task')) {\r\n            // Add padding\r\n            const requiredWidth = textWidth + 40;\r\n            if (requiredWidth > element.width) {\r\n                newWidth = requiredWidth;\r\n                shouldResize = true;\r\n            }\r\n        }\r\n    };\r\n\r\n    const updateElementProperties = (updates) => {\r\n        const newData = {\r\n            piTag: updates.piTag !== undefined ? updates.piTag : piTag,\r\n            piUnit: updates.piUnit !== undefined ? updates.piUnit : piUnit,\r\n            piPrecision: updates.piPrecision !== undefined ? updates.piPrecision : piPrecision,\r\n            targetUrl: updates.targetUrl !== undefined ? updates.targetUrl : targetUrl,\r\n            isFinalEnd: updates.isFinalEnd !== undefined ? updates.isFinalEnd : isFinalEnd,\r\n            alwaysOn: updates.alwaysOn !== undefined ? updates.alwaysOn : alwaysOn,\r\n            textFontSize: updates.textFontSize !== undefined ? updates.textFontSize : textFontSize,\r\n            textBold: updates.textBold !== undefined ? updates.textBold : textBold,\r\n            textColor: updates.textColor !== undefined ? updates.textColor : textColor,\r\n            textBgColor: updates.textBgColor !== undefined ? updates.textBgColor : textBgColor,\r\n            nameFontSize: updates.nameFontSize !== undefined ? updates.nameFontSize : nameFontSize,\r\n            noteColor: updates.noteColor !== undefined ? updates.noteColor : noteColor,\r\n            borderColor: updates.borderColor !== undefined ? updates.borderColor : borderColor,\r\n            noteOpacity: updates.noteOpacity !== undefined ? updates.noteOpacity : noteOpacity,\r\n            htmlContent: updates.htmlContent !== undefined ? updates.htmlContent : htmlContent,\r\n        };\r\n\r\n        setPiTag(newData.piTag);\r\n        setPiUnit(newData.piUnit);\r\n        setPiPrecision(newData.piPrecision);\r\n        setTargetUrl(newData.targetUrl);\r\n        setIsFinalEnd(newData.isFinalEnd);\r\n        setAlwaysOn(newData.alwaysOn);\r\n        setTextFontSize(newData.textFontSize);\r\n        setTextBold(newData.textBold);\r\n        setTextColor(newData.textColor);\r\n        setTextBgColor(newData.textBgColor);\r\n        setNameFontSize(newData.nameFontSize);\r\n        setNoteColor(newData.noteColor);\r\n        setBorderColor(newData.borderColor);\r\n        setNoteOpacity(newData.noteOpacity);\r\n        setHtmlContent(newData.htmlContent);\r\n\r\n        if (selectedElement && modelerRef.current) {\r\n            const modeling = modelerRef.current.get('modeling');\r\n            const bpmnFactory = modelerRef.current.get('bpmnFactory');\r\n            const elementRegistry = modelerRef.current.get('elementRegistry');\r\n\r\n            // If setting as Final End, uncheck others\r\n            if (newData.isFinalEnd && selectedElement.type === 'bpmn:EndEvent') {\r\n                const endEvents = elementRegistry.filter(e => e.type === 'bpmn:EndEvent' && e.id !== selectedElement.id);\r\n                let modified = false;\r\n                endEvents.forEach(e => {\r\n                    const docs = e.businessObject.documentation;\r\n                    if (docs && docs.length > 0 && docs[0].text) {\r\n                        try {\r\n                            const d = JSON.parse(docs[0].text);\r\n                            if (d.isFinalEnd) {\r\n                                d.isFinalEnd = false;\r\n                                const newDoc = bpmnFactory.create('bpmn:Documentation', { text: JSON.stringify(d) });\r\n                                modeling.updateProperties(e, { documentation: [newDoc] });\r\n                                modified = true;\r\n                            }\r\n\r\n                        } catch (err) { }\r\n                    }\r\n                });\r\n                if (modified) alert(' End Event ');\r\n            }\r\n\r\n            const newDoc = bpmnFactory.create('bpmn:Documentation', {\r\n                text: JSON.stringify(newData)\r\n            });\r\n            modeling.updateProperties(selectedElement, { documentation: [newDoc] });\r\n\r\n            // Trigger Auto Resize\r\n            autoResizeElement(selectedElement, elementName, newData.nameFontSize, modeling);\r\n        }\r\n    };\r\n\r\n    const updateElementColor = (color) => {\r\n        if (selectedElement && modelerRef.current) {\r\n            const modeling = modelerRef.current.get('modeling');\r\n            modeling.setColor(selectedElement, {\r\n                stroke: color,\r\n                fill: getLightHex(color, 0.2) // 20% strength (very light)\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!modelerRef.current) return;\r\n\r\n        const applyStyles = () => {\r\n            const elementRegistry = modelerRef.current.get('elementRegistry');\r\n            const canvas = modelerRef.current.get('canvas');\r\n\r\n            elementRegistry.forEach(element => {\r\n                const docs = element.businessObject.documentation;\r\n                if (docs && docs.length > 0 && docs[0].text) {\r\n                    try {\r\n                        const data = JSON.parse(docs[0].text);\r\n                        const gfx = canvas.getGraphics(element);\r\n\r\n                        // 1. Apply Sticky Note Styles (Now using bpmn:Group)\r\n                        if (element.type === 'bpmn:Group') {\r\n                            const text = gfx.querySelector('text');\r\n                            const path = gfx.querySelector('path');\r\n                            const rect = gfx.querySelector('rect'); // Groups usually have a rect or path\r\n\r\n                            // Reset Visibility First (Default State)\r\n                            if (text) text.style.display = 'block';\r\n                            if (path) path.style.display = 'block';\r\n                            if (rect) rect.style.display = 'block';\r\n\r\n                            // Remove old sticky elements if any\r\n                            const oldBg = gfx.querySelector('.sticky-bg');\r\n                            if (oldBg) oldBg.remove();\r\n                            const oldFo = gfx.querySelector('.sticky-fo');\r\n                            if (oldFo) oldFo.remove();\r\n\r\n                            // Always use Rich Text / Sticky Note Rendering for Groups created as Sticky Notes\r\n                            // Check if it has sticky note data\r\n                            if (data.noteColor || data.htmlContent) {\r\n                                // Hide default elements\r\n                                if (text) text.style.display = 'none';\r\n                                if (path) path.style.display = 'none';\r\n                                if (rect) rect.style.display = 'none';\r\n\r\n                                // 1. Background Rect\r\n                                const width = element.width || 300;\r\n                                const height = element.height || 300;\r\n\r\n                                const bgRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n                                bgRect.classList.add('sticky-bg');\r\n                                bgRect.setAttribute('width', width);\r\n                                bgRect.setAttribute('height', height);\r\n                                bgRect.setAttribute('fill', data.noteColor || 'transparent');\r\n                                bgRect.setAttribute('stroke', data.borderColor || 'transparent');\r\n                                bgRect.setAttribute('fill-opacity', data.noteOpacity !== undefined ? data.noteOpacity : 1);\r\n                                bgRect.setAttribute('stroke-width', '1');\r\n                                gfx.prepend(bgRect);\r\n\r\n                                // 2. ForeignObject for Rich Text\r\n                                const fo = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\r\n                                fo.classList.add('sticky-fo');\r\n                                fo.setAttribute('width', width);\r\n                                fo.setAttribute('height', height);\r\n                                fo.setAttribute('x', 0);\r\n                                fo.setAttribute('y', 0);\r\n\r\n                                // Content Div\r\n                                const div = document.createElement('div');\r\n                                div.style.width = '100%';\r\n                                div.style.height = '100%';\r\n                                div.style.padding = '10px';\r\n                                div.style.boxSizing = 'border-box';\r\n                                div.style.overflow = 'hidden';\r\n                                div.style.fontSize = `${data.textFontSize || 12}px`;\r\n                                div.style.fontWeight = data.textBold ? 'bold' : 'normal';\r\n                                div.style.color = data.textColor || '#000000';\r\n                                div.style.fontFamily = 'Arial, sans-serif';\r\n                                div.style.whiteSpace = 'pre-wrap'; // Preserve whitespace\r\n                                div.style.wordBreak = 'break-word';\r\n\r\n                                // Use stored HTML content or fallback to plain text\r\n                                div.innerHTML = data.htmlContent || (docs[0].text ? JSON.parse(docs[0].text).text : '') || '';\r\n\r\n                                fo.appendChild(div);\r\n                                gfx.appendChild(fo);\r\n                            }\r\n                        }\r\n\r\n                        // 2. Apply Name Font Size (For all elements)\r\n                        if (data.nameFontSize) {\r\n                            const label = gfx.querySelector('.djs-label');\r\n                            if (label) {\r\n                                label.style.fontSize = `${data.nameFontSize}px`;\r\n                            }\r\n                        }\r\n                    } catch (e) { }\r\n                }\r\n            });\r\n        };\r\n\r\n        const eventBus = modelerRef.current.get('eventBus');\r\n        eventBus.on('element.changed', applyStyles);\r\n        eventBus.on('import.done', applyStyles);\r\n\r\n        return () => {\r\n            eventBus.off('element.changed', applyStyles);\r\n            eventBus.off('import.done', applyStyles);\r\n        };\r\n    }, [modelerRef.current]); // Re-bind if modeler changes\r\n\r\n    return (\r\n        <div className=\"flex h-full flex-col bg-[#121212]\">\r\n            <div className=\"bg-[#1e1e1e] px-6 py-3 flex justify-between items-center border-b border-white/5\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button onClick={handleBack} className=\"text-white/60 hover:text-white transition flex items-center gap-1\">\r\n                        <span className=\"text-lg\"></span> \r\n                    </button>\r\n                    <input value={name} onChange={(e) => { setName(e.target.value); setHasUnsavedChanges(true); }} className=\"bg-[#2d2d2d] text-white px-4 py-1.5 rounded-full border-none outline-none focus:ring-2 focus:ring-[#8ab4f8]\" placeholder=\"\" />\r\n                    {hasUnsavedChanges && <span className=\"text-[#f28b82] text-xs font-medium animate-pulse\"> </span>}\r\n                </div>\r\n                <div className=\"flex gap-3 items-center\">\r\n                    <button onClick={() => window.open('AboutBPMN.md', '_blank')} className=\"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full font-bold transition flex items-center justify-center text-sm\" title=\"BPMN \">?</button>\r\n                    <button onClick={handleSave} className=\"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-1 rounded-full font-medium shadow-sm transition text-sm\"></button>\r\n                    <button onClick={() => setIsPanelOpen(!isPanelOpen)} className={`bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full transition flex items-center justify-center ${!isPanelOpen ? 'text-[#8ab4f8]' : ''}`} title={isPanelOpen ? '' : ''}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex-1 flex overflow-hidden relative\">\r\n                <div className=\"flex-1 relative bg-white\" ref={containerRef}></div>\r\n\r\n                <div className={`bg-[#1e1e1e] border-l border-white/5 overflow-y-auto transition-all duration-300 ease-in-out ${isPanelOpen ? 'w-80 p-6 opacity-100' : 'w-0 p-0 opacity-0 border-none'}`}>\r\n                    <h3 className=\"font-medium text-white/90 mb-6 text-lg\"></h3>\r\n                    {selectedElement ? (\r\n                        <div>\r\n                            {selectedElement.type !== 'bpmn:Group' && (\r\n                                <div className=\"mb-5\">\r\n                                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\"> (Name)</label>\r\n                                    <input value={elementName} onChange={(e) => updateElementName(e.target.value)} className=\"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2\" placeholder=\"...\" />\r\n\r\n                                    {/* Name Font Size Control */}\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <span className=\"text-white/60 text-xs\"></span>\r\n                                        <select\r\n                                            value={nameFontSize}\r\n                                            onChange={(e) => updateElementProperties({ nameFontSize: parseInt(e.target.value) })}\r\n                                            className=\"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-xs outline-none\"\r\n                                        >\r\n                                            {[12, 14, 16, 18, 20, 24, 30, 36].map(s => (\r\n                                                <option key={s} value={s}>{s}px</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Size Control for Tasks */}\r\n                            {(selectedElement.type.includes('Task') || selectedElement.type === 'bpmn:Participant') && (\r\n                                <div className=\"mb-5 border-t border-white/10 pt-4\">\r\n                                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\"> (Size)</label>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <div className=\"flex-1\">\r\n                                            <span className=\"text-white/60 text-xs block mb-1\"> (Width)</span>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                value={elementWidth}\r\n                                                onChange={(e) => setElementWidth(e.target.value)}\r\n                                                onBlur={applyResize}\r\n                                                onKeyDown={(e) => e.key === 'Enter' && applyResize()}\r\n                                                className=\"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <span className=\"text-white/60 text-xs block mb-1\"> (Height)</span>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                value={elementHeight}\r\n                                                onChange={(e) => setElementHeight(e.target.value)}\r\n                                                onBlur={applyResize}\r\n                                                onKeyDown={(e) => e.key === 'Enter' && applyResize()}\r\n                                                className=\"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Text Annotation Styling */}\r\n                            {selectedElement.type === 'bpmn:Group' && (\r\n                                <div className=\"mb-5 border-t border-white/10 pt-4\">\r\n                                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\"> (Sticky Note)</label>\r\n\r\n                                    {/* Note Color */}\r\n                                    <div className=\"mb-3\">\r\n                                        <span className=\"text-white/60 text-sm block mb-1\"></span>\r\n                                        <div className=\"flex gap-1 flex-wrap\">\r\n                                            {['#fff2cc', '#fce5cd', '#e6b8af', '#d9ead3', '#c9daf8', '#d0e0e3', '#ead1dc', '#ffffff', 'transparent'].map(c => (\r\n                                                <button\r\n                                                    key={c}\r\n                                                    onClick={() => updateElementProperties({ noteColor: c })}\r\n                                                    className={`w-6 h-6 rounded border ${noteColor === c ? 'border-white scale-110' : 'border-white/10'}`}\r\n                                                    style={{ backgroundColor: c }}\r\n                                                    title={c}\r\n                                                />\r\n                                            ))}\r\n                                            <input\r\n                                                type=\"color\"\r\n                                                value={noteColor}\r\n                                                onChange={(e) => updateElementProperties({ noteColor: e.target.value })}\r\n                                                className=\"w-6 h-6 p-0 border-0 rounded overflow-hidden\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Border Color */}\r\n                                    <div className=\"mb-3\">\r\n                                        <span className=\"text-white/60 text-sm block mb-1\"></span>\r\n                                        <div className=\"flex gap-1 flex-wrap\">\r\n                                            {['#d6b656', '#e69138', '#cc0000', '#6aa84f', '#3c78d8', '#45818e', '#a64d79', '#000000', 'transparent'].map(c => (\r\n                                                <button\r\n                                                    key={c}\r\n                                                    onClick={() => updateElementProperties({ borderColor: c })}\r\n                                                    className={`w-6 h-6 rounded border ${borderColor === c ? 'border-white scale-110' : 'border-white/10'}`}\r\n                                                    style={{ backgroundColor: c }}\r\n                                                    title={c}\r\n                                                />\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Opacity */}\r\n                                    <div className=\"mb-4\">\r\n                                        <div className=\"flex justify-between mb-1\">\r\n                                            <span className=\"text-white/60 text-sm\"></span>\r\n                                            <span className=\"text-white/80 text-xs\">{Math.round(noteOpacity * 100)}%</span>\r\n                                        </div>\r\n                                        <input\r\n                                            type=\"range\"\r\n                                            min=\"0\"\r\n                                            max=\"1\"\r\n                                            step=\"0.1\"\r\n                                            value={noteOpacity}\r\n                                            onChange={(e) => updateElementProperties({ noteOpacity: parseFloat(e.target.value) })}\r\n                                            className=\"w-full accent-[#8ab4f8] h-1 bg-white/10 rounded-lg appearance-none cursor-pointer\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider border-t border-white/10 pt-4\"> (Style)</label>\r\n\r\n                                    {/* Font Size */}\r\n                                    <div className=\"flex items-center justify-between mb-2\">\r\n                                        <span className=\"text-white/60 text-sm\"></span>\r\n                                        <select\r\n                                            value={textFontSize}\r\n                                            onChange={(e) => updateElementProperties({ textFontSize: parseInt(e.target.value) })}\r\n                                            className=\"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-sm outline-none\"\r\n                                        >\r\n                                            {[12, 14, 16, 18, 20, 24, 30, 36, 48, 64].map(s => (\r\n                                                <option key={s} value={s}>{s}px</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n\r\n                                    {/* Rich Text Editor */}\r\n                                    <div className=\"mt-4 border-t border-white/10 pt-4\">\r\n                                        <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\"> (Content)</label>\r\n                                        <div className=\"bg-[#2d2d2d] rounded-lg border border-white/10 p-2\">\r\n                                            <div className=\"flex gap-2 mb-2 border-b border-white/10 pb-2 flex-wrap\">\r\n                                                <button\r\n                                                    onClick={() => {\r\n                                                        document.execCommand('bold', false, null);\r\n                                                        const editor = document.getElementById('sticky-wysiwyg');\r\n                                                        if (editor) {\r\n                                                            setHtmlContent(editor.innerHTML);\r\n                                                            updateElementProperties({ htmlContent: editor.innerHTML });\r\n                                                        }\r\n                                                    }}\r\n                                                    className=\"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-bold\"\r\n                                                >\r\n                                                    B\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => {\r\n                                                        document.execCommand('underline', false, null);\r\n                                                        const editor = document.getElementById('sticky-wysiwyg');\r\n                                                        if (editor) {\r\n                                                            setHtmlContent(editor.innerHTML);\r\n                                                            updateElementProperties({ htmlContent: editor.innerHTML });\r\n                                                        }\r\n                                                    }}\r\n                                                    className=\"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-medium underline\"\r\n                                                >\r\n                                                    U\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => {\r\n                                                        document.execCommand('hiliteColor', false, '#ffff00');\r\n                                                        const editor = document.getElementById('sticky-wysiwyg');\r\n                                                        if (editor) {\r\n                                                            setHtmlContent(editor.innerHTML);\r\n                                                            updateElementProperties({ htmlContent: editor.innerHTML });\r\n                                                        }\r\n                                                    }}\r\n                                                    className=\"bg-[#fbbc04] hover:bg-[#fdd663] text-black text-xs px-2 py-1 rounded font-medium\"\r\n                                                >\r\n                                                    Highlight\r\n                                                </button>\r\n\r\n                                                {/* Text Color Picker in Toolbar */}\r\n                                                <div className=\"flex gap-1 items-center border-l border-white/10 pl-2\">\r\n                                                    {['#000000', '#ff0000', '#0000ff', '#ffffff'].map(c => (\r\n                                                        <button\r\n                                                            key={c}\r\n                                                            onClick={() => {\r\n                                                                document.execCommand('foreColor', false, c);\r\n                                                                const editor = document.getElementById('sticky-wysiwyg');\r\n                                                                if (editor) {\r\n                                                                    setHtmlContent(editor.innerHTML);\r\n                                                                    updateElementProperties({ htmlContent: editor.innerHTML });\r\n                                                                }\r\n                                                            }}\r\n                                                            className=\"w-4 h-4 rounded-full border border-white/20 hover:scale-110 transition\"\r\n                                                            style={{ backgroundColor: c }}\r\n                                                        />\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* WYSIWYG Editor */}\r\n                                            <div\r\n                                                id=\"sticky-wysiwyg\"\r\n                                                contentEditable\r\n                                                className=\"w-full bg-white text-black text-sm outline-none min-h-[100px] p-2 rounded-t mb-1 overflow-auto\"\r\n                                                style={{ whiteSpace: 'pre-wrap' }}\r\n                                                dangerouslySetInnerHTML={{ __html: htmlContent }}\r\n                                                onCompositionStart={() => {\r\n                                                    isComposing.current = true;\r\n                                                }}\r\n                                                onCompositionEnd={(e) => {\r\n                                                    isComposing.current = false;\r\n                                                    setHtmlContent(e.currentTarget.innerHTML);\r\n                                                    updateElementProperties({ htmlContent: e.currentTarget.innerHTML });\r\n                                                }}\r\n                                                onInput={(e) => {\r\n                                                    if (!isComposing.current) {\r\n                                                        setHtmlContent(e.currentTarget.innerHTML);\r\n                                                        updateElementProperties({ htmlContent: e.currentTarget.innerHTML });\r\n                                                    }\r\n                                                }}\r\n                                            />\r\n\r\n                                            {/* HTML Preview */}\r\n                                            <textarea\r\n                                                readOnly\r\n                                                value={htmlContent}\r\n                                                className=\"w-full bg-[#1e1e1e] text-white/50 text-xs outline-none h-[60px] font-mono p-2 rounded-b border-t border-white/10\"\r\n                                                placeholder=\"HTML ...\"\r\n                                            />\r\n                                        </div>\r\n                                        <p className=\"text-white/40 text-xs mt-2\"> HTML </p>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Color Picker (Standard) */}\r\n                            {selectedElement.type !== 'bpmn:Group' && (\r\n                                <div className=\"mb-5\">\r\n                                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\"> (Color)</label>\r\n                                    <div className=\"grid grid-cols-7 gap-2\">\r\n                                        {GOOGLE_COLORS.map(color => (\r\n                                            <button\r\n                                                key={color}\r\n                                                onClick={() => updateElementColor(color)}\r\n                                                className=\"w-6 h-6 rounded-full border border-white/10 hover:scale-110 transition\"\r\n                                                style={{ backgroundColor: color }}\r\n                                            />\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* PI Tag Config */}\r\n                            {selectedElement.type !== 'bpmn:Group' && (\r\n                                <div className=\"mb-5\">\r\n                                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\">PI Tag </label>\r\n                                    <input\r\n                                        value={piTag}\r\n                                        onChange={(e) => {\r\n                                            const val = e.target.value;\r\n                                            if (val.split(';').length > 4) {\r\n                                                alert(' 4  PI Tag');\r\n                                                return;\r\n                                            }\r\n                                            updateElementProperties({ piTag: val });\r\n                                        }}\r\n                                        className=\"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2\"\r\n                                        placeholder=\": Tag1;Tag2 (4)\"\r\n                                    />\r\n                                    <input\r\n                                        value={piUnit}\r\n                                        onChange={(e) => updateElementProperties({ piUnit: e.target.value })}\r\n                                        className=\"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2\"\r\n                                        placeholder=\" (: kg/hr)\"\r\n                                    />\r\n                                    <div className=\"flex items-center gap-2 bg-[#2d2d2d] border border-white/10 rounded-lg px-3 py-2 mb-2\">\r\n                                        <span className=\"text-white/60 text-sm whitespace-nowrap\">:</span>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            min=\"0\"\r\n                                            max=\"5\"\r\n                                            value={piPrecision}\r\n                                            onChange={(e) => updateElementProperties({ piPrecision: parseInt(e.target.value) })}\r\n                                            className=\"w-full bg-transparent border-none outline-none text-white text-right\"\r\n                                        />\r\n                                    </div>\r\n                                    <label className=\"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-2 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition mb-2\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={alwaysOn}\r\n                                            onChange={(e) => updateElementProperties({ alwaysOn: e.target.checked })}\r\n                                            className=\"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]\"\r\n                                        />\r\n                                        <span className=\"text-sm text-white/90 font-medium\">Always On ()</span>\r\n                                    </label>\r\n                                </div>\r\n                            )}\r\n                            {(selectedElement.type === 'bpmn:DataObjectReference' || selectedElement.type === 'bpmn:DataStoreReference') && (\r\n                                <div className=\"mb-5\">\r\n                                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\"> (Hyperlink)</label>\r\n                                    <input\r\n                                        value={targetUrl}\r\n                                        onChange={(e) => updateElementProperties({ targetUrl: e.target.value })}\r\n                                        className=\"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition\"\r\n                                        placeholder=\": https://google.com\"\r\n                                    />\r\n                                    <p className=\"text-white/40 text-xs mt-2\"></p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Final End Config (For End Events) */}\r\n                            {selectedElement.type === 'bpmn:EndEvent' && (\r\n                                <div className=\"mb-5\">\r\n                                    <label className=\"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-3 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={isFinalEnd}\r\n                                            onChange={(e) => updateElementProperties({ isFinalEnd: e.target.checked })}\r\n                                            className=\"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]\"\r\n                                        />\r\n                                        <span className=\"text-sm text-white/90 font-medium\"> END (Final END)</span>\r\n                                    </label>\r\n                                    <p className=\"text-white/40 text-xs mt-2\"></p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <p className=\"text-white/40 text-sm\"></p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Editor;\r\n","/*! bpmn-js - bpmn-viewer v17.11.1 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).BpmnJS=t()}(this,(function(){\"use strict\";function e(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}const t=Object.prototype.toString,n=Object.prototype.hasOwnProperty;function i(e){return void 0===e}function r(e){return void 0!==e}function o(e){return\"[object Array]\"===t.call(e)}function a(e){return\"[object Object]\"===t.call(e)}function s(e){return\"[object Number]\"===t.call(e)}function l(e){const n=t.call(e);return\"[object Function]\"===n||\"[object AsyncFunction]\"===n||\"[object GeneratorFunction]\"===n||\"[object AsyncGeneratorFunction]\"===n||\"[object Proxy]\"===n}function p(e){return\"[object String]\"===t.call(e)}function c(e,t){return n.call(e,t)}function u(e,t){const n=v(t);let i;return f(e,(function(e,t){if(n(e,t))return i=e,!1})),i}function h(e,t){const n=v(t);let i=[];return f(e,(function(e,t){n(e,t)&&i.push(e)})),i}function f(e,t){let n,r;if(i(e))return;const a=o(e)?w:x;for(let i in e)if(c(e,i)&&(n=e[i],r=t(n,a(i)),!1===r))return n}function m(e,t,n){return f(e,(function(e,i){n=t(n,e,i)})),n}function d(e,t){return!!m(e,(function(e,n,i){return e&&t(n,i)}),!0)}function y(e,t){return!!u(e,t)}function g(e){return function(t){return d(e,(function(e,n){return t[n]===e}))}}function v(e){return l(e)?e:t=>t===e}function x(e){return e}function w(e){return Number(e)}function b(e,t){return e.bind(t)}function E(e,...t){return Object.assign(e,...t)}var _=1e3;function A(e,t){var n=this;t=t||_,e.on([\"render.shape\",\"render.connection\"],t,(function(e,t){var i=e.type,r=t.element,o=t.gfx,a=t.attrs;if(n.canRender(r))return\"render.shape\"===i?n.drawShape(o,r,a):n.drawConnection(o,r,a)})),e.on([\"render.getShapePath\",\"render.getConnectionPath\"],t,(function(e,t){if(n.canRender(t))return\"render.getShapePath\"===e.type?n.getShapePath(t):n.getConnectionPath(t)}))}function R(e,t){var n=k(e);return n&&\"function\"==typeof n.$instanceOf&&n.$instanceOf(t)}function S(e,t){return y(t,(function(t){return R(e,t)}))}function k(e){return e&&e.businessObject||e}function C(e){return e&&e.di}function M(e,t){return!R(e,\"bpmn:CallActivity\")&&(R(e,\"bpmn:SubProcess\")?!(!(t=t||C(e))||!R(t,\"bpmndi:BPMNPlane\"))||t&&!!t.isExpanded:!R(e,\"bpmn:Participant\")||!!k(e).processRef)}function P(e){if(R(e,\"bpmn:Participant\")||R(e,\"bpmn:Lane\")){var t=C(e).isHorizontal;return void 0===t||t}}function O(e){return a(e)&&c(e,\"labelTarget\")}A.prototype.canRender=function(e){},A.prototype.drawShape=function(e,t){},A.prototype.drawConnection=function(e,t){},A.prototype.getShapePath=function(e){},A.prototype.getConnectionPath=function(e){};var T={width:90,height:20},N=15;function D(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=function(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=N:a+=N,{x:a,y:s}}function B(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(T.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=function(e){return e.waypoints?D(e.waypoints):R(e,\"bpmn:Group\")?{x:e.x+e.width/2,y:e.y+T.height/2}:{x:e.x+e.width/2,y:e.y+e.height+T.height/2}}(t),i=T),E({x:n.x-i.width/2,y:n.y-i.height/2},i)}function L(e){var t=e.businessObject,n=function(e){return R(e,\"bpmn:FlowElement\")||R(e,\"bpmn:Participant\")||R(e,\"bpmn:Lane\")||R(e,\"bpmn:SequenceFlow\")||R(e,\"bpmn:MessageFlow\")||R(e,\"bpmn:DataInput\")||R(e,\"bpmn:DataOutput\")?\"name\":R(e,\"bpmn:TextAnnotation\")?\"text\":R(e,\"bpmn:Group\")?\"categoryValueRef\":void 0}(t);if(n)return\"categoryValueRef\"===n?function(e){var t=e.categoryValueRef;return t&&t.value||\"\"}(t):t[n]||\"\"}function I(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var j=2,F={\"alignment-baseline\":1,\"baseline-shift\":1,clip:1,\"clip-path\":1,\"clip-rule\":1,color:1,\"color-interpolation\":1,\"color-interpolation-filters\":1,\"color-profile\":1,\"color-rendering\":1,cursor:1,direction:1,display:1,\"dominant-baseline\":1,\"enable-background\":1,fill:1,\"fill-opacity\":1,\"fill-rule\":1,filter:1,\"flood-color\":1,\"flood-opacity\":1,font:1,\"font-family\":1,\"font-size\":j,\"font-size-adjust\":1,\"font-stretch\":1,\"font-style\":1,\"font-variant\":1,\"font-weight\":1,\"glyph-orientation-horizontal\":1,\"glyph-orientation-vertical\":1,\"image-rendering\":1,kerning:1,\"letter-spacing\":1,\"lighting-color\":1,marker:1,\"marker-end\":1,\"marker-mid\":1,\"marker-start\":1,mask:1,opacity:1,overflow:1,\"pointer-events\":1,\"shape-rendering\":1,\"stop-color\":1,\"stop-opacity\":1,stroke:1,\"stroke-dasharray\":1,\"stroke-dashoffset\":1,\"stroke-linecap\":1,\"stroke-linejoin\":1,\"stroke-miterlimit\":1,\"stroke-opacity\":1,\"stroke-width\":j,\"text-anchor\":1,\"text-decoration\":1,\"text-rendering\":1,\"unicode-bidi\":1,visibility:1,\"word-spacing\":1,\"writing-mode\":1};function V(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,\"$1-$2\").toLowerCase(),r=F[i];r?(r===j&&\"number\"==typeof n&&(n=String(n)+\"px\"),e.style[i]=n):e.setAttributeNS(null,t,n)}function W(e,t,n){if(\"string\"==typeof t){if(void 0===n)return function(e,t){return F[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);V(e,t,n)}else!function(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)V(e,i,t[i])}(e,t);return e}const $=Object.prototype.toString;function z(e){return new G(e)}function G(e){if(!e||!e.nodeType)throw new Error(\"A DOM element reference is required\");this.el=e,this.list=e.classList}G.prototype.add=function(e){return this.list.add(e),this},G.prototype.remove=function(e){return\"[object RegExp]\"==$.call(e)?this.removeMatching(e):(this.list.remove(e),this)},G.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},G.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},G.prototype.array=function(){return Array.from(this.list)},G.prototype.has=G.prototype.contains=function(e){return this.list.contains(e)};var H={svg:\"http://www.w3.org/2000/svg\"},K='<svg xmlns=\"'+H.svg+'\"';function U(e){var t=!1;\"<svg\"===e.substring(0,4)?-1===e.indexOf(H.svg)&&(e=K+e.substring(4)):(e=K+\">\"+e+\"</svg>\",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,\"text/xml\")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function q(e,t){var n;return\"<\"===(e=e.trim()).charAt(0)?(n=U(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(H.svg,e),t&&W(n,t),n}var Y=null;function X(){return null===Y&&(Y=q(\"svg\")),Y}function Z(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function J(e){return X().createSVGTransform()}var Q=/([&<>]{1})/g,ee=/([\\n\\r\"]{1})/g,te={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"'\"};function ne(e,t){return e.replace(t,(function(e,t){return te[t]||t}))}function ie(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(ne(e.textContent,Q));break;case 1:if(t.push(\"<\",e.tagName),e.hasAttributes())for(n=0,i=(r=e.attributes).length;n<i;++n)o=r.item(n),t.push(\" \",o.name,'=\"',ne(o.value,ee),'\"');if(e.hasChildNodes()){for(t.push(\">\"),n=0,i=(a=e.childNodes).length;n<i;++n)ie(a.item(n),t);t.push(\"</\",e.tagName,\">\")}else t.push(\"/>\");break;case 8:t.push(\"\\x3c!--\",ne(e.nodeValue,Q),\"--\\x3e\");break;case 4:t.push(\"<![CDATA[\",e.nodeValue,\"]]>\");break;default:throw new Error(\"unable to handle node \"+e.nodeType)}return t}function re(e,t){return function(e){for(var t=e.firstChild,n=[];t;)ie(t,n),t=t.nextSibling;return n.join(\"\")}(e)}function oe(e){var t=e.parentNode;return t&&t.removeChild(e),e}function ae(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function se(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(ae(e,i))}(n,t)),n.consolidate()}function le(e){return e.flat().join(\",\").replace(/,?([A-z]),?/g,\"$1\")}function pe(e){return[\"L\",e.x,e.y]}function ce(e,t){const n=e.length,i=[(r=e[0],[\"M\",r.x,r.y])];var r,o,a,s;for(let r=1;r<n;r++){const n=e[r-1],l=e[r],p=e[r+1];if(!p||!t){i.push(pe(l));continue}const c=Math.min(t,he(l.x-n.x,l.y-n.y),he(p.x-l.x,p.y-l.y));if(!c){i.push(pe(l));continue}const u=ue(l,n,c),h=ue(l,n,.5*c),f=ue(l,p,c),m=ue(l,p,.5*c);i.push(pe(u)),i.push((a=m,s=f,[\"C\",(o=h).x,o.y,a.x,a.y,s.x,s.y]))}return i}function ue(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=n/he(i,r);return{x:e.x+i*o,y:e.y+r*o}}function he(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function fe(e,t,n){s(t)&&(n=t,t=null),t||(t={});const i=q(\"path\",t);return s(n)&&(i.dataset.cornerRadius=String(n)),me(i,e)}function me(e,t){return W(e,{d:le(ce(t,parseInt(e.dataset.cornerRadius,10)||0))}),e}var de=\"hsl(225, 10%, 15%)\",ye=\"white\";function ge(e,t){return y(e.eventDefinitions,(function(e){return e.$type===t}))}function ve(e,t,n){var i=C(e);return n||i.get(\"color:background-color\")||i.get(\"bioc:fill\")||t||ye}function xe(e,t,n){var i=C(e);return n||i.get(\"color:border-color\")||i.get(\"bioc:stroke\")||t||de}function we(e,t,n,i){var r=C(e).get(\"label\");return i||r&&r.get(\"color:color\")||t||xe(e,n)}function be(e,t={}){return{width:Ee(e,t),height:_e(e,t)}}function Ee(e,t={}){return c(t,\"width\")?t.width:e.width}function _e(e,t={}){return c(t,\"height\")?t.height:e.height}function Ae(e,t){return t.forEach((function(t){t&&\"string\"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(\"default\"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}const Re=Object.prototype.toString,Se=Object.prototype.hasOwnProperty;function ke(e,t){return Se.call(e,t)}function Ce(e,t){let n,i;if(void 0===e)return;const r=function(e){return\"[object Array]\"===Re.call(e)}(e)?Pe:Me;for(let o in e)if(ke(e,o)&&(n=e[o],i=t(n,r(o)),!1===i))return n}function Me(e){return e}function Pe(e){return Number(e)}function Oe(e,...t){const n=e.style;return Ce(t,(function(e){e&&Ce(e,(function(e,t){n[t]=e}))})),e}const Te=Object.prototype.toString;function Ne(e){return new De(e)}function De(e){if(!e||!e.nodeType)throw new Error(\"A DOM element reference is required\");this.el=e,this.list=e.classList}function Be(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}De.prototype.add=function(e){return this.list.add(e),this},De.prototype.remove=function(e){return\"[object RegExp]\"==Te.call(e)?this.removeMatching(e):(this.list.remove(e),this)},De.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},De.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},De.prototype.array=function(){return Array.from(this.list)},De.prototype.has=De.prototype.contains=function(e){return this.list.contains(e)};var Le,Ie,je,Fe={};function Ve(){Le=window.addEventListener?\"addEventListener\":\"attachEvent\",Ie=window.removeEventListener?\"removeEventListener\":\"detachEvent\",je=\"addEventListener\"!==Le?\"on\":\"\"}var We=Ae({__proto__:null,bind:Fe.bind=function(e,t,n,i){return Le||Ve(),e[Le](je+t,n,i||!1),n},unbind:Fe.unbind=function(e,t,n,i){return Ie||Ve(),e[Ie](je+t,n,i||!1),n},default:Fe},[Fe]),$e=[\"focus\",\"blur\"];var ze,Ge={bind:function(e,t,n,i,r){return-1!==$e.indexOf(n)&&(r=!0),We.bind(e,n,(function(n){var r=n.target||n.srcElement;n.delegateTarget=function(e,t,n){var i=n?e:e.parentNode;return i&&\"function\"==typeof i.closest&&i.closest(t)||null}(r,t,!0),n.delegateTarget&&i.call(e,n)}),r)},unbind:function(e,t,n,i){return-1!==$e.indexOf(t)&&(i=!0),We.unbind(e,t,n,i)}},He=function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"String expected\");t||(t=document);var n=/<([\\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\\s+|\\s+$/g,\"\");var i=n[1];if(\"body\"==i){return(r=t.createElement(\"html\")).innerHTML=e,r.removeChild(r.lastChild)}var r,o=Object.prototype.hasOwnProperty.call(Ue,i)?Ue[i]:Ue._default,a=o[0],s=o[1],l=o[2];(r=t.createElement(\"div\")).innerHTML=s+e+l;for(;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);var p=t.createDocumentFragment();for(;r.firstChild;)p.appendChild(r.removeChild(r.firstChild));return p},Ke=!1;\"undefined\"!=typeof document&&((ze=document.createElement(\"div\")).innerHTML='  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>',Ke=!ze.getElementsByTagName(\"link\").length,ze=void 0);var Ue={legend:[1,\"<fieldset>\",\"</fieldset>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],_default:Ke?[1,\"X<div>\",\"</div>\"]:[0,\"\",\"\"]};Ue.td=Ue.th=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],Ue.option=Ue.optgroup=[1,'<select multiple=\"multiple\">',\"</select>\"],Ue.thead=Ue.tbody=Ue.colgroup=Ue.caption=Ue.tfoot=[1,\"<table>\",\"</table>\"],Ue.polyline=Ue.ellipse=Ue.polygon=Ue.circle=Ue.text=Ue.line=Ue.path=Ue.rect=Ue.g=[1,'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">',\"</svg>\"];var qe=He;function Ye(e,t){return(t=t||document).querySelector(e)}function Xe(e){e.parentNode&&e.parentNode.removeChild(e)}function Ze(e,t,n,i,r){var o=J();o.setTranslate(t,n);var a=J();a.setRotate(i||0,0,0);var s=J();s.setScale(1,1),se(e,[o,a,s])}function Je(e,t,n){var i=J();i.setTranslate(t,n),se(e,i)}var Qe=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=e.exports=function(e,n){if(n||(n=16),void 0===e&&(e=128),e<=0)return\"0\";for(var i=Math.log(Math.pow(2,e))/Math.log(n),r=2;i===1/0;r*=2)i=Math.log(Math.pow(2,e/r))/Math.log(n)*r;var o=i-Math.floor(i),a=\"\";for(r=0;r<Math.floor(i);r++){a=Math.floor(Math.random()*n).toString(n)+a}if(o){var s=Math.pow(n,o);a=Math.floor(Math.random()*s).toString(n)+a}var l=parseInt(a,n);return l!==1/0&&l>=Math.pow(2,e)?t(e,n):a};t.rack=function(e,n,i){var r=function(r){var a=0;do{if(a++>10){if(!i)throw new Error(\"too many ID collisions, use more bits\");e+=i}var s=t(e,n)}while(Object.hasOwnProperty.call(o,s));return o[s]=r,s},o=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=e||128,r.base=n||16,r}}));function et(e){if(!(this instanceof et))return new et(e);e=e||[128,36,1],this._seed=e.length?Qe.rack(e[0],e[1],e[2]):e}et.prototype.next=function(e){return this._seed(e||!0)},et.prototype.nextPrefixed=function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n},et.prototype.claim=function(e,t){this._seed.set(e,t||!0)},et.prototype.assigned=function(e){return this._seed.get(e)||!1},et.prototype.unclaim=function(e){delete this._seed.hats[e]},et.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)};var tt=new et,nt=.95;function it(e,t,n,i,r,o,s){A.call(this,t,s);var l=e&&e.defaultFillColor,p=e&&e.defaultStrokeColor,c=e&&e.defaultLabelColor;function u(e){return n.computeStyle(e,{strokeLinecap:\"round\",strokeLinejoin:\"round\",stroke:de,strokeWidth:2,fill:\"white\"})}function h(e){return n.computeStyle(e,[\"no-fill\"],{strokeLinecap:\"round\",strokeLinejoin:\"round\",stroke:de,strokeWidth:2})}function m(e,t){var{ref:n={x:0,y:0},scale:i=1,element:o,parentGfx:a=r._svg}=t,s=q(\"marker\",{id:e,viewBox:\"0 0 20 20\",refX:n.x,refY:n.y,markerWidth:20*i,markerHeight:20*i,orient:\"auto\"});I(s,o);var l=Ye(\":scope > defs\",a);l||I(a,l=q(\"defs\")),I(l,s)}function d(e,t,n,i){var r=tt.nextPrefixed(\"marker-\");return function(e,t,n,i,r){if(\"sequenceflow-end\"===n){m(t,{element:q(\"path\",{d:\"M 1 5 L 11 10 L 1 15 Z\",...u({fill:r,stroke:r,strokeWidth:1})}),ref:{x:11,y:10},scale:.5,parentGfx:e})}if(\"messageflow-start\"===n){m(t,{element:q(\"circle\",{cx:6,cy:6,r:3.5,...u({fill:i,stroke:r,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:6,y:6},parentGfx:e})}if(\"messageflow-end\"===n){m(t,{element:q(\"path\",{d:\"m 1 5 l 0 -3 l 7 3 l -7 3 z\",...u({fill:i,stroke:r,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:8.5,y:5},parentGfx:e})}if(\"association-start\"===n){m(t,{element:q(\"path\",{d:\"M 11 5 L 1 10 L 11 15\",...h({fill:\"none\",stroke:r,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:1,y:10},scale:.5,parentGfx:e})}if(\"association-end\"===n){m(t,{element:q(\"path\",{d:\"M 1 5 L 11 10 L 1 15\",...h({fill:\"none\",stroke:r,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:11,y:10},scale:.5,parentGfx:e})}if(\"conditional-flow-marker\"===n){m(t,{element:q(\"path\",{d:\"M 0 10 L 8 6 L 16 10 L 8 14 Z\",...u({fill:i,stroke:r})}),ref:{x:-1,y:10},scale:.5,parentGfx:e})}if(\"conditional-default-flow-marker\"===n){m(t,{element:q(\"path\",{d:\"M 6 4 L 10 16\",...u({stroke:r,fill:\"none\"})}),ref:{x:0,y:10},scale:.5,parentGfx:e})}}(e,r,t,n,i),\"url(#\"+r+\")\"}function y(e,t,n,i,r={}){a(i)&&(r=i,i=0),i=i||0,r=u(r);var o=q(\"circle\",{cx:t/2,cy:n/2,r:Math.round((t+n)/4-i),...r});return I(e,o),o}function g(e,t,n,i,r,o){a(r)&&(o=r,r=0),r=r||0,o=u(o);var s=q(\"rect\",{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i,...o});return I(e,s),s}function v(e,t,n,i){var r=fe(t,n=h(n),i);return I(e,r),r}function x(e,t,n){return v(e,t,n,5)}function w(e,t,n){n=h(n);var i=q(\"path\",{...n,d:t});return I(e,i),i}function b(e,t,n,i){return w(t,n,E({\"data-marker\":e},i))}function _(e){return ue[e]}function S(e){return function(t,n,i){return _(e)(t,n,i)}}var O=function(e,t,n={},r){return w(e,i.getScaledPath(\"EVENT_MESSAGE\",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),{fill:r?xe(t,p,n.stroke):ve(t,l,n.fill),stroke:r?ve(t,l,n.fill):xe(t,p,n.stroke),strokeWidth:1})},T=function(e,t,n={}){var r=y(e,t.width,t.height,.2*t.height,{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:2});w(e,i.getScaledPath(\"EVENT_TIMER_WH\",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{stroke:xe(t,p,n.stroke),strokeWidth:2});for(var o=0;o<12;o++){var a=i.getScaledPath(\"EVENT_TIMER_LINE\",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),s=t.width/2,c=t.height/2;w(e,a,{strokeWidth:1,stroke:xe(t,p,n.stroke),transform:\"rotate(\"+30*o+\",\"+c+\",\"+s+\")\"})}return r},N=function(e,t,n={},r){return w(e,i.getScaledPath(\"EVENT_ESCALATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{fill:r?xe(t,p,n.stroke):ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1})},D=function(e,t,n={}){return w(e,i.getScaledPath(\"EVENT_CONDITIONAL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1})},B=function(e,t,n={},r){return w(e,i.getScaledPath(\"EVENT_LINK\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{fill:r?xe(t,p,n.stroke):ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1})},j=function(e,t,n={},r){return w(e,i.getScaledPath(\"EVENT_ERROR\",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),{fill:r?xe(t,p,n.stroke):ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1})},F=function(e,t,n={},r){var o=w(e,i.getScaledPath(\"EVENT_CANCEL_45\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{fill:r?xe(t,p,n.stroke):\"none\",stroke:xe(t,p,n.stroke),strokeWidth:1});return function(e,t){var n=J();n.setRotate(t,0,0),se(e,n)}(o,45),o},V=function(e,t,n={},r){return w(e,i.getScaledPath(\"EVENT_COMPENSATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),{fill:r?xe(t,p,n.stroke):ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1})},$=function(e,t,n={},r){return w(e,i.getScaledPath(\"EVENT_SIGNAL\",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:r?xe(t,p,n.stroke):ve(t,l,n.fill),stroke:xe(t,p,n.stroke)})},G=function(e,t,n={},r){return w(e,i.getScaledPath(\"EVENT_MULTIPLE\",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),{fill:r?xe(t,p,n.stroke):ve(t,l,n.fill),strokeWidth:1})},H=function(e,t,n={}){return w(e,i.getScaledPath(\"EVENT_PARALLEL_MULTIPLE\",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1})},K=function(e,t,n={}){return y(e,t.width,t.height,8,{fill:xe(t,p,n.stroke),stroke:xe(t,p,n.stroke),strokeWidth:4})};function U(e,t,n={}){var i=k(e),r=function(e){return\"bpmn:IntermediateThrowEvent\"===e.$type||\"bpmn:EndEvent\"===e.$type}(i);return i.get(\"eventDefinitions\")&&i.get(\"eventDefinitions\").length>1?i.get(\"parallelMultiple\")?H(t,e,n,r):G(t,e,n,r):ge(i,\"bpmn:MessageEventDefinition\")?O(t,e,n,r):ge(i,\"bpmn:TimerEventDefinition\")?T(t,e,n,r):ge(i,\"bpmn:ConditionalEventDefinition\")?D(t,e,n,r):ge(i,\"bpmn:SignalEventDefinition\")?$(t,e,n,r):ge(i,\"bpmn:EscalationEventDefinition\")?N(t,e,n,r):ge(i,\"bpmn:LinkEventDefinition\")?B(t,e,n,r):ge(i,\"bpmn:ErrorEventDefinition\")?j(t,e,n,r):ge(i,\"bpmn:CancelEventDefinition\")?F(t,e,n,r):ge(i,\"bpmn:CompensateEventDefinition\")?V(t,e,n,r):ge(i,\"bpmn:TerminateEventDefinition\")?K(t,e,n,r):null}var Y={ParticipantMultiplicityMarker:function(e,t,n={}){var r=Ee(t,n),o=_e(t,n);b(\"participant-multiplicity\",e,i.getScaledPath(\"MARKER_PARALLEL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:r,containerHeight:o,position:{mx:(r/2-6)/r,my:(o-15)/o}}),{strokeWidth:2,fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)})},SubProcessMarker:function(e,t,n={}){Je(g(e,14,14,0,{strokeWidth:1,fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)}),t.width/2-7.5,t.height-20),b(\"sub-process\",e,i.getScaledPath(\"MARKER_SUB_PROCESS\",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)})},ParallelMarker:function(e,t,n){var r=Ee(t,n),o=_e(t,n);b(\"parallel\",e,i.getScaledPath(\"MARKER_PARALLEL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:r,containerHeight:o,position:{mx:(r/2+n.parallel)/r,my:(o-20)/o}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)})},SequentialMarker:function(e,t,n){b(\"sequential\",e,i.getScaledPath(\"MARKER_SEQUENTIAL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)})},CompensationMarker:function(e,t,n){b(\"compensation\",e,i.getScaledPath(\"MARKER_COMPENSATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)})},LoopMarker:function(e,t,n){var r=Ee(t,n),o=_e(t,n);b(\"loop\",e,i.getScaledPath(\"MARKER_LOOP\",{xScaleFactor:1,yScaleFactor:1,containerWidth:r,containerHeight:o,position:{mx:(r/2+n.loop)/r,my:(o-7)/o}}),{strokeWidth:1.5,fill:\"none\",stroke:xe(t,p,n.stroke),strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){var r=Ee(t,n),o=_e(t,n);b(\"adhoc\",e,i.getScaledPath(\"MARKER_ADHOC\",{xScaleFactor:1,yScaleFactor:1,containerWidth:r,containerHeight:o,position:{mx:(r/2+n.adhoc)/r,my:(o-15)/o}}),{strokeWidth:1,fill:xe(t,p,n.stroke),stroke:xe(t,p,n.stroke)})}};function X(e,t,n,i){Y[e](t,n,i)}function Z(e,t,n,i={}){i={fill:i.fill,stroke:i.stroke,width:Ee(t,i),height:_e(t,i)};var r=k(t),o=n&&n.includes(\"SubProcessMarker\");i=o?{...i,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{...i,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},f(n,(function(n){X(n,e,t,i)})),r.get(\"isForCompensation\")&&X(\"CompensationMarker\",e,t,i),R(r,\"bpmn:AdHocSubProcess\")&&X(\"AdhocMarker\",e,t,i);var a=r.get(\"loopCharacteristics\"),s=a&&a.get(\"isSequential\");a&&(void 0===s&&X(\"LoopMarker\",e,t,i),!1===s&&X(\"ParallelMarker\",e,t,i),!0===s&&X(\"SequentialMarker\",e,t,i))}function Q(e,t,n={}){n=E({size:{width:100}},n);var i=o.createText(t||\"\",n);return z(i).add(\"djs-label\"),I(e,i),i}function ee(e,t,n,i={}){var r=k(t),o=be({x:t.x,y:t.y,width:t.width,height:t.height},i);return Q(e,r.name,{align:n,box:o,padding:7,style:{fill:we(t,c,p,i.stroke)}})}function te(e,t,n,i={}){var r=P(n),o=Q(e,t,{box:{height:30,width:r?_e(n,i):Ee(n,i)},align:\"center-middle\",style:{fill:we(n,c,p,i.stroke)}});r&&Ze(o,0,-(-1*_e(n,i)),270)}function ne(e,t,n={}){var{width:i,height:r}=be(t,n);return g(e,i,r,10,{...n,fill:ve(t,l,n.fill),fillOpacity:nt,stroke:xe(t,p,n.stroke)})}function ie(e,t,n={}){var i=k(t),r=ve(t,l,n.fill),o=xe(t,p,n.stroke);return\"One\"!==i.get(\"associationDirection\")&&\"Both\"!==i.get(\"associationDirection\")||(n.markerEnd=d(e,\"association-end\",r,o)),\"Both\"===i.get(\"associationDirection\")&&(n.markerStart=d(e,\"association-start\",r,o)),n=rt(n,[\"markerStart\",\"markerEnd\"]),x(e,t.waypoints,{...n,stroke:o,strokeDasharray:\"0, 5\"})}function re(e,t,n={}){var r=ve(t,l,n.fill),o=xe(t,p,n.stroke),a=w(e,i.getScaledPath(\"DATA_OBJECT_PATH\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:r,fillOpacity:nt,stroke:o});(function(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection})(k(t))&&w(e,i.getScaledPath(\"DATA_OBJECT_COLLECTION_PATH\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.33,my:(t.height-18)/t.height}}),{strokeWidth:2,fill:r,stroke:o});return a}function oe(e,t,n={}){return y(e,t.width,t.height,{fillOpacity:nt,...n,fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)})}function ae(e,t,n={}){return function(e,t,n,i){var r=t/2,o=n/2,a=[{x:r,y:0},{x:t,y:o},{x:r,y:n},{x:0,y:o}].map((function(e){return e.x+\",\"+e.y})).join(\" \");i=u(i);var s=q(\"polygon\",{...i,points:a});return I(e,s),s}(e,t.width,t.height,{fill:ve(t,l,n.fill),fillOpacity:nt,stroke:xe(t,p,n.stroke)})}function le(e,t,n={}){var i=g(e,Ee(t,n),_e(t,n),0,{fill:ve(t,l,n.fill),fillOpacity:n.fillOpacity||nt,stroke:xe(t,p,n.stroke),strokeWidth:1.5}),r=k(t);R(r,\"bpmn:Lane\")&&te(e,r.get(\"name\"),t,n);return i}function pe(e,t,n={}){var i=ne(e,t,n);(function(e){return e&&!!k(e).triggeredByEvent})(t)&&W(i,{strokeDasharray:\"0, 5.5\",strokeWidth:2.5});var r=M(t);return ee(e,t,r?\"center-top\":\"center-middle\",n),Z(e,t,r?void 0:[\"SubProcessMarker\"],n),i}function ce(e,t,n={}){var i=ne(e,t,n);return ee(e,t,\"center-middle\",n),Z(e,t,void 0,n),i}var ue=this.handlers={\"bpmn:AdHocSubProcess\":function(e,t,n={}){return pe(e,t,n=M(t)?rt(n,[\"fill\",\"stroke\",\"width\",\"height\"]):rt(n,[\"fill\",\"stroke\"]))},\"bpmn:Association\":function(e,t,n={}){return ie(e,t,n=rt(n,[\"fill\",\"stroke\"]))},\"bpmn:BoundaryEvent\":function(e,t,n={}){var{renderIcon:i=!0}=n;n=rt(n,[\"fill\",\"stroke\"]);var r=k(t).get(\"cancelActivity\");n={strokeWidth:1.5,fill:ve(t,l,n.fill),fillOpacity:1,stroke:xe(t,p,n.stroke)},r||(n.strokeDasharray=\"6\");var o=oe(e,t,n);return y(e,t.width,t.height,3,{...n,fill:\"none\"}),i&&U(t,e,n),o},\"bpmn:BusinessRuleTask\":function(e,t,n={}){var r=ce(e,t,n=rt(n,[\"fill\",\"stroke\"]));return W(w(e,i.getScaledPath(\"TASK_TYPE_BUSINESS_RULE_MAIN\",{abspos:{x:8,y:8}})),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1}),W(w(e,i.getScaledPath(\"TASK_TYPE_BUSINESS_RULE_HEADER\",{abspos:{x:8,y:8}})),{fill:xe(t,p,n.stroke),stroke:xe(t,p,n.stroke),strokeWidth:1}),r},\"bpmn:CallActivity\":function(e,t,n={}){return n=rt(n,[\"fill\",\"stroke\"]),pe(e,t,{strokeWidth:5,...n})},\"bpmn:ComplexGateway\":function(e,t,n={}){var r=ae(e,t,n=rt(n,[\"fill\",\"stroke\"]));return w(e,i.getScaledPath(\"GATEWAY_COMPLEX\",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{fill:xe(t,p,n.stroke),stroke:xe(t,p,n.stroke),strokeWidth:1}),r},\"bpmn:DataInput\":function(e,t,n={}){n=rt(n,[\"fill\",\"stroke\"]);var r=i.getRawPath(\"DATA_ARROW\"),o=re(e,t,n);return w(e,r,{fill:\"none\",stroke:xe(t,p,n.stroke),strokeWidth:1}),o},\"bpmn:DataInputAssociation\":function(e,t,n={}){return n=rt(n,[\"fill\",\"stroke\"]),ie(e,t,{...n,markerEnd:d(e,\"association-end\",ve(t,l,n.fill),xe(t,p,n.stroke))})},\"bpmn:DataObject\":function(e,t,n={}){return re(e,t,n=rt(n,[\"fill\",\"stroke\"]))},\"bpmn:DataObjectReference\":S(\"bpmn:DataObject\"),\"bpmn:DataOutput\":function(e,t,n={}){n=rt(n,[\"fill\",\"stroke\"]);var r=i.getRawPath(\"DATA_ARROW\"),o=re(e,t,n);return w(e,r,{strokeWidth:1,fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke)}),o},\"bpmn:DataOutputAssociation\":function(e,t,n={}){return n=rt(n,[\"fill\",\"stroke\"]),ie(e,t,{...n,markerEnd:d(e,\"association-end\",ve(t,l,n.fill),xe(t,p,n.stroke))})},\"bpmn:DataStoreReference\":function(e,t,n={}){return n=rt(n,[\"fill\",\"stroke\"]),w(e,i.getScaledPath(\"DATA_STORE\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{fill:ve(t,l,n.fill),fillOpacity:nt,stroke:xe(t,p,n.stroke),strokeWidth:2})},\"bpmn:EndEvent\":function(e,t,n={}){var{renderIcon:i=!0}=n;n=rt(n,[\"fill\",\"stroke\"]);var r=oe(e,t,{...n,strokeWidth:4});return i&&U(t,e,n),r},\"bpmn:EventBasedGateway\":function(e,t,n={}){n=rt(n,[\"fill\",\"stroke\"]);var r=k(t),o=ae(e,t,n);y(e,t.width,t.height,.2*t.height,{fill:ve(t,\"none\",n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1});var a=r.get(\"eventGatewayType\"),s=!!r.get(\"instantiate\");if(\"Parallel\"===a){var l=i.getScaledPath(\"GATEWAY_PARALLEL\",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}});w(e,l,{fill:\"none\",stroke:xe(t,p,n.stroke),strokeWidth:1})}else\"Exclusive\"===a&&(s||y(e,t.width,t.height,.26*t.height,{fill:\"none\",stroke:xe(t,p,n.stroke),strokeWidth:1}),function(){var r=i.getScaledPath(\"GATEWAY_EVENT_BASED\",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}});w(e,r,{fill:\"none\",stroke:xe(t,p,n.stroke),strokeWidth:2})}());return o},\"bpmn:ExclusiveGateway\":function(e,t,n={}){var r=ae(e,t,n=rt(n,[\"fill\",\"stroke\"])),o=i.getScaledPath(\"GATEWAY_EXCLUSIVE\",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return C(t).get(\"isMarkerVisible\")&&w(e,o,{fill:xe(t,p,n.stroke),stroke:xe(t,p,n.stroke),strokeWidth:1}),r},\"bpmn:Gateway\":function(e,t,n={}){return ae(e,t,n=rt(n,[\"fill\",\"stroke\"]))},\"bpmn:Group\":function(e,t,n={}){return n=rt(n,[\"fill\",\"stroke\",\"width\",\"height\"]),g(e,t.width,t.height,10,{stroke:xe(t,p,n.stroke),strokeWidth:1.5,strokeDasharray:\"10, 6, 0, 6\",fill:\"none\",pointerEvents:\"none\",width:Ee(t,n),height:_e(t,n)})},\"bpmn:InclusiveGateway\":function(e,t,n={}){var i=ae(e,t,n=rt(n,[\"fill\",\"stroke\"]));return y(e,t.width,t.height,.24*t.height,{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:2.5}),i},\"bpmn:IntermediateEvent\":function(e,t,n={}){var{renderIcon:i=!0}=n;n=rt(n,[\"fill\",\"stroke\"]);var r=oe(e,t,{...n,strokeWidth:1.5});return y(e,t.width,t.height,3,{fill:\"none\",stroke:xe(t,p,n.stroke),strokeWidth:1.5}),i&&U(t,e,n),r},\"bpmn:IntermediateCatchEvent\":S(\"bpmn:IntermediateEvent\"),\"bpmn:IntermediateThrowEvent\":S(\"bpmn:IntermediateEvent\"),\"bpmn:Lane\":function(e,t,n={}){return n=rt(n,[\"fill\",\"stroke\",\"width\",\"height\"]),le(e,t,{...n,fillOpacity:.25})},\"bpmn:ManualTask\":function(e,t,n={}){var r=ce(e,t,n=rt(n,[\"fill\",\"stroke\"]));return w(e,i.getScaledPath(\"TASK_TYPE_MANUAL\",{abspos:{x:17,y:15}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:.5}),r},\"bpmn:MessageFlow\":function(e,t,n={}){n=rt(n,[\"fill\",\"stroke\"]);var r=k(t),o=C(t),a=ve(t,l,n.fill),s=xe(t,p,n.stroke),c=x(e,t.waypoints,{markerEnd:d(e,\"messageflow-end\",a,s),markerStart:d(e,\"messageflow-start\",a,s),stroke:s,strokeDasharray:\"10, 11\",strokeWidth:1.5});if(r.get(\"messageRef\")){var u=c.getPointAtLength(c.getTotalLength()/2),h=i.getScaledPath(\"MESSAGE_FLOW_MARKER\",{abspos:{x:u.x,y:u.y}}),f={strokeWidth:1};\"initiating\"===o.get(\"messageVisibleKind\")?(f.fill=a,f.stroke=s):(f.fill=s,f.stroke=a);var m=w(e,h,f),y=Q(e,r.get(\"messageRef\").get(\"name\"),{align:\"center-top\",fitBox:!0,style:{fill:s}}),g=m.getBBox(),v=y.getBBox();Ze(y,u.x-v.width/2,u.y+g.height/2+10,0)}return c},\"bpmn:ParallelGateway\":function(e,t,n={}){var r=ae(e,t,n=rt(n,[\"fill\",\"stroke\"]));return w(e,i.getScaledPath(\"GATEWAY_PARALLEL\",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{fill:xe(t,p,n.stroke),stroke:xe(t,p,n.stroke),strokeWidth:1}),r},\"bpmn:Participant\":function(e,t,n={}){var i=le(e,t,n=rt(n,[\"fill\",\"stroke\",\"width\",\"height\"])),r=M(t),o=P(t),a=k(t),s=a.get(\"name\");if(r){v(e,o?[{x:30,y:0},{x:30,y:_e(t,n)}]:[{x:0,y:30},{x:Ee(t,n),y:30}],{stroke:xe(t,p,n.stroke),strokeWidth:1.5}),te(e,s,t,n)}else{var l=be(t,n);o||(l.height=Ee(t,n),l.width=_e(t,n));var u=Q(e,s,{box:l,align:\"center-middle\",style:{fill:we(t,c,p,n.stroke)}});if(!o)Ze(u,0,-(-1*_e(t,n)),270)}return a.get(\"participantMultiplicity\")&&X(\"ParticipantMultiplicityMarker\",e,t,n),i},\"bpmn:ReceiveTask\":function(e,t,n={}){n=rt(n,[\"fill\",\"stroke\"]);var r,o=k(t),a=ce(e,t,n);return o.get(\"instantiate\")?(y(e,28,28,4.4,{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1}),r=i.getScaledPath(\"TASK_TYPE_INSTANTIATING_SEND\",{abspos:{x:7.77,y:9.52}})):r=i.getScaledPath(\"TASK_TYPE_SEND\",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),w(e,r,{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1}),a},\"bpmn:ScriptTask\":function(e,t,n={}){var r=ce(e,t,n=rt(n,[\"fill\",\"stroke\"]));return w(e,i.getScaledPath(\"TASK_TYPE_SCRIPT\",{abspos:{x:15,y:20}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1}),r},\"bpmn:SendTask\":function(e,t,n={}){var r=ce(e,t,n=rt(n,[\"fill\",\"stroke\"]));return w(e,i.getScaledPath(\"TASK_TYPE_SEND\",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{fill:xe(t,p,n.stroke),stroke:ve(t,l,n.fill),strokeWidth:1}),r},\"bpmn:SequenceFlow\":function(e,t,n={}){n=rt(n,[\"fill\",\"stroke\"]);var i=ve(t,l,n.fill),r=xe(t,p,n.stroke),o=x(e,t.waypoints,{markerEnd:d(e,\"sequenceflow-end\",i,r),stroke:r}),a=k(t),{source:s}=t;if(s){var c=k(s);a.get(\"conditionExpression\")&&R(c,\"bpmn:Activity\")&&W(o,{markerStart:d(e,\"conditional-flow-marker\",i,r)}),c.get(\"default\")&&(R(c,\"bpmn:Gateway\")||R(c,\"bpmn:Activity\"))&&c.get(\"default\")===a&&W(o,{markerStart:d(e,\"conditional-default-flow-marker\",i,r)})}return o},\"bpmn:ServiceTask\":function(e,t,n={}){var r=ce(e,t,n=rt(n,[\"fill\",\"stroke\"]));return y(e,10,10,{fill:ve(t,l,n.fill),stroke:\"none\",transform:\"translate(6, 6)\"}),w(e,i.getScaledPath(\"TASK_TYPE_SERVICE\",{abspos:{x:12,y:18}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1}),y(e,10,10,{fill:ve(t,l,n.fill),stroke:\"none\",transform:\"translate(11, 10)\"}),w(e,i.getScaledPath(\"TASK_TYPE_SERVICE\",{abspos:{x:17,y:22}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:1}),r},\"bpmn:StartEvent\":function(e,t,n={}){var{renderIcon:i=!0}=n;n=rt(n,[\"fill\",\"stroke\"]),k(t).get(\"isInterrupting\")||(n={...n,strokeDasharray:\"6\"});var r=oe(e,t,n);return i&&U(t,e,n),r},\"bpmn:SubProcess\":function(e,t,n={}){return pe(e,t,n=M(t)?rt(n,[\"fill\",\"stroke\",\"width\",\"height\"]):rt(n,[\"fill\",\"stroke\"]))},\"bpmn:Task\":function(e,t,n={}){return ce(e,t,n=rt(n,[\"fill\",\"stroke\"]))},\"bpmn:TextAnnotation\":function(e,t,n={}){n=rt(n,[\"fill\",\"stroke\",\"width\",\"height\"]);var{width:r,height:o}=be(t,n),a=g(e,r,o,0,0,{fill:\"none\",stroke:\"none\"});return w(e,i.getScaledPath(\"TEXT_ANNOTATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:r,containerHeight:o,position:{mx:0,my:0}}),{stroke:xe(t,p,n.stroke)}),Q(e,k(t).get(\"text\")||\"\",{align:\"left-top\",box:be(t,n),padding:7,style:{fill:we(t,c,p,n.stroke)}}),a},\"bpmn:Transaction\":function(e,t,i={}){i=M(t)?rt(i,[\"fill\",\"stroke\",\"width\",\"height\"]):rt(i,[\"fill\",\"stroke\"]);var r=pe(e,t,{strokeWidth:1.5,...i}),o=n.style([\"no-fill\",\"no-events\"],{stroke:xe(t,p,i.stroke),strokeWidth:1.5});return M(t)||(i={}),g(e,Ee(t,i),_e(t,i),7,3,o),r},\"bpmn:UserTask\":function(e,t,n={}){var r=ce(e,t,n=rt(n,[\"fill\",\"stroke\"]));return w(e,i.getScaledPath(\"TASK_TYPE_USER_1\",{abspos:{x:15,y:12}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:.5}),w(e,i.getScaledPath(\"TASK_TYPE_USER_2\",{abspos:{x:15,y:12}}),{fill:ve(t,l,n.fill),stroke:xe(t,p,n.stroke),strokeWidth:.5}),w(e,i.getScaledPath(\"TASK_TYPE_USER_3\",{abspos:{x:15,y:12}}),{fill:xe(t,p,n.stroke),stroke:xe(t,p,n.stroke),strokeWidth:.5}),r},label:function(e,t,n={}){return function(e,t,n={}){var i={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return Q(e,L(t),{box:i,fitBox:!0,style:E({},o.getExternalStyle(),{fill:we(t,c,p,n.stroke)})})}(e,t,n)}};this._drawPath=w,this._renderer=_}function rt(e,t=[]){return t.reduce(((t,n)=>(e[n]&&(t[n]=e[n]),t)),{})}e(it,A),it.$inject=[\"config.bpmnRenderer\",\"eventBus\",\"styles\",\"pathMap\",\"canvas\",\"textRenderer\"],it.prototype.canRender=function(e){return R(e,\"bpmn:BaseElement\")},it.prototype.drawShape=function(e,t,n={}){var{type:i}=t;return this._renderer(i)(e,t,n)},it.prototype.drawConnection=function(e,t,n={}){var{type:i}=t;return this._renderer(i)(e,t,n)},it.prototype.getShapePath=function(e){return R(e,\"bpmn:Event\")?function(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2;return le([[\"M\",t,n],[\"m\",0,-i],[\"a\",i,i,0,1,1,0,2*i],[\"a\",i,i,0,1,1,0,-2*i],[\"z\"]])}(e):R(e,\"bpmn:Activity\")?function(e,t){var n=e.x,i=e.y,r=e.width,o=e.height;return le([[\"M\",n+t,i],[\"l\",r-2*t,0],[\"a\",t,t,0,0,1,t,t],[\"l\",0,o-2*t],[\"a\",t,t,0,0,1,-t,t],[\"l\",2*t-r,0],[\"a\",t,t,0,0,1,-t,-t],[\"l\",0,2*t-o],[\"a\",t,t,0,0,1,t,-t],[\"z\"]])}(e,10):R(e,\"bpmn:Gateway\")?function(e){var t=e.width/2,n=e.height/2;return le([[\"M\",e.x+t,e.y],[\"l\",t,n],[\"l\",-t,n],[\"l\",-t,-n],[\"z\"]])}(e):function(e){var t=e.x,n=e.y,i=e.width;return le([[\"M\",t,n],[\"l\",i,0],[\"l\",0,e.height],[\"l\",-i,0],[\"z\"]])}(e)};var ot=0,at={width:150,height:50};function st(e,t){var n;t.textContent=e;try{var i,r=\"\"===e;return t.textContent=r?\"dummy\":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch(e){return{width:0,height:0}}}function lt(e,t,n){for(var i,r=e.shift(),o=r;;){if((i=st(o,n)).width=o?i.width:0,\" \"===o||\"\"===o||i.width<Math.round(t)||o.length<2)return pt(e,o,r,i);o=ut(o,i.width,t)}}function pt(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var ct=\"\";function ut(e,t,n){var i=Math.max(e.length*(n/t),1),r=function(e,t){var n,i=e.split(/(\\s|-|\\u00AD)/g),r=[],o=0;if(i.length>1)for(;n=i.shift();){if(!(n.length+o<t)){\"-\"!==n&&n!==ct||r.pop();break}r.push(n),o+=n.length}var a=r[r.length-1];return a&&a===ct&&(r[r.length-1]=\"-\"),r.join(\"\")}(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function ht(e){this._config=E({},{size:at,padding:ot,style:{},align:\"center-top\"},e||{})}ht.prototype.createText=function(e,t){return this.layoutText(e,t).element},ht.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},ht.prototype.layoutText=function(e,t){var n=E({},this._config.size,t.box),i=E({},this._config.style,t.style),r=function(e){var t=e.split(\"-\");return{horizontal:t[0]||\"center\",vertical:t[1]||\"top\"}}(t.align||this._config.align),o=function(e){return a(e)?E({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}(void 0!==t.padding?t.padding:this._config.padding),s=t.fitBox||!1,l=function(e){if(\"fontSize\"in e&&\"lineHeight\"in e)return e.lineHeight*parseInt(e.fontSize,10)}(i),p=e.split(/\\u00AD?\\r?\\n/),c=[],u=n.width-o.left-o.right,h=q(\"text\");for(W(h,{x:0,y:0}),W(h,i),I(function(){var e=document.getElementById(\"helper-svg\");return e||(W(e=q(\"svg\"),{id:\"helper-svg\"}),Oe(e,{visibility:\"hidden\",position:\"fixed\",width:0,height:0}),document.body.appendChild(e)),e}(),h);p.length;)c.push(lt(p,u,h));\"middle\"===r.vertical&&(o.top=o.bottom=0);var d=m(c,(function(e,t,n){return e+(l||t.height)}),0)+o.top+o.bottom,y=m(c,(function(e,t,n){return t.width>e?t.width:e}),0),g=o.top;\"middle\"===r.vertical&&(g+=(n.height-d)/2),g-=(l||c[0].height)/4;var v=q(\"text\");return W(v,i),f(c,(function(e){var t;switch(g+=l||e.height,r.horizontal){case\"left\":t=o.left;break;case\"right\":t=(s?y:u)-o.right-e.width;break;default:t=Math.max(((s?y:u)-e.width)/2+o.left,0)}var n=q(\"tspan\");W(n,{x:t,y:g}),n.textContent=e.text,I(v,n)})),oe(h),{dimensions:{width:y,height:d},element:v}};function ft(e){var t=E({fontFamily:\"Arial, sans-serif\",fontSize:12,fontWeight:\"normal\",lineHeight:1.2},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=E({},t,{fontSize:n},e&&e.externalStyle||{}),r=new ht({style:t});this.getExternalLabelBounds=function(e,t){var n=r.getDimensions(t,{box:{width:90,height:30},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=r.getDimensions(n,{box:e,style:t,align:\"left-top\",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(i.height))}},this.createText=function(e,t){return r.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}ft.$inject=[\"config.textRenderer\"];var mt=/\\{([^{}]+)\\}/g,dt=/(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|\")(.+?)\\2\\])(\\(\\))?/g;var yt={__init__:[\"bpmnRenderer\"],bpmnRenderer:[\"type\",it],textRenderer:[\"type\",ft],pathMap:[\"type\",function(){this.pathMap={EVENT_MESSAGE:{d:\"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}\",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:\"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z\",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:\"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z\",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:\"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 \",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:\"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z\",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:\"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z\",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:\"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z\",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:\"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z\",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:\"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} \",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:\"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} \",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:\"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z\",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:\"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z\",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:\"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z\",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:\"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z\",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:\"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z\",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:\"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z\",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:\"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0\",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:\"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10\",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:\"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z\",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:\"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0\",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:\"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0\",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:\"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0\",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:\"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10\",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:\"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0\",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:\"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z\",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:\"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902\",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:\"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z\",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:\"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}\",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:\"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0\",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:\"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5\"},TASK_TYPE_USER_2:{d:\"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 \"},TASK_TYPE_USER_3:{d:\"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z\"},TASK_TYPE_MANUAL:{d:\"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z\"},TASK_TYPE_INSTANTIATING_SEND:{d:\"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6\"},TASK_TYPE_SERVICE:{d:\"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z\"},TASK_TYPE_SERVICE_FILL:{d:\"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z\"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:\"m {mx},{my} 0,4 20,0 0,-4 z\"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:\"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8\"},MESSAGE_FLOW_MARKER:{d:\"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6\"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var o={};if(t.position){for(var a=t.containerHeight/r.height*t.yScaleFactor,s=t.containerWidth/r.width*t.xScaleFactor,l=0;l<r.heightElements.length;l++)o[\"y\"+l]=r.heightElements[l]*a;for(var p=0;p<r.widthElements.length;p++)o[\"x\"+p]=r.widthElements[p]*s}var c,u,h=(c=r.d,u={mx:n,my:i,e:o},String(c).replace(mt,(function(e,t){return function(e,t,n){var i=n;return t.replace(dt,(function(e,t,n,r,o){t=t||r,i&&(t in i&&(i=i[t]),\"function\"==typeof i&&o&&(i=i()))})),i=(null==i||i==n?e:i)+\"\"}(e,t,u)})));return h}}]};var gt={translate:[\"value\",function(e,t){return t=t||{},e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||\"{\"+n+\"}\"}))}]};function vt(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function xt(e){return t={x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2},{x:Math.round(t.x),y:Math.round(t.y)};var t}function wt(e){for(var t=e.waypoints,n=t.reduce((function(e,n,i){var r,o,a=t[i-1];if(a){var s=e[e.length-1],l=s&&s.endLength||0,p=(r=a,o=n,Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)));e.push({start:a,end:n,startLength:l,endLength:l+p,length:p})}return e}),[]),i=n.reduce((function(e,t){return e+t.length}),0)/2,r=0,o=n[r];o.endLength<i;)o=n[++r];var a=(i-o.startLength)/o.length;return{x:o.start.x+(o.end.x-o.start.x)*a,y:o.start.y+(o.end.y-o.start.y)*a}}function bt(e){return a(t=e)&&c(t,\"waypoints\")?wt(e):xt(e);var t}function Et(e){return e?\"<\"+e.$type+(e.id?' id=\"'+e.id:\"\")+'\" />':\"<null>\"}function _t(e,t,n){return E({id:e.id,type:e.$type,businessObject:e,di:t},n)}function At(e,t,n){var i=e.waypoint;return!i||i.length<2?[bt(t),bt(n)]:i.map((function(e){return{x:e.x,y:e.y}}))}function Rt(e,t,n){return new Error(`element ${Et(t)} referenced by ${Et(e)}#${n} not yet drawn`)}function St(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}St.$inject=[\"eventBus\",\"canvas\",\"elementFactory\",\"elementRegistry\",\"textRenderer\"],St.prototype.add=function(e,t,n){var i,r,o,a,s,l,p;if(R(t,\"bpmndi:BPMNPlane\")){var c=R(e,\"bpmn:SubProcess\")?{id:e.id+\"_plane\"}:{};i=this._elementFactory.createRoot(_t(e,t,c)),this._canvas.addRootElement(i)}else if(R(t,\"bpmndi:BPMNShape\")){var u=!M(e,t),h=function(e){return R(e,\"bpmn:Group\")}(e);r=n&&(n.hidden||n.collapsed);var f=t.bounds;i=this._elementFactory.createShape(_t(e,t,{collapsed:u,hidden:r,x:Math.round(f.x),y:Math.round(f.y),width:Math.round(f.width),height:Math.round(f.height),isFrame:h})),R(e,\"bpmn:BoundaryEvent\")&&this._attachBoundary(e,i),R(e,\"bpmn:Lane\")&&(o=0),R(e,\"bpmn:DataStoreReference\")&&(a=n,s=bt(f),l=s.x,p=s.y,l>=a.x&&l<=a.x+a.width&&p>=a.y&&p<=a.y+a.height||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else{if(!R(t,\"bpmndi:BPMNEdge\"))throw new Error(`unknown di ${Et(t)} for element ${Et(e)}`);var m=this._getSource(e),d=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(_t(e,t,{hidden:r,source:m,target:d,waypoints:At(t,m,d)})),R(e,\"bpmn:DataAssociation\")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}return function(e){return R(e,\"bpmn:Event\")||R(e,\"bpmn:Gateway\")||R(e,\"bpmn:DataStoreReference\")||R(e,\"bpmn:DataObjectReference\")||R(e,\"bpmn:DataInput\")||R(e,\"bpmn:DataOutput\")||R(e,\"bpmn:SequenceFlow\")||R(e,\"bpmn:MessageFlow\")||R(e,\"bpmn:Group\")}(e)&&L(i)&&this.addLabel(e,t,i),this._eventBus.fire(\"bpmnElement.added\",{element:i}),i},St.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${Et(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw Rt(e,n,\"attachedToRef\");t.host=i,r||(i.attachers=r=[]),-1===r.indexOf(t)&&r.push(t)},St.prototype.addLabel=function(e,t,n){var i,r,o;return i=B(t,n),(r=L(n))&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel(_t(e,t,{id:e.id+\"_label\",labelTarget:n,type:\"label\",hidden:n.hidden||!L(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)},St.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+\"Ref\"],\"source\"===t&&\"bpmn:DataInputAssociation\"===r&&(i=i&&i[0]),(\"source\"===t&&\"bpmn:DataOutputAssociation\"===r||\"target\"===t&&\"bpmn:DataInputAssociation\"===r)&&(i=e.$parent),n=i&&this._getElement(i))return n;throw i?Rt(e,i,t+\"Ref\"):new Error(`${Et(e)}#${t} Ref not specified`)},St.prototype._getSource=function(e){return this._getConnectedElement(e,\"source\")},St.prototype._getTarget=function(e){return this._getConnectedElement(e,\"target\")},St.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var kt={__depends__:[yt,{__depends__:[gt],bpmnImporter:[\"type\",St]}]};function Ct(e,t){var n,i,r,a;return t=!!t,o(e)||(e=[e]),f(e,(function(e){var o=e;e.waypoints&&!t&&(o=Ct(e.waypoints,!0));var s=o.x,l=o.y,p=o.height||0,c=o.width||0;(s<n||void 0===n)&&(n=s),(l<i||void 0===i)&&(i=l),(s+c>r||void 0===r)&&(r=s+c),(l+p>a||void 0===a)&&(a=l+p)})),{x:n,y:i,height:a-i,width:r-n}}function Mt(e){return\"waypoints\"in e?\"connection\":\"x\"in e?\"shape\":\"root\"}function Pt(e){return!(!e||!e.isFrame)}function Ot(e){this._counter=0,this._prefix=(e?e+\"-\":\"\")+Math.floor(1e9*Math.random())+\"-\"}Ot.prototype.next=function(){return this._prefix+ ++this._counter};var Tt=new Ot(\"ov\");function Nt(e,t,n,i){var r,o;this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=Tt,this._overlayDefaults=E({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),Oe(o=qe('<div class=\"djs-overlay-container\" />'),{position:\"absolute\",width:0,height:0}),r.insertBefore(o,r.firstChild),o),this._init()}function Dt(e,t,n){Oe(e,{left:t+\"px\",top:n+\"px\"})}function Bt(e,t){e.style.display=!1===t?\"none\":\"\"}function Lt(e,t){e.style[\"transform-origin\"]=\"top left\",[\"\",\"-ms-\",\"-webkit-\"].forEach((function(n){e.style[n+\"transform\"]=t}))}Nt.$inject=[\"config.overlays\",\"eventBus\",\"canvas\",\"elementRegistry\"],Nt.prototype.get=function(e){if(p(e)&&(e={id:e}),p(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?h(t.overlays,g({type:e.type})):t.overlays.slice():[]}return e.type?h(this._overlays,g({type:e.type})):e.id?this._overlays[e.id]:null},Nt.prototype.add=function(e,t,n){if(a(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error(\"must specifiy overlay position\");if(!n.html)throw new Error(\"must specifiy overlay html\");if(!e)throw new Error(\"invalid element specified\");var i=this._ids.next();return n=E({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},Nt.prototype.remove=function(e){var t=this.get(e)||[];o(t)||(t=[t]);var n=this;f(t,(function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(Xe(e.html),Xe(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var i=t.overlays.indexOf(e);-1!==i&&t.overlays.splice(i,1)}}))},Nt.prototype.isShown=function(){return\"none\"!==this._overlayRoot.style.display},Nt.prototype.show=function(){Bt(this._overlayRoot)},Nt.prototype.hide=function(){Bt(this._overlayRoot,!1)},Nt.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Be(this._overlayRoot)},Nt.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=Ct(t);i=o.x,r=o.y}Dt(n,i,r),function(e,t,n){2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):e.setAttribute(t,n)}(e.html,\"data-container-id\",t.id)},Nt.prototype._updateOverlay=function(e){var t,n,i=e.position,r=e.htmlContainer,o=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=o.waypoints?Ct(o).width:o.width,a=-1*i.right+t);void 0!==i.bottom&&(n=o.waypoints?Ct(o).height:o.height,s=-1*i.bottom+n);Dt(r,a||0,s||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},Nt.prototype._createOverlayContainer=function(e){var t=qe('<div class=\"djs-overlays\" />');Oe(t,{position:\"absolute\"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},Nt.prototype._updateRoot=function(e){var t=e.scale||1,n=\"matrix(\"+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(\",\")+\")\";Lt(this._overlayRoot,n)},Nt.prototype._getOverlayContainer=function(e,t){var n=u(this._overlayContainers,(function(t){return t.element===e}));return n||t?n:this._createOverlayContainer(e)},Nt.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),p(o)&&(o=qe(o)),n=this._getOverlayContainer(r),Oe(t=qe('<div class=\"djs-overlay\" data-overlay-id=\"'+i+'\">'),{position:\"absolute\"}),t.appendChild(o),e.type&&Ne(t).add(\"djs-overlay-\"+e.type),Bt(t,this._canvas.findRoot(r)===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},Nt.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),o=n&&n.minZoom,a=n&&n.maxZoom,s=e.htmlContainer,l=!0;(i!==this._canvas.getRootElement()||n&&(r(o)&&o>t.scale||r(a)&&a<t.scale))&&(l=!1),Bt(s,l),this._updateOverlayScale(e,t)},Nt.prototype._updateOverlayScale=function(e,t){var n,i,o,a=e.scale,s=e.htmlContainer,l=\"\";!0!==a&&(!1===a?(n=1,i=1):(n=a.min,i=a.max),r(n)&&t.scale<n&&(o=(1/t.scale||1)*n),r(i)&&t.scale>i&&(o=(1/t.scale||1)*i)),r(o)&&(l=\"scale(\"+o+\",\"+o+\")\"),Lt(s,l)},Nt.prototype._updateOverlaysVisibilty=function(e){var t=this;f(this._overlays,(function(n){t._updateOverlayVisibilty(n,e)}))},Nt.prototype._init=function(){var e=this._eventBus,t=this;e.on(\"canvas.viewbox.changing\",(function(e){t.hide()})),e.on(\"canvas.viewbox.changed\",(function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()})),e.on([\"shape.remove\",\"connection.remove\"],(function(e){var n=e.element;f(t.get({element:n}),(function(e){t.remove(e.id)}));var i=t._getOverlayContainer(n);if(i){Xe(i.html);var r=t._overlayContainers.indexOf(i);-1!==r&&t._overlayContainers.splice(r,1)}})),e.on(\"element.changed\",500,(function(e){var n=e.element,i=t._getOverlayContainer(n,!0);i&&(f(i.overlays,(function(e){t._updateOverlay(e)})),t._updateOverlayContainer(i))})),e.on(\"element.marker.update\",(function(e){var n=t._getOverlayContainer(e.element,!0);n&&Ne(n.html)[e.add?\"add\":\"remove\"](e.marker)})),e.on(\"root.set\",(function(){t._updateOverlaysVisibilty(t._canvas.viewbox())})),e.on(\"diagram.clear\",this.clear,this)};var It={__init__:[\"overlays\"],overlays:[\"type\",Nt]};function jt(e,t,n,i){e.on(\"element.changed\",(function(i){var r=i.element;(r.parent||r===t.getRootElement())&&(i.gfx=n.getGraphics(r)),i.gfx&&e.fire(Mt(r)+\".changed\",i)})),e.on(\"elements.changed\",(function(t){var n=t.elements;n.forEach((function(t){e.fire(\"element.changed\",{element:t})})),i.updateContainments(n)})),e.on(\"shape.changed\",(function(e){i.update(\"shape\",e.element,e.gfx)})),e.on(\"connection.changed\",(function(e){i.update(\"connection\",e.element,e.gfx)}))}jt.$inject=[\"eventBus\",\"canvas\",\"elementRegistry\",\"graphicsFactory\"];var Ft={__init__:[\"changeSupport\"],changeSupport:[\"type\",jt]};function Vt(e){this._eventBus=e}function Wt(e){return function(t,n,i,r,o){(l(t)||s(t))&&(o=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,o)}}function $t(e,t){t.invoke(Vt,this),this.executed((function(t){var n=t.context;n.rootElement?e.setRootElement(n.rootElement):n.rootElement=e.getRootElement()})),this.revert((function(t){var n=t.context;n.rootElement&&e.setRootElement(n.rootElement)}))}Vt.$inject=[\"eventBus\"],Vt.prototype.on=function(e,t,n,i,r,p){if((l(t)||s(t))&&(p=r,r=i,i=n,n=t,t=null),l(n)&&(p=r,r=i,i=n,n=1e3),a(r)&&(p=r,r=!1),!l(i))throw new Error(\"handlerFn must be a function\");o(e)||(e=[e]);var c=this._eventBus;f(e,(function(e){var o=[\"commandStack\",e,t].filter((function(e){return e})).join(\".\");c.on(o,n,r?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(i,p):i,p)}))},Vt.prototype.canExecute=Wt(\"canExecute\"),Vt.prototype.preExecute=Wt(\"preExecute\"),Vt.prototype.preExecuted=Wt(\"preExecuted\"),Vt.prototype.execute=Wt(\"execute\"),Vt.prototype.executed=Wt(\"executed\"),Vt.prototype.postExecute=Wt(\"postExecute\"),Vt.prototype.postExecuted=Wt(\"postExecuted\"),Vt.prototype.revert=Wt(\"revert\"),Vt.prototype.reverted=Wt(\"reverted\"),e($t,Vt),$t.$inject=[\"canvas\",\"injector\"];var zt={__init__:[\"rootElementsBehavior\"],rootElementsBehavior:[\"type\",$t]},Gt={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"};var Ht=\"_plane\";function Kt(e){var t=e.id;return R(e,\"bpmn:SubProcess\")?function(e){return e+Ht}(t):t}function Ut(e,t,n){var i=qe('<ul class=\"bjs-breadcrumbs\"></ul>'),r=n.getContainer(),o=Ne(r);r.appendChild(i);var a=[];function s(e){e&&(a=function(e){for(var t=k(e),n=[],i=t;i;i=i.$parent)(R(i,\"bpmn:SubProcess\")||R(i,\"bpmn:Process\"))&&n.push(i);return n.reverse()}(e));var r=a.flatMap((function(e){var i=n.findRoot(Kt(e))||n.findRoot(e.id);if(!i&&R(e,\"bpmn:Process\")){var r=t.find((function(t){var n=k(t);return n&&n.get(\"processRef\")===e}));i=r&&n.findRoot(r.id)}if(!i)return[];var o,a=(o=\"\"+(o=e.name||e.id))&&o.replace(/[&<>\"']/g,(function(e){return Gt[e]})),s=qe('<li><span class=\"bjs-crumb\"><a title=\"'+a+'\">'+a+\"</a></span></li>\");return s.addEventListener(\"click\",(function(){n.setRootElement(i)})),s}));i.innerHTML=\"\";var s=r.length>1;o.toggle(\"bjs-breadcrumbs-shown\",s),r.forEach((function(e){i.appendChild(e)}))}e.on(\"element.changed\",(function(e){var t=k(e.element);u(a,(function(e){return e===t}))&&s()})),e.on(\"root.set\",(function(e){s(e.element)}))}function qt(e,t){var n=null,i=new Yt;e.on(\"root.set\",(function(e){var r=e.element,o=t.viewbox(),a=i.get(r);if(i.set(n,{x:o.x,y:o.y,zoom:o.scale}),n=r,R(r,\"bpmn:SubProcess\")||a){a=a||{x:0,y:0,zoom:1};var s=(o.x-a.x)*o.scale,l=(o.y-a.y)*o.scale;0===s&&0===l||t.scroll({dx:s,dy:l}),a.zoom!==o.scale&&t.zoom(a.zoom,{x:0,y:0})}})),e.on(\"diagram.clear\",(function(){i.clear(),n=null}))}function Yt(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}-1!==t&&this._entries.splice(t,1)}}Ut.$inject=[\"eventBus\",\"elementRegistry\",\"canvas\"],qt.$inject=[\"eventBus\",\"canvas\"];var Xt=180,Zt=160;function Jt(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on(\"import.render.start\",1500,(function(e,t){n._handleImport(t.definitions)}))}function Qt(e){return R(e,\"bpmndi:BPMNDiagram\")?e:Qt(e.$parent)}Jt.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach((function(e){e.plane&&e.plane.bpmnElement&&(t._processToDiagramMap[e.plane.bpmnElement.id]=e)})),e.diagrams.filter((e=>e.plane)).flatMap((e=>t._createNewDiagrams(e.plane))).forEach((function(e){t._movePlaneElementsToOrigin(e.plane)}))}},Jt.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get(\"planeElement\").forEach((function(t){var r=t.bpmnElement;if(r){var o=r.$parent;R(r,\"bpmn:SubProcess\")&&!t.isExpanded&&n.push(r),function(e,t){var n=e.$parent;if(!R(n,\"bpmn:SubProcess\")||n===t.bpmnElement)return!1;if(S(e,[\"bpmn:DataInputAssociation\",\"bpmn:DataOutputAssociation\"]))return!1;return!0}(r,e)&&i.push({diElement:t,parent:o})}}));var r=[];return n.forEach((function(e){if(!t._processToDiagramMap[e.id]){var n=t._createDiagram(e);t._processToDiagramMap[e.id]=n,r.push(n)}})),i.forEach((function(e){for(var i=e.diElement,r=e.parent;r&&-1===n.indexOf(r);)r=r.$parent;if(r){var o=t._processToDiagramMap[r.id];t._moveToDiPlane(i,o.plane)}})),r},Jt.prototype._movePlaneElementsToOrigin=function(e){var t=e.get(\"planeElement\"),n=function(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach((function(e){if(e.bounds){var n=vt(e.bounds);t.top=Math.min(n.top,t.top),t.left=Math.min(n.left,t.left)}})),function(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}(t)}(e),i=n.x-Xt,r=n.y-Zt;t.forEach((function(e){e.waypoint?e.waypoint.forEach((function(e){e.x=e.x-i,e.y=e.y-r})):e.bounds&&(e.bounds.x=e.bounds.x-i,e.bounds.y=e.bounds.y-r)}))},Jt.prototype._moveToDiPlane=function(e,t){var n=Qt(e).plane.get(\"planeElement\");n.splice(n.indexOf(e),1),t.get(\"planeElement\").push(e)},Jt.prototype._createDiagram=function(e){var t=this._moddle.create(\"bpmndi:BPMNPlane\",{bpmnElement:e}),n=this._moddle.create(\"bpmndi:BPMNDiagram\",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n},Jt.$inject=[\"eventBus\",\"moddle\"];var en=250;function tn(e,t,n,i,r){Vt.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var o=this;this.executed(\"shape.toggleCollapse\",en,(function(e){var t=e.shape;o._canDrillDown(t)?o._addOverlay(t):o._removeOverlay(t)}),!0),this.reverted(\"shape.toggleCollapse\",en,(function(e){var t=e.shape;o._canDrillDown(t)?o._addOverlay(t):o._removeOverlay(t)}),!0),this.executed([\"shape.create\",\"shape.move\",\"shape.delete\"],en,(function(e){var t=e.oldParent,n=e.newParent||e.parent,i=e.shape;o._canDrillDown(i)&&o._addOverlay(i),o._updateDrilldownOverlay(t),o._updateDrilldownOverlay(n),o._updateDrilldownOverlay(i)}),!0),this.reverted([\"shape.create\",\"shape.move\",\"shape.delete\"],en,(function(e){var t=e.oldParent,n=e.newParent||e.parent,i=e.shape;o._canDrillDown(i)&&o._addOverlay(i),o._updateDrilldownOverlay(t),o._updateDrilldownOverlay(n),o._updateDrilldownOverlay(i)}),!0),t.on(\"import.render.complete\",(function(){n.filter((function(e){return o._canDrillDown(e)})).map((function(e){o._addOverlay(e)}))}))}e(tn,Vt),tn.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}},tn.prototype._canDrillDown=function(e){var t=this._canvas;return R(e,\"bpmn:SubProcess\")&&t.findRoot(Kt(e))},tn.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=k(e),i=t.get({element:n.id,type:\"drilldown\"})[0];if(i){var r=n&&n.get(\"flowElements\")&&n.get(\"flowElements\").length;Ne(i.html).toggle(\"bjs-drilldown-empty\",!r)}},tn.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=k(e);n.get({element:e,type:\"drilldown\"}).length&&this._removeOverlay(e);var r=qe('<button type=\"button\" class=\"bjs-drilldown\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z\"/></svg></button>'),o=i.get(\"name\")||i.get(\"id\"),a=this._translate(\"Open {element}\",{element:o});r.setAttribute(\"title\",a),r.addEventListener(\"click\",(function(){t.setRootElement(t.findRoot(Kt(e)))})),n.add(e,\"drilldown\",{position:{bottom:-7,right:-8},html:r}),this._updateOverlayVisibility(e)},tn.prototype._removeOverlay=function(e){this._overlays.remove({element:e,type:\"drilldown\"})},tn.$inject=[\"canvas\",\"eventBus\",\"elementRegistry\",\"overlays\",\"translate\"];var nn={__depends__:[It,Ft,zt],__init__:[\"drilldownBreadcrumbs\",\"drilldownOverlayBehavior\",\"drilldownCentering\",\"subprocessCompatibility\"],drilldownBreadcrumbs:[\"type\",Ut],drilldownCentering:[\"type\",qt],drilldownOverlayBehavior:[\"type\",tn],subprocessCompatibility:[\"type\",Jt]};function rn(e,t){this._eventBus=e,this.offset=5;var n=t.cls(\"djs-outline\",[\"no-fill\"]),i=this;function r(e){var t=q(\"rect\");return W(t,E({x:0,y:0,rx:4,width:100,height:100},n)),t}e.on([\"shape.added\",\"shape.changed\"],500,(function(e){var t=e.element,n=e.gfx,o=Ye(\".djs-outline\",n);o||I(n,o=i.getOutline(t)||r()),i.updateShapeOutline(o,t)})),e.on([\"connection.added\",\"connection.changed\"],(function(e){var t=e.element,n=e.gfx,o=Ye(\".djs-outline\",n);o||I(n,o=r()),i.updateConnectionOutline(o,t)}))}rn.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&f(i,(function(i){n=n||i.updateOutline(t,e)})),n||W(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},rn.prototype.updateConnectionOutline=function(e,t){var n=Ct(t);W(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},rn.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on(\"outline.getProviders\",e,(function(e){e.providers.push(t)}))},rn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:\"outline.getProviders\",providers:[]});return this._eventBus.fire(e),e.providers},rn.prototype.getOutline=function(e){var t;return f(this._getProviders(),(function(n){l(n.getOutline)&&(t=t||n.getOutline(e))})),t},rn.$inject=[\"eventBus\",\"styles\",\"elementRegistry\"];var on={__init__:[\"outline\"],outline:[\"type\",rn]};const an={width:36,height:50},sn={width:50,height:50};function ln(e,t,n){return q(\"path\",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}function pn(e,t){this._styles=t,e.registerProvider(this)}function cn(e,t){var n;return\"bpmn:DataObjectReference\"===t?n=an:\"bpmn:DataStoreReference\"===t&&(n=sn),e.width===n.width&&e.height===n.height}pn.$inject=[\"outline\",\"styles\"],pn.prototype.getOutline=function(e){const t=this._styles.cls(\"djs-outline\",[\"no-fill\"]);var n;if(!O(e))return R(e,\"bpmn:Gateway\")?(E((n=q(\"rect\")).style,{\"transform-box\":\"fill-box\",transform:\"rotate(45deg)\",\"transform-origin\":\"center\"}),W(n,E({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):S(e,[\"bpmn:Task\",\"bpmn:SubProcess\",\"bpmn:Group\",\"bpmn:CallActivity\"])?W(n=q(\"rect\"),E({x:-5,y:-5,rx:14,width:e.width+10,height:e.height+10},t)):R(e,\"bpmn:EndEvent\")?W(n=q(\"circle\"),E({cx:e.width/2,cy:e.height/2,r:e.width/2+5+1},t)):R(e,\"bpmn:Event\")?W(n=q(\"circle\"),E({cx:e.width/2,cy:e.height/2,r:e.width/2+5},t)):R(e,\"bpmn:DataObjectReference\")&&cn(e,\"bpmn:DataObjectReference\")?n=ln(\"M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z\",{x:-6,y:-6},t):R(e,\"bpmn:DataStoreReference\")&&cn(e,\"bpmn:DataStoreReference\")&&(n=ln(\"M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z\",{x:-6,y:-6},t)),n},pn.prototype.updateOutline=function(e,t){if(!O(e))return S(e,[\"bpmn:SubProcess\",\"bpmn:Group\"])?(W(t,{width:e.width+10,height:e.height+10}),!0):!!S(e,[\"bpmn:Event\",\"bpmn:Gateway\",\"bpmn:DataStoreReference\",\"bpmn:DataObjectReference\"])};var un={__depends__:[on],__init__:[\"outlineProvider\"],outlineProvider:[\"type\",pn]};function hn(e){return e.originalEvent||e.srcEvent}function fn(e,t){return(hn(e)||e).button===t}function mn(e){return fn(e,0)}function dn(e){return!0}function yn(e){return mn(e)||function(e){return fn(e,1)}(e)}function gn(e,t,n){var i=this;function r(n,i,r){var o,a;(function(e,t){var n=l[e]||mn;return!n(t)})(n,i)||(r?a=t.getGraphics(r):(o=i.delegateTarget||i.target)&&(a=o,r=t.get(a)),a&&r&&!1===e.fire(n,{element:r,gfx:a,originalEvent:i})&&(i.stopPropagation(),i.preventDefault()))}var o={};function a(e){return o[e]}var s={click:\"element.click\",contextmenu:\"element.contextmenu\",dblclick:\"element.dblclick\",mousedown:\"element.mousedown\",mousemove:\"element.mousemove\",mouseover:\"element.hover\",mouseout:\"element.out\",mouseup:\"element.mouseup\"},l={\"element.contextmenu\":dn,\"element.mousedown\":yn,\"element.mouseup\":yn,\"element.click\":yn,\"element.dblclick\":yn};var p=\"svg, .djs-element\";function c(e,t,n,i){var a=o[n]=function(e){r(n,e)};i&&(l[n]=i),a.$delegate=Ge.bind(e,p,t,a)}function u(e,t,n){var i=a(n);i&&Ge.unbind(e,t,i.$delegate)}e.on(\"canvas.destroy\",(function(e){var t;t=e.svg,f(s,(function(e,n){u(t,n,e)}))})),e.on(\"canvas.init\",(function(e){var t;t=e.svg,f(s,(function(e,n){c(t,n,e)}))})),e.on([\"shape.added\",\"connection.added\"],(function(t){var n=t.element,i=t.gfx;e.fire(\"interactionEvents.createHit\",{element:n,gfx:i})})),e.on([\"shape.changed\",\"connection.changed\"],500,(function(t){var n=t.element,i=t.gfx;e.fire(\"interactionEvents.updateHit\",{element:n,gfx:i})})),e.on(\"interactionEvents.createHit\",500,(function(e){var t=e.element,n=e.gfx;i.createDefaultHit(t,n)})),e.on(\"interactionEvents.updateHit\",(function(e){var t=e.element,n=e.gfx;i.updateDefaultHit(t,n)}));var h=y(\"djs-hit djs-hit-stroke\"),m=y(\"djs-hit djs-hit-click-stroke\"),d={all:y(\"djs-hit djs-hit-all\"),\"click-stroke\":m,stroke:h,\"no-move\":y(\"djs-hit djs-hit-no-move\")};function y(e,t){return t=E({stroke:\"white\",strokeWidth:15},t||{}),n.cls(e,[\"no-fill\",\"no-border\"],t)}function g(e,t){var n=d[t];if(!n)throw new Error(\"invalid hit type <\"+t+\">\");return W(e,n),e}function v(e,t){I(e,t)}this.removeHits=function(e){var t;f((t=\".djs-hit\",(e||document).querySelectorAll(t)),oe)},this.createDefaultHit=function(e,t){var n,i=e.waypoints,r=e.isFrame;return i?this.createWaypointsHit(t,i):(n=r?\"stroke\":\"all\",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=fe(t);return g(n,\"stroke\"),v(e,n),n},this.createBoxHit=function(e,t,n){n=E({x:0,y:0},n);var i=q(\"rect\");return g(i,t),W(i,n),v(e,i),i},this.updateDefaultHit=function(e,t){var n=Ye(\".djs-hit\",t);if(n)return e.waypoints?me(n,e.waypoints):W(n,{width:e.width,height:e.height}),n},this.fire=r,this.triggerMouseEvent=function(e,t,n){var i=s[e];if(!i)throw new Error(\"unmapped DOM event name <\"+e+\">\");return r(i,t,n)},this.mouseHandler=a,this.registerEvent=c,this.unregisterEvent=u}gn.$inject=[\"eventBus\",\"elementRegistry\",\"styles\"];var vn={__init__:[\"interactionEvents\"],interactionEvents:[\"type\",gn]};function xn(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on([\"shape.remove\",\"connection.remove\"],(function(e){var t=e.element;n.deselect(t)})),e.on([\"diagram.clear\",\"root.set\"],(function(e){n.select(null)}))}xn.$inject=[\"eventBus\",\"canvas\"],xn.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire(\"selection.changed\",{oldSelection:i,newSelection:t})}},xn.prototype.get=function(){return this._selectedElements},xn.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},xn.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();o(e)||(e=e?[e]:[]);var r=this._canvas,a=r.getRootElement();e=e.filter((function(e){var t=r.findRoot(e);return a===t})),t?f(e,(function(e){-1===n.indexOf(e)&&n.push(e)})):this._selectedElements=n=e.slice(),this._eventBus.fire(\"selection.changed\",{oldSelection:i,newSelection:n})};var wn=\"hover\",bn=\"selected\";function En(e,t,n){this._canvas=e;var i=this;function r(t,n){e.addMarker(t,n)}function o(t,n){e.removeMarker(t,n)}this._multiSelectionBox=null,t.on(\"element.hover\",(function(e){r(e.element,wn)})),t.on(\"element.out\",(function(e){o(e.element,wn)})),t.on(\"selection.changed\",(function(e){var t=e.oldSelection,n=e.newSelection;f(t,(function(e){-1===n.indexOf(e)&&o(e,bn)})),f(n,(function(e){-1===t.indexOf(e)&&r(e,bn)})),i._updateSelectionOutline(n)})),t.on(\"element.changed\",(function(e){n.isSelected(e.element)&&i._updateSelectionOutline(n.get())}))}function _n(e,t,n,i){e.on(\"create.end\",500,(function(e){var n=e.context,i=n.canExecute,r=n.elements,a=(n.hints||{}).autoSelect;if(i){if(!1===a)return;o(a)?t.select(a):t.select(r.filter(An))}})),e.on(\"connect.end\",500,(function(e){var n=e.context.connection;n&&t.select(n)})),e.on(\"shape.move.end\",500,(function(e){var n=e.previousSelection||[],r=i.get(e.context.shape.id);u(n,(function(e){return r.id===e.id}))||t.select(r)})),e.on(\"element.click\",(function(e){if(mn(e)){var i=e.element;i===n.getRootElement()&&(i=null);var r=t.isSelected(i),o=t.get().length>1,a=function(e){var t=hn(e)||e;return mn(e)&&t.shiftKey}(e);if(r&&o)return a?t.deselect(i):t.select(i);r?t.deselect(i):t.select(i,a)}}))}function An(e){return!e.hidden}En.$inject=[\"canvas\",\"eventBus\",\"selection\"],En.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer(\"selectionOutline\");!function(e){for(var t;t=e.firstChild;)e.removeChild(t)}(t);var n=e.length>1;if(z(this._canvas.getContainer())[n?\"add\":\"remove\"](\"djs-multi-select\"),n){var i=function(e){return{x:e.x-6,y:e.y-6,width:e.width+12,height:e.height+12}}(Ct(e)),r=q(\"rect\");W(r,E({rx:3},i)),z(r).add(\"djs-selection-outline\"),I(t,r)}},_n.$inject=[\"eventBus\",\"selection\",\"canvas\",\"elementRegistry\"];var Rn={__init__:[\"selectionVisuals\",\"selectionBehavior\"],__depends__:[vn,on],selection:[\"type\",xn],selectionVisuals:[\"type\",En],selectionBehavior:[\"type\",_n]};const Sn=/^class[ {]/;function kn(e){return Array.isArray(e)}function Cn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mn(...e){1===e.length&&kn(e[0])&&(e=e[0]);const t=(e=[...e]).pop();return t.$inject=e,t}const Pn=/constructor\\s*[^(]*\\(\\s*([^)]*)\\)/m,On=/^(?:async\\s+)?(?:function\\s*[^(]*)?(?:\\(\\s*([^)]*)\\)|(\\w+))/m,Tn=/\\/\\*([^*]*)\\*\\//m;function Nn(e){if(\"function\"!=typeof e)throw new Error(`Cannot annotate \"${e}\". Expected a function!`);const t=e.toString().match(function(e){return Sn.test(e.toString())}(e)?Pn:On);if(!t)return[];const n=t[1]||t[2];return n&&n.split(\",\").map((e=>{const t=e.match(Tn);return(t&&t[1]||e).trim()}))||[]}function Dn(e,t){const n=t||{get:function(e,t){if(i.push(e),!1===t)return null;throw s(`No provider for \"${e}\"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(e){const t=i.join(\" -> \");return i.length=0,new Error(t?`${e} (Resolving: ${t})`:e)};function l(e,t){if(!r[e]&&e.includes(\".\")){const t=e.split(\".\");let n=l(t.shift());for(;t.length;)n=n[t.shift()];return n}if(Cn(o,e))return o[e];if(Cn(r,e)){if(-1!==i.indexOf(e))throw i.push(e),s(\"Cannot resolve circular dependency!\");return i.push(e),o[e]=r[e][0](r[e][1]),i.pop(),o[e]}return n.get(e,t)}function p(e,t){if(void 0===t&&(t={}),\"function\"!=typeof e){if(!kn(e))throw s(`Cannot invoke \"${e}\". Expected a function!`);e=Mn(e.slice())}return{fn:e,dependencies:(e.$inject||Nn(e)).map((e=>Cn(t,e)?t[e]:l(e)))}}function c(e){const{fn:t,dependencies:n}=p(e);return new(Function.prototype.bind.call(t,null,...n))}function u(e,t,n){const{fn:i,dependencies:r}=p(e,n);return i.apply(t,r)}function h(e){return Mn((t=>e.get(t)))}function f(e,t){if(t&&t.length){const n=Object.create(null),i=Object.create(null),o=[],a=[],s=[];let l,p,c,u;for(let e in r)l=r[e],-1!==t.indexOf(e)&&(\"private\"===l[2]?(p=o.indexOf(l[3]),-1===p?(c=l[3].createChild([],t),u=h(c),o.push(l[3]),a.push(c),s.push(u),n[e]=[u,e,\"private\",c]):n[e]=[s[p],e,\"private\",a[p]]):n[e]=[l[2],l[1]],i[e]=!0),\"factory\"!==l[2]&&\"type\"!==l[2]||!l[1].$scope||t.forEach((t=>{-1!==l[1].$scope.indexOf(t)&&(n[e]=[l[2],l[1]],i[t]=!0)}));t.forEach((e=>{if(!i[e])throw new Error('No provider for \"'+e+'\". Cannot use provider from the parent!')})),e.unshift(n)}return new Dn(e,a)}const m={factory:u,type:c,value:function(e){return e}};function d(e,t){const n=e.__init__||[];return function(){n.forEach((e=>{\"string\"==typeof e?t.get(e):t.invoke(e)}))}}function y(e){const t=e.__exports__;if(t){const n=e.__modules__,i=Object.keys(e).reduce(((t,n)=>(\"__exports__\"!==n&&\"__modules__\"!==n&&\"__init__\"!==n&&\"__depends__\"!==n&&(t[n]=e[n]),t)),Object.create(null)),o=f((n||[]).concat(i)),a=Mn((function(e){return o.get(e)}));t.forEach((function(e){r[e]=[a,e,\"private\",o]}));const s=(e.__init__||[]).slice();return s.unshift((function(){o.init()})),d(e=Object.assign({},e,{__init__:s}),o)}return Object.keys(e).forEach((function(t){if(\"__init__\"===t||\"__depends__\"===t)return;const n=e[t];if(\"private\"===n[2])return void(r[t]=n);const i=n[0],o=n[1];r[t]=[m[i],Bn(i,o),i]})),d(e,a)}function g(e,t){return-1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(g,e)).indexOf(t)?e:e.concat(t)}this.get=l,this.invoke=u,this.instantiate=c,this.createChild=f,this.init=function(e){const t=e.reduce(g,[]).map(y);let n=!1;return function(){n||(n=!0,t.forEach((e=>e())))}}(e)}function Bn(e,t){return\"value\"!==e&&kn(t)&&(t=Mn(t.slice())),t}function Ln(e,t){A.call(this,e,1),this.CONNECTION_STYLE=t.style([\"no-fill\"],{strokeWidth:5,stroke:\"fuchsia\"}),this.SHAPE_STYLE=t.style({fill:\"white\",stroke:\"fuchsia\",strokeWidth:2}),this.FRAME_STYLE=t.style([\"no-fill\"],{stroke:\"fuchsia\",strokeDasharray:4,strokeWidth:2})}e(Ln,A),Ln.prototype.canRender=function(){return!0},Ln.prototype.drawShape=function(e,t,n){var i=q(\"rect\");return W(i,{x:0,y:0,width:t.width||0,height:t.height||0}),Pt(t)?W(i,E({},this.FRAME_STYLE,n||{})):W(i,E({},this.SHAPE_STYLE,n||{})),I(e,i),i},Ln.prototype.drawConnection=function(e,t,n){var i=fe(t.waypoints,E({},this.CONNECTION_STYLE,n||{}));return I(e,i),i},Ln.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width;return le([[\"M\",t,n],[\"l\",i,0],[\"l\",0,e.height],[\"l\",-i,0],[\"z\"]])},Ln.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,r=[];for(t=0;n=i[t];t++)n=n.original||n,r.push([0===t?\"M\":\"L\",n.x,n.y]);return le(r)},Ln.$inject=[\"eventBus\",\"styles\"];var In={__init__:[\"defaultRenderer\"],defaultRenderer:[\"type\",Ln],styles:[\"type\",function(){var e={\"no-fill\":{fill:\"none\"},\"no-border\":{strokeOpacity:0},\"no-events\":{pointerEvents:\"none\"}},t=this;this.cls=function(e,t,n){return E(this.style(t,n),{class:e})},this.style=function(t,n){o(t)||n||(n=t,t=[]);var i=m(t,(function(t,n){return E(t,e[n]||{})}),{});return n?E(i,n):i},this.computeStyle=function(e,n,i){return o(n)||(i=n,n=[]),t.style(n||[],E({},i,e||{}))}}]};function jn(e,t){return Math.round(e*t)/t}function Fn(e){return s(e)?e+\"px\":e}function Vn(e,t,n){const i=q(\"g\");z(i).add(t);const r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const Wn={shape:[\"x\",\"y\",\"width\",\"height\"],connection:[\"waypoints\"]};function $n(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}function zn(e,t){const n=\"matrix(\"+t.a+\",\"+t.b+\",\"+t.c+\",\"+t.d+\",\"+t.e+\",\"+t.f+\")\";e.setAttribute(\"transform\",n)}$n.$inject=[\"config.canvas\",\"eventBus\",\"graphicsFactory\",\"elementRegistry\"],$n.prototype._init=function(e){const t=this._eventBus,n=this._container=function(e){const t=(e=E({},{width:\"100%\",height:\"100%\"},e)).container||document.body,n=document.createElement(\"div\");return n.setAttribute(\"class\",\"djs-container djs-parent\"),Oe(n,{position:\"relative\",overflow:\"hidden\",width:Fn(e.width),height:Fn(e.height)}),t.appendChild(n),n}(e),i=this._svg=q(\"svg\");W(i,{width:\"100%\",height:\"100%\"}),I(n,i);const r=this._viewport=Vn(i,\"viewport\");e.deferUpdate&&(this._viewboxChanged=function(e,t){let n,i,r,o;function a(n){let a=Date.now(),p=n?0:o+t-a;if(p>0)return s(p);e.apply(r,i),l()}function s(e){n=setTimeout(a,e)}function l(){n&&clearTimeout(n),n=o=i=r=void 0}function p(...e){o=Date.now(),i=e,r=this,n||s(t)}return p.flush=function(){n&&a(!0),l()},p.cancel=l,p}(b(this._viewboxChanged,this),300)),t.on(\"diagram.init\",(()=>{t.fire(\"canvas.init\",{svg:i,viewport:r})})),t.on([\"shape.added\",\"connection.added\",\"shape.removed\",\"connection.removed\",\"elements.changed\",\"root.set\"],(()=>{delete this._cachedViewbox})),t.on(\"diagram.destroy\",500,this._destroy,this),t.on(\"diagram.clear\",500,this._clear,this)},$n.prototype._destroy=function(){this._eventBus.fire(\"canvas.destroy\",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},$n.prototype._clear=function(){this._elementRegistry.getAll().forEach((e=>{const t=Mt(e);\"root\"===t?this.removeRootElement(e):this._removeElement(e,t)})),this._planes=[],this._rootElement=null,delete this._cachedViewbox},$n.prototype.getDefaultLayer=function(){return this.getLayer(\"base\",0)},$n.prototype.getLayer=function(e,t){if(!e)throw new Error(\"must specify a name\");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error(\"layer <\"+e+\"> already created at index <\"+t+\">\");return n.group},$n.prototype._getChildIndex=function(e){return m(this._layers,(function(t,n){return n.visible&&e>=n.index&&t++,t}),0)},$n.prototype._createLayer=function(e,t){void 0===t&&(t=1);const n=this._getChildIndex(t);return{group:Vn(this._viewport,\"layer-\"+e,n),index:t,visible:!0}},$n.prototype.showLayer=function(e){if(!e)throw new Error(\"must specify a name\");const t=this._layers[e];if(!t)throw new Error(\"layer <\"+e+\"> does not exist\");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i},$n.prototype.hideLayer=function(e){if(!e)throw new Error(\"must specify a name\");const t=this._layers[e];if(!t)throw new Error(\"layer <\"+e+\"> does not exist\");const n=t.group;return t.visible?(oe(n),t.visible=!1,n):n},$n.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],oe(t.group))},$n.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},$n.prototype.findRoot=function(e){if(\"string\"==typeof e&&(e=this._elementRegistry.get(e)),!e)return;const t=this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{};return t.rootElement},$n.prototype.getRootElements=function(){return this._planes.map((function(e){return e.rootElement}))},$n.prototype._findPlaneForRoot=function(e){return u(this._planes,(function(t){return t.rootElement===e}))},$n.prototype.getContainer=function(){return this._container},$n.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(f([i.gfx,i.secondaryGfx],(function(i){i&&(n?(e.markers.add(t),z(i).add(t)):(e.markers.delete(t),z(i).remove(t)))})),this._eventBus.fire(\"element.marker.update\",{element:e,gfx:i.gfx,marker:t,add:!!n}))},$n.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},$n.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},$n.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),!!e.markers&&e.markers.has(t)},$n.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},$n.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},$n.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:\"__implicitroot_\"+t,children:[],isImplicit:!0});const n=e.layer=\"root-\"+t;this._ensureValid(\"root\",e);const i=this.getLayer(n,0);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e},$n.prototype.removeRootElement=function(e){\"string\"==typeof e&&(e=this._elementRegistry.get(e));if(this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter((function(t){return t.rootElement!==e})),this._rootElement===e&&(this._rootElement=null),e},$n.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error(\"rootElement required\");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e},$n.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire(\"root.remove\",{element:e}),n.fire(\"root.removed\",{element:e}),t.remove(e)},$n.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire(\"root.add\",{element:e}),n.add(e,t),i.fire(\"root.added\",{element:e,gfx:t})},$n.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire(\"root.set\",{element:e})},$n.prototype._ensureValid=function(e,t){if(!t.id)throw new Error(\"element must have an id\");if(this._elementRegistry.get(t.id))throw new Error(\"element <\"+t.id+\"> already exists\");const n=Wn[e],i=d(n,(function(e){return void 0!==t[e]}));if(!i)throw new Error(\"must supply { \"+n.join(\", \")+\" } with \"+e)},$n.prototype._setParent=function(e,t,n){!function(e,t,n){if(e&&t){\"number\"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}}(t.children,e,n),e.parent=t},$n.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+\".add\",{element:t,parent:n}),this._setParent(t,n,i);const a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+\".added\",{element:t,gfx:a}),t},$n.prototype.addShape=function(e,t,n){return this._addElement(\"shape\",e,t,n)},$n.prototype.addConnection=function(e,t,n){return this._addElement(\"connection\",e,t,n)},$n.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+\".remove\",{element:e}),i.remove(e),function(e,t){if(!e||!t)return-1;var n=e.indexOf(t);-1!==n&&e.splice(n,1)}(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+\".removed\",{element:e}),n.remove(e),e},$n.prototype.removeShape=function(e){return this._removeElement(e,\"shape\")},$n.prototype.removeConnection=function(e){return this._removeElement(e,\"connection\")},$n.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},$n.prototype._changeViewbox=function(e){this._eventBus.fire(\"canvas.viewbox.changing\"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},$n.prototype._viewboxChanged=function(){this._eventBus.fire(\"canvas.viewbox.changed\",{viewbox:this.viewbox()})},$n.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let i,r,o,a,s,l,p;return e?(this._changeViewbox((function(){s=Math.min(n.width/e.width,n.height/e.height);const i=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);se(t,i)})),e):(o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},a=se(t),r=a?a.matrix:function(e,t,n,i,r,o){var a=X().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return Z(a,e);case 6:return Z(a,{a:e,b:t,c:n,d:i,e:r,f:o})}}(),s=jn(r.a,1e3),l=jn(-r.e||0,1e3),p=jn(-r.f||0,1e3),e=this._cachedViewbox={x:l?l/s:0,y:p?p/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n})},$n.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox((function(){e=E({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),zn(t,n)})),{x:n.e,y:n.f}},$n.prototype.scrollToElement=function(e,t){let n=100;\"string\"==typeof e&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),\"number\"==typeof t&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=Ct(e),o=vt(r),a=this.viewbox(),s=this.zoom();let l,p;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const c=vt(a);if(r.width<a.width&&r.height<a.height){const e=Math.max(0,o.right-c.right),t=Math.min(0,o.left-c.left),n=Math.max(0,o.bottom-c.bottom),i=Math.min(0,o.top-c.top);l=e||t,p=n||i}else l=r.x-a.x,p=r.y-a.y;this.scroll({dx:-l*s,dy:-p*s})},$n.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(\"fit-viewport\"===e)return this._fitViewport(t);let n,i;return this._changeViewbox((function(){\"object\"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)})),jn(i.a,1e3)},$n.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale},$n.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,l,p,c;l=i.getCTM();const u=l.a;return t?(a=E(o,t),s=a.matrixTransform(l.inverse()),p=r.translate(s.x,s.y).scale(1/u*e).translate(-s.x,-s.y),c=l.multiply(p)):c=r.scale(e),zn(this._viewport,c),c},$n.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},$n.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;if(e.waypoints){n=this.getGraphics(e).getBBox()}else n=e;return{x:n.x*t.scale-t.x*t.scale,y:n.y*t.scale-t.y*t.scale,width:n.width*t.scale,height:n.height*t.scale}},$n.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire(\"canvas.resized\")};var Gn=\"data-element-id\";function Hn(e){this._elements={},this._eventBus=e}function Kn(e,t,n){var i=function(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,\"remove\",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,r,i)),e}}),Object.defineProperty(e,\"contains\",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,\"add\",{value:function(e,n){var o=this.indexOf(e);if(void 0===n){if(-1!==o)return;n=this.length}-1!==o&&this.splice(o,1),this.splice(n,0,e),-1===o&&t.set(e,r,i)}}),Object.defineProperty(e,\"__refs_collection\",{value:!0}),e}(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach((function(i){e.set(i,t.inverse,n)}))}function Un(e,t){if(!(this instanceof Un))return new Un(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Hn.$inject=[\"eventBus\"],Hn.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),W(t,Gn,i),n&&W(n,Gn,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},Hn.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(W(i.gfx,Gn,\"\"),i.secondaryGfx&&W(i.secondaryGfx,Gn,\"\"),delete t[n])},Hn.prototype.updateId=function(e,t){this._validateId(t),\"string\"==typeof e&&(e=this.get(e)),this._eventBus.fire(\"element.updateId\",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},Hn.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&W(t,Gn,i),t},Hn.prototype.get=function(e){var t;t=\"string\"==typeof e?e:e&&W(e,Gn);var n=this._elements[t];return n&&n.element},Hn.prototype.filter=function(e){var t=[];return this.forEach((function(n,i){e(n,i)&&t.push(n)})),t},Hn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=t[n[i]],o=r.element;if(e(o,r.gfx))return o}},Hn.prototype.getAll=function(){return this.filter((function(e){return e}))},Hn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach((function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)}))},Hn.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},Hn.prototype._validateId=function(e){if(!e)throw new Error(\"element must have an id\");if(this._elements[e])throw new Error(\"element with id \"+e+\" already added\")},Un.prototype.bind=function(e,t){if(\"string\"==typeof t){if(!this.props[t])throw new Error(\"no property <\"+t+\"> in ref\");t=this.props[t]}t.collection?Kn(this,t,e):function(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var o=r;r=null,o&&e.unset(o,i,n),r=t,e.set(r,i,n)}}})}(this,t,e)},Un.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return function(e){return!0===e.__refs_collection}(n)||Kn(this,t,e),n},Un.prototype.ensureBound=function(e,t){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)})(e,t)||this.bind(e,t)},Un.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},Un.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var qn=new Un({name:\"children\",enumerable:!0,collection:!0},{name:\"parent\"}),Yn=new Un({name:\"labels\",enumerable:!0,collection:!0},{name:\"labelTarget\"}),Xn=new Un({name:\"attachers\",collection:!0},{name:\"host\"}),Zn=new Un({name:\"outgoing\",collection:!0},{name:\"source\"}),Jn=new Un({name:\"incoming\",collection:!0},{name:\"target\"});function Qn(){Object.defineProperty(this,\"businessObject\",{writable:!0}),Object.defineProperty(this,\"label\",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),qn.bind(this,\"parent\"),Yn.bind(this,\"labels\"),Zn.bind(this,\"outgoing\"),Jn.bind(this,\"incoming\")}function ei(){Qn.call(this),qn.bind(this,\"children\"),Xn.bind(this,\"host\"),Xn.bind(this,\"attachers\")}function ti(){Qn.call(this),qn.bind(this,\"children\")}function ni(){ei.call(this),Yn.bind(this,\"labelTarget\")}function ii(){Qn.call(this),Zn.bind(this,\"source\"),Jn.bind(this,\"target\")}e(ei,Qn),e(ti,ei),e(ni,ei),e(ii,Qn);var ri={connection:ii,shape:ei,label:ni,root:ti};function oi(){this._uid=12}oi.prototype.createRoot=function(e){return this.create(\"root\",e)},oi.prototype.createLabel=function(e){return this.create(\"label\",e)},oi.prototype.createShape=function(e){return this.create(\"shape\",e)},oi.prototype.createConnection=function(e){return this.create(\"connection\",e)},oi.prototype.create=function(e,t){return(t=E({},t||{})).id||(t.id=e+\"_\"+this._uid++),function(e,t){var n=ri[e];if(!n)throw new Error(\"unknown type: <\"+e+\">\");return E(new n,t)}(e,t)};var ai=\"__fn\",si=Array.prototype.slice;function li(){this._listeners={},this.on(\"diagram.destroy\",1,this._destroy,this)}function pi(){}function ci(e,t){this._eventBus=e,this._elementRegistry=t}function ui(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}li.prototype.on=function(e,t,n,i){if(e=o(e)?e:[e],l(t)&&(i=n,n=t,t=1e3),!s(t))throw new Error(\"priority must be a number\");var r=n;i&&((r=b(n,i))[ai]=n[ai]||n);var a=this;e.forEach((function(e){a._addListener(e,{priority:t,callback:r,next:null})}))},li.prototype.once=function(e,t,n,i){var r=this;if(l(t)&&(i=n,n=t,t=1e3),!s(t))throw new Error(\"priority must be a number\");function o(){o.__isTomb=!0;var t=n.apply(i,arguments);return r.off(e,o),t}o[ai]=n,this.on(e,t,o)},li.prototype.off=function(e,t){e=o(e)?e:[e];var n=this;e.forEach((function(e){n._removeListener(e,t)}))},li.prototype.createEvent=function(e){var t=new pi;return t.init(e),t},li.prototype.fire=function(e,t){var n,i,r,o;if(o=si.call(arguments),\"object\"==typeof e&&(e=(t=e).type),!e)throw new Error(\"no event type specified\");if(i=this._listeners[e]){n=t instanceof pi?t:this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},li.prototype.handleError=function(e){return!1===this.fire(\"error\",{error:e})},li.prototype._destroy=function(){this._listeners={}},li.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},li.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=function(e,t){return e.apply(null,t)}(n.callback,t),void 0!==i&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error(\"unhandled error in event listener\",e),e}return i},li.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(i){for(;i;){if(i.priority<t.priority)return t.next=i,void(n?n.next=t:this._setListeners(e,t));n=i,i=i.next}n.next=t}else this._setListeners(e,t)},li.prototype._getListeners=function(e){return this._listeners[e]},li.prototype._setListeners=function(e,t){this._listeners[e]=t},li.prototype._removeListener=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(;o;)n=o.next,(r=o.callback)!==t&&r[ai]!==t||(i?i.next=n:this._setListeners(e,n)),i=o,o=n;else this._setListeners(e,null)},pi.prototype.stopPropagation=function(){this.cancelBubble=!0},pi.prototype.preventDefault=function(){this.defaultPrevented=!0},pi.prototype.init=function(e){E(this,e||{})},ci.$inject=[\"eventBus\",\"elementRegistry\"],ci.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n),t||(z(t=q(\"g\")).add(\"djs-children\"),I(n.parentNode,t))):t=n,t},ci.prototype._clear=function(e){var t=function(e){return e.childNodes[0]}(e);return Be(t),t},ci.prototype._createContainer=function(e,t,n,i){var r=q(\"g\");z(r).add(\"djs-group\"),void 0!==n?ui(r,t,t.childNodes[n]):I(t,r);var o=q(\"g\");z(o).add(\"djs-element\"),z(o).add(\"djs-\"+e),i&&z(o).add(\"djs-frame\"),I(r,o);var a=q(\"g\");return z(a).add(\"djs-visual\"),I(o,a),o},ci.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Pt(t))},ci.prototype.updateContainments=function(e){var t,n=this,i=this._elementRegistry;t=m(e,(function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e}),{}),f(t,(function(e){var t=e.children;if(t){var r=n._getChildrenContainer(e);f(t.slice().reverse(),(function(e){ui(i.getGraphics(e).parentNode,r)}))}}))},ci.prototype.drawShape=function(e,t,n={}){return this._eventBus.fire(\"render.shape\",{gfx:e,element:t,attrs:n})},ci.prototype.getShapePath=function(e){return this._eventBus.fire(\"render.getShapePath\",e)},ci.prototype.drawConnection=function(e,t,n={}){return this._eventBus.fire(\"render.connection\",{gfx:e,element:t,attrs:n})},ci.prototype.getConnectionPath=function(e){return this._eventBus.fire(\"render.getConnectionPath\",e)},ci.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(\"shape\"===e)this.drawShape(i,t),Je(n,t.x,t.y);else{if(\"connection\"!==e)throw new Error(\"unknown type: \"+e);this.drawConnection(i,t)}t.hidden?W(n,\"display\",\"none\"):W(n,\"display\",\"block\")}},ci.prototype.remove=function(e){oe(this._elementRegistry.getGraphics(e).parentNode)};var hi={__depends__:[In],__init__:[\"canvas\"],canvas:[\"type\",$n],elementRegistry:[\"type\",Hn],elementFactory:[\"type\",oi],eventBus:[\"type\",li],graphicsFactory:[\"type\",ci]};function fi(e){return function(e){var t=new Dn(e);return t.init(),t}([{config:[\"value\",e=e||{}]},hi].concat(e.modules||[]))}function mi(e,t){this._injector=t||fi(e),this.get(\"eventBus\").fire(\"diagram.init\")}function di(){}function yi(e,t){this.model=e,this.properties=t}mi.prototype.get=function(e,t){return this._injector.get(e,t)},mi.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)},mi.prototype.destroy=function(){this.get(\"eventBus\").fire(\"diagram.destroy\")},mi.prototype.clear=function(){this.get(\"eventBus\").fire(\"diagram.clear\")},di.prototype.get=function(e){return this.$model.properties.get(this,e)},di.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},yi.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(di.prototype);f(e.properties,(function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)})),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(e){n.define(this,\"$type\",{value:r,enumerable:!0}),n.define(this,\"$attrs\",{value:{}}),n.define(this,\"$parent\",{writable:!0}),f(e,b((function(e,t){this.set(t,e)}),this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var gi={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},vi={String:function(e){return e},Boolean:function(e){return\"true\"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function xi(e,t){var n=vi[e];return n?n(t):t}function wi(e){return!!gi[e]}function bi(e){return!!vi[e]}function Ei(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error(\"expected <prefix:localName> or <localName>, got \"+e);n=r[1],i=r[0]}return{name:e=(i?i+\":\":\"\")+n,prefix:i,localName:n}}function _i(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Ai(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,f(e,b(this.registerPackage,this))}function Ri(e,t,n){var i=t[n];if(i in e)throw new Error(\"package with \"+n+\" <\"+i+\"> already defined\")}function Si(e){this.model=e}function ki(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Ci(e){return e.replace(/^:/,\"\")}function Mi(e,t={}){this.properties=new Si(this),this.factory=new yi(this,this.properties),this.registry=new Ai(e,this.properties),this.typeCache={},this.config=t}_i.prototype.build=function(){return function(e,t){let n={},i=Object(e);return f(t,(function(t){t in i&&(n[t]=e[t])})),n}(this,[\"ns\",\"name\",\"allTypes\",\"allTypesByName\",\"properties\",\"propertiesByName\",\"bodyProperty\",\"idProperty\"])},_i.prototype.addProperty=function(e,t,n){\"boolean\"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},_i.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error(\"property <\"+t.ns.name+\"> must be id property to refine <\"+e.ns.name+\">\");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error(\"property <\"+t.ns.name+\"> must be body property to refine <\"+e.ns.name+\">\");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(-1===s)throw new Error(\"property <\"+i.name+\"> not found in property list\");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},_i.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split(\"#\"),o=Ei(r[0],i),a=Ei(r[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error(\"refined property <\"+a+\"> not found\");this.replaceProperty(s,e,n),delete e.redefines},_i.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},_i.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},_i.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error(\"body property defined multiple times (<\"+this.bodyProperty.ns.name+\">, <\"+e.ns.name+\">)\");this.bodyProperty=e},_i.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error(\"id property defined multiple times (<\"+this.idProperty.ns.name+\">, <\"+e.ns.name+\">)\");this.idProperty=e},_i.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)},_i.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error(\"property <\"+n+\"> already defined; override of <\"+i.definedBy.ns.name+\"#\"+i.ns.name+\"> by <\"+e.definedBy.ns.name+\"#\"+e.ns.name+\"> not allowed without redefines\")},_i.prototype.hasProperty=function(e){return this.propertiesByName[e]},_i.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(f(e.properties,b((function(n){n=E({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,\"definedBy\",{value:e});var i=n.replaces,r=n.redefines;i||r?this.redefineProperty(n,i||r,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))}),this)),i.push(e),n[r]=e)},Ai.prototype.getPackage=function(e){return this.packageMap[e]},Ai.prototype.getPackages=function(){return this.packages},Ai.prototype.registerPackage=function(e){e=E({},e);var t=this.packageMap;Ri(t,e,\"prefix\"),Ri(t,e,\"uri\"),f(e.types,b((function(t){this.registerType(t,e)}),this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},Ai.prototype.registerType=function(e,t){var n=Ei((e=E({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:E(e.meta||{})})).name,t.prefix),i=n.name,r={};f(e.properties,b((function(e){var t=Ei(e.name,n.prefix),i=t.name;wi(e.type)||(e.type=Ei(e.type,t.prefix).name),E(e,{ns:t,name:i}),r[i]=e}),this)),E(e,{ns:n,name:i,propertiesByName:r}),f(e.extends,b((function(e){var t=Ei(e,n.prefix),r=this.typeMap[t.name];r.traits=r.traits||[],r.traits.push(i)}),this)),this.definePackage(e,t),this.typeMap[i]=e},Ai.prototype.mapTypes=function(e,t,n){var i=wi(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(n,i){var o=Ei(n,wi(n)?\"\":e.prefix);r.mapTypes(o,t,i)}function a(e){return o(e,!0)}if(!i)throw new Error(\"unknown type <\"+e.name+\">\");f(i.superClass,n?a:function(e){return o(e,!1)}),t(i,!n),f(i.traits,a)},Ai.prototype.getEffectiveDescriptor=function(e){var t=Ei(e),n=new _i(t);this.mapTypes(t,(function(e,t){n.addTrait(e,t)}));var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},Ai.prototype.definePackage=function(e,t){this.properties.define(e,\"$pkg\",{value:t})},Si.prototype.set=function(e,t,n){if(!p(t)||!t.length)throw new TypeError(\"property name must be a non-empty string\");var i=this.getProperty(e,t),r=i&&i.name;void 0===n?i?delete e[r]:delete e.$attrs[Ci(t)]:i?r in e?e[r]=n:ki(e,i,n):e.$attrs[Ci(t)]=n},Si.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Ci(t)];var i=n.name;return!e[i]&&n.isMany&&ki(e,n,[]),e[i]},Si.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;delete(n=E({},n,{get:function(){return i}})).value}Object.defineProperty(e,t,n)},Si.prototype.defineDescriptor=function(e,t){this.define(e,\"$descriptor\",{value:t})},Si.prototype.defineModel=function(e,t){this.define(e,\"$model\",{value:t})},Si.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(\":\"))return null;const r=n.config.strict;if(void 0!==r){const n=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw n;\"undefined\"!=typeof console&&console.warn(n)}return null},Mi.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error(\"unknown type <\"+e+\">\");return new n(t)},Mi.prototype.getType=function(e){var t=this.typeCache,n=p(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},Mi.prototype.createAny=function(e,t,n){var o=Ei(e),s={$type:e,$instanceOf:function(e){return e===this.$type},get:function(e){return this[e]},set:function(e,t){!function(e,t,n){let o=e;f(t,(function(e,a){if(\"number\"!=typeof e&&\"string\"!=typeof e)throw new Error(\"illegal key type: \"+typeof e+\". Key should be of type number or string.\");if(\"constructor\"===e)throw new Error(\"illegal key: constructor\");if(\"__proto__\"===e)throw new Error(\"illegal key: __proto__\");let s=t[a+1],l=o[e];r(s)&&null==l&&(l=o[e]=isNaN(+s)?{}:[]),i(s)?i(n)?delete o[e]:o[e]=n:o=l}))}(this,[e],t)}},l={name:e,isGeneric:!0,ns:{prefix:o.prefix,localName:o.localName,uri:t}};return this.properties.defineDescriptor(s,l),this.properties.defineModel(s,this),this.properties.define(s,\"get\",{enumerable:!1,writable:!0}),this.properties.define(s,\"set\",{enumerable:!1,writable:!0}),this.properties.define(s,\"$parent\",{enumerable:!1,writable:!0}),this.properties.define(s,\"$instanceOf\",{enumerable:!1,writable:!0}),f(n,(function(e,t){a(e)&&void 0!==e.value?s[e.name]=e.value:s[t]=e})),s},Mi.prototype.getPackage=function(e){return this.registry.getPackage(e)},Mi.prototype.getPackages=function(){return this.registry.getPackages()},Mi.prototype.getElementDescriptor=function(e){return e.$descriptor},Mi.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},Mi.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},Mi.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Pi=String.fromCharCode,Oi=Object.prototype.hasOwnProperty,Ti=/&#(\\d+);|&#x([0-9a-f]+);|&(\\w+);/gi,Ni={amp:\"&\",apos:\"'\",gt:\">\",lt:\"<\",quot:'\"'};function Di(e,t,n,i){return i?Oi.call(Ni,i)?Ni[i]:\"&\"+i+\";\":Pi(t||parseInt(n,16))}function Bi(e){return e.length>3&&-1!==e.indexOf(\"&\")?e.replace(Ti,Di):e}Object.keys(Ni).forEach((function(e){Ni[e.toUpperCase()]=Ni[e]}));var Li=\"xsi:type\",Ii=\"non-whitespace outside of root node\";function ji(e){return new Error(e)}function Fi(e){return\"missing namespace for prefix <\"+e+\">\"}function Vi(e){return{get:e,enumerable:!0}}function Wi(e){var t,n={};for(t in e)n[t]=e[t];return n}function $i(e){return e+\"$uri\"}function zi(){return{line:0,column:0}}function Gi(e){throw e}function Hi(e){if(!this)return new Hi(e);var t,n,i,r,o,a,s,l,p,c=e&&e.proxy,u=Gi,h=zi,f=!1,m=!1,d=null,y=!1;function g(e){e instanceof Error||(e=ji(e)),d=e,u(e,h)}function v(e){o&&(e instanceof Error||(e=ji(e)),o(e,h))}this.on=function(e,p){if(\"function\"!=typeof p)throw ji(\"required args <name, cb>\");switch(e){case\"openTag\":n=p;break;case\"text\":t=p;break;case\"closeTag\":i=p;break;case\"error\":u=p;break;case\"warn\":o=p;break;case\"cdata\":r=p;break;case\"attention\":l=p;break;case\"question\":s=p;break;case\"comment\":a=p;break;default:throw ji(\"unsupported event: \"+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),\"object\"!=typeof e)throw ji(\"required args <nsMap={}>\");var t,n={};for(t in e)n[t]=e[t];return n[\"http://www.w3.org/2001/XMLSchema-instance\"]=\"xsi\",m=!0,p=n,this},this.parse=function(e){if(\"string\"!=typeof e)throw ji(\"required args <xml=string>\");return d=null,function(e){var o,u,d,x,w,b,E,_,A,R,S,k=m?[]:null,C=m?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[$i(n)]=t;return i}(p):null,M=[],P=0,O=!1,T=!1,N=0,D=0,B=\"\",L=0;function I(){if(null!==S)return S;var e,t,n,i,r,o,a,s,l,c,u,h=m&&C.xmlns,d=m&&f?[]:null,y=L,g=B,x=g.length,w={},b={};e:for(;y<x;y++)if(l=!1,!(32===(c=g.charCodeAt(y))||c<14&&c>8)){for((c<65||c>122||c>90&&c<97)&&95!==c&&58!==c&&(v(\"illegal first char attribute name\"),l=!0),u=y+1;u<x;u++)if(!((c=g.charCodeAt(u))>96&&c<123||c>64&&c<91||c>47&&c<59||46===c||45===c||95===c)){if(32===c||c<14&&c>8){v(\"missing attribute value\"),y=u;continue e}if(61===c)break;v(\"illegal attribute name char\"),l=!0}if(\"xmlns:xmlns\"===(s=g.substring(y,u))&&(v(\"illegal declaration of xmlns\"),l=!0),34===(c=g.charCodeAt(u+1)))-1===(u=g.indexOf('\"',y=u+2))&&-1!==(u=g.indexOf(\"'\",y))&&(v(\"attribute value quote missmatch\"),l=!0);else if(39===c)-1===(u=g.indexOf(\"'\",y=u+2))&&-1!==(u=g.indexOf('\"',y))&&(v(\"attribute value quote missmatch\"),l=!0);else for(v(\"missing attribute value quotes\"),l=!0,u+=1;u<x&&!(32===(c=g.charCodeAt(u+1))||c<14&&c>8);u++);for(-1===u&&(v(\"missing closing quotes\"),u=x,l=!0),l||(o=g.substring(y,u)),y=u;u+1<x&&!(32===(c=g.charCodeAt(u+1))||c<14&&c>8);u++)y===u&&(v(\"illegal character after attribute end\"),l=!0);if(y=u+1,!l)if(s in b)v(\"attribute <\"+s+\"> already defined\");else if(b[s]=!0,m)if(f){if(null!==(r=\"xmlns\"===s?\"xmlns\":120===s.charCodeAt(0)&&\"xmlns:\"===s.substr(0,6)?s.substr(6):null)){if(e=Bi(o),t=$i(r),!(a=p[e])){if(\"xmlns\"===r||t in C&&C[t]!==e)do{a=\"ns\"+P++}while(void 0!==C[a]);else a=r;p[e]=a}C[r]!==a&&(i||(C=Wi(C),i=!0),C[r]=a,\"xmlns\"===r&&(C[$i(a)]=e,h=a),C[t]=e),w[s]=o;continue}d.push(s,o)}else-1!==(c=s.indexOf(\":\"))?(n=C[s.substring(0,c)])?((s=h===n?s.substr(c+1):n+s.substr(c))===Li&&(-1!==(c=o.indexOf(\":\"))?(n=o.substring(0,c),o=(n=C[n]||n)+o.substring(c)):o=h+\":\"+o),w[s]=o):v(Fi(s.substring(0,c))):w[s]=o;else w[s]=o}if(f)for(y=0,x=d.length;y<x;y++){if(s=d[y++],o=d[y],-1!==(c=s.indexOf(\":\"))){if(!(n=C[s.substring(0,c)])){v(Fi(s.substring(0,c)));continue}(s=h===n?s.substr(c+1):n+s.substr(c))===Li&&(-1!==(c=o.indexOf(\":\"))?(n=o.substring(0,c),o=(n=C[n]||n)+o.substring(c)):o=h+\":\"+o)}w[s]=o}return S=w}function j(){for(var t,n,i=/(\\r\\n|\\r|\\n)/g,r=0,o=0,a=0,s=D;N>=a&&(t=i.exec(e))&&!((s=t[0].length+t.index)>N);)r+=1,a=s;return-1==N?(o=s,n=e.substring(D)):0===D?n=e.substring(D,N):(o=N-a,n=-1==D?e.substring(N):e.substring(N,D+1)),{data:n,line:r,column:o}}h=j,c&&(R=Object.create({},{name:Vi((function(){return _})),originalName:Vi((function(){return A})),attrs:Vi(I),ns:Vi((function(){return C}))}));for(;-1!==D;){if(-1===(N=60===e.charCodeAt(D)?D:e.indexOf(\"<\",D)))return M.length?g(\"unexpected end of file\"):0===D?g(\"missing start tag\"):void(D<e.length&&e.substring(D).trim()&&v(Ii));if(D!==N)if(M.length){if(t&&(t(e.substring(D,N),Bi,h),y))return}else if(e.substring(D,N).trim()&&(v(Ii),y))return;if(33===(w=e.charCodeAt(N+1))){if(91===(x=e.charCodeAt(N+2))&&\"CDATA[\"===e.substr(N+3,6)){if(-1===(D=e.indexOf(\"]]>\",N)))return g(\"unclosed cdata\");if(r&&(r(e.substring(N+9,D),h),y))return;D+=3;continue}if(45===x&&45===e.charCodeAt(N+3)){if(-1===(D=e.indexOf(\"--\\x3e\",N)))return g(\"unclosed comment\");if(a&&(a(e.substring(N+4,D),Bi,h),y))return;D+=3;continue}}if(63!==w){for(u=N+1;;u++){if(b=e.charCodeAt(u),isNaN(b))return D=-1,g(\"unclosed tag\");if(34===b)u=-1!==(x=e.indexOf('\"',u+1))?x:u;else if(39===b)u=-1!==(x=e.indexOf(\"'\",u+1))?x:u;else if(62===b){D=u;break}}if(33!==w){if(S={},47===w){if(O=!1,T=!0,!M.length)return g(\"missing open tag\");if(u=_=M.pop(),x=N+2+u.length,e.substring(N+2,x)!==u)return g(\"closing tag mismatch\");for(;x<D;x++)if(!(32===(w=e.charCodeAt(x))||w>8&&w<14))return g(\"close tag\")}else{if(47===e.charCodeAt(D-1)?(u=_=e.substring(N+1,D-1),O=!0,T=!0):(u=_=e.substring(N+1,D),O=!0,T=!1),!(w>96&&w<123||w>64&&w<91||95===w||58===w))return g(\"illegal first char nodeName\");for(x=1,d=u.length;x<d;x++)if(!((w=u.charCodeAt(x))>96&&w<123||w>64&&w<91||w>47&&w<59||45===w||95===w||46==w)){if(32===w||w<14&&w>8){_=u.substring(0,x),S=null;break}return g(\"invalid nodeName\")}T||M.push(_)}if(m){if(o=C,O&&(T||k.push(o),null===S&&(f=-1!==u.indexOf(\"xmlns\",x))&&(L=x,B=u,I(),f=!1)),A=_,-1!==(w=_.indexOf(\":\"))){if(!(E=C[_.substring(0,w)]))return g(\"missing namespace on <\"+A+\">\");_=_.substr(w+1)}else E=C.xmlns;E&&(_=E+\":\"+_)}if(O&&(L=x,B=u,n&&(c?n(R,Bi,T,h):n(_,I,Bi,T,h),y)))return;if(T){if(i&&(i(c?R:_,Bi,O,h),y))return;m&&(C=O?o:k.pop())}D+=1}else{if(l&&(l(e.substring(N,D+1),Bi,h),y))return;D+=1}}else{if(-1===(D=e.indexOf(\"?>\",N)))return g(\"unclosed question\");if(s&&(s(e.substring(N,D+2),h),y))return;D+=2}}}(e),h=zi,y=!1,d},this.stop=function(){y=!0}}function Ki(e){return e.xml&&\"lowerCase\"===e.xml.tagAlias}var Ui={xsi:\"http://www.w3.org/2001/XMLSchema-instance\",xml:\"http://www.w3.org/XML/1998/namespace\"},qi=\"xsi:type\";function Yi(e){return e.xml&&e.xml.serialize}function Xi(e){return Yi(e)===qi}function Zi(e,t){return Ki(t)?e.prefix+\":\"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name;var n}function Ji(e){return new Error(e)}function Qi(e){return e.$descriptor}function er(e){E(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw Ji(\"expected element\");var t,n=this.elementsById,i=Qi(e).idProperty;if(i&&(t=e.get(i.name))){if(!/^([a-z][\\w-.]*:)?[a-z_][\\w-.]*$/i.test(t))throw new Error(\"illegal ID <\"+t+\">\");if(n[t])throw Ji(\"duplicate ID <\"+t+\">\");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function tr(){}function nr(){}function ir(){}function rr(e,t){this.property=e,this.context=t}function or(e,t){this.element=t,this.propertyDesc=e}function ar(){}function sr(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function lr(e,t,n){sr.call(this,e,t,n)}function pr(e,t,n){this.model=e,this.context=n}function cr(e){e instanceof Mi&&(e={model:e}),E(this,{lax:!1},e)}tr.prototype.handleEnd=function(){},tr.prototype.handleText=function(){},tr.prototype.handleNode=function(){},nr.prototype=Object.create(tr.prototype),nr.prototype.handleNode=function(){return this},ir.prototype=Object.create(tr.prototype),ir.prototype.handleText=function(e){this.body=(this.body||\"\")+e},rr.prototype=Object.create(ir.prototype),rr.prototype.handleNode=function(e){if(this.element)throw Ji(\"expected no sub nodes\");return this.element=this.createReference(e),this},rr.prototype.handleEnd=function(){this.element.id=this.body},rr.prototype.createReference=function(e){return{property:this.property.ns.name,id:\"\"}},or.prototype=Object.create(ir.prototype),or.prototype.handleEnd=function(){var e=this.body||\"\",t=this.element,n=this.propertyDesc;e=xi(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},ar.prototype=Object.create(ir.prototype),ar.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},sr.prototype=Object.create(ar.prototype),sr.prototype.addReference=function(e){this.context.addReference(e)},sr.prototype.handleText=function(e){if(!Qi(this.element).bodyProperty)throw Ji(\"unexpected body text <\"+e+\">\");ir.prototype.handleText.call(this,e)},sr.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Qi(t).bodyProperty;n&&void 0!==e&&(e=xi(n.type,e),t.set(n.name,e))},sr.prototype.createElement=function(e){var t,n=e.attributes,i=this.type,r=Qi(i),o=this.context,a=new i({}),s=this.model;return f(n,(function(e,n){var i=r.propertiesByName[n];i&&i.isReference?i.isMany?f(e.split(\" \"),(function(e){o.addReference({element:a,property:i.ns.name,id:e})})):o.addReference({element:a,property:i.ns.name,id:e}):(i?e=xi(i.type,e):\"xmlns\"!==n&&(t=Ei(n,r.ns.prefix),s.getPackage(t.prefix)&&o.addWarning({message:\"unknown attribute <\"+n+\">\",element:a,property:n,value:e})),a.set(n,e))})),a},sr.prototype.getPropertyForNode=function(e){var t,n,i=Ei(e.name),r=this.type,o=this.model,a=Qi(r),s=i.name,l=a.propertiesByName[s];if(l&&!l.isAttr)return Xi(l)&&(t=e.attributes[qi])?(t=function(e,t){var n=Ei(e);return function(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&0===i.indexOf(r)?e.prefix+\":\"+i.slice(r.length):n}(n,t.getPackage(n.prefix))}(t,o),E({},l,{effectiveType:Qi(n=o.getType(t)).name})):l;var p=o.getPackage(i.prefix);if(p){if(t=Zi(i,p),n=o.getType(t),l=u(a.properties,(function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)})))return E({},l,{effectiveType:Qi(n).name})}else if(l=u(a.properties,(function(e){return!e.isReference&&!e.isAttribute&&\"Element\"===e.type})))return l;throw Ji(\"unrecognized element <\"+i.name+\">\")},sr.prototype.toString=function(){return\"ElementDescriptor[\"+Qi(this.type).name+\"]\"},sr.prototype.valueHandler=function(e,t){return new or(e,t)},sr.prototype.referenceHandler=function(e){return new rr(e,this.context)},sr.prototype.handler=function(e){return\"Element\"===e?new pr(this.model,e,this.context):new sr(this.model,e,this.context)},sr.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,bi(n=t.effectiveType||t.type))return this.valueHandler(t,i);var o=(r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==o&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(E(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},lr.prototype=Object.create(sr.prototype),lr.prototype.createElement=function(e){var t=e.name,n=Ei(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&Zi(n,o)||t;if(!r.hasType(a))throw Ji(\"unexpected element <\"+e.originalName+\">\");return sr.prototype.createElement.call(this,e)},pr.prototype=Object.create(ar.prototype),pr.prototype.createElement=function(e){var t=e.name,n=Ei(t).prefix,i=e.ns[n+\"$uri\"],r=e.attributes;return this.model.createAny(t,i,r)},pr.prototype.handleChild=function(e){var t=new pr(this.model,\"Element\",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},pr.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},cr.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof sr?(i=t,t={}):\"string\"==typeof t?(i=this.handler(t),t={}):\"string\"==typeof i&&(i=this.handler(i));var r=this.model,o=this.lax,a=new er(E({},t,{rootHandler:i})),s=new Hi({proxy:!0}),l=function(){var e=[];return Object.defineProperty(e,\"peek\",{value:function(){return this[this.length-1]}}),e}();function p(e,t,n){var i=t(),r=i.line,o=i.column,s=i.data;\"<\"===s.charAt(0)&&-1!==s.indexOf(\" \")&&(s=s.slice(0,s.indexOf(\" \"))+\">\");var l=\"unparsable content \"+(s?s+\" \":\"\")+\"detected\\n\\tline: \"+r+\"\\n\\tcolumn: \"+o+\"\\n\\tnested error: \"+e.message;if(n)return a.addWarning({message:l,error:e}),!0;throw Ji(l)}function c(e,t){return p(e,t,!0)}i.context=a,l.push(i);var u=/^<\\?xml /i,h=/ encoding=\"([^\"]+)\"/i,f=/^utf-8$/i;function m(e,t){try{l.peek().handleText(e)}catch(e){c(e,t)}}var d=r.getPackages().reduce((function(e,t){return e[t.uri]=t.prefix,e}),{\"http://www.w3.org/XML/1998/namespace\":\"xml\"});return s.ns(d).on(\"openTag\",(function(e,t,n,i){var r=e.attrs||{},a=Object.keys(r).reduce((function(e,n){var i=t(r[n]);return e[n]=i,e}),{});!function(e,t){var n=l.peek();try{l.push(n.handleNode(e))}catch(e){p(e,t,o)&&l.push(new nr)}}({name:e.name,originalName:e.originalName,attributes:a,ns:e.ns},i)})).on(\"question\",(function(e){if(u.test(e)){var t=h.exec(e),n=t&&t[1];n&&!f.test(n)&&a.addWarning({message:\"unsupported document encoding <\"+n+\">, falling back to UTF-8\"})}})).on(\"closeTag\",(function(){l.pop().handleEnd()})).on(\"cdata\",m).on(\"text\",(function(e,t,n){!function(e,t){e.trim()&&m(e,t)}(t(e),n)})).on(\"error\",p).on(\"warn\",c),new Promise((function(t,n){var r;try{s.parse(e),function(){var e,t,n=a.elementsById,i=a.references;for(e=0;t=i[e];e++){var r=t.element,o=n[t.id],s=Qi(r).propertiesByName[t.property];if(o||a.addWarning({message:\"unresolved reference <\"+t.id+\">\",element:t.element,property:t.property,value:t.id}),s.isMany){var l=r.get(s.name),p=l.indexOf(t);-1===p&&(p=l.length),o?l[p]=o:l.splice(p,1)}else r.set(s.name,o)}}()}catch(e){r=e}var o=i.element;r||o||(r=Ji(\"failed to parse document as <\"+i.type.$descriptor.name+\">\"));var l=a.warnings,p=a.references,c=a.elementsById;return r?(r.warnings=l,n(r)):t({rootElement:o,elementsById:c,references:p,warnings:l})}))},cr.prototype.handler=function(e){return new lr(this.model,e)};var ur=/<|>|'|\"|&|\\n\\r|\\n/g,hr=/<|>|&/g;function fr(e){var t={},n={},i={},r=[],o=[];this.byUri=function(t){return n[t]||e&&e.byUri(t)},this.add=function(e,t){n[e.uri]=e,t?r.push(e):o.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return t[e||\"xmlns\"]},this.mapPrefix=function(e,n){t[e||\"xmlns\"]=n},this.getNSKey=function(e){return void 0!==e.prefix?e.uri+\"|\"+e.prefix:e.uri},this.logUsed=function(t){var n=t.uri,r=this.getNSKey(t);i[r]=this.byUri(n),e&&e.logUsed(t)},this.getUsed=function(e){var t=this;return[].concat(r,o).filter((function(e){var n=t.getNSKey(e);return i[n]}))}}function mr(e,t){return Ki(t)?(n=e).charAt(0).toLowerCase()+n.slice(1):e;var n}function dr(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function yr(e){return p(e)?e:(e.prefix?e.prefix+\":\":\"\")+e.localName}var gr={\"\\n\":\"#10\",\"\\n\\r\":\"#10\",'\"':\"#34\",\"'\":\"#39\",\"<\":\"#60\",\">\":\"#62\",\"&\":\"#38\"},vr={\"<\":\"lt\",\">\":\"gt\",\"&\":\"amp\"};function xr(e,t,n){return(e=p(e)?e:\"\"+e).replace(t,(function(e){return\"&\"+n[e]+\";\"}))}function wr(e){this.tagName=e}function br(){}function Er(e){this.tagName=e}function _r(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function Ar(e,t){_r.call(this,e,t)}function Rr(){this.value=\"\",this.write=function(e){this.value+=e}}function Sr(e,t){var n=[\"\"];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write(\"\\n\"),this},this.appendIndent=function(){return t&&e.write(n.join(\"  \")),this},this.indent=function(){return n.push(\"\"),this},this.unindent=function(){return n.pop(),this}}function kr(e){return e=E({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var i=n||new Rr,r=new Sr(i,e.format);if(e.preamble&&r.append('<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n'),(new _r).build(t).serializeTo(r),!n)return i.value}}}function Cr(e,t){Mi.call(this,e,t)}wr.prototype.build=function(e){return this.element=e,this},wr.prototype.serializeTo=function(e){e.appendIndent().append(\"<\"+this.tagName+\">\"+this.element.id+\"</\"+this.tagName+\">\").appendNewLine()},br.prototype.serializeValue=br.prototype.serializeTo=function(e){e.append(this.escape?xr(this.value,hr,vr):this.value)},br.prototype.build=function(e,t){return this.value=t,\"String\"===e.type&&-1!==t.search(hr)&&(this.escape=!0),this},dr(Er,br),Er.prototype.serializeTo=function(e){e.appendIndent().append(\"<\"+this.tagName+\">\"),this.serializeValue(e),e.append(\"</\"+this.tagName+\">\").appendNewLine()},_r.prototype.build=function(e){this.element=e;var t,n,i=e.$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return t=o?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(e){return h(e.$descriptor.properties,(function(t){var n=t.name;if(t.isVirtual)return!1;if(!c(e,n))return!1;var i=e[n];return i!==t.default&&null!==i&&(!t.isMany||i.length)}))}(e),this.parseAttributes(h(n,(function(e){return e.isAttr}))),this.parseContainments(function(e){return h(e,(function(e){return!e.isAttr}))}(n))),this.parseGenericAttributes(e,t),this},_r.prototype.nsTagName=function(e){return function(e,t){return t.isGeneric?E({localName:t.ns.localName},e):E({localName:mr(t.ns.localName,t.$pkg)},e)}(this.logNamespaceUsed(e.ns),e)},_r.prototype.nsPropertyTagName=function(e){return function(e,t){return E({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},_r.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},_r.prototype.nsAttributeName=function(e){var t;if(t=p(e)?Ei(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:E({localName:t.localName},n)},_r.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return f(e,(function(r,o){\"$body\"===o?n.push((new br).build({type:\"String\"},r)):\"$children\"===o?f(r,(function(e){n.push(new _r(t).build(e))})):0!==o.indexOf(\"$\")&&t.parseNsAttribute(e,o,r)&&i.push({name:o,value:r})})),i},_r.prototype.parseNsAttribute=function(e,t,n){var i,r=e.$model,o=Ei(t);if(\"xmlns\"===o.prefix&&(i={prefix:o.localName,uri:n}),o.prefix||\"xmlns\"!==o.localName||(i={uri:n}),!i)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},_r.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return f(i,(function(t,i){var o=n.parseNsAttribute(e,i,t);o&&r.push(o)})),r},_r.prototype.parseGenericAttributes=function(e,t){var n=this;f(t,(function(t){if(t.name!==qi)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){console.warn(\"missing namespace information for \",t.name,\"=\",t.value,\"on\",e,n)}}))},_r.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;f(e,(function(e){var r=i.get(e.name),o=e.isReference;if(e.isMany||(r=[r]),e.isBody)n.push((new br).build(e,r[0]));else if(bi(e.type))f(r,(function(i){n.push(new Er(t.addTagName(t.nsPropertyTagName(e))).build(e,i))}));else if(o)f(r,(function(i){n.push(new wr(t.addTagName(t.nsPropertyTagName(e))).build(i))}));else{var a=Xi(e),s=function(e){return\"property\"===Yi(e)}(e);f(r,(function(i){var r;r=a?new Ar(t,e):s?new _r(t,e):new _r(t),n.push(r.build(i))}))}}))},_r.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new fr(t):n=t),n},_r.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix;return i.byUri(r)&&!n||i.add(e,t),i.mapPrefix(o,r),e},_r.prototype.logNamespaceUsed=function(e,t){var n,i,r,o=this.element.$model,a=this.getNamespaces(t),s=e.prefix,l=e.uri;if(!s&&!l)return{localName:e.localName};if(r=Ui[s]||o&&(o.getPackage(s)||{}).uri,!(l=l||r||a.uriByPrefix(s)))throw new Error(\"no namespace uri given for prefix <\"+s+\">\");if(!(e=a.byUri(l))){for(n=s,i=1;a.uriByPrefix(n);)n=s+\"_\"+i++;e=this.logNamespace({prefix:n,uri:l},r===l)}return s&&a.mapPrefix(s,l),e},_r.prototype.parseAttributes=function(e){var t=this,n=this.element;f(e,(function(e){var i=n.get(e.name);if(e.isReference)if(e.isMany){var r=[];f(i,(function(e){r.push(e.id)})),i=r.join(\" \")}else i=i.id;t.addAttribute(t.nsAttributeName(e),i)}))},_r.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),yr(e)},_r.prototype.addAttribute=function(e,t){var n=this.attrs;p(t)&&(t=xr(t,ur,gr));var i=function(e,t){const n=v(t);let i=o(e)?-1:void 0;return f(e,(function(e,t){if(n(e,t))return i=t,!1})),i}(n,(function(t){return t.name.localName===e.localName&&t.name.uri===e.uri&&t.name.prefix===e.prefix})),r={name:e,value:t};-1!==i?n.splice(i,1,r):n.push(r)},_r.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=function(e){return e.getUsed().filter((function(e){return\"xml\"!==e.prefix})).map((function(e){return{name:\"xmlns\"+(e.prefix?\":\"+e.prefix:\"\"),value:e.uri}}))}(n).concat(t)),f(t,(function(t){e.append(\" \").append(yr(t.name)).append('=\"').append(t.value).append('\"')}))},_r.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==br;e.appendIndent().append(\"<\"+this.tagName),this.serializeAttributes(e),e.append(t?\">\":\" />\"),t&&(n&&e.appendNewLine().indent(),f(this.body,(function(t){t.serializeTo(e)})),n&&e.unindent().appendIndent(),e.append(\"</\"+this.tagName+\">\")),e.appendNewLine()},dr(Ar,_r),Ar.prototype.parseNsAttributes=function(e){var t=_r.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||\"\";return this.addAttribute(this.nsAttributeName(qi),(i.prefix?i.prefix+\":\":\"\")+o+n.ns.localName),t},Ar.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},Cr.prototype=Object.create(Mi.prototype),Cr.prototype.fromXML=function(e,t,n){p(t)||(n=t,t=\"bpmn:Definitions\");var i=new cr(E({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)},Cr.prototype.toXML=function(e,t){var n=new kr(t);return new Promise((function(t,i){try{return t({xml:n.toXML(e)})}catch(e){return i(e)}}))};var Mr={bpmn:{name:\"BPMN20\",uri:\"http://www.omg.org/spec/BPMN/20100524/MODEL\",prefix:\"bpmn\",associations:[],types:[{name:\"Interface\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"operations\",type:\"Operation\",isMany:!0},{name:\"implementationRef\",isAttr:!0,type:\"String\"}]},{name:\"Operation\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"inMessageRef\",type:\"Message\",isReference:!0},{name:\"outMessageRef\",type:\"Message\",isReference:!0},{name:\"errorRef\",type:\"Error\",isMany:!0,isReference:!0},{name:\"implementationRef\",isAttr:!0,type:\"String\"}]},{name:\"EndPoint\",superClass:[\"RootElement\"]},{name:\"Auditing\",superClass:[\"BaseElement\"]},{name:\"GlobalTask\",superClass:[\"CallableElement\"],properties:[{name:\"resources\",type:\"ResourceRole\",isMany:!0}]},{name:\"Monitoring\",superClass:[\"BaseElement\"]},{name:\"Performer\",superClass:[\"ResourceRole\"]},{name:\"Process\",superClass:[\"FlowElementsContainer\",\"CallableElement\"],properties:[{name:\"processType\",type:\"ProcessType\",isAttr:!0},{name:\"isClosed\",isAttr:!0,type:\"Boolean\"},{name:\"auditing\",type:\"Auditing\"},{name:\"monitoring\",type:\"Monitoring\"},{name:\"properties\",type:\"Property\",isMany:!0},{name:\"laneSets\",isMany:!0,replaces:\"FlowElementsContainer#laneSets\",type:\"LaneSet\"},{name:\"flowElements\",isMany:!0,replaces:\"FlowElementsContainer#flowElements\",type:\"FlowElement\"},{name:\"artifacts\",type:\"Artifact\",isMany:!0},{name:\"resources\",type:\"ResourceRole\",isMany:!0},{name:\"correlationSubscriptions\",type:\"CorrelationSubscription\",isMany:!0},{name:\"supports\",type:\"Process\",isMany:!0,isReference:!0},{name:\"definitionalCollaborationRef\",type:\"Collaboration\",isAttr:!0,isReference:!0},{name:\"isExecutable\",isAttr:!0,type:\"Boolean\"}]},{name:\"LaneSet\",superClass:[\"BaseElement\"],properties:[{name:\"lanes\",type:\"Lane\",isMany:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"Lane\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"partitionElementRef\",type:\"BaseElement\",isAttr:!0,isReference:!0},{name:\"partitionElement\",type:\"BaseElement\"},{name:\"flowNodeRef\",type:\"FlowNode\",isMany:!0,isReference:!0},{name:\"childLaneSet\",type:\"LaneSet\",xml:{serialize:\"xsi:type\"}}]},{name:\"GlobalManualTask\",superClass:[\"GlobalTask\"]},{name:\"ManualTask\",superClass:[\"Task\"]},{name:\"UserTask\",superClass:[\"Task\"],properties:[{name:\"renderings\",type:\"Rendering\",isMany:!0},{name:\"implementation\",isAttr:!0,type:\"String\"}]},{name:\"Rendering\",superClass:[\"BaseElement\"]},{name:\"HumanPerformer\",superClass:[\"Performer\"]},{name:\"PotentialOwner\",superClass:[\"HumanPerformer\"]},{name:\"GlobalUserTask\",superClass:[\"GlobalTask\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"renderings\",type:\"Rendering\",isMany:!0}]},{name:\"Gateway\",isAbstract:!0,superClass:[\"FlowNode\"],properties:[{name:\"gatewayDirection\",type:\"GatewayDirection\",default:\"Unspecified\",isAttr:!0}]},{name:\"EventBasedGateway\",superClass:[\"Gateway\"],properties:[{name:\"instantiate\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"eventGatewayType\",type:\"EventBasedGatewayType\",isAttr:!0,default:\"Exclusive\"}]},{name:\"ComplexGateway\",superClass:[\"Gateway\"],properties:[{name:\"activationCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0}]},{name:\"ExclusiveGateway\",superClass:[\"Gateway\"],properties:[{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0}]},{name:\"InclusiveGateway\",superClass:[\"Gateway\"],properties:[{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0}]},{name:\"ParallelGateway\",superClass:[\"Gateway\"]},{name:\"RootElement\",isAbstract:!0,superClass:[\"BaseElement\"]},{name:\"Relationship\",superClass:[\"BaseElement\"],properties:[{name:\"type\",isAttr:!0,type:\"String\"},{name:\"direction\",type:\"RelationshipDirection\",isAttr:!0},{name:\"source\",isMany:!0,isReference:!0,type:\"Element\"},{name:\"target\",isMany:!0,isReference:!0,type:\"Element\"}]},{name:\"BaseElement\",isAbstract:!0,properties:[{name:\"id\",isAttr:!0,type:\"String\",isId:!0},{name:\"documentation\",type:\"Documentation\",isMany:!0},{name:\"extensionDefinitions\",type:\"ExtensionDefinition\",isMany:!0,isReference:!0},{name:\"extensionElements\",type:\"ExtensionElements\"}]},{name:\"Extension\",properties:[{name:\"mustUnderstand\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"definition\",type:\"ExtensionDefinition\",isAttr:!0,isReference:!0}]},{name:\"ExtensionDefinition\",properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"extensionAttributeDefinitions\",type:\"ExtensionAttributeDefinition\",isMany:!0}]},{name:\"ExtensionAttributeDefinition\",properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"type\",isAttr:!0,type:\"String\"},{name:\"isReference\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"extensionDefinition\",type:\"ExtensionDefinition\",isAttr:!0,isReference:!0}]},{name:\"ExtensionElements\",properties:[{name:\"valueRef\",isAttr:!0,isReference:!0,type:\"Element\"},{name:\"values\",type:\"Element\",isMany:!0},{name:\"extensionAttributeDefinition\",type:\"ExtensionAttributeDefinition\",isAttr:!0,isReference:!0}]},{name:\"Documentation\",superClass:[\"BaseElement\"],properties:[{name:\"text\",type:\"String\",isBody:!0},{name:\"textFormat\",default:\"text/plain\",isAttr:!0,type:\"String\"}]},{name:\"Event\",isAbstract:!0,superClass:[\"FlowNode\",\"InteractionNode\"],properties:[{name:\"properties\",type:\"Property\",isMany:!0}]},{name:\"IntermediateCatchEvent\",superClass:[\"CatchEvent\"]},{name:\"IntermediateThrowEvent\",superClass:[\"ThrowEvent\"]},{name:\"EndEvent\",superClass:[\"ThrowEvent\"]},{name:\"StartEvent\",superClass:[\"CatchEvent\"],properties:[{name:\"isInterrupting\",default:!0,isAttr:!0,type:\"Boolean\"}]},{name:\"ThrowEvent\",isAbstract:!0,superClass:[\"Event\"],properties:[{name:\"dataInputs\",type:\"DataInput\",isMany:!0},{name:\"dataInputAssociations\",type:\"DataInputAssociation\",isMany:!0},{name:\"inputSet\",type:\"InputSet\"},{name:\"eventDefinitions\",type:\"EventDefinition\",isMany:!0},{name:\"eventDefinitionRef\",type:\"EventDefinition\",isMany:!0,isReference:!0}]},{name:\"CatchEvent\",isAbstract:!0,superClass:[\"Event\"],properties:[{name:\"parallelMultiple\",isAttr:!0,type:\"Boolean\",default:!1},{name:\"dataOutputs\",type:\"DataOutput\",isMany:!0},{name:\"dataOutputAssociations\",type:\"DataOutputAssociation\",isMany:!0},{name:\"outputSet\",type:\"OutputSet\"},{name:\"eventDefinitions\",type:\"EventDefinition\",isMany:!0},{name:\"eventDefinitionRef\",type:\"EventDefinition\",isMany:!0,isReference:!0}]},{name:\"BoundaryEvent\",superClass:[\"CatchEvent\"],properties:[{name:\"cancelActivity\",default:!0,isAttr:!0,type:\"Boolean\"},{name:\"attachedToRef\",type:\"Activity\",isAttr:!0,isReference:!0}]},{name:\"EventDefinition\",isAbstract:!0,superClass:[\"RootElement\"]},{name:\"CancelEventDefinition\",superClass:[\"EventDefinition\"]},{name:\"ErrorEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"errorRef\",type:\"Error\",isAttr:!0,isReference:!0}]},{name:\"TerminateEventDefinition\",superClass:[\"EventDefinition\"]},{name:\"EscalationEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"escalationRef\",type:\"Escalation\",isAttr:!0,isReference:!0}]},{name:\"Escalation\",properties:[{name:\"structureRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"escalationCode\",isAttr:!0,type:\"String\"}],superClass:[\"RootElement\"]},{name:\"CompensateEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"waitForCompletion\",isAttr:!0,type:\"Boolean\",default:!0},{name:\"activityRef\",type:\"Activity\",isAttr:!0,isReference:!0}]},{name:\"TimerEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"timeDate\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"timeCycle\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"timeDuration\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}]},{name:\"LinkEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"target\",type:\"LinkEventDefinition\",isReference:!0},{name:\"source\",type:\"LinkEventDefinition\",isMany:!0,isReference:!0}]},{name:\"MessageEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0}]},{name:\"ConditionalEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"condition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}]},{name:\"SignalEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"signalRef\",type:\"Signal\",isAttr:!0,isReference:!0}]},{name:\"Signal\",superClass:[\"RootElement\"],properties:[{name:\"structureRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ImplicitThrowEvent\",superClass:[\"ThrowEvent\"]},{name:\"DataState\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ItemAwareElement\",superClass:[\"BaseElement\"],properties:[{name:\"itemSubjectRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"dataState\",type:\"DataState\"}]},{name:\"DataAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"sourceRef\",type:\"ItemAwareElement\",isMany:!0,isReference:!0},{name:\"targetRef\",type:\"ItemAwareElement\",isReference:!0},{name:\"transformation\",type:\"FormalExpression\",xml:{serialize:\"property\"}},{name:\"assignment\",type:\"Assignment\",isMany:!0}]},{name:\"DataInput\",superClass:[\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"inputSetRef\",type:\"InputSet\",isMany:!0,isVirtual:!0,isReference:!0},{name:\"inputSetWithOptional\",type:\"InputSet\",isMany:!0,isVirtual:!0,isReference:!0},{name:\"inputSetWithWhileExecuting\",type:\"InputSet\",isMany:!0,isVirtual:!0,isReference:!0}]},{name:\"DataOutput\",superClass:[\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"outputSetRef\",type:\"OutputSet\",isMany:!0,isVirtual:!0,isReference:!0},{name:\"outputSetWithOptional\",type:\"OutputSet\",isMany:!0,isVirtual:!0,isReference:!0},{name:\"outputSetWithWhileExecuting\",type:\"OutputSet\",isMany:!0,isVirtual:!0,isReference:!0}]},{name:\"InputSet\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"dataInputRefs\",type:\"DataInput\",isMany:!0,isReference:!0},{name:\"optionalInputRefs\",type:\"DataInput\",isMany:!0,isReference:!0},{name:\"whileExecutingInputRefs\",type:\"DataInput\",isMany:!0,isReference:!0},{name:\"outputSetRefs\",type:\"OutputSet\",isMany:!0,isReference:!0}]},{name:\"OutputSet\",superClass:[\"BaseElement\"],properties:[{name:\"dataOutputRefs\",type:\"DataOutput\",isMany:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"inputSetRefs\",type:\"InputSet\",isMany:!0,isReference:!0},{name:\"optionalOutputRefs\",type:\"DataOutput\",isMany:!0,isReference:!0},{name:\"whileExecutingOutputRefs\",type:\"DataOutput\",isMany:!0,isReference:!0}]},{name:\"Property\",superClass:[\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"DataInputAssociation\",superClass:[\"DataAssociation\"]},{name:\"DataOutputAssociation\",superClass:[\"DataAssociation\"]},{name:\"InputOutputSpecification\",superClass:[\"BaseElement\"],properties:[{name:\"dataInputs\",type:\"DataInput\",isMany:!0},{name:\"dataOutputs\",type:\"DataOutput\",isMany:!0},{name:\"inputSets\",type:\"InputSet\",isMany:!0},{name:\"outputSets\",type:\"OutputSet\",isMany:!0}]},{name:\"DataObject\",superClass:[\"FlowElement\",\"ItemAwareElement\"],properties:[{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"}]},{name:\"InputOutputBinding\",properties:[{name:\"inputDataRef\",type:\"InputSet\",isAttr:!0,isReference:!0},{name:\"outputDataRef\",type:\"OutputSet\",isAttr:!0,isReference:!0},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0}]},{name:\"Assignment\",superClass:[\"BaseElement\"],properties:[{name:\"from\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"to\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}]},{name:\"DataStore\",superClass:[\"RootElement\",\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"capacity\",isAttr:!0,type:\"Integer\"},{name:\"isUnlimited\",default:!0,isAttr:!0,type:\"Boolean\"}]},{name:\"DataStoreReference\",superClass:[\"ItemAwareElement\",\"FlowElement\"],properties:[{name:\"dataStoreRef\",type:\"DataStore\",isAttr:!0,isReference:!0}]},{name:\"DataObjectReference\",superClass:[\"ItemAwareElement\",\"FlowElement\"],properties:[{name:\"dataObjectRef\",type:\"DataObject\",isAttr:!0,isReference:!0}]},{name:\"ConversationLink\",superClass:[\"BaseElement\"],properties:[{name:\"sourceRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ConversationAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"innerConversationNodeRef\",type:\"ConversationNode\",isAttr:!0,isReference:!0},{name:\"outerConversationNodeRef\",type:\"ConversationNode\",isAttr:!0,isReference:!0}]},{name:\"CallConversation\",superClass:[\"ConversationNode\"],properties:[{name:\"calledCollaborationRef\",type:\"Collaboration\",isAttr:!0,isReference:!0},{name:\"participantAssociations\",type:\"ParticipantAssociation\",isMany:!0}]},{name:\"Conversation\",superClass:[\"ConversationNode\"]},{name:\"SubConversation\",superClass:[\"ConversationNode\"],properties:[{name:\"conversationNodes\",type:\"ConversationNode\",isMany:!0}]},{name:\"ConversationNode\",isAbstract:!0,superClass:[\"InteractionNode\",\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0},{name:\"messageFlowRefs\",type:\"MessageFlow\",isMany:!0,isReference:!0},{name:\"correlationKeys\",type:\"CorrelationKey\",isMany:!0}]},{name:\"GlobalConversation\",superClass:[\"Collaboration\"]},{name:\"PartnerEntity\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0}]},{name:\"PartnerRole\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0}]},{name:\"CorrelationProperty\",superClass:[\"RootElement\"],properties:[{name:\"correlationPropertyRetrievalExpression\",type:\"CorrelationPropertyRetrievalExpression\",isMany:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"type\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"Error\",superClass:[\"RootElement\"],properties:[{name:\"structureRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"errorCode\",isAttr:!0,type:\"String\"}]},{name:\"CorrelationKey\",superClass:[\"BaseElement\"],properties:[{name:\"correlationPropertyRef\",type:\"CorrelationProperty\",isMany:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"Expression\",superClass:[\"BaseElement\"],isAbstract:!1,properties:[{name:\"body\",isBody:!0,type:\"String\"}]},{name:\"FormalExpression\",superClass:[\"Expression\"],properties:[{name:\"language\",isAttr:!0,type:\"String\"},{name:\"evaluatesToTypeRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"Message\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"itemRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"ItemDefinition\",superClass:[\"RootElement\"],properties:[{name:\"itemKind\",type:\"ItemKind\",isAttr:!0},{name:\"structureRef\",isAttr:!0,type:\"String\"},{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"import\",type:\"Import\",isAttr:!0,isReference:!0}]},{name:\"FlowElement\",isAbstract:!0,superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"auditing\",type:\"Auditing\"},{name:\"monitoring\",type:\"Monitoring\"},{name:\"categoryValueRef\",type:\"CategoryValue\",isMany:!0,isReference:!0}]},{name:\"SequenceFlow\",superClass:[\"FlowElement\"],properties:[{name:\"isImmediate\",isAttr:!0,type:\"Boolean\"},{name:\"conditionExpression\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"sourceRef\",type:\"FlowNode\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"FlowNode\",isAttr:!0,isReference:!0}]},{name:\"FlowElementsContainer\",isAbstract:!0,superClass:[\"BaseElement\"],properties:[{name:\"laneSets\",type:\"LaneSet\",isMany:!0},{name:\"flowElements\",type:\"FlowElement\",isMany:!0}]},{name:\"CallableElement\",isAbstract:!0,superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"ioSpecification\",type:\"InputOutputSpecification\",xml:{serialize:\"property\"}},{name:\"supportedInterfaceRef\",type:\"Interface\",isMany:!0,isReference:!0},{name:\"ioBinding\",type:\"InputOutputBinding\",isMany:!0,xml:{serialize:\"property\"}}]},{name:\"FlowNode\",isAbstract:!0,superClass:[\"FlowElement\"],properties:[{name:\"incoming\",type:\"SequenceFlow\",isMany:!0,isReference:!0},{name:\"outgoing\",type:\"SequenceFlow\",isMany:!0,isReference:!0},{name:\"lanes\",type:\"Lane\",isMany:!0,isVirtual:!0,isReference:!0}]},{name:\"CorrelationPropertyRetrievalExpression\",superClass:[\"BaseElement\"],properties:[{name:\"messagePath\",type:\"FormalExpression\"},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"CorrelationPropertyBinding\",superClass:[\"BaseElement\"],properties:[{name:\"dataPath\",type:\"FormalExpression\"},{name:\"correlationPropertyRef\",type:\"CorrelationProperty\",isAttr:!0,isReference:!0}]},{name:\"Resource\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"resourceParameters\",type:\"ResourceParameter\",isMany:!0}]},{name:\"ResourceParameter\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isRequired\",isAttr:!0,type:\"Boolean\"},{name:\"type\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"CorrelationSubscription\",superClass:[\"BaseElement\"],properties:[{name:\"correlationKeyRef\",type:\"CorrelationKey\",isAttr:!0,isReference:!0},{name:\"correlationPropertyBinding\",type:\"CorrelationPropertyBinding\",isMany:!0}]},{name:\"MessageFlow\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"sourceRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"MessageFlowAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"innerMessageFlowRef\",type:\"MessageFlow\",isAttr:!0,isReference:!0},{name:\"outerMessageFlowRef\",type:\"MessageFlow\",isAttr:!0,isReference:!0}]},{name:\"InteractionNode\",isAbstract:!0,properties:[{name:\"incomingConversationLinks\",type:\"ConversationLink\",isMany:!0,isVirtual:!0,isReference:!0},{name:\"outgoingConversationLinks\",type:\"ConversationLink\",isMany:!0,isVirtual:!0,isReference:!0}]},{name:\"Participant\",superClass:[\"InteractionNode\",\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"interfaceRef\",type:\"Interface\",isMany:!0,isReference:!0},{name:\"participantMultiplicity\",type:\"ParticipantMultiplicity\"},{name:\"endPointRefs\",type:\"EndPoint\",isMany:!0,isReference:!0},{name:\"processRef\",type:\"Process\",isAttr:!0,isReference:!0}]},{name:\"ParticipantAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"innerParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0},{name:\"outerParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0}]},{name:\"ParticipantMultiplicity\",properties:[{name:\"minimum\",default:0,isAttr:!0,type:\"Integer\"},{name:\"maximum\",default:1,isAttr:!0,type:\"Integer\"}],superClass:[\"BaseElement\"]},{name:\"Collaboration\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isClosed\",isAttr:!0,type:\"Boolean\"},{name:\"participants\",type:\"Participant\",isMany:!0},{name:\"messageFlows\",type:\"MessageFlow\",isMany:!0},{name:\"artifacts\",type:\"Artifact\",isMany:!0},{name:\"conversations\",type:\"ConversationNode\",isMany:!0},{name:\"conversationAssociations\",type:\"ConversationAssociation\"},{name:\"participantAssociations\",type:\"ParticipantAssociation\",isMany:!0},{name:\"messageFlowAssociations\",type:\"MessageFlowAssociation\",isMany:!0},{name:\"correlationKeys\",type:\"CorrelationKey\",isMany:!0},{name:\"choreographyRef\",type:\"Choreography\",isMany:!0,isReference:!0},{name:\"conversationLinks\",type:\"ConversationLink\",isMany:!0}]},{name:\"ChoreographyActivity\",isAbstract:!0,superClass:[\"FlowNode\"],properties:[{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0},{name:\"initiatingParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0},{name:\"correlationKeys\",type:\"CorrelationKey\",isMany:!0},{name:\"loopType\",type:\"ChoreographyLoopType\",default:\"None\",isAttr:!0}]},{name:\"CallChoreography\",superClass:[\"ChoreographyActivity\"],properties:[{name:\"calledChoreographyRef\",type:\"Choreography\",isAttr:!0,isReference:!0},{name:\"participantAssociations\",type:\"ParticipantAssociation\",isMany:!0}]},{name:\"SubChoreography\",superClass:[\"ChoreographyActivity\",\"FlowElementsContainer\"],properties:[{name:\"artifacts\",type:\"Artifact\",isMany:!0}]},{name:\"ChoreographyTask\",superClass:[\"ChoreographyActivity\"],properties:[{name:\"messageFlowRef\",type:\"MessageFlow\",isMany:!0,isReference:!0}]},{name:\"Choreography\",superClass:[\"Collaboration\",\"FlowElementsContainer\"]},{name:\"GlobalChoreographyTask\",superClass:[\"Choreography\"],properties:[{name:\"initiatingParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0}]},{name:\"TextAnnotation\",superClass:[\"Artifact\"],properties:[{name:\"text\",type:\"String\"},{name:\"textFormat\",default:\"text/plain\",isAttr:!0,type:\"String\"}]},{name:\"Group\",superClass:[\"Artifact\"],properties:[{name:\"categoryValueRef\",type:\"CategoryValue\",isAttr:!0,isReference:!0}]},{name:\"Association\",superClass:[\"Artifact\"],properties:[{name:\"associationDirection\",type:\"AssociationDirection\",isAttr:!0},{name:\"sourceRef\",type:\"BaseElement\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"BaseElement\",isAttr:!0,isReference:!0}]},{name:\"Category\",superClass:[\"RootElement\"],properties:[{name:\"categoryValue\",type:\"CategoryValue\",isMany:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"Artifact\",isAbstract:!0,superClass:[\"BaseElement\"]},{name:\"CategoryValue\",superClass:[\"BaseElement\"],properties:[{name:\"categorizedFlowElements\",type:\"FlowElement\",isMany:!0,isVirtual:!0,isReference:!0},{name:\"value\",isAttr:!0,type:\"String\"}]},{name:\"Activity\",isAbstract:!0,superClass:[\"FlowNode\"],properties:[{name:\"isForCompensation\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0},{name:\"ioSpecification\",type:\"InputOutputSpecification\",xml:{serialize:\"property\"}},{name:\"boundaryEventRefs\",type:\"BoundaryEvent\",isMany:!0,isReference:!0},{name:\"properties\",type:\"Property\",isMany:!0},{name:\"dataInputAssociations\",type:\"DataInputAssociation\",isMany:!0},{name:\"dataOutputAssociations\",type:\"DataOutputAssociation\",isMany:!0},{name:\"startQuantity\",default:1,isAttr:!0,type:\"Integer\"},{name:\"resources\",type:\"ResourceRole\",isMany:!0},{name:\"completionQuantity\",default:1,isAttr:!0,type:\"Integer\"},{name:\"loopCharacteristics\",type:\"LoopCharacteristics\"}]},{name:\"ServiceTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0}]},{name:\"SubProcess\",superClass:[\"Activity\",\"FlowElementsContainer\",\"InteractionNode\"],properties:[{name:\"triggeredByEvent\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"artifacts\",type:\"Artifact\",isMany:!0}]},{name:\"LoopCharacteristics\",isAbstract:!0,superClass:[\"BaseElement\"]},{name:\"MultiInstanceLoopCharacteristics\",superClass:[\"LoopCharacteristics\"],properties:[{name:\"isSequential\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"behavior\",type:\"MultiInstanceBehavior\",default:\"All\",isAttr:!0},{name:\"loopCardinality\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"loopDataInputRef\",type:\"ItemAwareElement\",isReference:!0},{name:\"loopDataOutputRef\",type:\"ItemAwareElement\",isReference:!0},{name:\"inputDataItem\",type:\"DataInput\",xml:{serialize:\"property\"}},{name:\"outputDataItem\",type:\"DataOutput\",xml:{serialize:\"property\"}},{name:\"complexBehaviorDefinition\",type:\"ComplexBehaviorDefinition\",isMany:!0},{name:\"completionCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"oneBehaviorEventRef\",type:\"EventDefinition\",isAttr:!0,isReference:!0},{name:\"noneBehaviorEventRef\",type:\"EventDefinition\",isAttr:!0,isReference:!0}]},{name:\"StandardLoopCharacteristics\",superClass:[\"LoopCharacteristics\"],properties:[{name:\"testBefore\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"loopCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"loopMaximum\",type:\"Integer\",isAttr:!0}]},{name:\"CallActivity\",superClass:[\"Activity\",\"InteractionNode\"],properties:[{name:\"calledElement\",type:\"String\",isAttr:!0}]},{name:\"Task\",superClass:[\"Activity\",\"InteractionNode\"]},{name:\"SendTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"ReceiveTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"instantiate\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"ScriptTask\",superClass:[\"Task\"],properties:[{name:\"scriptFormat\",isAttr:!0,type:\"String\"},{name:\"script\",type:\"String\"}]},{name:\"BusinessRuleTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"}]},{name:\"AdHocSubProcess\",superClass:[\"SubProcess\"],properties:[{name:\"completionCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"ordering\",type:\"AdHocOrdering\",isAttr:!0},{name:\"cancelRemainingInstances\",default:!0,isAttr:!0,type:\"Boolean\"}]},{name:\"Transaction\",superClass:[\"SubProcess\"],properties:[{name:\"protocol\",isAttr:!0,type:\"String\"},{name:\"method\",isAttr:!0,type:\"String\"}]},{name:\"GlobalScriptTask\",superClass:[\"GlobalTask\"],properties:[{name:\"scriptLanguage\",isAttr:!0,type:\"String\"},{name:\"script\",isAttr:!0,type:\"String\"}]},{name:\"GlobalBusinessRuleTask\",superClass:[\"GlobalTask\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"}]},{name:\"ComplexBehaviorDefinition\",superClass:[\"BaseElement\"],properties:[{name:\"condition\",type:\"FormalExpression\"},{name:\"event\",type:\"ImplicitThrowEvent\"}]},{name:\"ResourceRole\",superClass:[\"BaseElement\"],properties:[{name:\"resourceRef\",type:\"Resource\",isReference:!0},{name:\"resourceParameterBindings\",type:\"ResourceParameterBinding\",isMany:!0},{name:\"resourceAssignmentExpression\",type:\"ResourceAssignmentExpression\"},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ResourceParameterBinding\",properties:[{name:\"expression\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"parameterRef\",type:\"ResourceParameter\",isAttr:!0,isReference:!0}],superClass:[\"BaseElement\"]},{name:\"ResourceAssignmentExpression\",properties:[{name:\"expression\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}],superClass:[\"BaseElement\"]},{name:\"Import\",properties:[{name:\"importType\",isAttr:!0,type:\"String\"},{name:\"location\",isAttr:!0,type:\"String\"},{name:\"namespace\",isAttr:!0,type:\"String\"}]},{name:\"Definitions\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"targetNamespace\",isAttr:!0,type:\"String\"},{name:\"expressionLanguage\",default:\"http://www.w3.org/1999/XPath\",isAttr:!0,type:\"String\"},{name:\"typeLanguage\",default:\"http://www.w3.org/2001/XMLSchema\",isAttr:!0,type:\"String\"},{name:\"imports\",type:\"Import\",isMany:!0},{name:\"extensions\",type:\"Extension\",isMany:!0},{name:\"rootElements\",type:\"RootElement\",isMany:!0},{name:\"diagrams\",isMany:!0,type:\"bpmndi:BPMNDiagram\"},{name:\"exporter\",isAttr:!0,type:\"String\"},{name:\"relationships\",type:\"Relationship\",isMany:!0},{name:\"exporterVersion\",isAttr:!0,type:\"String\"}]}],enumerations:[{name:\"ProcessType\",literalValues:[{name:\"None\"},{name:\"Public\"},{name:\"Private\"}]},{name:\"GatewayDirection\",literalValues:[{name:\"Unspecified\"},{name:\"Converging\"},{name:\"Diverging\"},{name:\"Mixed\"}]},{name:\"EventBasedGatewayType\",literalValues:[{name:\"Parallel\"},{name:\"Exclusive\"}]},{name:\"RelationshipDirection\",literalValues:[{name:\"None\"},{name:\"Forward\"},{name:\"Backward\"},{name:\"Both\"}]},{name:\"ItemKind\",literalValues:[{name:\"Physical\"},{name:\"Information\"}]},{name:\"ChoreographyLoopType\",literalValues:[{name:\"None\"},{name:\"Standard\"},{name:\"MultiInstanceSequential\"},{name:\"MultiInstanceParallel\"}]},{name:\"AssociationDirection\",literalValues:[{name:\"None\"},{name:\"One\"},{name:\"Both\"}]},{name:\"MultiInstanceBehavior\",literalValues:[{name:\"None\"},{name:\"One\"},{name:\"All\"},{name:\"Complex\"}]},{name:\"AdHocOrdering\",literalValues:[{name:\"Parallel\"},{name:\"Sequential\"}]}],xml:{tagAlias:\"lowerCase\",typePrefix:\"t\"}},bpmndi:{name:\"BPMNDI\",uri:\"http://www.omg.org/spec/BPMN/20100524/DI\",prefix:\"bpmndi\",types:[{name:\"BPMNDiagram\",properties:[{name:\"plane\",type:\"BPMNPlane\",redefines:\"di:Diagram#rootElement\"},{name:\"labelStyle\",type:\"BPMNLabelStyle\",isMany:!0}],superClass:[\"di:Diagram\"]},{name:\"BPMNPlane\",properties:[{name:\"bpmnElement\",isAttr:!0,isReference:!0,type:\"bpmn:BaseElement\",redefines:\"di:DiagramElement#modelElement\"}],superClass:[\"di:Plane\"]},{name:\"BPMNShape\",properties:[{name:\"bpmnElement\",isAttr:!0,isReference:!0,type:\"bpmn:BaseElement\",redefines:\"di:DiagramElement#modelElement\"},{name:\"isHorizontal\",isAttr:!0,type:\"Boolean\"},{name:\"isExpanded\",isAttr:!0,type:\"Boolean\"},{name:\"isMarkerVisible\",isAttr:!0,type:\"Boolean\"},{name:\"label\",type:\"BPMNLabel\"},{name:\"isMessageVisible\",isAttr:!0,type:\"Boolean\"},{name:\"participantBandKind\",type:\"ParticipantBandKind\",isAttr:!0},{name:\"choreographyActivityShape\",type:\"BPMNShape\",isAttr:!0,isReference:!0}],superClass:[\"di:LabeledShape\"]},{name:\"BPMNEdge\",properties:[{name:\"label\",type:\"BPMNLabel\"},{name:\"bpmnElement\",isAttr:!0,isReference:!0,type:\"bpmn:BaseElement\",redefines:\"di:DiagramElement#modelElement\"},{name:\"sourceElement\",isAttr:!0,isReference:!0,type:\"di:DiagramElement\",redefines:\"di:Edge#source\"},{name:\"targetElement\",isAttr:!0,isReference:!0,type:\"di:DiagramElement\",redefines:\"di:Edge#target\"},{name:\"messageVisibleKind\",type:\"MessageVisibleKind\",isAttr:!0,default:\"initiating\"}],superClass:[\"di:LabeledEdge\"]},{name:\"BPMNLabel\",properties:[{name:\"labelStyle\",type:\"BPMNLabelStyle\",isAttr:!0,isReference:!0,redefines:\"di:DiagramElement#style\"}],superClass:[\"di:Label\"]},{name:\"BPMNLabelStyle\",properties:[{name:\"font\",type:\"dc:Font\"}],superClass:[\"di:Style\"]}],enumerations:[{name:\"ParticipantBandKind\",literalValues:[{name:\"top_initiating\"},{name:\"middle_initiating\"},{name:\"bottom_initiating\"},{name:\"top_non_initiating\"},{name:\"middle_non_initiating\"},{name:\"bottom_non_initiating\"}]},{name:\"MessageVisibleKind\",literalValues:[{name:\"initiating\"},{name:\"non_initiating\"}]}],associations:[]},dc:{name:\"DC\",uri:\"http://www.omg.org/spec/DD/20100524/DC\",prefix:\"dc\",types:[{name:\"Boolean\"},{name:\"Integer\"},{name:\"Real\"},{name:\"String\"},{name:\"Font\",properties:[{name:\"name\",type:\"String\",isAttr:!0},{name:\"size\",type:\"Real\",isAttr:!0},{name:\"isBold\",type:\"Boolean\",isAttr:!0},{name:\"isItalic\",type:\"Boolean\",isAttr:!0},{name:\"isUnderline\",type:\"Boolean\",isAttr:!0},{name:\"isStrikeThrough\",type:\"Boolean\",isAttr:!0}]},{name:\"Point\",properties:[{name:\"x\",type:\"Real\",default:\"0\",isAttr:!0},{name:\"y\",type:\"Real\",default:\"0\",isAttr:!0}]},{name:\"Bounds\",properties:[{name:\"x\",type:\"Real\",default:\"0\",isAttr:!0},{name:\"y\",type:\"Real\",default:\"0\",isAttr:!0},{name:\"width\",type:\"Real\",isAttr:!0},{name:\"height\",type:\"Real\",isAttr:!0}]}],associations:[]},di:{name:\"DI\",uri:\"http://www.omg.org/spec/DD/20100524/DI\",prefix:\"di\",types:[{name:\"DiagramElement\",isAbstract:!0,properties:[{name:\"id\",isAttr:!0,isId:!0,type:\"String\"},{name:\"extension\",type:\"Extension\"},{name:\"owningDiagram\",type:\"Diagram\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"owningElement\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"modelElement\",isReadOnly:!0,isVirtual:!0,isReference:!0,type:\"Element\"},{name:\"style\",type:\"Style\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"ownedElement\",type:\"DiagramElement\",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:\"Node\",isAbstract:!0,superClass:[\"DiagramElement\"]},{name:\"Edge\",isAbstract:!0,superClass:[\"DiagramElement\"],properties:[{name:\"source\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"target\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"waypoint\",isUnique:!1,isMany:!0,type:\"dc:Point\",xml:{serialize:\"xsi:type\"}}]},{name:\"Diagram\",isAbstract:!0,properties:[{name:\"id\",isAttr:!0,isId:!0,type:\"String\"},{name:\"rootElement\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"documentation\",isAttr:!0,type:\"String\"},{name:\"resolution\",isAttr:!0,type:\"Real\"},{name:\"ownedStyle\",type:\"Style\",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:\"Shape\",isAbstract:!0,superClass:[\"Node\"],properties:[{name:\"bounds\",type:\"dc:Bounds\"}]},{name:\"Plane\",isAbstract:!0,superClass:[\"Node\"],properties:[{name:\"planeElement\",type:\"DiagramElement\",subsettedProperty:\"DiagramElement-ownedElement\",isMany:!0}]},{name:\"LabeledEdge\",isAbstract:!0,superClass:[\"Edge\"],properties:[{name:\"ownedLabel\",type:\"Label\",isReadOnly:!0,subsettedProperty:\"DiagramElement-ownedElement\",isMany:!0,isVirtual:!0}]},{name:\"LabeledShape\",isAbstract:!0,superClass:[\"Shape\"],properties:[{name:\"ownedLabel\",type:\"Label\",isReadOnly:!0,subsettedProperty:\"DiagramElement-ownedElement\",isMany:!0,isVirtual:!0}]},{name:\"Label\",isAbstract:!0,superClass:[\"Node\"],properties:[{name:\"bounds\",type:\"dc:Bounds\"}]},{name:\"Style\",isAbstract:!0,properties:[{name:\"id\",isAttr:!0,isId:!0,type:\"String\"}]},{name:\"Extension\",properties:[{name:\"values\",isMany:!0,type:\"Element\"}]}],associations:[],xml:{tagAlias:\"lowerCase\"}},bioc:{name:\"bpmn.io colors for BPMN\",uri:\"http://bpmn.io/schema/bpmn/biocolor/1.0\",prefix:\"bioc\",types:[{name:\"ColoredShape\",extends:[\"bpmndi:BPMNShape\"],properties:[{name:\"stroke\",isAttr:!0,type:\"String\"},{name:\"fill\",isAttr:!0,type:\"String\"}]},{name:\"ColoredEdge\",extends:[\"bpmndi:BPMNEdge\"],properties:[{name:\"stroke\",isAttr:!0,type:\"String\"},{name:\"fill\",isAttr:!0,type:\"String\"}]}],enumerations:[],associations:[]},color:{name:\"BPMN in Color\",uri:\"http://www.omg.org/spec/BPMN/non-normative/color/1.0\",prefix:\"color\",types:[{name:\"ColoredLabel\",extends:[\"bpmndi:BPMNLabel\"],properties:[{name:\"color\",isAttr:!0,type:\"String\"}]},{name:\"ColoredShape\",extends:[\"bpmndi:BPMNShape\"],properties:[{name:\"background-color\",isAttr:!0,type:\"String\"},{name:\"border-color\",isAttr:!0,type:\"String\"}]},{name:\"ColoredEdge\",extends:[\"bpmndi:BPMNEdge\"],properties:[{name:\"border-color\",isAttr:!0,type:\"String\"}]}],enumerations:[],associations:[]}};function Pr(e,t){return new Cr(E({},Mr,e),t)}var Or=\"Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472\";function Tr(e,t){return e.$instanceOf(t)}function Nr(e){var t={},n=[],i={};function r(e,t){return function(n){e(n,t)}}function o(e){t[e.id]=e}function a(t,n){try{var r=i[t.id]&&function(t,n){if(t.gfx)throw new Error(`already rendered ${Et(t)}`);return e.element(t,i[t.id],n)}(t,n);return o(t),r}catch(e){s(e.message,{element:t,error:e}),console.error(`failed to import ${Et(t)}`,e)}}function s(t,n){e.error(t,n)}var l=this.registerDi=function(e){var t,n=e.bpmnElement;n?i[n.id]?s(`multiple DI elements defined for ${Et(n)}`,{element:n}):(i[n.id]=e,c(t=n,\"di\")||Object.defineProperty(t,\"di\",{enumerable:!1,get:function(){throw new Error(Or)}})):s(`no bpmnElement referenced in ${Et(e)}`,{element:e})};function p(e){var t;t=e.plane,l(t),f(t.planeElement,m)}function m(e){l(e)}this.handleDefinitions=function(o,a){var c=o.diagrams;if(a&&-1===c.indexOf(a))throw new Error(\"diagram not part of <bpmn:Definitions />\");if(!a&&c&&c.length&&(a=c[0]),!a)throw new Error(\"no diagram to display\");i={},p(a);var m=a.plane;if(!m)throw new Error(`no plane for ${Et(a)}`);var v=m.bpmnElement;if(!v){if(v=function(e){return u(e.rootElements,(function(e){return Tr(e,\"bpmn:Process\")||Tr(e,\"bpmn:Collaboration\")}))}(o),!v)throw new Error(\"no process or collaboration to display\");s(`correcting missing bpmnElement on ${Et(m)} to ${Et(v)}`),m.bpmnElement=v,l(m)}var x,w,b=function(t,n){return e.root(t,i[t.id],n)}(v,m);if(Tr(v,\"bpmn:Process\")||Tr(v,\"bpmn:SubProcess\"))y(v,b);else{if(!Tr(v,\"bpmn:Collaboration\"))throw new Error(`unsupported bpmnElement for ${Et(m)}: ${Et(v)}`);w=b,f((x=v).participants,r(P,w)),E(x.artifacts,w),n.push((function(){!function(e,t){f(e,r(g,t))}(x.messageFlows,w)})),function(e,n){var i=h(e,(function(e){return!t[e.id]&&Tr(e,\"bpmn:Process\")&&e.laneSets}));i.forEach(r(y,n))}(o.rootElements,b)}d(n)};var d=this.handleDeferred=function(){for(;n.length;)n.shift()()};function y(e,t){M(e,t),_(e.ioSpecification,t),E(e.artifacts,t),o(e)}function g(e,t){a(e,t)}function v(e,t){a(e,t)}function x(e,t){a(e,t)}function w(e,t){a(e,t)}function b(e,t){a(e,t)}function E(e,t){f(e,(function(e){Tr(e,\"bpmn:Association\")?n.push((function(){b(e,t)})):b(e,t)}))}function _(e,t){e&&(f(e.dataInputs,r(x,t)),f(e.dataOutputs,r(w,t)))}var A=this.handleSubProcess=function(e,t){M(e,t),E(e.artifacts,t)};function R(e,t){var i=a(e,t);Tr(e,\"bpmn:SubProcess\")&&A(e,i||t),Tr(e,\"bpmn:Activity\")&&_(e.ioSpecification,t),n.push((function(){f(e.dataInputAssociations,r(v,t)),f(e.dataOutputAssociations,r(v,t))}))}function S(e,t){a(e,t)}function k(e,t){n.push((function(){var n=a(e,t);e.childLaneSet&&C(e.childLaneSet,n||t),function(e){f(e.flowNodeRef,(function(t){var n=t.get(\"lanes\");n&&n.push(e)}))}(e)}))}function C(e,t){f(e.lanes,r(k,t))}function M(e,t){!function(e,t){f(e,(function(e){Tr(e,\"bpmn:SequenceFlow\")?n.push((function(){!function(e,t){a(e,t)}(e,t)})):Tr(e,\"bpmn:BoundaryEvent\")?n.unshift((function(){R(e,t)})):Tr(e,\"bpmn:FlowNode\")?R(e,t):Tr(e,\"bpmn:DataObject\")||(Tr(e,\"bpmn:DataStoreReference\")||Tr(e,\"bpmn:DataObjectReference\")?S(e,t):s(`unrecognized flowElement ${Et(e)} in context ${Et(t&&t.businessObject)}`,{element:e,context:t}))}))}(e.flowElements,t),e.laneSets&&function(e,t){f(e,r(C,t))}(e.laneSets,t)}function P(e,t){var n=a(e,t),i=e.processRef;i&&y(i,n||t)}}function Dr(e,t,n){var i,r,o,a=[];function s(e,t){var n=new Nr({root:function(e,t){return i.add(e,t)},element:function(e,t,n){return i.add(e,t,n)},error:function(e,t){a.push({message:e,context:t})}});t=t||e.diagrams&&e.diagrams[0];var r=function(e,t){if(!t||!t.plane)return;var n,i=t.plane.bpmnElement,r=i;R(i,\"bpmn:Process\")||R(i,\"bpmn:Collaboration\")||(r=function(e){var t=e;for(;t;){if(R(t,\"bpmn:Process\"))return t;t=t.$parent}}\n/**\n   * This file must not be changed or exchanged.\n   *\n   * @see http://bpmn.io/license for more information.\n   */(i));n=R(r,\"bpmn:Collaboration\")?r:u(e.rootElements,(function(e){if(R(e,\"bpmn:Collaboration\"))return u(e.participants,(function(e){return e.processRef===r}))}));var o=[r];n&&(o=function(e,t){let n=[];return f(e,(function(e,i){n.push(t(e,i))})),n}(n.participants,(function(e){return e.processRef}))).push(n);var a=Br(o),s=[t],l=[i];return f(e.diagrams,(function(e){if(e.plane){var t=e.plane.bpmnElement;-1!==a.indexOf(t)&&-1===l.indexOf(t)&&(s.push(e),l.push(t))}})),s}(e,t);if(!r)throw new Error(\"no diagram to display\");f(r,(function(t){n.handleDefinitions(e,t)}));var s=t.plane.bpmnElement.id;o.setRootElement(o.findRoot(s+\"_plane\")||o.findRoot(s))}return new Promise((function(l,p){try{return i=e.get(\"bpmnImporter\"),r=e.get(\"eventBus\"),o=e.get(\"canvas\"),r.fire(\"import.render.start\",{definitions:t}),s(t,n),r.fire(\"import.render.complete\",{error:undefined,warnings:a}),l({warnings:a})}catch(e){return e.warnings=a,p(e)}}))}function Br(e){var t=[];return f(e,(function(e){e&&(t.push(e),t=t.concat(Br(e.flowElements)))})),t}var Lr,Ir='<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14.02 5.57\" width=\"53\" height=\"21\"><path fill=\"currentColor\" d=\"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z\"/><path fill=\"currentColor\" d=\"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z\"/></svg>',jr={verticalAlign:\"middle\"},Fr={color:\"#404040\"},Vr={zIndex:\"1001\",position:\"fixed\",top:\"0\",left:\"0\",right:\"0\",bottom:\"0\"},Wr={width:\"100%\",height:\"100%\",background:\"rgba(40,40,40,0.2)\"},$r={position:\"absolute\",left:\"50%\",top:\"40%\",transform:\"translate(-50%)\",width:\"260px\",padding:\"10px\",background:\"white\",boxShadow:\"0 1px 4px rgba(0,0,0,0.3)\",fontFamily:\"Helvetica, Arial, sans-serif\",fontSize:\"14px\",display:\"flex\",lineHeight:\"1.3\"},zr='<div class=\"bjs-powered-by-lightbox\"><div class=\"backdrop\"></div><div class=\"notice\"><a href=\"https://bpmn.io\" target=\"_blank\" rel=\"noopener\" class=\"link\">'+Ir+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href=\"https://bpmn.io\" target=\"_blank\" rel=\"noopener\">bpmn.io</a>.</span></div></div>';function Gr(){Lr||(Oe(Lr=qe(zr),Vr),Oe(Ye(\"svg\",Lr),jr),Oe(Ye(\".backdrop\",Lr),Wr),Oe(Ye(\".notice\",Lr),$r),Oe(Ye(\".link\",Lr),Fr,{margin:\"15px 20px 15px 10px\",alignSelf:\"center\"}),Ge.bind(Lr,\".backdrop\",\"click\",(function(e){document.body.removeChild(Lr)}))),document.body.appendChild(Lr)}\n/**\n   * The code in the <project-logo></project-logo> area\n   * must not be changed.\n   *\n   * @see http://bpmn.io/license for more information.\n   */function Hr(e){e=E({},Ur,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),\n/**\n   * Adds the project logo to the diagram container as\n   * required by the bpmn.io license.\n   *\n   * @see http://bpmn.io/license\n   *\n   * @param {Element} container\n   */\nfunction(e){const t=qe('<a href=\"http://bpmn.io\" target=\"_blank\" class=\"bjs-powered-by\" title=\"Powered by bpmn.io\" >'+Ir+\"</a>\");Oe(Ye(\"svg\",t),jr),Oe(t,Fr,{position:\"absolute\",bottom:\"15px\",right:\"15px\",zIndex:\"100\"}),e.appendChild(t),We.bind(t,\"click\",(function(e){Gr(),e.preventDefault()}))}(this._container),this._init(this._container,this._moddle,e)}function Kr(e,t){return e.warnings=t,e}e(Hr,mi),Hr.prototype.importXML=async function(e,t){const n=this;let i=[];try{let o;e=this._emit(\"import.parse.start\",{xml:e})||e;try{o=await this._moddle.fromXML(e,\"bpmn:Definitions\")}catch(e){throw this._emit(\"import.parse.complete\",{error:e}),e}let a=o.rootElement;const s=o.references,l=o.warnings,p=o.elementsById;i=i.concat(l),a=this._emit(\"import.parse.complete\",(r={error:null,definitions:a,elementsById:p,references:s,warnings:i},n.get(\"eventBus\").createEvent(r)))||a;const c=await this.importDefinitions(a,t);return i=i.concat(c.warnings),this._emit(\"import.done\",{error:null,warnings:i}),{warnings:i}}catch(e){let t=e;throw i=i.concat(t.warnings||[]),Kr(t,i),t=function(e){const t=/unparsable content <([^>]+)> detected([\\s\\S]*)$/.exec(e.message);t&&(e.message=\"unparsable content <\"+t[1]+\"> detected; this may indicate an invalid BPMN 2.0 diagram file\"+t[2]);return e}(t),this._emit(\"import.done\",{error:t,warnings:t.warnings}),t}var r},Hr.prototype.importDefinitions=async function(e,t){this._setDefinitions(e);return{warnings:(await this.open(t)).warnings}},Hr.prototype.open=async function(e){const t=this._definitions;let n=e;if(!t){const e=new Error(\"no XML imported\");throw Kr(e,[]),e}if(\"string\"==typeof e&&(n=function(e,t){if(!t)return null;return u(e.diagrams,(function(e){return e.id===t}))||null}(t,e),!n)){const t=new Error(\"BPMNDiagram <\"+e+\"> not found\");throw Kr(t,[]),t}try{this.clear()}catch(e){throw Kr(e,[]),e}const{warnings:i}=await Dr(this,t,n);return{warnings:i}},Hr.prototype.saveXML=async function(e){e=e||{};let t,n,i=this._definitions;try{if(!i)throw new Error(\"no definitions loaded\");i=this._emit(\"saveXML.start\",{definitions:i})||i;n=(await this._moddle.toXML(i,e)).xml,n=this._emit(\"saveXML.serialized\",{xml:n})||n}catch(e){t=e}const r=t?{error:t}:{xml:n};if(this._emit(\"saveXML.done\",r),t)throw t;return r},Hr.prototype.saveSVG=async function(){let e,t;this._emit(\"saveSVG.start\");try{const t=this.get(\"canvas\"),n=t.getActiveLayer(),i=Ye(\":scope > defs\",t._svg),r=re(n),o=i?\"<defs>\"+re(i)+\"</defs>\":\"\",a=n.getBBox();e='<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- created with bpmn-js / http://bpmn.io --\\x3e\\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"'+a.width+'\" height=\"'+a.height+'\" viewBox=\"'+a.x+\" \"+a.y+\" \"+a.width+\" \"+a.height+'\" version=\"1.1\">'+o+r+\"</svg>\"}catch(e){t=e}if(this._emit(\"saveSVG.done\",{error:t,svg:e}),t)throw t;return{svg:e}},Hr.prototype._setDefinitions=function(e){this._definitions=e},Hr.prototype.getModules=function(){return this._modules},Hr.prototype.clear=function(){this.getDefinitions()&&mi.prototype.clear.call(this)},Hr.prototype.destroy=function(){mi.prototype.destroy.call(this),Xe(this._container)},Hr.prototype.on=function(e,t,n,i){return this.get(\"eventBus\").on(e,t,n,i)},Hr.prototype.off=function(e,t){this.get(\"eventBus\").off(e,t)},Hr.prototype.attachTo=function(e){if(!e)throw new Error(\"parentNode required\");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),\"string\"==typeof e&&(e=Ye(e)),e.appendChild(this._container),this._emit(\"attach\",{}),this.get(\"canvas\").resized()},Hr.prototype.getDefinitions=function(){return this._definitions},Hr.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit(\"detach\",{}),t.removeChild(e))},Hr.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[].concat([{bpmnjs:[\"value\",this],moddle:[\"value\",t]}],i,r),a=E(function(e,t){let n={};return f(Object(e),(function(e,i){-1===t.indexOf(i)&&(n[i]=e)})),n}(n,[\"additionalModules\"]),{canvas:E({},n.canvas,{container:e}),modules:o});mi.call(this,a),n&&n.container&&this.attachTo(n.container)},Hr.prototype._emit=function(e,t){return this.get(\"eventBus\").fire(e,t)},Hr.prototype._createContainer=function(e){const t=qe('<div class=\"bjs-container\"></div>');return Oe(t,{width:qr(e.width),height:qr(e.height),position:e.position}),t},Hr.prototype._createModdle=function(e){return new Pr(E({},this._moddleExtensions,e.moddleExtensions))},Hr.prototype._modules=[];const Ur={width:\"100%\",height:\"100%\",position:\"relative\"};function qr(e){return e+(s(e)?\"px\":\"\")}function Yr(e){Hr.call(this,e)}return e(Yr,Hr),Yr.prototype._modules=[kt,nn,un,It,Rn,gt],Yr.prototype._moddleExtensions={},Yr}));\n","import React, { useEffect, useRef } from 'react';\r\nimport { formatTimelineTime } from '../utilities';\r\n\r\nconst TimelineViewer = ({ logs, headerActions, onUpdateLog, piStatusNode }) => {\r\n    const scrollRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (scrollRef.current) {\r\n            scrollRef.current.scrollLeft = scrollRef.current.scrollWidth;\r\n        }\r\n    }, [logs]);\r\n\r\n    return (\r\n        <div className=\"h-full w-full bg-[#1e1e1e] border-b border-white/10 flex flex-col\">\r\n            <div className=\"px-6 py-2 border-b border-white/5 flex justify-between items-center bg-[#252525]\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <h3 className=\"text-sm font-medium text-white/70 uppercase tracking-wider mr-4\"> Timeline</h3>\r\n                    <div className=\"flex items-center gap-3 text-xs\">\r\n                        <div className=\"flex items-center gap-1.5\"><div className=\"w-2 h-2 rounded-full bg-[#8ab4f8]\"></div><span className=\"text-white/60\"></span></div>\r\n                        <div className=\"flex items-center gap-1.5\"><div className=\"w-2 h-2 rounded-full bg-[#81c995]\"></div><span className=\"text-white/60\"></span></div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    {piStatusNode}\r\n                    <span className=\"text-xs text-white/30\">{logs.length} </span>\r\n                    {headerActions}\r\n                </div>\r\n            </div>\r\n            <div ref={scrollRef} className=\"flex-1 overflow-x-auto overflow-y-hidden flex items-start px-6 gap-8 scrollbar-thin pt-4 pb-8\" onWheel={(e) => {\r\n                if (scrollRef.current) {\r\n                    scrollRef.current.scrollLeft += e.deltaY;\r\n                }\r\n            }}>\r\n                {logs.length === 0 && (\r\n                    <div className=\"text-white/20 text-sm italic w-full text-center\">...</div>\r\n                )}\r\n                {logs.map((log, idx) => (\r\n                    <div key={idx} className=\"relative flex flex-col items-center min-w-[120px] group\">\r\n                        {/* Connector Line */}\r\n                        {idx < logs.length - 1 && (\r\n                            <div className=\"absolute top-[18px] left-[50%] w-[calc(100%+32px)] h-[2px] bg-white/10 -z-0\"></div>\r\n                        )}\r\n\r\n                        {/* Node Circle */}\r\n                        <div className={`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold z-10 mb-2 shadow-lg transition-transform group-hover:scale-110 ${log.message.includes('') ? 'bg-[#81c995] text-[#0f5132]' : 'bg-[#8ab4f8] text-[#002d6f]'\r\n                            }`}>\r\n                            {idx + 1}\r\n                        </div>\r\n\r\n                        <div className=\"text-xs text-white/50 mt-1\">{formatTimelineTime(log.time)}</div>\r\n                        <div className=\"text-sm font-medium text-white/90 mt-1 text-center px-2\">{log.message.split(': ')[1] || log.message}</div>\r\n\r\n                        {/* Indicators Container */}\r\n                        <div className=\"flex gap-2 mt-2\">\r\n                            {/* Note Indicator */}\r\n                            {log.note && (\r\n                                <div\r\n                                    className=\"text-xs text-[#fbbc04] font-bold cursor-pointer animate-pulse hover:scale-110 transition border border-[#fbbc04]/30 px-2 py-0.5 rounded bg-[#fbbc04]/10\"\r\n                                    title={log.note}\r\n                                    onClick={() => {\r\n                                        if (onUpdateLog) {\r\n                                            const newNote = prompt(':', log.note);\r\n                                            if (newNote !== null) {\r\n                                                onUpdateLog(idx, newNote);\r\n                                            }\r\n                                        }\r\n                                    }}\r\n                                >\r\n                                    \r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Data Indicator */}\r\n                            {log.value && log.value !== '-' && log.value !== '\"-\"' && (\r\n                                <div\r\n                                    className=\"text-xs text-[#81c995] font-bold cursor-help hover:scale-110 transition border border-[#81c995]/30 px-2 py-0.5 rounded bg-[#81c995]/10\"\r\n                                    title={log.value}\r\n                                >\r\n                                    \r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TimelineViewer;\r\n","import React from 'react';\r\n\r\nconst FloatingTaskWindow = ({ task, onStart, onEnd, onFinish, onClose, note, setNote, tagValues, loadingTag }) => {\r\n    if (!task) return null;\r\n\r\n    const isRunning = task.status === 'running';\r\n    const isCompleted = task.status === 'completed';\r\n    const isEndEvent = task.type === 'bpmn:EndEvent';\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\" onClick={onClose}>\r\n            <div\r\n                className=\"bg-[#1e1e1e] border border-white/10 rounded-2xl shadow-2xl w-[400px] overflow-hidden animate-scale-in\"\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                {/* Header */}\r\n                <div className=\"px-6 py-4 border-b border-white/10 flex justify-between items-center bg-[#252525]\">\r\n                    <h3 className=\"text-lg font-bold text-white/90\">{task.name}</h3>\r\n                    <button onClick={onClose} className=\"text-white/40 hover:text-white transition\"></button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"p-6\">\r\n                    {/* PI Data Section */}\r\n                    {task.tag && (\r\n                        <div className=\"mb-6 bg-[#121212] rounded-xl p-4 border border-white/5\">\r\n                            <div className=\"text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\"> (PI Tag)</div>\r\n                            {loadingTag ? (\r\n                                <div className=\"text-white/40 text-sm animate-pulse\">...</div>\r\n                            ) : (\r\n                                <div className=\"grid gap-2\">\r\n                                    {tagValues.map((tv, idx) => (\r\n                                        <div key={idx} className=\"flex justify-between items-end\">\r\n                                            <span className=\"text-white/60 text-sm\">{tv.tag}</span>\r\n                                            <span className=\"text-[#81c995] font-mono font-bold\">\r\n                                                {tv.value !== undefined ? Number(tv.value).toFixed(task.precision) : '-'} <span className=\"text-sm text-white/40\">{task.unit}</span>\r\n                                            </span>\r\n                                        </div>\r\n                                    ))}\r\n                                    {tagValues.length === 0 && <div className=\"text-white/30 text-sm\"></div>}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Note Section */}\r\n                    <div className=\"mb-6\">\r\n                        <label className=\"block text-xs font-medium text-white/60 mb-2 uppercase tracking-wider\"> / </label>\r\n                        <textarea\r\n                            value={note}\r\n                            onChange={e => setNote(e.target.value)}\r\n                            className=\"w-full bg-[#2d2d2d] border border-white/10 rounded-xl p-3 text-white focus:border-[#8ab4f8] outline-none h-24 text-sm resize-none\"\r\n                            placeholder=\"...\"\r\n                            disabled={isCompleted}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-3\">\r\n                        {isEndEvent ? (\r\n                            <button\r\n                                onClick={onFinish}\r\n                                className=\"w-full py-3 rounded-xl font-medium bg-[#f28b82] hover:bg-[#f6aea9] text-[#5c1e1e] transition shadow-lg shadow-red-500/20\"\r\n                            >\r\n                                \r\n                            </button>\r\n                        ) : (\r\n                            <>\r\n                                {!isRunning && !isCompleted && (\r\n                                    <button\r\n                                        onClick={onStart}\r\n                                        className=\"w-full py-3 rounded-xl font-medium bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] transition shadow-lg shadow-blue-500/20\"\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                )}\r\n\r\n                                {isRunning && (\r\n                                    <button\r\n                                        onClick={onEnd}\r\n                                        className=\"w-full py-3 rounded-xl font-medium bg-[#81c995] hover:bg-[#a8dab5] text-[#0f5132] transition shadow-lg shadow-green-500/20\"\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                )}\r\n\r\n                                {isCompleted && (\r\n                                    <div className=\"w-full py-3 rounded-xl font-medium bg-[#2d2d2d] text-white/40 text-center border border-white/5 cursor-not-allowed\">\r\n                                        \r\n                                    </div>\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FloatingTaskWindow;\r\n","import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\r\nimport BpmnJS from 'bpmn-js/dist/bpmn-viewer.production.min.js';\r\nimport TimelineViewer from './TimelineViewer';\r\nimport FloatingTaskWindow from './FloatingTaskWindow';\r\nimport { API_BASE, getCurrentTime } from '../utilities';\r\n\r\nconst Operator = ({ processId, onNavigate }) => {\r\n    const containerRef = useRef(null);\r\n    const viewerRef = useRef(null);\r\n    const [process, setProcess] = useState(null);\r\n    const [logs, setLogs] = useState([]);\r\n    const [currentRunningTaskId, setCurrentRunningTaskId] = useState(null);\r\n    const [isFinished, setIsFinished] = useState(false);\r\n\r\n    // Floating Window State\r\n    const [showWindow, setShowWindow] = useState(false);\r\n    const [windowTask, setWindowTask] = useState(null);\r\n    const [note, setNote] = useState('');\r\n    const [tagValues, setTagValues] = useState([]);\r\n    const [loadingTag, setLoadingTag] = useState(false);\r\n    const [piConnecting, setPiConnecting] = useState(false);\r\n    const [piStatus, setPiStatus] = useState('Checking...');\r\n    const [onlineCount, setOnlineCount] = useState(1);\r\n    const [isTimelineCollapsed, setIsTimelineCollapsed] = useState(false);\r\n    const userId = useMemo(() => 'user_' + Math.random().toString(36).substr(2, 9), []);\r\n\r\n    // Zoom\r\n    const handleZoom = (delta) => {\r\n        if (viewerRef.current) {\r\n            const canvas = viewerRef.current.get('canvas');\r\n            canvas.zoom(canvas.zoom() + delta);\r\n        }\r\n    };\r\n\r\n    const logsRef = useRef(logs);\r\n    const runningTaskRef = useRef(currentRunningTaskId);\r\n\r\n    useEffect(() => { logsRef.current = logs; }, [logs]);\r\n    useEffect(() => { runningTaskRef.current = currentRunningTaskId; }, [currentRunningTaskId]);\r\n\r\n    // Check PI Status on Mount\r\n    useEffect(() => {\r\n        fetch(`${API_BASE}/pi_status`)\r\n            .then(res => res.json())\r\n            .then(data => setPiStatus(data.status));\r\n    }, []);\r\n\r\n    // Check Predecessors\r\n    const checkPredecessors = (element, currentLogs) => {\r\n        if (!element || !element.incoming || element.incoming.length === 0) return true;\r\n        return element.incoming.every(connection => {\r\n            if (connection.source.type === 'bpmn:StartEvent') return true;\r\n            const sourceName = connection.source.businessObject.name;\r\n            return currentLogs.some(l => l.message.startsWith('') && l.message.includes(sourceName));\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Define applyStyles locally\r\n        const applyStyles = () => {\r\n            const viewer = viewerRef.current;\r\n            if (!viewer) return;\r\n\r\n            const elementRegistry = viewer.get('elementRegistry');\r\n            const canvas = viewer.get('canvas');\r\n\r\n            elementRegistry.forEach(element => {\r\n                if (element.type === 'bpmn:TextAnnotation' || element.type === 'bpmn:Group') {\r\n                    const businessObj = element.businessObject;\r\n                    let data = {};\r\n\r\n                    if (businessObj.documentation && businessObj.documentation.length > 0) {\r\n                        try {\r\n                            data = JSON.parse(businessObj.documentation[0].text);\r\n                        } catch (e) { }\r\n                    }\r\n\r\n                    // Default for Group\r\n                    if (element.type === 'bpmn:Group') {\r\n                        if (!data.noteColor) data.noteColor = '#fff9c4';\r\n                        if (!data.borderColor) data.borderColor = '#d6b656';\r\n                    }\r\n\r\n                    const hasStyle = data.noteColor || data.htmlContent || data.textFontSize || data.textColor || data.borderColor;\r\n\r\n                    if (hasStyle) {\r\n                        try {\r\n                            const gfx = canvas.getGraphics(element);\r\n                            if (!gfx) return;\r\n\r\n                            // Clear\r\n                            const existingBg = gfx.querySelector('.sticky-bg');\r\n                            if (existingBg) existingBg.remove();\r\n                            const existingFo = gfx.querySelector('.sticky-fo');\r\n                            if (existingFo) existingFo.remove();\r\n\r\n                            // Hide defaults\r\n                            ['text', 'path', 'rect'].forEach(tag => {\r\n                                const el = gfx.querySelector(tag);\r\n                                if (el) el.style.display = 'none';\r\n                            });\r\n\r\n                            // Dimensions\r\n                            let width = element.width || (element.di && element.di.bounds && element.di.bounds.width) || 300;\r\n                            let height = element.height || (element.di && element.di.bounds && element.di.bounds.height) || 300;\r\n\r\n                            // 1. Background\r\n                            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n                            rect.setAttribute('class', 'sticky-bg');\r\n                            rect.setAttribute('width', width);\r\n                            rect.setAttribute('height', height);\r\n                            rect.setAttribute('rx', '10');\r\n                            rect.setAttribute('ry', '10');\r\n                            rect.setAttribute('fill', data.noteColor || '#fff9c4');\r\n                            rect.setAttribute('stroke', data.borderColor || '#d6b656');\r\n                            rect.setAttribute('stroke-width', '2');\r\n                            rect.setAttribute('fill-opacity', data.noteOpacity !== undefined ? data.noteOpacity : 1);\r\n\r\n                            const visual = gfx.querySelector('.djs-visual');\r\n                            if (visual) {\r\n                                if (visual.firstChild) visual.insertBefore(rect, visual.firstChild);\r\n                                else visual.appendChild(rect);\r\n                            }\r\n\r\n                            // 2. Content\r\n                            if (data.htmlContent) {\r\n                                const fo = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\r\n                                fo.setAttribute('class', 'sticky-fo');\r\n                                fo.setAttribute('width', width - 20);\r\n                                fo.setAttribute('height', height - 20);\r\n                                fo.setAttribute('x', '10');\r\n                                fo.setAttribute('y', '10');\r\n\r\n                                const div = document.createElement('div');\r\n                                div.xmlns = 'http://www.w3.org/1999/xhtml';\r\n                                div.style.width = '100%';\r\n                                div.style.height = '100%';\r\n                                div.style.overflow = 'auto';\r\n                                div.style.fontSize = `${data.textFontSize || 14}px`;\r\n                                div.style.color = data.textColor || '#000000';\r\n                                div.innerHTML = data.htmlContent;\r\n\r\n                                fo.appendChild(div);\r\n                                if (visual) visual.appendChild(fo);\r\n                            }\r\n                        } catch (e) { console.error(e); }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n\r\n        const load = async () => {\r\n            if (!processId) return;\r\n\r\n            // 1. Get Process\r\n            const pRes = await fetch(`${API_BASE}/processes/${processId}`);\r\n            const pData = await pRes.json();\r\n            setProcess(pData);\r\n\r\n            // 2. Get Session\r\n            const sRes = await fetch(`${API_BASE}/sessions/${processId}`);\r\n            const sData = await sRes.json();\r\n\r\n            let currentLogs = [];\r\n            if (sData && !sData.is_finished) {\r\n                currentLogs = sData.logs || [];\r\n                setLogs(currentLogs);\r\n                setCurrentRunningTaskId(sData.current_task_id);\r\n                setIsFinished(sData.is_finished);\r\n            } else {\r\n                // New Session (or restart if finished)\r\n                await fetch(`${API_BASE}/sessions`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ process_id: processId, current_task_id: null, logs: [], is_finished: false })\r\n                });\r\n                setLogs([]);\r\n                setCurrentRunningTaskId(null);\r\n                setIsFinished(false);\r\n            }\r\n\r\n            // 3. Init BPMN (Read-Only Mode)\r\n            if (viewerRef.current) viewerRef.current.destroy();\r\n            const viewer = new BpmnJS({ container: containerRef.current });\r\n            viewerRef.current = viewer;\r\n\r\n            // Init Custom State for Sync Access\r\n            viewer._customState = {\r\n                runningTaskId: currentRunningTaskId,\r\n                logs: currentLogs\r\n            };\r\n\r\n            try {\r\n                await viewer.importXML(pData.xml_content);\r\n                viewer.get('canvas').zoom('fit-viewport');\r\n            } catch (err) {\r\n                console.error('BPMN Import Error:', err);\r\n            }\r\n\r\n            // 4. Interaction Logic\r\n            const eventBus = viewer.get('eventBus');\r\n            const elementRegistry = viewer.get('elementRegistry');\r\n            const canvas = viewer.get('canvas');\r\n\r\n            // Disable default interactions\r\n            const events = [\r\n                'shape.move.start',\r\n                'connection.create.start',\r\n                'element.dblclick',\r\n                'contextPad.open',\r\n                'palette.create',\r\n                'shape.resize.start',\r\n                'connection.segment.move.start',\r\n                'bendlpoints.move.start',\r\n                'connection.layout.start',\r\n                'element.mousedown' // Careful with this one, might block selection. But we need click.\r\n            ];\r\n\r\n            // We only want to block mousedown if it leads to a move/edit. \r\n            events.forEach(event => {\r\n                eventBus.on(event, 10000, (e) => {\r\n                    // Allow clicking on elements to open task window\r\n                    if (event === 'element.mousedown') return;\r\n                    return false;\r\n                });\r\n            });\r\n\r\n            eventBus.on('element.click', (e) => {\r\n                // Block interaction if process is finished\r\n                if (viewer._customState && viewer._customState.isFinished) return;\r\n\r\n                const element = e.element;\r\n\r\n                // Handle Hyperlinks (DataObjectReference)\r\n                if (element.type === 'bpmn:DataObjectReference' || element.type === 'bpmn:DataStoreReference') {\r\n                    const docs = element.businessObject.documentation;\r\n                    if (docs && docs.length > 0 && docs[0].text) {\r\n                        try {\r\n                            const data = JSON.parse(docs[0].text);\r\n                            if (data.targetUrl) {\r\n                                window.open(data.targetUrl, '_blank');\r\n                                return;\r\n                            }\r\n                        } catch (e) { }\r\n                    }\r\n                }\r\n\r\n                // Handle Tasks / Start Event / End Event\r\n                const interactableTypes = [\r\n                    'bpmn:Task',\r\n                    'bpmn:UserTask',\r\n                    'bpmn:ServiceTask',\r\n                    'bpmn:SendTask',\r\n                    'bpmn:ReceiveTask',\r\n                    'bpmn:ManualTask',\r\n                    'bpmn:BusinessRuleTask',\r\n                    'bpmn:ScriptTask',\r\n                    'bpmn:CallActivity',\r\n                    'bpmn:StartEvent',\r\n                    'bpmn:EndEvent'\r\n                ];\r\n\r\n                if (interactableTypes.includes(element.type)) {\r\n                    // Use current state from ref/customState to avoid closure staleness\r\n                    const currentLogs = viewer._customState.logs || [];\r\n                    const activeTaskId = viewer._customState.runningTaskId;\r\n\r\n                    openTaskWindow(element, currentLogs, activeTaskId);\r\n                }\r\n            });\r\n            // 6. Highlight Running Task\r\n            if (sData && sData.current_task_id) {\r\n                try {\r\n                    // Ensure element exists before adding marker\r\n                    if (elementRegistry.get(sData.current_task_id)) {\r\n                        canvas.addMarker(sData.current_task_id, 'highlight');\r\n                    }\r\n                } catch (e) { console.error('Error highlighting task:', e); }\r\n            }\r\n\r\n            // 7. Colorize Completed Tasks\r\n            if (currentLogs.length > 0) {\r\n                const completedNames = currentLogs\r\n                    .filter(l => l.message.startsWith(''))\r\n                    .map(l => l.message.split(': ')[1]);\r\n\r\n                elementRegistry.forEach(el => {\r\n                    if (completedNames.includes(el.businessObject.name)) {\r\n                        canvas.addMarker(el.id, 'completed-task');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Apply Styles\r\n            setTimeout(applyStyles, 100);\r\n            setTimeout(applyStyles, 500);\r\n\r\n            // 2. Find Always On Elements\r\n            const alwaysOnElements = [];\r\n            elementRegistry.forEach(element => {\r\n                const businessObj = element.businessObject;\r\n                if (businessObj.documentation && businessObj.documentation.length > 0) {\r\n                    try {\r\n                        const d = JSON.parse(businessObj.documentation[0].text);\r\n                        if (d.alwaysOn && d.piTag) {\r\n                            alwaysOnElements.push({\r\n                                id: element.id,\r\n                                name: businessObj.name || '',\r\n                                tag: d.piTag,\r\n                                unit: d.piUnit || '',\r\n                                precision: d.piPrecision || 2\r\n                            });\r\n                        }\r\n                    } catch (e) { }\r\n                }\r\n            });\r\n\r\n            const overlays = viewer.get('overlays');\r\n\r\n            if (alwaysOnElements.length > 0) {\r\n                // 3. Update Function\r\n                const updateOverlays = async () => {\r\n                    for (const el of alwaysOnElements) {\r\n                        // Fix: Find overlay by checking if it contains our specific content ID\r\n                        // Check if overlays service exists and get\r\n                        if (!overlays) return;\r\n\r\n                        let overlay = overlays.get({ element: el.id }).find(o => o.html && o.html.querySelector(`#content-${el.id}`));\r\n\r\n                        // Fetch Data\r\n                        let data = [];\r\n                        try {\r\n                            if (!viewer._hasConnectedPI) setPiConnecting(true); // Start loading\r\n                            const res = await fetch(`${API_BASE}/get_tag_value?tag=${encodeURIComponent(el.tag)}`);\r\n                            data = await res.json();\r\n                            viewer._hasConnectedPI = true; // Mark as connected\r\n                        } catch (e) { console.error(e); }\r\n                        finally { setPiConnecting(false); } // Stop loading\r\n\r\n                        if (!overlay) {\r\n                            // Create Overlay Container\r\n                            const container = document.createElement('div');\r\n                            container.className = 'bg-[#1e1e1e] border border-white/20 rounded shadow-lg text-xs min-w-[150px] flex flex-col resize-x overflow-auto';\r\n                            container.style.pointerEvents = 'auto'; // Enable interaction\r\n                            container.style.position = 'absolute'; // For dragging relative to overlay root\r\n\r\n                            // Header (Drag handle + Toggle)\r\n                            const header = document.createElement('div');\r\n                            header.className = 'bg-[#2d2d2d] px-2 py-1 flex justify-between items-center cursor-move select-none border-b border-white/10';\r\n                            header.innerHTML = `\r\n                               <span class=\"text-white/60 font-medium truncate flex-1 min-w-0 mr-2\" title=\"${el.name}\">${el.name}</span>\r\n                               <button class=\"text-white/40 hover:text-white transition focus:outline-none\">\r\n                                   <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-3 w-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                       <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n                                   </svg>\r\n                               </button>\r\n                           `;\r\n\r\n                            // Content\r\n                            const content = document.createElement('div');\r\n                            content.id = `content-${el.id}`;\r\n                            content.className = 'p-2';\r\n\r\n                            container.appendChild(header);\r\n                            container.appendChild(content);\r\n\r\n                            // Add to BPMN\r\n                            overlays.add(el.id, {\r\n                                type: 'always-on-pi', // Keep passing it, just in case\r\n                                position: { bottom: 0, right: -10 },\r\n                                html: container\r\n                            });\r\n\r\n                            // Toggle Logic\r\n                            const toggleBtn = header.querySelector('button');\r\n                            let isCollapsed = false;\r\n                            toggleBtn.onclick = (e) => {\r\n                                e.stopPropagation(); // Prevent drag\r\n                                isCollapsed = !isCollapsed;\r\n                                content.style.display = isCollapsed ? 'none' : 'block';\r\n                                toggleBtn.innerHTML = isCollapsed ?\r\n                                    `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-3 w-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 15l7-7 7 7\" /></svg>` :\r\n                                    `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-3 w-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" /></svg>`;\r\n                            };\r\n\r\n                            // Drag Logic\r\n                            let isDragging = false;\r\n                            let startX, startY, initialLeft, initialTop;\r\n\r\n                            header.onmousedown = (e) => {\r\n                                e.stopPropagation(); // Prevent BPMN pan\r\n                                isDragging = true;\r\n                                startX = e.clientX;\r\n                                startY = e.clientY;\r\n\r\n                                const style = window.getComputedStyle(container);\r\n                                // Use WebKitCSSMatrix for parsing transform for simplicity\r\n                                let m41 = 0, m42 = 0;\r\n                                if (window.WebKitCSSMatrix) {\r\n                                    const matrix = new WebKitCSSMatrix(style.transform);\r\n                                    m41 = matrix.m41;\r\n                                    m42 = matrix.m42;\r\n                                }\r\n                                initialLeft = m41;\r\n                                initialTop = m42;\r\n\r\n                                document.onmousemove = onMouseMove;\r\n                                document.onmouseup = onMouseUp;\r\n                            };\r\n\r\n                            const onMouseMove = (e) => {\r\n                                if (!isDragging) return;\r\n                                const dx = e.clientX - startX;\r\n                                const dy = e.clientY - startY;\r\n                                container.style.transform = `translate(${initialLeft + dx}px, ${initialTop + dy}px)`;\r\n                            };\r\n\r\n                            const onMouseUp = () => {\r\n                                isDragging = false;\r\n                                document.onmousemove = null;\r\n                                document.onmouseup = null;\r\n                            };\r\n\r\n                            // Initial Render\r\n                            renderContent(content, data, el);\r\n\r\n                        } else {\r\n                            // Update Content\r\n                            const content = overlay.html.querySelector(`#content-${el.id}`);\r\n                            if (content) {\r\n                                renderContent(content, data, el);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n\r\n                const renderContent = (container, data, el) => {\r\n                    container.innerHTML = '';\r\n                    data.forEach(item => {\r\n                        const row = document.createElement('div');\r\n                        row.className = 'flex justify-between gap-4 mb-1 last:mb-0';\r\n\r\n                        const label = document.createElement('span');\r\n                        label.className = 'text-white/60 flex-1 min-w-0 break-all';\r\n                        label.innerText = item.tag;\r\n\r\n                        const val = document.createElement('span');\r\n                        val.className = 'text-[#81c995] font-mono font-bold';\r\n                        const numVal = parseFloat(item.value);\r\n                        val.innerText = !isNaN(numVal) ? numVal.toFixed(el.precision) : item.value;\r\n\r\n                        row.appendChild(label);\r\n                        row.appendChild(val);\r\n                        container.appendChild(row);\r\n                    });\r\n\r\n                    if (el.unit) {\r\n                        const unitDiv = document.createElement('div');\r\n                        unitDiv.className = 'text-right text-white/40 text-[10px] mt-1';\r\n                        unitDiv.innerText = el.unit;\r\n                        container.appendChild(unitDiv);\r\n                    }\r\n                };\r\n\r\n                // Expose interval clearer\r\n                const interval = setInterval(updateOverlays, 5000);\r\n                viewer._customInterval = interval;\r\n                updateOverlays();\r\n            }\r\n\r\n        };\r\n\r\n        load();\r\n\r\n        return () => {\r\n            if (viewerRef.current) {\r\n                if (viewerRef.current._customInterval) clearInterval(viewerRef.current._customInterval);\r\n                viewerRef.current.destroy();\r\n            }\r\n        };\r\n    }, [processId]);\r\n\r\n    // Always On PI Display Manager - Cleanup overlaps with above load, but kept separate in original for clarity.\r\n    // Merged into Load above for cleaner React lifecycle handling.\r\n\r\n    useEffect(() => {\r\n        const container = containerRef.current;\r\n        if (!container) return;\r\n\r\n        const onWheel = (e) => {\r\n            if (viewerRef.current) {\r\n                // Allow Zoom (Ctrl + Wheel)\r\n                if (e.ctrlKey || e.metaKey) return;\r\n\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                const canvas = viewerRef.current.get('canvas');\r\n                const viewbox = canvas.viewbox();\r\n\r\n                // Move viewbox x by deltaY\r\n                canvas.viewbox({\r\n                    x: viewbox.x + e.deltaY,\r\n                    y: viewbox.y,\r\n                    width: viewbox.width,\r\n                    height: viewbox.height\r\n                });\r\n            }\r\n        };\r\n\r\n        container.addEventListener('wheel', onWheel, { passive: false, capture: true });\r\n        return () => container.removeEventListener('wheel', onWheel, { capture: true });\r\n    }, []);\r\n\r\n    // Reactive Visual Sync (BPMN Markers & State)\r\n    useEffect(() => {\r\n        if (!viewerRef.current) return;\r\n\r\n        // Update State for Listeners (Avoid Stale Closures)\r\n        viewerRef.current._customState = {\r\n            runningTaskId: currentRunningTaskId,\r\n            logs: logs,\r\n            isFinished: isFinished\r\n        };\r\n\r\n        const canvas = viewerRef.current.get('canvas');\r\n        const elementRegistry = viewerRef.current.get('elementRegistry');\r\n\r\n        // Clear all markers\r\n        elementRegistry.forEach(el => {\r\n            canvas.removeMarker(el.id, 'highlight');\r\n            canvas.removeMarker(el.id, 'completed-task');\r\n        });\r\n\r\n        // Calculate status from logs\r\n        const taskStatusByName = {};\r\n        const taskStatusByID = {};\r\n\r\n        logs.forEach(log => {\r\n            let status = null;\r\n            let name = null;\r\n\r\n            if (log.message.startsWith(':')) {\r\n                status = 'running';\r\n                name = log.message.substring(5).trim(); // Remove ':'\r\n            } else if (log.message.startsWith(':')) {\r\n                status = 'completed';\r\n                name = log.message.substring(5).trim(); // Remove ':'\r\n            }\r\n\r\n            if (status) {\r\n                if (log.taskId) {\r\n                    taskStatusByID[log.taskId] = status;\r\n                }\r\n                if (name) {\r\n                    taskStatusByName[name] = status;\r\n                }\r\n            }\r\n        });\r\n\r\n        // Apply markers\r\n        elementRegistry.forEach(el => {\r\n            const id = el.id;\r\n            const name = el.businessObject.name;\r\n\r\n            let status = null;\r\n\r\n            // Priority 1: Match by ID (New robust method)\r\n            if (taskStatusByID[id]) {\r\n                status = taskStatusByID[id];\r\n            }\r\n            // Priority 2: Match by Name (Fallback for old logs)\r\n            else if (name && taskStatusByName[name]) {\r\n                status = taskStatusByName[name];\r\n            }\r\n\r\n            if (status) {\r\n                if (status === 'completed') {\r\n                    canvas.addMarker(id, 'completed-task');\r\n                } else if (status === 'running') {\r\n                    canvas.addMarker(id, 'highlight');\r\n                }\r\n            }\r\n        });\r\n    }, [logs, isFinished, currentRunningTaskId]);\r\n\r\n    // Real-time Synchronization (Polling)\r\n    useEffect(() => {\r\n        if (!processId) return;\r\n\r\n        const syncSession = async () => {\r\n            try {\r\n                const res = await fetch(`${API_BASE}/sessions/${processId}`);\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    if (data) {\r\n                        // Sync Logs\r\n                        if (JSON.stringify(data.logs) !== JSON.stringify(logs)) {\r\n                            setLogs(data.logs);\r\n                        }\r\n\r\n                        // Sync Finished State\r\n                        if (data.is_finished !== isFinished) {\r\n                            setIsFinished(data.is_finished);\r\n                        }\r\n\r\n                        // Sync Current Running Task\r\n                        if (data.current_task_id !== currentRunningTaskId) {\r\n                            setCurrentRunningTaskId(data.current_task_id);\r\n                        }\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Sync error:\", e);\r\n            }\r\n        };\r\n\r\n        const interval = setInterval(syncSession, 3000); // Poll every 3 seconds\r\n        return () => clearInterval(interval);\r\n    }, [processId, logs, isFinished, currentRunningTaskId]);\r\n\r\n    // Helper to open window\r\n    const openTaskWindow = (element, currentLogs, activeTaskId) => {\r\n        const businessObj = element.businessObject;\r\n        const docs = businessObj.documentation;\r\n        let tag = '', unit = '', precision = 2;\r\n\r\n        if (docs && docs.length > 0 && docs[0].text) {\r\n            try {\r\n                const d = JSON.parse(docs[0].text);\r\n                tag = d.piTag;\r\n                unit = d.piUnit;\r\n                precision = parseInt(d.piPrecision) || 2;\r\n            } catch (e) { }\r\n        }\r\n\r\n        // Check status\r\n        let status = 'idle';\r\n        const taskName = businessObj.name || '';\r\n        const startMsg = `: ${taskName}`;\r\n        const endMsg = `: ${taskName}`;\r\n\r\n        if (element.type === 'bpmn:StartEvent') {\r\n            // Start Event is complete if it has a start log\r\n            if (currentLogs.some(l => l.message === startMsg)) status = 'completed';\r\n        } else {\r\n            const hasStart = currentLogs.some(l => l.message === startMsg);\r\n            const hasEnd = currentLogs.some(l => l.message === endMsg);\r\n\r\n            if (hasEnd) status = 'completed';\r\n            else if (hasStart) status = 'running';\r\n        }\r\n\r\n        // Check predecessors\r\n        const canStart = checkPredecessors(element, currentLogs);\r\n\r\n        setWindowTask({\r\n            id: element.id,\r\n            name: businessObj.name || '',\r\n            type: element.type,\r\n            tag, unit, precision,\r\n            status,\r\n            canStart\r\n        });\r\n\r\n        setNote('');\r\n        setTagValues([]);\r\n        setShowWindow(true);\r\n\r\n        // Fetch PI Data if tag exists\r\n        if (tag) {\r\n            setLoadingTag(true);\r\n            fetch(`${API_BASE}/get_tag_value?tag=${encodeURIComponent(tag)}`)\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    setTagValues(data);\r\n                    setLoadingTag(false);\r\n                });\r\n        }\r\n    };\r\n\r\n    const handleExportCSV = (logsToExport) => {\r\n        if (!logsToExport || logsToExport.length === 0) return;\r\n\r\n        // Build CSV String\r\n        let csvString = \"\";\r\n\r\n        // Add Metadata Line\r\n        if (process && process.id && process.updated_at) {\r\n            csvString += `# Metadata: id=${process.id}, version=${process.updated_at}\\n`;\r\n        }\r\n        csvString += \"Time,Source,Message,Value,Note\\n\";\r\n\r\n        logsToExport.forEach(log => {\r\n            const row = [\r\n                log.time,\r\n                log.source,\r\n                log.message,\r\n                `\"${log.value}\"`, // Quote value to handle commas\r\n                `\"${log.note}\"`\r\n            ].join(\",\");\r\n            csvString += row + \"\\n\";\r\n        });\r\n\r\n        const now = new Date();\r\n        const timestamp = now.getFullYear() +\r\n            String(now.getMonth() + 1).padStart(2, '0') +\r\n            String(now.getDate()).padStart(2, '0') +\r\n            String(now.getHours()).padStart(2, '0') +\r\n            String(now.getMinutes()).padStart(2, '0');\r\n\r\n        // Use Blob for correct encoding (BOM + UTF-8)\r\n        const blob = new Blob([\"\\uFEFF\" + csvString], { type: 'text/csv;charset=utf-8;' });\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\"href\", url);\r\n        link.setAttribute(\"download\", `${process.name}_${timestamp}.csv`);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const handleUpdateLog = async (index, newNote) => {\r\n        const newLogs = [...logs];\r\n        if (newLogs[index]) {\r\n            newLogs[index].note = newNote;\r\n            setLogs(newLogs);\r\n\r\n            // Sync Update\r\n            if (viewerRef.current) {\r\n                viewerRef.current._customState = {\r\n                    runningTaskId: currentRunningTaskId,\r\n                    logs: newLogs\r\n                };\r\n            }\r\n\r\n            // Save to Backend\r\n            await fetch(`${API_BASE}/sessions`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    process_id: processId,\r\n                    current_task_id: currentRunningTaskId,\r\n                    logs: newLogs,\r\n                    is_finished: isFinished\r\n                })\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleStartTask = async () => {\r\n        if (!windowTask) return;\r\n\r\n        // Fetch PI Data for Start Log if tags exist\r\n        let startValStr = '-';\r\n        if (windowTask.tag) {\r\n            try {\r\n                const res = await fetch(`${API_BASE}/get_tag_value?tag=${encodeURIComponent(windowTask.tag)}`);\r\n                const data = await res.json();\r\n                startValStr = data.map(t => {\r\n                    const numVal = parseFloat(t.value);\r\n                    const displayVal = !isNaN(numVal) ? numVal.toFixed(windowTask.precision || 2) : t.value;\r\n                    return `${t.tag}=${displayVal} ${windowTask.unit || ''}`;\r\n                }).join(', ');\r\n            } catch (e) { console.error(e); }\r\n        }\r\n\r\n        // Special handling for Start Event: Atomic Start (No Complete Log)\r\n        if (windowTask.type === 'bpmn:StartEvent') {\r\n            const newLogStart = {\r\n                time: getCurrentTime(),\r\n                source: 'User',\r\n                message: `: ${windowTask.name}`,\r\n                value: startValStr,\r\n                note: note\r\n            };\r\n\r\n            const newLogs = [...logs, newLogStart];\r\n            setLogs(newLogs);\r\n            setCurrentRunningTaskId(null);\r\n            setWindowTask(prev => ({ ...prev, status: 'completed' }));\r\n\r\n            // Sync Update\r\n            if (viewerRef.current) {\r\n                viewerRef.current._customState = {\r\n                    runningTaskId: null,\r\n                    logs: newLogs\r\n                };\r\n            }\r\n\r\n            // Update Visuals\r\n            const canvas = viewerRef.current.get('canvas');\r\n            canvas.addMarker(windowTask.id, 'completed-task');\r\n\r\n            // Save to Backend\r\n            await fetch(`${API_BASE}/sessions`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    process_id: processId,\r\n                    current_task_id: null,\r\n                    logs: newLogs,\r\n                    is_finished: false\r\n                })\r\n            });\r\n\r\n            setShowWindow(false);\r\n            return;\r\n        }\r\n\r\n        const newLog = {\r\n            time: getCurrentTime(),\r\n            source: 'User',\r\n            message: `: ${windowTask.name}`,\r\n            value: startValStr,\r\n            note: note,\r\n            taskId: windowTask.id // Track Task ID for robust matching\r\n        };\r\n        const newLogs = [...logs, newLog];\r\n        setLogs(newLogs);\r\n        setCurrentRunningTaskId(windowTask.id);\r\n        setWindowTask(prev => ({ ...prev, status: 'running' }));\r\n\r\n        // Sync Update\r\n        if (viewerRef.current) {\r\n            viewerRef.current._customState = {\r\n                runningTaskId: windowTask.id,\r\n                logs: newLogs\r\n            };\r\n        }\r\n\r\n        // Save to Backend\r\n        await fetch(`${API_BASE}/sessions`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                process_id: processId,\r\n                current_task_id: windowTask.id,\r\n                logs: newLogs,\r\n                is_finished: false\r\n            })\r\n        });\r\n\r\n        setShowWindow(false); // Close window after start\r\n    };\r\n\r\n    const handleCompleteTask = async () => {\r\n        if (!windowTask) return;\r\n\r\n        const valStr = tagValues.map(t => {\r\n            const numVal = parseFloat(t.value);\r\n            const displayVal = !isNaN(numVal) ? numVal.toFixed(windowTask.precision || 2) : t.value;\r\n            return `${t.tag}=${displayVal} ${windowTask.unit || ''}`;\r\n        }).join(', ') || '-';\r\n\r\n        const newLog = {\r\n            time: getCurrentTime(),\r\n            source: 'User',\r\n            message: `: ${windowTask.name}`,\r\n            value: valStr,\r\n            note: note,\r\n            taskId: windowTask.id // Track Task ID for robust matching\r\n        };\r\n        const newLogs = [...logs, newLog];\r\n        setLogs(newLogs);\r\n        setCurrentRunningTaskId(null);\r\n        setWindowTask(prev => ({ ...prev, status: 'completed' }));\r\n\r\n        // Sync Update\r\n        if (viewerRef.current) {\r\n            viewerRef.current._customState = {\r\n                runningTaskId: null,\r\n                logs: newLogs\r\n            };\r\n        }\r\n\r\n        // Save\r\n        await fetch(`${API_BASE}/sessions`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                process_id: processId,\r\n                current_task_id: null,\r\n                logs: newLogs,\r\n                is_finished: false\r\n            })\r\n        });\r\n\r\n        setShowWindow(false);\r\n    };\r\n\r\n    const handleFinishProcess = async () => {\r\n        if (!confirm('')) return;\r\n\r\n        const newLog = {\r\n            time: getCurrentTime(),\r\n            source: 'System',\r\n            message: '',\r\n            value: '-',\r\n            note: ''\r\n        };\r\n        const newLogs = [...logs, newLog];\r\n        setLogs(newLogs);\r\n        setIsFinished(true);\r\n\r\n        await fetch(`${API_BASE}/sessions`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                process_id: processId,\r\n                current_task_id: null,\r\n                logs: newLogs,\r\n                is_finished: true\r\n            })\r\n        });\r\n        alert('');\r\n        setShowWindow(false); // Close the window\r\n\r\n        // Auto Export CSV\r\n        handleExportCSV(newLogs);\r\n    };\r\n\r\n    // Heartbeat for Online Count\r\n    useEffect(() => {\r\n        if (!processId) return;\r\n\r\n        const sendHeartbeat = async () => {\r\n            try {\r\n                const res = await fetch(`${API_BASE}/heartbeat`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ process_id: processId, user_id: userId })\r\n                });\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setOnlineCount(data.online_count);\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Heartbeat error:\", e);\r\n            }\r\n        };\r\n\r\n        sendHeartbeat(); // Initial call\r\n        const interval = setInterval(sendHeartbeat, 5000); // Every 5 seconds\r\n        return () => clearInterval(interval);\r\n    }, [processId, userId]);\r\n\r\n    const headerActions = (\r\n        <div className=\"flex items-center gap-2\">\r\n            <button onClick={() => handleExportCSV(logs)} className=\"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition\" title=\" CSV\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5\" />\r\n                </svg>\r\n            </button>\r\n            {!isFinished && (\r\n                <button onClick={handleFinishProcess} className=\"bg-[#f28b82] hover:bg-[#f6aea9] text-[#601410] px-4 py-1.5 rounded-full text-xs font-bold transition\">\r\n                    \r\n                </button>\r\n            )}\r\n            <button onClick={() => onNavigate('dashboard')} className=\"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition\" title=\"\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3\" />\r\n                </svg>\r\n            </button>\r\n            <button\r\n                onClick={() => setIsTimelineCollapsed(!isTimelineCollapsed)}\r\n                className=\"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 p-2 rounded-full transition ml-2\"\r\n                title={isTimelineCollapsed ? \"\" : \"\"}\r\n            >\r\n                {isTimelineCollapsed ? (\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19.5 8.25l-7.5 7.5-7.5-7.5\" />\r\n                    </svg>\r\n                ) : (\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4.5 15.75l7.5-7.5 7.5 7.5\" />\r\n                    </svg>\r\n                )}\r\n            </button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-[#1e1e1e]\">\r\n            {/* 1. Timeline (Collapsible) */}\r\n            <div className={`${isTimelineCollapsed ? 'h-[54px] min-h-[54px]' : 'h-1/5 min-h-[160px]'} border-b border-white/10 relative z-10 shrink-0 transition-all duration-300 ease-in-out`}>\r\n                <TimelineViewer\r\n                    logs={logs}\r\n                    headerActions={headerActions}\r\n                    piStatusNode={(\r\n                        <div onClick={() => onNavigate('settings')} className=\"flex items-center gap-2 bg-[#1e1e1e] px-3 py-1.5 rounded-full border border-white/5 cursor-pointer hover:bg-white/5 transition mr-4\">\r\n                            <div className={`w-2 h-2 rounded-full ${piStatus === 'Connected' ? 'bg-[#81c995] animate-pulse' : piStatus === 'Not Configured' ? 'bg-gray-400' : 'bg-[#f28b82]'}`}></div>\r\n                            <span className=\"text-xs text-white/70 whitespace-nowrap\">\r\n                                {piStatus === 'Connected' ? 'PI ' :\r\n                                    piStatus === 'Not Configured' ? 'PI ' : 'PI '}\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                    onUpdateLog={handleUpdateLog}\r\n                />\r\n            </div>\r\n\r\n            {/* 2. BPMN Viewer (Flex Grow) */}\r\n            <div className=\"flex-1 relative bg-white border-t-4 border-[#1e1e1e] min-h-0\">\r\n                <div ref={containerRef} className=\"w-full h-full operator-mode\"></div>\r\n\r\n                {/* PI Connection Loading Overlay */}\r\n                {piConnecting && (\r\n                    <div className=\"absolute inset-0 bg-black/60 z-[100] flex flex-col items-center justify-center backdrop-blur-sm transition-all duration-300\">\r\n                        <div className=\"bg-[#1e1e1e] p-6 rounded-2xl border border-white/10 shadow-2xl flex flex-col items-center gap-4\">\r\n                            <div className=\"w-12 h-12 border-4 border-[#2d2d2d] border-t-[#8ab4f8] rounded-full animate-spin\"></div>\r\n                            <div className=\"text-white/90 font-medium text-lg\"> PI ...</div>\r\n                            <div className=\"text-white/50 text-xs\"></div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Import Overlay */}\r\n                {!process && (\r\n                    <div className=\"absolute inset-0 bg-black/80 z-50 flex flex-col items-center justify-center\">\r\n                        <div className=\"text-white/40\">Loading...</div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Zoom Controls */}\r\n                <div className=\"absolute bottom-4 right-4 flex flex-col gap-2 z-10\">\r\n                    <button onClick={() => handleZoom(0.2)} className=\"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl\">+</button>\r\n                    <button onClick={() => handleZoom(-0.2)} className=\"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl\">-</button>\r\n                    <button onClick={() => { if (viewerRef.current) viewerRef.current.get('canvas').zoom('fit-viewport'); }} className=\"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs\">Fit</button>\r\n                </div>\r\n\r\n                {/* Task Window */}\r\n                {showWindow && windowTask && (\r\n                    <FloatingTaskWindow\r\n                        task={windowTask}\r\n                        onClose={() => setShowWindow(false)}\r\n                        onStart={handleStartTask}\r\n                        onEnd={handleCompleteTask}\r\n                        note={note}\r\n                        setNote={setNote}\r\n                        tagValues={tagValues}\r\n                        loadingTag={loadingTag}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Operator;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport BpmnJS from 'bpmn-js/dist/bpmn-viewer.production.min.js';\r\nimport TimelineViewer from './TimelineViewer';\r\nimport { API_BASE } from '../utilities';\r\n\r\nconst Review = ({ processId, onNavigate }) => {\r\n    const containerRef = useRef(null);\r\n    const [csvData, setCsvData] = useState([]);\r\n    const viewerRef = useRef(null);\r\n    const [processName, setProcessName] = useState('');\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const [currentProcess, setCurrentProcess] = useState(null);\r\n\r\n    // Helper to apply styles (Sticky Notes) - Reused from Operator logic\r\n    const applyStyles = useCallback(() => {\r\n        if (!viewerRef.current) return;\r\n        const viewer = viewerRef.current;\r\n        const canvas = viewer.get('canvas');\r\n        const elementRegistry = viewer.get('elementRegistry');\r\n\r\n        const elements = elementRegistry.filter(e => e.type !== 'bpmn:Process');\r\n\r\n        elements.forEach(element => {\r\n            const gfx = elementRegistry.getGraphics(element);\r\n            const businessObj = element.businessObject;\r\n            const docs = businessObj.documentation;\r\n\r\n            if (element.type === 'bpmn:Group' || element.type === 'bpmn:TextAnnotation') {\r\n                try {\r\n                    let data = {};\r\n                    if (docs && docs.length > 0 && docs[0].text) {\r\n                        data = JSON.parse(docs[0].text);\r\n                    } else if (element.type === 'bpmn:Group') {\r\n                        data = { noteColor: '#fff2cc', borderColor: '#d6b656' };\r\n                    }\r\n\r\n                    if (data.noteColor || data.htmlContent || data.textFontSize || data.textColor) {\r\n                        // Sticky Note Logic (Simplified for Review - just render)\r\n                        const path = gfx.querySelector('.djs-visual path');\r\n                        if (path) path.style.display = 'none';\r\n\r\n                        const rect = gfx.querySelector('.djs-visual rect');\r\n                        if (rect) rect.style.display = 'none';\r\n\r\n                        let existing = gfx.querySelector('.sticky-bg');\r\n                        if (existing) existing.remove();\r\n                        let existingFo = gfx.querySelector('.sticky-fo');\r\n                        if (existingFo) existingFo.remove();\r\n\r\n                        const width = element.width;\r\n                        const height = element.height;\r\n\r\n                        const bgRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n                        bgRect.classList.add('sticky-bg');\r\n                        bgRect.setAttribute('width', width);\r\n                        bgRect.setAttribute('height', height);\r\n                        bgRect.setAttribute('fill', data.noteColor || 'transparent');\r\n                        bgRect.setAttribute('stroke', data.borderColor || 'transparent');\r\n                        bgRect.setAttribute('fill-opacity', data.noteOpacity !== undefined ? data.noteOpacity : 1);\r\n                        gfx.prepend(bgRect);\r\n\r\n                        const fo = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\r\n                        fo.classList.add('sticky-fo');\r\n                        fo.setAttribute('width', width);\r\n                        fo.setAttribute('height', height);\r\n\r\n                        const div = document.createElement('div');\r\n                        div.style.width = '100%';\r\n                        div.style.height = '100%';\r\n                        div.style.padding = '10px';\r\n                        div.style.boxSizing = 'border-box';\r\n                        div.style.overflow = 'hidden';\r\n                        div.style.fontSize = `${data.textFontSize || 12}px`;\r\n                        div.style.fontWeight = data.textBold ? 'bold' : 'normal';\r\n                        div.style.color = data.textColor || '#000000';\r\n                        div.style.fontFamily = 'Arial, sans-serif';\r\n                        div.style.whiteSpace = 'pre-wrap';\r\n                        div.style.wordBreak = 'break-word';\r\n                        div.innerHTML = data.htmlContent || (docs && docs[0] && docs[0].text ? JSON.parse(docs[0].text).text : '') || '';\r\n\r\n                        fo.appendChild(div);\r\n                        gfx.appendChild(fo);\r\n                    }\r\n\r\n                    if (data.nameFontSize) {\r\n                        const label = gfx.querySelector('.djs-label');\r\n                        if (label) label.style.fontSize = `${data.nameFontSize}px`;\r\n                    }\r\n                } catch (e) { }\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!processId) return;\r\n        if (viewerRef.current) viewerRef.current.destroy();\r\n\r\n        const viewer = new BpmnJS({ container: containerRef.current });\r\n        viewerRef.current = viewer;\r\n\r\n        const load = async () => {\r\n            try {\r\n                const res = await fetch(`${API_BASE}/processes/${processId}`);\r\n                const data = await res.json();\r\n                setProcessName(data.name);\r\n                setCurrentProcess(data); // Store full process info for version check\r\n                await viewer.importXML(data.xml_content);\r\n                viewer.get('canvas').zoom('fit-viewport');\r\n\r\n                // Lock Diagram\r\n                const eventBus = viewer.get('eventBus');\r\n                const events = [\r\n                    'shape.move.start', 'connection.create.start', 'shape.resize.start',\r\n                    'element.dblclick', 'contextPad.open', 'palette.create', 'autoPlace.start'\r\n                ];\r\n                events.forEach(event => eventBus.on(event, 10000, () => false));\r\n\r\n                // Apply Sticky Note Styles\r\n                setTimeout(applyStyles, 500);\r\n\r\n            } catch (e) { console.error(e); }\r\n        };\r\n        load();\r\n\r\n        return () => { if (viewerRef.current) viewerRef.current.destroy(); };\r\n    }, [processId, applyStyles]);\r\n\r\n    // Sync Visuals with Logs\r\n    useEffect(() => {\r\n        if (!viewerRef.current || csvData.length === 0) return;\r\n        const viewer = viewerRef.current;\r\n        const canvas = viewer.get('canvas');\r\n        const elementRegistry = viewer.get('elementRegistry');\r\n\r\n        // Track status of each task\r\n        const taskStatus = {}; // name -> 'running' | 'completed'\r\n\r\n        csvData.forEach(log => {\r\n            if (log.message.includes(':')) {\r\n                const name = log.message.split(': ')[1].trim();\r\n                if (!taskStatus[name]) taskStatus[name] = 'running';\r\n            } else if (log.message.includes(':')) {\r\n                const name = log.message.split(': ')[1].trim();\r\n                taskStatus[name] = 'completed';\r\n            }\r\n        });\r\n\r\n        // Apply to Elements\r\n        elementRegistry.forEach(element => {\r\n            const name = element.businessObject.name;\r\n            if (name && taskStatus[name]) {\r\n                const status = taskStatus[name];\r\n                if (status === 'completed') {\r\n                    canvas.addMarker(element.id, 'completed-task'); // CSS class override\r\n\r\n                    // Direct SVG override for fill\r\n                    const gfx = elementRegistry.getGraphics(element);\r\n                    const visual = gfx.querySelector('.djs-visual rect, .djs-visual circle, .djs-visual polygon');\r\n                    if (visual) {\r\n                        visual.style.fill = '#f0f0f0';\r\n                        visual.style.stroke = '#999';\r\n                    }\r\n                } else if (status === 'running') {\r\n                    canvas.addMarker(element.id, 'highlight'); // Use existing highlight class\r\n                }\r\n            }\r\n        });\r\n\r\n    }, [csvData]);\r\n\r\n    const parseCSVLine = (text) => {\r\n        const result = [];\r\n        let start = 0;\r\n        let inQuotes = false;\r\n        for (let i = 0; i < text.length; i++) {\r\n            if (text[i] === '\"') {\r\n                inQuotes = !inQuotes;\r\n            } else if (text[i] === ',' && !inQuotes) {\r\n                let field = text.substring(start, i).trim();\r\n                if (field.startsWith('\"') && field.endsWith('\"')) {\r\n                    field = field.substring(1, field.length - 1);\r\n                }\r\n                result.push(field);\r\n                start = i + 1;\r\n            }\r\n        }\r\n        let lastField = text.substring(start).trim();\r\n        if (lastField.startsWith('\"') && lastField.endsWith('\"')) {\r\n            lastField = lastField.substring(1, lastField.length - 1);\r\n        }\r\n        result.push(lastField);\r\n        return result;\r\n    };\r\n\r\n    const handleFileUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        const reader = new FileReader();\r\n        reader.onload = (evt) => {\r\n            const text = evt.target.result;\r\n            const lines = text.split('\\n');\r\n\r\n            let startIndex = 1; // Default skip header\r\n\r\n            // Check Metadata\r\n            if (lines[0].startsWith('# Metadata:')) {\r\n                startIndex = 2; // Skip metadata + header\r\n                const metaParts = lines[0].substring(11).split(',');\r\n                let csvId = null;\r\n                let csvVersion = null;\r\n\r\n                metaParts.forEach(part => {\r\n                    const [key, val] = part.split('=').map(s => s.trim());\r\n                    if (key === 'id') csvId = parseInt(val);\r\n                    if (key === 'version') csvVersion = val;\r\n                });\r\n\r\n                if (currentProcess) {\r\n                    if (csvId !== currentProcess.id) {\r\n                        alert(` (ID: ${csvId}) (ID: ${currentProcess.id}) `);\r\n                    } else if (csvVersion !== currentProcess.updated_at) {\r\n                        alert(` (${csvVersion})  (${currentProcess.updated_at}) `);\r\n                    }\r\n                }\r\n            }\r\n\r\n            const data = lines.slice(startIndex).map(line => {\r\n                if (!line.trim()) return null;\r\n                const cols = parseCSVLine(line);\r\n                if (cols.length < 4) return null;\r\n                return {\r\n                    time: cols[0],\r\n                    source: cols[1],\r\n                    message: cols[2],\r\n                    value: cols[3],\r\n                    note: cols[4] || ''\r\n                };\r\n            }).filter(x => x && x.time);\r\n            setCsvData(data);\r\n            setIsLoaded(true);\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    const headerActions = (\r\n        <div className=\"flex gap-2 items-center\">\r\n            <button\r\n                onClick={() => onNavigate('dashboard')}\r\n                className=\"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-4 py-1 rounded-full text-sm font-medium transition\"\r\n            >\r\n                \r\n            </button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full relative\">\r\n            {/* Top: Timeline (1/4) */}\r\n            <div className=\"h-1/4 min-h-[180px] flex flex-col bg-[#1e1e1e]\">\r\n                <TimelineViewer logs={csvData} headerActions={headerActions} />\r\n            </div>\r\n\r\n            {/* Bottom: BPMN (3/4) */}\r\n            <div className=\"flex-1 relative bg-white border-t-4 border-[#1e1e1e]\">\r\n                <div ref={containerRef} className=\"w-full h-full operator-mode\"></div>\r\n\r\n                {/* Import Overlay */}\r\n                {!isLoaded && (\r\n                    <div className=\"absolute inset-0 bg-black/80 z-50 flex flex-col items-center justify-center\">\r\n                        <div className=\"bg-[#1e1e1e] p-8 rounded-2xl border border-white/10 text-center max-w-md\">\r\n                            <div className=\"text-4xl mb-4\"></div>\r\n                            <h3 className=\"text-xl font-bold text-white mb-2\"></h3>\r\n                            <p className=\"text-white/60 mb-6 text-sm\"> CSV </p>\r\n\r\n                            <label className=\"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-bold cursor-pointer transition inline-flex items-center gap-2\">\r\n                                <span></span>\r\n                                <input type=\"file\" accept=\".csv\" onChange={handleFileUpload} className=\"hidden\" />\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Zoom Controls */}\r\n                <div className=\"absolute bottom-4 right-4 flex flex-col gap-2 z-10\">\r\n                    <button onClick={() => viewerRef.current.get('canvas').zoom(viewerRef.current.get('canvas').zoom() + 0.2)} className=\"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl\">+</button>\r\n                    <button onClick={() => viewerRef.current.get('canvas').zoom(viewerRef.current.get('canvas').zoom() - 0.2)} className=\"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl\">-</button>\r\n                    <button onClick={() => viewerRef.current.get('canvas').zoom('fit-viewport')} className=\"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs\">Fit</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Review;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { API_BASE } from '../utilities';\r\n\r\nconst Settings = ({ onNavigate }) => {\r\n    const [ip, setIp] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetch(`${API_BASE}/settings`)\r\n            .then(res => res.json())\r\n            .then(data => setIp(data.pi_server_ip));\r\n    }, []);\r\n\r\n    const handleSave = async () => {\r\n        setLoading(true);\r\n        await fetch(`${API_BASE}/settings`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ pi_server_ip: ip })\r\n        });\r\n        setLoading(false);\r\n        alert('');\r\n        onNavigate('dashboard');\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-full flex-col bg-[#121212] items-center justify-center\">\r\n            <div className=\"bg-[#1e1e1e] p-8 rounded-2xl border border-white/5 w-full max-w-md shadow-xl\">\r\n                <h2 className=\"text-2xl font-medium text-white/90 mb-6\"></h2>\r\n\r\n                <div className=\"mb-6\">\r\n                    <label className=\"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider\">PI Server IP Address</label>\r\n                    <input\r\n                        value={ip}\r\n                        onChange={(e) => setIp(e.target.value)}\r\n                        className=\"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-4 py-3 text-white outline-none transition\"\r\n                        placeholder=\": 10.122.51.60\"\r\n                    />\r\n                    <p className=\"text-white/40 text-xs mt-2\"> Ping  IP </p>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3\">\r\n                    <button onClick={() => onNavigate('dashboard')} className=\"flex-1 bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-3 rounded-full font-medium transition\"></button>\r\n                    <button onClick={handleSave} disabled={loading} className=\"flex-1 bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] py-3 rounded-full font-medium transition\">\r\n                        {loading ? '...' : ''}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Settings;\r\n","import React, { useState } from 'react';\r\nimport Dashboard from './components/Dashboard';\r\nimport Editor from './components/Editor';\r\nimport Operator from './components/Operator';\r\nimport Review from './components/Review';\r\nimport Settings from './components/Settings';\r\n\r\nconst App = () => {\r\n    const [page, setPage] = useState('dashboard');\r\n    const [activeProcessId, setActiveProcessId] = useState(null);\r\n    const navigate = (target, id = null) => { setActiveProcessId(id); setPage(target); };\r\n    return (\r\n        <div className=\"h-full\">\r\n            {page === 'dashboard' && <Dashboard onNavigate={navigate} />}\r\n            {page === 'editor' && <Editor processId={activeProcessId} onNavigate={navigate} />}\r\n            {page === 'operator' && <Operator processId={activeProcessId} onNavigate={navigate} />}\r\n            {page === 'review' && <Review processId={activeProcessId} onNavigate={navigate} />}\r\n            {page === 'settings' && <Settings onNavigate={navigate} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\nimport './index.css';\r\nimport 'bpmn-js/dist/assets/diagram-js.css';\r\nimport 'bpmn-js/dist/assets/bpmn-font/css/bpmn.css';\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n);\r\n"],"names":["l","n","p","q","r","t","u","v","w","x","y","z","A","a","B","C","D","E","b","e","F","G","H","I","J","K","L","M","d","c","k","h","g","f","m","N","O","escape","P","Q","R","S","T","U","V","W","X","react_production_min","reactModule","require$$0","reactJsxRuntime_production_min","jsxRuntimeModule","exports","schedulerModule","aa","ca","require$$1","da","ea","fa","ha","ia","ja","ka","la","ma","oa","pa","qa","ra","sa","ta","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","Ra","Sa","Ta","Ua","Va","Wa","Xa","Ya","Za","ab","bb","cb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","ob","pb","qb","rb","sb","tb","ub","vb","wb","xb","yb","zb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","oc","nc","pc","qc","rc","sc","tc","uc","vc","wc","xc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","Tc","Uc","Vc","Wc","Xc","Yc","Zc","$c","ad","bd","cd","dd","ed","fd","gd","hd","id","jd","kd","ld","md","nd","od","pd","qd","rd","sd","td","ud","vd","wd","xd","yd","Ad","zd","Bd","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","Ud","Vd","Wd","Xd","Yd","Zd","$d","ae","be","ce","de","ee","fe","ge","he","ie","je","ke","le","me","ne","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","Ae","Be","Ce","De","Ee","Fe","Ge","He","Ie","Je","Ke","Le","Me","Ne","Oe","Pe","Qe","Re","Se","Te","Ue","Ve","We","Xe","Ye","Ze","$e","af","bf","cf","df","ef","ff","gf","hf","jf","kf","lf","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","na","xa","$a","ba","xf","yf","zf","Af","Bf","Cf","Df","Ef","Ff","Gf","Hf","Jf","If","Kf","Lf","Mf","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Hg","Ig","Jg","Kg","Lg","Mg","Ng","Og","Pg","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","jh","kh","lh","mh","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","ei","fi","gi","hi","ii","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","bj","cj","dj","ej","fj","gj","hj","ij","jj","kj","lj","mj","nj","oj","pj","qj","rj","sj","tj","uj","vj","wj","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Kj","Lj","Mj","Nj","Oj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","Xj","Yj","Zj","ak","bk","ck","dk","ek","fk","gk","hk","ik","jk","kk","lk","mk","nk","ok","Y","Z","pk","qk","rk","sk","tk","uk","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","Ek","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","Pk","Qk","Rk","Sk","Tk","Uk","Vk","Wk","Xk","Yk","Zk","$k","al","bl","cl","dl","el","fl","gl","hl","il","jl","kl","ll","ml","nl","ol","pl","ql","rl","sl","tl","ul","vl","reactDom_production_min","checkDCE","err","reactDomModule","client","API_BASE","makePaletteDraggable","container","checkExist","palette","handle","isDragging","startX","startY","initialLeft","initialTop","rect","onMouseMove","dx","dy","onMouseUp","getCurrentTime","now","yyyy","mm","HH","MM","SS","formatTimelineTime","fullTime","parts","dateParts","getLightHex","hex","factor","newR","newG","newB","toHex","Dashboard","onNavigate","processes","setProcesses","useState","piStatus","setPiStatus","editingId","setEditingId","editName","setEditName","useEffect","res","data","checkStatus","startEditing","saveName","handleDelete","handleExport","blob","url","handleImport","file","reader","text","name","jsxs","jsx","isRunning","createCommonjsModule","fn","module","hat_1","hat","bits","base","digits","i","rem","parsed","expandBy","iters","hats","value","Ids","seed","element","prefix","flatten","arr","nativeToString","nativeHasOwnProperty","isUndefined","obj","isDefined","isNil","isArray","isObject","isNumber","isFunction","tag","isString","ensureArray","has","target","key","find","collection","matcher","matchFn","toMatcher","match","forEach","val","findIndex","idx","filter","result","iterator","convertKey","toNum","identity","without","reduce","every","matches","some","map","keys","size","values","groupBy","extractor","grouped","toExtractor","discriminator","group","uniqueBy","collections","unionBy","sortBy","sorted","disc","entry","matchPattern","pattern","arg","debounce","timeout","timer","lastArgs","lastThis","lastNow","fire","force","scheduledDiff","schedule","clear","flush","callback","args","bind","assign","others","set","path","currentTarget","nextKey","nextTarget","pick","properties","prop","omit","_mergeNamespaces","styleSources","style","attr","toString","classes","ClassList","child","closest","selector","checkYourSelf","actualElement","componentEvent","bind$1","unbind$1","detect","bind_1","type","capture","unbind_1","event","forceCaptureEvents","unbind","delegate","domify","parse","innerHTMLBug","bugTestDiv","html","doc","wrap","depth","suffix","fragment","domify$1","query","all","remove","ensureImported","appendTo","append","node","LENGTH_ATTR","CSS_PROPERTIES","getAttribute","setAttribute","hyphenated","setAttributes","attrs","names","clone","ns","SVG_START","svg","unwrap","parseDocument","parent","parser","create","getNode","extend","object","props","createMatrix","matrix","createTransform","TEXT_ENTITIES","ATTR_ENTITIES","ENTITY_REPLACEMENT","str","replaceFn","entity","serialize","output","len","attrMap","attrNode","childNodes","get","innerSVG","wrapMatrix","transformList","transform","setTransforms","transforms","CLASS_PATTERN","isClass","hasOwnProp","annotate","CONSTRUCTOR_ARGS","FN_ARGS","FN_ARG","parseAnnotations","argMatch","Injector","modules","_parent","strict","currentlyResolving","error","providers","instances","self","msg","stack","pivot","fnDef","locals","dependencies","dep","instantiate","Constructor","invoke","func","context","createPrivateInjectorFactory","childInjector","createChild","forceNewInstances","fromParentModule","matchedScopes","privateInjectorsCache","privateChildInjectors","privateChildFactories","provider","cacheIdx","privateChildInjector","privateChildInjectorFactory","scope","factoryMap","createInitializer","moduleDefinition","injector","initializers","initializer","loadModule","moduleExports","nestedModules","clonedModule","childModules","privateInjector","getFromPrivateInjector","typeDeclaration","arrayUnwrap","resolveDependencies","moduleDefinitions","bootstrap","initialized","DEFAULT_RENDER_PRIORITY","BaseRenderer","eventBus","renderPriority","evt","visuals","shape","connection","componentsToPath","elements","move","point","lineTo","curveTo","p1","p2","p3","drawPath","waypoints","cornerRadius","pointCount","pointBefore","pointAfter","effectiveRadius","vectorLength","beforePoint","getPointAtLength","beforePoint2","afterPoint","afterPoint2","start","end","length","deltaX","deltaY","totalLength","percent","createLine","points","radius","line","svgCreate","updateLine","gfx","svgAttr","getParents","getParent","add","unique","canAdd","eachElement","s","selfAndChildren","maxDepth","processedChildren","children","selfAndAllChildren","allowDuplicates","getClosure","isTopLevel","closure","allShapes","copyObject","allConnections","enclosedElements","enclosedConnections","topLevel","handleConnection","handleElement","getBBox","stopRecursion","minX","minY","maxX","maxY","bbox","height","width","getEnclosedElements","filteredElements","getType","isFrameElement","src1","src2","DefaultRenderer","styles","inherits","svgAppend","shapePath","connectionPath","Styles","defaultTraits","className","traits","additionalAttrs","custom","defaultStyles","DrawModule$1","currentIdx","indexOf","pointDistance","pointsOnLine","accuracy","dist","ALIGNED_THRESHOLD","pointsAligned","axisMap","axis","orientation","pointsAlignedOnAxis","referencePoint","pointInRect","tolerance","getMidPoint","p2s","toFloat","math","PI","mmin","mmax","pow","abs","pathCommand","pathValues","o","hasProperty","property","repush","array","item","cacher","newf","cache","count","parsePathString","pathString","pth","paths","paramCounts","params","ps","rectBBox","pathToString","pathClone","pathArray","findDotsAtSegment","p1x","p1y","c1x","c1y","c2x","c2y","p2x","p2y","t1","t13","t12","t2","t3","fixError","bezierBBox","curveBBox","isPointInsideBBox","isBBoxIntersect","bbox1","bbox2","base3","p4","bezlen","x1","y1","x2","y2","x3","y3","x4","y4","z2","Tvalues","Cvalues","sum","ct","xbase","ybase","comb","intersectLines","nx","ny","denominator","px","py","px2","py2","number","findBezierIntersections","bez1","bez2","justCount","l1","l2","n1","isLine","n2","dots1","dots2","xy","j","di1","dj1","is","findPathIntersections","path1","path2","pathToCurve","x1m","y1m","x2m","y2m","intr","pathToAbsolute","mx","my","pa0","bez","lineToCurve","qubicToCurve","ax","ay","_13","_23","arcToCurve","rx","ry","angle","large_arc_flag","sweep_flag","recursive","_120","rad","rotate","f1","f2","cx","cy","rx2","ry2","f2old","x2old","y2old","c1","s1","c2","s2","hx","hy","m1","m2","m3","m4","newres","x0","y0","tvalues","bounds","b2ac","sqrtb2ac","jlen","mt","curvedPath","processPath","fixArc","pp","pathCommands","pfirst","seg","seglen","isConnection","isLabel","roundBounds","roundPoint","asTRBL","asBounds","trbl","getBoundsMid","getConnectionMid","index","lastPoint","lastPart","startLength","distance","part","midLength","midSegment","segmentProgress","midPoint","getMid","getOrientation","reference","padding","rectOrientation","referenceOrientation","top","right","bottom","left","vertical","horizontal","getElementLineIntersection","elementPath","linePath","cropStart","intersections","getIntersections","intersectPaths","filterRedundantWaypoints","previousPoint","nextPoint","round","resolution","ensurePx","findRoot","createContainer","options","assignStyle","createGroup","cls","childIndex","svgClasses","BASE_LAYER","PLANE_LAYER_INDEX","UTILITY_LAYER_INDEX","REQUIRED_MODEL_ATTRS","Canvas","config","graphicsFactory","elementRegistry","viewport","layer","svgRemove","plane","rootElement","marker","layerName","currentRoot","requiredAttrs","parentIndex","collectionAdd","collectionRemove","secondary","changeFn","box","outerBox","innerBox","activeLayer","scale","svgTransform","delta","setCTM","defaultPadding","elementBounds","getBoundingBox","elementTrbl","viewboxBounds","zoom","viewboxTrbl","dRight","dLeft","dBottom","dTop","newScale","center","outer","mstr","vbox","inner","newViewbox","centerPoint","originalPoint","currentMatrix","scaleMatrix","newMatrix","currentScale","ELEMENT_ID","ElementRegistry","secondaryGfx","newId","filtered","refs","inverseProperty","isExtended","hasOwnProperty","defineCollectionProperty","ref","defineProperty","_value","old","Refs","parentRefs","labelRefs","attacherRefs","outgoingRefs","incomingRefs","ElementImpl","newLabel","label","labels","ShapeImpl","RootImpl","LabelImpl","ConnectionImpl","types","Type","isModelElement","ElementFactory","FN_REF","DEFAULT_PRIORITY","slice","EventBus","events","priority","that","actualCallback","wrappedCallback","InternalEvent","firstListener","returnValue","originalType","listener","invokeFunction","newListener","previousListener","nextListener","listenerCallback","getVisual","getChildren","amount","translate","GraphicsFactory","childrenGfx","visual","domClear","isFrame","outerGfx","prependTo","parents","childGfx","newNode","parentNode","siblingNode","CoreModule$1","DrawModule","createInjector","configModule","CoreModule","Diagram","Base","Factory","model","descriptor","prototype","ModdleElement","BUILTINS","TYPE_CONVERTERS","coerceType","converter","isBuiltIn","isSimple","parseName","defaultPrefix","localName","DescriptorBuilder","nameNs","validate","oldProperty","newProperty","replace","oldNameNs","propertiesByName","rename","targetPropertyName","nsPrefix","attrName","redefinedProperty","propsByName","typeDescriptor","propertyName","definedProperty","inherited","typesByName","typeName","replaces","redefines","Registry","packages","uriOrPrefix","pkg","pkgMap","ensureAvailable","propertyNs","extendsName","extendsNameNs","extended","nsName","trait","traverse","parentNs","traverseTrait","traverseSuper","builder","packageMap","identifierKey","Properties","stripGlobal","Moddle","nsUri","fromCharCode","ENTITY_PATTERN","ENTITY_MAPPING","replaceEntities","_","decodeEntities","XSI_URI","XSI_PREFIX","XSI_TYPE","NON_WHITESPACE_OUTSIDE_ROOT_NODE","missingNamespaceForPrefix","getter","getFn","cloneNsMatrix","nsMatrix","uriPrefix","buildNsMatrix","nsUriToPrefix","uri","noopGetContext","throwFunc","Parser","proxy","onText","onOpenTag","onCloseTag","onCDATA","onError","onWarning","onComment","onQuestion","onAttention","getContext","maybeNS","isNamespace","returnError","parseStop","handleError","handleWarning","nsMap","_nsUriToPrefix","xml","nsMatrixStack","_nsMatrix","nodeStack","anonymousNsCount","tagStart","tagEnd","xmlns","elementName","_elementName","elementProxy","attrsString","attrsStart","cachedAttrs","getAttrs","nsUriPrefix","defaultAlias","attrList","hasNewMatrix","newalias","alias","seenAttrs","skipAttr","parseAttr","getParseContext","splitsRe","column","startOfLine","endOfLine","hasLowerCaseAlias","DEFAULT_NS_MAP","serializeFormat","serializeAsType","serializeAsProperty","capitalize","aliasToName","aliasNs","prefixedToName","typePrefix","normalizeXsiTypeName","parseNameNS","message","getModdleDescriptor","Context","elementsById","idProperty","warning","BaseHandler","NoopHandler","BodyHandler","ReferenceHandler","ValueHandler","propertyDesc","BaseElementHandler","ElementHandler","bodyProperty","attributes","instance","propNameNs","elementTypeName","elementType","GenericElementHandler","childHandler","isSimpleType","newElement","RootElementHandler","handler","Reader","done","rootHandler","lax","createStack","ctx","resolveReferences","references","handleClose","PREAMBLE_START_PATTERN","ENCODING_PATTERN","UTF_8_PATTERN","handleQuestion","question","encoding","handleOpen","handleCData","handleText","uriMap","decodeStr","selfClosing","decodedAttrs","resolve","reject","warnings","XML_PREAMBLE","ESCAPE_ATTR_CHARS","ESCAPE_CHARS","Namespaces","prefixMap","used","wellknown","isWellknown","nsKey","isUsed","allNs","lower","string","nameToAlias","ctor","superCtor","getNsAttrs","namespaces","getElementNs","getPropertyNs","getSerializableProperties","ESCAPE_ATTR_MAP","ESCAPE_MAP","charPattern","replaceMap","escapeAttr","escapeBody","filterAttributes","filterContained","ReferenceSerializer","tagName","writer","BodySerializer","ValueSerializer","ElementSerializer","propertyDescriptor","elementDescriptor","otherAttrs","isGeneric","effectiveNs","body","nonNsAttr","actualNs","genericAttrs","isReference","isMany","asType","asProperty","serializer","TypeSerializer","local","parentNamespaces","existing","newPrefix","wellknownUri","nsTagName","firstBody","indent","typeNs","SavingWriter","FormatingWriter","out","format","Writer","toXML","tree","internalWriter","formatingWriter","BpmnModdle","xmlStr","name$5","uri$5","prefix$5","associations$5","types$5","enumerations$3","xml$1","BpmnPackage","name$4","uri$4","prefix$4","types$4","enumerations$2","associations$4","BpmnDiPackage","name$3","uri$3","prefix$3","types$3","associations$3","DcPackage","name$2","uri$2","prefix$2","types$2","associations$2","DiPackage","name$1","uri$1","prefix$1","types$1","enumerations$1","associations$1","BiocPackage","enumerations","associations","BpmnInColorPackage","simple","additionalPackages","pks","elementToString","DI_ERROR_MESSAGE","ensureCompatDiRef","businessObject","findDisplayCandidate","definitions","BpmnTreeWalker","handledElements","deferred","diMap","contextual","handled","isHandled","visit","visitRoot","diagram","visitIfDi","logError","registerDi","bpmnElement","handleDiagram","handlePlane","handlePlaneElement","planeElement","diagrams","handleProcess","handleCollaboration","handleUnhandledProcesses","handleDeferred","process","handleFlowElementsContainer","handleIoSpecification","handleArtifacts","rootElements","handleMessageFlow","messageFlow","handleMessageFlows","messageFlows","handleDataAssociation","association","handleDataInput","dataInput","handleDataOutput","dataOutput","handleArtifact","artifact","artifacts","ioSpecification","handleSubProcess","subProcess","handleFlowNode","flowNode","childCtx","handleSequenceFlow","sequenceFlow","handleDataElement","dataObject","handleLane","lane","newContext","handleLaneSet","wireFlowNodeRefs","laneSet","handleLaneSets","laneSets","handleFlowElements","flowElements","flowElement","handleParticipant","participant","newCtx","collaboration","lanes","bo","getBusinessObject","isAny","getDi","importBpmnDiagram","bpmnDiagram","importer","canvas","render","visitor","parentShape","walker","diagramsToImport","getDiagramsToImport","rootId","findRootProcess","allChildren","selfAndAllFlowElements","BPMNIO_LOGO_SVG","BPMNIO_IMG","LOGO_STYLES","LINK_STYLES","LIGHTBOX_STYLES","BACKDROP_STYLES","NOTICE_STYLES","LIGHTBOX_MARKUP","lightbox","createLightbox","domQuery","open","domDelegate","BaseViewer","DEFAULT_OPTIONS","addProjectLogo","ParseCompleteEvent","aggregatedWarnings","parseResult","parseWarnings","importResult","addWarningsToError","checkValidationError","bpmnDiagramOrId","findBPMNDiagram","contentNode","defsNode","contents","defs","domRemove","moddle","baseModules","additionalModules","staticModules","diagramModules","diagramOptions","ensureUnit","moddleOptions","warningsAry","diagramId","linkMarkup","linkElement","domEvent","openPoweredBy","BaseModeler","ids","isExpanded","isHorizontal","isInterrupting","isEventSubProcess","hasEventDefinition","eventType","eventDefinitions","hasErrorEventDefinition","hasEscalationEventDefinition","hasCompensateEventDefinition","DEFAULT_LABEL_SIZE","FLOW_LABEL_INDENT","isLabelExternal","semantic","hasExternalLabel","getFlowLabelPosition","mid","first","second","position","getWaypointsMid","getExternalLabelMid","getExternalLabelBounds","getLabelAttr","getCategoryValue","categoryValueRef","getLabel","setLabel","black","white","isTypedEvent","eventDefinitionType","definition","isThrowEvent","isCollection","getFillColor","defaultColor","overrideColor","getStrokeColor","getLabelColor","defaultStrokeColor","getCirclePath","circlePath","getRoundRectPath","borderRadius","roundRectPath","getDiamondPath","halfWidth","halfHeight","diamondPath","getRectPath","rectPath","getBounds","overrides","getWidth","getHeight","markerIds","ELEMENT_LABEL_DISTANCE","INNER_OUTER_DIST","PARTICIPANT_STROKE_WIDTH","TASK_BORDER_RADIUS","DEFAULT_OPACITY","FULL_OPACITY","LOW_OPACITY","BpmnRenderer","pathMap","textRenderer","defaultFillColor","defaultLabelColor","shapeStyle","lineStyle","addMarker","parentGfx","fill","stroke","createMarker","sequenceflowEnd","messageflowStart","messageflowEnd","associationStart","associationEnd","conditionalFlowMarker","defaultFlowMarker","drawCircle","offset","circle","drawRect","drawDiamond","x_2","y_2","pointsString","polygon","drawLine","drawConnectionSegments","drawMarker","renderer","handlers","as","eventIconRenderers","isThrowing","pathData","messagePath","linePathData","renderEventIcon","getSemantic","taskMarkerRenderers","markerPath","markerRect","markerMath","renderTaskMarker","renderTaskMarkers","taskMarkers","subprocess","loopCharacteristics","isSequential","renderLabel","renderEmbeddedLabel","align","renderExternalLabel","renderLaneLabel","isHorizontalLane","textBox","renderActivity","renderAssociation","pickAttrs","renderDataObject","collectionPathData","renderEvent","renderGateway","renderLane","renderSubProcess","activity","expanded","renderTask","renderIcon","cancelActivity","task","headerData","businessPath","headerPathData","businessHeaderPath","gateway","arrowPathData","dataStorePath","diamond","drawEvent","markerPathData","messageAttrs","messageRef","messageBounds","labelBounds","translateX","translateY","expandedParticipant","horizontalParticipant","source","sourceSemantic","pathDataService1","pathDataService2","textElement","textPathData","innerAttrs","pathDataUser1","pathDataUser2","pathDataUser3","pickedAttrs","DEFAULT_BOX_PADDING","parseAlign","parsePadding","getTextBBox","fakeText","textBBox","emptyLine","layoutNext","lines","maxWidth","originalLine","fitLine","fit","shortenLine","remainder","SOFT_BREAK","semanticShorten","maxLength","shortenedParts","last","shortenedLine","getHelperSvg","helperSvg","Text","fitBox","lineHeight","getLineHeight","layouted","helperText","totalHeight","maxLineWidth","tspan","dimensions","DEFAULT_FONT_SIZE","LINE_HEIGHT_RATIO","MIN_TEXT_ANNOTATION_HEIGHT","TextRenderer","defaultStyle","fontSize","externalStyle","textUtil","TextUtil","layoutedDimensions","PathMap","pathId","param","rawPath","coordinates","heightRatio","widthRatio","heightIndex","widthIndex","tokenRegex","objNotationRegex","replacer","quote","quotedName","isFunc","template","replacements","TranslateModule","elementData","getWaypoints","notYetDrawn","refSemantic","BpmnImporter","elementFactory","parentElement","hidden","collapsed","boundarySemantic","boundaryElement","hostSemantic","host","attachers","side","ImportModule","IdGenerator","LOW_PRIORITY","Overlays","createRoot","search","overlay","overlays","setVisible","setPosition","domAttr","htmlContainer","viewbox","setTransform","raw","overlayContainer","domClasses","elementRoot","activeRoot","show","minZoom","maxZoom","activeRootElement","visible","shouldScale","minScale","maxScale","updateViewbox","root","OverlaysModule","ChangeSupport","getElementType","ChangeSupportModule","CommandInterceptor","unwrapEvent","hook","handlerFn","fullEvent","createHook","RootElementsBehavior","RootElementsModule","escapeCSS","HTML_ESCAPE_MAP","escapeHTML","planeSuffix","getShapeIdFromPlane","removePlaneSuffix","getPlaneIdFromShape","addPlaneSuffix","toPlaneId","isPlane","OPEN_CLASS","DrilldownBreadcrumbs","breadcrumbs","containerClasses","businessObjectParents","isPresent","updateBreadcrumbs","getBusinessObjectParentChain","parentPlane","title","link","DrilldownCentering","positionMap","Map","newRoot","currentViewbox","storedViewbox","found","DEFAULT_POSITION","SubprocessCompatibility","newDiagrams","collapsedElements","elementsToMove","diElement","shouldMoveToPlane","planeBounds","getPlaneBounds","waypoint","newPlane","containingDiagram","findRootDiagram","parentPlaneElement","planeTrbl","ARROW_DOWN_SVG","EMPTY_MARKER","DrilldownOverlayBehavior","oldParent","newParent","hasFlowElements","existingOverlays","button","DrilldownModdule","Outline","OUTLINE_STYLE","createOutline","outline","updated","OutlineModule$1","DATA_OBJECT_REFERENCE_OUTLINE_PATH","DATA_STORE_REFERENCE_OUTLINE_PATH","DATA_OBJECT_REFERENCE_STANDARD_SIZE","DATA_STORE_REFERENCE_STANDARD_SIZE","createPath","DEFAULT_OFFSET","OutlineProvider","isStandardSize","standardSize","OutlineModule","Ouline","OulineProvider","__stopPropagation","getOriginal","stopPropagation","toPoint","isMac","isButton","getOriginalEvent","isPrimaryButton","isAuxiliaryButton","hasPrimaryModifier","originalEvent","hasSecondaryModifier","allowAll","allowPrimaryAndAuxiliary","InteractionEvents","isIgnored","mouseHandler","localEventName","ignoredFilters","bindings","triggerMouseEvent","eventName","targetElement","ELEMENT_SELECTOR","registerEvent","localEvent","ignoredFilter","unregisterEvent","registerEvents","unregisterEvents","STROKE_HIT_STYLE","createHitStyle","CLICK_STROKE_HIT_STYLE","ALL_HIT_STYLE","NO_MOVE_HIT_STYLE","HIT_TYPES","classNames","applyStyle","hit","appendHit","hits","domQueryAll","boxType","InteractionEventsModule$1","Selection","selectedElements","oldSelection","MARKER_HOVER","MARKER_SELECTED","SELECTION_OUTLINE_PADDING","SelectionVisuals","selection","removeMarker","deselect","select","newSelection","svgClear","enabled","bBox","addSelectionOutlinePadding","SelectionBehavior","canExecute","hints","autoSelect","isShown","previousSelection","isSelected","selectedShape","isMultiSelect","SelectionModule","InteractionEventsModule","Viewer","KEYS_COPY","KEYS_PASTE","KEYS_REDO","KEYS_UNDO","hasModifier","isCmd","isKey","isShift","isCopy","isPaste","isUndo","isRedo","KEYDOWN_EVENT","KEYUP_EVENT","HANDLE_MODIFIER_ATTRIBUTE","Keyboard","eventBusResult","isInput","allowedModifiers","modifierContainer","domClosest","domMatches","KeyboardBindings","keyboard","editorActions","addListener","action","KeyboardModule$1","DEFAULT_CONFIG","KeyboardMove","arrowsListener","speed","direction","actualSpeed","KeyboardMoveModule","KeyboardModule","CURSOR_CLS_PATTERN","mode","unset","TRAP_PRIORITY","install","trap","THRESHOLD","MoveCanvas","handleStart","handleMove","deltaPos","installClickTrap","cursorSet","lastPosition","handleEnd","cursorUnset","MoveCanvasModule","log10","getStepSize","range","steps","minLinearRange","maxLinearRange","absoluteLinearRange","cap","sign","RANGE","NUM_STEPS","DELTA_THRESHOLD","DEFAULT_SCALE","ZoomScroll","stepSize","isZoom","isHorizontalScroll","elementRect","currentLinearZoomLevel","newLinearZoomLevel","newLogZoomLevel","newEnabled","handleWheel","oldEnabled","ZoomScrollModule","NavigatedViewer","sortTopOrMiddle","sortLeftOrCenter","ALIGNMENT_SORTING","AlignElements","modeling","rules","dimension","sortedElements","alignment","centers","hasSharedCenters","centeredElements","firstElement","lastElement","getMiddleOrTop","allowed","sortFn","AlignElementsModule$1","Scheduler","taskFn","newScheduled","promise","defer","scheduled","_resolve","_reject","SchedulerModule","MARKER_HIDDEN","entrySelector","CONTEXT_PAD_MARGIN","HOVER_DELAY","ContextPad","scheduler","current","targets","targetsChanged","targetsNew","provideFn","entries","entriesOrUpdater","autoActivate","entryId","image","grouping","control","addClasses","targetsEqual","lastWaypoint","getLastWaypoint","containerBounds","targetBounds","updateFn","isHidden","elementsGfx","elementGfx","otherTarget","ContextPadModule$1","$","e$1","clsx","PopupMenuHeader","headerEntries","onSelect","selectedEntry","setSelectedEntry","groups","useMemo","groupEntries","getHeaderClasses","groupId","selected","PopupMenuItem","onMouseEnter","onMouseLeave","onAction","PopupMenuList","restProps","resultsRef","useRef","useLayoutEffect","containerEl","selectedEl","scrollIntoView","getGroup","elem","containsGroup","formatGroup","PopupMenuComponent","onClose","emptyPlaceholder","originalEntries","onOpened","onClosed","searchable","setValue","filterEntries","useCallback","searchableFields","word","field","setEntries","updateEntries","newEntries","keyboardSelect","nextIdx","handleKeyDown","handleKey","displayHeader","PopupMenuWrapper","onKeydown","onKeyup","positionGetter","popupRef","popupEl","handleClick","getPopupStyle","DATA_REF","CLOSE_EVENTS","PopupMenu","_position","entriesArray","headerEntriesArray","providerId","payload","scaleConfig","documentBounds","overAxis","PopupMenuModule$1","icons","AlignElementsContextPadProvider","contextPad","popupMenu","actions","ICONS","Y_OFFSET","pad","padRect","pos","ALIGNMENT_OPTIONS","AlignElementsMenuProvider","alignElements","RuleProvider","BpmnAlignElements","AlignElementsModule","ContextPadModule","PopupMenuModule","PLACEMENT_DETECTION_PAD","DEFAULT_DISTANCE","DEFAULT_MAX_DISTANCE","findFreePosition","getNextPosition","connectedAtPosition","getConnectedAtPosition","generateGetNextPosition","nextPositionDirection","previousPosition","nextPosition","nextPositionDirectionForAxis","margin","minDistance","getAutoPlaceClosure","getConnectedDistance","getDefaultWeight","defaultDistance","getWeight","maxDistance","noneFilter","getDistance","sourcesDistances","weight","targetsDistances","distances","accumulator","currentValue","distancesGrouped","allConnected","getConnected","shapes","attacher","getTargets","getSources","AutoPlace","getNewShapePosition","newShape","sourceMid","sourceTrbl","AutoPlaceSelectionBehavior","AutoPlaceModule$1","anyType","isDirectionHorizontal","pool","placeHorizontally","getTextAnnotationPosition","getDataElementPosition","getFlowNodePosition","placement","connectedDistance","AutoPlaceModule","BpmnAutoPlace","AutoResize","autoResize","expandings","parentId","elementsTrbl","targetTrbl","newTrbl","newBounds","boundsChanged","resizeDirections","getResizeDirections","oldBounds","directions","BpmnAutoResize","AutoResizeProvider","BpmnAutoResizeProvider","canResize","AutoResizeModule","HIGH_PRIORITY","HoverFix","dragging","ensureHover","hoverGfx","hover","getGfx","HoverFixModule","DRAG_ACTIVE_CLS","preventDefault","isTouchEvent","getLength","Dragging","defaultOptions","toLocalPoint","globalPosition","clientRect","dragContext","restoreSelection","existingSelection","activate","displacement","globalStart","globalCurrent","globalDelta","localStart","localCurrent","localDelta","cancel","previousContext","cleanup","checkCancel","trapClickAndEnd","untrap","trapTouch","restore","wasActive","endDrag","init","relativeTo","isTouch","DraggingModule","AutoScroll","opts","diff","between","AutoScrollModule","Rules","commandStack","RulesModule$1","max","segments","INTERSECTION_THRESHOLD","getBendpointIntersection","getPathIntersection","getApproxIntersection","vector","getAngle","rotateVector","solveLambaSystem","system","perpendicularFoot","getDistancePointLine","pfPoint","connectionVector","getDistancePointPoint","point1","point2","BENDPOINT_CLS","SEGMENT_DRAGGER_CLS","toCanvasCoordinates","getConnectionIntersection","localPosition","intersection","addBendpoint","groupGfx","createParallelDragger","segmentStart","segmentEnd","draggerGfx","hitWidth","calculateHitWidth","hitHeight","addSegmentDragger","calculateSegmentMoveRegion","segmentLength","getClosestPointOnConnection","segment","getClosestSegment","segmentLengthXAxis","segmentLengthYAxis","segmentIndex","Bendpoints","interactionEvents","bendpointMove","connectionSegmentMove","isIntersectionMiddle","treshold","p0","aligned","xDelta","yDelta","calculateIntersectionThreshold","relevantSegment","threshold","activateBendpointMove","bindInteractionEvents","getBendpointsContainer","getSegmentDragger","createBendpoints","bendpoint","createSegmentDraggers","segmentDraggerGfx","clearBendpoints","clearSegmentDraggers","addHandles","updateHandles","updateFloatingBendpointPosition","floating","updateSegmentDraggerPosition","draggerVisual","relativePosition","getDraggerVisual","bendpointsGfx","primary","bendpointContainer","RECONNECT_START","RECONNECT_END","UPDATE_WAYPOINTS","BendpointMove","bendpointIndex","insert","command","newWaypoints","docking","isReverse","connectionDocking","MARKER_OK","MARKER_NOT_OK","MARKER_CONNECT_HOVER","MARKER_CONNECT_UPDATING","MARKER_DRAGGER","BendpointMovePreview","connectionPreview","drawPreviewHints","axisAdd","axisSet","axisFenced","maxValue","minValue","fencedValue","flipAxis","getDocking","referenceElement","moveAxis","referenceMid","inverseAxis","ConnectionSegmentMove","segmentStartIndex","segmentEndIndex","dragPosition","cropConnection","oldWaypoints","croppedWaypoints","redrawConnection","updateDragger","segmentOffset","draggerPosition","filteredWaypoints","newSegmentStart","newSegmentEnd","waypointCount","sourceToSegmentOrientation","targetToSegmentOrientation","newSegmentStartIndex","snapTo","snapValue","topLeft","bottomRight","defaultValue","isSnapped","snapped","setSnapped","previousValue","TOLERANCE","BendpointSnapping","getSnapPoint","getConnectionSegmentSnaps","snapPoints","referenceWaypoints","sx","sy","getBendpointSnaps","hoverMid","BendpointsModule","RulesModule","Connect","canConnect","canConnectReverse","connectionStart","connectionEnd","ConnectPreview","startPosition","previewStart","previewEnd","ConnectModule","MARKER_CONNECTION_PREVIEW","ConnectionPreview","connectionPreviewGfx","getConnection","noLayout","noCropping","noNoop","cacheReturnValues","sourcePath","targetPath","ensureConnectionAttrs","returnValues","firstArgument","ConnectionPreviewModule","cloneIds","MARKER_TYPES","NODES_CAN_HAVE_MARKER","PreviewSupport","dragger","svgClone","frame","rootGfx","canHaveMarker","markerType","getMarker","clonedMarkerId","copiedMarker","clonedMarker","idToReference","referenceToId","PreviewSupportModule","LAYER_NAME","ComplexPreview","previewSupport","created","moved","removed","resized","ComplexPreviewModule","ALIGNMENTS","AdaptiveLabelPositioningBehavior","checkLabelAdjustment","optimalPosition","getOptimalPosition","adjustLabelPosition","elementMid","labelMid","newLabelMid","substract","getTakenHostAlignments","hostElement","hostOrientation","freeAlignments","takenAlignments","getTakenConnectionAlignments","getApproximateOrientation","labelOrientation","isAligned","takenHostAlignments","AppendBehavior","AssociationBehavior","AttachEventBehavior","bpmnReplace","shouldReplace","eventDefinition","getEventDefinition","boundaryEvent","BoundaryEventBehavior","getBoundaryEvents","boundaryEvents","oldSource","newSource","attachedboundaryEvents","CompensateBoundaryEventBehavior","bpmnRules","handleReplacement","handleReplacementPostExecuted","handleNewConnection","handleConnectionRemoval","handleReconnection","handlePropertiesUpdate","isCompensationBoundaryEvent","isForCompensation","removeIsForCompensationProperty","isForCompensationAllowed","addIsForCompensationProperty","removeExistingAssociations","newTarget","oldTarget","removeDisallowedConnections","removeAttachments","removeIncomingCompensationAssociations","newData","oldShape","targetConnection","removeOutgoingSequenceFlows","ignoredAssociations","attachments","compensationAssociations","sequenceFlows","CreateBehavior","CreateDataObjectBehavior","bpmnFactory","HORIZONTAL_PARTICIPANT_PADDING","VERTICAL_PARTICIPANT_PADDING","PARTICIPANT_BORDER_WIDTH","CreateParticipantBehavior","childrenBBox","participantBounds","getParticipantBounds","getParticipantCreateConstraints","rootElementGfx","ensureHoveringProcess","getOrCreateCollaboration","findParticipant","processRef","TARGET_REF_PLACEHOLDER_NAME","DataInputAssociationBehavior","ifDataInputAssociation","fixTargetRef","usesTargetRef","targetRef","removedConnection","inputAssociations","getTargetRef","targetRefProp","cleanupTargetRef","connectionBo","targetBo","newTargetBo","oldTargetBo","dataAssociation","UpdateSemanticParentHandler","bpmnUpdater","dataStoreBo","dataStoreDi","newSemanticParent","newDiParent","oldSemanticParent","oldDiParent","DataStoreBehavior","getFirstParticipantWithProcessRef","getDataStores","updateDataStoreParent","dataStore","newDataStoreParent","newDataStoreParentBo","dataStoreReferences","getAncestor","isDescendant","oldRoot","dataStores","descendant","ancestor","descendantBo","ancestorBo","min","DEFAULT_CHILD_BOX_PADDING","substractTRBL","trblA","trblB","resizeBounds","resizeTRBL","resize","applyConstraints","resizeConstraints","ensureConstraints","currentBounds","currentTrbl","getMinResizeBounds","minDimensions","childrenBounds","currentBox","minBox","childrenBox","combinedBox","asPadding","mayBePadding","addPadding","isBBoxChild","computeChildrenBBox","shapeOrChildren","getTRBLResize","LANE_PARENTS","LANE_INDENTATION","collectLanes","collectedShapes","getChildLanes","getLanesRoot","computeLanesResize","initialShapes","allLanes","shapeTrbl","shapeNewTrbl","trblResize","resizeNeeded","other","topResize","rightResize","bottomResize","leftResize","otherTrbl","DeleteLaneBehavior","spaceTool","compensateLaneDelete","siblings","topAffected","bottomAffected","leftAffected","rightAffected","topAdjustments","bottomAdjustments","leftAdjustments","rightAdjustments","DetachEventBehavior","newHost","includes","intermediateEvent","DropOnFlowBehavior","insertShape","targetFlow","positionOrBounds","waypointsBefore","waypointsAfter","dockingPoint","incomingConnection","outgoingConnection","oldOutgoing","oldIncoming","copy","duplicateConnections","shapeMid","newShapeMid","canInsert","EventBasedGatewayBehavior","isSequenceFlow","flow","sequenceFlowsFromNewShape","HIGHEST_PRIORITY","FixHoverBehavior","createCategory","createCategoryValue","linkCategoryValue","categoryValue","category","unlinkCategoryValue","unlinkCategory","LOWER_PRIORITY","GroupBehavior","bpmnjs","moddleCopy","getGroupElements","isReferencedCategory","_category","isReferencedCategoryValue","removeCategoryValue","addCategoryValue","setCategoryValue","unsetCategoryValue","labelTarget","groupBo","lineIntersect","l1s","l1e","l2s","l2e","numerator","ImportDockingFix","adjustDocking","startPoint","elementTop","elementLeft","verticalIntersect","horizontalIntersect","centerIntersect","fixDockings","IsHorizontalFix","elementTypesToUpdate","sqrt","sq","getAttachment","segmentStartDistance","segmentEndDistance","attachmentPosition","attachment","attachmentDistance","closestAttachmentDistance","closestAttachment","pointsEqual","getCircleSegmentIntersections","cr","baX","baY","caX","caY","bBy2","pBy2","tmpSqrt","abScalingFactor1","abScalingFactor2","i1","i2","isPointInSegment","fenced","rangeStart","rangeEnd","EQUAL_THRESHOLD","findNewLineStartIndex","oldSegmentStartIndex","newIndex","rel","relativePositionMidWaypoint","getAnchorPointAdjustment","oldPosition","oldLabelLineIndex","newLabelLineIndex","oldLabelLine","getLine","newLabelLine","oldFoot","relativeFootPosition","getRelativeFootPosition","angleDelta","getAngleDelta","oldBendpointIndex","oldBendpoint","newBendpoint","newFoot","newLabelVector","distanceSegment1","distanceSegment2","a1","a2","foot","lengthToFoot","getLabelAdjustment","labelPosition","getNewAttachPoint","oldCenter","newCenter","oldDelta","newDelta","getNewAttachShapeDelta","shapeCenter","shapeDelta","oldCenterDelta","stickyPositionDelta","getStickyPositionDelta","newCenterDelta","newShapeCenter","oldShapeCenter","oldTRBL","newTRBL","isMoved","oldOrientation","newOrientation","isHorizontallyMoved","isVerticallyMoved","NAME_PROPERTY","TEXT_PROPERTY","LabelBehavior","onPropertyUpdate","getVisibleLabelAdjustment","labelAdjustment","edges","asEdges","getReferencePoint","getReferencePointDelta","newReferencePoint","nearestLine","getNearestLine","getConnectionAdjustment","LayoutConnectionBehavior","getnewAnchorPoint","getConnectionAnchorPoint","outgoing","incoming","endPoint","newEndpoint","startpoint","newStartpoint","getResizedSourceAnchor","safeGetWaypoints","waypointsInsideNewBounds","getWaypointsInsideBounds","oldAnchor","getResizedTargetAnchor","getMovedSourceAnchor","moveDelta","subtract","getMovedTargetAnchor","originalWaypoints","isInsideBounds","MessageFlowBehavior","isParticipantCollapse","getMessageFlows","anchor","NON_INTERRUPTING_EVENT_TYPES","canBeNonInterrupting","getInterruptingProperty","NonInterruptingBehavior","isOldInterrupting","isNewInterruptingDefault","RemoveEmbeddedLabelBoundsBehavior","RemoveElementBehavior","inConnection","outConnection","getNewWaypoints","inWaypoints","outWaypoints","RemoveParticipantBehavior","collaborationRoot","ReplaceConnectionBehavior","fixConnection","replacementType","replaceReconnectedConnection","replacement","cleanDraggingSelection","oldConnection","newConnection","ReplaceElementBehaviour","elementReplacements","canReplace","topLevelElements","newElements","oldElement","GROUP_MIN_DIMENSIONS","LANE_MIN_DIMENSIONS","VERTICAL_LANE_MIN_DIMENSIONS","PARTICIPANT_MIN_DIMENSIONS","VERTICAL_PARTICIPANT_MIN_DIMENSIONS","SUB_PROCESS_MIN_DIMENSIONS","TEXT_ANNOTATION_MIN_DIMENSIONS","ResizeBehavior","balanced","getParticipantResizeConstraints","addToTrbl","choice","addMin","addMax","LANE_PADDING","VERTICAL_LANE_PADDING","laneShape","resizeDirection","lanesRoot","isFirst","isLast","laneTrbl","maxTrbl","minTrbl","flowElementTrbl","SLIGHTLY_HIGHER_PRIORITY","ResizeLaneBehavior","RootElementReferenceBehavior","canHaveRootElementReference","hasAnyEventDefinition","hasRootElement","getRootElementReferencePropertyName","getRootElement","setRootElement","addedRootElement","referencedRootElement","SpaceToolBehavior","getParticipantMinDimensions","isHorizontalAxis","hasChildLanes","isHorizontalResize","getParticipantMinWidth","getParticipantMinHeight","lanesMinHeight","getLanesMinHeight","lanesMinWidth","getLanesMinWidth","resizeStart","resizedLane","findResizedLane","childLanes","SubProcessPlaneBehavior","isCollapsedSubProcess","removeRoot","attachedRoot","oldProperties","oldId","primaryShape","referencedShape","visibleChildren","targetMid","childrenMid","diPlane","diDiagram","removedDiagram","SubProcessStartEventBehavior","getStartEventPosition","TextAnnotationBehavior","ToggleCollapseConnectionBehaviour","incomingConnections","outgoingConnections","ToggleElementCollapseBehaviour","hideEmptyLabels","expandedBounds","defaultSize","visibleElements","visibleBBox","filterVisible","collapsedBounds","UnclaimIdBehavior","shapeBo","rootElementBo","DeleteSequenceFlowBehavior","isDefaultFlow","sourceBo","UpdateFlowNodeRefsBehavior","initContext","UpdateContext","releaseContext","triggerUpdate","laneRefUpdateEvents","updateContext","SetCompensationActivityAfterPasteBehavior","isConnectedToCompensationBoundaryEvent","BehaviorModule","UnsetDefaultFlowBehavior","getBoundaryAttachment","BpmnRules","canStartConnection","targetParent","targetAttach","canAttach","canCreate","canMove","canCopy","canConnectMessageFlow","canConnectSequenceFlow","canConnectDataAssociation","canConnectAssociation","canConnectCompensationAssociation","canDrop","nonExistingOrLabel","isSame","getOrganizationalParent","isTextAnnotation","isGroup","isCompensationBoundary","isSameOrganization","parentA","parentB","isMessageFlowSource","hasEventDefinitionOrNone","isMessageFlowTarget","getScopeParent","isSameScope","scopeParentA","scopeParentB","isSequenceFlowSource","isSequenceFlowTarget","isEventBasedTarget","isParent","possibleParent","allParents","connectDataAssociation","isDroppableBoundaryEvent","hasNoEventDefinition","hasCommonBoundaryIntermediateEventDefinition","isBoundaryEvent","isLane","isBoundaryCandidate","hasOneOfEventDefinitions","isReceiveTaskAfterEventBasedGateway","isBoundaryAttachment","isOneTextAnnotation","sourceTextAnnotation","targetTextAnnotation","isHostOfElement","potentialHost","BpmnDiOrdering","orderDi","rootDi","diElements","DiOrderingModule","OrderingProvider","ordering","BpmnOrderingProvider","orders","computeOrder","getOrder","order","findActualParent","containers","actualParent","elementOrder","currentIndex","insertIndex","OrderingModule","Clipboard","ClipboardModule","MARKER_ATTACH","MARKER_NEW_PARENT","PREFIX","Create","attach","connect","isSingleShape","connectionTarget","setMarker","createConstraints","CreatePreview","createDragGroup","dragGroup","CreateModule","Mouse","setLastMoveEvent","mousemoveEvent","createMoveEvent","screenX","screenY","clientX","clientY","MouseModule","CopyPaste","clipboard","mouse","parentCopied","isAttacher","copyWaypoints","branch","elementsData","addElementData","foundElementData","removeElementData","_index","addRelatedElements","removeElement","copyWaypoint","CopyPasteModule$1","copyProperties","BpmnCopyPaste","businessObjectCopy","diCopy","referencesKey","getReferences","setReferences","participantBo","DISALLOWED_PROPERTIES","ModdleCopy","propertyNames","parentDescriptor","sourceElement","getPropertyNames","canCopyProperties","sourceProperty","copiedProperty","canSetProperty","childProperties","childProperty","keepDefaultProperties","CopyPasteModule","Replace","centerX","centerY","ReplaceSelectionBehavior","ReplaceModule$1","CUSTOM_PROPERTIES","shouldToggleCollapsed","oldCollapsed","targetCollapsed","BpmnReplace","replaceElement","oldBusinessObject","isSubProcess","newBusinessObject","elementProps","newElementProps","copyProps","isHorizontalPool","ReplaceModule","ToolManager","tools","tool","eventsToRegister","isPaletteClick","ToolManagerModule","getDirection","getWaypointsUpdatingConnections","movingShapes","resizingShapes","waypointsUpdatingConnections","AXIS_TO_DIMENSION","CURSOR_CROSSHAIR","DIRECTION_TO_TRBL","DIRECTION_TO_OPPOSITE","PADDING","SpaceTool","toolManager","reactivate","spaceToolConstraints","getSpaceToolConstraints","setCursor","connections","moveShape","resizeShape","shapeStart","shapeEnd","mouseEvent","resizingShape","resizingShapeBBox","nonMovingResizingChildren","movingChildren","minOrMax","nonMovingResizingChildrenBBox","movingChildrenBBox","movingAttachers","nonMovingAttachers","movingAttachersBBox","movingAttachersConstraint","nonMovingAttachersBBox","nonMovingAttachersConstraint","resizingShapeMinDimensions","MARKER_DRAGGING","MARKER_RESIZING","SpaceToolPreview","addPreviewGfx","space","crosshairGroup","pathX","pathY","spaceLayer","movingConnections","sourceIsMoving","targetIsMoving","sourceIsResizing","targetIsResizing","frameGroup","frames","initialBounds","opposite","SpaceToolModule$1","BpmnSpaceTool","adjustments","isCollapsedPool","SpaceToolModule","CommandStack","emit","next","handlerCls","qualifier","execution","redo","baseAction","trigger","dirty","stackIdx","CommandModule","saveClear","removeFn","LabelSupport","movePreview","validatedShapes","removeLabels","enclosedLabels","collectionIdx","labelTargetIndex","LabelSupportModule","AttachSupport","addAttached","removeAttached","getAttachers","AttachSupportModule","BpmnFactory","BpmnUpdater","updateParent","reverseUpdateParent","ifBpmn","updateRoot","updateBounds","updateConnection","updateConnectionWaypoints","oldSourceBo","newSourceBo","updateAttachment","updateBPMNLabel","diLabel","parentBusinessObject","parentDi","embeddedLabelBounds","getEmbeddedLabelBounds","embeddedLabelBoundsDelta","newContainment","oldContainment","oldRefs","newRefs","connectionDi","newSourceDi","newTargetDi","planeElements","getDefinitions","visualParent","containment","diChildren","inverseSet","BaseElementFactory","isModdleDi","diAttrs","applyAttributes","applyAttribute","newEventDefinition","attributeNames","attributeName","AppendShapeHandler","existsConnection","CreateConnectionHandler","layouter","CreateElementsHandler","createShapeHints","CreateShapeHandler","CreateLabelHandler","originalExecute","ensureValidDimensions","originalRevert","DeleteConnectionHandler","DeleteElementsHandler","DeleteShapeHandler","oldParentIndex","DistributeElements","OFF_AXIS","updateRange","lastIdx","rangeDiff","centerElement","refCenter","firstGroup","lastGroupIdx","lastGroup","spaceInBetween","groupsSize","refElem","groupIdx","prevGroup","LayoutConnectionHandler","MoveConnectionHandler","newParentIndex","MoveClosure","newClosure","MoveHelper","keepParent","sourceMoved","targetMoved","MoveElementsHandler","MoveShapeHandler","ReconnectConnectionHandler","dockingOrPoints","layoutConnectionHints","ReplaceShapeHandler","canReconnect","ResizeShapeHandler","minBounds","SpaceToolHandler","affectedShapes","getAxisFromDirection","layoutHints","shouldMoveWaypoint","relevantAxis","ToggleShapeCollapseHandler","getElementsVisibilityRecursive","setHiddenRecursive","oldChildrenVisibility","restoreVisibilityRecursive","newHidden","lastState","UpdateAttachmentHandler","oldHost","removeAttacher","addAttacher","attacherIdx","UpdateWaypointsHandler","Modeling","DistributeElementsHandler","AlignElementsHandler","UpdateModdlePropertiesHandler","moddleElement","changed","getModdleProperties","setModdleProperties","getAllDataObjectReferences","DEFAULT_FLOW","ID","DI","NULL_DIMENSIONS","UpdatePropertiesHandler","unwrapBusinessObjects","getProperties","isIdChange","setProperties","newLabelBounds","getDiProperties","setDiProperties","referencePropertyNames","unwrappedProps","UpdateCanvasRootHandler","newRootBusinessObject","oldRootBusinessObject","bpmnDefinitions","AddLaneHandler","location","isRoot","laneParent","existingChildLanes","siblingPosition","allAffected","lanePosition","spacePos","newLanePosition","SplitLaneHandler","newLanesCount","existingLanesCount","laneBaseSize","newLanesSize","laneSize","laneBounds","newLaneAttrs","ResizeLaneHandler","trblDiff","change","FLOW_NODE_REFS_ATTR","LANES_ATTR","UpdateFlowNodeRefsHandler","flowNodeShapes","laneShapes","handledNodes","updates","participantCache","allFlowNodeShapes","isInLaneShape","addFlowNodeShape","flowNodeShape","getAllLaneShapes","getNewLanes","allLaneShapes","update","oldLane","newLane","IdClaimHandler","claiming","DEFAULT_COLORS","SetColorHandler","color","hexColor","colorToHex","colors","assignedDi","elementDi","ensureLegacySupport","UpdateLabelHandler","setText","preExecute","isEmptyText","paddingTop","labelCenter","execute","revert","postExecute","BaseModeling","targetLaneShape","targetLane","collaborationElement","processElement","BaseLayouter","MIN_SEGMENT_LENGTH","POINT_ORIENTATION_PADDING","ORIENTATION_THRESHOLD","needsTurn","startDirection","canLayoutStraight","targetOrientation","getSegmentBendpoints","xmid","ymid","segmentDirections","layoutStraight","layoutHorizontal","layoutTurn","turnNextDirections","getBendpoints","getStartSegment","getEndSegment","invertedSegment","invertDirections","getMidSegment","startSegment","endSegment","endDirection","bendpoints","getSimpleBendpoints","isValidDirections","isExplicitDirections","connectPoints","withoutRedundantPoints","connectRectangles","preferredLayouts","preferredLayout","getDirections","directionSplit","startDocking","getDockingPoint","invertOrientation","endDocking","repairConnection","preferStraight","repairedWaypoints","tryLayoutStraight","tryRepairConnectionEnd","tryRepairConnectionStart","inRange","isInRange","primaryAxis","newDocking","_tryRepairConnectionSide","needsRelayout","repairBendpoint","candidate","oldPeer","newPeer","removeOverlapping","oldDocking","newPoints","slicedPoints","defaultLayout","rectangle","dockingDirection","previous","ATTACH_ORIENTATION_PADDING","BOUNDARY_TO_HOST_THRESHOLD","PREFERRED_LAYOUTS_HORIZONTAL","PREFERRED_LAYOUTS_VERTICAL","oppositeOrientationMapping","orientationDirectionMapping","BpmnLayouter","manhattanOptions","updatedWaypoints","getConnectionDocking","isCompensationAssociation","layout","getMessageFlowManhattanOptions","getLoopPreferredLayout","getBoundaryEventPreferredLayouts","isExpandedSubProcess","getSubProcessPreserveDocking","getAttachOrientation","attachedElement","getMessageFlowPreserveDocking","isAnyOrientation","orientations","getHorizontalOrientation","getVerticalOrientation","isOppositeOrientation","isOppositeHorizontalOrientation","horizontalOrientation","oppositeHorizontalOrientation","isOppositeVerticalOrientation","verticalOrientation","oppositeVerticalOrientation","isHorizontalOrientation","attachOrientation","sourceLayout","targetLayout","isLoop","attachedToSide","getBoundaryEventLoopLayout","getBoundaryEventSourceLayout","getBoundaryEventTargetLayout","shouldConnectToSameSide","areCloseOnAxis","verticalAttachOrientation","horizontalAttachOrientation","verticalTargetOrientation","horizontalTargetOrientation","dockingToPoint","CroppingConnectionDocking","sourceDocking","targetDocking","dockStart","dockingIdx","croppedPoint","takeFirst","ModelingModule","AppendPreview","complexPreview","connectionCreateAllowed","AppendPreviewModule","isTextNode","toArray","nodeList","TextBox","content","parentStyle","contentStyle","hasResized","normalizeEndOfLineSequences","success","startContainer","endContainer","startOffset","endOffset","commonAncestorContainer","childNodesArray","containerTextContent","textNode","startContainerChildIndex","endContainerChildIndex","childNode","resizeHandle","minWidth","minHeight","maxHeight","startWidth","startHeight","onMouseDown","newWidth","newHeight","DirectEditing","active","previousBounds","newText","previousText","DirectEditingModule","isDifferentType","isTypeEqual","isEventDefinitionEqual","isTriggeredByEventEqual","isExpandedEqual","START_EVENT","START_EVENT_SUB_PROCESS","INTERMEDIATE_EVENT","END_EVENT","GATEWAY","SUBPROCESS_EXPANDED","TRANSACTION","EVENT_SUB_PROCESS","TASK","DATA_OBJECT_REFERENCE","DATA_STORE_REFERENCE","BOUNDARY_EVENT","EVENT_SUB_PROCESS_START_EVENT","SEQUENCE_FLOW","PARTICIPANT","Icons","ReplaceMenuProvider","filteredReplaceOptions","differentType","replaceOptions.DATA_OBJECT_REFERENCE","replaceOptions.DATA_STORE_REFERENCE","replaceOptions.START_EVENT","replaceOptions.PARTICIPANT","replaceOption","replaceOptions.EVENT_SUB_PROCESS_START_EVENT","isInterruptingEqual","replaceOptions.START_EVENT_SUB_PROCESS","replaceOptions.END_EVENT","replaceOptions.BOUNDARY_EVENT","isCancelActivityEqual","replaceOptions.INTERMEDIATE_EVENT","replaceOptions.GATEWAY","replaceOptions.TRANSACTION","replaceOptions.EVENT_SUB_PROCESS","replaceOptions.SUBPROCESS_EXPANDED","replaceOptions.TASK","isTargetSubProcess","isTargetExpanded","replaceOptions.SEQUENCE_FLOW","replaceOptions","conditionExpression","replaceAction","toggleLoopEntry","currentLoopCharacteristics","newLoopCharacteristics","isParallel","toggleIsCollection","toggleParticipantMultiplicity","isActive","participantMultiplicity","isAdHoc","interruptingProperty","icon","isNonInterrupting","ContextPadProvider","appendPreview","baseAllowed","autoPlace","deleteAction","startConnect","getReplaceMenuPosition","appendAction","appendStart","previewAppend","splitLaneHandler","isEventType","isType","isDefinition","def","AXIS_DIMENSIONS","filterFn","distributableElements","filters","rangeGroups","elementRange","rangeA","rangeB","DistributeElementsModule$1","BpmnDistributeElements","cannotDistribute","DistributeElementsMenuProvider","distributeElements","DistributeElementsModule","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","zoomScroll","copyPaste","keyboardMove","keyboardMoveSelection","removableElements","EditorActionsModule$1","BpmnEditorActions","lassoTool","handTool","globalConnect","directEditing","searchPad","currentSelection","aligneableElements","boundingBox","EditorActionsModule","BpmnGridSnapping","SPACING","quantize","quantum","GridSnapping","gridSnappingContext","snapOffset","getSnapOffset","snapConstraints","getSnapConstraints","snappedValue","minResizeConstraints","maxResizeConstraints","isWest","isNorth","snapLocation","gridSnapping","west","east","snappedNewBounds","north","south","GridSnappingBehaviorModule$1","GridSnappingModule$1","GridSnappingBehaviorModule","GridSnappingAutoPlaceBehavior","HIGHER_PRIORITY","GridSnappingParticipantBehavior","GridSnappingLayoutConnectionBehavior","hasMiddleSegments","snapSegment","horizontallyAligned","verticallyAligned","GridSnappingModule","LABEL_WIDTH","LABEL_HEIGHT","BpmnInteractionEvents","BpmnKeyboardBindings","LEFT","UP","RIGHT","DOWN","KEY_TO_DIRECTION","DIRECTIONS_DELTA","KeyboardMoveSelection","keyEvent","accelerated","KeyboardMoveSelectionModule","DEFAULT_MIN_WIDTH","Resize","contextOrDirection","getCursor","MARKER_RESIZE_NOT_OK","ResizePreview","updateFrame","removeFrame","HANDLE_OFFSET","HANDLE_SIZE","HANDLE_HIT_SIZE","CLS_RESIZER","ResizeHandles","startResize","resizersParent","getHandleOffset","resizer","ResizeModule","LabelEditingProvider","resizeHandles","activateDirectEdit","externalFontSize","externalLineHeight","defaultFontSize","defaultLineHeight","isExpandedPool","poolBounds","paddingBottom","externalLabelMid","absoluteBBox","activeContextText","MARKER_LABEL_HIDDEN","LabelEditingPreview","defaultLayer","absoluteElementBBox","activeProvider","newElementHeight","LabelEditingModule","tooltipClass","tooltipSelector","Tooltips","tooltip","removeTimer","tooltipRoot","TooltipsModule","COLLAB_ERR_MSG","ModelingFeedback","tooltips","showError","ModelingFeedbackModule","MEDIUM_PRIORITY","MoveEvents","removeNested","isAttach","MovePreview","getVisualDragShapes","getAllDraggedElements","removeEdges","allElements","uniqueElements","makeDraggable","dragShapes","allDraggedElements","visuallyDraggedShapes","haveDifferentParents","MoveModule","Move","TOGGLE_SELECTOR","ENTRY_SELECTOR","PALETTE_PREFIX","PALETTE_SHOWN_CLS","PALETTE_OPEN_CLS","PALETTE_TWO_COLUMN_CLS","Palette","addPaletteEntries","parentContainer","state","twoColumn","parentCls","entriesContainer","availableHeight","entriesHeight","toolsContainer","actionName","toolClasses","actualClassNames","PaletteModule$1","LASSO_TOOL_CURSOR","LassoTool","toBBox","LassoToolModule","HAND_CURSOR","HandTool","isSpace","HandToolModule","GlobalConnect","startTarget","canStartConnect","GlobalConnectModule","PaletteProvider","createAction","createListener","createSubprocess","startEvent","createParticipant","PaletteModule","BpmnReplacePreview","replaceVisual","tempShape","cssEscape","restoreVisual","visualReplacements","originalGfx","ReplacePreviewModule","TARGET_BOUNDS_PADDING","TASK_BOUNDS_PADDING","TARGET_CENTER_PADDING","AXES","BpmnConnectSnapping","snapToShape","getTargetBoundsPadding","isAnyType","snapToPosition","snapToTargetMid","snapBoundaryEventLoop","dimensionForAxis","getDimensionForAxis","isMid","axes","coordinate","newCoordinate","SnapContext","snapOrigin","snapValues","snapLocations","targetId","SnapPoints","snappingValues","defaultSnaps","CreateMoveSnapping","snapping","snapContext","shapeTopLeft","shapeBottomRight","snapTargets","snapTarget","BpmnCreateMoveSnapping","setSnappedIfConstrained","snapBoundaryEvent","isMove","getDockingSnapOrigin","isContainer","areAll","targetTRBL","ResizeSnapping","isVertical","getSnapOrigin","isAttached","SNAP_TOLERANCE","SNAP_LINE_HIDE_DELAY","Snapping","snapCurrent","locationSnapping","axisSnapping","snapLine","SnappingModule$1","SnappingModule","SCROLL_TO_ELEMENT_PADDING","SearchPad","listen","searchResults","searchResult","nodeOffset","containerScroll","bottomScroll","createInnerTextNode","restoreCached","selectedNode","input","tokens","createHtmlText","htmlText","SearchPadModule","BpmnSearchProvider","results","primaryTokens","findMatches","secondaryTokens","hasMatch","compareTokens","compareStrings","token","isMatch","tokensA","tokensB","tokensAHasMatch","tokensBHasMatch","tokensAFirstMatch","tokensBFirstMatch","originalText","SearchModule","initialDiagram","Modeler","Editor","processId","containerRef","modelerRef","setName","selectedElement","setSelectedElement","piTag","setPiTag","piUnit","setPiUnit","piPrecision","setPiPrecision","targetUrl","setTargetUrl","setElementName","alwaysOn","setAlwaysOn","textFontSize","setTextFontSize","textBold","setTextBold","textColor","setTextColor","textBgColor","setTextBgColor","nameFontSize","setNameFontSize","noteColor","setNoteColor","borderColor","setBorderColor","noteOpacity","setNoteOpacity","htmlContent","setHtmlContent","hasUnsavedChanges","setHasUnsavedChanges","isFinalEnd","setIsFinalEnd","isPanelOpen","setIsPanelOpen","isComposing","elementWidth","setElementWidth","elementHeight","setElementHeight","GOOGLE_COLORS","modeler","BpmnModeler","createNote","newDoc","docs","currentZoom","handleBack","handleSave","applyResize","updateElementName","newName","autoResizeElement","textWidth","updateElementProperties","endEvents","modified","updateElementColor","applyStyles","oldBg","oldFo","bgRect","fo","div","editor","this","_e","et","tt","nt","it","rt","ot","at","st","lt","pt","ut","ht","ft","dt","yt","gt","vt","xt","wt","bt","Et","_t","At","Rt","St","kt","Ct","Mt","Pt","Ot","Tt","Nt","Dt","Bt","Lt","It","jt","Ft","Vt","Wt","$t","zt","Gt","Ht","Kt","Ut","qt","Yt","Xt","Zt","Jt","Qt","en","tn","nn","rn","on","an","sn","ln","pn","cn","un","hn","mn","dn","yn","gn","vn","xn","wn","bn","En","_n","An","Rn","Sn","kn","Cn","Mn","Pn","On","Tn","Nn","Dn","Bn","Ln","In","jn","Fn","Vn","Wn","$n","zn","Gn","Hn","Kn","Un","qn","Yn","Xn","Zn","Jn","Qn","_i","er","tr","nr","ir","rr","or","ar","sr","lr","pr","ur","hr","fr","mr","dr","yr","gr","vr","xr","wr","br","Er","_r","Ar","Rr","Sr","kr","Cr","Mr","Pr","Or","Tr","Nr","Dr","Br","Lr","Ir","jr","Fr","Vr","Wr","$r","zr","Gr","Hr","Ur","Kr","qr","Yr","TimelineViewer","logs","headerActions","onUpdateLog","piStatusNode","scrollRef","log","newNote","FloatingTaskWindow","onStart","onEnd","onFinish","note","setNote","tagValues","loadingTag","isCompleted","isEndEvent","tv","Fragment","Operator","viewerRef","setProcess","setLogs","currentRunningTaskId","setCurrentRunningTaskId","isFinished","setIsFinished","showWindow","setShowWindow","windowTask","setWindowTask","setTagValues","setLoadingTag","piConnecting","setPiConnecting","onlineCount","setOnlineCount","isTimelineCollapsed","setIsTimelineCollapsed","userId","handleZoom","logsRef","runningTaskRef","checkPredecessors","currentLogs","sourceName","viewer","businessObj","existingBg","existingFo","pData","sData","BpmnJS","openTaskWindow","completedNames","alwaysOnElements","updateOverlays","renderContent","header","toggleBtn","isCollapsed","m41","m42","row","numVal","unitDiv","interval","onWheel","taskStatusByName","taskStatusByID","status","activeTaskId","unit","precision","taskName","startMsg","endMsg","hasStart","canStart","handleExportCSV","logsToExport","csvString","timestamp","handleUpdateLog","newLogs","handleStartTask","startValStr","displayVal","newLogStart","prev","newLog","handleCompleteTask","valStr","handleFinishProcess","sendHeartbeat","Review","csvData","setCsvData","processName","setProcessName","isLoaded","setIsLoaded","currentProcess","setCurrentProcess","taskStatus","parseCSVLine","inQuotes","lastField","handleFileUpload","startIndex","metaParts","csvId","csvVersion","cols","Settings","ip","setIp","loading","setLoading","App","page","setPage","activeProcessId","setActiveProcessId","navigate","ReactDOM","React"],"mappings":"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EAEA,IAAI4gC,GAAS,SACTC,GAAQ,8CACRC,GAAW,OACXC,GAAiB,CACrB,EACIC,GAAU,CACb,CACC,KAAM,YACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,aACN,KAAM,YACN,OAAQ,EACZ,EACG,CACC,KAAM,oBACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,KAAM,UACN,YAAa,EACjB,EACG,CACC,KAAM,gBACN,KAAM,UACN,YAAa,EACjB,EACG,CACC,KAAM,WACN,KAAM,QACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,oBACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,YACN,KAAM,eACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,cACH,CACA,EACC,CACC,KAAM,UACN,WAAY,CACX,wBACA,iBACH,EACE,WAAY,CACX,CACC,KAAM,cACN,KAAM,cACN,OAAQ,EACZ,EACG,CACC,KAAM,WACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,WACN,KAAM,UACV,EACG,CACC,KAAM,aACN,KAAM,YACV,EACG,CACC,KAAM,aACN,KAAM,WACN,OAAQ,EACZ,EACG,CACC,KAAM,WACN,OAAQ,GACR,SAAU,iCACV,KAAM,SACV,EACG,CACC,KAAM,eACN,OAAQ,GACR,SAAU,qCACV,KAAM,aACV,EACG,CACC,KAAM,YACN,KAAM,WACN,OAAQ,EACZ,EACG,CACC,KAAM,YACN,KAAM,eACN,OAAQ,EACZ,EACG,CACC,KAAM,2BACN,KAAM,0BACN,OAAQ,EACZ,EACG,CACC,KAAM,WACN,KAAM,UACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,+BACN,KAAM,gBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,eACN,OAAQ,GACR,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,UACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,QACN,KAAM,OACN,OAAQ,EACZ,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,OACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,sBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,mBACN,KAAM,aACV,EACG,CACC,KAAM,cACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,eACN,KAAM,UACN,IAAK,CACJ,UAAW,UAChB,CACA,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,YACH,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,MACH,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,aACN,KAAM,YACN,OAAQ,EACZ,EACG,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,WACH,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,gBACH,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,aACN,KAAM,YACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,UACN,WAAY,GACZ,WAAY,CACX,UACH,EACE,WAAY,CACX,CACC,KAAM,mBACN,KAAM,mBACN,QAAW,cACX,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,oBACN,WAAY,CACX,SACH,EACE,WAAY,CACX,CACC,KAAM,cACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,mBACN,KAAM,wBACN,OAAQ,GACR,QAAW,WACf,CACA,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,SACH,EACE,WAAY,CACX,CACC,KAAM,sBACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,UACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,SACH,EACE,WAAY,CACX,CACC,KAAM,UACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,SACH,EACE,WAAY,CACX,CACC,KAAM,UACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,kBACN,WAAY,CACX,SACH,CACA,EACC,CACC,KAAM,cACN,WAAY,GACZ,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,eACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,YACN,KAAM,wBACN,OAAQ,EACZ,EACG,CACC,KAAM,SACN,OAAQ,GACR,YAAa,GACb,KAAM,SACV,EACG,CACC,KAAM,SACN,OAAQ,GACR,YAAa,GACb,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,GACZ,WAAY,CACX,CACC,KAAM,KACN,OAAQ,GACR,KAAM,SACN,KAAM,EACV,EACG,CACC,KAAM,gBACN,KAAM,gBACN,OAAQ,EACZ,EACG,CACC,KAAM,uBACN,KAAM,sBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,oBACN,KAAM,mBACV,CACA,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,CACC,KAAM,iBACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,aACN,KAAM,sBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,sBACN,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,gCACN,KAAM,+BACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,+BACN,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,cACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,sBACN,KAAM,sBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,oBACN,WAAY,CACX,CACC,KAAM,WACN,OAAQ,GACR,YAAa,GACb,KAAM,SACV,EACG,CACC,KAAM,SACN,KAAM,UACN,OAAQ,EACZ,EACG,CACC,KAAM,+BACN,KAAM,+BACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,gBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,KAAM,SACN,OAAQ,EACZ,EACG,CACC,KAAM,aACN,QAAW,aACX,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,GACZ,WAAY,CACX,WACA,iBACH,EACE,WAAY,CACX,CACC,KAAM,aACN,KAAM,WACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,yBACN,WAAY,CACX,YACH,CACA,EACC,CACC,KAAM,yBACN,WAAY,CACX,YACH,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,YACH,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,GACZ,WAAY,CACX,OACH,EACE,WAAY,CACX,CACC,KAAM,aACN,KAAM,YACN,OAAQ,EACZ,EACG,CACC,KAAM,wBACN,KAAM,uBACN,OAAQ,EACZ,EACG,CACC,KAAM,WACN,KAAM,UACV,EACG,CACC,KAAM,mBACN,KAAM,kBACN,OAAQ,EACZ,EACG,CACC,KAAM,qBACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,GACZ,WAAY,CACX,OACH,EACE,WAAY,CACX,CACC,KAAM,mBACN,OAAQ,GACR,KAAM,UACN,QAAW,EACf,EACG,CACC,KAAM,cACN,KAAM,aACN,OAAQ,EACZ,EACG,CACC,KAAM,yBACN,KAAM,wBACN,OAAQ,EACZ,EACG,CACC,KAAM,YACN,KAAM,WACV,EACG,CACC,KAAM,mBACN,KAAM,kBACN,OAAQ,EACZ,EACG,CACC,KAAM,qBACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,gBACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,gBACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,kBACN,WAAY,GACZ,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,wBACN,WAAY,CACX,iBACH,CACA,EACC,CACC,KAAM,uBACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,WACN,KAAM,QACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,2BACN,WAAY,CACX,iBACH,CACA,EACC,CACC,KAAM,4BACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,gBACN,KAAM,aACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,CACC,KAAM,eACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,CACA,EACE,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,4BACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,oBACN,OAAQ,GACR,KAAM,UACN,QAAW,EACf,EACG,CACC,KAAM,cACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,uBACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,WACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,YACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,eACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,CACA,CACA,EACC,CACC,KAAM,sBACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,SACN,KAAM,sBACN,YAAa,EACjB,EACG,CACC,KAAM,SACN,KAAM,sBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,yBACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,aACN,KAAM,UACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,6BACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,YACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,CACA,CACA,EACC,CACC,KAAM,wBACN,WAAY,CACX,iBACH,EACE,WAAY,CACX,CACC,KAAM,YACN,KAAM,SACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,SACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,eACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,qBACN,WAAY,CACX,YACH,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,YACN,KAAM,WACV,CACA,CACA,EACC,CACC,KAAM,kBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,YACN,KAAM,mBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,YACN,KAAM,mBACN,YAAa,EACjB,EACG,CACC,KAAM,iBACN,KAAM,mBACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,aACN,KAAM,aACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,kBACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,cACN,KAAM,WACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,uBACN,KAAM,WACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,6BACN,KAAM,WACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,kBACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,wBACN,KAAM,YACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,8BACN,KAAM,YACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,gBACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,oBACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,0BACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,gBACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,KAAM,aACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,qBACN,KAAM,aACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,2BACN,KAAM,aACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,kBACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,uBACN,WAAY,CACX,iBACH,CACA,EACC,CACC,KAAM,wBACN,WAAY,CACX,iBACH,CACA,EACC,CACC,KAAM,2BACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,aACN,KAAM,YACN,OAAQ,EACZ,EACG,CACC,KAAM,cACN,KAAM,aACN,OAAQ,EACZ,EACG,CACC,KAAM,YACN,KAAM,WACN,OAAQ,EACZ,EACG,CACC,KAAM,aACN,KAAM,YACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,cACA,kBACH,EACE,WAAY,CACX,CACC,KAAM,eACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,qBACN,WAAY,CACX,CACC,KAAM,eACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,gBACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,KACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,CACA,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,cACA,kBACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,WACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,cACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,qBACN,WAAY,CACX,mBACA,aACH,EACE,WAAY,CACX,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,sBACN,WAAY,CACX,mBACA,aACH,EACE,WAAY,CACX,CACC,KAAM,gBACN,KAAM,aACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,YACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,YACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,0BACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,2BACN,KAAM,mBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,2BACN,KAAM,mBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,kBACH,EACE,WAAY,CACX,CACC,KAAM,yBACN,KAAM,gBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,0BACN,KAAM,yBACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,eACN,WAAY,CACX,kBACH,CACA,EACC,CACC,KAAM,kBACN,WAAY,CACX,kBACH,EACE,WAAY,CACX,CACC,KAAM,oBACN,KAAM,mBACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,GACZ,WAAY,CACX,kBACA,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,iBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,kBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,kBACN,KAAM,iBACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,qBACN,WAAY,CACX,eACH,CACA,EACC,CACC,KAAM,gBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,iBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,iBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,sBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,yCACN,KAAM,yCACN,OAAQ,EACZ,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,OACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,eACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,YACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,yBACN,KAAM,sBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,aACH,EACE,WAAY,GACZ,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,WACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,qBACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,UACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,UACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,WACN,KAAM,WACN,OAAQ,EACZ,EACG,CACC,KAAM,eACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,SACN,KAAM,SACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,GACZ,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,WACN,KAAM,UACV,EACG,CACC,KAAM,aACN,KAAM,YACV,EACG,CACC,KAAM,mBACN,KAAM,gBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,eACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,cACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,sBACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,YACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,YACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,wBACN,WAAY,GACZ,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,WACN,KAAM,UACN,OAAQ,EACZ,EACG,CACC,KAAM,eACN,KAAM,cACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,kBACN,WAAY,GACZ,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,kBACN,KAAM,2BACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,wBACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,YACN,KAAM,qBACN,OAAQ,GACR,IAAK,CACJ,UAAW,UAChB,CACA,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,GACZ,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,WACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,WACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,QACN,KAAM,OACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,yCACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,cACN,KAAM,kBACV,EACG,CACC,KAAM,aACN,KAAM,UACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,6BACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,WACN,KAAM,kBACV,EACG,CACC,KAAM,yBACN,KAAM,sBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,qBACN,KAAM,oBACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,oBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,aACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,OACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,0BACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,oBACN,KAAM,iBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,6BACN,KAAM,6BACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,YACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,YACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,aACN,KAAM,UACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,yBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,sBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,sBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,kBACN,WAAY,GACZ,WAAY,CACX,CACC,KAAM,4BACN,KAAM,mBACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,4BACN,KAAM,mBACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,kBACA,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,0BACN,KAAM,yBACV,EACG,CACC,KAAM,eACN,KAAM,WACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,aACN,KAAM,UACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,yBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,sBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,sBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,0BACN,WAAY,CACX,CACC,KAAM,UACN,QAAW,EACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,UACN,QAAW,EACX,OAAQ,GACR,KAAM,SACV,CACA,EACE,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,gBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,WACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,eACN,KAAM,cACN,OAAQ,EACZ,EACG,CACC,KAAM,eACN,KAAM,cACN,OAAQ,EACZ,EACG,CACC,KAAM,YACN,KAAM,WACN,OAAQ,EACZ,EACG,CACC,KAAM,gBACN,KAAM,mBACN,OAAQ,EACZ,EACG,CACC,KAAM,2BACN,KAAM,yBACV,EACG,CACC,KAAM,0BACN,KAAM,yBACN,OAAQ,EACZ,EACG,CACC,KAAM,0BACN,KAAM,yBACN,OAAQ,EACZ,EACG,CACC,KAAM,kBACN,KAAM,iBACN,OAAQ,EACZ,EACG,CACC,KAAM,kBACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,oBACN,KAAM,mBACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,uBACN,WAAY,GACZ,WAAY,CACX,UACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,2BACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,kBACN,KAAM,iBACN,OAAQ,EACZ,EACG,CACC,KAAM,WACN,KAAM,uBACN,QAAW,OACX,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,sBACH,EACE,WAAY,CACX,CACC,KAAM,wBACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,0BACN,KAAM,yBACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,kBACN,WAAY,CACX,uBACA,uBACH,EACE,WAAY,CACX,CACC,KAAM,YACN,KAAM,WACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,sBACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,eACN,WAAY,CACX,gBACA,uBACH,CACA,EACC,CACC,KAAM,yBACN,WAAY,CACX,cACH,EACE,WAAY,CACX,CACC,KAAM,2BACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,UACH,EACE,WAAY,CACX,CACC,KAAM,OACN,KAAM,QACV,EACG,CACC,KAAM,aACN,QAAW,aACX,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,CACX,UACH,EACE,WAAY,CACX,CACC,KAAM,mBACN,KAAM,gBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,UACH,EACE,WAAY,CACX,CACC,KAAM,uBACN,KAAM,uBACN,OAAQ,EACZ,EACG,CACC,KAAM,YACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,YACN,KAAM,cACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,gBACN,KAAM,gBACN,OAAQ,EACZ,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,GACZ,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,gBACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,0BACN,KAAM,cACN,OAAQ,GACR,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,QACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,WACN,WAAY,GACZ,WAAY,CACX,UACH,EACE,WAAY,CACX,CACC,KAAM,oBACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,UACN,KAAM,eACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,kBACN,KAAM,2BACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,oBACN,KAAM,gBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,aACN,KAAM,WACN,OAAQ,EACZ,EACG,CACC,KAAM,wBACN,KAAM,uBACN,OAAQ,EACZ,EACG,CACC,KAAM,yBACN,KAAM,wBACN,OAAQ,EACZ,EACG,CACC,KAAM,gBACN,QAAW,EACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,YACN,KAAM,eACN,OAAQ,EACZ,EACG,CACC,KAAM,qBACN,QAAW,EACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,sBACN,KAAM,qBACV,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,WACA,wBACA,iBACH,EACE,WAAY,CACX,CACC,KAAM,mBACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,YACN,KAAM,WACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,sBACN,WAAY,GACZ,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,mCACN,WAAY,CACX,qBACH,EACE,WAAY,CACX,CACC,KAAM,eACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,WACN,KAAM,wBACN,QAAW,MACX,OAAQ,EACZ,EACG,CACC,KAAM,kBACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,mBACN,KAAM,mBACN,YAAa,EACjB,EACG,CACC,KAAM,oBACN,KAAM,mBACN,YAAa,EACjB,EACG,CACC,KAAM,gBACN,KAAM,YACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,iBACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,4BACN,KAAM,4BACN,OAAQ,EACZ,EACG,CACC,KAAM,sBACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,sBACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,uBACN,KAAM,kBACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,8BACN,WAAY,CACX,qBACH,EACE,WAAY,CACX,CACC,KAAM,aACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,gBACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,cACN,KAAM,UACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,eACN,WAAY,CACX,WACA,iBACH,EACE,WAAY,CACX,CACC,KAAM,gBACN,KAAM,SACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,OACN,WAAY,CACX,WACA,iBACH,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,aACN,KAAM,UACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,cACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,eACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,EACG,CACC,KAAM,aACN,KAAM,UACN,OAAQ,GACR,YAAa,EACjB,CACA,CACA,EACC,CACC,KAAM,aACN,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,eACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,SACN,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,kBACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,sBACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,WACN,KAAM,gBACN,OAAQ,EACZ,EACG,CACC,KAAM,2BACN,QAAW,GACX,OAAQ,GACR,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,WACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,SACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,mBACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,SACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,yBACN,WAAY,CACX,YACH,EACE,WAAY,CACX,CACC,KAAM,iBACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,4BACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,YACN,KAAM,kBACV,EACG,CACC,KAAM,QACN,KAAM,oBACV,CACA,CACA,EACC,CACC,KAAM,eACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,cACN,KAAM,WACN,YAAa,EACjB,EACG,CACC,KAAM,4BACN,KAAM,2BACN,OAAQ,EACZ,EACG,CACC,KAAM,+BACN,KAAM,8BACV,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,2BACN,WAAY,CACX,CACC,KAAM,aACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,EACG,CACC,KAAM,eACN,KAAM,oBACN,OAAQ,GACR,YAAa,EACjB,CACA,EACE,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,+BACN,WAAY,CACX,CACC,KAAM,aACN,KAAM,aACN,IAAK,CACJ,UAAW,UAChB,CACA,CACA,EACE,WAAY,CACX,aACH,CACA,EACC,CACC,KAAM,SACN,WAAY,CACX,CACC,KAAM,aACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,WACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,YACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,CACX,aACH,EACE,WAAY,CACX,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,kBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,qBACN,QAAW,+BACX,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,QAAW,mCACX,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,UACN,KAAM,SACN,OAAQ,EACZ,EACG,CACC,KAAM,aACN,KAAM,YACN,OAAQ,EACZ,EACG,CACC,KAAM,eACN,KAAM,cACN,OAAQ,EACZ,EACG,CACC,KAAM,WACN,OAAQ,GACR,KAAM,oBACV,EACG,CACC,KAAM,WACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,gBACN,KAAM,eACN,OAAQ,EACZ,EACG,CACC,KAAM,kBACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,CACA,EACIC,GAAiB,CACpB,CACC,KAAM,cACN,cAAe,CACd,CACC,KAAM,MACV,EACG,CACC,KAAM,QACV,EACG,CACC,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,mBACN,cAAe,CACd,CACC,KAAM,aACV,EACG,CACC,KAAM,YACV,EACG,CACC,KAAM,WACV,EACG,CACC,KAAM,OACV,CACA,CACA,EACC,CACC,KAAM,wBACN,cAAe,CACd,CACC,KAAM,UACV,EACG,CACC,KAAM,WACV,CACA,CACA,EACC,CACC,KAAM,wBACN,cAAe,CACd,CACC,KAAM,MACV,EACG,CACC,KAAM,SACV,EACG,CACC,KAAM,UACV,EACG,CACC,KAAM,MACV,CACA,CACA,EACC,CACC,KAAM,WACN,cAAe,CACd,CACC,KAAM,UACV,EACG,CACC,KAAM,aACV,CACA,CACA,EACC,CACC,KAAM,uBACN,cAAe,CACd,CACC,KAAM,MACV,EACG,CACC,KAAM,UACV,EACG,CACC,KAAM,yBACV,EACG,CACC,KAAM,uBACV,CACA,CACA,EACC,CACC,KAAM,uBACN,cAAe,CACd,CACC,KAAM,MACV,EACG,CACC,KAAM,KACV,EACG,CACC,KAAM,MACV,CACA,CACA,EACC,CACC,KAAM,wBACN,cAAe,CACd,CACC,KAAM,MACV,EACG,CACC,KAAM,KACV,EACG,CACC,KAAM,KACV,EACG,CACC,KAAM,SACV,CACA,CACA,EACC,CACC,KAAM,gBACN,cAAe,CACd,CACC,KAAM,UACV,EACG,CACC,KAAM,YACV,CACA,CACA,CACA,EACIC,GAAQ,CACX,SAAU,YACV,WAAY,GACb,EACIC,GAAc,CACjB,KAAMP,GACN,IAAKC,GACL,OAAQC,GACR,aAAcC,GACd,MAAOC,GACP,aAAcC,GACd,IAAKC,EACN,EAEIE,GAAS,SACTC,GAAQ,2CACRC,GAAW,SACXC,GAAU,CACb,CACC,KAAM,cACN,WAAY,CACX,CACC,KAAM,QACN,KAAM,YACN,UAAW,wBACf,EACG,CACC,KAAM,aACN,KAAM,iBACN,OAAQ,EACZ,CACA,EACE,WAAY,CACX,YACH,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,CACC,KAAM,cACN,OAAQ,GACR,YAAa,GACb,KAAM,mBACN,UAAW,gCACf,CACA,EACE,WAAY,CACX,UACH,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,CACC,KAAM,cACN,OAAQ,GACR,YAAa,GACb,KAAM,mBACN,UAAW,gCACf,EACG,CACC,KAAM,eACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,aACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,kBACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,QACN,KAAM,WACV,EACG,CACC,KAAM,mBACN,OAAQ,GACR,KAAM,SACV,EACG,CACC,KAAM,sBACN,KAAM,sBACN,OAAQ,EACZ,EACG,CACC,KAAM,4BACN,KAAM,YACN,OAAQ,GACR,YAAa,EACjB,CACA,EACE,WAAY,CACX,iBACH,CACA,EACC,CACC,KAAM,WACN,WAAY,CACX,CACC,KAAM,QACN,KAAM,WACV,EACG,CACC,KAAM,cACN,OAAQ,GACR,YAAa,GACb,KAAM,mBACN,UAAW,gCACf,EACG,CACC,KAAM,gBACN,OAAQ,GACR,YAAa,GACb,KAAM,oBACN,UAAW,gBACf,EACG,CACC,KAAM,gBACN,OAAQ,GACR,YAAa,GACb,KAAM,oBACN,UAAW,gBACf,EACG,CACC,KAAM,qBACN,KAAM,qBACN,OAAQ,GACR,QAAW,YACf,CACA,EACE,WAAY,CACX,gBACH,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,CACC,KAAM,aACN,KAAM,iBACN,OAAQ,GACR,YAAa,GACb,UAAW,yBACf,CACA,EACE,WAAY,CACX,UACH,CACA,EACC,CACC,KAAM,iBACN,WAAY,CACX,CACC,KAAM,OACN,KAAM,SACV,CACA,EACE,WAAY,CACX,UACH,CACA,CACA,EACIC,GAAiB,CACpB,CACC,KAAM,sBACN,cAAe,CACd,CACC,KAAM,gBACV,EACG,CACC,KAAM,mBACV,EACG,CACC,KAAM,mBACV,EACG,CACC,KAAM,oBACV,EACG,CACC,KAAM,uBACV,EACG,CACC,KAAM,uBACV,CACA,CACA,EACC,CACC,KAAM,qBACN,cAAe,CACd,CACC,KAAM,YACV,EACG,CACC,KAAM,gBACV,CACA,CACA,CACA,EACIC,GAAiB,CACrB,EACIC,GAAgB,CACnB,KAAMN,GACN,IAAKC,GACL,OAAQC,GACR,MAAOC,GACP,aAAcC,GACd,aAAcC,EACf,EAEIE,GAAS,KACTC,GAAQ,yCACRC,GAAW,KACXC,GAAU,CACb,CACC,KAAM,SACR,EACC,CACC,KAAM,SACR,EACC,CACC,KAAM,MACR,EACC,CACC,KAAM,QACR,EACC,CACC,KAAM,OACN,WAAY,CACX,CACC,KAAM,OACN,KAAM,SACN,OAAQ,EACZ,EACG,CACC,KAAM,OACN,KAAM,OACN,OAAQ,EACZ,EACG,CACC,KAAM,SACN,KAAM,UACN,OAAQ,EACZ,EACG,CACC,KAAM,WACN,KAAM,UACN,OAAQ,EACZ,EACG,CACC,KAAM,cACN,KAAM,UACN,OAAQ,EACZ,EACG,CACC,KAAM,kBACN,KAAM,UACN,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,CACX,CACC,KAAM,IACN,KAAM,OACN,QAAW,IACX,OAAQ,EACZ,EACG,CACC,KAAM,IACN,KAAM,OACN,QAAW,IACX,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,SACN,WAAY,CACX,CACC,KAAM,IACN,KAAM,OACN,QAAW,IACX,OAAQ,EACZ,EACG,CACC,KAAM,IACN,KAAM,OACN,QAAW,IACX,OAAQ,EACZ,EACG,CACC,KAAM,QACN,KAAM,OACN,OAAQ,EACZ,EACG,CACC,KAAM,SACN,KAAM,OACN,OAAQ,EACZ,CACA,CACA,CACA,EACIC,GAAiB,CACrB,EACIC,GAAY,CACf,KAAML,GACN,IAAKC,GACL,OAAQC,GACR,MAAOC,GACP,aAAcC,EACf,EAEIE,GAAS,KACTC,GAAQ,yCACRC,GAAW,KACXC,GAAU,CACb,CACC,KAAM,iBACN,WAAY,GACZ,WAAY,CACX,CACC,KAAM,KACN,OAAQ,GACR,KAAM,GACN,KAAM,QACV,EACG,CACC,KAAM,YACN,KAAM,WACV,EACG,CACC,KAAM,gBACN,KAAM,UACN,WAAY,GACZ,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,gBACN,KAAM,iBACN,WAAY,GACZ,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,eACN,WAAY,GACZ,UAAW,GACX,YAAa,GACb,KAAM,SACV,EACG,CACC,KAAM,QACN,KAAM,QACN,WAAY,GACZ,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,eACN,KAAM,iBACN,WAAY,GACZ,OAAQ,GACR,UAAW,EACf,CACA,CACA,EACC,CACC,KAAM,OACN,WAAY,GACZ,WAAY,CACX,gBACH,CACA,EACC,CACC,KAAM,OACN,WAAY,GACZ,WAAY,CACX,gBACH,EACE,WAAY,CACX,CACC,KAAM,SACN,KAAM,iBACN,WAAY,GACZ,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,SACN,KAAM,iBACN,WAAY,GACZ,UAAW,GACX,YAAa,EACjB,EACG,CACC,KAAM,WACN,SAAU,GACV,OAAQ,GACR,KAAM,WACN,IAAK,CACJ,UAAW,UAChB,CACA,CACA,CACA,EACC,CACC,KAAM,UACN,WAAY,GACZ,WAAY,CACX,CACC,KAAM,KACN,OAAQ,GACR,KAAM,GACN,KAAM,QACV,EACG,CACC,KAAM,cACN,KAAM,iBACN,WAAY,GACZ,UAAW,EACf,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,gBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,aACN,OAAQ,GACR,KAAM,MACV,EACG,CACC,KAAM,aACN,KAAM,QACN,WAAY,GACZ,OAAQ,GACR,UAAW,EACf,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,GACZ,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,SACN,KAAM,WACV,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,GACZ,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,eACN,KAAM,iBACN,kBAAmB,8BACnB,OAAQ,EACZ,CACA,CACA,EACC,CACC,KAAM,cACN,WAAY,GACZ,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,aACN,KAAM,QACN,WAAY,GACZ,kBAAmB,8BACnB,OAAQ,GACR,UAAW,EACf,CACA,CACA,EACC,CACC,KAAM,eACN,WAAY,GACZ,WAAY,CACX,OACH,EACE,WAAY,CACX,CACC,KAAM,aACN,KAAM,QACN,WAAY,GACZ,kBAAmB,8BACnB,OAAQ,GACR,UAAW,EACf,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,GACZ,WAAY,CACX,MACH,EACE,WAAY,CACX,CACC,KAAM,SACN,KAAM,WACV,CACA,CACA,EACC,CACC,KAAM,QACN,WAAY,GACZ,WAAY,CACX,CACC,KAAM,KACN,OAAQ,GACR,KAAM,GACN,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,YACN,WAAY,CACX,CACC,KAAM,SACN,OAAQ,GACR,KAAM,SACV,CACA,CACA,CACA,EACIC,GAAiB,CACrB,EACI3L,GAAM,CACT,SAAU,WACX,EACI4L,GAAY,CACf,KAAML,GACN,IAAKC,GACL,OAAQC,GACR,MAAOC,GACP,aAAcC,GACd,IAAK3L,EACN,EAEI6L,GAAS,0BACTC,GAAQ,0CACRC,GAAW,OACXC,GAAU,CACb,CACC,KAAM,eACN,QAAW,CACV,kBACH,EACE,WAAY,CACX,CACC,KAAM,SACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,cACN,QAAW,CACV,iBACH,EACE,WAAY,CACX,CACC,KAAM,SACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,OACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,CACA,EACIC,GAAiB,CACrB,EACIC,GAAiB,CACrB,EACIC,GAAc,CACjB,KAAMN,GACN,IAAKC,GACL,OAAQC,GACR,MAAOC,GACP,aAAcC,GACd,aAAcC,EACf,EAEI9+B,GAAO,gBACPqxB,GAAM,uDACN/vB,GAAS,QACTooB,GAAQ,CACX,CACC,KAAM,eACN,QAAW,CACV,kBACH,EACE,WAAY,CACX,CACC,KAAM,QACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,eACN,QAAW,CACV,kBACH,EACE,WAAY,CACX,CACC,KAAM,mBACN,OAAQ,GACR,KAAM,QACV,EACG,CACC,KAAM,eACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,EACC,CACC,KAAM,cACN,QAAW,CACV,iBACH,EACE,WAAY,CACX,CACC,KAAM,eACN,OAAQ,GACR,KAAM,QACV,CACA,CACA,CACA,EACIsV,GAAe,CACnB,EACIC,GAAe,CACnB,EACIC,GAAqB,CACxB,KAAMl/B,GACN,IAAKqxB,GACL,OAAQ/vB,GACR,MAAOooB,GACP,aAAcsV,GACd,aAAcC,EACf,EAEIpQ,GAAW,CACb,KAAMwO,GACN,OAAQO,GACR,GAAIM,GACJ,GAAIM,GACJ,KAAMO,GACN,MAAOG,EACT,EAEA,SAASC,GAAOC,EAAoBlb,EAAS,CAC3C,IAAImb,EAAMp5B,EAAO,GAAI4oB,GAAUuQ,CAAkB,EAEjD,OAAO,IAAIxC,GAAWyC,EAAKnb,CAAO,CACpC,CC/pHO,SAASob,GAAgB,EAAG,CACjC,O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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,390]}