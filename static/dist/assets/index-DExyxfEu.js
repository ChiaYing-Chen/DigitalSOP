(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var KA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lS={exports:{}},Nd={},uS={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=Symbol.for("react.element"),YA=Symbol.for("react.portal"),qA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),QA=Symbol.for("react.profiler"),ZA=Symbol.for("react.provider"),JA=Symbol.for("react.context"),eM=Symbol.for("react.forward_ref"),tM=Symbol.for("react.suspense"),nM=Symbol.for("react.memo"),rM=Symbol.for("react.lazy"),Y_=Symbol.iterator;function iM(e){return e===null||typeof e!="object"?null:(e=Y_&&e[Y_]||e["@@iterator"],typeof e=="function"?e:null)}var cS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pS=Object.assign,fS={};function Ll(e,t,n){this.props=e,this.context=t,this.refs=fS,this.updater=n||cS}Ll.prototype.isReactComponent={};Ll.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ll.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dS(){}dS.prototype=Ll.prototype;function Ky(e,t,n){this.props=e,this.context=t,this.refs=fS,this.updater=n||cS}var Yy=Ky.prototype=new dS;Yy.constructor=Ky;pS(Yy,Ll.prototype);Yy.isPureReactComponent=!0;var q_=Array.isArray,hS=Object.prototype.hasOwnProperty,qy={current:null},mS={key:!0,ref:!0,__self:!0,__source:!0};function gS(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)hS.call(t,r)&&!mS.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:wc,type:e,key:o,ref:a,props:i,_owner:qy.current}}function oM(e,t){return{$$typeof:wc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xy(e){return typeof e=="object"&&e!==null&&e.$$typeof===wc}function aM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var X_=/\/+/g;function Em(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aM(""+e.key):t.toString(36)}function gf(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wc:case YA:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Em(a,0):r,q_(i)?(n="",e!=null&&(n=e.replace(X_,"$&/")+"/"),gf(i,t,n,"",function(c){return c})):i!=null&&(Xy(i)&&(i=oM(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(X_,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",q_(e))for(var s=0;s<e.length;s++){o=e[s];var l=r+Em(o,s);a+=gf(o,t,n,l,i)}else if(l=iM(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=r+Em(o,s++),a+=gf(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Sp(e,t,n){if(e==null)return e;var r=[],i=0;return gf(e,r,"","",function(o){return t.call(n,o,i++)}),r}function sM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wr={current:null},yf={transition:null},lM={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:yf,ReactCurrentOwner:qy};function yS(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:Sp,forEach:function(e,t,n){Sp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sp(e,function(){t++}),t},toArray:function(e){return Sp(e,function(t){return t})||[]},only:function(e){if(!Xy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=Ll;Nt.Fragment=qA;Nt.Profiler=QA;Nt.PureComponent=Ky;Nt.StrictMode=XA;Nt.Suspense=tM;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lM;Nt.act=yS;Nt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pS({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=qy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)hS.call(t,l)&&!mS.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:wc,type:e.type,key:i,ref:o,props:r,_owner:a}};Nt.createContext=function(e){return e={$$typeof:JA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZA,_context:e},e.Consumer=e};Nt.createElement=gS;Nt.createFactory=function(e){var t=gS.bind(null,e);return t.type=e,t};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:eM,render:e}};Nt.isValidElement=Xy;Nt.lazy=function(e){return{$$typeof:rM,_payload:{_status:-1,_result:e},_init:sM}};Nt.memo=function(e,t){return{$$typeof:nM,type:e,compare:t===void 0?null:t}};Nt.startTransition=function(e){var t=yf.transition;yf.transition={};try{e()}finally{yf.transition=t}};Nt.unstable_act=yS;Nt.useCallback=function(e,t){return wr.current.useCallback(e,t)};Nt.useContext=function(e){return wr.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return wr.current.useDeferredValue(e)};Nt.useEffect=function(e,t){return wr.current.useEffect(e,t)};Nt.useId=function(){return wr.current.useId()};Nt.useImperativeHandle=function(e,t,n){return wr.current.useImperativeHandle(e,t,n)};Nt.useInsertionEffect=function(e,t){return wr.current.useInsertionEffect(e,t)};Nt.useLayoutEffect=function(e,t){return wr.current.useLayoutEffect(e,t)};Nt.useMemo=function(e,t){return wr.current.useMemo(e,t)};Nt.useReducer=function(e,t,n){return wr.current.useReducer(e,t,n)};Nt.useRef=function(e){return wr.current.useRef(e)};Nt.useState=function(e){return wr.current.useState(e)};Nt.useSyncExternalStore=function(e,t,n){return wr.current.useSyncExternalStore(e,t,n)};Nt.useTransition=function(){return wr.current.useTransition()};Nt.version="18.3.1";uS.exports=Nt;var De=uS.exports;const uM=sS(De);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cM=De,pM=Symbol.for("react.element"),fM=Symbol.for("react.fragment"),dM=Object.prototype.hasOwnProperty,hM=cM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mM={key:!0,ref:!0,__self:!0,__source:!0};function vS(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)dM.call(t,r)&&!mM.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:pM,type:e,key:o,ref:a,props:i,_owner:hM.current}}Nd.Fragment=fM;Nd.jsx=vS;Nd.jsxs=vS;lS.exports=Nd;var H=lS.exports,yg={},xS={exports:{}},Jr={},_S={exports:{}},wS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ye,je){var ue=ye.length;ye.push(je);e:for(;0<ue;){var ve=ue-1>>>1,X=ye[ve];if(0<i(X,je))ye[ve]=je,ye[ue]=X,ue=ve;else break e}}function n(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var je=ye[0],ue=ye.pop();if(ue!==je){ye[0]=ue;e:for(var ve=0,X=ye.length,Z=X>>>1;ve<Z;){var se=2*(ve+1)-1,he=ye[se],B=se+1,w=ye[B];if(0>i(he,ue))B<X&&0>i(w,he)?(ye[ve]=w,ye[B]=ue,ve=B):(ye[ve]=he,ye[se]=ue,ve=se);else if(B<X&&0>i(w,ue))ye[ve]=w,ye[B]=ue,ve=B;else break e}}return je}function i(ye,je){var ue=ye.sortIndex-je.sortIndex;return ue!==0?ue:ye.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],f=1,d=null,g=3,y=!1,v=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(ye){for(var je=n(c);je!==null;){if(je.callback===null)r(c);else if(je.startTime<=ye)r(c),je.sortIndex=je.expirationTime,t(l,je);else break;je=n(c)}}function b(ye){if(x=!1,E(ye),!v)if(n(l)!==null)v=!0,Ge(D);else{var je=n(c);je!==null&&Ke(b,je.startTime-ye)}}function D(ye,je){v=!1,x&&(x=!1,k(L),L=-1),y=!0;var ue=g;try{for(E(je),d=n(l);d!==null&&(!(d.expirationTime>je)||ye&&!G());){var ve=d.callback;if(typeof ve=="function"){d.callback=null,g=d.priorityLevel;var X=ve(d.expirationTime<=je);je=e.unstable_now(),typeof X=="function"?d.callback=X:d===n(l)&&r(l),E(je)}else r(l);d=n(l)}if(d!==null)var Z=!0;else{var se=n(c);se!==null&&Ke(b,se.startTime-je),Z=!1}return Z}finally{d=null,g=ue,y=!1}}var I=!1,z=null,L=-1,Q=5,Y=-1;function G(){return!(e.unstable_now()-Y<Q)}function ae(){if(z!==null){var ye=e.unstable_now();Y=ye;var je=!0;try{je=z(!0,ye)}finally{je?oe():(I=!1,z=null)}}else I=!1}var oe;if(typeof R=="function")oe=function(){R(ae)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,kt=Ce.port2;Ce.port1.onmessage=ae,oe=function(){kt.postMessage(null)}}else oe=function(){C(ae,0)};function Ge(ye){z=ye,I||(I=!0,oe())}function Ke(ye,je){L=C(function(){ye(e.unstable_now())},je)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ye){ye.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,Ge(D))},e.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ye?Math.floor(1e3/ye):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ye){switch(g){case 1:case 2:case 3:var je=3;break;default:je=g}var ue=g;g=je;try{return ye()}finally{g=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ye,je){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var ue=g;g=ye;try{return je()}finally{g=ue}},e.unstable_scheduleCallback=function(ye,je,ue){var ve=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ve+ue:ve):ue=ve,ye){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ue+X,ye={id:f++,callback:je,priorityLevel:ye,startTime:ue,expirationTime:X,sortIndex:-1},ue>ve?(ye.sortIndex=ue,t(c,ye),n(l)===null&&ye===n(c)&&(x?(k(L),L=-1):x=!0,Ke(b,ue-ve))):(ye.sortIndex=X,t(l,ye),v||y||(v=!0,Ge(D))),ye},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(ye){var je=g;return function(){var ue=g;g=je;try{return ye.apply(this,arguments)}finally{g=ue}}}})(wS);_S.exports=wS;var gM=_S.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yM=De,Zr=gM;function ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ES=new Set,Yu={};function Es(e,t){yl(e,t),yl(e+"Capture",t)}function yl(e,t){for(Yu[e]=t,e=0;e<t.length;e++)ES.add(t[e])}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vg=Object.prototype.hasOwnProperty,vM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q_={},Z_={};function xM(e){return vg.call(Z_,e)?!0:vg.call(Q_,e)?!1:vM.test(e)?Z_[e]=!0:(Q_[e]=!0,!1)}function _M(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wM(e,t,n,r){if(t===null||typeof t>"u"||_M(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Er(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){er[e]=new Er(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];er[t]=new Er(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){er[e]=new Er(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){er[e]=new Er(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){er[e]=new Er(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){er[e]=new Er(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){er[e]=new Er(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){er[e]=new Er(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){er[e]=new Er(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qy=/[\-:]([a-z])/g;function Zy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qy,Zy);er[t]=new Er(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qy,Zy);er[t]=new Er(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qy,Zy);er[t]=new Er(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){er[e]=new Er(e,1,!1,e.toLowerCase(),null,!1,!1)});er.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){er[e]=new Er(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jy(e,t,n,r){var i=er.hasOwnProperty(t)?er[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wM(t,n,i,r)&&(n=null),r||i===null?xM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var To=yM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cp=Symbol.for("react.element"),Js=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),ev=Symbol.for("react.strict_mode"),xg=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),SS=Symbol.for("react.context"),tv=Symbol.for("react.forward_ref"),_g=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),nv=Symbol.for("react.memo"),Zo=Symbol.for("react.lazy"),CS=Symbol.for("react.offscreen"),J_=Symbol.iterator;function lu(e){return e===null||typeof e!="object"?null:(e=J_&&e[J_]||e["@@iterator"],typeof e=="function"?e:null)}var ln=Object.assign,bm;function Pu(e){if(bm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bm=t&&t[1]||""}return`
`+bm+e}var Sm=!1;function Cm(e,t){if(!e||Sm)return"";Sm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{Sm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pu(e):""}function EM(e){switch(e.tag){case 5:return Pu(e.type);case 16:return Pu("Lazy");case 13:return Pu("Suspense");case 19:return Pu("SuspenseList");case 0:case 2:case 15:return e=Cm(e.type,!1),e;case 11:return e=Cm(e.type.render,!1),e;case 1:return e=Cm(e.type,!0),e;default:return""}}function Eg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case el:return"Fragment";case Js:return"Portal";case xg:return"Profiler";case ev:return"StrictMode";case _g:return"Suspense";case wg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case SS:return(e.displayName||"Context")+".Consumer";case bS:return(e._context.displayName||"Context")+".Provider";case tv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nv:return t=e.displayName||null,t!==null?t:Eg(e.type)||"Memo";case Zo:t=e._payload,e=e._init;try{return Eg(e(t))}catch{}}return null}function bM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eg(t);case 8:return t===ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ma(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SM(e){var t=RS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rp(e){e._valueTracker||(e._valueTracker=SM(e))}function kS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=RS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bg(e,t){var n=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function e1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ma(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PS(e,t){t=t.checked,t!=null&&Jy(e,"checked",t,!1)}function Sg(e,t){PS(e,t);var n=ma(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Cg(e,t.type,ma(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function t1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Cg(e,t,n){(t!=="number"||Vf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Tu=Array.isArray;function pl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ma(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Rg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ge(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function n1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ge(92));if(Tu(n)){if(1<n.length)throw Error(ge(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ma(n)}}function TS(e,t){var n=ma(t.value),r=ma(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function r1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function AS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?AS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kp,MS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kp=kp||document.createElement("div"),kp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Du={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CM=["Webkit","ms","Moz","O"];Object.keys(Du).forEach(function(e){CM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Du[t]=Du[e]})});function NS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Du.hasOwnProperty(e)&&Du[e]?(""+t).trim():t+"px"}function DS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var RM=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pg(e,t){if(t){if(RM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ge(62))}}function Tg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=null;function rv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mg=null,fl=null,dl=null;function i1(e){if(e=Sc(e)){if(typeof Mg!="function")throw Error(ge(280));var t=e.stateNode;t&&(t=Id(t),Mg(e.stateNode,e.type,t))}}function OS(e){fl?dl?dl.push(e):dl=[e]:fl=e}function LS(){if(fl){var e=fl,t=dl;if(dl=fl=null,i1(e),t)for(e=0;e<t.length;e++)i1(t[e])}}function BS(e,t){return e(t)}function IS(){}var Rm=!1;function jS(e,t,n){if(Rm)return e(t,n);Rm=!0;try{return BS(e,t,n)}finally{Rm=!1,(fl!==null||dl!==null)&&(IS(),LS())}}function Xu(e,t){var n=e.stateNode;if(n===null)return null;var r=Id(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ge(231,t,typeof n));return n}var Ng=!1;if(Co)try{var uu={};Object.defineProperty(uu,"passive",{get:function(){Ng=!0}}),window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{Ng=!1}function kM(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Ou=!1,Wf=null,Uf=!1,Dg=null,PM={onError:function(e){Ou=!0,Wf=e}};function TM(e,t,n,r,i,o,a,s,l){Ou=!1,Wf=null,kM.apply(PM,arguments)}function AM(e,t,n,r,i,o,a,s,l){if(TM.apply(this,arguments),Ou){if(Ou){var c=Wf;Ou=!1,Wf=null}else throw Error(ge(198));Uf||(Uf=!0,Dg=c)}}function bs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $S(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function o1(e){if(bs(e)!==e)throw Error(ge(188))}function MM(e){var t=e.alternate;if(!t){if(t=bs(e),t===null)throw Error(ge(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return o1(i),e;if(o===r)return o1(i),t;o=o.sibling}throw Error(ge(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?e:t}function FS(e){return e=MM(e),e!==null?zS(e):null}function zS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zS(e);if(t!==null)return t;e=e.sibling}return null}var HS=Zr.unstable_scheduleCallback,a1=Zr.unstable_cancelCallback,NM=Zr.unstable_shouldYield,DM=Zr.unstable_requestPaint,wn=Zr.unstable_now,OM=Zr.unstable_getCurrentPriorityLevel,iv=Zr.unstable_ImmediatePriority,VS=Zr.unstable_UserBlockingPriority,Gf=Zr.unstable_NormalPriority,LM=Zr.unstable_LowPriority,WS=Zr.unstable_IdlePriority,Dd=null,Qi=null;function BM(e){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(Dd,e,void 0,(e.current.flags&128)===128)}catch{}}var Oi=Math.clz32?Math.clz32:$M,IM=Math.log,jM=Math.LN2;function $M(e){return e>>>=0,e===0?32:31-(IM(e)/jM|0)|0}var Pp=64,Tp=4194304;function Au(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Au(s):(o&=a,o!==0&&(r=Au(o)))}else a=n&~i,a!==0?r=Au(a):o!==0&&(r=Au(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Oi(t),i=1<<n,r|=e[n],t&=~i;return r}function FM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zM(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Oi(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=FM(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function Og(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function US(){var e=Pp;return Pp<<=1,!(Pp&4194240)&&(Pp=64),e}function km(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ec(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Oi(t),e[t]=n}function HM(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Oi(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ov(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Oi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $t=0;function GS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KS,av,YS,qS,XS,Lg=!1,Ap=[],aa=null,sa=null,la=null,Qu=new Map,Zu=new Map,ta=[],VM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s1(e,t){switch(e){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Qu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(t.pointerId)}}function cu(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Sc(t),t!==null&&av(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function WM(e,t,n,r,i){switch(t){case"focusin":return aa=cu(aa,e,t,n,r,i),!0;case"dragenter":return sa=cu(sa,e,t,n,r,i),!0;case"mouseover":return la=cu(la,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Qu.set(o,cu(Qu.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Zu.set(o,cu(Zu.get(o)||null,e,t,n,r,i)),!0}return!1}function QS(e){var t=os(e.target);if(t!==null){var n=bs(t);if(n!==null){if(t=n.tag,t===13){if(t=$S(n),t!==null){e.blockedOn=t,XS(e.priority,function(){YS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ag=r,n.target.dispatchEvent(r),Ag=null}else return t=Sc(n),t!==null&&av(t),e.blockedOn=n,!1;t.shift()}return!0}function l1(e,t,n){vf(e)&&n.delete(t)}function UM(){Lg=!1,aa!==null&&vf(aa)&&(aa=null),sa!==null&&vf(sa)&&(sa=null),la!==null&&vf(la)&&(la=null),Qu.forEach(l1),Zu.forEach(l1)}function pu(e,t){e.blockedOn===t&&(e.blockedOn=null,Lg||(Lg=!0,Zr.unstable_scheduleCallback(Zr.unstable_NormalPriority,UM)))}function Ju(e){function t(i){return pu(i,e)}if(0<Ap.length){pu(Ap[0],e);for(var n=1;n<Ap.length;n++){var r=Ap[n];r.blockedOn===e&&(r.blockedOn=null)}}for(aa!==null&&pu(aa,e),sa!==null&&pu(sa,e),la!==null&&pu(la,e),Qu.forEach(t),Zu.forEach(t),n=0;n<ta.length;n++)r=ta[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ta.length&&(n=ta[0],n.blockedOn===null);)QS(n),n.blockedOn===null&&ta.shift()}var hl=To.ReactCurrentBatchConfig,Yf=!0;function GM(e,t,n,r){var i=$t,o=hl.transition;hl.transition=null;try{$t=1,sv(e,t,n,r)}finally{$t=i,hl.transition=o}}function KM(e,t,n,r){var i=$t,o=hl.transition;hl.transition=null;try{$t=4,sv(e,t,n,r)}finally{$t=i,hl.transition=o}}function sv(e,t,n,r){if(Yf){var i=Bg(e,t,n,r);if(i===null)Im(e,t,r,qf,n),s1(e,r);else if(WM(i,e,t,n,r))r.stopPropagation();else if(s1(e,r),t&4&&-1<VM.indexOf(e)){for(;i!==null;){var o=Sc(i);if(o!==null&&KS(o),o=Bg(e,t,n,r),o===null&&Im(e,t,r,qf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Im(e,t,r,null,n)}}var qf=null;function Bg(e,t,n,r){if(qf=null,e=rv(r),e=os(e),e!==null)if(t=bs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$S(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qf=e,null}function ZS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OM()){case iv:return 1;case VS:return 4;case Gf:case LM:return 16;case WS:return 536870912;default:return 16}default:return 16}}var ra=null,lv=null,xf=null;function JS(){if(xf)return xf;var e,t=lv,n=t.length,r,i="value"in ra?ra.value:ra.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return xf=i.slice(e,1<r?1-r:void 0)}function _f(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mp(){return!0}function u1(){return!1}function ei(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mp:u1,this.isPropagationStopped=u1,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mp)},persist:function(){},isPersistent:Mp}),t}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=ei(Bl),bc=ln({},Bl,{view:0,detail:0}),YM=ei(bc),Pm,Tm,fu,Od=ln({},bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fu&&(fu&&e.type==="mousemove"?(Pm=e.screenX-fu.screenX,Tm=e.screenY-fu.screenY):Tm=Pm=0,fu=e),Pm)},movementY:function(e){return"movementY"in e?e.movementY:Tm}}),c1=ei(Od),qM=ln({},Od,{dataTransfer:0}),XM=ei(qM),QM=ln({},bc,{relatedTarget:0}),Am=ei(QM),ZM=ln({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),JM=ei(ZM),e3=ln({},Bl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),t3=ei(e3),n3=ln({},Bl,{data:0}),p1=ei(n3),r3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=o3[e])?!!t[e]:!1}function cv(){return a3}var s3=ln({},bc,{key:function(e){if(e.key){var t=r3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_f(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(e){return e.type==="keypress"?_f(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_f(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l3=ei(s3),u3=ln({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f1=ei(u3),c3=ln({},bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),p3=ei(c3),f3=ln({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),d3=ei(f3),h3=ln({},Od,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m3=ei(h3),g3=[9,13,27,32],pv=Co&&"CompositionEvent"in window,Lu=null;Co&&"documentMode"in document&&(Lu=document.documentMode);var y3=Co&&"TextEvent"in window&&!Lu,e2=Co&&(!pv||Lu&&8<Lu&&11>=Lu),d1=" ",h1=!1;function t2(e,t){switch(e){case"keyup":return g3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tl=!1;function v3(e,t){switch(e){case"compositionend":return n2(t);case"keypress":return t.which!==32?null:(h1=!0,d1);case"textInput":return e=t.data,e===d1&&h1?null:e;default:return null}}function x3(e,t){if(tl)return e==="compositionend"||!pv&&t2(e,t)?(e=JS(),xf=lv=ra=null,tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return e2&&t.locale!=="ko"?null:t.data;default:return null}}var _3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_3[e.type]:t==="textarea"}function r2(e,t,n,r){OS(r),t=Xf(t,"onChange"),0<t.length&&(n=new uv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bu=null,ec=null;function w3(e){h2(e,0)}function Ld(e){var t=il(e);if(kS(t))return e}function E3(e,t){if(e==="change")return t}var i2=!1;if(Co){var Mm;if(Co){var Nm="oninput"in document;if(!Nm){var g1=document.createElement("div");g1.setAttribute("oninput","return;"),Nm=typeof g1.oninput=="function"}Mm=Nm}else Mm=!1;i2=Mm&&(!document.documentMode||9<document.documentMode)}function y1(){Bu&&(Bu.detachEvent("onpropertychange",o2),ec=Bu=null)}function o2(e){if(e.propertyName==="value"&&Ld(ec)){var t=[];r2(t,ec,e,rv(e)),jS(w3,t)}}function b3(e,t,n){e==="focusin"?(y1(),Bu=t,ec=n,Bu.attachEvent("onpropertychange",o2)):e==="focusout"&&y1()}function S3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ld(ec)}function C3(e,t){if(e==="click")return Ld(t)}function R3(e,t){if(e==="input"||e==="change")return Ld(t)}function k3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ji=typeof Object.is=="function"?Object.is:k3;function tc(e,t){if(ji(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vg.call(t,i)||!ji(e[i],t[i]))return!1}return!0}function v1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function x1(e,t){var n=v1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v1(n)}}function a2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?a2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function s2(){for(var e=window,t=Vf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vf(e.document)}return t}function fv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P3(e){var t=s2(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&a2(n.ownerDocument.documentElement,n)){if(r!==null&&fv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=x1(n,o);var a=x1(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T3=Co&&"documentMode"in document&&11>=document.documentMode,nl=null,Ig=null,Iu=null,jg=!1;function _1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jg||nl==null||nl!==Vf(r)||(r=nl,"selectionStart"in r&&fv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Iu&&tc(Iu,r)||(Iu=r,r=Xf(Ig,"onSelect"),0<r.length&&(t=new uv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nl)))}function Np(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rl={animationend:Np("Animation","AnimationEnd"),animationiteration:Np("Animation","AnimationIteration"),animationstart:Np("Animation","AnimationStart"),transitionend:Np("Transition","TransitionEnd")},Dm={},l2={};Co&&(l2=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Bd(e){if(Dm[e])return Dm[e];if(!rl[e])return e;var t=rl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in l2)return Dm[e]=t[n];return e}var u2=Bd("animationend"),c2=Bd("animationiteration"),p2=Bd("animationstart"),f2=Bd("transitionend"),d2=new Map,w1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(e,t){d2.set(e,t),Es(t,[e])}for(var Om=0;Om<w1.length;Om++){var Lm=w1[Om],A3=Lm.toLowerCase(),M3=Lm[0].toUpperCase()+Lm.slice(1);_a(A3,"on"+M3)}_a(u2,"onAnimationEnd");_a(c2,"onAnimationIteration");_a(p2,"onAnimationStart");_a("dblclick","onDoubleClick");_a("focusin","onFocus");_a("focusout","onBlur");_a(f2,"onTransitionEnd");yl("onMouseEnter",["mouseout","mouseover"]);yl("onMouseLeave",["mouseout","mouseover"]);yl("onPointerEnter",["pointerout","pointerover"]);yl("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mu));function E1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,AM(r,t,void 0,e),e.currentTarget=null}function h2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;E1(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;E1(i,s,c),o=l}}}if(Uf)throw e=Dg,Uf=!1,Dg=null,e}function Gt(e,t){var n=t[Vg];n===void 0&&(n=t[Vg]=new Set);var r=e+"__bubble";n.has(r)||(m2(t,e,2,!1),n.add(r))}function Bm(e,t,n){var r=0;t&&(r|=4),m2(n,e,r,t)}var Dp="_reactListening"+Math.random().toString(36).slice(2);function nc(e){if(!e[Dp]){e[Dp]=!0,ES.forEach(function(n){n!=="selectionchange"&&(N3.has(n)||Bm(n,!1,e),Bm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dp]||(t[Dp]=!0,Bm("selectionchange",!1,t))}}function m2(e,t,n,r){switch(ZS(t)){case 1:var i=GM;break;case 4:i=KM;break;default:i=sv}n=i.bind(null,t,n,e),i=void 0,!Ng||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Im(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=os(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}jS(function(){var c=o,f=rv(n),d=[];e:{var g=d2.get(e);if(g!==void 0){var y=uv,v=e;switch(e){case"keypress":if(_f(n)===0)break e;case"keydown":case"keyup":y=l3;break;case"focusin":v="focus",y=Am;break;case"focusout":v="blur",y=Am;break;case"beforeblur":case"afterblur":y=Am;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=c1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=XM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=p3;break;case u2:case c2:case p2:y=JM;break;case f2:y=d3;break;case"scroll":y=YM;break;case"wheel":y=m3;break;case"copy":case"cut":case"paste":y=t3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=f1}var x=(t&4)!==0,C=!x&&e==="scroll",k=x?g!==null?g+"Capture":null:g;x=[];for(var R=c,E;R!==null;){E=R;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,k!==null&&(b=Xu(R,k),b!=null&&x.push(rc(R,b,E)))),C)break;R=R.return}0<x.length&&(g=new y(g,v,null,n,f),d.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",g&&n!==Ag&&(v=n.relatedTarget||n.fromElement)&&(os(v)||v[Ro]))break e;if((y||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=c,v=v?os(v):null,v!==null&&(C=bs(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(x=c1,b="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(x=f1,b="onPointerLeave",k="onPointerEnter",R="pointer"),C=y==null?g:il(y),E=v==null?g:il(v),g=new x(b,R+"leave",y,n,f),g.target=C,g.relatedTarget=E,b=null,os(f)===c&&(x=new x(k,R+"enter",v,n,f),x.target=E,x.relatedTarget=C,b=x),C=b,y&&v)t:{for(x=y,k=v,R=0,E=x;E;E=Ws(E))R++;for(E=0,b=k;b;b=Ws(b))E++;for(;0<R-E;)x=Ws(x),R--;for(;0<E-R;)k=Ws(k),E--;for(;R--;){if(x===k||k!==null&&x===k.alternate)break t;x=Ws(x),k=Ws(k)}x=null}else x=null;y!==null&&b1(d,g,y,x,!1),v!==null&&C!==null&&b1(d,C,v,x,!0)}}e:{if(g=c?il(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var D=E3;else if(m1(g))if(i2)D=R3;else{D=S3;var I=b3}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=C3);if(D&&(D=D(e,c))){r2(d,D,n,f);break e}I&&I(e,g,c),e==="focusout"&&(I=g._wrapperState)&&I.controlled&&g.type==="number"&&Cg(g,"number",g.value)}switch(I=c?il(c):window,e){case"focusin":(m1(I)||I.contentEditable==="true")&&(nl=I,Ig=c,Iu=null);break;case"focusout":Iu=Ig=nl=null;break;case"mousedown":jg=!0;break;case"contextmenu":case"mouseup":case"dragend":jg=!1,_1(d,n,f);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":_1(d,n,f)}var z;if(pv)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else tl?t2(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(e2&&n.locale!=="ko"&&(tl||L!=="onCompositionStart"?L==="onCompositionEnd"&&tl&&(z=JS()):(ra=f,lv="value"in ra?ra.value:ra.textContent,tl=!0)),I=Xf(c,L),0<I.length&&(L=new p1(L,e,null,n,f),d.push({event:L,listeners:I}),z?L.data=z:(z=n2(n),z!==null&&(L.data=z)))),(z=y3?v3(e,n):x3(e,n))&&(c=Xf(c,"onBeforeInput"),0<c.length&&(f=new p1("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=z))}h2(d,t)})}function rc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xf(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Xu(e,n),o!=null&&r.unshift(rc(e,o,i)),o=Xu(e,t),o!=null&&r.push(rc(e,o,i))),e=e.return}return r}function Ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function b1(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=Xu(n,o),l!=null&&a.unshift(rc(n,l,s))):i||(l=Xu(n,o),l!=null&&a.push(rc(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var D3=/\r\n?/g,O3=/\u0000|\uFFFD/g;function S1(e){return(typeof e=="string"?e:""+e).replace(D3,`
`).replace(O3,"")}function Op(e,t,n){if(t=S1(t),S1(e)!==t&&n)throw Error(ge(425))}function Qf(){}var $g=null,Fg=null;function zg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hg=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,B3=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(e){return C1.resolve(null).then(e).catch(I3)}:Hg;function I3(e){setTimeout(function(){throw e})}function jm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ju(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ju(t)}function ua(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function R1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Il=Math.random().toString(36).slice(2),qi="__reactFiber$"+Il,ic="__reactProps$"+Il,Ro="__reactContainer$"+Il,Vg="__reactEvents$"+Il,j3="__reactListeners$"+Il,$3="__reactHandles$"+Il;function os(e){var t=e[qi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ro]||n[qi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=R1(e);e!==null;){if(n=e[qi])return n;e=R1(e)}return t}e=n,n=e.parentNode}return null}function Sc(e){return e=e[qi]||e[Ro],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function il(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ge(33))}function Id(e){return e[ic]||null}var Wg=[],ol=-1;function wa(e){return{current:e}}function Yt(e){0>ol||(e.current=Wg[ol],Wg[ol]=null,ol--)}function Vt(e,t){ol++,Wg[ol]=e.current,e.current=t}var ga={},cr=wa(ga),Or=wa(!1),ds=ga;function vl(e,t){var n=e.type.contextTypes;if(!n)return ga;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Lr(e){return e=e.childContextTypes,e!=null}function Zf(){Yt(Or),Yt(cr)}function k1(e,t,n){if(cr.current!==ga)throw Error(ge(168));Vt(cr,t),Vt(Or,n)}function g2(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ge(108,bM(e)||"Unknown",i));return ln({},n,r)}function Jf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ga,ds=cr.current,Vt(cr,e),Vt(Or,Or.current),!0}function P1(e,t,n){var r=e.stateNode;if(!r)throw Error(ge(169));n?(e=g2(e,t,ds),r.__reactInternalMemoizedMergedChildContext=e,Yt(Or),Yt(cr),Vt(cr,e)):Yt(Or),Vt(Or,n)}var mo=null,jd=!1,$m=!1;function y2(e){mo===null?mo=[e]:mo.push(e)}function F3(e){jd=!0,y2(e)}function Ea(){if(!$m&&mo!==null){$m=!0;var e=0,t=$t;try{var n=mo;for($t=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mo=null,jd=!1}catch(i){throw mo!==null&&(mo=mo.slice(e+1)),HS(iv,Ea),i}finally{$t=t,$m=!1}}return null}var al=[],sl=0,ed=null,td=0,fi=[],di=0,hs=null,yo=1,vo="";function es(e,t){al[sl++]=td,al[sl++]=ed,ed=e,td=t}function v2(e,t,n){fi[di++]=yo,fi[di++]=vo,fi[di++]=hs,hs=e;var r=yo;e=vo;var i=32-Oi(r)-1;r&=~(1<<i),n+=1;var o=32-Oi(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,yo=1<<32-Oi(t)+i|n<<i|r,vo=o+e}else yo=1<<o|n<<i|r,vo=e}function dv(e){e.return!==null&&(es(e,1),v2(e,1,0))}function hv(e){for(;e===ed;)ed=al[--sl],al[sl]=null,td=al[--sl],al[sl]=null;for(;e===hs;)hs=fi[--di],fi[di]=null,vo=fi[--di],fi[di]=null,yo=fi[--di],fi[di]=null}var qr=null,Yr=null,tn=!1,Di=null;function x2(e,t){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function T1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qr=e,Yr=ua(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qr=e,Yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hs!==null?{id:yo,overflow:vo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qr=e,Yr=null,!0):!1;default:return!1}}function Ug(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gg(e){if(tn){var t=Yr;if(t){var n=t;if(!T1(e,t)){if(Ug(e))throw Error(ge(418));t=ua(n.nextSibling);var r=qr;t&&T1(e,t)?x2(r,n):(e.flags=e.flags&-4097|2,tn=!1,qr=e)}}else{if(Ug(e))throw Error(ge(418));e.flags=e.flags&-4097|2,tn=!1,qr=e}}}function A1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qr=e}function Lp(e){if(e!==qr)return!1;if(!tn)return A1(e),tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zg(e.type,e.memoizedProps)),t&&(t=Yr)){if(Ug(e))throw _2(),Error(ge(418));for(;t;)x2(e,t),t=ua(t.nextSibling)}if(A1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yr=ua(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yr=null}}else Yr=qr?ua(e.stateNode.nextSibling):null;return!0}function _2(){for(var e=Yr;e;)e=ua(e.nextSibling)}function xl(){Yr=qr=null,tn=!1}function mv(e){Di===null?Di=[e]:Di.push(e)}var z3=To.ReactCurrentBatchConfig;function du(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,e))}return e}function Bp(e,t){throw e=Object.prototype.toString.call(t),Error(ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function M1(e){var t=e._init;return t(e._payload)}function w2(e){function t(k,R){if(e){var E=k.deletions;E===null?(k.deletions=[R],k.flags|=16):E.push(R)}}function n(k,R){if(!e)return null;for(;R!==null;)t(k,R),R=R.sibling;return null}function r(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function i(k,R){return k=da(k,R),k.index=0,k.sibling=null,k}function o(k,R,E){return k.index=E,e?(E=k.alternate,E!==null?(E=E.index,E<R?(k.flags|=2,R):E):(k.flags|=2,R)):(k.flags|=1048576,R)}function a(k){return e&&k.alternate===null&&(k.flags|=2),k}function s(k,R,E,b){return R===null||R.tag!==6?(R=Gm(E,k.mode,b),R.return=k,R):(R=i(R,E),R.return=k,R)}function l(k,R,E,b){var D=E.type;return D===el?f(k,R,E.props.children,b,E.key):R!==null&&(R.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zo&&M1(D)===R.type)?(b=i(R,E.props),b.ref=du(k,R,E),b.return=k,b):(b=kf(E.type,E.key,E.props,null,k.mode,b),b.ref=du(k,R,E),b.return=k,b)}function c(k,R,E,b){return R===null||R.tag!==4||R.stateNode.containerInfo!==E.containerInfo||R.stateNode.implementation!==E.implementation?(R=Km(E,k.mode,b),R.return=k,R):(R=i(R,E.children||[]),R.return=k,R)}function f(k,R,E,b,D){return R===null||R.tag!==7?(R=ps(E,k.mode,b,D),R.return=k,R):(R=i(R,E),R.return=k,R)}function d(k,R,E){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Gm(""+R,k.mode,E),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cp:return E=kf(R.type,R.key,R.props,null,k.mode,E),E.ref=du(k,null,R),E.return=k,E;case Js:return R=Km(R,k.mode,E),R.return=k,R;case Zo:var b=R._init;return d(k,b(R._payload),E)}if(Tu(R)||lu(R))return R=ps(R,k.mode,E,null),R.return=k,R;Bp(k,R)}return null}function g(k,R,E,b){var D=R!==null?R.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:s(k,R,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cp:return E.key===D?l(k,R,E,b):null;case Js:return E.key===D?c(k,R,E,b):null;case Zo:return D=E._init,g(k,R,D(E._payload),b)}if(Tu(E)||lu(E))return D!==null?null:f(k,R,E,b,null);Bp(k,E)}return null}function y(k,R,E,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return k=k.get(E)||null,s(R,k,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cp:return k=k.get(b.key===null?E:b.key)||null,l(R,k,b,D);case Js:return k=k.get(b.key===null?E:b.key)||null,c(R,k,b,D);case Zo:var I=b._init;return y(k,R,E,I(b._payload),D)}if(Tu(b)||lu(b))return k=k.get(E)||null,f(R,k,b,D,null);Bp(R,b)}return null}function v(k,R,E,b){for(var D=null,I=null,z=R,L=R=0,Q=null;z!==null&&L<E.length;L++){z.index>L?(Q=z,z=null):Q=z.sibling;var Y=g(k,z,E[L],b);if(Y===null){z===null&&(z=Q);break}e&&z&&Y.alternate===null&&t(k,z),R=o(Y,R,L),I===null?D=Y:I.sibling=Y,I=Y,z=Q}if(L===E.length)return n(k,z),tn&&es(k,L),D;if(z===null){for(;L<E.length;L++)z=d(k,E[L],b),z!==null&&(R=o(z,R,L),I===null?D=z:I.sibling=z,I=z);return tn&&es(k,L),D}for(z=r(k,z);L<E.length;L++)Q=y(z,k,L,E[L],b),Q!==null&&(e&&Q.alternate!==null&&z.delete(Q.key===null?L:Q.key),R=o(Q,R,L),I===null?D=Q:I.sibling=Q,I=Q);return e&&z.forEach(function(G){return t(k,G)}),tn&&es(k,L),D}function x(k,R,E,b){var D=lu(E);if(typeof D!="function")throw Error(ge(150));if(E=D.call(E),E==null)throw Error(ge(151));for(var I=D=null,z=R,L=R=0,Q=null,Y=E.next();z!==null&&!Y.done;L++,Y=E.next()){z.index>L?(Q=z,z=null):Q=z.sibling;var G=g(k,z,Y.value,b);if(G===null){z===null&&(z=Q);break}e&&z&&G.alternate===null&&t(k,z),R=o(G,R,L),I===null?D=G:I.sibling=G,I=G,z=Q}if(Y.done)return n(k,z),tn&&es(k,L),D;if(z===null){for(;!Y.done;L++,Y=E.next())Y=d(k,Y.value,b),Y!==null&&(R=o(Y,R,L),I===null?D=Y:I.sibling=Y,I=Y);return tn&&es(k,L),D}for(z=r(k,z);!Y.done;L++,Y=E.next())Y=y(z,k,L,Y.value,b),Y!==null&&(e&&Y.alternate!==null&&z.delete(Y.key===null?L:Y.key),R=o(Y,R,L),I===null?D=Y:I.sibling=Y,I=Y);return e&&z.forEach(function(ae){return t(k,ae)}),tn&&es(k,L),D}function C(k,R,E,b){if(typeof E=="object"&&E!==null&&E.type===el&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Cp:e:{for(var D=E.key,I=R;I!==null;){if(I.key===D){if(D=E.type,D===el){if(I.tag===7){n(k,I.sibling),R=i(I,E.props.children),R.return=k,k=R;break e}}else if(I.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zo&&M1(D)===I.type){n(k,I.sibling),R=i(I,E.props),R.ref=du(k,I,E),R.return=k,k=R;break e}n(k,I);break}else t(k,I);I=I.sibling}E.type===el?(R=ps(E.props.children,k.mode,b,E.key),R.return=k,k=R):(b=kf(E.type,E.key,E.props,null,k.mode,b),b.ref=du(k,R,E),b.return=k,k=b)}return a(k);case Js:e:{for(I=E.key;R!==null;){if(R.key===I)if(R.tag===4&&R.stateNode.containerInfo===E.containerInfo&&R.stateNode.implementation===E.implementation){n(k,R.sibling),R=i(R,E.children||[]),R.return=k,k=R;break e}else{n(k,R);break}else t(k,R);R=R.sibling}R=Km(E,k.mode,b),R.return=k,k=R}return a(k);case Zo:return I=E._init,C(k,R,I(E._payload),b)}if(Tu(E))return v(k,R,E,b);if(lu(E))return x(k,R,E,b);Bp(k,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,R!==null&&R.tag===6?(n(k,R.sibling),R=i(R,E),R.return=k,k=R):(n(k,R),R=Gm(E,k.mode,b),R.return=k,k=R),a(k)):n(k,R)}return C}var _l=w2(!0),E2=w2(!1),nd=wa(null),rd=null,ll=null,gv=null;function yv(){gv=ll=rd=null}function vv(e){var t=nd.current;Yt(nd),e._currentValue=t}function Kg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ml(e,t){rd=e,gv=ll=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nr=!0),e.firstContext=null)}function vi(e){var t=e._currentValue;if(gv!==e)if(e={context:e,memoizedValue:t,next:null},ll===null){if(rd===null)throw Error(ge(308));ll=e,rd.dependencies={lanes:0,firstContext:e}}else ll=ll.next=e;return t}var as=null;function xv(e){as===null?as=[e]:as.push(e)}function b2(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,xv(t)):(n.next=i.next,i.next=n),t.interleaved=n,ko(e,r)}function ko(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jo=!1;function _v(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ca(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ko(e,n)}return i=r.interleaved,i===null?(t.next=t,xv(r)):(t.next=i.next,i.next=t),r.interleaved=t,ko(e,n)}function wf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ov(e,n)}}function N1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function id(e,t,n,r){var i=e.updateQueue;Jo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==a&&(s===null?f.firstBaseUpdate=c:s.next=c,f.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,f=c=l=null,s=o;do{var g=s.lane,y=s.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:y,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,x=s;switch(g=t,y=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(y,d,g);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,g=typeof v=="function"?v.call(y,d,g):v,g==null)break e;d=ln({},d,g);break e;case 2:Jo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[s]:g.push(s))}else y={eventTime:y,lane:g,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(c=f=y,l=d):f=f.next=y,a|=g;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;g=s,s=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);gs|=a,e.lanes=a,e.memoizedState=d}}function D1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ge(191,i));i.call(r)}}}var Cc={},Zi=wa(Cc),oc=wa(Cc),ac=wa(Cc);function ss(e){if(e===Cc)throw Error(ge(174));return e}function wv(e,t){switch(Vt(ac,t),Vt(oc,e),Vt(Zi,Cc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kg(t,e)}Yt(Zi),Vt(Zi,t)}function wl(){Yt(Zi),Yt(oc),Yt(ac)}function C2(e){ss(ac.current);var t=ss(Zi.current),n=kg(t,e.type);t!==n&&(Vt(oc,e),Vt(Zi,n))}function Ev(e){oc.current===e&&(Yt(Zi),Yt(oc))}var on=wa(0);function od(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fm=[];function bv(){for(var e=0;e<Fm.length;e++)Fm[e]._workInProgressVersionPrimary=null;Fm.length=0}var Ef=To.ReactCurrentDispatcher,zm=To.ReactCurrentBatchConfig,ms=0,sn=null,On=null,zn=null,ad=!1,ju=!1,sc=0,H3=0;function or(){throw Error(ge(321))}function Sv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ji(e[n],t[n]))return!1;return!0}function Cv(e,t,n,r,i,o){if(ms=o,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ef.current=e===null||e.memoizedState===null?G3:K3,e=n(r,i),ju){o=0;do{if(ju=!1,sc=0,25<=o)throw Error(ge(301));o+=1,zn=On=null,t.updateQueue=null,Ef.current=Y3,e=n(r,i)}while(ju)}if(Ef.current=sd,t=On!==null&&On.next!==null,ms=0,zn=On=sn=null,ad=!1,t)throw Error(ge(300));return e}function Rv(){var e=sc!==0;return sc=0,e}function Ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?sn.memoizedState=zn=e:zn=zn.next=e,zn}function xi(){if(On===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=On.next;var t=zn===null?sn.memoizedState:zn.next;if(t!==null)zn=t,On=e;else{if(e===null)throw Error(ge(310));On=e,e={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},zn===null?sn.memoizedState=zn=e:zn=zn.next=e}return zn}function lc(e,t){return typeof t=="function"?t(e):t}function Hm(e){var t=xi(),n=t.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=e;var r=On,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var f=c.lane;if((ms&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,sn.lanes|=f,gs|=f}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,ji(r,t.memoizedState)||(Nr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,sn.lanes|=o,gs|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vm(e){var t=xi(),n=t.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ji(o,t.memoizedState)||(Nr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function R2(){}function k2(e,t){var n=sn,r=xi(),i=t(),o=!ji(r.memoizedState,i);if(o&&(r.memoizedState=i,Nr=!0),r=r.queue,kv(A2.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||zn!==null&&zn.memoizedState.tag&1){if(n.flags|=2048,uc(9,T2.bind(null,n,r,i,t),void 0,null),Vn===null)throw Error(ge(349));ms&30||P2(n,t,i)}return i}function P2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function T2(e,t,n,r){t.value=n,t.getSnapshot=r,M2(t)&&N2(e)}function A2(e,t,n){return n(function(){M2(t)&&N2(e)})}function M2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ji(e,n)}catch{return!0}}function N2(e){var t=ko(e,1);t!==null&&Li(t,e,1,-1)}function O1(e){var t=Ui();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lc,lastRenderedState:e},t.queue=e,e=e.dispatch=U3.bind(null,sn,e),[t.memoizedState,e]}function uc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function D2(){return xi().memoizedState}function bf(e,t,n,r){var i=Ui();sn.flags|=e,i.memoizedState=uc(1|t,n,void 0,r===void 0?null:r)}function $d(e,t,n,r){var i=xi();r=r===void 0?null:r;var o=void 0;if(On!==null){var a=On.memoizedState;if(o=a.destroy,r!==null&&Sv(r,a.deps)){i.memoizedState=uc(t,n,o,r);return}}sn.flags|=e,i.memoizedState=uc(1|t,n,o,r)}function L1(e,t){return bf(8390656,8,e,t)}function kv(e,t){return $d(2048,8,e,t)}function O2(e,t){return $d(4,2,e,t)}function L2(e,t){return $d(4,4,e,t)}function B2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function I2(e,t,n){return n=n!=null?n.concat([e]):null,$d(4,4,B2.bind(null,t,e),n)}function Pv(){}function j2(e,t){var n=xi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $2(e,t){var n=xi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function F2(e,t,n){return ms&21?(ji(n,t)||(n=US(),sn.lanes|=n,gs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nr=!0),e.memoizedState=n)}function V3(e,t){var n=$t;$t=n!==0&&4>n?n:4,e(!0);var r=zm.transition;zm.transition={};try{e(!1),t()}finally{$t=n,zm.transition=r}}function z2(){return xi().memoizedState}function W3(e,t,n){var r=fa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H2(e))V2(t,n);else if(n=b2(e,t,n,r),n!==null){var i=xr();Li(n,e,r,i),W2(n,t,r)}}function U3(e,t,n){var r=fa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H2(e))V2(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,ji(s,a)){var l=t.interleaved;l===null?(i.next=i,xv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=b2(e,t,i,r),n!==null&&(i=xr(),Li(n,e,r,i),W2(n,t,r))}}function H2(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function V2(e,t){ju=ad=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function W2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ov(e,n)}}var sd={readContext:vi,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},G3={readContext:vi,useCallback:function(e,t){return Ui().memoizedState=[e,t===void 0?null:t],e},useContext:vi,useEffect:L1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bf(4194308,4,B2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bf(4194308,4,e,t)},useInsertionEffect:function(e,t){return bf(4,2,e,t)},useMemo:function(e,t){var n=Ui();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ui();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=W3.bind(null,sn,e),[r.memoizedState,e]},useRef:function(e){var t=Ui();return e={current:e},t.memoizedState=e},useState:O1,useDebugValue:Pv,useDeferredValue:function(e){return Ui().memoizedState=e},useTransition:function(){var e=O1(!1),t=e[0];return e=V3.bind(null,e[1]),Ui().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sn,i=Ui();if(tn){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=t(),Vn===null)throw Error(ge(349));ms&30||P2(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,L1(A2.bind(null,r,o,e),[e]),r.flags|=2048,uc(9,T2.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ui(),t=Vn.identifierPrefix;if(tn){var n=vo,r=yo;n=(r&~(1<<32-Oi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=H3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},K3={readContext:vi,useCallback:j2,useContext:vi,useEffect:kv,useImperativeHandle:I2,useInsertionEffect:O2,useLayoutEffect:L2,useMemo:$2,useReducer:Hm,useRef:D2,useState:function(){return Hm(lc)},useDebugValue:Pv,useDeferredValue:function(e){var t=xi();return F2(t,On.memoizedState,e)},useTransition:function(){var e=Hm(lc)[0],t=xi().memoizedState;return[e,t]},useMutableSource:R2,useSyncExternalStore:k2,useId:z2,unstable_isNewReconciler:!1},Y3={readContext:vi,useCallback:j2,useContext:vi,useEffect:kv,useImperativeHandle:I2,useInsertionEffect:O2,useLayoutEffect:L2,useMemo:$2,useReducer:Vm,useRef:D2,useState:function(){return Vm(lc)},useDebugValue:Pv,useDeferredValue:function(e){var t=xi();return On===null?t.memoizedState=e:F2(t,On.memoizedState,e)},useTransition:function(){var e=Vm(lc)[0],t=xi().memoizedState;return[e,t]},useMutableSource:R2,useSyncExternalStore:k2,useId:z2,unstable_isNewReconciler:!1};function Mi(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Yg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ln({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fd={isMounted:function(e){return(e=e._reactInternals)?bs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xr(),i=fa(e),o=wo(r,i);o.payload=t,n!=null&&(o.callback=n),t=ca(e,o,i),t!==null&&(Li(t,e,i,r),wf(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xr(),i=fa(e),o=wo(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ca(e,o,i),t!==null&&(Li(t,e,i,r),wf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xr(),r=fa(e),i=wo(n,r);i.tag=2,t!=null&&(i.callback=t),t=ca(e,i,r),t!==null&&(Li(t,e,r,n),wf(t,e,r))}};function B1(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!tc(n,r)||!tc(i,o):!0}function U2(e,t,n){var r=!1,i=ga,o=t.contextType;return typeof o=="object"&&o!==null?o=vi(o):(i=Lr(t)?ds:cr.current,r=t.contextTypes,o=(r=r!=null)?vl(e,i):ga),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function I1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fd.enqueueReplaceState(t,t.state,null)}function qg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},_v(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=vi(o):(o=Lr(t)?ds:cr.current,i.context=vl(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Yg(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Fd.enqueueReplaceState(i,i.state,null),id(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function El(e,t){try{var n="",r=t;do n+=EM(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Wm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var q3=typeof WeakMap=="function"?WeakMap:Map;function G2(e,t,n){n=wo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ud||(ud=!0,ay=r),Xg(e,t)},n}function K2(e,t,n){n=wo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Xg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Xg(e,t),typeof r!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function j1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new q3;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=u5.bind(null,e,t,n),t.then(e,e))}function $1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function F1(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wo(-1,1),t.tag=2,ca(n,t,1))),n.lanes|=1),e)}var X3=To.ReactCurrentOwner,Nr=!1;function yr(e,t,n,r){t.child=e===null?E2(t,null,n,r):_l(t,e.child,n,r)}function z1(e,t,n,r,i){n=n.render;var o=t.ref;return ml(t,i),r=Cv(e,t,n,r,o,i),n=Rv(),e!==null&&!Nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Po(e,t,i)):(tn&&n&&dv(t),t.flags|=1,yr(e,t,r,i),t.child)}function H1(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Bv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Y2(e,t,o,r,i)):(e=kf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:tc,n(a,r)&&e.ref===t.ref)return Po(e,t,i)}return t.flags|=1,e=da(o,r),e.ref=t.ref,e.return=t,t.child=e}function Y2(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(tc(o,r)&&e.ref===t.ref)if(Nr=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Nr=!0);else return t.lanes=e.lanes,Po(e,t,i)}return Qg(e,t,n,r,i)}function q2(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(cl,Kr),Kr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(cl,Kr),Kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Vt(cl,Kr),Kr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Vt(cl,Kr),Kr|=r;return yr(e,t,i,n),t.child}function X2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qg(e,t,n,r,i){var o=Lr(n)?ds:cr.current;return o=vl(t,o),ml(t,i),n=Cv(e,t,n,r,o,i),r=Rv(),e!==null&&!Nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Po(e,t,i)):(tn&&r&&dv(t),t.flags|=1,yr(e,t,n,i),t.child)}function V1(e,t,n,r,i){if(Lr(n)){var o=!0;Jf(t)}else o=!1;if(ml(t,i),t.stateNode===null)Sf(e,t),U2(t,n,r),qg(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=vi(c):(c=Lr(n)?ds:cr.current,c=vl(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&I1(t,a,r,c),Jo=!1;var g=t.memoizedState;a.state=g,id(t,r,a,i),l=t.memoizedState,s!==r||g!==l||Or.current||Jo?(typeof f=="function"&&(Yg(t,n,f,r),l=t.memoizedState),(s=Jo||B1(t,n,s,r,g,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,S2(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Mi(t.type,s),a.props=c,d=t.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=vi(l):(l=Lr(n)?ds:cr.current,l=vl(t,l));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||g!==l)&&I1(t,a,r,l),Jo=!1,g=t.memoizedState,a.state=g,id(t,r,a,i);var v=t.memoizedState;s!==d||g!==v||Or.current||Jo?(typeof y=="function"&&(Yg(t,n,y,r),v=t.memoizedState),(c=Jo||B1(t,n,c,r,g,v,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Zg(e,t,n,r,o,i)}function Zg(e,t,n,r,i,o){X2(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&P1(t,n,!1),Po(e,t,o);r=t.stateNode,X3.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=_l(t,e.child,null,o),t.child=_l(t,null,s,o)):yr(e,t,s,o),t.memoizedState=r.state,i&&P1(t,n,!0),t.child}function Q2(e){var t=e.stateNode;t.pendingContext?k1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&k1(e,t.context,!1),wv(e,t.containerInfo)}function W1(e,t,n,r,i){return xl(),mv(i),t.flags|=256,yr(e,t,n,r),t.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function ey(e){return{baseLanes:e,cachePool:null,transitions:null}}function Z2(e,t,n){var r=t.pendingProps,i=on.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Vt(on,i&1),e===null)return Gg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Vd(a,r,0,null),e=ps(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ey(n),t.memoizedState=Jg,e):Tv(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Q3(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=da(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=da(s,o):(o=ps(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ey(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Jg,r}return o=e.child,e=o.sibling,r=da(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tv(e,t){return t=Vd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ip(e,t,n,r){return r!==null&&mv(r),_l(t,e.child,null,n),e=Tv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q3(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Wm(Error(ge(422))),Ip(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Vd({mode:"visible",children:r.children},i,0,null),o=ps(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&_l(t,e.child,null,a),t.child.memoizedState=ey(a),t.memoizedState=Jg,o);if(!(t.mode&1))return Ip(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(ge(419)),r=Wm(o,r,void 0),Ip(e,t,a,r)}if(s=(a&e.childLanes)!==0,Nr||s){if(r=Vn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ko(e,i),Li(r,e,i,-1))}return Lv(),r=Wm(Error(ge(421))),Ip(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=c5.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Yr=ua(i.nextSibling),qr=t,tn=!0,Di=null,e!==null&&(fi[di++]=yo,fi[di++]=vo,fi[di++]=hs,yo=e.id,vo=e.overflow,hs=t),t=Tv(t,r.children),t.flags|=4096,t)}function U1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kg(e.return,t,n)}function Um(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function J2(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(yr(e,t,r.children,n),r=on.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U1(e,n,t);else if(e.tag===19)U1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Vt(on,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&od(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Um(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&od(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Um(t,!0,n,null,o);break;case"together":Um(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Po(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ge(153));if(t.child!==null){for(e=t.child,n=da(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=da(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z3(e,t,n){switch(t.tag){case 3:Q2(t),xl();break;case 5:C2(t);break;case 1:Lr(t.type)&&Jf(t);break;case 4:wv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Vt(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Vt(on,on.current&1),t.flags|=128,null):n&t.child.childLanes?Z2(e,t,n):(Vt(on,on.current&1),e=Po(e,t,n),e!==null?e.sibling:null);Vt(on,on.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return J2(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vt(on,on.current),r)break;return null;case 22:case 23:return t.lanes=0,q2(e,t,n)}return Po(e,t,n)}var eC,ty,tC,nC;eC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ty=function(){};tC=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ss(Zi.current);var o=null;switch(n){case"input":i=bg(e,i),r=bg(e,r),o=[];break;case"select":i=ln({},i,{value:void 0}),r=ln({},r,{value:void 0}),o=[];break;case"textarea":i=Rg(e,i),r=Rg(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Qf)}Pg(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yu.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Gt("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};nC=function(e,t,n,r){n!==r&&(t.flags|=4)};function hu(e,t){if(!tn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function J3(e,t,n){var r=t.pendingProps;switch(hv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(t),null;case 1:return Lr(t.type)&&Zf(),ar(t),null;case 3:return r=t.stateNode,wl(),Yt(Or),Yt(cr),bv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Lp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Di!==null&&(uy(Di),Di=null))),ty(e,t),ar(t),null;case 5:Ev(t);var i=ss(ac.current);if(n=t.type,e!==null&&t.stateNode!=null)tC(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ge(166));return ar(t),null}if(e=ss(Zi.current),Lp(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[qi]=t,r[ic]=o,e=(t.mode&1)!==0,n){case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":case"embed":Gt("load",r);break;case"video":case"audio":for(i=0;i<Mu.length;i++)Gt(Mu[i],r);break;case"source":Gt("error",r);break;case"img":case"image":case"link":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"input":e1(r,o),Gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Gt("invalid",r);break;case"textarea":n1(r,o),Gt("invalid",r)}Pg(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Op(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Op(r.textContent,s,e),i=["children",""+s]):Yu.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Gt("scroll",r)}switch(n){case"input":Rp(r),t1(r,o,!0);break;case"textarea":Rp(r),r1(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Qf)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=AS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[qi]=t,e[ic]=r,eC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Tg(n,r),n){case"dialog":Gt("cancel",e),Gt("close",e),i=r;break;case"iframe":case"object":case"embed":Gt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mu.length;i++)Gt(Mu[i],e);i=r;break;case"source":Gt("error",e),i=r;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),i=r;break;case"details":Gt("toggle",e),i=r;break;case"input":e1(e,r),i=bg(e,r),Gt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ln({},r,{value:void 0}),Gt("invalid",e);break;case"textarea":n1(e,r),i=Rg(e,r),Gt("invalid",e);break;default:i=r}Pg(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?DS(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&MS(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qu(e,l):typeof l=="number"&&qu(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yu.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Gt("scroll",e):l!=null&&Jy(e,o,l,a))}switch(n){case"input":Rp(e),t1(e,r,!1);break;case"textarea":Rp(e),r1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ma(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?pl(e,!!r.multiple,o,!1):r.defaultValue!=null&&pl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Qf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ar(t),null;case 6:if(e&&t.stateNode!=null)nC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ge(166));if(n=ss(ac.current),ss(Zi.current),Lp(t)){if(r=t.stateNode,n=t.memoizedProps,r[qi]=t,(o=r.nodeValue!==n)&&(e=qr,e!==null))switch(e.tag){case 3:Op(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Op(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qi]=t,t.stateNode=r}return ar(t),null;case 13:if(Yt(on),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&Yr!==null&&t.mode&1&&!(t.flags&128))_2(),xl(),t.flags|=98560,o=!1;else if(o=Lp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ge(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ge(317));o[qi]=t}else xl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ar(t),o=!1}else Di!==null&&(uy(Di),Di=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||on.current&1?Bn===0&&(Bn=3):Lv())),t.updateQueue!==null&&(t.flags|=4),ar(t),null);case 4:return wl(),ty(e,t),e===null&&nc(t.stateNode.containerInfo),ar(t),null;case 10:return vv(t.type._context),ar(t),null;case 17:return Lr(t.type)&&Zf(),ar(t),null;case 19:if(Yt(on),o=t.memoizedState,o===null)return ar(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)hu(o,!1);else{if(Bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=od(e),a!==null){for(t.flags|=128,hu(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vt(on,on.current&1|2),t.child}e=e.sibling}o.tail!==null&&wn()>bl&&(t.flags|=128,r=!0,hu(o,!1),t.lanes=4194304)}else{if(!r)if(e=od(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!tn)return ar(t),null}else 2*wn()-o.renderingStartTime>bl&&n!==1073741824&&(t.flags|=128,r=!0,hu(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=wn(),t.sibling=null,n=on.current,Vt(on,r?n&1|2:n&1),t):(ar(t),null);case 22:case 23:return Ov(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Kr&1073741824&&(ar(t),t.subtreeFlags&6&&(t.flags|=8192)):ar(t),null;case 24:return null;case 25:return null}throw Error(ge(156,t.tag))}function e5(e,t){switch(hv(t),t.tag){case 1:return Lr(t.type)&&Zf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wl(),Yt(Or),Yt(cr),bv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ev(t),null;case 13:if(Yt(on),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ge(340));xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yt(on),null;case 4:return wl(),null;case 10:return vv(t.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var jp=!1,sr=!1,t5=typeof WeakSet=="function"?WeakSet:Set,$e=null;function ul(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fn(e,t,r)}else n.current=null}function ny(e,t,n){try{n()}catch(r){fn(e,t,r)}}var G1=!1;function n5(e,t){if($g=Yf,e=s2(),fv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,f=0,d=e,g=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(y=d.firstChild)!==null;)g=d,d=y;for(;;){if(d===e)break t;if(g===n&&++c===i&&(s=a),g===o&&++f===r&&(l=a),(y=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=y}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fg={focusedElem:e,selectionRange:n},Yf=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,C=v.memoizedState,k=t.stateNode,R=k.getSnapshotBeforeUpdate(t.elementType===t.type?x:Mi(t.type,x),C);k.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(b){fn(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return v=G1,G1=!1,v}function $u(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&ny(t,n,o)}i=i.next}while(i!==r)}}function zd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ry(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rC(e){var t=e.alternate;t!==null&&(e.alternate=null,rC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qi],delete t[ic],delete t[Vg],delete t[j3],delete t[$3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iC(e){return e.tag===5||e.tag===3||e.tag===4}function K1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qf));else if(r!==4&&(e=e.child,e!==null))for(iy(e,t,n),e=e.sibling;e!==null;)iy(e,t,n),e=e.sibling}function oy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(oy(e,t,n),e=e.sibling;e!==null;)oy(e,t,n),e=e.sibling}var Yn=null,Ni=!1;function Uo(e,t,n){for(n=n.child;n!==null;)oC(e,t,n),n=n.sibling}function oC(e,t,n){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(Dd,n)}catch{}switch(n.tag){case 5:sr||ul(n,t);case 6:var r=Yn,i=Ni;Yn=null,Uo(e,t,n),Yn=r,Ni=i,Yn!==null&&(Ni?(e=Yn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(Ni?(e=Yn,n=n.stateNode,e.nodeType===8?jm(e.parentNode,n):e.nodeType===1&&jm(e,n),Ju(e)):jm(Yn,n.stateNode));break;case 4:r=Yn,i=Ni,Yn=n.stateNode.containerInfo,Ni=!0,Uo(e,t,n),Yn=r,Ni=i;break;case 0:case 11:case 14:case 15:if(!sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ny(n,t,a),i=i.next}while(i!==r)}Uo(e,t,n);break;case 1:if(!sr&&(ul(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){fn(n,t,s)}Uo(e,t,n);break;case 21:Uo(e,t,n);break;case 22:n.mode&1?(sr=(r=sr)||n.memoizedState!==null,Uo(e,t,n),sr=r):Uo(e,t,n);break;default:Uo(e,t,n)}}function Y1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new t5),t.forEach(function(r){var i=p5.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ai(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Yn=s.stateNode,Ni=!1;break e;case 3:Yn=s.stateNode.containerInfo,Ni=!0;break e;case 4:Yn=s.stateNode.containerInfo,Ni=!0;break e}s=s.return}if(Yn===null)throw Error(ge(160));oC(o,a,i),Yn=null,Ni=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){fn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aC(t,e),t=t.sibling}function aC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ai(t,e),Vi(e),r&4){try{$u(3,e,e.return),zd(3,e)}catch(x){fn(e,e.return,x)}try{$u(5,e,e.return)}catch(x){fn(e,e.return,x)}}break;case 1:Ai(t,e),Vi(e),r&512&&n!==null&&ul(n,n.return);break;case 5:if(Ai(t,e),Vi(e),r&512&&n!==null&&ul(n,n.return),e.flags&32){var i=e.stateNode;try{qu(i,"")}catch(x){fn(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&PS(i,o),Tg(s,a);var c=Tg(s,o);for(a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?DS(i,d):f==="dangerouslySetInnerHTML"?MS(i,d):f==="children"?qu(i,d):Jy(i,f,d,c)}switch(s){case"input":Sg(i,o);break;case"textarea":TS(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?pl(i,!!o.multiple,y,!1):g!==!!o.multiple&&(o.defaultValue!=null?pl(i,!!o.multiple,o.defaultValue,!0):pl(i,!!o.multiple,o.multiple?[]:"",!1))}i[ic]=o}catch(x){fn(e,e.return,x)}}break;case 6:if(Ai(t,e),Vi(e),r&4){if(e.stateNode===null)throw Error(ge(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(x){fn(e,e.return,x)}}break;case 3:if(Ai(t,e),Vi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ju(t.containerInfo)}catch(x){fn(e,e.return,x)}break;case 4:Ai(t,e),Vi(e);break;case 13:Ai(t,e),Vi(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Nv=wn())),r&4&&Y1(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(sr=(c=sr)||f,Ai(t,e),sr=c):Ai(t,e),Vi(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for($e=e,f=e.child;f!==null;){for(d=$e=f;$e!==null;){switch(g=$e,y=g.child,g.tag){case 0:case 11:case 14:case 15:$u(4,g,g.return);break;case 1:ul(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){fn(r,n,x)}}break;case 5:ul(g,g.return);break;case 22:if(g.memoizedState!==null){X1(d);continue}}y!==null?(y.return=g,$e=y):X1(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=NS("display",a))}catch(x){fn(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){fn(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ai(t,e),Vi(e),r&4&&Y1(e);break;case 21:break;default:Ai(t,e),Vi(e)}}function Vi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(iC(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qu(i,""),r.flags&=-33);var o=K1(e);oy(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=K1(e);iy(e,s,a);break;default:throw Error(ge(161))}}catch(l){fn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function r5(e,t,n){$e=e,sC(e)}function sC(e,t,n){for(var r=(e.mode&1)!==0;$e!==null;){var i=$e,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jp;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||sr;s=jp;var c=sr;if(jp=a,(sr=l)&&!c)for($e=i;$e!==null;)a=$e,l=a.child,a.tag===22&&a.memoizedState!==null?Q1(i):l!==null?(l.return=a,$e=l):Q1(i);for(;o!==null;)$e=o,sC(o),o=o.sibling;$e=i,jp=s,sr=c}q1(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$e=o):q1(e)}}function q1(e){for(;$e!==null;){var t=$e;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sr||zd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!sr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Mi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&D1(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}D1(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ju(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}sr||t.flags&512&&ry(t)}catch(g){fn(t,t.return,g)}}if(t===e){$e=null;break}if(n=t.sibling,n!==null){n.return=t.return,$e=n;break}$e=t.return}}function X1(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$e=n;break}$e=t.return}}function Q1(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zd(4,t)}catch(l){fn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){fn(t,i,l)}}var o=t.return;try{ry(t)}catch(l){fn(t,o,l)}break;case 5:var a=t.return;try{ry(t)}catch(l){fn(t,a,l)}}}catch(l){fn(t,t.return,l)}if(t===e){$e=null;break}var s=t.sibling;if(s!==null){s.return=t.return,$e=s;break}$e=t.return}}var i5=Math.ceil,ld=To.ReactCurrentDispatcher,Av=To.ReactCurrentOwner,yi=To.ReactCurrentBatchConfig,Ot=0,Vn=null,Tn=null,Qn=0,Kr=0,cl=wa(0),Bn=0,cc=null,gs=0,Hd=0,Mv=0,Fu=null,Mr=null,Nv=0,bl=1/0,ho=null,ud=!1,ay=null,pa=null,$p=!1,ia=null,cd=0,zu=0,sy=null,Cf=-1,Rf=0;function xr(){return Ot&6?wn():Cf!==-1?Cf:Cf=wn()}function fa(e){return e.mode&1?Ot&2&&Qn!==0?Qn&-Qn:z3.transition!==null?(Rf===0&&(Rf=US()),Rf):(e=$t,e!==0||(e=window.event,e=e===void 0?16:ZS(e.type)),e):1}function Li(e,t,n,r){if(50<zu)throw zu=0,sy=null,Error(ge(185));Ec(e,n,r),(!(Ot&2)||e!==Vn)&&(e===Vn&&(!(Ot&2)&&(Hd|=n),Bn===4&&na(e,Qn)),Br(e,r),n===1&&Ot===0&&!(t.mode&1)&&(bl=wn()+500,jd&&Ea()))}function Br(e,t){var n=e.callbackNode;zM(e,t);var r=Kf(e,e===Vn?Qn:0);if(r===0)n!==null&&a1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&a1(n),t===1)e.tag===0?F3(Z1.bind(null,e)):y2(Z1.bind(null,e)),B3(function(){!(Ot&6)&&Ea()}),n=null;else{switch(GS(r)){case 1:n=iv;break;case 4:n=VS;break;case 16:n=Gf;break;case 536870912:n=WS;break;default:n=Gf}n=mC(n,lC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lC(e,t){if(Cf=-1,Rf=0,Ot&6)throw Error(ge(327));var n=e.callbackNode;if(gl()&&e.callbackNode!==n)return null;var r=Kf(e,e===Vn?Qn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=pd(e,r);else{t=r;var i=Ot;Ot|=2;var o=cC();(Vn!==e||Qn!==t)&&(ho=null,bl=wn()+500,cs(e,t));do try{s5();break}catch(s){uC(e,s)}while(!0);yv(),ld.current=o,Ot=i,Tn!==null?t=0:(Vn=null,Qn=0,t=Bn)}if(t!==0){if(t===2&&(i=Og(e),i!==0&&(r=i,t=ly(e,i))),t===1)throw n=cc,cs(e,0),na(e,r),Br(e,wn()),n;if(t===6)na(e,r);else{if(i=e.current.alternate,!(r&30)&&!o5(i)&&(t=pd(e,r),t===2&&(o=Og(e),o!==0&&(r=o,t=ly(e,o))),t===1))throw n=cc,cs(e,0),na(e,r),Br(e,wn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ge(345));case 2:ts(e,Mr,ho);break;case 3:if(na(e,r),(r&130023424)===r&&(t=Nv+500-wn(),10<t)){if(Kf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){xr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hg(ts.bind(null,e,Mr,ho),t);break}ts(e,Mr,ho);break;case 4:if(na(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Oi(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i5(r/1960))-r,10<r){e.timeoutHandle=Hg(ts.bind(null,e,Mr,ho),r);break}ts(e,Mr,ho);break;case 5:ts(e,Mr,ho);break;default:throw Error(ge(329))}}}return Br(e,wn()),e.callbackNode===n?lC.bind(null,e):null}function ly(e,t){var n=Fu;return e.current.memoizedState.isDehydrated&&(cs(e,t).flags|=256),e=pd(e,t),e!==2&&(t=Mr,Mr=n,t!==null&&uy(t)),e}function uy(e){Mr===null?Mr=e:Mr.push.apply(Mr,e)}function o5(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ji(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function na(e,t){for(t&=~Mv,t&=~Hd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Oi(t),r=1<<n;e[n]=-1,t&=~r}}function Z1(e){if(Ot&6)throw Error(ge(327));gl();var t=Kf(e,0);if(!(t&1))return Br(e,wn()),null;var n=pd(e,t);if(e.tag!==0&&n===2){var r=Og(e);r!==0&&(t=r,n=ly(e,r))}if(n===1)throw n=cc,cs(e,0),na(e,t),Br(e,wn()),n;if(n===6)throw Error(ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ts(e,Mr,ho),Br(e,wn()),null}function Dv(e,t){var n=Ot;Ot|=1;try{return e(t)}finally{Ot=n,Ot===0&&(bl=wn()+500,jd&&Ea())}}function ys(e){ia!==null&&ia.tag===0&&!(Ot&6)&&gl();var t=Ot;Ot|=1;var n=yi.transition,r=$t;try{if(yi.transition=null,$t=1,e)return e()}finally{$t=r,yi.transition=n,Ot=t,!(Ot&6)&&Ea()}}function Ov(){Kr=cl.current,Yt(cl)}function cs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,L3(n)),Tn!==null)for(n=Tn.return;n!==null;){var r=n;switch(hv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zf();break;case 3:wl(),Yt(Or),Yt(cr),bv();break;case 5:Ev(r);break;case 4:wl();break;case 13:Yt(on);break;case 19:Yt(on);break;case 10:vv(r.type._context);break;case 22:case 23:Ov()}n=n.return}if(Vn=e,Tn=e=da(e.current,null),Qn=Kr=t,Bn=0,cc=null,Mv=Hd=gs=0,Mr=Fu=null,as!==null){for(t=0;t<as.length;t++)if(n=as[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}as=null}return e}function uC(e,t){do{var n=Tn;try{if(yv(),Ef.current=sd,ad){for(var r=sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ad=!1}if(ms=0,zn=On=sn=null,ju=!1,sc=0,Av.current=null,n===null||n.return===null){Bn=1,cc=t,Tn=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Qn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=$1(a);if(y!==null){y.flags&=-257,F1(y,a,s,o,t),y.mode&1&&j1(o,c,t),t=y,l=c;var v=t.updateQueue;if(v===null){var x=new Set;x.add(l),t.updateQueue=x}else v.add(l);break e}else{if(!(t&1)){j1(o,c,t),Lv();break e}l=Error(ge(426))}}else if(tn&&s.mode&1){var C=$1(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),F1(C,a,s,o,t),mv(El(l,s));break e}}o=l=El(l,s),Bn!==4&&(Bn=2),Fu===null?Fu=[o]:Fu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var k=G2(o,l,t);N1(o,k);break e;case 1:s=l;var R=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(pa===null||!pa.has(E)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=K2(o,s,t);N1(o,b);break e}}o=o.return}while(o!==null)}fC(n)}catch(D){t=D,Tn===n&&n!==null&&(Tn=n=n.return);continue}break}while(!0)}function cC(){var e=ld.current;return ld.current=sd,e===null?sd:e}function Lv(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Vn===null||!(gs&268435455)&&!(Hd&268435455)||na(Vn,Qn)}function pd(e,t){var n=Ot;Ot|=2;var r=cC();(Vn!==e||Qn!==t)&&(ho=null,cs(e,t));do try{a5();break}catch(i){uC(e,i)}while(!0);if(yv(),Ot=n,ld.current=r,Tn!==null)throw Error(ge(261));return Vn=null,Qn=0,Bn}function a5(){for(;Tn!==null;)pC(Tn)}function s5(){for(;Tn!==null&&!NM();)pC(Tn)}function pC(e){var t=hC(e.alternate,e,Kr);e.memoizedProps=e.pendingProps,t===null?fC(e):Tn=t,Av.current=null}function fC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=e5(n,t),n!==null){n.flags&=32767,Tn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bn=6,Tn=null;return}}else if(n=J3(n,t,Kr),n!==null){Tn=n;return}if(t=t.sibling,t!==null){Tn=t;return}Tn=t=e}while(t!==null);Bn===0&&(Bn=5)}function ts(e,t,n){var r=$t,i=yi.transition;try{yi.transition=null,$t=1,l5(e,t,n,r)}finally{yi.transition=i,$t=r}return null}function l5(e,t,n,r){do gl();while(ia!==null);if(Ot&6)throw Error(ge(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ge(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(HM(e,o),e===Vn&&(Tn=Vn=null,Qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$p||($p=!0,mC(Gf,function(){return gl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=yi.transition,yi.transition=null;var a=$t;$t=1;var s=Ot;Ot|=4,Av.current=null,n5(e,n),aC(n,e),P3(Fg),Yf=!!$g,Fg=$g=null,e.current=n,r5(n),DM(),Ot=s,$t=a,yi.transition=o}else e.current=n;if($p&&($p=!1,ia=e,cd=i),o=e.pendingLanes,o===0&&(pa=null),BM(n.stateNode),Br(e,wn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,e=ay,ay=null,e;return cd&1&&e.tag!==0&&gl(),o=e.pendingLanes,o&1?e===sy?zu++:(zu=0,sy=e):zu=0,Ea(),null}function gl(){if(ia!==null){var e=GS(cd),t=yi.transition,n=$t;try{if(yi.transition=null,$t=16>e?16:e,ia===null)var r=!1;else{if(e=ia,ia=null,cd=0,Ot&6)throw Error(ge(331));var i=Ot;for(Ot|=4,$e=e.current;$e!==null;){var o=$e,a=o.child;if($e.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for($e=c;$e!==null;){var f=$e;switch(f.tag){case 0:case 11:case 15:$u(8,f,o)}var d=f.child;if(d!==null)d.return=f,$e=d;else for(;$e!==null;){f=$e;var g=f.sibling,y=f.return;if(rC(f),f===c){$e=null;break}if(g!==null){g.return=y,$e=g;break}$e=y}}}var v=o.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}$e=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,$e=a;else e:for(;$e!==null;){if(o=$e,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$u(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,$e=k;break e}$e=o.return}}var R=e.current;for($e=R;$e!==null;){a=$e;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,$e=E;else e:for(a=R;$e!==null;){if(s=$e,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:zd(9,s)}}catch(D){fn(s,s.return,D)}if(s===a){$e=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,$e=b;break e}$e=s.return}}if(Ot=i,Ea(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(Dd,e)}catch{}r=!0}return r}finally{$t=n,yi.transition=t}}return!1}function J1(e,t,n){t=El(n,t),t=G2(e,t,1),e=ca(e,t,1),t=xr(),e!==null&&(Ec(e,1,t),Br(e,t))}function fn(e,t,n){if(e.tag===3)J1(e,e,n);else for(;t!==null;){if(t.tag===3){J1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pa===null||!pa.has(r))){e=El(n,e),e=K2(t,e,1),t=ca(t,e,1),e=xr(),t!==null&&(Ec(t,1,e),Br(t,e));break}}t=t.return}}function u5(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xr(),e.pingedLanes|=e.suspendedLanes&n,Vn===e&&(Qn&n)===n&&(Bn===4||Bn===3&&(Qn&130023424)===Qn&&500>wn()-Nv?cs(e,0):Mv|=n),Br(e,t)}function dC(e,t){t===0&&(e.mode&1?(t=Tp,Tp<<=1,!(Tp&130023424)&&(Tp=4194304)):t=1);var n=xr();e=ko(e,t),e!==null&&(Ec(e,t,n),Br(e,n))}function c5(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dC(e,n)}function p5(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(t),dC(e,n)}var hC;hC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Or.current)Nr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nr=!1,Z3(e,t,n);Nr=!!(e.flags&131072)}else Nr=!1,tn&&t.flags&1048576&&v2(t,td,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sf(e,t),e=t.pendingProps;var i=vl(t,cr.current);ml(t,n),i=Cv(null,t,r,e,i,n);var o=Rv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(r)?(o=!0,Jf(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_v(t),i.updater=Fd,t.stateNode=i,i._reactInternals=t,qg(t,r,e,n),t=Zg(null,t,r,!0,o,n)):(t.tag=0,tn&&o&&dv(t),yr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=d5(r),e=Mi(r,e),i){case 0:t=Qg(null,t,r,e,n);break e;case 1:t=V1(null,t,r,e,n);break e;case 11:t=z1(null,t,r,e,n);break e;case 14:t=H1(null,t,r,Mi(r.type,e),n);break e}throw Error(ge(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),Qg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),V1(e,t,r,i,n);case 3:e:{if(Q2(t),e===null)throw Error(ge(387));r=t.pendingProps,o=t.memoizedState,i=o.element,S2(e,t),id(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=El(Error(ge(423)),t),t=W1(e,t,r,n,i);break e}else if(r!==i){i=El(Error(ge(424)),t),t=W1(e,t,r,n,i);break e}else for(Yr=ua(t.stateNode.containerInfo.firstChild),qr=t,tn=!0,Di=null,n=E2(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xl(),r===i){t=Po(e,t,n);break e}yr(e,t,r,n)}t=t.child}return t;case 5:return C2(t),e===null&&Gg(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,zg(r,i)?a=null:o!==null&&zg(r,o)&&(t.flags|=32),X2(e,t),yr(e,t,a,n),t.child;case 6:return e===null&&Gg(t),null;case 13:return Z2(e,t,n);case 4:return wv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_l(t,null,r,n):yr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),z1(e,t,r,i,n);case 7:return yr(e,t,t.pendingProps,n),t.child;case 8:return yr(e,t,t.pendingProps.children,n),t.child;case 12:return yr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Vt(nd,r._currentValue),r._currentValue=a,o!==null)if(ji(o.value,a)){if(o.children===i.children&&!Or.current){t=Po(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=wo(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Kg(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ge(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Kg(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}yr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ml(t,n),i=vi(i),r=r(i),t.flags|=1,yr(e,t,r,n),t.child;case 14:return r=t.type,i=Mi(r,t.pendingProps),i=Mi(r.type,i),H1(e,t,r,i,n);case 15:return Y2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mi(r,i),Sf(e,t),t.tag=1,Lr(r)?(e=!0,Jf(t)):e=!1,ml(t,n),U2(t,r,i),qg(t,r,i,n),Zg(null,t,r,!0,e,n);case 19:return J2(e,t,n);case 22:return q2(e,t,n)}throw Error(ge(156,t.tag))};function mC(e,t){return HS(e,t)}function f5(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,t,n,r){return new f5(e,t,n,r)}function Bv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function d5(e){if(typeof e=="function")return Bv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tv)return 11;if(e===nv)return 14}return 2}function da(e,t){var n=e.alternate;return n===null?(n=mi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kf(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Bv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case el:return ps(n.children,i,o,t);case ev:a=8,i|=8;break;case xg:return e=mi(12,n,t,i|2),e.elementType=xg,e.lanes=o,e;case _g:return e=mi(13,n,t,i),e.elementType=_g,e.lanes=o,e;case wg:return e=mi(19,n,t,i),e.elementType=wg,e.lanes=o,e;case CS:return Vd(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bS:a=10;break e;case SS:a=9;break e;case tv:a=11;break e;case nv:a=14;break e;case Zo:a=16,r=null;break e}throw Error(ge(130,e==null?e:typeof e,""))}return t=mi(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ps(e,t,n,r){return e=mi(7,e,r,t),e.lanes=n,e}function Vd(e,t,n,r){return e=mi(22,e,r,t),e.elementType=CS,e.lanes=n,e.stateNode={isHidden:!1},e}function Gm(e,t,n){return e=mi(6,e,null,t),e.lanes=n,e}function Km(e,t,n){return t=mi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function h5(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=km(0),this.expirationTimes=km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=km(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Iv(e,t,n,r,i,o,a,s,l){return e=new h5(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=mi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(o),e}function m5(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gC(e){if(!e)return ga;e=e._reactInternals;e:{if(bs(e)!==e||e.tag!==1)throw Error(ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ge(171))}if(e.tag===1){var n=e.type;if(Lr(n))return g2(e,n,t)}return t}function yC(e,t,n,r,i,o,a,s,l){return e=Iv(n,r,!0,e,i,o,a,s,l),e.context=gC(null),n=e.current,r=xr(),i=fa(n),o=wo(r,i),o.callback=t??null,ca(n,o,i),e.current.lanes=i,Ec(e,i,r),Br(e,r),e}function Wd(e,t,n,r){var i=t.current,o=xr(),a=fa(i);return n=gC(n),t.context===null?t.context=n:t.pendingContext=n,t=wo(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ca(i,t,a),e!==null&&(Li(e,i,a,o),wf(e,i,a)),a}function fd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ew(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jv(e,t){ew(e,t),(e=e.alternate)&&ew(e,t)}function g5(){return null}var vC=typeof reportError=="function"?reportError:function(e){console.error(e)};function $v(e){this._internalRoot=e}Ud.prototype.render=$v.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ge(409));Wd(e,t,null,null)};Ud.prototype.unmount=$v.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ys(function(){Wd(null,e,null,null)}),t[Ro]=null}};function Ud(e){this._internalRoot=e}Ud.prototype.unstable_scheduleHydration=function(e){if(e){var t=qS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ta.length&&t!==0&&t<ta[n].priority;n++);ta.splice(n,0,e),n===0&&QS(e)}};function Fv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tw(){}function y5(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=fd(a);o.call(c)}}var a=yC(t,r,e,0,null,!1,!1,"",tw);return e._reactRootContainer=a,e[Ro]=a.current,nc(e.nodeType===8?e.parentNode:e),ys(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=fd(l);s.call(c)}}var l=Iv(e,0,!1,null,null,!1,!1,"",tw);return e._reactRootContainer=l,e[Ro]=l.current,nc(e.nodeType===8?e.parentNode:e),ys(function(){Wd(t,l,n,r)}),l}function Kd(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=fd(a);s.call(l)}}Wd(t,a,e,i)}else a=y5(n,t,e,i,r);return fd(a)}KS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Au(t.pendingLanes);n!==0&&(ov(t,n|1),Br(t,wn()),!(Ot&6)&&(bl=wn()+500,Ea()))}break;case 13:ys(function(){var r=ko(e,1);if(r!==null){var i=xr();Li(r,e,1,i)}}),jv(e,1)}};av=function(e){if(e.tag===13){var t=ko(e,134217728);if(t!==null){var n=xr();Li(t,e,134217728,n)}jv(e,134217728)}};YS=function(e){if(e.tag===13){var t=fa(e),n=ko(e,t);if(n!==null){var r=xr();Li(n,e,t,r)}jv(e,t)}};qS=function(){return $t};XS=function(e,t){var n=$t;try{return $t=e,t()}finally{$t=n}};Mg=function(e,t,n){switch(t){case"input":if(Sg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Id(r);if(!i)throw Error(ge(90));kS(r),Sg(r,i)}}}break;case"textarea":TS(e,n);break;case"select":t=n.value,t!=null&&pl(e,!!n.multiple,t,!1)}};BS=Dv;IS=ys;var v5={usingClientEntryPoint:!1,Events:[Sc,il,Id,OS,LS,Dv]},mu={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x5={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:To.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=FS(e),e===null?null:e.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||g5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fp.isDisabled&&Fp.supportsFiber)try{Dd=Fp.inject(x5),Qi=Fp}catch{}}Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v5;Jr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(t))throw Error(ge(200));return m5(e,t,null,n)};Jr.createRoot=function(e,t){if(!Fv(e))throw Error(ge(299));var n=!1,r="",i=vC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Iv(e,1,!1,null,null,n,!1,r,i),e[Ro]=t.current,nc(e.nodeType===8?e.parentNode:e),new $v(t)};Jr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ge(188)):(e=Object.keys(e).join(","),Error(ge(268,e)));return e=FS(t),e=e===null?null:e.stateNode,e};Jr.flushSync=function(e){return ys(e)};Jr.hydrate=function(e,t,n){if(!Gd(t))throw Error(ge(200));return Kd(null,e,t,!0,n)};Jr.hydrateRoot=function(e,t,n){if(!Fv(e))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=vC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=yC(t,null,e,1,n??null,i,!1,o,a),e[Ro]=t.current,nc(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ud(t)};Jr.render=function(e,t,n){if(!Gd(t))throw Error(ge(200));return Kd(null,e,t,!1,n)};Jr.unmountComponentAtNode=function(e){if(!Gd(e))throw Error(ge(40));return e._reactRootContainer?(ys(function(){Kd(null,null,e,!1,function(){e._reactRootContainer=null,e[Ro]=null})}),!0):!1};Jr.unstable_batchedUpdates=Dv;Jr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gd(n))throw Error(ge(200));if(e==null||e._reactInternals===void 0)throw Error(ge(38));return Kd(e,t,n,!1,r)};Jr.version="18.3.1-next-f1338f8080-20240426";function xC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xC)}catch(e){console.error(e)}}xC(),xS.exports=Jr;var _5=xS.exports,nw=_5;yg.createRoot=nw.createRoot,yg.hydrateRoot=nw.hydrateRoot;const Kt="api",w5=e=>{const t=setInterval(()=>{const n=e.querySelector(".djs-palette");if(n&&(clearInterval(t),!n.querySelector(".palette-handle"))){const r=document.createElement("div");r.className="palette-handle",n.prepend(r);let i=!1,o,a,s,l;r.addEventListener("mousedown",d=>{i=!0,o=d.clientX,a=d.clientY;const g=n.getBoundingClientRect();s=g.left,l=g.top,d.preventDefault()});const c=d=>{if(!i)return;const g=d.clientX-o,y=d.clientY-a;n.style.left=`${s+g}px`,n.style.top=`${l+y}px`,n.style.right="auto",n.style.bottom="auto"},f=()=>{i=!1};document.addEventListener("mousemove",c),document.addEventListener("mouseup",f)}},500)},zp=()=>{const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return`${t}/${n}/${r} ${i}:${o}:${a}`},E5=e=>{if(!e)return"";const t=e.split(" ");if(t.length===2){const n=t[0].split("/");if(n.length===3)return`${n[1]}/${n[2]} ${t[1]}`}return e},b5=(e,t=.2)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),o=Math.round(n+(255-n)*(1-t)),a=Math.round(r+(255-r)*(1-t)),s=Math.round(i+(255-i)*(1-t)),l=c=>{const f=c.toString(16);return f.length===1?"0"+f:f};return`#${l(o)}${l(a)}${l(s)}`},S5=({onNavigate:e})=>{const[t,n]=De.useState([]),[r,i]=De.useState("Checking..."),[o,a]=De.useState(null),[s,l]=De.useState("");De.useEffect(()=>{fetch(`${Kt}/processes`).then(x=>x.json()).then(x=>n(x)),c()},[]);const c=()=>{fetch(`${Kt}/pi_status`).then(x=>x.json()).then(x=>i(x.status))},f=x=>{a(x.id),l(x.name)},d=async x=>{if(!s.trim())return;await fetch(`${Kt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:x,name:s})}),a(null);const C=await fetch(`${Kt}/processes`);n(await C.json())},g=x=>{confirm("")&&fetch(`${Kt}/processes/${x}`,{method:"DELETE"}).then(()=>n(t.filter(C=>C.id!==x)))},y=x=>{const C=new Blob([x.xml_content],{type:"text/xml"}),k=URL.createObjectURL(C),R=document.createElement("a");R.href=k,R.download=`${x.name||"process"}.bpmn`,document.body.appendChild(R),R.click(),document.body.removeChild(R)},v=x=>{const C=x.target.files[0];if(!C)return;const k=new FileReader;k.onload=async R=>{const E=R.target.result;if(!E.includes("bpmndi:BPMNDiagram")){alert(" BPMN  (BPMNDiagram)");return}const b=C.name.replace(".bpmn","").replace(".xml","");await fetch(`${Kt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,xml_content:E})});const D=await fetch(`${Kt}/processes`);n(await D.json())},k.readAsText(C)};return H.jsxs("div",{className:"p-8 max-w-7xl mx-auto h-full overflow-y-auto",children:[H.jsxs("div",{className:"flex justify-between items-center mb-10 sticky top-0 bg-[#121212] z-10 py-4 border-b border-white/5",children:[H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-300 font-bold text-xl",children:"S"}),H.jsx("h1",{className:"text-2xl font-medium tracking-wide text-white/90",children:""})]}),H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsxs("button",{onClick:()=>e("editor"),className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-medium shadow-sm transition flex items-center gap-2",children:[H.jsx("span",{className:"text-xl leading-none",children:"+"}),H.jsx("span",{children:""})]}),H.jsxs("label",{className:"cursor-pointer bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-5 py-2 rounded-full text-sm transition flex items-center gap-2",children:[H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),H.jsx("span",{children:" BPMN "}),H.jsx("input",{type:"file",accept:".bpmn,.xml",className:"hidden",onChange:v})]}),H.jsxs("div",{className:"flex items-center gap-2 bg-[#1e1e1e] px-4 py-2 rounded-full border border-white/5",children:[H.jsx("div",{className:`w-2 h-2 rounded-full ${r==="Connected"?"bg-[#81c995] animate-pulse":r==="Not Configured"?"bg-gray-400":"bg-[#f28b82]"}`}),H.jsx("span",{className:"text-sm text-white/70",children:r==="Connected"?"PI Server ":r==="Not Configured"?" PI Server":"PI Server "})]})]})]}),H.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[t.map(x=>{const C=x.session_status===0;return H.jsxs("div",{className:`bg-[#1e1e1e] p-6 rounded-2xl border transition-all duration-200 flex flex-col group ${C?"border-[#81c995]/50 shadow-[0_4px_20px_rgba(129,201,149,0.1)]":"border-white/5 hover:border-white/20 hover:shadow-lg"}`,children:[H.jsxs("div",{className:"flex-1 mb-6",children:[H.jsxs("div",{className:"flex justify-between items-start mb-3 h-8",children:[o===x.id?H.jsxs("div",{className:"flex items-center gap-1 w-full",children:[H.jsx("input",{type:"text",value:s,onChange:k=>l(k.target.value),className:"bg-[#2d2d2d] text-white px-2 py-1 rounded border border-white/10 focus:border-[#8ab4f8] outline-none text-sm w-full",autoFocus:!0,onKeyDown:k=>{k.key==="Enter"?d(x.id):k.key==="Escape"&&a(null)}}),H.jsx("button",{onClick:()=>d(x.id),className:"text-[#81c995] hover:text-green-400 px-1",children:""}),H.jsx("button",{onClick:()=>a(null),className:"text-[#f28b82] hover:text-red-400 px-1",children:""})]}):H.jsxs("div",{className:"flex items-center gap-2 group/title w-full",children:[H.jsx("h3",{className:"text-lg font-medium text-white/90 group-hover:text-[#8ab4f8] transition-colors truncate",title:x.name,children:x.name}),H.jsx("button",{onClick:k=>{k.stopPropagation(),f(x)},className:"opacity-0 group-hover/title:opacity-100 text-white/40 hover:text-[#8ab4f8] transition",title:"",children:""})]}),C&&H.jsx("span",{className:"bg-[#81c995]/20 text-[#81c995] text-xs px-3 py-1 rounded-full font-medium ml-2 whitespace-nowrap",children:""})]}),H.jsxs("p",{className:"text-white/40 text-xs",children:[": ",x.updated_at]})]}),H.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[H.jsx("button",{onClick:()=>e("operator",x.id),className:`col-span-2 py-2.5 rounded-full text-sm font-medium transition ${C?"bg-[#81c995] text-[#0f5132] hover:bg-[#a8dab5]":"bg-[#8ab4f8] text-[#002d6f] hover:bg-[#aecbfa]"}`,children:C?"":""}),H.jsx("button",{onClick:()=>!C&&e("editor",x.id),disabled:C,className:`py-2 rounded-full text-sm transition ${C?"bg-[#2d2d2d] text-white/20 cursor-not-allowed":"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80"}`,children:""}),H.jsx("button",{onClick:()=>e("review",x.id),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-2 rounded-full text-sm transition",children:""})]}),H.jsxs("div",{className:"flex gap-2 pt-3 border-t border-white/5",children:[H.jsx("button",{onClick:()=>y(x),className:"flex-1 text-xs text-white/40 hover:text-[#8ab4f8] py-1 transition",children:" BPMN"}),H.jsx("button",{onClick:()=>g(x.id),className:"flex-1 text-xs text-white/40 hover:text-[#f28b82] py-1 transition",children:""})]})]},x.id)}),t.length===0&&H.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-white/30 border-2 border-dashed border-white/10 rounded-3xl",children:[H.jsx("div",{className:"text-6xl mb-4",children:""}),H.jsx("p",{children:" SOP "})]})]})]})};function Oe(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function C5(e,t){return t={exports:{}},e(t,t.exports),t.exports}var R5=C5(function(e){var t=e.exports=function(n,r){if(r||(r=16),n===void 0&&(n=128),n<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),o=2;i===1/0;o*=2)i=Math.log(Math.pow(2,n/o))/Math.log(r)*o;for(var a=i-Math.floor(i),s="",o=0;o<Math.floor(i);o++){var l=Math.floor(Math.random()*r).toString(r);s=l+s}if(a){var c=Math.pow(r,a),l=Math.floor(Math.random()*c).toString(r);s=l+s}var f=parseInt(s,r);return f!==1/0&&f>=Math.pow(2,n)?t(n,r):s};t.rack=function(n,r,i){var o=function(s){var l=0;do{if(l++>10)if(i)n+=i;else throw new Error("too many ID collisions, use more bits");var c=t(n,r)}while(Object.hasOwnProperty.call(a,c));return a[c]=s,c},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,l){return o.hats[s]=l,o},o.bits=n||128,o.base=r||16,o}});function eo(e){if(!(this instanceof eo))return new eo(e);e=e||[128,36,1],this._seed=e.length?R5.rack(e[0],e[1],e[2]):e}eo.prototype.next=function(e){return this._seed(e||!0)};eo.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};eo.prototype.claim=function(e,t){this._seed.set(e,t||!0)};eo.prototype.assigned=function(e){return this._seed.get(e)||!1};eo.prototype.unclaim=function(e){delete this._seed.hats[e]};eo.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function zv(e){return Array.prototype.concat.apply([],e)}const Rc=Object.prototype.toString,k5=Object.prototype.hasOwnProperty;function vs(e){return e===void 0}function Ln(e){return e!==void 0}function pc(e){return e==null}function ot(e){return Rc.call(e)==="[object Array]"}function In(e){return Rc.call(e)==="[object Object]"}function Ze(e){return Rc.call(e)==="[object Number]"}function bn(e){const t=Rc.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Ir(e){return Rc.call(e)==="[object String]"}function P5(e){if(!ot(e))throw new Error("must supply array")}function vr(e,t){return!pc(e)&&k5.call(e,t)}function At(e,t){const n=Yd(t);let r;return W(e,function(i,o){if(n(i,o))return r=i,!1}),r}function _C(e,t){const n=Yd(t);let r=ot(e)?-1:void 0;return W(e,function(i,o){if(n(i,o))return r=o,!1}),r}function ht(e,t){const n=Yd(t);let r=[];return W(e,function(i,o){n(i,o)&&r.push(i)}),r}function W(e,t){let n,r;if(vs(e))return;const i=ot(e)?D5:N5;for(let o in e)if(vr(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function T5(e,t){if(vs(e))return[];P5(e);const n=Yd(t);return e.filter(function(r,i){return!n(r,i)})}function jr(e,t,n){return W(e,function(r,i){n=t(n,r,i)}),n}function Ss(e,t){return!!jr(e,function(n,r,i){return n&&t(r,i)},!0)}function ba(e,t){return!!At(e,t)}function Zn(e,t){let n=[];return W(e,function(r,i){n.push(t(r,i))}),n}function dd(e){return e&&Object.keys(e)||[]}function A5(e){return dd(e).length}function Hv(e){return Zn(e,t=>t)}function jl(e,t,n={}){return t=Vv(t),W(e,function(r){let i=t(r)||"_",o=n[i];o||(o=n[i]=[]),o.push(r)}),n}function wC(e,...t){e=Vv(e);let n={};return W(t,i=>jl(i,e,n)),Zn(n,function(i,o){return i[0]})}const M5=wC;function to(e,t){t=Vv(t);let n=[];return W(e,function(r,i){let o=t(r,i),a={d:o,v:r};for(var s=0;s<n.length;s++){let{d:l}=n[s];if(o<l){n.splice(s,0,a);return}}n.push(a)}),Zn(n,r=>r.v)}function Bi(e){return function(t){return Ss(e,function(n,r){return t[r]===n})}}function Vv(e){return bn(e)?e:t=>t[e]}function Yd(e){return bn(e)?e:t=>t===e}function N5(e){return e}function D5(e){return Number(e)}function EC(e,t){let n,r,i,o;function a(d){let g=Date.now(),y=d?0:o+t-g;if(y>0)return s(y);e.apply(i,r),l()}function s(d){n=setTimeout(a,d)}function l(){n&&clearTimeout(n),n=o=r=i=void 0}function c(){n&&a(!0),l()}function f(...d){o=Date.now(),r=d,i=this,n||s(t)}return f.flush=c,f.cancel=l,f}function _r(e,t){return e.bind(t)}function q(e,...t){return Object.assign(e,...t)}function O5(e,t,n){let r=e;return W(t,function(i,o){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=r[i];Ln(a)&&pc(s)&&(s=r[i]=isNaN(+a)?{}:[]),vs(a)?vs(n)?delete r[i]:r[i]=n:r=s}),e}function $i(e,t){let n={},r=Object(e);return W(t,function(i){i in r&&(n[i]=e[i])}),n}function _i(e,t){let n={},r=Object(e);return W(r,function(i,o){t.indexOf(o)===-1&&(n[o]=i)}),n}function L5(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}const B5=Object.prototype.toString,I5=Object.prototype.hasOwnProperty;function j5(e){return e===void 0}function $5(e){return B5.call(e)==="[object Array]"}function F5(e,t){return I5.call(e,t)}function rw(e,t){let n,r;if(j5(e))return;const i=$5(e)?H5:z5;for(let o in e)if(F5(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function z5(e){return e}function H5(e){return Number(e)}function Xn(e,...t){const n=e.style;return rw(t,function(r){r&&rw(r,function(i,o){n[o]=i})}),e}function lr(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const V5=Object.prototype.toString;function nn(e){return new ya(e)}function ya(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}ya.prototype.add=function(e){return this.list.add(e),this};ya.prototype.remove=function(e){return V5.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};ya.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};ya.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};ya.prototype.array=function(){return Array.from(this.list)};ya.prototype.has=ya.prototype.contains=function(e){return this.list.contains(e)};function qd(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Sa(e,t,n){var r=n?e:e.parentNode;return r&&typeof r.closest=="function"&&r.closest(t)||null}var hd={},md,cy,Wv;function bC(){md=window.addEventListener?"addEventListener":"attachEvent",cy=window.removeEventListener?"removeEventListener":"detachEvent",Wv=md!=="addEventListener"?"on":""}var W5=hd.bind=function(e,t,n,r){return md||bC(),e[md](Wv+t,n,r||!1),n},U5=hd.unbind=function(e,t,n,r){return cy||bC(),e[cy](Wv+t,n,r||!1),n},it=L5({__proto__:null,bind:W5,unbind:U5,default:hd},[hd]),SC=["focus","blur"];function G5(e,t,n,r,i){return SC.indexOf(n)!==-1&&(i=!0),it.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Sa(a,t,!0),o.delegateTarget&&r.call(e,o)},i)}function K5(e,t,n,r){return SC.indexOf(t)!==-1&&(r=!0),it.unbind(e,t,n,r)}var Dr={bind:G5,unbind:K5},Y5=q5,CC=!1,Hp;typeof document<"u"&&(Hp=document.createElement("div"),Hp.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',CC=!Hp.getElementsByTagName("link").length,Hp=void 0);var _n={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:CC?[1,"X<div>","</div>"]:[0,"",""]};_n.td=_n.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];_n.option=_n.optgroup=[1,'<select multiple="multiple">',"</select>"];_n.thead=_n.tbody=_n.colgroup=_n.caption=_n.tfoot=[1,"<table>","</table>"];_n.polyline=_n.ellipse=_n.polygon=_n.circle=_n.text=_n.line=_n.path=_n.rect=_n.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function q5(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if(r=="body"){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var i=Object.prototype.hasOwnProperty.call(_n,r)?_n[r]:_n._default,o=i[0],a=i[1],s=i[2],l=t.createElement("div");for(l.innerHTML=a+e+s;o--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var c=t.createDocumentFragment();l.firstChild;)c.appendChild(l.removeChild(l.firstChild));return c}var zt=Y5;function Xd(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function Bt(e,t){return t=t||document,t.querySelector(e)}function py(e,t){return t=t||document,t.querySelectorAll(e)}function no(e){e.parentNode&&e.parentNode.removeChild(e)}function X5(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function Q5(e,t){return t.appendChild(X5(e,t))}function tt(e,t){return Q5(t,e),e}var fy=2,RC={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":fy,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":fy,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Z5(e,t){return RC[t]?e.style[t]:e.getAttributeNS(null,t)}function kC(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=RC[r];i?(i===fy&&typeof n=="number"&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function J5(e,t){var n=Object.keys(t),r,i;for(r=0,i;i=n[r];r++)kC(e,i,t[i])}function ke(e,t,n){if(typeof t=="string")if(n!==void 0)kC(e,t,n);else return Z5(e,t);else J5(e,t);return e}const eN=Object.prototype.toString;function St(e){return new va(e)}function va(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}va.prototype.add=function(e){return this.list.add(e),this};va.prototype.remove=function(e){return eN.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};va.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};va.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};va.prototype.array=function(){return Array.from(this.list)};va.prototype.has=va.prototype.contains=function(e){return this.list.contains(e)};function Qd(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function PC(e){return e.cloneNode(!0)}var Uv={svg:"http://www.w3.org/2000/svg"},iw='<svg xmlns="'+Uv.svg+'"';function tN(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Uv.svg)===-1&&(e=iw+e.substring(4)):(e=iw+">"+e+"</svg>",t=!0);var n=nN(e);if(!t)return n;for(var r=document.createDocumentFragment(),i=n.firstChild;i.firstChild;)r.appendChild(i.firstChild);return r}function nN(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Fe(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=tN(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Uv.svg,e),t&&ke(n,t),n}var Ym=null;function TC(){return Ym===null&&(Ym=Fe("svg")),Ym}function ow(e,t){var n,r,i=Object.keys(t);for(n=0;r=i[n];n++)e[r]=t[r];return e}function rN(e,t,n,r,i,o){var a=TC().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return ow(a,e);case 6:return ow(a,{a:e,b:t,c:n,d:r,e:i,f:o})}}function Hu(e){return TC().createSVGTransform()}var aw=/([&<>]{1})/g,iN=/([&<>\n\r"]{1})/g,oN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function qm(e,t){function n(r,i){return oN[i]||i}return e.replace(t,n)}function AC(e,t){var n,r,i,o,a;switch(e.nodeType){case 3:t.push(qm(e.textContent,aw));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(i=e.attributes,n=0,r=i.length;n<r;++n)o=i.item(n),t.push(" ",o.name,'="',qm(o.value,iN),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,r=a.length;n<r;++n)AC(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",qm(e.nodeValue,aw),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function aN(e){for(var t=e.firstChild,n=[];t;)AC(t,n),t=t.nextSibling;return n.join("")}function sw(e,t){return aN(e)}function En(e){var t=e.parentNode;return t&&t.removeChild(e),e}function sN(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function lN(e,t){var n,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem(sN(e,r))}function fc(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),lN(n,t)),n.consolidate()}const uN=/^class[ {]/;function cN(e){return uN.test(e.toString())}function Gv(e){return Array.isArray(e)}function Xm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pf(...e){e.length===1&&Gv(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const pN=/constructor\s*[^(]*\(\s*([^)]*)\)/m,fN=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,dN=/\/\*([^*]*)\*\//m;function hN(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(cN(e)?pN:fN);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(r=>{const i=r.match(dN);return(i&&i[1]||r).trim()})||[]}function MC(e,t){const n=t||{get:function(E,b){if(r.push(E),b===!1)return null;throw s(`No provider for "${E}"!`)}},r=[],i=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(E){const b=r.join(" -> ");return r.length=0,new Error(b?`${E} (Resolving: ${b})`:E)};function l(E,b){if(!i[E]&&E.includes(".")){const D=E.split(".");let I=l(D.shift());for(;D.length;)I=I[D.shift()];return I}if(Xm(o,E))return o[E];if(Xm(i,E)){if(r.indexOf(E)!==-1)throw r.push(E),s("Cannot resolve circular dependency!");return r.push(E),o[E]=i[E][0](i[E][1]),r.pop(),o[E]}return n.get(E,b)}function c(E,b){if(typeof b>"u"&&(b={}),typeof E!="function")if(Gv(E))E=Pf(E.slice());else throw s(`Cannot invoke "${E}". Expected a function!`);const I=(E.$inject||hN(E)).map(z=>Xm(b,z)?b[z]:l(z));return{fn:E,dependencies:I}}function f(E){const{fn:b,dependencies:D}=c(E),I=Function.prototype.bind.call(b,null,...D);return new I}function d(E,b,D){const{fn:I,dependencies:z}=c(E,D);return I.apply(b,z)}function g(E){return Pf(b=>E.get(b))}function y(E,b){if(b&&b.length){const D=Object.create(null),I=Object.create(null),z=[],L=[],Q=[];let Y,G,ae,oe;for(let Ce in i)Y=i[Ce],b.indexOf(Ce)!==-1&&(Y[2]==="private"?(G=z.indexOf(Y[3]),G===-1?(ae=Y[3].createChild([],b),oe=g(ae),z.push(Y[3]),L.push(ae),Q.push(oe),D[Ce]=[oe,Ce,"private",ae]):D[Ce]=[Q[G],Ce,"private",L[G]]):D[Ce]=[Y[2],Y[1]],I[Ce]=!0),(Y[2]==="factory"||Y[2]==="type")&&Y[1].$scope&&b.forEach(kt=>{Y[1].$scope.indexOf(kt)!==-1&&(D[Ce]=[Y[2],Y[1]],I[kt]=!0)});b.forEach(Ce=>{if(!I[Ce])throw new Error('No provider for "'+Ce+'". Cannot use provider from the parent!')}),E.unshift(D)}return new MC(E,a)}const v={factory:d,type:f,value:function(E){return E}};function x(E,b){const D=E.__init__||[];return function(){D.forEach(I=>{typeof I=="string"?b.get(I):b.invoke(I)})}}function C(E){const b=E.__exports__;if(b){const D=E.__modules__,I=Object.keys(E).reduce((G,ae)=>(ae!=="__exports__"&&ae!=="__modules__"&&ae!=="__init__"&&ae!=="__depends__"&&(G[ae]=E[ae]),G),Object.create(null)),z=(D||[]).concat(I),L=y(z),Q=Pf(function(G){return L.get(G)});b.forEach(function(G){i[G]=[Q,G,"private",L]});const Y=(E.__init__||[]).slice();return Y.unshift(function(){L.init()}),E=Object.assign({},E,{__init__:Y}),x(E,L)}return Object.keys(E).forEach(function(D){if(D==="__init__"||D==="__depends__")return;const I=E[D];if(I[2]==="private"){i[D]=I;return}const z=I[0],L=I[1];i[D]=[v[z],mN(z,L),z]}),x(E,a)}function k(E,b){return E.indexOf(b)!==-1||(E=(b.__depends__||[]).reduce(k,E),E.indexOf(b)!==-1)?E:E.concat(b)}function R(E){const b=E.reduce(k,[]).map(C);let D=!1;return function(){D||(D=!0,b.forEach(I=>I()))}}this.get=l,this.invoke=d,this.instantiate=f,this.createChild=y,this.init=R(e)}function mN(e,t){return e!=="value"&&Gv(t)&&(t=Pf(t.slice())),t}var gN=1e3;function Ao(e,t){var n=this;t=t||gN,e.on(["render.shape","render.connection"],t,function(r,i){var o=r.type,a=i.element,s=i.gfx,l=i.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(s,a,l):n.drawConnection(s,a,l)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(r,i){if(n.canRender(i))return r.type==="render.getShapePath"?n.getShapePath(i):n.getConnectionPath(i)})}Ao.prototype.canRender=function(e){};Ao.prototype.drawShape=function(e,t){};Ao.prototype.drawConnection=function(e,t){};Ao.prototype.getShapePath=function(e){};Ao.prototype.getConnectionPath=function(e){};function Cs(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function yN(e){return["M",e.x,e.y]}function Qm(e){return["L",e.x,e.y]}function vN(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function xN(e,t){const n=e.length,r=[yN(e[0])];for(let i=1;i<n;i++){const o=e[i-1],a=e[i],s=e[i+1];if(!s||!t){r.push(Qm(a));continue}const l=Math.min(t,dy(a.x-o.x,a.y-o.y),dy(s.x-a.x,s.y-a.y));if(!l){r.push(Qm(a));continue}const c=Vp(a,o,l),f=Vp(a,o,l*.5),d=Vp(a,s,l),g=Vp(a,s,l*.5);r.push(Qm(c)),r.push(vN(f,g,d))}return r}function Vp(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=dy(r,i),a=n/o;return{x:e.x+r*a,y:e.y+i*a}}function dy(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Zd(e,t,n){Ze(t)&&(n=t,t=null),t||(t={});const r=Fe("path",t);return Ze(n)&&(r.dataset.cornerRadius=String(n)),NC(r,e)}function NC(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return ke(e,{d:Cs(xN(t,n))}),e}function Jd(e){return ht(e,function(t){return!At(e,function(n){return n!==t&&DC(t,n)})})}function DC(e,t){if(t){if(e===t)return t;if(e.parent)return DC(e.parent,t)}}function lw(e,t,n){var r=!n||e.indexOf(t)===-1;return r&&e.push(t),r}function Rs(e,t,n){n=n||0,ot(e)||(e=[e]),W(e,function(r,i){var o=t(r,i,n);ot(o)&&o.length&&Rs(o,t,n+1)})}function _N(e,t,n){var r=[],i=[];return Rs(e,function(o,a,s){lw(r,o,t);var l=o.children;if(l&&lw(i,l,t))return l}),r}function kc(e,t){return _N(e,!t)}function wN(e,t,n){vs(t)&&(t=!0),In(t)&&(n=t,t=!0),n=n||{};var r=gu(n.allShapes),i=gu(n.allConnections),o=gu(n.enclosedElements),a=gu(n.enclosedConnections),s=gu(n.topLevel,t&&jl(e,function(f){return f.id}));function l(f){s[f.source.id]&&s[f.target.id]&&(s[f.id]=[f]),r[f.source.id]&&r[f.target.id]&&(a[f.id]=o[f.id]=f),i[f.id]=f}function c(f){if(o[f.id]=f,f.waypoints)a[f.id]=i[f.id]=f;else return r[f.id]=f,W(f.incoming,l),W(f.outgoing,l),f.children}return Rs(e,c),{allShapes:r,allConnections:i,topLevel:s,enclosedConnections:a,enclosedElements:o}}function An(e,t){t=!!t,ot(e)||(e=[e]);var n,r,i,o;return W(e,function(a){var s=a;a.waypoints&&!t&&(s=An(a.waypoints,!0));var l=s.x,c=s.y,f=s.height||0,d=s.width||0;(l<n||n===void 0)&&(n=l),(c<r||r===void 0)&&(r=c),(l+d>i||i===void 0)&&(i=l+d),(c+f>o||o===void 0)&&(o=c+f)}),{x:n,y:r,height:o-r,width:i-n}}function EN(e,t){var n={};return W(e,function(r){var i=r;i.waypoints&&(i=An(i)),!Ze(t.y)&&i.x>t.x&&(n[r.id]=r),!Ze(t.x)&&i.y>t.y&&(n[r.id]=r),i.x>t.x&&i.y>t.y&&(Ze(t.width)&&Ze(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y||!Ze(t.width)||!Ze(t.height))&&(n[r.id]=r)}),n}function OC(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function LC(e){return!!(e&&e.isFrame)}function gu(e,t){return q({},e||{},t||{})}var bN=1;function Ca(e,t){Ao.call(this,e,bN),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Oe(Ca,Ao);Ca.prototype.canRender=function(){return!0};Ca.prototype.drawShape=function(t,n,r){var i=Fe("rect");return ke(i,{x:0,y:0,width:n.width||0,height:n.height||0}),LC(n)?ke(i,q({},this.FRAME_STYLE,r||{})):ke(i,q({},this.SHAPE_STYLE,r||{})),tt(t,i),i};Ca.prototype.drawConnection=function(t,n,r){var i=Zd(n.waypoints,q({},this.CONNECTION_STYLE,r||{}));return tt(t,i),i};Ca.prototype.getShapePath=function(t){var n=t.x,r=t.y,i=t.width,o=t.height,a=[["M",n,r],["l",i,0],["l",0,o],["l",-i,0],["z"]];return Cs(a)};Ca.prototype.getConnectionPath=function(t){var n=t.waypoints,r,i,o=[];for(r=0;i=n[r];r++)i=i.original||i,o.push([r===0?"M":"L",i.x,i.y]);return Cs(o)};Ca.$inject=["eventBus","styles"];function SN(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,r,i){var o=this.style(r,i);return q(o,{class:n})},this.style=function(n,r){!ot(n)&&!r&&(r=n,n=[]);var i=jr(n,function(o,a){return q(o,e[a]||{})},{});return r?q(i,r):i},this.computeStyle=function(n,r,i){return ot(r)||(i=r,r=[]),t.style(r||[],q({},i,n||{}))}}const CN={__init__:["defaultRenderer"],defaultRenderer:["type",Ca],styles:["type",SN]};function mn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Sn(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var r=e.indexOf(t);if(r!==-1){if(r===n)return;if(n!==-1)e.splice(r,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Kv(e,t){return!e||!t?-1:e.indexOf(t)}function Pc(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Yv(e,t,n,r){if(typeof r>"u"&&(r=5),!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Pc(e,t);return Math.abs(i/o)<=r}var RN=2;function xo(e,t){var n=Array.from(arguments).flat();const r={x:"v",y:"h"};for(const[i,o]of Object.entries(r))if(kN(i,n))return o;return!1}function kN(e,t){const n=t[0];return Ss(t,function(r){return Math.abs(n[e]-r[e])<=RN})}function uw(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function hy(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var PN=/,?([a-z]),?/gi,cw=parseFloat,pn=Math,Go=pn.PI,Gi=pn.min,Ki=pn.max,pw=pn.pow,oa=pn.abs,TN=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,AN=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,gd=Array.isArray||function(e){return e instanceof Array};function qv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vu(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)qv(e,n)&&(t[n]=Vu(e[n]));return t}function MN(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function NN(e){function t(){var n=Array.prototype.slice.call(arguments,0),r=n.join(""),i=t.cache=t.cache||{},o=t.count=t.count||[];return qv(i,r)?(MN(o,r),i[r]):(o.length>=1e3&&delete i[o.shift()],o.push(r),i[r]=e(...arguments),i[r])}return t}function DN(e){if(!e)return null;var t=Sl(e);if(t.arr)return Vu(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return gd(e)&&gd(e[0])&&(r=Vu(e)),r.length||String(e).replace(TN,function(i,o,a){var s=[],l=o.toLowerCase();for(a.replace(AN,function(c,f){f&&s.push(+f)}),l=="m"&&s.length>2&&(r.push([o,...s.splice(0,2)]),l="l",o=o=="m"?"l":"L");s.length>=n[l]&&(r.push([o,...s.splice(0,n[l])]),!!n[l]););}),r.toString=Sl.toString,t.arr=Vu(r),r}function Sl(e){var t=Sl.ps=Sl.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)qv(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function my(e,t,n,r){return arguments.length===1&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function BC(){return this.join(",").replace(PN,"$1")}function yd(e){var t=Vu(e);return t.toString=BC,t}function fw(e,t,n,r,i,o,a,s,l){var c=1-l,f=pw(c,3),d=pw(c,2),g=l*l,y=g*l,v=f*e+d*3*l*n+c*3*l*l*i+y*a,x=f*t+d*3*l*r+c*3*l*l*o+y*s;return{x:vd(v),y:vd(x)}}function dw(e){var t=jN(...e);return my(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Ko(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function ON(e,t){return e=my(e),t=my(t),Ko(t,e.x,e.y)||Ko(t,e.x2,e.y)||Ko(t,e.x,e.y2)||Ko(t,e.x2,e.y2)||Ko(e,t.x,t.y)||Ko(e,t.x2,t.y)||Ko(e,t.x,t.y2)||Ko(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function hw(e,t,n,r,i){var o=-3*t+9*n-9*r+3*i,a=e*o+6*t-12*n+6*r;return e*a-3*t+3*n}function mw(e,t,n,r,i,o,a,s,l){l==null&&(l=1),l=l>1?1:l<0?0:l;for(var c=l/2,f=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],y=0,v=0;v<f;v++){var x=c*d[v]+c,C=hw(x,e,n,i,a),k=hw(x,t,r,o,s),R=C*C+k*k;y+=g[v]*pn.sqrt(R)}return c*y}function LN(e,t,n,r,i,o,a,s){if(!(Ki(e,n)<Gi(i,a)||Gi(e,n)>Ki(i,a)||Ki(t,r)<Gi(o,s)||Gi(t,r)>Ki(o,s))){var l=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),c=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),f=(e-n)*(o-s)-(t-r)*(i-a);if(f){var d=vd(l/f),g=vd(c/f),y=+d.toFixed(2),v=+g.toFixed(2);if(!(y<+Gi(e,n).toFixed(2)||y>+Ki(e,n).toFixed(2)||y<+Gi(i,a).toFixed(2)||y>+Ki(i,a).toFixed(2)||v<+Gi(t,r).toFixed(2)||v>+Ki(t,r).toFixed(2)||v<+Gi(o,s).toFixed(2)||v>+Ki(o,s).toFixed(2)))return{x:d,y:g}}}}function vd(e){return Math.round(e*1e11)/1e11}function BN(e,t,n){var r=dw(e),i=dw(t);if(!ON(r,i))return[];for(var o=mw(...e),a=mw(...t),s=gw(e)?1:~~(o/5)||1,l=gw(t)?1:~~(a/5)||1,c=[],f=[],d={},g=[],y=0;y<s+1;y++){var v=fw(...e,y/s);c.push({x:v.x,y:v.y,t:y/s})}for(y=0;y<l+1;y++)v=fw(...t,y/l),f.push({x:v.x,y:v.y,t:y/l});for(y=0;y<s;y++)for(var x=0;x<l;x++){var C=c[y],k=c[y+1],R=f[x],E=f[x+1],b=oa(k.x-C.x)<.01?"y":"x",D=oa(E.x-R.x)<.01?"y":"x",I=LN(C.x,C.y,k.x,k.y,R.x,R.y,E.x,E.y),z;if(I){if(z=I.x.toFixed(9)+"#"+I.y.toFixed(9),d[z])continue;d[z]=!0;var L=C.t+oa((I[b]-C[b])/(k[b]-C[b]))*(k.t-C.t),Q=R.t+oa((I[D]-R[D])/(E[D]-R[D]))*(E.t-R.t);L>=0&&L<=1&&Q>=0&&Q<=1&&g.push({x:I.x,y:I.y,t1:L,t2:Q})}}return g}function IC(e,t,n){e=vw(e),t=vw(t);for(var r,i,o,a,s,l,c,f,d,g,y=n?0:[],v=0,x=e.length;v<x;v++){var C=e[v];if(C[0]=="M")r=s=C[1],i=l=C[2];else{C[0]=="C"?(d=[r,i,...C.slice(1)],r=d[6],i=d[7]):(d=[r,i,r,i,s,l,s,l],r=s,i=l);for(var k=0,R=t.length;k<R;k++){var E=t[k];if(E[0]=="M")o=c=E[1],a=f=E[2];else{E[0]=="C"?(g=[o,a,...E.slice(1)],o=g[6],a=g[7]):(g=[o,a,o,a,c,f,c,f],o=c,a=f);var b=BN(d,g);{for(var D=0,I=b.length;D<I;D++)b[D].segment1=v,b[D].segment2=k,b[D].bez1=d,b[D].bez2=g;y=y.concat(b)}}}}}return y}function IN(e){var t=Sl(e);if(t.abs)return yd(t.abs);if((!gd(e)||!gd(e&&e[0]))&&(e=DN(e)),!e||!e.length)return[["M",0,0]];var n=[],r=0,i=0,o=0,a=0,s=0,l;e[0][0]=="M"&&(r=+e[0][1],i=+e[0][2],o=r,a=i,s++,n[0]=["M",r,i]);for(var c,f,d=s,g=e.length;d<g;d++){if(n.push(c=[]),f=e[d],l=f[0],l!=l.toUpperCase())switch(c[0]=l.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+r,c[7]=+f[7]+i;break;case"V":c[1]=+f[1]+i;break;case"H":c[1]=+f[1]+r;break;case"M":o=+f[1]+r,a=+f[2]+i;default:for(var y=1,v=f.length;y<v;y++)c[y]=+f[y]+(y%2?r:i)}else for(var x=0,C=f.length;x<C;x++)c[x]=f[x];switch(l=l.toUpperCase(),c[0]){case"Z":r=+o,i=+a;break;case"H":r=c[1];break;case"V":i=c[1];break;case"M":o=c[c.length-2],a=c[c.length-1];default:r=c[c.length-2],i=c[c.length-1]}}return n.toString=BC,t.abs=yd(n),n}function gw(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Wp(e,t,n,r){return[e,t,n,r,n,r]}function yw(e,t,n,r,i,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function jC(e,t,n,r,i,o,a,s,l,c){var f=Go*120/180,d=Go/180*(+i||0),g=[],y,v=NN(function(w,P,F){var K=w*pn.cos(F)-P*pn.sin(F),le=w*pn.sin(F)+P*pn.cos(F);return{x:K,y:le}});if(c)z=c[0],L=c[1],D=c[2],I=c[3];else{y=v(e,t,-d),e=y.x,t=y.y,y=v(s,l,-d),s=y.x,l=y.y;var x=(e-s)/2,C=(t-l)/2,k=x*x/(n*n)+C*C/(r*r);k>1&&(k=pn.sqrt(k),n=k*n,r=k*r);var R=n*n,E=r*r,b=(o==a?-1:1)*pn.sqrt(oa((R*E-R*C*C-E*x*x)/(R*C*C+E*x*x))),D=b*n*C/r+(e+s)/2,I=b*-r*x/n+(t+l)/2,z=pn.asin(((t-I)/r).toFixed(9)),L=pn.asin(((l-I)/r).toFixed(9));z=e<D?Go-z:z,L=s<D?Go-L:L,z<0&&(z=Go*2+z),L<0&&(L=Go*2+L),a&&z>L&&(z=z-Go*2),!a&&L>z&&(L=L-Go*2)}var Q=L-z;if(oa(Q)>f){var Y=L,G=s,ae=l;L=z+f*(a&&L>z?1:-1),s=D+n*pn.cos(L),l=I+r*pn.sin(L),g=jC(s,l,n,r,i,0,a,G,ae,[L,Y,D,I])}Q=L-z;var oe=pn.cos(z),Ce=pn.sin(z),kt=pn.cos(L),Ge=pn.sin(L),Ke=pn.tan(Q/4),ye=4/3*n*Ke,je=4/3*r*Ke,ue=[e,t],ve=[e+ye*Ce,t-je*oe],X=[s+ye*Ge,l-je*kt],Z=[s,l];if(ve[0]=2*ue[0]-ve[0],ve[1]=2*ue[1]-ve[1],c)return[ve,X,Z].concat(g);g=[ve,X,Z].concat(g).join().split(",");for(var se=[],he=0,B=g.length;he<B;he++)se[he]=he%2?v(g[he-1],g[he],d).y:v(g[he],g[he+1],d).x;return se}function jN(e,t,n,r,i,o,a,s){for(var l=[],c=[[],[]],f,d,g,y,v,x,C,k,R=0;R<2;++R){if(R==0?(d=6*e-12*n+6*i,f=-3*e+9*n-9*i+3*a,g=3*n-3*e):(d=6*t-12*r+6*o,f=-3*t+9*r-9*o+3*s,g=3*r-3*t),oa(f)<1e-12){if(oa(d)<1e-12)continue;y=-g/d,0<y&&y<1&&l.push(y);continue}C=d*d-4*g*f,k=pn.sqrt(C),!(C<0)&&(v=(-d+k)/(2*f),0<v&&v<1&&l.push(v),x=(-d-k)/(2*f),0<x&&x<1&&l.push(x))}for(var E=l.length,b=E,D;E--;)y=l[E],D=1-y,c[0][E]=D*D*D*e+3*D*D*y*n+3*D*y*y*i+y*y*y*a,c[1][E]=D*D*D*t+3*D*D*y*r+3*D*y*y*o+y*y*y*s;return c[0][b]=e,c[1][b]=t,c[0][b+1]=a,c[1][b+1]=s,c[0].length=c[1].length=b+2,{x0:Gi(...c[0]),y0:Gi(...c[1]),x1:Ki(...c[0]),y1:Ki(...c[1])}}function vw(e){var t=Sl(e);if(t.curve)return yd(t.curve);for(var n=IN(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(y,v,x){var C,k;if(!y)return["C",v.x,v.y,v.x,v.y,v.x,v.y];switch(!(y[0]in{T:1,Q:1})&&(v.qx=v.qy=null),y[0]){case"M":v.X=y[1],v.Y=y[2];break;case"A":y=["C",...jC(v.x,v.y,...y.slice(1))];break;case"S":x=="C"||x=="S"?(C=v.x*2-v.bx,k=v.y*2-v.by):(C=v.x,k=v.y),y=["C",C,k,...y.slice(1)];break;case"T":x=="Q"||x=="T"?(v.qx=v.x*2-v.qx,v.qy=v.y*2-v.qy):(v.qx=v.x,v.qy=v.y),y=["C",...yw(v.x,v.y,v.qx,v.qy,y[1],y[2])];break;case"Q":v.qx=y[1],v.qy=y[2],y=["C",...yw(v.x,v.y,y[1],y[2],y[3],y[4])];break;case"L":y=["C",...Wp(v.x,v.y,y[1],y[2])];break;case"H":y=["C",...Wp(v.x,v.y,y[1],v.y)];break;case"V":y=["C",...Wp(v.x,v.y,v.x,y[1])];break;case"Z":y=["C",...Wp(v.x,v.y,v.X,v.Y)];break}return y},o=function(y,v){if(y[v].length>7){y[v].shift();for(var x=y[v];x.length;)a[v]="A",y.splice(v++,0,["C",...x.splice(0,6)]);y.splice(v,1),f=n.length}},a=[],s="",l="",c=0,f=n.length;c<f;c++){n[c]&&(s=n[c][0]),s!="C"&&(a[c]=s,c&&(l=a[c-1])),n[c]=i(n[c],r,l),a[c]!="A"&&s=="C"&&(a[c]="C"),o(n,c);var d=n[c],g=d.length;r.x=d[g-2],r.y=d[g-1],r.bx=cw(d[g-4])||r.x,r.by=cw(d[g-3])||r.y}return t.curve=yd(n),n}function jt(e){return In(e)&&vr(e,"waypoints")}function Rt(e){return In(e)&&vr(e,"labelTarget")}function $C(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Eo(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Ue(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function eh(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function $N(e){return Eo({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function FN(e){for(var t=e.waypoints,n=t.reduce(function(c,f,d){var g=t[d-1];if(g){var y=c[c.length-1],v=y&&y.endLength||0,x=VN(g,f);c.push({start:g,end:f,startLength:v,endLength:v+x,length:x})}return c},[]),r=n.reduce(function(c,f){return c+f.length},0),i=r/2,o=0,a=n[o];a.endLength<i;)a=n[++o];var s=(i-a.startLength)/a.length,l={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return l}function Je(e){return jt(e)?FN(e):$N(e)}function tr(e,t,n){n=n||0,In(n)||(n={x:n,y:n});var r=Ue(e),i=Ue(t),o=r.bottom+n.y<=i.top,a=r.left-n.x>=i.right,s=r.top-n.y>=i.bottom,l=r.right+n.x<=i.left,c=o?"top":s?"bottom":null,f=l?"left":a?"right":null;return f&&c?c+"-"+f:f||c||"intersect"}function gy(e,t,n){var r=zN(e,t);return r.length===1||r.length===2&&Pc(r[0],r[1])<1?Eo(r[0]):r.length>1?(r=to(r,function(i){var o=Math.floor(i.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,i.segment2+"#"+o}),Eo(r[n?0:r.length-1])):null}function zN(e,t){return IC(e,t)}function HN(e){e=e.slice();for(var t=0,n,r,i;e[t];)n=e[t],r=e[t-1],i=e[t+1],Pc(n,i)===0||Yv(r,i,n)?e.splice(t,1):t++;return e}function VN(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Tf(e,t){return Math.round(e*t)/t}function xw(e){return Ze(e)?e+"px":e}function WN(e){for(;e.parent;)e=e.parent;return e}function UN(e){e=q({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Xn(n,{position:"relative",overflow:"hidden",width:xw(e.width),height:xw(e.height)}),t.appendChild(n),n}function FC(e,t,n){const r=Fe("g");St(r).add(t);const i=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(r,e.childNodes[i]||null),r}const GN="base",zC=0,KN=1,YN={shape:["x","y","width","height"],connection:["waypoints"]};function lt(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}lt.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];lt.prototype._init=function(e){const t=this._eventBus,n=this._container=UN(e),r=this._svg=Fe("svg");ke(r,{width:"100%",height:"100%"}),tt(n,r);const i=this._viewport=FC(r,"viewport");e.deferUpdate&&(this._viewboxChanged=EC(_r(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:r,viewport:i})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};lt.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};lt.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=OC(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};lt.prototype.getDefaultLayer=function(){return this.getLayer(GN,zC)};lt.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};lt.prototype._getChildIndex=function(e){return jr(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};lt.prototype._createLayer=function(e,t){typeof t>"u"&&(t=KN);const n=this._getChildIndex(t);return{group:FC(this._viewport,"layer-"+e,n),index:t,visible:!0}};lt.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,r=t.group,i=t.index;if(t.visible)return r;const o=this._getChildIndex(i);return n.insertBefore(r,n.childNodes[o]||null),t.visible=!0,r};lt.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(En(n),t.visible=!1),n};lt.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],En(t.group))};lt.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};lt.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(WN(e))||{}).rootElement:void 0};lt.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};lt.prototype._findPlaneForRoot=function(e){return At(this._planes,function(t){return t.rootElement===e})};lt.prototype.getContainer=function(){return this._container};lt.prototype._updateMarker=function(e,t,n){let r;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,r=this._elementRegistry._elements[e.id],r&&(W([r.gfx,r.secondaryGfx],function(i){i&&(n?(e.markers.add(t),St(i).add(t)):(e.markers.delete(t),St(i).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))};lt.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};lt.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};lt.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};lt.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};lt.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};lt.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const r=this.getLayer(n,zC);return this.hideLayer(n),this._addRoot(e,r),this._planes.push({rootElement:e,layer:r}),e};lt.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};lt.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};lt.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};lt.prototype._addRoot=function(e,t){const n=this._elementRegistry,r=this._eventBus;r.fire("root.add",{element:e}),n.add(e,t),r.fire("root.added",{element:e,gfx:t})};lt.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};lt.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=YN[e];if(!Ss(n,function(i){return typeof t[i]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};lt.prototype._setParent=function(e,t,n){Sn(t.children,e,n),e.parent=t};lt.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();const i=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r);const a=o.create(e,t,r);return this._elementRegistry.add(t,a),o.update(e,t,a),i.fire(e+".added",{element:t,gfx:a}),t};lt.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};lt.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};lt.prototype._removeElement=function(e,t){const n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(e=n.get(e.id||e),!!e)return i.fire(t+".remove",{element:e}),r.remove(e),mn(e.parent&&e.parent.children,e),e.parent=null,i.fire(t+".removed",{element:e}),n.remove(e),e};lt.prototype.removeShape=function(e){return this._removeElement(e,"shape")};lt.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};lt.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};lt.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};lt.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};lt.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let r,i,o,a,s,l,c;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const f=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);fc(t,f)});else return o=this._rootElement?this.getActiveLayer():null,r=o&&o.getBBox()||{},a=fc(t),i=a?a.matrix:rN(),s=Tf(i.a,1e3),l=Tf(-i.e||0,1e3),c=Tf(-i.f||0,1e3),e=this._cachedViewbox={x:l?l/s:0,y:c?c/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:r.width||0,height:r.height||0,x:r.x||0,y:r.y||0},outer:n},e;return e};lt.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=q({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),HC(t,n)}),{x:n.e,y:n.f}};lt.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const r=this.findRoot(e);if(r!==this.getRootElement()&&this.setRootElement(r),r===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const i=An(e),o=Ue(i),a=this.viewbox(),s=this.zoom();let l,c;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const f=Ue(a);if(!(i.width<a.width&&i.height<a.height))l=i.x-a.x,c=i.y-a.y;else{const g=Math.max(0,o.right-f.right),y=Math.min(0,o.left-f.left),v=Math.max(0,o.bottom-f.bottom),x=Math.min(0,o.top-f.top);l=g||y,c=v||x}this.scroll({dx:-l*s,dy:-c*s})};lt.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,r;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),Tf(r.a,1e3)};function HC(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}lt.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,r=t.inner;let i,o;return r.x>=0&&r.y>=0&&r.x+r.width<=n.width&&r.y+r.height<=n.height&&!e?o={x:0,y:0,width:Math.max(r.width+r.x,n.width),height:Math.max(r.height+r.y,n.height)}:(i=Math.min(1,n.width/r.width,n.height/r.height),o={x:r.x+(e?r.width/2-n.width/i/2:0),y:r.y+(e?r.height/2-n.height/i/2:0),width:n.width/i,height:n.height/i}),this.viewbox(o),this.viewbox(!1).scale};lt.prototype._setZoom=function(e,t){const n=this._svg,r=this._viewport,i=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,l,c,f;l=r.getCTM();const d=l.a;return t?(a=q(o,t),s=a.matrixTransform(l.inverse()),c=i.translate(s.x,s.y).scale(1/d*e).translate(-s.x,-s.y),f=l.multiply(c)):f=i.scale(e),HC(this._viewport,f),f};lt.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};lt.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,a=n.height*t.scale;return{x:r,y:i,width:o,height:a}};lt.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Cl="data-element-id";function ti(e){this._elements={},this._eventBus=e}ti.$inject=["eventBus"];ti.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),ke(t,Cl,r),n&&ke(n,Cl,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}};ti.prototype.remove=function(e){var t=this._elements,n=e.id||e,r=n&&t[n];r&&(ke(r.gfx,Cl,""),r.secondaryGfx&&ke(r.secondaryGfx,Cl,""),delete t[n])};ti.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)};ti.prototype.updateGraphics=function(e,t,n){var r=e.id||e,i=this._elements[r];return n?i.secondaryGfx=t:i.gfx=t,t&&ke(t,Cl,r),t};ti.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&ke(e,Cl);var n=this._elements[t];return n&&n.element};ti.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t};ti.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i],a=o.element,s=o.gfx;if(e(a,s))return a}};ti.prototype.getAll=function(){return this.filter(function(e){return e})};ti.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var r=t[n],i=r.element,o=r.gfx;return e(i,o)})};ti.prototype.getGraphics=function(e,t){var n=e.id||e,r=this._elements[n];return r&&(t?r.secondaryGfx:r.gfx)};ti.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function qN(e,t,n,r){var i=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,i,r)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,i,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function XN(e){return e.__refs_collection===!0}function QN(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function VC(e,t,n){var r=qN(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(i){e.set(i,t.inverse,n)})}function ZN(e,t,n){var r=t.inverse,i=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return i},set:function(o){if(o!==i){var a=i;i=null,a&&e.unset(a,r,n),i=o,e.set(i,r,n)}}})}function wi(e,t){if(!(this instanceof wi))return new wi(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}wi.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?VC(this,t,e):ZN(this,t,e)};wi.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return XN(n)||VC(this,t,e),n};wi.prototype.ensureBound=function(e,t){QN(e,t)||this.bind(e,t)};wi.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};wi.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Xv=new wi({name:"children",enumerable:!0,collection:!0},{name:"parent"}),WC=new wi({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),_w=new wi({name:"attachers",collection:!0},{name:"host"}),UC=new wi({name:"outgoing",collection:!0},{name:"source"}),GC=new wi({name:"incoming",collection:!0},{name:"target"});function $l(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Xv.bind(this,"parent"),WC.bind(this,"labels"),UC.bind(this,"outgoing"),GC.bind(this,"incoming")}function Tc(){$l.call(this),Xv.bind(this,"children"),_w.bind(this,"host"),_w.bind(this,"attachers")}Oe(Tc,$l);function KC(){$l.call(this),Xv.bind(this,"children")}Oe(KC,Tc);function YC(){Tc.call(this),WC.bind(this,"labelTarget")}Oe(YC,Tc);function qC(){$l.call(this),UC.bind(this,"source"),GC.bind(this,"target")}Oe(qC,$l);var JN={connection:qC,shape:Tc,label:YC,root:KC};function eD(e,t){var n=JN[e];if(!n)throw new Error("unknown type: <"+e+">");return q(new n,t)}function tD(e){return e instanceof $l}function Mo(){this._uid=12}Mo.prototype.createRoot=function(e){return this.create("root",e)};Mo.prototype.createLabel=function(e){return this.create("label",e)};Mo.prototype.createShape=function(e){return this.create("shape",e)};Mo.prototype.createConnection=function(e){return this.create("connection",e)};Mo.prototype.create=function(e,t){return t=q({},t||{}),t.id||(t.id=e+"_"+this._uid++),eD(e,t)};var xd="__fn",XC=1e3,nD=Array.prototype.slice;function $r(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}$r.prototype.on=function(e,t,n,r){if(e=ot(e)?e:[e],bn(t)&&(r=n,n=t,t=XC),!Ze(t))throw new Error("priority must be a number");var i=n;r&&(i=_r(n,r),i[xd]=n[xd]||n);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:i,next:null})})};$r.prototype.once=function(e,t,n,r){var i=this;if(bn(t)&&(r=n,n=t,t=XC),!Ze(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(r,arguments);return i.off(e,o),a}o[xd]=n,this.on(e,t,o)};$r.prototype.off=function(e,t){e=ot(e)?e:[e];var n=this;e.forEach(function(r){n._removeListener(r,t)})};$r.prototype.createEvent=function(e){var t=new Ac;return t.init(e),t};$r.prototype.fire=function(e,t){var n,r,i,o;if(o=nD.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],!!r){t instanceof Ac?n=t:n=this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{i=this._invokeListeners(n,o,r)}finally{e!==a&&(n.type=a)}return i===void 0&&n.defaultPrevented&&(i=!1),i}};$r.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};$r.prototype._destroy=function(){this._listeners={}};$r.prototype._invokeListeners=function(e,t,n){for(var r;n&&!e.cancelBubble;)r=this._invokeListener(e,t,n),n=n.next;return r};$r.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=rD(n.callback,t),r!==void 0&&(e.returnValue=r,e.stopPropagation()),r===!1&&e.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};$r.prototype._addListener=function(e,t){var n=this._getListeners(e),r;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,r?r.next=t:this._setListeners(e,t);return}r=n,n=n.next}r.next=t};$r.prototype._getListeners=function(e){return this._listeners[e]};$r.prototype._setListeners=function(e,t){this._listeners[e]=t};$r.prototype._removeListener=function(e,t){var n=this._getListeners(e),r,i,o;if(!t){this._setListeners(e,null);return}for(;n;)r=n.next,o=n.callback,(o===t||o[xd]===t)&&(i?i.next=r:this._setListeners(e,r)),i=n,n=r};function Ac(){}Ac.prototype.stopPropagation=function(){this.cancelBubble=!0};Ac.prototype.preventDefault=function(){this.defaultPrevented=!0};Ac.prototype.init=function(e){q(this,e||{})};function rD(e,t){return e.apply(null,t)}function fs(e){return e.childNodes[0]}function iD(e){return e.parentNode.childNodes[1]}function Af(e,t,n,r,i){var o=Hu();o.setTranslate(t,n);var a=Hu();a.setRotate(r||0,0,0);var s=Hu();s.setScale(1,1),fc(e,[o,a,s])}function Hn(e,t,n){var r=Hu();r.setTranslate(t,n),fc(e,r)}function QC(e,t){var n=Hu();n.setRotate(t,0,0),fc(e,n)}function ni(e,t){this._eventBus=e,this._elementRegistry=t}ni.$inject=["eventBus","elementRegistry"];ni.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=iD(t),n||(n=Fe("g"),St(n).add("djs-children"),tt(t.parentNode,n))):n=t,n};ni.prototype._clear=function(e){var t=fs(e);return qd(t),t};ni.prototype._createContainer=function(e,t,n,r){var i=Fe("g");St(i).add("djs-group"),typeof n<"u"?ZC(i,t,t.childNodes[n]):tt(t,i);var o=Fe("g");St(o).add("djs-element"),St(o).add("djs-"+e),r&&St(o).add("djs-frame"),tt(i,o);var a=Fe("g");return St(a).add("djs-visual"),tt(o,a),o};ni.prototype.create=function(e,t,n){var r=this._getChildrenContainer(t.parent);return this._createContainer(e,r,n,LC(t))};ni.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,r;r=jr(e,function(i,o){return o.parent&&(i[o.parent.id]=o.parent),i},{}),W(r,function(i){var o=i.children;if(o){var a=t._getChildrenContainer(i);W(o.slice().reverse(),function(s){var l=n.getGraphics(s);ZC(l.parentNode,a)})}})};ni.prototype.drawShape=function(e,t,n={}){var r=this._eventBus;return r.fire("render.shape",{gfx:e,element:t,attrs:n})};ni.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};ni.prototype.drawConnection=function(e,t,n={}){var r=this._eventBus;return r.fire("render.connection",{gfx:e,element:t,attrs:n})};ni.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};ni.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if(e==="shape")this.drawShape(r,t),Hn(n,t.x,t.y);else if(e==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+e);t.hidden?ke(n,"display","none"):ke(n,"display","block")}};ni.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);En(t.parentNode)};function ZC(e,t,n){var r=n||t.firstChild;e!==r&&t.insertBefore(e,r)}const oD={__depends__:[CN],__init__:["canvas"],canvas:["type",lt],elementRegistry:["type",ti],elementFactory:["type",Mo],eventBus:["type",$r],graphicsFactory:["type",ni]};function aD(e){var t=new MC(e);return t.init(),t}function sD(e){e=e||{};var t={config:["value",e]},n=[t,oD].concat(e.modules||[]);return aD(n)}function Ra(e,t){this._injector=t||sD(e),this.get("eventBus").fire("diagram.init")}Ra.prototype.get=function(e,t){return this._injector.get(e,t)};Ra.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Ra.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Ra.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Qv(){}Qv.prototype.get=function(e){return this.$model.properties.get(this,e)};Qv.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function JC(e,t){this.model=e,this.properties=t}JC.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(Qv.prototype);W(e.properties,function(a){!a.isMany&&a.default!==void 0&&(r[a.name]=a.default)}),n.defineModel(r,t),n.defineDescriptor(r,e);var i=e.ns.name;function o(a){n.define(this,"$type",{value:i,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),W(a,_r(function(s,l){this.set(l,s)},this))}return o.prototype=r,o.hasType=r.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var lD={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},eR={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Zv(e,t){var n=eR[e];return n?n(t):t}function yy(e){return!!lD[e]}function tR(e){return!!eR[e]}function ur(e,t){var n=e.split(/:/),r,i;if(n.length===1)r=e,i=t;else if(n.length===2)r=n[1],i=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(i?i+":":"")+r,{name:e,prefix:i,localName:r}}function ri(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}ri.prototype.build=function(){return $i(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};ri.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var r=this.properties;t!==void 0?r.splice(t,0,e):r.push(e)};ri.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=i.indexOf(e);if(s===-1)throw new Error("property <"+r.name+"> not found in property list");i.splice(s,1),this.addProperty(t,n?void 0:s,a),o[r.name]=o[r.localName]=t};ri.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,i=t.split("#"),o=ur(i[0],r),a=ur(i[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines};ri.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e};ri.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};ri.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};ri.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};ri.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};ri.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};ri.prototype.hasProperty=function(e){return this.propertiesByName[e]};ri.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,r=this.allTypes,i=e.name;i in n||(W(e.properties,_r(function(o){o=q({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),r.push(e),n[i]=e)};function ka(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,W(e,_r(this.registerPackage,this))}ka.prototype.getPackage=function(e){return this.packageMap[e]};ka.prototype.getPackages=function(){return this.packages};ka.prototype.registerPackage=function(e){e=q({},e);var t=this.packageMap;ww(t,e,"prefix"),ww(t,e,"uri"),W(e.types,_r(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};ka.prototype.registerType=function(e,t){e=q({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:q(e.meta||{})});var n=ur(e.name,t.prefix),r=n.name,i={};W(e.properties,_r(function(o){var a=ur(o.name,n.prefix),s=a.name;yy(o.type)||(o.type=ur(o.type,a.prefix).name),q(o,{ns:a,name:s}),i[s]=o},this)),q(e,{ns:n,name:r,propertiesByName:i}),W(e.extends,_r(function(o){var a=ur(o,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(r)},this)),this.definePackage(e,t),this.typeMap[r]=e};ka.prototype.mapTypes=function(e,t,n){var r=yy(e.name)?{name:e.name}:this.typeMap[e.name],i=this;function o(l,c){var f=ur(l,yy(l)?"":e.prefix);i.mapTypes(f,t,c)}function a(l){return o(l,!0)}function s(l){return o(l,!1)}if(!r)throw new Error("unknown type <"+e.name+">");W(r.superClass,n?a:s),t(r,!n),W(r.traits,a)};ka.prototype.getEffectiveDescriptor=function(e){var t=ur(e),n=new ri(t);this.mapTypes(t,function(i,o){n.addTrait(i,o)});var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r};ka.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function ww(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function ks(e){this.model=e}ks.prototype.set=function(e,t,n){if(!Ir(t)||!t.length)throw new TypeError("property name must be a non-empty string");var r=this.getProperty(e,t),i=r&&r.name;uD(n)?r?delete e[i]:delete e.$attrs[vy(t)]:r?i in e?e[i]=n:nR(e,r,n):e.$attrs[vy(t)]=n};ks.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[vy(t)];var r=n.name;return!e[r]&&n.isMany&&nR(e,n,[]),e[r]};ks.prototype.define=function(e,t,n){if(!n.writable){var r=n.value;n=q({},n,{get:function(){return r}}),delete n.value}Object.defineProperty(e,t,n)};ks.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};ks.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};ks.prototype.getProperty=function(e,t){var n=this.model,r=n.getPropertyDescriptor(e,t);if(r)return r;if(t.includes(":"))return null;const i=n.config.strict;if(typeof i<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(i)throw o;typeof console<"u"&&console.warn(o)}return null};function uD(e){return typeof e>"u"}function nR(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function vy(e){return e.replace(/^:/,"")}function Ei(e,t={}){this.properties=new ks(this),this.factory=new JC(this,this.properties),this.registry=new ka(e,this.properties),this.typeCache={},this.config=t}Ei.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Ei.prototype.getType=function(e){var t=this.typeCache,n=Ir(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r};Ei.prototype.createAny=function(e,t,n){var r=ur(e),i={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){O5(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(i,o),this.properties.defineModel(i,this),this.properties.define(i,"get",{enumerable:!1,writable:!0}),this.properties.define(i,"set",{enumerable:!1,writable:!0}),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),this.properties.define(i,"$instanceOf",{enumerable:!1,writable:!0}),W(n,function(a,s){In(a)&&a.value!==void 0?i[a.name]=a.value:i[s]=a}),i};Ei.prototype.getPackage=function(e){return this.registry.getPackage(e)};Ei.prototype.getPackages=function(){return this.registry.getPackages()};Ei.prototype.getElementDescriptor=function(e){return e.$descriptor};Ei.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Ei.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Ei.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Ew=String.fromCharCode,cD=Object.prototype.hasOwnProperty,pD=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Wu={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Wu).forEach(function(e){Wu[e.toUpperCase()]=Wu[e]});function fD(e,t,n,r){return r?cD.call(Wu,r)?Wu[r]:"&"+r+";":Ew(t||parseInt(n,16))}function Qa(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(pD,fD):e}var dD="http://www.w3.org/2001/XMLSchema-instance",hD="xsi",bw="xsi:type",Sw="non-whitespace outside of root node";function Us(e){return new Error(e)}function Cw(e){return"missing namespace for prefix <"+e+">"}function Up(e){return{get:e,enumerable:!0}}function mD(e){var t={},n;for(n in e)t[n]=e[n];return t}function xy(e){return e+"$uri"}function gD(e){var t={},n,r;for(n in e)r=e[n],t[r]=r,t[xy(r)]=n;return t}function Rw(){return{line:0,column:0}}function yD(e){throw e}function rR(e){if(!this)return new rR(e);var t=e&&e.proxy,n,r,i,o,a=yD,s,l,c,f,d=Rw,g=!1,y=!1,v=null,x=!1,C;function k(b){b instanceof Error||(b=Us(b)),v=b,a(b,d)}function R(b){s&&(b instanceof Error||(b=Us(b)),s(b,d))}this.on=function(b,D){if(typeof D!="function")throw Us("required args <name, cb>");switch(b){case"openTag":r=D;break;case"text":n=D;break;case"closeTag":i=D;break;case"error":a=D;break;case"warn":s=D;break;case"cdata":o=D;break;case"attention":f=D;break;case"question":c=D;break;case"comment":l=D;break;default:throw Us("unsupported event: "+b)}return this},this.ns=function(b){if(typeof b>"u"&&(b={}),typeof b!="object")throw Us("required args <nsMap={}>");var D={},I;for(I in b)D[I]=b[I];return D[dD]=hD,y=!0,C=D,this},this.parse=function(b){if(typeof b!="string")throw Us("required args <xml=string>");return v=null,E(b),d=Rw,x=!1,v},this.stop=function(){x=!0};function E(b){var D=y?[]:null,I=y?gD(C):null,z,L=[],Q=0,Y=!1,G=!1,ae=0,oe=0,Ce,kt,Ge,Ke,ye,je,ue,ve,X,Z="",se=0,he;function B(){if(he!==null)return he;var P,F,K,le=y&&I.xmlns,Me=y&&g?[]:null,we=se,ce=Z,Ve=ce.length,vt,Qe,xt,gt,ze,ee={},Xe={},Dt,Se,Ie;e:for(;we<Ve;we++)if(Dt=!1,Se=ce.charCodeAt(we),!(Se===32||Se<14&&Se>8)){for((Se<65||Se>122||Se>90&&Se<97)&&Se!==95&&Se!==58&&(R("illegal first char attribute name"),Dt=!0),Ie=we+1;Ie<Ve;Ie++)if(Se=ce.charCodeAt(Ie),!(Se>96&&Se<123||Se>64&&Se<91||Se>47&&Se<59||Se===46||Se===45||Se===95)){if(Se===32||Se<14&&Se>8){R("missing attribute value"),we=Ie;continue e}if(Se===61)break;R("illegal attribute name char"),Dt=!0}if(ze=ce.substring(we,Ie),ze==="xmlns:xmlns"&&(R("illegal declaration of xmlns"),Dt=!0),Se=ce.charCodeAt(Ie+1),Se===34)Ie=ce.indexOf('"',we=Ie+2),Ie===-1&&(Ie=ce.indexOf("'",we),Ie!==-1&&(R("attribute value quote missmatch"),Dt=!0));else if(Se===39)Ie=ce.indexOf("'",we=Ie+2),Ie===-1&&(Ie=ce.indexOf('"',we),Ie!==-1&&(R("attribute value quote missmatch"),Dt=!0));else for(R("missing attribute value quotes"),Dt=!0,Ie=Ie+1;Ie<Ve&&(Se=ce.charCodeAt(Ie+1),!(Se===32||Se<14&&Se>8));Ie++);for(Ie===-1&&(R("missing closing quotes"),Ie=Ve,Dt=!0),Dt||(xt=ce.substring(we,Ie)),we=Ie;Ie+1<Ve&&(Se=ce.charCodeAt(Ie+1),!(Se===32||Se<14&&Se>8));Ie++)we===Ie&&(R("illegal character after attribute end"),Dt=!0);if(we=Ie+1,Dt)continue e;if(ze in Xe){R("attribute <"+ze+"> already defined");continue}if(Xe[ze]=!0,!y){ee[ze]=xt;continue}if(g){if(Qe=ze==="xmlns"?"xmlns":ze.charCodeAt(0)===120&&ze.substr(0,6)==="xmlns:"?ze.substr(6):null,Qe!==null){if(P=Qa(xt),F=xy(Qe),gt=C[P],!gt){if(Qe==="xmlns"||F in I&&I[F]!==P)do gt="ns"+Q++;while(typeof I[gt]<"u");else gt=Qe;C[P]=gt}I[Qe]!==gt&&(vt||(I=mD(I),vt=!0),I[Qe]=gt,Qe==="xmlns"&&(I[xy(gt)]=P,le=gt),I[F]=P),ee[ze]=xt;continue}Me.push(ze,xt);continue}if(Se=ze.indexOf(":"),Se===-1){ee[ze]=xt;continue}if(!(K=I[ze.substring(0,Se)])){R(Cw(ze.substring(0,Se)));continue}ze=le===K?ze.substr(Se+1):K+ze.substr(Se),ze===bw&&(Se=xt.indexOf(":"),Se!==-1?(K=xt.substring(0,Se),K=I[K]||K,xt=K+xt.substring(Se)):xt=le+":"+xt),ee[ze]=xt}if(g)for(we=0,Ve=Me.length;we<Ve;we++){if(ze=Me[we++],xt=Me[we],Se=ze.indexOf(":"),Se!==-1){if(!(K=I[ze.substring(0,Se)])){R(Cw(ze.substring(0,Se)));continue}ze=le===K?ze.substr(Se+1):K+ze.substr(Se),ze===bw&&(Se=xt.indexOf(":"),Se!==-1?(K=xt.substring(0,Se),K=I[K]||K,xt=K+xt.substring(Se)):xt=le+":"+xt)}ee[ze]=xt}return he=ee}function w(){for(var P=/(\r\n|\r|\n)/g,F=0,K=0,le=0,Me=oe,we,ce;ae>=le&&(we=P.exec(b),!(!we||(Me=we[0].length+we.index,Me>ae)));)F+=1,le=Me;return ae==-1?(K=Me,ce=b.substring(oe)):oe===0?ce=b.substring(oe,ae):(K=ae-le,ce=oe==-1?b.substring(ae):b.substring(ae,oe+1)),{data:ce,line:F,column:K}}for(d=w,t&&(X=Object.create({},{name:Up(function(){return ue}),originalName:Up(function(){return ve}),attrs:Up(B),ns:Up(function(){return I})}));oe!==-1;){if(b.charCodeAt(oe)===60?ae=oe:ae=b.indexOf("<",oe),ae===-1){if(L.length)return k("unexpected end of file");if(oe===0)return k("missing start tag");oe<b.length&&b.substring(oe).trim()&&R(Sw);return}if(oe!==ae){if(L.length){if(n&&(n(b.substring(oe,ae),Qa,d),x))return}else if(b.substring(oe,ae).trim()&&(R(Sw),x))return}if(Ke=b.charCodeAt(ae+1),Ke===33){if(Ge=b.charCodeAt(ae+2),Ge===91&&b.substr(ae+3,6)==="CDATA["){if(oe=b.indexOf("]]>",ae),oe===-1)return k("unclosed cdata");if(o&&(o(b.substring(ae+9,oe),d),x))return;oe+=3;continue}if(Ge===45&&b.charCodeAt(ae+3)===45){if(oe=b.indexOf("-->",ae),oe===-1)return k("unclosed comment");if(l&&(l(b.substring(ae+4,oe),Qa,d),x))return;oe+=3;continue}}if(Ke===63){if(oe=b.indexOf("?>",ae),oe===-1)return k("unclosed question");if(c&&(c(b.substring(ae,oe+2),d),x))return;oe+=2;continue}for(Ce=ae+1;;Ce++){if(ye=b.charCodeAt(Ce),isNaN(ye))return oe=-1,k("unclosed tag");if(ye===34)Ge=b.indexOf('"',Ce+1),Ce=Ge!==-1?Ge:Ce;else if(ye===39)Ge=b.indexOf("'",Ce+1),Ce=Ge!==-1?Ge:Ce;else if(ye===62){oe=Ce;break}}if(Ke===33){if(f&&(f(b.substring(ae,oe+1),Qa,d),x))return;oe+=1;continue}if(he={},Ke===47){if(Y=!1,G=!0,!L.length)return k("missing open tag");if(Ce=ue=L.pop(),Ge=ae+2+Ce.length,b.substring(ae+2,Ge)!==Ce)return k("closing tag mismatch");for(;Ge<oe;Ge++)if(Ke=b.charCodeAt(Ge),!(Ke===32||Ke>8&&Ke<14))return k("close tag")}else{if(b.charCodeAt(oe-1)===47?(Ce=ue=b.substring(ae+1,oe-1),Y=!0,G=!0):(Ce=ue=b.substring(ae+1,oe),Y=!0,G=!1),!(Ke>96&&Ke<123||Ke>64&&Ke<91||Ke===95||Ke===58))return k("illegal first char nodeName");for(Ge=1,kt=Ce.length;Ge<kt;Ge++)if(Ke=Ce.charCodeAt(Ge),!(Ke>96&&Ke<123||Ke>64&&Ke<91||Ke>47&&Ke<59||Ke===45||Ke===95||Ke==46)){if(Ke===32||Ke<14&&Ke>8){ue=Ce.substring(0,Ge),he=null;break}return k("invalid nodeName")}G||L.push(ue)}if(y){if(z=I,Y&&(G||D.push(z),he===null&&(g=Ce.indexOf("xmlns",Ge)!==-1)&&(se=Ge,Z=Ce,B(),g=!1)),ve=ue,Ke=ue.indexOf(":"),Ke!==-1){if(je=I[ue.substring(0,Ke)],!je)return k("missing namespace on <"+ve+">");ue=ue.substr(Ke+1)}else je=I.xmlns;je&&(ue=je+":"+ue)}if(Y&&(se=Ge,Z=Ce,r&&(t?r(X,Qa,G,d):r(ue,B,Qa,G,d),x)))return;if(G){if(i&&(i(t?X:ue,Qa,Y,d),x))return;y&&(Y?I=z:I=D.pop())}oe+=1}}}function iR(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var vD={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},th="xsi:type";function oR(e){return e.xml&&e.xml.serialize}function aR(e){return oR(e)===th}function xD(e){return oR(e)==="property"}function _D(e){return e.charAt(0).toUpperCase()+e.slice(1)}function sR(e,t){return iR(t)?e.prefix+":"+_D(e.localName):e.name}function wD(e,t){var n=e.name,r=e.localName,i=t.xml&&t.xml.typePrefix;return i&&r.indexOf(i)===0?e.prefix+":"+r.slice(i.length):n}function ED(e,t){var n=ur(e),r=t.getPackage(n.prefix);return wD(n,r)}function xa(e){return new Error(e)}function bo(e){return e.$descriptor}function bD(e){q(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw xa("expected element");var n=this.elementsById,r=bo(t),i=r.idProperty,o;if(i&&(o=t.get(i.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw xa("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Mc(){}Mc.prototype.handleEnd=function(){};Mc.prototype.handleText=function(){};Mc.prototype.handleNode=function(){};function Jv(){}Jv.prototype=Object.create(Mc.prototype);Jv.prototype.handleNode=function(){return this};function Fl(){}Fl.prototype=Object.create(Mc.prototype);Fl.prototype.handleText=function(e){this.body=(this.body||"")+e};function Nc(e,t){this.property=e,this.context=t}Nc.prototype=Object.create(Fl.prototype);Nc.prototype.handleNode=function(e){if(this.element)throw xa("expected no sub nodes");return this.element=this.createReference(e),this};Nc.prototype.handleEnd=function(){this.element.id=this.body};Nc.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function e0(e,t){this.element=t,this.propertyDesc=e}e0.prototype=Object.create(Fl.prototype);e0.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Zv(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function nh(){}nh.prototype=Object.create(Fl.prototype);nh.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function pr(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}pr.prototype=Object.create(nh.prototype);pr.prototype.addReference=function(e){this.context.addReference(e)};pr.prototype.handleText=function(e){var t=this.element,n=bo(t),r=n.bodyProperty;if(!r)throw xa("unexpected body text <"+e+">");Fl.prototype.handleText.call(this,e)};pr.prototype.handleEnd=function(){var e=this.body,t=this.element,n=bo(t),r=n.bodyProperty;r&&e!==void 0&&(e=Zv(r.type,e),t.set(r.name,e))};pr.prototype.createElement=function(e){var t=e.attributes,n=this.type,r=bo(n),i=this.context,o=new n({}),a=this.model,s;return W(t,function(l,c){var f=r.propertiesByName[c],d;f&&f.isReference?f.isMany?(d=l.split(" "),W(d,function(g){i.addReference({element:o,property:f.ns.name,id:g})})):i.addReference({element:o,property:f.ns.name,id:l}):(f?l=Zv(f.type,l):c!=="xmlns"&&(s=ur(c,r.ns.prefix),a.getPackage(s.prefix)&&i.addWarning({message:"unknown attribute <"+c+">",element:o,property:c,value:l})),o.set(c,l))}),o};pr.prototype.getPropertyForNode=function(e){var t=e.name,n=ur(t),r=this.type,i=this.model,o=bo(r),a=n.name,s=o.propertiesByName[a],l,c;if(s&&!s.isAttr)return aR(s)&&(l=e.attributes[th],l)?(l=ED(l,i),c=i.getType(l),q({},s,{effectiveType:bo(c).name})):s;var f=i.getPackage(n.prefix);if(f){if(l=sR(n,f),c=i.getType(l),s=At(o.properties,function(d){return!d.isVirtual&&!d.isReference&&!d.isAttribute&&c.hasType(d.type)}),s)return q({},s,{effectiveType:bo(c).name})}else if(s=At(o.properties,function(d){return!d.isReference&&!d.isAttribute&&d.type==="Element"}),s)return s;throw xa("unrecognized element <"+n.name+">")};pr.prototype.toString=function(){return"ElementDescriptor["+bo(this.type).name+"]"};pr.prototype.valueHandler=function(e,t){return new e0(e,t)};pr.prototype.referenceHandler=function(e){return new Nc(e,this.context)};pr.prototype.handler=function(e){return e==="Element"?new Rl(this.model,e,this.context):new pr(this.model,e,this.context)};pr.prototype.handleChild=function(e){var t,n,r,i;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,tR(n))return this.valueHandler(t,r);t.isReference?i=this.referenceHandler(t).handleNode(e):i=this.handler(n).handleNode(e);var o=i.element;return o!==void 0&&(t.isMany?r.get(t.name).push(o):r.set(t.name,o),t.isReference?(q(o,{element:r}),this.context.addReference(o)):o.$parent=r),i};function t0(e,t,n){pr.call(this,e,t,n)}t0.prototype=Object.create(pr.prototype);t0.prototype.createElement=function(e){var t=e.name,n=ur(t),r=this.model,i=this.type,o=r.getPackage(n.prefix),a=o&&sR(n,o)||t;if(!i.hasType(a))throw xa("unexpected element <"+e.originalName+">");return pr.prototype.createElement.call(this,e)};function Rl(e,t,n){this.model=e,this.context=n}Rl.prototype=Object.create(nh.prototype);Rl.prototype.createElement=function(e){var t=e.name,n=ur(t),r=n.prefix,i=e.ns[r+"$uri"],o=e.attributes;return this.model.createAny(t,i,o)};Rl.prototype.handleChild=function(e){var t=new Rl(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element,i;return r!==void 0&&(i=n.$children=n.$children||[],i.push(r),r.$parent=n),t};Rl.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function n0(e){e instanceof Ei&&(e={model:e}),q(this,{lax:!1},e)}n0.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof pr?(r=t,t={}):typeof t=="string"?(r=this.handler(t),t={}):typeof r=="string"&&(r=this.handler(r));var i=this.model,o=this.lax,a=new bD(q({},t,{rootHandler:r})),s=new rR({proxy:!0}),l=SD();r.context=a,l.push(r);function c(D,I,z){var L=I(),Q=L.line,Y=L.column,G=L.data;G.charAt(0)==="<"&&G.indexOf(" ")!==-1&&(G=G.slice(0,G.indexOf(" "))+">");var ae="unparsable content "+(G?G+" ":"")+`detected
	line: `+Q+`
	column: `+Y+`
	nested error: `+D.message;if(z)return a.addWarning({message:ae,error:D}),!0;throw xa(ae)}function f(D,I){return c(D,I,!0)}function d(){var D=a.elementsById,I=a.references,z,L;for(z=0;L=I[z];z++){var Q=L.element,Y=D[L.id],G=bo(Q).propertiesByName[L.property];if(Y||a.addWarning({message:"unresolved reference <"+L.id+">",element:L.element,property:L.property,value:L.id}),G.isMany){var ae=Q.get(G.name),oe=ae.indexOf(L);oe===-1&&(oe=ae.length),Y?ae[oe]=Y:ae.splice(oe,1)}else Q.set(G.name,Y)}}function g(){l.pop().handleEnd()}var y=/^<\?xml /i,v=/ encoding="([^"]+)"/i,x=/^utf-8$/i;function C(D){if(y.test(D)){var I=v.exec(D),z=I&&I[1];!z||x.test(z)||a.addWarning({message:"unsupported document encoding <"+z+">, falling back to UTF-8"})}}function k(D,I){var z=l.peek();try{l.push(z.handleNode(D))}catch(L){c(L,I,o)&&l.push(new Jv)}}function R(D,I){try{l.peek().handleText(D)}catch(z){f(z,I)}}function E(D,I){D.trim()&&R(D,I)}var b=i.getPackages().reduce(function(D,I){return D[I.uri]=I.prefix,D},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(b).on("openTag",function(D,I,z,L){var Q=D.attrs||{},Y=Object.keys(Q).reduce(function(ae,oe){var Ce=I(Q[oe]);return ae[oe]=Ce,ae},{}),G={name:D.name,originalName:D.originalName,attributes:Y,ns:D.ns};k(G,L)}).on("question",C).on("closeTag",g).on("cdata",R).on("text",function(D,I,z){E(I(D),z)}).on("error",c).on("warn",f),new Promise(function(D,I){var z;try{s.parse(e),d()}catch(ae){z=ae}var L=r.element;!z&&!L&&(z=xa("failed to parse document as <"+r.type.$descriptor.name+">"));var Q=a.warnings,Y=a.references,G=a.elementsById;return z?(z.warnings=Q,I(z)):D({rootElement:L,elementsById:G,references:Y,warnings:Q})})};n0.prototype.handler=function(e){return new t0(this.model,e)};function SD(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var CD=`<?xml version="1.0" encoding="UTF-8"?>
`,RD=/<|>|'|"|&|\n\r|\n/g,lR=/<|>|&/g;function kD(e){var t={},n={},r={},i=[],o=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?i.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,l=this.getNSKey(a);r[l]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(f){var d=l.getNSKey(f);return r[d]}var l=this,c=[].concat(i,o);return c.filter(s)}}function PD(e){return e.charAt(0).toLowerCase()+e.slice(1)}function TD(e,t){return iR(t)?PD(e):e}function uR(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function cR(e){return Ir(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function AD(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function MD(e,t){return t.isGeneric?q({localName:t.ns.localName},e):q({localName:TD(t.ns.localName,t.$pkg)},e)}function ND(e,t){return q({localName:t.ns.localName},e)}function DD(e){var t=e.$descriptor;return ht(t.properties,function(n){var r=n.name;if(n.isVirtual||!vr(e,r))return!1;var i=e[r];return i===n.default||i===null?!1:n.isMany?i.length:!0})}var OD={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},LD={"<":"lt",">":"gt","&":"amp"};function pR(e,t,n){return e=Ir(e)?e:""+e,e.replace(t,function(r){return"&"+n[r]+";"})}function BD(e){return pR(e,RD,OD)}function ID(e){return pR(e,lR,LD)}function jD(e){return ht(e,function(t){return t.isAttr})}function $D(e){return ht(e,function(t){return!t.isAttr})}function r0(e){this.tagName=e}r0.prototype.build=function(e){return this.element=e,this};r0.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function xs(){}xs.prototype.serializeValue=xs.prototype.serializeTo=function(e){e.append(this.escape?ID(this.value):this.value)};xs.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(lR)!==-1&&(this.escape=!0),this};function i0(e){this.tagName=e}uR(i0,xs);i0.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Xt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Xt.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,r,i,o=t.isGeneric;return o?r=this.parseGeneric(e):r=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(i=DD(e),this.parseAttributes(jD(i)),this.parseContainments($D(i))),this.parseGenericAttributes(e,r),this};Xt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return MD(t,e)};Xt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return ND(t,e)};Xt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Xt.prototype.nsAttributeName=function(e){var t;if(Ir(e)?t=ur(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:q({localName:t.localName},n)};Xt.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];return W(e,function(i,o){var a;o==="$body"?n.push(new xs().build({type:"String"},i)):o==="$children"?W(i,function(s){n.push(new Xt(t).build(s))}):o.indexOf("$")!==0&&(a=t.parseNsAttribute(e,o,i),a&&r.push({name:o,value:i}))}),r};Xt.prototype.parseNsAttribute=function(e,t,n){var r=e.$model,i=ur(t),o;if(i.prefix==="xmlns"&&(o={prefix:i.localName,uri:n}),!i.prefix&&i.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}};Xt.prototype.parseNsAttributes=function(e,t){var n=this,r=e.$attrs,i=[];return W(r,function(o,a){var s=n.parseNsAttribute(e,a,o);s&&i.push(s)}),i};Xt.prototype.parseGenericAttributes=function(e,t){var n=this;W(t,function(r){if(r.name!==th)try{n.addAttribute(n.nsAttributeName(r.name),r.value)}catch(i){console.warn("missing namespace information for ",r.name,"=",r.value,"on",e,i)}})};Xt.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;W(e,function(i){var o=r.get(i.name),a=i.isReference,s=i.isMany;if(s||(o=[o]),i.isBody)n.push(new xs().build(i,o[0]));else if(tR(i.type))W(o,function(f){n.push(new i0(t.addTagName(t.nsPropertyTagName(i))).build(i,f))});else if(a)W(o,function(f){n.push(new r0(t.addTagName(t.nsPropertyTagName(i))).build(f))});else{var l=aR(i),c=xD(i);W(o,function(f){var d;l?d=new rh(t,i):c?d=new Xt(t,i):d=new Xt(t),n.push(d.build(f))})}})};Xt.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,r;return t||(r=n&&n.getNamespaces(),e||!r?this.namespaces=t=new kD(r):t=r),t};Xt.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,o=e.prefix,a=r.byUri(i);return(!a||n)&&r.add(e,t),r.mapPrefix(o,i),e};Xt.prototype.logNamespaceUsed=function(e,t){var n=this.element,r=n.$model,i=this.getNamespaces(t),o=e.prefix,a=e.uri,s,l,c;if(!o&&!a)return{localName:e.localName};if(c=vD[o]||r&&(r.getPackage(o)||{}).uri,a=a||c||i.uriByPrefix(o),!a)throw new Error("no namespace uri given for prefix <"+o+">");if(e=i.byUri(a),!e){for(s=o,l=1;i.uriByPrefix(s);)s=o+"_"+l++;e=this.logNamespace({prefix:s,uri:a},c===a)}return o&&i.mapPrefix(o,a),e};Xt.prototype.parseAttributes=function(e){var t=this,n=this.element;W(e,function(r){var i=n.get(r.name);if(r.isReference)if(!r.isMany)i=i.id;else{var o=[];W(i,function(a){o.push(a.id)}),i=o.join(" ")}t.addAttribute(t.nsAttributeName(r),i)})};Xt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),cR(e)};Xt.prototype.addAttribute=function(e,t){var n=this.attrs;Ir(t)&&(t=BD(t));var r=_C(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),i={name:e,value:t};r!==-1?n.splice(r,1,i):n.push(i)};Xt.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=AD(n).concat(t)),W(t,function(r){e.append(" ").append(cR(r.name)).append('="').append(r.value).append('"')})};Xt.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==xs;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),W(this.body,function(r){r.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function rh(e,t){Xt.call(this,e,t)}uR(rh,Xt);rh.prototype.parseNsAttributes=function(e){var t=Xt.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(r.uri),o=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(th),(r.prefix?r.prefix+":":"")+o+n.ns.localName),t};rh.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function FD(){this.value="",this.write=function(e){this.value+=e}}function zD(e,t){var n=[""];this.append=function(r){return e.write(r),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function HD(e){e=q({format:!1,preamble:!0},e||{});function t(n,r){var i=r||new FD,o=new zD(i,e.format);if(e.preamble&&o.append(CD),new Xt().build(n).serializeTo(o),!r)return i.value}return{toXML:t}}function ih(e,t){Ei.call(this,e,t)}ih.prototype=Object.create(Ei.prototype);ih.prototype.fromXML=function(e,t,n){Ir(t)||(n=t,t="bpmn:Definitions");var r=new n0(q({model:this,lax:!0},n)),i=r.handler(t);return r.fromXML(e,i)};ih.prototype.toXML=function(e,t){var n=new HD(t);return new Promise(function(r,i){try{var o=n.toXML(e);return r({xml:o})}catch(a){return i(a)}})};var VD="BPMN20",WD="http://www.omg.org/spec/BPMN/20100524/MODEL",UD="bpmn",GD=[],KD=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],YD=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],qD={tagAlias:"lowerCase",typePrefix:"t"},XD={name:VD,uri:WD,prefix:UD,associations:GD,types:KD,enumerations:YD,xml:qD},QD="BPMNDI",ZD="http://www.omg.org/spec/BPMN/20100524/DI",JD="bpmndi",eO=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],tO=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],nO=[],rO={name:QD,uri:ZD,prefix:JD,types:eO,enumerations:tO,associations:nO},iO="DC",oO="http://www.omg.org/spec/DD/20100524/DC",aO="dc",sO=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],lO=[],uO={name:iO,uri:oO,prefix:aO,types:sO,associations:lO},cO="DI",pO="http://www.omg.org/spec/DD/20100524/DI",fO="di",dO=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],hO=[],mO={tagAlias:"lowerCase"},gO={name:cO,uri:pO,prefix:fO,types:dO,associations:hO,xml:mO},yO="bpmn.io colors for BPMN",vO="http://bpmn.io/schema/bpmn/biocolor/1.0",xO="bioc",_O=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],wO=[],EO=[],bO={name:yO,uri:vO,prefix:xO,types:_O,enumerations:wO,associations:EO},SO="BPMN in Color",CO="http://www.omg.org/spec/BPMN/non-normative/color/1.0",RO="color",kO=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],PO=[],TO=[],AO={name:SO,uri:CO,prefix:RO,types:kO,enumerations:PO,associations:TO},MO={bpmn:XD,bpmndi:rO,dc:uO,di:gO,bioc:bO,color:AO};function NO(e,t){var n=q({},MO,e);return new ih(n,t)}function qn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var DO="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function fR(e){vr(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(DO)}})}function gr(e,t){return e.$instanceOf(t)}function OO(e){return At(e.rootElements,function(t){return gr(t,"bpmn:Process")||gr(t,"bpmn:Collaboration")})}function LO(e){var t={},n=[],r={};function i(X,Z){return function(se){X(se,Z)}}function o(X){t[X.id]=X}function a(X){return t[X.id]}function s(X,Z){var se=X.gfx;if(se)throw new Error(`already rendered ${qn(X)}`);return e.element(X,r[X.id],Z)}function l(X,Z){return e.root(X,r[X.id],Z)}function c(X,Z){try{var se=r[X.id]&&s(X,Z);return o(X),se}catch(he){f(he.message,{element:X,error:he}),console.error(`failed to import ${qn(X)}`,he)}}function f(X,Z){e.error(X,Z)}var d=this.registerDi=function(Z){var se=Z.bpmnElement;se?r[se.id]?f(`multiple DI elements defined for ${qn(se)}`,{element:se}):(r[se.id]=Z,fR(se)):f(`no bpmnElement referenced in ${qn(Z)}`,{element:Z})};function g(X){y(X.plane)}function y(X){d(X),W(X.planeElement,v)}function v(X){d(X)}this.handleDefinitions=function(Z,se){var he=Z.diagrams;if(se&&he.indexOf(se)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!se&&he&&he.length&&(se=he[0]),!se)throw new Error("no diagram to display");r={},g(se);var B=se.plane;if(!B)throw new Error(`no plane for ${qn(se)}`);var w=B.bpmnElement;if(!w)if(w=OO(Z),w)f(`correcting missing bpmnElement on ${qn(B)} to ${qn(w)}`),B.bpmnElement=w,d(B);else throw new Error("no process or collaboration to display");var P=l(w,B);if(gr(w,"bpmn:Process")||gr(w,"bpmn:SubProcess"))C(w,P);else if(gr(w,"bpmn:Collaboration"))ue(w,P),k(Z.rootElements,P);else throw new Error(`unsupported bpmnElement for ${qn(B)}: ${qn(w)}`);x(n)};var x=this.handleDeferred=function(){for(var Z;n.length;)Z=n.shift(),Z()};function C(X,Z){Ke(X,Z),Q(X.ioSpecification,Z),L(X.artifacts,Z),o(X)}function k(X,Z){var se=ht(X,function(he){return!a(he)&&gr(he,"bpmn:Process")&&he.laneSets});se.forEach(i(C,Z))}function R(X,Z){c(X,Z)}function E(X,Z){W(X,i(R,Z))}function b(X,Z){c(X,Z)}function D(X,Z){c(X,Z)}function I(X,Z){c(X,Z)}function z(X,Z){c(X,Z)}function L(X,Z){W(X,function(se){gr(se,"bpmn:Association")?n.push(function(){z(se,Z)}):z(se,Z)})}function Q(X,Z){X&&(W(X.dataInputs,i(D,Z)),W(X.dataOutputs,i(I,Z)))}var Y=this.handleSubProcess=function(Z,se){Ke(Z,se),L(Z.artifacts,se)};function G(X,Z){var se=c(X,Z);gr(X,"bpmn:SubProcess")&&Y(X,se||Z),gr(X,"bpmn:Activity")&&Q(X.ioSpecification,Z),n.push(function(){W(X.dataInputAssociations,i(b,Z)),W(X.dataOutputAssociations,i(b,Z))})}function ae(X,Z){c(X,Z)}function oe(X,Z){c(X,Z)}function Ce(X,Z){n.push(function(){var se=c(X,Z);X.childLaneSet&&kt(X.childLaneSet,se||Z),ve(X)})}function kt(X,Z){W(X.lanes,i(Ce,Z))}function Ge(X,Z){W(X,i(kt,Z))}function Ke(X,Z){ye(X.flowElements,Z),X.laneSets&&Ge(X.laneSets,Z)}function ye(X,Z){W(X,function(se){gr(se,"bpmn:SequenceFlow")?n.push(function(){ae(se,Z)}):gr(se,"bpmn:BoundaryEvent")?n.unshift(function(){G(se,Z)}):gr(se,"bpmn:FlowNode")?G(se,Z):gr(se,"bpmn:DataObject")||(gr(se,"bpmn:DataStoreReference")||gr(se,"bpmn:DataObjectReference")?oe(se,Z):f(`unrecognized flowElement ${qn(se)} in context ${qn(Z&&Z.businessObject)}`,{element:se,context:Z}))})}function je(X,Z){var se=c(X,Z),he=X.processRef;he&&C(he,se||Z)}function ue(X,Z){W(X.participants,i(je,Z)),L(X.artifacts,Z),n.push(function(){E(X.messageFlows,Z)})}function ve(X){W(X.flowNodeRef,function(Z){var se=Z.get("lanes");se&&se.push(X)})}}function A(e,t){var n=de(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function ft(e,t){return ba(t,function(n){return A(e,n)})}function de(e){return e&&e.businessObject||e}function Ct(e){return e&&e.di}function BO(e,t,n){var r,i,o,a,s=[];function l(c,f){var d={root:function(x,C){return r.add(x,C)},element:function(x,C,k){return r.add(x,C,k)},error:function(x,C){s.push({message:x,context:C})}},g=new LO(d);f=f||c.diagrams&&c.diagrams[0];var y=IO(c,f);if(!y)throw new Error("no diagram to display");W(y,function(x){g.handleDefinitions(c,x)});var v=f.plane.bpmnElement.id;o.setRootElement(o.findRoot(v+"_plane")||o.findRoot(v))}return new Promise(function(c,f){try{return r=e.get("bpmnImporter"),i=e.get("eventBus"),o=e.get("canvas"),i.fire("import.render.start",{definitions:t}),l(t,n),i.fire("import.render.complete",{error:a,warnings:s}),c({warnings:s})}catch(d){return d.warnings=s,f(d)}})}function IO(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,r=n;!A(n,"bpmn:Process")&&!A(n,"bpmn:Collaboration")&&(r=jO(n));var i;A(r,"bpmn:Collaboration")?i=r:i=At(e.rootElements,function(c){if(A(c,"bpmn:Collaboration"))return At(c.participants,function(f){return f.processRef===r})});var o=[r];i&&(o=Zn(i.participants,function(c){return c.processRef}),o.push(i));var a=dR(o),s=[t],l=[n];return W(e.diagrams,function(c){if(c.plane){var f=c.plane.bpmnElement;a.indexOf(f)!==-1&&l.indexOf(f)===-1&&(s.push(c),l.push(f))}}),s}}function dR(e){var t=[];return W(e,function(n){n&&(t.push(n),t=t.concat(dR(n.flowElements)))}),t}function jO(e){for(var t=e;t;){if(A(t,"bpmn:Process"))return t;t=t.$parent}}var $O='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',hR=$O,mR={verticalAlign:"middle"},gR={color:"#404040"},FO={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},zO={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},HO={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},VO='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+hR+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Yi;function WO(){Yi=zt(VO),Xn(Yi,FO),Xn(Bt("svg",Yi),mR),Xn(Bt(".backdrop",Yi),zO),Xn(Bt(".notice",Yi),HO),Xn(Bt(".link",Yi),gR,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function UO(){Yi||(WO(),Dr.bind(Yi,".backdrop","click",function(e){document.body.removeChild(Yi)})),document.body.appendChild(Yi)}function Qt(e){e=q({},KO,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),qO(this._container),this._init(this._container,this._moddle,e)}Oe(Qt,Ra);Qt.prototype.importXML=async function(t,n){const r=this;function i(a){return r.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(g){throw this._emit("import.parse.complete",{error:g}),g}let s=a.rootElement;const l=a.references,c=a.warnings,f=a.elementsById;o=o.concat(c),s=this._emit("import.parse.complete",i({error:null,definitions:s,elementsById:f,references:l,warnings:o}))||s;const d=await this.importDefinitions(s,n);return o=o.concat(d.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),Mf(s,o),s=GO(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}};Qt.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};Qt.prototype.open=async function(t){const n=this._definitions;let r=t;if(!n){const o=new Error("no XML imported");throw Mf(o,[]),o}if(typeof t=="string"&&(r=YO(n,t),!r)){const o=new Error("BPMNDiagram <"+t+"> not found");throw Mf(o,[]),o}try{this.clear()}catch(o){throw Mf(o,[]),o}const{warnings:i}=await BO(this,n,r);return{warnings:i}};Qt.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,r,i;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,i=(await this._moddle.toXML(n,t)).xml,i=this._emit("saveXML.serialized",{xml:i})||i}catch(a){r=a}const o=r?{error:r}:{xml:i};if(this._emit("saveXML.done",o),r)throw r;return o};Qt.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const r=this.get("canvas"),i=r.getActiveLayer(),o=Bt(":scope > defs",r._svg),a=sw(i),s=o?"<defs>"+sw(o)+"</defs>":"",l=i.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+s+a+"</svg>"}catch(r){n=r}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};Qt.prototype._setDefinitions=function(e){this._definitions=e};Qt.prototype.getModules=function(){return this._modules};Qt.prototype.clear=function(){this.getDefinitions()&&Ra.prototype.clear.call(this)};Qt.prototype.destroy=function(){Ra.prototype.destroy.call(this),no(this._container)};Qt.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)};Qt.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Qt.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Bt(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Qt.prototype.getDefinitions=function(){return this._definitions};Qt.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Qt.prototype._init=function(e,t,n){const r=n.modules||this.getModules(n),i=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,r,i),s=q(_i(n,["additionalModules"]),{canvas:q({},n.canvas,{container:e}),modules:a});Ra.call(this,s),n&&n.container&&this.attachTo(n.container)};Qt.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Qt.prototype._createContainer=function(e){const t=zt('<div class="bjs-container"></div>');return Xn(t,{width:kw(e.width),height:kw(e.height),position:e.position}),t};Qt.prototype._createModdle=function(e){const t=q({},this._moddleExtensions,e.moddleExtensions);return new NO(t)};Qt.prototype._modules=[];function Mf(e,t){return e.warnings=t,e}function GO(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const KO={width:"100%",height:"100%",position:"relative"};function kw(e){return e+(Ze(e)?"px":"")}function YO(e,t){return t&&At(e.diagrams,function(n){return n.id===t})||null}function qO(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+hR+"</a>",r=zt(n);Xn(Bt("svg",r),mR),Xn(r,gR,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(r),it.bind(r,"click",function(i){UO(),i.preventDefault()})}function Dc(e){Qt.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}Oe(Dc,Qt);Dc.prototype._createModdle=function(e){var t=Qt.prototype._createModdle.call(this,e);return t.ids=new eo([32,36,1]),t};Dc.prototype._collectIds=function(e,t){var n=e.$model,r=n.ids,i;r.clear();for(i in t)r.claim(i,t[i])};function yt(e,t){return A(e,"bpmn:CallActivity")?!1:A(e,"bpmn:SubProcess")?(t=t||Ct(e),t&&A(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):A(e,"bpmn:Participant")?!!de(e).processRef:!0}function Mn(e){if(!(!A(e,"bpmn:Participant")&&!A(e,"bpmn:Lane"))){var t=Ct(e).isHorizontal;return t===void 0?!0:t}}function XO(e){return e&&de(e).isInterrupting!==!1}function Jn(e){return e&&!!de(e).triggeredByEvent}function zl(e,t){var n=de(e).eventDefinitions;return ba(n,function(r){return A(r,t)})}function QO(e){return zl(e,"bpmn:ErrorEventDefinition")}function ZO(e){return zl(e,"bpmn:EscalationEventDefinition")}function JO(e){return zl(e,"bpmn:CompensateEventDefinition")}var dc={width:90,height:20},Pw=15;function _s(e){return A(e,"bpmn:Event")||A(e,"bpmn:Gateway")||A(e,"bpmn:DataStoreReference")||A(e,"bpmn:DataObjectReference")||A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput")||A(e,"bpmn:SequenceFlow")||A(e,"bpmn:MessageFlow")||A(e,"bpmn:Group")}function oh(e){return Rt(e.label)}function e4(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)],i=t4(e),o=Math.atan((r.y-n.y)/(r.x-n.x)),a=i.x,s=i.y;return Math.abs(o)<Math.PI/2?s-=Pw:a+=Pw,{x:a,y:s}}function t4(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}function o0(e){return e.waypoints?e4(e.waypoints):A(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+dc.height/2}:{x:e.x+e.width/2,y:e.y+e.height+dc.height/2}}function n4(e,t){var n,r,i,o=e.label;return o&&o.bounds?(i=o.bounds,r={width:Math.max(dc.width,i.width),height:i.height},n={x:i.x+i.width/2,y:i.y+i.height/2}):(n=o0(t),r=dc),q({x:n.x-r.width/2,y:n.y-r.height/2},r)}function yR(e){if(A(e,"bpmn:FlowElement")||A(e,"bpmn:Participant")||A(e,"bpmn:Lane")||A(e,"bpmn:SequenceFlow")||A(e,"bpmn:MessageFlow")||A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput"))return"name";if(A(e,"bpmn:TextAnnotation"))return"text";if(A(e,"bpmn:Group"))return"categoryValueRef"}function r4(e){var t=e.categoryValueRef;return t&&t.value||""}function Xr(e){var t=e.businessObject,n=yR(t);if(n)return n==="categoryValueRef"?r4(t):t[n]||""}function i4(e,t){var n=e.businessObject,r=yR(n);return r&&(r==="categoryValueRef"?n.categoryValueRef.value=t:n[r]=t),e}var _y="hsl(225, 10%, 15%)",o4="white";function Wi(e,t){return ba(e.eventDefinitions,function(n){return n.$type===t})}function a4(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function s4(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function dt(e,t,n){var r=Ct(e);return n||r.get("color:background-color")||r.get("bioc:fill")||t||o4}function Ae(e,t,n){var r=Ct(e);return n||r.get("color:border-color")||r.get("bioc:stroke")||t||_y}function yu(e,t,n,r){var i=Ct(e),o=i.get("label");return r||o&&o.get("color:color")||t||Ae(e,n)}function l4(e){var t=e.x+e.width/2,n=e.y+e.height/2,r=e.width/2,i=[["M",t,n],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]];return Cs(i)}function u4(e,t){var n=e.x,r=e.y,i=e.width,o=e.height,a=[["M",n+t,r],["l",i-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-i,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Cs(a)}function c4(e){var t=e.width,n=e.height,r=e.x,i=e.y,o=t/2,a=n/2,s=[["M",r+o,i],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return Cs(s)}function p4(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=[["M",t,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return Cs(o)}function vu(e,t={}){return{width:ci(e,t),height:Ar(e,t)}}function ci(e,t={}){return vr(t,"width")?t.width:e.width}function Ar(e,t={}){return vr(t,"height")?t.height:e.height}var f4=new eo,d4=10,Gp=3,h4=1.5,Nf=10,Gs=.95,m4=1,g4=.25;function Ps(e,t,n,r,i,o,a){Ao.call(this,t,a);var s=e&&e.defaultFillColor,l=e&&e.defaultStrokeColor,c=e&&e.defaultLabelColor;function f(B){return n.computeStyle(B,{strokeLinecap:"round",strokeLinejoin:"round",stroke:_y,strokeWidth:2,fill:"white"})}function d(B){return n.computeStyle(B,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:_y,strokeWidth:2})}function g(B,w){var{ref:P={x:0,y:0},scale:F=1,element:K,parentGfx:le=i._svg}=w,Me=Fe("marker",{id:B,viewBox:"0 0 20 20",refX:P.x,refY:P.y,markerWidth:20*F,markerHeight:20*F,orient:"auto"});tt(Me,K);var we=Bt(":scope > defs",le);we||(we=Fe("defs"),tt(le,we)),tt(we,Me)}function y(B,w,P,F){var K=f4.nextPrefixed("marker-");return v(B,K,w,P,F),"url(#"+K+")"}function v(B,w,P,F,K){if(P==="sequenceflow-end"){var le=Fe("path",{d:"M 1 5 L 11 10 L 1 15 Z",...f({fill:K,stroke:K,strokeWidth:1})});g(w,{element:le,ref:{x:11,y:10},scale:.5,parentGfx:B})}if(P==="messageflow-start"){var Me=Fe("circle",{cx:6,cy:6,r:3.5,...f({fill:F,stroke:K,strokeWidth:1,strokeDasharray:[1e4,1]})});g(w,{element:Me,ref:{x:6,y:6},parentGfx:B})}if(P==="messageflow-end"){var we=Fe("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...f({fill:F,stroke:K,strokeWidth:1,strokeDasharray:[1e4,1]})});g(w,{element:we,ref:{x:8.5,y:5},parentGfx:B})}if(P==="association-start"){var ce=Fe("path",{d:"M 11 5 L 1 10 L 11 15",...d({fill:"none",stroke:K,strokeWidth:1.5,strokeDasharray:[1e4,1]})});g(w,{element:ce,ref:{x:1,y:10},scale:.5,parentGfx:B})}if(P==="association-end"){var Ve=Fe("path",{d:"M 1 5 L 11 10 L 1 15",...d({fill:"none",stroke:K,strokeWidth:1.5,strokeDasharray:[1e4,1]})});g(w,{element:Ve,ref:{x:11,y:10},scale:.5,parentGfx:B})}if(P==="conditional-flow-marker"){var vt=Fe("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...f({fill:F,stroke:K})});g(w,{element:vt,ref:{x:-1,y:10},scale:.5,parentGfx:B})}if(P==="conditional-default-flow-marker"){var Qe=Fe("path",{d:"M 6 4 L 10 16",...f({stroke:K,fill:"none"})});g(w,{element:Qe,ref:{x:0,y:10},scale:.5,parentGfx:B})}}function x(B,w,P,F,K={}){In(F)&&(K=F,F=0),F=F||0,K=f(K);var le=w/2,Me=P/2,we=Fe("circle",{cx:le,cy:Me,r:Math.round((w+P)/4-F),...K});return tt(B,we),we}function C(B,w,P,F,K,le){In(K)&&(le=K,K=0),K=K||0,le=f(le);var Me=Fe("rect",{x:K,y:K,width:w-K*2,height:P-K*2,rx:F,ry:F,...le});return tt(B,Me),Me}function k(B,w,P,F){var K=w/2,le=P/2,Me=[{x:K,y:0},{x:w,y:le},{x:K,y:P},{x:0,y:le}],we=Me.map(function(Ve){return Ve.x+","+Ve.y}).join(" ");F=f(F);var ce=Fe("polygon",{...F,points:we});return tt(B,ce),ce}function R(B,w,P,F){P=d(P);var K=Zd(w,P,F);return tt(B,K),K}function E(B,w,P){return R(B,w,P,5)}function b(B,w,P){P=d(P);var F=Fe("path",{...P,d:w});return tt(B,F),F}function D(B,w,P,F){return b(w,P,q({"data-marker":B},F))}function I(B){return he[B]}function z(B){return function(w,P,F){return I(B)(w,P,F)}}var L={"bpmn:MessageEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:w.width,containerHeight:w.height,position:{mx:.235,my:.315}}),le=F?Ae(w,l,P.stroke):dt(w,s,P.fill),Me=F?dt(w,s,P.fill):Ae(w,l,P.stroke),we=b(B,K,{fill:le,stroke:Me,strokeWidth:1});return we},"bpmn:TimerEventDefinition":function(B,w,P={}){var F=x(B,w.width,w.height,.2*w.height,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:2}),K=r.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.5}});b(B,K,{stroke:Ae(w,l,P.stroke),strokeWidth:2});for(var le=0;le<12;le++){var Me=r.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.5}}),we=w.width/2,ce=w.height/2;b(B,Me,{strokeWidth:1,stroke:Ae(w,l,P.stroke),transform:"rotate("+le*30+","+ce+","+we+")"})}return F},"bpmn:EscalationEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.2}}),le=F?Ae(w,l,P.stroke):dt(w,s,P.fill);return b(B,K,{fill:le,stroke:Ae(w,l,P.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(B,w,P={}){var F=r.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.222}});return b(B,F,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.57,my:.263}}),le=F?Ae(w,l,P.stroke):dt(w,s,P.fill);return b(B,K,{fill:le,stroke:Ae(w,l,P.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:w.width,containerHeight:w.height,position:{mx:.2,my:.722}}),le=F?Ae(w,l,P.stroke):dt(w,s,P.fill);return b(B,K,{fill:le,stroke:Ae(w,l,P.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.638,my:-.055}}),le=F?Ae(w,l,P.stroke):"none",Me=b(B,K,{fill:le,stroke:Ae(w,l,P.stroke),strokeWidth:1});return QC(Me,45),Me},"bpmn:CompensateEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.22,my:.5}}),le=F?Ae(w,l,P.stroke):dt(w,s,P.fill);return b(B,K,{fill:le,stroke:Ae(w,l,P.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:w.width,containerHeight:w.height,position:{mx:.5,my:.2}}),le=F?Ae(w,l,P.stroke):dt(w,s,P.fill);return b(B,K,{strokeWidth:1,fill:le,stroke:Ae(w,l,P.stroke)})},"bpmn:MultipleEventDefinition":function(B,w,P={},F){var K=r.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:w.width,containerHeight:w.height,position:{mx:.222,my:.36}}),le=F?Ae(w,l,P.stroke):dt(w,s,P.fill);return b(B,K,{fill:le,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(B,w,P={}){var F=r.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:w.width,containerHeight:w.height,position:{mx:.458,my:.194}});return b(B,F,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(B,w,P={}){var F=x(B,w.width,w.height,8,{fill:Ae(w,l,P.stroke),stroke:Ae(w,l,P.stroke),strokeWidth:4});return F}};function Q(B,w,P={}){var F=de(B),K=a4(F);return F.get("eventDefinitions")&&F.get("eventDefinitions").length>1?F.get("parallelMultiple")?L["bpmn:ParallelMultipleEventDefinition"](w,B,P,K):L["bpmn:MultipleEventDefinition"](w,B,P,K):Wi(F,"bpmn:MessageEventDefinition")?L["bpmn:MessageEventDefinition"](w,B,P,K):Wi(F,"bpmn:TimerEventDefinition")?L["bpmn:TimerEventDefinition"](w,B,P,K):Wi(F,"bpmn:ConditionalEventDefinition")?L["bpmn:ConditionalEventDefinition"](w,B,P,K):Wi(F,"bpmn:SignalEventDefinition")?L["bpmn:SignalEventDefinition"](w,B,P,K):Wi(F,"bpmn:EscalationEventDefinition")?L["bpmn:EscalationEventDefinition"](w,B,P,K):Wi(F,"bpmn:LinkEventDefinition")?L["bpmn:LinkEventDefinition"](w,B,P,K):Wi(F,"bpmn:ErrorEventDefinition")?L["bpmn:ErrorEventDefinition"](w,B,P,K):Wi(F,"bpmn:CancelEventDefinition")?L["bpmn:CancelEventDefinition"](w,B,P,K):Wi(F,"bpmn:CompensateEventDefinition")?L["bpmn:CompensateEventDefinition"](w,B,P,K):Wi(F,"bpmn:TerminateEventDefinition")?L["bpmn:TerminateEventDefinition"](w,B,P,K):null}var Y={ParticipantMultiplicityMarker:function(B,w,P={}){var F=ci(w,P),K=Ar(w,P),le=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:K,position:{mx:(F/2-6)/F,my:(K-15)/K}});D("participant-multiplicity",B,le,{strokeWidth:2,fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)})},SubProcessMarker:function(B,w,P={}){var F=C(B,14,14,0,{strokeWidth:1,fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)});Hn(F,w.width/2-7.5,w.height-20);var K=r.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:w.width,containerHeight:w.height,position:{mx:(w.width/2-7.5)/w.width,my:(w.height-20)/w.height}});D("sub-process",B,K,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)})},ParallelMarker:function(B,w,P){var F=ci(w,P),K=Ar(w,P),le=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:K,position:{mx:(F/2+P.parallel)/F,my:(K-20)/K}});D("parallel",B,le,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)})},SequentialMarker:function(B,w,P){var F=r.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:(w.width/2+P.seq)/w.width,my:(w.height-19)/w.height}});D("sequential",B,F,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)})},CompensationMarker:function(B,w,P){var F=r.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:(w.width/2+P.compensation)/w.width,my:(w.height-13)/w.height}});D("compensation",B,F,{strokeWidth:1,fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)})},LoopMarker:function(B,w,P){var F=ci(w,P),K=Ar(w,P),le=r.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:K,position:{mx:(F/2+P.loop)/F,my:(K-7)/K}});D("loop",B,le,{strokeWidth:1.5,fill:"none",stroke:Ae(w,l,P.stroke),strokeMiterlimit:.5})},AdhocMarker:function(B,w,P){var F=ci(w,P),K=Ar(w,P),le=r.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:K,position:{mx:(F/2+P.adhoc)/F,my:(K-15)/K}});D("adhoc",B,le,{strokeWidth:1,fill:Ae(w,l,P.stroke),stroke:Ae(w,l,P.stroke)})}};function G(B,w,P,F){Y[B](w,P,F)}function ae(B,w,P,F={}){F={fill:F.fill,stroke:F.stroke,width:ci(w,F),height:Ar(w,F)};var K=de(w),le=P&&P.includes("SubProcessMarker");le?F={...F,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:F={...F,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},W(P,function(ce){G(ce,B,w,F)}),K.get("isForCompensation")&&G("CompensationMarker",B,w,F),A(K,"bpmn:AdHocSubProcess")&&G("AdhocMarker",B,w,F);var Me=K.get("loopCharacteristics"),we=Me&&Me.get("isSequential");Me&&(we===void 0&&G("LoopMarker",B,w,F),we===!1&&G("ParallelMarker",B,w,F),we===!0&&G("SequentialMarker",B,w,F))}function oe(B,w,P={}){P=q({size:{width:100}},P);var F=o.createText(w||"",P);return St(F).add("djs-label"),tt(B,F),F}function Ce(B,w,P,F={}){var K=de(w),le=vu({x:w.x,y:w.y,width:w.width,height:w.height},F);return oe(B,K.name,{align:P,box:le,padding:7,style:{fill:yu(w,c,l,F.stroke)}})}function kt(B,w,P={}){var F={width:90,height:30,x:w.width/2+w.x,y:w.height/2+w.y};return oe(B,Xr(w),{box:F,fitBox:!0,style:q({},o.getExternalStyle(),{fill:yu(w,c,l,P.stroke)})})}function Ge(B,w,P,F={}){var K=Mn(P),le=oe(B,w,{box:{height:30,width:K?Ar(P,F):ci(P,F)},align:"center-middle",style:{fill:yu(P,c,l,F.stroke)}});if(K){var Me=-1*Ar(P,F);Af(le,0,-Me,270)}}function Ke(B,w,P={}){var{width:F,height:K}=vu(w,P);return C(B,F,K,Nf,{...P,fill:dt(w,s,P.fill),fillOpacity:Gs,stroke:Ae(w,l,P.stroke)})}function ye(B,w,P={}){var F=de(w),K=dt(w,s,P.fill),le=Ae(w,l,P.stroke);return(F.get("associationDirection")==="One"||F.get("associationDirection")==="Both")&&(P.markerEnd=y(B,"association-end",K,le)),F.get("associationDirection")==="Both"&&(P.markerStart=y(B,"association-start",K,le)),P=bt(P,["markerStart","markerEnd"]),E(B,w.waypoints,{...P,stroke:le,strokeDasharray:"0, 5"})}function je(B,w,P={}){var F=dt(w,s,P.fill),K=Ae(w,l,P.stroke),le=r.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.474,my:.296}}),Me=b(B,le,{fill:F,fillOpacity:Gs,stroke:K}),we=de(w);if(s4(we)){var ce=r.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:.33,my:(w.height-18)/w.height}});b(B,ce,{strokeWidth:2,fill:F,stroke:K})}return Me}function ue(B,w,P={}){return x(B,w.width,w.height,{fillOpacity:Gs,...P,fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)})}function ve(B,w,P={}){return k(B,w.width,w.height,{fill:dt(w,s,P.fill),fillOpacity:Gs,stroke:Ae(w,l,P.stroke)})}function X(B,w,P={}){var F=C(B,ci(w,P),Ar(w,P),0,{fill:dt(w,s,P.fill),fillOpacity:P.fillOpacity||Gs,stroke:Ae(w,l,P.stroke),strokeWidth:1.5}),K=de(w);if(A(K,"bpmn:Lane")){var le=K.get("name");Ge(B,le,w,P)}return F}function Z(B,w,P={}){var F=Ke(B,w,P);Jn(w)&&ke(F,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var K=yt(w);return Ce(B,w,K?"center-top":"center-middle",P),K?ae(B,w,void 0,P):ae(B,w,["SubProcessMarker"],P),F}function se(B,w,P={}){var F=Ke(B,w,P);return Ce(B,w,"center-middle",P),ae(B,w,void 0,P),F}var he=this.handlers={"bpmn:AdHocSubProcess":function(B,w,P={}){return yt(w)?P=bt(P,["fill","stroke","width","height"]):P=bt(P,["fill","stroke"]),Z(B,w,P)},"bpmn:Association":function(B,w,P={}){return P=bt(P,["fill","stroke"]),ye(B,w,P)},"bpmn:BoundaryEvent":function(B,w,P={}){var{renderIcon:F=!0}=P;P=bt(P,["fill","stroke"]);var K=de(w),le=K.get("cancelActivity");P={strokeWidth:1.5,fill:dt(w,s,P.fill),fillOpacity:m4,stroke:Ae(w,l,P.stroke)},le||(P.strokeDasharray="6");var Me=ue(B,w,P);return x(B,w.width,w.height,Gp,{...P,fill:"none"}),F&&Q(w,B,P),Me},"bpmn:BusinessRuleTask":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=se(B,w,P),K=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),le=b(B,K);ke(le,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1});var Me=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),we=b(B,Me);return ke(we,{fill:Ae(w,l,P.stroke),stroke:Ae(w,l,P.stroke),strokeWidth:1}),F},"bpmn:CallActivity":function(B,w,P={}){return P=bt(P,["fill","stroke"]),Z(B,w,{strokeWidth:5,...P})},"bpmn:ComplexGateway":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=ve(B,w,P),K=r.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:w.width,containerHeight:w.height,position:{mx:.46,my:.26}});return b(B,K,{fill:Ae(w,l,P.stroke),stroke:Ae(w,l,P.stroke),strokeWidth:1}),F},"bpmn:DataInput":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=r.getRawPath("DATA_ARROW"),K=je(B,w,P);return b(B,F,{fill:"none",stroke:Ae(w,l,P.stroke),strokeWidth:1}),K},"bpmn:DataInputAssociation":function(B,w,P={}){return P=bt(P,["fill","stroke"]),ye(B,w,{...P,markerEnd:y(B,"association-end",dt(w,s,P.fill),Ae(w,l,P.stroke))})},"bpmn:DataObject":function(B,w,P={}){return P=bt(P,["fill","stroke"]),je(B,w,P)},"bpmn:DataObjectReference":z("bpmn:DataObject"),"bpmn:DataOutput":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=r.getRawPath("DATA_ARROW"),K=je(B,w,P);return b(B,F,{strokeWidth:1,fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke)}),K},"bpmn:DataOutputAssociation":function(B,w,P={}){return P=bt(P,["fill","stroke"]),ye(B,w,{...P,markerEnd:y(B,"association-end",dt(w,s,P.fill),Ae(w,l,P.stroke))})},"bpmn:DataStoreReference":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=r.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:w.width,containerHeight:w.height,position:{mx:0,my:.133}});return b(B,F,{fill:dt(w,s,P.fill),fillOpacity:Gs,stroke:Ae(w,l,P.stroke),strokeWidth:2})},"bpmn:EndEvent":function(B,w,P={}){var{renderIcon:F=!0}=P;P=bt(P,["fill","stroke"]);var K=ue(B,w,{...P,strokeWidth:4});return F&&Q(w,B,P),K},"bpmn:EventBasedGateway":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=de(w),K=ve(B,w,P);x(B,w.width,w.height,w.height*.2,{fill:dt(w,"none",P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1});var le=F.get("eventGatewayType"),Me=!!F.get("instantiate");function we(){var Ve=r.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:w.width,containerHeight:w.height,position:{mx:.36,my:.44}});b(B,Ve,{fill:"none",stroke:Ae(w,l,P.stroke),strokeWidth:2})}if(le==="Parallel"){var ce=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:w.width,containerHeight:w.height,position:{mx:.474,my:.296}});b(B,ce,{fill:"none",stroke:Ae(w,l,P.stroke),strokeWidth:1})}else le==="Exclusive"&&(Me||x(B,w.width,w.height,w.height*.26,{fill:"none",stroke:Ae(w,l,P.stroke),strokeWidth:1}),we());return K},"bpmn:ExclusiveGateway":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=ve(B,w,P),K=r.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:w.width,containerHeight:w.height,position:{mx:.32,my:.3}}),le=Ct(w);return le.get("isMarkerVisible")&&b(B,K,{fill:Ae(w,l,P.stroke),stroke:Ae(w,l,P.stroke),strokeWidth:1}),F},"bpmn:Gateway":function(B,w,P={}){return P=bt(P,["fill","stroke"]),ve(B,w,P)},"bpmn:Group":function(B,w,P={}){return P=bt(P,["fill","stroke","width","height"]),C(B,w.width,w.height,Nf,{stroke:Ae(w,l,P.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:ci(w,P),height:Ar(w,P)})},"bpmn:InclusiveGateway":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=ve(B,w,P);return x(B,w.width,w.height,w.height*.24,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:2.5}),F},"bpmn:IntermediateEvent":function(B,w,P={}){var{renderIcon:F=!0}=P;P=bt(P,["fill","stroke"]);var K=ue(B,w,{...P,strokeWidth:1.5});return x(B,w.width,w.height,Gp,{fill:"none",stroke:Ae(w,l,P.stroke),strokeWidth:1.5}),F&&Q(w,B,P),K},"bpmn:IntermediateCatchEvent":z("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":z("bpmn:IntermediateEvent"),"bpmn:Lane":function(B,w,P={}){return P=bt(P,["fill","stroke","width","height"]),X(B,w,{...P,fillOpacity:g4})},"bpmn:ManualTask":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=se(B,w,P),K=r.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return b(B,K,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:.5}),F},"bpmn:MessageFlow":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=de(w),K=Ct(w),le=dt(w,s,P.fill),Me=Ae(w,l,P.stroke),we=E(B,w.waypoints,{markerEnd:y(B,"messageflow-end",le,Me),markerStart:y(B,"messageflow-start",le,Me),stroke:Me,strokeDasharray:"10, 11",strokeWidth:1.5});if(F.get("messageRef")){var ce=we.getPointAtLength(we.getTotalLength()/2),Ve=r.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:ce.x,y:ce.y}}),vt={strokeWidth:1};K.get("messageVisibleKind")==="initiating"?(vt.fill=le,vt.stroke=Me):(vt.fill=Me,vt.stroke=le);var Qe=b(B,Ve,vt),xt=F.get("messageRef"),gt=xt.get("name"),ze=oe(B,gt,{align:"center-top",fitBox:!0,style:{fill:Me}}),ee=Qe.getBBox(),Xe=ze.getBBox(),Dt=ce.x-Xe.width/2,Se=ce.y+ee.height/2+d4;Af(ze,Dt,Se,0)}return we},"bpmn:ParallelGateway":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=ve(B,w,P),K=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:w.width,containerHeight:w.height,position:{mx:.46,my:.2}});return b(B,K,{fill:Ae(w,l,P.stroke),stroke:Ae(w,l,P.stroke),strokeWidth:1}),F},"bpmn:Participant":function(B,w,P={}){P=bt(P,["fill","stroke","width","height"]);var F=X(B,w,P),K=yt(w),le=Mn(w),Me=de(w),we=Me.get("name");if(K){var ce=le?[{x:30,y:0},{x:30,y:Ar(w,P)}]:[{x:0,y:30},{x:ci(w,P),y:30}];R(B,ce,{stroke:Ae(w,l,P.stroke),strokeWidth:h4}),Ge(B,we,w,P)}else{var Ve=vu(w,P);le||(Ve.height=ci(w,P),Ve.width=Ar(w,P));var vt=oe(B,we,{box:Ve,align:"center-middle",style:{fill:yu(w,c,l,P.stroke)}});if(!le){var Qe=-1*Ar(w,P);Af(vt,0,-Qe,270)}}return Me.get("participantMultiplicity")&&G("ParticipantMultiplicityMarker",B,w,P),F},"bpmn:ReceiveTask":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=de(w),K=se(B,w,P),le;return F.get("instantiate")?(x(B,28,28,20*.22,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1}),le=r.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):le=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),b(B,le,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1}),K},"bpmn:ScriptTask":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=se(B,w,P),K=r.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return b(B,K,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1}),F},"bpmn:SendTask":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=se(B,w,P),K=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return b(B,K,{fill:Ae(w,l,P.stroke),stroke:dt(w,s,P.fill),strokeWidth:1}),F},"bpmn:SequenceFlow":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=dt(w,s,P.fill),K=Ae(w,l,P.stroke),le=E(B,w.waypoints,{markerEnd:y(B,"sequenceflow-end",F,K),stroke:K}),Me=de(w),{source:we}=w;if(we){var ce=de(we);Me.get("conditionExpression")&&A(ce,"bpmn:Activity")&&ke(le,{markerStart:y(B,"conditional-flow-marker",F,K)}),ce.get("default")&&(A(ce,"bpmn:Gateway")||A(ce,"bpmn:Activity"))&&ce.get("default")===Me&&ke(le,{markerStart:y(B,"conditional-default-flow-marker",F,K)})}return le},"bpmn:ServiceTask":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=se(B,w,P);x(B,10,10,{fill:dt(w,s,P.fill),stroke:"none",transform:"translate(6, 6)"});var K=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});b(B,K,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1}),x(B,10,10,{fill:dt(w,s,P.fill),stroke:"none",transform:"translate(11, 10)"});var le=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return b(B,le,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:1}),F},"bpmn:StartEvent":function(B,w,P={}){var{renderIcon:F=!0}=P;P=bt(P,["fill","stroke"]);var K=de(w);K.get("isInterrupting")||(P={...P,strokeDasharray:"6"});var le=ue(B,w,P);return F&&Q(w,B,P),le},"bpmn:SubProcess":function(B,w,P={}){return yt(w)?P=bt(P,["fill","stroke","width","height"]):P=bt(P,["fill","stroke"]),Z(B,w,P)},"bpmn:Task":function(B,w,P={}){return P=bt(P,["fill","stroke"]),se(B,w,P)},"bpmn:TextAnnotation":function(B,w,P={}){P=bt(P,["fill","stroke","width","height"]);var{width:F,height:K}=vu(w,P),le=C(B,F,K,0,0,{fill:"none",stroke:"none"}),Me=r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:K,position:{mx:0,my:0}});b(B,Me,{stroke:Ae(w,l,P.stroke)});var we=de(w),ce=we.get("text")||"";return oe(B,ce,{align:"left-top",box:vu(w,P),padding:7,style:{fill:yu(w,c,l,P.stroke)}}),le},"bpmn:Transaction":function(B,w,P={}){yt(w)?P=bt(P,["fill","stroke","width","height"]):P=bt(P,["fill","stroke"]);var F=Z(B,w,{strokeWidth:1.5,...P}),K=n.style(["no-fill","no-events"],{stroke:Ae(w,l,P.stroke),strokeWidth:1.5}),le=yt(w);return le||(P={}),C(B,ci(w,P),Ar(w,P),Nf-Gp,Gp,K),F},"bpmn:UserTask":function(B,w,P={}){P=bt(P,["fill","stroke"]);var F=se(B,w,P),K=15,le=12,Me=r.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:K,y:le}});b(B,Me,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:.5});var we=r.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:K,y:le}});b(B,we,{fill:dt(w,s,P.fill),stroke:Ae(w,l,P.stroke),strokeWidth:.5});var ce=r.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:K,y:le}});return b(B,ce,{fill:Ae(w,l,P.stroke),stroke:Ae(w,l,P.stroke),strokeWidth:.5}),F},label:function(B,w,P={}){return kt(B,w,P)}};this._drawPath=b,this._renderer=I}Oe(Ps,Ao);Ps.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Ps.prototype.canRender=function(e){return A(e,"bpmn:BaseElement")};Ps.prototype.drawShape=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Ps.prototype.drawConnection=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Ps.prototype.getShapePath=function(e){return A(e,"bpmn:Event")?l4(e):A(e,"bpmn:Activity")?u4(e,Nf):A(e,"bpmn:Gateway")?c4(e):p4(e)};function bt(e,t=[]){return t.reduce((n,r)=>(e[r]&&(n[r]=e[r]),n),{})}var y4=0,v4={width:150,height:50};function x4(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function _4(e){return In(e)?q({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function w4(e,t){t.textContent=e;var n;try{var r,i=e==="";return t.textContent=i?"dummy":e,n=t.getBBox(),r={width:n.width+n.x*2,height:n.height},i&&(r.width=0),r}catch{return{width:0,height:0}}}function E4(e,t,n){for(var r=e.shift(),i=r,o;;){if(o=w4(i,n),o.width=i?o.width:0,i===" "||i===""||o.width<Math.round(t)||i.length<2)return b4(e,i,r,o);i=C4(i,o.width,t)}}function b4(e,t,n,r){if(t.length<n.length){var i=n.slice(t.length).trim();e.unshift(i)}return{width:r.width,height:r.height,text:t}}var Tw="";function S4(e,t){var n=e.split(/(\s|-|\u00AD)/g),r,i=[],o=0;if(n.length>1)for(;r=n.shift();)if(r.length+o<t)i.push(r),o+=r.length;else{(r==="-"||r===Tw)&&i.pop();break}var a=i[i.length-1];return a&&a===Tw&&(i[i.length-1]="-"),i.join("")}function C4(e,t,n){var r=Math.max(e.length*(n/t),1),i=S4(e,r);return i||(i=e.slice(0,Math.max(Math.round(r-1),1))),i}function R4(){var e=document.getElementById("helper-svg");return e||(e=Fe("svg"),ke(e,{id:"helper-svg"}),Xn(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function ah(e){this._config=q({},{size:v4,padding:y4,style:{},align:"center-top"},e||{})}ah.prototype.createText=function(e,t){return this.layoutText(e,t).element};ah.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};ah.prototype.layoutText=function(e,t){var n=q({},this._config.size,t.box),r=q({},this._config.style,t.style),i=x4(t.align||this._config.align),o=_4(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=k4(r),l=e.split(/\u00AD?\r?\n/),c=[],f=n.width-o.left-o.right,d=Fe("text");ke(d,{x:0,y:0}),ke(d,r);var g=R4();for(tt(g,d);l.length;)c.push(E4(l,f,d));i.vertical==="middle"&&(o.top=o.bottom=0);var y=jr(c,function(R,E,b){return R+(s||E.height)},0)+o.top+o.bottom,v=jr(c,function(R,E,b){return E.width>R?E.width:R},0),x=o.top;i.vertical==="middle"&&(x+=(n.height-y)/2),x-=(s||c[0].height)/4;var C=Fe("text");ke(C,r),W(c,function(R){var E;switch(x+=s||R.height,i.horizontal){case"left":E=o.left;break;case"right":E=(a?v:f)-o.right-R.width;break;default:E=Math.max(((a?v:f)-R.width)/2+o.left,0)}var b=Fe("tspan");ke(b,{x:E,y:x}),b.textContent=R.text,tt(C,b)}),En(d);var k={width:v,height:y};return{dimensions:k,element:C}};function k4(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var P4=12,T4=1.2,A4=30;function vR(e){var t=q({fontFamily:"Arial, sans-serif",fontSize:P4,fontWeight:"normal",lineHeight:T4},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,r=q({},t,{fontSize:n},e&&e.externalStyle||{}),i=new ah({style:t});this.getExternalLabelBounds=function(o,a){var s=i.getDimensions(a,{box:{width:90,height:30},style:r});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=i.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(A4,Math.round(s.height))}},this.createText=function(o,a){return i.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return r}}vR.$inject=["config.textRenderer"];function M4(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var r=this.pathMap[t],i,o;n.abspos?(i=n.abspos.x,o=n.abspos.y):(i=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/r.height*n.yScaleFactor,l=n.containerWidth/r.width*n.xScaleFactor,c=0;c<r.heightElements.length;c++)a["y"+c]=r.heightElements[c]*s;for(var f=0;f<r.widthElements.length;f++)a["x"+f]=r.widthElements[f]*l}var d=L4(r.d,{mx:i,my:o,e:a});return d}}var N4=/\{([^{}]+)\}/g,D4=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function O4(e,t,n){var r=n;return t.replace(D4,function(i,o,a,s,l){o=o||s,r&&(o in r&&(r=r[o]),typeof r=="function"&&l&&(r=r()))}),r=(r==null||r==n?e:r)+"",r}function L4(e,t){return String(e).replace(N4,function(n,r){return O4(n,r,t)})}const B4={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ps],textRenderer:["type",vR],pathMap:["type",M4]};function I4(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,r){return t[r]||"{"+r+"}"})}const sh={translate:["value",I4]};function Df(e,t,n){return q({id:e.id,type:e.$type,businessObject:e,di:t},n)}function j4(e,t,n){var r=e.waypoint;return!r||r.length<2?[Je(t),Je(n)]:r.map(function(i){return{x:i.x,y:i.y}})}function xR(e,t,n){return new Error(`element ${qn(t)} referenced by ${qn(e)}#${n} not yet drawn`)}function No(e,t,n,r,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r,this._textRenderer=i}No.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];No.prototype.add=function(e,t,n){var r,i,o;if(A(t,"bpmndi:BPMNPlane")){var a=A(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};r=this._elementFactory.createRoot(Df(e,t,a)),this._canvas.addRootElement(r)}else if(A(t,"bpmndi:BPMNShape")){var s=!yt(e,t),l=F4(e);i=n&&(n.hidden||n.collapsed);var c=t.bounds;r=this._elementFactory.createShape(Df(e,t,{collapsed:s,hidden:i,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height),isFrame:l})),A(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,r),A(e,"bpmn:Lane")&&(o=0),A(e,"bpmn:DataStoreReference")&&($4(n,Je(c))||(n=this._canvas.findRoot(n))),this._canvas.addShape(r,n,o)}else if(A(t,"bpmndi:BPMNEdge")){var f=this._getSource(e),d=this._getTarget(e);i=n&&(n.hidden||n.collapsed),r=this._elementFactory.createConnection(Df(e,t,{hidden:i,source:f,target:d,waypoints:j4(t,f,d)})),A(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(r,n,o)}else throw new Error(`unknown di ${qn(t)} for element ${qn(e)}`);return _s(e)&&Xr(r)&&this.addLabel(e,t,r),this._eventBus.fire("bpmnElement.added",{element:r}),r};No.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${qn(e)}#attachedToRef`);var r=this._elementRegistry.get(n.id),i=r&&r.attachers;if(!r)throw xR(e,n,"attachedToRef");t.host=r,i||(r.attachers=i=[]),i.indexOf(t)===-1&&i.push(t)};No.prototype.addLabel=function(e,t,n){var r,i,o;return r=n4(t,n),i=Xr(n),i&&(r=this._textRenderer.getExternalLabelBounds(r,i)),o=this._elementFactory.createLabel(Df(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Xr(n),x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)})),this._canvas.addShape(o,n.parent)};No.prototype._getConnectedElement=function(e,t){var n,r,i=e.$type;if(r=e[t+"Ref"],t==="source"&&i==="bpmn:DataInputAssociation"&&(r=r&&r[0]),(t==="source"&&i==="bpmn:DataOutputAssociation"||t==="target"&&i==="bpmn:DataInputAssociation")&&(r=e.$parent),n=r&&this._getElement(r),n)return n;throw r?xR(e,r,t+"Ref"):new Error(`${qn(e)}#${t} Ref not specified`)};No.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};No.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};No.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function $4(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function F4(e){return A(e,"bpmn:Group")}const z4={__depends__:[sh],bpmnImporter:["type",No]},H4={__depends__:[B4,z4]};function Oc(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Oc.prototype.next=function(){return this._prefix+ ++this._counter};var V4=new Oc("ov"),W4=500;function jn(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=V4,this._overlayDefaults=q({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=U4(n.getContainer()),this._init()}jn.$inject=["config.overlays","eventBus","canvas","elementRegistry"];jn.prototype.get=function(e){if(Ir(e)&&(e={id:e}),Ir(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?ht(t.overlays,Bi({type:e.type})):t.overlays.slice():[]}else return e.type?ht(this._overlays,Bi({type:e.type})):e.id?this._overlays[e.id]:null};jn.prototype.add=function(e,t,n){if(In(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var r=this._ids.next();return n=q({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r};jn.prototype.remove=function(e){var t=this.get(e)||[];ot(t)||(t=[t]);var n=this;W(t,function(r){var i=n._getOverlayContainer(r.element,!0);if(r&&(no(r.html),no(r.htmlContainer),delete r.htmlContainer,delete r.element,delete n._overlays[r.id]),i){var o=i.overlays.indexOf(r);o!==-1&&i.overlays.splice(o,1)}})};jn.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};jn.prototype.show=function(){lh(this._overlayRoot)};jn.prototype.hide=function(){lh(this._overlayRoot,!1)};jn.prototype.clear=function(){this._overlays={},this._overlayContainers=[],qd(this._overlayRoot)};jn.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,r=t.x,i=t.y;if(t.waypoints){var o=An(t);r=o.x,i=o.y}_R(n,r,i),lr(e.html,"data-container-id",t.id)};jn.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,r=e.element,i=t.left,o=t.top;if(t.right!==void 0){var a;r.waypoints?a=An(r).width:a=r.width,i=t.right*-1+a}if(t.bottom!==void 0){var s;r.waypoints?s=An(r).height:s=r.height,o=t.bottom*-1+s}_R(n,i||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};jn.prototype._createOverlayContainer=function(e){var t=zt('<div class="djs-overlays" />');Xn(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};jn.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";wR(this._overlayRoot,n)};jn.prototype._getOverlayContainer=function(e,t){var n=At(this._overlayContainers,function(r){return r.element===e});return!n&&!t?this._createOverlayContainer(e):n};jn.prototype._addOverlay=function(e){var t=e.id,n=e.element,r=e.html,i,o;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),Ir(r)&&(r=zt(r)),o=this._getOverlayContainer(n),i=zt('<div class="djs-overlay" data-overlay-id="'+t+'">'),Xn(i,{position:"absolute"}),i.appendChild(r),e.type&&nn(i).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();lh(i,a===s),e.htmlContainer=i,o.overlays.push(e),o.html.appendChild(i),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};jn.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=this._canvas.findRoot(e.element),i=n&&n.minZoom,o=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),l=!0;(r!==s||n&&(Ln(i)&&i>t.scale||Ln(o)&&o<t.scale))&&(l=!1),lh(a,l),this._updateOverlayScale(e,t)};jn.prototype._updateOverlayScale=function(e,t){var n=e.scale,r,i,o=e.htmlContainer,a,s="";n!==!0&&(n===!1?(r=1,i=1):(r=n.min,i=n.max),Ln(r)&&t.scale<r&&(a=(1/t.scale||1)*r),Ln(i)&&t.scale>i&&(a=(1/t.scale||1)*i)),Ln(a)&&(s="scale("+a+","+a+")"),wR(o,s)};jn.prototype._updateOverlaysVisibilty=function(e){var t=this;W(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};jn.prototype._init=function(){var e=this._eventBus,t=this;function n(r){t._updateRoot(r),t._updateOverlaysVisibilty(r),t.show()}e.on("canvas.viewbox.changing",function(r){t.hide()}),e.on("canvas.viewbox.changed",function(r){n(r.viewbox)}),e.on(["shape.remove","connection.remove"],function(r){var i=r.element,o=t.get({element:i});W(o,function(l){t.remove(l.id)});var a=t._getOverlayContainer(i);if(a){no(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",W4,function(r){var i=r.element,o=t._getOverlayContainer(i,!0);o&&(W(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(r){var i=t._getOverlayContainer(r.element,!0);i&&nn(i.html)[r.add?"add":"remove"](r.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function U4(e){var t=zt('<div class="djs-overlay-container" />');return Xn(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function _R(e,t,n){Xn(e,{left:t+"px",top:n+"px"})}function lh(e,t){e.style.display=t===!1?"none":""}function wR(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const uh={__init__:["overlays"],overlays:["type",jn]};function ER(e,t,n,r){e.on("element.changed",function(i){var o=i.element;(o.parent||o===t.getRootElement())&&(i.gfx=n.getGraphics(o)),i.gfx&&e.fire(OC(o)+".changed",i)}),e.on("elements.changed",function(i){var o=i.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),r.updateContainments(o)}),e.on("shape.changed",function(i){r.update("shape",i.element,i.gfx)}),e.on("connection.changed",function(i){r.update("connection",i.element,i.gfx)})}ER.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const a0={__init__:["changeSupport"],changeSupport:["type",ER]};var G4=1e3;function fe(e){this._eventBus=e}fe.$inject=["eventBus"];function K4(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}fe.prototype.on=function(e,t,n,r,i,o){if((bn(t)||Ze(t))&&(o=i,i=r,r=n,n=t,t=null),bn(n)&&(o=i,i=r,r=n,n=G4),In(i)&&(o=i,i=!1),!bn(r))throw new Error("handlerFn must be a function");ot(e)||(e=[e]);var a=this._eventBus;W(e,function(s){var l=["commandStack",s,t].filter(function(c){return c}).join(".");a.on(l,n,i?K4(r,o):r,o)})};fe.prototype.canExecute=Do("canExecute");fe.prototype.preExecute=Do("preExecute");fe.prototype.preExecuted=Do("preExecuted");fe.prototype.execute=Do("execute");fe.prototype.executed=Do("executed");fe.prototype.postExecute=Do("postExecute");fe.prototype.postExecuted=Do("postExecuted");fe.prototype.revert=Do("revert");fe.prototype.reverted=Do("reverted");function Do(e){return function(n,r,i,o,a){(bn(n)||Ze(n))&&(a=o,o=i,i=r,r=n,n=null),this.on(n,e,r,i,o,a)}}function s0(e,t){t.invoke(fe,this),this.executed(function(n){var r=n.context;r.rootElement?e.setRootElement(r.rootElement):r.rootElement=e.getRootElement()}),this.revert(function(n){var r=n.context;r.rootElement&&e.setRootElement(r.rootElement)})}Oe(s0,fe);s0.$inject=["canvas","injector"];const Y4={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",s0]};function hc(e){return CSS.escape(e)}var q4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function wy(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return q4[t]})}var bR="_plane";function Aw(e){var t=e.id;return X4(t)}function go(e){var t=e.id;return A(e,"bpmn:SubProcess")?SR(t):t}function Za(e){return SR(e)}function Of(e){var t=Ct(e);return A(t,"bpmndi:BPMNPlane")}function SR(e){return e+bR}function X4(e){return e.replace(new RegExp(bR+"$"),"")}var Q4="bjs-breadcrumbs-shown";function CR(e,t,n){var r=zt('<ul class="bjs-breadcrumbs"></ul>'),i=n.getContainer(),o=nn(i);i.appendChild(r);var a=[];e.on("element.changed",function(l){var c=l.element,f=de(c),d=At(a,function(g){return g===f});d&&s()});function s(l){l&&(a=Z4(l));var c=a.flatMap(function(d){var g=n.findRoot(go(d))||n.findRoot(d.id);if(!g&&A(d,"bpmn:Process")){var y=t.find(function(C){var k=de(C);return k&&k.get("processRef")===d});g=y&&n.findRoot(y.id)}if(!g)return[];var v=wy(d.name||d.id),x=zt('<li><span class="bjs-crumb"><a title="'+v+'">'+v+"</a></span></li>");return x.addEventListener("click",function(){n.setRootElement(g)}),x});r.innerHTML="";var f=c.length>1;o.toggle(Q4,f),c.forEach(function(d){r.appendChild(d)})}e.on("root.set",function(l){s(l.element)})}CR.$inject=["eventBus","elementRegistry","canvas"];function Z4(e){for(var t=de(e),n=[],r=t;r;r=r.$parent)(A(r,"bpmn:SubProcess")||A(r,"bpmn:Process"))&&n.push(r);return n.reverse()}function RR(e,t){var n=null,r=new J4;e.on("root.set",function(i){var o=i.element,a=t.viewbox(),s=r.get(o);if(r.set(n,{x:a.x,y:a.y,zoom:a.scale}),n=o,!(!A(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var l=(a.x-s.x)*a.scale,c=(a.y-s.y)*a.scale;(l!==0||c!==0)&&t.scroll({dx:l,dy:c}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){r.clear(),n=null})}RR.$inject=["eventBus","canvas"];function J4(){this._entries=[],this.set=function(e,t){var n=!1;for(var r in this._entries)if(this._entries[r][0]===e){this._entries[r][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Mw={x:180,y:160};function Ts(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(r,i){n._handleImport(i.definitions)})}Ts.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(r){!r.plane||!r.plane.bpmnElement||(t._processToDiagramMap[r.plane.bpmnElement.id]=r)});var n=e.diagrams.filter(r=>r.plane).flatMap(r=>t._createNewDiagrams(r.plane));n.forEach(function(r){t._movePlaneElementsToOrigin(r.plane)})}};Ts.prototype._createNewDiagrams=function(e){var t=this,n=[],r=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;A(a,"bpmn:SubProcess")&&!o.isExpanded&&n.push(a),t6(a,e)&&r.push({diElement:o,parent:s})}});var i=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,i.push(a)}}),r.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&n.indexOf(s)===-1;)s=s.$parent;if(s){var l=t._processToDiagramMap[s.id];t._moveToDiPlane(a,l.plane)}}),i};Ts.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=e6(e),r={x:n.x-Mw.x,y:n.y-Mw.y};t.forEach(function(i){i.waypoint?i.waypoint.forEach(function(o){o.x=o.x-r.x,o.y=o.y-r.y}):i.bounds&&(i.bounds.x=i.bounds.x-r.x,i.bounds.y=i.bounds.y-r.y)})};Ts.prototype._moveToDiPlane=function(e,t){var n=kR(e),r=n.plane.get("planeElement");r.splice(r.indexOf(e),1),t.get("planeElement").push(e)};Ts.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Ts.$inject=["eventBus","moddle"];function kR(e){return A(e,"bpmndi:BPMNDiagram")?e:kR(e.$parent)}function e6(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var r=Ue(n.bounds);t.top=Math.min(r.top,t.top),t.left=Math.min(r.left,t.left)}}),eh(t)}function t6(e,t){var n=e.$parent;return!(!A(n,"bpmn:SubProcess")||n===t.bpmnElement||ft(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Kp=250,n6='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',r6="bjs-drilldown-empty";function Pa(e,t,n,r,i){fe.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=r,this._translate=i;var o=this;this.executed("shape.toggleCollapse",Kp,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",Kp,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],Kp,function(a){var s=a.oldParent,l=a.newParent||a.parent,c=a.shape;o._canDrillDown(c)&&o._addOverlay(c),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(c)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Kp,function(a){var s=a.oldParent,l=a.newParent||a.parent,c=a.shape;o._canDrillDown(c)&&o._addOverlay(c),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(c)},!0),t.on("import.render.complete",function(){n.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}Oe(Pa,fe);Pa.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};Pa.prototype._canDrillDown=function(e){var t=this._canvas;return A(e,"bpmn:SubProcess")&&t.findRoot(go(e))};Pa.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=de(e),r=t.get({element:n.id,type:"drilldown"})[0];if(r){var i=n&&n.get("flowElements")&&n.get("flowElements").length;nn(r.html).toggle(r6,!i)}};Pa.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,r=de(e),i=n.get({element:e,type:"drilldown"});i.length&&this._removeOverlay(e);var o=zt('<button type="button" class="bjs-drilldown">'+n6+"</button>"),a=r.get("name")||r.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(go(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};Pa.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};Pa.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const i6={__depends__:[uh,a0,Y4],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",CR],drilldownCentering:["type",RR],drilldownOverlayBehavior:["type",Pa],subprocessCompatibility:["type",Ts]};var o6=500,a6=1e3;function As(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),r=this;function i(o){var a=Fe("rect");return ke(a,q({x:0,y:0,rx:4,width:100,height:100},n)),a}e.on(["shape.added","shape.changed"],o6,function(o){var a=o.element,s=o.gfx,l=Bt(".djs-outline",s);l||(l=r.getOutline(a)||i(),tt(s,l)),r.updateShapeOutline(l,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,l=Bt(".djs-outline",s);l||(l=i(),tt(s,l)),r.updateConnectionOutline(l,a)})}As.prototype.updateShapeOutline=function(e,t){var n=!1,r=this._getProviders();r.length&&W(r,function(i){n=n||i.updateOutline(t,e)}),n||ke(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};As.prototype.updateConnectionOutline=function(e,t){var n=An(t);ke(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};As.prototype.registerProvider=function(e,t){t||(t=e,e=a6),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};As.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};As.prototype.getOutline=function(e){var t,n=this._getProviders();return W(n,function(r){bn(r.getOutline)&&(t=t||r.getOutline(e))}),t};As.$inject=["eventBus","styles","elementRegistry"];const l0={__init__:["outline"],outline:["type",As]},s6="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",l6="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",u6={width:36,height:50},c6={width:50,height:50};function Nw(e,t,n){return Fe("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const ea=5;function ch(e,t){this._styles=t,e.registerProvider(this)}ch.$inject=["outline","styles"];ch.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Rt(e))return A(e,"bpmn:Gateway")?(n=Fe("rect"),q(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),ke(n,q({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):ft(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Fe("rect"),ke(n,q({x:-ea,y:-ea,rx:14,width:e.width+ea*2,height:e.height+ea*2},t))):A(e,"bpmn:EndEvent")?(n=Fe("circle"),ke(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+ea+1},t))):A(e,"bpmn:Event")?(n=Fe("circle"),ke(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+ea},t))):A(e,"bpmn:DataObjectReference")&&Dw(e,"bpmn:DataObjectReference")?n=Nw(s6,{x:-6,y:-6},t):A(e,"bpmn:DataStoreReference")&&Dw(e,"bpmn:DataStoreReference")&&(n=Nw(l6,{x:-6,y:-6},t)),n};ch.prototype.updateOutline=function(e,t){if(!Rt(e))return ft(e,["bpmn:SubProcess","bpmn:Group"])?(ke(t,{width:e.width+ea*2,height:e.height+ea*2}),!0):!!ft(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function Dw(e,t){var n;return t==="bpmn:DataObjectReference"?n=u6:t==="bpmn:DataStoreReference"&&(n=c6),e.width===n.width&&e.height===n.height}const p6={__depends__:[l0],__init__:["outlineProvider"],outlineProvider:["type",ch]};function Ow(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Hl(e){return e.originalEvent||e.srcEvent}function Zm(e){Ow(e),Ow(Hl(e))}function ws(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function PR(){return/mac/i.test(navigator.platform)}function TR(e,t){return(Hl(e)||e).button===t}function Ta(e){return TR(e,0)}function f6(e){return TR(e,1)}function mc(e){var t=Hl(e)||e;return Ta(e)?PR()?t.metaKey:t.ctrlKey:!1}function _d(e){var t=Hl(e)||e;return Ta(e)&&t.shiftKey}function d6(e){return!0}function Yp(e){return Ta(e)||f6(e)}var Lw=500;function AR(e,t,n){var r=this;function i(L,Q,Y){if(!s(L,Q)){var G,ae,oe;Y?ae=t.getGraphics(Y):(G=Q.delegateTarget||Q.target,G&&(ae=G,Y=t.get(ae))),!(!ae||!Y)&&(oe=e.fire(L,{element:Y,gfx:ae,originalEvent:Q}),oe===!1&&(Q.stopPropagation(),Q.preventDefault()))}}var o={};function a(L){return o[L]}function s(L,Q){var Y=c[L]||Ta;return!Y(Q)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":d6,"element.mousedown":Yp,"element.mouseup":Yp,"element.click":Yp,"element.dblclick":Yp};function f(L,Q,Y){var G=l[L];if(!G)throw new Error("unmapped DOM event name <"+L+">");return i(G,Q,Y)}var d="svg, .djs-element";function g(L,Q,Y,G){var ae=o[Y]=function(oe){i(Y,oe)};G&&(c[Y]=G),ae.$delegate=Dr.bind(L,d,Q,ae)}function y(L,Q,Y){var G=a(Y);G&&Dr.unbind(L,Q,G.$delegate)}function v(L){W(l,function(Q,Y){g(L,Y,Q)})}function x(L){W(l,function(Q,Y){y(L,Y,Q)})}e.on("canvas.destroy",function(L){x(L.svg)}),e.on("canvas.init",function(L){v(L.svg)}),e.on(["shape.added","connection.added"],function(L){var Q=L.element,Y=L.gfx;e.fire("interactionEvents.createHit",{element:Q,gfx:Y})}),e.on(["shape.changed","connection.changed"],Lw,function(L){var Q=L.element,Y=L.gfx;e.fire("interactionEvents.updateHit",{element:Q,gfx:Y})}),e.on("interactionEvents.createHit",Lw,function(L){var Q=L.element,Y=L.gfx;r.createDefaultHit(Q,Y)}),e.on("interactionEvents.updateHit",function(L){var Q=L.element,Y=L.gfx;r.updateDefaultHit(Q,Y)});var C=D("djs-hit djs-hit-stroke"),k=D("djs-hit djs-hit-click-stroke"),R=D("djs-hit djs-hit-all"),E=D("djs-hit djs-hit-no-move"),b={all:R,"click-stroke":k,stroke:C,"no-move":E};function D(L,Q){return Q=q({stroke:"white",strokeWidth:15},Q||{}),n.cls(L,["no-fill","no-border"],Q)}function I(L,Q){var Y=b[Q];if(!Y)throw new Error("invalid hit type <"+Q+">");return ke(L,Y),L}function z(L,Q){tt(L,Q)}this.removeHits=function(L){var Q=py(".djs-hit",L);W(Q,En)},this.createDefaultHit=function(L,Q){var Y=L.waypoints,G=L.isFrame,ae;return Y?this.createWaypointsHit(Q,Y):(ae=G?"stroke":"all",this.createBoxHit(Q,ae,{width:L.width,height:L.height}))},this.createWaypointsHit=function(L,Q){var Y=Zd(Q);return I(Y,"stroke"),z(L,Y),Y},this.createBoxHit=function(L,Q,Y){Y=q({x:0,y:0},Y);var G=Fe("rect");return I(G,Q),ke(G,Y),z(L,G),G},this.updateDefaultHit=function(L,Q){var Y=Bt(".djs-hit",Q);if(Y)return L.waypoints?NC(Y,L.waypoints):ke(Y,{width:L.width,height:L.height}),Y},this.fire=i,this.triggerMouseEvent=f,this.mouseHandler=a,this.registerEvent=g,this.unregisterEvent=y}AR.$inject=["eventBus","elementRegistry","styles"];const ph={__init__:["interactionEvents"],interactionEvents:["type",AR]};function Vl(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(r){var i=r.element;n.deselect(i)}),e.on(["diagram.clear","root.set"],function(r){n.select(null)})}Vl.$inject=["eventBus","canvas"];Vl.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var r=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t})}};Vl.prototype.get=function(){return this._selectedElements};Vl.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Vl.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice();ot(e)||(e=e?[e]:[]);var i=this._canvas,o=i.getRootElement();e=e.filter(function(a){var s=i.findRoot(a);return o===s}),t?W(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var Bw="hover",Iw="selected",qp=6;function u0(e,t,n){this._canvas=e;var r=this;this._multiSelectionBox=null;function i(a,s){e.addMarker(a,s)}function o(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){i(a.element,Bw)}),t.on("element.out",function(a){o(a.element,Bw)}),t.on("selection.changed",function(a){function s(d){o(d,Iw)}function l(d){i(d,Iw)}var c=a.oldSelection,f=a.newSelection;W(c,function(d){f.indexOf(d)===-1&&s(d)}),W(f,function(d){c.indexOf(d)===-1&&l(d)}),r._updateSelectionOutline(f)}),t.on("element.changed",function(a){n.isSelected(a.element)&&r._updateSelectionOutline(n.get())})}u0.$inject=["canvas","eventBus","selection"];u0.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Qd(t);var n=e.length>1,r=this._canvas.getContainer();if(St(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=h6(An(e)),o=Fe("rect");ke(o,q({rx:3},i)),St(o).add("djs-selection-outline"),tt(t,o)}};function h6(e){return{x:e.x-qp,y:e.y-qp,width:e.width+qp*2,height:e.height+qp*2}}function MR(e,t,n,r){e.on("create.end",500,function(i){var o=i.context,a=o.canExecute,s=o.elements,l=o.hints||{},c=l.autoSelect;if(a){if(c===!1)return;ot(c)?t.select(c):t.select(s.filter(m6))}}),e.on("connect.end",500,function(i){var o=i.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(i){var o=i.previousSelection||[],a=r.get(i.context.shape.id),s=At(o,function(l){return a.id===l.id});s||t.select(a)}),e.on("element.click",function(i){if(Ta(i)){var o=i.element;o===n.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,l=_d(i);if(a&&s)return l?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,l)}})}MR.$inject=["eventBus","selection","canvas","elementRegistry"];function m6(e){return!e.hidden}const ro={__init__:["selectionVisuals","selectionBehavior"],__depends__:[ph,l0],selection:["type",Vl],selectionVisuals:["type",u0],selectionBehavior:["type",MR]};function Aa(e){Qt.call(this,e)}Oe(Aa,Qt);Aa.prototype._modules=[H4,i6,p6,uh,ro,sh];Aa.prototype._moddleExtensions={};var g6=["c","C"],y6=["v","V"],v6=["y","Y"],NR=["z","Z"];function x6(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Qr(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Pn(e,t){return e=ot(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function c0(e){return e.shiftKey}function _6(e){return Qr(e)&&Pn(g6,e)}function w6(e){return Qr(e)&&Pn(y6,e)}function E6(e){return Qr(e)&&!c0(e)&&Pn(NR,e)}function b6(e){return Qr(e)&&(Pn(v6,e)||Pn(NR,e)&&c0(e))}var fh="keyboard.keydown",S6="keyboard.keyup",jw="input-handle-modified-keys",C6=1e3;function Wn(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Wn.$inject=["config.keyboard","eventBus"];Wn.prototype._keydownHandler=function(e){this._keyHandler(e,fh)};Wn.prototype._keyupHandler=function(e){this._keyHandler(e,S6)};Wn.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||fh,r),n&&e.preventDefault()}};Wn.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(R6(e.target)||k6(e.target)&&Pn([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)};Wn.prototype._isModifiedKeyIgnored=function(e){if(!Qr(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Wn.prototype._getAllowedModifiers=function(e){var t=Sa(e,"["+jw+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(jw).split(",")};Wn.prototype.bind=function(e){this.unbind(),this._node=e,it.bind(e,"keydown",this._keydownHandler),it.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Wn.prototype.getBinding=function(){return this._node};Wn.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),it.unbind(e,"keydown",this._keydownHandler),it.unbind(e,"keyup",this._keyupHandler)),this._node=null};Wn.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Wn.prototype.addListener=function(e,t,n){bn(e)&&(n=t,t=e,e=C6),this._eventBus.on(n||fh,e,t)};Wn.prototype.removeListener=function(e,t){this._eventBus.off(t||fh,e)};Wn.prototype.hasModifier=x6;Wn.prototype.isCmd=Qr;Wn.prototype.isShift=c0;Wn.prototype.isKey=Pn;function R6(e){return e&&(Xd(e,"input, textarea")||e.contentEditable==="true")}function k6(e){return e&&Xd(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var P6=500;function Wl(e,t){var n=this;e.on("editorActions.init",P6,function(r){var i=r.editorActions;n.registerBindings(t,i)})}Wl.$inject=["eventBus","keyboard"];Wl.prototype.registerBindings=function(e,t){function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("undo",function(r){var i=r.keyEvent;if(E6(i))return t.trigger("undo"),!0}),n("redo",function(r){var i=r.keyEvent;if(b6(i))return t.trigger("redo"),!0}),n("copy",function(r){var i=r.keyEvent;if(_6(i))return t.trigger("copy"),!0}),n("paste",function(r){var i=r.keyEvent;if(w6(i))return t.trigger("paste"),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(Pn(["+","Add","="],i)&&Qr(i))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(Pn(["-","Subtract"],i)&&Qr(i))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var i=r.keyEvent;if(Pn("0",i)&&Qr(i))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var i=r.keyEvent;if(Pn(["Backspace","Delete","Del"],i))return t.trigger("removeSelection"),!0})};const p0={__init__:["keyboard","keyboardBindings"],keyboard:["type",Wn],keyboardBindings:["type",Wl]};var T6={moveSpeed:50,moveSpeedAccelerated:200};function DR(e,t,n){var r=this;this._config=q({},T6,e||{}),t.addListener(i);function i(o){var a=o.keyEvent,s=r._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var l=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,c;switch(a.key){case"ArrowLeft":case"Left":c="left";break;case"ArrowUp":case"Up":c="up";break;case"ArrowRight":case"Right":c="right";break;case"ArrowDown":case"Down":c="down";break}return r.moveCanvas({speed:l,direction:c}),!0}}this.moveCanvas=function(o){var a=0,s=0,l=o.speed,c=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":a=c;break;case"up":s=c;break;case"right":a=-c;break;case"down":s=-c;break}n.scroll({dx:a,dy:s})}}DR.$inject=["config.keyboardMove","keyboard","canvas"];const OR={__depends__:[p0],__init__:["keyboardMove"],keyboardMove:["type",DR]};var A6=/^djs-cursor-.*$/;function dh(e){var t=nn(document.body);t.removeMatching(A6),e&&t.add("djs-cursor-"+e)}function LR(){dh(null)}var M6=5e3;function BR(e,t){t=t||"element.click";function n(){return!1}return e.once(t,M6,n),function(){e.off(t,n)}}function Uu(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Ii(e,t){return{x:e.x-t.x,y:e.y-t.y}}var N6=15;function IR(e,t){var n;e.on("element.mousedown",500,function(a){return o(a.originalEvent)});function r(a){var s=n.start,l=n.button,c=ws(a),f=Ii(c,s);if(!n.dragging&&D6(f)>N6&&(n.dragging=!0,l===0&&BR(e),dh("grab")),n.dragging){var d=n.last||n.start;f=Ii(c,d),t.scroll({dx:f.x,dy:f.y}),n.last=c}a.preventDefault()}function i(a){it.unbind(document,"mousemove",r),it.unbind(document,"mouseup",i),n=null,LR()}function o(a){if(!Sa(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:ws(a)},it.bind(document,"mousemove",r),it.bind(document,"mouseup",i),!0}}this.isActive=function(){return!!n}}IR.$inject=["eventBus","canvas"];function D6(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const jR={__init__:["moveCanvas"],moveCanvas:["type",IR]};function Ey(e){return Math.log(e)/Math.log(10)}function $R(e,t){var n=Ey(e.min),r=Ey(e.max),i=Math.abs(n)+Math.abs(r);return i/t}function O6(e,t){return Math.max(e.min,Math.min(e.max,t))}var L6=Math.sign||function(e){return e>=0?1:-1},f0={min:.2,max:4},FR=10,B6=.1,I6=.75;function io(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=_r(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||I6;var r=this;t.on("canvas.init",function(i){r._init(e.enabled!==!1)})}io.$inject=["config.zoomScroll","eventBus","canvas"];io.prototype.scroll=function(t){this._canvas.scroll(t)};io.prototype.reset=function(){this._canvas.zoom("fit-viewport")};io.prototype.zoom=function(t,n){var r=$R(f0,FR*2);this._totalDelta+=t,Math.abs(this._totalDelta)>B6&&(this._zoom(t,n,r),this._totalDelta=0)};io.prototype._handleWheel=function(t){if(!Sa(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var r=t.ctrlKey||PR()&&t.metaKey,i=t.shiftKey,o=-1*this._scale,a;if(r?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,r){var s=n.getBoundingClientRect(),l={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*L6(t.deltaY)*o,this.zoom(a,l)}else i?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}};io.prototype.stepZoom=function(t,n){var r=$R(f0,FR);this._zoom(t,n,r)};io.prototype._zoom=function(e,t,n){var r=this._canvas,i=e>0?1:-1,o=Ey(r.zoom()),a=Math.round(o/n)*n;a+=n*i;var s=Math.pow(10,a);r.zoom(O6(f0,s),t)};io.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof t>"u"&&(t=!i),i!==t&&it[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};io.prototype._init=function(e){this.toggle(e)};const zR={__init__:["zoomScroll"],zoomScroll:["type",io]};function gc(e){Aa.call(this,e)}Oe(gc,Aa);gc.prototype._navigationModules=[OR,jR,zR];gc.prototype._modules=[].concat(Aa.prototype._modules,gc.prototype._navigationModules);function Jm(e){return e&&e[e.length-1]}function $w(e){return e.y}function Fw(e){return e.x}var j6={left:Fw,center:Fw,right:function(e){return e.x+e.width},top:$w,middle:$w,bottom:function(e){return e.y+e.height}};function Ul(e,t){this._modeling=e,this._rules=t}Ul.$inject=["modeling","rules"];Ul.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",r="width";return t.indexOf(e)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};Ul.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Ul.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),r=n.axis,i=n.dimension,o={},a={},s=!1,l,c,f;function d(g,y){return Math.round((g[r]+y[r]+y[i])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][r];else if(this._isType(e,["right","bottom"]))f=Jm(t),o[e]=f[r]+f[i];else if(this._isType(e,["center","middle"])){if(W(t,function(g){var y=g[r]+Math.round(g[i]/2);a[y]?a[y].elements.push(g):a[y]={elements:[g],center:y}}),l=to(a,function(g){return g.elements.length>1&&(s=!0),g.elements.length}),s)return o[e]=Jm(l).center,o;c=t[0],t=to(t,function(g){return g[r]+g[i]}),f=Jm(t),o[e]=d(c,f)}return o};Ul.prototype.trigger=function(e,t){var n=this._modeling,r,i=ht(e,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:i}),ot(r)&&(i=r),!(i.length<2||!r)){var o=j6[t],a=to(i,o),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};const $6={__init__:["alignElements"],alignElements:["type",Ul]},F6=new Oc;function Gl(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}Gl.$inject=["eventBus"];Gl.prototype.schedule=function(e,t=F6.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};Gl.prototype._schedule=function(e,t){const{promise:n,resolve:r,reject:i}=z6();return{executionId:requestAnimationFrame(()=>{try{r(e())}catch(a){i(a)}}),promise:n}};Gl.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};Gl.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function z6(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}const H6={scheduler:["type",Gl]};var V6="djs-element-hidden",Xp=".entry",W6=1e3,zw=8,U6=300;function yn(e,t,n,r){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=r,this._current=null,this._init()}yn.$inject=["canvas","elementRegistry","eventBus","scheduler"];yn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,r=n.length?n.length===1?n[0]:n:null;r?e.open(r,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,r=e._current;if(r){var i=r.target,o=ot(i)?i:[i],a=o.filter(function(l){return n.includes(l)});if(a.length){e.close();var s=o.filter(function(l){return e._elementRegistry.get(l.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,r=e._current,i=ot(r.target)?r.target:[r.target];i.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};yn.prototype._createContainer=function(){var e=zt('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};yn.prototype.registerProvider=function(e,t){t||(t=e,e=W6),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};yn.prototype.getEntries=function(e){var t=this._getProviders(),n=ot(e)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return W(t,function(i){if(bn(i[n])){var o=i[n](e);bn(o)?r=o(r):W(o,function(a,s){r[s]=a})}}),r};yn.prototype.trigger=function(e,t,n){var r=this,i,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(i=lr(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",o,n)},U6);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,e,o,n)};yn.prototype.triggerEntry=function(e,t,n,r){if(this.isShown()){var i=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(bn(s)){if(t==="click")return s(n,i,r)}else if(s[t])return s[t](n,i,r);n.preventDefault()}}}};yn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};yn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};yn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),r;W(t,function(i,o){var a=i.group||"default",s=zt(i.html||'<div class="entry" draggable="true"></div>'),l;lr(s,"data-action",o),l=Bt("[data-group="+hc(a)+"]",n),l||(l=zt('<div class="group"></div>'),lr(l,"data-group",a),n.appendChild(l)),l.appendChild(s),i.className&&G6(s,i.className),i.title&&lr(s,"title",i.title),i.imageUrl&&(r=zt("<img>"),lr(r,"src",i.imageUrl),r.style.width="100%",r.style.height="100%",s.appendChild(r))}),nn(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};yn.prototype._createHtml=function(e){var t=this,n=zt('<div class="djs-context-pad"></div>');return Dr.bind(n,Xp,"click",function(r){t.trigger("click",r)}),Dr.bind(n,Xp,"dragstart",function(r){t.trigger("dragstart",r)}),Dr.bind(n,Xp,"mouseover",function(r){t.trigger("mouseover",r)}),Dr.bind(n,Xp,"mouseout",function(r){t.trigger("mouseout",r)}),it.bind(n,"mousedown",function(r){r.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};yn.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&Y6(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};yn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};yn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return ot(e)!==ot(n)?!1:ot(e)?e.length===n.length&&Ss(e,function(r){return n.includes(r)}):n===e};yn.prototype.isShown=function(){return this.isOpen()&&nn(this._current.html).has("open")};yn.prototype.show=function(){this.isOpen()&&(nn(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};yn.prototype.hide=function(){this.isOpen()&&(nn(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};yn.prototype._getPosition=function(e){if(!ot(e)&&jt(e)){var t=this._canvas.viewbox(),n=K6(e),r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale;return{left:r+zw*this._canvas.zoom(),top:i}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+zw*this._canvas.zoom(),top:s.top-a.top}};yn.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(r){r in n&&(t.style[r]=n[r]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};yn.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,r=ot(n)?n:[n],i=r.some(function(o){return t._canvas.hasMarker(o,V6)});i?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};yn.prototype._getTargetBounds=function(e){var t=this,n=ot(e)?e:[e],r=n.map(function(i){return t._canvas.getGraphics(i)});return r.reduce(function(i,o){const a=o.getBoundingClientRect();return i.top=Math.min(i.top,a.top),i.right=Math.max(i.right,a.right),i.bottom=Math.max(i.bottom,a.bottom),i.left=Math.min(i.left,a.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function G6(e,t){var n=nn(e);t=ot(t)?t:t.split(/\s+/g),t.forEach(function(r){n.add(r)})}function K6(e){return e.waypoints[e.waypoints.length-1]}function Y6(e,t){return e=ot(e)?e:[e],t=ot(t)?t:[t],e.length===t.length&&Ss(e,function(n){return t.includes(n)})}const HR={__depends__:[ph,H6,uh],contextPad:["type",yn]};var hh,qt,VR,is,Hw,WR,UR,GR,d0,by,Sy,yc={},KR=[],q6=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,mh=Array.isArray;function _o(e,t){for(var n in t)e[n]=t[n];return e}function h0(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function YR(e,t,n){var r,i,o,a={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?hh.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return Lf(e,a,r,i,null)}function Lf(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++VR,__i:-1,__u:0};return i==null&&qt.vnode!=null&&qt.vnode(o),o}function gh(e){return e.children}function Bf(e,t){this.props=e,this.context=t}function kl(e,t){if(t==null)return e.__?kl(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?kl(e):null}function qR(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return qR(e)}}function Vw(e){(!e.__d&&(e.__d=!0)&&is.push(e)&&!wd.__r++||Hw!=qt.debounceRendering)&&((Hw=qt.debounceRendering)||WR)(wd)}function wd(){for(var e,t,n,r,i,o,a,s=1;is.length;)is.length>s&&is.sort(UR),e=is.shift(),s=is.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,o=[],a=[],t.__P&&((n=_o({},r)).__v=r.__v+1,qt.vnode&&qt.vnode(n),m0(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,o,i??kl(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,ZR(o,n,a),r.__e=r.__=null,n.__e!=i&&qR(n)));wd.__r=0}function XR(e,t,n,r,i,o,a,s,l,c,f){var d,g,y,v,x,C,k,R=r&&r.__k||KR,E=t.length;for(l=X6(n,t,R,l,E),d=0;d<E;d++)(y=n.__k[d])!=null&&(g=y.__i==-1?yc:R[y.__i]||yc,y.__i=d,C=m0(e,y,g,i,o,a,s,l,c,f),v=y.__e,y.ref&&g.ref!=y.ref&&(g.ref&&g0(g.ref,null,y),f.push(y.ref,y.__c||v,y)),x==null&&v!=null&&(x=v),(k=!!(4&y.__u))||g.__k===y.__k?l=QR(y,l,e,k):typeof y.type=="function"&&C!==void 0?l=C:v&&(l=v.nextSibling),y.__u&=-7);return n.__e=x,l}function X6(e,t,n,r,i){var o,a,s,l,c,f=n.length,d=f,g=0;for(e.__k=new Array(i),o=0;o<i;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[o]=Lf(null,a,null,null,null):mh(a)?a=e.__k[o]=Lf(gh,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=e.__k[o]=Lf(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[o]=a,l=o+g,a.__=e,a.__b=e.__b+1,(c=a.__i=Q6(a,n,l,d))!=-1&&(d--,(s=n[c])&&(s.__u|=2)),s==null||s.__v==null?(c==-1&&(i>f?g--:i<f&&g++),typeof a.type!="function"&&(a.__u|=4)):c!=l&&(c==l-1?g--:c==l+1?g++:(c>l?g--:g++,a.__u|=4))):e.__k[o]=null;if(d)for(o=0;o<f;o++)(s=n[o])!=null&&!(2&s.__u)&&(s.__e==r&&(r=kl(s)),ek(s,s));return r}function QR(e,t,n,r){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=QR(i[o],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=kl(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Q6(e,t,n,r){var i,o,a,s=e.key,l=e.type,c=t[n],f=c!=null&&(2&c.__u)==0;if(c===null&&s==null||f&&s==c.key&&l==c.type)return n;if(r>(f?1:0)){for(i=n-1,o=n+1;i>=0||o<t.length;)if((c=t[a=i>=0?i--:o++])!=null&&!(2&c.__u)&&s==c.key&&l==c.type)return a}return-1}function Ww(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||q6.test(t)?n:n+"px"}function Qp(e,t,n,r,i){var o,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ww(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||Ww(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(GR,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=d0,e.addEventListener(t,o?Sy:by,o)):e.removeEventListener(t,o?Sy:by,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Uw(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=d0++;else if(t.t<n.u)return;return n(qt.event?qt.event(t):t)}}}function m0(e,t,n,r,i,o,a,s,l,c){var f,d,g,y,v,x,C,k,R,E,b,D,I,z,L,Q,Y,G=t.type;if(t.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(f=qt.__b)&&f(t);e:if(typeof G=="function")try{if(k=t.props,R="prototype"in G&&G.prototype.render,E=(f=G.contextType)&&r[f.__c],b=f?E?E.props.value:f.__:r,n.__c?C=(d=t.__c=n.__c).__=d.__E:(R?t.__c=d=new G(k,b):(t.__c=d=new Bf(k,b),d.constructor=G,d.render=J6),E&&E.sub(d),d.state||(d.state={}),d.__n=r,g=d.__d=!0,d.__h=[],d._sb=[]),R&&d.__s==null&&(d.__s=d.state),R&&G.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=_o({},d.__s)),_o(d.__s,G.getDerivedStateFromProps(k,d.__s))),y=d.props,v=d.state,d.__v=t,g)R&&G.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),R&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(R&&G.getDerivedStateFromProps==null&&k!==y&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(k,b),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(k,d.__s,b)===!1){for(t.__v!=n.__v&&(d.props=k,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(ae){ae&&(ae.__=t)}),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(k,d.__s,b),R&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(y,v,x)})}if(d.context=b,d.props=k,d.__P=e,d.__e=!1,I=qt.__r,z=0,R){for(d.state=d.__s,d.__d=!1,I&&I(t),f=d.render(d.props,d.state,d.context),L=0;L<d._sb.length;L++)d.__h.push(d._sb[L]);d._sb=[]}else do d.__d=!1,I&&I(t),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++z<25);d.state=d.__s,d.getChildContext!=null&&(r=_o(_o({},r),d.getChildContext())),R&&!g&&d.getSnapshotBeforeUpdate!=null&&(x=d.getSnapshotBeforeUpdate(y,v)),Q=f,f!=null&&f.type===gh&&f.key==null&&(Q=JR(f.props.children)),s=XR(e,mh(Q)?Q:[Q],t,n,r,i,o,a,s,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),C&&(d.__E=d.__=null)}catch(ae){if(t.__v=null,l||o!=null)if(ae.then){for(t.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else{for(Y=o.length;Y--;)h0(o[Y]);Cy(t)}else t.__e=n.__e,t.__k=n.__k,ae.then||Cy(t);qt.__e(ae,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=Z6(n.__e,t,n,r,i,o,a,l,c);return(f=qt.diffed)&&f(t),128&t.__u?void 0:s}function Cy(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Cy)}function ZR(e,t,n){for(var r=0;r<n.length;r++)g0(n[r],n[++r],n[++r]);qt.__c&&qt.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){qt.__e(o,i.__v)}})}function JR(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:mh(e)?e.map(JR):_o({},e)}function Z6(e,t,n,r,i,o,a,s,l){var c,f,d,g,y,v,x,C=n.props||yc,k=t.props,R=t.type;if(R=="svg"?i="http://www.w3.org/2000/svg":R=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((y=o[c])&&"setAttribute"in y==!!R&&(R?y.localName==R:y.nodeType==3)){e=y,o[c]=null;break}}if(e==null){if(R==null)return document.createTextNode(k);e=document.createElementNS(i,R,k.is&&k),s&&(qt.__m&&qt.__m(t,o),s=!1),o=null}if(R==null)C===k||s&&e.data==k||(e.data=k);else{if(o=o&&hh.call(e.childNodes),!s&&o!=null)for(C={},c=0;c<e.attributes.length;c++)C[(y=e.attributes[c]).name]=y.value;for(c in C)if(y=C[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=y;else if(!(c in k)){if(c=="value"&&"defaultValue"in k||c=="checked"&&"defaultChecked"in k)continue;Qp(e,c,null,y,i)}}for(c in k)y=k[c],c=="children"?g=y:c=="dangerouslySetInnerHTML"?f=y:c=="value"?v=y:c=="checked"?x=y:s&&typeof y!="function"||C[c]===y||Qp(e,c,y,C[c],i);if(f)s||d&&(f.__html==d.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(d&&(e.innerHTML=""),XR(t.type=="template"?e.content:e,mh(g)?g:[g],t,n,r,R=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&kl(n,0),s,l),o!=null)for(c=o.length;c--;)h0(o[c]);s||(c="value",R=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[c]||R=="progress"&&!v||R=="option"&&v!=C[c])&&Qp(e,c,v,C[c],i),c="checked",x!=null&&x!=e[c]&&Qp(e,c,x,C[c],i))}return e}function g0(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){qt.__e(i,n)}}function ek(e,t,n){var r,i;if(qt.unmount&&qt.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||g0(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){qt.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ek(r[i],t,n||typeof e.type!="function");n||h0(e.__e),e.__c=e.__=e.__e=void 0}function J6(e,t,n){return this.constructor(e,n)}function tk(e,t,n){var r,i,o,a;t==document&&(t=document.documentElement),qt.__&&qt.__(e,t),i=(r=!1)?null:t.__k,o=[],a=[],m0(t,e=t.__k=YR(gh,null,[e]),i||yc,yc,t.namespaceURI,i?null:t.firstChild?hh.call(t.childNodes):null,o,i?i.__e:t.firstChild,r,a),ZR(o,e,a)}hh=KR.slice,qt={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(s){e=s}throw e}},VR=0,Bf.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=_o({},this.state),typeof e=="function"&&(e=e(_o({},n),this.props)),e&&_o(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Vw(this))},Bf.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Vw(this))},Bf.prototype.render=gh,is=[],WR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,UR=function(e,t){return e.__v.__b-t.__v.__b},wd.__r=0,GR=/(PointerCapture)$|Capture$/i,d0=0,by=Uw(!1),Sy=Uw(!0);var nk=function(e,t,n,r){var i;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];a===3?r[0]=s:a===4?r[1]=Object.assign(r[1]||{},s):a===5?(r[1]=r[1]||{})[t[++o]]=s:a===6?r[1][t[++o]]+=s+"":a?(i=e.apply(s,nk(e,s,n,["",null])),r.push(i),s[0]?t[0]|=2:(t[o-2]=0,t[o]=i)):r.push(s)}return r},Gw=new Map;function eL(e){var t=Gw.get(this);return t||(t=new Map,Gw.set(this,t)),(t=nk(this,t.get(e)||(t.set(e,t=function(n){for(var r,i,o=1,a="",s="",l=[0],c=function(g){o===1&&(g||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,g,a):o===3&&(g||a)?(l.push(3,g,a),o=2):o===2&&a==="..."&&g?l.push(4,g,0):o===2&&a&&!g?l.push(5,0,!0,a):o>=5&&((a||!g&&o===5)&&(l.push(o,0,a,i),o=6),g&&(l.push(o,g,0,i),o=6)),a=""},f=0;f<n.length;f++){f&&(o===1&&c(),c(f));for(var d=0;d<n[f].length;d++)r=n[f][d],o===1?r==="<"?(c(),l=[l],o=3):a+=r:o===4?a==="--"&&r===">"?(o=1,a=""):a=r+a[0]:s?r===s?s="":a+=r:r==='"'||r==="'"?s=r:r===">"?(c(),o=1):o&&(r==="="?(o=5,i=a,a=""):r==="/"&&(o<5||n[f][d+1]===">")?(c(),o===3&&(l=l[0]),o=l,(l=l[0]).push(2,0,o),o=0):r===" "||r==="	"||r===`
`||r==="\r"?(c(),o=2):a+=r),o===3&&a==="!--"&&(o=4,l=l[0])}return c(),l}(e)),t),arguments,[])).length>1?t:t[0]}var an=eL.bind(YR),Pl,dn,eg,Kw,vc=0,rk=[],xn=qt,Yw=xn.__b,qw=xn.__r,Xw=xn.diffed,Qw=xn.__c,Zw=xn.unmount,Jw=xn.__;function yh(e,t){xn.__h&&xn.__h(dn,e,vc||t),vc=0;var n=dn.__H||(dn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tg(e){return vc=1,tL(ok,e)}function tL(e,t,n){var r=yh(Pl++,2);if(r.t=e,!r.__c&&(r.__=[ok(void 0,t),function(s){var l=r.__N?r.__N[0]:r.__[0],c=r.t(l,s);l!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=dn,!dn.__f)){var i=function(s,l,c){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!o||o.call(this,s,l,c);var d=r.__c.props!==s;return f.forEach(function(g){if(g.__N){var y=g.__[0];g.__=g.__N,g.__N=void 0,y!==g.__[0]&&(d=!0)}}),o&&o.call(this,s,l,c)||d};dn.__f=!0;var o=dn.shouldComponentUpdate,a=dn.componentWillUpdate;dn.componentWillUpdate=function(s,l,c){if(this.__e){var f=o;o=void 0,i(s,l,c),o=f}a&&a.call(this,s,l,c)},dn.shouldComponentUpdate=i}return r.__N||r.__}function Ry(e,t){var n=yh(Pl++,3);!xn.__s&&y0(n.__H,t)&&(n.__=e,n.u=t,dn.__H.__h.push(n))}function ky(e,t){var n=yh(Pl++,4);!xn.__s&&y0(n.__H,t)&&(n.__=e,n.u=t,dn.__h.push(n))}function ik(e){return vc=5,Tl(function(){return{current:e}},[])}function Tl(e,t){var n=yh(Pl++,7);return y0(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function xu(e,t){return vc=8,Tl(function(){return e},t)}function nL(){for(var e;e=rk.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(If),e.__H.__h.forEach(Py),e.__H.__h=[]}catch(t){e.__H.__h=[],xn.__e(t,e.__v)}}xn.__b=function(e){dn=null,Yw&&Yw(e)},xn.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Jw&&Jw(e,t)},xn.__r=function(e){qw&&qw(e),Pl=0;var t=(dn=e.__c).__H;t&&(eg===dn?(t.__h=[],dn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(If),t.__h.forEach(Py),t.__h=[],Pl=0)),eg=dn},xn.diffed=function(e){Xw&&Xw(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(rk.push(t)!==1&&Kw===xn.requestAnimationFrame||((Kw=xn.requestAnimationFrame)||rL)(nL)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),eg=dn=null},xn.__c=function(e,t){t.some(function(n){try{n.__h.forEach(If),n.__h=n.__h.filter(function(r){return!r.__||Py(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],xn.__e(r,n.__v)}}),Qw&&Qw(e,t)},xn.unmount=function(e){Zw&&Zw(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{If(r)}catch(i){t=i}}),n.__H=void 0,t&&xn.__e(t,n.__v))};var eE=typeof requestAnimationFrame=="function";function rL(e){var t,n=function(){clearTimeout(r),eE&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);eE&&(t=requestAnimationFrame(n))}function If(e){var t=dn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),dn=t}function Py(e){var t=dn;e.__c=e.__(),dn=t}function y0(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ok(e,t){return typeof t=="function"?t(e):t}function ak(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ak(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ed(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ak(e))&&(r&&(r+=" "),r+=t);return r}function iL(e){const{headerEntries:t,onSelect:n,selectedEntry:r,setSelectedEntry:i,title:o}=e,a=Tl(()=>oL(t),[t]);return an`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>an`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(l=>an`
            <li key=${l.id}>
              <${l.action?"button":"span"}
                class=${aL(l,l===r)}
                onClick=${c=>l.action&&n(c,l)}
                title=${l.title||l.label}
                data-id=${l.id}
                onMouseEnter=${()=>l.action&&i(l)}
                onMouseLeave=${()=>l.action&&i(null)}
                onFocus=${()=>l.action&&i(l)}
                onBlur=${()=>l.action&&i(null)}
              >
                ${l.imageUrl&&an`<img class="djs-popup-entry-icon" src=${l.imageUrl} alt="" />`||l.imageHtml&&an`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:l.imageHtml}} />`}
                ${l.label?an`
                  <span class="djs-popup-label">${l.label}</span>
                `:null}
              </${l.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function oL(e){return e.reduce((t,n)=>{const r=n.group||"default",i=t.find(o=>o.id===r);return i?i.entries.push(n):t.push({id:r,entries:[n]}),t},[])}function aL(e,t){return Ed("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function sL(e){const{entry:t,selected:n,onMouseEnter:r,onMouseLeave:i,onAction:o}=e;return an`
    <li
      class=${Ed("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${r}
      onBlur=${i}
      onMouseEnter=${r}
      onMouseLeave=${i}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Ed("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&an`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&an`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?an`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&an`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&an`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function lL(e){const{selectedEntry:t,setSelectedEntry:n,entries:r,...i}=e,o=ik(),a=Tl(()=>uL(r),[r]);return ky(()=>{const s=o.current;if(!s)return;const l=s.querySelector(".selected");l&&cL(l)},[t]),an`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(s=>an`
        ${s.name&&an`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(l=>an`
            <${sL}
              key=${l.id}
              entry=${l}
              selected=${l===t}
              onMouseEnter=${()=>n(l)}
              onMouseLeave=${()=>n(null)}
              ...${i}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function uL(e){const t=[],n=o=>t.find(a=>o.id===a.id),r=o=>!!n(o),i=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const a=o.group?i(o.group):{id:"default"};r(a)?n(a).entries.push(o):t.push({...a,entries:[o]})}),t}function cL(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function pL(e){const{onClose:t,onSelect:n,className:r,headerEntries:i,position:o,title:a,width:s,scale:l,search:c,emptyPlaceholder:f,entries:d,onOpened:g,onClosed:y}=e,v=Tl(()=>Ln(c)?d.length>5:!1,[c,d]),[x,C]=tg(""),k=xu((G,ae)=>{if(!v)return G;const oe=Ce=>{if(!ae)return(Ce.rank||0)>=0;if(Ce.searchable===!1)return!1;const kt=[Ce.description||"",Ce.label||"",Ce.search||""].map(Ge=>Ge.toLowerCase());return ae.toLowerCase().split(/\s/g).every(Ge=>kt.some(Ke=>Ke.includes(Ge)))};return G.filter(oe)},[v]),[R,E]=tg(k(d,x)),[b,D]=tg(R[0]),I=xu(G=>{(!b||!G.includes(b))&&D(G[0]),E(G)},[b,E,D]);Ry(()=>{I(k(d,x))},[x,d]);const z=xu(G=>{let oe=R.indexOf(b)+G;oe<0&&(oe=R.length-1),oe>=R.length&&(oe=0),D(R[oe])},[R,b,D]),L=xu(G=>{if(G.key==="Enter"&&b)return n(G,b);if(G.key==="ArrowUp")return z(-1),G.preventDefault();if(G.key==="ArrowDown")return z(1),G.preventDefault()},[n,b,z]),Q=xu(G=>{Xd(G.target,"input")&&C(()=>G.target.value)},[C]);Ry(()=>(g(),()=>{y()}),[]);const Y=Tl(()=>a||i.length>0,[a,i]);return an`
    <${tE}
      onClose=${t}
      onKeyup=${Q}
      onKeydown=${L}
      className=${r}
      position=${o}
      width=${s}
      scale=${l}
    >
      ${Y&&an`
        <${iL}
          headerEntries=${i}
          onSelect=${n}
          selectedEntry=${b}
          setSelectedEntry=${D}
          title=${a}
        />
      `}
      ${d.length>0&&an`
        <div class="djs-popup-body">

          ${v&&an`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${lL}
            entries=${R}
            selectedEntry=${b}
            setSelectedEntry=${D}
            onAction=${n}
          />
        </div>
      `}
    ${f&&R.length===0&&an`
      <div class="djs-popup-no-results">${bn(f)?f(x):f}</div>
    `}
    </${tE}>
  `}function tE(e){const{onClose:t,onKeydown:n,onKeyup:r,className:i,children:o,position:a}=e,s=ik();return ky(()=>{if(typeof a!="function")return;const l=s.current,c=a(l);l.style.left=`${c.x}px`,l.style.top=`${c.y}px`},[s.current,a]),ky(()=>{const l=s.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),Ry(()=>{const l=f=>{if(f.key==="Escape")return f.preventDefault(),t()},c=f=>{if(!Sa(f.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",c),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",c)}},[]),an`
    <div
      class=${Ed("djs-popup",i)}
      style=${fL(e)}
      onKeydown=${n}
      onKeyup=${r}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function fL(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var dL="data-id",sk=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],hL=1e3;function Zt(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var r=Ln(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",i=>{const o=this.isOpen()&&this._current.target;i.element===o&&this.refresh()})}Zt.$inject=["config.popupMenu","eventBus","canvas"];Zt.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:r,emptyPlaceholder:i,options:o}=this._current,a=Object.entries(n).map(([g,y])=>({id:g,...y})),s=Object.entries(r).map(([g,y])=>({id:g,...y})),l=e&&(g=>this._ensureVisible(g,e)),c=this._updateScale(this._current.container);tk(an`
      <${pL}
        onClose=${g=>this.close(g)}
        onSelect=${(g,y,v)=>this.trigger(g,y,v)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${i}
        scale=${c}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};Zt.prototype.open=function(e,t,n,r){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:i,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};Zt.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:r,emptyPlaceholder:i}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:r,emptyPlaceholder:i},this._emit("refresh"),this._render()};Zt.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const r=this._getEntries(e,n),i=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:r,headerEntries:i,emptyPlaceholder:o,empty:!(Object.keys(r).length||Object.keys(i).length)}};Zt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};Zt.prototype.reset=function(){const e=this._current.container;tk(null,e),no(e)};Zt.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};Zt.prototype._onOpened=function(){this._emit("opened")};Zt.prototype._onClosed=function(){this._emit("closed")};Zt.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const r=zt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r};Zt.prototype._bindAutoClose=function(){this._eventBus.once(sk,this.close,this)};Zt.prototype._unbindAutoClose=function(){this._eventBus.off(sk,this.close,this)};Zt.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,r,i=e;return t!==!0&&(t===!1?(n=1,r=1):(n=t.min,r=t.max),Ln(n)&&e<n&&(i=n),Ln(r)&&e>r&&(i=r)),i};Zt.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),i={},o=t.x,a=t.y;return t.x+r.width>n.width&&(i.x=!0),t.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(o=t.x-r.width,a=t.y-r.height):i.x?(o=t.x-r.width,a=t.y):i.y&&t.y<r.height?(o=t.x,a=10):i.y&&(o=t.x,a=t.y-r.height),t.y<n.top&&(a=t.y+r.height),{x:o,y:a}};Zt.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};Zt.prototype.registerProvider=function(e,t,n){n||(n=t,t=hL),this._eventBus.on("popupMenu.getProviders."+e,t,function(r){r.providers.push(n)})};Zt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};Zt.prototype._getEntries=function(e,t){var n={};return W(t,function(r){if(!r.getPopupMenuEntries){W(r.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=_i(o,["id"])});return}var i=r.getPopupMenuEntries(e);bn(i)?n=i(n):W(i,function(o,a){n[a]=o})}),n};Zt.prototype._getHeaderEntries=function(e,t){var n={};return W(t,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;W(r.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=_i(o,["id"])});return}var i=r.getPopupMenuHeaderEntries(e);bn(i)?n=i(n):W(i,function(o,a){n[a]=o})}),n};Zt.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>bn(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};Zt.prototype.isOpen=function(){return!!this._current};Zt.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let i=Sa(e.delegateTarget||e.target,".entry",!0),o=lr(i,dL);t={id:o,...this._getEntry(o)}}const r=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(bn(r)){if(n==="click")return r(e,t)}else if(r[n])return r[n](e,t)}};Zt.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const v0={__init__:["popupMenu"],popupMenu:["type",Zt]};var lk={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},mL=900;function Kl(e,t,n,r){e.registerProvider(mL,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=r}Kl.$inject=["contextPad","popupMenu","translate","canvas"];Kl.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Kl.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Kl.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${lk.align}</div>`,action:{click:function(t,n){var r=e._getMenuPosition(n);q(r,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",r)}}}}};Kl.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,r=n.getBoundingClientRect(),i={x:r.left,y:r.bottom+t};return i};var gL=["left","center","right","top","middle","bottom"];function Lc(e,t,n,r){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",this)}Lc.$inject=["popupMenu","alignElements","translate","rules"];Lc.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Lc.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Lc.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,r=this._popupMenu,i={};return W(gL,function(o){i["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:lk[o],action:function(){t.trigger(e,o),r.close()}}}),i};function bi(e){fe.call(this,e),this.init()}bi.$inject=["eventBus"];Oe(bi,fe);bi.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(i){r.canExecute(i,t,function(o,a,s){return n(o)},!0)})};bi.prototype.init=function(){};function vh(e){bi.call(this,e)}vh.$inject=["eventBus"];Oe(vh,bi);vh.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=ht(t,function(r){return!(r.waypoints||r.host||r.labelTarget)});return n=Jd(n),n.length<2?!1:n})};const yL={__depends__:[$6,HR,v0],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Kl],alignElementsMenuProvider:["type",Lc],bpmnAlignElements:["type",vh]};var vL=10,uk=50,xL=250;function x0(e,t,n,r){for(var i;i=_L(e,n,t);)n=r(t,n,i);return n}function _0(e){return function(t,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",l=a.margin,c=a.minDistance;l<0?i[o]=Math.min(r[o]+l-t[s]/2,n[o]-c+l):i[o]=Math.max(r[o]+r[s]+l+t[s]/2,n[o]+c+l)}}),i}}function _L(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},i=EL(e);return At(i,function(o){if(o===n)return!1;var a=tr(o,r,vL);return a==="intersect"})}function wL(e,t){t||(t={});function n(v){return v.source===e?1:-1}var r=t.defaultDistance||uk,i=t.direction||"e",o=t.filter,a=t.getWeight||n,s=t.maxDistance||xL,l=t.reference||"start";o||(o=CL);function c(v,x){return i==="n"?l==="start"?Ue(v).top-Ue(x).bottom:l==="center"?Ue(v).top-Je(x).y:Ue(v).top-Ue(x).top:i==="w"?l==="start"?Ue(v).left-Ue(x).right:l==="center"?Ue(v).left-Je(x).x:Ue(v).left-Ue(x).left:i==="s"?l==="start"?Ue(x).top-Ue(v).bottom:l==="center"?Je(x).y-Ue(v).bottom:Ue(x).bottom-Ue(v).bottom:l==="start"?Ue(x).left-Ue(v).right:l==="center"?Je(x).x-Ue(v).right:Ue(x).right-Ue(v).right}var f=e.incoming.filter(o).map(function(v){var x=a(v),C=x<0?c(v.source,e):c(e,v.source);return{id:v.source.id,distance:C,weight:x}}),d=e.outgoing.filter(o).map(function(v){var x=a(v),C=x>0?c(e,v.target):c(v.target,e);return{id:v.target.id,distance:C,weight:x}}),g=f.concat(d).reduce(function(v,x){return v[x.id+"__weight_"+x.weight]=x,v},{}),y=jr(g,function(v,x){var C=x.distance,k=x.weight;return C<0||C>s||(v[String(C)]||(v[String(C)]=0),v[String(C)]+=1*k,(!v.distance||v[v.distance]<v[String(C)])&&(v.distance=C)),v},{});return y.distance||r}function EL(e){var t=ng(e);return e.host&&(t=t.concat(ng(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,r){return n.concat(ng(r))},[]))),t}function ng(e){return SL(e).concat(bL(e))}function bL(e){return e.incoming.map(function(t){return t.source})}function SL(e){return e.outgoing.map(function(t){return t.target})}function CL(){return!0}var RL=100;function ck(e,t,n){e.on("autoPlace",RL,function(r){var i=r.shape,o=r.source;return kL(o,i)}),e.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,i,o){e.fire("autoPlace.start",{source:r,shape:i});var a=e.fire("autoPlace",{source:r,shape:i}),s=t.appendShape(r,i,a,r.parent,o);return e.fire("autoPlace.end",{source:r,shape:s}),s}}ck.$inject=["eventBus","modeling","canvas"];function kL(e,t,n){n||(n={});var r=n.defaultDistance||uk,i=Je(e),o=Ue(e);return{x:o.right+r+t.width/2,y:i.y}}function pk(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}pk.$inject=["eventBus","selection"];const PL={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",ck],autoPlaceSelectionBehavior:["type",pk]};function Al(e,t){for(Ir(t)&&(t=[t]);e=e.parent;)if(ft(e,t))return e;return null}function fk(e,t){var n=Al(e,"bpmn:Process");if(n)return!0;var r=["bpmn:Participant","bpmn:Lane"];if(n=Al(e,r),n)return Mn(n);if(ft(e,r))return Mn(e);var i;for(i=de(e);i&&!A(i,"bpmn:Process");i=i.$parent);if(!t)return!0;var o=t.find(function(a){var s=de(a);return s&&s.get("processRef")===i});return o?Mn(o):!0}function dk(e,t,n){var r=fk(e,n);if(A(t,"bpmn:TextAnnotation"))return AL(e,t,r);if(ft(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return ML(e,t,r);if(A(t,"bpmn:FlowNode"))return TL(e,t,r)}function TL(e,t,n){var r=Ue(e),i=Je(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=wL(e,{filter:function(y){return A(y,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,l=o.minDistance,c=o.baseOrientation;A(e,"bpmn:BoundaryEvent")&&(c=tr(e,e.host,-25),c.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var f=n?{x:r.right+a+t.width/2,y:i.y+nE(c,l,o)}:{x:i.x+nE(c,l,o),y:r.bottom+a+t.height/2},d={margin:s,minDistance:l},g=n?{y:d}:{x:d};return x0(e,t,f,_0(g))}function nE(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function AL(e,t,n){var r=Ue(e),i=n?{x:r.right+t.width/2,y:r.top-50-t.height/2}:{x:r.right+50+t.width/2,y:r.bottom+t.height/2};jt(e)&&(i=Je(e),n?(i.x+=100,i.y-=50):(i.x+=100,i.y+=50));var o={margin:n?-30:30,minDistance:20},a=n?{y:o}:{x:o};return x0(e,t,i,_0(a))}function ML(e,t,n){var r=Ue(e),i=n?{x:r.right-10+t.width/2,y:r.bottom+40+t.width/2}:{x:r.left-40-t.width/2,y:r.bottom-10+t.height/2},o={margin:30,minDistance:30},a=n?{x:o}:{y:o};return x0(e,t,i,_0(a))}function hk(e,t){e.on("autoPlace",function(n){var r=n.shape,i=n.source;return dk(i,r,t)})}hk.$inject=["eventBus","elementRegistry"];const w0={__depends__:[PL],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",hk]};function Oo(e,t,n,r){fe.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},l=a.shape,c=a.parent||a.newParent;s.autoResize!==!1&&i._expand([l],c)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=zv(Hv(a.closure.topLevel)),l=a.hints,c=l?l.autoResize:!0;if(c!==!1){var f=jl(s,function(d){return d.parent.id});W(f,function(d,g){ot(c)&&(d=d.filter(function(y){return At(c,Bi({id:y.id}))})),i._expand(d,g)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,l=a.shape;s&&s.autoResize===!1||l.collapsed||i._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,l=a.shape,c=l.parent;s&&s.autoResize===!1||c&&i._expand([l],c)})}Oo.$inject=["eventBus","elementRegistry","modeling","rules"];Oe(Oo,fe);Oo.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),r=this.getPadding(t),i=Ue(An(e)),o=Ue(t),a={};return i.top-o.top<r.top&&(a.top=i.top-n.top),i.left-o.left<r.left&&(a.left=i.left-n.left),o.right-i.right<r.right&&(a.right=i.right+n.right),o.bottom-i.bottom<r.bottom&&(a.bottom=i.bottom+n.bottom),eh(q({},o,a))};Oo.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var r=this._getOptimalBounds(e,t);if(NL(r,t)){var i=DL($i(t,["x","y","width","height"]),r);this.resize(t,r,{autoResize:i});var o=t.parent;o&&this._expand([t],o)}}};Oo.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Oo.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Oo.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function NL(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function DL(e,t){var n="";return e=Ue(e),t=Ue(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function xh(e){e.invoke(Oo,this)}xh.$inject=["injector"];Oe(xh,Oo);xh.prototype.resize=function(e,t,n){A(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function Bc(e){bi.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}Bc.$inject=["eventBus"];Oe(Bc,bi);Bc.prototype.canResize=function(e,t){return!1};function _h(e,t){Bc.call(this,e),this._modeling=t}Oe(_h,Bc);_h.$inject=["eventBus","modeling"];_h.prototype.canResize=function(e,t){if(A(t.di,"bpmndi:BPMNPlane")||!A(t,"bpmn:Participant")&&!A(t,"bpmn:Lane")&&!A(t,"bpmn:SubProcess"))return!1;var n=!0;return W(e,function(r){if(A(r,"bpmn:Lane")||Rt(r)){n=!1;return}}),n};const OL={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",xh],bpmnAutoResizeProvider:["type",_h]};var rE=1500;function mk(e,t,n){var r=this,i=n.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,l=r._findTargetGfx(s),c=l&&e.get(l);l&&c&&(a.stopPropagation(),i.hover({element:c,gfx:l}),i.move(s))}}i&&t.on("drag.start",function(a){t.once("drag.move",rE,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(l){a=l.gfx,s=l.element}),t.on("element.hover",rE,function(l){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,l;if(a instanceof MouseEvent)return s=ws(a),l=document.elementFromPoint(s.x,s.y),LL(l)}}mk.$inject=["elementRegistry","eventBus","injector"];function LL(e){return Sa(e,"svg, .djs-element",!0)}const BL={__init__:["hoverFix"],hoverFix:["type",mk]};var Ks=Math.round,iE="djs-drag-active";function Ja(e){e.preventDefault()}function IL(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function jL(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function gk(e,t,n,r){var i={threshold:5,trapClick:!0},o;function a(E){var b=t.viewbox(),D=t._container.getBoundingClientRect();return{x:b.x+(E.x-D.left)/b.scale,y:b.y+(E.y-D.top)/b.scale}}function s(E,b){b=b||o;var D=e.createEvent(q({},b.payload,b.data,{isTouch:b.isTouch}));return e.fire("drag."+E,D)===!1?!1:e.fire(b.prefix+"."+E,D)}function l(E){var b=E.filter(function(D){return r.get(D.id)});b.length&&n.select(b)}function c(E,b){var D=o.payload,I=o.displacement,z=o.globalStart,L=ws(E),Q=Ii(L,z),Y=o.localStart,G=a(L),ae=Ii(G,Y);if(!o.active&&(b||jL(Q)>o.threshold)){if(q(D,{x:Ks(Y.x+I.x),y:Ks(Y.y+I.y),dx:0,dy:0},{originalEvent:E}),s("start")===!1)return C();o.active=!0,o.keepSelection||(D.previousSelection=n.get(),n.select(null)),o.cursor&&dh(o.cursor),t.addMarker(t.getRootElement(),iE)}Zm(E),o.active&&(q(D,{x:Ks(G.x+I.x),y:Ks(G.y+I.y),dx:Ks(ae.x),dy:Ks(ae.y)},{originalEvent:E}),s("move"))}function f(E){var b,D=!0;o.active&&(E&&(o.payload.originalEvent=E,Zm(E)),D=s("end")),D===!1&&s("rejected"),b=k(D!==!0),s("ended",b)}function d(E){Pn("Escape",E)&&(Ja(E),C())}function g(E){var b;o.active&&(b=BR(e),setTimeout(b,400),Ja(E)),f(E)}function y(E){c(E)}function v(E){var b=o.payload;b.hoverGfx=E.gfx,b.hover=E.element,s("hover")}function x(E){s("out");var b=o.payload;b.hoverGfx=null,b.hover=null}function C(E){var b;if(o){var D=o.active;D&&s("cancel"),b=k(E),D&&s("canceled",b)}}function k(E){var b,D;s("cleanup"),LR(),o.trapClick?D=g:D=f,it.unbind(document,"mousemove",c),it.unbind(document,"dragstart",Ja),it.unbind(document,"selectstart",Ja),it.unbind(document,"mousedown",D,!0),it.unbind(document,"mouseup",D,!0),it.unbind(document,"keyup",d),it.unbind(document,"touchstart",y,!0),it.unbind(document,"touchcancel",C,!0),it.unbind(document,"touchmove",c,!0),it.unbind(document,"touchend",f,!0),e.off("element.hover",v),e.off("element.out",x),t.removeMarker(t.getRootElement(),iE);var I=o.payload.previousSelection;return E!==!1&&I&&!n.get().length&&l(I),b=o,o=null,b}function R(E,b,D,I){o&&C(!1),typeof b=="string"&&(I=D,D=b,b=null),I=q({},i,I||{});var z=I.data||{},L,Q,Y,G,ae;I.trapClick?G=g:G=f,E?(L=Hl(E)||E,Q=ws(E),Zm(E),L.type==="dragstart"&&Ja(L)):(L=null,Q={x:0,y:0}),Y=a(Q),b||(b=Y),ae=IL(L),o=q({prefix:D,data:z,payload:{},globalStart:Q,displacement:Ii(b,Y),localStart:Y,isTouch:ae},I),I.manual||(ae?(it.bind(document,"touchstart",y,!0),it.bind(document,"touchcancel",C,!0),it.bind(document,"touchmove",c,!0),it.bind(document,"touchend",f,!0)):(it.bind(document,"mousemove",c),it.bind(document,"dragstart",Ja),it.bind(document,"selectstart",Ja),it.bind(document,"mousedown",G,!0),it.bind(document,"mouseup",G,!0)),it.bind(document,"keyup",d),e.on("element.hover",v),e.on("element.out",x)),s("init"),I.autoActivate&&c(E,!0)}e.on("diagram.destroy",C),this.init=R,this.move=c,this.hover=v,this.out=x,this.end=f,this.cancel=C,this.context=function(){return o},this.setOptions=function(E){q(i,E)}}gk.$inject=["eventBus","canvas","selection","elementRegistry"];const Lo={__depends__:[BL,ro],dragging:["type",gk]};function Yl(e,t,n){this._canvas=n,this._opts=q({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(i){var o=r._toBorderPoint(i);r.startScroll(o)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}Yl.$inject=["config.autoScroll","eventBus","canvas"];Yl.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,i=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,i.width-e.x,i.height-e.y];this.stopScroll();for(var a=0,s=0,l=0;l<4;l++)$L(o[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?a=n.scrollStep:l==1?s=n.scrollStep:l==2?a=-n.scrollStep:l==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))};function $L(e,t,n){return t<e&&e<n}Yl.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Yl.prototype.setOptions=function(e){this._opts=q({},this._opts,e)};Yl.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=ws(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const FL={__depends__:[Lo],__init__:["autoScroll"],autoScroll:["type",Yl]};function E0(e){this._commandStack=e.get("commandStack",!1)}E0.$inject=["injector"];E0.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),n===void 0?!0:n};const oo={__init__:["rules"],rules:["type",E0]};var Zp=Math.round,zL=Math.max;function HL(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function VL(e){var t=[];return e.forEach(function(n,r){t.push([r===0?"M":"L",n.x,n.y])}),t}var yk=10;function WL(e,t){var n,r;for(n=0;r=e[n];n++)if(Pc(r,t)<=yk)return{point:e[n],bendpoint:!0,index:n};return null}function UL(e,t){var n=IC(HL(t,yk),VL(e)),r=n[0],i=n[n.length-1],o;return r?r!==i?r.segment2!==i.segment2?(o=zL(r.segment2,i.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:Zp(r.x+i.x)/2,y:Zp(r.y+i.y)/2},index:r.segment2}:{point:{x:Zp(r.x),y:Zp(r.y)},index:r.segment2}:null}function Ty(e,t){return WL(e,t)||UL(e,t)}function vk(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function oE(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function GL(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function KL(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],i=r[0].n*t[0]+r[1].n*t[1],o=r[0].lambda*t[0]+r[1].lambda*t[1];return-i/o}function b0(e,t){var n=t[0],r=t[1],i={x:r.x-n.x,y:r.y-n.y},o=KL([n.x,n.y],[i.x,i.y],[e.x,e.y]);return{x:n.x+o*i.x,y:n.y+o*i.y}}function xk(e,t){var n=b0(e,t),r={x:n.x-e.x,y:n.y-e.y};return vk(r)}function bd(e,t){return vk({x:e.x-t.x,y:e.y-t.y})}var _k="djs-bendpoint",wk="djs-segment-dragger";function YL(e,t){var n=ws(t),r=e._container.getBoundingClientRect(),i;i={x:r.left,y:r.top};var o=e.viewbox();return{x:o.x+(n.x-i.x)/o.scale,y:o.y+(n.y-i.y)/o.scale}}function Ay(e,t,n){var r=YL(e,n),i=Ty(t,r);return i}function My(e,t){var n=Fe("g");St(n).add(_k),tt(e,n);var r=Fe("circle");ke(r,{cx:0,cy:0,r:4}),St(r).add("djs-visual"),tt(n,r);var i=Fe("circle");return ke(i,{cx:0,cy:0,r:10}),St(i).add("djs-hit"),tt(n,i),t&&St(n).add(t),n}function qL(e,t,n,r){var i=Fe("g");tt(e,i);var o=18,a=6,s=11,l=QL(t,n,r),c=a+s,f=Fe("rect");ke(f,{x:-o/2,y:-a/2,width:o,height:a}),St(f).add("djs-visual"),tt(i,f);var d=Fe("rect");return ke(d,{x:-l/2,y:-c/2,width:l,height:c}),St(d).add("djs-hit"),tt(i,d),QC(i,r==="v"?90:0),i}function Ek(e,t,n){var r=Fe("g"),i=hy(t,n),o=xo(t,n);return tt(e,r),qL(r,t,n,o),St(r).add(wk),St(r).add(o==="h"?"horizontal":"vertical"),Hn(r,i.x,i.y),r}function Ny(e){return Math.abs(Math.round(e*2/3))}function XL(e,t){var n=ZL(e,t);return b0(e,n)}function QL(e,t,n){var r=t.x-e.x,i=t.y-e.y;return Ny(n==="h"?r:i)}function ZL(e,t){for(var n=t.waypoints,r=1/0,i,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1],l=xk(e,[a,s]);l<r&&(r=l,i=o)}return[n[i],n[i+1]]}function bk(e,t,n,r,i){function o(E,b,D){var I=E.index,z=E.point,L,Q,Y,G,ae,oe;return I<=0||E.bendpoint?!1:(L=b[I-1],Q=b[I],Y=hy(L,Q),G=xo(L,Q),ae=Math.abs(z.x-Y.x),oe=Math.abs(z.y-Y.y),G&&ae<=D&&oe<=D)}function a(E,b){var D=E.waypoints,I,z,L,Q;return b.index<=0||b.bendpoint||(I={start:D[b.index-1],end:D[b.index]},z=xo(I.start,I.end),!z)?null:(z==="h"?L=I.end.x-I.start.x:L=I.end.y-I.start.y,Q=Ny(L)/2,Q)}function s(E,b){var D=b.waypoints,I=Ay(t,D,E),z;if(I)return z=a(b,I),o(I,D,z)?i.start(E,b,I.index):r.start(E,b,I.index,!I.bendpoint),!0}function l(E,b,D){it.bind(E,b,function(I){n.triggerMouseEvent(b,I,D),I.stopPropagation()})}function c(E,b){var D=t.getLayer("overlays"),I=Bt('.djs-bendpoints[data-element-id="'+hc(E.id)+'"]',D);return!I&&b&&(I=Fe("g"),ke(I,{"data-element-id":E.id}),St(I).add("djs-bendpoints"),tt(D,I),l(I,"mousedown",E),l(I,"click",E),l(I,"dblclick",E)),I}function f(E,b){return Bt('.djs-segment-dragger[data-segment-idx="'+E+'"]',b)}function d(E,b){b.waypoints.forEach(function(D,I){var z=My(E);tt(E,z),Hn(z,D.x,D.y)}),My(E,"floating")}function g(E,b){for(var D=b.waypoints,I,z,L,Q=1;Q<D.length;Q++)I=D[Q-1],z=D[Q],xo(I,z)&&(L=Ek(E,I,z),ke(L,{"data-segment-idx":Q}),l(L,"mousemove",b))}function y(E){W(py("."+_k,E),function(b){En(b)})}function v(E){W(py("."+wk,E),function(b){En(b)})}function x(E){var b=c(E);return b||(b=c(E,!0),d(b,E),g(b,E)),b}function C(E){var b=c(E);b&&(v(b),y(b),g(b,E),d(b,E))}function k(E,b){var D=Bt(".floating",E),I=b.point;D&&Hn(D,I.x,I.y)}function R(E,b,D){var I=f(b.index,E),z=D[b.index-1],L=D[b.index],Q=b.point,Y=hy(z,L),G=xo(z,L),ae,oe;I&&(ae=JL(I),oe={x:Q.x-Y.x,y:Q.y-Y.y},G==="v"&&(oe={x:oe.y,y:oe.x}),Hn(ae,oe.x,oe.y))}e.on("connection.changed",function(E){C(E.element)}),e.on("connection.remove",function(E){var b=c(E.element);b&&En(b)}),e.on("element.marker.update",function(E){var b=E.element,D;b.waypoints&&(D=x(b),E.add?St(D).add(E.marker):St(D).remove(E.marker))}),e.on("element.mousemove",function(E){var b=E.element,D=b.waypoints,I,z;if(D){if(I=c(b,!0),z=Ay(t,D,E.originalEvent),!z)return;k(I,z),z.bendpoint||R(I,z,D)}}),e.on("element.mousedown",function(E){if(Ta(E)){var b=E.originalEvent,D=E.element;if(D.waypoints)return s(b,D)}}),e.on("selection.changed",function(E){var b=E.newSelection,D=b[0];D&&D.waypoints&&x(D)}),e.on("element.hover",function(E){var b=E.element;b.waypoints&&(x(b),n.registerEvent(E.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(E){n.unregisterEvent(E.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(E){var b=E.element,D=E.newId;if(b.waypoints){var I=c(b);I&&ke(I,{"data-element-id":D})}}),this.addHandles=x,this.updateHandles=C,this.getBendpointsContainer=c,this.getSegmentDragger=f}bk.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function JL(e){return Bt(".djs-visual",e)}var aE=Math.round,ns="reconnectStart",rs="reconnectEnd",_u="updateWaypoints";function S0(e,t,n,r,i,o){this._injector=e,this.start=function(a,s,l,c){var f=n.getGraphics(s),d=s.source,g=s.target,y=s.waypoints,v;!c&&l===0?v=ns:!c&&l===y.length-1?v=rs:v=_u;var x=v===_u?"connection.updateWaypoints":"connection.reconnect",C=i.allowed(x,{connection:s,source:d,target:g});C===!1&&(C=i.allowed(x,{connection:s,source:g,target:d})),C!==!1&&r.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:f,context:{allowed:C,bendpointIndex:l,connection:s,source:d,target:g,insert:c,type:v}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,l=s.connection,c=l.source,f=l.target,d=a.hover,g=s.type;s.hover=d;var y;if(d){var v=g===_u?"connection.updateWaypoints":"connection.reconnect";if(y=s.allowed=i.allowed(v,{connection:l,source:g===ns?d:c,target:g===rs?d:f}),y){s.source=g===ns?d:c,s.target=g===rs?d:f;return}y===!1&&(y=s.allowed=i.allowed(v,{connection:l,source:g===rs?d:f,target:g===ns?d:c})),y&&(s.source=g===rs?d:f,s.target=g===ns?d:c)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,l=s.type;s.hover=null,s.source=null,s.target=null,l!==_u&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,l=s.allowed,c=s.bendpointIndex,f=s.connection,d=s.insert,g=f.waypoints.slice(),y=s.source,v=s.target,x=s.type,C=s.hints||{},k={x:aE(a.x),y:aE(a.y)};if(!l)return!1;x===_u?(d?g.splice(c,0,k):g[c]=k,C.bendpointMove={insert:d,bendpointIndex:c},g=this.cropWaypoints(f,g),o.updateWaypoints(f,HN(g),C)):(x===ns?(C.docking="source",Sd(s)&&(C.docking="target",C.newWaypoints=g.reverse())):x===rs&&(C.docking="target",Sd(s)&&(C.docking="source",C.newWaypoints=g.reverse())),o.reconnect(f,y,v,k,C))},this)}S0.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];S0.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var r=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=r,t};function Sd(e){var t=e.hover,n=e.source,r=e.target,i=e.type;if(i===ns)return t&&r&&t===r&&n!==r;if(i===rs)return t&&n&&t===n&&n!==r}var eB="reconnectStart",tB="reconnectEnd",sE="updateWaypoints",wu="connect-ok",Jp="connect-not-ok",lE="connect-hover",uE="djs-updating",cE="djs-dragging",pE=1100;function Sk(e,t,n,r){this._injector=t;var i=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,l=a.connection,c=a.insert,f=l.waypoints,d=f.slice();a.waypoints=f,c&&d.splice(s,0,{x:o.x,y:o.y}),l.waypoints=d;var g=a.draggerGfx=My(r.getLayer("overlays"));St(g).add("djs-dragging"),r.addMarker(l,cE),r.addMarker(l,uE)}),n.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,l=a.hover,c=a.type;if(l){if(r.addMarker(l,lE),c===sE)return;s?(r.removeMarker(l,Jp),r.addMarker(l,wu)):s===!1&&(r.removeMarker(l,wu),r.addMarker(l,Jp))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],pE,function(o){var a=o.context,s=a.hover,l=a.target;s&&(r.removeMarker(s,lE),r.removeMarker(s,l?wu:Jp))}),n.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,l=a.bendpointIndex,c=a.draggerGfx,f=a.hover,d=a.type,g=a.connection,y=g.source,v=g.target,x=g.waypoints.slice(),C={x:o.x,y:o.y},k=a.hints||{},R={};i&&(k.connectionStart&&(R.connectionStart=k.connectionStart),k.connectionEnd&&(R.connectionEnd=k.connectionEnd),d===eB?Sd(a)?(R.connectionEnd=R.connectionEnd||C,R.source=v,R.target=f||y,x=x.reverse()):(R.connectionStart=R.connectionStart||C,R.source=f||y,R.target=v):d===tB?Sd(a)?(R.connectionStart=R.connectionStart||C,R.source=f||v,R.target=y,x=x.reverse()):(R.connectionEnd=R.connectionEnd||C,R.source=y,R.target=f||v):(R.noCropping=!0,R.noLayout=!0,x[l]=C),d===sE&&(x=e.cropWaypoints(g,x)),R.waypoints=x,i.drawPreview(a,s,R)),Hn(c,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],pE,function(o){var a=o.context,s=a.connection,l=a.draggerGfx,c=a.hover,f=a.target,d=a.waypoints;s.waypoints=d,En(l),r.removeMarker(s,uE),r.removeMarker(s,cE),c&&(r.removeMarker(c,wu),r.removeMarker(c,f?wu:Jp)),i&&i.cleanUp(a)})}Sk.$inject=["bendpointMove","injector","eventBus","canvas"];var fE="connect-hover",dE="djs-updating";function hE(e,t,n){return C0(e,t,e[t]+n)}function C0(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function nB(e,t,n,r){var i=Math.max(t[r],n[r]),o=Math.min(t[r],n[r]),a=20,s=Math.min(Math.max(o+a,e[r]),i-a);return C0(t,r,s)}function Ck(e){return e==="x"?"y":"x"}function mE(e,t,n){var r,i;return e.original?e.original:(r=Je(t),i=Ck(n),C0(e,i,r[i]))}function Rk(e,t,n,r,i,o){var a=e.get("connectionDocking",!1);this.start=function(d,g,y){var v,x=n.getGraphics(g),C=y-1,k=y,R=g.waypoints,E=R[C],b=R[k],D=Ay(n,R,d),I,z,L;I=xo(E,b),I&&(z=I==="v"?"x":"y",C===0&&(E=mE(E,g.source,z)),k===R.length-1&&(b=mE(b,g.target,z)),D?L=D.point:L={x:(E.x+b.x)/2,y:(E.y+b.y)/2},v={connection:g,segmentStartIndex:C,segmentEndIndex:k,segmentStart:E,segmentEnd:b,axis:z,dragPosition:L},r.init(d,L,"connectionSegment.move",{cursor:z==="x"?"resize-ew":"resize-ns",data:{connection:g,connectionGfx:x,context:v}}))};function s(d,g){if(!a)return g;var y=d.waypoints,v;return d.waypoints=g,v=a.getCroppedWaypoints(d),d.waypoints=y,v}function l(d){i.update("connection",d.connection,d.connectionGfx)}function c(d,g,y){var v=d.newWaypoints,x=d.segmentStartIndex+g,C=v[x],k=d.segmentEndIndex+g,R=v[k],E=Ck(d.axis),b=nB(y,C,R,E);Hn(d.draggerGfx,b.x,b.y)}function f(d,g){var y=0,v=d.filter(function(x,C){return Yv(d[C-1],d[C+1],x)?(y=C<=g?y-1:y,!1):!0});return{waypoints:v,segmentOffset:y}}t.on("connectionSegment.move.start",function(d){var g=d.context,y=d.connection,v=n.getLayer("overlays");g.originalWaypoints=y.waypoints.slice(),g.draggerGfx=Ek(v,g.segmentStart,g.segmentEnd),St(g.draggerGfx).add("djs-dragging"),n.addMarker(y,dE)}),t.on("connectionSegment.move.move",function(d){var g=d.context,y=g.connection,v=g.segmentStartIndex,x=g.segmentEndIndex,C=g.segmentStart,k=g.segmentEnd,R=g.axis,E=g.originalWaypoints.slice(),b=hE(C,R,d["d"+R]),D=hE(k,R,d["d"+R]),I=E.length,z=0;E[v]=b,E[x]=D;var L,Q;v<2&&(L=tr(y.source,b),v===1?L==="intersect"&&(E.shift(),E[0]=b,z--):L!=="intersect"&&(E.unshift(C),z++)),x>I-3&&(Q=tr(y.target,D),x===I-2?Q==="intersect"&&(E.pop(),E[E.length-1]=D):Q!=="intersect"&&E.push(k)),g.newWaypoints=y.waypoints=s(y,E),c(g,z,d),g.newSegmentStartIndex=v+z,l(d)}),t.on("connectionSegment.move.hover",function(d){d.context.hover=d.hover,n.addMarker(d.hover,fE)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(d){var g=d.context.hover;g&&n.removeMarker(g,fE)}),t.on("connectionSegment.move.cleanup",function(d){var g=d.context,y=g.connection;g.draggerGfx&&En(g.draggerGfx),n.removeMarker(y,dE)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(d){var g=d.context,y=g.connection;y.waypoints=g.originalWaypoints,l(d)}),t.on("connectionSegment.move.end",function(d){var g=d.context,y=g.connection,v=g.newWaypoints,x=g.newSegmentStartIndex;v=v.map(function(D){return{original:D.original,x:Math.round(D.x),y:Math.round(D.y)}});var C=f(v,x),k=C.waypoints,R=s(y,k),E=C.segmentOffset,b={segmentMove:{segmentStartIndex:g.segmentStartIndex,newSegmentStartIndex:x+E}};o.updateWaypoints(y,R,b)})}Rk.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var rB=Math.abs,gE=Math.round;function iB(e,t,n){n=n===void 0?10:n;var r,i;for(r=0;r<t.length;r++)if(i=t[r],rB(i-e)<=n)return i}function kk(e){return{x:e.x,y:e.y}}function Pk(e){return{x:e.x+e.width,y:e.y+e.height}}function gi(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:gE(e.x+e.width/2),y:gE(e.y+e.height/2)}}function Ml(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function hn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,i=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,r=n-i,e[t]+=r,e["d"+t]+=r),i}function Tk(e){return e.children||[]}var oB=Math.abs,yE=Math.round,rg=10;function Ak(e){function t(o,a){if(ot(o)){for(var s=o.length;s--;)if(oB(o[s]-a)<=rg)return o[s]}else{o=+o;var l=a%o;if(l<rg)return a-l;if(l>o-rg)return a-l+o}return a}function n(o,a){if(o.waypoints)return XL(a,o);if(o.width)return{x:yE(o.width/2+o.x),y:yE(o.height/2+o.y)}}function r(o){var a=o.context,s=a.snapPoints,l=a.connection,c=l.waypoints,f=a.segmentStart,d=a.segmentStartIndex,g=a.segmentEnd,y=a.segmentEndIndex,v=a.axis;if(s)return s;var x=[c[d-1],f,g,c[y+1]];return d<2&&x.unshift(n(l.source,o)),y>c.length-3&&x.unshift(n(l.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},W(x,function(C){C&&(C=C.original||C,v==="y"&&s.horizontal.push(C.y),v==="x"&&s.vertical.push(C.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=r(o),s=o.x,l=o.y,c,f;if(a){c=t(a.vertical,s),f=t(a.horizontal,l);var d=s-c,g=l-f;q(o,{dx:o.dx-d,dy:o.dy-g,x:c,y:f}),(d||a.vertical.indexOf(s)!==-1)&&hn(o,"x",c),(g||a.horizontal.indexOf(l)!==-1)&&hn(o,"y",f)}});function i(o){var a=o.snapPoints,s=o.connection.waypoints,l=o.bendpointIndex;if(a)return a;var c=[s[l-1],s[l+1]];return o.snapPoints=a={horizontal:[],vertical:[]},W(c,function(f){f&&(f=f.original||f,a.horizontal.push(f.y),a.vertical.push(f.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,l=s&&n(s,o);!jt(s)||!l||!l.x||!l.y||(hn(o,"x",l.x),hn(o,"y",l.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=i(a),l=a.hover,c=l&&n(l,o),f=o.x,d=o.y,g,y;if(s){g=t(c?s.vertical.concat([c.x]):s.vertical,f),y=t(c?s.horizontal.concat([c.y]):s.horizontal,d);var v=f-g,x=d-y;q(o,{dx:o.dx-v,dy:o.dy-x,x:o.x-v,y:o.y-x}),(v||s.vertical.indexOf(f)!==-1)&&hn(o,"x",g),(x||s.horizontal.indexOf(d)!==-1)&&hn(o,"y",y)}})}Ak.$inject=["eventBus"];const aB={__depends__:[Lo,oo],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",bk],bendpointMove:["type",S0],bendpointMovePreview:["type",Sk],connectionSegmentMove:["type",Rk],bendpointSnapping:["type",Ak]};function Mk(e,t,n,r){function i(a,s){return r.allowed("connection.create",{source:a,target:s})}function o(a,s){return i(s,a)}e.on("connect.hover",function(a){var s=a.context,l=s.start,c=a.hover,f;if(s.hover=c,f=s.canExecute=i(l,c),!pc(f)){if(f!==!1){s.source=l,s.target=c;return}f=s.canExecute=o(l,c),!pc(f)&&f!==!1&&(s.source=c,s.target=l)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,l=s.canExecute,c=s.connectionStart,f={x:a.x,y:a.y},d=s.source,g=s.target;if(!l)return!1;var y=null,v={connectionStart:Dy(s)?f:c,connectionEnd:Dy(s)?c:f};In(l)&&(y=l),s.connection=n.connect(d,g,y,v)}),this.start=function(a,s,l,c){In(l)||(c=l,l=Je(s)),t.init(a,"connect",{autoActivate:c,data:{shape:s,context:{start:s,connectionStart:l}}})}}Mk.$inject=["eventBus","dragging","modeling","rules"];function Dy(e){var t=e.hover,n=e.source,r=e.target;return t&&n&&t===n&&n!==r}var sB=1100,lB=900,vE="connect-ok",xE="connect-not-ok";function Nk(e,t,n){var r=e.get("connectionPreview",!1);r&&t.on("connect.move",function(i){var o=i.context,a=o.canExecute,s=o.hover,l=o.source,c=o.start,f=o.startPosition,d=o.target,g=o.connectionStart||f,y=o.connectionEnd||{x:i.x,y:i.y},v=g,x=y;Dy(o)&&(v=y,x=g),r.drawPreview(o,a,{source:l||c,target:d||s,connectionStart:v,connectionEnd:x})}),t.on("connect.hover",lB,function(i){var o=i.context,a=i.hover,s=o.canExecute;s!==null&&n.addMarker(a,s?vE:xE)}),t.on(["connect.out","connect.cleanup"],sB,function(i){var o=i.hover;o&&(n.removeMarker(o,vE),n.removeMarker(o,xE))}),r&&t.on("connect.cleanup",function(i){r.cleanUp(i.context)})}Nk.$inject=["injector","eventBus","canvas"];const R0={__depends__:[ro,oo,Lo],__init__:["connectPreview"],connect:["type",Mk],connectPreview:["type",Nk]};var uB="djs-dragger";function Bo(e,t,n,r){this._canvas=t,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Bo.$inject=["injector","canvas","graphicsFactory","elementFactory"];Bo.prototype.drawPreview=function(e,t,n){n=n||{};var r=e.connectionPreviewGfx,i=e.getConnection,o=n.source,a=n.target,s=n.waypoints,l=n.connectionStart,c=n.connectionEnd,f=n.noLayout,d=n.noCropping,g=n.noNoop,y,v=this;if(r||(r=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Qd(r),i||(i=e.getConnection=cB(function(x,C,k){return v.getConnection(x,C,k)})),t&&(y=i(t,o,a)),!y){!g&&this.drawNoopPreview(r,n);return}y.waypoints=s||[],this._layouter&&!f&&(y.waypoints=this._layouter.layoutConnection(y,{source:o,target:a,connectionStart:l,connectionEnd:c,waypoints:n.waypoints||y.waypoints})),(!y.waypoints||!y.waypoints.length)&&(y.waypoints=[o?Je(o):l,a?Je(a):c]),this._connectionDocking&&(o||a)&&!d&&(y.waypoints=this._connectionDocking.getCroppedWaypoints(y,o,a)),this._graphicsFactory.drawConnection(r,y,{stroke:"var(--element-dragger-color)"})};Bo.prototype.drawNoopPreview=function(e,t){var n=t.source,r=t.target,i=t.connectionStart||Je(n),o=t.connectionEnd||Je(r),a=this.cropWaypoints(i,o,n,r),s=this.createNoopConnection(a[0],a[1]);tt(e,s)};Bo.prototype.cropWaypoints=function(e,t,n,r){var i=this._graphicsFactory,o=n&&i.getShapePath(n),a=r&&i.getShapePath(r),s=i.getConnectionPath({waypoints:[e,t]});return e=n&&gy(o,s,!0)||e,t=r&&gy(a,s,!1)||t,[e,t]};Bo.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&En(e.connectionPreviewGfx)};Bo.prototype.getConnection=function(e){var t=pB(e);return this._elementFactory.createConnection(t)};Bo.prototype.createConnectionPreviewGfx=function(){var e=Fe("g");return ke(e,{pointerEvents:"none"}),St(e).add(uB),tt(this._canvas.getActiveLayer(),e),e};Bo.prototype.createNoopConnection=function(e,t){return Zd([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function cB(e){var t={};return function(n){var r=JSON.stringify(n),i=t[r];return i||(i=t[r]=e.apply(null,arguments)),i}}function pB(e){return In(e)?e:{}}const fB={__init__:["connectionPreview"],connectionPreview:["type",Bo]},dB=new Oc("ps");var hB=["marker-start","marker-mid","marker-end"],mB=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Ma(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r}Ma.$inject=["elementRegistry","eventBus","canvas","styles"];Ma.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};Ma.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Ma.prototype.addDragger=function(e,t,n,r="djs-dragger"){n=n||this.getGfx(e);var i=PC(n),o=n.getBoundingClientRect();return this._cloneMarkers(fs(i),r),ke(i,this._styles.cls(r,[],{x:o.top,y:o.left})),tt(t,i),ke(i,"data-preview-support-element-id",e.id),i};Ma.prototype.addFrame=function(e,t){var n=Fe("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return tt(t,n),ke(n,"data-preview-support-element-id",e.id),n};Ma.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var r=this;if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)r._cloneMarkers(e.childNodes[i],t,n);xB(e)&&hB.forEach(function(o){if(ke(e,o)){var a=gB(e,o,r._canvas.getContainer());a&&r._cloneMarker(n,e,a,o,t)}})};Ma.prototype._cloneMarker=function(e,t,n,r,i="djs-dragger"){var o=[n.id,i,dB.next()].join("-"),a=Bt("marker#"+n.id,e);e=e||this._canvas._svg;var s=a||PC(n);s.id=o,St(s).add(i);var l=Bt(":scope > defs",e);l||(l=Fe("defs"),tt(e,l)),tt(l,s);var c=vB(s.id);ke(t,r,c)};function gB(e,t,n){var r=yB(ke(e,t));return Bt("marker#"+r,n||document)}function yB(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function vB(e){return"url(#"+e+")"}function xB(e){return mB.indexOf(e.nodeName)!==-1}const ql={__init__:["previewSupport"],previewSupport:["type",Ma]},ef="complex-preview";class Dk{constructor(t,n,r){this._canvas=t,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:r=[],removed:i=[],resized:o=[]}=t,a=this._canvas.getLayer(ef);n.filter(s=>!_B(s)).forEach(s=>{let l;jt(s)?(l=this._graphicsFactory._createContainer("connection",Fe("g")),this._graphicsFactory.drawConnection(fs(l),s)):(l=this._graphicsFactory._createContainer("shape",Fe("g")),this._graphicsFactory.drawShape(fs(l),s),Hn(l,s.x,s.y)),this._previewSupport.addDragger(s,a,l)}),r.forEach(({element:s,delta:l})=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"]);const c=this._previewSupport.addDragger(s,a);jt(s)?Hn(c,l.x,l.y):Hn(c,s.x+l.x,s.y+l.y)}),i.forEach(s=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"])}),o.forEach(({shape:s,bounds:l})=>{this._canvas.addMarker(s,"djs-hidden"),this._markers.push([s,"djs-hidden"]),this._previewSupport.addDragger(s,a,void 0,"djs-dragging");const c=this._graphicsFactory._createContainer("shape",Fe("g"));this._graphicsFactory.drawShape(fs(c),s,{width:l.width,height:l.height}),Hn(c,l.x,l.y),this._previewSupport.addDragger(s,a,c)})}cleanUp(){Qd(this._canvas.getLayer(ef)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(ef)}hide(){this._canvas.hideLayer(ef)}}Dk.$inject=["canvas","graphicsFactory","previewSupport"];function _B(e){return e.hidden}const wB={__depends__:[ql],__init__:["complexPreview"],complexPreview:["type",Dk]};var k0=["top","bottom","left","right"],tf=10;function P0(e,t){fe.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var o=i.context,a=o.connection,s=a.source,l=a.target,c=o.hints||{};c.createElementsBehavior!==!1&&(n(s),n(l))}),this.postExecuted(["label.create"],function(i){var o=i.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(i){var o=i.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(l){n(l)})});function n(i){if(oh(i)){var o=SB(i);o&&r(i,o)}}function r(i,o){var a=Je(i),s=i.label,l=Je(s);if(s.parent){var c=Ue(i),f;switch(o){case"top":f={x:a.x,y:c.top-tf-s.height/2};break;case"left":f={x:c.left-tf-s.width/2,y:a.y};break;case"bottom":f={x:a.x,y:c.bottom+tf+s.height/2};break;case"right":f={x:c.right+tf+s.width/2,y:a.y};break}var d=Ii(f,l);t.moveShape(s,d)}}}Oe(P0,fe);P0.$inject=["eventBus","modeling"];function EB(e){var t=e.host,n=Je(e),r=tr(n,t),i;r.indexOf("-")>=0?i=r.split("-"):i=[r];var o=k0.filter(function(a){return i.indexOf(a)===-1});return o}function bB(e){var t=Je(e),n=[].concat(e.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),e.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return Ok(t,r)});return n}function SB(e){var t=Je(e.label),n=Je(e),r=Ok(n,t);if(CB(r)){var i=bB(e);if(e.host){var o=EB(e);i=i.concat(o)}var a=k0.filter(function(s){return i.indexOf(s)===-1});if(a.indexOf(r)===-1)return a[0]}}function Ok(e,t){return tr(t,e,5)}function CB(e){return k0.indexOf(e)!==-1}function T0(e){fe.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,r=t.shape;t.position||(A(r,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-r.height/2}:t.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}Oe(T0,fe);T0.$inject=["eventBus"];function A0(e,t){e.invoke(fe,this),this.postExecute("shape.move",function(n){var r=n.newParent,i=n.shape,o=ht(i.incoming.concat(i.outgoing),function(a){return A(a,"bpmn:Association")});W(o,function(a){t.moveConnection(a,{x:0,y:0},r)})},!0)}Oe(A0,fe);A0.$inject=["injector","modeling"];var _E=500;function wh(e,t){t.invoke(fe,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",_E,function(r){var i=r.elements;i=i.filter(function(o){var a=o.host;return wE(o,a)}),i.length===1&&i.map(function(o){return i.indexOf(o)}).forEach(function(o){var a=i[o];r.elements[o]=n._replaceShape(i[o],a)})},!0),this.preExecute("elements.move",_E,function(r){var i=r.shapes,o=r.newHost;if(i.length===1){var a=i[0];wE(a,o)&&(r.shapes=[n._replaceShape(a,o)])}},!0)}wh.$inject=["bpmnReplace","injector"];Oe(wh,fe);wh.prototype._replaceShape=function(e,t){var n=RB(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})};function RB(e){var t=de(e),n=t.eventDefinitions;return n&&n[0]}function wE(e,t){return!Rt(e)&&ft(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function M0(e,t){fe.call(this,e);function n(r){return ht(r.attachers,function(i){return A(i,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var i=r.context.source,o=r.context.target,a=n(o);A(i,"bpmn:EventBasedGateway")&&A(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(r){var i=r.context.oldSource,o=r.context.newSource;A(i,"bpmn:Gateway")&&A(o,"bpmn:EventBasedGateway")&&W(o.outgoing,function(a){var s=a.target,l=n(s);A(s,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)})})}M0.$inject=["eventBus","modeling"];Oe(M0,fe);function N0(e,t,n){fe.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",i,!0),this.postExecuted("connection.delete",r,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function r(C){const k=C.source,R=C.target;Ys(k)&&Eu(R)&&f(R)}function i(C){const k=C.connection,R=C.source,E=C.target;Ys(R)&&nf(E)&&(c(E),g(R,[k]))}function o(C){const k=C.newTarget,R=C.oldSource,E=C.oldTarget;if(E!==k){const b=R;Eu(E)&&f(E),Ys(b)&&nf(k)&&c(k)}}function a(C){const{element:k}=C;Eu(k)?(d(k),y(k)):nf(k)&&v(k)}function s(C){const{newData:k,oldShape:R}=C;if(Ys(C.oldShape)&&k.eventDefinitionType!=="bpmn:CompensateEventDefinition"||k.type!=="bpmn:BoundaryEvent"){const E=R.outgoing.find(({target:b})=>Eu(b));E&&E.target&&(C._connectionTarget=E.target)}else if(!Ys(C.oldShape)&&k.eventDefinitionType==="bpmn:CompensateEventDefinition"&&k.type==="bpmn:BoundaryEvent"){const E=R.outgoing.find(({target:b})=>nf(b));E&&E.target&&(C._connectionTarget=E.target),x(R)}}function l(C){const{_connectionTarget:k,newShape:R}=C;k&&t.connect(R,k)}function c(C){t.updateProperties(C,{isForCompensation:!0})}function f(C){t.updateProperties(C,{isForCompensation:void 0})}function d(C){for(const k of C.incoming)n.canConnect(k.source,C)||t.removeConnection(k);for(const k of C.outgoing)n.canConnect(C,k.target)||t.removeConnection(k)}function g(C,k){C.outgoing.filter(b=>A(b,"bpmn:Association")).filter(b=>Eu(b.target)&&!k.includes(b)).forEach(b=>t.removeConnection(b))}function y(C){const k=C.attachers.slice();k.length&&t.removeElements(k)}function v(C){const k=C.incoming.filter(R=>Ys(R.source));t.removeElements(k)}function x(C){const k=C.outgoing.filter(R=>A(R,"bpmn:SequenceFlow"));t.removeElements(k)}}Oe(N0,fe);N0.$inject=["eventBus","modeling","bpmnRules"];function Eu(e){const t=de(e);return t&&t.get("isForCompensation")}function Ys(e){return e&&A(e,"bpmn:BoundaryEvent")&&zl(e,"bpmn:CompensateEventDefinition")}function nf(e){return e&&A(e,"bpmn:Activity")&&!Jn(e)}function D0(e){e.invoke(fe,this),this.preExecute("shape.create",1500,function(t){var n=t.context,r=n.parent,i=n.shape;A(r,"bpmn:Lane")&&!A(i,"bpmn:Lane")&&(n.parent=Al(r,"bpmn:Participant"))})}D0.$inject=["injector"];Oe(D0,fe);function O0(e,t){fe.call(this,e),this.preExecute("shape.create",function(n){var r=n.context,i=r.shape;if(A(i,"bpmn:DataObjectReference")&&i.type!=="label"){var o=t.create("bpmn:DataObject");i.businessObject.dataObjectRef=o}})}O0.$inject=["eventBus","bpmnFactory"];Oe(O0,fe);var Oy=20,Ly=20,Lk=30,rf=2e3;function L0(e,t,n){fe.call(this,t),t.on(["create.start","shape.move.start"],rf,function(i){var o=i.context,a=o.shape,s=e.getRootElement();if(!(!A(a,"bpmn:Participant")||!A(s,"bpmn:Process")||!s.children.length)){var l=s.children.filter(function(d){return!A(d,"bpmn:Group")&&!Rt(d)&&!jt(d)});if(l.length){var c=An(l),f=kB(a,c);q(a,f),o.createConstraints=PB(a,c)}}}),t.on("create.start",rf,function(i){var o=i.context,a=o.shape,s=e.getRootElement(),l=e.getGraphics(s);function c(f){f.element=s,f.gfx=l}A(a,"bpmn:Participant")&&A(s,"bpmn:Process")&&(t.on("element.hover",rf,c),t.once("create.cleanup",function(){t.off("element.hover",c)}))});function r(){var i=e.getRootElement();return A(i,"bpmn:Collaboration")?i:n.makeCollaboration()}this.preExecute("elements.create",rf,function(i){var o=i.elements,a=i.parent,s=TB(o),l;s&&A(a,"bpmn:Process")&&(i.parent=r(),l=i.hints=i.hints||{},l.participant=s,l.process=a,l.processRef=de(s).get("processRef"))},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;A(a,"bpmn:Participant")&&A(o,"bpmn:Process")&&(i.parent=r(),i.process=o,i.processRef=de(a).get("processRef"))},!0),this.execute("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.shape,l=o.participant;a&&(!l||s===l)&&de(s).set("processRef",de(a))},!0),this.revert("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.processRef||o.processRef,l=i.shape,c=o.participant;a&&(!c||l===c)&&de(l).set("processRef",s)},!0),this.postExecute("shape.create",function(i){var o=i.hints||{},a=i.process||i.hints.process,s=i.shape,l=o.participant;if(a){var c=a.children.slice();l?s===l&&n.moveElements(c,{x:0,y:0},l):n.moveElements(c,{x:0,y:0},s)}},!0)}L0.$inject=["canvas","eventBus","modeling"];Oe(L0,fe);function kB(e,t){t={width:t.width+Oy*2+Lk,height:t.height+Ly*2};var n=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-n/2,y:-r/2,width:n,height:r}}function PB(e,t){return t=Ue(t),{bottom:t.top+e.height/2-Ly,left:t.right-e.width/2+Oy,top:t.bottom-e.height/2+Ly,right:t.left+e.width/2-Oy-Lk}}function TB(e){return At(e,function(t){return A(t,"bpmn:Participant")})}var EE="__targetRef_placeholder";function B0(e,t){fe.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],bE(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],bE(o));function n(a,s,l){var c=a.get("dataInputAssociations");return At(c,function(f){return f!==l&&f.targetRef===s})}function r(a,s){var l=a.get("properties"),c=At(l,function(f){return f.name===EE});return!c&&s&&(c=t.create("bpmn:Property",{name:EE}),Sn(l,c)),c}function i(a,s){var l=r(a);l&&(n(a,l,s)||mn(a.get("properties"),l))}function o(a){var s=a.context,l=s.connection,c=l.businessObject,f=l.target,d=f&&f.businessObject,g=s.newTarget,y=g&&g.businessObject,v=s.oldTarget||s.target,x=v&&v.businessObject,C=l.businessObject,k;x&&x!==d&&i(x,c),y&&y!==d&&i(y,c),d?(k=r(d,!0),C.targetRef=k):C.targetRef=null}}B0.$inject=["eventBus","bpmnFactory"];Oe(B0,fe);function bE(e){return function(t){var n=t.context,r=n.connection;if(A(r,"bpmn:DataInputAssociation"))return e(t)}}function Eh(e){this._bpmnUpdater=e}Eh.$inject=["bpmnUpdater"];Eh.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.newSemanticParent,i=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};Eh.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.oldSemanticParent,i=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};function I0(e,t,n,r){fe.call(this,r),t.registerHandler("dataStore.updateContainment",Eh);function i(){return n.filter(function(s){return A(s,"bpmn:Participant")&&de(s).processRef})[0]}function o(s){return s.children.filter(function(l){return A(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function a(s,l){var c=s.businessObject||s;if(l=l||i(),l){var f=l.businessObject||l;t.execute("dataStore.updateContainment",{dataStoreBo:c,dataStoreDi:Ct(s),newSemanticParent:f.processRef||f,newDiParent:Ct(l)})}}this.preExecute("shape.create",function(s){var l=s.context,c=l.shape;A(c,"bpmn:DataStoreReference")&&c.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var l=s.context,c=l.shapes,f=c.filter(function(d){return A(d,"bpmn:DataStoreReference")});f.length&&(l.hints||(l.hints={}),l.hints.autoResize=c.filter(function(d){return!A(d,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var l=s.context,c=l.shape,f=c.parent;A(c,"bpmn:DataStoreReference")&&c.type!=="label"&&A(f,"bpmn:Collaboration")&&a(c)}),this.postExecute("shape.move",function(s){var l=s.context,c=l.shape,f=l.oldParent,d=c.parent;if(!A(f,"bpmn:Collaboration")&&A(c,"bpmn:DataStoreReference")&&c.type!=="label"&&A(d,"bpmn:Collaboration")){var g=A(f,"bpmn:Participant")?f:MB(f,"bpmn:Participant");a(c,g)}}),this.postExecute("shape.delete",function(s){var l=s.context,c=l.shape,f=e.getRootElement();ft(c,["bpmn:Participant","bpmn:SubProcess"])&&A(f,"bpmn:Collaboration")&&o(f).filter(function(d){return AB(d,c)}).forEach(function(d){a(d)})}),this.postExecute("canvas.updateRoot",function(s){var l=s.context,c=l.oldRoot,f=l.newRoot,d=o(c);d.forEach(function(g){A(f,"bpmn:Process")&&a(g,f)})})}I0.$inject=["canvas","commandStack","elementRegistry","eventBus"];Oe(I0,fe);function AB(e,t){for(var n=e.businessObject||e,r=t.businessObject||t;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function MB(e,t){for(;e.parent;){if(A(e.parent,t))return e.parent;e=e.parent}}var Cd=Math.max,Rd=Math.min,NB=20;function Bk(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function DB(e,t,n){var r=n.x,i=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+i,o.height=e.height-i):t.indexOf("s")!==-1&&(o.height=e.height+i),t.indexOf("e")!==-1?o.width=e.width+r:t.indexOf("w")!==-1&&(o.x=e.x+r,o.width=e.width-r),o}function OB(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function of(e,t,n){var r=t[e],i=n.min&&n.min[e],o=n.max&&n.max[e];return Ze(i)&&(r=(/top|left/.test(e)?Rd:Cd)(r,i)),Ze(o)&&(r=(/top|left/.test(e)?Cd:Rd)(r,o)),r}function LB(e,t){if(!t)return e;var n=Ue(e);return eh({top:of("top",n,t),right:of("right",n,t),bottom:of("bottom",n,t),left:of("left",n,t)})}function BB(e,t,n,r){var i=Ue(t),o={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},a=r?Ue(r):o,s={top:Rd(o.top,a.top),left:Rd(o.left,a.left),bottom:Cd(o.bottom,a.bottom),right:Cd(o.right,a.right)};return eh(s)}function bu(e,t){return typeof e<"u"?e:NB}function IB(e,t){var n,r,i,o;return typeof t=="object"?(n=bu(t.left),r=bu(t.right),i=bu(t.top),o=bu(t.bottom)):n=r=i=o=bu(t),{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+o}}function jB(e){return!(e.waypoints||e.type==="label")}function Ik(e,t){var n;if(e.length===void 0?n=ht(e.children,jB):n=e,n.length)return IB(An(n),t)}var Yo=Math.abs;function $B(e,t){return Bk(Ue(t),Ue(e))}var FB=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],pi=30;function bh(e,t){return t=t||[],e.children.filter(function(n){A(n,"bpmn:Lane")&&(bh(n,t),t.push(n))}),t}function Na(e){return e.children.filter(function(t){return A(t,"bpmn:Lane")})}function hi(e){return Al(e,FB)||e}function zB(e,t){var n=hi(e),r=A(n,"bpmn:Process")?[]:[n],i=bh(n,r),o=Ue(e),a=Ue(t),s=$B(e,t),l=[],c=Mn(e);return i.forEach(function(f){if(f!==e){var d=c?0:s.top,g=c?s.right:0,y=c?0:s.bottom,v=c?s.left:0,x=Ue(f);s.top&&(Yo(x.bottom-o.top)<10&&(y=a.top-x.bottom),Yo(x.top-o.top)<5&&(d=a.top-x.top)),s.left&&(Yo(x.right-o.left)<10&&(g=a.left-x.right),Yo(x.left-o.left)<5&&(v=a.left-x.left)),s.bottom&&(Yo(x.top-o.bottom)<10&&(d=a.bottom-x.top),Yo(x.bottom-o.bottom)<5&&(y=a.bottom-x.bottom)),s.right&&(Yo(x.left-o.right)<10&&(v=a.right-x.left),Yo(x.right-o.right)<5&&(g=a.right-x.right)),(d||g||y||v)&&l.push({shape:f,newBounds:OB(f,{top:d,right:g,bottom:y,left:v})})}}),l}var HB=500;function j0(e,t){fe.call(this,e);function n(r,i){var o=Mn(r),a=Na(i),s=[],l=[],c=[],f=[];if(Rs(a,function(C){return o?C.y>r.y?l.push(C):s.push(C):C.x>r.x?f.push(C):c.push(C),C.children}),!!a.length){var d;o?l.length&&s.length?d=r.height/2:d=r.height:f.length&&c.length?d=r.width/2:d=r.width;var g,y,v,x;s.length&&(g=t.calculateAdjustments(s,"y",d,r.y-10),t.makeSpace(g.movingShapes,g.resizingShapes,{x:0,y:d},"s")),l.length&&(y=t.calculateAdjustments(l,"y",-d,r.y+r.height+10),t.makeSpace(y.movingShapes,y.resizingShapes,{x:0,y:-d},"n")),c.length&&(v=t.calculateAdjustments(c,"x",d,r.x-10),t.makeSpace(v.movingShapes,v.resizingShapes,{x:d,y:0},"e")),f.length&&(x=t.calculateAdjustments(f,"x",-d,r.x+r.width+10),t.makeSpace(x.movingShapes,x.resizingShapes,{x:-d,y:0},"w"))}}this.postExecuted("shape.delete",HB,function(r){var i=r.context,o=i.hints,a=i.shape,s=i.oldParent;A(a,"bpmn:Lane")&&(o&&o.nested||n(a,s))})}j0.$inject=["eventBus","spaceTool"];Oe(j0,fe);var SE=500;function Sh(e,t){t.invoke(fe,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",SE,function(r){var i=r.elements;i.filter(function(o){var a=o.host;return CE(o,a)}).map(function(o){return i.indexOf(o)}).forEach(function(o){r.elements[o]=n._replaceShape(i[o])})},!0),this.preExecute("elements.move",SE,function(r){var i=r.shapes,o=r.newHost;i.forEach(function(a,s){var l=a.host;CE(a,WB(i,l)?l:o)&&(i[s]=n._replaceShape(a))})},!0)}Sh.$inject=["bpmnReplace","injector"];Oe(Sh,fe);Sh.prototype._replaceShape=function(e){var t=VB(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function VB(e){var t=de(e),n=t.eventDefinitions;return n&&n[0]}function CE(e,t){return!Rt(e)&&A(e,"bpmn:BoundaryEvent")&&!t}function WB(e,t){return e.indexOf(t)!==-1}function $0(e,t,n){fe.call(this,e);function r(i,o,a){var s=o.waypoints,l,c,f,d,g,y,v,x=i.outgoing.slice(),C=i.incoming.slice(),k;Ze(a.width)?k=Je(a):k=a;var R=Ty(s,k);if(R){if(l=s.slice(0,R.index),c=s.slice(R.index+(R.bendpoint?1:0)),!l.length||!c.length)return;f=R.bendpoint?s[R.index]:k,(l.length===1||!RE(i,l[l.length-1]))&&l.push(kE(f)),(c.length===1||!RE(i,c[0]))&&c.unshift(kE(f))}d=o.source,g=o.target,t.canConnect(d,i,o)&&(n.reconnectEnd(o,i,l||k),y=o),t.canConnect(i,g,o)&&(y?v=n.connect(i,g,{type:o.type,waypoints:c}):(n.reconnectStart(o,i,c||k),v=o));var E=[].concat(y&&ht(C,function(b){return b.source===y.source})||[],v&&ht(x,function(b){return b.target===v.target})||[]);E.length&&n.removeElements(E)}this.preExecute("elements.move",function(i){var o=i.newParent,a=i.shapes,s=i.delta,l=a[0];if(!(!l||!o)){o&&o.waypoints&&(i.newParent=o=o.parent);var c=Je(l),f={x:c.x+s.x,y:c.y+s.y},d=At(o.children,function(g){var y=t.canInsert(a,g);return y&&Ty(g.waypoints,f)});d&&(i.targetFlow=d,i.position=f)}},!0),this.postExecuted("elements.move",function(i){var o=i.shapes,a=i.targetFlow,s=i.position;a&&r(o[0],a,s)},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;t.canInsert(a,o)&&(i.targetFlow=o,i.parent=o.parent)},!0),this.postExecuted("shape.create",function(i){var o=i.shape,a=i.targetFlow,s=i.position;a&&r(o,a,s)},!0)}Oe($0,fe);$0.$inject=["eventBus","bpmnRules","modeling"];function RE(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function kE(e){return q({},e)}function F0(e,t){fe.call(this,e),this.preExecuted("connection.create",function(n){var r=n.context,i=r.connection,o=r.source,a=r.target,s=r.hints;if(!(s&&s.createElementsBehavior===!1)&&qs(i)){var l=[];A(o,"bpmn:EventBasedGateway")?l=a.incoming.filter(c=>c!==i&&qs(c)):l=a.incoming.filter(c=>c!==i&&qs(c)&&A(c.source,"bpmn:EventBasedGateway")),l.forEach(function(c){t.removeConnection(c)})}}),this.preExecuted("shape.replace",function(n){var r=n.context,i=r.newShape;if(A(i,"bpmn:EventBasedGateway")){var o=i.outgoing.filter(qs).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(qs).forEach(function(s){const l=a.incoming.filter(qs).filter(function(c){return c.source===i});(s.source!==i||l.length>1)&&t.removeConnection(s)})})}})}F0.$inject=["eventBus","modeling"];Oe(F0,fe);function qs(e){return A(e,"bpmn:SequenceFlow")}var af=1500,PE=2e3;function jk(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],af,function(r){var i=r.context,o=i.shape||r.shape,a=r.hover;A(a,"bpmn:Lane")&&!ft(o,["bpmn:Lane","bpmn:Participant"])&&(r.hover=hi(a),r.hoverGfx=e.getGraphics(r.hover));var s=n.getRootElement();a!==s&&(o.labelTarget||ft(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(r.hover=s,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],af,function(r){var i=r.hover;A(i,"bpmn:Lane")&&(r.hover=hi(i)||i,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["bendpoint.move.hover"],af,function(r){var i=r.context,o=r.hover,a=i.type;A(o,"bpmn:Lane")&&/reconnect/.test(a)&&(r.hover=hi(o)||o,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.start"],af,function(r){var i=r.context,o=i.start;A(o,"bpmn:Lane")&&(i.start=hi(o)||o)}),t.on("shape.move.start",PE,function(r){var i=r.shape;A(i,"bpmn:Lane")&&(r.shape=hi(i)||i)}),t.on("spaceTool.move",PE,function(r){var i=r.hover;i&&A(i,"bpmn:Lane")&&(r.hover=hi(i))})}jk.$inject=["elementRegistry","eventBus","canvas"];function UB(e){return e.create("bpmn:Category")}function GB(e){return e.create("bpmn:CategoryValue")}function KB(e,t,n){return Sn(t.get("categoryValue"),e),e.$parent=t,Sn(n.get("rootElements"),t),t.$parent=n,e}function YB(e){var t=e.$parent;return t&&(mn(t.get("categoryValue"),e),e.$parent=null),e}function qB(e){var t=e.$parent;return t&&(mn(t.get("rootElements"),e),e.$parent=null),e}var TE=770;function z0(e,t,n,r,i,o){i.invoke(fe,this);function a(){return n.filter(function(v){return A(v,"bpmn:Group")})}function s(v,x){return v.some(function(C){var k=de(C),R=k.categoryValueRef&&k.categoryValueRef.$parent;return R===x})}function l(v,x){return v.some(function(C){var k=de(C);return k.categoryValueRef===x})}function c(v,x,C){var k=a().filter(function(R){return R.businessObject!==C});x&&!s(k,x)&&qB(x),v&&!l(k,v)&&YB(v)}function f(v,x){return KB(v,x,t.getDefinitions())}function d(v,x){var C=de(v),k=C.categoryValueRef;k||(k=C.categoryValueRef=x.categoryValue=x.categoryValue||GB(e));var R=k.$parent;R||(R=k.$parent=x.category=x.category||UB(e)),f(k,R,t.getDefinitions())}function g(v,x){var C=x.category,k=x.categoryValue,R=de(v);k?(R.categoryValueRef=null,c(k,C,R)):c(null,R.categoryValueRef.$parent,R)}this.execute("label.create",function(v){var x=v.context,C=x.labelTarget;A(C,"bpmn:Group")&&d(C,x)}),this.revert("label.create",function(v){var x=v.context,C=x.labelTarget;A(C,"bpmn:Group")&&g(C,x)}),this.execute("shape.delete",function(v){var x=v.context,C=x.shape,k=de(C);if(!(!A(C,"bpmn:Group")||C.labelTarget)){var R=x.categoryValue=k.categoryValueRef,E;R&&(E=x.category=R.$parent,c(R,E,k),k.categoryValueRef=null)}}),this.reverted("shape.delete",function(v){var x=v.context,C=x.shape;if(!(!A(C,"bpmn:Group")||C.labelTarget)){var k=x.category,R=x.categoryValue,E=de(C);R&&(E.categoryValueRef=R,f(R,k))}}),this.execute("shape.create",function(v){var x=v.context,C=x.shape;!A(C,"bpmn:Group")||C.labelTarget||de(C).categoryValueRef&&d(C,x)}),this.reverted("shape.create",function(v){var x=v.context,C=x.shape;!A(C,"bpmn:Group")||C.labelTarget||de(C).categoryValueRef&&g(C,x)});function y(v,x){var C=e.create(v.$type);return o.copyElement(v,C,null,x)}r.on("copyPaste.copyElement",TE,function(v){var x=v.descriptor,C=v.element;if(!(!A(C,"bpmn:Group")||C.labelTarget)){var k=de(C);if(k.categoryValueRef){var R=k.categoryValueRef;x.categoryValue=y(R,!0),R.$parent&&(x.category=y(R.$parent,!0))}}}),r.on("copyPaste.pasteElement",TE,function(v){var x=v.descriptor,C=x.businessObject,k=x.categoryValue,R=x.category;k&&(k=C.categoryValueRef=y(k)),R&&(k.$parent=y(R)),delete x.category,delete x.categoryValue})}z0.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];Oe(z0,fe);function By(e,t,n,r){var i,o,a,s,l;return i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),i==0?null:(o=e.y-n.y,a=e.x-n.x,l=(r.x-n.x)*o-(r.y-n.y)*a,s=l/i,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function $k(e){function t(r,i,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},l=By(r,i,o,a),c=By(r,i,o,s),f;l&&c?AE(l,o)>AE(c,o)?f=c:f=l:f=l||c,r.original=f}function n(r){var i=r.waypoints;t(i[0],i[1],Je(r.source)),t(i[i.length-1],i[i.length-2],Je(r.target))}e.on("bpmnElement.added",function(r){var i=r.element;i.waypoints&&n(i)})}$k.$inject=["eventBus"];function AE(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function H0(e){fe.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var r=n.context.shape,i=de(r),o=Ct(r);if(ft(i,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}H0.$inject=["eventBus"];Oe(H0,fe);var Fk=Math.sqrt,zk=Math.min,XB=Math.max,ME=Math.abs;function NE(e){return Math.pow(e,2)}function Su(e,t){return Fk(NE(e.x-t.x)+NE(e.y-t.y))}function QB(e,t){var n=0,r,i,o,a,s,l,c,f,d,g,y;for(n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],OE(r,i)?c=[r]:(o=Su(e,r),a=Su(e,i),l=zk(o,a),c=ZB(r,i,e,l)),c.length<1)throw new Error("expected between [1, 2] circle -> line intersections");c.length===1&&(f={type:"bendpoint",position:c[0],segmentIndex:n,bendpointIndex:OE(r,c[0])?n:n+1}),c.length===2&&(s=eI(c[0],c[1]),f={type:"segment",position:s,segmentIndex:n,relativeLocation:Su(r,s)/Su(r,i)}),d=Su(f.position,e),(!y||g>d)&&(y=f,g=d)}return y}function ZB(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,l=i*i+o*o,c=i*a+o*s,f=a*a+s*s-r*r,d=c/l,g=f/l,y=d*d-g;if(y<0&&y>-1e-6&&(y=0),y<0)return[];var v=Fk(y),x=-d+v,C=-d-v,k={x:e.x-i*x,y:e.y-o*x};if(y===0)return[k];var R={x:e.x-i*C,y:e.y-o*C};return[k,R].filter(function(E){return JB(E,e,t)})}function JB(e,t,n){return DE(e.x,t.x,n.x)&&DE(e.y,t.y,n.y)}function DE(e,t,n){return e>=zk(t,n)-kd&&e<=XB(t,n)+kd}function eI(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var kd=.1;function OE(e,t){return ME(e.x-t.x)<=kd&&ME(e.y-t.y)<=kd}function tI(e,t,n,r){var i=n.segmentIndex,o=t.length-e.length;if(r.segmentMove){var a=r.segmentMove.segmentStartIndex,s=r.segmentMove.newSegmentStartIndex;return i===a?s:i>=s?i+o<s?s:i+o:i}if(r.bendpointMove){var l=r.bendpointMove.insert,c=r.bendpointMove.bendpointIndex,f;if(o===0)return i;if(i>=c&&(f=l?i+1:i-1),i<c&&(f=i,l&&n.type!=="bendpoint"&&c-1===i)){var d=Vk(t,c);d<n.relativeLocation&&f++}return f}return o===0?i:r.connectionStart&&i===0?0:r.connectionEnd&&i===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function Hk(e,t,n,r){var i=0,o=0,a={point:e,delta:{x:0,y:0}},s=QB(e,n),l=s.segmentIndex,c=tI(n,t,s,r);if(c<0||c>t.length-2||c===null)return a;var f=LE(n,l),d=LE(t,c),g=s.position,y=rI(f,g),v=nI(f,d);if(s.type==="bendpoint"){var x=t.length-n.length,C=s.bendpointIndex,k=n[C];if(t.indexOf(k)!==-1)return a;if(x===0){var R=t[C];return i=R.x-s.position.x,o=R.y-s.position.y,{delta:{x:i,y:o},point:{x:e.x+i,y:e.y+o}}}x<0&&C!==0&&C<n.length-1&&(y=Vk(n,C))}var E={x:(d[1].x-d[0].x)*y+d[0].x,y:(d[1].y-d[0].y)*y+d[0].y},b=GL({x:e.x-g.x,y:e.y-g.y},v);return i=E.x+b.x-e.x,o=E.y+b.y-e.y,{point:Eo(E),delta:Eo({x:i,y:o})}}function Vk(e,t){var n=bd(e[t-1],e[t]),r=bd(e[t],e[t+1]),i=n/(n+r);return i}function nI(e,t){var n=oE(e),r=oE(t);return r-n}function LE(e,t){return[e[t],e[t+1]]}function rI(e,t){var n=bd(e[0],e[1]),r=bd(e[0],t);return n===0?0:r/n}function iI(e,t,n,r){var i=Je(e);return Hk(i,t,n,r).delta}function Ic(e,t,n){var r=Uu(t),i=Uu(n),o=Ii(e,r),a={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return Eo({x:i.x+a.x,y:i.y+a.y})}function BE(e,t,n){var r=Uu(e),i=Uu(t),o=Uu(n),a=Ii(e,r),s=Ii(r,i),l=oI(r,t,n);if(l)return l;var c={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},f={x:o.x+c.x,y:o.y+c.y};return Eo({x:f.x+a.x-e.x,y:f.y+a.y-e.y})}function oI(e,t,n){var r=Ue(t),i=Ue(n);if(aI(r,i))return null;var o=tr(t,e),a,s,l;if(o==="top")a={x:0,y:i.bottom-r.bottom};else if(o==="bottom")a={x:0,y:i.top-r.top};else if(o==="right")a={x:i.left-r.left,y:0};else if(o==="left")a={x:i.right-r.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},l=tr(n,s),l!==o?null:a}function aI(e,t){return sI(e,t)||lI(e,t)}function sI(e,t){return e.right!==t.right&&e.left!==t.left}function lI(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var IE="name",jE="text";function V0(e,t,n,r){fe.call(this,e),this.postExecute("element.updateProperties",i),this.postExecute("element.updateModdleProperties",a=>{de(a.context.element)===a.context.moddleElement&&i(a)});function i(a){var s=a.context,l=s.element,c=s.properties;if(IE in c&&t.updateLabel(l,c[IE]),jE in c&&A(l,"bpmn:TextAnnotation")){var f=r.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},c[jE]||"");t.updateLabel(l,c.text,f)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,l=s.hints||{};if(l.createElementsBehavior!==!1){var c=s.shape||s.connection;Rt(c)||!_s(c)||Xr(c)&&t.updateLabel(c,Xr(c))}}),this.postExecute("shape.delete",function(a){var s=a.context,l=s.labelTarget,c=s.hints||{};l&&c.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})});function o(a){var s=a.context,l=s.connection,c=l.label,f=q({},s.hints),d=s.newWaypoints||l.waypoints,g=s.oldWaypoints;return typeof f.startChanged>"u"&&(f.startChanged=!!f.connectionStart),typeof f.endChanged>"u"&&(f.endChanged=!!f.connectionEnd),iI(c,d,g,f)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,l=s.hints||{};if(l.labelBehavior!==!1){var c=s.connection,f=c.label,d;!f||!f.parent||(d=o(a),t.moveShape(f,d))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,l=s.newShape,c=s.oldShape,f=de(l);f&&_s(f)&&c.label&&l.label&&(l.label.x=c.label.x,l.label.y=c.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,c=s.newBounds,f=s.oldBounds;if(oh(l)){var d=l.label,g=Je(d),y=pI(f),v=cI(g,y),x=uI(v,f,c);t.moveShape(d,x)}})}Oe(V0,fe);V0.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function uI(e,t,n){var r=Ic(e,t,n);return Eo(Ii(r,e))}function cI(e,t){if(t.length){var n=fI(e,t);return b0(e,n)}}function pI(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function fI(e,t){var n=t.map(function(i){return{line:i,distance:xk(e,i)}}),r=to(n,"distance");return r[0].line}function dI(e,t,n,r){return Hk(e,t,n,r).point}function W0(e,t){fe.call(this,e);function n(r,i){var o=r.context,a=o.connection,s=q({},o.hints),l=o.newWaypoints||a.waypoints,c=o.oldWaypoints;return typeof s.startChanged>"u"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged>"u"&&(s.endChanged=!!s.connectionEnd),dI(i,l,c,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming;s.forEach(function(l){var c=l.waypoints[l.waypoints.length-1],f=n(r,c),d=[].concat(l.waypoints.slice(0,-1),[f]);t.updateWaypoints(l,d)}),a.forEach(function(l){var c=l.waypoints[0],f=n(r,c),d=[].concat([f],l.waypoints.slice(1));t.updateWaypoints(l,d)})}),this.postExecute(["connection.move"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming,l=i.delta;s.forEach(function(c){var f=c.waypoints[c.waypoints.length-1],d={x:f.x+l.x,y:f.y+l.y},g=[].concat(c.waypoints.slice(0,-1),[d]);t.updateWaypoints(c,g)}),a.forEach(function(c){var f=c.waypoints[0],d={x:f.x+l.x,y:f.y+l.y},g=[].concat([d],c.waypoints.slice(1));t.updateWaypoints(c,g)})})}Oe(W0,fe);W0.$inject=["eventBus","modeling"];function Ch(e,t,n){var r=kh(e),i=Uk(r,t),o=r[0];return i.length?i[i.length-1]:Ic(o.original||o,n,t)}function Rh(e,t,n){var r=kh(e),i=Uk(r,t),o=r[r.length-1];return i.length?i[0]:Ic(o.original||o,n,t)}function U0(e,t,n){var r=kh(e),i=Wk(t,n),o=r[0];return Ic(o.original||o,i,t)}function G0(e,t,n){var r=kh(e),i=Wk(t,n),o=r[r.length-1];return Ic(o.original||o,i,t)}function Wk(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function kh(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function Uk(e,t){var n=Zn(e,mI);return ht(n,function(r){return hI(r,t)})}function hI(e,t){return tr(t,e,1)==="intersect"}function mI(e){return e.original||e}function K0(e,t){fe.call(this,e),this.postExecute("shape.replace",function(n){var r=n.oldShape,i=n.newShape;if(gI(r,i)){var o=yI(r);o.incoming.forEach(function(a){var s=Rh(a,i,r);t.reconnectEnd(a,i,s)}),o.outgoing.forEach(function(a){var s=Ch(a,i,r);t.reconnectStart(a,i,s)})}},!0)}K0.$inject=["eventBus","modeling"];Oe(K0,fe);function gI(e,t){return A(e,"bpmn:Participant")&&yt(e)&&A(t,"bpmn:Participant")&&!yt(t)}function yI(e){var t=kc([e],!1),n=[],r=[];return t.forEach(function(i){i!==e&&(i.incoming.forEach(function(o){A(o,"bpmn:MessageFlow")&&n.push(o)}),i.outgoing.forEach(function(o){A(o,"bpmn:MessageFlow")&&r.push(o)}))},[]),{incoming:n,outgoing:r}}const vI=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function Gk(e){const t=de(e);if(!A(t,"bpmn:BoundaryEvent")&&!(A(t,"bpmn:StartEvent")&&Jn(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:vI.some(r=>A(n[0],r))}function Kk(e){return A(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function Y0(e,t){e.invoke(fe,this),this.postExecuted("shape.replace",function(n){const r=n.context.oldShape,i=n.context.newShape,o=n.context.hints;if(!Gk(i))return;const a=Kk(i);if(o.targetElement&&o.targetElement[a]!==void 0)return;const l=de(r).get(a),c=de(i).get(a);l!==c&&t.updateProperties(i,{[a]:l})})}Y0.$inject=["injector","modeling"];Oe(Y0,fe);function q0(e,t){fe.call(this,e),this.preExecute("shape.resize",function(n){var r=n.shape,i=Ct(r),o=i&&i.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(r,o,{bounds:void 0})},!0)}Oe(q0,fe);q0.$inject=["eventBus","modeling"];function X0(e,t,n){fe.call(this,e),this.preExecute("shape.delete",function(r){var i=r.context.shape;if(!(i.incoming.length!==1||i.outgoing.length!==1)){var o=i.incoming[0],a=i.outgoing[0];if(!(!A(o,"bpmn:SequenceFlow")||!A(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=xI(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,s)}}})}Oe(X0,fe);X0.$inject=["eventBus","bpmnRules","modeling"];function Xs(e){return e.original||e}function xI(e,t){var n=By(Xs(e[e.length-2]),Xs(e[e.length-1]),Xs(t[1]),Xs(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[Xs(e[0]),Xs(t[t.length-1])]}function Q0(e,t){fe.call(this,e),this.preExecute("shape.delete",function(n){var r=n.shape,i=r.parent;A(r,"bpmn:Participant")&&(n.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(n){var r=n.collaborationRoot;if(r&&!r.businessObject.participants.length){var i=t.makeProcess(),o=r.children.slice();t.moveElements(o,{x:0,y:0},i)}},!0)}Q0.$inject=["eventBus","modeling"];Oe(Q0,fe);function Z0(e,t,n,r){fe.call(this,e);var i=r.get("dragging",!1);function o(l){var c=l.source,f=l.target,d=l.parent;if(d){var g,y;A(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(c,f)||(y=!0),n.canConnectMessageFlow(c,f)&&(g="bpmn:MessageFlow")),A(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(c,f)||(y=!0),n.canConnectSequenceFlow(c,f)&&(g="bpmn:SequenceFlow")),y&&t.removeConnection(l),g&&t.connect(c,f,{type:g,waypoints:l.waypoints.slice()})}}function a(l){var c=l.context,f=c.connection,d=c.newSource||f.source,g=c.newTarget||f.target,y,v;y=n.canConnect(d,g),!(!y||y.type===f.type)&&(v=t.connect(d,g,{type:y.type,associationDirection:y.associationDirection,waypoints:f.waypoints.slice()}),f.parent&&t.removeConnection(f),c.connection=v,i&&s(f,v))}function s(l,c){var f=i.context(),d=f&&f.payload.previousSelection,g;!d||!d.length||(g=d.indexOf(l),g!==-1&&d.splice(g,1,c))}this.postExecuted("elements.move",function(l){var c=l.closure,f=c.allConnections;W(f,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(l){var c=l.context,f=c.properties,d=c.element,g=d.businessObject,y;f.default&&(y=At(d.outgoing,Bi({id:d.businessObject.default.id})),y&&t.updateProperties(y,{conditionExpression:void 0})),f.conditionExpression&&g.sourceRef.default===g&&t.updateProperties(d.source,{default:void 0})})}Oe(Z0,fe);Z0.$inject=["eventBus","modeling","bpmnRules","injector"];function Ph(e,t,n,r,i,o){r.invoke(fe,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,l=s.parent,c=s.elements,f=jr(c,function(d,g){var y=t.canReplace([g],g.host||g.parent||l);return y?d.concat(y.replacements):d},[]);f.length&&this._replaceElements(c,f)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,l=s.newParent,c=s.newHost,f=[];W(s.closure.topLevel,function(g){Jn(g)?f=f.concat(g.children):f=f.concat(g)}),f.length===1&&c&&(l=c);var d=t.canReplace(f,l);d&&this._replaceElements(f,d.replacements,c)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,c=s.newShape,f=l.attachers,d;f&&f.length&&(d=t.canReplace(f,c),this._replaceElements(f,d.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,c=s.newShape;i.unclaimId(l.businessObject.id,l.businessObject),i.updateProperties(c,{id:l.id})})}Oe(Ph,fe);Ph.prototype._replaceElements=function(e,t){var n=this._elementRegistry,r=this._bpmnReplace,i=this._selection;W(t,function(o){var a={type:o.newElementType},s=n.get(o.oldElementId),l=e.indexOf(s);e[l]=r.replaceElement(s,a,{select:!1})}),t&&i.select(e)};Ph.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var _I=1500,wI={width:140,height:120},J0={width:300,height:60},ex={width:60,height:300},jf={width:300,height:150},$f={width:150,height:300},Yk={width:140,height:120},qk={width:50,height:30};function Xk(e){e.on("resize.start",_I,function(t){var n=t.context,r=n.shape,i=n.direction,o=n.balanced;(A(r,"bpmn:Lane")||A(r,"bpmn:Participant"))&&(n.resizeConstraints=RI(r,i,o)),A(r,"bpmn:SubProcess")&&yt(r)&&(n.minDimensions=Yk),A(r,"bpmn:TextAnnotation")&&(n.minDimensions=qk)})}Xk.$inject=["eventBus"];var qo=Math.abs,EI=Math.min,bI=Math.max;function Qk(e,t,n,r){var i=e[t];e[t]=i===void 0?n:r(n,i)}function Qs(e,t,n){return Qk(e,t,n,EI)}function Zs(e,t,n){return Qk(e,t,n,bI)}var SI={top:20,left:50,right:20,bottom:20},CI={top:50,left:20,right:20,bottom:20};function RI(e,t,n){var r=hi(e),i=!0,o=!0,a=bh(r,[r]),s=Ue(e),l={},c={},f=Mn(e),d=f?J0:ex;/n/.test(t)?c.top=s.bottom-d.height:/e/.test(t)?c.right=s.left+d.width:/s/.test(t)?c.bottom=s.top+d.height:/w/.test(t)&&(c.left=s.right-d.width),a.forEach(function(v){var x=Ue(v);f?(x.top<s.top-10&&(i=!1),x.bottom>s.bottom+10&&(o=!1)):(x.left<s.left-10&&(i=!1),x.right>s.right+10&&(o=!1)),/n/.test(t)&&(n&&qo(s.top-x.bottom)<10&&Zs(l,"top",x.top+d.height),qo(s.top-x.top)<5&&Qs(c,"top",x.bottom-d.height)),/e/.test(t)&&(n&&qo(s.right-x.left)<10&&Qs(l,"right",x.right-d.width),qo(s.right-x.right)<5&&Zs(c,"right",x.left+d.width)),/s/.test(t)&&(n&&qo(s.bottom-x.top)<10&&Qs(l,"bottom",x.bottom-d.height),qo(s.bottom-x.bottom)<5&&Zs(c,"bottom",x.top+d.height)),/w/.test(t)&&(n&&qo(s.left-x.right)<10&&Zs(l,"left",x.left+d.width),qo(s.left-x.left)<5&&Qs(c,"left",x.right-d.width))});var g=r.children.filter(function(v){return!v.hidden&&!v.waypoints&&(A(v,"bpmn:FlowElement")||A(v,"bpmn:Artifact"))}),y=f?SI:CI;return g.forEach(function(v){var x=Ue(v);/n/.test(t)&&(!f||i)&&Qs(c,"top",x.top-y.top),/e/.test(t)&&(f||o)&&Zs(c,"right",x.right+y.right),/s/.test(t)&&(!f||o)&&Zs(c,"bottom",x.bottom+y.bottom),/w/.test(t)&&(f||i)&&Qs(c,"left",x.left-y.left)}),{min:c,max:l}}var $E=1001;function Zk(e,t){e.on("resize.start",$E+500,function(n){var r=n.context,i=r.shape;(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))&&(r.balanced=!mc(n))}),e.on("resize.end",$E,function(n){var r=n.context,i=r.shape,o=r.canExecute,a=r.newBounds;if(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))return o&&(a=$C(a),t.resizeLane(i,a,r.balanced)),!1})}Zk.$inject=["eventBus","modeling"];var kI=500;function tx(e,t,n,r,i){n.invoke(fe,this);function o(f){return ft(f,["bpmn:ReceiveTask","bpmn:SendTask"])||PI(f,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(f){var d=e.getDefinitions(),g=d.get("rootElements");return!!At(g,Bi({id:f.id}))}function s(f){if(A(f,"bpmn:ErrorEventDefinition"))return"errorRef";if(A(f,"bpmn:EscalationEventDefinition"))return"escalationRef";if(A(f,"bpmn:MessageEventDefinition"))return"messageRef";if(A(f,"bpmn:SignalEventDefinition"))return"signalRef"}function l(f){if(ft(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.get("messageRef");var d=f.get("eventDefinitions"),g=d[0];return g.get(s(g))}function c(f,d){if(ft(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.set("messageRef",d);var g=f.get("eventDefinitions"),y=g[0];return y.set(s(y),d)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(f){var d=f.shape||f.element;if(o(d)){var g=de(d),y=l(g),v;y&&!a(y)&&(v=e.getDefinitions().get("rootElements"),Sn(v,y),f.addedRootElement=y)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(f){var d=f.addedRootElement;if(d){var g=e.getDefinitions().get("rootElements");mn(g,d)}},!0),t.on("copyPaste.copyElement",function(f){var d=f.descriptor,g=f.element;if(!(g.labelTarget||!o(g))){var y=de(g),v=l(y);v&&(d.referencedRootElement=v)}}),t.on("copyPaste.pasteElement",kI,function(f){var d=f.descriptor,g=d.businessObject,y=d.referencedRootElement;y&&(a(y)||(y=r.copyElement(y,i.create(y.$type))),c(g,y),delete d.referencedRootElement)})}tx.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];Oe(tx,fe);function PI(e,t){return ot(t)||(t=[t]),ba(t,function(n){return zl(e,n)})}var Jk=Math.max;function eP(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,r=t.axis,i=t.start,o={};return W(n,function(a){var s=a.id;A(a,"bpmn:Participant")&&(o[s]=AI(a,r,i)),A(a,"bpmn:Lane")&&(o[s]=Mn(a)?J0:ex),A(a,"bpmn:SubProcess")&&yt(a)&&(o[s]=Yk),A(a,"bpmn:TextAnnotation")&&(o[s]=qk),A(a,"bpmn:Group")&&(o[s]=wI)}),o})}eP.$inject=["eventBus"];function TI(e){return e==="x"}function AI(e,t,n){var r=Mn(e);if(!DI(e))return r?jf:$f;var i=TI(t),o={};return i?r?o=jf:o={width:NI(e,n,i),height:$f.height}:r?o={width:jf.width,height:MI(e,n,i)}:o=$f,o}function MI(e,t,n){var r;return r=OI(e,t,n),Jk(jf.height,r)}function NI(e,t,n){var r;return r=LI(e,t,n),Jk($f.width,r)}function DI(e){return!!Na(e).length}function OI(e,t,n){var r=Na(e),i;return i=nx(r,t,n),e.height-i.height+J0.height}function LI(e,t,n){var r=Na(e),i;return i=nx(r,t,n),e.width-i.width+ex.width}function nx(e,t,n){var r,i,o;for(r=0;r<e.length;r++)if(i=e[r],!n&&t>=i.y&&t<=i.y+i.height||n&&t>=i.x&&t<=i.x+i.width)return o=Na(i),o.length?nx(o,t,n):i}var FE=400,BI=600,zE={x:180,y:160};function Da(e,t,n,r,i,o,a){fe.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=r,this._bpmnFactory=i,this._bpmnjs=o,this._elementRegistry=a;var s=this;function l(d){return A(d,"bpmn:SubProcess")&&!yt(d)}function c(d){var g=d.shape,y=d.newRootElement,v=de(g);y=s._addDiagram(y||v),d.newRootElement=e.addRootElement(y)}function f(d){var g=d.shape,y=de(g);s._removeDiagram(y);var v=d.newRootElement=a.get(go(y));e.removeRootElement(v)}this.executed("shape.create",function(d){var g=d.shape;l(g)&&c(d)},!0),this.postExecuted("shape.create",function(d){var g=d.shape,y=d.newRootElement;!y||!g.children||(s._showRecursively(g.children),s._moveChildrenToShape(g,y))},!0),this.reverted("shape.create",function(d){var g=d.shape;l(g)&&f(d)},!0),this.preExecuted("shape.delete",function(d){var g=d.shape;if(l(g)){var y=a.get(go(g));y&&n.removeElements(y.children.slice())}},!0),this.executed("shape.delete",function(d){var g=d.shape;l(g)&&f(d)},!0),this.reverted("shape.delete",function(d){var g=d.shape;l(g)&&c(d)},!0),this.preExecuted("shape.replace",function(d){var g=d.oldShape,y=d.newShape;!l(g)||!l(y)||(d.oldRoot=e.removeRootElement(go(g)))},!0),this.postExecuted("shape.replace",function(d){var g=d.newShape,y=d.oldRoot,v=e.findRoot(go(g));if(!(!y||!v)){var x=y.children;n.moveElements(x,{x:0,y:0},v)}},!0),this.executed("element.updateProperties",function(d){var g=d.element;if(A(g,"bpmn:SubProcess")){var y=d.properties,v=d.oldProperties,x=v.id,C=y.id;if(x!==C){if(Of(g)){a.updateId(g,Za(C)),a.updateId(x,C);return}var k=a.get(Za(x));k&&a.updateId(Za(x),Za(C))}}},!0),this.reverted("element.updateProperties",function(d){var g=d.element;if(A(g,"bpmn:SubProcess")){var y=d.properties,v=d.oldProperties,x=v.id,C=y.id;if(x!==C){if(Of(g)){a.updateId(g,Za(x)),a.updateId(C,x);return}var k=a.get(Za(C));k&&a.updateId(k,Za(x))}}},!0),t.on("element.changed",function(d){var g=d.element;if(Of(g)){var y=g,v=a.get(Aw(y));!v||v===y||t.fire("element.changed",{element:v})}}),this.executed("shape.toggleCollapse",FE,function(d){var g=d.shape;A(g,"bpmn:SubProcess")&&(yt(g)?f(d):(c(d),s._showRecursively(g.children)))},!0),this.reverted("shape.toggleCollapse",FE,function(d){var g=d.shape;A(g,"bpmn:SubProcess")&&(yt(g)?f(d):(c(d),s._showRecursively(g.children)))},!0),this.postExecuted("shape.toggleCollapse",BI,function(d){var g=d.shape;if(A(g,"bpmn:SubProcess")){var y=d.newRootElement;y&&(yt(g)?s._moveChildrenToShape(y,g):s._moveChildrenToShape(g,y))}},!0),t.on("copyPaste.createTree",function(d){var g=d.element,y=d.children;if(l(g)){var v=go(g),x=a.get(v);x&&y.push.apply(y,x.children)}}),t.on("copyPaste.copyElement",function(d){var g=d.descriptor,y=d.element,v=d.elements,x=y.parent,C=A(Ct(x),"bpmndi:BPMNPlane");if(C){var k=Aw(x),R=At(v,function(E){return E.id===k});R&&(g.parent=R.id)}}),t.on("copyPaste.pasteElement",function(d){var g=d.descriptor;g.parent&&(l(g.parent)||g.parent.hidden)&&(g.hidden=!0)})}Oe(Da,fe);Da.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,r=e.children,i;if(r){r=r.concat(r.reduce(function(c,f){return f.label&&f.label.parent!==e?c.concat(f.label):c},[]));var o=r.filter(function(c){return!c.hidden});if(!o.length){n.moveElements(r,{x:0,y:0},t,{autoResize:!1});return}var a=An(o);if(!t.x)i={x:zE.x-a.x,y:zE.y-a.y};else{var s=Je(t),l=Je(a);i={x:s.x-l.x,y:s.y-l.y}}n.moveElements(r,i,t,{autoResize:!1})}};Da.prototype._showRecursively=function(e,t){var n=this,r=[];return e.forEach(function(i){i.hidden=!!t,r=r.concat(i),i.children&&(r=r.concat(n._showRecursively(i.children,i.collapsed||t)))}),r};Da.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};Da.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,r=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),i=t.create("bpmndi:BPMNDiagram",{plane:r});r.$parent=i;var o=n.createRoot({id:go(e),type:e.$type,di:r,businessObject:e,collapsed:!0});return o};Da.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,r=At(n,function(i){return i.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(r),1),r};Da.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function rx(e,t){e.invoke(fe,this),this.postExecuted("shape.replace",function(n){var r=n.context.oldShape,i=n.context.newShape;if(!(!A(i,"bpmn:SubProcess")||!(A(r,"bpmn:Task")||A(r,"bpmn:CallActivity"))||!yt(i))){var o=II(i);t.createShape({type:"bpmn:StartEvent"},o,i)}})}rx.$inject=["injector","modeling"];Oe(rx,fe);function II(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function ix(e){fe.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;A(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&A(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}Oe(ix,fe);ix.$inject=["eventBus"];function ox(e,t){fe.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var r=n.shape;if(yt(r))return;var i=kc(r);i.forEach(function(a){var s=a.incoming.slice(),l=a.outgoing.slice();W(s,function(c){o(c,!0)}),W(l,function(c){o(c,!1)})});function o(a,s){i.indexOf(a.source)!==-1&&i.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,r,Je(r)):t.reconnectStart(a,r,Je(r)))}},!0)}Oe(ox,fe);ox.$inject=["eventBus","modeling"];var ig=500;function ax(e,t,n){fe.call(this,e);function r(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function i(a,s){var l=a.children,c=s,f,d;return f=jI(l).concat([a]),d=Ik(f),d?(c.width=Math.max(d.width,c.width),c.height=Math.max(d.height,c.height),c.x=d.x+(d.width-c.width)/2,c.y=d.y+(d.height-c.height)/2):(c.x=a.x+(a.width-c.width)/2,c.y=a.y+(a.height-c.height)/2),c}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],ig,function(a){var s=a.context,l=s.shape;A(l,"bpmn:SubProcess")&&(l.collapsed?Ct(l).isExpanded=!1:(r(l.children),Ct(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],ig,function(a){var s=a.context,l=s.shape;l.collapsed?Ct(l).isExpanded=!1:Ct(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],ig,function(a){var s=a.context.shape,l=t.getDefaultSize(s),c;s.collapsed?c=o(s,l):c=i(s,l),n.resizeShape(s,c,null,{autoResize:s.collapsed?!1:"nwse"})})}Oe(ax,fe);ax.$inject=["eventBus","elementFactory","modeling"];function jI(e){return e.filter(function(t){return!t.hidden})}function sx(e,t,n,r){t.invoke(fe,this),this.preExecute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.businessObject;Rt(a)||(A(a,"bpmn:Participant")&&yt(a)&&n.ids.unclaim(s.processRef.id),r.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(i){var o=i.context,a=o.connection,s=a.businessObject;r.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var i=e.getRootElement(),o=i.businessObject;A(i,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}Oe(sx,fe);sx.$inject=["canvas","injector","moddle","modeling"];function lx(e,t){fe.call(this,e),this.preExecute("connection.delete",function(n){var r=n.context,i=r.connection,o=i.source;$I(i,o)&&t.updateProperties(o,{default:null})})}Oe(lx,fe);lx.$inject=["eventBus","modeling"];function $I(e,t){if(!A(e,"bpmn:SequenceFlow"))return!1;var n=de(t),r=de(e);return n.get("default")===r}var FI=500,zI=5e3;function ux(e,t){fe.call(this,e);var n;function r(){return n=n||new HI,n.enter(),n}function i(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var s=n.leave();return s&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,zI,function(s){r()}),this.postExecuted(a,FI,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var l=s.context,c=l.shape,f=i();c.labelTarget||(A(c,"bpmn:Lane")&&f.addLane(c),A(c,"bpmn:FlowNode")&&f.addFlowNode(c))})}ux.$inject=["eventBus","modeling"];Oe(ux,fe);function HI(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function cx(e,t){fe.call(this,e),this.postExecuted("elements.create",function(n){const r=n.context,i=r.elements;for(const o of i)VI(o)&&!UI(o)&&t.updateProperties(o,{isForCompensation:void 0})})}Oe(cx,fe);cx.$inject=["eventBus","modeling"];function VI(e){const t=de(e);return t&&t.isForCompensation}function WI(e){return e&&A(e,"bpmn:BoundaryEvent")&&zl(e,"bpmn:CompensateEventDefinition")}function UI(e){return e.incoming.filter(n=>WI(n.source)).length>0}const GI={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",P0],appendBehavior:["type",T0],associationBehavior:["type",A0],attachEventBehavior:["type",wh],boundaryEventBehavior:["type",M0],compensateBoundaryEventBehaviour:["type",N0],createBehavior:["type",D0],createDataObjectBehavior:["type",O0],createParticipantBehavior:["type",L0],dataInputAssociationBehavior:["type",B0],dataStoreBehavior:["type",I0],deleteLaneBehavior:["type",j0],detachEventBehavior:["type",Sh],dropOnFlowBehavior:["type",$0],eventBasedGatewayBehavior:["type",F0],fixHoverBehavior:["type",jk],groupBehavior:["type",z0],importDockingFix:["type",$k],isHorizontalFix:["type",H0],labelBehavior:["type",V0],layoutConnectionBehavior:["type",W0],messageFlowBehavior:["type",K0],nonInterruptingBehavior:["type",Y0],removeElementBehavior:["type",X0],removeEmbeddedLabelBoundsBehavior:["type",q0],removeParticipantBehavior:["type",Q0],replaceConnectionBehavior:["type",Z0],replaceElementBehaviour:["type",Ph],resizeBehavior:["type",Xk],resizeLaneBehavior:["type",Zk],rootElementReferenceBehavior:["type",tx],spaceToolBehavior:["type",eP],subProcessPlaneBehavior:["type",Da],subProcessStartEventBehavior:["type",rx],textAnnotationBehavior:["type",ix],toggleCollapseConnectionBehaviour:["type",ox],toggleElementCollapseBehaviour:["type",ax],unclaimIdBehavior:["type",sx],unsetDefaultFlowBehavior:["type",lx],updateFlowNodeRefsBehavior:["type",ux],setCompensationActivityAfterPasteBehavior:["type",cx]};function tP(e,t){var n=tr(e,t,-15);return n!=="intersect"?n:null}function Un(e){bi.call(this,e)}Oe(Un,bi);Un.$inject=["eventBus"];Un.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return KI(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,r=e.hints||{},i=r.targetParent,o=r.targetAttach;if(o)return!1;i&&(n.parent=i);try{return Ff(t,n)}finally{i&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,r=e.target;return Ff(n,r,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return cP(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,r=e.target;return jt(r)&&!Pd(t,r)?!1:Ss(t,function(i){return jt(i)?Ff(i.source,i.target,i):i.host?Gu(i,i.host,null,n):Fy(i,r,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,r=e.position;return Gu(n,t,null,r)||lP(n,t,r)||uP(n,t)||Pd(n,t)}),this.addRule("shape.create",function(e){return Fy(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Gu(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return mP(n,t)})};Un.prototype.canConnectMessageFlow=dP;Un.prototype.canConnectSequenceFlow=hP;Un.prototype.canConnectDataAssociation=fx;Un.prototype.canConnectAssociation=pP;Un.prototype.canConnectCompensationAssociation=fP;Un.prototype.canMove=uP;Un.prototype.canAttach=Gu;Un.prototype.canReplace=lP;Un.prototype.canDrop=Nl;Un.prototype.canInsert=Pd;Un.prototype.canCreate=Fy;Un.prototype.canConnect=Ff;Un.prototype.canResize=cP;Un.prototype.canCopy=mP;function KI(e){return Iy(e)?null:ft(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Iy(e){return!e||Rt(e)}function YI(e,t){return e===t}function HE(e){do{if(A(e,"bpmn:Process"))return de(e);if(A(e,"bpmn:Participant"))return de(e).processRef||de(e)}while(e=e.parent)}function jy(e){return A(e,"bpmn:TextAnnotation")}function px(e){return A(e,"bpmn:Group")&&!e.labelTarget}function nP(e){return A(e,"bpmn:BoundaryEvent")&&Xi(e,"bpmn:CompensateEventDefinition")}function Th(e){return de(e).isForCompensation}function qI(e,t){var n=HE(e),r=HE(t);return n===r}function XI(e){return A(e,"bpmn:InteractionNode")&&!A(e,"bpmn:BoundaryEvent")&&(!A(e,"bpmn:Event")||A(e,"bpmn:ThrowEvent")&&iP(e,"bpmn:MessageEventDefinition"))}function QI(e){return A(e,"bpmn:InteractionNode")&&!Th(e)&&(!A(e,"bpmn:Event")||A(e,"bpmn:CatchEvent")&&iP(e,"bpmn:MessageEventDefinition"))&&!(A(e,"bpmn:BoundaryEvent")&&!Xi(e,"bpmn:MessageEventDefinition"))}function VE(e){for(var t=e;t=t.parent;){if(A(t,"bpmn:FlowElementsContainer"))return de(t);if(A(t,"bpmn:Participant"))return de(t).processRef}return null}function rP(e,t){var n=VE(e),r=VE(t);return n===r}function Xi(e,t){var n=de(e);return!!At(n.eventDefinitions||[],function(r){return A(r,t)})}function iP(e,t){var n=de(e);return(n.eventDefinitions||[]).every(function(r){return A(r,t)})}function ZI(e){return A(e,"bpmn:FlowNode")&&!A(e,"bpmn:EndEvent")&&!Jn(e)&&!(A(e,"bpmn:IntermediateThrowEvent")&&Xi(e,"bpmn:LinkEventDefinition"))&&!nP(e)&&!Th(e)}function JI(e){return A(e,"bpmn:FlowNode")&&!A(e,"bpmn:StartEvent")&&!A(e,"bpmn:BoundaryEvent")&&!Jn(e)&&!(A(e,"bpmn:IntermediateCatchEvent")&&Xi(e,"bpmn:LinkEventDefinition"))&&!Th(e)}function e9(e){return A(e,"bpmn:ReceiveTask")||A(e,"bpmn:IntermediateCatchEvent")&&(Xi(e,"bpmn:MessageEventDefinition")||Xi(e,"bpmn:TimerEventDefinition")||Xi(e,"bpmn:ConditionalEventDefinition")||Xi(e,"bpmn:SignalEventDefinition"))}function t9(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function $y(e,t){var n=t9(t);return n.indexOf(e)!==-1}function Ff(e,t,n){if(Iy(e)||Iy(t))return null;if(!A(n,"bpmn:DataAssociation")){if(dP(e,t))return{type:"bpmn:MessageFlow"};if(hP(e,t))return{type:"bpmn:SequenceFlow"}}var r=fx(e,t);return r||(fP(e,t)?{type:"bpmn:Association",associationDirection:"One"}:pP(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function Nl(e,t){return Rt(e)||px(e)?!0:A(t,"bpmn:Participant")&&!yt(t)?!1:A(e,"bpmn:Participant")?A(t,"bpmn:Process")||A(t,"bpmn:Collaboration"):ft(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:A(e,"bpmn:Lane")?A(t,"bpmn:Participant")||A(t,"bpmn:Lane"):A(e,"bpmn:BoundaryEvent")&&!n9(e)?!1:A(e,"bpmn:FlowElement")&&!A(e,"bpmn:DataStoreReference")?A(t,"bpmn:FlowElementsContainer")?yt(t):ft(t,["bpmn:Participant","bpmn:Lane"]):A(e,"bpmn:DataStoreReference")&&A(t,"bpmn:Collaboration")?ba(de(t).get("participants"),function(n){return!!n.get("processRef")}):ft(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?ft(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):A(e,"bpmn:MessageFlow")?A(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function n9(e){return de(e).cancelActivity&&(oP(e)||aP(e))}function r9(e){return!Rt(e)&&A(e,"bpmn:BoundaryEvent")}function i9(e){return A(e,"bpmn:Lane")}function o9(e){return r9(e)||A(e,"bpmn:IntermediateThrowEvent")&&oP(e)?!0:A(e,"bpmn:IntermediateCatchEvent")&&aP(e)}function oP(e){var t=de(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function aP(e){return sP(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function sP(e,t){return t.some(function(n){return Xi(e,n)})}function a9(e){return A(e,"bpmn:ReceiveTask")&&At(e.incoming,function(t){return A(t.source,"bpmn:EventBasedGateway")})}function Gu(e,t,n,r){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var i=e[0];return Rt(i)||!o9(i)||Jn(t)||!A(t,"bpmn:Activity")||Th(t)||r&&!tP(r,t)||a9(t)?!1:"attach"}function lP(e,t,n){if(!t)return!1;var r={replacements:[]};return W(e,function(i){Jn(t)||A(i,"bpmn:StartEvent")&&i.type!=="label"&&Nl(i,t)&&(XO(i)||r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),(QO(i)||ZO(i)||JO(i))&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),sP(i,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&A(t,"bpmn:SubProcess")&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"})),A(t,"bpmn:Transaction")||Xi(i,"bpmn:CancelEventDefinition")&&i.type!=="label"&&(A(i,"bpmn:EndEvent")&&Nl(i,t)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:EndEvent"}),A(i,"bpmn:BoundaryEvent")&&Gu(i,t,null,n)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:BoundaryEvent"}))}),r.replacements.length?r:!1}function uP(e,t){return ba(e,i9)?!1:t?e.every(function(n){return Nl(n,t)}):!0}function Fy(e,t,n,r){return t?Rt(e)||px(e)?!0:YI(n,t)||n&&$y(n,t)?!1:Nl(e,t)||Pd(e,t):!1}function cP(e,t){return A(e,"bpmn:SubProcess")?yt(e)&&(!t||t.width>=100&&t.height>=80):!!(A(e,"bpmn:Lane")||A(e,"bpmn:Participant")||jy(e)||px(e))}function s9(e,t){var n=jy(e),r=jy(t);return(n||r)&&n!==r}function pP(e,t){return $y(t,e)||$y(e,t)?!1:s9(e,t)?!0:!!fx(e,t)}function fP(e,t){return rP(e,t)&&nP(e)&&A(t,"bpmn:Activity")&&!u9(t,e)&&!Jn(t)}function dP(e,t){return WE(e)&&!WE(t)?!1:XI(e)&&QI(t)&&!qI(e,t)}function hP(e,t){return ZI(e)&&JI(t)&&rP(e,t)&&!(A(e,"bpmn:EventBasedGateway")&&!e9(t))}function fx(e,t){return ft(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ft(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:ft(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ft(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Pd(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:ft(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Rt(t)&&A(e,"bpmn:FlowNode")&&!A(e,"bpmn:BoundaryEvent")&&Nl(e,t.parent)}function l9(e,t){return e&&t&&e.indexOf(t)!==-1}function mP(e,t){return Rt(t)?!0:!(A(t,"bpmn:Lane")&&!l9(e,t.parent))}function WE(e){return Al(e,"bpmn:Process")||Al(e,"bpmn:Collaboration")}function u9(e,t){return e.attachers.includes(t)}const c9={__depends__:[oo],__init__:["bpmnRules"],bpmnRules:["type",Un]};var p9=2e3;function gP(e,t){e.on("saveXML.start",p9,n);function n(){var r=t.getRootElements();W(r,function(i){var o=Ct(i),a,s;a=kc([i],!1),a=ht(a,function(l){return l!==i&&!l.labelTarget}),s=Zn(a,Ct),o.set("planeElement",s)})}}gP.$inject=["eventBus","canvas"];const f9={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",gP]};function Ah(e){fe.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,i=r.shape||r.connection,o=r.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.parent=a.parent),r.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,i=r.shape||r.connection,o=r.newParent||i.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.newParent=a.parent),r.newParentIndex=a.index)})}Ah.prototype.getOrdering=function(e,t){return null};Oe(Ah,fe);function dx(e,t){Ah.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(a){if(a.labelTarget)return{level:10};var s=At(n,function(l){return ft(a,[l.type])});return s&&s.order||{level:1}}function i(a){var s=a.order;if(s||(a.order=s=r(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,l){for(var c=s;c&&!ft(c,l);)c=c.parent;if(!c)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return c}this.getOrdering=function(a,s){if(a.labelTarget||A(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var l=i(a);l.containers&&(s=o(a,s,l.containers));var c=s.children.indexOf(a),f=_C(s.children,function(d){return!a.labelTarget&&d.labelTarget?!1:l.level<i(d).level});return f!==-1&&c!==-1&&c<f&&(f-=1),{index:f,parent:s}}}dx.$inject=["eventBus","canvas"];Oe(dx,Ah);const d9={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",dx]};function jc(){}jc.prototype.get=function(){return this._data};jc.prototype.set=function(e){this._data=e};jc.prototype.clear=function(){var e=this._data;return delete this._data,e};jc.prototype.isEmpty=function(){return!this._data};const h9={clipboard:["type",jc]};var m9="drop-ok",UE="drop-not-ok",GE="attach-ok",KE="new-parent",YE="create",g9=2e3;function yP(e,t,n,r,i){function o(l,c,f,d,g){if(!c)return!1;l=ht(l,function(R){var E=R.labelTarget;return!R.parent&&!(Rt(R)&&l.indexOf(E)!==-1)});var y=At(l,function(R){return!jt(R)}),v=!1,x=!1,C=!1;XE(l)&&(v=i.allowed("shape.attach",{position:f,shape:y,target:c})),v||(XE(l)?C=i.allowed("shape.create",{position:f,shape:y,source:d,target:c}):C=i.allowed("elements.create",{elements:l,position:f,target:c}));var k=g.connectionTarget;return C||v?(y&&d&&(x=i.allowed("connection.create",{source:k===d?y:d,target:k===d?d:y,hints:{targetParent:c,targetAttach:v}})),{attach:v,connect:x}):C===null||v===null?null:!1}function a(l,c){[GE,m9,UE,KE].forEach(function(f){f===c?e.addMarker(l,f):e.removeMarker(l,f)})}n.on(["create.move","create.hover"],function(l){var c=l.context,f=c.elements,d=l.hover,g=c.source,y=c.hints||{};if(!d){c.canExecute=!1,c.target=null;return}qE(l);var v={x:l.x,y:l.y},x=c.canExecute=d&&o(f,d,v,g,y);d&&x!==null&&(c.target=d,x&&x.attach?a(d,GE):a(d,x?KE:UE))}),n.on(["create.end","create.out","create.cleanup"],function(l){var c=l.hover;c&&a(c,null)}),n.on("create.end",function(l){var c=l.context,f=c.source,d=c.shape,g=c.elements,y=c.target,v=c.canExecute,x=v&&v.attach,C=v&&v.connect,k=c.hints||{};if(v===!1||!y)return!1;qE(l);var R={x:l.x,y:l.y};C?d=r.appendShape(f,d,R,y,{attach:x,connection:C===!0?{}:C,connectionTarget:k.connectionTarget}):(g=r.createElements(g,R,y,q({},k,{attach:x})),d=At(g,function(E){return!jt(E)})),q(c,{elements:g,shape:d}),q(l,{elements:g,shape:d})});function s(){var l=t.context();l&&l.prefix===YE&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],g9,function(){n.off("elements.changed",s)})}),this.start=function(l,c,f){ot(c)||(c=[c]);var d=At(c,function(v){return!jt(v)});if(d){f=q({elements:c,hints:{},shape:d},f||{}),W(c,function(v){Ze(v.x)||(v.x=0),Ze(v.y)||(v.y=0)});var g=ht(c,function(v){return!v.hidden}),y=An(g);W(c,function(v){jt(v)&&(v.waypoints=Zn(v.waypoints,function(x){return{x:x.x-y.x-y.width/2,y:x.y-y.y-y.height/2}})),q(v,{x:v.x-y.x-y.width/2,y:v.y-y.y-y.height/2})}),t.init(l,YE,{cursor:"grabbing",autoActivate:!0,data:{shape:d,elements:c,context:f}})}}}yP.$inject=["canvas","dragging","eventBus","modeling","rules"];function qE(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function XE(e){return e&&e.length===1&&!jt(e[0])}var y9=750;function vP(e,t,n,r,i){function o(a){var s=Fe("g");ke(s,i.cls("djs-drag-group",["no-events"]));var l=Fe("g");return a.forEach(function(c){var f;c.hidden||(c.waypoints?(f=n._createContainer("connection",l),n.drawConnection(fs(f),c)):(f=n._createContainer("shape",l),n.drawShape(fs(f),c),Hn(f,c.x,c.y)),r.addDragger(c,s,f))}),s}t.on("create.move",y9,function(a){var s=a.hover,l=a.context,c=l.elements,f=l.dragGroup;f||(f=l.dragGroup=o(c));var d;s?(f.parentNode||(d=e.getActiveLayer(),tt(d,f)),Hn(f,a.x,a.y)):En(f)}),t.on("create.cleanup",function(a){var s=a.context,l=s.dragGroup;l&&En(l)})}vP.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Mh={__depends__:[Lo,ql,oo,ro],__init__:["create","createPreview"],create:["type",yP],createPreview:["type",vP]};function hx(e){var t=this;this._lastMoveEvent=null;function n(r){t._lastMoveEvent=r}e.on("canvas.init",function(r){var i=t._svg=r.svg;i.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}hx.$inject=["eventBus"];hx.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||v9(0,0)};function v9(e,t){var n=document.createEvent("MouseEvent"),r=e,i=t,o=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,i,o,a,!1,!1,!1,!1,0,null),n}const $c={__init__:["mouse"],mouse:["type",hx]};function Fi(e,t,n,r,i,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=r,this._eventBus=i,this._modeling=o,this._mouse=a,this._rules=s,i.on("copyPaste.copyElement",function(l){var c=l.descriptor,f=l.element,d=l.elements;c.priority=1,c.id=f.id;var g=At(d,function(y){return y===f.parent});g&&(c.parent=f.parent.id),x9(f)&&(c.priority=2,c.host=f.host.id),jt(f)&&(c.priority=3,c.source=f.source.id,c.target=f.target.id,c.waypoints=_9(f)),Rt(f)&&(c.priority=4,c.labelTarget=f.labelTarget.id),W(["x","y","width","height"],function(y){Ze(f[y])&&(c[y]=f[y])}),c.hidden=f.hidden,c.collapsed=f.collapsed}),i.on("copyPaste.pasteElements",function(l){var c=l.hints;q(c,{createElementsBehavior:!1})})}Fi.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Fi.prototype.copy=function(e){var t,n;return ot(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(ot(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Fi.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};Fi.prototype._paste=function(e,t,n,r){W(e,function(o){Ze(o.x)||(o.x=0),Ze(o.y)||(o.y=0)});var i=An(e);return W(e,function(o){jt(o)&&(o.waypoints=Zn(o.waypoints,function(a){return{x:a.x-i.x-i.width/2,y:a.y-i.y-i.height/2}})),q(o,{x:o.x-i.x-i.width/2,y:o.y-i.y-i.height/2})}),this._modeling.createElements(e,n,t,q({},r))};Fi.prototype._createElements=function(e){var t=this,n=this._eventBus,r={},i=[];return W(e,function(o,a){o=to(o,"priority"),W(o,function(s){var l=q({},_i(s,["priority"]));r[s.parent]?l.parent=r[s.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:l});var c;if(jt(l)){l.source=r[s.source],l.target=r[s.target],c=r[s.id]=t.createConnection(l),i.push(c);return}if(Rt(l)){l.labelTarget=r[l.labelTarget],c=r[s.id]=t.createLabel(l),i.push(c);return}l.host&&(l.host=r[l.host]),c=r[s.id]=t.createShape(l),i.push(c)})}),i};Fi.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(_i(e,["id"]));return t};Fi.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(_i(e,["id"]));return t};Fi.prototype.createShape=function(e){var t=this._elementFactory.createShape(_i(e,["id"]));return t};Fi.prototype.hasRelations=function(e,t){var n,r,i;return!(jt(e)&&(r=At(t,Bi({id:e.source.id})),i=At(t,Bi({id:e.target.id})),!r||!i)||Rt(e)&&(n=At(t,Bi({id:e.labelTarget.id})),!n))};Fi.prototype.createTree=function(e){var t=this._rules,n=this,r={},i=[],o=Jd(e);function a(c,f){return t.allowed("element.copy",{element:c,elements:f})}function s(c,f){var d=At(i,function(g){return c===g.element});if(!d){i.push({element:c,depth:f});return}d.depth<f&&(i=l(d,i),i.push({element:d.element,depth:f}))}function l(c,f){var d=f.indexOf(c);return d!==-1&&f.splice(d,1),f}return Rs(o,function(c,f,d){if(Rt(c))return;W(c.labels,function(v){s(v,d)});function g(v){v&&v.length&&W(v,function(x){W(x.labels,function(C){s(C,d)}),s(x,d)})}W([c.attachers,c.incoming,c.outgoing],g),s(c,d);var y=[];return c.children&&(y=c.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:c,children:y}),y}),e=Zn(i,function(c){return c.element}),i=Zn(i,function(c){return c.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:c.descriptor,element:c.element,elements:e}),c}),i=to(i,function(c){return c.descriptor.priority}),e=Zn(i,function(c){return c.element}),W(i,function(c){var f=c.depth;if(!n.hasRelations(c.element,e)){ZE(c.element,e);return}if(!a(c.element,e)){ZE(c.element,e);return}r[f]||(r[f]=[]),r[f].push(c.descriptor)}),r};function x9(e){return!!e.host}function _9(e){return Zn(e.waypoints,function(t){return t=QE(t),t.original&&(t.original=QE(t.original)),t})}function QE(e){return q({},e)}function ZE(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const w9={__depends__:[h9,Mh,$c,oo],__init__:["copyPaste"],copyPaste:["type",Fi]};function og(e,t,n){ot(n)||(n=[n]),W(n,function(r){vs(e[r])||(t[r]=e[r])})}var ag=750;function xP(e,t,n){function r(l,c){var f=e.create(l.$type);return n.copyElement(l,f,null,c)}t.on("copyPaste.copyElement",ag,function(l){var c=l.descriptor,f=l.element,d=de(f);if(Rt(f))return c;var g=c.businessObject=r(d,!0),y=c.di=r(Ct(f),!0);y.bpmnElement=g,og(g,c,"name"),og(y,c,"isExpanded"),d.default&&(c.default=d.default.id)});var i="-bpmn-js-refs";function o(l){return l[i]=l[i]||{}}function a(l,c){l[i]=c}function s(l,c,f){var d=de(l);return l.default&&(f[l.default]={element:d,property:"default"}),l.host&&(de(l).attachedToRef=de(c[l.host])),_i(f,jr(f,function(g,y,v){var x=y.element,C=y.property;return v===l.id&&(x.set(C,d),g.push(l.id)),g},[]))}t.on("copyPaste.pasteElement",function(l){var c=l.cache,f=l.descriptor,d=f.businessObject,g=f.di;if(Rt(f)){f.businessObject=de(c[f.labelTarget]),f.di=Ct(c[f.labelTarget]);return}d=f.businessObject=r(d),g=f.di=r(g),g.bpmnElement=d,og(f,d,["isExpanded","name"]),f.type=d.$type}),t.on("copyPaste.copyElement",ag,function(l){var c=l.descriptor,f=l.element;if(A(f,"bpmn:Participant")){var d=de(f);d.processRef&&(c.processRef=r(d.processRef,!0))}}),t.on("copyPaste.pasteElement",function(l){var c=l.descriptor,f=c.processRef;f&&(c.processRef=r(f))}),t.on("copyPaste.pasteElement",ag,function(l){var c=l.cache,f=l.descriptor;a(c,s(f,c,o(c)))})}xP.$inject=["bpmnFactory","eventBus","moddleCopy"];var E9=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function Fc(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(r){var i=r.propertyNames;if(!(!i||!i.length))return to(i,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(r){var i=r.parent,o=In(i)&&i.$descriptor,a=r.propertyName;if(a&&E9.indexOf(a)!==-1||a&&o&&!At(o.properties,Bi({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(r){var i=r.property;if(b9(i,"bpmn:ExtensionElements")&&(!i.values||!i.values.length))return!1})}Fc.$inject=["eventBus","bpmnFactory","moddle"];Fc.prototype.copyElement=function(e,t,n,r=!1){var i=this;n&&!ot(n)&&(n=[n]),n=n||zy(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:r});return o===!1||(ot(o)&&(n=o),W(n,function(a){var s;vr(e,a)&&(s=e.get(a));var l=i.copyProperty(s,t,a,r);if(Ln(l)){var c=i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:l,propertyName:a});c!==!1&&t.set(a,l)}})),t};Fc.prototype.copyProperty=function(e,t,n,r=!1){var i=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:r});if(o!==!1){if(o)return In(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,r):ot(e)?jr(e,function(s,l){return o=i.copyProperty(l,t,n,r),o?s.concat(o):s},[]):In(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=i._bpmnFactory.create(e.$type),o.$parent=t,o=i.copyElement(e,o,null,r),o):e}};Fc.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function zy(e,t){return jr(e.properties,function(n,r){return t&&r.default?n:n.concat(r.name)},[])}function b9(e,t){return e&&bn(e.$instanceOf)&&e.$instanceOf(t)}const _P={__depends__:[w9],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",xP],moddleCopy:["type",Fc]};var JE=Math.round;function mx(e,t){this._modeling=e,this._eventBus=t}mx.$inject=["modeling","eventBus"];mx.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,i=this._eventBus;i.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,l=t.y||e.y,c=JE(s+o/2),f=JE(l+a/2),d=r.replaceShape(e,q({},t,{x:c,y:f,width:o,height:a}),n);return i.fire("replace.end",{element:e,newElement:d,hints:n}),d};function wP(e,t){t.on("replace.end",500,function(n){const{newElement:r,hints:i={}}=n;i.select!==!1&&e.select(r)})}wP.$inject=["selection","eventBus"];const S9={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",wP],replace:["type",mx]};function C9(e,t,n){ot(n)||(n=[n]),W(n,function(r){vs(e[r])||(t[r]=e[r])})}var R9=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function k9(e,t){var n=e&&vr(e,"collapsed")?e.collapsed:!yt(e),r;return t&&(vr(t,"collapsed")||vr(t,"isExpanded"))?r=vr(t,"collapsed")?t.collapsed:!t.isExpanded:r=n,n!==r}function EP(e,t,n,r,i,o){function a(s,l,c){c=c||{};var f=l.type,d=s.businessObject;if(sf(d)&&f==="bpmn:SubProcess"&&k9(s,l))return r.toggleCollapse(s),s;var g=e.create(f),y={type:f,businessObject:g};y.di={},f==="bpmn:ExclusiveGateway"&&(y.di.isMarkerVisible=!0),C9(s.di,y.di,["fill","stroke","background-color","border-color","color"]);var v=zy(d.$descriptor),x=zy(g.$descriptor,!0),C=P9(v,x);q(g,$i(l,R9));var k=ht(C,function(b){return b==="eventDefinitions"?eb(s,l.eventDefinitionType):b==="loopCharacteristics"?!Jn(g):vr(g,b)||b==="processRef"&&l.isExpanded===!1||b==="triggeredByEvent"?!1:b==="isForCompensation"?!Jn(g):!0});if(g=n.copyElement(d,g,k),l.eventDefinitionType&&(eb(g,l.eventDefinitionType)||(y.eventDefinitionType=l.eventDefinitionType,y.eventDefinitionAttrs=l.eventDefinitionAttrs)),A(d,"bpmn:Activity")){if(sf(d))y.isExpanded=yt(s);else if(l&&vr(l,"isExpanded")){y.isExpanded=l.isExpanded;var R=t.getDefaultSize(g,{isExpanded:y.isExpanded});y.width=R.width,y.height=R.height,y.x=s.x-(y.width-s.width)/2,y.y=s.y-(y.height-s.height)/2}yt(s)&&!A(d,"bpmn:Task")&&y.isExpanded&&(y.width=s.width,y.height=s.height)}if(sf(d)&&!sf(g)&&(c.moveChildren=!1),A(d,"bpmn:Participant")){l.isExpanded===!0?g.processRef=e.create("bpmn:Process"):c.moveChildren=!1;var E=Mn(s);Ct(s).isHorizontal||(Ct(y).isHorizontal=E),y.width=E?s.width:t.getDefaultSize(y).width,y.height=E?t.getDefaultSize(y).height:s.height}return o.allowed("shape.resize",{shape:g})||(y.height=t.getDefaultSize(y).height,y.width=t.getDefaultSize(y).width),g.name=d.name,ft(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&ft(g,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(g.default=d.default),l.host&&!A(d,"bpmn:BoundaryEvent")&&A(g,"bpmn:BoundaryEvent")&&(y.host=l.host),(y.type==="bpmn:DataStoreReference"||y.type==="bpmn:DataObjectReference")&&(y.x=s.x+(s.width-y.width)/2),i.replaceElement(s,y,{...c,targetElement:l})}this.replaceElement=a}EP.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function sf(e){return A(e,"bpmn:SubProcess")}function eb(e,t){var n=de(e);return t&&n.get("eventDefinitions").some(function(r){return A(r,t)})}function P9(e,t){return e.filter(function(n){return t.includes(n)})}const bP={__depends__:[_P,S9,ro],bpmnReplace:["type",EP]};var T9=250;function Ms(e){this._eventBus=e,this._tools=[],this._active=null}Ms.$inject=["eventBus"];Ms.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Ms.prototype.isActive=function(e){return e&&this._active===e};Ms.prototype.length=function(e){return this._tools.length};Ms.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Ms.prototype.bindEvents=function(e,t){var n=this._eventBus,r=[];n.on(t.tool+".init",function(i){var o=i.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),W(t,function(i){r.push(i+".ended"),r.push(i+".canceled")}),n.on(r,T9,function(i){this._active&&(A9(i)||this.setActive(null))},this)};function A9(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Sa(t,'.group[data-group="tools"]')}const Nh={__depends__:[Lo],__init__:["toolManager"],toolManager:["type",Ms]};function M9(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function N9(e,t){var n=[];return W(e.concat(t),function(r){var i=r.incoming,o=r.outgoing;W(i.concat(o),function(a){var s=a.source,l=a.target;(Cu(e,s)||Cu(e,l)||Cu(t,s)||Cu(t,l))&&(Cu(n,a)||n.push(a))})}),n}function Cu(e,t){return e.indexOf(t)!==-1}function D9(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,s=n.x,l=n.y;switch(t){case"n":return{x:r,y:i+l,width:o,height:a-l};case"s":return{x:r,y:i,width:o,height:a+l};case"w":return{x:r+s,y:i,width:o-s,height:a};case"e":return{x:r,y:i,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var sg=Math.abs,O9=Math.round,fo={x:"width",y:"height"},SP="crosshair",Xo={n:"top",w:"left",s:"bottom",e:"right"},L9=1500,lf={n:"s",w:"e",s:"n",e:"w"},uf=20;function Si(e,t,n,r,i,o,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=r,this._rules=i,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",L9,function(l){var c=l.context,f=c.initialized;f||(f=c.initialized=s.init(l,c)),f&&nb(l)}),n.on("spaceTool.end",function(l){var c=l.context,f=c.axis,d=c.direction,g=c.movingShapes,y=c.resizingShapes,v=c.start;if(c.initialized){nb(l);var x={x:0,y:0};x[f]=O9(l["d"+f]),s.makeSpace(g,y,x,d,v),n.once("spaceTool.ended",function(C){s.activateSelection(C.originalEvent,!0,!0)})}})}Si.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Si.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:SP,data:{context:{reactivate:n}},trapClick:!1})};Si.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:SP,data:{context:{}}})};Si.prototype.makeSpace=function(e,t,n,r,i){return this._modeling.createSpace(e,t,n,r,i)};Si.prototype.init=function(e,t){var n=sg(e.dx)>sg(e.dy)?"x":"y",r=e["d"+n],i=e[n]-r;if(sg(r)<5)return!1;r<0&&(r*=-1),mc(e)&&(r*=-1);var o=M9(n,r),a=this._canvas.getRootElement();!_d(e)&&e.hover&&(a=e.hover);var s=[...kc(a,!0),...a.attachers||[]],l=this.calculateAdjustments(s,n,r,i),c=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:l.resizingShapes,start:i}),f=B9(l,n,o,i,c);return q(t,l,{axis:n,direction:o,spaceToolConstraints:f,start:i}),dh("resize-"+(n==="x"?"ew":"ns")),!0};Si.prototype.calculateAdjustments=function(e,t,n,r){var i=this._rules,o=[],a=[],s=[],l=[];function c(g){o.includes(g)||o.push(g);var y=g.label;y&&!o.includes(y)&&o.push(y)}function f(g){a.includes(g)||a.push(g)}W(e,function(g){if(!(!g.parent||Rt(g))){if(jt(g)){l.push(g);return}var y=g[t],v=y+g[fo[t]];if(I9(g)&&(n>0&&Je(g)[t]>r||n<0&&Je(g)[t]<r)){s.push(g);return}if(n>0&&y>r||n<0&&v<r){c(g);return}if(y<r&&v>r&&i.allowed("shape.resize",{shape:g})){f(g);return}}}),W(o,function(g){var y=g.attachers;y&&W(y,function(v){c(v)})});var d=o.concat(a);return W(s,function(g){var y=g.host;ls(d,y)&&c(g)}),d=o.concat(a),W(l,function(g){var y=g.source,v=g.target,x=g.label;ls(d,y)&&ls(d,v)&&x&&c(x)}),{movingShapes:o,resizingShapes:a}};Si.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Si.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function tb(e){return{top:e.top-uf,right:e.right+uf,bottom:e.bottom+uf,left:e.left-uf}}function nb(e){var t=e.context,n=t.spaceToolConstraints;if(n){var r,i;Ze(n.left)&&(r=Math.max(e.x,n.left),e.dx=e.dx+r-e.x,e.x=r),Ze(n.right)&&(r=Math.min(e.x,n.right),e.dx=e.dx+r-e.x,e.x=r),Ze(n.top)&&(i=Math.max(e.y,n.top),e.dy=e.dy+i-e.y,e.y=i),Ze(n.bottom)&&(i=Math.min(e.y,n.bottom),e.dy=e.dy+i-e.y,e.y=i)}}function B9(e,t,n,r,i){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},l,c;return W(a,function(f){var d=f.attachers,g=f.children,y=Ue(f),v=ht(g,function(Y){return!jt(Y)&&!Rt(Y)&&!ls(o,Y)&&!ls(a,Y)}),x=ht(g,function(Y){return!jt(Y)&&!Rt(Y)&&ls(o,Y)}),C,k,R,E=[],b=[],D,I,z,L;v.length&&(k=tb(Ue(An(v))),C=r-y[Xo[n]]+k[Xo[n]],n==="n"?s.bottom=c=Ze(c)?Math.min(c,C):C:n==="w"?s.right=c=Ze(c)?Math.min(c,C):C:n==="s"?s.top=l=Ze(l)?Math.max(l,C):C:n==="e"&&(s.left=l=Ze(l)?Math.max(l,C):C)),x.length&&(R=tb(Ue(An(x))),C=r-R[Xo[lf[n]]]+y[Xo[lf[n]]],n==="n"?s.bottom=c=Ze(c)?Math.min(c,C):C:n==="w"?s.right=c=Ze(c)?Math.min(c,C):C:n==="s"?s.top=l=Ze(l)?Math.max(l,C):C:n==="e"&&(s.left=l=Ze(l)?Math.max(l,C):C)),d&&d.length&&(d.forEach(function(Y){ls(o,Y)?E.push(Y):b.push(Y)}),E.length&&(D=Ue(An(E.map(Je))),I=y[Xo[lf[n]]]-(D[Xo[lf[n]]]-r)),b.length&&(z=Ue(An(b.map(Je))),L=z[Xo[n]]-(y[Xo[n]]-r)),n==="n"?(C=Math.min(I||1/0,L||1/0),s.bottom=c=Ze(c)?Math.min(c,C):C):n==="w"?(C=Math.min(I||1/0,L||1/0),s.right=c=Ze(c)?Math.min(c,C):C):n==="s"?(C=Math.max(I||-1/0,L||-1/0),s.top=l=Ze(l)?Math.max(l,C):C):n==="e"&&(C=Math.max(I||-1/0,L||-1/0),s.left=l=Ze(l)?Math.max(l,C):C));var Q=i&&i[f.id];Q&&(n==="n"?(C=r+f[fo[t]]-Q[fo[t]],s.bottom=c=Ze(c)?Math.min(c,C):C):n==="w"?(C=r+f[fo[t]]-Q[fo[t]],s.right=c=Ze(c)?Math.min(c,C):C):n==="s"?(C=r-f[fo[t]]+Q[fo[t]],s.top=l=Ze(l)?Math.max(l,C):C):n==="e"&&(C=r-f[fo[t]]+Q[fo[t]],s.left=l=Ze(l)?Math.max(l,C):C))}),s}}function ls(e,t){return e.indexOf(t)!==-1}function I9(e){return!!e.host}var lg="djs-dragging",rb="djs-resizing",j9=250,cf=Math.max;function CP(e,t,n,r,i){function o(a,s){W(a,function(l){i.addDragger(l,s),n.addMarker(l,lg)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),l=a.context,c={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},f=Fe("g");ke(f,r.cls("djs-crosshair-group",["no-events"])),tt(s,f);var d=Fe("path");ke(d,"d",c.x),St(d).add("djs-crosshair"),tt(f,d);var g=Fe("path");ke(g,"d",c.y),St(g).add("djs-crosshair"),tt(f,g),l.crosshairGroup=f}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;Hn(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,l=s.crosshairGroup;l&&En(l)}),e.on("spaceTool.move",j9,function(a){var s=a.context,l=s.line,c=s.axis,f=s.movingShapes,d=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var g=n.getLayer("space");l=Fe("path"),ke(l,"d","M0,0 L0,0"),St(l).add("djs-crosshair"),tt(g,l),s.line=l;var y=Fe("g");ke(y,r.cls("djs-drag-group",["no-events"])),tt(n.getActiveLayer(),y),o(f,y);var v=s.movingConnections=t.filter(function(b){var D=!1;W(f,function(Q){W(Q.outgoing,function(Y){b===Y&&(D=!0)})});var I=!1;W(f,function(Q){W(Q.incoming,function(Y){b===Y&&(I=!0)})});var z=!1;W(d,function(Q){W(Q.outgoing,function(Y){b===Y&&(z=!0)})});var L=!1;return W(d,function(Q){W(Q.incoming,function(Y){b===Y&&(L=!0)})}),jt(b)&&(D||z)&&(I||L)});o(v,y),s.dragGroup=y}if(!s.frameGroup){var x=Fe("g");ke(x,r.cls("djs-frame-group",["no-events"])),tt(n.getActiveLayer(),x);var C=[];W(d,function(b){var D=i.addFrame(b,x),I=D.getBBox();C.push({element:D,initialBounds:I}),n.addMarker(b,rb)}),s.frameGroup=x,s.frames=C}var k={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};ke(l,{d:k[c]});var R={x:"y",y:"x"},E={x:a.dx,y:a.dy};E[R[s.axis]]=0,Hn(s.dragGroup,E.x,E.y),W(s.frames,function(b){var D=b.element,I=b.initialBounds,z,L;s.direction==="e"?ke(D,{width:cf(I.width+E.x,5)}):(z=cf(I.width-E.x,5),ke(D,{width:z,x:I.x+I.width-z})),s.direction==="s"?ke(D,{height:cf(I.height+E.y,5)}):(L=cf(I.height-E.y,5),ke(D,{height:L,y:I.y+I.height-L}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,l=s.movingShapes,c=s.movingConnections,f=s.resizingShapes,d=s.line,g=s.dragGroup,y=s.frameGroup;W(l,function(v){n.removeMarker(v,lg)}),W(c,function(v){n.removeMarker(v,lg)}),g&&(En(d),En(g)),W(f,function(v){n.removeMarker(v,rb)}),y&&En(y)})}CP.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const $9={__init__:["spaceToolPreview"],__depends__:[Lo,oo,Nh,ql,$c],spaceTool:["type",Si],spaceToolPreview:["type",CP]};function Dh(e){e.invoke(Si,this)}Dh.$inject=["injector"];Oe(Dh,Si);Dh.prototype.calculateAdjustments=function(e,t,n,r){var i=Si.prototype.calculateAdjustments.call(this,e,t,n,r);return i.resizingShapes=i.resizingShapes.filter(function(o){return!(A(o,"bpmn:TextAnnotation")||F9(o)&&(t==="y"&&Mn(o)||t==="x"&&!Mn(o)))}),i};function F9(e){return A(e,"bpmn:Participant")&&!de(e).processRef}const RP={__depends__:[$9],spaceTool:["type",Dh]};function Jt(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Jt.$inject=["eventBus","injector"];Jt.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};Jt.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i};Jt.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Jt.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Jt.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Jt.prototype.register=function(e,t){this._setHandler(e,t)};Jt.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Jt.prototype.canUndo=function(){return!!this._getUndoAction()};Jt.prototype.canRedo=function(){return!!this._getRedoAction()};Jt.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Jt.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Jt.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Jt.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const o of r)if(i=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return i};Jt.prototype._createId=function(){return this._uid++};Jt.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Jt.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()};Jt.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)};Jt.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:wC("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Jt.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=ot(e)?e:[e],t.dirty=t.dirty.concat(e))};Jt.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Jt.prototype._revertedAction=function(e){this._stackIdx--};Jt.prototype._getHandler=function(e){return this._handlerMap[e]};Jt.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const z9={commandStack:["type",Jt]};function ha(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var H9=250,ib=1400;function gx(e,t,n){fe.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",ib,function(i){var o=i.context,a=o.shapes,s=o.validatedShapes;o.shapes=ob(a),o.validatedShapes=ob(s)}),r&&t.on("shape.move.start",H9,function(i){var o=i.context,a=o.shapes,s=[];W(a,function(l){W(l.labels,function(c){!c.hidden&&o.shapes.indexOf(c)===-1&&s.push(c),l.labelTarget&&s.push(l)})}),W(s,function(l){r.makeDraggable(o,l,!0)})}),this.preExecuted("elements.move",ib,function(i){var o=i.context,a=o.closure,s=a.enclosedElements,l=[];W(s,function(c){W(c.labels,function(f){s[f.id]||l.push(f)})}),a.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(i){var o=i.context,a=o.connection||o.shape;ha(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=Kv(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(i){var o=i.context,a=o.shape,s=o.labelTarget,l=o.labelTargetIndex;s&&(Sn(s.labels,a,l),a.labelTarget=s)})}Oe(gx,fe);gx.$inject=["injector","eventBus","modeling"];function ob(e){return ht(e,function(t){return e.indexOf(t.labelTarget)===-1})}const V9={__init__:["labelSupport"],labelSupport:["type",gx]};var W9=251,ab=1401,sb="attach-ok";function yx(e,t,n,r,i){fe.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",ab,function(a){var s=a.context,l=s.shapes,c=s.validatedShapes;s.shapes=U9(l),s.validatedShapes=G9(c)}),o&&t.on("shape.move.start",W9,function(a){var s=a.context,l=s.shapes,c=Hy(l);W(c,function(f){o.makeDraggable(s,f,!0),W(f.labels,function(d){o.makeDraggable(s,d,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,l=s.shapes;if(l.length===1){var c=l[0],f=c.host;f&&(n.addMarker(f,sb),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(f,sb)}))}}),this.preExecuted("elements.move",ab,function(a){var s=a.context,l=s.closure,c=s.shapes,f=Hy(c);W(f,function(d){l.add(d,l.topLevel[d.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,l=s.shapes,c=s.newHost,f;c&&l.length!==1||(c?f=l:f=ht(l,function(d){var g=d.host;return K9(d)&&!Y9(l,g)}),W(f,function(d){i.updateAttachment(d,c)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;W(s,function(l){W(l.attachers,function(c){W(c.outgoing.slice(),function(f){var d=r.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||i.removeConnection(f)}),W(c.incoming.slice(),function(f){var d=r.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||i.removeConnection(f)})})})}),this.postExecute("shape.create",function(a){var s=a.context,l=s.shape,c=s.host;c&&i.updateAttachment(l,c)}),this.postExecute("shape.replace",function(a){var s=a.context,l=s.oldShape,c=s.newShape;ha(l.attachers,function(f){var d=r.allowed("elements.move",{target:c,shapes:[f]});d==="attach"?i.updateAttachment(f,c):i.removeShape(f)}),c.attachers.length&&W(c.attachers,function(f){var d=BE(f,l,c);i.moveShape(f,d,f.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,c=s.oldBounds,f=s.newBounds,d=l.attachers,g=s.hints||{};g.attachSupport!==!1&&W(d,function(y){var v=BE(y,c,f);i.moveShape(y,v,y.parent),W(y.labels,function(x){i.moveShape(x,v,x.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;ha(s.attachers,function(l){i.removeShape(l)}),s.host&&i.updateAttachment(s,null)})}Oe(yx,fe);yx.$inject=["injector","eventBus","canvas","rules","modeling"];function Hy(e){return zv(Zn(e,function(t){return t.attachers||[]}))}function U9(e){var t=Hy(e);return M5("id",e,t)}function G9(e){var t=jl(e,"id");return ht(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function K9(e){return!!e.host}function Y9(e,t){return e.indexOf(t)!==-1}const q9={__depends__:[oo],__init__:["attachSupport"],attachSupport:["type",yx]};function Ci(e){this._model=e}Ci.$inject=["moddle"];Ci.prototype._needsId=function(e){return ft(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};Ci.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;A(e,"bpmn:Activity")?t="Activity":A(e,"bpmn:Event")?t="Event":A(e,"bpmn:Gateway")?t="Gateway":ft(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Ci.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};Ci.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};Ci.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",q({bpmnElement:e,bounds:this.createDiBounds()},t))};Ci.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Ci.prototype.createDiWaypoints=function(e){var t=this;return Zn(e,function(n){return t.createDiWaypoint(n)})};Ci.prototype.createDiWaypoint=function(e){return this.create("dc:Point",$i(e,["x","y"]))};Ci.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",q({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};Ci.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",q({bpmnElement:e},t))};function Fr(e,t,n){fe.call(this,e),this._bpmnFactory=t;var r=this;function i(y){var v=y.context,x=v.hints||{},C;!v.cropped&&x.createElementsBehavior!==!1&&(C=v.connection,C.waypoints=n.getCroppedWaypoints(C),v.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(y){delete y.context.cropped});function o(y){var v=y.context;r.updateParent(v.shape||v.connection,v.oldParent)}function a(y){var v=y.context,x=v.shape||v.connection,C=v.parent||v.newParent;r.updateParent(x,C)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Tr(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Tr(a));function s(y){var v=y.context,x=v.oldRoot,C=x.children;W(C,function(k){A(k,"bpmn:BaseElement")&&r.updateParent(k)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function l(y){var v=y.context.shape;A(v,"bpmn:BaseElement")&&r.updateBounds(v)}this.executed(["shape.move","shape.create","shape.resize"],Tr(function(y){y.context.shape.type!=="label"&&l(y)})),this.reverted(["shape.move","shape.create","shape.resize"],Tr(function(y){y.context.shape.type!=="label"&&l(y)})),e.on("shape.changed",function(y){y.element.type==="label"&&l({context:{shape:y.element}})});function c(y){r.updateConnection(y.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Tr(c)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Tr(c));function f(y){r.updateConnectionWaypoints(y.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Tr(f)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Tr(f)),this.executed("connection.reconnect",Tr(function(y){var v=y.context,x=v.connection,C=v.oldSource,k=v.newSource,R=de(x),E=de(C),b=de(k);R.conditionExpression&&!ft(b,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(v.oldConditionExpression=R.conditionExpression,delete R.conditionExpression),C!==k&&E.default===R&&(v.oldDefault=E.default,delete E.default)})),this.reverted("connection.reconnect",Tr(function(y){var v=y.context,x=v.connection,C=v.oldSource,k=v.newSource,R=de(x),E=de(C),b=de(k);v.oldConditionExpression&&(R.conditionExpression=v.oldConditionExpression),v.oldDefault&&(E.default=v.oldDefault,delete b.default)}));function d(y){r.updateAttachment(y.context)}this.executed(["element.updateAttachment"],Tr(d)),this.reverted(["element.updateAttachment"],Tr(d)),this.executed("element.updateLabel",Tr(g)),this.reverted("element.updateLabel",Tr(g));function g(y){const{element:v}=y.context,x=Xr(v),C=Ct(v),k=C&&C.get("label");_s(v)||Of(v)||(x&&!k?C.set("label",t.create("bpmndi:BPMNLabel")):!x&&k&&C.set("label",void 0))}}Oe(Fr,fe);Fr.$inject=["eventBus","bpmnFactory","connectionDocking"];Fr.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject};Fr.prototype.updateParent=function(e,t){if(!Rt(e)&&!(A(e,"bpmn:DataStoreReference")&&e.parent&&A(e.parent,"bpmn:Collaboration"))){var n=e.parent,r=e.businessObject,i=Ct(e),o=n&&n.businessObject,a=Ct(n);A(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,o,t&&t.businessObject),A(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),A(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(r,o),A(e,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,o),this.updateDiParent(i,a)}};Fr.prototype.updateBounds=function(e){var t=Ct(e),n=Q9(e);if(n){var r=Ii(n,t.get("bounds"));q(n,{x:e.x+r.x,y:e.y+r.y})}var i=Rt(e)?this._getLabel(t):t,o=i.bounds;o||(o=this._bpmnFactory.createDiBounds(),i.set("bounds",o)),q(o,{x:e.x,y:e.y,width:e.width,height:e.height})};Fr.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var r,i;A(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),mn(r,e)),A(t,"bpmn:Lane")&&(i=t.get("flowNodeRef"),Sn(i,e))}};Fr.prototype.updateDiConnection=function(e,t,n){var r=Ct(e),i=Ct(t),o=Ct(n);r.sourceElement&&r.sourceElement.bpmnElement!==de(t)&&(r.sourceElement=t&&i),r.targetElement&&r.targetElement.bpmnElement!==de(n)&&(r.targetElement=n&&o)};Fr.prototype.updateDiParent=function(e,t){if(t&&!A(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(mn(n,e),e.$parent=null)}};function X9(e){for(;e&&!A(e,"bpmn:Definitions");)e=e.$parent;return e}Fr.prototype.getLaneSet=function(e){var t,n;return A(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(A(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Fr.prototype.updateSemanticParent=function(e,t,n){var r;if(e.$parent!==t&&!((A(e,"bpmn:DataInput")||A(e,"bpmn:DataOutput"))&&(A(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(A(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),r="lanes";else if(A(e,"bpmn:FlowElement")){if(t){if(A(t,"bpmn:Participant"))t=t.processRef;else if(A(t,"bpmn:Lane"))do t=t.$parent.$parent;while(A(t,"bpmn:Lane"))}r="flowElements"}else if(A(e,"bpmn:Artifact")){for(;t&&!A(t,"bpmn:Process")&&!A(t,"bpmn:SubProcess")&&!A(t,"bpmn:Collaboration");)if(A(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;r="artifacts"}else if(A(e,"bpmn:MessageFlow"))r="messageFlows";else if(A(e,"bpmn:Participant")){r="participants";var i=e.processRef,o;i&&(o=X9(e.$parent||t),e.$parent&&(mn(o.get("rootElements"),i),i.$parent=null),t&&(Sn(o.get("rootElements"),i),i.$parent=o))}else A(e,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":A(e,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(r),mn(a,e)),t?(a=t.get(r),a.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(r);mn(a,e),t&&(s||(s=[],t.set(r,s)),s.push(e))}}};Fr.prototype.updateConnectionWaypoints=function(e){var t=Ct(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Fr.prototype.updateConnection=function(e){var t=e.connection,n=de(t),r=t.source,i=de(r),o=t.target,a=de(t.target),s;if(A(n,"bpmn:DataAssociation"))A(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,s=e.parent||e.newParent||a,this.updateSemanticParent(n,a,s)):A(n,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||i,this.updateSemanticParent(n,i,s),n.targetRef=a);else{var l=A(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(l&&(mn(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==a&&(l&&(mn(n.targetRef&&n.targetRef.get("incoming"),n),a&&a.get("incoming")&&a.get("incoming").push(n)),n.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,r,o)};Fr.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function Tr(e){return function(t){var n=t.context,r=n.shape||n.connection||n.element;A(r,"bpmn:BaseElement")&&e(t)}}function Q9(e){if(A(e,"bpmn:Activity")){var t=Ct(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function Oa(e,t){Mo.call(this),this._bpmnFactory=e,this._moddle=t}Oe(Oa,Mo);Oa.$inject=["bpmnFactory","moddle"];Oa.prototype._baseCreate=Mo.prototype.create;Oa.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,q({type:"label",di:n},dc,t))}return this.createElement(e,t)};Oa.prototype.createElement=function(e,t){t=q({},t||{});var n,r=t.businessObject,i=t.di;if(!r){if(!t.type)throw new Error("no shape type specified");r=this._bpmnFactory.create(t.type),fR(r)}if(!J9(i)){var o=q({},i||{},{id:r.id+"_di"});e==="root"?i=this._bpmnFactory.createDiPlane(r,o):e==="connection"?i=this._bpmnFactory.createDiEdge(r,o):i=this._bpmnFactory.createDiShape(r,o)}A(r,"bpmn:Group")&&(t=q({isFrame:!0},t)),t=Z9(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Vy(i,t,"isExpanded")),ft(r,["bpmn:Lane","bpmn:Participant"])&&(t=Vy(i,t,"isHorizontal")),A(r,"bpmn:SubProcess")&&(t.collapsed=!yt(r,i)),A(r,"bpmn:ExclusiveGateway")&&(vr(i,"isMarkerVisible")?i.isMarkerVisible===void 0&&(i.isMarkerVisible=!1):i.isMarkerVisible=!0),Ln(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Ln(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=r.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=r,r.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(r,i),t=q({id:r.id},n,t,{businessObject:r,di:i}),this._baseCreate(e,t)};Oa.prototype.getDefaultSize=function(e,t){var n=de(e);if(t=t||Ct(e),A(n,"bpmn:SubProcess"))return yt(n,t)?{width:350,height:200}:{width:100,height:80};if(A(n,"bpmn:Task"))return{width:100,height:80};if(A(n,"bpmn:Gateway"))return{width:50,height:50};if(A(n,"bpmn:Event"))return{width:36,height:36};if(A(n,"bpmn:Participant")){var r=t.isHorizontal===void 0||t.isHorizontal===!0;return yt(n,t)?r?{width:600,height:250}:{width:250,height:600}:r?{width:400,height:60}:{width:60,height:400}}return A(n,"bpmn:Lane")?{width:400,height:100}:A(n,"bpmn:DataObjectReference")?{width:36,height:50}:A(n,"bpmn:DataStoreReference")?{width:50,height:50}:A(n,"bpmn:TextAnnotation")?{width:100,height:30}:A(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Oa.prototype.createParticipantShape=function(e){return In(e)||(e={isExpanded:e}),e=q({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function Z9(e,t,n){return W(n,function(r){t=Vy(e,t,r)}),t}function Vy(e,t,n){return t[n]===void 0?t:(e[n]=t[n],_i(t,[n]))}function J9(e){return ft(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Oh(e,t){this._modeling=e,this._canvas=t}Oh.$inject=["modeling","canvas"];Oh.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;W(n,function(i){var o={x:0,y:0};Ln(r.left)?o.x=r.left-i.x:Ln(r.right)?o.x=r.right-i.width-i.x:Ln(r.center)?o.x=r.center-Math.round(i.width/2)-i.x:Ln(r.top)?o.y=r.top-i.y:Ln(r.bottom)?o.y=r.bottom-i.height-i.y:Ln(r.middle)&&(o.y=r.middle-Math.round(i.height/2)-i.y),t.moveElements([i],o,i.parent)})};Oh.prototype.postExecute=function(e){};function Lh(e){this._modeling=e}Lh.$inject=["modeling"];Lh.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,r=e.shape,i=e.hints||{};r=e.shape=this._modeling.createShape(r,e.position,n,{attach:i.attach}),e.shape=r};Lh.prototype.postExecute=function(e){var t=e.hints||{};e8(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function e8(e,t){return ba(e.outgoing,function(n){return n.target===t})}function Bh(e,t){this._canvas=e,this._layouter=t}Bh.$inject=["canvas","layouter"];Bh.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,i=e.parent,o=e.parentIndex,a=e.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,i,o),t};Bh.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var pf=Math.round;function vx(e){this._modeling=e}vx.$inject=["modeling"];vx.prototype.preExecute=function(e){var t=e.elements,n=e.parent,r=e.parentIndex,i=e.position,o=e.hints,a=this._modeling;W(t,function(d){Ze(d.x)||(d.x=0),Ze(d.y)||(d.y=0)});var s=ht(t,function(d){return!d.hidden}),l=An(s);W(t,function(d){jt(d)&&(d.waypoints=Zn(d.waypoints,function(g){return{x:pf(g.x-l.x-l.width/2+i.x),y:pf(g.y-l.y-l.height/2+i.y)}})),q(d,{x:pf(d.x-l.x-l.width/2+i.x),y:pf(d.y-l.y-l.height/2+i.y)})});var c=Jd(t),f={};W(t,function(d){if(jt(d)){f[d.id]=Ze(r)?a.createConnection(f[d.source.id],f[d.target.id],r,d,d.parent||n,o):a.createConnection(f[d.source.id],f[d.target.id],d,d.parent||n,o);return}var g=q({},o);c.indexOf(d)===-1&&(g.autoResize=!1),Rt(d)&&(g=_i(g,["attach"])),f[d.id]=Ze(r)?a.createShape(d,$i(d,["x","y","width","height"]),d.parent||n,r,g):a.createShape(d,$i(d,["x","y","width","height"]),d.parent||n,g)}),e.elements=Hv(f)};var lb=Math.round;function La(e){this._canvas=e}La.$inject=["canvas"];La.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,i=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?q(t,n):q(t,{x:n.x-lb(t.width/2),y:n.y-lb(t.height/2)}),this._canvas.addShape(t,r,i),t};La.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function zc(e){La.call(this,e)}Oe(zc,La);zc.$inject=["canvas"];var t8=La.prototype.execute;zc.prototype.execute=function(e){var t=e.shape;return r8(t),t.labelTarget=e.labelTarget,t8.call(this,e)};var n8=La.prototype.revert;zc.prototype.revert=function(e){return e.shape.labelTarget=null,n8.call(this,e)};function r8(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Hc(e,t){this._canvas=e,this._modeling=t}Hc.$inject=["canvas","modeling"];Hc.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;ha(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),ha(n.outgoing,function(r){t.removeConnection(r,{nested:!0})})};Hc.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Kv(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Hc.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,Sn(n.children,t,r),this._canvas.addConnection(t,n),t};function xx(e,t){this._modeling=e,this._elementRegistry=t}xx.$inject=["modeling","elementRegistry"];xx.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;W(r,function(i){n.get(i.id)&&(i.waypoints?t.removeConnection(i):t.removeShape(i))})};function Vc(e,t){this._canvas=e,this._modeling=t}Vc.$inject=["canvas","modeling"];Vc.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;ha(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),ha(n.outgoing,function(r){t.removeConnection(r,{nested:!0})}),ha(n.children,function(r){jt(r)?t.removeConnection(r,{nested:!0}):t.removeShape(r,{nested:!0})})};Vc.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=Kv(r.children,n),t.removeShape(n),n};Vc.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,i=e.oldParentIndex;return Sn(r.children,n,i),t.addShape(n,r),n};function Ih(e){this._modeling=e}Ih.$inject=["modeling"];var ub={x:"y",y:"x"};Ih.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,r=e.axis,i=e.dimension;function o(C,k){C.range.min=Math.min(k[r],C.range.min),C.range.max=Math.max(k[r]+k[i],C.range.max)}function a(C){return C[r]+C[i]/2}function s(C){return C.length-1}function l(C){return C.max-C.min}function c(C,k){var R={y:0};R[r]=C-a(k),R[r]&&(R[ub[r]]=0,t.moveElements([k],R,k.parent))}var f=n[0],d=s(n),g=n[d],y,v,x=0;W(n,function(C,k){var R,E,b;if(C.elements.length<2){k&&k!==n.length-1&&(o(C,C.elements[0]),x+=l(C.range));return}R=to(C.elements,r),E=R[0],k===d&&(E=R[s(R)]),b=a(E),C.range=null,W(R,function(D){if(c(b,D),C.range===null){C.range={min:D[r],max:D[r]+D[i]};return}o(C,D)}),k&&k!==n.length-1&&(x+=l(C.range))}),v=Math.abs(g.range.min-f.range.max),y=Math.round((v-x)/(n.length-1)),!(y<n.length-1)&&W(n,function(C,k){var R={},E;C===f||C===g||(E=n[k-1],C.range.max=0,W(C.elements,function(b,D){R[ub[r]]=0,R[r]=E.range.max-b[r]+y,C.range.min!==b[r]&&(R[r]+=b[r]-C.range.min),R[r]&&t.moveElements([b],R,b.parent),C.range.max=Math.max(b[r]+b[i],D?C.range.max:0)}))})};Ih.prototype.postExecute=function(e){};function jh(e,t){this._layouter=e,this._canvas=t}jh.$inject=["layouter","canvas"];jh.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return q(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};jh.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function _x(){}_x.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=mn(o.children,t),Sn(r.children,t,i),t.parent=r,W(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t};_x.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,i=e.oldParentIndex,o=e.delta;return mn(n.children,t),Sn(r.children,t,i),t.parent=r,W(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function wx(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}wx.prototype.add=function(e,t){return this.addAll([e],t)};wx.prototype.addAll=function(e,t){var n=wN(e,!!t,this);return q(this,n),this};function Wc(e){this._modeling=e}Wc.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Wc.prototype.moveClosure=function(e,t,n,r,i){var o=this._modeling,a=e.allShapes,s=e.allConnections,l=e.enclosedConnections,c=e.topLevel,f=!1;i&&i.parent===n&&(f=!0),W(a,function(d){o.moveShape(d,t,c[d.id]&&!f&&n,{recurse:!1,layout:!1})}),W(s,function(d){var g=!!a[d.source.id],y=!!a[d.target.id];l[d.id]&&g&&y?o.moveConnection(d,t,c[d.id]&&!f&&n):o.layoutConnection(d,{connectionStart:g&&U0(d,d.source,t),connectionEnd:y&&G0(d,d.target,t)})})};Wc.prototype.getClosure=function(e){return new wx().addAll(e,!0)};function $h(e){this._helper=new Wc(e)}$h.$inject=["modeling"];$h.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};$h.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Ns(e){this._modeling=e,this._helper=new Wc(e)}Ns.$inject=["modeling"];Ns.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldBounds=$i(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=mn(o.children,t),Sn(r.children,t,i),q(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t};Ns.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,i=this._modeling;r.layout!==!1&&(W(t.incoming,function(o){i.layoutConnection(o,{connectionEnd:G0(o,t,n)})}),W(t.outgoing,function(o){i.layoutConnection(o,{connectionStart:U0(o,t,n)})})),r.recurse!==!1&&this.moveChildren(e)};Ns.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,i=e.delta;return Sn(n.children,t,r),q(t,{parent:n,x:t.x-i.x,y:t.y-i.y}),t};Ns.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Ns.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Uc(e){this._modeling=e}Uc.$inject=["modeling"];Uc.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,r=e.connection,i=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return ot(i)&&(e.oldWaypoints=r.waypoints,r.waypoints=i),t&&(e.oldSource=r.source,r.source=t),n&&(e.oldTarget=r.target,r.target=n),r};Uc.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,r=e.newTarget,i=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!r||o.docking==="source")&&(a.connectionStart=a.connectionStart||cb(ot(i)?i[0]:i)),r&&(!n||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||cb(ot(i)?i[i.length-1]:i)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))};Uc.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,r=e.oldWaypoints,i=e.connection;return t&&(i.source=t),n&&(i.target=n),r&&(i.waypoints=r),i};function cb(e){return e.original||e}function Io(e,t){this._modeling=e,this._rules=t}Io.$inject=["modeling","rules"];Io.prototype.preExecute=function(e){var t=this,n=this._modeling,r=this._rules,i=e.oldShape,o=e.newData,a=e.hints||{},s;function l(v,x,C){return r.allowed("connection.reconnect",{connection:C,source:v,target:x})}var c={x:o.x,y:o.y},f={x:i.x,y:i.y,width:i.width,height:i.height};s=e.newShape=e.newShape||t.createShape(o,c,i.parent,a),i.host&&n.updateAttachment(s,i.host);var d;a.moveChildren!==!1&&(d=i.children.slice(),n.moveElements(d,{x:0,y:0},s,a));var g=i.incoming.slice(),y=i.outgoing.slice();W(g,function(v){var x=v.source,C=l(x,s,v);C&&t.reconnectEnd(v,s,Rh(v,s,f),a)}),W(y,function(v){var x=v.target,C=l(s,x,v);C&&t.reconnectStart(v,s,Ch(v,s,f),a)})};Io.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Io.prototype.execute=function(e){};Io.prototype.revert=function(e){};Io.prototype.createShape=function(e,t,n,r){return this._modeling.createShape(e,t,n,r)};Io.prototype.reconnectStart=function(e,t,n,r){this._modeling.reconnectStart(e,t,n,r)};Io.prototype.reconnectEnd=function(e,t,n,r){this._modeling.reconnectEnd(e,t,n,r)};function Gc(e){this._modeling=e}Gc.$inject=["modeling"];Gc.prototype.execute=function(e){var t=e.shape,n=e.newBounds,r=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};Gc.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,r=e.oldBounds,i=e.hints||{};i.layout!==!1&&(W(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:Rh(o,n,r)})}),W(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:Ch(o,n,r)})}))};Gc.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function Ba(e){this._modeling=e}Ba.$inject=["modeling"];Ba.prototype.preExecute=function(e){var t=e.delta,n=e.direction,r=e.movingShapes,i=e.resizingShapes,o=e.start,a={};this.moveShapes(r,t),W(i,function(s){a[s.id]=o8(s)}),this.resizeShapes(i,t,n),this.updateConnectionWaypoints(N9(r,i),t,n,o,r,i,a)};Ba.prototype.execute=function(){};Ba.prototype.revert=function(){};Ba.prototype.moveShapes=function(e,t){var n=this;W(e,function(r){n._modeling.moveShape(r,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Ba.prototype.resizeShapes=function(e,t,n){var r=this;W(e,function(i){var o=D9(i,n,t);r._modeling.resizeShape(i,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Ba.prototype.updateConnectionWaypoints=function(e,t,n,r,i,o,a){var s=this,l=i.concat(o);W(e,function(c){var f=c.source,d=c.target,g=i8(c),y=kP(n),v={};Qo(l,f)&&Qo(l,d)?(g=Zn(g,function(x){return fb(x,r,n)&&(x[y]=x[y]+t[y]),x.original&&fb(x.original,r,n)&&(x.original[y]=x.original[y]+t[y]),x}),s._modeling.updateWaypoints(c,g,{labelBehavior:!1})):(Qo(l,f)||Qo(l,d))&&(Qo(i,f)?v.connectionStart=U0(c,f,t):Qo(i,d)?v.connectionEnd=G0(c,d,t):Qo(o,f)?v.connectionStart=Ch(c,f,a[f.id]):Qo(o,d)&&(v.connectionEnd=Rh(c,d,a[d.id])),s._modeling.layoutConnection(c,v))})};function pb(e){return q({},e)}function i8(e){return Zn(e.waypoints,function(t){return t=pb(t),t.original&&(t.original=pb(t.original)),t})}function kP(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function fb(e,t,n){var r=kP(n);if(/e|s/.test(n))return e[r]>t;if(/n|w/.test(n))return e[r]<t}function Qo(e,t){return e.indexOf(t)!==-1}function o8(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Fh(e){this._modeling=e}Fh.$inject=["modeling"];Fh.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=PP(n),t.collapsed=!t.collapsed;var r=TP(n,t.collapsed);return[t].concat(r)};Fh.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,r=t.children,i=AP(r,n);return t.collapsed=!t.collapsed,[t].concat(i)};function PP(e){var t={};return W(e,function(n){t[n.id]=n.hidden,n.children&&(t=q({},t,PP(n.children)))}),t}function TP(e,t){var n=[];return W(e,function(r){r.hidden=t,n=n.concat(r),r.children&&(n=n.concat(TP(r.children,r.collapsed||t)))}),n}function AP(e,t){var n=[];return W(e,function(r){r.hidden=t[r.id],n=n.concat(r),r.children&&(n=n.concat(AP(r.children,t)))}),n}function zh(e){this._modeling=e}zh.$inject=["modeling"];zh.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=MP(r,t),NP(n,t),t.host=n,t};zh.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,i=e.attacherIdx;return t.host=r,MP(n,t),NP(r,t,i),t};function MP(e,t){return mn(e&&e.attachers,t)}function NP(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),Sn(r,t,n)}}function Ex(){}Ex.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};Ex.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function It(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}It.$inject=["eventBus","elementFactory","commandStack"];It.prototype.getHandlers=function(){return{"shape.append":Lh,"shape.create":La,"shape.delete":Vc,"shape.move":Ns,"shape.resize":Gc,"shape.replace":Io,"shape.toggleCollapse":Fh,spaceTool:Ba,"label.create":zc,"connection.create":Bh,"connection.delete":Hc,"connection.move":_x,"connection.layout":jh,"connection.updateWaypoints":Ex,"connection.reconnect":Uc,"elements.create":vx,"elements.move":$h,"elements.delete":xx,"elements.distribute":Ih,"elements.align":Oh,"element.updateAttachment":zh}};It.prototype.registerHandlers=function(e){W(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};It.prototype.moveShape=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=null);var o={shape:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",o)};It.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};It.prototype.moveElements=function(e,t,n,r){r=r||{};var i=r.attach,o=n,a;i===!0?(a=n,o=n.parent):i===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:r};this._commandStack.execute("elements.move",s)};It.prototype.moveConnection=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",o)};It.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};It.prototype.createConnection=function(e,t,n,r,i,o){typeof n=="object"&&(o=i,i=r,r=n,n=void 0),r=this._create("connection",r);var a={source:e,target:t,parent:i,parentIndex:n,connection:r,hints:o};return this._commandStack.execute("connection.create",a),a.connection};It.prototype.createShape=function(e,t,n,r,i){typeof r!="number"&&(i=r,r=void 0),i=i||{};var o=i.attach,a,s;e=this._create("shape",e),o?(a=n.parent,s=n):a=n;var l={position:t,shape:e,parent:a,parentIndex:r,host:s,hints:i};return this._commandStack.execute("shape.create",l),l.shape};It.prototype.createElements=function(e,t,n,r,i){ot(e)||(e=[e]),typeof r!="number"&&(i=r,r=void 0),i=i||{};var o={position:t,elements:e,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",o),o.elements};It.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var i={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape};It.prototype.appendShape=function(e,t,n,r,i){i=i||{},t=this._create("shape",t);var o={source:e,position:n,target:r,shape:t,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",o),o.shape};It.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};It.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)};It.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};It.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};It.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};It.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};It.prototype.resizeShape=function(e,t,n,r){var i={shape:e,newBounds:t,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)};It.prototype.createSpace=function(e,t,n,r,i){var o={delta:n,direction:r,movingShapes:e,resizingShapes:t,start:i};this._commandStack.execute("spaceTool",o)};It.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};It.prototype.reconnect=function(e,t,n,r,i){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",o)};It.prototype.reconnectStart=function(e,t,n,r){r||(r={}),this.reconnect(e,t,e.target,n,q(r,{docking:"source"}))};It.prototype.reconnectEnd=function(e,t,n,r){r||(r={}),this.reconnect(e,e.source,t,n,q(r,{docking:"target"}))};It.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)};It.prototype._create=function(e,t){return tD(t)?t:this._elementFactory.create(e,t)};It.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Kc(e){this._elementRegistry=e}Kc.$inject=["elementRegistry"];Kc.prototype.execute=function(e){var t=e.element,n=e.moddleElement,r=e.properties;if(!n)throw new Error("<moddleElement> required");var i=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||a8(n,dd(r));return DP(n,r),e.oldProperties=o,e.changed=i,i};Kc.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,r=e.changed;return DP(n,t),r};Kc.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return A(e,"bpmn:DataObject")?s8(e,t):[]};function a8(e,t){return jr(t,function(n,r){return n[r]=e.get(r),n},{})}function DP(e,t){W(t,function(n,r){e.set(r,n)})}function s8(e,t){return t.filter(function(n){return A(n,"bpmn:DataObjectReference")&&de(n).dataObjectRef===e})}var Ru="default",So="id",OP="di",l8={width:0,height:0};function Yc(e,t,n,r){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=r}Yc.$inject=["elementRegistry","moddle","modeling","textRenderer"];Yc.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var r=this._elementRegistry,i=this._moddle.ids,o=t.businessObject,a=d8(e.properties),s=e.oldProperties||u8(t,a);return LP(a,o)&&(i.unclaim(o[So]),r.updateId(t,a[So]),i.claim(a[So],o)),Ru in a&&(a[Ru]&&n.push(r.get(a[Ru].id)),o[Ru]&&n.push(r.get(o[Ru].id))),BP(t,a),e.oldProperties=s,e.changed=n,n};Yc.prototype.postExecute=function(e){var t=e.element,n=t.label,r=n&&de(n).name;if(r){var i=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,i,l8)}};Yc.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,i=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return BP(t,r),LP(n,i)&&(a.unclaim(n[So]),o.updateId(t,r[So]),a.claim(r[So],i)),e.changed};function LP(e,t){return So in e&&e[So]!==t[So]}function u8(e,t){var n=dd(t),r=e.businessObject,i=Ct(e);return jr(n,function(o,a){return a!==OP?o[a]=r.get(a):o[a]=c8(i,dd(t.di)),o},{})}function c8(e,t){return jr(t,function(n,r){return n[r]=e&&e.get(r),n},{})}function BP(e,t){var n=e.businessObject,r=Ct(e);W(t,function(i,o){o!==OP?n.set(o,i):r&&p8(r,i)})}function p8(e,t){W(t,function(n,r){e.set(r,n)})}var f8=["default"];function d8(e){var t=q({},e);return f8.forEach(function(n){n in e&&(t[n]=de(t[n]))}),t}function Hh(e,t){this._canvas=e,this._modeling=t}Hh.$inject=["canvas","modeling"];Hh.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=t.getRootElement(),o=i.businessObject,a=o.$parent,s=Ct(i);return t.setRootElement(n),t.removeRootElement(i),Sn(a.rootElements,r),r.$parent=a,mn(a.rootElements,o),o.$parent=null,i.di=null,s.bpmnElement=r,n.di=s,e.oldRoot=i,[]};Hh.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=e.oldRoot,o=i.businessObject,a=r.$parent,s=Ct(n);return t.setRootElement(i),t.removeRootElement(n),mn(a.rootElements,r),r.$parent=null,Sn(a.rootElements,o),o.$parent=a,n.di=null,s.bpmnElement=o,i.di=s,[]};function bx(e,t){this._modeling=e,this._spaceTool=t}bx.$inject=["modeling","spaceTool"];bx.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,r=e.shape,i=e.location,o=hi(r),a=o===r,s=a?r:r.parent,l=Na(s),c=Mn(r);if(c?i==="left"?i="top":i==="right"&&(i="bottom"):i==="top"?i="left":i==="bottom"&&(i="right"),!l.length){var f=c?{x:r.x+pi,y:r.y,width:r.width-pi,height:r.height}:{x:r.x,y:r.y+pi,width:r.width,height:r.height-pi};n.createShape({type:"bpmn:Lane",isHorizontal:c},f,s)}var d=[];Rs(o,function(b){return d.push(b),b.label&&d.push(b.label),b===r?[]:ht(b.children,function(D){return D!==r})});var g,y,v,x,C;i==="top"?(g=-120,y=r.y,v=y+10,x="n",C="y"):i==="left"?(g=-120,y=r.x,v=y+10,x="w",C="x"):i==="bottom"?(g=120,y=r.y+r.height,v=y-10,x="s",C="y"):i==="right"&&(g=120,y=r.x+r.width,v=y-10,x="e",C="x");var k=t.calculateAdjustments(d,C,g,v),R=c?{x:0,y:g}:{x:g,y:0};t.makeSpace(k.movingShapes,k.resizingShapes,R,x,v);var E=c?{x:r.x+(a?pi:0),y:y-(i==="top"?120:0),width:r.width-(a?pi:0),height:120}:{x:y-(i==="left"?120:0),y:r.y+(a?pi:0),width:120,height:r.height-(a?pi:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:c},E,s)};function Sx(e){this._modeling=e}Sx.$inject=["modeling"];Sx.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,r=e.count,i=Na(n),o=i.length;if(o>r)throw new Error(`more than <${r}> child lanes`);var a=Mn(n),s=a?n.height:n.width,l=Math.round(s/r),c,f,d,g;for(g=0;g<r;g++)g===r-1?c=s-l*g:c=l,f=a?{x:n.x+pi,y:n.y+g*l,width:n.width-pi,height:c}:{x:n.x+g*l,y:n.y+pi,width:c,height:n.height-pi},g<o?t.resizeShape(i[g],f):(d={type:"bpmn:Lane",isHorizontal:a},t.createShape(d,f,n))};function qc(e,t){this._modeling=e,this._spaceTool=t}qc.$inject=["modeling","spaceTool"];qc.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,r=e.balanced;r!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};qc.prototype.resizeBalanced=function(e,t){var n=this._modeling,r=zB(e,t);n.resizeShape(e,t),r.forEach(function(i){n.resizeShape(i.shape,i.newBounds)})};qc.prototype.resizeSpace=function(e,t){var n=this._spaceTool,r=Ue(e),i=Ue(t),o=Bk(i,r),a=hi(e),s=[],l=[];Rs(a,function(v){return s.push(v),(A(v,"bpmn:Lane")||A(v,"bpmn:Participant"))&&l.push(v),v.children});var c,f,d,g,y;(o.bottom||o.top)&&(c=o.bottom||o.top,f=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),d=o.bottom?"s":"n",g=o.top>0||o.bottom<0?-c:c,y=n.calculateAdjustments(s,"y",g,f),n.makeSpace(y.movingShapes,y.resizingShapes,{x:0,y:c},d)),(o.left||o.right)&&(c=o.right||o.left,f=e.x+(o.right?e.width:0)+(o.right?-10:100),d=o.right?"e":"w",g=o.left>0||o.right<0?-c:c,y=n.calculateAdjustments(l,"x",g,f),n.makeSpace(y.movingShapes,y.resizingShapes,{x:c,y:0},d))};var xc="flowNodeRef",Cx="lanes";function Xc(e){this._elementRegistry=e}Xc.$inject=["elementRegistry"];Xc.prototype._computeUpdates=function(e,t){var n=[],r=[],i={},o=[];function a(f,d){var g=Ue(d),y={x:f.x+f.width/2,y:f.y+f.height/2};return y.x>g.left&&y.x<g.right&&y.y>g.top&&y.y<g.bottom}function s(f){n.indexOf(f)===-1&&(o.push(f),n.push(f))}function l(f){var d=hi(f);return i[d.id]||(i[d.id]=bh(d)),i[d.id]}function c(f){if(!f.parent)return[];var d=l(f);return d.filter(function(g){return a(f,g)}).map(function(g){return g.businessObject})}return t.forEach(function(f){var d=hi(f);if(!(!d||n.indexOf(d)!==-1)){var g=d.children.filter(function(y){return A(y,"bpmn:FlowNode")});g.forEach(s),n.push(d)}}),e.forEach(s),o.forEach(function(f){var d=f.businessObject,g=d.get(Cx),y=g.slice(),v=c(f);r.push({flowNode:d,remove:y,add:v})}),t.forEach(function(f){var d=f.businessObject;f.parent||d.get(xc).forEach(function(g){r.push({flowNode:g,remove:[d],add:[]})})}),r};Xc.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var r=n.flowNode,i=r.get(Cx);n.remove.forEach(function(o){mn(i,o),mn(o.get(xc),r)}),n.add.forEach(function(o){Sn(i,o),Sn(o.get(xc),r)})}),[]};Xc.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var r=n.flowNode,i=r.get(Cx);n.add.forEach(function(o){mn(i,o),mn(o.get(xc),r)}),n.remove.forEach(function(o){Sn(i,o),Sn(o.get(xc),r)})}),[]};function Vh(e){this._moddle=e}Vh.$inject=["moddle"];Vh.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.claim(n,r):t.unclaim(n),[]};Vh.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.unclaim(n):t.claim(n,r),[]};var h8={fill:void 0,stroke:void 0};function Rx(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(Ir(t)){var n=m8(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}Rx.$inject=["commandStack"];Rx.prototype.postExecute=function(e){var t=e.elements,n=e.colors||h8,r=this,i={};"fill"in n&&q(i,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&q(i,{"border-color":this._normalizeColor(n.stroke)}),W(t,function(o){var a=jt(o)?$i(i,["border-color"]):i,s=Ct(o);if(g8(a),Rt(o))r._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:i["border-color"]}});else{if(!ft(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;r._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function m8(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function g8(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var y8={width:0,height:0};function IP(e,t,n){function r(l,c){var f=l.label||l,d=l.labelTarget||l;return i4(f,c),[f,d]}function i(l){var c=l.element,f=c.businessObject,d=l.newLabel;if(!Rt(c)&&_s(c)&&!oh(c)&&!db(d)){var g=7,y=o0(c);y={x:y.x,y:y.y+g},e.createLabel(c,y,{id:f.id+"_label",businessObject:f,di:c.di})}}function o(l){return l.oldLabel=Xr(l.element),r(l.element,l.newLabel)}function a(l){return r(l.element,l.oldLabel)}function s(l){var c=l.element,f=c.label||c,d=l.newLabel,g=l.newBounds,y=l.hints||{};if(!(!Rt(f)&&!A(f,"bpmn:TextAnnotation"))){if(Rt(f)&&db(d)){y.removeShape!==!1&&e.removeShape(f,{unsetLabel:!1});return}var v=Xr(c);typeof g>"u"&&(g=t.getExternalLabelBounds(f,v)),g&&e.resizeShape(f,g,y8)}}this.preExecute=i,this.execute=o,this.revert=a,this.postExecute=s}IP.$inject=["modeling","textRenderer","bpmnFactory"];function db(e){return!e||!e.trim()}function nr(e,t,n,r){It.call(this,e,t,n),this._bpmnRules=r}Oe(nr,It);nr.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];nr.prototype.getHandlers=function(){var e=It.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Kc,e["element.updateProperties"]=Yc,e["canvas.updateRoot"]=Hh,e["lane.add"]=bx,e["lane.resize"]=qc,e["lane.split"]=Sx,e["lane.updateRefs"]=Xc,e["id.updateClaim"]=Vh,e["element.setColor"]=Rx,e["element.updateLabel"]=IP,e};nr.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})};nr.prototype.connect=function(e,t,n,r){var i=this._bpmnRules;if(n||(n=i.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,r)};nr.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};nr.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};nr.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};nr.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};nr.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};nr.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};nr.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};nr.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};nr.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};nr.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};nr.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function jP(){}jP.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Je(t.source||e.source),t.connectionEnd||Je(t.target||e.target)]};var ff=20,v8=5,Td=Math.round,hb=20,x8={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function _8(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function w8(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function $P(e,t,n){var r=tr(t,e,v8),i=n.split(":")[0],o=Td((t.x-e.x)/2+e.x),a=Td((t.y-e.y)/2+e.y),s,l,c=w8(i,r),f=/h|r|l/.test(i),d=!1,g=!1;return c?(s=f?{x:o,y:e.y}:{x:e.x,y:a},l=f?"h:h":"v:v"):(d=_8(r,i),l=f?"h:v":"v:h",d?f?(g=a===e.y,s={x:e.x+ff*(/l/.test(i)?-1:1),y:g?a+ff:a}):(g=o===e.x,s={x:g?o+ff:o,y:e.y+ff*(/t/.test(i)?-1:1)}):s={x:o,y:a}),{waypoints:kx(e,s,l).concat(s),directions:l,turnNextDirections:g}}function E8(e,t,n){return $P(e,t,n)}function b8(e,t,n){var r=$P(t,e,mb(n));return{waypoints:r.waypoints.slice().reverse(),directions:mb(r.directions),turnNextDirections:r.turnNextDirections}}function S8(e,t){var n=e.directions.split(":")[1],r=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(r=r=="h"?"v":"h");var i=n+":"+r,o=kx(e.waypoints[e.waypoints.length-1],t.waypoints[0],i);return{waypoints:o,directions:i}}function mb(e){return e.split(":").reverse().join(":")}function C8(e,t,n){var r=Td((t.x-e.x)/2+e.x),i=Td((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:r,y:e.y},{x:r,y:t.y}];if(n==="v:v")return[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function kx(e,t,n){if(n=n||"h:h",!O8(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(FP(n)){var r=E8(e,t,n),i=b8(e,t,n),o=S8(r,i);return[].concat(r.waypoints,o.waypoints,i.waypoints)}return C8(e,t,n)}function R8(e,t,n){var r=kx(e,t,n);return r.unshift(e),r.push(t),zP(r)}function k8(e,t,n,r,i){var o=i&&i.preferredLayouts||[],a=T5(o,"straight")[0]||"h:h",s=x8[a]||0,l=tr(e,t,s),c=D8(l,a);n=n||Je(e),r=r||Je(t);var f=c.split(":"),d=yb(n,e,f[0],L8(l)),g=yb(r,t,f[1],l);return R8(d,g,c)}function P8(e,t,n,r,i,o){ot(n)&&(i=n,o=r,n=Je(e),r=Je(t)),o=q({preferredLayouts:[]},o),i=i||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,l;return l=s&&A8(e,t,n,r,o),l||(l=o.connectionEnd&&N8(t,e,r,i),l)||(l=o.connectionStart&&M8(e,t,n,i),l)?l:!o.connectionStart&&!o.connectionEnd&&i&&i.length?i:k8(e,t,n,r,o)}function T8(e,t,n){return e>=t&&e<=n}function gb(e,t,n){var r={x:"width",y:"height"};return T8(t[e],n[e],n[e]+n[r[e]])}function A8(e,t,n,r,i){var o={},a,s;return s=tr(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),i.preserveDocking==="target"?gb(a,r,e)?(o[a]=r[a],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:r.x,y:r.y}]):null:gb(a,n,t)?(o[a]=n[a],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y,original:{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y}}]):null):null}function M8(e,t,n,r){return Px(e,t,n,r)}function N8(e,t,n,r){var i=r.slice().reverse();return i=Px(e,t,n,i),i?i.reverse():null}function Px(e,t,n,r){function i(f){return f.length<3?!0:f.length>4?!1:!!At(f,function(d,g){var y=f[g-1];return y&&Pc(d,y)<3})}function o(f,d,g){var y=xo(d,f);switch(y){case"v":return{x:g.x,y:f.y};case"h":return{x:f.x,y:g.y}}return{x:f.x,y:f.y}}function a(f,d,g){var y;for(y=f.length-2;y!==0;y--)if(uw(f[y],d,hb)||uw(f[y],g,hb))return f.slice(y);return f}if(i(r))return null;var s=r[0],l=r.slice(),c;return l[0]=n,l[1]=o(l[1],s,n),c=a(l,e,t),c!==l&&(l=Px(e,t,n,c)),l&&xo(l)?null:l}function D8(e,t){if(FP(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function O8(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function FP(e){return e&&/t|r|b|l/.test(e)}function L8(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function yb(e,t,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function zP(e){return e.reduce(function(t,n,r){var i=t[t.length-1],o=e[r+1];return Yv(i,o,n,0)||t.push(n),t},[])}var B8=-10,I8=40,j8={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},$8={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},Tx={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Nu={top:"t",right:"r",bottom:"b",left:"l"};function Wh(e){this._elementRegistry=e}Oe(Wh,jP);Wh.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,r=t.target||e.target,i=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,l,c;if(o||(o=vb(i&&i[0],n)),a||(a=vb(i&&i[i.length-1],r)),(A(e,"bpmn:Association")||A(e,"bpmn:DataAssociation"))&&i&&!xb(n,r))return[].concat([o],i.slice(1,-1),[a]);var f=fk(n,s)?j8:$8;return A(e,"bpmn:MessageFlow")?l=z8(n,r,f):(A(e,"bpmn:SequenceFlow")||xb(n,r))&&(n===r?l={preferredLayouts:K8(n,e,f)}:A(n,"bpmn:BoundaryEvent")?l={preferredLayouts:Y8(n,r,a,f)}:_c(n)||_c(r)?l={preferredLayouts:f.subProcess,preserveDocking:V8(n)}:A(n,"bpmn:Gateway")?l={preferredLayouts:f.fromGateway}:A(r,"bpmn:Gateway")?l={preferredLayouts:f.toGateway}:l={preferredLayouts:f.default}),l&&(l=q(l,t),c=zP(P8(n,r,o,a,i,l))),c||[o,a]};function F8(e){var t=e.host;return tr(Je(e),t,B8)}function z8(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:H8(e,t)}}function H8(e,t){return A(t,"bpmn:Participant")?"source":A(e,"bpmn:Participant")?"target":_c(t)?"source":_c(e)||A(t,"bpmn:Event")?"target":A(e,"bpmn:Event")?"source":null}function V8(e){return _c(e)?"target":"source"}function vb(e,t){return e?e.original||e:Je(t)}function xb(e,t){return A(t,"bpmn:Activity")&&A(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function _c(e){return A(e,"bpmn:SubProcess")&&yt(e)}function us(e,t){return e===t}function W8(e,t){return t.indexOf(e)!==-1}function Dl(e){var t=/right|left/.exec(e);return t&&t[0]}function Ol(e){var t=/top|bottom/.exec(e);return t&&t[0]}function _b(e,t){return Tx[e]===t}function U8(e,t){var n=Dl(e),r=Tx[n];return t.indexOf(r)!==-1}function G8(e,t){var n=Ol(e),r=Tx[n];return t.indexOf(r)!==-1}function HP(e){return e==="right"||e==="left"}function K8(e,t,n){var r=t.waypoints,i=r&&r.length&&tr(r[0],e);return i==="top"?n.loop.fromTop:i==="right"?n.loop.fromRight:i==="left"?n.loop.fromLeft:n.loop.fromBottom}function Y8(e,t,n,r){var i=Je(e),o=Je(t),a=F8(e),s,l,c=us(e.host,t),f=W8(a,["top","right","bottom","left"]),d=tr(o,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return c?q8(a,f,e,t,n,r):(s=X8(a,d,f,r.isHorizontal),l=Q8(a,d,f,r.isHorizontal),[s+":"+l])}function q8(e,t,n,r,i,o){var a=t?e:o.isHorizontal?Ol(e):Dl(e),s=Nu[a],l;return t?HP(e)?l=wb("y",n,r,i)?"h":o.boundaryLoop.alternateHorizontalSide:l=wb("x",n,r,i)?"v":o.boundaryLoop.alternateVerticalSide:l=o.boundaryLoop.default,[s+":"+l]}function wb(e,t,n,r){var i=I8;return!(ug(e,r,n,i)||ug(e,r,{x:n.x+n.width,y:n.y+n.height},i)||ug(e,r,Je(t),i))}function ug(e,t,n,r){return Math.abs(t[e]-n[e])<r}function X8(e,t,n,r){if(n)return Nu[e];var i=Ol(e),o=Dl(e),a=Ol(t),s=Dl(t);if(r){if(us(i,a)||_b(o,s))return Nu[i]}else if(us(o,s)||_b(i,a))return Nu[o];return Nu[r?o:i]}function Q8(e,t,n,r){return n?HP(e)?U8(e,t)||us(e,t)?"h":"v":G8(e,t)||us(e,t)?"v":"h":r?us(Ol(e),Ol(t))?"h":"v":us(Dl(e),Dl(t))?"v":"h"}Wh.$inject=["elementRegistry"];function Eb(e){return q({original:e.point.original||e.point},e.actual)}function Ia(e,t){this._elementRegistry=e,this._graphicsFactory=t}Ia.$inject=["elementRegistry","graphicsFactory"];Ia.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),i=this.getDockingPoint(e,n),o=e.waypoints.slice(r.idx+1,i.idx);return o.unshift(Eb(r)),o.push(Eb(i)),o};Ia.prototype.getDockingPoint=function(e,t,n){var r=e.waypoints,i,o,a;return i=n?0:r.length-1,o=r[i],a=this._getIntersection(t,e,n),{point:o,actual:a||o,idx:i}};Ia.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),i=this._getConnectionPath(t);return gy(r,i,n)};Ia.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};Ia.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};Ia.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const VP={__init__:["modeling","bpmnUpdater"],__depends__:[GI,c9,f9,d9,bP,z9,V9,q9,ro,a0,RP],bpmnFactory:["type",Ci],bpmnUpdater:["type",Fr],elementFactory:["type",Oa],modeling:["type",nr],layouter:["type",Wh],connectionDocking:["type",Ia]},bb=Math.round;function Uh(e,t,n,r,i,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=r,this._layouter=i,this._rules=o}Uh.prototype.create=function(e,t,n){const r=this._complexPreview,i=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,l=this._rules,c=o.createShape(q({type:t},n)),f=a.fire("autoPlace",{source:e,shape:c});if(!f)return;q(c,{x:f.x-bb(c.width/2),y:f.y-bb(c.height/2)});const d=l.allowed("connection.create",{source:e,target:c,hints:{targetParent:e.parent}});let g=null;d&&(g=o.createConnection(d),g.waypoints=s.layoutConnection(g,{source:e,target:c}),g.waypoints=i.getCroppedWaypoints(g,e,c)),r.create({created:[c,g].filter(y=>!pc(y))})};Uh.prototype.cleanUp=function(){this._complexPreview.cleanUp()};Uh.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const Z8={__depends__:[w0,wB,VP],__init__:["appendPreview"],appendPreview:["type",Uh]};var Sb=Math.min,Cb=Math.max;function cg(e){e.preventDefault()}function Ku(e){e.stopPropagation()}function J8(e){return e.nodeType===Node.TEXT_NODE}function ej(e){return[].slice.call(e)}function zi(e){this.container=e.container,this.parent=zt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Bt("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=_r(this.autoResize,this),this.handlePaste=_r(this.handlePaste,this)}zi.prototype.create=function(e,t,n,r){var i=this,o=this.parent,a=this.content,s=this.container;r=this.options=r||{},t=this.style=t||{};var l=$i(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);q(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var c=$i(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return q(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),r.centerVertically&&q(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),a.innerText=n,it.bind(a,"keydown",this.keyHandler),it.bind(a,"mousedown",Ku),it.bind(a,"paste",i.handlePaste),r.autoResize&&it.bind(a,"input",this.autoResize),r.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o};zi.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var r;if(e.clipboardData?r=e.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),t.autoResize){var i=this.autoResize(n);i&&this.resizeHandler(i)}};zi.prototype.insertText=function(e){e=tj(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};zi.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,r=t.endContainer,i=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=ej(a.childNodes),l,c;if(J8(a)){var f=n.textContent;n.textContent=f.substring(0,i)+e+f.substring(o),l=n,c=i+e.length}else if(n===this.content&&r===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,s[i]),l=d,c=d.textContent.length}else{var g=s.indexOf(n),y=s.indexOf(r);s.forEach(function(v,x){x===g?v.textContent=n.textContent.substring(0,i)+e+r.textContent.substring(o):x>g&&x<=y&&no(v)}),l=n,c=i+e.length}l&&c!==void 0&&setTimeout(function(){self.setSelection(l,c)})};zi.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var r=e.getBoundingClientRect(),i=t.scrollHeight;e.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}};zi.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=zt('<div class="djs-direct-editing-resize-handle"></div>');var s,l,c,f,d=function(v){cg(v),Ku(v),s=v.clientX,l=v.clientY;var x=t.getBoundingClientRect();c=x.width,f=x.height,it.bind(document,"mousemove",g),it.bind(document,"mouseup",y)},g=function(v){cg(v),Ku(v);var x=Sb(Cb(c+v.clientX-s,r),o),C=Sb(Cb(f+v.clientY-l,i),a);t.style.width=x+"px",t.style.height=C+"px",e.resizeHandler({width:c,height:f,dx:v.clientX-s,dy:v.clientY-l})},y=function(v){cg(v),Ku(v),it.unbind(document,"mousemove",g,!1),it.unbind(document,"mouseup",y,!1)};it.bind(n,"mousedown",d)}q(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};zi.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),it.unbind(t,"keydown",this.keyHandler),it.unbind(t,"mousedown",Ku),it.unbind(t,"input",this.autoResize),it.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),no(n)),no(e)};zi.prototype.getValue=function(){return this.content.innerText.trim()};zi.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};zi.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function tj(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Ri(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new zi({container:t.getContainer(),keyHandler:_r(this._handleKey,this),resizeHandler:_r(this._handleResize,this)})}Ri.$inject=["eventBus","canvas"];Ri.prototype.registerProvider=function(e){this._providers.push(e)};Ri.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Ri.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Ri.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Ri.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};Ri.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),o=e.context.text;(i!==o||r.height!==n.height||r.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,i,e.context.text,{x:r.left-t.left,y:r.top-t.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};Ri.prototype.getValue=function(){return this._textbox.getValue()};Ri.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Ri.prototype._handleResize=function(e){this._fire("resize",e)};Ri.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=At(this._providers,function(r){return(t=r.activate(e))?r:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const WP={__depends__:[ph],__init__:["directEditing"],directEditing:["type",Ri]};function Rb(e){return function(t){var n=t.target,r=de(e),i=r.eventDefinitions&&r.eventDefinitions[0],o=r.$type===n.type,a=(i&&i.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!r.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===yt(e);return!o||!a||!s||!l}}var nj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],rj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],ij=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],oj=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],aj=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],sj=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],UP=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],lj=UP,kb=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],uj=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],cj=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],pj=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],fj=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],dj=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],hj=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const Pb={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function ii(e,t,n,r,i,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=r,this._bpmnReplace=i,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}ii.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];ii.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};ii.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,r=[];if(ot(e)||!n.allowed("shape.replace",{element:e}))return{};var i=Rb(e);return A(t,"bpmn:DataObjectReference")?this._createEntries(e,uj):A(t,"bpmn:DataStoreReference")&&!A(e.parent,"bpmn:Collaboration")?this._createEntries(e,cj):A(t,"bpmn:StartEvent")&&!A(t.$parent,"bpmn:SubProcess")?(r=ht(nj,i),this._createEntries(e,r)):A(t,"bpmn:Participant")?(r=ht(hj,function(o){return yt(e)!==o.target.isExpanded}),this._createEntries(e,r)):A(t,"bpmn:StartEvent")&&Jn(t.$parent)?(r=ht(fj,function(o){var a=o.target,s=a.isInterrupting!==!1,l=t.isInterrupting===s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):A(t,"bpmn:StartEvent")&&!Jn(t.$parent)&&A(t.$parent,"bpmn:SubProcess")?(r=ht(rj,i),this._createEntries(e,r)):A(t,"bpmn:EndEvent")?(r=ht(oj,function(o){var a=o.target;return a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(t.$parent,"bpmn:Transaction")?!1:i(o)}),this._createEntries(e,r)):A(t,"bpmn:BoundaryEvent")?(r=ht(pj,function(o){var a=o.target;if(a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(t.attachedToRef,"bpmn:Transaction"))return!1;var s=a.cancelActivity!==!1,l=t.cancelActivity==s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):A(t,"bpmn:IntermediateCatchEvent")||A(t,"bpmn:IntermediateThrowEvent")?(r=ht(ij,i),this._createEntries(e,r)):A(t,"bpmn:Gateway")?(r=ht(aj,i),this._createEntries(e,r)):A(t,"bpmn:Transaction")?(r=ht(UP,i),this._createEntries(e,r)):Jn(t)&&yt(e)?(r=ht(lj,i),this._createEntries(e,r)):A(t,"bpmn:SubProcess")&&yt(e)?(r=ht(sj,i),this._createEntries(e,r)):A(t,"bpmn:AdHocSubProcess")&&!yt(e)?(r=ht(kb,function(o){var a=o.target,s=a.type==="bpmn:SubProcess",l=a.isExpanded===!0;return Rb(a)&&(!s||l)}),this._createEntries(e,r)):A(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,dj):A(t,"bpmn:FlowNode")?(r=ht(kb,i),A(t,"bpmn:SubProcess")&&!yt(e)&&(r=ht(r,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,r)):{}};ii.prototype.getPopupMenuHeaderEntries=function(e){var t={};return A(e,"bpmn:Activity")&&!Jn(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),A(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),A(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),A(e,"bpmn:SubProcess")&&!A(e,"bpmn:Transaction")&&!Jn(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),Gk(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};ii.prototype._createEntries=function(e,t){var n={},r=this;return W(t,function(i){n[i.actionName]=r._createEntry(i,e)}),n};ii.prototype._createSequenceFlowEntries=function(e,t){var n=de(e),r={},i=this._modeling,o=this._moddle,a=this;return W(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&A(n.sourceRef,"bpmn:Activity")&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){var l=o.create("bpmn:FormalExpression",{body:""});i.updateProperties(e,{conditionExpression:l})})});break;default:A(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e,{conditionExpression:void 0})})}),(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:void 0})})})}}),r};ii.prototype._createEntry=function(e,t,n){var r=this._translate,i=this._bpmnReplace.replaceElement,o=function(){return i(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),n=n||o,{label:r(a),className:e.className,action:n}};ii.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function r(c,f){if(f.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const d=e.businessObject.get("loopCharacteristics"),g=t._moddle.create(f.options.loopCharacteristics);d&&t._moddleCopy.copyElement(d,g),g.set("isSequential",f.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:g})}var i=de(e),o=i.loopCharacteristics,a,s,l;return o&&(a=o.isSequential,s=o.isSequential===void 0,l=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};ii.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,r=e.businessObject.dataObjectRef;if(!r)return{};function i(a,s){t._modeling.updateModdleProperties(e,r,{isCollection:!s.active})}var o=r.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:i}}};ii.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,r=this._translate;function i(a,s){var l=s.active,c;l||(c=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:c})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:r("Participant multiplicity"),active:!!o,action:i}}};ii.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=de(e),r=A(n,"bpmn:AdHocSubProcess"),i=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:r,action:function(o,a){return r?i(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):i(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};ii.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=de(e),r=this,i=Kk(e),o=A(e,"bpmn:BoundaryEvent")?Pb["intermediate-event-non-interrupting"]:Pb["start-event-non-interrupting"],a=!n[i];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){r._modeling.updateProperties(e,{[i]:!!a})}}}};const mj={__depends__:[v0,bP,w0],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",ii]};function Qc(e,t,n,r,i,o,a,s,l,c,f,d,g){e=e||{},r.registerProvider(this),this._contextPad=r,this._modeling=i,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=l,this._canvas=c,this._rules=f,this._translate=d,this._eventBus=n,this._appendPreview=g,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(y){var v=y.context,x=v.shape;if(!(!mc(y)||!r.isOpen(x))){var C=r.getEntries(x);C.replace&&C.replace.action.click(y,x)}}),n.on("contextPad.close",function(){g.cleanUp()})}Qc.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];Qc.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&q(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(r,i){t.removeElements(i.slice())}}}}),n};Qc.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return ot(t)?Ss(e,n=>t.includes(n)):t};Qc.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,r=this._elementFactory,i=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,l=this._translate,c=this._appendPreview,f={};if(e.type==="label")return this._isDeleteAllowed([e])&&q(f,v()),f;var d=e.businessObject;function g(E,b){i.start(E,b)}function y(E,b){n.removeElements([b])}function v(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:y}}}}function x(E){var b=5,D=t.getPad(E).html,I=D.getBoundingClientRect(),z={x:I.left,y:I.bottom+b};return z}function C(E,b,D,I){function z(Y,G){var ae=r.createShape(q({type:E},I));o.start(Y,ae,{source:G})}var L=s?function(Y,G){var ae=r.createShape(q({type:E},I));s.append(G,ae)}:z,Q=s?function(Y,G){return c.create(G,E,I),()=>{c.cleanUp()}}:null;return{group:"model",className:b,title:D,action:{dragstart:z,click:L,hover:Q}}}function k(E){return function(b,D){n.splitLane(D,E),t.open(D,!0)}}if(ft(d,["bpmn:Lane","bpmn:Participant"])&&yt(e)){var R=Na(e);q(f,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(E,b){n.addLane(b,"top")}}}}),R.length<2&&((Mn(e)?e.height>=120:e.width>=120)&&q(f,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:k(2)}}}),(Mn(e)?e.height>=180:e.width>=180)&&q(f,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:k(3)}}})),q(f,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(E,b){n.addLane(b,"bottom")}}}})}return A(d,"bpmn:FlowNode")&&(A(d,"bpmn:EventBasedGateway")?q(f,{"append.receive-task":C("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":C("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Tb(d,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?q(f,{"append.compensation-activity":C("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!A(d,"bpmn:EndEvent")&&!d.isForCompensation&&!Tb(d,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Jn(d)&&q(f,{"append.end-event":C("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":C("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":C("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":C("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||q(f,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(E,b){var D=q(x(b),{cursor:{x:E.x,y:E.y}});a.open(b,"bpmn-replace",D,{title:l("Change element"),width:300,search:!0})}}}}),A(d,"bpmn:SequenceFlow")&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),ft(d,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:g,dragstart:g}}}),A(d,"bpmn:TextAnnotation")&&q(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:g,dragstart:g}}}),ft(d,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:g,dragstart:g}}}),A(d,"bpmn:Group")&&q(f,{"append.text-annotation":C("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([e])&&q(f,v()),f};function Tb(e,t,n){var r=e.$instanceOf(t),i=!1,o=e.eventDefinitions||[];return W(o,function(a){a.$type===n&&(i=!0)}),r&&i}const gj={__depends__:[Z8,WP,HR,ro,R0,Mh,mj],__init__:["contextPadProvider"],contextPadProvider:["type",Qc]};var yj={horizontal:["x","width"],vertical:["y","height"]},Ab=5;function jo(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var r=t.allowed("elements.distribute",{elements:n});return ot(r)?r:r?n:[]})}jo.$inject=["modeling","rules"];jo.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};jo.prototype.trigger=function(e,t){var n=this._modeling,r,i;if(!(e.length<3)&&(this._setOrientation(t),i=this._filterElements(e),r=this._createGroups(i),!(r.length<=2)))return n.distributeElements(r,this._axis,this._dimension),r};jo.prototype._filterElements=function(e){var t=this._filters,n=this._axis,r=this._dimension,i=[].concat(e);return t.length?(W(t,function(o){i=o(i,n,r)}),i):e};jo.prototype._createGroups=function(e){var t=[],n=this,r=this._axis,i=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var o=to(e,r);return W(o,function(a,s){var l=n._findRange(a,r,i),c,f=t[t.length-1];f&&n._hasIntersection(f.range,l)?t[t.length-1].elements.push(a):(c={range:l,elements:[a]},t.push(c))}),t};jo.prototype._setOrientation=function(e){var t=yj[e];this._axis=t[0],this._dimension=t[1]};jo.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};jo.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+Ab,max:t+n-Ab}};const vj={__init__:["distributeElements"],distributeElements:["type",jo]};function Gh(e){bi.call(this,e)}Gh.$inject=["eventBus"];Oe(Gh,bi);Gh.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=ht(t,function(n){var r=ft(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||r)}),t=Jd(t),t.length<3?!1:t})};var Mb={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},xj=900;function Zc(e,t,n,r){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",xj,this)}Zc.$inject=["popupMenu","distributeElements","translate","rules"];Zc.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Zc.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Zc.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,r=this._popupMenu,i={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:Mb.horizontal,action:function(o,a){t.trigger(e,"horizontal"),r.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:Mb.vertical,action:function(o,a){t.trigger(e,"vertical"),r.close()}}};return i};const _j={__depends__:[v0,vj],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Gh],distributeElementsMenuProvider:["type",Zc]};var GP="is not a registered action",wj="is already registered";function ki(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}ki.$inject=["eventBus","injector"];ki.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),i=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),l=e.get("keyboardMove",!1),c=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&r&&this.register("copy",function(){var f=r.get();if(f.length)return o.copy(f)}),o&&this.register("paste",function(){o.paste()}),i&&this.register("stepZoom",function(f){i.stepZoom(f.value)}),a&&this.register("zoom",function(f){a.zoom(f.value)}),n&&r&&s&&this.register("removeSelection",function(){var f=r.get();if(f.length){var d=s.allowed("elements.delete",{elements:f}),g;d!==!1&&(ot(d)?g=d:g=f,g.length&&n.removeElements(g.slice()))}}),l&&this.register("moveCanvas",function(f){l.moveCanvas(f)}),c&&this.register("moveSelection",function(f){c.moveSelection(f.direction,f.accelerated)})};ki.prototype.trigger=function(e,t){if(!this._actions[e])throw Ax(e,GP);return this._actions[e](t)};ki.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);W(e,function(r,i){n._registerAction(i,r)})};ki.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw Ax(e,wj);this._actions[e]=t};ki.prototype.unregister=function(e){if(!this.isRegistered(e))throw Ax(e,GP);this._actions[e]=void 0};ki.prototype.getActions=function(){return Object.keys(this._actions)};ki.prototype.isRegistered=function(e){return!!this._actions[e]};function Ax(e,t){return new Error(e+" "+t)}const Ej={__init__:["editorActions"],editorActions:["type",ki]};function Kh(e){e.invoke(ki,this)}Oe(Kh,ki);Kh.$inject=["injector"];Kh.prototype._registerDefaultActions=function(e){ki.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),i=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),l=e.get("distributeElements",!1),c=e.get("alignElements",!1),f=e.get("directEditing",!1),d=e.get("searchPad",!1),g=e.get("modeling",!1),y=e.get("contextPad",!1);t&&n&&r&&this._registerAction("selectElements",function(){var v=t.getRootElement(),x=n.filter(function(C){return C!==v});return r.select(x),x}),i&&this._registerAction("spaceTool",function(){i.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),r&&l&&this._registerAction("distributeElements",function(v){var x=r.get(),C=v.type;x.length&&l.trigger(x,C)}),r&&c&&this._registerAction("alignElements",function(v){var x=r.get(),C=[],k=v.type;x.length&&(C=ht(x,function(R){return!A(R,"bpmn:Lane")}),c.trigger(C,k))}),r&&g&&this._registerAction("setColor",function(v){var x=r.get();x.length&&g.setColor(x,v)}),r&&f&&this._registerAction("directEditing",function(){var v=r.get();v.length&&f.activate(v[0])}),d&&this._registerAction("find",function(){d.toggle()}),t&&g&&this._registerAction("moveToOrigin",function(){var v=t.getRootElement(),x,C;A(v,"bpmn:Collaboration")?C=n.filter(function(k){return A(k.parent,"bpmn:Collaboration")}):C=n.filter(function(k){return k!==v&&!A(k.parent,"bpmn:SubProcess")}),x=An(C),g.moveElements(C,{x:-x.x,y:-x.y},v)}),r&&y&&this._registerAction("replaceElement",function(v){y.triggerEntry("replace","click",v)})};const bj={__depends__:[Ej],editorActions:["type",Kh]};function KP(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,r=t.shape;ft(r,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}KP.$inject=["eventBus"];var zf=10;function pg(e,t,n){return n||(n="round"),Math[n](e/t)*t}var Sj=1200,Cj=800;function ja(e,t,n){var r=!n||n.active!==!1;this._eventBus=t;var i=this;t.on("diagram.init",Cj,function(){i.setActive(r)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],Sj,function(o){var a=o.originalEvent;if(!(!i.active||a&&Qr(a))){var s=o.context,l=s.gridSnappingContext;l||(l=s.gridSnappingContext={}),["x","y"].forEach(function(c){var f={},d=kj(o,c,e);d&&(f.offset=d);var g=Rj(o,c);g&&q(f,g),Ml(o,c)||i.snapEvent(o,c,f)})}})}ja.prototype.snapEvent=function(e,t,n){var r=this.snapValue(e[t],n);hn(e,t,r)};ja.prototype.getGridSpacing=function(){return zf};ja.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=pg(e,zf);var r,i;return t&&t.min&&(r=t.min,Ze(r)&&(r=pg(r+n,zf,"ceil"),e=Math.max(e,r))),t&&t.max&&(i=t.max,Ze(i)&&(i=pg(i+n,zf,"floor"),e=Math.min(e,i))),e-=n,e};ja.prototype.isActive=function(){return this.active};ja.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};ja.prototype.toggleActive=function(){this.setActive(!this.active)};ja.$inject=["elementRegistry","eventBus","config.gridSnapping"];function Rj(e,t){var n=e.context,r=n.createConstraints,i=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;r&&(Hf(t)?(a.x.min=r.left,a.x.max=r.right):(a.y.min=r.top,a.y.max=r.bottom));var l=i.min,c=i.max;return l&&(Hf(t)?Db(s)?a.x.max=l.left:a.x.min=l.right:Nb(s)?a.y.max=l.top:a.y.min=l.bottom),c&&(Hf(t)?Db(s)?a.x.min=c.left:a.x.max=c.right:Nb(s)?a.y.min=c.top:a.y.max=c.bottom),a[t]}function kj(e,t,n){var r=e.context,i=e.shape,o=r.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&Ze(s[t])||(s||(s=o.snapOffset={}),Ze(s[t])||(s[t]=0),!i)||(n.get(i.id)||(Hf(t)?s[t]+=i[t]+i.width/2:s[t]+=i[t]+i.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=i.width/2:/right/.test(a)&&(s[t]+=i.width/2):/top/.test(a)?s[t]-=i.height/2:/bottom/.test(a)&&(s[t]+=i.height/2)),s[t]}function Hf(e){return e==="x"}function Nb(e){return e.indexOf("n")!==-1}function Db(e){return e.indexOf("w")!==-1}function Ds(e,t){fe.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(r){var i=r.context,o=i.hints||{},a=o.autoResize;if(a){var s=i.shape,l=i.newBounds;Ir(a)?i.newBounds=n.snapComplex(l,a):i.newBounds=n.snapSimple(s,l)}})}Ds.$inject=["eventBus","gridSnapping","modeling"];Oe(Ds,fe);Ds.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Ds.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Ds.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,r=/w/.test(t),i=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),i&&(r?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),q(e,o),e};Ds.prototype.snapVertically=function(e,t){var n=this._gridSnapping,r=/n/.test(t),i=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),r&&(i?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),q(e,o),e};var Pj=2e3;function YP(e,t){e.on(["spaceTool.move","spaceTool.end"],Pj,function(n){var r=n.context;if(r.initialized){var i=r.axis,o;i==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}YP.$inject=["eventBus","gridSnapping"];const Tj={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Ds],gridSnappingSpaceToolBehavior:["type",YP]},Aj={__depends__:[Tj],__init__:["gridSnapping"],gridSnapping:["type",ja]};var Mj=2e3;function qP(e,t,n){e.on("autoPlace",Mj,function(r){var i=r.source,o=Je(i),a=r.shape,s=dk(i,a,n);return["x","y"].forEach(function(l){var c={};s[l]!==o[l]&&(s[l]>o[l]?c.min=s[l]:c.max=s[l],A(a,"bpmn:TextAnnotation")&&(Nj(l)?c.offset=-a.width/2:c.offset=-a.height/2),s[l]=t.snapValue(s[l],c))}),s})}qP.$inject=["eventBus","gridSnapping","elementRegistry"];function Nj(e){return e==="x"}var Dj=1750;function XP(e,t,n){t.on(["create.start","shape.move.start"],Dj,function(r){var i=r.context,o=i.shape,a=e.getRootElement();if(!(!A(o,"bpmn:Participant")||!A(a,"bpmn:Process")||!a.children.length)){var s=i.createConstraints;s&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}XP.$inject=["canvas","eventBus","gridSnapping"];var Oj=3e3;function Yh(e,t,n){fe.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],Oj,function(i){var o=i.context,a=o.connection,s=o.hints||{},l=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||Lj(l)&&n.updateWaypoints(a,r.snapMiddleSegments(l))})}Yh.$inject=["eventBus","gridSnapping","modeling"];Oe(Yh,fe);Yh.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var r=1;r<e.length-2;r++)n=jj(t,e[r],e[r+1]),e[r]=n[0],e[r+1]=n[1];return e};function Lj(e){return e.length>3}function Bj(e){return e==="h"}function Ij(e){return e==="v"}function jj(e,t,n){var r=xo(t,n),i={};return Bj(r)&&(i.y=e.snapValue(t.y)),Ij(r)&&(i.x=e.snapValue(t.x)),("x"in i||"y"in i)&&(t=q({},t,i),n=q({},n,i)),[t,n]}const $j={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",qP],gridSnappingParticipantBehavior:["type",XP],gridSnappingLayoutConnectionBehavior:["type",Yh]},Fj={__depends__:[Aj,$j],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",KP]};var zj=30,QP=30;function Jc(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(r){var i=r.element,o=r.gfx;if(A(i,"bpmn:Lane"))return n._createParticipantHit(i,o);if(A(i,"bpmn:Participant"))return yt(i)?n._createParticipantHit(i,o):n._createDefaultHit(i,o);if(A(i,"bpmn:SubProcess"))return yt(i)?n._createSubProcessHit(i,o):n._createDefaultHit(i,o)})}Jc.$inject=["eventBus","interactionEvents"];Jc.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Jc.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=Mn(e)?{width:zj,height:e.height}:{width:e.width,height:QP};return this._interactionEvents.createBoxHit(t,"all",n),!0};Jc.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:QP}),!0};const Hj={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Jc]};function qh(e){e.invoke(Wl,this)}Oe(qh,Wl);qh.$inject=["injector"];qh.prototype.registerBindings=function(e,t){Wl.prototype.registerBindings.call(this,e,t);function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("selectElements",function(r){var i=r.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("find",function(r){var i=r.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}),n("spaceTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["s","S"],i))return t.trigger("spaceTool"),!0}),n("lassoTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["l","L"],i))return t.trigger("lassoTool"),!0}),n("handTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["h","H"],i))return t.trigger("handTool"),!0}),n("globalConnectTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["c","C"],i))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["e","E"],i))return t.trigger("directEditing"),!0}),n("replaceElement",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["r","R"],i))return t.trigger("replaceElement",i),!0})};const Vj={__depends__:[p0],__init__:["keyboardBindings"],keyboardBindings:["type",qh]};var Wj={moveSpeed:1,moveSpeedAccelerated:10},Uj=1500,Ob="left",Lb="up",Bb="right",Ib="down",Gj={ArrowLeft:Ob,Left:Ob,ArrowUp:Lb,Up:Lb,ArrowRight:Bb,Right:Bb,ArrowDown:Ib,Down:Ib},Kj={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function ZP(e,t,n,r,i){var o=this;this._config=q({},Wj,e||{}),t.addListener(Uj,function(a){var s=a.keyEvent,l=Gj[s.key];if(l&&!t.isCmd(s)){var c=t.isShift(s);return o.moveSelection(l,c),!0}}),this.moveSelection=function(a,s){var l=i.get();if(l.length){var c=this._config[s?"moveSpeedAccelerated":"moveSpeed"],f=Kj[a](c),d=r.allowed("elements.move",{shapes:l});d&&n.moveElements(l,f)}}}ZP.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const Yj={__depends__:[p0,ro],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",ZP]};var jb=10;function ep(e,t,n,r){this._dragging=r,this._rules=t;var i=this;function o(l,c){var f=l.shape,d=l.direction,g=l.resizeConstraints,y;l.delta=c,y=DB(f,d,c),l.newBounds=LB(y,g),l.canExecute=i.canResize(l)}function a(l){var c=l.resizeConstraints,f=l.minBounds;c===void 0&&(f===void 0&&(f=i.computeMinResizeBox(l)),l.resizeConstraints={min:Ue(f)})}function s(l){var c=l.shape,f=l.canExecute,d=l.newBounds;if(f){if(d=$C(d),!qj(c,d))return;n.resizeShape(c,d)}}e.on("resize.start",function(l){a(l.context)}),e.on("resize.move",function(l){var c={x:l.dx,y:l.dy};o(l.context,c)}),e.on("resize.end",function(l){s(l.context)})}ep.prototype.canResize=function(e){var t=this._rules,n=$i(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};ep.prototype.activate=function(e,t,n){var r=this._dragging,i,o;if(typeof n=="string"&&(n={direction:n}),i=q({shape:t},n),o=i.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,JP(t,o),"resize",{autoActivate:!0,cursor:Xj(o),data:{shape:t,context:i}})};ep.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,r,i;return r=e.minDimensions||{width:jb,height:jb},i=Ik(t,e.childrenBoxPadding),BB(n,t,r,i)};ep.$inject=["eventBus","rules","modeling","dragging"];function qj(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function JP(e,t){var n=Je(e),r=Ue(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Xj(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var $b="djs-resizing",Fb="resize-not-ok",Qj=500;function eT(e,t,n){function r(o){var a=o.shape,s=o.newBounds,l=o.frame;l||(l=o.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,$b)),s.width>5&&ke(l,{x:s.x,width:s.width}),s.height>5&&ke(l,{y:s.y,height:s.height}),o.canExecute?St(l).remove(Fb):St(l).add(Fb)}function i(o){var a=o.shape,s=o.frame;s&&En(o.frame),t.removeMarker(a,$b)}e.on("resize.move",Qj,function(o){r(o.context)}),e.on("resize.cleanup",function(o){i(o.context)})}eT.$inject=["eventBus","canvas","previewSupport"];var df=-6,hf=8,mf=20,ku="djs-resizer",Zj=["n","w","s","e","nw","ne","se","sw"];function $a(e,t,n,r){this._resize=r,this._canvas=t;var i=this;e.on("selection.changed",function(o){var a=o.newSelection;i.removeResizers(),a.length===1&&W(a,_r(i.addResizer,i))}),e.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(i.removeResizers(),i.addResizer(a))})}$a.prototype.makeDraggable=function(e,t,n){var r=this._resize;function i(o){Ta(o)&&r.activate(o,e,n)}it.bind(t,"mousedown",i),it.bind(t,"touchstart",i)};$a.prototype._createResizer=function(e,t,n,r){var i=this._getResizersParent(),o=Jj(r),a=Fe("g");St(a).add(ku),St(a).add(ku+"-"+e.id),St(a).add(ku+"-"+r),tt(i,a);var s=Fe("rect");ke(s,{x:-hf/2+o.x,y:-hf/2+o.y,width:hf,height:hf}),St(s).add(ku+"-visual"),tt(a,s);var l=Fe("rect");return ke(l,{x:-mf/2+o.x,y:-mf/2+o.y,width:mf,height:mf}),St(l).add(ku+"-hit"),tt(a,l),Af(a,t,n),a};$a.prototype.createResizer=function(e,t){var n=JP(e,t),r=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,r,t)};$a.prototype.addResizer=function(e){var t=this;jt(e)||!this._resize.canResize({shape:e})||W(Zj,function(n){t.createResizer(e,n)})};$a.prototype.removeResizers=function(){var e=this._getResizersParent();Qd(e)};$a.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};$a.$inject=["eventBus","canvas","selection","resize"];function Jj(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-df:e.indexOf("w")!==-1&&(t.x=df),e.indexOf("s")!==-1?t.y=-df:e.indexOf("n")!==-1&&(t.y=df),t}const tT={__depends__:[oo,Lo,ql],__init__:["resize","resizePreview","resizeHandles"],resize:["type",ep],resizePreview:["type",eT],resizeHandles:["type",$a]};var e$=2e3;function tp(e,t,n,r,i,o,a){this._bpmnFactory=t,this._canvas=n,this._modeling=i,this._textRenderer=a,r.registerProvider(this),e.on("element.dblclick",function(l){s(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){r.isActive()&&r.complete()}),e.on(["shape.remove","connection.remove"],e$,function(l){r.isActive(l.element)&&r.cancel()}),e.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),e.on("directEditing.activate",function(l){o.removeResizers()}),e.on("create.end",500,function(l){var c=l.context,f=c.shape,d=l.context.canExecute,g=l.isTouch;g||d&&(c.hints&&c.hints.createElementsBehavior===!1||s(f))}),e.on("autoPlace.end",500,function(l){s(l.shape)});function s(l,c){(c||ft(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||Mx(l))&&r.activate(l)}}tp.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];tp.prototype.activate=function(e){var t=Xr(e);if(t!==void 0){var n={text:t},r=this.getEditingBBox(e);q(n,r);var i={},o=n.style||{};return q(o,{backgroundColor:null,border:null}),(ft(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Mx(e))&&q(i,{centerVertically:!0}),_s(e)&&(q(i,{autoResize:!0}),q(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),A(e,"bpmn:TextAnnotation")&&(q(i,{resizable:!0,autoResize:!0}),q(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),q(n,{options:i,style:o}),n}};tp.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},o={x:r.x,y:r.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),c=l.fontSize*a,f=l.lineHeight,d=s.fontSize*a,g=s.lineHeight,y={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(A(e,"bpmn:Lane")||r$(e)){var v=Mn(e),x=v?{width:r.height,height:30*a,x:r.x-r.height/2+15*a,y:i.y-30*a/2}:{width:r.width,height:30*a};q(o,x),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:v?"rotate(-90deg)":null})}if(n$(e)){var C=Mn(e),k=C?{width:r.width,height:r.height}:{width:r.height,height:r.width,x:i.x-r.height/2,y:i.y-r.width/2};q(o,k),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:C?null:"rotate(-90deg)"})}(ft(e,["bpmn:Task","bpmn:CallActivity"])||Mx(e))&&(q(o,{width:r.width,height:r.height}),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),t$(e)&&(q(o,{width:r.width,x:r.x}),q(y,{fontSize:d+"px",lineHeight:g,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var R=90*a,E=7*a,b=4*a;if(n.labelTarget&&(q(o,{width:R,height:r.height+E+b,x:i.x-R/2,y:r.y-E}),q(y,{fontSize:c+"px",lineHeight:f,paddingTop:E+"px",paddingBottom:b+"px"})),_s(n)&&!oh(n)&&!Rt(n)){var D=o0(e),I=t.getAbsoluteBBox({x:D.x,y:D.y,width:0,height:0}),z=c+E+b;q(o,{width:R,height:z,x:I.x-R/2,y:I.y-z/2}),q(y,{fontSize:c+"px",lineHeight:f,paddingTop:E+"px",paddingBottom:b+"px"})}return A(e,"bpmn:TextAnnotation")&&(q(o,{width:r.width,height:r.height,minWidth:30*a,minHeight:10*a}),q(y,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:d+"px",lineHeight:g})),{bounds:o,style:y}};tp.prototype.update=function(e,t,n,r){var i,o;A(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),i={x:e.x,y:e.y,width:e.width/o.width*r.width,height:e.height/o.height*r.height}),i$(t)&&(t=null),this._modeling.updateLabel(e,t,i)};function Mx(e){return A(e,"bpmn:SubProcess")&&!yt(e)}function t$(e){return A(e,"bpmn:SubProcess")&&yt(e)}function n$(e){return A(e,"bpmn:Participant")&&!yt(e)}function r$(e){return A(e,"bpmn:Participant")&&yt(e)}function i$(e){return!e||!e.trim()}var zb="djs-element-hidden",Hb="djs-label-hidden";function nT(e,t,n){var r=this,i=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(l){var c=l.active;if(o=c.element.label||c.element,A(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=Fe("g");var f=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),d=r.path=Fe("path");ke(d,{d:f,strokeWidth:2,stroke:o$(o)}),tt(s,d),tt(i,s),Hn(s,o.x,o.y)}A(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,zb):(A(o,"bpmn:Task")||A(o,"bpmn:CallActivity")||A(o,"bpmn:SubProcess")||A(o,"bpmn:Participant")||A(o,"bpmn:Lane"))&&t.addMarker(o,Hb)}),e.on("directEditing.resize",function(l){if(A(o,"bpmn:TextAnnotation")){var c=l.height,f=l.dy,d=Math.max(o.height/a.height*(c+f),0),g=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:d,position:{mx:0,my:0}});ke(r.path,{d:g})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var c=l.active;c&&(t.removeMarker(c.element.label||c.element,zb),t.removeMarker(o,Hb)),o=void 0,a=void 0,s&&(En(s),s=void 0)})}nT.$inject=["eventBus","canvas","pathMap"];function o$(e,t){var n=Ct(e);return n.get("stroke")||t||"black"}const a$={__depends__:[a0,tT,WP],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",tp],labelEditingPreview:["type",nT]};var s$=new Oc("tt");function l$(e){var t=zt('<div class="djs-tooltip-container" />');return Xn(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function u$(e,t,n){Xn(e,{left:t+"px",top:n+"px"})}function Nx(e,t){e.style.display=t===!1?"none":""}var rT="djs-tooltip",fg="."+rT;function br(e,t){this._eventBus=e,this._canvas=t,this._ids=s$,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=l$(t.getContainer());var n=this;Dr.bind(this._tooltipRoot,fg,"mousedown",function(r){r.stopPropagation()}),Dr.bind(this._tooltipRoot,fg,"mouseover",function(r){n.trigger("mouseover",r)}),Dr.bind(this._tooltipRoot,fg,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}br.$inject=["eventBus","canvas"];br.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=q({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};br.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,r=this.get(lr(n,"data-tooltip-id"));r&&(e==="mouseover"&&r.timeout&&this.clearTimeout(r),e==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};br.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};br.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};br.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};br.prototype.remove=function(e){var t=this.get(e);t&&(no(t.html),no(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};br.prototype.show=function(){Nx(this._tooltipRoot)};br.prototype.hide=function(){Nx(this._tooltipRoot,!1)};br.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};br.prototype._addTooltip=function(e){var t=e.id,n=e.html,r,i=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),Ir(n)&&(n=zt(n)),r=zt('<div data-tooltip-id="'+t+'" class="'+rT+'">'),Xn(r,{position:"absolute"}),r.appendChild(n),e.type&&nn(r).add("djs-tooltip-"+e.type),e.className&&nn(r).add(e.className),e.htmlContainer=r,i.appendChild(r),this._tooltips[t]=e,this._updateTooltip(e)};br.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;u$(n,t.x,t.y)};br.prototype._updateTooltipVisibilty=function(e){W(this._tooltips,function(t){var n=t.show,r=t.htmlContainer,i=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(i=!1),Nx(r,i))})};br.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const c$={__init__:["tooltips"],tooltips:["type",br]};var p$="flow elements must be children of pools/participants";function iT(e,t,n){function r(i,o,a){t.add({position:{x:i.x+5,y:i.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(i){var o=i.context,a=o.shape,s=o.target;A(s,"bpmn:Collaboration")&&A(a,"bpmn:FlowNode")&&r(i,n(p$))})}iT.$inject=["eventBus","tooltips","translate"];const f$={__depends__:[c$],__init__:["modelingFeedback"],modelingFeedback:["type",iT]};var d$=500,h$=1250,m$=1500,Ad=Math.round;function g$(e){return{x:e.x+Ad(e.width/2),y:e.y+Ad(e.height/2)}}function oT(e,t,n,r,i){function o(s,l,c,f){return i.allowed("elements.move",{shapes:s,delta:l,position:c,target:f})}e.on("shape.move.start",m$,function(s){var l=s.context,c=s.shape,f=r.get().slice();f.indexOf(c)===-1&&(f=[c]),f=y$(f),q(l,{shapes:f,validatedShapes:f,shape:c})}),e.on("shape.move.start",h$,function(s){var l=s.context,c=l.validatedShapes,f;if(f=l.canExecute=o(c),!f)return!1}),e.on("shape.move.move",d$,function(s){var l=s.context,c=l.validatedShapes,f=s.hover,d={x:s.dx,y:s.dy},g={x:s.x,y:s.y},y;if(y=o(c,d,g,f),l.delta=d,l.canExecute=y,y===null){l.target=null;return}l.target=f}),e.on("shape.move.end",function(s){var l=s.context,c=l.delta,f=l.canExecute,d=f==="attach",g=l.shapes;if(f===!1)return!1;c.x=Ad(c.x),c.y=Ad(c.y),!(c.x===0&&c.y===0)&&n.moveElements(g,c,l.target,{primaryShape:l.shape,attach:d})}),e.on("element.mousedown",function(s){if(Ta(s)){var l=Hl(s);if(!l)throw new Error("must supply DOM mousedown event");return a(l,s.element)}});function a(s,l,c,f){if(In(c)&&(f=c,c=!1),!(l.waypoints||!l.parent)&&!St(s.target).has("djs-hit-no-move")){var d=g$(l);return t.init(s,d,"shape.move",{cursor:"grabbing",autoActivate:c,data:{shape:l,context:f||{}}}),!0}}this.start=a}oT.$inject=["eventBus","dragging","modeling","selection","rules"];function y$(e){var t=jl(e,"id");return ht(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var Vb=499,dg="djs-dragging",Wb="drop-ok",Ub="drop-not-ok",Gb="new-parent",Kb="attach-ok";function aT(e,t,n,r){function i(l){var c=o(l),f=v$(c);return f}function o(l){var c=kc(l,!0),f=c.flatMap(y=>(y.incoming||[]).concat(y.outgoing||[])),d=c.concat(f),g=[...new Set(d)];return g}function a(l,c){[Kb,Wb,Ub,Gb].forEach(function(f){f===c?t.addMarker(l,f):t.removeMarker(l,f)})}function s(l,c,f){r.addDragger(c,l.dragGroup),f&&t.addMarker(c,dg),l.allDraggedElements?l.allDraggedElements.push(c):l.allDraggedElements=[c]}e.on("shape.move.start",Vb,function(l){var c=l.context,f=c.shapes,d=c.allDraggedElements,g=i(f);if(!c.dragGroup){var y=Fe("g");ke(y,n.cls("djs-drag-group",["no-events"]));var v=t.getActiveLayer();tt(v,y),c.dragGroup=y}g.forEach(function(x){r.addDragger(x,c.dragGroup)}),d?d=zv([d,o(f)]):d=o(f),W(d,function(x){t.addMarker(x,dg)}),c.allDraggedElements=d,c.differentParents=x$(f)}),e.on("shape.move.move",Vb,function(l){var c=l.context,f=c.dragGroup,d=c.target,g=c.shape.parent,y=c.canExecute;d&&(y==="attach"?a(d,Kb):c.canExecute&&g&&d.id!==g.id?a(d,Gb):a(d,c.canExecute?Wb:Ub)),Hn(f,l.dx,l.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(l){var c=l.context,f=c.target;f&&a(f,null)}),e.on("shape.move.cleanup",function(l){var c=l.context,f=c.allDraggedElements,d=c.dragGroup;W(f,function(g){t.removeMarker(g,dg)}),d&&En(d)}),this.makeDraggable=s}aT.$inject=["eventBus","canvas","styles","previewSupport"];function v$(e){var t=ht(e,function(n){return jt(n)?At(e,Bi({id:n.source.id}))&&At(e,Bi({id:n.target.id})):!0});return t}function x$(e){return A5(jl(e,function(t){return t.parent&&t.parent.id}))!==1}const _$={__depends__:[ph,ro,l0,oo,Lo,ql],__init__:["move","movePreview"],move:["type",oT],movePreview:["type",aT]};var sT=".djs-palette-toggle",lT=".entry",w$=sT+", "+lT,Wy="djs-palette-",E$="shown",Uy="open",Yb="two-column",b$=1e3;function gn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(r){var i=r.tool;n.updateToolHighlight(i)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}gn.$inject=["eventBus","canvas"];gn.prototype.registerProvider=function(e,t){t||(t=e,e=b$),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};gn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(C$,{})};gn.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};gn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),r=this._container=zt(gn.HTML_MARKUP);n.appendChild(r),nn(n).add(Wy+E$),Dr.bind(r,w$,"click",function(i){var o=i.delegateTarget;if(Xd(o,sT))return e.toggle();e.trigger("click",i)}),it.bind(r,"mousedown",function(i){i.stopPropagation()}),Dr.bind(r,lT,"dragstart",function(i){e.trigger("dragstart",i)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})};gn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};gn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,r=this._eventBus,i,o=nn(n),a=nn(t);"twoColumn"in e?i=e.twoColumn:i=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(Yb,i),a.toggle(Wy+Yb,i),"open"in e&&(o.toggle(Uy,e.open),a.toggle(Wy+Uy,e.open)),r.fire("palette.changed",{twoColumn:i,open:this.isOpen()})};gn.prototype._update=function(){var e=Bt(".djs-palette-entries",this._container),t=this._entries=this.getEntries();qd(e),W(t,function(n,r){var i=n.group||"default",o=Bt("[data-group="+hc(i)+"]",e);o||(o=zt('<div class="group"></div>'),lr(o,"data-group",i),e.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=zt(a);if(o.appendChild(s),!n.separator&&(lr(s,"data-action",r),n.title&&lr(s,"title",n.title),n.className&&S$(s,n.className),n.imageUrl)){var l=zt("<img>");lr(l,"src",n.imageUrl),s.appendChild(l)}}),this.open()};gn.prototype.trigger=function(e,t,n){var r,i,o=t.delegateTarget||t.target;return o?(r=lr(o,"data-action"),i=t.originalEvent||t,this.triggerEntry(r,e,i,n)):t.preventDefault()};gn.prototype.triggerEntry=function(e,t,n,r){var i=this._entries,o,a;if(o=i[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(bn(a)){if(t==="click")return a(n,r)}else if(a[t])return a[t](n,r);n.preventDefault()}};gn.prototype._layoutChanged=function(){this._toggleState({})};gn.prototype._needsCollapse=function(e,t){var n=50,r=Object.keys(t).length*46;return e<r+n};gn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};gn.prototype.open=function(){this._toggleState({open:!0})};gn.prototype.toggle=function(){this.isOpen()?this.close():this.open()};gn.prototype.isActiveTool=function(e){return e&&this._activeTool===e};gn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Bt(".djs-palette-entries",this._container),this._toolsContainer=Bt("[data-group=tools]",t)),n=this._toolsContainer,W(n.children,function(r){var i=r.getAttribute("data-action");if(i){var o=nn(r);i=i.replace("-tool",""),o.contains("entry")&&i===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};gn.prototype.isOpen=function(){return nn(this._container).has(Uy)};gn.prototype._getParentContainer=function(){return this._canvas.getContainer()};gn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function S$(e,t){var n=nn(e),r=ot(t)?t:t.split(/\s+/g);r.forEach(function(i){n.add(i)})}function C$(e,t){var n=t.getPaletteEntries();return bn(n)?n(e):(W(n,function(r,i){e[i]=r}),e)}const R$={__init__:["palette"],palette:["type",gn]};var uT="crosshair";function Os(e,t,n,r,i,o,a){this._selection=i,this._dragging=n,this._mouse=a;var s=this,l={create:function(c){var f=t.getActiveLayer(),d;d=c.frame=Fe("rect"),ke(d,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),tt(f,d)},update:function(c){var f=c.frame,d=c.bbox;ke(f,{x:d.x,y:d.y,width:d.width,height:d.height})},remove:function(c){c.frame&&En(c.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(c){var f=c.originalEvent.target;!c.hover&&!(f instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(c.originalEvent,!0)})}),e.on("lasso.end",0,function(c){var f=c.context,d=hg(c),g=r.filter(function(v){return v}),y=_d(c);s.select(g,d,y?f.selection:[])}),e.on("lasso.start",function(c){var f=c.context;f.bbox=hg(c),l.create(f),f.selection=i.get()}),e.on("lasso.move",function(c){var f=c.context;f.bbox=hg(c),l.update(f)}),e.on("lasso.cleanup",function(c){var f=c.context;l.remove(f)}),e.on("element.mousedown",1500,function(c){if(_d(c))return s.activateLasso(c.originalEvent),!0})}Os.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];Os.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:uT,data:{context:{}}})};Os.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:uT,data:{context:{}},keepSelection:!0})};Os.prototype.select=function(e,t,n=[]){var r=EN(e,t);this._selection.select([...n,...Hv(r)])};Os.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Os.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function hg(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},r;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?r={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?r={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?r={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const k$={__depends__:[Nh,$c],__init__:["lassoTool"],lassoTool:["type",Os]};var mg=1500,cT="grab";function Xl(e,t,n,r,i,o){this._dragging=n,this._mouse=o;var a=this,s=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",mg,function(l){if(mc(l))return a.activateMove(l.originalEvent,!0),!1}),s&&s.addListener(mg,function(l){if(!(!qb(l.keyEvent)||a.isActive())){var c=a._mouse.getLastMoveEvent();a.activateMove(c,!!c)}},"keyboard.keydown"),s&&s.addListener(mg,function(l){!qb(l.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(l){var c=l.originalEvent.target;if(!l.hover&&!(c instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(l.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(l){var c=t.viewbox().scale;t.scroll({dx:l.dx*c,dy:l.dy*c})}),e.on("hand.move.end",function(l){var c=l.context,f=c.reactivate;return!mc(l)&&f&&e.once("hand.move.ended",function(d){a.activateHand(d.originalEvent,!0,!0)}),!1})}Xl.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Xl.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:cT,data:{context:n||{}}})};Xl.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:cT,data:{context:{reactivate:n}}})};Xl.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Xl.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function qb(e){return Pn("Space",e)}const P$={__depends__:[Nh,$c],__init__:["handTool"],handTool:["type",Xl]};var Xb="connect-ok",Qb="connect-not-ok";function Ql(e,t,n,r,i,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(l){var c=l.context,f=l.hover,d=c.canStartConnect=s.canStartConnect(f);d!==null&&(c.startTarget=f,r.addMarker(f,d?Xb:Qb))}),e.on(["global-connect.out","global-connect.cleanup"],function(l){var c=l.context.startTarget,f=l.context.canStartConnect;c&&r.removeMarker(c,f?Xb:Qb)}),e.on(["global-connect.ended"],function(l){var c=l.context,f=c.startTarget,d={x:l.x,y:l.y},g=s.canStartConnect(f);if(g)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,f,d)}),!1})}Ql.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Ql.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};Ql.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};Ql.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};Ql.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const T$={__depends__:[R0,oo,Lo,Nh,$c],globalConnect:["type",Ql]};function Dx(e,t,n,r,i,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=i,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}Dx.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Dx.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,r=this._spaceTool,i=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function l(d,g,y,v,x){function C(k){var R=n.createShape(q({type:d},x));t.start(k,R)}return{group:g,className:y,title:v,action:{dragstart:C,click:C}}}function c(d){var g=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),y=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:g});t.start(d,[g,y],{hints:{autoSelect:[g]}})}function f(d){t.start(d,n.createParticipantShape())}return q(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(d){o.activateHand(d)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(d){i.activateSelection(d)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(d){r.activateSelection(d)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(d){a.start(d)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:c,click:c}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:f,click:f}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};const A$={__depends__:[R$,Mh,RP,k$,P$,T$,sh],__init__:["paletteProvider"],paletteProvider:["type",Dx]};var M$=250;function Ox(e,t,n,r,i){fe.call(this,e);function o(s){var l=s.canExecute.replacements;W(l,function(c){var f=c.oldElementId,d={type:c.newElementType};if(!s.visualReplacements[f]){var g=t.get(f);q(d,{x:g.x,y:g.y});var y=n.createShape(d);r.addShape(y,g.parent);var v=Bt('[data-element-id="'+hc(g.id)+'"]',s.dragGroup);v&&ke(v,{display:"none"});var x=i.addDragger(y,s.dragGroup);s.visualReplacements[f]=x,r.removeShape(y)}})}function a(s){var l=s.visualReplacements;W(l,function(c,f){var d=Bt('[data-element-id="'+hc(f)+'"]',s.dragGroup);d&&ke(d,{display:"inline"}),c.remove(),l[f]&&delete l[f]})}e.on("shape.move.move",M$,function(s){var l=s.context,c=l.canExecute;l.visualReplacements||(l.visualReplacements={}),c&&c.replacements?o(l):a(l)})}Ox.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];Oe(Ox,fe);const N$={__depends__:[ql],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Ox]};var D$=1250,gg=40,O$=20,L$=10,Zb=20,pT=["x","y"],B$=Math.abs;function fT(e){e.on(["connect.hover","connect.move","connect.end"],D$,function(t){var n=t.context,r=n.canExecute,i=n.start,o=n.hover,a=n.source,s=n.target;t.originalEvent&&Qr(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&o&&I$(t,o,z$(o)),o&&F$(r,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=gi(i),ft(o,["bpmn:Event","bpmn:Gateway"])&&Jb(t,gi(o)),ft(o,["bpmn:Task","bpmn:SubProcess"])&&j$(t,o),A(a,"bpmn:BoundaryEvent")&&s===a.host&&$$(t)):dT(r,"bpmn:MessageFlow")?(A(i,"bpmn:Event")&&(n.connectionStart=gi(i)),A(o,"bpmn:Event")&&Jb(t,gi(o))):n.connectionStart=n.initialConnectionStart)})}fT.$inject=["eventBus"];function I$(e,t,n){pT.forEach(function(r){var i=hT(r,t);e[r]<t[r]+n?hn(e,r,t[r]+n):e[r]>t[r]+i-n&&hn(e,r,t[r]+i-n)})}function j$(e,t){var n=gi(t);pT.forEach(function(r){H$(e,t,r)&&hn(e,r,n[r])})}function $$(e){var t=e.context,n=t.source,r=t.target;if(!V$(t)){var i=gi(n),o=tr(i,r,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var l=e[s],c;B$(l-i[s])<gg&&(l>i[s]?c=i[s]+gg:c=i[s]-gg,hn(e,s,c))})}}function Jb(e,t){hn(e,"x",t.x),hn(e,"y",t.y)}function dT(e,t){return e&&e.type===t}function F$(e,t){return ba(t,function(n){return dT(e,n)})}function hT(e,t){return e==="x"?t.width:t.height}function z$(e){return A(e,"bpmn:Task")?L$:O$}function H$(e,t,n){return e[n]>t[n]+Zb&&e[n]<t[n]+hT(n,t)-Zb}function V$(e){var t=e.hover,n=e.source;return t&&n&&t===n}function Fa(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Fa.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Fa.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Fa.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Fa.prototype.getSnapLocations=function(){return this._snapLocations};Fa.prototype.setSnapLocations=function(e){this._snapLocations=e};Fa.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Xh,n.initDefaults(this._defaultSnaps)),n};function Xh(){this._snapValues={}}Xh.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Xh.prototype.snap=function(e,t,n,r){var i=this._snapValues[t];return i&&iB(e[n],i[n],r)};Xh.prototype.initDefaults=function(e){var t=this;W(e||{},function(n,r){W(n,function(i){t.add(r,i)})})};var W$=1250;function ao(e,t,n){var r=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(i){r.initSnap(i)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],W$,function(i){var o=i.context,a=o.shape,s=o.snapContext,l=o.target;if(!(i.originalEvent&&Qr(i.originalEvent))&&!(Ml(i)||!l)){var c=s.pointsForTarget(l);c.initialized||(c=r.addSnapTargetPoints(c,a,l),c.initialized=!0),n.snap(i,c)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}ao.$inject=["elementRegistry","eventBus","snapping"];ao.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,r=n.shape,i=n.snapContext;i||(i=n.snapContext=new Fa);var o;t.get(r.id)?o=gi(r,e):o={x:e.x+gi(r).x,y:e.y+gi(r).y};var a={x:o.x-r.width/2,y:o.y-r.height/2},s={x:o.x+r.width/2,y:o.y+r.height/2};return i.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Rt(r)||(i.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),i.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),i};ao.prototype.addSnapTargetPoints=function(e,t,n){var r=this.getSnapTargets(t,n);return W(r,function(i){if(Rt(i)){Rt(t)&&e.add("mid",gi(i));return}if(jt(i)){if(i.waypoints.length<3)return;var o=i.waypoints.slice(1,-1);W(o,function(a){e.add("mid",a)});return}e.add("mid",gi(i))}),!Ze(t.x)||!Ze(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",gi(t)),e};ao.prototype.getSnapTargets=function(e,t){return Tk(t).filter(function(n){return!U$(n)})};function U$(e){return!!e.hidden}var eS=1500;function Zl(e,t){t.invoke(ao,this),e.on(["create.move","create.end"],eS,q$),e.on(["create.move","create.end","shape.move.move","shape.move.end"],eS,function(n){var r=n.context,i=r.canExecute,o=r.target,a=i&&(i==="attach"||i.attach);a&&!Ml(n)&&G$(n,o)})}Oe(Zl,ao);Zl.$inject=["eventBus","injector"];Zl.prototype.initSnap=function(e){var t=ao.prototype.initSnap.call(this,e),n=e.shape,r=!!this._elementRegistry.get(n.id);return W(n.outgoing,function(i){var o=i.waypoints[0];o=o.original||o,t.setSnapOrigin(i.id+"-docking",nS(o,r,e))}),W(n.incoming,function(i){var o=i.waypoints[i.waypoints.length-1];o=o.original||o,t.setSnapOrigin(i.id+"-docking",nS(o,r,e))}),A(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};Zl.prototype.addSnapTargetPoints=function(e,t,n){ao.prototype.addSnapTargetPoints.call(this,e,t,n);var r=this.getSnapTargets(t,n);W(r,function(o){(Y$(o)||K$([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",kk(o)),e.add("bottom-right",Pk(o)))});var i=this._elementRegistry;return W(t.incoming,function(o){if(i.get(t.id)){tS(r,o.source)||e.add("mid",Je(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),W(t.outgoing,function(o){if(i.get(t.id)){tS(r,o.target)||e.add("mid",Je(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),A(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};Zl.prototype.getSnapTargets=function(e,t){return ao.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!A(n,"bpmn:Lane")})};function G$(e,t){var n=Ue(t),r=tP(e,t),i=e.context,o=i.shape,a;o.parent?a={x:0,y:0}:a=Je(o),/top/.test(r)?hn(e,"y",n.top-a.y):/bottom/.test(r)&&hn(e,"y",n.bottom-a.y),/left/.test(r)?hn(e,"x",n.left-a.x):/right/.test(r)&&hn(e,"x",n.right-a.x)}function K$(e,t){return e.every(function(n){return A(n,t)})}function Y$(e){return A(e,"bpmn:SubProcess")&&yt(e)?!0:A(e,"bpmn:Participant")}function q$(e){var t=e.context,n=t.createConstraints;if(n){var r=n.top,i=n.right,o=n.bottom,a=n.left;(a&&a>=e.x||i&&i<=e.x)&&hn(e,"x",e.x),(r&&r>=e.y||o&&o<=e.y)&&hn(e,"y",e.y)}}function tS(e,t){return e.indexOf(t)!==-1}function nS(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var X$=1250;function np(e,t){var n=this;e.on(["resize.start"],function(r){n.initSnap(r)}),e.on(["resize.move","resize.end"],X$,function(r){var i=r.context,o=i.shape,a=o.parent,s=i.direction,l=i.snapContext;if(!(r.originalEvent&&Qr(r.originalEvent))&&!Ml(r)){var c=l.pointsForTarget(a);c.initialized||(c=n.addSnapTargetPoints(c,o,a,s),c.initialized=!0),J$(s)&&hn(r,"x",r.x),e7(s)&&hn(r,"y",r.y),t.snap(r,c)}}),e.on(["resize.cleanup"],function(){t.hide()})}np.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.direction,i=t.snapContext;i||(i=t.snapContext=new Fa);var o=mT(n,r);return i.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),i};np.prototype.addSnapTargetPoints=function(e,t,n,r){var i=this.getSnapTargets(t,n);return W(i,function(o){e.add("corner",Pk(o)),e.add("corner",kk(o))}),e.add("corner",mT(t,r)),e};np.$inject=["eventBus","snapping"];np.prototype.getSnapTargets=function(e,t){return Tk(t).filter(function(n){return!Q$(n,e)&&!jt(n)&&!Z$(n)&&!Rt(n)})};function mT(e,t){var n=Je(e),r=Ue(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Q$(e,t){return e.host===t}function Z$(e){return!!e.hidden}function J$(e){return e==="n"||e==="s"}function e7(e){return e==="e"||e==="w"}var t7=7,n7=1e3;function za(e){this._canvas=e,this._asyncHide=EC(_r(this.hide,this),n7)}za.$inject=["canvas"];za.prototype.snap=function(e,t){var n=e.context,r=n.snapContext,i=r.getSnapLocations(),o={x:Ml(e,"x"),y:Ml(e,"y")};W(i,function(a){var s=r.getSnapOrigin(a),l={x:e.x+s.x,y:e.y+s.y};if(W(["x","y"],function(c){var f;o[c]||(f=t.snap(l,a,c,t7),f!==void 0&&(o[c]={value:f,originValue:f-s[c]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),W(["x","y"],function(a){var s=o[a];In(s)&&hn(e,a,s.originValue)})};za.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Fe("path");return ke(n,{d:"M0,0 L0,0"}),St(n).add("djs-snap-line"),tt(t,n),{update:function(r){Ze(r)?e==="horizontal"?ke(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):ke(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):ke(n,{display:"none"})}}};za.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};za.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};za.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};za.prototype.hide=function(){W(this._snapLines,function(e){e.update()})};const r7={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",ao],resizeSnapping:["type",np],snapping:["type",za]},i7={__depends__:[r7],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",fT],createMoveSnapping:["type",Zl]};var gT=300;function nt(e,t,n,r){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=Bt(nt.INPUT_SELECTOR,this._container),this._resultsContainer=Bt(nt.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}nt.$inject=["canvas","eventBus","selection","translate"];nt.prototype._bindEvents=function(){var e=this;function t(n,r,i,o){e._eventMaps.push({el:n,type:i,listener:Dr.bind(n,r,i,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,nt.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,nt.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,nt.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,nt.INPUT_SELECTOR,"keydown",function(n){Pn("ArrowUp",n)&&n.preventDefault(),Pn("ArrowDown",n)&&n.preventDefault()}),t(this._container,nt.INPUT_SELECTOR,"keyup",function(n){if(Pn("Escape",n))return e.close();if(Pn("Enter",n)){var r=e._getCurrentResult();return r?e._select(r):e.close(!1)}if(Pn("ArrowUp",n))return e._scrollToDirection(!0);if(Pn("ArrowDown",n))return e._scrollToDirection();Pn(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};nt.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Dr.unbind(e.el,e.type,e.listener)})};nt.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(i){return!t._canvas.getRootElements().includes(i.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(i){var o=i.element.id,a=t._createResultNode(i,o);t._results[o]={element:i.element,node:a}});var r=Bt(nt.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}};nt.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};nt.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<r&&(this._resultsContainer.scrollTop=r)}};nt.prototype._clearResults=function(){qd(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};nt.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")};nt.prototype._getCurrentResult=function(){return Bt(nt.RESULT_SELECTED_SELECTOR,this._resultsContainer)};nt.prototype._createResultNode=function(e,t){var n=zt(nt.RESULT_HTML);return e.primaryTokens.length>0&&rS(n,e.primaryTokens,nt.RESULT_PRIMARY_HTML),rS(n,e.secondaryTokens,nt.RESULT_SECONDARY_HTML),lr(n,nt.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};nt.prototype.registerProvider=function(e){this._searchProvider=e};nt.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,nn(this._canvas.getContainer()).add("djs-search-open"),nn(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};nt.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,nn(this._canvas.getContainer()).remove("djs-search-open"),nn(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))};nt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};nt.prototype.isOpen=function(){return this._open};nt.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&nn(t).remove(nt.RESULT_SELECTED_CLASS);var n=lr(e,nt.RESULT_ID_ATTRIBUTE),r=this._results[n].element;nn(e).add(nt.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(r,{top:gT}),this._selection.select(r),this._canvas.addMarker(r,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",r)}};nt.prototype._select=function(e){var t=lr(e,nt.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:gT}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};nt.prototype._getBoxHtml=function(){const e=zt(nt.BOX_HTML),t=Bt(nt.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function rS(e,t,n){var r=o7(t),i=zt(n);i.innerHTML=r,e.appendChild(i)}function o7(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+nt.RESULT_HIGHLIGHT_CLASS+'">'+wy(n.matched)+"</b>":t+=wy(n.normal)}),t!==""?t:null}nt.CONTAINER_SELECTOR=".djs-search-container";nt.INPUT_SELECTOR=".djs-search-input input";nt.RESULTS_CONTAINER_SELECTOR=".djs-search-results";nt.RESULT_SELECTOR=".djs-search-result";nt.RESULT_SELECTED_CLASS="djs-search-result-selected";nt.RESULT_SELECTED_SELECTOR="."+nt.RESULT_SELECTED_CLASS;nt.RESULT_ID_ATTRIBUTE="data-result-id";nt.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";nt.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;nt.RESULT_HTML='<div class="djs-search-result"></div>';nt.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';nt.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const a7={__depends__:[sh,uh,ro],searchPad:["type",nt]};function Lx(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}Lx.$inject=["elementRegistry","searchPad","canvas"];Lx.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(r){return!Rt(r)&&!t.includes(r)});return n.reduce(function(r,i){var o=Xr(i),a=aS(o,e),s=aS(i.id,e);return Md(a)||Md(s)?[...r,{primaryTokens:a,secondaryTokens:s,element:i}]:r},[]).sort(function(r,i){return iS(r.primaryTokens,i.primaryTokens)||iS(r.secondaryTokens,i.secondaryTokens)||oS(Xr(r.element),Xr(i.element))||oS(r.element.id,i.element.id)}).map(function(r){return{element:r.element,primaryTokens:r.primaryTokens.map(function(i){return _i(i,["index"])}),secondaryTokens:r.secondaryTokens.map(function(i){return _i(i,["index"])})}})};function Gy(e){return"matched"in e}function Md(e){return e.find(Gy)}function iS(e,t){const n=Md(e),r=Md(t);if(n&&!r)return-1;if(!n&&r)return 1;if(!n&&!r)return 0;const i=e.find(Gy),o=t.find(Gy);return i.index<o.index?-1:i.index>o.index?1:0}function oS(e="",t=""){return e.localeCompare(t)}function aS(e,t){var n=[],r=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var i=e.indexOf(t);return i>-1?(i!==0&&n.push({normal:r.slice(0,i),index:0}),n.push({matched:r.slice(i,i+t.length),index:i}),t.length+i<e.length&&n.push({normal:r.slice(i+t.length),index:i+t.length})):n.push({normal:r,index:0}),n}const s7={__depends__:[a7],__init__:["bpmnSearch"],bpmnSearch:["type",Lx]};var l7='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Ji(e){Dc.call(this,e)}Oe(Ji,Dc);Ji.Viewer=Aa;Ji.NavigatedViewer=gc;Ji.prototype.createDiagram=function(){return this.importXML(l7)};Ji.prototype._interactionModules=[OR,jR,zR];Ji.prototype._modelingModules=[yL,w0,FL,OL,aB,R0,fB,gj,_P,Mh,_j,bj,Fj,Hj,Vj,Yj,a$,VP,f$,_$,A$,N$,tT,i7,s7];Ji.prototype._modules=[].concat(Aa.prototype._modules,Ji.prototype._interactionModules,Ji.prototype._modelingModules);const u7=({processId:e,onNavigate:t})=>{const n=De.useRef(null),r=De.useRef(null),[i,o]=De.useState("New Process"),[a,s]=De.useState(null),[l,c]=De.useState(""),[f,d]=De.useState(""),[g,y]=De.useState(2),[v,x]=De.useState(""),[C,k]=De.useState(""),[R,E]=De.useState(!1),[b,D]=De.useState(12),[I,z]=De.useState(!1),[L,Q]=De.useState("#000000"),[Y,G]=De.useState("transparent"),[ae,oe]=De.useState(12),[Ce,kt]=De.useState("#fff2cc"),[Ge,Ke]=De.useState("#d6b656"),[ye,je]=De.useState(1),[ue,ve]=De.useState(""),[X,Z]=De.useState(!1),[se,he]=De.useState(!1),[B,w]=De.useState(!0),P=De.useRef(!1),[F,K]=De.useState(""),[le,Me]=De.useState(""),we=["#EA4335","#E91E63","#9C27B0","#673AB7","#3F51B5","#4285F4","#03A9F4","#00BCD4","#009688","#34A853","#8BC34A","#CDDC39","#FBBC05","#FF9800"];De.useEffect(()=>{const ee=new Ji({container:n.current,keyboard:{bindTo:document}});r.current=ee,w5(n.current);try{const Ie=ee.get("eventBus");console.log("EventBus retrieved, registering resize interceptor..."),Ie.on("rule.call",9999,function(Lt){if(Lt.rule==="elements.resize"||Lt.rule==="shape.resize")return!0}),console.log("Resize interceptor registered.")}catch(Ie){console.error("Failed to register resize interceptor:",Ie)}(async()=>{let Ie="";if(e){const _t=await(await fetch(`${Kt}/processes/${e}`)).json();o(_t.name),Ie=_t.xml_content}else Ie='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="173" y="102" width="36" height="36"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';try{await ee.importXML(Ie),ee.get("canvas").zoom("fit-viewport"),Z(!1),setTimeout(()=>{if(!n.current)return;const Lt=n.current.querySelector(".djs-palette-entries");if(Lt&&!Lt.querySelector(".custom-sticky-tool")){const _t=document.createElement("div");_t.className="group custom-sticky-tool";const wt=document.createElement("div");wt.className="entry",wt.innerHTML='<div style="font-family: serif; font-weight: bold; font-size: 18px;">T</div>',wt.title="",wt.style.cursor="pointer",wt.draggable=!0;const ct=Gn=>{const Cn=ee.get("elementFactory"),Nn=ee.get("create"),oi=ee.get("bpmnFactory"),fr=Cn.createShape({type:"bpmn:Group"}),Pi=oi.create("bpmn:Documentation",{text:JSON.stringify({noteColor:"#fff2cc",borderColor:"#d6b656",text:"New Note",htmlContent:"New Note"})});fr.businessObject.documentation=[Pi],fr.width=200,fr.height=200,Nn.start(Gn,fr)};wt.addEventListener("click",ct),wt.addEventListener("dragstart",ct),_t.appendChild(wt),Lt.appendChild(_t)}},500)}catch(Lt){console.error(Lt)}})(),ee.on("selection.changed",Ie=>{const Lt=Ie.newSelection;if(Lt.length===1){w(!0);const _t=Lt[0];s(_t),K(_t.width),Me(_t.height),k(_t.businessObject.name||"");const wt=_t.businessObject.documentation;if(wt&&wt.length>0&&wt[0].text)try{const ct=JSON.parse(wt[0].text);c(ct.piTag||""),d(ct.piUnit||""),y(ct.piPrecision!==void 0?ct.piPrecision:2),x(ct.targetUrl||""),he(ct.isFinalEnd||!1),E(ct.alwaysOn||!1),D(ct.textFontSize||12),z(ct.textBold||!1),Q(ct.textColor||"#000000"),G(ct.textBgColor||"transparent"),oe(ct.nameFontSize||12),kt(ct.noteColor||"#fff2cc"),Ke(ct.borderColor||"#d6b656"),je(ct.noteOpacity!==void 0?ct.noteOpacity:1),ve(ct.htmlContent||"")}catch{c(""),d(""),y(2),x(""),he(!1),E(!1),D(12),z(!1),Q("#000000"),G("transparent"),oe(12),kt("#fff2cc"),Ke("#d6b656"),je(1),ve("")}else c(""),d(""),y(2),x(""),he(!1),E(!1),D(12),z(!1),Q("#000000"),G("transparent"),oe(12),kt("#fff2cc"),Ke("#d6b656"),je(1),ve("")}else w(!1),s(null),k(""),c(""),d(""),y(2),x(""),he(!1),E(!1),D(12),z(!1),Q("#000000"),G("transparent"),oe(12),kt("#fff2cc"),Ke("#d6b656"),je(1),ve("")}),ee.on("element.changed",Ie=>{a&&Ie.element.id===a.id&&k(Ie.element.businessObject.name||"")}),ee.on("commandStack.changed",()=>{Z(!0)}),ee.on("element.dblclick",1e4,Ie=>{if(Ie.element.type==="bpmn:Group")return!1});const Dt=Ie=>{Ie.preventDefault();const Lt=ee.get("canvas"),_t=Lt.zoom(),wt=Ie.deltaY>0?.995:1.005;if(n.current){const ct=n.current.getBoundingClientRect(),Gn=Ie.clientX-ct.left,Cn=Ie.clientY-ct.top;Lt.zoom(_t*wt,{x:Gn,y:Cn})}},Se=n.current;return Se.addEventListener("wheel",Dt),()=>{Se.removeEventListener("wheel",Dt),ee.destroy()}},[e]);const ce=()=>{X?confirm("")&&t("dashboard"):t("dashboard")},Ve=async()=>{const{xml:ee}=await r.current.saveXML({format:!0});await fetch(`${Kt}/processes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,name:i,xml_content:ee})}),Z(!1),alert("")},vt=()=>{a&&r.current&&r.current.get("modeling").resizeShape(a,{x:a.x,y:a.y,width:Number(F),height:Number(le)})},Qe=ee=>{k(ee),a&&r.current&&r.current.get("modeling").updateLabel(a,ee)},xt=(ee,Xe,Dt,Se)=>{if(!Xe||!Se)return;const Lt=document.createElement("canvas").getContext("2d");Lt.font=`bold ${Dt}px Arial, sans-serif`;const wt=Lt.measureText(Xe).width;ee.width,ee.height,ee.type.includes("Task")&&wt+40>ee.width},gt=ee=>{const Xe={piTag:ee.piTag!==void 0?ee.piTag:l,piUnit:ee.piUnit!==void 0?ee.piUnit:f,piPrecision:ee.piPrecision!==void 0?ee.piPrecision:g,targetUrl:ee.targetUrl!==void 0?ee.targetUrl:v,isFinalEnd:ee.isFinalEnd!==void 0?ee.isFinalEnd:se,alwaysOn:ee.alwaysOn!==void 0?ee.alwaysOn:R,textFontSize:ee.textFontSize!==void 0?ee.textFontSize:b,textBold:ee.textBold!==void 0?ee.textBold:I,textColor:ee.textColor!==void 0?ee.textColor:L,textBgColor:ee.textBgColor!==void 0?ee.textBgColor:Y,nameFontSize:ee.nameFontSize!==void 0?ee.nameFontSize:ae,noteColor:ee.noteColor!==void 0?ee.noteColor:Ce,borderColor:ee.borderColor!==void 0?ee.borderColor:Ge,noteOpacity:ee.noteOpacity!==void 0?ee.noteOpacity:ye,htmlContent:ee.htmlContent!==void 0?ee.htmlContent:ue};if(c(Xe.piTag),d(Xe.piUnit),y(Xe.piPrecision),x(Xe.targetUrl),he(Xe.isFinalEnd),E(Xe.alwaysOn),D(Xe.textFontSize),z(Xe.textBold),Q(Xe.textColor),G(Xe.textBgColor),oe(Xe.nameFontSize),kt(Xe.noteColor),Ke(Xe.borderColor),je(Xe.noteOpacity),ve(Xe.htmlContent),a&&r.current){const Dt=r.current.get("modeling"),Se=r.current.get("bpmnFactory"),Ie=r.current.get("elementRegistry");if(Xe.isFinalEnd&&a.type==="bpmn:EndEvent"){const _t=Ie.filter(ct=>ct.type==="bpmn:EndEvent"&&ct.id!==a.id);let wt=!1;_t.forEach(ct=>{const Gn=ct.businessObject.documentation;if(Gn&&Gn.length>0&&Gn[0].text)try{const Cn=JSON.parse(Gn[0].text);if(Cn.isFinalEnd){Cn.isFinalEnd=!1;const Nn=Se.create("bpmn:Documentation",{text:JSON.stringify(Cn)});Dt.updateProperties(ct,{documentation:[Nn]}),wt=!0}}catch{}}),wt&&alert(" End Event ")}const Lt=Se.create("bpmn:Documentation",{text:JSON.stringify(Xe)});Dt.updateProperties(a,{documentation:[Lt]}),xt(a,C,Xe.nameFontSize,Dt)}},ze=ee=>{a&&r.current&&r.current.get("modeling").setColor(a,{stroke:ee,fill:b5(ee,.2)})};return De.useEffect(()=>{if(!r.current)return;const ee=()=>{const Dt=r.current.get("elementRegistry"),Se=r.current.get("canvas");Dt.forEach(Ie=>{const Lt=Ie.businessObject.documentation;if(Lt&&Lt.length>0&&Lt[0].text)try{const _t=JSON.parse(Lt[0].text),wt=Se.getGraphics(Ie);if(Ie.type==="bpmn:Group"){const ct=wt.querySelector("text"),Gn=wt.querySelector("path"),Cn=wt.querySelector("rect");ct&&(ct.style.display="block"),Gn&&(Gn.style.display="block"),Cn&&(Cn.style.display="block");const Nn=wt.querySelector(".sticky-bg");Nn&&Nn.remove();const oi=wt.querySelector(".sticky-fo");if(oi&&oi.remove(),_t.noteColor||_t.htmlContent){ct&&(ct.style.display="none"),Gn&&(Gn.style.display="none"),Cn&&(Cn.style.display="none");const fr=Ie.width||300,Pi=Ie.height||300,zr=document.createElementNS("http://www.w3.org/2000/svg","rect");zr.classList.add("sticky-bg"),zr.setAttribute("width",fr),zr.setAttribute("height",Pi),zr.setAttribute("fill",_t.noteColor||"transparent"),zr.setAttribute("stroke",_t.borderColor||"transparent"),zr.setAttribute("fill-opacity",_t.noteOpacity!==void 0?_t.noteOpacity:1),zr.setAttribute("stroke-width","1"),wt.prepend(zr);const $n=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");$n.classList.add("sticky-fo"),$n.setAttribute("width",fr),$n.setAttribute("height",Pi),$n.setAttribute("x",0),$n.setAttribute("y",0);const Ye=document.createElement("div");Ye.style.width="100%",Ye.style.height="100%",Ye.style.padding="10px",Ye.style.boxSizing="border-box",Ye.style.overflow="hidden",Ye.style.fontSize=`${_t.textFontSize||12}px`,Ye.style.fontWeight=_t.textBold?"bold":"normal",Ye.style.color=_t.textColor||"#000000",Ye.style.fontFamily="Arial, sans-serif",Ye.style.whiteSpace="pre-wrap",Ye.style.wordBreak="break-word",Ye.innerHTML=_t.htmlContent||(Lt[0].text?JSON.parse(Lt[0].text).text:"")||"",$n.appendChild(Ye),wt.appendChild($n)}}if(_t.nameFontSize){const ct=wt.querySelector(".djs-label");ct&&(ct.style.fontSize=`${_t.nameFontSize}px`)}}catch{}})},Xe=r.current.get("eventBus");return Xe.on("element.changed",ee),Xe.on("import.done",ee),()=>{Xe.off("element.changed",ee),Xe.off("import.done",ee)}},[r.current]),H.jsxs("div",{className:"flex h-full flex-col bg-[#121212]",children:[H.jsxs("div",{className:"bg-[#1e1e1e] px-6 py-3 flex justify-between items-center border-b border-white/5",children:[H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsxs("button",{onClick:ce,className:"text-white/60 hover:text-white transition flex items-center gap-1",children:[H.jsx("span",{className:"text-lg",children:""})," "]}),H.jsx("input",{value:i,onChange:ee=>{o(ee.target.value),Z(!0)},className:"bg-[#2d2d2d] text-white px-4 py-1.5 rounded-full border-none outline-none focus:ring-2 focus:ring-[#8ab4f8]",placeholder:""}),X&&H.jsx("span",{className:"text-[#f28b82] text-xs font-medium animate-pulse",children:" "})]}),H.jsxs("div",{className:"flex gap-3 items-center",children:[H.jsx("button",{onClick:()=>window.open("AboutBPMN.md","_blank"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full font-bold transition flex items-center justify-center text-sm",title:"BPMN ",children:"?"}),H.jsx("button",{onClick:Ve,className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-1 rounded-full font-medium shadow-sm transition text-sm",children:""}),H.jsx("button",{onClick:()=>w(!B),className:`bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 w-8 h-8 rounded-full transition flex items-center justify-center ${B?"":"text-[#8ab4f8]"}`,title:B?"":"",children:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})})]})]}),H.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[H.jsx("div",{className:"flex-1 relative bg-white",ref:n}),H.jsxs("div",{className:`bg-[#1e1e1e] border-l border-white/5 overflow-y-auto transition-all duration-300 ease-in-out ${B?"w-80 p-6 opacity-100":"w-0 p-0 opacity-0 border-none"}`,children:[H.jsx("h3",{className:"font-medium text-white/90 mb-6 text-lg",children:""}),a?H.jsxs("div",{children:[a.type!=="bpmn:Group"&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Name)"}),H.jsx("input",{value:C,onChange:ee=>Qe(ee.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:"..."}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("span",{className:"text-white/60 text-xs",children:""}),H.jsx("select",{value:ae,onChange:ee=>gt({nameFontSize:parseInt(ee.target.value)}),className:"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-xs outline-none",children:[12,14,16,18,20,24,30,36].map(ee=>H.jsxs("option",{value:ee,children:[ee,"px"]},ee))})]})]}),(a.type.includes("Task")||a.type==="bpmn:Participant")&&H.jsxs("div",{className:"mb-5 border-t border-white/10 pt-4",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Size)"}),H.jsxs("div",{className:"flex gap-2",children:[H.jsxs("div",{className:"flex-1",children:[H.jsx("span",{className:"text-white/60 text-xs block mb-1",children:" (Width)"}),H.jsx("input",{type:"number",value:F,onChange:ee=>K(ee.target.value),onBlur:vt,onKeyDown:ee=>ee.key==="Enter"&&vt(),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm"})]}),H.jsxs("div",{className:"flex-1",children:[H.jsx("span",{className:"text-white/60 text-xs block mb-1",children:" (Height)"}),H.jsx("input",{type:"number",value:le,onChange:ee=>Me(ee.target.value),onBlur:vt,onKeyDown:ee=>ee.key==="Enter"&&vt(),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-2 py-1 text-white outline-none text-sm"})]})]})]}),a.type==="bpmn:Group"&&H.jsxs("div",{className:"mb-5 border-t border-white/10 pt-4",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Sticky Note)"}),H.jsxs("div",{className:"mb-3",children:[H.jsx("span",{className:"text-white/60 text-sm block mb-1",children:""}),H.jsxs("div",{className:"flex gap-1 flex-wrap",children:[["#fff2cc","#fce5cd","#e6b8af","#d9ead3","#c9daf8","#d0e0e3","#ead1dc","#ffffff","transparent"].map(ee=>H.jsx("button",{onClick:()=>gt({noteColor:ee}),className:`w-6 h-6 rounded border ${Ce===ee?"border-white scale-110":"border-white/10"}`,style:{backgroundColor:ee},title:ee},ee)),H.jsx("input",{type:"color",value:Ce,onChange:ee=>gt({noteColor:ee.target.value}),className:"w-6 h-6 p-0 border-0 rounded overflow-hidden"})]})]}),H.jsxs("div",{className:"mb-3",children:[H.jsx("span",{className:"text-white/60 text-sm block mb-1",children:""}),H.jsx("div",{className:"flex gap-1 flex-wrap",children:["#d6b656","#e69138","#cc0000","#6aa84f","#3c78d8","#45818e","#a64d79","#000000","transparent"].map(ee=>H.jsx("button",{onClick:()=>gt({borderColor:ee}),className:`w-6 h-6 rounded border ${Ge===ee?"border-white scale-110":"border-white/10"}`,style:{backgroundColor:ee},title:ee},ee))})]}),H.jsxs("div",{className:"mb-4",children:[H.jsxs("div",{className:"flex justify-between mb-1",children:[H.jsx("span",{className:"text-white/60 text-sm",children:""}),H.jsxs("span",{className:"text-white/80 text-xs",children:[Math.round(ye*100),"%"]})]}),H.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:ye,onChange:ee=>gt({noteOpacity:parseFloat(ee.target.value)}),className:"w-full accent-[#8ab4f8] h-1 bg-white/10 rounded-lg appearance-none cursor-pointer"})]}),H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider border-t border-white/10 pt-4",children:" (Style)"}),H.jsxs("div",{className:"flex items-center justify-between mb-2",children:[H.jsx("span",{className:"text-white/60 text-sm",children:""}),H.jsx("select",{value:b,onChange:ee=>gt({textFontSize:parseInt(ee.target.value)}),className:"bg-[#2d2d2d] text-white border border-white/10 rounded px-2 py-1 text-sm outline-none",children:[12,14,16,18,20,24,30,36,48,64].map(ee=>H.jsxs("option",{value:ee,children:[ee,"px"]},ee))})]}),H.jsxs("div",{className:"mt-4 border-t border-white/10 pt-4",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Content)"}),H.jsxs("div",{className:"bg-[#2d2d2d] rounded-lg border border-white/10 p-2",children:[H.jsxs("div",{className:"flex gap-2 mb-2 border-b border-white/10 pb-2 flex-wrap",children:[H.jsx("button",{onClick:()=>{document.execCommand("bold",!1,null);const ee=document.getElementById("sticky-wysiwyg");ee&&(ve(ee.innerHTML),gt({htmlContent:ee.innerHTML}))},className:"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-bold",children:"B"}),H.jsx("button",{onClick:()=>{document.execCommand("underline",!1,null);const ee=document.getElementById("sticky-wysiwyg");ee&&(ve(ee.innerHTML),gt({htmlContent:ee.innerHTML}))},className:"bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded font-medium underline",children:"U"}),H.jsx("button",{onClick:()=>{document.execCommand("hiliteColor",!1,"#ffff00");const ee=document.getElementById("sticky-wysiwyg");ee&&(ve(ee.innerHTML),gt({htmlContent:ee.innerHTML}))},className:"bg-[#fbbc04] hover:bg-[#fdd663] text-black text-xs px-2 py-1 rounded font-medium",children:"Highlight"}),H.jsx("div",{className:"flex gap-1 items-center border-l border-white/10 pl-2",children:["#000000","#ff0000","#0000ff","#ffffff"].map(ee=>H.jsx("button",{onClick:()=>{document.execCommand("foreColor",!1,ee);const Xe=document.getElementById("sticky-wysiwyg");Xe&&(ve(Xe.innerHTML),gt({htmlContent:Xe.innerHTML}))},className:"w-4 h-4 rounded-full border border-white/20 hover:scale-110 transition",style:{backgroundColor:ee}},ee))})]}),H.jsx("div",{id:"sticky-wysiwyg",contentEditable:!0,className:"w-full bg-white text-black text-sm outline-none min-h-[100px] p-2 rounded-t mb-1 overflow-auto",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:ue},onCompositionStart:()=>{P.current=!0},onCompositionEnd:ee=>{P.current=!1,ve(ee.currentTarget.innerHTML),gt({htmlContent:ee.currentTarget.innerHTML})},onInput:ee=>{P.current||(ve(ee.currentTarget.innerHTML),gt({htmlContent:ee.currentTarget.innerHTML}))}}),H.jsx("textarea",{readOnly:!0,value:ue,className:"w-full bg-[#1e1e1e] text-white/50 text-xs outline-none h-[60px] font-mono p-2 rounded-b border-t border-white/10",placeholder:"HTML ..."})]}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:" HTML "})]})]}),a.type!=="bpmn:Group"&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Color)"}),H.jsx("div",{className:"grid grid-cols-7 gap-2",children:we.map(ee=>H.jsx("button",{onClick:()=>ze(ee),className:"w-6 h-6 rounded-full border border-white/10 hover:scale-110 transition",style:{backgroundColor:ee}},ee))})]}),a.type!=="bpmn:Group"&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:"PI Tag "}),H.jsx("input",{value:l,onChange:ee=>{const Xe=ee.target.value;if(Xe.split(";").length>4){alert(" 4  PI Tag");return}gt({piTag:Xe})},className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:": Tag1;Tag2 (4)"}),H.jsx("input",{value:f,onChange:ee=>gt({piUnit:ee.target.value}),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition mb-2",placeholder:" (: kg/hr)"}),H.jsxs("div",{className:"flex items-center gap-2 bg-[#2d2d2d] border border-white/10 rounded-lg px-3 py-2 mb-2",children:[H.jsx("span",{className:"text-white/60 text-sm whitespace-nowrap",children:":"}),H.jsx("input",{type:"number",min:"0",max:"5",value:g,onChange:ee=>gt({piPrecision:parseInt(ee.target.value)}),className:"w-full bg-transparent border-none outline-none text-white text-right"})]}),H.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-2 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition mb-2",children:[H.jsx("input",{type:"checkbox",checked:R,onChange:ee=>gt({alwaysOn:ee.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]"}),H.jsx("span",{className:"text-sm text-white/90 font-medium",children:"Always On ()"})]})]}),(a.type==="bpmn:DataObjectReference"||a.type==="bpmn:DataStoreReference")&&H.jsxs("div",{className:"mb-5",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (Hyperlink)"}),H.jsx("input",{value:v,onChange:ee=>gt({targetUrl:ee.target.value}),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-3 py-2 text-white outline-none transition",placeholder:": https://google.com"}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:""})]}),a.type==="bpmn:EndEvent"&&H.jsxs("div",{className:"mb-5",children:[H.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-[#2d2d2d] p-3 rounded-lg border border-white/10 hover:border-[#8ab4f8] transition",children:[H.jsx("input",{type:"checkbox",checked:se,onChange:ee=>gt({isFinalEnd:ee.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-[#8ab4f8] focus:ring-[#8ab4f8]"}),H.jsx("span",{className:"text-sm text-white/90 font-medium",children:" END (Final END)"})]}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:""})]})]}):H.jsx("p",{className:"text-white/40 text-sm",children:""})]})]})]})};var yT={exports:{}};/*! bpmn-js - bpmn-viewer v17.11.1 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */(function(e,t){(function(n,r){e.exports=r()})(KA,function(){function n(u,p){p&&(u.super_=p,u.prototype=Object.create(p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}))}const r=Object.prototype.toString,i=Object.prototype.hasOwnProperty;function o(u){return u===void 0}function a(u){return u!==void 0}function s(u){return r.call(u)==="[object Array]"}function l(u){return r.call(u)==="[object Object]"}function c(u){return r.call(u)==="[object Number]"}function f(u){const p=r.call(u);return p==="[object Function]"||p==="[object AsyncFunction]"||p==="[object GeneratorFunction]"||p==="[object AsyncGeneratorFunction]"||p==="[object Proxy]"}function d(u){return r.call(u)==="[object String]"}function g(u,p){return i.call(u,p)}function y(u,p){const h=b(p);let m;return x(u,function(_,S){if(h(_,S))return m=_,!1}),m}function v(u,p){const h=b(p);let m=[];return x(u,function(_,S){h(_,S)&&m.push(_)}),m}function x(u,p){let h,m;if(o(u))return;const _=s(u)?I:D;for(let S in u)if(g(u,S)&&(h=u[S],m=p(h,_(S)),m===!1))return h}function C(u,p,h){return x(u,function(m,_){h=p(h,m,_)}),h}function k(u,p){return!!C(u,function(h,m,_){return h&&p(m,_)},!0)}function R(u,p){return!!y(u,p)}function E(u){return function(p){return k(u,function(h,m){return p[m]===h})}}function b(u){return f(u)?u:p=>p===u}function D(u){return u}function I(u){return Number(u)}function z(u,p){return u.bind(p)}function L(u,...p){return Object.assign(u,...p)}var Q=1e3;function Y(u,p){var h=this;p=p||Q,u.on(["render.shape","render.connection"],p,function(m,_){var S=m.type,M=_.element,O=_.gfx,j=_.attrs;if(h.canRender(M))return S==="render.shape"?h.drawShape(O,M,j):h.drawConnection(O,M,j)}),u.on(["render.getShapePath","render.getConnectionPath"],p,function(m,_){if(h.canRender(_))return m.type==="render.getShapePath"?h.getShapePath(_):h.getConnectionPath(_)})}function G(u,p){var h=oe(u);return h&&typeof h.$instanceOf=="function"&&h.$instanceOf(p)}function ae(u,p){return R(p,function(h){return G(u,h)})}function oe(u){return u&&u.businessObject||u}function Ce(u){return u&&u.di}function kt(u,p){return!G(u,"bpmn:CallActivity")&&(G(u,"bpmn:SubProcess")?!(!(p=p||Ce(u))||!G(p,"bpmndi:BPMNPlane"))||p&&!!p.isExpanded:!G(u,"bpmn:Participant")||!!oe(u).processRef)}function Ge(u){if(G(u,"bpmn:Participant")||G(u,"bpmn:Lane")){var p=Ce(u).isHorizontal;return p===void 0||p}}function Ke(u){return l(u)&&g(u,"labelTarget")}Y.prototype.canRender=function(u){},Y.prototype.drawShape=function(u,p){},Y.prototype.drawConnection=function(u,p){},Y.prototype.getShapePath=function(u){},Y.prototype.getConnectionPath=function(u){};var ye={width:90,height:20},je=15;function ue(u){var p=u.length/2-1,h=u[Math.floor(p)],m=u[Math.ceil(p+.01)],_=function(j){var J=j.length/2-1,re=j[Math.floor(J)],me=j[Math.ceil(J+.01)];return{x:re.x+(me.x-re.x)/2,y:re.y+(me.y-re.y)/2}}(u),S=Math.atan((m.y-h.y)/(m.x-h.x)),M=_.x,O=_.y;return Math.abs(S)<Math.PI/2?O-=je:M+=je,{x:M,y:O}}function ve(u,p){var h,m,_,S=u.label;return S&&S.bounds?(_=S.bounds,m={width:Math.max(ye.width,_.width),height:_.height},h={x:_.x+_.width/2,y:_.y+_.height/2}):(h=function(M){return M.waypoints?ue(M.waypoints):G(M,"bpmn:Group")?{x:M.x+M.width/2,y:M.y+ye.height/2}:{x:M.x+M.width/2,y:M.y+M.height+ye.height/2}}(p),m=ye),L({x:h.x-m.width/2,y:h.y-m.height/2},m)}function X(u){var p=u.businessObject,h=function(m){return G(m,"bpmn:FlowElement")||G(m,"bpmn:Participant")||G(m,"bpmn:Lane")||G(m,"bpmn:SequenceFlow")||G(m,"bpmn:MessageFlow")||G(m,"bpmn:DataInput")||G(m,"bpmn:DataOutput")?"name":G(m,"bpmn:TextAnnotation")?"text":G(m,"bpmn:Group")?"categoryValueRef":void 0}(p);if(h)return h==="categoryValueRef"?function(m){var _=m.categoryValueRef;return _&&_.value||""}(p):p[h]||""}function Z(u,p){return function(h,m){m.appendChild(function(_,S){if(_.ownerDocument!==S.ownerDocument)try{return S.ownerDocument.importNode(_,!0)}catch{}return _}(h,m))}(p,u),u}var se=2,he={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":se,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":se,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function B(u,p,h){var m=p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_=he[m];_?(_===se&&typeof h=="number"&&(h=String(h)+"px"),u.style[m]=h):u.setAttributeNS(null,p,h)}function w(u,p,h){if(typeof p=="string"){if(h===void 0)return function(m,_){return he[_]?m.style[_]:m.getAttributeNS(null,_)}(u,p);B(u,p,h)}else(function(m,_){var S,M,O=Object.keys(_);for(S=0;M=O[S];S++)B(m,M,_[M])})(u,p);return u}const P=Object.prototype.toString;function F(u){return new K(u)}function K(u){if(!u||!u.nodeType)throw new Error("A DOM element reference is required");this.el=u,this.list=u.classList}K.prototype.add=function(u){return this.list.add(u),this},K.prototype.remove=function(u){return P.call(u)=="[object RegExp]"?this.removeMatching(u):(this.list.remove(u),this)},K.prototype.removeMatching=function(u){const p=this.array();for(let h=0;h<p.length;h++)u.test(p[h])&&this.remove(p[h]);return this},K.prototype.toggle=function(u,p){return p!==void 0?p!==this.list.toggle(u,p)&&this.list.toggle(u):this.list.toggle(u),this},K.prototype.array=function(){return Array.from(this.list)},K.prototype.has=K.prototype.contains=function(u){return this.list.contains(u)};var le={svg:"http://www.w3.org/2000/svg"},Me='<svg xmlns="'+le.svg+'"';function we(u){var p=!1;u.substring(0,4)==="<svg"?u.indexOf(le.svg)===-1&&(u=Me+u.substring(4)):(u=Me+">"+u+"</svg>",p=!0);var h=function(S){var M;return(M=new DOMParser).async=!1,M.parseFromString(S,"text/xml")}(u);if(!p)return h;for(var m=document.createDocumentFragment(),_=h.firstChild;_.firstChild;)m.appendChild(_.firstChild);return m}function ce(u,p){var h;return(u=u.trim()).charAt(0)==="<"?(h=we(u).firstChild,h=document.importNode(h,!0)):h=document.createElementNS(le.svg,u),p&&w(h,p),h}var Ve=null;function vt(){return Ve===null&&(Ve=ce("svg")),Ve}function Qe(u,p){var h,m,_=Object.keys(p);for(h=0;m=_[h];h++)u[m]=p[m];return u}function xt(u){return vt().createSVGTransform()}var gt=/([&<>]{1})/g,ze=/([\n\r"]{1})/g,ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Xe(u,p){return u.replace(p,function(h,m){return ee[m]||m})}function Dt(u,p){var h,m,_,S,M;switch(u.nodeType){case 3:p.push(Xe(u.textContent,gt));break;case 1:if(p.push("<",u.tagName),u.hasAttributes())for(h=0,m=(_=u.attributes).length;h<m;++h)S=_.item(h),p.push(" ",S.name,'="',Xe(S.value,ze),'"');if(u.hasChildNodes()){for(p.push(">"),h=0,m=(M=u.childNodes).length;h<m;++h)Dt(M.item(h),p);p.push("</",u.tagName,">")}else p.push("/>");break;case 8:p.push("<!--",Xe(u.nodeValue,gt),"-->");break;case 4:p.push("<![CDATA[",u.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+u.nodeType)}return p}function Se(u,p){return function(h){for(var m=h.firstChild,_=[];m;)Dt(m,_),m=m.nextSibling;return _.join("")}(u)}function Ie(u){var p=u.parentNode;return p&&p.removeChild(u),u}function Lt(u,p){return p instanceof SVGMatrix?u.createSVGTransformFromMatrix(p):p}function _t(u,p){var h=u.transform.baseVal;return p&&(Array.isArray(p)||(p=[p]),function(m,_){var S,M;for(m.clear(),S=0;M=_[S];S++)m.appendItem(Lt(m,M))}(h,p)),h.consolidate()}function wt(u){return u.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function ct(u){return["L",u.x,u.y]}function Gn(u,p){const h=u.length,m=[(_=u[0],["M",_.x,_.y])];var _,S,M,O;for(let j=1;j<h;j++){const J=u[j-1],re=u[j],me=u[j+1];if(!me||!p){m.push(ct(re));continue}const Re=Math.min(p,Nn(re.x-J.x,re.y-J.y),Nn(me.x-re.x,me.y-re.y));if(!Re){m.push(ct(re));continue}const Le=Cn(re,J,Re),Ee=Cn(re,J,.5*Re),We=Cn(re,me,Re),pe=Cn(re,me,.5*Re);m.push(ct(Le)),m.push((M=pe,O=We,["C",(S=Ee).x,S.y,M.x,M.y,O.x,O.y]))}return m}function Cn(u,p,h){const m=p.x-u.x,_=p.y-u.y,S=h/Nn(m,_);return{x:u.x+m*S,y:u.y+_*S}}function Nn(u,p){return Math.sqrt(Math.pow(u,2)+Math.pow(p,2))}function oi(u,p,h){c(p)&&(h=p,p=null),p||(p={});const m=ce("path",p);return c(h)&&(m.dataset.cornerRadius=String(h)),fr(m,u)}function fr(u,p){return w(u,{d:wt(Gn(p,parseInt(u.dataset.cornerRadius,10)||0))}),u}var Pi="hsl(225, 10%, 15%)",zr="white";function $n(u,p){return R(u.eventDefinitions,function(h){return h.$type===p})}function Ye(u,p,h){var m=Ce(u);return h||m.get("color:background-color")||m.get("bioc:fill")||p||zr}function Pe(u,p,h){var m=Ce(u);return h||m.get("color:border-color")||m.get("bioc:stroke")||p||Pi}function Jl(u,p,h,m){var _=Ce(u).get("label");return m||_&&_.get("color:color")||p||Pe(u,h)}function eu(u,p={}){return{width:ai(u,p),height:Sr(u,p)}}function ai(u,p={}){return g(p,"width")?p.width:u.width}function Sr(u,p={}){return g(p,"height")?p.height:u.height}function _T(u,p){return p.forEach(function(h){h&&typeof h!="string"&&!Array.isArray(h)&&Object.keys(h).forEach(function(m){if(m!=="default"&&!(m in u)){var _=Object.getOwnPropertyDescriptor(h,m);Object.defineProperty(u,m,_.get?_:{enumerable:!0,get:function(){return h[m]}})}})}),Object.freeze(u)}const wT=Object.prototype.toString,ET=Object.prototype.hasOwnProperty;function bT(u,p){return ET.call(u,p)}function Bx(u,p){let h,m;if(u===void 0)return;const _=function(S){return wT.call(S)==="[object Array]"}(u)?CT:ST;for(let S in u)if(bT(u,S)&&(h=u[S],m=p(h,_(S)),m===!1))return h}function ST(u){return u}function CT(u){return Number(u)}function Cr(u,...p){const h=u.style;return Bx(p,function(m){m&&Bx(m,function(_,S){h[S]=_})}),u}const RT=Object.prototype.toString;function rp(u){return new $o(u)}function $o(u){if(!u||!u.nodeType)throw new Error("A DOM element reference is required");this.el=u,this.list=u.classList}function Ix(u){for(var p;p=u.firstChild;)u.removeChild(p);return u}$o.prototype.add=function(u){return this.list.add(u),this},$o.prototype.remove=function(u){return RT.call(u)=="[object RegExp]"?this.removeMatching(u):(this.list.remove(u),this)},$o.prototype.removeMatching=function(u){const p=this.array();for(let h=0;h<p.length;h++)u.test(p[h])&&this.remove(p[h]);return this},$o.prototype.toggle=function(u,p){return p!==void 0?p!==this.list.toggle(u,p)&&this.list.toggle(u):this.list.toggle(u),this},$o.prototype.array=function(){return Array.from(this.list)},$o.prototype.has=$o.prototype.contains=function(u){return this.list.contains(u)};var ip,Qh,Zh,op={};function jx(){ip=window.addEventListener?"addEventListener":"attachEvent",Qh=window.removeEventListener?"removeEventListener":"detachEvent",Zh=ip!=="addEventListener"?"on":""}var Jh=_T({__proto__:null,bind:op.bind=function(u,p,h,m){return ip||jx(),u[ip](Zh+p,h,m||!1),h},unbind:op.unbind=function(u,p,h,m){return Qh||jx(),u[Qh](Zh+p,h,m||!1),h},default:op},[op]),$x=["focus","blur"],em,tm={bind:function(u,p,h,m,_){return $x.indexOf(h)!==-1&&(_=!0),Jh.bind(u,h,function(S){var M=S.target||S.srcElement;S.delegateTarget=function(O,j,J){var re=J?O:O.parentNode;return re&&typeof re.closest=="function"&&re.closest(j)||null}(M,p,!0),S.delegateTarget&&m.call(u,S)},_)},unbind:function(u,p,h,m){return $x.indexOf(p)!==-1&&(m=!0),Jh.unbind(u,p,h,m)}},kT=function(u,p){if(typeof u!="string")throw new TypeError("String expected");p||(p=document);var h=/<([\w:]+)/.exec(u);if(!h)return p.createTextNode(u);u=u.replace(/^\s+|\s+$/g,"");var m=h[1];if(m=="body")return(_=p.createElement("html")).innerHTML=u,_.removeChild(_.lastChild);var _,S=Object.prototype.hasOwnProperty.call(vn,m)?vn[m]:vn._default,M=S[0],O=S[1],j=S[2];for((_=p.createElement("div")).innerHTML=O+u+j;M--;)_=_.lastChild;if(_.firstChild==_.lastChild)return _.removeChild(_.firstChild);for(var J=p.createDocumentFragment();_.firstChild;)J.appendChild(_.removeChild(_.firstChild));return J},Fx=!1;typeof document<"u"&&((em=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Fx=!em.getElementsByTagName("link").length,em=void 0);var vn={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Fx?[1,"X<div>","</div>"]:[0,"",""]};vn.td=vn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],vn.option=vn.optgroup=[1,'<select multiple="multiple">',"</select>"],vn.thead=vn.tbody=vn.colgroup=vn.caption=vn.tfoot=[1,"<table>","</table>"],vn.polyline=vn.ellipse=vn.polygon=vn.circle=vn.text=vn.line=vn.path=vn.rect=vn.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Hi=kT;function Ti(u,p){return(p=p||document).querySelector(u)}function ap(u){u.parentNode&&u.parentNode.removeChild(u)}function nm(u,p,h,m,_){var S=xt();S.setTranslate(p,h);var M=xt();M.setRotate(m||0,0,0);var O=xt();O.setScale(1,1),_t(u,[S,M,O])}function zx(u,p,h){var m=xt();m.setTranslate(p,h),_t(u,m)}var PT=function(u,p){return u(p={exports:{}},p.exports),p.exports}(function(u){var p=u.exports=function(h,m){if(m||(m=16),h===void 0&&(h=128),h<=0)return"0";for(var _=Math.log(Math.pow(2,h))/Math.log(m),S=2;_===1/0;S*=2)_=Math.log(Math.pow(2,h/S))/Math.log(m)*S;var M=_-Math.floor(_),O="";for(S=0;S<Math.floor(_);S++)O=Math.floor(Math.random()*m).toString(m)+O;if(M){var j=Math.pow(m,M);O=Math.floor(Math.random()*j).toString(m)+O}var J=parseInt(O,m);return J!==1/0&&J>=Math.pow(2,h)?p(h,m):O};p.rack=function(h,m,_){var S=function(O){var j=0;do{if(j++>10){if(!_)throw new Error("too many ID collisions, use more bits");h+=_}var J=p(h,m)}while(Object.hasOwnProperty.call(M,J));return M[J]=O,J},M=S.hats={};return S.get=function(O){return S.hats[O]},S.set=function(O,j){return S.hats[O]=j,S},S.bits=h||128,S.base=m||16,S}});function so(u){if(!(this instanceof so))return new so(u);u=u||[128,36,1],this._seed=u.length?PT.rack(u[0],u[1],u[2]):u}so.prototype.next=function(u){return this._seed(u||!0)},so.prototype.nextPrefixed=function(u,p){var h;do h=u+this.next(!0);while(this.assigned(h));return this.claim(h,p),h},so.prototype.claim=function(u,p){this._seed.set(u,p||!0)},so.prototype.assigned=function(u){return this._seed.get(u)||!1},so.prototype.unclaim=function(u){delete this._seed.hats[u]},so.prototype.clear=function(){var u,p=this._seed.hats;for(u in p)this.unclaim(u)};var TT=new so,Ls=.95;function Ha(u,p,h,m,_,S,M){Y.call(this,p,M);var O=u&&u.defaultFillColor,j=u&&u.defaultStrokeColor,J=u&&u.defaultLabelColor;function re($){return h.computeStyle($,{strokeLinecap:"round",strokeLinejoin:"round",stroke:Pi,strokeWidth:2,fill:"white"})}function me($){return h.computeStyle($,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:Pi,strokeWidth:2})}function Re($,T){var{ref:N={x:0,y:0},scale:V=1,element:te,parentGfx:Ne=_._svg}=T,rt=ce("marker",{id:$,viewBox:"0 0 20 20",refX:N.x,refY:N.y,markerWidth:20*V,markerHeight:20*V,orient:"auto"});Z(rt,te);var qe=Ti(":scope > defs",Ne);qe||Z(Ne,qe=ce("defs")),Z(qe,rt)}function Le($,T,N,V){var te=TT.nextPrefixed("marker-");return function(Ne,rt,qe,Tt,cn){qe==="sequenceflow-end"&&Re(rt,{element:ce("path",{d:"M 1 5 L 11 10 L 1 15 Z",...re({fill:cn,stroke:cn,strokeWidth:1})}),ref:{x:11,y:10},scale:.5,parentGfx:Ne}),qe==="messageflow-start"&&Re(rt,{element:ce("circle",{cx:6,cy:6,r:3.5,...re({fill:Tt,stroke:cn,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:6,y:6},parentGfx:Ne}),qe==="messageflow-end"&&Re(rt,{element:ce("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...re({fill:Tt,stroke:cn,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:8.5,y:5},parentGfx:Ne}),qe==="association-start"&&Re(rt,{element:ce("path",{d:"M 11 5 L 1 10 L 11 15",...me({fill:"none",stroke:cn,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:1,y:10},scale:.5,parentGfx:Ne}),qe==="association-end"&&Re(rt,{element:ce("path",{d:"M 1 5 L 11 10 L 1 15",...me({fill:"none",stroke:cn,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:11,y:10},scale:.5,parentGfx:Ne}),qe==="conditional-flow-marker"&&Re(rt,{element:ce("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...re({fill:Tt,stroke:cn})}),ref:{x:-1,y:10},scale:.5,parentGfx:Ne}),qe==="conditional-default-flow-marker"&&Re(rt,{element:ce("path",{d:"M 6 4 L 10 16",...re({stroke:cn,fill:"none"})}),ref:{x:0,y:10},scale:.5,parentGfx:Ne})}($,te,T,N,V),"url(#"+te+")"}function Ee($,T,N,V,te={}){l(V)&&(te=V,V=0),V=V||0,te=re(te);var Ne=ce("circle",{cx:T/2,cy:N/2,r:Math.round((T+N)/4-V),...te});return Z($,Ne),Ne}function We($,T,N,V,te,Ne){l(te)&&(Ne=te,te=0),te=te||0,Ne=re(Ne);var rt=ce("rect",{x:te,y:te,width:T-2*te,height:N-2*te,rx:V,ry:V,...Ne});return Z($,rt),rt}function pe($,T,N,V){var te=oi(T,N=me(N),V);return Z($,te),te}function Te($,T,N){return pe($,T,N,5)}function U($,T,N){N=me(N);var V=ce("path",{...N,d:T});return Z($,V),V}function ie($,T,N,V){return U(T,N,L({"data-marker":$},V))}function ne($){return Ht[$]}function Be($){return function(T,N,V){return ne($)(T,N,V)}}var be=function($,T,N={},V){return U($,m.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:T.width,containerHeight:T.height,position:{mx:.235,my:.315}}),{fill:V?Pe(T,j,N.stroke):Ye(T,O,N.fill),stroke:V?Ye(T,O,N.fill):Pe(T,j,N.stroke),strokeWidth:1})},ut=function($,T,N={}){var V=Ee($,T.width,T.height,.2*T.height,{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:2});U($,m.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.5}}),{stroke:Pe(T,j,N.stroke),strokeWidth:2});for(var te=0;te<12;te++){var Ne=m.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.5}}),rt=T.width/2,qe=T.height/2;U($,Ne,{strokeWidth:1,stroke:Pe(T,j,N.stroke),transform:"rotate("+30*te+","+qe+","+rt+")"})}return V},st=function($,T,N={},V){return U($,m.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.2}}),{fill:V?Pe(T,j,N.stroke):Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1})},He=function($,T,N={}){return U($,m.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.222}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1})},Ut=function($,T,N={},V){return U($,m.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.57,my:.263}}),{fill:V?Pe(T,j,N.stroke):Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1})},_e=function($,T,N={},V){return U($,m.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:T.width,containerHeight:T.height,position:{mx:.2,my:.722}}),{fill:V?Pe(T,j,N.stroke):Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1})},xe=function($,T,N={},V){var te=U($,m.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.638,my:-.055}}),{fill:V?Pe(T,j,N.stroke):"none",stroke:Pe(T,j,N.stroke),strokeWidth:1});return function(Ne,rt){var qe=xt();qe.setRotate(rt,0,0),_t(Ne,qe)}(te,45),te},et=function($,T,N={},V){return U($,m.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.22,my:.5}}),{fill:V?Pe(T,j,N.stroke):Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1})},pt=function($,T,N={},V){return U($,m.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:T.width,containerHeight:T.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:V?Pe(T,j,N.stroke):Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)})},mt=function($,T,N={},V){return U($,m.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:T.width,containerHeight:T.height,position:{mx:.222,my:.36}}),{fill:V?Pe(T,j,N.stroke):Ye(T,O,N.fill),strokeWidth:1})},Ur=function($,T,N={}){return U($,m.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:T.width,containerHeight:T.height,position:{mx:.458,my:.194}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1})},Ft=function($,T,N={}){return Ee($,T.width,T.height,8,{fill:Pe(T,j,N.stroke),stroke:Pe(T,j,N.stroke),strokeWidth:4})};function kr($,T,N={}){var V=oe($),te=function(Ne){return Ne.$type==="bpmn:IntermediateThrowEvent"||Ne.$type==="bpmn:EndEvent"}(V);return V.get("eventDefinitions")&&V.get("eventDefinitions").length>1?V.get("parallelMultiple")?Ur(T,$,N):mt(T,$,N,te):$n(V,"bpmn:MessageEventDefinition")?be(T,$,N,te):$n(V,"bpmn:TimerEventDefinition")?ut(T,$,N):$n(V,"bpmn:ConditionalEventDefinition")?He(T,$,N):$n(V,"bpmn:SignalEventDefinition")?pt(T,$,N,te):$n(V,"bpmn:EscalationEventDefinition")?st(T,$,N,te):$n(V,"bpmn:LinkEventDefinition")?Ut(T,$,N,te):$n(V,"bpmn:ErrorEventDefinition")?_e(T,$,N,te):$n(V,"bpmn:CancelEventDefinition")?xe(T,$,N,te):$n(V,"bpmn:CompensateEventDefinition")?et(T,$,N,te):$n(V,"bpmn:TerminateEventDefinition")?Ft(T,$,N):null}var ui={ParticipantMultiplicityMarker:function($,T,N={}){var V=ai(T,N),te=Sr(T,N);ie("participant-multiplicity",$,m.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2-6)/V,my:(te-15)/te}}),{strokeWidth:2,fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)})},SubProcessMarker:function($,T,N={}){zx(We($,14,14,0,{strokeWidth:1,fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)}),T.width/2-7.5,T.height-20),ie("sub-process",$,m.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2-7.5)/T.width,my:(T.height-20)/T.height}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)})},ParallelMarker:function($,T,N){var V=ai(T,N),te=Sr(T,N);ie("parallel",$,m.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2+N.parallel)/V,my:(te-20)/te}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)})},SequentialMarker:function($,T,N){ie("sequential",$,m.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2+N.seq)/T.width,my:(T.height-19)/T.height}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)})},CompensationMarker:function($,T,N){ie("compensation",$,m.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:(T.width/2+N.compensation)/T.width,my:(T.height-13)/T.height}}),{strokeWidth:1,fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)})},LoopMarker:function($,T,N){var V=ai(T,N),te=Sr(T,N);ie("loop",$,m.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2+N.loop)/V,my:(te-7)/te}}),{strokeWidth:1.5,fill:"none",stroke:Pe(T,j,N.stroke),strokeMiterlimit:.5})},AdhocMarker:function($,T,N){var V=ai(T,N),te=Sr(T,N);ie("adhoc",$,m.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:(V/2+N.adhoc)/V,my:(te-15)/te}}),{strokeWidth:1,fill:Pe(T,j,N.stroke),stroke:Pe(T,j,N.stroke)})}};function en($,T,N,V){ui[$](T,N,V)}function Gr($,T,N,V={}){V={fill:V.fill,stroke:V.stroke,width:ai(T,V),height:Sr(T,V)};var te=oe(T),Ne=N&&N.includes("SubProcessMarker");V=Ne?{...V,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{...V,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},x(N,function(Tt){en(Tt,$,T,V)}),te.get("isForCompensation")&&en("CompensationMarker",$,T,V),G(te,"bpmn:AdHocSubProcess")&&en("AdhocMarker",$,T,V);var rt=te.get("loopCharacteristics"),qe=rt&&rt.get("isSequential");rt&&(qe===void 0&&en("LoopMarker",$,T,V),qe===!1&&en("ParallelMarker",$,T,V),qe===!0&&en("SequentialMarker",$,T,V))}function Pt($,T,N={}){N=L({size:{width:100}},N);var V=S.createText(T||"",N);return F(V).add("djs-label"),Z($,V),V}function Mt($,T,N,V={}){var te=oe(T),Ne=eu({x:T.x,y:T.y,width:T.width,height:T.height},V);return Pt($,te.name,{align:N,box:Ne,padding:7,style:{fill:Jl(T,J,j,V.stroke)}})}function Hs($,T,N,V={}){var te=Ge(N),Ne=Pt($,T,{box:{height:30,width:te?Sr(N,V):ai(N,V)},align:"center-middle",style:{fill:Jl(N,J,j,V.stroke)}});te&&nm(Ne,0,-(-1*Sr(N,V)),270)}function Vs($,T,N={}){var{width:V,height:te}=eu(T,N);return We($,V,te,10,{...N,fill:Ye(T,O,N.fill),fillOpacity:Ls,stroke:Pe(T,j,N.stroke)})}function qa($,T,N={}){var V=oe(T),te=Ye(T,O,N.fill),Ne=Pe(T,j,N.stroke);return V.get("associationDirection")!=="One"&&V.get("associationDirection")!=="Both"||(N.markerEnd=Le($,"association-end",te,Ne)),V.get("associationDirection")==="Both"&&(N.markerStart=Le($,"association-start",te,Ne)),N=Et(N,["markerStart","markerEnd"]),Te($,T.waypoints,{...N,stroke:Ne,strokeDasharray:"0, 5"})}function su($,T,N={}){var V=Ye(T,O,N.fill),te=Pe(T,j,N.stroke),Ne=U($,m.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.474,my:.296}}),{fill:V,fillOpacity:Ls,stroke:te});return function(rt){var qe=rt.dataObjectRef;return rt.isCollection||qe&&qe.isCollection}(oe(T))&&U($,m.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:.33,my:(T.height-18)/T.height}}),{strokeWidth:2,fill:V,stroke:te}),Ne}function Fn($,T,N={}){return Ee($,T.width,T.height,{fillOpacity:Ls,...N,fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)})}function Rn($,T,N={}){return function(V,te,Ne,rt){var qe=te/2,Tt=Ne/2,cn=[{x:qe,y:0},{x:te,y:Tt},{x:qe,y:Ne},{x:0,y:Tt}].map(function(Xa){return Xa.x+","+Xa.y}).join(" ");rt=re(rt);var mr=ce("polygon",{...rt,points:cn});return Z(V,mr),mr}($,T.width,T.height,{fill:Ye(T,O,N.fill),fillOpacity:Ls,stroke:Pe(T,j,N.stroke)})}function rn($,T,N={}){var V=We($,ai(T,N),Sr(T,N),0,{fill:Ye(T,O,N.fill),fillOpacity:N.fillOpacity||Ls,stroke:Pe(T,j,N.stroke),strokeWidth:1.5}),te=oe(T);return G(te,"bpmn:Lane")&&Hs($,te.get("name"),T,N),V}function Pr($,T,N={}){var V=Vs($,T,N);(function(Ne){return Ne&&!!oe(Ne).triggeredByEvent})(T)&&w(V,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var te=kt(T);return Mt($,T,te?"center-top":"center-middle",N),Gr($,T,te?void 0:["SubProcessMarker"],N),V}function kn($,T,N={}){var V=Vs($,T,N);return Mt($,T,"center-middle",N),Gr($,T,void 0,N),V}var Ht=this.handlers={"bpmn:AdHocSubProcess":function($,T,N={}){return Pr($,T,N=kt(T)?Et(N,["fill","stroke","width","height"]):Et(N,["fill","stroke"]))},"bpmn:Association":function($,T,N={}){return qa($,T,N=Et(N,["fill","stroke"]))},"bpmn:BoundaryEvent":function($,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]);var te=oe(T).get("cancelActivity");N={strokeWidth:1.5,fill:Ye(T,O,N.fill),fillOpacity:1,stroke:Pe(T,j,N.stroke)},te||(N.strokeDasharray="6");var Ne=Fn($,T,N);return Ee($,T.width,T.height,3,{...N,fill:"none"}),V&&kr(T,$,N),Ne},"bpmn:BusinessRuleTask":function($,T,N={}){var V=kn($,T,N=Et(N,["fill","stroke"]));return w(U($,m.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1}),w(U($,m.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{fill:Pe(T,j,N.stroke),stroke:Pe(T,j,N.stroke),strokeWidth:1}),V},"bpmn:CallActivity":function($,T,N={}){return N=Et(N,["fill","stroke"]),Pr($,T,{strokeWidth:5,...N})},"bpmn:ComplexGateway":function($,T,N={}){var V=Rn($,T,N=Et(N,["fill","stroke"]));return U($,m.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:T.width,containerHeight:T.height,position:{mx:.46,my:.26}}),{fill:Pe(T,j,N.stroke),stroke:Pe(T,j,N.stroke),strokeWidth:1}),V},"bpmn:DataInput":function($,T,N={}){N=Et(N,["fill","stroke"]);var V=m.getRawPath("DATA_ARROW"),te=su($,T,N);return U($,V,{fill:"none",stroke:Pe(T,j,N.stroke),strokeWidth:1}),te},"bpmn:DataInputAssociation":function($,T,N={}){return N=Et(N,["fill","stroke"]),qa($,T,{...N,markerEnd:Le($,"association-end",Ye(T,O,N.fill),Pe(T,j,N.stroke))})},"bpmn:DataObject":function($,T,N={}){return su($,T,N=Et(N,["fill","stroke"]))},"bpmn:DataObjectReference":Be("bpmn:DataObject"),"bpmn:DataOutput":function($,T,N={}){N=Et(N,["fill","stroke"]);var V=m.getRawPath("DATA_ARROW"),te=su($,T,N);return U($,V,{strokeWidth:1,fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke)}),te},"bpmn:DataOutputAssociation":function($,T,N={}){return N=Et(N,["fill","stroke"]),qa($,T,{...N,markerEnd:Le($,"association-end",Ye(T,O,N.fill),Pe(T,j,N.stroke))})},"bpmn:DataStoreReference":function($,T,N={}){return N=Et(N,["fill","stroke"]),U($,m.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:T.width,containerHeight:T.height,position:{mx:0,my:.133}}),{fill:Ye(T,O,N.fill),fillOpacity:Ls,stroke:Pe(T,j,N.stroke),strokeWidth:2})},"bpmn:EndEvent":function($,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]);var te=Fn($,T,{...N,strokeWidth:4});return V&&kr(T,$,N),te},"bpmn:EventBasedGateway":function($,T,N={}){N=Et(N,["fill","stroke"]);var V=oe(T),te=Rn($,T,N);Ee($,T.width,T.height,.2*T.height,{fill:Ye(T,"none",N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1});var Ne=V.get("eventGatewayType"),rt=!!V.get("instantiate");if(Ne==="Parallel"){var qe=m.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:T.width,containerHeight:T.height,position:{mx:.474,my:.296}});U($,qe,{fill:"none",stroke:Pe(T,j,N.stroke),strokeWidth:1})}else Ne==="Exclusive"&&(rt||Ee($,T.width,T.height,.26*T.height,{fill:"none",stroke:Pe(T,j,N.stroke),strokeWidth:1}),function(){var Tt=m.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:T.width,containerHeight:T.height,position:{mx:.36,my:.44}});U($,Tt,{fill:"none",stroke:Pe(T,j,N.stroke),strokeWidth:2})}());return te},"bpmn:ExclusiveGateway":function($,T,N={}){var V=Rn($,T,N=Et(N,["fill","stroke"])),te=m.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:T.width,containerHeight:T.height,position:{mx:.32,my:.3}});return Ce(T).get("isMarkerVisible")&&U($,te,{fill:Pe(T,j,N.stroke),stroke:Pe(T,j,N.stroke),strokeWidth:1}),V},"bpmn:Gateway":function($,T,N={}){return Rn($,T,N=Et(N,["fill","stroke"]))},"bpmn:Group":function($,T,N={}){return N=Et(N,["fill","stroke","width","height"]),We($,T.width,T.height,10,{stroke:Pe(T,j,N.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:ai(T,N),height:Sr(T,N)})},"bpmn:InclusiveGateway":function($,T,N={}){var V=Rn($,T,N=Et(N,["fill","stroke"]));return Ee($,T.width,T.height,.24*T.height,{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:2.5}),V},"bpmn:IntermediateEvent":function($,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]);var te=Fn($,T,{...N,strokeWidth:1.5});return Ee($,T.width,T.height,3,{fill:"none",stroke:Pe(T,j,N.stroke),strokeWidth:1.5}),V&&kr(T,$,N),te},"bpmn:IntermediateCatchEvent":Be("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":Be("bpmn:IntermediateEvent"),"bpmn:Lane":function($,T,N={}){return N=Et(N,["fill","stroke","width","height"]),rn($,T,{...N,fillOpacity:.25})},"bpmn:ManualTask":function($,T,N={}){var V=kn($,T,N=Et(N,["fill","stroke"]));return U($,m.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:.5}),V},"bpmn:MessageFlow":function($,T,N={}){N=Et(N,["fill","stroke"]);var V=oe(T),te=Ce(T),Ne=Ye(T,O,N.fill),rt=Pe(T,j,N.stroke),qe=Te($,T.waypoints,{markerEnd:Le($,"messageflow-end",Ne,rt),markerStart:Le($,"messageflow-start",Ne,rt),stroke:rt,strokeDasharray:"10, 11",strokeWidth:1.5});if(V.get("messageRef")){var Tt=qe.getPointAtLength(qe.getTotalLength()/2),cn=m.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Tt.x,y:Tt.y}}),mr={strokeWidth:1};te.get("messageVisibleKind")==="initiating"?(mr.fill=Ne,mr.stroke=rt):(mr.fill=rt,mr.stroke=Ne);var Xa=U($,cn,mr),K_=Pt($,V.get("messageRef").get("name"),{align:"center-top",fitBox:!0,style:{fill:rt}}),UA=Xa.getBBox(),GA=K_.getBBox();nm(K_,Tt.x-GA.width/2,Tt.y+UA.height/2+10,0)}return qe},"bpmn:ParallelGateway":function($,T,N={}){var V=Rn($,T,N=Et(N,["fill","stroke"]));return U($,m.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:T.width,containerHeight:T.height,position:{mx:.46,my:.2}}),{fill:Pe(T,j,N.stroke),stroke:Pe(T,j,N.stroke),strokeWidth:1}),V},"bpmn:Participant":function($,T,N={}){var V=rn($,T,N=Et(N,["fill","stroke","width","height"])),te=kt(T),Ne=Ge(T),rt=oe(T),qe=rt.get("name");if(te)pe($,Ne?[{x:30,y:0},{x:30,y:Sr(T,N)}]:[{x:0,y:30},{x:ai(T,N),y:30}],{stroke:Pe(T,j,N.stroke),strokeWidth:1.5}),Hs($,qe,T,N);else{var Tt=eu(T,N);Ne||(Tt.height=ai(T,N),Tt.width=Sr(T,N));var cn=Pt($,qe,{box:Tt,align:"center-middle",style:{fill:Jl(T,J,j,N.stroke)}});Ne||nm(cn,0,-(-1*Sr(T,N)),270)}return rt.get("participantMultiplicity")&&en("ParticipantMultiplicityMarker",$,T,N),V},"bpmn:ReceiveTask":function($,T,N={}){N=Et(N,["fill","stroke"]);var V,te=oe(T),Ne=kn($,T,N);return te.get("instantiate")?(Ee($,28,28,4.4,{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1}),V=m.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):V=m.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),U($,V,{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1}),Ne},"bpmn:ScriptTask":function($,T,N={}){var V=kn($,T,N=Et(N,["fill","stroke"]));return U($,m.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1}),V},"bpmn:SendTask":function($,T,N={}){var V=kn($,T,N=Et(N,["fill","stroke"]));return U($,m.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{fill:Pe(T,j,N.stroke),stroke:Ye(T,O,N.fill),strokeWidth:1}),V},"bpmn:SequenceFlow":function($,T,N={}){N=Et(N,["fill","stroke"]);var V=Ye(T,O,N.fill),te=Pe(T,j,N.stroke),Ne=Te($,T.waypoints,{markerEnd:Le($,"sequenceflow-end",V,te),stroke:te}),rt=oe(T),{source:qe}=T;if(qe){var Tt=oe(qe);rt.get("conditionExpression")&&G(Tt,"bpmn:Activity")&&w(Ne,{markerStart:Le($,"conditional-flow-marker",V,te)}),Tt.get("default")&&(G(Tt,"bpmn:Gateway")||G(Tt,"bpmn:Activity"))&&Tt.get("default")===rt&&w(Ne,{markerStart:Le($,"conditional-default-flow-marker",V,te)})}return Ne},"bpmn:ServiceTask":function($,T,N={}){var V=kn($,T,N=Et(N,["fill","stroke"]));return Ee($,10,10,{fill:Ye(T,O,N.fill),stroke:"none",transform:"translate(6, 6)"}),U($,m.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1}),Ee($,10,10,{fill:Ye(T,O,N.fill),stroke:"none",transform:"translate(11, 10)"}),U($,m.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:1}),V},"bpmn:StartEvent":function($,T,N={}){var{renderIcon:V=!0}=N;N=Et(N,["fill","stroke"]),oe(T).get("isInterrupting")||(N={...N,strokeDasharray:"6"});var te=Fn($,T,N);return V&&kr(T,$,N),te},"bpmn:SubProcess":function($,T,N={}){return Pr($,T,N=kt(T)?Et(N,["fill","stroke","width","height"]):Et(N,["fill","stroke"]))},"bpmn:Task":function($,T,N={}){return kn($,T,N=Et(N,["fill","stroke"]))},"bpmn:TextAnnotation":function($,T,N={}){N=Et(N,["fill","stroke","width","height"]);var{width:V,height:te}=eu(T,N),Ne=We($,V,te,0,0,{fill:"none",stroke:"none"});return U($,m.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:te,position:{mx:0,my:0}}),{stroke:Pe(T,j,N.stroke)}),Pt($,oe(T).get("text")||"",{align:"left-top",box:eu(T,N),padding:7,style:{fill:Jl(T,J,j,N.stroke)}}),Ne},"bpmn:Transaction":function($,T,N={}){N=kt(T)?Et(N,["fill","stroke","width","height"]):Et(N,["fill","stroke"]);var V=Pr($,T,{strokeWidth:1.5,...N}),te=h.style(["no-fill","no-events"],{stroke:Pe(T,j,N.stroke),strokeWidth:1.5});return kt(T)||(N={}),We($,ai(T,N),Sr(T,N),7,3,te),V},"bpmn:UserTask":function($,T,N={}){var V=kn($,T,N=Et(N,["fill","stroke"]));return U($,m.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:.5}),U($,m.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{fill:Ye(T,O,N.fill),stroke:Pe(T,j,N.stroke),strokeWidth:.5}),U($,m.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{fill:Pe(T,j,N.stroke),stroke:Pe(T,j,N.stroke),strokeWidth:.5}),V},label:function($,T,N={}){return function(V,te,Ne={}){var rt={width:90,height:30,x:te.width/2+te.x,y:te.height/2+te.y};return Pt(V,X(te),{box:rt,fitBox:!0,style:L({},S.getExternalStyle(),{fill:Jl(te,J,j,Ne.stroke)})})}($,T,N)}};this._drawPath=U,this._renderer=ne}function Et(u,p=[]){return p.reduce((h,m)=>(u[m]&&(h[m]=u[m]),h),{})}n(Ha,Y),Ha.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Ha.prototype.canRender=function(u){return G(u,"bpmn:BaseElement")},Ha.prototype.drawShape=function(u,p,h={}){var{type:m}=p;return this._renderer(m)(u,p,h)},Ha.prototype.drawConnection=function(u,p,h={}){var{type:m}=p;return this._renderer(m)(u,p,h)},Ha.prototype.getShapePath=function(u){return G(u,"bpmn:Event")?function(p){var h=p.x+p.width/2,m=p.y+p.height/2,_=p.width/2;return wt([["M",h,m],["m",0,-_],["a",_,_,0,1,1,0,2*_],["a",_,_,0,1,1,0,-2*_],["z"]])}(u):G(u,"bpmn:Activity")?function(p,h){var m=p.x,_=p.y,S=p.width,M=p.height;return wt([["M",m+h,_],["l",S-2*h,0],["a",h,h,0,0,1,h,h],["l",0,M-2*h],["a",h,h,0,0,1,-h,h],["l",2*h-S,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-M],["a",h,h,0,0,1,h,-h],["z"]])}(u,10):G(u,"bpmn:Gateway")?function(p){var h=p.width/2,m=p.height/2;return wt([["M",p.x+h,p.y],["l",h,m],["l",-h,m],["l",-h,-m],["z"]])}(u):function(p){var h=p.x,m=p.y,_=p.width;return wt([["M",h,m],["l",_,0],["l",0,p.height],["l",-_,0],["z"]])}(u)};var AT=0,MT={width:150,height:50};function NT(u,p){var h;p.textContent=u;try{var m,_=u==="";return p.textContent=_?"dummy":u,m={width:(h=p.getBBox()).width+2*h.x,height:h.height},_&&(m.width=0),m}catch{return{width:0,height:0}}}function DT(u,p,h){for(var m,_=u.shift(),S=_;;){if((m=NT(S,h)).width=S?m.width:0,S===" "||S===""||m.width<Math.round(p)||S.length<2)return OT(u,S,_,m);S=LT(S,m.width,p)}}function OT(u,p,h,m){if(p.length<h.length){var _=h.slice(p.length).trim();u.unshift(_)}return{width:m.width,height:m.height,text:p}}var Hx="";function LT(u,p,h){var m=Math.max(u.length*(h/p),1),_=function(S,M){var O,j=S.split(/(\s|-|\u00AD)/g),J=[],re=0;if(j.length>1)for(;O=j.shift();){if(!(O.length+re<M)){O!=="-"&&O!==Hx||J.pop();break}J.push(O),re+=O.length}var me=J[J.length-1];return me&&me===Hx&&(J[J.length-1]="-"),J.join("")}(u,m);return _||(_=u.slice(0,Math.max(Math.round(m-1),1))),_}function sp(u){this._config=L({},{size:MT,padding:AT,style:{},align:"center-top"},u||{})}sp.prototype.createText=function(u,p){return this.layoutText(u,p).element},sp.prototype.getDimensions=function(u,p){return this.layoutText(u,p).dimensions},sp.prototype.layoutText=function(u,p){var h=L({},this._config.size,p.box),m=L({},this._config.style,p.style),_=function(pe){var Te=pe.split("-");return{horizontal:Te[0]||"center",vertical:Te[1]||"top"}}(p.align||this._config.align),S=function(pe){return l(pe)?L({top:0,left:0,right:0,bottom:0},pe):{top:pe,left:pe,right:pe,bottom:pe}}(p.padding!==void 0?p.padding:this._config.padding),M=p.fitBox||!1,O=function(pe){if("fontSize"in pe&&"lineHeight"in pe)return pe.lineHeight*parseInt(pe.fontSize,10)}(m),j=u.split(/\u00AD?\r?\n/),J=[],re=h.width-S.left-S.right,me=ce("text");for(w(me,{x:0,y:0}),w(me,m),Z(function(){var pe=document.getElementById("helper-svg");return pe||(w(pe=ce("svg"),{id:"helper-svg"}),Cr(pe,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(pe)),pe}(),me);j.length;)J.push(DT(j,re,me));_.vertical==="middle"&&(S.top=S.bottom=0);var Re=C(J,function(pe,Te,U){return pe+(O||Te.height)},0)+S.top+S.bottom,Le=C(J,function(pe,Te,U){return Te.width>pe?Te.width:pe},0),Ee=S.top;_.vertical==="middle"&&(Ee+=(h.height-Re)/2),Ee-=(O||J[0].height)/4;var We=ce("text");return w(We,m),x(J,function(pe){var Te;switch(Ee+=O||pe.height,_.horizontal){case"left":Te=S.left;break;case"right":Te=(M?Le:re)-S.right-pe.width;break;default:Te=Math.max(((M?Le:re)-pe.width)/2+S.left,0)}var U=ce("tspan");w(U,{x:Te,y:Ee}),U.textContent=pe.text,Z(We,U)}),Ie(me),{dimensions:{width:Le,height:Re},element:We}};function Vx(u){var p=L({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},u&&u.defaultStyle||{}),h=parseInt(p.fontSize,10)-1,m=L({},p,{fontSize:h},u&&u.externalStyle||{}),_=new sp({style:p});this.getExternalLabelBounds=function(S,M){var O=_.getDimensions(M,{box:{width:90,height:30},style:m});return{x:Math.round(S.x+S.width/2-O.width/2),y:Math.round(S.y),width:Math.ceil(O.width),height:Math.ceil(O.height)}},this.getTextAnnotationBounds=function(S,M){var O=_.getDimensions(M,{box:S,style:p,align:"left-top",padding:5});return{x:S.x,y:S.y,width:S.width,height:Math.max(30,Math.round(O.height))}},this.createText=function(S,M){return _.createText(S,M||{})},this.getDefaultStyle=function(){return p},this.getExternalStyle=function(){return m}}Vx.$inject=["config.textRenderer"];var BT=/\{([^{}]+)\}/g,IT=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,jT={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ha],textRenderer:["type",Vx],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(u){return this.pathMap[u].d},this.getScaledPath=function(u,p){var h,m,_=this.pathMap[u];p.abspos?(h=p.abspos.x,m=p.abspos.y):(h=p.containerWidth*p.position.mx,m=p.containerHeight*p.position.my);var S={};if(p.position){for(var M=p.containerHeight/_.height*p.yScaleFactor,O=p.containerWidth/_.width*p.xScaleFactor,j=0;j<_.heightElements.length;j++)S["y"+j]=_.heightElements[j]*M;for(var J=0;J<_.widthElements.length;J++)S["x"+J]=_.widthElements[J]*O}var re,me,Re=(re=_.d,me={mx:h,my:m,e:S},String(re).replace(BT,function(Le,Ee){return function(We,pe,Te){var U=Te;return pe.replace(IT,function(ie,ne,Be,be,ut){ne=ne||be,U&&(ne in U&&(U=U[ne]),typeof U=="function"&&ut&&(U=U()))}),U=(U==null||U==Te?We:U)+""}(Le,Ee,me)}));return Re}}]},Wx={translate:["value",function(u,p){return p=p||{},u.replace(/{([^}]+)}/g,function(h,m){return p[m]||"{"+m+"}"})}]};function rm(u){return{top:u.y,right:u.x+(u.width||0),bottom:u.y+(u.height||0),left:u.x}}function $T(u){return p={x:u.x+(u.width||0)/2,y:u.y+(u.height||0)/2},{x:Math.round(p.x),y:Math.round(p.y)};var p}function FT(u){for(var p=u.waypoints,h=p.reduce(function(O,j,J){var re,me,Re=p[J-1];if(Re){var Le=O[O.length-1],Ee=Le&&Le.endLength||0,We=(re=Re,me=j,Math.sqrt(Math.pow(re.x-me.x,2)+Math.pow(re.y-me.y,2)));O.push({start:Re,end:j,startLength:Ee,endLength:Ee+We,length:We})}return O},[]),m=h.reduce(function(O,j){return O+j.length},0)/2,_=0,S=h[_];S.endLength<m;)S=h[++_];var M=(m-S.startLength)/S.length;return{x:S.start.x+(S.end.x-S.start.x)*M,y:S.start.y+(S.end.y-S.start.y)*M}}function im(u){return l(p=u)&&g(p,"waypoints")?FT(u):$T(u);var p}function Kn(u){return u?"<"+u.$type+(u.id?' id="'+u.id:"")+'" />':"<null>"}function lp(u,p,h){return L({id:u.id,type:u.$type,businessObject:u,di:p},h)}function zT(u,p,h){var m=u.waypoint;return!m||m.length<2?[im(p),im(h)]:m.map(function(_){return{x:_.x,y:_.y}})}function Ux(u,p,h){return new Error(`element ${Kn(p)} referenced by ${Kn(u)}#${h} not yet drawn`)}function lo(u,p,h,m,_){this._eventBus=u,this._canvas=p,this._elementFactory=h,this._elementRegistry=m,this._textRenderer=_}lo.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"],lo.prototype.add=function(u,p,h){var m,_,S,M,O,j,J;if(G(p,"bpmndi:BPMNPlane")){var re=G(u,"bpmn:SubProcess")?{id:u.id+"_plane"}:{};m=this._elementFactory.createRoot(lp(u,p,re)),this._canvas.addRootElement(m)}else if(G(p,"bpmndi:BPMNShape")){var me=!kt(u,p),Re=function(pe){return G(pe,"bpmn:Group")}(u);_=h&&(h.hidden||h.collapsed);var Le=p.bounds;m=this._elementFactory.createShape(lp(u,p,{collapsed:me,hidden:_,x:Math.round(Le.x),y:Math.round(Le.y),width:Math.round(Le.width),height:Math.round(Le.height),isFrame:Re})),G(u,"bpmn:BoundaryEvent")&&this._attachBoundary(u,m),G(u,"bpmn:Lane")&&(S=0),G(u,"bpmn:DataStoreReference")&&(M=h,O=im(Le),j=O.x,J=O.y,j>=M.x&&j<=M.x+M.width&&J>=M.y&&J<=M.y+M.height||(h=this._canvas.findRoot(h))),this._canvas.addShape(m,h,S)}else{if(!G(p,"bpmndi:BPMNEdge"))throw new Error(`unknown di ${Kn(p)} for element ${Kn(u)}`);var Ee=this._getSource(u),We=this._getTarget(u);_=h&&(h.hidden||h.collapsed),m=this._elementFactory.createConnection(lp(u,p,{hidden:_,source:Ee,target:We,waypoints:zT(p,Ee,We)})),G(u,"bpmn:DataAssociation")&&(h=this._canvas.findRoot(h)),this._canvas.addConnection(m,h,S)}return function(pe){return G(pe,"bpmn:Event")||G(pe,"bpmn:Gateway")||G(pe,"bpmn:DataStoreReference")||G(pe,"bpmn:DataObjectReference")||G(pe,"bpmn:DataInput")||G(pe,"bpmn:DataOutput")||G(pe,"bpmn:SequenceFlow")||G(pe,"bpmn:MessageFlow")||G(pe,"bpmn:Group")}(u)&&X(m)&&this.addLabel(u,p,m),this._eventBus.fire("bpmnElement.added",{element:m}),m},lo.prototype._attachBoundary=function(u,p){var h=u.attachedToRef;if(!h)throw new Error(`missing ${Kn(u)}#attachedToRef`);var m=this._elementRegistry.get(h.id),_=m&&m.attachers;if(!m)throw Ux(u,h,"attachedToRef");p.host=m,_||(m.attachers=_=[]),_.indexOf(p)===-1&&_.push(p)},lo.prototype.addLabel=function(u,p,h){var m,_,S;return m=ve(p,h),(_=X(h))&&(m=this._textRenderer.getExternalLabelBounds(m,_)),S=this._elementFactory.createLabel(lp(u,p,{id:u.id+"_label",labelTarget:h,type:"label",hidden:h.hidden||!X(h),x:Math.round(m.x),y:Math.round(m.y),width:Math.round(m.width),height:Math.round(m.height)})),this._canvas.addShape(S,h.parent)},lo.prototype._getConnectedElement=function(u,p){var h,m,_=u.$type;if(m=u[p+"Ref"],p==="source"&&_==="bpmn:DataInputAssociation"&&(m=m&&m[0]),(p==="source"&&_==="bpmn:DataOutputAssociation"||p==="target"&&_==="bpmn:DataInputAssociation")&&(m=u.$parent),h=m&&this._getElement(m))return h;throw m?Ux(u,m,p+"Ref"):new Error(`${Kn(u)}#${p} Ref not specified`)},lo.prototype._getSource=function(u){return this._getConnectedElement(u,"source")},lo.prototype._getTarget=function(u){return this._getConnectedElement(u,"target")},lo.prototype._getElement=function(u){return this._elementRegistry.get(u.id)};var HT={__depends__:[jT,{__depends__:[Wx],bpmnImporter:["type",lo]}]};function Va(u,p){var h,m,_,S;return p=!!p,s(u)||(u=[u]),x(u,function(M){var O=M;M.waypoints&&!p&&(O=Va(M.waypoints,!0));var j=O.x,J=O.y,re=O.height||0,me=O.width||0;(j<h||h===void 0)&&(h=j),(J<m||m===void 0)&&(m=J),(j+me>_||_===void 0)&&(_=j+me),(J+re>S||S===void 0)&&(S=J+re)}),{x:h,y:m,height:S-m,width:_-h}}function Gx(u){return"waypoints"in u?"connection":"x"in u?"shape":"root"}function Kx(u){return!(!u||!u.isFrame)}function Yx(u){this._counter=0,this._prefix=(u?u+"-":"")+Math.floor(1e9*Math.random())+"-"}Yx.prototype.next=function(){return this._prefix+ ++this._counter};var VT=new Yx("ov");function Dn(u,p,h,m){var _,S;this._eventBus=p,this._canvas=h,this._elementRegistry=m,this._ids=VT,this._overlayDefaults=L({show:null,scale:!0},u&&u.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(_=h.getContainer(),Cr(S=Hi('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),_.insertBefore(S,_.firstChild),S),this._init()}function qx(u,p,h){Cr(u,{left:p+"px",top:h+"px"})}function up(u,p){u.style.display=p===!1?"none":""}function Xx(u,p){u.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(h){u.style[h+"transform"]=p})}Dn.$inject=["config.overlays","eventBus","canvas","elementRegistry"],Dn.prototype.get=function(u){if(d(u)&&(u={id:u}),d(u.element)&&(u.element=this._elementRegistry.get(u.element)),u.element){var p=this._getOverlayContainer(u.element,!0);return p?u.type?v(p.overlays,E({type:u.type})):p.overlays.slice():[]}return u.type?v(this._overlays,E({type:u.type})):u.id?this._overlays[u.id]:null},Dn.prototype.add=function(u,p,h){if(l(p)&&(h=p,p=null),u.id||(u=this._elementRegistry.get(u)),!h.position)throw new Error("must specifiy overlay position");if(!h.html)throw new Error("must specifiy overlay html");if(!u)throw new Error("invalid element specified");var m=this._ids.next();return h=L({},this._overlayDefaults,h,{id:m,type:p,element:u,html:h.html}),this._addOverlay(h),m},Dn.prototype.remove=function(u){var p=this.get(u)||[];s(p)||(p=[p]);var h=this;x(p,function(m){var _=h._getOverlayContainer(m.element,!0);if(m&&(ap(m.html),ap(m.htmlContainer),delete m.htmlContainer,delete m.element,delete h._overlays[m.id]),_){var S=_.overlays.indexOf(m);S!==-1&&_.overlays.splice(S,1)}})},Dn.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"},Dn.prototype.show=function(){up(this._overlayRoot)},Dn.prototype.hide=function(){up(this._overlayRoot,!1)},Dn.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ix(this._overlayRoot)},Dn.prototype._updateOverlayContainer=function(u){var p=u.element,h=u.html,m=p.x,_=p.y;if(p.waypoints){var S=Va(p);m=S.x,_=S.y}qx(h,m,_),function(M,O,j){arguments.length==2?M.getAttribute(O):j===null?M.removeAttribute(O):M.setAttribute(O,j)}(u.html,"data-container-id",p.id)},Dn.prototype._updateOverlay=function(u){var p,h,m=u.position,_=u.htmlContainer,S=u.element,M=m.left,O=m.top;m.right!==void 0&&(p=S.waypoints?Va(S).width:S.width,M=-1*m.right+p),m.bottom!==void 0&&(h=S.waypoints?Va(S).height:S.height,O=-1*m.bottom+h),qx(_,M||0,O||0),this._updateOverlayVisibilty(u,this._canvas.viewbox())},Dn.prototype._createOverlayContainer=function(u){var p=Hi('<div class="djs-overlays" />');Cr(p,{position:"absolute"}),this._overlayRoot.appendChild(p);var h={html:p,element:u,overlays:[]};return this._updateOverlayContainer(h),this._overlayContainers.push(h),h},Dn.prototype._updateRoot=function(u){var p=u.scale||1,h="matrix("+[p,0,0,p,-1*u.x*p,-1*u.y*p].join(",")+")";Xx(this._overlayRoot,h)},Dn.prototype._getOverlayContainer=function(u,p){var h=y(this._overlayContainers,function(m){return m.element===u});return h||p?h:this._createOverlayContainer(u)},Dn.prototype._addOverlay=function(u){var p,h,m=u.id,_=u.element,S=u.html;S.get&&S.constructor.prototype.jquery&&(S=S.get(0)),d(S)&&(S=Hi(S)),h=this._getOverlayContainer(_),Cr(p=Hi('<div class="djs-overlay" data-overlay-id="'+m+'">'),{position:"absolute"}),p.appendChild(S),u.type&&rp(p).add("djs-overlay-"+u.type),up(p,this._canvas.findRoot(_)===this._canvas.getRootElement()),u.htmlContainer=p,h.overlays.push(u),h.html.appendChild(p),this._overlays[m]=u,this._updateOverlay(u),this._updateOverlayVisibilty(u,this._canvas.viewbox())},Dn.prototype._updateOverlayVisibilty=function(u,p){var h=u.show,m=this._canvas.findRoot(u.element),_=h&&h.minZoom,S=h&&h.maxZoom,M=u.htmlContainer,O=!0;(m!==this._canvas.getRootElement()||h&&(a(_)&&_>p.scale||a(S)&&S<p.scale))&&(O=!1),up(M,O),this._updateOverlayScale(u,p)},Dn.prototype._updateOverlayScale=function(u,p){var h,m,_,S=u.scale,M=u.htmlContainer,O="";S!==!0&&(S===!1?(h=1,m=1):(h=S.min,m=S.max),a(h)&&p.scale<h&&(_=(1/p.scale||1)*h),a(m)&&p.scale>m&&(_=(1/p.scale||1)*m)),a(_)&&(O="scale("+_+","+_+")"),Xx(M,O)},Dn.prototype._updateOverlaysVisibilty=function(u){var p=this;x(this._overlays,function(h){p._updateOverlayVisibilty(h,u)})},Dn.prototype._init=function(){var u=this._eventBus,p=this;u.on("canvas.viewbox.changing",function(h){p.hide()}),u.on("canvas.viewbox.changed",function(h){var m;m=h.viewbox,p._updateRoot(m),p._updateOverlaysVisibilty(m),p.show()}),u.on(["shape.remove","connection.remove"],function(h){var m=h.element;x(p.get({element:m}),function(M){p.remove(M.id)});var _=p._getOverlayContainer(m);if(_){ap(_.html);var S=p._overlayContainers.indexOf(_);S!==-1&&p._overlayContainers.splice(S,1)}}),u.on("element.changed",500,function(h){var m=h.element,_=p._getOverlayContainer(m,!0);_&&(x(_.overlays,function(S){p._updateOverlay(S)}),p._updateOverlayContainer(_))}),u.on("element.marker.update",function(h){var m=p._getOverlayContainer(h.element,!0);m&&rp(m.html)[h.add?"add":"remove"](h.marker)}),u.on("root.set",function(){p._updateOverlaysVisibilty(p._canvas.viewbox())}),u.on("diagram.clear",this.clear,this)};var Qx={__init__:["overlays"],overlays:["type",Dn]};function Zx(u,p,h,m){u.on("element.changed",function(_){var S=_.element;(S.parent||S===p.getRootElement())&&(_.gfx=h.getGraphics(S)),_.gfx&&u.fire(Gx(S)+".changed",_)}),u.on("elements.changed",function(_){var S=_.elements;S.forEach(function(M){u.fire("element.changed",{element:M})}),m.updateContainments(S)}),u.on("shape.changed",function(_){m.update("shape",_.element,_.gfx)}),u.on("connection.changed",function(_){m.update("connection",_.element,_.gfx)})}Zx.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var WT={__init__:["changeSupport"],changeSupport:["type",Zx]};function dr(u){this._eventBus=u}function uo(u){return function(p,h,m,_,S){(f(p)||c(p))&&(S=_,_=m,m=h,h=p,p=null),this.on(p,u,h,m,_,S)}}function om(u,p){p.invoke(dr,this),this.executed(function(h){var m=h.context;m.rootElement?u.setRootElement(m.rootElement):m.rootElement=u.getRootElement()}),this.revert(function(h){var m=h.context;m.rootElement&&u.setRootElement(m.rootElement)})}dr.$inject=["eventBus"],dr.prototype.on=function(u,p,h,m,_,S){if((f(p)||c(p))&&(S=_,_=m,m=h,h=p,p=null),f(h)&&(S=_,_=m,m=h,h=1e3),l(_)&&(S=_,_=!1),!f(m))throw new Error("handlerFn must be a function");s(u)||(u=[u]);var M=this._eventBus;x(u,function(O){var j=["commandStack",O,p].filter(function(J){return J}).join(".");M.on(j,h,_?function(J,re){return function(me){return J.call(re||null,me.context,me.command,me)}}(m,S):m,S)})},dr.prototype.canExecute=uo("canExecute"),dr.prototype.preExecute=uo("preExecute"),dr.prototype.preExecuted=uo("preExecuted"),dr.prototype.execute=uo("execute"),dr.prototype.executed=uo("executed"),dr.prototype.postExecute=uo("postExecute"),dr.prototype.postExecuted=uo("postExecuted"),dr.prototype.revert=uo("revert"),dr.prototype.reverted=uo("reverted"),n(om,dr),om.$inject=["canvas","injector"];var UT={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",om]},GT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},KT="_plane";function am(u){var p=u.id;return G(u,"bpmn:SubProcess")?function(h){return h+KT}(p):p}function Jx(u,p,h){var m=Hi('<ul class="bjs-breadcrumbs"></ul>'),_=h.getContainer(),S=rp(_);_.appendChild(m);var M=[];function O(j){j&&(M=function(me){for(var Re=oe(me),Le=[],Ee=Re;Ee;Ee=Ee.$parent)(G(Ee,"bpmn:SubProcess")||G(Ee,"bpmn:Process"))&&Le.push(Ee);return Le.reverse()}(j));var J=M.flatMap(function(me){var Re=h.findRoot(am(me))||h.findRoot(me.id);if(!Re&&G(me,"bpmn:Process")){var Le=p.find(function(Te){var U=oe(Te);return U&&U.get("processRef")===me});Re=Le&&h.findRoot(Le.id)}if(!Re)return[];var Ee,We=(Ee=""+(Ee=me.name||me.id))&&Ee.replace(/[&<>"']/g,function(Te){return GT[Te]}),pe=Hi('<li><span class="bjs-crumb"><a title="'+We+'">'+We+"</a></span></li>");return pe.addEventListener("click",function(){h.setRootElement(Re)}),pe});m.innerHTML="";var re=J.length>1;S.toggle("bjs-breadcrumbs-shown",re),J.forEach(function(me){m.appendChild(me)})}u.on("element.changed",function(j){var J=oe(j.element);y(M,function(re){return re===J})&&O()}),u.on("root.set",function(j){O(j.element)})}function e_(u,p){var h=null,m=new YT;u.on("root.set",function(_){var S=_.element,M=p.viewbox(),O=m.get(S);if(m.set(h,{x:M.x,y:M.y,zoom:M.scale}),h=S,G(S,"bpmn:SubProcess")||O){O=O||{x:0,y:0,zoom:1};var j=(M.x-O.x)*M.scale,J=(M.y-O.y)*M.scale;j===0&&J===0||p.scroll({dx:j,dy:J}),O.zoom!==M.scale&&p.zoom(O.zoom,{x:0,y:0})}}),u.on("diagram.clear",function(){m.clear(),h=null})}function YT(){this._entries=[],this.set=function(u,p){var h=!1;for(var m in this._entries)if(this._entries[m][0]===u){this._entries[m][1]=p,h=!0;break}h||this._entries.push([u,p])},this.get=function(u){for(var p in this._entries)if(this._entries[p][0]===u)return this._entries[p][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(u){var p=-1;for(var h in this._entries)if(this._entries[h][0]===u){p=h;break}p!==-1&&this._entries.splice(p,1)}}Jx.$inject=["eventBus","elementRegistry","canvas"],e_.$inject=["eventBus","canvas"];var qT=180,XT=160;function Wa(u,p){this._eventBus=u,this._moddle=p;var h=this;u.on("import.render.start",1500,function(m,_){h._handleImport(_.definitions)})}function t_(u){return G(u,"bpmndi:BPMNDiagram")?u:t_(u.$parent)}Wa.prototype._handleImport=function(u){if(u.diagrams){var p=this;this._definitions=u,this._processToDiagramMap={},u.diagrams.forEach(function(h){h.plane&&h.plane.bpmnElement&&(p._processToDiagramMap[h.plane.bpmnElement.id]=h)}),u.diagrams.filter(h=>h.plane).flatMap(h=>p._createNewDiagrams(h.plane)).forEach(function(h){p._movePlaneElementsToOrigin(h.plane)})}},Wa.prototype._createNewDiagrams=function(u){var p=this,h=[],m=[];u.get("planeElement").forEach(function(S){var M=S.bpmnElement;if(M){var O=M.$parent;G(M,"bpmn:SubProcess")&&!S.isExpanded&&h.push(M),function(j,J){var re=j.$parent;return!(!G(re,"bpmn:SubProcess")||re===J.bpmnElement||ae(j,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}(M,u)&&m.push({diElement:S,parent:O})}});var _=[];return h.forEach(function(S){if(!p._processToDiagramMap[S.id]){var M=p._createDiagram(S);p._processToDiagramMap[S.id]=M,_.push(M)}}),m.forEach(function(S){for(var M=S.diElement,O=S.parent;O&&h.indexOf(O)===-1;)O=O.$parent;if(O){var j=p._processToDiagramMap[O.id];p._moveToDiPlane(M,j.plane)}}),_},Wa.prototype._movePlaneElementsToOrigin=function(u){var p=u.get("planeElement"),h=function(S){var M={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return S.planeElement.forEach(function(O){if(O.bounds){var j=rm(O.bounds);M.top=Math.min(j.top,M.top),M.left=Math.min(j.left,M.left)}}),function(O){return{x:O.left,y:O.top,width:O.right-O.left,height:O.bottom-O.top}}(M)}(u),m=h.x-qT,_=h.y-XT;p.forEach(function(S){S.waypoint?S.waypoint.forEach(function(M){M.x=M.x-m,M.y=M.y-_}):S.bounds&&(S.bounds.x=S.bounds.x-m,S.bounds.y=S.bounds.y-_)})},Wa.prototype._moveToDiPlane=function(u,p){var h=t_(u).plane.get("planeElement");h.splice(h.indexOf(u),1),p.get("planeElement").push(u)},Wa.prototype._createDiagram=function(u){var p=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:u}),h=this._moddle.create("bpmndi:BPMNDiagram",{plane:p});return p.$parent=h,p.bpmnElement=u,h.$parent=this._definitions,this._definitions.diagrams.push(h),h},Wa.$inject=["eventBus","moddle"];var cp=250;function Fo(u,p,h,m,_){dr.call(this,p),this._canvas=u,this._eventBus=p,this._elementRegistry=h,this._overlays=m,this._translate=_;var S=this;this.executed("shape.toggleCollapse",cp,function(M){var O=M.shape;S._canDrillDown(O)?S._addOverlay(O):S._removeOverlay(O)},!0),this.reverted("shape.toggleCollapse",cp,function(M){var O=M.shape;S._canDrillDown(O)?S._addOverlay(O):S._removeOverlay(O)},!0),this.executed(["shape.create","shape.move","shape.delete"],cp,function(M){var O=M.oldParent,j=M.newParent||M.parent,J=M.shape;S._canDrillDown(J)&&S._addOverlay(J),S._updateDrilldownOverlay(O),S._updateDrilldownOverlay(j),S._updateDrilldownOverlay(J)},!0),this.reverted(["shape.create","shape.move","shape.delete"],cp,function(M){var O=M.oldParent,j=M.newParent||M.parent,J=M.shape;S._canDrillDown(J)&&S._addOverlay(J),S._updateDrilldownOverlay(O),S._updateDrilldownOverlay(j),S._updateDrilldownOverlay(J)},!0),p.on("import.render.complete",function(){h.filter(function(M){return S._canDrillDown(M)}).map(function(M){S._addOverlay(M)})})}n(Fo,dr),Fo.prototype._updateDrilldownOverlay=function(u){var p=this._canvas;if(u){var h=p.findRoot(u);h&&this._updateOverlayVisibility(h)}},Fo.prototype._canDrillDown=function(u){var p=this._canvas;return G(u,"bpmn:SubProcess")&&p.findRoot(am(u))},Fo.prototype._updateOverlayVisibility=function(u){var p=this._overlays,h=oe(u),m=p.get({element:h.id,type:"drilldown"})[0];if(m){var _=h&&h.get("flowElements")&&h.get("flowElements").length;rp(m.html).toggle("bjs-drilldown-empty",!_)}},Fo.prototype._addOverlay=function(u){var p=this._canvas,h=this._overlays,m=oe(u);h.get({element:u,type:"drilldown"}).length&&this._removeOverlay(u);var _=Hi('<button type="button" class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>'),S=m.get("name")||m.get("id"),M=this._translate("Open {element}",{element:S});_.setAttribute("title",M),_.addEventListener("click",function(){p.setRootElement(p.findRoot(am(u)))}),h.add(u,"drilldown",{position:{bottom:-7,right:-8},html:_}),this._updateOverlayVisibility(u)},Fo.prototype._removeOverlay=function(u){this._overlays.remove({element:u,type:"drilldown"})},Fo.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];var QT={__depends__:[Qx,WT,UT],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",Jx],drilldownCentering:["type",e_],drilldownOverlayBehavior:["type",Fo],subprocessCompatibility:["type",Wa]};function Ua(u,p){this._eventBus=u,this.offset=5;var h=p.cls("djs-outline",["no-fill"]),m=this;function _(S){var M=ce("rect");return w(M,L({x:0,y:0,rx:4,width:100,height:100},h)),M}u.on(["shape.added","shape.changed"],500,function(S){var M=S.element,O=S.gfx,j=Ti(".djs-outline",O);j||Z(O,j=m.getOutline(M)||_()),m.updateShapeOutline(j,M)}),u.on(["connection.added","connection.changed"],function(S){var M=S.element,O=S.gfx,j=Ti(".djs-outline",O);j||Z(O,j=_()),m.updateConnectionOutline(j,M)})}Ua.prototype.updateShapeOutline=function(u,p){var h=!1,m=this._getProviders();m.length&&x(m,function(_){h=h||_.updateOutline(p,u)}),h||w(u,{x:-this.offset,y:-this.offset,width:p.width+2*this.offset,height:p.height+2*this.offset})},Ua.prototype.updateConnectionOutline=function(u,p){var h=Va(p);w(u,{x:h.x-this.offset,y:h.y-this.offset,width:h.width+2*this.offset,height:h.height+2*this.offset})},Ua.prototype.registerProvider=function(u,p){p||(p=u,u=1e3),this._eventBus.on("outline.getProviders",u,function(h){h.providers.push(p)})},Ua.prototype._getProviders=function(){var u=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(u),u.providers},Ua.prototype.getOutline=function(u){var p;return x(this._getProviders(),function(h){f(h.getOutline)&&(p=p||h.getOutline(u))}),p},Ua.$inject=["eventBus","styles","elementRegistry"];var n_={__init__:["outline"],outline:["type",Ua]};const ZT={width:36,height:50},JT={width:50,height:50};function r_(u,p,h){return ce("path",{d:u,strokeWidth:2,transform:`translate(${p.x}, ${p.y})`,...h})}function pp(u,p){this._styles=p,u.registerProvider(this)}function i_(u,p){var h;return p==="bpmn:DataObjectReference"?h=ZT:p==="bpmn:DataStoreReference"&&(h=JT),u.width===h.width&&u.height===h.height}pp.$inject=["outline","styles"],pp.prototype.getOutline=function(u){const p=this._styles.cls("djs-outline",["no-fill"]);var h;if(!Ke(u))return G(u,"bpmn:Gateway")?(L((h=ce("rect")).style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),w(h,L({x:2,y:2,rx:4,width:u.width-4,height:u.height-4},p))):ae(u,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?w(h=ce("rect"),L({x:-5,y:-5,rx:14,width:u.width+10,height:u.height+10},p)):G(u,"bpmn:EndEvent")?w(h=ce("circle"),L({cx:u.width/2,cy:u.height/2,r:u.width/2+5+1},p)):G(u,"bpmn:Event")?w(h=ce("circle"),L({cx:u.width/2,cy:u.height/2,r:u.width/2+5},p)):G(u,"bpmn:DataObjectReference")&&i_(u,"bpmn:DataObjectReference")?h=r_("M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",{x:-6,y:-6},p):G(u,"bpmn:DataStoreReference")&&i_(u,"bpmn:DataStoreReference")&&(h=r_("M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",{x:-6,y:-6},p)),h},pp.prototype.updateOutline=function(u,p){if(!Ke(u))return ae(u,["bpmn:SubProcess","bpmn:Group"])?(w(p,{width:u.width+10,height:u.height+10}),!0):!!ae(u,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};var eA={__depends__:[n_],__init__:["outlineProvider"],outlineProvider:["type",pp]};function o_(u){return u.originalEvent||u.srcEvent}function a_(u,p){return(o_(u)||u).button===p}function fp(u){return a_(u,0)}function tA(u){return!0}function dp(u){return fp(u)||function(p){return a_(p,1)}(u)}function s_(u,p,h){var m=this;function _(U,ie,ne){var Be,be;(function(ut,st){var He=j[ut]||fp;return!He(st)})(U,ie)||(ne?be=p.getGraphics(ne):(Be=ie.delegateTarget||ie.target)&&(be=Be,ne=p.get(be)),be&&ne&&u.fire(U,{element:ne,gfx:be,originalEvent:ie})===!1&&(ie.stopPropagation(),ie.preventDefault()))}var S={};function M(U){return S[U]}var O={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},j={"element.contextmenu":tA,"element.mousedown":dp,"element.mouseup":dp,"element.click":dp,"element.dblclick":dp},J="svg, .djs-element";function re(U,ie,ne,Be){var be=S[ne]=function(ut){_(ne,ut)};Be&&(j[ne]=Be),be.$delegate=tm.bind(U,J,ie,be)}function me(U,ie,ne){var Be=M(ne);Be&&tm.unbind(U,ie,Be.$delegate)}u.on("canvas.destroy",function(U){var ie;ie=U.svg,x(O,function(ne,Be){me(ie,Be,ne)})}),u.on("canvas.init",function(U){var ie;ie=U.svg,x(O,function(ne,Be){re(ie,Be,ne)})}),u.on(["shape.added","connection.added"],function(U){var ie=U.element,ne=U.gfx;u.fire("interactionEvents.createHit",{element:ie,gfx:ne})}),u.on(["shape.changed","connection.changed"],500,function(U){var ie=U.element,ne=U.gfx;u.fire("interactionEvents.updateHit",{element:ie,gfx:ne})}),u.on("interactionEvents.createHit",500,function(U){var ie=U.element,ne=U.gfx;m.createDefaultHit(ie,ne)}),u.on("interactionEvents.updateHit",function(U){var ie=U.element,ne=U.gfx;m.updateDefaultHit(ie,ne)});var Re=We("djs-hit djs-hit-stroke"),Le=We("djs-hit djs-hit-click-stroke"),Ee={all:We("djs-hit djs-hit-all"),"click-stroke":Le,stroke:Re,"no-move":We("djs-hit djs-hit-no-move")};function We(U,ie){return ie=L({stroke:"white",strokeWidth:15},ie||{}),h.cls(U,["no-fill","no-border"],ie)}function pe(U,ie){var ne=Ee[ie];if(!ne)throw new Error("invalid hit type <"+ie+">");return w(U,ne),U}function Te(U,ie){Z(U,ie)}this.removeHits=function(U){var ie;x((ie=".djs-hit",(U||document).querySelectorAll(ie)),Ie)},this.createDefaultHit=function(U,ie){var ne,Be=U.waypoints,be=U.isFrame;return Be?this.createWaypointsHit(ie,Be):(ne=be?"stroke":"all",this.createBoxHit(ie,ne,{width:U.width,height:U.height}))},this.createWaypointsHit=function(U,ie){var ne=oi(ie);return pe(ne,"stroke"),Te(U,ne),ne},this.createBoxHit=function(U,ie,ne){ne=L({x:0,y:0},ne);var Be=ce("rect");return pe(Be,ie),w(Be,ne),Te(U,Be),Be},this.updateDefaultHit=function(U,ie){var ne=Ti(".djs-hit",ie);if(ne)return U.waypoints?fr(ne,U.waypoints):w(ne,{width:U.width,height:U.height}),ne},this.fire=_,this.triggerMouseEvent=function(U,ie,ne){var Be=O[U];if(!Be)throw new Error("unmapped DOM event name <"+U+">");return _(Be,ie,ne)},this.mouseHandler=M,this.registerEvent=re,this.unregisterEvent=me}s_.$inject=["eventBus","elementRegistry","styles"];var nA={__init__:["interactionEvents"],interactionEvents:["type",s_]};function Bs(u,p){this._eventBus=u,this._canvas=p,this._selectedElements=[];var h=this;u.on(["shape.remove","connection.remove"],function(m){var _=m.element;h.deselect(_)}),u.on(["diagram.clear","root.set"],function(m){h.select(null)})}Bs.$inject=["eventBus","canvas"],Bs.prototype.deselect=function(u){var p=this._selectedElements,h=p.indexOf(u);if(h!==-1){var m=p.slice();p.splice(h,1),this._eventBus.fire("selection.changed",{oldSelection:m,newSelection:p})}},Bs.prototype.get=function(){return this._selectedElements},Bs.prototype.isSelected=function(u){return this._selectedElements.indexOf(u)!==-1},Bs.prototype.select=function(u,p){var h=this._selectedElements,m=h.slice();s(u)||(u=u?[u]:[]);var _=this._canvas,S=_.getRootElement();u=u.filter(function(M){var O=_.findRoot(M);return S===O}),p?x(u,function(M){h.indexOf(M)===-1&&h.push(M)}):this._selectedElements=h=u.slice(),this._eventBus.fire("selection.changed",{oldSelection:m,newSelection:h})};var l_="hover",u_="selected";function sm(u,p,h){this._canvas=u;var m=this;function _(M,O){u.addMarker(M,O)}function S(M,O){u.removeMarker(M,O)}this._multiSelectionBox=null,p.on("element.hover",function(M){_(M.element,l_)}),p.on("element.out",function(M){S(M.element,l_)}),p.on("selection.changed",function(M){var O=M.oldSelection,j=M.newSelection;x(O,function(J){j.indexOf(J)===-1&&S(J,u_)}),x(j,function(J){O.indexOf(J)===-1&&_(J,u_)}),m._updateSelectionOutline(j)}),p.on("element.changed",function(M){h.isSelected(M.element)&&m._updateSelectionOutline(h.get())})}function c_(u,p,h,m){u.on("create.end",500,function(_){var S=_.context,M=S.canExecute,O=S.elements,j=(S.hints||{}).autoSelect;if(M){if(j===!1)return;s(j)?p.select(j):p.select(O.filter(rA))}}),u.on("connect.end",500,function(_){var S=_.context.connection;S&&p.select(S)}),u.on("shape.move.end",500,function(_){var S=_.previousSelection||[],M=m.get(_.context.shape.id);y(S,function(O){return M.id===O.id})||p.select(M)}),u.on("element.click",function(_){if(fp(_)){var S=_.element;S===h.getRootElement()&&(S=null);var M=p.isSelected(S),O=p.get().length>1,j=function(J){var re=o_(J)||J;return fp(J)&&re.shiftKey}(_);if(M&&O)return j?p.deselect(S):p.select(S);M?p.deselect(S):p.select(S,j)}})}function rA(u){return!u.hidden}sm.$inject=["canvas","eventBus","selection"],sm.prototype._updateSelectionOutline=function(u){var p=this._canvas.getLayer("selectionOutline");(function(S){for(var M;M=S.firstChild;)S.removeChild(M)})(p);var h=u.length>1;if(F(this._canvas.getContainer())[h?"add":"remove"]("djs-multi-select"),h){var m=function(S){return{x:S.x-6,y:S.y-6,width:S.width+12,height:S.height+12}}(Va(u)),_=ce("rect");w(_,L({rx:3},m)),F(_).add("djs-selection-outline"),Z(p,_)}},c_.$inject=["eventBus","selection","canvas","elementRegistry"];var iA={__init__:["selectionVisuals","selectionBehavior"],__depends__:[nA,n_],selection:["type",Bs],selectionVisuals:["type",sm],selectionBehavior:["type",c_]};const oA=/^class[ {]/;function lm(u){return Array.isArray(u)}function um(u,p){return Object.prototype.hasOwnProperty.call(u,p)}function hp(...u){u.length===1&&lm(u[0])&&(u=u[0]);const p=(u=[...u]).pop();return p.$inject=u,p}const aA=/constructor\s*[^(]*\(\s*([^)]*)\)/m,sA=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,lA=/\/\*([^*]*)\*\//m;function uA(u){if(typeof u!="function")throw new Error(`Cannot annotate "${u}". Expected a function!`);const p=u.toString().match(function(m){return oA.test(m.toString())}(u)?aA:sA);if(!p)return[];const h=p[1]||p[2];return h&&h.split(",").map(m=>{const _=m.match(lA);return(_&&_[1]||m).trim()})||[]}function p_(u,p){const h=p||{get:function(U,ie){if(m.push(U),ie===!1)return null;throw O(`No provider for "${U}"!`)}},m=[],_=this._providers=Object.create(h._providers||null),S=this._instances=Object.create(null),M=S.injector=this,O=function(U){const ie=m.join(" -> ");return m.length=0,new Error(ie?`${U} (Resolving: ${ie})`:U)};function j(U,ie){if(!_[U]&&U.includes(".")){const ne=U.split(".");let Be=j(ne.shift());for(;ne.length;)Be=Be[ne.shift()];return Be}if(um(S,U))return S[U];if(um(_,U)){if(m.indexOf(U)!==-1)throw m.push(U),O("Cannot resolve circular dependency!");return m.push(U),S[U]=_[U][0](_[U][1]),m.pop(),S[U]}return h.get(U,ie)}function J(U,ie){if(ie===void 0&&(ie={}),typeof U!="function"){if(!lm(U))throw O(`Cannot invoke "${U}". Expected a function!`);U=hp(U.slice())}return{fn:U,dependencies:(U.$inject||uA(U)).map(ne=>um(ie,ne)?ie[ne]:j(ne))}}function re(U){const{fn:ie,dependencies:ne}=J(U);return new(Function.prototype.bind.call(ie,null,...ne))}function me(U,ie,ne){const{fn:Be,dependencies:be}=J(U,ne);return Be.apply(ie,be)}function Re(U){return hp(ie=>U.get(ie))}function Le(U,ie){if(ie&&ie.length){const ne=Object.create(null),Be=Object.create(null),be=[],ut=[],st=[];let He,Ut,_e,xe;for(let et in _)He=_[et],ie.indexOf(et)!==-1&&(He[2]==="private"?(Ut=be.indexOf(He[3]),Ut===-1?(_e=He[3].createChild([],ie),xe=Re(_e),be.push(He[3]),ut.push(_e),st.push(xe),ne[et]=[xe,et,"private",_e]):ne[et]=[st[Ut],et,"private",ut[Ut]]):ne[et]=[He[2],He[1]],Be[et]=!0),He[2]!=="factory"&&He[2]!=="type"||!He[1].$scope||ie.forEach(pt=>{He[1].$scope.indexOf(pt)!==-1&&(ne[et]=[He[2],He[1]],Be[pt]=!0)});ie.forEach(et=>{if(!Be[et])throw new Error('No provider for "'+et+'". Cannot use provider from the parent!')}),U.unshift(ne)}return new p_(U,M)}const Ee={factory:me,type:re,value:function(U){return U}};function We(U,ie){const ne=U.__init__||[];return function(){ne.forEach(Be=>{typeof Be=="string"?ie.get(Be):ie.invoke(Be)})}}function pe(U){const ie=U.__exports__;if(ie){const ne=U.__modules__,Be=Object.keys(U).reduce((He,Ut)=>(Ut!=="__exports__"&&Ut!=="__modules__"&&Ut!=="__init__"&&Ut!=="__depends__"&&(He[Ut]=U[Ut]),He),Object.create(null)),be=Le((ne||[]).concat(Be)),ut=hp(function(He){return be.get(He)});ie.forEach(function(He){_[He]=[ut,He,"private",be]});const st=(U.__init__||[]).slice();return st.unshift(function(){be.init()}),We(U=Object.assign({},U,{__init__:st}),be)}return Object.keys(U).forEach(function(ne){if(ne==="__init__"||ne==="__depends__")return;const Be=U[ne];if(Be[2]==="private")return void(_[ne]=Be);const be=Be[0],ut=Be[1];_[ne]=[Ee[be],cA(be,ut),be]}),We(U,M)}function Te(U,ie){return U.indexOf(ie)!==-1||(U=(ie.__depends__||[]).reduce(Te,U)).indexOf(ie)!==-1?U:U.concat(ie)}this.get=j,this.invoke=me,this.instantiate=re,this.createChild=Le,this.init=function(U){const ie=U.reduce(Te,[]).map(pe);let ne=!1;return function(){ne||(ne=!0,ie.forEach(Be=>Be()))}}(u)}function cA(u,p){return u!=="value"&&lm(p)&&(p=hp(p.slice())),p}function zo(u,p){Y.call(this,u,1),this.CONNECTION_STYLE=p.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=p.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=p.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}n(zo,Y),zo.prototype.canRender=function(){return!0},zo.prototype.drawShape=function(u,p,h){var m=ce("rect");return w(m,{x:0,y:0,width:p.width||0,height:p.height||0}),Kx(p)?w(m,L({},this.FRAME_STYLE,h||{})):w(m,L({},this.SHAPE_STYLE,h||{})),Z(u,m),m},zo.prototype.drawConnection=function(u,p,h){var m=oi(p.waypoints,L({},this.CONNECTION_STYLE,h||{}));return Z(u,m),m},zo.prototype.getShapePath=function(u){var p=u.x,h=u.y,m=u.width;return wt([["M",p,h],["l",m,0],["l",0,u.height],["l",-m,0],["z"]])},zo.prototype.getConnectionPath=function(u){var p,h,m=u.waypoints,_=[];for(p=0;h=m[p];p++)h=h.original||h,_.push([p===0?"M":"L",h.x,h.y]);return wt(_)},zo.$inject=["eventBus","styles"];var pA={__init__:["defaultRenderer"],defaultRenderer:["type",zo],styles:["type",function(){var u={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},p=this;this.cls=function(h,m,_){return L(this.style(m,_),{class:h})},this.style=function(h,m){s(h)||m||(m=h,h=[]);var _=C(h,function(S,M){return L(S,u[M]||{})},{});return m?L(_,m):_},this.computeStyle=function(h,m,_){return s(m)||(_=m,m=[]),p.style(m||[],L({},_,h||{}))}}]};function mp(u,p){return Math.round(u*p)/p}function f_(u){return c(u)?u+"px":u}function d_(u,p,h){const m=ce("g");F(m).add(p);const _=h!==void 0?h:u.childNodes.length-1;return u.insertBefore(m,u.childNodes[_]||null),m}const fA={shape:["x","y","width","height"],connection:["waypoints"]};function at(u,p,h,m){this._eventBus=p,this._elementRegistry=m,this._graphicsFactory=h,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(u||{})}function h_(u,p){const h="matrix("+p.a+","+p.b+","+p.c+","+p.d+","+p.e+","+p.f+")";u.setAttribute("transform",h)}at.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],at.prototype._init=function(u){const p=this._eventBus,h=this._container=function(S){const M=(S=L({},{width:"100%",height:"100%"},S)).container||document.body,O=document.createElement("div");return O.setAttribute("class","djs-container djs-parent"),Cr(O,{position:"relative",overflow:"hidden",width:f_(S.width),height:f_(S.height)}),M.appendChild(O),O}(u),m=this._svg=ce("svg");w(m,{width:"100%",height:"100%"}),Z(h,m);const _=this._viewport=d_(m,"viewport");u.deferUpdate&&(this._viewboxChanged=function(S,M){let O,j,J,re;function me(We){let pe=Date.now(),Te=We?0:re+M-pe;if(Te>0)return Re(Te);S.apply(J,j),Le()}function Re(We){O=setTimeout(me,We)}function Le(){O&&clearTimeout(O),O=re=j=J=void 0}function Ee(...We){re=Date.now(),j=We,J=this,O||Re(M)}return Ee.flush=function(){O&&me(!0),Le()},Ee.cancel=Le,Ee}(z(this._viewboxChanged,this),300)),p.on("diagram.init",()=>{p.fire("canvas.init",{svg:m,viewport:_})}),p.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),p.on("diagram.destroy",500,this._destroy,this),p.on("diagram.clear",500,this._clear,this)},at.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const u=this._container.parentNode;u&&u.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},at.prototype._clear=function(){this._elementRegistry.getAll().forEach(u=>{const p=Gx(u);p==="root"?this.removeRootElement(u):this._removeElement(u,p)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},at.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},at.prototype.getLayer=function(u,p){if(!u)throw new Error("must specify a name");let h=this._layers[u];if(h||(h=this._layers[u]=this._createLayer(u,p)),p!==void 0&&h.index!==p)throw new Error("layer <"+u+"> already created at index <"+p+">");return h.group},at.prototype._getChildIndex=function(u){return C(this._layers,function(p,h){return h.visible&&u>=h.index&&p++,p},0)},at.prototype._createLayer=function(u,p){p===void 0&&(p=1);const h=this._getChildIndex(p);return{group:d_(this._viewport,"layer-"+u,h),index:p,visible:!0}},at.prototype.showLayer=function(u){if(!u)throw new Error("must specify a name");const p=this._layers[u];if(!p)throw new Error("layer <"+u+"> does not exist");const h=this._viewport,m=p.group,_=p.index;if(p.visible)return m;const S=this._getChildIndex(_);return h.insertBefore(m,h.childNodes[S]||null),p.visible=!0,m},at.prototype.hideLayer=function(u){if(!u)throw new Error("must specify a name");const p=this._layers[u];if(!p)throw new Error("layer <"+u+"> does not exist");const h=p.group;return p.visible&&(Ie(h),p.visible=!1),h},at.prototype._removeLayer=function(u){const p=this._layers[u];p&&(delete this._layers[u],Ie(p.group))},at.prototype.getActiveLayer=function(){const u=this._findPlaneForRoot(this.getRootElement());return u?u.layer:null},at.prototype.findRoot=function(u){return typeof u=="string"&&(u=this._elementRegistry.get(u)),u?(this._findPlaneForRoot(function(h){for(;h.parent;)h=h.parent;return h}(u))||{}).rootElement:void 0},at.prototype.getRootElements=function(){return this._planes.map(function(u){return u.rootElement})},at.prototype._findPlaneForRoot=function(u){return y(this._planes,function(p){return p.rootElement===u})},at.prototype.getContainer=function(){return this._container},at.prototype._updateMarker=function(u,p,h){let m;u.id||(u=this._elementRegistry.get(u)),u.markers=u.markers||new Set,m=this._elementRegistry._elements[u.id],m&&(x([m.gfx,m.secondaryGfx],function(_){_&&(h?(u.markers.add(p),F(_).add(p)):(u.markers.delete(p),F(_).remove(p)))}),this._eventBus.fire("element.marker.update",{element:u,gfx:m.gfx,marker:p,add:!!h}))},at.prototype.addMarker=function(u,p){this._updateMarker(u,p,!0)},at.prototype.removeMarker=function(u,p){this._updateMarker(u,p,!1)},at.prototype.hasMarker=function(u,p){return u.id||(u=this._elementRegistry.get(u)),!!u.markers&&u.markers.has(p)},at.prototype.toggleMarker=function(u,p){this.hasMarker(u,p)?this.removeMarker(u,p):this.addMarker(u,p)},at.prototype.getRootElement=function(){const u=this._rootElement;return u||this._planes.length?u:this.setRootElement(this.addRootElement(null))},at.prototype.addRootElement=function(u){const p=this._rootsIdx++;u||(u={id:"__implicitroot_"+p,children:[],isImplicit:!0});const h=u.layer="root-"+p;this._ensureValid("root",u);const m=this.getLayer(h,0);return this.hideLayer(h),this._addRoot(u,m),this._planes.push({rootElement:u,layer:m}),u},at.prototype.removeRootElement=function(u){if(typeof u=="string"&&(u=this._elementRegistry.get(u)),this._findPlaneForRoot(u))return this._removeRoot(u),this._removeLayer(u.layer),this._planes=this._planes.filter(function(p){return p.rootElement!==u}),this._rootElement===u&&(this._rootElement=null),u},at.prototype.setRootElement=function(u){if(u===this._rootElement)return u;let p;if(!u)throw new Error("rootElement required");return p=this._findPlaneForRoot(u),p||(u=this.addRootElement(u)),this._setRoot(u),u},at.prototype._removeRoot=function(u){const p=this._elementRegistry,h=this._eventBus;h.fire("root.remove",{element:u}),h.fire("root.removed",{element:u}),p.remove(u)},at.prototype._addRoot=function(u,p){const h=this._elementRegistry,m=this._eventBus;m.fire("root.add",{element:u}),h.add(u,p),m.fire("root.added",{element:u,gfx:p})},at.prototype._setRoot=function(u,p){const h=this._rootElement;h&&(this._elementRegistry.updateGraphics(h,null,!0),this.hideLayer(h.layer)),u&&(p||(p=this._findPlaneForRoot(u).layer),this._elementRegistry.updateGraphics(u,this._svg,!0),this.showLayer(u.layer)),this._rootElement=u,this._eventBus.fire("root.set",{element:u})},at.prototype._ensureValid=function(u,p){if(!p.id)throw new Error("element must have an id");if(this._elementRegistry.get(p.id))throw new Error("element <"+p.id+"> already exists");const h=fA[u];if(!k(h,function(_){return p[_]!==void 0}))throw new Error("must supply { "+h.join(", ")+" } with "+u)},at.prototype._setParent=function(u,p,h){(function(m,_,S){if(m&&_){typeof S!="number"&&(S=-1);var M=m.indexOf(_);if(M!==-1){if(M===S||S===-1)return;m.splice(M,1)}S!==-1?m.splice(S,0,_):m.push(_)}})(p.children,u,h),u.parent=p},at.prototype._addElement=function(u,p,h,m){h=h||this.getRootElement();const _=this._eventBus,S=this._graphicsFactory;this._ensureValid(u,p),_.fire(u+".add",{element:p,parent:h}),this._setParent(p,h,m);const M=S.create(u,p,m);return this._elementRegistry.add(p,M),S.update(u,p,M),_.fire(u+".added",{element:p,gfx:M}),p},at.prototype.addShape=function(u,p,h){return this._addElement("shape",u,p,h)},at.prototype.addConnection=function(u,p,h){return this._addElement("connection",u,p,h)},at.prototype._removeElement=function(u,p){const h=this._elementRegistry,m=this._graphicsFactory,_=this._eventBus;if(u=h.get(u.id||u))return _.fire(p+".remove",{element:u}),m.remove(u),function(S,M){if(!S||!M)return-1;var O=S.indexOf(M);O!==-1&&S.splice(O,1)}(u.parent&&u.parent.children,u),u.parent=null,_.fire(p+".removed",{element:u}),h.remove(u),u},at.prototype.removeShape=function(u){return this._removeElement(u,"shape")},at.prototype.removeConnection=function(u){return this._removeElement(u,"connection")},at.prototype.getGraphics=function(u,p){return this._elementRegistry.getGraphics(u,p)},at.prototype._changeViewbox=function(u){this._eventBus.fire("canvas.viewbox.changing"),u.apply(this),this._cachedViewbox=null,this._viewboxChanged()},at.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},at.prototype.viewbox=function(u){if(u===void 0&&this._cachedViewbox)return this._cachedViewbox;const p=this._viewport,h=this.getSize();let m,_,S,M,O,j,J;return u?(this._changeViewbox(function(){O=Math.min(h.width/u.width,h.height/u.height);const re=this._svg.createSVGMatrix().scale(O).translate(-u.x,-u.y);_t(p,re)}),u):(S=this._rootElement?this.getActiveLayer():null,m=S&&S.getBBox()||{},M=_t(p),_=M?M.matrix:function(re,me,Re,Le,Ee,We){var pe=vt().createSVGMatrix();switch(arguments.length){case 0:return pe;case 1:return Qe(pe,re);case 6:return Qe(pe,{a:re,b:me,c:Re,d:Le,e:Ee,f:We})}}(),O=mp(_.a,1e3),j=mp(-_.e||0,1e3),J=mp(-_.f||0,1e3),u=this._cachedViewbox={x:j?j/O:0,y:J?J/O:0,width:h.width/O,height:h.height/O,scale:O,inner:{width:m.width||0,height:m.height||0,x:m.x||0,y:m.y||0},outer:h})},at.prototype.scroll=function(u){const p=this._viewport;let h=p.getCTM();return u&&this._changeViewbox(function(){u=L({dx:0,dy:0},u||{}),h=this._svg.createSVGMatrix().translate(u.dx,u.dy).multiply(h),h_(p,h)}),{x:h.e,y:h.f}},at.prototype.scrollToElement=function(u,p){let h=100;typeof u=="string"&&(u=this._elementRegistry.get(u));const m=this.findRoot(u);if(m!==this.getRootElement()&&this.setRootElement(m),m===u)return;p||(p={}),typeof p=="number"&&(h=p),p={top:p.top||h,right:p.right||h,bottom:p.bottom||h,left:p.left||h};const _=Va(u),S=rm(_),M=this.viewbox(),O=this.zoom();let j,J;M.y+=p.top/O,M.x+=p.left/O,M.width-=(p.right+p.left)/O,M.height-=(p.bottom+p.top)/O;const re=rm(M);if(_.width<M.width&&_.height<M.height){const me=Math.max(0,S.right-re.right),Re=Math.min(0,S.left-re.left),Le=Math.max(0,S.bottom-re.bottom),Ee=Math.min(0,S.top-re.top);j=me||Re,J=Le||Ee}else j=_.x-M.x,J=_.y-M.y;this.scroll({dx:-j*O,dy:-J*O})},at.prototype.zoom=function(u,p){if(!u)return this.viewbox(u).scale;if(u==="fit-viewport")return this._fitViewport(p);let h,m;return this._changeViewbox(function(){typeof p!="object"&&(h=this.viewbox().outer,p={x:h.width/2,y:h.height/2}),m=this._setZoom(u,p)}),mp(m.a,1e3)},at.prototype._fitViewport=function(u){const p=this.viewbox(),h=p.outer,m=p.inner;let _,S;return m.x>=0&&m.y>=0&&m.x+m.width<=h.width&&m.y+m.height<=h.height&&!u?S={x:0,y:0,width:Math.max(m.width+m.x,h.width),height:Math.max(m.height+m.y,h.height)}:(_=Math.min(1,h.width/m.width,h.height/m.height),S={x:m.x+(u?m.width/2-h.width/_/2:0),y:m.y+(u?m.height/2-h.height/_/2:0),width:h.width/_,height:h.height/_}),this.viewbox(S),this.viewbox(!1).scale},at.prototype._setZoom=function(u,p){const h=this._svg,m=this._viewport,_=h.createSVGMatrix(),S=h.createSVGPoint();let M,O,j,J,re;j=m.getCTM();const me=j.a;return p?(M=L(S,p),O=M.matrixTransform(j.inverse()),J=_.translate(O.x,O.y).scale(1/me*u).translate(-O.x,-O.y),re=j.multiply(J)):re=_.scale(u),h_(this._viewport,re),re},at.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},at.prototype.getAbsoluteBBox=function(u){const p=this.viewbox();let h;return u.waypoints?h=this.getGraphics(u).getBBox():h=u,{x:h.x*p.scale-p.x*p.scale,y:h.y*p.scale-p.y*p.scale,width:h.width*p.scale,height:h.height*p.scale}},at.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Is="data-element-id";function Hr(u){this._elements={},this._eventBus=u}function m_(u,p,h){var m=function(_,S,M,O){var j=M.inverse;return Object.defineProperty(_,"remove",{value:function(J){var re=this.indexOf(J);return re!==-1&&(this.splice(re,1),S.unset(J,j,O)),J}}),Object.defineProperty(_,"contains",{value:function(J){return this.indexOf(J)!==-1}}),Object.defineProperty(_,"add",{value:function(J,re){var me=this.indexOf(J);if(re===void 0){if(me!==-1)return;re=this.length}me!==-1&&this.splice(me,1),this.splice(re,0,J),me===-1&&S.set(J,j,O)}}),Object.defineProperty(_,"__refs_collection",{value:!0}),_}(h[p.name]||[],u,p,h);Object.defineProperty(h,p.name,{enumerable:p.enumerable,value:m}),m.length&&m.forEach(function(_){u.set(_,p.inverse,h)})}function si(u,p){if(!(this instanceof si))return new si(u,p);u.inverse=p,p.inverse=u,this.props={},this.props[u.name]=u,this.props[p.name]=p}Hr.$inject=["eventBus"],Hr.prototype.add=function(u,p,h){var m=u.id;this._validateId(m),w(p,Is,m),h&&w(h,Is,m),this._elements[m]={element:u,gfx:p,secondaryGfx:h}},Hr.prototype.remove=function(u){var p=this._elements,h=u.id||u,m=h&&p[h];m&&(w(m.gfx,Is,""),m.secondaryGfx&&w(m.secondaryGfx,Is,""),delete p[h])},Hr.prototype.updateId=function(u,p){this._validateId(p),typeof u=="string"&&(u=this.get(u)),this._eventBus.fire("element.updateId",{element:u,newId:p});var h=this.getGraphics(u),m=this.getGraphics(u,!0);this.remove(u),u.id=p,this.add(u,h,m)},Hr.prototype.updateGraphics=function(u,p,h){var m=u.id||u,_=this._elements[m];return h?_.secondaryGfx=p:_.gfx=p,p&&w(p,Is,m),p},Hr.prototype.get=function(u){var p;p=typeof u=="string"?u:u&&w(u,Is);var h=this._elements[p];return h&&h.element},Hr.prototype.filter=function(u){var p=[];return this.forEach(function(h,m){u(h,m)&&p.push(h)}),p},Hr.prototype.find=function(u){for(var p=this._elements,h=Object.keys(p),m=0;m<h.length;m++){var _=p[h[m]],S=_.element;if(u(S,_.gfx))return S}},Hr.prototype.getAll=function(){return this.filter(function(u){return u})},Hr.prototype.forEach=function(u){var p=this._elements;Object.keys(p).forEach(function(h){var m=p[h],_=m.element,S=m.gfx;return u(_,S)})},Hr.prototype.getGraphics=function(u,p){var h=u.id||u,m=this._elements[h];return m&&(p?m.secondaryGfx:m.gfx)},Hr.prototype._validateId=function(u){if(!u)throw new Error("element must have an id");if(this._elements[u])throw new Error("element with id "+u+" already added")},si.prototype.bind=function(u,p){if(typeof p=="string"){if(!this.props[p])throw new Error("no property <"+p+"> in ref");p=this.props[p]}p.collection?m_(this,p,u):function(h,m,_){var S=m.inverse,M=_[m.name];Object.defineProperty(_,m.name,{configurable:m.configurable,enumerable:m.enumerable,get:function(){return M},set:function(O){if(O!==M){var j=M;M=null,j&&h.unset(j,S,_),M=O,h.set(M,S,_)}}})}(this,p,u)},si.prototype.ensureRefsCollection=function(u,p){var h=u[p.name];return function(m){return m.__refs_collection===!0}(h)||m_(this,p,u),h},si.prototype.ensureBound=function(u,p){(function(h,m){return Object.prototype.hasOwnProperty.call(h,m.name||m)})(u,p)||this.bind(u,p)},si.prototype.unset=function(u,p,h){u&&(this.ensureBound(u,p),p.collection?this.ensureRefsCollection(u,p).remove(h):u[p.name]=void 0)},si.prototype.set=function(u,p,h){u&&(this.ensureBound(u,p),p.collection?this.ensureRefsCollection(u,p).add(h):u[p.name]=h)};var cm=new si({name:"children",enumerable:!0,collection:!0},{name:"parent"}),g_=new si({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),y_=new si({name:"attachers",collection:!0},{name:"host"}),v_=new si({name:"outgoing",collection:!0},{name:"source"}),x_=new si({name:"incoming",collection:!0},{name:"target"});function tu(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(u){var p=this.label,h=this.labels;!u&&p?h.remove(p):h.add(u,0)}}),cm.bind(this,"parent"),g_.bind(this,"labels"),v_.bind(this,"outgoing"),x_.bind(this,"incoming")}function nu(){tu.call(this),cm.bind(this,"children"),y_.bind(this,"host"),y_.bind(this,"attachers")}function __(){tu.call(this),cm.bind(this,"children")}function w_(){nu.call(this),g_.bind(this,"labelTarget")}function E_(){tu.call(this),v_.bind(this,"source"),x_.bind(this,"target")}n(nu,tu),n(__,nu),n(w_,nu),n(E_,tu);var dA={connection:E_,shape:nu,label:w_,root:__};function js(){this._uid=12}js.prototype.createRoot=function(u){return this.create("root",u)},js.prototype.createLabel=function(u){return this.create("label",u)},js.prototype.createShape=function(u){return this.create("shape",u)},js.prototype.createConnection=function(u){return this.create("connection",u)},js.prototype.create=function(u,p){return(p=L({},p||{})).id||(p.id=u+"_"+this._uid++),function(h,m){var _=dA[h];if(!_)throw new Error("unknown type: <"+h+">");return L(new _,m)}(u,p)};var gp="__fn",hA=Array.prototype.slice;function Rr(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function ru(){}function Vr(u,p){this._eventBus=u,this._elementRegistry=p}function b_(u,p,h){var m=h||p.firstChild;u!==m&&p.insertBefore(u,m)}Rr.prototype.on=function(u,p,h,m){if(u=s(u)?u:[u],f(p)&&(m=h,h=p,p=1e3),!c(p))throw new Error("priority must be a number");var _=h;m&&((_=z(h,m))[gp]=h[gp]||h);var S=this;u.forEach(function(M){S._addListener(M,{priority:p,callback:_,next:null})})},Rr.prototype.once=function(u,p,h,m){var _=this;if(f(p)&&(m=h,h=p,p=1e3),!c(p))throw new Error("priority must be a number");function S(){S.__isTomb=!0;var M=h.apply(m,arguments);return _.off(u,S),M}S[gp]=h,this.on(u,p,S)},Rr.prototype.off=function(u,p){u=s(u)?u:[u];var h=this;u.forEach(function(m){h._removeListener(m,p)})},Rr.prototype.createEvent=function(u){var p=new ru;return p.init(u),p},Rr.prototype.fire=function(u,p){var h,m,_,S;if(S=hA.call(arguments),typeof u=="object"&&(u=(p=u).type),!u)throw new Error("no event type specified");if(m=this._listeners[u]){h=p instanceof ru?p:this.createEvent(p),S[0]=h;var M=h.type;u!==M&&(h.type=u);try{_=this._invokeListeners(h,S,m)}finally{u!==M&&(h.type=M)}return _===void 0&&h.defaultPrevented&&(_=!1),_}},Rr.prototype.handleError=function(u){return this.fire("error",{error:u})===!1},Rr.prototype._destroy=function(){this._listeners={}},Rr.prototype._invokeListeners=function(u,p,h){for(var m;h&&!u.cancelBubble;)m=this._invokeListener(u,p,h),h=h.next;return m},Rr.prototype._invokeListener=function(u,p,h){var m;if(h.callback.__isTomb)return m;try{m=function(_,S){return _.apply(null,S)}(h.callback,p),m!==void 0&&(u.returnValue=m,u.stopPropagation()),m===!1&&u.preventDefault()}catch(_){if(!this.handleError(_))throw console.error("unhandled error in event listener",_),_}return m},Rr.prototype._addListener=function(u,p){var h,m=this._getListeners(u);if(m){for(;m;){if(m.priority<p.priority)return p.next=m,void(h?h.next=p:this._setListeners(u,p));h=m,m=m.next}h.next=p}else this._setListeners(u,p)},Rr.prototype._getListeners=function(u){return this._listeners[u]},Rr.prototype._setListeners=function(u,p){this._listeners[u]=p},Rr.prototype._removeListener=function(u,p){var h,m,_,S=this._getListeners(u);if(p)for(;S;)h=S.next,(_=S.callback)!==p&&_[gp]!==p||(m?m.next=h:this._setListeners(u,h)),m=S,S=h;else this._setListeners(u,null)},ru.prototype.stopPropagation=function(){this.cancelBubble=!0},ru.prototype.preventDefault=function(){this.defaultPrevented=!0},ru.prototype.init=function(u){L(this,u||{})},Vr.$inject=["eventBus","elementRegistry"],Vr.prototype._getChildrenContainer=function(u){var p,h=this._elementRegistry.getGraphics(u);return u.parent?(p=function(m){return m.parentNode.childNodes[1]}(h),p||(F(p=ce("g")).add("djs-children"),Z(h.parentNode,p))):p=h,p},Vr.prototype._clear=function(u){var p=function(h){return h.childNodes[0]}(u);return Ix(p),p},Vr.prototype._createContainer=function(u,p,h,m){var _=ce("g");F(_).add("djs-group"),h!==void 0?b_(_,p,p.childNodes[h]):Z(p,_);var S=ce("g");F(S).add("djs-element"),F(S).add("djs-"+u),m&&F(S).add("djs-frame"),Z(_,S);var M=ce("g");return F(M).add("djs-visual"),Z(S,M),S},Vr.prototype.create=function(u,p,h){var m=this._getChildrenContainer(p.parent);return this._createContainer(u,m,h,Kx(p))},Vr.prototype.updateContainments=function(u){var p,h=this,m=this._elementRegistry;p=C(u,function(_,S){return S.parent&&(_[S.parent.id]=S.parent),_},{}),x(p,function(_){var S=_.children;if(S){var M=h._getChildrenContainer(_);x(S.slice().reverse(),function(O){b_(m.getGraphics(O).parentNode,M)})}})},Vr.prototype.drawShape=function(u,p,h={}){return this._eventBus.fire("render.shape",{gfx:u,element:p,attrs:h})},Vr.prototype.getShapePath=function(u){return this._eventBus.fire("render.getShapePath",u)},Vr.prototype.drawConnection=function(u,p,h={}){return this._eventBus.fire("render.connection",{gfx:u,element:p,attrs:h})},Vr.prototype.getConnectionPath=function(u){return this._eventBus.fire("render.getConnectionPath",u)},Vr.prototype.update=function(u,p,h){if(p.parent){var m=this._clear(h);if(u==="shape")this.drawShape(m,p),zx(h,p.x,p.y);else{if(u!=="connection")throw new Error("unknown type: "+u);this.drawConnection(m,p)}p.hidden?w(h,"display","none"):w(h,"display","block")}},Vr.prototype.remove=function(u){Ie(this._elementRegistry.getGraphics(u).parentNode)};var mA={__depends__:[pA],__init__:["canvas"],canvas:["type",at],elementRegistry:["type",Hr],elementFactory:["type",js],eventBus:["type",Rr],graphicsFactory:["type",Vr]};function gA(u){return function(p){var h=new p_(p);return h.init(),h}([{config:["value",u=u||{}]},mA].concat(u.modules||[]))}function Ho(u,p){this._injector=p||gA(u),this.get("eventBus").fire("diagram.init")}function pm(){}function S_(u,p){this.model=u,this.properties=p}Ho.prototype.get=function(u,p){return this._injector.get(u,p)},Ho.prototype.invoke=function(u,p,h){return this._injector.invoke(u,p,h)},Ho.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Ho.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},pm.prototype.get=function(u){return this.$model.properties.get(this,u)},pm.prototype.set=function(u,p){this.$model.properties.set(this,u,p)},S_.prototype.createType=function(u){var p=this.model,h=this.properties,m=Object.create(pm.prototype);x(u.properties,function(M){M.isMany||M.default===void 0||(m[M.name]=M.default)}),h.defineModel(m,p),h.defineDescriptor(m,u);var _=u.ns.name;function S(M){h.define(this,"$type",{value:_,enumerable:!0}),h.define(this,"$attrs",{value:{}}),h.define(this,"$parent",{writable:!0}),x(M,z(function(O,j){this.set(j,O)},this))}return S.prototype=m,S.hasType=m.$instanceOf=this.model.hasType,h.defineModel(S,p),h.defineDescriptor(S,u),S};var yA={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},C_={String:function(u){return u},Boolean:function(u){return u==="true"},Integer:function(u){return parseInt(u,10)},Real:function(u){return parseFloat(u)}};function fm(u,p){var h=C_[u];return h?h(p):p}function dm(u){return!!yA[u]}function R_(u){return!!C_[u]}function rr(u,p){var h,m,_=u.split(/:/);if(_.length===1)h=u,m=p;else{if(_.length!==2)throw new Error("expected <prefix:localName> or <localName>, got "+u);h=_[1],m=_[0]}return{name:u=(m?m+":":"")+h,prefix:m,localName:h}}function Wr(u){this.ns=u,this.name=u.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Vo(u,p){this.packageMap={},this.typeMap={},this.packages=[],this.properties=p,x(u,z(this.registerPackage,this))}function k_(u,p,h){var m=p[h];if(m in u)throw new Error("package with "+h+" <"+m+"> already defined")}function Ga(u){this.model=u}function P_(u,p,h){Object.defineProperty(u,p.name,{enumerable:!p.isReference,writable:!0,value:h,configurable:!0})}function hm(u){return u.replace(/^:/,"")}function li(u,p={}){this.properties=new Ga(this),this.factory=new S_(this,this.properties),this.registry=new Vo(u,this.properties),this.typeCache={},this.config=p}Wr.prototype.build=function(){return function(u,p){let h={},m=Object(u);return x(p,function(_){_ in m&&(h[_]=u[_])}),h}(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Wr.prototype.addProperty=function(u,p,h){typeof p=="boolean"&&(h=p,p=void 0),this.addNamedProperty(u,h!==!1);var m=this.properties;p!==void 0?m.splice(p,0,u):m.push(u)},Wr.prototype.replaceProperty=function(u,p,h){var m=u.ns,_=this.properties,S=this.propertiesByName,M=u.name!==p.name;if(u.isId){if(!p.isId)throw new Error("property <"+p.ns.name+"> must be id property to refine <"+u.ns.name+">");this.setIdProperty(p,!1)}if(u.isBody){if(!p.isBody)throw new Error("property <"+p.ns.name+"> must be body property to refine <"+u.ns.name+">");this.setBodyProperty(p,!1)}var O=_.indexOf(u);if(O===-1)throw new Error("property <"+m.name+"> not found in property list");_.splice(O,1),this.addProperty(p,h?void 0:O,M),S[m.name]=S[m.localName]=p},Wr.prototype.redefineProperty=function(u,p,h){var m=u.ns.prefix,_=p.split("#"),S=rr(_[0],m),M=rr(_[1],S.prefix).name,O=this.propertiesByName[M];if(!O)throw new Error("refined property <"+M+"> not found");this.replaceProperty(O,u,h),delete u.redefines},Wr.prototype.addNamedProperty=function(u,p){var h=u.ns,m=this.propertiesByName;p&&(this.assertNotDefined(u,h.name),this.assertNotDefined(u,h.localName)),m[h.name]=m[h.localName]=u},Wr.prototype.removeNamedProperty=function(u){var p=u.ns,h=this.propertiesByName;delete h[p.name],delete h[p.localName]},Wr.prototype.setBodyProperty=function(u,p){if(p&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+u.ns.name+">)");this.bodyProperty=u},Wr.prototype.setIdProperty=function(u,p){if(p&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+u.ns.name+">)");this.idProperty=u},Wr.prototype.assertNotTrait=function(u){if((u.extends||[]).length)throw new Error(`cannot create <${u.name}> extending <${u.extends}>`)},Wr.prototype.assertNotDefined=function(u,p){var h=u.name,m=this.propertiesByName[h];if(m)throw new Error("property <"+h+"> already defined; override of <"+m.definedBy.ns.name+"#"+m.ns.name+"> by <"+u.definedBy.ns.name+"#"+u.ns.name+"> not allowed without redefines")},Wr.prototype.hasProperty=function(u){return this.propertiesByName[u]},Wr.prototype.addTrait=function(u,p){p&&this.assertNotTrait(u);var h=this.allTypesByName,m=this.allTypes,_=u.name;_ in h||(x(u.properties,z(function(S){S=L({},S,{name:S.ns.localName,inherited:p}),Object.defineProperty(S,"definedBy",{value:u});var M=S.replaces,O=S.redefines;M||O?this.redefineProperty(S,M||O,M):(S.isBody&&this.setBodyProperty(S),S.isId&&this.setIdProperty(S),this.addProperty(S))},this)),m.push(u),h[_]=u)},Vo.prototype.getPackage=function(u){return this.packageMap[u]},Vo.prototype.getPackages=function(){return this.packages},Vo.prototype.registerPackage=function(u){u=L({},u);var p=this.packageMap;k_(p,u,"prefix"),k_(p,u,"uri"),x(u.types,z(function(h){this.registerType(h,u)},this)),p[u.uri]=p[u.prefix]=u,this.packages.push(u)},Vo.prototype.registerType=function(u,p){var h=rr((u=L({},u,{superClass:(u.superClass||[]).slice(),extends:(u.extends||[]).slice(),properties:(u.properties||[]).slice(),meta:L(u.meta||{})})).name,p.prefix),m=h.name,_={};x(u.properties,z(function(S){var M=rr(S.name,h.prefix),O=M.name;dm(S.type)||(S.type=rr(S.type,M.prefix).name),L(S,{ns:M,name:O}),_[O]=S},this)),L(u,{ns:h,name:m,propertiesByName:_}),x(u.extends,z(function(S){var M=rr(S,h.prefix),O=this.typeMap[M.name];O.traits=O.traits||[],O.traits.push(m)},this)),this.definePackage(u,p),this.typeMap[m]=u},Vo.prototype.mapTypes=function(u,p,h){var m=dm(u.name)?{name:u.name}:this.typeMap[u.name],_=this;function S(O,j){var J=rr(O,dm(O)?"":u.prefix);_.mapTypes(J,p,j)}function M(O){return S(O,!0)}if(!m)throw new Error("unknown type <"+u.name+">");x(m.superClass,h?M:function(O){return S(O,!1)}),p(m,!h),x(m.traits,M)},Vo.prototype.getEffectiveDescriptor=function(u){var p=rr(u),h=new Wr(p);this.mapTypes(p,function(_,S){h.addTrait(_,S)});var m=h.build();return this.definePackage(m,m.allTypes[m.allTypes.length-1].$pkg),m},Vo.prototype.definePackage=function(u,p){this.properties.define(u,"$pkg",{value:p})},Ga.prototype.set=function(u,p,h){if(!d(p)||!p.length)throw new TypeError("property name must be a non-empty string");var m=this.getProperty(u,p),_=m&&m.name;h===void 0?m?delete u[_]:delete u.$attrs[hm(p)]:m?_ in u?u[_]=h:P_(u,m,h):u.$attrs[hm(p)]=h},Ga.prototype.get=function(u,p){var h=this.getProperty(u,p);if(!h)return u.$attrs[hm(p)];var m=h.name;return!u[m]&&h.isMany&&P_(u,h,[]),u[m]},Ga.prototype.define=function(u,p,h){if(!h.writable){var m=h.value;delete(h=L({},h,{get:function(){return m}})).value}Object.defineProperty(u,p,h)},Ga.prototype.defineDescriptor=function(u,p){this.define(u,"$descriptor",{value:p})},Ga.prototype.defineModel=function(u,p){this.define(u,"$model",{value:p})},Ga.prototype.getProperty=function(u,p){var h=this.model,m=h.getPropertyDescriptor(u,p);if(m)return m;if(p.includes(":"))return null;const _=h.config.strict;if(_!==void 0){const S=new TypeError(`unknown property <${p}> on <${u.$type}>`);if(_)throw S;typeof console<"u"&&console.warn(S)}return null},li.prototype.create=function(u,p){var h=this.getType(u);if(!h)throw new Error("unknown type <"+u+">");return new h(p)},li.prototype.getType=function(u){var p=this.typeCache,h=d(u)?u:u.ns.name,m=p[h];return m||(u=this.registry.getEffectiveDescriptor(h),m=p[h]=this.factory.createType(u)),m},li.prototype.createAny=function(u,p,h){var m=rr(u),_={$type:u,$instanceOf:function(M){return M===this.$type},get:function(M){return this[M]},set:function(M,O){(function(j,J,re){let me=j;x(J,function(Re,Le){if(typeof Re!="number"&&typeof Re!="string")throw new Error("illegal key type: "+typeof Re+". Key should be of type number or string.");if(Re==="constructor")throw new Error("illegal key: constructor");if(Re==="__proto__")throw new Error("illegal key: __proto__");let Ee=J[Le+1],We=me[Re];a(Ee)&&We==null&&(We=me[Re]=isNaN(+Ee)?{}:[]),o(Ee)?o(re)?delete me[Re]:me[Re]=re:me=We})})(this,[M],O)}},S={name:u,isGeneric:!0,ns:{prefix:m.prefix,localName:m.localName,uri:p}};return this.properties.defineDescriptor(_,S),this.properties.defineModel(_,this),this.properties.define(_,"get",{enumerable:!1,writable:!0}),this.properties.define(_,"set",{enumerable:!1,writable:!0}),this.properties.define(_,"$parent",{enumerable:!1,writable:!0}),this.properties.define(_,"$instanceOf",{enumerable:!1,writable:!0}),x(h,function(M,O){l(M)&&M.value!==void 0?_[M.name]=M.value:_[O]=M}),_},li.prototype.getPackage=function(u){return this.registry.getPackage(u)},li.prototype.getPackages=function(){return this.registry.getPackages()},li.prototype.getElementDescriptor=function(u){return u.$descriptor},li.prototype.hasType=function(u,p){return p===void 0&&(p=u,u=this),p in u.$model.getElementDescriptor(u).allTypesByName},li.prototype.getPropertyDescriptor=function(u,p){return this.getElementDescriptor(u).propertiesByName[p]},li.prototype.getTypeDescriptor=function(u){return this.registry.typeMap[u]};var vA=String.fromCharCode,xA=Object.prototype.hasOwnProperty,_A=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,iu={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function wA(u,p,h,m){return m?xA.call(iu,m)?iu[m]:"&"+m+";":vA(p||parseInt(h,16))}function Ka(u){return u.length>3&&u.indexOf("&")!==-1?u.replace(_A,wA):u}Object.keys(iu).forEach(function(u){iu[u.toUpperCase()]=iu[u]});var T_="xsi:type",A_="non-whitespace outside of root node";function $s(u){return new Error(u)}function M_(u){return"missing namespace for prefix <"+u+">"}function yp(u){return{get:u,enumerable:!0}}function EA(u){var p,h={};for(p in u)h[p]=u[p];return h}function mm(u){return u+"$uri"}function N_(){return{line:0,column:0}}function bA(u){throw u}function D_(u){if(!this)return new D_(u);var p,h,m,_,S,M,O,j,J,re=u&&u.proxy,me=bA,Re=N_,Le=!1,Ee=!1,We=null,pe=!1;function Te(ie){ie instanceof Error||(ie=$s(ie)),We=ie,me(ie,Re)}function U(ie){S&&(ie instanceof Error||(ie=$s(ie)),S(ie,Re))}this.on=function(ie,ne){if(typeof ne!="function")throw $s("required args <name, cb>");switch(ie){case"openTag":h=ne;break;case"text":p=ne;break;case"closeTag":m=ne;break;case"error":me=ne;break;case"warn":S=ne;break;case"cdata":_=ne;break;case"attention":j=ne;break;case"question":O=ne;break;case"comment":M=ne;break;default:throw $s("unsupported event: "+ie)}return this},this.ns=function(ie){if(ie===void 0&&(ie={}),typeof ie!="object")throw $s("required args <nsMap={}>");var ne,Be={};for(ne in ie)Be[ne]=ie[ne];return Be["http://www.w3.org/2001/XMLSchema-instance"]="xsi",Ee=!0,J=Be,this},this.parse=function(ie){if(typeof ie!="string")throw $s("required args <xml=string>");return We=null,function(ne){var Be,be,ut,st,He,Ut,_e,xe,et,pt,mt,Ur=Ee?[]:null,Ft=Ee?function(Fn){var Rn,rn,Pr={};for(Rn in Fn)Pr[rn=Fn[Rn]]=rn,Pr[mm(rn)]=Rn;return Pr}(J):null,kr=[],ui=0,en=!1,Gr=!1,Pt=0,Mt=0,Hs="",Vs=0;function qa(){if(mt!==null)return mt;var Fn,Rn,rn,Pr,kn,Ht,$,T,N,V,te,Ne=Ee&&Ft.xmlns,rt=Ee&&Le?[]:null,qe=Vs,Tt=Hs,cn=Tt.length,mr={},Xa={};e:for(;qe<cn;qe++)if(N=!1,!((V=Tt.charCodeAt(qe))===32||V<14&&V>8)){for((V<65||V>122||V>90&&V<97)&&V!==95&&V!==58&&(U("illegal first char attribute name"),N=!0),te=qe+1;te<cn;te++)if(!((V=Tt.charCodeAt(te))>96&&V<123||V>64&&V<91||V>47&&V<59||V===46||V===45||V===95)){if(V===32||V<14&&V>8){U("missing attribute value"),qe=te;continue e}if(V===61)break;U("illegal attribute name char"),N=!0}if((T=Tt.substring(qe,te))==="xmlns:xmlns"&&(U("illegal declaration of xmlns"),N=!0),(V=Tt.charCodeAt(te+1))===34)(te=Tt.indexOf('"',qe=te+2))===-1&&(te=Tt.indexOf("'",qe))!==-1&&(U("attribute value quote missmatch"),N=!0);else if(V===39)(te=Tt.indexOf("'",qe=te+2))===-1&&(te=Tt.indexOf('"',qe))!==-1&&(U("attribute value quote missmatch"),N=!0);else for(U("missing attribute value quotes"),N=!0,te+=1;te<cn&&!((V=Tt.charCodeAt(te+1))===32||V<14&&V>8);te++);for(te===-1&&(U("missing closing quotes"),te=cn,N=!0),N||(Ht=Tt.substring(qe,te)),qe=te;te+1<cn&&!((V=Tt.charCodeAt(te+1))===32||V<14&&V>8);te++)qe===te&&(U("illegal character after attribute end"),N=!0);if(qe=te+1,!N)if(T in Xa)U("attribute <"+T+"> already defined");else if(Xa[T]=!0,Ee)if(Le){if((kn=T==="xmlns"?"xmlns":T.charCodeAt(0)===120&&T.substr(0,6)==="xmlns:"?T.substr(6):null)!==null){if(Fn=Ka(Ht),Rn=mm(kn),!($=J[Fn])){if(kn==="xmlns"||Rn in Ft&&Ft[Rn]!==Fn)do $="ns"+ui++;while(Ft[$]!==void 0);else $=kn;J[Fn]=$}Ft[kn]!==$&&(Pr||(Ft=EA(Ft),Pr=!0),Ft[kn]=$,kn==="xmlns"&&(Ft[mm($)]=Fn,Ne=$),Ft[Rn]=Fn),mr[T]=Ht;continue}rt.push(T,Ht)}else(V=T.indexOf(":"))!==-1?(rn=Ft[T.substring(0,V)])?((T=Ne===rn?T.substr(V+1):rn+T.substr(V))===T_&&((V=Ht.indexOf(":"))!==-1?(rn=Ht.substring(0,V),Ht=(rn=Ft[rn]||rn)+Ht.substring(V)):Ht=Ne+":"+Ht),mr[T]=Ht):U(M_(T.substring(0,V))):mr[T]=Ht;else mr[T]=Ht}if(Le)for(qe=0,cn=rt.length;qe<cn;qe++){if(T=rt[qe++],Ht=rt[qe],(V=T.indexOf(":"))!==-1){if(!(rn=Ft[T.substring(0,V)])){U(M_(T.substring(0,V)));continue}(T=Ne===rn?T.substr(V+1):rn+T.substr(V))===T_&&((V=Ht.indexOf(":"))!==-1?(rn=Ht.substring(0,V),Ht=(rn=Ft[rn]||rn)+Ht.substring(V)):Ht=Ne+":"+Ht)}mr[T]=Ht}return mt=mr}function su(){for(var Fn,Rn,rn=/(\r\n|\r|\n)/g,Pr=0,kn=0,Ht=0,$=Mt;Pt>=Ht&&(Fn=rn.exec(ne))&&!(($=Fn[0].length+Fn.index)>Pt);)Pr+=1,Ht=$;return Pt==-1?(kn=$,Rn=ne.substring(Mt)):Mt===0?Rn=ne.substring(Mt,Pt):(kn=Pt-Ht,Rn=Mt==-1?ne.substring(Pt):ne.substring(Pt,Mt+1)),{data:Rn,line:Pr,column:kn}}for(Re=su,re&&(pt=Object.create({},{name:yp(function(){return xe}),originalName:yp(function(){return et}),attrs:yp(qa),ns:yp(function(){return Ft})}));Mt!==-1;){if((Pt=ne.charCodeAt(Mt)===60?Mt:ne.indexOf("<",Mt))===-1)return kr.length?Te("unexpected end of file"):Mt===0?Te("missing start tag"):void(Mt<ne.length&&ne.substring(Mt).trim()&&U(A_));if(Mt!==Pt){if(kr.length){if(p&&(p(ne.substring(Mt,Pt),Ka,Re),pe))return}else if(ne.substring(Mt,Pt).trim()&&(U(A_),pe))return}if((He=ne.charCodeAt(Pt+1))===33){if((st=ne.charCodeAt(Pt+2))===91&&ne.substr(Pt+3,6)==="CDATA["){if((Mt=ne.indexOf("]]>",Pt))===-1)return Te("unclosed cdata");if(_&&(_(ne.substring(Pt+9,Mt),Re),pe))return;Mt+=3;continue}if(st===45&&ne.charCodeAt(Pt+3)===45){if((Mt=ne.indexOf("-->",Pt))===-1)return Te("unclosed comment");if(M&&(M(ne.substring(Pt+4,Mt),Ka,Re),pe))return;Mt+=3;continue}}if(He!==63){for(be=Pt+1;;be++){if(Ut=ne.charCodeAt(be),isNaN(Ut))return Mt=-1,Te("unclosed tag");if(Ut===34)be=(st=ne.indexOf('"',be+1))!==-1?st:be;else if(Ut===39)be=(st=ne.indexOf("'",be+1))!==-1?st:be;else if(Ut===62){Mt=be;break}}if(He!==33){if(mt={},He===47){if(en=!1,Gr=!0,!kr.length)return Te("missing open tag");if(be=xe=kr.pop(),st=Pt+2+be.length,ne.substring(Pt+2,st)!==be)return Te("closing tag mismatch");for(;st<Mt;st++)if(!((He=ne.charCodeAt(st))===32||He>8&&He<14))return Te("close tag")}else{if(ne.charCodeAt(Mt-1)===47?(be=xe=ne.substring(Pt+1,Mt-1),en=!0,Gr=!0):(be=xe=ne.substring(Pt+1,Mt),en=!0,Gr=!1),!(He>96&&He<123||He>64&&He<91||He===95||He===58))return Te("illegal first char nodeName");for(st=1,ut=be.length;st<ut;st++)if(!((He=be.charCodeAt(st))>96&&He<123||He>64&&He<91||He>47&&He<59||He===45||He===95||He==46)){if(He===32||He<14&&He>8){xe=be.substring(0,st),mt=null;break}return Te("invalid nodeName")}Gr||kr.push(xe)}if(Ee){if(Be=Ft,en&&(Gr||Ur.push(Be),mt===null&&(Le=be.indexOf("xmlns",st)!==-1)&&(Vs=st,Hs=be,qa(),Le=!1)),et=xe,(He=xe.indexOf(":"))!==-1){if(!(_e=Ft[xe.substring(0,He)]))return Te("missing namespace on <"+et+">");xe=xe.substr(He+1)}else _e=Ft.xmlns;_e&&(xe=_e+":"+xe)}if(en&&(Vs=st,Hs=be,h&&(re?h(pt,Ka,Gr,Re):h(xe,qa,Ka,Gr,Re),pe)))return;if(Gr){if(m&&(m(re?pt:xe,Ka,en,Re),pe))return;Ee&&(Ft=en?Be:Ur.pop())}Mt+=1}else{if(j&&(j(ne.substring(Pt,Mt+1),Ka,Re),pe))return;Mt+=1}}else{if((Mt=ne.indexOf("?>",Pt))===-1)return Te("unclosed question");if(O&&(O(ne.substring(Pt,Mt+2),Re),pe))return;Mt+=2}}}(ie),Re=N_,pe=!1,We},this.stop=function(){pe=!0}}function O_(u){return u.xml&&u.xml.tagAlias==="lowerCase"}var SA={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},vp="xsi:type";function L_(u){return u.xml&&u.xml.serialize}function B_(u){return L_(u)===vp}function I_(u,p){return O_(p)?u.prefix+":"+((h=u.localName).charAt(0).toUpperCase()+h.slice(1)):u.name;var h}function Wo(u){return new Error(u)}function co(u){return u.$descriptor}function CA(u){L(this,u),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(p){this.references.push(p)},this.addElement=function(p){if(!p)throw Wo("expected element");var h,m=this.elementsById,_=co(p).idProperty;if(_&&(h=p.get(_.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(h))throw new Error("illegal ID <"+h+">");if(m[h])throw Wo("duplicate ID <"+h+">");m[h]=p}},this.addWarning=function(p){this.warnings.push(p)}}function ou(){}function gm(){}function Fs(){}function au(u,p){this.property=u,this.context=p}function ym(u,p){this.element=p,this.propertyDesc=u}function xp(){}function ir(u,p,h){this.model=u,this.type=u.getType(p),this.context=h}function vm(u,p,h){ir.call(this,u,p,h)}function zs(u,p,h){this.model=u,this.context=h}function xm(u){u instanceof li&&(u={model:u}),L(this,{lax:!1},u)}ou.prototype.handleEnd=function(){},ou.prototype.handleText=function(){},ou.prototype.handleNode=function(){},gm.prototype=Object.create(ou.prototype),gm.prototype.handleNode=function(){return this},Fs.prototype=Object.create(ou.prototype),Fs.prototype.handleText=function(u){this.body=(this.body||"")+u},au.prototype=Object.create(Fs.prototype),au.prototype.handleNode=function(u){if(this.element)throw Wo("expected no sub nodes");return this.element=this.createReference(u),this},au.prototype.handleEnd=function(){this.element.id=this.body},au.prototype.createReference=function(u){return{property:this.property.ns.name,id:""}},ym.prototype=Object.create(Fs.prototype),ym.prototype.handleEnd=function(){var u=this.body||"",p=this.element,h=this.propertyDesc;u=fm(h.type,u),h.isMany?p.get(h.name).push(u):p.set(h.name,u)},xp.prototype=Object.create(Fs.prototype),xp.prototype.handleNode=function(u){var p=this,h=this.element;return h?p=this.handleChild(u):(h=this.element=this.createElement(u),this.context.addElement(h)),p},ir.prototype=Object.create(xp.prototype),ir.prototype.addReference=function(u){this.context.addReference(u)},ir.prototype.handleText=function(u){if(!co(this.element).bodyProperty)throw Wo("unexpected body text <"+u+">");Fs.prototype.handleText.call(this,u)},ir.prototype.handleEnd=function(){var u=this.body,p=this.element,h=co(p).bodyProperty;h&&u!==void 0&&(u=fm(h.type,u),p.set(h.name,u))},ir.prototype.createElement=function(u){var p,h=u.attributes,m=this.type,_=co(m),S=this.context,M=new m({}),O=this.model;return x(h,function(j,J){var re=_.propertiesByName[J];re&&re.isReference?re.isMany?x(j.split(" "),function(me){S.addReference({element:M,property:re.ns.name,id:me})}):S.addReference({element:M,property:re.ns.name,id:j}):(re?j=fm(re.type,j):J!=="xmlns"&&(p=rr(J,_.ns.prefix),O.getPackage(p.prefix)&&S.addWarning({message:"unknown attribute <"+J+">",element:M,property:J,value:j})),M.set(J,j))}),M},ir.prototype.getPropertyForNode=function(u){var p,h,m=rr(u.name),_=this.type,S=this.model,M=co(_),O=m.name,j=M.propertiesByName[O];if(j&&!j.isAttr)return B_(j)&&(p=u.attributes[vp])?(p=function(re,me){var Re=rr(re);return function(Le,Ee){var We=Le.name,pe=Le.localName,Te=Ee.xml&&Ee.xml.typePrefix;return Te&&pe.indexOf(Te)===0?Le.prefix+":"+pe.slice(Te.length):We}(Re,me.getPackage(Re.prefix))}(p,S),L({},j,{effectiveType:co(h=S.getType(p)).name})):j;var J=S.getPackage(m.prefix);if(J){if(p=I_(m,J),h=S.getType(p),j=y(M.properties,function(re){return!re.isVirtual&&!re.isReference&&!re.isAttribute&&h.hasType(re.type)}))return L({},j,{effectiveType:co(h).name})}else if(j=y(M.properties,function(re){return!re.isReference&&!re.isAttribute&&re.type==="Element"}))return j;throw Wo("unrecognized element <"+m.name+">")},ir.prototype.toString=function(){return"ElementDescriptor["+co(this.type).name+"]"},ir.prototype.valueHandler=function(u,p){return new ym(u,p)},ir.prototype.referenceHandler=function(u){return new au(u,this.context)},ir.prototype.handler=function(u){return u==="Element"?new zs(this.model,u,this.context):new ir(this.model,u,this.context)},ir.prototype.handleChild=function(u){var p,h,m,_;if(p=this.getPropertyForNode(u),m=this.element,R_(h=p.effectiveType||p.type))return this.valueHandler(p,m);var S=(_=p.isReference?this.referenceHandler(p).handleNode(u):this.handler(h).handleNode(u)).element;return S!==void 0&&(p.isMany?m.get(p.name).push(S):m.set(p.name,S),p.isReference?(L(S,{element:m}),this.context.addReference(S)):S.$parent=m),_},vm.prototype=Object.create(ir.prototype),vm.prototype.createElement=function(u){var p=u.name,h=rr(p),m=this.model,_=this.type,S=m.getPackage(h.prefix),M=S&&I_(h,S)||p;if(!_.hasType(M))throw Wo("unexpected element <"+u.originalName+">");return ir.prototype.createElement.call(this,u)},zs.prototype=Object.create(xp.prototype),zs.prototype.createElement=function(u){var p=u.name,h=rr(p).prefix,m=u.ns[h+"$uri"],_=u.attributes;return this.model.createAny(p,m,_)},zs.prototype.handleChild=function(u){var p=new zs(this.model,"Element",this.context).handleNode(u),h=this.element,m=p.element;return m!==void 0&&((h.$children=h.$children||[]).push(m),m.$parent=h),p},zs.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},xm.prototype.fromXML=function(u,p,h){var m=p.rootHandler;p instanceof ir?(m=p,p={}):typeof p=="string"?(m=this.handler(p),p={}):typeof m=="string"&&(m=this.handler(m));var _=this.model,S=this.lax,M=new CA(L({},p,{rootHandler:m})),O=new D_({proxy:!0}),j=function(){var pe=[];return Object.defineProperty(pe,"peek",{value:function(){return this[this.length-1]}}),pe}();function J(pe,Te,U){var ie=Te(),ne=ie.line,Be=ie.column,be=ie.data;be.charAt(0)==="<"&&be.indexOf(" ")!==-1&&(be=be.slice(0,be.indexOf(" "))+">");var ut="unparsable content "+(be?be+" ":"")+`detected
	line: `+ne+`
	column: `+Be+`
	nested error: `+pe.message;if(U)return M.addWarning({message:ut,error:pe}),!0;throw Wo(ut)}function re(pe,Te){return J(pe,Te,!0)}m.context=M,j.push(m);var me=/^<\?xml /i,Re=/ encoding="([^"]+)"/i,Le=/^utf-8$/i;function Ee(pe,Te){try{j.peek().handleText(pe)}catch(U){re(U,Te)}}var We=_.getPackages().reduce(function(pe,Te){return pe[Te.uri]=Te.prefix,pe},{"http://www.w3.org/XML/1998/namespace":"xml"});return O.ns(We).on("openTag",function(pe,Te,U,ie){var ne=pe.attrs||{},Be=Object.keys(ne).reduce(function(be,ut){var st=Te(ne[ut]);return be[ut]=st,be},{});(function(be,ut){var st=j.peek();try{j.push(st.handleNode(be))}catch(He){J(He,ut,S)&&j.push(new gm)}})({name:pe.name,originalName:pe.originalName,attributes:Be,ns:pe.ns},ie)}).on("question",function(pe){if(me.test(pe)){var Te=Re.exec(pe),U=Te&&Te[1];U&&!Le.test(U)&&M.addWarning({message:"unsupported document encoding <"+U+">, falling back to UTF-8"})}}).on("closeTag",function(){j.pop().handleEnd()}).on("cdata",Ee).on("text",function(pe,Te,U){(function(ie,ne){ie.trim()&&Ee(ie,ne)})(Te(pe),U)}).on("error",J).on("warn",re),new Promise(function(pe,Te){var U;try{O.parse(u),function(){var ut,st,He=M.elementsById,Ut=M.references;for(ut=0;st=Ut[ut];ut++){var _e=st.element,xe=He[st.id],et=co(_e).propertiesByName[st.property];if(xe||M.addWarning({message:"unresolved reference <"+st.id+">",element:st.element,property:st.property,value:st.id}),et.isMany){var pt=_e.get(et.name),mt=pt.indexOf(st);mt===-1&&(mt=pt.length),xe?pt[mt]=xe:pt.splice(mt,1)}else _e.set(et.name,xe)}}()}catch(ut){U=ut}var ie=m.element;U||ie||(U=Wo("failed to parse document as <"+m.type.$descriptor.name+">"));var ne=M.warnings,Be=M.references,be=M.elementsById;return U?(U.warnings=ne,Te(U)):pe({rootElement:ie,elementsById:be,references:Be,warnings:ne})})},xm.prototype.handler=function(u){return new vm(this.model,u)};var RA=/<|>|'|"|&|\n\r|\n/g,j_=/<|>|&/g;function kA(u){var p={},h={},m={},_=[],S=[];this.byUri=function(M){return h[M]||u&&u.byUri(M)},this.add=function(M,O){h[M.uri]=M,O?_.push(M):S.push(M),this.mapPrefix(M.prefix,M.uri)},this.uriByPrefix=function(M){return p[M||"xmlns"]},this.mapPrefix=function(M,O){p[M||"xmlns"]=O},this.getNSKey=function(M){return M.prefix!==void 0?M.uri+"|"+M.prefix:M.uri},this.logUsed=function(M){var O=M.uri,j=this.getNSKey(M);m[j]=this.byUri(O),u&&u.logUsed(M)},this.getUsed=function(M){var O=this;return[].concat(_,S).filter(function(j){var J=O.getNSKey(j);return m[J]})}}function PA(u,p){return O_(p)?(h=u).charAt(0).toLowerCase()+h.slice(1):u;var h}function $_(u,p){u.super_=p,u.prototype=Object.create(p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}})}function F_(u){return d(u)?u:(u.prefix?u.prefix+":":"")+u.localName}var TA={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},AA={"<":"lt",">":"gt","&":"amp"};function z_(u,p,h){return(u=d(u)?u:""+u).replace(p,function(m){return"&"+h[m]+";"})}function _m(u){this.tagName=u}function Ya(){}function wm(u){this.tagName=u}function Wt(u,p){this.body=[],this.attrs=[],this.parent=u,this.propertyDescriptor=p}function _p(u,p){Wt.call(this,u,p)}function MA(){this.value="",this.write=function(u){this.value+=u}}function NA(u,p){var h=[""];this.append=function(m){return u.write(m),this},this.appendNewLine=function(){return p&&u.write(`
`),this},this.appendIndent=function(){return p&&u.write(h.join("  ")),this},this.indent=function(){return h.push(""),this},this.unindent=function(){return h.pop(),this}}function DA(u){return u=L({format:!1,preamble:!0},u||{}),{toXML:function(p,h){var m=h||new MA,_=new NA(m,u.format);if(u.preamble&&_.append(`<?xml version="1.0" encoding="UTF-8"?>
`),new Wt().build(p).serializeTo(_),!h)return m.value}}}function wp(u,p){li.call(this,u,p)}_m.prototype.build=function(u){return this.element=u,this},_m.prototype.serializeTo=function(u){u.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Ya.prototype.serializeValue=Ya.prototype.serializeTo=function(u){u.append(this.escape?z_(this.value,j_,AA):this.value)},Ya.prototype.build=function(u,p){return this.value=p,u.type==="String"&&p.search(j_)!==-1&&(this.escape=!0),this},$_(wm,Ya),wm.prototype.serializeTo=function(u){u.appendIndent().append("<"+this.tagName+">"),this.serializeValue(u),u.append("</"+this.tagName+">").appendNewLine()},Wt.prototype.build=function(u){this.element=u;var p,h,m=u.$descriptor,_=this.propertyDescriptor,S=m.isGeneric;return p=S?this.parseGeneric(u):this.parseNsAttributes(u),this.ns=_?this.nsPropertyTagName(_):this.nsTagName(m),this.tagName=this.addTagName(this.ns),S||(h=function(M){return v(M.$descriptor.properties,function(O){var j=O.name;if(O.isVirtual||!g(M,j))return!1;var J=M[j];return J!==O.default&&J!==null&&(!O.isMany||J.length)})}(u),this.parseAttributes(v(h,function(M){return M.isAttr})),this.parseContainments(function(M){return v(M,function(O){return!O.isAttr})}(h))),this.parseGenericAttributes(u,p),this},Wt.prototype.nsTagName=function(u){return function(p,h){return h.isGeneric?L({localName:h.ns.localName},p):L({localName:PA(h.ns.localName,h.$pkg)},p)}(this.logNamespaceUsed(u.ns),u)},Wt.prototype.nsPropertyTagName=function(u){return function(p,h){return L({localName:h.ns.localName},p)}(this.logNamespaceUsed(u.ns),u)},Wt.prototype.isLocalNs=function(u){return u.uri===this.ns.uri},Wt.prototype.nsAttributeName=function(u){var p;if(p=d(u)?rr(u):u.ns,u.inherited)return{localName:p.localName};var h=this.logNamespaceUsed(p);return this.getNamespaces().logUsed(h),this.isLocalNs(h)?{localName:p.localName}:L({localName:p.localName},h)},Wt.prototype.parseGeneric=function(u){var p=this,h=this.body,m=[];return x(u,function(_,S){S==="$body"?h.push(new Ya().build({type:"String"},_)):S==="$children"?x(_,function(M){h.push(new Wt(p).build(M))}):S.indexOf("$")!==0&&p.parseNsAttribute(u,S,_)&&m.push({name:S,value:_})}),m},Wt.prototype.parseNsAttribute=function(u,p,h){var m,_=u.$model,S=rr(p);if(S.prefix==="xmlns"&&(m={prefix:S.localName,uri:h}),S.prefix||S.localName!=="xmlns"||(m={uri:h}),!m)return{name:p,value:h};if(_&&_.getPackage(h))this.logNamespace(m,!0,!0);else{var M=this.logNamespaceUsed(m,!0);this.getNamespaces().logUsed(M)}},Wt.prototype.parseNsAttributes=function(u,p){var h=this,m=u.$attrs,_=[];return x(m,function(S,M){var O=h.parseNsAttribute(u,M,S);O&&_.push(O)}),_},Wt.prototype.parseGenericAttributes=function(u,p){var h=this;x(p,function(m){if(m.name!==vp)try{h.addAttribute(h.nsAttributeName(m.name),m.value)}catch(_){console.warn("missing namespace information for ",m.name,"=",m.value,"on",u,_)}})},Wt.prototype.parseContainments=function(u){var p=this,h=this.body,m=this.element;x(u,function(_){var S=m.get(_.name),M=_.isReference;if(_.isMany||(S=[S]),_.isBody)h.push(new Ya().build(_,S[0]));else if(R_(_.type))x(S,function(J){h.push(new wm(p.addTagName(p.nsPropertyTagName(_))).build(_,J))});else if(M)x(S,function(J){h.push(new _m(p.addTagName(p.nsPropertyTagName(_))).build(J))});else{var O=B_(_),j=function(J){return L_(J)==="property"}(_);x(S,function(J){var re;re=O?new _p(p,_):j?new Wt(p,_):new Wt(p),h.push(re.build(J))})}})},Wt.prototype.getNamespaces=function(u){var p,h=this.namespaces,m=this.parent;return h||(p=m&&m.getNamespaces(),u||!p?this.namespaces=h=new kA(p):h=p),h},Wt.prototype.logNamespace=function(u,p,h){var m=this.getNamespaces(h),_=u.uri,S=u.prefix;return m.byUri(_)&&!h||m.add(u,p),m.mapPrefix(S,_),u},Wt.prototype.logNamespaceUsed=function(u,p){var h,m,_,S=this.element.$model,M=this.getNamespaces(p),O=u.prefix,j=u.uri;if(!O&&!j)return{localName:u.localName};if(_=SA[O]||S&&(S.getPackage(O)||{}).uri,!(j=j||_||M.uriByPrefix(O)))throw new Error("no namespace uri given for prefix <"+O+">");if(!(u=M.byUri(j))){for(h=O,m=1;M.uriByPrefix(h);)h=O+"_"+m++;u=this.logNamespace({prefix:h,uri:j},_===j)}return O&&M.mapPrefix(O,j),u},Wt.prototype.parseAttributes=function(u){var p=this,h=this.element;x(u,function(m){var _=h.get(m.name);if(m.isReference)if(m.isMany){var S=[];x(_,function(M){S.push(M.id)}),_=S.join(" ")}else _=_.id;p.addAttribute(p.nsAttributeName(m),_)})},Wt.prototype.addTagName=function(u){var p=this.logNamespaceUsed(u);return this.getNamespaces().logUsed(p),F_(u)},Wt.prototype.addAttribute=function(u,p){var h=this.attrs;d(p)&&(p=z_(p,RA,TA));var m=function(S,M){const O=b(M);let j=s(S)?-1:void 0;return x(S,function(J,re){if(O(J,re))return j=re,!1}),j}(h,function(S){return S.name.localName===u.localName&&S.name.uri===u.uri&&S.name.prefix===u.prefix}),_={name:u,value:p};m!==-1?h.splice(m,1,_):h.push(_)},Wt.prototype.serializeAttributes=function(u){var p=this.attrs,h=this.namespaces;h&&(p=function(m){return m.getUsed().filter(function(_){return _.prefix!=="xml"}).map(function(_){return{name:"xmlns"+(_.prefix?":"+_.prefix:""),value:_.uri}})}(h).concat(p)),x(p,function(m){u.append(" ").append(F_(m.name)).append('="').append(m.value).append('"')})},Wt.prototype.serializeTo=function(u){var p=this.body[0],h=p&&p.constructor!==Ya;u.appendIndent().append("<"+this.tagName),this.serializeAttributes(u),u.append(p?">":" />"),p&&(h&&u.appendNewLine().indent(),x(this.body,function(m){m.serializeTo(u)}),h&&u.unindent().appendIndent(),u.append("</"+this.tagName+">")),u.appendNewLine()},$_(_p,Wt),_p.prototype.parseNsAttributes=function(u){var p=Wt.prototype.parseNsAttributes.call(this,u),h=u.$descriptor;if(h.name===this.propertyDescriptor.type)return p;var m=this.typeNs=this.nsTagName(h);this.getNamespaces().logUsed(this.typeNs);var _=u.$model.getPackage(m.uri),S=_.xml&&_.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(vp),(m.prefix?m.prefix+":":"")+S+h.ns.localName),p},_p.prototype.isLocalNs=function(u){return u.uri===(this.typeNs||this.ns).uri},wp.prototype=Object.create(li.prototype),wp.prototype.fromXML=function(u,p,h){d(p)||(h=p,p="bpmn:Definitions");var m=new xm(L({model:this,lax:!0},h)),_=m.handler(p);return m.fromXML(u,_)},wp.prototype.toXML=function(u,p){var h=new DA(p);return new Promise(function(m,_){try{return m({xml:h.toXML(u)})}catch(S){return _(S)}})};var OA={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function LA(u,p){return new wp(L({},OA,u),p)}var BA="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function hr(u,p){return u.$instanceOf(p)}function IA(u){var p={},h=[],m={};function _(_e,xe){return function(et){_e(et,xe)}}function S(_e){p[_e.id]=_e}function M(_e,xe){try{var et=m[_e.id]&&function(pt,mt){if(pt.gfx)throw new Error(`already rendered ${Kn(pt)}`);return u.element(pt,m[pt.id],mt)}(_e,xe);return S(_e),et}catch(pt){O(pt.message,{element:_e,error:pt}),console.error(`failed to import ${Kn(_e)}`,pt)}}function O(_e,xe){u.error(_e,xe)}var j=this.registerDi=function(_e){var xe,et=_e.bpmnElement;et?m[et.id]?O(`multiple DI elements defined for ${Kn(et)}`,{element:et}):(m[et.id]=_e,g(xe=et,"di")||Object.defineProperty(xe,"di",{enumerable:!1,get:function(){throw new Error(BA)}})):O(`no bpmnElement referenced in ${Kn(_e)}`,{element:_e})};function J(_e){var xe;xe=_e.plane,j(xe),x(xe.planeElement,re)}function re(_e){j(_e)}this.handleDefinitions=function(_e,xe){var et=_e.diagrams;if(xe&&et.indexOf(xe)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!xe&&et&&et.length&&(xe=et[0]),!xe)throw new Error("no diagram to display");m={},J(xe);var pt=xe.plane;if(!pt)throw new Error(`no plane for ${Kn(xe)}`);var mt=pt.bpmnElement;if(!mt){if(mt=function(ui){return y(ui.rootElements,function(en){return hr(en,"bpmn:Process")||hr(en,"bpmn:Collaboration")})}(_e),!mt)throw new Error("no process or collaboration to display");O(`correcting missing bpmnElement on ${Kn(pt)} to ${Kn(mt)}`),pt.bpmnElement=mt,j(pt)}var Ur,Ft,kr=function(ui,en){return u.root(ui,m[ui.id],en)}(mt,pt);if(hr(mt,"bpmn:Process")||hr(mt,"bpmn:SubProcess"))Re(mt,kr);else{if(!hr(mt,"bpmn:Collaboration"))throw new Error(`unsupported bpmnElement for ${Kn(pt)}: ${Kn(mt)}`);Ft=kr,x((Ur=mt).participants,_(Ut,Ft)),U(Ur.artifacts,Ft),h.push(function(){(function(ui,en){x(ui,_(Le,en))})(Ur.messageFlows,Ft)}),function(ui,en){var Gr=v(ui,function(Pt){return!p[Pt.id]&&hr(Pt,"bpmn:Process")&&Pt.laneSets});Gr.forEach(_(Re,en))}(_e.rootElements,kr)}me(h)};var me=this.handleDeferred=function(){for(;h.length;)h.shift()()};function Re(_e,xe){He(_e,xe),ie(_e.ioSpecification,xe),U(_e.artifacts,xe),S(_e)}function Le(_e,xe){M(_e,xe)}function Ee(_e,xe){M(_e,xe)}function We(_e,xe){M(_e,xe)}function pe(_e,xe){M(_e,xe)}function Te(_e,xe){M(_e,xe)}function U(_e,xe){x(_e,function(et){hr(et,"bpmn:Association")?h.push(function(){Te(et,xe)}):Te(et,xe)})}function ie(_e,xe){_e&&(x(_e.dataInputs,_(We,xe)),x(_e.dataOutputs,_(pe,xe)))}var ne=this.handleSubProcess=function(_e,xe){He(_e,xe),U(_e.artifacts,xe)};function Be(_e,xe){var et=M(_e,xe);hr(_e,"bpmn:SubProcess")&&ne(_e,et||xe),hr(_e,"bpmn:Activity")&&ie(_e.ioSpecification,xe),h.push(function(){x(_e.dataInputAssociations,_(Ee,xe)),x(_e.dataOutputAssociations,_(Ee,xe))})}function be(_e,xe){M(_e,xe)}function ut(_e,xe){h.push(function(){var et=M(_e,xe);_e.childLaneSet&&st(_e.childLaneSet,et||xe),function(pt){x(pt.flowNodeRef,function(mt){var Ur=mt.get("lanes");Ur&&Ur.push(pt)})}(_e)})}function st(_e,xe){x(_e.lanes,_(ut,xe))}function He(_e,xe){(function(et,pt){x(et,function(mt){hr(mt,"bpmn:SequenceFlow")?h.push(function(){(function(Ur,Ft){M(Ur,Ft)})(mt,pt)}):hr(mt,"bpmn:BoundaryEvent")?h.unshift(function(){Be(mt,pt)}):hr(mt,"bpmn:FlowNode")?Be(mt,pt):hr(mt,"bpmn:DataObject")||(hr(mt,"bpmn:DataStoreReference")||hr(mt,"bpmn:DataObjectReference")?be(mt,pt):O(`unrecognized flowElement ${Kn(mt)} in context ${Kn(pt&&pt.businessObject)}`,{element:mt,context:pt}))})})(_e.flowElements,xe),_e.laneSets&&function(et,pt){x(et,_(st,pt))}(_e.laneSets,xe)}function Ut(_e,xe){var et=M(_e,xe),pt=_e.processRef;pt&&Re(pt,et||xe)}}function jA(u,p,h){var m,_,S,M=[];function O(j,J){var re=new IA({root:function(Le,Ee){return m.add(Le,Ee)},element:function(Le,Ee,We){return m.add(Le,Ee,We)},error:function(Le,Ee){M.push({message:Le,context:Ee})}});J=J||j.diagrams&&j.diagrams[0];var me=function(Le,Ee){if(!(!Ee||!Ee.plane)){var We,pe=Ee.plane.bpmnElement,Te=pe;G(pe,"bpmn:Process")||G(pe,"bpmn:Collaboration")||(Te=function(be){for(var ut=be;ut;){if(G(ut,"bpmn:Process"))return ut;ut=ut.$parent}}(pe)),We=G(Te,"bpmn:Collaboration")?Te:y(Le.rootElements,function(be){if(G(be,"bpmn:Collaboration"))return y(be.participants,function(ut){return ut.processRef===Te})});var U=[Te];We&&(U=function(be,ut){let st=[];return x(be,function(He,Ut){st.push(ut(He,Ut))}),st}(We.participants,function(be){return be.processRef})).push(We);var ie=H_(U),ne=[Ee],Be=[pe];return x(Le.diagrams,function(be){if(be.plane){var ut=be.plane.bpmnElement;ie.indexOf(ut)!==-1&&Be.indexOf(ut)===-1&&(ne.push(be),Be.push(ut))}}),ne}}(j,J);if(!me)throw new Error("no diagram to display");x(me,function(Le){re.handleDefinitions(j,Le)});var Re=J.plane.bpmnElement.id;S.setRootElement(S.findRoot(Re+"_plane")||S.findRoot(Re))}return new Promise(function(j,J){try{return m=u.get("bpmnImporter"),_=u.get("eventBus"),S=u.get("canvas"),_.fire("import.render.start",{definitions:p}),O(p,h),_.fire("import.render.complete",{error:void 0,warnings:M}),j({warnings:M})}catch(re){return re.warnings=M,J(re)}})}function H_(u){var p=[];return x(u,function(h){h&&(p.push(h),p=p.concat(H_(h.flowElements)))}),p}var po,V_='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',W_={verticalAlign:"middle"},U_={color:"#404040"},$A={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},FA={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},zA={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},HA='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+V_+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function VA(){po||(Cr(po=Hi(HA),$A),Cr(Ti("svg",po),W_),Cr(Ti(".backdrop",po),FA),Cr(Ti(".notice",po),zA),Cr(Ti(".link",po),U_,{margin:"15px 20px 15px 10px",alignSelf:"center"}),tm.bind(po,".backdrop","click",function(u){document.body.removeChild(po)})),document.body.appendChild(po)}function un(u){u=L({},WA,u),this._moddle=this._createModdle(u),this._container=this._createContainer(u),function(p){const h=Hi('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+V_+"</a>");Cr(Ti("svg",h),W_),Cr(h,U_,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),p.appendChild(h),Jh.bind(h,"click",function(m){VA(),m.preventDefault()})}(this._container),this._init(this._container,this._moddle,u)}function Ep(u,p){return u.warnings=p,u}n(un,Ho),un.prototype.importXML=async function(u,p){const h=this;let m=[];try{let S;u=this._emit("import.parse.start",{xml:u})||u;try{S=await this._moddle.fromXML(u,"bpmn:Definitions")}catch(me){throw this._emit("import.parse.complete",{error:me}),me}let M=S.rootElement;const O=S.references,j=S.warnings,J=S.elementsById;m=m.concat(j),M=this._emit("import.parse.complete",(_={error:null,definitions:M,elementsById:J,references:O,warnings:m},h.get("eventBus").createEvent(_)))||M;const re=await this.importDefinitions(M,p);return m=m.concat(re.warnings),this._emit("import.done",{error:null,warnings:m}),{warnings:m}}catch(S){let M=S;throw m=m.concat(M.warnings||[]),Ep(M,m),M=function(O){const j=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(O.message);return j&&(O.message="unparsable content <"+j[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+j[2]),O}(M),this._emit("import.done",{error:M,warnings:M.warnings}),M}var _},un.prototype.importDefinitions=async function(u,p){return this._setDefinitions(u),{warnings:(await this.open(p)).warnings}},un.prototype.open=async function(u){const p=this._definitions;let h=u;if(!p){const _=new Error("no XML imported");throw Ep(_,[]),_}if(typeof u=="string"&&(h=function(_,S){return S&&y(_.diagrams,function(M){return M.id===S})||null}(p,u),!h)){const _=new Error("BPMNDiagram <"+u+"> not found");throw Ep(_,[]),_}try{this.clear()}catch(_){throw Ep(_,[]),_}const{warnings:m}=await jA(this,p,h);return{warnings:m}},un.prototype.saveXML=async function(u){u=u||{};let p,h,m=this._definitions;try{if(!m)throw new Error("no definitions loaded");m=this._emit("saveXML.start",{definitions:m})||m,h=(await this._moddle.toXML(m,u)).xml,h=this._emit("saveXML.serialized",{xml:h})||h}catch(S){p=S}const _=p?{error:p}:{xml:h};if(this._emit("saveXML.done",_),p)throw p;return _},un.prototype.saveSVG=async function(){let u,p;this._emit("saveSVG.start");try{const h=this.get("canvas"),m=h.getActiveLayer(),_=Ti(":scope > defs",h._svg),S=Se(m),M=_?"<defs>"+Se(_)+"</defs>":"",O=m.getBBox();u=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+O.width+'" height="'+O.height+'" viewBox="'+O.x+" "+O.y+" "+O.width+" "+O.height+'" version="1.1">'+M+S+"</svg>"}catch(h){p=h}if(this._emit("saveSVG.done",{error:p,svg:u}),p)throw p;return{svg:u}},un.prototype._setDefinitions=function(u){this._definitions=u},un.prototype.getModules=function(){return this._modules},un.prototype.clear=function(){this.getDefinitions()&&Ho.prototype.clear.call(this)},un.prototype.destroy=function(){Ho.prototype.destroy.call(this),ap(this._container)},un.prototype.on=function(u,p,h,m){return this.get("eventBus").on(u,p,h,m)},un.prototype.off=function(u,p){this.get("eventBus").off(u,p)},un.prototype.attachTo=function(u){if(!u)throw new Error("parentNode required");this.detach(),u.get&&u.constructor.prototype.jquery&&(u=u.get(0)),typeof u=="string"&&(u=Ti(u)),u.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},un.prototype.getDefinitions=function(){return this._definitions},un.prototype.detach=function(){const u=this._container,p=u.parentNode;p&&(this._emit("detach",{}),p.removeChild(u))},un.prototype._init=function(u,p,h){const m=h.modules||this.getModules(h),_=h.additionalModules||[],S=[].concat([{bpmnjs:["value",this],moddle:["value",p]}],m,_),M=L(function(O,j){let J={};return x(Object(O),function(re,me){j.indexOf(me)===-1&&(J[me]=re)}),J}(h,["additionalModules"]),{canvas:L({},h.canvas,{container:u}),modules:S});Ho.call(this,M),h&&h.container&&this.attachTo(h.container)},un.prototype._emit=function(u,p){return this.get("eventBus").fire(u,p)},un.prototype._createContainer=function(u){const p=Hi('<div class="bjs-container"></div>');return Cr(p,{width:G_(u.width),height:G_(u.height),position:u.position}),p},un.prototype._createModdle=function(u){return new LA(L({},this._moddleExtensions,u.moddleExtensions))},un.prototype._modules=[];const WA={width:"100%",height:"100%",position:"relative"};function G_(u){return u+(c(u)?"px":"")}function bp(u){un.call(this,u)}return n(bp,un),bp.prototype._modules=[HT,QT,eA,Qx,iA,Wx],bp.prototype._moddleExtensions={},bp})})(yT);var c7=yT.exports;const vT=sS(c7),xT=({logs:e,headerActions:t,onUpdateLog:n})=>{const r=De.useRef(null);return De.useEffect(()=>{r.current&&(r.current.scrollLeft=r.current.scrollWidth)},[e]),H.jsxs("div",{className:"h-full w-full bg-[#1e1e1e] border-b border-white/10 flex flex-col",children:[H.jsxs("div",{className:"px-6 py-2 border-b border-white/5 flex justify-between items-center bg-[#252525]",children:[H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsx("h3",{className:"text-sm font-medium text-white/70 uppercase tracking-wider mr-4",children:" Timeline"}),H.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[H.jsxs("div",{className:"flex items-center gap-1.5",children:[H.jsx("div",{className:"w-2 h-2 rounded-full bg-[#8ab4f8]"}),H.jsx("span",{className:"text-white/60",children:""})]}),H.jsxs("div",{className:"flex items-center gap-1.5",children:[H.jsx("div",{className:"w-2 h-2 rounded-full bg-[#81c995]"}),H.jsx("span",{className:"text-white/60",children:""})]})]})]}),H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsxs("span",{className:"text-xs text-white/30",children:[e.length," "]}),t]})]}),H.jsxs("div",{ref:r,className:"flex-1 overflow-x-auto overflow-y-hidden flex items-start px-6 gap-8 scrollbar-thin pt-4 pb-8",onWheel:i=>{r.current&&(r.current.scrollLeft+=i.deltaY)},children:[e.length===0&&H.jsx("div",{className:"text-white/20 text-sm italic w-full text-center",children:"..."}),e.map((i,o)=>H.jsxs("div",{className:"relative flex flex-col items-center min-w-[120px] group",children:[o<e.length-1&&H.jsx("div",{className:"absolute top-[18px] left-[50%] w-[calc(100%+32px)] h-[2px] bg-white/10 -z-0"}),H.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold z-10 mb-2 shadow-lg transition-transform group-hover:scale-110 ${i.message.includes("")?"bg-[#81c995] text-[#0f5132]":"bg-[#8ab4f8] text-[#002d6f]"}`,children:o+1}),H.jsx("div",{className:"text-xs text-white/50 mt-1",children:E5(i.time)}),H.jsx("div",{className:"text-sm font-medium text-white/90 mt-1 text-center px-2",children:i.message.split(": ")[1]||i.message}),H.jsxs("div",{className:"flex gap-2 mt-2",children:[i.note&&H.jsx("div",{className:"text-xs text-[#fbbc04] font-bold cursor-pointer animate-pulse hover:scale-110 transition border border-[#fbbc04]/30 px-2 py-0.5 rounded bg-[#fbbc04]/10",title:i.note,onClick:()=>{if(n){const a=prompt(":",i.note);a!==null&&n(o,a)}},children:""}),i.value&&i.value!=="-"&&i.value!=='"-"'&&H.jsx("div",{className:"text-xs text-[#81c995] font-bold cursor-help hover:scale-110 transition border border-[#81c995]/30 px-2 py-0.5 rounded bg-[#81c995]/10",title:i.value,children:""})]})]},o))]})]})},p7=({task:e,onStart:t,onEnd:n,onFinish:r,onClose:i,note:o,setNote:a,tagValues:s,loadingTag:l})=>{if(!e)return null;const c=e.status==="running",f=e.status==="completed",d=e.type==="bpmn:EndEvent";return H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:i,children:H.jsxs("div",{className:"bg-[#1e1e1e] border border-white/10 rounded-2xl shadow-2xl w-[400px] overflow-hidden animate-scale-in",onClick:g=>g.stopPropagation(),children:[H.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex justify-between items-center bg-[#252525]",children:[H.jsx("h3",{className:"text-lg font-bold text-white/90",children:e.name}),H.jsx("button",{onClick:i,className:"text-white/40 hover:text-white transition",children:""})]}),H.jsxs("div",{className:"p-6",children:[e.tag&&H.jsxs("div",{className:"mb-6 bg-[#121212] rounded-xl p-4 border border-white/5",children:[H.jsx("div",{className:"text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:" (PI Tag)"}),l?H.jsx("div",{className:"text-white/40 text-sm animate-pulse",children:"..."}):H.jsxs("div",{className:"grid gap-2",children:[s.map((g,y)=>H.jsxs("div",{className:"flex justify-between items-end",children:[H.jsx("span",{className:"text-white/60 text-sm",children:g.tag}),H.jsxs("span",{className:"text-[#81c995] font-mono font-bold",children:[g.value!==void 0?Number(g.value).toFixed(e.precision):"-"," ",H.jsx("span",{className:"text-sm text-white/40",children:e.unit})]})]},y)),s.length===0&&H.jsx("div",{className:"text-white/30 text-sm",children:""})]})]}),H.jsxs("div",{className:"mb-6",children:[H.jsx("label",{className:"block text-xs font-medium text-white/60 mb-2 uppercase tracking-wider",children:" / "}),H.jsx("textarea",{value:o,onChange:g=>a(g.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 rounded-xl p-3 text-white focus:border-[#8ab4f8] outline-none h-24 text-sm resize-none",placeholder:"...",disabled:f})]}),H.jsx("div",{className:"flex gap-3",children:d?H.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl font-medium bg-[#f28b82] hover:bg-[#f6aea9] text-[#5c1e1e] transition shadow-lg shadow-red-500/20",children:""}):H.jsxs(H.Fragment,{children:[!c&&!f&&H.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl font-medium bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] transition shadow-lg shadow-blue-500/20",children:""}),c&&H.jsx("button",{onClick:n,className:"w-full py-3 rounded-xl font-medium bg-[#81c995] hover:bg-[#a8dab5] text-[#0f5132] transition shadow-lg shadow-green-500/20",children:""}),f&&H.jsx("div",{className:"w-full py-3 rounded-xl font-medium bg-[#2d2d2d] text-white/40 text-center border border-white/5 cursor-not-allowed",children:""})]})})]})]})})},f7=({processId:e,onNavigate:t})=>{const n=De.useRef(null),r=De.useRef(null),[i,o]=De.useState(null),[a,s]=De.useState([]),[l,c]=De.useState(null),[f,d]=De.useState(!1),[g,y]=De.useState(!1),[v,x]=De.useState(null),[C,k]=De.useState(""),[R,E]=De.useState([]),[b,D]=De.useState(!1),[I,z]=De.useState(1),L=De.useMemo(()=>"user_"+Math.random().toString(36).substr(2,9),[]),Q=ue=>{if(r.current){const ve=r.current.get("canvas");ve.zoom(ve.zoom()+ue)}},Y=De.useRef(a),G=De.useRef(l);De.useEffect(()=>{Y.current=a},[a]),De.useEffect(()=>{G.current=l},[l]);const ae=(ue,ve)=>!ue||!ue.incoming||ue.incoming.length===0?!0:ue.incoming.every(X=>{if(X.source.type==="bpmn:StartEvent")return!0;const Z=X.source.businessObject.name;return ve.some(se=>se.message.startsWith("")&&se.message.includes(Z))});De.useEffect(()=>{const ue=()=>{const X=r.current;if(!X)return;const Z=X.get("elementRegistry"),se=X.get("canvas");Z.forEach(he=>{if(he.type==="bpmn:TextAnnotation"||he.type==="bpmn:Group"){const B=he.businessObject;let w={};if(B.documentation&&B.documentation.length>0)try{w=JSON.parse(B.documentation[0].text)}catch{}if(he.type==="bpmn:Group"&&(w.noteColor||(w.noteColor="#fff9c4"),w.borderColor||(w.borderColor="#d6b656")),w.noteColor||w.htmlContent||w.textFontSize||w.textColor||w.borderColor)try{const F=se.getGraphics(he);if(!F)return;const K=F.querySelector(".sticky-bg");K&&K.remove();const le=F.querySelector(".sticky-fo");le&&le.remove(),["text","path","rect"].forEach(vt=>{const Qe=F.querySelector(vt);Qe&&(Qe.style.display="none")});let Me=he.width||he.di&&he.di.bounds&&he.di.bounds.width||300,we=he.height||he.di&&he.di.bounds&&he.di.bounds.height||300;const ce=document.createElementNS("http://www.w3.org/2000/svg","rect");ce.setAttribute("class","sticky-bg"),ce.setAttribute("width",Me),ce.setAttribute("height",we),ce.setAttribute("rx","10"),ce.setAttribute("ry","10"),ce.setAttribute("fill",w.noteColor||"#fff9c4"),ce.setAttribute("stroke",w.borderColor||"#d6b656"),ce.setAttribute("stroke-width","2"),ce.setAttribute("fill-opacity",w.noteOpacity!==void 0?w.noteOpacity:1);const Ve=F.querySelector(".djs-visual");if(Ve&&(Ve.firstChild?Ve.insertBefore(ce,Ve.firstChild):Ve.appendChild(ce)),w.htmlContent){const vt=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");vt.setAttribute("class","sticky-fo"),vt.setAttribute("width",Me-20),vt.setAttribute("height",we-20),vt.setAttribute("x","10"),vt.setAttribute("y","10");const Qe=document.createElement("div");Qe.xmlns="http://www.w3.org/1999/xhtml",Qe.style.width="100%",Qe.style.height="100%",Qe.style.overflow="auto",Qe.style.fontSize=`${w.textFontSize||14}px`,Qe.style.color=w.textColor||"#000000",Qe.innerHTML=w.htmlContent,vt.appendChild(Qe),Ve&&Ve.appendChild(vt)}}catch(F){console.error(F)}}})};return(async()=>{if(!e)return;const Z=await(await fetch(`${Kt}/processes/${e}`)).json();o(Z);const he=await(await fetch(`${Kt}/sessions/${e}`)).json();let B=[];he&&!he.is_finished?(B=he.logs||[],s(B),c(he.current_task_id),d(he.is_finished)):(await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:[],is_finished:!1})}),s([]),c(null),d(!1)),r.current&&r.current.destroy();const w=new vT({container:n.current});r.current=w,w._customState={runningTaskId:l,logs:B};try{await w.importXML(Z.xml_content),w.get("canvas").zoom("fit-viewport")}catch(ce){console.error("BPMN Import Error:",ce)}const P=w.get("eventBus"),F=w.get("elementRegistry"),K=w.get("canvas");if(["shape.move.start","connection.create.start","element.dblclick","contextPad.open","palette.create","shape.resize.start","connection.segment.move.start","bendlpoints.move.start","connection.layout.start","element.mousedown"].forEach(ce=>{P.on(ce,1e4,Ve=>{if(ce!=="element.mousedown")return!1})}),P.on("element.click",ce=>{if(w._customState&&w._customState.isFinished)return;const Ve=ce.element;if(Ve.type==="bpmn:DataObjectReference"||Ve.type==="bpmn:DataStoreReference"){const Qe=Ve.businessObject.documentation;if(Qe&&Qe.length>0&&Qe[0].text)try{const xt=JSON.parse(Qe[0].text);if(xt.targetUrl){window.open(xt.targetUrl,"_blank");return}}catch{}}if(["bpmn:Task","bpmn:UserTask","bpmn:ServiceTask","bpmn:SendTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:CallActivity","bpmn:StartEvent","bpmn:EndEvent"].includes(Ve.type)){const Qe=w._customState.logs||[];w._customState.runningTaskId,oe(Ve,Qe)}}),he&&he.current_task_id)try{F.get(he.current_task_id)&&K.addMarker(he.current_task_id,"highlight")}catch(ce){console.error("Error highlighting task:",ce)}if(B.length>0){const ce=B.filter(Ve=>Ve.message.startsWith("")).map(Ve=>Ve.message.split(": ")[1]);F.forEach(Ve=>{ce.includes(Ve.businessObject.name)&&K.addMarker(Ve.id,"completed-task")})}setTimeout(ue,100),setTimeout(ue,500);const Me=[];F.forEach(ce=>{const Ve=ce.businessObject;if(Ve.documentation&&Ve.documentation.length>0)try{const vt=JSON.parse(Ve.documentation[0].text);vt.alwaysOn&&vt.piTag&&Me.push({id:ce.id,name:Ve.name||"",tag:vt.piTag,unit:vt.piUnit||"",precision:vt.piPrecision||2})}catch{}});const we=w.get("overlays");if(Me.length>0){const ce=async()=>{for(const Qe of Me){if(!we)return;let xt=we.get({element:Qe.id}).find(ze=>ze.html&&ze.html.querySelector(`#content-${Qe.id}`)),gt=[];try{gt=await(await fetch(`${Kt}/get_tag_value?tag=${encodeURIComponent(Qe.tag)}`)).json()}catch(ze){console.error(ze)}if(xt){const ze=xt.html.querySelector(`#content-${Qe.id}`);ze&&Ve(ze,gt,Qe)}else{const ze=document.createElement("div");ze.className="bg-[#1e1e1e] border border-white/20 rounded shadow-lg text-xs min-w-[150px] flex flex-col resize-x overflow-auto",ze.style.pointerEvents="auto",ze.style.position="absolute";const ee=document.createElement("div");ee.className="bg-[#2d2d2d] px-2 py-1 flex justify-between items-center cursor-move select-none border-b border-white/10",ee.innerHTML=`
                               <span class="text-white/60 font-medium truncate flex-1 min-w-0 mr-2" title="${Qe.name}">${Qe.name}</span>
                               <button class="text-white/40 hover:text-white transition focus:outline-none">
                                   <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                   </svg>
                               </button>
                           `;const Xe=document.createElement("div");Xe.id=`content-${Qe.id}`,Xe.className="p-2",ze.appendChild(ee),ze.appendChild(Xe),we.add(Qe.id,{type:"always-on-pi",position:{bottom:0,right:-10},html:ze});const Dt=ee.querySelector("button");let Se=!1;Dt.onclick=Nn=>{Nn.stopPropagation(),Se=!Se,Xe.style.display=Se?"none":"block",Dt.innerHTML=Se?'<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>':'<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>'};let Ie=!1,Lt,_t,wt,ct;ee.onmousedown=Nn=>{Nn.stopPropagation(),Ie=!0,Lt=Nn.clientX,_t=Nn.clientY;const oi=window.getComputedStyle(ze);let fr=0,Pi=0;if(window.WebKitCSSMatrix){const zr=new WebKitCSSMatrix(oi.transform);fr=zr.m41,Pi=zr.m42}wt=fr,ct=Pi,document.onmousemove=Gn,document.onmouseup=Cn};const Gn=Nn=>{if(!Ie)return;const oi=Nn.clientX-Lt,fr=Nn.clientY-_t;ze.style.transform=`translate(${wt+oi}px, ${ct+fr}px)`},Cn=()=>{Ie=!1,document.onmousemove=null,document.onmouseup=null};Ve(Xe,gt,Qe)}}},Ve=(Qe,xt,gt)=>{if(Qe.innerHTML="",xt.forEach(ze=>{const ee=document.createElement("div");ee.className="flex justify-between gap-4 mb-1 last:mb-0";const Xe=document.createElement("span");Xe.className="text-white/60 flex-1 min-w-0 break-all",Xe.innerText=ze.tag;const Dt=document.createElement("span");Dt.className="text-[#81c995] font-mono font-bold";const Se=parseFloat(ze.value);Dt.innerText=isNaN(Se)?ze.value:Se.toFixed(gt.precision),ee.appendChild(Xe),ee.appendChild(Dt),Qe.appendChild(ee)}),gt.unit){const ze=document.createElement("div");ze.className="text-right text-white/40 text-[10px] mt-1",ze.innerText=gt.unit,Qe.appendChild(ze)}},vt=setInterval(ce,5e3);w._customInterval=vt,ce()}})(),()=>{r.current&&(r.current._customInterval&&clearInterval(r.current._customInterval),r.current.destroy())}},[e]),De.useEffect(()=>{const ue=n.current;if(!ue)return;const ve=X=>{if(r.current){if(X.ctrlKey||X.metaKey)return;X.preventDefault(),X.stopPropagation();const Z=r.current.get("canvas"),se=Z.viewbox();Z.viewbox({x:se.x+X.deltaY,y:se.y,width:se.width,height:se.height})}};return ue.addEventListener("wheel",ve,{passive:!1,capture:!0}),()=>ue.removeEventListener("wheel",ve,{capture:!0})},[]),De.useEffect(()=>{if(!r.current)return;r.current._customState={runningTaskId:l,logs:a,isFinished:f};const ue=r.current.get("canvas"),ve=r.current.get("elementRegistry");ve.forEach(se=>{ue.removeMarker(se.id,"highlight"),ue.removeMarker(se.id,"completed-task")});const X={},Z={};a.forEach(se=>{let he=null,B=null;se.message.startsWith(":")?(he="running",B=se.message.substring(5).trim()):se.message.startsWith(":")&&(he="completed",B=se.message.substring(5).trim()),he&&(se.taskId&&(Z[se.taskId]=he),B&&(X[B]=he))}),ve.forEach(se=>{const he=se.id,B=se.businessObject.name;let w=null;Z[he]?w=Z[he]:B&&X[B]&&(w=X[B]),w&&(w==="completed"?ue.addMarker(he,"completed-task"):w==="running"&&ue.addMarker(he,"highlight"))})},[a,f,l]),De.useEffect(()=>{if(!e)return;const ve=setInterval(async()=>{try{const X=await fetch(`${Kt}/sessions/${e}`);if(X.ok){const Z=await X.json();Z&&(JSON.stringify(Z.logs)!==JSON.stringify(a)&&s(Z.logs),Z.is_finished!==f&&d(Z.is_finished),Z.current_task_id!==l&&c(Z.current_task_id))}}catch(X){console.error("Sync error:",X)}},3e3);return()=>clearInterval(ve)},[e,a,f,l]);const oe=(ue,ve,X)=>{const Z=ue.businessObject,se=Z.documentation;let he="",B="",w=2;if(se&&se.length>0&&se[0].text)try{const we=JSON.parse(se[0].text);he=we.piTag,B=we.piUnit,w=parseInt(we.piPrecision)||2}catch{}let P="idle";const F=Z.name||"",K=`: ${F}`,le=`: ${F}`;if(ue.type==="bpmn:StartEvent")ve.some(we=>we.message===K)&&(P="completed");else{const we=ve.some(Ve=>Ve.message===K);ve.some(Ve=>Ve.message===le)?P="completed":we&&(P="running")}const Me=ae(ue,ve);x({id:ue.id,name:Z.name||"",type:ue.type,tag:he,unit:B,precision:w,status:P,canStart:Me}),k(""),E([]),y(!0),he&&(D(!0),fetch(`${Kt}/get_tag_value?tag=${encodeURIComponent(he)}`).then(we=>we.json()).then(we=>{E(we),D(!1)}))},Ce=ue=>{if(!ue||ue.length===0)return;let ve="";i&&i.id&&i.updated_at&&(ve+=`# Metadata: id=${i.id}, version=${i.updated_at}
`),ve+=`Time,Source,Message,Value,Note
`,ue.forEach(w=>{const P=[w.time,w.source,w.message,`"${w.value}"`,`"${w.note}"`].join(",");ve+=P+`
`});const X=new Date,Z=X.getFullYear()+String(X.getMonth()+1).padStart(2,"0")+String(X.getDate()).padStart(2,"0")+String(X.getHours()).padStart(2,"0")+String(X.getMinutes()).padStart(2,"0"),se=new Blob(["\uFEFF"+ve],{type:"text/csv;charset=utf-8;"}),he=URL.createObjectURL(se),B=document.createElement("a");B.setAttribute("href",he),B.setAttribute("download",`${i.name}_${Z}.csv`),document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(he)},kt=async(ue,ve)=>{const X=[...a];X[ue]&&(X[ue].note=ve,s(X),r.current&&(r.current._customState={runningTaskId:l,logs:X}),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:l,logs:X,is_finished:f})}))},Ge=async()=>{if(!v)return;let ue="-";if(v.tag)try{ue=(await(await fetch(`${Kt}/get_tag_value?tag=${encodeURIComponent(v.tag)}`)).json()).map(he=>{const B=parseFloat(he.value),w=isNaN(B)?he.value:B.toFixed(v.precision||2);return`${he.tag}=${w} ${v.unit||""}`}).join(", ")}catch(Z){console.error(Z)}if(v.type==="bpmn:StartEvent"){const Z={time:zp(),source:"User",message:`: ${v.name}`,value:ue,note:C},se=[...a,Z];s(se),c(null),x(B=>({...B,status:"completed"})),r.current&&(r.current._customState={runningTaskId:null,logs:se}),r.current.get("canvas").addMarker(v.id,"completed-task"),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:se,is_finished:!1})}),y(!1);return}const ve={time:zp(),source:"User",message:`: ${v.name}`,value:ue,note:C,taskId:v.id},X=[...a,ve];s(X),c(v.id),x(Z=>({...Z,status:"running"})),r.current&&(r.current._customState={runningTaskId:v.id,logs:X}),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:v.id,logs:X,is_finished:!1})}),y(!1)},Ke=async()=>{if(!v)return;const ue=R.map(Z=>{const se=parseFloat(Z.value),he=isNaN(se)?Z.value:se.toFixed(v.precision||2);return`${Z.tag}=${he} ${v.unit||""}`}).join(", ")||"-",ve={time:zp(),source:"User",message:`: ${v.name}`,value:ue,note:C,taskId:v.id},X=[...a,ve];s(X),c(null),x(Z=>({...Z,status:"completed"})),r.current&&(r.current._customState={runningTaskId:null,logs:X}),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:X,is_finished:!1})}),y(!1)},ye=async()=>{if(!confirm(""))return;const ue={time:zp(),source:"System",message:"",value:"-",note:""},ve=[...a,ue];s(ve),d(!0),await fetch(`${Kt}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,current_task_id:null,logs:ve,is_finished:!0})}),alert(""),y(!1),Ce(ve)};De.useEffect(()=>{if(!e)return;const ue=async()=>{try{const X=await fetch(`${Kt}/heartbeat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_id:e,user_id:L})});if(X.ok){const Z=await X.json();z(Z.online_count)}}catch(X){console.error("Heartbeat error:",X)}};ue();const ve=setInterval(ue,5e3);return()=>clearInterval(ve)},[e,L]);const je=H.jsxs("div",{className:"flex gap-2 items-center",children:[H.jsxs("div",{className:"bg-[#2d2d2d] px-3 py-1 rounded-full flex items-center gap-2 border border-white/10 mr-2",title:"",children:[H.jsxs("span",{className:"relative flex h-2 w-2",children:[H.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),H.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),H.jsxs("span",{className:"text-white/80 text-xs font-medium",children:[I," "]})]}),H.jsx("button",{onClick:()=>Ce(a),className:"bg-[#81c995] hover:bg-[#a8dab5] text-[#0f5132] px-4 py-1 rounded-full font-medium shadow-sm transition text-sm",children:" CSV"}),!f&&H.jsx("button",{onClick:ye,className:"bg-[#f28b82] hover:bg-[#f6aea9] text-[#5c1e1e] px-6 py-1 rounded-full font-medium shadow-sm transition text-sm",children:""}),H.jsx("button",{onClick:()=>t("dashboard"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-4 py-1 rounded-full text-sm font-medium transition",children:""})]});return H.jsxs("div",{className:"flex flex-col h-full relative",children:[H.jsx("div",{className:"h-1/4 min-h-[180px] flex flex-col bg-[#1e1e1e]",children:H.jsx(xT,{logs:a,headerActions:je,onUpdateLog:kt})}),H.jsxs("div",{className:"flex-1 relative bg-white border-t-4 border-[#1e1e1e]",children:[H.jsx("div",{ref:n,className:"w-full h-full operator-mode"}),H.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-10",children:[H.jsx("button",{onClick:()=>Q(.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"+"}),H.jsx("button",{onClick:()=>Q(-.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"-"}),H.jsx("button",{onClick:()=>r.current.get("canvas").zoom("fit-viewport"),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs",children:"Fit"})]}),g&&H.jsx(p7,{task:v,onStart:Ge,onEnd:Ke,onFinish:ye,onClose:()=>y(!1),note:C,setNote:k,tagValues:R,loadingTag:b})]})]})},d7=({processId:e,onNavigate:t})=>{const n=De.useRef(null),[r,i]=De.useState([]),o=De.useRef(null),[a,s]=De.useState(""),[l,c]=De.useState(!1),[f,d]=De.useState(null),g=De.useCallback(()=>{if(!o.current)return;const C=o.current;C.get("canvas");const k=C.get("elementRegistry");k.filter(E=>E.type!=="bpmn:Process").forEach(E=>{const b=k.getGraphics(E),I=E.businessObject.documentation;if(E.type==="bpmn:Group"||E.type==="bpmn:TextAnnotation")try{let z={};if(I&&I.length>0&&I[0].text?z=JSON.parse(I[0].text):E.type==="bpmn:Group"&&(z={noteColor:"#fff2cc",borderColor:"#d6b656"}),z.noteColor||z.htmlContent||z.textFontSize||z.textColor){const L=b.querySelector(".djs-visual path");L&&(L.style.display="none");const Q=b.querySelector(".djs-visual rect");Q&&(Q.style.display="none");let Y=b.querySelector(".sticky-bg");Y&&Y.remove();let G=b.querySelector(".sticky-fo");G&&G.remove();const ae=E.width,oe=E.height,Ce=document.createElementNS("http://www.w3.org/2000/svg","rect");Ce.classList.add("sticky-bg"),Ce.setAttribute("width",ae),Ce.setAttribute("height",oe),Ce.setAttribute("fill",z.noteColor||"transparent"),Ce.setAttribute("stroke",z.borderColor||"transparent"),Ce.setAttribute("fill-opacity",z.noteOpacity!==void 0?z.noteOpacity:1),b.prepend(Ce);const kt=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");kt.classList.add("sticky-fo"),kt.setAttribute("width",ae),kt.setAttribute("height",oe);const Ge=document.createElement("div");Ge.style.width="100%",Ge.style.height="100%",Ge.style.padding="10px",Ge.style.boxSizing="border-box",Ge.style.overflow="hidden",Ge.style.fontSize=`${z.textFontSize||12}px`,Ge.style.fontWeight=z.textBold?"bold":"normal",Ge.style.color=z.textColor||"#000000",Ge.style.fontFamily="Arial, sans-serif",Ge.style.whiteSpace="pre-wrap",Ge.style.wordBreak="break-word",Ge.innerHTML=z.htmlContent||(I&&I[0]&&I[0].text?JSON.parse(I[0].text).text:"")||"",kt.appendChild(Ge),b.appendChild(kt)}if(z.nameFontSize){const L=b.querySelector(".djs-label");L&&(L.style.fontSize=`${z.nameFontSize}px`)}}catch{}})},[]);De.useEffect(()=>{if(!e)return;o.current&&o.current.destroy();const C=new vT({container:n.current});return o.current=C,(async()=>{try{const E=await(await fetch(`${Kt}/processes/${e}`)).json();s(E.name),d(E),await C.importXML(E.xml_content),C.get("canvas").zoom("fit-viewport");const b=C.get("eventBus");["shape.move.start","connection.create.start","shape.resize.start","element.dblclick","contextPad.open","palette.create","autoPlace.start"].forEach(I=>b.on(I,1e4,()=>!1)),setTimeout(g,500)}catch(R){console.error(R)}})(),()=>{o.current&&o.current.destroy()}},[e,g]),De.useEffect(()=>{if(!o.current||r.length===0)return;const C=o.current,k=C.get("canvas"),R=C.get("elementRegistry"),E={};r.forEach(b=>{if(b.message.includes(":")){const D=b.message.split(": ")[1].trim();E[D]||(E[D]="running")}else if(b.message.includes(":")){const D=b.message.split(": ")[1].trim();E[D]="completed"}}),R.forEach(b=>{const D=b.businessObject.name;if(D&&E[D]){const I=E[D];if(I==="completed"){k.addMarker(b.id,"completed-task");const L=R.getGraphics(b).querySelector(".djs-visual rect, .djs-visual circle, .djs-visual polygon");L&&(L.style.fill="#f0f0f0",L.style.stroke="#999")}else I==="running"&&k.addMarker(b.id,"highlight")}})},[r]);const y=C=>{const k=[];let R=0,E=!1;for(let D=0;D<C.length;D++)if(C[D]==='"')E=!E;else if(C[D]===","&&!E){let I=C.substring(R,D).trim();I.startsWith('"')&&I.endsWith('"')&&(I=I.substring(1,I.length-1)),k.push(I),R=D+1}let b=C.substring(R).trim();return b.startsWith('"')&&b.endsWith('"')&&(b=b.substring(1,b.length-1)),k.push(b),k},v=C=>{const k=C.target.files[0];if(!k)return;const R=new FileReader;R.onload=E=>{const D=E.target.result.split(`
`);let I=1;if(D[0].startsWith("# Metadata:")){I=2;const L=D[0].substring(11).split(",");let Q=null,Y=null;L.forEach(G=>{const[ae,oe]=G.split("=").map(Ce=>Ce.trim());ae==="id"&&(Q=parseInt(oe)),ae==="version"&&(Y=oe)}),f&&(Q!==f.id?alert(` (ID: ${Q}) (ID: ${f.id}) `):Y!==f.updated_at&&alert(` (${Y})  (${f.updated_at}) `))}const z=D.slice(I).map(L=>{if(!L.trim())return null;const Q=y(L);return Q.length<4?null:{time:Q[0],source:Q[1],message:Q[2],value:Q[3],note:Q[4]||""}}).filter(L=>L&&L.time);i(z),c(!0)},R.readAsText(k)},x=H.jsx("div",{className:"flex gap-2 items-center",children:H.jsx("button",{onClick:()=>t("dashboard"),className:"bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 px-4 py-1 rounded-full text-sm font-medium transition",children:""})});return H.jsxs("div",{className:"flex flex-col h-full relative",children:[H.jsx("div",{className:"h-1/4 min-h-[180px] flex flex-col bg-[#1e1e1e]",children:H.jsx(xT,{logs:r,headerActions:x})}),H.jsxs("div",{className:"flex-1 relative bg-white border-t-4 border-[#1e1e1e]",children:[H.jsx("div",{ref:n,className:"w-full h-full operator-mode"}),!l&&H.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex flex-col items-center justify-center",children:H.jsxs("div",{className:"bg-[#1e1e1e] p-8 rounded-2xl border border-white/10 text-center max-w-md",children:[H.jsx("div",{className:"text-4xl mb-4",children:""}),H.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:""}),H.jsx("p",{className:"text-white/60 mb-6 text-sm",children:" CSV "}),H.jsxs("label",{className:"bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] px-6 py-2 rounded-full font-bold cursor-pointer transition inline-flex items-center gap-2",children:[H.jsx("span",{children:""}),H.jsx("input",{type:"file",accept:".csv",onChange:v,className:"hidden"})]})]})}),H.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-10",children:[H.jsx("button",{onClick:()=>o.current.get("canvas").zoom(o.current.get("canvas").zoom()+.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"+"}),H.jsx("button",{onClick:()=>o.current.get("canvas").zoom(o.current.get("canvas").zoom()-.2),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] font-bold text-xl",children:"-"}),H.jsx("button",{onClick:()=>o.current.get("canvas").zoom("fit-viewport"),className:"w-10 h-10 bg-[#1e1e1e] text-white rounded-full shadow-lg hover:bg-[#333] text-xs",children:"Fit"})]})]})]})},h7=({onNavigate:e})=>{const[t,n]=De.useState(""),[r,i]=De.useState(!1);De.useEffect(()=>{fetch(`${Kt}/settings`).then(a=>a.json()).then(a=>n(a.pi_server_ip))},[]);const o=async()=>{i(!0),await fetch(`${Kt}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pi_server_ip:t})}),i(!1),alert(""),e("dashboard")};return H.jsx("div",{className:"flex h-full flex-col bg-[#121212] items-center justify-center",children:H.jsxs("div",{className:"bg-[#1e1e1e] p-8 rounded-2xl border border-white/5 w-full max-w-md shadow-xl",children:[H.jsx("h2",{className:"text-2xl font-medium text-white/90 mb-6",children:""}),H.jsxs("div",{className:"mb-6",children:[H.jsx("label",{className:"block text-xs font-medium text-[#8ab4f8] mb-2 uppercase tracking-wider",children:"PI Server IP Address"}),H.jsx("input",{value:t,onChange:a=>n(a.target.value),className:"w-full bg-[#2d2d2d] border border-white/10 focus:border-[#8ab4f8] rounded-lg px-4 py-3 text-white outline-none transition",placeholder:": 10.122.51.60"}),H.jsx("p",{className:"text-white/40 text-xs mt-2",children:" Ping  IP "})]}),H.jsxs("div",{className:"flex gap-3",children:[H.jsx("button",{onClick:()=>e("dashboard"),className:"flex-1 bg-[#2d2d2d] hover:bg-[#3c3c3c] text-white/80 py-3 rounded-full font-medium transition",children:""}),H.jsx("button",{onClick:o,disabled:r,className:"flex-1 bg-[#8ab4f8] hover:bg-[#aecbfa] text-[#002d6f] py-3 rounded-full font-medium transition",children:r?"...":""})]})]})})},m7=()=>{const[e,t]=De.useState("dashboard"),[n,r]=De.useState(null),i=(o,a=null)=>{r(a),t(o)};return H.jsxs("div",{className:"h-full",children:[e==="dashboard"&&H.jsx(S5,{onNavigate:i}),e==="editor"&&H.jsx(u7,{processId:n,onNavigate:i}),e==="operator"&&H.jsx(f7,{processId:n,onNavigate:i}),e==="review"&&H.jsx(d7,{processId:n,onNavigate:i}),e==="settings"&&H.jsx(h7,{onNavigate:i})]})};yg.createRoot(document.getElementById("root")).render(H.jsx(uM.StrictMode,{children:H.jsx(m7,{})}));
//# sourceMappingURL=index-DExyxfEu.js.map
